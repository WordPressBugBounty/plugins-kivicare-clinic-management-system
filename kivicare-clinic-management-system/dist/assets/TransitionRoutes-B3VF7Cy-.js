const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-lCWIDpmK.css","./_payment-gateway-model-BiLTufOy.css","./BodyChartEditor-UXLNUaJU.css"])))=>i.map(i=>d[i]);
import{a7 as dI,a8 as wa,r as f,v as We,j as i,a9 as cj,aa as mI,_ as l,L as ht,u as mt,ab as Bm,N as hg,l as Jn,i as Xi,k as Fi,n as Vn,m as Er,I as ve,J as gt,z as Ke,ac as He,f as ob,ad as uI,ae as hI,af as pI,ag as gI,ah as fI,ai as vI,D as dl,B as Jt,H as be,aj as Yt,h as mn,o as xI,e as Gn,O as ko,c as Cn,ak as Za,al as dc,w as Yc,U as so,am as yI,an as kr,ao as jr,y as pg,F as r_,E as mc,ap as l_,aq as Nx,G as uc,ar as bI,as as wI,q as kI,at as dj,g as Zr,C as jI,au as NI}from"./index-Cty4Gm2O.js";var La=dI();const Wl=wa(La),CI=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),SI=function(t,e){return new URL(t,e).href},mj={},Fr=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let m=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(n.map(u=>{if(u=SI(u,s),u in mj)return;mj[u]=!0;const p=u.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(s)for(let v=o.length-1;v>=0;v--){const x=o[v];if(x.href===u&&(!p||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":CI,p||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),p)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};var _I=/%(((\d+)\$)|(\(([$_a-zA-Z][$_a-zA-Z0-9]*)\)))?[ +0#-]*\d*(\.(\d+|\*))?(ll|[lhqL])?([cduxXefgsp%])/g;function EI(t,...e){var n=0;return Array.isArray(e[0])&&(e=e[0]),t.replace(_I,function(){var s,a,r,o,c;return s=arguments[3],a=arguments[5],r=arguments[7],o=arguments[9],o==="%"?"%":(r==="*"&&(r=e[n],n++),a===void 0?(s===void 0&&(s=n+1),n++,c=e[s-1]):e[0]&&typeof e[0]=="object"&&e[0].hasOwnProperty(a)&&(c=e[0][a]),o==="f"?c=parseFloat(c)||0:o==="d"&&(c=parseInt(c)||0),r!==void 0&&(o==="f"?c=c.toFixed(r):o==="s"&&(c=c.substr(0,r))),c??"")})}function Pi(t,...e){return EI(t,...e)}var Ff={exports:{}};var uj;function TI(){return uj||(uj=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(r=a(r,s(c)))}return r}function s(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var c in r)e.call(r,c)&&r[c]&&(o=a(o,c));return o}function a(r,o){return o?r?r+" "+o:r+o:r}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Ff)),Ff.exports}var AI=TI();const vt=wa(AI);function It(){return It=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},It.apply(null,arguments)}function gg(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function hj(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function DI(t){var e=RI(t,"string");return typeof e=="symbol"?e:String(e)}function RI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function o_(t,e,n){var s=f.useRef(t!==void 0),a=f.useState(e),r=a[0],o=a[1],c=t!==void 0,d=s.current;return s.current=c,!c&&d&&r!==e&&o(e),[c?t:r,f.useCallback(function(m){for(var u=arguments.length,p=new Array(u>1?u-1:0),h=1;h<u;h++)p[h-1]=arguments[h];n&&n.apply(void 0,[m].concat(p)),o(m)},[n])]}function cb(t,e){return Object.keys(e).reduce(function(n,s){var a,r=n,o=r[hj(s)],c=r[s],d=gg(r,[hj(s),s].map(DI)),m=e[s],u=o_(c,o,t[m]),p=u[0],h=u[1];return It({},d,(a={},a[s]=p,a[m]=h,a))},t)}function Zh(t,e){return Zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Zh(t,e)}function db(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Zh(t,e)}const PI=["xxl","xl","lg","md","sm","xs"],MI="xs",qm=f.createContext({prefixes:{},breakpoints:PI,minBreakpoint:MI}),{Consumer:Xhe,Provider:Jhe}=qm;function Dt(t,e){const{prefixes:n}=f.useContext(qm);return t||n[e]||e}function c_(){const{breakpoints:t}=f.useContext(qm);return t}function d_(){const{minBreakpoint:t}=f.useContext(qm);return t}function mb(){const{dir:t}=f.useContext(qm);return t==="rtl"}function Qc(t){return t&&t.ownerDocument||document}function II(t){var e=Qc(t);return e&&e.defaultView||window}function OI(t,e){return II(t).getComputedStyle(t,e)}var LI=/([A-Z])/g;function FI(t){return t.replace(LI,"-$1").toLowerCase()}var $I=/^ms-/;function Du(t){return FI(t).replace($I,"-ms-")}var BI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function qI(t){return!!(t&&BI.test(t))}function Nr(t,e){var n="",s="";if(typeof e=="string")return t.style.getPropertyValue(Du(e))||OI(t).getPropertyValue(Du(e));Object.keys(e).forEach(function(a){var r=e[a];!r&&r!==0?t.style.removeProperty(Du(a)):qI(a)?s+=a+"("+r+") ":n+=Du(a)+": "+r+";"}),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}var $f={exports:{}},Bf,pj;function HI(){if(pj)return Bf;pj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bf=t,Bf}var qf,gj;function zI(){if(gj)return qf;gj=1;var t=HI();function e(){}function n(){}return n.resetWarningCache=e,qf=function(){function s(o,c,d,m,u,p){if(p!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}s.isRequired=s;function a(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return r.PropTypes=r,r},qf}var fj;function VI(){return fj||(fj=1,$f.exports=zI()()),$f.exports}var UI=VI();const Pe=wa(UI),vj={disabled:!1},ub=We.createContext(null);var m_=function(e){return e.scrollTop},Ld="unmounted",Gr="exited",Mi="entering",js="entered",ao="exiting",Xa=(function(t){db(e,t);function e(s,a){var r;r=t.call(this,s,a)||this;var o=a,c=o&&!o.isMounting?s.enter:s.appear,d;return r.appearStatus=null,s.in?c?(d=Gr,r.appearStatus=Mi):d=js:s.unmountOnExit||s.mountOnEnter?d=Ld:d=Gr,r.state={status:d},r.nextCallback=null,r}e.getDerivedStateFromProps=function(a,r){var o=a.in;return o&&r.status===Ld?{status:Gr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var r=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==Mi&&o!==js&&(r=Mi):(o===Mi||o===js)&&(r=ao)}this.updateStatus(!1,r)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,r,o,c;return r=o=c=a,a!=null&&typeof a!="number"&&(r=a.exit,o=a.enter,c=a.appear!==void 0?a.appear:o),{exit:r,enter:o,appear:c}},n.updateStatus=function(a,r){if(a===void 0&&(a=!1),r!==null)if(this.cancelNextCallback(),r===Mi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Wl.findDOMNode(this);o&&m_(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Gr&&this.setState({status:Ld})},n.performEnter=function(a){var r=this,o=this.props.enter,c=this.context?this.context.isMounting:a,d=this.props.nodeRef?[c]:[Wl.findDOMNode(this),c],m=d[0],u=d[1],p=this.getTimeouts(),h=c?p.appear:p.enter;if(!a&&!o||vj.disabled){this.safeSetState({status:js},function(){r.props.onEntered(m)});return}this.props.onEnter(m,u),this.safeSetState({status:Mi},function(){r.props.onEntering(m,u),r.onTransitionEnd(h,function(){r.safeSetState({status:js},function(){r.props.onEntered(m,u)})})})},n.performExit=function(){var a=this,r=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:Wl.findDOMNode(this);if(!r||vj.disabled){this.safeSetState({status:Gr},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:ao},function(){a.props.onExiting(c),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:Gr},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,r){r=this.setNextCallback(r),this.setState(a,r)},n.setNextCallback=function(a){var r=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,r.nextCallback=null,a(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:Wl.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=d[0],u=d[1];this.props.addEndListener(m,u)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Ld)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var c=gg(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return We.createElement(ub.Provider,{value:null},typeof o=="function"?o(a,c):We.cloneElement(We.Children.only(o),c))},e})(We.Component);Xa.contextType=ub;Xa.propTypes={};function Ko(){}Xa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ko,onEntering:Ko,onEntered:Ko,onExit:Ko,onExiting:Ko,onExited:Ko};Xa.UNMOUNTED=Ld;Xa.EXITED=Gr;Xa.ENTERING=Mi;Xa.ENTERED=js;Xa.EXITING=ao;function u_(t){return t.code==="Escape"||t.keyCode===27}function WI(){const t=f.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function jo(t){if(!t||typeof t=="function")return null;const{major:e}=WI();return e>=19?t.props.ref:t.ref}const Zc=!!(typeof window<"u"&&window.document&&window.document.createElement);var Cx=!1,Sx=!1;try{var Hf={get passive(){return Cx=!0},get once(){return Sx=Cx=!0}};Zc&&(window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,!0))}catch{}function h_(t,e,n,s){if(s&&typeof s!="boolean"&&!Sx){var a=s.once,r=s.capture,o=n;!Sx&&a&&(o=n.__once||function c(d){this.removeEventListener(e,c,r),n.call(this,d)},n.__once=o),t.addEventListener(e,o,Cx?s:r)}t.addEventListener(e,n,s)}function _x(t,e,n,s){var a=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(e,n,a),n.__once&&t.removeEventListener(e,n.__once,a)}function gr(t,e,n,s){return h_(t,e,n,s),function(){_x(t,e,n,s)}}function KI(t,e,n,s){if(s===void 0&&(s=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(e,n,s),t.dispatchEvent(a)}}function GI(t){var e=Nr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function YI(t,e,n){n===void 0&&(n=5);var s=!1,a=setTimeout(function(){s||KI(t,"transitionend",!0)},e+n),r=gr(t,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(a),r()}}function p_(t,e,n,s){n==null&&(n=GI(t)||0);var a=YI(t,n,s),r=gr(t,"transitionend",e);return function(){a(),r()}}function xj(t,e){const n=Nr(t,e)||"",s=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*s}function hb(t,e){const n=xj(t,"transitionDuration"),s=xj(t,"transitionDelay"),a=p_(t,r=>{r.target===t&&(a(),e(r))},n+s)}function yd(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...a){e.apply(this,a),n.apply(this,a)}},null)}function g_(t){t.offsetHeight}const yj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function QI(t,e){const n=yj(t),s=yj(e);return a=>{n&&n(a),s&&s(a)}}function fg(t,e){return f.useMemo(()=>QI(t,e),[t,e])}function Xh(t){return t&&"setState"in t?Wl.findDOMNode(t):t??null}const vg=We.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,onExited:r,addEndListener:o,children:c,childRef:d,...m},u)=>{const p=f.useRef(null),h=fg(p,d),g=T=>{h(Xh(T))},v=T=>N=>{T&&p.current&&T(p.current,N)},x=f.useCallback(v(t),[t]),y=f.useCallback(v(e),[e]),b=f.useCallback(v(n),[n]),w=f.useCallback(v(s),[s]),k=f.useCallback(v(a),[a]),_=f.useCallback(v(r),[r]),j=f.useCallback(v(o),[o]);return i.jsx(Xa,{ref:u,...m,onEnter:x,onEntered:b,onEntering:y,onExit:w,onExited:_,onExiting:k,addEndListener:j,nodeRef:p,children:typeof c=="function"?(T,N)=>c(T,{...N,ref:g}):We.cloneElement(c,{ref:g})})});vg.displayName="TransitionWrapper";const ZI={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function XI(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],a=ZI[t];return s+parseInt(Nr(e,a[0]),10)+parseInt(Nr(e,a[1]),10)}const JI={[Gr]:"collapse",[ao]:"collapsing",[Mi]:"collapsing",[js]:"collapse show"},f_=We.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,className:r,children:o,dimension:c="height",in:d=!1,timeout:m=300,mountOnEnter:u=!1,unmountOnExit:p=!1,appear:h=!1,getDimensionValue:g=XI,...v},x)=>{const y=typeof c=="function"?c():c,b=f.useMemo(()=>yd(T=>{T.style[y]="0"},t),[y,t]),w=f.useMemo(()=>yd(T=>{const N=`scroll${y[0].toUpperCase()}${y.slice(1)}`;T.style[y]=`${T[N]}px`},e),[y,e]),k=f.useMemo(()=>yd(T=>{T.style[y]=null},n),[y,n]),_=f.useMemo(()=>yd(T=>{T.style[y]=`${g(y,T)}px`,g_(T)},s),[s,g,y]),j=f.useMemo(()=>yd(T=>{T.style[y]=null},a),[y,a]);return i.jsx(vg,{ref:x,addEndListener:hb,...v,"aria-expanded":v.role?d:null,onEnter:b,onEntering:w,onEntered:k,onExit:_,onExiting:j,childRef:jo(o),in:d,timeout:m,mountOnEnter:u,unmountOnExit:p,appear:h,children:(T,N)=>We.cloneElement(o,{...N,className:vt(r,o.props.className,JI[T],y==="width"&&"collapse-horizontal")})})});f_.displayName="Collapse";function e3(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Tc(t){const e=e3(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Hm=(t=>f.forwardRef((e,n)=>i.jsx("div",{...e,ref:n,className:vt(e.className,t)}))),v_=Hm("h4");v_.displayName="DivStyledAsH4";const x_=f.forwardRef(({className:t,bsPrefix:e,as:n=v_,...s},a)=>(e=Dt(e,"alert-heading"),i.jsx(n,{ref:a,className:vt(t,e),...s})));x_.displayName="AlertHeading";function bj(){return f.useState(null)}function t3(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Hs(t){const e=t3(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function y_(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function n3(t){const e=f.useRef(null);return f.useEffect(()=>{e.current=t}),e.current}const i3=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",s3=typeof document<"u",wj=s3||i3?f.useLayoutEffect:f.useEffect,a3=["as","disabled"];function r3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function l3(t){return!t||t.trim()==="#"}function pb({tagName:t,disabled:e,href:n,target:s,rel:a,role:r,onClick:o,tabIndex:c=0,type:d}){t||(n!=null||s!=null||a!=null?t="a":t="button");const m={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},m];const u=h=>{if((e||t==="a"&&l3(n))&&h.preventDefault(),e){h.stopPropagation();return}o?.(h)},p=h=>{h.key===" "&&(h.preventDefault(),u(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:r??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?s:void 0,"aria-disabled":e||void 0,rel:t==="a"?a:void 0,onClick:u,onKeyDown:p},m]}const b_=f.forwardRef((t,e)=>{let{as:n,disabled:s}=t,a=r3(t,a3);const[r,{tagName:o}]=pb(Object.assign({tagName:n,disabled:s},a));return i.jsx(o,Object.assign({},a,r,{ref:e}))});b_.displayName="Button";const o3=["onKeyDown"];function c3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function d3(t){return!t||t.trim()==="#"}const xg=f.forwardRef((t,e)=>{let{onKeyDown:n}=t,s=c3(t,o3);const[a]=pb(Object.assign({tagName:"a"},s)),r=Hs(o=>{a.onKeyDown(o),n?.(o)});return d3(s.href)||s.role==="button"?i.jsx("a",Object.assign({ref:e},s,a,{onKeyDown:r})):i.jsx("a",Object.assign({ref:e},s,{onKeyDown:n}))});xg.displayName="Anchor";const w_=f.forwardRef(({className:t,bsPrefix:e,as:n=xg,...s},a)=>(e=Dt(e,"alert-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));w_.displayName="AlertLink";const m3={[Mi]:"show",[js]:"show"},za=f.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:s,...a},r)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=f.useCallback((d,m)=>{g_(d),s?.(d,m)},[s]);return i.jsx(vg,{ref:r,addEndListener:hb,...o,onEnter:c,childRef:jo(e),children:(d,m)=>f.cloneElement(e,{...m,className:vt("fade",t,e.props.className,m3[d],n[d])})})});za.displayName="Fade";const u3={"aria-label":Pe.string,onClick:Pe.func,variant:Pe.oneOf(["white"])},yg=f.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},a)=>i.jsx("button",{ref:a,type:"button",className:vt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));yg.displayName="CloseButton";yg.propTypes=u3;const k_=f.forwardRef((t,e)=>{const{bsPrefix:n,show:s=!0,closeLabel:a="Close alert",closeVariant:r,className:o,children:c,variant:d="primary",onClose:m,dismissible:u,transition:p=za,...h}=cb(t,{show:"onClose"}),g=Dt(n,"alert"),v=Tc(b=>{m&&m(!1,b)}),x=p===!0?za:p,y=i.jsxs("div",{role:"alert",...x?void 0:h,ref:e,className:vt(o,g,d&&`${g}-${d}`,u&&`${g}-dismissible`),children:[u&&i.jsx(yg,{onClick:v,"aria-label":a,variant:r}),c]});return x?i.jsx(x,{unmountOnExit:!0,...h,ref:void 0,in:s,children:y}):s?y:null});k_.displayName="Alert";const h3=Object.assign(k_,{Link:w_,Heading:x_}),ma=f.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:s,className:a,as:r="span",...o},c)=>{const d=Dt(t,"badge");return i.jsx(r,{ref:c,...o,className:vt(a,d,n&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});ma.displayName="Badge";const Zt=f.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:s,active:a=!1,disabled:r=!1,className:o,...c},d)=>{const m=Dt(e,"btn"),[u,{tagName:p}]=pb({tagName:t,disabled:r,...c}),h=p;return i.jsx(h,{...u,...c,ref:d,disabled:r,className:vt(o,m,a&&"active",n&&`${m}-${n}`,s&&`${m}-${s}`,c.href&&r&&"disabled")})});Zt.displayName="Button";const Va=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"card-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Va.displayName="CardBody";const j_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"card-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));j_.displayName="CardFooter";const gb=f.createContext(null);gb.displayName="CardHeaderContext";const N_=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const r=Dt(t,"card-header"),o=f.useMemo(()=>({cardHeaderBsPrefix:r}),[r]);return i.jsx(gb.Provider,{value:o,children:i.jsx(n,{ref:a,...s,className:vt(e,r)})})});N_.displayName="CardHeader";const C_=f.forwardRef(({bsPrefix:t,className:e,variant:n,as:s="img",...a},r)=>{const o=Dt(t,"card-img");return i.jsx(s,{ref:r,className:vt(n?`${o}-${n}`:o,e),...a})});C_.displayName="CardImg";const S_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"card-img-overlay"),i.jsx(n,{ref:a,className:vt(t,e),...s})));S_.displayName="CardImgOverlay";const __=f.forwardRef(({className:t,bsPrefix:e,as:n="a",...s},a)=>(e=Dt(e,"card-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));__.displayName="CardLink";const p3=Hm("h6"),E_=f.forwardRef(({className:t,bsPrefix:e,as:n=p3,...s},a)=>(e=Dt(e,"card-subtitle"),i.jsx(n,{ref:a,className:vt(t,e),...s})));E_.displayName="CardSubtitle";const T_=f.forwardRef(({className:t,bsPrefix:e,as:n="p",...s},a)=>(e=Dt(e,"card-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));T_.displayName="CardText";const g3=Hm("h5"),A_=f.forwardRef(({className:t,bsPrefix:e,as:n=g3,...s},a)=>(e=Dt(e,"card-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));A_.displayName="CardTitle";const D_=f.forwardRef(({bsPrefix:t,className:e,bg:n,text:s,border:a,body:r=!1,children:o,as:c="div",...d},m)=>{const u=Dt(t,"card");return i.jsx(c,{ref:m,...d,className:vt(e,u,n&&`bg-${n}`,s&&`text-${s}`,a&&`border-${a}`),children:r?i.jsx(Va,{children:o}):o})});D_.displayName="Card";const Ct=Object.assign(D_,{Img:C_,Title:A_,Subtitle:E_,Body:Va,Link:__,Text:T_,Header:N_,Footer:j_,ImgOverlay:S_});function f3(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function v3(t){const e=f.useRef(t);return e.current=t,e}function R_(t){const e=v3(t);f.useEffect(()=>()=>e.current(),[])}const Ex=2**31-1;function P_(t,e,n){const s=n-Date.now();t.current=s<=Ex?setTimeout(e,s):setTimeout(()=>P_(t,e,n),Ex)}function x3(){const t=f3(),e=f.useRef();return R_(()=>clearTimeout(e.current)),f.useMemo(()=>{const n=()=>clearTimeout(e.current);function s(a,r=0){t()&&(n(),r<=Ex?e.current=setTimeout(a,r):P_(e,a,Date.now()+r))}return{set:s,clear:n,handleRef:e}},[])}function kj(t,e){let n=0;return f.Children.map(t,s=>f.isValidElement(s)?e(s,n++):s)}function y3(t,e){let n=0;f.Children.forEach(t,s=>{f.isValidElement(s)&&e(s,n++)})}function b3(t,e){return f.Children.toArray(t).some(n=>f.isValidElement(n)&&n.type===e)}function w3({as:t,bsPrefix:e,className:n,...s}){e=Dt(e,"col");const a=c_(),r=d_(),o=[],c=[];return a.forEach(d=>{const m=s[d];delete s[d];let u,p,h;typeof m=="object"&&m!=null?{span:u,offset:p,order:h}=m:u=m;const g=d!==r?`-${d}`:"";u&&o.push(u===!0?`${e}${g}`:`${e}${g}-${u}`),h!=null&&c.push(`order${g}-${h}`),p!=null&&c.push(`offset${g}-${p}`)}),[{...s,className:vt(n,...o,...c)},{as:t,bsPrefix:e,spans:o}]}const _t=f.forwardRef((t,e)=>{const[{className:n,...s},{as:a="div",bsPrefix:r,spans:o}]=w3(t);return i.jsx(a,{...s,ref:e,className:vt(n,!o.length&&r)})});_t.displayName="Col";const No=f.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:s,...a},r)=>{const o=Dt(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return i.jsx(n,{ref:r,...a,className:vt(s,e?`${o}${c}`:o)})});No.displayName="Container";var k3=Function.prototype.bind.call(Function.prototype.call,[].slice);function Bl(t,e){return k3(t.querySelectorAll(e))}function j3(t,e,n){const s=f.useRef(t!==void 0),[a,r]=f.useState(e),o=t!==void 0,c=s.current;return s.current=o,!o&&c&&a!==e&&r(e),[o?t:a,f.useCallback((...d)=>{const[m,...u]=d;let p=n?.(m,...u);return r(m),p},[n])]}function N3(){const[,t]=f.useReducer(e=>e+1,0);return t}var jj=Object.prototype.hasOwnProperty;function Nj(t,e,n){for(n of t.keys())if(Kd(n,e))return n}function Kd(t,e){var n,s,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Kd(t[s],e[s]););return s===-1}if(n===Set){if(t.size!==e.size)return!1;for(s of t)if(a=s,a&&typeof a=="object"&&(a=Nj(e,a),!a)||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(s of t)if(a=s[0],a&&typeof a=="object"&&(a=Nj(e,a),!a)||!Kd(s[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(jj.call(t,n)&&++s&&!jj.call(e,n)||!(n in e)||!Kd(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function C3(t){const e=y_();return[t[0],f.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var ms="top",Qs="bottom",Zs="right",us="left",fb="auto",zm=[ms,Qs,Zs,us],Ac="start",um="end",S3="clippingParents",M_="viewport",bd="popper",_3="reference",Cj=zm.reduce(function(t,e){return t.concat([e+"-"+Ac,e+"-"+um])},[]),I_=[].concat(zm,[fb]).reduce(function(t,e){return t.concat([e,e+"-"+Ac,e+"-"+um])},[]),E3="beforeRead",T3="read",A3="afterRead",D3="beforeMain",R3="main",P3="afterMain",M3="beforeWrite",I3="write",O3="afterWrite",L3=[E3,T3,A3,D3,R3,P3,M3,I3,O3];function Fa(t){return t.split("-")[0]}function _s(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ro(t){var e=_s(t).Element;return t instanceof e||t instanceof Element}function $a(t){var e=_s(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function vb(t){if(typeof ShadowRoot>"u")return!1;var e=_s(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Zl=Math.max,Jh=Math.min,Dc=Math.round;function Tx(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function O_(){return!/^((?!chrome|android).)*safari/i.test(Tx())}function Rc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),a=1,r=1;e&&$a(t)&&(a=t.offsetWidth>0&&Dc(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Dc(s.height)/t.offsetHeight||1);var o=ro(t)?_s(t):window,c=o.visualViewport,d=!O_()&&n,m=(s.left+(d&&c?c.offsetLeft:0))/a,u=(s.top+(d&&c?c.offsetTop:0))/r,p=s.width/a,h=s.height/r;return{width:p,height:h,top:u,right:m+p,bottom:u+h,left:m,x:m,y:u}}function xb(t){var e=Rc(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function L_(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&vb(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function fl(t){return t?(t.nodeName||"").toLowerCase():null}function Tr(t){return _s(t).getComputedStyle(t)}function F3(t){return["table","td","th"].indexOf(fl(t))>=0}function jl(t){return((ro(t)?t.ownerDocument:t.document)||window.document).documentElement}function bg(t){return fl(t)==="html"?t:t.assignedSlot||t.parentNode||(vb(t)?t.host:null)||jl(t)}function Sj(t){return!$a(t)||Tr(t).position==="fixed"?null:t.offsetParent}function $3(t){var e=/firefox/i.test(Tx()),n=/Trident/i.test(Tx());if(n&&$a(t)){var s=Tr(t);if(s.position==="fixed")return null}var a=bg(t);for(vb(a)&&(a=a.host);$a(a)&&["html","body"].indexOf(fl(a))<0;){var r=Tr(a);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return a;a=a.parentNode}return null}function Vm(t){for(var e=_s(t),n=Sj(t);n&&F3(n)&&Tr(n).position==="static";)n=Sj(n);return n&&(fl(n)==="html"||fl(n)==="body"&&Tr(n).position==="static")?e:n||$3(t)||e}function yb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Gd(t,e,n){return Zl(t,Jh(e,n))}function B3(t,e,n){var s=Gd(t,e,n);return s>n?n:s}function F_(){return{top:0,right:0,bottom:0,left:0}}function $_(t){return Object.assign({},F_(),t)}function B_(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var q3=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,$_(typeof e!="number"?e:B_(e,zm))};function H3(t){var e,n=t.state,s=t.name,a=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,c=Fa(n.placement),d=yb(c),m=[us,Zs].indexOf(c)>=0,u=m?"height":"width";if(!(!r||!o)){var p=q3(a.padding,n),h=xb(r),g=d==="y"?ms:us,v=d==="y"?Qs:Zs,x=n.rects.reference[u]+n.rects.reference[d]-o[d]-n.rects.popper[u],y=o[d]-n.rects.reference[d],b=Vm(r),w=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0,k=x/2-y/2,_=p[g],j=w-h[u]-p[v],T=w/2-h[u]/2+k,N=Gd(_,T,j),E=d;n.modifiersData[s]=(e={},e[E]=N,e.centerOffset=N-T,e)}}function z3(t){var e=t.state,n=t.options,s=n.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||L_(e.elements.popper,a)&&(e.elements.arrow=a))}const V3={name:"arrow",enabled:!0,phase:"main",fn:H3,effect:z3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pc(t){return t.split("-")[1]}var U3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function W3(t,e){var n=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:Dc(n*a)/a||0,y:Dc(s*a)/a||0}}function _j(t){var e,n=t.popper,s=t.popperRect,a=t.placement,r=t.variation,o=t.offsets,c=t.position,d=t.gpuAcceleration,m=t.adaptive,u=t.roundOffsets,p=t.isFixed,h=o.x,g=h===void 0?0:h,v=o.y,x=v===void 0?0:v,y=typeof u=="function"?u({x:g,y:x}):{x:g,y:x};g=y.x,x=y.y;var b=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),k=us,_=ms,j=window;if(m){var T=Vm(n),N="clientHeight",E="clientWidth";if(T===_s(n)&&(T=jl(n),Tr(T).position!=="static"&&c==="absolute"&&(N="scrollHeight",E="scrollWidth")),T=T,a===ms||(a===us||a===Zs)&&r===um){_=Qs;var A=p&&T===j&&j.visualViewport?j.visualViewport.height:T[N];x-=A-s.height,x*=d?1:-1}if(a===us||(a===ms||a===Qs)&&r===um){k=Zs;var L=p&&T===j&&j.visualViewport?j.visualViewport.width:T[E];g-=L-s.width,g*=d?1:-1}}var C=Object.assign({position:c},m&&U3),P=u===!0?W3({x:g,y:x},_s(n)):{x:g,y:x};if(g=P.x,x=P.y,d){var R;return Object.assign({},C,(R={},R[_]=w?"0":"",R[k]=b?"0":"",R.transform=(j.devicePixelRatio||1)<=1?"translate("+g+"px, "+x+"px)":"translate3d("+g+"px, "+x+"px, 0)",R))}return Object.assign({},C,(e={},e[_]=w?x+"px":"",e[k]=b?g+"px":"",e.transform="",e))}function K3(t){var e=t.state,n=t.options,s=n.gpuAcceleration,a=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,c=n.roundOffsets,d=c===void 0?!0:c,m={placement:Fa(e.placement),variation:Pc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,_j(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,_j(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const G3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:K3,data:{}};var Ru={passive:!0};function Y3(t){var e=t.state,n=t.instance,s=t.options,a=s.scroll,r=a===void 0?!0:a,o=s.resize,c=o===void 0?!0:o,d=_s(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&m.forEach(function(u){u.addEventListener("scroll",n.update,Ru)}),c&&d.addEventListener("resize",n.update,Ru),function(){r&&m.forEach(function(u){u.removeEventListener("scroll",n.update,Ru)}),c&&d.removeEventListener("resize",n.update,Ru)}}const Q3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Y3,data:{}};var Z3={left:"right",right:"left",bottom:"top",top:"bottom"};function _h(t){return t.replace(/left|right|bottom|top/g,function(e){return Z3[e]})}var X3={start:"end",end:"start"};function Ej(t){return t.replace(/start|end/g,function(e){return X3[e]})}function bb(t){var e=_s(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function wb(t){return Rc(jl(t)).left+bb(t).scrollLeft}function J3(t,e){var n=_s(t),s=jl(t),a=n.visualViewport,r=s.clientWidth,o=s.clientHeight,c=0,d=0;if(a){r=a.width,o=a.height;var m=O_();(m||!m&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:r,height:o,x:c+wb(t),y:d}}function e5(t){var e,n=jl(t),s=bb(t),a=(e=t.ownerDocument)==null?void 0:e.body,r=Zl(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Zl(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-s.scrollLeft+wb(t),d=-s.scrollTop;return Tr(a||n).direction==="rtl"&&(c+=Zl(n.clientWidth,a?a.clientWidth:0)-r),{width:r,height:o,x:c,y:d}}function kb(t){var e=Tr(t),n=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+s)}function q_(t){return["html","body","#document"].indexOf(fl(t))>=0?t.ownerDocument.body:$a(t)&&kb(t)?t:q_(bg(t))}function Yd(t,e){var n;e===void 0&&(e=[]);var s=q_(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),r=_s(s),o=a?[r].concat(r.visualViewport||[],kb(s)?s:[]):s,c=e.concat(o);return a?c:c.concat(Yd(bg(o)))}function Ax(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function t5(t,e){var n=Rc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Tj(t,e,n){return e===M_?Ax(J3(t,n)):ro(e)?t5(e,n):Ax(e5(jl(t)))}function n5(t){var e=Yd(bg(t)),n=["absolute","fixed"].indexOf(Tr(t).position)>=0,s=n&&$a(t)?Vm(t):t;return ro(s)?e.filter(function(a){return ro(a)&&L_(a,s)&&fl(a)!=="body"}):[]}function i5(t,e,n,s){var a=e==="clippingParents"?n5(t):[].concat(e),r=[].concat(a,[n]),o=r[0],c=r.reduce(function(d,m){var u=Tj(t,m,s);return d.top=Zl(u.top,d.top),d.right=Jh(u.right,d.right),d.bottom=Jh(u.bottom,d.bottom),d.left=Zl(u.left,d.left),d},Tj(t,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function H_(t){var e=t.reference,n=t.element,s=t.placement,a=s?Fa(s):null,r=s?Pc(s):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,d;switch(a){case ms:d={x:o,y:e.y-n.height};break;case Qs:d={x:o,y:e.y+e.height};break;case Zs:d={x:e.x+e.width,y:c};break;case us:d={x:e.x-n.width,y:c};break;default:d={x:e.x,y:e.y}}var m=a?yb(a):null;if(m!=null){var u=m==="y"?"height":"width";switch(r){case Ac:d[m]=d[m]-(e[u]/2-n[u]/2);break;case um:d[m]=d[m]+(e[u]/2-n[u]/2);break}}return d}function hm(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=s===void 0?t.placement:s,r=n.strategy,o=r===void 0?t.strategy:r,c=n.boundary,d=c===void 0?S3:c,m=n.rootBoundary,u=m===void 0?M_:m,p=n.elementContext,h=p===void 0?bd:p,g=n.altBoundary,v=g===void 0?!1:g,x=n.padding,y=x===void 0?0:x,b=$_(typeof y!="number"?y:B_(y,zm)),w=h===bd?_3:bd,k=t.rects.popper,_=t.elements[v?w:h],j=i5(ro(_)?_:_.contextElement||jl(t.elements.popper),d,u,o),T=Rc(t.elements.reference),N=H_({reference:T,element:k,placement:a}),E=Ax(Object.assign({},k,N)),A=h===bd?E:T,L={top:j.top-A.top+b.top,bottom:A.bottom-j.bottom+b.bottom,left:j.left-A.left+b.left,right:A.right-j.right+b.right},C=t.modifiersData.offset;if(h===bd&&C){var P=C[a];Object.keys(L).forEach(function(R){var M=[Zs,Qs].indexOf(R)>=0?1:-1,O=[ms,Qs].indexOf(R)>=0?"y":"x";L[R]+=P[O]*M})}return L}function s5(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=n.boundary,r=n.rootBoundary,o=n.padding,c=n.flipVariations,d=n.allowedAutoPlacements,m=d===void 0?I_:d,u=Pc(s),p=u?c?Cj:Cj.filter(function(v){return Pc(v)===u}):zm,h=p.filter(function(v){return m.indexOf(v)>=0});h.length===0&&(h=p);var g=h.reduce(function(v,x){return v[x]=hm(t,{placement:x,boundary:a,rootBoundary:r,padding:o})[Fa(x)],v},{});return Object.keys(g).sort(function(v,x){return g[v]-g[x]})}function a5(t){if(Fa(t)===fb)return[];var e=_h(t);return[Ej(t),e,Ej(e)]}function r5(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=n.mainAxis,r=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!0:o,d=n.fallbackPlacements,m=n.padding,u=n.boundary,p=n.rootBoundary,h=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,x=n.allowedAutoPlacements,y=e.options.placement,b=Fa(y),w=b===y,k=d||(w||!v?[_h(y)]:a5(y)),_=[y].concat(k).reduce(function(se,W){return se.concat(Fa(W)===fb?s5(e,{placement:W,boundary:u,rootBoundary:p,padding:m,flipVariations:v,allowedAutoPlacements:x}):W)},[]),j=e.rects.reference,T=e.rects.popper,N=new Map,E=!0,A=_[0],L=0;L<_.length;L++){var C=_[L],P=Fa(C),R=Pc(C)===Ac,M=[ms,Qs].indexOf(P)>=0,O=M?"width":"height",q=hm(e,{placement:C,boundary:u,rootBoundary:p,altBoundary:h,padding:m}),U=M?R?Zs:us:R?Qs:ms;j[O]>T[O]&&(U=_h(U));var H=_h(U),ae=[];if(r&&ae.push(q[P]<=0),c&&ae.push(q[U]<=0,q[H]<=0),ae.every(function(se){return se})){A=C,E=!1;break}N.set(C,ae)}if(E)for(var V=v?3:1,pe=function(W){var ge=_.find(function(ee){var ie=N.get(ee);if(ie)return ie.slice(0,W).every(function(ue){return ue})});if(ge)return A=ge,"break"},oe=V;oe>0;oe--){var ne=pe(oe);if(ne==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const l5={name:"flip",enabled:!0,phase:"main",fn:r5,requiresIfExists:["offset"],data:{_skip:!1}};function Aj(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Dj(t){return[ms,Zs,Qs,us].some(function(e){return t[e]>=0})}function o5(t){var e=t.state,n=t.name,s=e.rects.reference,a=e.rects.popper,r=e.modifiersData.preventOverflow,o=hm(e,{elementContext:"reference"}),c=hm(e,{altBoundary:!0}),d=Aj(o,s),m=Aj(c,a,r),u=Dj(d),p=Dj(m);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const c5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:o5};function d5(t,e,n){var s=Fa(t),a=[us,ms].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],c=r[1];return o=o||0,c=(c||0)*a,[us,Zs].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function m5(t){var e=t.state,n=t.options,s=t.name,a=n.offset,r=a===void 0?[0,0]:a,o=I_.reduce(function(u,p){return u[p]=d5(p,e.rects,r),u},{}),c=o[e.placement],d=c.x,m=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=m),e.modifiersData[s]=o}const u5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:m5};function h5(t){var e=t.state,n=t.name;e.modifiersData[n]=H_({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const p5={name:"popperOffsets",enabled:!0,phase:"read",fn:h5,data:{}};function g5(t){return t==="x"?"y":"x"}function f5(t){var e=t.state,n=t.options,s=t.name,a=n.mainAxis,r=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!1:o,d=n.boundary,m=n.rootBoundary,u=n.altBoundary,p=n.padding,h=n.tether,g=h===void 0?!0:h,v=n.tetherOffset,x=v===void 0?0:v,y=hm(e,{boundary:d,rootBoundary:m,padding:p,altBoundary:u}),b=Fa(e.placement),w=Pc(e.placement),k=!w,_=yb(b),j=g5(_),T=e.modifiersData.popperOffsets,N=e.rects.reference,E=e.rects.popper,A=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,L=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(T){if(r){var R,M=_==="y"?ms:us,O=_==="y"?Qs:Zs,q=_==="y"?"height":"width",U=T[_],H=U+y[M],ae=U-y[O],V=g?-E[q]/2:0,pe=w===Ac?N[q]:E[q],oe=w===Ac?-E[q]:-N[q],ne=e.elements.arrow,se=g&&ne?xb(ne):{width:0,height:0},W=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:F_(),ge=W[M],ee=W[O],ie=Gd(0,N[q],se[q]),ue=k?N[q]/2-V-ie-ge-L.mainAxis:pe-ie-ge-L.mainAxis,G=k?-N[q]/2+V+ie+ee+L.mainAxis:oe+ie+ee+L.mainAxis,le=e.elements.arrow&&Vm(e.elements.arrow),re=le?_==="y"?le.clientTop||0:le.clientLeft||0:0,D=(R=C?.[_])!=null?R:0,I=U+ue-D-re,ce=U+G-D,Z=Gd(g?Jh(H,I):H,U,g?Zl(ae,ce):ae);T[_]=Z,P[_]=Z-U}if(c){var K,B=_==="x"?ms:us,F=_==="x"?Qs:Zs,J=T[j],Q=j==="y"?"height":"width",me=J+y[B],te=J-y[F],Y=[ms,us].indexOf(b)!==-1,Ce=(K=C?.[j])!=null?K:0,ye=Y?me:J-N[Q]-E[Q]-Ce+L.altAxis,Te=Y?J+N[Q]+E[Q]-Ce-L.altAxis:te,et=g&&Y?B3(ye,J,Te):Gd(g?ye:me,J,g?Te:te);T[j]=et,P[j]=et-J}e.modifiersData[s]=P}}const v5={name:"preventOverflow",enabled:!0,phase:"main",fn:f5,requiresIfExists:["offset"]};function x5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function y5(t){return t===_s(t)||!$a(t)?bb(t):x5(t)}function b5(t){var e=t.getBoundingClientRect(),n=Dc(e.width)/t.offsetWidth||1,s=Dc(e.height)/t.offsetHeight||1;return n!==1||s!==1}function w5(t,e,n){n===void 0&&(n=!1);var s=$a(e),a=$a(e)&&b5(e),r=jl(e),o=Rc(t,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((fl(e)!=="body"||kb(r))&&(c=y5(e)),$a(e)?(d=Rc(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):r&&(d.x=wb(r))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function k5(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function a(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var d=e.get(c);d&&a(d)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||a(r)}),s}function j5(t){var e=k5(t);return L3.reduce(function(n,s){return n.concat(e.filter(function(a){return a.phase===s}))},[])}function N5(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function C5(t){var e=t.reduce(function(n,s){var a=n[s.name];return n[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var Rj={placement:"bottom",modifiers:[],strategy:"absolute"};function Pj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function S5(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,a=e.defaultOptions,r=a===void 0?Rj:a;return function(c,d,m){m===void 0&&(m=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rj,r),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},p=[],h=!1,g={state:u,setOptions:function(b){var w=typeof b=="function"?b(u.options):b;x(),u.options=Object.assign({},r,u.options,w),u.scrollParents={reference:ro(c)?Yd(c):c.contextElement?Yd(c.contextElement):[],popper:Yd(d)};var k=j5(C5([].concat(s,u.options.modifiers)));return u.orderedModifiers=k.filter(function(_){return _.enabled}),v(),g.update()},forceUpdate:function(){if(!h){var b=u.elements,w=b.reference,k=b.popper;if(Pj(w,k)){u.rects={reference:w5(w,Vm(k),u.options.strategy==="fixed"),popper:xb(k)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var j=u.orderedModifiers[_],T=j.fn,N=j.options,E=N===void 0?{}:N,A=j.name;typeof T=="function"&&(u=T({state:u,options:E,name:A,instance:g})||u)}}}},update:N5(function(){return new Promise(function(y){g.forceUpdate(),y(u)})}),destroy:function(){x(),h=!0}};if(!Pj(c,d))return g;g.setOptions(m).then(function(y){!h&&m.onFirstUpdate&&m.onFirstUpdate(y)});function v(){u.orderedModifiers.forEach(function(y){var b=y.name,w=y.options,k=w===void 0?{}:w,_=y.effect;if(typeof _=="function"){var j=_({state:u,name:b,instance:g,options:k}),T=function(){};p.push(j||T)}})}function x(){p.forEach(function(y){return y()}),p=[]}return g}}const _5=S5({defaultModifiers:[c5,p5,G3,Q3,u5,l5,v5,V3]}),E5=["enabled","placement","strategy","modifiers"];function T5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const A5={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},D5={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==n.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:s}=t.elements,a=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&a==="tooltip"&&"setAttribute"in s){const r=s.getAttribute("aria-describedby");if(r&&r.split(",").indexOf(n.id)!==-1)return;s.setAttribute("aria-describedby",r?`${r},${n.id}`:n.id)}}},R5=[];function P5(t,e,n={}){let{enabled:s=!0,placement:a="bottom",strategy:r="absolute",modifiers:o=R5}=n,c=T5(n,E5);const d=f.useRef(o),m=f.useRef(),u=f.useCallback(()=>{var y;(y=m.current)==null||y.update()},[]),p=f.useCallback(()=>{var y;(y=m.current)==null||y.forceUpdate()},[]),[h,g]=C3(f.useState({placement:a,update:u,forceUpdate:p,attributes:{},styles:{popper:{},arrow:{}}})),v=f.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:y})=>{const b={},w={};Object.keys(y.elements).forEach(k=>{b[k]=y.styles[k],w[k]=y.attributes[k]}),g({state:y,styles:b,attributes:w,update:u,forceUpdate:p,placement:y.placement})}}),[u,p,g]),x=f.useMemo(()=>(Kd(d.current,o)||(d.current=o),d.current),[o]);return f.useEffect(()=>{!m.current||!s||m.current.setOptions({placement:a,strategy:r,modifiers:[...x,v,A5]})},[r,a,v,s,x]),f.useEffect(()=>{if(!(!s||t==null||e==null))return m.current=_5(t,e,Object.assign({},c,{placement:a,strategy:r,modifiers:[...x,D5,v]})),()=>{m.current!=null&&(m.current.destroy(),m.current=void 0,g(y=>Object.assign({},y,{attributes:{},styles:{popper:{}}})))}},[s,t,e]),h}function pm(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var zf,Mj;function M5(){if(Mj)return zf;Mj=1;var t=function(){};return zf=t,zf}var I5=M5();const O5=wa(I5),Ij=()=>{};function L5(t){return t.button===0}function F5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Eh=t=>t&&("current"in t?t.current:t),Oj={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function $5(t,e=Ij,{disabled:n,clickTrigger:s="click"}={}){const a=f.useRef(!1),r=f.useRef(!1),o=f.useCallback(m=>{const u=Eh(t);O5(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!u||F5(m)||!L5(m)||!!pm(u,m.target)||r.current,r.current=!1},[t]),c=Hs(m=>{const u=Eh(t);u&&pm(u,m.target)?r.current=!0:r.current=!1}),d=Hs(m=>{a.current||e(m)});f.useEffect(()=>{var m,u;if(n||t==null)return;const p=Qc(Eh(t)),h=p.defaultView||window;let g=(m=h.event)!=null?m:(u=h.parent)==null?void 0:u.event,v=null;Oj[s]&&(v=gr(p,Oj[s],c,!0));const x=gr(p,s,o,!0),y=gr(p,s,w=>{if(w===g){g=void 0;return}d(w)});let b=[];return"ontouchstart"in p.documentElement&&(b=[].slice.call(p.body.children).map(w=>gr(w,"mousemove",Ij))),()=>{v?.(),x(),y(),b.forEach(w=>w())}},[t,n,s,o,c,d])}function B5(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function q5(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function H5({enabled:t,enableEvents:e,placement:n,flip:s,offset:a,fixed:r,containerPadding:o,arrowElement:c,popperConfig:d={}}){var m,u,p,h,g;const v=B5(d.modifiers);return Object.assign({},d,{placement:n,enabled:t,strategy:r?"fixed":d.strategy,modifiers:q5(Object.assign({},v,{eventListeners:{enabled:e,options:(m=v.eventListeners)==null?void 0:m.options},preventOverflow:Object.assign({},v.preventOverflow,{options:o?Object.assign({padding:o},(u=v.preventOverflow)==null?void 0:u.options):(p=v.preventOverflow)==null?void 0:p.options}),offset:{options:Object.assign({offset:a},(h=v.offset)==null?void 0:h.options)},arrow:Object.assign({},v.arrow,{enabled:!!c,options:Object.assign({},(g=v.arrow)==null?void 0:g.options,{element:c})}),flip:Object.assign({enabled:!!s},v.flip)}))})}const z_={prefix:String(Math.round(Math.random()*1e10)),current:0},V_=We.createContext(z_),z5=We.createContext(!1);let Vf=new WeakMap;function V5(t=!1){let e=f.useContext(V_),n=f.useRef(null);if(n.current===null&&!t){var s,a;let r=(a=We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(s=a.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(r){let o=Vf.get(r);o==null?Vf.set(r,{id:e.current,state:r.memoizedState}):r.memoizedState!==o.state&&(e.current=o.id,Vf.delete(r))}n.current=++e.current}return n.current}function U5(t){let e=f.useContext(V_),n=V5(!!t),s=`react-aria${e.prefix}`;return t||`${s}-${n}`}function W5(t){let e=We.useId(),[n]=f.useState(Z5()),s=n?"react-aria":`react-aria${z_.prefix}`;return t||`${s}-${e}`}const K5=typeof We.useId=="function"?W5:U5;function G5(){return!1}function Y5(){return!0}function Q5(t){return()=>{}}function Z5(){return typeof We.useSyncExternalStore=="function"?We.useSyncExternalStore(Q5,G5,Y5):f.useContext(z5)}const Mc=f.createContext(null),gm=(t,e=null)=>t!=null?String(t):e||null,jb=f.createContext(null);jb.displayName="NavContext";const X5="data-rr-ui-",J5="rrUi";function wg(t){return`${X5}${t}`}function eO(t){return`${J5}${t}`}const U_=f.createContext(Zc?window:void 0);U_.Provider;function Nb(){return f.useContext(U_)}const tO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",nO=typeof document<"u",W_=nO||tO?f.useLayoutEffect:f.useEffect,K_=f.createContext(null);K_.displayName="InputGroupContext";const G_=f.createContext(null);G_.displayName="NavbarContext";Pe.string,Pe.bool,Pe.bool,Pe.bool,Pe.bool;const Y_=f.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:s=!1,roundedCircle:a=!1,thumbnail:r=!1,...o},c)=>(t=Dt(t,"img"),i.jsx("img",{ref:c,...o,className:vt(e,n&&`${t}-fluid`,s&&"rounded",a&&"rounded-circle",r&&`${t}-thumbnail`)})));Y_.displayName="Image";const iO={type:Pe.string,tooltip:Pe.bool,as:Pe.elementType},kg=f.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:s=!1,...a},r)=>i.jsx(t,{...a,ref:r,className:vt(e,`${n}-${s?"tooltip":"feedback"}`)}));kg.displayName="Feedback";kg.propTypes=iO;const Ar=f.createContext({}),Um=f.forwardRef(({id:t,bsPrefix:e,className:n,type:s="checkbox",isValid:a=!1,isInvalid:r=!1,as:o="input",...c},d)=>{const{controlId:m}=f.useContext(Ar);return e=Dt(e,"form-check-input"),i.jsx(o,{...c,ref:d,type:s,id:t||m,className:vt(n,e,a&&"is-valid",r&&"is-invalid")})});Um.displayName="FormCheckInput";const ep=f.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...s},a)=>{const{controlId:r}=f.useContext(Ar);return t=Dt(t,"form-check-label"),i.jsx("label",{...s,ref:a,htmlFor:n||r,className:vt(e,t)})});ep.displayName="FormCheckLabel";const Q_=f.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:s=!1,reverse:a=!1,disabled:r=!1,isValid:o=!1,isInvalid:c=!1,feedbackTooltip:d=!1,feedback:m,feedbackType:u,className:p,style:h,title:g="",type:v="checkbox",label:x,children:y,as:b="input",...w},k)=>{e=Dt(e,"form-check"),n=Dt(n,"form-switch");const{controlId:_}=f.useContext(Ar),j=f.useMemo(()=>({controlId:t||_}),[_,t]),T=!y&&x!=null&&x!==!1||b3(y,ep),N=i.jsx(Um,{...w,type:v==="switch"?"checkbox":v,ref:k,isValid:o,isInvalid:c,disabled:r,as:b});return i.jsx(Ar.Provider,{value:j,children:i.jsx("div",{style:h,className:vt(p,T&&e,s&&`${e}-inline`,a&&`${e}-reverse`,v==="switch"&&n),children:y||i.jsxs(i.Fragment,{children:[N,T&&i.jsx(ep,{title:g,children:x}),m&&i.jsx(kg,{type:u,tooltip:d,children:m})]})})})});Q_.displayName="FormCheck";const tp=Object.assign(Q_,{Input:Um,Label:ep}),Z_=f.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:s,id:a,className:r,isValid:o=!1,isInvalid:c=!1,plaintext:d,readOnly:m,as:u="input",...p},h)=>{const{controlId:g}=f.useContext(Ar);return t=Dt(t,"form-control"),i.jsx(u,{...p,type:e,size:s,ref:h,readOnly:m,id:a||g,className:vt(r,d?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",c&&"is-invalid")})});Z_.displayName="FormControl";const sO=Object.assign(Z_,{Feedback:kg}),X_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"form-floating"),i.jsx(n,{ref:a,className:vt(t,e),...s})));X_.displayName="FormFloating";const Cb=f.forwardRef(({controlId:t,as:e="div",...n},s)=>{const a=f.useMemo(()=>({controlId:t}),[t]);return i.jsx(Ar.Provider,{value:a,children:i.jsx(e,{...n,ref:s})})});Cb.displayName="FormGroup";const J_=f.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:s=!1,className:a,htmlFor:r,...o},c)=>{const{controlId:d}=f.useContext(Ar);e=Dt(e,"form-label");let m="col-form-label";typeof n=="string"&&(m=`${m} ${m}-${n}`);const u=vt(a,e,s&&"visually-hidden",n&&m);return r=r||d,n?i.jsx(_t,{ref:c,as:"label",className:u,htmlFor:r,...o}):i.jsx(t,{ref:c,className:u,htmlFor:r,...o})});J_.displayName="FormLabel";const eE=f.forwardRef(({bsPrefix:t,className:e,id:n,...s},a)=>{const{controlId:r}=f.useContext(Ar);return t=Dt(t,"form-range"),i.jsx("input",{...s,type:"range",ref:a,className:vt(e,t),id:n||r})});eE.displayName="FormRange";const tE=f.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:s,isValid:a=!1,isInvalid:r=!1,id:o,...c},d)=>{const{controlId:m}=f.useContext(Ar);return t=Dt(t,"form-select"),i.jsx("select",{...c,size:n,ref:d,className:vt(s,t,e&&`${t}-${e}`,a&&"is-valid",r&&"is-invalid"),id:o||m})});tE.displayName="FormSelect";const nE=f.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:s,...a},r)=>(t=Dt(t,"form-text"),i.jsx(n,{...a,ref:r,className:vt(e,t,s&&"text-muted")})));nE.displayName="FormText";const iE=f.forwardRef((t,e)=>i.jsx(tp,{...t,ref:e,type:"switch"}));iE.displayName="Switch";const aO=Object.assign(iE,{Input:tp.Input,Label:tp.Label}),sE=f.forwardRef(({bsPrefix:t,className:e,children:n,controlId:s,label:a,...r},o)=>(t=Dt(t,"form-floating"),i.jsxs(Cb,{ref:o,className:vt(e,t),controlId:s,...r,children:[n,i.jsx("label",{htmlFor:s,children:a})]})));sE.displayName="FloatingLabel";const rO={_ref:Pe.any,validated:Pe.bool,as:Pe.elementType},Sb=f.forwardRef(({className:t,validated:e,as:n="form",...s},a)=>i.jsx(n,{...s,ref:a,className:vt(t,e&&"was-validated")}));Sb.displayName="Form";Sb.propTypes=rO;const Pt=Object.assign(Sb,{Group:Cb,Control:sO,Floating:X_,Check:tp,Switch:aO,Label:J_,Text:nE,Range:eE,Select:tE,FloatingLabel:sE}),jg=f.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},a)=>(e=Dt(e,"input-group-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));jg.displayName="InputGroupText";const lO=t=>i.jsx(jg,{children:i.jsx(Um,{type:"checkbox",...t})}),oO=t=>i.jsx(jg,{children:i.jsx(Um,{type:"radio",...t})}),aE=f.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:s,as:a="div",...r},o)=>{t=Dt(t,"input-group");const c=f.useMemo(()=>({}),[]);return i.jsx(K_.Provider,{value:c,children:i.jsx(a,{ref:o,...r,className:vt(s,t,e&&`${t}-${e}`,n&&"has-validation")})})});aE.displayName="InputGroup";const Qd=Object.assign(aE,{Text:jg,Radio:oO,Checkbox:lO}),Lj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function cO(t,e){const n=Lj(t),s=Lj(e);return a=>{n&&n(a),s&&s(a)}}function Wm(t,e){return f.useMemo(()=>cO(t,e),[t,e])}const Xc=f.createContext(null),dO=["as","active","eventKey"];function mO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function rE({key:t,onClick:e,active:n,id:s,role:a,disabled:r}){const o=f.useContext(Mc),c=f.useContext(jb),d=f.useContext(Xc);let m=n;const u={role:a};if(c){!a&&c.role==="tablist"&&(u.role="tab");const p=c.getControllerId(t??null),h=c.getControlledId(t??null);u[wg("event-key")]=t,u.id=p||s,m=n==null&&t!=null?c.activeKey===t:n,(m||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=m,m||(u.tabIndex=-1),r&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Hs(p=>{r||(e?.(p),t!=null&&o&&!p.isPropagationStopped()&&o(t,p))}),[u,{isActive:m}]}const lE=f.forwardRef((t,e)=>{let{as:n=b_,active:s,eventKey:a}=t,r=mO(t,dO);const[o,c]=rE(Object.assign({key:gm(a,r.href),active:s},r));return o[wg("active")]=c.isActive,i.jsx(n,Object.assign({},r,o,{ref:e}))});lE.displayName="NavItem";const uO=["as","onSelect","activeKey","role","onKeyDown"];function hO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const Fj=()=>{},$j=wg("event-key"),oE=f.forwardRef((t,e)=>{let{as:n="div",onSelect:s,activeKey:a,role:r,onKeyDown:o}=t,c=hO(t,uO);const d=N3(),m=f.useRef(!1),u=f.useContext(Mc),p=f.useContext(Xc);let h,g;p&&(r=r||"tablist",a=p.activeKey,h=p.getControlledId,g=p.getControllerId);const v=f.useRef(null),x=k=>{const _=v.current;if(!_)return null;const j=Bl(_,`[${$j}]:not([aria-disabled=true])`),T=_.querySelector("[aria-selected=true]");if(!T||T!==document.activeElement)return null;const N=j.indexOf(T);if(N===-1)return null;let E=N+k;return E>=j.length&&(E=0),E<0&&(E=j.length-1),j[E]},y=(k,_)=>{k!=null&&(s?.(k,_),u?.(k,_))},b=k=>{if(o?.(k),!p)return;let _;switch(k.key){case"ArrowLeft":case"ArrowUp":_=x(-1);break;case"ArrowRight":case"ArrowDown":_=x(1);break;default:return}_&&(k.preventDefault(),y(_.dataset[eO("EventKey")]||null,k),m.current=!0,d())};f.useEffect(()=>{if(v.current&&m.current){const k=v.current.querySelector(`[${$j}][aria-selected=true]`);k?.focus()}m.current=!1});const w=Wm(e,v);return i.jsx(Mc.Provider,{value:y,children:i.jsx(jb.Provider,{value:{role:r,activeKey:gm(a),getControlledId:h||Fj,getControllerId:g||Fj},children:i.jsx(n,Object.assign({},c,{onKeyDown:b,ref:w,role:r}))})})});oE.displayName="Nav";const pO=Object.assign(oE,{Item:lE});var Pu;function Bj(t){if((!Pu&&Pu!==0||t)&&Zc){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Pu=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Pu}function gO(){return f.useState(null)}function Uf(t){t===void 0&&(t=Qc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function fO(t){const e=f.useRef(t);return e.current=t,e}function vO(t){const e=fO(t);f.useEffect(()=>()=>e.current(),[])}function xO(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const qj=wg("modal-open");class _b{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return xO(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[s]:a.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(Nr(a,s)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(qj,""),Nr(a,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(qj),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Wf=(t,e)=>Zc?t==null?(e||Qc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Dx(t,e){const n=Nb(),[s,a]=f.useState(()=>Wf(t,n?.document));if(!s){const r=Wf(t);r&&a(r)}return f.useEffect(()=>{},[e,s]),f.useEffect(()=>{const r=Wf(t);r!==s&&a(r)},[t,s]),s}function Eb({children:t,in:e,onExited:n,mountOnEnter:s,unmountOnExit:a}){const r=f.useRef(null),o=f.useRef(e),c=Hs(n);f.useEffect(()=>{e?o.current=!0:c(r.current)},[e,c]);const d=Wm(r,jo(t)),m=f.cloneElement(t,{ref:d});return e?m:a||!o.current&&s?null:m}const yO=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function bO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function wO(t){let{onEnter:e,onEntering:n,onEntered:s,onExit:a,onExiting:r,onExited:o,addEndListener:c,children:d}=t,m=bO(t,yO);const u=f.useRef(null),p=Wm(u,jo(d)),h=_=>j=>{_&&u.current&&_(u.current,j)},g=f.useCallback(h(e),[e]),v=f.useCallback(h(n),[n]),x=f.useCallback(h(s),[s]),y=f.useCallback(h(a),[a]),b=f.useCallback(h(r),[r]),w=f.useCallback(h(o),[o]),k=f.useCallback(h(c),[c]);return Object.assign({},m,{nodeRef:u},e&&{onEnter:g},n&&{onEntering:v},s&&{onEntered:x},a&&{onExit:y},r&&{onExiting:b},o&&{onExited:w},c&&{addEndListener:k},{children:typeof d=="function"?(_,j)=>d(_,Object.assign({},j,{ref:p})):f.cloneElement(d,{ref:p})})}const kO=["component"];function jO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const NO=f.forwardRef((t,e)=>{let{component:n}=t,s=jO(t,kO);const a=wO(s);return i.jsx(n,Object.assign({ref:e},a))});function CO({in:t,onTransition:e}){const n=f.useRef(null),s=f.useRef(!0),a=Hs(e);return wj(()=>{if(!n.current)return;let r=!1;return a({in:t,element:n.current,initial:s.current,isStale:()=>r}),()=>{r=!0}},[t,a]),wj(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function SO({children:t,in:e,onExited:n,onEntered:s,transition:a}){const[r,o]=f.useState(!e);e&&r&&o(!1);const c=CO({in:!!e,onTransition:m=>{const u=()=>{m.isStale()||(m.in?s?.(m.element,m.initial):(o(!0),n?.(m.element)))};Promise.resolve(a(m)).then(u,p=>{throw m.in||o(!0),p})}}),d=Wm(c,jo(t));return r&&!e?null:f.cloneElement(t,{ref:d})}function Rx(t,e,n){return t?i.jsx(NO,Object.assign({},n,{component:t})):e?i.jsx(SO,Object.assign({},n,{transition:e})):i.jsx(Eb,Object.assign({},n))}const _O=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function EO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}let Kf;function TO(t){return Kf||(Kf=new _b({ownerDocument:t?.document})),Kf}function AO(t){const e=Nb(),n=t||TO(e),s=f.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:f.useCallback(a=>{s.current.dialog=a},[]),setBackdropRef:f.useCallback(a=>{s.current.backdrop=a},[])})}const cE=f.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:a,style:r,children:o,backdrop:c=!0,keyboard:d=!0,onBackdropClick:m,onEscapeKeyDown:u,transition:p,runTransition:h,backdropTransition:g,runBackdropTransition:v,autoFocus:x=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:w,renderDialog:k,renderBackdrop:_=ce=>i.jsx("div",Object.assign({},ce)),manager:j,container:T,onShow:N,onHide:E=()=>{},onExit:A,onExited:L,onExiting:C,onEnter:P,onEntering:R,onEntered:M}=t,O=EO(t,_O);const q=Nb(),U=Dx(T),H=AO(j),ae=y_(),V=n3(n),[pe,oe]=f.useState(!n),ne=f.useRef(null);f.useImperativeHandle(e,()=>H,[H]),Zc&&!V&&n&&(ne.current=Uf(q?.document)),n&&pe&&oe(!1);const se=Hs(()=>{if(H.add(),G.current=gr(document,"keydown",ie),ue.current=gr(document,"focus",()=>setTimeout(ge),!0),N&&N(),x){var ce,Z;const K=Uf((ce=(Z=H.dialog)==null?void 0:Z.ownerDocument)!=null?ce:q?.document);H.dialog&&K&&!pm(H.dialog,K)&&(ne.current=K,H.dialog.focus())}}),W=Hs(()=>{if(H.remove(),G.current==null||G.current(),ue.current==null||ue.current(),b){var ce;(ce=ne.current)==null||ce.focus==null||ce.focus(w),ne.current=null}});f.useEffect(()=>{!n||!U||se()},[n,U,se]),f.useEffect(()=>{pe&&W()},[pe,W]),vO(()=>{W()});const ge=Hs(()=>{if(!y||!ae()||!H.isTopModal())return;const ce=Uf(q?.document);H.dialog&&ce&&!pm(H.dialog,ce)&&H.dialog.focus()}),ee=Hs(ce=>{ce.target===ce.currentTarget&&(m?.(ce),c===!0&&E())}),ie=Hs(ce=>{d&&u_(ce)&&H.isTopModal()&&(u?.(ce),ce.defaultPrevented||E())}),ue=f.useRef(),G=f.useRef(),le=(...ce)=>{oe(!0),L?.(...ce)};if(!U)return null;const re=Object.assign({role:s,ref:H.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},O,{style:r,className:a,tabIndex:-1});let D=k?k(re):i.jsx("div",Object.assign({},re,{children:f.cloneElement(o,{role:"document"})}));D=Rx(p,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:A,onExiting:C,onExited:le,onEnter:P,onEntering:R,onEntered:M,children:D});let I=null;return c&&(I=_({ref:H.setBackdropRef,onClick:ee}),I=Rx(g,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:I})),i.jsx(i.Fragment,{children:Wl.createPortal(i.jsxs(i.Fragment,{children:[I,D]}),U)})});cE.displayName="Modal";const dE=Object.assign(cE,{Manager:_b});function Px(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function mE(t,e){t.classList?t.classList.add(e):Px(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Hj(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function uE(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Hj(t.className,e):t.setAttribute("class",Hj(t.className&&t.className.baseVal||"",e))}const Go={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class hE extends _b{adjustAndStore(e,n,s){const a=n.style[e];n.dataset[e]=a,Nr(n,{[e]:`${parseFloat(Nr(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],Nr(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(mE(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Bl(n,Go.FIXED_CONTENT).forEach(r=>this.adjustAndStore(s,r,e.scrollBarWidth)),Bl(n,Go.STICKY_CONTENT).forEach(r=>this.adjustAndStore(a,r,-e.scrollBarWidth)),Bl(n,Go.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(a,r,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();uE(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Bl(n,Go.FIXED_CONTENT).forEach(r=>this.restore(s,r)),Bl(n,Go.STICKY_CONTENT).forEach(r=>this.restore(a,r)),Bl(n,Go.NAVBAR_TOGGLER).forEach(r=>this.restore(a,r))}}let Gf;function pE(t){return Gf||(Gf=new hE(t)),Gf}const gE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"modal-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));gE.displayName="ModalBody";const Tb=f.createContext({onHide(){}}),Ab=f.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:a,fullscreen:r,children:o,scrollable:c,...d},m)=>{t=Dt(t,"modal");const u=`${t}-dialog`,p=typeof r=="string"?`${t}-fullscreen-${r}`:`${t}-fullscreen`;return i.jsx("div",{...d,ref:m,className:vt(u,e,a&&`${t}-${a}`,s&&`${u}-centered`,c&&`${u}-scrollable`,r&&p),children:i.jsx("div",{className:vt(`${t}-content`,n),children:o})})});Ab.displayName="ModalDialog";const fE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"modal-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));fE.displayName="ModalFooter";const Db=f.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:a,...r},o)=>{const c=f.useContext(Tb),d=Tc(()=>{c?.onHide(),s?.()});return i.jsxs("div",{ref:o,...r,children:[a,n&&i.jsx(yg,{"aria-label":t,variant:e,onClick:d})]})});Db.displayName="AbstractModalHeader";const vE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},r)=>(t=Dt(t,"modal-header"),i.jsx(Db,{ref:r,...a,className:vt(e,t),closeLabel:n,closeButton:s})));vE.displayName="ModalHeader";const DO=Hm("h4"),xE=f.forwardRef(({className:t,bsPrefix:e,as:n=DO,...s},a)=>(e=Dt(e,"modal-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));xE.displayName="ModalTitle";function RO(t){return i.jsx(za,{...t,timeout:null})}function PO(t){return i.jsx(za,{...t,timeout:null})}const yE=f.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:a,children:r,dialogAs:o=Ab,"data-bs-theme":c,"aria-labelledby":d,"aria-describedby":m,"aria-label":u,show:p=!1,animation:h=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:x,onShow:y,onHide:b,container:w,autoFocus:k=!0,enforceFocus:_=!0,restoreFocus:j=!0,restoreFocusOptions:T,onEntered:N,onExit:E,onExiting:A,onEnter:L,onEntering:C,onExited:P,backdropClassName:R,manager:M,...O},q)=>{const[U,H]=f.useState({}),[ae,V]=f.useState(!1),pe=f.useRef(!1),oe=f.useRef(!1),ne=f.useRef(null),[se,W]=gO(),ge=fg(q,W),ee=Tc(b),ie=mb();t=Dt(t,"modal");const ue=f.useMemo(()=>({onHide:ee}),[ee]);function G(){return M||pE({isRTL:ie})}function le(ye){if(!Zc)return;const Te=G().getScrollbarWidth()>0,et=ye.scrollHeight>Qc(ye).documentElement.clientHeight;H({paddingRight:Te&&!et?Bj():void 0,paddingLeft:!Te&&et?Bj():void 0})}const re=Tc(()=>{se&&le(se.dialog)});R_(()=>{_x(window,"resize",re),ne.current==null||ne.current()});const D=()=>{pe.current=!0},I=ye=>{pe.current&&se&&ye.target===se.dialog&&(oe.current=!0),pe.current=!1},ce=()=>{V(!0),ne.current=p_(se.dialog,()=>{V(!1)})},Z=ye=>{ye.target===ye.currentTarget&&ce()},K=ye=>{if(g==="static"){Z(ye);return}if(oe.current||ye.target!==ye.currentTarget){oe.current=!1;return}b?.()},B=ye=>{v?x?.(ye):(ye.preventDefault(),g==="static"&&ce())},F=(ye,Te)=>{ye&&le(ye),L?.(ye,Te)},J=ye=>{ne.current==null||ne.current(),E?.(ye)},Q=(ye,Te)=>{C?.(ye,Te),h_(window,"resize",re)},me=ye=>{ye&&(ye.style.display=""),P?.(ye),_x(window,"resize",re)},te=f.useCallback(ye=>i.jsx("div",{...ye,className:vt(`${t}-backdrop`,R,!h&&"show")}),[h,R,t]),Y={...n,...U};Y.display="block";const Ce=ye=>i.jsx("div",{role:"dialog",...ye,style:Y,className:vt(e,t,ae&&`${t}-static`,!h&&"show"),onClick:g?K:void 0,onMouseUp:I,"data-bs-theme":c,"aria-label":u,"aria-labelledby":d,"aria-describedby":m,children:i.jsx(o,{...O,onMouseDown:D,className:s,contentClassName:a,children:r})});return i.jsx(Tb.Provider,{value:ue,children:i.jsx(dE,{show:p,ref:ge,backdrop:g,container:w,keyboard:!0,autoFocus:k,enforceFocus:_,restoreFocus:j,restoreFocusOptions:T,onEscapeKeyDown:B,onShow:y,onHide:b,onEnter:F,onEntering:Q,onEntered:N,onExit:J,onExiting:A,onExited:me,manager:G(),transition:h?RO:void 0,backdropTransition:h?PO:void 0,renderBackdrop:te,renderDialog:Ce})})});yE.displayName="Modal";const rt=Object.assign(yE,{Body:gE,Header:vE,Title:xE,Footer:fE,Dialog:Ab,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Rb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"nav-item"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Rb.displayName="NavItem";const Pb=f.forwardRef(({bsPrefix:t,className:e,as:n=xg,active:s,eventKey:a,disabled:r=!1,...o},c)=>{t=Dt(t,"nav-link");const[d,m]=rE({key:gm(a,o.href),active:s,disabled:r,...o});return i.jsx(n,{...o,...d,ref:c,disabled:r,className:vt(e,t,r&&"disabled",m.isActive&&"active")})});Pb.displayName="NavLink";const bE=f.forwardRef((t,e)=>{const{as:n="div",bsPrefix:s,variant:a,fill:r=!1,justify:o=!1,navbar:c,navbarScroll:d,className:m,activeKey:u,...p}=cb(t,{activeKey:"onSelect"}),h=Dt(s,"nav");let g,v,x=!1;const y=f.useContext(G_),b=f.useContext(gb);return y?(g=y.bsPrefix,x=c??!0):b&&({cardHeaderBsPrefix:v}=b),i.jsx(pO,{as:n,ref:e,activeKey:u,className:vt(m,{[h]:!x,[`${g}-nav`]:x,[`${g}-nav-scroll`]:x&&d,[`${v}-${a}`]:!!v,[`${h}-${a}`]:!!a,[`${h}-fill`]:r,[`${h}-justified`]:o}),...p})});bE.displayName="Nav";const Rn=Object.assign(bE,{Item:Rb,Link:Pb}),Mx=new WeakMap,zj=(t,e)=>{if(!t||!e)return;const n=Mx.get(e)||new Map;Mx.set(e,n);let s=n.get(t);return s||(s=e.matchMedia(t),s.refCount=0,n.set(s.media,s)),s};function MO(t,e=typeof window>"u"?void 0:window){const n=zj(t,e),[s,a]=f.useState(()=>n?n.matches:!1);return W_(()=>{let r=zj(t,e);if(!r)return a(!1);let o=Mx.get(e);const c=()=>{a(r.matches)};return r.refCount++,r.addListener(c),c(),()=>{r.removeListener(c),r.refCount--,r.refCount<=0&&o?.delete(r.media),r=void 0}},[t]),s}function IO(t){const e=Object.keys(t);function n(c,d){return c===d?d:c?`${c} and ${d}`:d}function s(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function a(c){const d=s(c);let m=t[d];return typeof m=="number"?m=`${m-.2}px`:m=`calc(${m} - 0.2px)`,`(max-width: ${m})`}function r(c){let d=t[c];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function o(c,d,m){let u;typeof c=="object"?(u=c,m=d,d=!0):(d=d||!0,u={[c]:d});let p=f.useMemo(()=>Object.entries(u).reduce((h,[g,v])=>((v==="up"||v===!0)&&(h=n(h,r(g))),(v==="down"||v===!0)&&(h=n(h,a(g))),h),""),[JSON.stringify(u)]);return MO(p,m)}return o}const OO=IO({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),wE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"offcanvas-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));wE.displayName="OffcanvasBody";const LO={[Mi]:"show",[js]:"show"},kE=f.forwardRef(({bsPrefix:t,className:e,children:n,in:s=!1,mountOnEnter:a=!1,unmountOnExit:r=!1,appear:o=!1,...c},d)=>(t=Dt(t,"offcanvas"),i.jsx(vg,{ref:d,addEndListener:hb,in:s,mountOnEnter:a,unmountOnExit:r,appear:o,...c,childRef:jo(n),children:(m,u)=>f.cloneElement(n,{...u,className:vt(e,n.props.className,(m===Mi||m===ao)&&`${t}-toggling`,LO[m])})})));kE.displayName="OffcanvasToggling";const jE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},r)=>(t=Dt(t,"offcanvas-header"),i.jsx(Db,{ref:r,...a,className:vt(e,t),closeLabel:n,closeButton:s})));jE.displayName="OffcanvasHeader";const FO=Hm("h5"),NE=f.forwardRef(({className:t,bsPrefix:e,as:n=FO,...s},a)=>(e=Dt(e,"offcanvas-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));NE.displayName="OffcanvasTitle";function $O(t){return i.jsx(kE,{...t})}function BO(t){return i.jsx(za,{...t})}const CE=f.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":s,placement:a="start",responsive:r,show:o=!1,backdrop:c=!0,keyboard:d=!0,scroll:m=!1,onEscapeKeyDown:u,onShow:p,onHide:h,container:g,autoFocus:v=!0,enforceFocus:x=!0,restoreFocus:y=!0,restoreFocusOptions:b,onEntered:w,onExit:k,onExiting:_,onEnter:j,onEntering:T,onExited:N,backdropClassName:E,manager:A,renderStaticNode:L=!1,...C},P)=>{const R=f.useRef();t=Dt(t,"offcanvas");const[M,O]=f.useState(!1),q=Tc(h),U=OO(r||"xs","up");f.useEffect(()=>{O(r?o&&!U:o)},[o,r,U]);const H=f.useMemo(()=>({onHide:q}),[q]);function ae(){return A||(m?(R.current||(R.current=new hE({handleContainerOverflow:!1})),R.current):pE())}const V=(se,...W)=>{se&&(se.style.visibility="visible"),j?.(se,...W)},pe=(se,...W)=>{se&&(se.style.visibility=""),N?.(...W)},oe=f.useCallback(se=>i.jsx("div",{...se,className:vt(`${t}-backdrop`,E)}),[E,t]),ne=se=>i.jsx("div",{...se,...C,className:vt(e,r?`${t}-${r}`:t,`${t}-${a}`),"aria-labelledby":s,children:n});return i.jsxs(i.Fragment,{children:[!M&&(r||L)&&ne({}),i.jsx(Tb.Provider,{value:H,children:i.jsx(dE,{show:M,ref:P,backdrop:c,container:g,keyboard:d,autoFocus:v,enforceFocus:x&&!m,restoreFocus:y,restoreFocusOptions:b,onEscapeKeyDown:u,onShow:p,onHide:q,onEnter:V,onEntering:T,onEntered:w,onExit:k,onExiting:_,onExited:pe,manager:ae(),transition:$O,backdropTransition:BO,renderBackdrop:oe,renderDialog:ne})})]})});CE.displayName="Offcanvas";const Mu=Object.assign(CE,{Body:wE,Header:jE,Title:NE}),qO=()=>{};function HO(t,e,{disabled:n,clickTrigger:s}={}){const a=e||qO;$5(t,a,{disabled:n,clickTrigger:s});const r=Hs(o=>{u_(o)&&a(o)});f.useEffect(()=>{if(n||t==null)return;const o=Qc(Eh(t));let c=(o.defaultView||window).event;const d=gr(o,"keyup",m=>{if(m===c){c=void 0;return}r(m)});return()=>{d()}},[t,n,r])}const SE=f.forwardRef((t,e)=>{const{flip:n,offset:s,placement:a,containerPadding:r,popperConfig:o={},transition:c,runTransition:d}=t,[m,u]=bj(),[p,h]=bj(),g=Wm(u,e),v=Dx(t.container),x=Dx(t.target),[y,b]=f.useState(!t.show),w=P5(x,m,H5({placement:a,enableEvents:!!t.show,containerPadding:r||5,flip:n,offset:s,arrowElement:p,popperConfig:o}));t.show&&y&&b(!1);const k=(...C)=>{b(!0),t.onExited&&t.onExited(...C)},_=t.show||!y;if(HO(m,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!_)return null;const{onExit:j,onExiting:T,onEnter:N,onEntering:E,onEntered:A}=t;let L=t.children(Object.assign({},w.attributes.popper,{style:w.styles.popper,ref:g}),{popper:w,placement:a,show:!!t.show,arrowProps:Object.assign({},w.attributes.arrow,{style:w.styles.arrow,ref:h})});return L=Rx(c,d,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:L,onExit:j,onExiting:T,onExited:k,onEnter:N,onEntering:E,onEntered:A}),v?Wl.createPortal(L,v):null});SE.displayName="Overlay";const _E=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"popover-header"),i.jsx(n,{ref:a,className:vt(t,e),...s})));_E.displayName="PopoverHeader";const Mb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"popover-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Mb.displayName="PopoverBody";function EE(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function TE(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const AE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,body:r,arrowProps:o,hasDoneInitialMeasure:c,popper:d,show:m,...u},p)=>{const h=Dt(t,"popover"),g=mb(),[v]=e?.split("-")||[],x=EE(v,g);let y=s;return m&&!c&&(y={...s,...TE(d?.strategy)}),i.jsxs("div",{ref:p,role:"tooltip",style:y,"x-placement":v,className:vt(n,h,v&&`bs-popover-${x}`),...u,children:[i.jsx("div",{className:"popover-arrow",...o}),r?i.jsx(Mb,{children:a}):a]})});AE.displayName="Popover";const Ix=Object.assign(AE,{Header:_E,Body:Mb,POPPER_OFFSET:[0,8]}),DE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,arrowProps:r,hasDoneInitialMeasure:o,popper:c,show:d,...m},u)=>{t=Dt(t,"tooltip");const p=mb(),[h]=e?.split("-")||[],g=EE(h,p);let v=s;return d&&!o&&(v={...s,...TE(c?.strategy)}),i.jsxs("div",{ref:u,style:v,role:"tooltip","x-placement":h,className:vt(n,t,`bs-tooltip-${g}`),...m,children:[i.jsx("div",{className:"tooltip-arrow",...r}),i.jsx("div",{className:`${t}-inner`,children:a})]})});DE.displayName="Tooltip";const it=Object.assign(DE,{TOOLTIP_OFFSET:[0,6]});function zO(t){const e=f.useRef(null),n=Dt(void 0,"popover"),s=Dt(void 0,"tooltip"),a=f.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(Px(e.current,n))return Ix.POPPER_OFFSET;if(Px(e.current,s))return it.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,s]);return[e,[a]]}function VO(t,e){const{ref:n}=t,{ref:s}=e;t.ref=n.__wrapped||(n.__wrapped=a=>n(Xh(a))),e.ref=s.__wrapped||(s.__wrapped=a=>s(Xh(a)))}const RE=f.forwardRef(({children:t,transition:e=za,popperConfig:n={},rootClose:s=!1,placement:a="top",show:r=!1,...o},c)=>{const d=f.useRef({}),[m,u]=f.useState(null),[p,h]=zO(o.offset),g=fg(c,p),v=e===!0?za:e||void 0,x=Tc(y=>{u(y),n==null||n.onFirstUpdate==null||n.onFirstUpdate(y)});return W_(()=>{m&&o.target&&(d.current.scheduleUpdate==null||d.current.scheduleUpdate())},[m,o.target]),f.useEffect(()=>{r||u(null)},[r]),i.jsx(SE,{...o,ref:g,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:x},transition:v,rootClose:s,placement:a,show:r,children:(y,{arrowProps:b,popper:w,show:k})=>{var _;VO(y,b);const j=w?.placement,T=Object.assign(d.current,{state:w?.state,scheduleUpdate:w?.update,placement:j,outOfBoundaries:(w==null||(_=w.state)==null||(_=_.modifiersData.hide)==null?void 0:_.isReferenceHidden)||!1,strategy:n.strategy}),N=!!m;return typeof t=="function"?t({...y,placement:j,show:k,...!e&&k&&{className:"show"},popper:T,arrowProps:b,hasDoneInitialMeasure:N}):f.cloneElement(t,{...y,placement:j,arrowProps:b,popper:T,hasDoneInitialMeasure:N,className:vt(t.props.className,!e&&k&&"show"),style:{...t.props.style,...y.style}})}})});RE.displayName="Overlay";function UO(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function Vj(t,e,n){const[s]=e,a=s.currentTarget,r=s.relatedTarget||s.nativeEvent[n];(!r||r!==a)&&!pm(a,r)&&t(...e)}Pe.oneOf(["click","hover","focus"]);const Ue=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:s={},show:a,defaultShow:r=!1,onToggle:o,delay:c,placement:d,flip:m=d&&d.indexOf("auto")!==-1,...u})=>{const p=f.useRef(null),h=fg(p,jo(n)),g=x3(),v=f.useRef(""),[x,y]=o_(a,r,o),b=UO(c),{onFocus:w,onBlur:k,onClick:_}=typeof n!="function"?f.Children.only(n).props:{},j=O=>{h(Xh(O))},T=f.useCallback(()=>{if(g.clear(),v.current="show",!b.show){y(!0);return}g.set(()=>{v.current==="show"&&y(!0)},b.show)},[b.show,y,g]),N=f.useCallback(()=>{if(g.clear(),v.current="hide",!b.hide){y(!1);return}g.set(()=>{v.current==="hide"&&y(!1)},b.hide)},[b.hide,y,g]),E=f.useCallback((...O)=>{T(),w?.(...O)},[T,w]),A=f.useCallback((...O)=>{N(),k?.(...O)},[N,k]),L=f.useCallback((...O)=>{y(!x),_?.(...O)},[_,y,x]),C=f.useCallback((...O)=>{Vj(T,O,"fromElement")},[T]),P=f.useCallback((...O)=>{Vj(N,O,"toElement")},[N]),R=t==null?[]:[].concat(t),M={ref:j};return R.indexOf("click")!==-1&&(M.onClick=L),R.indexOf("focus")!==-1&&(M.onFocus=E,M.onBlur=A),R.indexOf("hover")!==-1&&(M.onMouseOver=C,M.onMouseOut=P),i.jsxs(i.Fragment,{children:[typeof n=="function"?n(M):f.cloneElement(n,M),i.jsx(RE,{...u,show:x,onHide:N,flip:m,placement:d,popperConfig:s,target:p.current,children:e})]})},Ib=f.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:s,activeLabel:a="(current)",children:r,linkStyle:o,linkClassName:c,as:d=xg,...m},u)=>{const p=t||e?"span":d;return i.jsx("li",{ref:u,style:s,className:vt(n,"page-item",{active:t,disabled:e}),children:i.jsxs(p,{className:vt("page-link",c),style:o,...m,children:[r,t&&a&&i.jsx("span",{className:"visually-hidden",children:a})]})})});Ib.displayName="PageItem";function Km(t,e,n=t){const s=f.forwardRef(({children:a,...r},o)=>i.jsxs(Ib,{...r,ref:o,children:[i.jsx("span",{"aria-hidden":"true",children:a||e}),i.jsx("span",{className:"visually-hidden",children:n})]}));return s.displayName=t,s}const WO=Km("First",""),KO=Km("Prev","","Previous"),GO=Km("Ellipsis","","More"),YO=Km("Next",""),QO=Km("Last",""),PE=f.forwardRef(({bsPrefix:t,className:e,size:n,...s},a)=>{const r=Dt(t,"pagination");return i.jsx("ul",{ref:a,...s,className:vt(e,r,n&&`${r}-${n}`)})});PE.displayName="Pagination";const Il=Object.assign(PE,{First:WO,Prev:KO,Ellipsis:GO,Item:Ib,Next:YO,Last:QO}),Qn=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const r=Dt(t,"row"),o=c_(),c=d_(),d=`${r}-cols`,m=[];return o.forEach(u=>{const p=s[u];delete s[u];let h;p!=null&&typeof p=="object"?{cols:h}=p:h=p;const g=u!==c?`-${u}`:"";h!=null&&m.push(`${d}${g}-${h}`)}),i.jsx(n,{ref:a,...s,className:vt(e,r,...m)})});Qn.displayName="Row";const Ng=f.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:s,as:a="div",className:r,...o},c)=>{t=Dt(t,"spinner");const d=`${t}-${n}`;return i.jsx(a,{ref:c,...o,className:vt(r,d,s&&`${d}-${s}`,e&&`text-${e}`)})});Ng.displayName="Spinner";const ZO=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],XO=["activeKey","getControlledId","getControllerId"],JO=["as"];function Ox(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function ME(t){let{active:e,eventKey:n,mountOnEnter:s,transition:a,unmountOnExit:r,role:o="tabpanel",onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}=t,g=Ox(t,ZO);const v=f.useContext(Xc);if(!v)return[Object.assign({},g,{role:o}),{eventKey:n,isActive:e,mountOnEnter:s,transition:a,unmountOnExit:r,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}];const{activeKey:x,getControlledId:y,getControllerId:b}=v,w=Ox(v,XO),k=gm(n);return[Object.assign({},g,{role:o,id:y(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:e==null&&k!=null?gm(x)===k:e,transition:a||w.transition,mountOnEnter:s??w.mountOnEnter,unmountOnExit:r??w.unmountOnExit,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}]}const IE=f.forwardRef((t,e)=>{let{as:n="div"}=t,s=Ox(t,JO);const[a,{isActive:r,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,transition:v=Eb}]=ME(s);return i.jsx(Xc.Provider,{value:null,children:i.jsx(Mc.Provider,{value:null,children:i.jsx(v,{in:r,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,children:i.jsx(n,Object.assign({},a,{ref:e,hidden:!r,"aria-hidden":!r}))})})})});IE.displayName="TabPanel";const Ob=t=>{const{id:e,generateChildId:n,onSelect:s,activeKey:a,defaultActiveKey:r,transition:o,mountOnEnter:c,unmountOnExit:d,children:m}=t,[u,p]=j3(a,r,s),h=K5(e),g=f.useMemo(()=>n||((x,y)=>h?`${h}-${y}-${x}`:null),[h,n]),v=f.useMemo(()=>({onSelect:p,activeKey:u,transition:o,mountOnEnter:c||!1,unmountOnExit:d||!1,getControlledId:x=>g(x,"tabpane"),getControllerId:x=>g(x,"tab")}),[p,u,o,c,d,g]);return i.jsx(Xc.Provider,{value:v,children:i.jsx(Mc.Provider,{value:p||null,children:m})})};Ob.Panel=IE;function Lb(t){return typeof t=="boolean"?t?za:Eb:t}const OE=({transition:t,...e})=>i.jsx(Ob,{...e,transition:Lb(t)});OE.displayName="TabContainer";const Fb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Dt(e,"tab-content"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Fb.displayName="TabContent";const $b=f.forwardRef(({bsPrefix:t,transition:e,...n},s)=>{const[{className:a,as:r="div",...o},{isActive:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:v,unmountOnExit:x,transition:y=za}]=ME({...n,transition:Lb(e)}),b=Dt(t,"tab-pane");return i.jsx(Xc.Provider,{value:null,children:i.jsx(Mc.Provider,{value:null,children:i.jsx(y,{in:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:v,unmountOnExit:x,children:i.jsx(r,{...o,ref:s,className:vt(a,b,c&&"active")})})})})});$b.displayName="TabPane";const e4={eventKey:Pe.oneOfType([Pe.string,Pe.number]),title:Pe.node.isRequired,disabled:Pe.bool,tabClassName:Pe.string,tabAttrs:Pe.object},LE=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};LE.propTypes=e4;const Ic=Object.assign(LE,{Container:OE,Content:Fb,Pane:$b}),Lx=f.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:s,borderless:a,hover:r,size:o,variant:c,responsive:d,...m},u)=>{const p=Dt(t,"table"),h=vt(e,p,c&&`${p}-${c}`,o&&`${p}-${o}`,n&&`${p}-${typeof n=="string"?`striped-${n}`:"striped"}`,s&&`${p}-bordered`,a&&`${p}-borderless`,r&&`${p}-hover`),g=i.jsx("table",{...m,className:h,ref:u});if(d){let v=`${p}-responsive`;return typeof d=="string"&&(v=`${v}-${d}`),i.jsx("div",{className:v,children:g})}return g});Lx.displayName="Table";function t4(t){let e;return y3(t,n=>{e==null&&(e=n.props.eventKey)}),e}function n4(t){const{title:e,eventKey:n,disabled:s,tabClassName:a,tabAttrs:r,id:o}=t.props;return e==null?null:i.jsx(Rb,{as:"li",role:"presentation",children:i.jsx(Pb,{as:"button",type:"button",eventKey:n,disabled:s,id:o,className:a,...r,children:e})})}const Cg=t=>{const{id:e,onSelect:n,transition:s,mountOnEnter:a=!1,unmountOnExit:r=!1,variant:o="tabs",children:c,activeKey:d=t4(c),...m}=cb(t,{activeKey:"onSelect"});return i.jsxs(Ob,{id:e,activeKey:d,onSelect:n,transition:Lb(s),mountOnEnter:a,unmountOnExit:r,children:[i.jsx(Rn,{id:e,...m,role:"tablist",as:"ul",variant:o,children:kj(c,n4)}),i.jsx(Fb,{children:kj(c,u=>{const p={...u.props};return delete p.title,delete p.disabled,delete p.tabClassName,delete p.tabAttrs,i.jsx($b,{...p})})})]})};Cg.displayName="Tabs";function lo(t){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(t)}function i4(t,e){if(lo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(lo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FE(t){var e=i4(t,"string");return lo(e)=="symbol"?e:e+""}function Fd(t,e,n){return(e=FE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(n),!0).forEach(function(s){Fd(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function s4(t){if(Array.isArray(t))return t}function a4(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,a,r,o,c=[],d=!0,m=!1;try{if(r=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(s=r.call(n)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(u){m=!0,a=u}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}function Fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function $E(t,e){if(t){if(typeof t=="string")return Fx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fx(t,e):void 0}}function r4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cr(t,e){return s4(t)||a4(t,e)||$E(t,e)||r4()}function ka(t,e){if(t==null)return{};var n,s,a=gg(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)n=r[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var l4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function BE(t){var e=t.defaultInputValue,n=e===void 0?"":e,s=t.defaultMenuIsOpen,a=s===void 0?!1:s,r=t.defaultValue,o=r===void 0?null:r,c=t.inputValue,d=t.menuIsOpen,m=t.onChange,u=t.onInputChange,p=t.onMenuClose,h=t.onMenuOpen,g=t.value,v=ka(t,l4),x=f.useState(c!==void 0?c:n),y=Cr(x,2),b=y[0],w=y[1],k=f.useState(d!==void 0?d:a),_=Cr(k,2),j=_[0],T=_[1],N=f.useState(g!==void 0?g:o),E=Cr(N,2),A=E[0],L=E[1],C=f.useCallback(function(H,ae){typeof m=="function"&&m(H,ae),L(H)},[m]),P=f.useCallback(function(H,ae){var V;typeof u=="function"&&(V=u(H,ae)),w(V!==void 0?V:H)},[u]),R=f.useCallback(function(){typeof h=="function"&&h(),T(!0)},[h]),M=f.useCallback(function(){typeof p=="function"&&p(),T(!1)},[p]),O=c!==void 0?c:b,q=d!==void 0?d:j,U=g!==void 0?g:A;return Ot(Ot({},v),{},{inputValue:O,menuIsOpen:q,onChange:C,onInputChange:P,onMenuClose:M,onMenuOpen:R,value:U})}function qE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wj(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,FE(s.key),s)}}function HE(t,e,n){return e&&Wj(t.prototype,e),n&&Wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zh(t,e)}function np(t){return np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},np(t)}function VE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VE=function(){return!!t})()}function o4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c4(t,e){if(e&&(lo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o4(t)}function UE(t){var e=VE();return function(){var n,s=np(t);if(e){var a=np(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return c4(this,n)}}function d4(t){if(Array.isArray(t))return Fx(t)}function m4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function u4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hc(t){return d4(t)||m4(t)||$E(t)||u4()}function h4(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function p4(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var g4=(function(){function t(n){var s=this;this._insertTag=function(a){var r;s.tags.length===0?s.insertionPoint?r=s.insertionPoint.nextSibling:s.prepend?r=s.container.firstChild:r=s.before:r=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(a,r),s.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(p4(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var r=h4(a);try{r.insertRule(s,r.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){var a;return(a=s.parentNode)==null?void 0:a.removeChild(s)}),this.tags=[],this.ctr=0},t})(),Ai="-ms-",ip="-moz-",un="-webkit-",WE="comm",Bb="rule",qb="decl",f4="@import",KE="@keyframes",v4="@layer",x4=Math.abs,Sg=String.fromCharCode,y4=Object.assign;function b4(t,e){return wi(t,0)^45?(((e<<2^wi(t,0))<<2^wi(t,1))<<2^wi(t,2))<<2^wi(t,3):0}function GE(t){return t.trim()}function w4(t,e){return(t=e.exec(t))?t[0]:t}function pn(t,e,n){return t.replace(e,n)}function $x(t,e){return t.indexOf(e)}function wi(t,e){return t.charCodeAt(e)|0}function fm(t,e,n){return t.slice(e,n)}function Ma(t){return t.length}function Hb(t){return t.length}function Iu(t,e){return e.push(t),t}function k4(t,e){return t.map(e).join("")}var _g=1,Oc=1,YE=0,ps=0,li=0,Jc="";function Eg(t,e,n,s,a,r,o){return{value:t,root:e,parent:n,type:s,props:a,children:r,line:_g,column:Oc,length:o,return:""}}function wd(t,e){return y4(Eg("",null,null,"",null,null,0),t,{length:-t.length},e)}function j4(){return li}function N4(){return li=ps>0?wi(Jc,--ps):0,Oc--,li===10&&(Oc=1,_g--),li}function Ns(){return li=ps<YE?wi(Jc,ps++):0,Oc++,li===10&&(Oc=1,_g++),li}function Ba(){return wi(Jc,ps)}function Th(){return ps}function Gm(t,e){return fm(Jc,t,e)}function vm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QE(t){return _g=Oc=1,YE=Ma(Jc=t),ps=0,[]}function ZE(t){return Jc="",t}function Ah(t){return GE(Gm(ps-1,Bx(t===91?t+2:t===40?t+1:t)))}function C4(t){for(;(li=Ba())&&li<33;)Ns();return vm(t)>2||vm(li)>3?"":" "}function S4(t,e){for(;--e&&Ns()&&!(li<48||li>102||li>57&&li<65||li>70&&li<97););return Gm(t,Th()+(e<6&&Ba()==32&&Ns()==32))}function Bx(t){for(;Ns();)switch(li){case t:return ps;case 34:case 39:t!==34&&t!==39&&Bx(li);break;case 40:t===41&&Bx(t);break;case 92:Ns();break}return ps}function _4(t,e){for(;Ns()&&t+li!==57;)if(t+li===84&&Ba()===47)break;return"/*"+Gm(e,ps-1)+"*"+Sg(t===47?t:Ns())}function E4(t){for(;!vm(Ba());)Ns();return Gm(t,ps)}function T4(t){return ZE(Dh("",null,null,null,[""],t=QE(t),0,[0],t))}function Dh(t,e,n,s,a,r,o,c,d){for(var m=0,u=0,p=o,h=0,g=0,v=0,x=1,y=1,b=1,w=0,k="",_=a,j=r,T=s,N=k;y;)switch(v=w,w=Ns()){case 40:if(v!=108&&wi(N,p-1)==58){$x(N+=pn(Ah(w),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:N+=Ah(w);break;case 9:case 10:case 13:case 32:N+=C4(v);break;case 92:N+=S4(Th()-1,7);continue;case 47:switch(Ba()){case 42:case 47:Iu(A4(_4(Ns(),Th()),e,n),d);break;default:N+="/"}break;case 123*x:c[m++]=Ma(N)*b;case 125*x:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+u:b==-1&&(N=pn(N,/\f/g,"")),g>0&&Ma(N)-p&&Iu(g>32?Gj(N+";",s,n,p-1):Gj(pn(N," ","")+";",s,n,p-2),d);break;case 59:N+=";";default:if(Iu(T=Kj(N,e,n,m,u,a,c,k,_=[],j=[],p),r),w===123)if(u===0)Dh(N,e,T,T,_,r,p,c,j);else switch(h===99&&wi(N,3)===110?100:h){case 100:case 108:case 109:case 115:Dh(t,T,T,s&&Iu(Kj(t,T,T,0,0,a,c,k,a,_=[],p),j),a,j,p,c,s?_:j);break;default:Dh(N,T,T,T,[""],j,0,c,j)}}m=u=g=0,x=b=1,k=N="",p=o;break;case 58:p=1+Ma(N),g=v;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&N4()==125)continue}switch(N+=Sg(w),w*x){case 38:b=u>0?1:(N+="\f",-1);break;case 44:c[m++]=(Ma(N)-1)*b,b=1;break;case 64:Ba()===45&&(N+=Ah(Ns())),h=Ba(),u=p=Ma(k=N+=E4(Th())),w++;break;case 45:v===45&&Ma(N)==2&&(x=0)}}return r}function Kj(t,e,n,s,a,r,o,c,d,m,u){for(var p=a-1,h=a===0?r:[""],g=Hb(h),v=0,x=0,y=0;v<s;++v)for(var b=0,w=fm(t,p+1,p=x4(x=o[v])),k=t;b<g;++b)(k=GE(x>0?h[b]+" "+w:pn(w,/&\f/g,h[b])))&&(d[y++]=k);return Eg(t,e,n,a===0?Bb:c,d,m,u)}function A4(t,e,n){return Eg(t,e,n,WE,Sg(j4()),fm(t,2,-2),0)}function Gj(t,e,n,s){return Eg(t,e,n,qb,fm(t,0,s),fm(t,s+1,-1),s)}function pc(t,e){for(var n="",s=Hb(t),a=0;a<s;a++)n+=e(t[a],a,t,e)||"";return n}function D4(t,e,n,s){switch(t.type){case v4:if(t.children.length)break;case f4:case qb:return t.return=t.return||t.value;case WE:return"";case KE:return t.return=t.value+"{"+pc(t.children,s)+"}";case Bb:t.value=t.props.join(",")}return Ma(n=pc(t.children,s))?t.return=t.value+"{"+n+"}":""}function R4(t){var e=Hb(t);return function(n,s,a,r){for(var o="",c=0;c<e;c++)o+=t[c](n,s,a,r)||"";return o}}function P4(t){return function(e){e.root||(e=e.return)&&t(e)}}function M4(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var I4=function(e,n,s){for(var a=0,r=0;a=r,r=Ba(),a===38&&r===12&&(n[s]=1),!vm(r);)Ns();return Gm(e,ps)},O4=function(e,n){var s=-1,a=44;do switch(vm(a)){case 0:a===38&&Ba()===12&&(n[s]=1),e[s]+=I4(ps-1,n,s);break;case 2:e[s]+=Ah(a);break;case 4:if(a===44){e[++s]=Ba()===58?"&\f":"",n[s]=e[s].length;break}default:e[s]+=Sg(a)}while(a=Ns());return e},L4=function(e,n){return ZE(O4(QE(e),n))},Yj=new WeakMap,F4=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,s=e.parent,a=e.column===s.column&&e.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Yj.get(s))&&!a){Yj.set(e,!0);for(var r=[],o=L4(n,r),c=s.props,d=0,m=0;d<o.length;d++)for(var u=0;u<c.length;u++,m++)e.props[m]=r[d]?o[d].replace(/&\f/g,c[u]):c[u]+" "+o[d]}}},$4=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function XE(t,e){switch(b4(t,e)){case 5103:return un+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return un+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return un+t+ip+t+Ai+t+t;case 6828:case 4268:return un+t+Ai+t+t;case 6165:return un+t+Ai+"flex-"+t+t;case 5187:return un+t+pn(t,/(\w+).+(:[^]+)/,un+"box-$1$2"+Ai+"flex-$1$2")+t;case 5443:return un+t+Ai+"flex-item-"+pn(t,/flex-|-self/,"")+t;case 4675:return un+t+Ai+"flex-line-pack"+pn(t,/align-content|flex-|-self/,"")+t;case 5548:return un+t+Ai+pn(t,"shrink","negative")+t;case 5292:return un+t+Ai+pn(t,"basis","preferred-size")+t;case 6060:return un+"box-"+pn(t,"-grow","")+un+t+Ai+pn(t,"grow","positive")+t;case 4554:return un+pn(t,/([^-])(transform)/g,"$1"+un+"$2")+t;case 6187:return pn(pn(pn(t,/(zoom-|grab)/,un+"$1"),/(image-set)/,un+"$1"),t,"")+t;case 5495:case 3959:return pn(t,/(image-set\([^]*)/,un+"$1$`$1");case 4968:return pn(pn(t,/(.+:)(flex-)?(.*)/,un+"box-pack:$3"+Ai+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+un+t+t;case 4095:case 3583:case 4068:case 2532:return pn(t,/(.+)-inline(.+)/,un+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ma(t)-1-e>6)switch(wi(t,e+1)){case 109:if(wi(t,e+4)!==45)break;case 102:return pn(t,/(.+:)(.+)-([^]+)/,"$1"+un+"$2-$3$1"+ip+(wi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~$x(t,"stretch")?XE(pn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(wi(t,e+1)!==115)break;case 6444:switch(wi(t,Ma(t)-3-(~$x(t,"!important")&&10))){case 107:return pn(t,":",":"+un)+t;case 101:return pn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+un+(wi(t,14)===45?"inline-":"")+"box$3$1"+un+"$2$3$1"+Ai+"$2box$3")+t}break;case 5936:switch(wi(t,e+11)){case 114:return un+t+Ai+pn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return un+t+Ai+pn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return un+t+Ai+pn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return un+t+Ai+t+t}return t}var B4=function(e,n,s,a){if(e.length>-1&&!e.return)switch(e.type){case qb:e.return=XE(e.value,e.length);break;case KE:return pc([wd(e,{value:pn(e.value,"@","@"+un)})],a);case Bb:if(e.length)return k4(e.props,function(r){switch(w4(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pc([wd(e,{props:[pn(r,/:(read-\w+)/,":"+ip+"$1")]})],a);case"::placeholder":return pc([wd(e,{props:[pn(r,/:(plac\w+)/,":"+un+"input-$1")]}),wd(e,{props:[pn(r,/:(plac\w+)/,":"+ip+"$1")]}),wd(e,{props:[pn(r,/:(plac\w+)/,Ai+"input-$1")]})],a)}return""})}},q4=[B4],H4=function(e){var n=e.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(x){var y=x.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var a=e.stylisPlugins||q4,r={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var y=x.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)r[y[b]]=!0;c.push(x)});var d,m=[F4,$4];{var u,p=[D4,P4(function(x){u.insert(x)})],h=R4(m.concat(a,p)),g=function(y){return pc(T4(y),h)};d=function(y,b,w,k){u=w,g(y?y+"{"+b.styles+"}":b.styles),k&&(v.inserted[b.name]=!0)}}var v={key:n,sheet:new g4({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:r,registered:{},insert:d};return v.sheet.hydrate(c),v},Yf={exports:{}},vn={};var Qj;function z4(){if(Qj)return vn;Qj=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,r=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,w=t?Symbol.for("react.scope"):60119;function k(j){if(typeof j=="object"&&j!==null){var T=j.$$typeof;switch(T){case e:switch(j=j.type,j){case d:case m:case s:case r:case a:case p:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case v:case g:case o:return j;default:return T}}case n:return T}}}function _(j){return k(j)===m}return vn.AsyncMode=d,vn.ConcurrentMode=m,vn.ContextConsumer=c,vn.ContextProvider=o,vn.Element=e,vn.ForwardRef=u,vn.Fragment=s,vn.Lazy=v,vn.Memo=g,vn.Portal=n,vn.Profiler=r,vn.StrictMode=a,vn.Suspense=p,vn.isAsyncMode=function(j){return _(j)||k(j)===d},vn.isConcurrentMode=_,vn.isContextConsumer=function(j){return k(j)===c},vn.isContextProvider=function(j){return k(j)===o},vn.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},vn.isForwardRef=function(j){return k(j)===u},vn.isFragment=function(j){return k(j)===s},vn.isLazy=function(j){return k(j)===v},vn.isMemo=function(j){return k(j)===g},vn.isPortal=function(j){return k(j)===n},vn.isProfiler=function(j){return k(j)===r},vn.isStrictMode=function(j){return k(j)===a},vn.isSuspense=function(j){return k(j)===p},vn.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===s||j===m||j===r||j===a||j===p||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===g||j.$$typeof===o||j.$$typeof===c||j.$$typeof===u||j.$$typeof===y||j.$$typeof===b||j.$$typeof===w||j.$$typeof===x)},vn.typeOf=k,vn}var Zj;function V4(){return Zj||(Zj=1,Yf.exports=z4()),Yf.exports}var Qf,Xj;function U4(){if(Xj)return Qf;Xj=1;var t=V4(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r={};r[t.ForwardRef]=s,r[t.Memo]=a;function o(v){return t.isMemo(v)?a:r[v.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;function g(v,x,y){if(typeof x!="string"){if(h){var b=p(x);b&&b!==h&&g(v,b,y)}var w=d(x);m&&(w=w.concat(m(x)));for(var k=o(v),_=o(x),j=0;j<w.length;++j){var T=w[j];if(!n[T]&&!(y&&y[T])&&!(_&&_[T])&&!(k&&k[T])){var N=u(x,T);try{c(v,T,N)}catch{}}}}return v}return Qf=g,Qf}U4();var W4=!0;function K4(t,e,n){var s="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(s+=a+" ")}),s}var JE=function(e,n,s){var a=e.key+"-"+n.name;(s===!1||W4===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},G4=function(e,n,s){JE(e,n,s);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var r=n;do e.insert(n===r?"."+a:"",r,e.sheet,!0),r=r.next;while(r!==void 0)}};function Y4(t){for(var e=0,n,s=0,a=t.length;a>=4;++s,a-=4)n=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(s+2)&255)<<16;case 2:e^=(t.charCodeAt(s+1)&255)<<8;case 1:e^=t.charCodeAt(s)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Q4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Z4=/[A-Z]|^ms/g,X4=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e2=function(e){return e.charCodeAt(1)===45},Jj=function(e){return e!=null&&typeof e!="boolean"},Zf=M4(function(t){return e2(t)?t:t.replace(Z4,"-$&").toLowerCase()}),e0=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(X4,function(s,a,r){return Ia={name:a,styles:r,next:Ia},a})}return Q4[e]!==1&&!e2(e)&&typeof n=="number"&&n!==0?n+"px":n};function xm(t,e,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return Ia={name:a.name,styles:a.styles,next:Ia},a.name;var r=n;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Ia={name:o.name,styles:o.styles,next:Ia},o=o.next;var c=r.styles+";";return c}return J4(t,e,n)}case"function":{if(t!==void 0){var d=Ia,m=n(t);return Ia=d,xm(t,e,m)}break}}var u=n;return u}function J4(t,e,n){var s="";if(Array.isArray(n))for(var a=0;a<n.length;a++)s+=xm(t,e,n[a])+";";else for(var r in n){var o=n[r];if(typeof o!="object"){var c=o;Jj(c)&&(s+=Zf(r)+":"+e0(r,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var d=0;d<o.length;d++)Jj(o[d])&&(s+=Zf(r)+":"+e0(r,o[d])+";");else{var m=xm(t,e,o);switch(r){case"animation":case"animationName":{s+=Zf(r)+":"+m+";";break}default:s+=r+"{"+m+"}"}}}return s}var t0=/label:\s*([^\s;{]+)\s*(;|$)/g,Ia;function t2(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";Ia=void 0;var r=t[0];if(r==null||r.raw===void 0)s=!1,a+=xm(n,e,r);else{var o=r;a+=o[0]}for(var c=1;c<t.length;c++)if(a+=xm(n,e,t[c]),s){var d=r;a+=d[c]}t0.lastIndex=0;for(var m="",u;(u=t0.exec(a))!==null;)m+="-"+u[1];var p=Y4(a)+m;return{name:p,styles:a,next:Ia}}var eL=function(e){return e()},tL=cj.useInsertionEffect?cj.useInsertionEffect:!1,nL=tL||eL,n2=f.createContext(typeof HTMLElement<"u"?H4({key:"css"}):null);n2.Provider;var iL=function(e){return f.forwardRef(function(n,s){var a=f.useContext(n2);return e(n,a,s)})},sL=f.createContext({}),zb={}.hasOwnProperty,qx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",aL=function(e,n){var s={};for(var a in n)zb.call(n,a)&&(s[a]=n[a]);return s[qx]=e,s},rL=function(e){var n=e.cache,s=e.serialized,a=e.isStringTag;return JE(n,s,a),nL(function(){return G4(n,s,a)}),null},lL=iL(function(t,e,n){var s=t.css;typeof s=="string"&&e.registered[s]!==void 0&&(s=e.registered[s]);var a=t[qx],r=[s],o="";typeof t.className=="string"?o=K4(e.registered,r,t.className):t.className!=null&&(o=t.className+" ");var c=t2(r,void 0,f.useContext(sL));o+=e.key+"-"+c.name;var d={};for(var m in t)zb.call(t,m)&&m!=="css"&&m!==qx&&(d[m]=t[m]);return d.className=o,n&&(d.ref=n),f.createElement(f.Fragment,null,f.createElement(rL,{cache:e,serialized:c,isStringTag:typeof a=="string"}),f.createElement(a,d))}),oL=lL,Mt=function(e,n){var s=arguments;if(n==null||!zb.call(n,"css"))return f.createElement.apply(void 0,s);var a=s.length,r=new Array(a);r[0]=oL,r[1]=aL(e,n);for(var o=2;o<a;o++)r[o]=s[o];return f.createElement.apply(null,r)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Mt||(Mt={}));function Vb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t2(e)}function cL(){var t=Vb.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function dL(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const mL=Math.min,uL=Math.max,sp=Math.round,Ou=Math.floor,ap=t=>({x:t,y:t});function hL(t){const{x:e,y:n,width:s,height:a}=t;return{width:s,height:a,top:n,left:e,right:e+s,bottom:n+a,x:e,y:n}}function Tg(){return typeof window<"u"}function i2(t){return a2(t)?(t.nodeName||"").toLowerCase():"#document"}function Dr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function s2(t){var e;return(e=(a2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function a2(t){return Tg()?t instanceof Node||t instanceof Dr(t).Node:!1}function pL(t){return Tg()?t instanceof Element||t instanceof Dr(t).Element:!1}function Ub(t){return Tg()?t instanceof HTMLElement||t instanceof Dr(t).HTMLElement:!1}function n0(t){return!Tg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dr(t).ShadowRoot}const gL=new Set(["inline","contents"]);function r2(t){const{overflow:e,overflowX:n,overflowY:s,display:a}=Wb(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!gL.has(a)}function fL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vL=new Set(["html","body","#document"]);function xL(t){return vL.has(i2(t))}function Wb(t){return Dr(t).getComputedStyle(t)}function yL(t){if(i2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n0(t)&&t.host||s2(t);return n0(e)?e.host:e}function l2(t){const e=yL(t);return xL(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ub(e)&&r2(e)?e:l2(e)}function rp(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=l2(t),r=a===((s=t.ownerDocument)==null?void 0:s.body),o=Dr(a);if(r){const c=Hx(o);return e.concat(o,o.visualViewport||[],r2(a)?a:[],c&&n?rp(c):[])}return e.concat(a,rp(a,[],n))}function Hx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bL(t){const e=Wb(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=Ub(t),r=a?t.offsetWidth:n,o=a?t.offsetHeight:s,c=sp(n)!==r||sp(s)!==o;return c&&(n=r,s=o),{width:n,height:s,$:c}}function Kb(t){return pL(t)?t:t.contextElement}function i0(t){const e=Kb(t);if(!Ub(e))return ap(1);const n=e.getBoundingClientRect(),{width:s,height:a,$:r}=bL(e);let o=(r?sp(n.width):n.width)/s,c=(r?sp(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const wL=ap(0);function kL(t){const e=Dr(t);return!fL()||!e.visualViewport?wL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jL(t,e,n){return!1}function s0(t,e,n,s){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),r=Kb(t);let o=ap(1);e&&(o=i0(t));const c=jL()?kL(r):ap(0);let d=(a.left+c.x)/o.x,m=(a.top+c.y)/o.y,u=a.width/o.x,p=a.height/o.y;if(r){const h=Dr(r),g=s;let v=h,x=Hx(v);for(;x&&s&&g!==v;){const y=i0(x),b=x.getBoundingClientRect(),w=Wb(x),k=b.left+(x.clientLeft+parseFloat(w.paddingLeft))*y.x,_=b.top+(x.clientTop+parseFloat(w.paddingTop))*y.y;d*=y.x,m*=y.y,u*=y.x,p*=y.y,d+=k,m+=_,v=Dr(x),x=Hx(v)}}return hL({width:u,height:p,x:d,y:m})}function o2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function NL(t,e){let n=null,s;const a=s2(t);function r(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),r();const m=t.getBoundingClientRect(),{left:u,top:p,width:h,height:g}=m;if(c||e(),!h||!g)return;const v=Ou(p),x=Ou(a.clientWidth-(u+h)),y=Ou(a.clientHeight-(p+g)),b=Ou(u),k={rootMargin:-v+"px "+-x+"px "+-y+"px "+-b+"px",threshold:uL(0,mL(1,d))||1};let _=!0;function j(T){const N=T[0].intersectionRatio;if(N!==d){if(!_)return o();N?o(!1,N):s=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!o2(m,t.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(j,{...k,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,k)}n.observe(t)}return o(!0),r}function CL(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,m=Kb(t),u=a||r?[...m?rp(m):[],...rp(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",n,{passive:!0}),r&&b.addEventListener("resize",n)});const p=m&&c?NL(m,n):null;let h=-1,g=null;o&&(g=new ResizeObserver(b=>{let[w]=b;w&&w.target===m&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),n()}),m&&!d&&g.observe(m),g.observe(e));let v,x=d?s0(t):null;d&&y();function y(){const b=s0(t);x&&!o2(x,b)&&n(),x=b,v=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(w=>{a&&w.removeEventListener("scroll",n),r&&w.removeEventListener("resize",n)}),p?.(),(b=g)==null||b.disconnect(),g=null,d&&cancelAnimationFrame(v)}}var lp=f.useLayoutEffect,SL=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],op=function(){};function _L(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function EL(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];var r=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&r.push("".concat(_L(t,o)));return r.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var cp=function(e){return LL(e)?e.filter(Boolean):lo(e)==="object"&&e!==null?[e]:[]},c2=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=ka(e,SL);return Ot({},n)},Zn=function(e,n,s){var a=e.cx,r=e.getStyles,o=e.getClassNames,c=e.className;return{css:r(n,e),className:a(s??{},o(n,e),c)}};function Ag(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function TL(t){return Ag(t)?window.innerHeight:t.clientHeight}function d2(t){return Ag(t)?window.pageYOffset:t.scrollTop}function dp(t,e){if(Ag(t)){window.scrollTo(0,e);return}t.scrollTop=e}function AL(t){var e=getComputedStyle(t),n=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(n&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function DL(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e}function Lu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:op,a=d2(t),r=e-a,o=10,c=0;function d(){c+=o;var m=DL(c,a,r,n);dp(t,m),c<n?window.requestAnimationFrame(d):s(t)}d()}function a0(t,e){var n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=e.offsetHeight/3;s.bottom+a>n.bottom?dp(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):s.top-a<n.top&&dp(t,Math.max(e.offsetTop-a,0))}function RL(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function r0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function PL(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var m2=!1,ML={get passive(){return m2=!0}},Fu=typeof window<"u"?window:{};Fu.addEventListener&&Fu.removeEventListener&&(Fu.addEventListener("p",op,ML),Fu.removeEventListener("p",op,!1));var IL=m2;function OL(t){return t!=null}function LL(t){return Array.isArray(t)}function $d(t,e,n){return t?e:n}var FL=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var r=Object.entries(e).filter(function(o){var c=Cr(o,1),d=c[0];return!s.includes(d)});return r.reduce(function(o,c){var d=Cr(c,2),m=d[0],u=d[1];return o[m]=u,o},{})},$L=["children","innerProps"],BL=["children","innerProps"];function qL(t){var e=t.maxHeight,n=t.menuEl,s=t.minHeight,a=t.placement,r=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,d=AL(n),m={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return m;var u=d.getBoundingClientRect(),p=u.height,h=n.getBoundingClientRect(),g=h.bottom,v=h.height,x=h.top,y=n.offsetParent.getBoundingClientRect(),b=y.top,w=o?window.innerHeight:TL(d),k=d2(d),_=parseInt(getComputedStyle(n).marginBottom,10),j=parseInt(getComputedStyle(n).marginTop,10),T=b-j,N=w-x,E=T+k,A=p-k-x,L=g-w+k+_,C=k+x-j,P=160;switch(a){case"auto":case"bottom":if(N>=v)return{placement:"bottom",maxHeight:e};if(A>=v&&!o)return r&&Lu(d,L,P),{placement:"bottom",maxHeight:e};if(!o&&A>=s||o&&N>=s){r&&Lu(d,L,P);var R=o?N-_:A-_;return{placement:"bottom",maxHeight:R}}if(a==="auto"||o){var M=e,O=o?T:E;return O>=s&&(M=Math.min(O-_-c,e)),{placement:"top",maxHeight:M}}if(a==="bottom")return r&&dp(d,L),{placement:"bottom",maxHeight:e};break;case"top":if(T>=v)return{placement:"top",maxHeight:e};if(E>=v&&!o)return r&&Lu(d,C,P),{placement:"top",maxHeight:e};if(!o&&E>=s||o&&T>=s){var q=e;return(!o&&E>=s||o&&T>=s)&&(q=o?T-j:E-j),r&&Lu(d,C,P),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return m}function HL(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var u2=function(e){return e==="auto"?"bottom":e},zL=function(e,n){var s,a=e.placement,r=e.theme,o=r.borderRadius,c=r.spacing,d=r.colors;return Ot((s={label:"menu"},Fd(s,HL(a),"100%"),Fd(s,"position","absolute"),Fd(s,"width","100%"),Fd(s,"zIndex",1),s),n?{}:{backgroundColor:d.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},h2=f.createContext(null),VL=function(e){var n=e.children,s=e.minMenuHeight,a=e.maxMenuHeight,r=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,m=f.useContext(h2)||{},u=m.setPortalPlacement,p=f.useRef(null),h=f.useState(a),g=Cr(h,2),v=g[0],x=g[1],y=f.useState(null),b=Cr(y,2),w=b[0],k=b[1],_=d.spacing.controlHeight;return lp(function(){var j=p.current;if(j){var T=o==="fixed",N=c&&!T,E=qL({maxHeight:a,menuEl:j,minHeight:s,placement:r,shouldScroll:N,isFixedPosition:T,controlHeight:_});x(E.maxHeight),k(E.placement),u?.(E.placement)}},[a,r,o,c,s,u,_]),n({ref:p,placerProps:Ot(Ot({},e),{},{placement:w||u2(r),maxHeight:v})})},UL=function(e){var n=e.children,s=e.innerRef,a=e.innerProps;return Mt("div",It({},Zn(e,"menu",{menu:!0}),{ref:s},a),n)},WL=UL,KL=function(e,n){var s=e.maxHeight,a=e.theme.spacing.baseUnit;return Ot({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},GL=function(e){var n=e.children,s=e.innerProps,a=e.innerRef,r=e.isMulti;return Mt("div",It({},Zn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":r}),{ref:a},s),n)},p2=function(e,n){var s=e.theme,a=s.spacing.baseUnit,r=s.colors;return Ot({textAlign:"center"},n?{}:{color:r.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},YL=p2,QL=p2,ZL=function(e){var n=e.children,s=n===void 0?"No options":n,a=e.innerProps,r=ka(e,$L);return Mt("div",It({},Zn(Ot(Ot({},r),{},{children:s,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),s)},XL=function(e){var n=e.children,s=n===void 0?"Loading...":n,a=e.innerProps,r=ka(e,BL);return Mt("div",It({},Zn(Ot(Ot({},r),{},{children:s,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),s)},JL=function(e){var n=e.rect,s=e.offset,a=e.position;return{left:n.left,position:a,top:s,width:n.width,zIndex:1}},eF=function(e){var n=e.appendTo,s=e.children,a=e.controlElement,r=e.innerProps,o=e.menuPlacement,c=e.menuPosition,d=f.useRef(null),m=f.useRef(null),u=f.useState(u2(o)),p=Cr(u,2),h=p[0],g=p[1],v=f.useMemo(function(){return{setPortalPlacement:g}},[]),x=f.useState(null),y=Cr(x,2),b=y[0],w=y[1],k=f.useCallback(function(){if(a){var N=RL(a),E=c==="fixed"?0:window.pageYOffset,A=N[h]+E;(A!==b?.offset||N.left!==b?.rect.left||N.width!==b?.rect.width)&&w({offset:A,rect:N})}},[a,c,h,b?.offset,b?.rect.left,b?.rect.width]);lp(function(){k()},[k]);var _=f.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),a&&d.current&&(m.current=CL(a,d.current,k,{elementResize:"ResizeObserver"in window}))},[a,k]);lp(function(){_()},[_]);var j=f.useCallback(function(N){d.current=N,_()},[_]);if(!n&&c!=="fixed"||!b)return null;var T=Mt("div",It({ref:j},Zn(Ot(Ot({},e),{},{offset:b.offset,position:c,rect:b.rect}),"menuPortal",{"menu-portal":!0}),r),s);return Mt(h2.Provider,{value:v},n?La.createPortal(T,n):T)},tF=function(e){var n=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},nF=function(e){var n=e.children,s=e.innerProps,a=e.isDisabled,r=e.isRtl;return Mt("div",It({},Zn(e,"container",{"--is-disabled":a,"--is-rtl":r}),s),n)},iF=function(e,n){var s=e.theme.spacing,a=e.isMulti,r=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ot({alignItems:"center",display:a&&r&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},sF=function(e){var n=e.children,s=e.innerProps,a=e.isMulti,r=e.hasValue;return Mt("div",It({},Zn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":r}),s),n)},aF=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},rF=function(e){var n=e.children,s=e.innerProps;return Mt("div",It({},Zn(e,"indicatorsContainer",{indicators:!0}),s),n)},l0,lF=["size"],oF=["innerProps","isRtl","size"],cF={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},g2=function(e){var n=e.size,s=ka(e,lF);return Mt("svg",It({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:cF},s))},Gb=function(e){return Mt(g2,It({size:20},e),Mt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},f2=function(e){return Mt(g2,It({size:20},e),Mt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},v2=function(e,n){var s=e.isFocused,a=e.theme,r=a.spacing.baseUnit,o=a.colors;return Ot({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:s?o.neutral60:o.neutral20,padding:r*2,":hover":{color:s?o.neutral80:o.neutral40}})},dF=v2,mF=function(e){var n=e.children,s=e.innerProps;return Mt("div",It({},Zn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),n||Mt(f2,null))},uF=v2,hF=function(e){var n=e.children,s=e.innerProps;return Mt("div",It({},Zn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),n||Mt(Gb,null))},pF=function(e,n){var s=e.isDisabled,a=e.theme,r=a.spacing.baseUnit,o=a.colors;return Ot({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:r*2,marginTop:r*2})},gF=function(e){var n=e.innerProps;return Mt("span",It({},n,Zn(e,"indicatorSeparator",{"indicator-separator":!0})))},fF=cL(l0||(l0=dL([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),vF=function(e,n){var s=e.isFocused,a=e.size,r=e.theme,o=r.colors,c=r.spacing.baseUnit;return Ot({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:s?o.neutral60:o.neutral20,padding:c*2})},Xf=function(e){var n=e.delay,s=e.offset;return Mt("span",{css:Vb({animation:"".concat(fF," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},xF=function(e){var n=e.innerProps,s=e.isRtl,a=e.size,r=a===void 0?4:a,o=ka(e,oF);return Mt("div",It({},Zn(Ot(Ot({},o),{},{innerProps:n,isRtl:s,size:r}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Mt(Xf,{delay:0,offset:s}),Mt(Xf,{delay:160,offset:!0}),Mt(Xf,{delay:320,offset:!s}))},yF=function(e,n){var s=e.isDisabled,a=e.isFocused,r=e.theme,o=r.colors,c=r.borderRadius,d=r.spacing;return Ot({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:a?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},bF=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,r=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return Mt("div",It({ref:r},Zn(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":a,"control--menu-is-open":c}),o,{"aria-disabled":s||void 0}),n)},wF=bF,kF=["data"],jF=function(e,n){var s=e.theme.spacing;return n?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},NF=function(e){var n=e.children,s=e.cx,a=e.getStyles,r=e.getClassNames,o=e.Heading,c=e.headingProps,d=e.innerProps,m=e.label,u=e.theme,p=e.selectProps;return Mt("div",It({},Zn(e,"group",{group:!0}),d),Mt(o,It({},c,{selectProps:p,theme:u,getStyles:a,getClassNames:r,cx:s}),m),Mt("div",null,n))},CF=function(e,n){var s=e.theme,a=s.colors,r=s.spacing;return Ot({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:r.baseUnit*3,paddingRight:r.baseUnit*3,textTransform:"uppercase"})},SF=function(e){var n=c2(e);n.data;var s=ka(n,kF);return Mt("div",It({},Zn(e,"groupHeading",{"group-heading":!0}),s))},_F=NF,EF=["innerRef","isDisabled","isHidden","inputClassName"],TF=function(e,n){var s=e.isDisabled,a=e.value,r=e.theme,o=r.spacing,c=r.colors;return Ot(Ot({visibility:s?"hidden":"visible",transform:a?"translateZ(0)":""},AF),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},x2={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},AF={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ot({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},x2)},DF=function(e){return Ot({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},x2)},RF=function(e){var n=e.cx,s=e.value,a=c2(e),r=a.innerRef,o=a.isDisabled,c=a.isHidden,d=a.inputClassName,m=ka(a,EF);return Mt("div",It({},Zn(e,"input",{"input-container":!0}),{"data-value":s||""}),Mt("input",It({className:n({input:!0},d),ref:r,style:DF(c),disabled:o},m)))},PF=RF,MF=function(e,n){var s=e.theme,a=s.spacing,r=s.borderRadius,o=s.colors;return Ot({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:r/2,margin:a.baseUnit/2})},IF=function(e,n){var s=e.theme,a=s.borderRadius,r=s.colors,o=e.cropWithEllipsis;return Ot({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:r.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},OF=function(e,n){var s=e.theme,a=s.spacing,r=s.borderRadius,o=s.colors,c=e.isFocused;return Ot({alignItems:"center",display:"flex"},n?{}:{borderRadius:r/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},y2=function(e){var n=e.children,s=e.innerProps;return Mt("div",s,n)},LF=y2,FF=y2;function $F(t){var e=t.children,n=t.innerProps;return Mt("div",It({role:"button"},n),e||Mt(Gb,{size:14}))}var BF=function(e){var n=e.children,s=e.components,a=e.data,r=e.innerProps,o=e.isDisabled,c=e.removeProps,d=e.selectProps,m=s.Container,u=s.Label,p=s.Remove;return Mt(m,{data:a,innerProps:Ot(Ot({},Zn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),r),selectProps:d},Mt(u,{data:a,innerProps:Ot({},Zn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},n),Mt(p,{data:a,innerProps:Ot(Ot({},Zn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},c),selectProps:d}))},qF=BF,HF=function(e,n){var s=e.isDisabled,a=e.isFocused,r=e.isSelected,o=e.theme,c=o.spacing,d=o.colors;return Ot({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:r?d.primary:a?d.primary25:"transparent",color:s?d.neutral20:r?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:r?d.primary:d.primary50}})},zF=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,r=e.isSelected,o=e.innerRef,c=e.innerProps;return Mt("div",It({},Zn(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":a,"option--is-selected":r}),{ref:o,"aria-disabled":s},c),n)},VF=zF,UF=function(e,n){var s=e.theme,a=s.spacing,r=s.colors;return Ot({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:r.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},WF=function(e){var n=e.children,s=e.innerProps;return Mt("div",It({},Zn(e,"placeholder",{placeholder:!0}),s),n)},KF=WF,GF=function(e,n){var s=e.isDisabled,a=e.theme,r=a.spacing,o=a.colors;return Ot({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:s?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},YF=function(e){var n=e.children,s=e.isDisabled,a=e.innerProps;return Mt("div",It({},Zn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),a),n)},QF=YF,b2={ClearIndicator:hF,Control:wF,DropdownIndicator:mF,DownChevron:f2,CrossIcon:Gb,Group:_F,GroupHeading:SF,IndicatorsContainer:rF,IndicatorSeparator:gF,Input:PF,LoadingIndicator:xF,Menu:WL,MenuList:GL,MenuPortal:eF,LoadingMessage:XL,NoOptionsMessage:ZL,MultiValue:qF,MultiValueContainer:LF,MultiValueLabel:FF,MultiValueRemove:$F,Option:VF,Placeholder:KF,SelectContainer:nF,SingleValue:QF,ValueContainer:sF},ZF=function(e){return Ot(Ot({},b2),e.components)},o0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function XF(t,e){return!!(t===e||o0(t)&&o0(e))}function JF(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!XF(t[n],e[n]))return!1;return!0}function e6(t,e){e===void 0&&(e=JF);var n=null;function s(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){n=null},s}var t6={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},n6=function(e){return Mt("span",It({css:t6},e))},c0=n6,i6={guidance:function(e){var n=e.isSearchable,s=e.isMulti,a=e.tabSelectsValue,r=e.context,o=e.isInitialFocus;switch(r){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,s=e.label,a=s===void 0?"":s,r=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(r.length>1?"s":""," ").concat(r.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var n=e.context,s=e.focused,a=e.options,r=e.label,o=r===void 0?"":r,c=e.selectValue,d=e.isDisabled,m=e.isSelected,u=e.isAppleDevice,p=function(x,y){return x&&x.length?"".concat(x.indexOf(y)+1," of ").concat(x.length):""};if(n==="value"&&c)return"value ".concat(o," focused, ").concat(p(c,s),".");if(n==="menu"&&u){var h=d?" disabled":"",g="".concat(m?" selected":"").concat(h);return"".concat(o).concat(g,", ").concat(p(a,s),".")}return""},onFilter:function(e){var n=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(n?" for search term "+n:"",".")}},s6=function(e){var n=e.ariaSelection,s=e.focusedOption,a=e.focusedValue,r=e.focusableOptions,o=e.isFocused,c=e.selectValue,d=e.selectProps,m=e.id,u=e.isAppleDevice,p=d.ariaLiveMessages,h=d.getOptionLabel,g=d.inputValue,v=d.isMulti,x=d.isOptionDisabled,y=d.isSearchable,b=d.menuIsOpen,w=d.options,k=d.screenReaderStatus,_=d.tabSelectsValue,j=d.isLoading,T=d["aria-label"],N=d["aria-live"],E=f.useMemo(function(){return Ot(Ot({},i6),p||{})},[p]),A=f.useMemo(function(){var O="";if(n&&E.onChange){var q=n.option,U=n.options,H=n.removedValue,ae=n.removedValues,V=n.value,pe=function(ie){return Array.isArray(ie)?null:ie},oe=H||q||pe(V),ne=oe?h(oe):"",se=U||ae||void 0,W=se?se.map(h):[],ge=Ot({isDisabled:oe&&x(oe,c),label:ne,labels:W},n);O=E.onChange(ge)}return O},[n,E,x,c,h]),L=f.useMemo(function(){var O="",q=s||a,U=!!(s&&c&&c.includes(s));if(q&&E.onFocus){var H={focused:q,label:h(q),isDisabled:x(q,c),isSelected:U,options:r,context:q===s?"menu":"value",selectValue:c,isAppleDevice:u};O=E.onFocus(H)}return O},[s,a,h,x,E,r,c,u]),C=f.useMemo(function(){var O="";if(b&&w.length&&!j&&E.onFilter){var q=k({count:r.length});O=E.onFilter({inputValue:g,resultsMessage:q})}return O},[r,g,b,E,w,k,j]),P=n?.action==="initial-input-focus",R=f.useMemo(function(){var O="";if(E.guidance){var q=a?"value":b?"menu":"input";O=E.guidance({"aria-label":T,context:q,isDisabled:s&&x(s,c),isMulti:v,isSearchable:y,tabSelectsValue:_,isInitialFocus:P})}return O},[T,s,a,v,x,y,b,E,c,_,P]),M=Mt(f.Fragment,null,Mt("span",{id:"aria-selection"},A),Mt("span",{id:"aria-focused"},L),Mt("span",{id:"aria-results"},C),Mt("span",{id:"aria-guidance"},R));return Mt(f.Fragment,null,Mt(c0,{id:m},P&&M),Mt(c0,{"aria-live":N,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!P&&M))},a6=s6,zx=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],r6=new RegExp("["+zx.map(function(t){return t.letters}).join("")+"]","g"),w2={};for(var Jf=0;Jf<zx.length;Jf++)for(var ev=zx[Jf],tv=0;tv<ev.letters.length;tv++)w2[ev.letters[tv]]=ev.base;var k2=function(e){return e.replace(r6,function(n){return w2[n]})},l6=e6(k2),d0=function(e){return e.replace(/^\s+|\s+$/g,"")},o6=function(e){return"".concat(e.label," ").concat(e.value)},c6=function(e){return function(n,s){if(n.data.__isNew__)return!0;var a=Ot({ignoreCase:!0,ignoreAccents:!0,stringify:o6,trim:!0,matchFrom:"any"},e),r=a.ignoreCase,o=a.ignoreAccents,c=a.stringify,d=a.trim,m=a.matchFrom,u=d?d0(s):s,p=d?d0(c(n)):c(n);return r&&(u=u.toLowerCase(),p=p.toLowerCase()),o&&(u=l6(u),p=k2(p)),m==="start"?p.substr(0,u.length)===u:p.indexOf(u)>-1}},d6=["innerRef"];function m6(t){var e=t.innerRef,n=ka(t,d6),s=FL(n,"onExited","in","enter","exit","appear");return Mt("input",It({ref:e},s,{css:Vb({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var u6=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function h6(t){var e=t.isEnabled,n=t.onBottomArrive,s=t.onBottomLeave,a=t.onTopArrive,r=t.onTopLeave,o=f.useRef(!1),c=f.useRef(!1),d=f.useRef(0),m=f.useRef(null),u=f.useCallback(function(y,b){if(m.current!==null){var w=m.current,k=w.scrollTop,_=w.scrollHeight,j=w.clientHeight,T=m.current,N=b>0,E=_-j-k,A=!1;E>b&&o.current&&(s&&s(y),o.current=!1),N&&c.current&&(r&&r(y),c.current=!1),N&&b>E?(n&&!o.current&&n(y),T.scrollTop=_,A=!0,o.current=!0):!N&&-b>k&&(a&&!c.current&&a(y),T.scrollTop=0,A=!0,c.current=!0),A&&u6(y)}},[n,s,a,r]),p=f.useCallback(function(y){u(y,y.deltaY)},[u]),h=f.useCallback(function(y){d.current=y.changedTouches[0].clientY},[]),g=f.useCallback(function(y){var b=d.current-y.changedTouches[0].clientY;u(y,b)},[u]),v=f.useCallback(function(y){if(y){var b=IL?{passive:!1}:!1;y.addEventListener("wheel",p,b),y.addEventListener("touchstart",h,b),y.addEventListener("touchmove",g,b)}},[g,h,p]),x=f.useCallback(function(y){y&&(y.removeEventListener("wheel",p,!1),y.removeEventListener("touchstart",h,!1),y.removeEventListener("touchmove",g,!1))},[g,h,p]);return f.useEffect(function(){if(e){var y=m.current;return v(y),function(){x(y)}}},[e,v,x]),function(y){m.current=y}}var m0=["boxSizing","height","overflow","paddingRight","position"],u0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function h0(t){t.cancelable&&t.preventDefault()}function p0(t){t.stopPropagation()}function g0(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function f0(){return"ontouchstart"in window||navigator.maxTouchPoints}var v0=!!(typeof window<"u"&&window.document&&window.document.createElement),kd=0,Yo={capture:!1,passive:!1};function p6(t){var e=t.isEnabled,n=t.accountForScrollbars,s=n===void 0?!0:n,a=f.useRef({}),r=f.useRef(null),o=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;if(s&&m0.forEach(function(v){var x=u&&u[v];a.current[v]=x}),s&&kd<1){var p=parseInt(a.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,g=window.innerWidth-h+p||0;Object.keys(u0).forEach(function(v){var x=u0[v];u&&(u[v]=x)}),u&&(u.paddingRight="".concat(g,"px"))}m&&f0()&&(m.addEventListener("touchmove",h0,Yo),d&&(d.addEventListener("touchstart",g0,Yo),d.addEventListener("touchmove",p0,Yo))),kd+=1}},[s]),c=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;kd=Math.max(kd-1,0),s&&kd<1&&m0.forEach(function(p){var h=a.current[p];u&&(u[p]=h)}),m&&f0()&&(m.removeEventListener("touchmove",h0,Yo),d&&(d.removeEventListener("touchstart",g0,Yo),d.removeEventListener("touchmove",p0,Yo)))}},[s]);return f.useEffect(function(){if(e){var d=r.current;return o(d),function(){c(d)}}},[e,o,c]),function(d){r.current=d}}var g6=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},f6={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function v6(t){var e=t.children,n=t.lockEnabled,s=t.captureEnabled,a=s===void 0?!0:s,r=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,m=h6({isEnabled:a,onBottomArrive:r,onBottomLeave:o,onTopArrive:c,onTopLeave:d}),u=p6({isEnabled:n}),p=function(g){m(g),u(g)};return Mt(f.Fragment,null,n&&Mt("div",{onClick:g6,css:f6}),e(p))}var x6={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},y6=function(e){var n=e.name,s=e.onFocus;return Mt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:x6,value:"",onChange:function(){}})},b6=y6;function Yb(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function w6(){return Yb(/^iPhone/i)}function j2(){return Yb(/^Mac/i)}function k6(){return Yb(/^iPad/i)||j2()&&navigator.maxTouchPoints>1}function j6(){return w6()||k6()}function N6(){return j2()||j6()}var C6=function(e){return e.label},N2=function(e){return e.label},C2=function(e){return e.value},S6=function(e){return!!e.isDisabled},_6={clearIndicator:uF,container:tF,control:yF,dropdownIndicator:dF,group:jF,groupHeading:CF,indicatorsContainer:aF,indicatorSeparator:pF,input:TF,loadingIndicator:vF,loadingMessage:QL,menu:zL,menuList:KL,menuPortal:JL,multiValue:MF,multiValueLabel:IF,multiValueRemove:OF,noOptionsMessage:YL,option:HF,placeholder:UF,singleValue:GF,valueContainer:iF},E6={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},T6=4,S2=4,A6=38,D6=S2*2,R6={baseUnit:S2,controlHeight:A6,menuGutter:D6},nv={borderRadius:T6,colors:E6,spacing:R6},P6={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:r0(),captureMenuScroll:!r0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:c6(),formatGroupLabel:C6,getOptionLabel:N2,getOptionValue:C2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:S6,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!PL(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function x0(t,e,n,s){var a=T2(t,e,n),r=A2(t,e,n),o=E2(t,e),c=mp(t,e);return{type:"option",data:e,isDisabled:a,isSelected:r,label:o,value:c,index:s}}function Rh(t,e){return t.options.map(function(n,s){if("options"in n){var a=n.options.map(function(o,c){return x0(t,o,e,c)}).filter(function(o){return b0(t,o)});return a.length>0?{type:"group",data:n,options:a,index:s}:void 0}var r=x0(t,n,e,s);return b0(t,r)?r:void 0}).filter(OL)}function _2(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,hc(n.options.map(function(s){return s.data}))):e.push(n.data),e},[])}function y0(t,e){return t.reduce(function(n,s){return s.type==="group"?n.push.apply(n,hc(s.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(s.index,"-").concat(a.index)}}))):n.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),n},[])}function M6(t,e){return _2(Rh(t,e))}function b0(t,e){var n=t.inputValue,s=n===void 0?"":n,a=e.data,r=e.isSelected,o=e.label,c=e.value;return(!R2(t)||!r)&&D2(t,{label:o,value:c,data:a},s)}function I6(t,e){var n=t.focusedValue,s=t.selectValue,a=s.indexOf(n);if(a>-1){var r=e.indexOf(n);if(r>-1)return n;if(a<e.length)return e[a]}return null}function O6(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var iv=function(e,n){var s,a=(s=e.find(function(r){return r.data===n}))===null||s===void 0?void 0:s.id;return a||null},E2=function(e,n){return e.getOptionLabel(n)},mp=function(e,n){return e.getOptionValue(n)};function T2(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function A2(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var s=mp(t,e);return n.some(function(a){return mp(t,a)===s})}function D2(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var R2=function(e){var n=e.hideSelectedOptions,s=e.isMulti;return n===void 0?s:n},L6=1,Qb=(function(t){zE(n,t);var e=UE(n);function n(s){var a;if(qE(this,n),a=e.call(this,s),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,m){var u=a.props,p=u.onChange,h=u.name;m.name=h,a.ariaOnChange(d,m),p(d,m)},a.setValue=function(d,m,u){var p=a.props,h=p.closeMenuOnSelect,g=p.isMulti,v=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:v}),h&&(a.setState({inputIsHiddenAfterUpdate:!g}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:m,option:u})},a.selectOption=function(d){var m=a.props,u=m.blurInputOnSelect,p=m.isMulti,h=m.name,g=a.state.selectValue,v=p&&a.isOptionSelected(d,g),x=a.isOptionDisabled(d,g);if(v){var y=a.getOptionValue(d);a.setValue(g.filter(function(b){return a.getOptionValue(b)!==y}),"deselect-option",d)}else if(!x)p?a.setValue([].concat(hc(g),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:h});return}u&&a.blurInput()},a.removeValue=function(d){var m=a.props.isMulti,u=a.state.selectValue,p=a.getOptionValue(d),h=u.filter(function(v){return a.getOptionValue(v)!==p}),g=$d(m,h,h[0]||null);a.onChange(g,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange($d(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,m=a.state.selectValue,u=m[m.length-1],p=m.slice(0,m.length-1),h=$d(d,p,p[0]||null);u&&a.onChange(h,{action:"pop-value",removedValue:u})},a.getFocusedOptionId=function(d){return iv(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return y0(Rh(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,m=new Array(d),u=0;u<d;u++)m[u]=arguments[u];return EL.apply(void 0,[a.props.classNamePrefix].concat(m))},a.getOptionLabel=function(d){return E2(a.props,d)},a.getOptionValue=function(d){return mp(a.props,d)},a.getStyles=function(d,m){var u=a.props.unstyled,p=_6[d](m,u);p.boxSizing="border-box";var h=a.props.styles[d];return h?h(p,m):p},a.getClassNames=function(d,m){var u,p;return(u=(p=a.props.classNames)[d])===null||u===void 0?void 0:u.call(p,m)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return ZF(a.props)},a.buildCategorizedOptions=function(){return Rh(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return _2(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,m){a.setState({ariaSelection:Ot({value:d},m)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var m=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():m&&a.openMenu("first"):(m&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var m=a.props,u=m.isMulti,p=m.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!u}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&Ag(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var m=d.touches,u=m&&m.item(0);u&&(a.initialTouchX=u.clientX,a.initialTouchY=u.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var m=d.touches,u=m&&m.item(0);if(u){var p=Math.abs(u.clientX-a.initialTouchX),h=Math.abs(u.clientY-a.initialTouchY),g=5;a.userIsDragging=p>g||h>g}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var m=a.props.inputValue,u=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(u,{action:"input-change",prevInputValue:m}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var m=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:m}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var m=a.getFocusableOptions(),u=m.indexOf(d);a.setState({focusedOption:d,focusedOptionId:u>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return R2(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var m=a.props,u=m.isMulti,p=m.backspaceRemovesValue,h=m.escapeClearsValue,g=m.inputValue,v=m.isClearable,x=m.isDisabled,y=m.menuIsOpen,b=m.onKeyDown,w=m.tabSelectsValue,k=m.openMenuOnFocus,_=a.state,j=_.focusedOption,T=_.focusedValue,N=_.selectValue;if(!x&&!(typeof b=="function"&&(b(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!u||g)return;a.focusValue("previous");break;case"ArrowRight":if(!u||g)return;a.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(T)a.removeValue(T);else{if(!p)return;u?a.popValue():v&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!y||!w||!j||k&&a.isOptionSelected(j,N))return;a.selectOption(j);break;case"Enter":if(d.keyCode===229)break;if(y){if(!j||a.isComposing)return;a.selectOption(j);break}return;case"Escape":y?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:g}),a.onMenuClose()):v&&h&&a.clearValue();break;case" ":if(g)return;if(!y){a.openMenu("first");break}if(!j)return;a.selectOption(j);break;case"ArrowUp":y?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":y?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!y)return;a.focusOption("pageup");break;case"PageDown":if(!y)return;a.focusOption("pagedown");break;case"Home":if(!y)return;a.focusOption("first");break;case"End":if(!y)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++L6),a.state.selectValue=cp(s.value),s.menuIsOpen&&a.state.selectValue.length){var r=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),c=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=r,a.state.focusedOption=o[c],a.state.focusedOptionId=iv(r,o[c])}return a}return HE(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&a0(this.menuListRef,this.focusedOptionRef),N6()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var r=this.props,o=r.isDisabled,c=r.menuIsOpen,d=this.state.isFocused;(d&&!o&&a.isDisabled||d&&c&&!a.menuIsOpen)&&this.focusInput(),d&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(a0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,r){this.props.onInputChange(a,r)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var r=this,o=this.state,c=o.selectValue,d=o.isFocused,m=this.buildFocusableOptions(),u=a==="first"?0:m.length-1;if(!this.props.isMulti){var p=m.indexOf(c[0]);p>-1&&(u=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[u],focusedOptionId:this.getFocusedOptionId(m[u])},function(){return r.onMenuOpen()})}},{key:"focusValue",value:function(a){var r=this.state,o=r.selectValue,c=r.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=o.indexOf(c);c||(d=-1);var m=o.length-1,u=-1;if(o.length){switch(a){case"previous":d===0?u=0:d===-1?u=m:u=d-1;break;case"next":d>-1&&d<m&&(u=d+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",r=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,m=c.indexOf(o);o||(m=-1),a==="up"?d=m>0?m-1:c.length-1:a==="down"?d=(m+1)%c.length:a==="pageup"?(d=m-r,d<0&&(d=0)):a==="pagedown"?(d=m+r,d>c.length-1&&(d=c.length-1)):a==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nv):Ot(Ot({},nv),this.props.theme):nv})},{key:"getCommonProps",value:function(){var a=this.clearValue,r=this.cx,o=this.getStyles,c=this.getClassNames,d=this.getValue,m=this.selectOption,u=this.setValue,p=this.props,h=p.isMulti,g=p.isRtl,v=p.options,x=this.hasValue();return{clearValue:a,cx:r,getStyles:o,getClassNames:c,getValue:d,hasValue:x,isMulti:h,isRtl:g,options:v,selectOption:m,selectProps:p,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,r=a.isClearable,o=a.isMulti;return r===void 0?o:r}},{key:"isOptionDisabled",value:function(a,r){return T2(this.props,a,r)}},{key:"isOptionSelected",value:function(a,r){return A2(this.props,a,r)}},{key:"filterOption",value:function(a,r){return D2(this.props,a,r)}},{key:"formatOptionLabel",value:function(a,r){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(a,{context:r,inputValue:o,selectValue:c})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var a=this.props,r=a.isDisabled,o=a.isSearchable,c=a.inputId,d=a.inputValue,m=a.tabIndex,u=a.form,p=a.menuIsOpen,h=a.required,g=this.getComponents(),v=g.Input,x=this.state,y=x.inputIsHidden,b=x.ariaSelection,w=this.commonProps,k=c||this.getElementId("input"),_=Ot(Ot(Ot({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?b?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?f.createElement(v,It({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:r,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:u,type:"text",value:d},_)):f.createElement(m6,It({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:op,onFocus:this.onInputFocus,disabled:r,tabIndex:m,inputMode:"none",form:u,value:""},_))})},{key:"renderPlaceholderOrValue",value:function(){var a=this,r=this.getComponents(),o=r.MultiValue,c=r.MultiValueContainer,d=r.MultiValueLabel,m=r.MultiValueRemove,u=r.SingleValue,p=r.Placeholder,h=this.commonProps,g=this.props,v=g.controlShouldRenderValue,x=g.isDisabled,y=g.isMulti,b=g.inputValue,w=g.placeholder,k=this.state,_=k.selectValue,j=k.focusedValue,T=k.isFocused;if(!this.hasValue()||!v)return b?null:f.createElement(p,It({},h,{key:"placeholder",isDisabled:x,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),w);if(y)return _.map(function(E,A){var L=E===j,C="".concat(a.getOptionLabel(E),"-").concat(a.getOptionValue(E));return f.createElement(o,It({},h,{components:{Container:c,Label:d,Remove:m},isFocused:L,isDisabled:x,key:C,index:A,removeProps:{onClick:function(){return a.removeValue(E)},onTouchEnd:function(){return a.removeValue(E)},onMouseDown:function(R){R.preventDefault()}},data:E}),a.formatOptionLabel(E,"value"))});if(b)return null;var N=_[0];return f.createElement(u,It({},h,{data:N,isDisabled:x}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),r=a.ClearIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!this.isClearable()||!r||d||!this.hasValue()||m)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(r,It({},o,{innerProps:p,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),r=a.LoadingIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!r||!m)return null;var p={"aria-hidden":"true"};return f.createElement(r,It({},o,{innerProps:p,isDisabled:d,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),r=a.DropdownIndicator,o=a.IndicatorSeparator;if(!r||!o)return null;var c=this.commonProps,d=this.props.isDisabled,m=this.state.isFocused;return f.createElement(o,It({},c,{isDisabled:d,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),r=a.DropdownIndicator;if(!r)return null;var o=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(r,It({},o,{innerProps:m,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,r=this.getComponents(),o=r.Group,c=r.GroupHeading,d=r.Menu,m=r.MenuList,u=r.MenuPortal,p=r.LoadingMessage,h=r.NoOptionsMessage,g=r.Option,v=this.commonProps,x=this.state.focusedOption,y=this.props,b=y.captureMenuScroll,w=y.inputValue,k=y.isLoading,_=y.loadingMessage,j=y.minMenuHeight,T=y.maxMenuHeight,N=y.menuIsOpen,E=y.menuPlacement,A=y.menuPosition,L=y.menuPortalTarget,C=y.menuShouldBlockScroll,P=y.menuShouldScrollIntoView,R=y.noOptionsMessage,M=y.onMenuScrollToTop,O=y.onMenuScrollToBottom;if(!N)return null;var q=function(ne,se){var W=ne.type,ge=ne.data,ee=ne.isDisabled,ie=ne.isSelected,ue=ne.label,G=ne.value,le=x===ge,re=ee?void 0:function(){return a.onOptionHover(ge)},D=ee?void 0:function(){return a.selectOption(ge)},I="".concat(a.getElementId("option"),"-").concat(se),ce={id:I,onClick:D,onMouseMove:re,onMouseOver:re,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:ie};return f.createElement(g,It({},v,{innerProps:ce,data:ge,isDisabled:ee,isSelected:ie,key:I,label:ue,type:W,value:G,isFocused:le,innerRef:le?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(ne.data,"menu"))},U;if(this.hasOptions())U=this.getCategorizedOptions().map(function(oe){if(oe.type==="group"){var ne=oe.data,se=oe.options,W=oe.index,ge="".concat(a.getElementId("group"),"-").concat(W),ee="".concat(ge,"-heading");return f.createElement(o,It({},v,{key:ge,data:ne,options:se,Heading:c,headingProps:{id:ee,data:oe.data},label:a.formatGroupLabel(oe.data)}),oe.options.map(function(ie){return q(ie,"".concat(W,"-").concat(ie.index))}))}else if(oe.type==="option")return q(oe,"".concat(oe.index))});else if(k){var H=_({inputValue:w});if(H===null)return null;U=f.createElement(p,v,H)}else{var ae=R({inputValue:w});if(ae===null)return null;U=f.createElement(h,v,ae)}var V={minMenuHeight:j,maxMenuHeight:T,menuPlacement:E,menuPosition:A,menuShouldScrollIntoView:P},pe=f.createElement(VL,It({},v,V),function(oe){var ne=oe.ref,se=oe.placerProps,W=se.placement,ge=se.maxHeight;return f.createElement(d,It({},v,V,{innerRef:ne,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:k,placement:W}),f.createElement(v6,{captureEnabled:b,onTopArrive:M,onBottomArrive:O,lockEnabled:C},function(ee){return f.createElement(m,It({},v,{innerRef:function(ue){a.getMenuListRef(ue),ee(ue)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:a.getElementId("listbox")},isLoading:k,maxHeight:ge,focusedOption:x}),U)}))});return L||A==="fixed"?f.createElement(u,It({},v,{appendTo:L,controlElement:this.controlRef,menuPlacement:E,menuPosition:A}),pe):pe}},{key:"renderFormField",value:function(){var a=this,r=this.props,o=r.delimiter,c=r.isDisabled,d=r.isMulti,m=r.name,u=r.required,p=this.state.selectValue;if(u&&!this.hasValue()&&!c)return f.createElement(b6,{name:m,onFocus:this.onValueInputFocus});if(!(!m||c))if(d)if(o){var h=p.map(function(x){return a.getOptionValue(x)}).join(o);return f.createElement("input",{name:m,type:"hidden",value:h})}else{var g=p.length>0?p.map(function(x,y){return f.createElement("input",{key:"i-".concat(y),name:m,type:"hidden",value:a.getOptionValue(x)})}):f.createElement("input",{name:m,type:"hidden",value:""});return f.createElement("div",null,g)}else{var v=p[0]?this.getOptionValue(p[0]):"";return f.createElement("input",{name:m,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,r=this.state,o=r.ariaSelection,c=r.focusedOption,d=r.focusedValue,m=r.isFocused,u=r.selectValue,p=this.getFocusableOptions();return f.createElement(a6,It({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:d,isFocused:m,selectValue:u,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),r=a.Control,o=a.IndicatorsContainer,c=a.SelectContainer,d=a.ValueContainer,m=this.props,u=m.className,p=m.id,h=m.isDisabled,g=m.menuIsOpen,v=this.state.isFocused,x=this.commonProps=this.getCommonProps();return f.createElement(c,It({},x,{className:u,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:v}),this.renderLiveRegion(),f.createElement(r,It({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:v,menuIsOpen:g}),f.createElement(d,It({},x,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(o,It({},x,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,r){var o=r.prevProps,c=r.clearFocusValueOnUpdate,d=r.inputIsHiddenAfterUpdate,m=r.ariaSelection,u=r.isFocused,p=r.prevWasFocused,h=r.instancePrefix,g=a.options,v=a.value,x=a.menuIsOpen,y=a.inputValue,b=a.isMulti,w=cp(v),k={};if(o&&(v!==o.value||g!==o.options||x!==o.menuIsOpen||y!==o.inputValue)){var _=x?M6(a,w):[],j=x?y0(Rh(a,w),"".concat(h,"-option")):[],T=c?I6(r,w):null,N=O6(r,_),E=iv(j,N);k={selectValue:w,focusedOption:N,focusedOptionId:E,focusableOptionsWithIds:j,focusedValue:T,clearFocusValueOnUpdate:!1}}var A=d!=null&&a!==o?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},L=m,C=u&&p;return u&&!C&&(L={value:$d(b,w,w[0]||null),options:w,action:"initial-input-focus"},C=!p),m?.action==="initial-input-focus"&&(L=null),Ot(Ot(Ot({},k),A),{},{prevProps:a,ariaSelection:L,prevWasFocused:C})}}]),n})(f.Component);Qb.defaultProps=P6;var F6=f.forwardRef(function(t,e){var n=BE(t);return f.createElement(Qb,It({ref:e},n))}),lt=F6;const S=({width:t="100%",height:e="1rem",className:n="",style:s={}})=>i.jsx("div",{className:`skeleton-element ${n}`,style:{width:t,height:e,...s},role:"status","aria-label":"Loading content"}),Co=({items:t=["50px","100px","120px"]})=>i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:t.map((e,n)=>i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:e,height:"1rem"})},n))})}),Nl=({titleWidth:t="180px",buttonWidth:e=null})=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(S,{width:t,height:"1.5rem"}),e&&i.jsx(S,{width:e,height:"38px",style:{borderRadius:"4px"}})]}),Se=({labelWidth:t="120px",inputHeight:e="38px",hasAction:n=!1})=>i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:`${n?"d-flex justify-content-between":""} mb-2`,children:[i.jsx(S,{width:t,height:"1rem"}),n&&i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx(S,{width:"100%",height:e,style:{borderRadius:"4px"}})]}),Ys=({avatarSize:t="50px",nameWidth:e="120px",detailWidth:n="100px"})=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:t,height:t,style:{borderRadius:"50%"},className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(S,{width:e,height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:n,height:"0.75rem"})]})]}),w0=({labelWidth:t="100px",valueWidth:e="140px"})=>i.jsxs("div",{children:[i.jsx(S,{width:t,height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:e,height:"0.875rem"})]}),st=({width:t="80px",height:e="38px",className:n={}})=>i.jsx(S,{width:t,height:e,style:{borderRadius:"4px"},className:n}),pt=({children:t})=>i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:t})}),Zd=({count:t,colClass:e="col-md-6",children:n})=>i.jsx("div",{className:"row gy-3",children:Array.from({length:t}).map((s,a)=>i.jsx("div",{className:e,children:typeof n=="function"?n(a):n},a))}),P2=({count:t=28})=>i.jsxs("div",{className:"p-3 bg-body rounded slot-scrolling",children:[i.jsx(S,{width:"100px",height:"1.1rem",className:"mx-auto my-3 d-block"}),i.jsx("div",{className:"appointments-slot-select",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"form-check slot-select",children:i.jsx(S,{width:"100%",height:"36px",style:{borderRadius:"4px"}})},n))})]});var $6=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return mE(e,s)})},sv=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return uE(e,s)})},Ci=(function(t){db(e,t);function e(){for(var s,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=t.call.apply(t,[this].concat(r))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1];s.removeClasses(u,"exit"),s.addClass(u,p?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(c,d)},s.onEntering=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.addClass(u,h,"active"),s.props.onEntering&&s.props.onEntering(c,d)},s.onEntered=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.removeClasses(u,h),s.addClass(u,h,"done"),s.props.onEntered&&s.props.onEntered(c,d)},s.onExit=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"appear"),s.removeClasses(m,"enter"),s.addClass(m,"exit","base"),s.props.onExit&&s.props.onExit(c)},s.onExiting=function(c){var d=s.resolveArguments(c),m=d[0];s.addClass(m,"exit","active"),s.props.onExiting&&s.props.onExiting(c)},s.onExited=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"exit"),s.addClass(m,"exit","done"),s.props.onExited&&s.props.onExited(c)},s.resolveArguments=function(c,d){return s.props.nodeRef?[s.props.nodeRef.current,c]:[c,d]},s.getClassNames=function(c){var d=s.props.classNames,m=typeof d=="string",u=m&&d?d+"-":"",p=m?""+u+c:d[c],h=m?p+"-active":d[c+"Active"],g=m?p+"-done":d[c+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:g}},s}var n=e.prototype;return n.addClass=function(a,r,o){var c=this.getClassNames(r)[o+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;r==="appear"&&o==="done"&&m&&(c+=" "+m),o==="active"&&a&&m_(a),c&&(this.appliedClasses[r][o]=c,$6(a,c))},n.removeClasses=function(a,r){var o=this.appliedClasses[r],c=o.base,d=o.active,m=o.done;this.appliedClasses[r]={},c&&sv(a,c),d&&sv(a,d),m&&sv(a,m)},n.render=function(){var a=this.props;a.classNames;var r=gg(a,["classNames"]);return We.createElement(Xa,It({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(We.Component);Ci.defaultProps={classNames:""};Ci.propTypes={};var $u,Bu;function B6(t,e){return!(t===e||We.isValidElement(t)&&We.isValidElement(e)&&t.key!=null&&t.key===e.key)}var Lc={out:"out-in",in:"in-out"},up=function(e,n,s){return function(){var a;e.props[n]&&(a=e.props)[n].apply(a,arguments),s()}},q6=($u={},$u[Lc.out]=function(t){var e=t.current,n=t.changeState;return We.cloneElement(e,{in:!1,onExited:up(e,"onExited",function(){n(Mi,null)})})},$u[Lc.in]=function(t){var e=t.current,n=t.changeState,s=t.children;return[e,We.cloneElement(s,{in:!0,onEntered:up(s,"onEntered",function(){n(Mi)})})]},$u),H6=(Bu={},Bu[Lc.out]=function(t){var e=t.children,n=t.changeState;return We.cloneElement(e,{in:!0,onEntered:up(e,"onEntered",function(){n(js,We.cloneElement(e,{in:!0}))})})},Bu[Lc.in]=function(t){var e=t.current,n=t.children,s=t.changeState;return[We.cloneElement(e,{in:!1,onExited:up(e,"onExited",function(){s(js,We.cloneElement(n,{in:!0}))})}),We.cloneElement(n,{in:!0})]},Bu),Dg=(function(t){db(e,t);function e(){for(var s,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=t.call.apply(t,[this].concat(r))||this,s.state={status:js,current:null},s.appeared=!1,s.changeState=function(c,d){d===void 0&&(d=s.state.current),s.setState({status:c,current:d})},s}var n=e.prototype;return n.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(a,r){return a.children==null?{current:null}:r.status===Mi&&a.mode===Lc.in?{status:Mi}:r.current&&B6(r.current,a.children)?{status:ao}:{current:We.cloneElement(a.children,{in:!0})}},n.render=function(){var a=this.props,r=a.children,o=a.mode,c=this.state,d=c.status,m=c.current,u={children:r,current:m,changeState:this.changeState,status:d},p;switch(d){case Mi:p=H6[o](u);break;case ao:p=q6[o](u);break;case js:p=m}return We.createElement(ub.Provider,{value:{isMounting:!this.appeared}},p)},e})(We.Component);Dg.propTypes={};Dg.defaultProps={mode:Lc.out};const M2=({children:t})=>{const e=mI();return e?i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("Oops!","kivicare")}),i.jsx("p",{className:"fs-3",children:l("Something went wrong.","kivicare")}),i.jsx("p",{className:"lead",children:e?.message||l("An unexpected error occurred.","kivicare")}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:l("Refresh Page","kivicare")})]})}):t},Xd=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("403","kivicare")}),i.jsx("p",{className:"fs-3",children:l("Access Forbidden","kivicare")}),i.jsx("p",{className:"lead",children:l("You don't have permission to access this resource.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:l("Go Home","kivicare")})]})}),Vx=()=>i.jsx("div",{className:"container-fluid py-4",children:i.jsxs(pt,{children:[i.jsx(S,{width:"40%",height:"1.5rem",className:"mb-3"}),i.jsx(S,{width:"60%",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"80%",height:"1rem"})]})}),z6=(t,e)=>{if(!t||t.length===0)return!0;const n={administrator:Er,clinic_admin:Vn,doctor:Fi,patient:Xi,receptionist:Jn};return t.some(s=>{const a=n[s];return a?a(e):!1})},Ux=({component:t,props:e={},permissions:n=[],addons:s=[],roles:a=[],module:r=null,meta:o={},...c})=>{const{hasCapability:d,isAddonActive:m,userRole:u,module_config:p,loading:h}=mt(),x=Bm().at?.(-1)?.handle?.skeleton,y=x?typeof x=="function"?x:()=>We.createElement(x):Vx;return h?i.jsx(y,{}):r&&(p[r]??"1")==="0"?i.jsx(hg,{to:"/dashboard",replace:!0}):s.length>0&&!s.every(w=>m(w))?i.jsx(Xd,{message:"Required addons are not active"}):z6(a,u)?n.length>0&&!n.every(w=>d(w))?i.jsx(Xd,{message:"You don't have required permissions"}):i.jsx(M2,{children:i.jsx(t,{...e})}):i.jsx(Xd,{message:"You don't have role access to this page"})},epe=t=>i.jsx(M2,{children:t}),tpe=t=>t.map(e=>{const n=({route:a})=>{const{permissions:r=[],addons:o=[],roles:c=[],module:d=null,meta:m={},skeleton:u=null}=a;return i.jsx(Ux,{component:()=>a.element,permissions:r,addons:o,roles:c,module:d,meta:m,skeleton:u})};if(e.element)return{...e,element:i.jsx(n,{route:e}),children:e.children?gc(e.children):void 0};if(e.component){const a={path:e.path,element:i.jsx(Ux,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.exact!==void 0&&{exact:e.exact},...e.index!==void 0&&{index:e.index},handle:e.handle,meta:e.meta};return e.children&&(a.children=gc(e.children)),a}const s={...e};return e.children&&(s.children=gc(e.children)),s}),gc=t=>t.map(e=>{if(e.element){const s={...e,handle:e.handle};return e.children&&(s.children=gc(e.children)),s}if(e.component){const s={path:e.path,element:i.jsx(Ux,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.index!==void 0&&{index:e.index},...e.exact!==void 0&&{exact:e.exact},handle:e.handle};return e.children&&(s.children=gc(e.children)),s}const n={...e};return e.children&&(n.children=gc(e.children)),n}),Ye=({path:t,component:e,title:n,props:s={},exact:a,index:r,children:o,permissions:c=[],addons:d=[],roles:m=[],meta:u={},element:p,module:h=null,skeleton:g=null})=>({path:t,title:n,...p&&{element:p},...e&&{component:e},...s&&Object.keys(s).length>0&&{props:s},...a!==void 0&&{exact:a},...r!==void 0&&{index:r},...o&&{children:o},...c.length>0&&{permissions:c},...d.length>0&&{addons:d},...m.length>0&&{roles:m},...h&&{module:h},skeleton:g,handle:{title:n,meta:u,permissions:c,addons:d,roles:m,skeleton:g,...u}}),Yn=({path:t,title:e,roles:n=[],outlet:s,children:a,permissions:r=[],addons:o=[],meta:c={},module:d=null,skeleton:m=null})=>({path:t,title:e,roles:n,element:i.jsx(s,{}),children:a,permissions:r,addons:o,meta:c,module:d,skeleton:m,handle:{title:e,meta:c,permissions:r,addons:o,roles:n,skeleton:m,...c}}),k0=({showBreadcrumb:t=!0,showInsights:e=!0,showPaymentHistory:n=!0})=>{const s=window.kc_frontend.dashboard_type,a=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),r=["administrator","kiviCare_clinic_admin","kiviCare_receptionist"].includes(s),o=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),c=["administrator","kiviCare_clinic_admin"].includes(s),d=["kiviCare_patient","kiviCare_receptionist","kiviCare_doctor"].includes(s),m=s==="kiviCare_patient",u=["administrator","kiviCare_clinic_admin"].includes(s),p=["kiviCare_doctor","kiviCare_receptionist"].includes(s)?"right":"top",h=s==="kiviCare_doctor"?4:["kiviCare_receptionist","kiviCare_clinic_admin"].includes(s)?5:6;return i.jsxs("div",{className:"container-fluid pb-0",children:[t&&i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"120px",height:"1.75rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[!m&&i.jsx(S,{width:"250px",height:"2.5rem"}),!m&&i.jsx(S,{width:"120px",height:"2.5rem",className:"rounded"})]})]}),e&&!m&&i.jsx("div",{className:`insights-container dashboard-insights-container stash-cards ${"grid-count-"+h} mb-4`,children:Array.from({length:h}).map((g,v)=>i.jsx("div",{className:"card card-block card-stretch card-height",children:i.jsx("div",{className:"card-body",children:p==="right"?i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"text-start",children:[i.jsx(S,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"140px",height:"1rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})})]}):i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle mb-3",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})}),i.jsx(S,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"140px",height:"1rem"})]})})},`insight-${v}`))}),u&&i.jsxs("div",{className:"row my-0 gx-4 mb-4",children:[a&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(S,{width:"180px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,v)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"140px",detailWidth:"100px"})},`appointment-${v}`))})]})}),r&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,v)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[i.jsx("div",{className:"flex-grow-1",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"90px"})}),i.jsx(S,{width:"80px",height:"1rem"})]})},`kiviCare_doctor-${v}`))})]})}),o&&i.jsx("div",{className:"col-xl-4 col-lg-12 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"140px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx(S,{width:"200px",height:"200px",className:"rounded-circle"})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((g,v)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"10px",height:"10px",className:"rounded-circle"}),i.jsx(S,{width:"80px",height:"1rem"})]},`legend-${v}`))})]})]})})]}),n&&c&&i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx(S,{width:"150px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:9}).map((g,v)=>i.jsx("th",{className:"py-3",children:i.jsx(S,{width:"90%",height:"1rem"})},`th-${v}`))})}),i.jsx("tbody",{children:Array.from({length:3}).map((g,v)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"})}),Array.from({length:6}).map((x,y)=>i.jsx("td",{className:"py-3",children:i.jsx(S,{width:"90%",height:"1rem"})},`cell-${v}-${y}`)),i.jsx("td",{className:"py-3",children:i.jsx(S,{width:"60px",height:"1.5rem",className:"rounded"})}),i.jsx("td",{className:"py-3",children:i.jsx("div",{className:"d-flex gap-1",children:i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"})})})]},`row-${v}`))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsx(S,{width:"150px",height:"1rem"})]})]}),d&&i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((g,v)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(S,{width:"60px",height:"1rem"})},`day-${v}`))}),Array.from({length:5}).map((g,v)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((x,y)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(S,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(S,{width:"100%",height:"6px",className:"rounded"}),i.jsx(S,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${v}-${y}`))},`week-${v}`))]})]})})})]})};var av=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],fc={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ym={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ss=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},Ls=function(t){return t===!0?1:0};function j0(t,e){var n;return function(){var s=this,a=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(s,a)},e)}}var rv=function(t){return t instanceof Array?t:[t]};function Ui(t,e,n){if(n===!0)return t.classList.add(e);t.classList.remove(e)}function hn(t,e,n){var s=window.document.createElement(t);return e=e||"",n=n||"",s.className=e,n!==void 0&&(s.textContent=n),s}function qu(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function I2(t,e){if(e(t))return t;if(t.parentNode)return I2(t.parentNode,e)}function Hu(t,e){var n=hn("div","numInputWrapper"),s=hn("input","numInput "+t),a=hn("span","arrowUp"),r=hn("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),e!==void 0)for(var o in e)s.setAttribute(o,e[o]);return n.appendChild(s),n.appendChild(a),n.appendChild(r),n}function ys(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var lv=function(){},hp=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},V6={D:lv,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*Ls(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,n){var s=parseInt(e),a=new Date(t.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:lv,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:lv,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Vl={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Jd={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[Jd.w(t,e,n)]},F:function(t,e,n){return hp(Jd.n(t,e,n)-1,!1,e)},G:function(t,e,n){return ss(Jd.h(t,e,n))},H:function(t){return ss(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[Ls(t.getHours()>11)]},M:function(t,e){return hp(t.getMonth(),!0,e)},S:function(t){return ss(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return ss(t.getFullYear(),4)},d:function(t){return ss(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return ss(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return ss(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},O2=function(t){var e=t.config,n=e===void 0?fc:e,s=t.l10n,a=s===void 0?ym:s,r=t.isMobile,o=r===void 0?!1:r;return function(c,d,m){var u=m||a;return n.formatDate!==void 0&&!o?n.formatDate(c,d,u):d.split("").map(function(p,h,g){return Jd[p]&&g[h-1]!=="\\"?Jd[p](c,u,n):p!=="\\"?p:""}).join("")}},Wx=function(t){var e=t.config,n=e===void 0?fc:e,s=t.l10n,a=s===void 0?ym:s;return function(r,o,c,d){if(!(r!==0&&!r)){var m=d||a,u,p=r;if(r instanceof Date)u=new Date(r.getTime());else if(typeof r!="string"&&r.toFixed!==void 0)u=new Date(r);else if(typeof r=="string"){var h=o||(n||fc).dateFormat,g=String(r).trim();if(g==="today")u=new Date,c=!0;else if(n&&n.parseDate)u=n.parseDate(r,h);else if(/Z$/.test(g)||/GMT$/.test(g))u=new Date(r);else{for(var v=void 0,x=[],y=0,b=0,w="";y<h.length;y++){var k=h[y],_=k==="\\",j=h[y-1]==="\\"||_;if(Vl[k]&&!j){w+=Vl[k];var T=new RegExp(w).exec(r);T&&(v=!0)&&x[k!=="Y"?"push":"unshift"]({fn:V6[k],val:T[++b]})}else _||(w+=".")}u=!n||!n.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),x.forEach(function(N){var E=N.fn,A=N.val;return u=E(u,A,m)||u}),u=v?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){n.errorHandler(new Error("Invalid date provided: "+p));return}return c===!0&&u.setHours(0,0,0,0),u}}};function bs(t,e,n){return n===void 0&&(n=!0),n!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var U6=function(t,e,n){return t>Math.min(e,n)&&t<Math.max(e,n)},ov=function(t,e,n){return t*3600+e*60+n},W6=function(t){var e=Math.floor(t/3600),n=(t-e*3600)/60;return[e,n,t-e*3600-n*60]},K6={DAY:864e5};function cv(t){var e=t.defaultHour,n=t.defaultMinute,s=t.defaultSeconds;if(t.minDate!==void 0){var a=t.minDate.getHours(),r=t.minDate.getMinutes(),o=t.minDate.getSeconds();e<a&&(e=a),e===a&&n<r&&(n=r),e===a&&n===r&&s<o&&(s=t.minDate.getSeconds())}if(t.maxDate!==void 0){var c=t.maxDate.getHours(),d=t.maxDate.getMinutes();e=Math.min(e,c),e===c&&(n=Math.min(d,n)),e===c&&n===d&&(s=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var s=function(c){c&&Object.keys(c).forEach(function(d){return t[d]=c[d]})},a=0,r=e;a<r.length;a++){var o=r[a];s(o)}return t});var Ri=function(){return Ri=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ri.apply(this,arguments)},N0=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var r=arguments[e],o=0,c=r.length;o<c;o++,a++)s[a]=r[o];return s},G6=300;function Y6(t,e){var n={config:Ri(Ri({},fc),ii.defaultConfig),l10n:ym};n.parseDate=Wx({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=x,n._setHoursFromDate=h,n._positionCalendar=F,n.changeMonth=pe,n.changeYear=ee,n.clear=oe,n.close=ne,n.onMouseOver=re,n._createElement=hn,n.createDay=T,n.destroy=se,n.isEnabled=ie,n.jumpToDate=w,n.updateValue=yt,n.open=I,n.redraw=me,n.set=ye,n.setDate=et,n.toggle=xe;function s(){n.utils={getDaysInMonth:function(z,X){return z===void 0&&(z=n.currentMonth),X===void 0&&(X=n.currentYear),z===1&&(X%4===0&&X%100!==0||X%400===0)?29:n.l10n.daysInMonth[z]}}}function a(){n.element=n.input=t,n.isOpen=!1,Z(),B(),qt(),At(),s(),n.isMobile||j(),b(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&h(n.config.noCalendar?n.latestSelectedDateObj:void 0),yt(!1)),c();var z=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&z&&F(),ke("onReady")}function r(){var z;return((z=n.calendarContainer)===null||z===void 0?void 0:z.getRootNode()).activeElement||document.activeElement}function o(z){return z.bind(n)}function c(){var z=n.config;z.weekNumbers===!1&&z.showMonths===1||z.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){var X=(n.days.offsetWidth+1)*z.showMonths;n.daysContainer.style.width=X+"px",n.calendarContainer.style.width=X+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function d(z){if(n.selectedDates.length===0){var X=n.config.minDate===void 0||bs(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),fe=cv(n.config);X.setHours(fe.hours,fe.minutes,fe.seconds,X.getMilliseconds()),n.selectedDates=[X],n.latestSelectedDateObj=X}z!==void 0&&z.type!=="blur"&&Be(z);var _e=n._input.value;p(),yt(),n._input.value!==_e&&n._debouncedChange()}function m(z,X){return z%12+12*Ls(X===n.l10n.amPM[1])}function u(z){switch(z%24){case 0:case 12:return 12;default:return z%12}}function p(){if(!(n.hourElement===void 0||n.minuteElement===void 0)){var z=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,X=(parseInt(n.minuteElement.value,10)||0)%60,fe=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(z=m(z,n.amPM.textContent));var _e=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&bs(n.latestSelectedDateObj,n.config.minDate,!0)===0,ze=n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&bs(n.latestSelectedDateObj,n.config.maxDate,!0)===0;if(n.config.maxTime!==void 0&&n.config.minTime!==void 0&&n.config.minTime>n.config.maxTime){var Je=ov(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),nt=ov(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),at=ov(z,X,fe);if(at>nt&&at<Je){var jt=W6(Je);z=jt[0],X=jt[1],fe=jt[2]}}else{if(ze){var ot=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;z=Math.min(z,ot.getHours()),z===ot.getHours()&&(X=Math.min(X,ot.getMinutes())),X===ot.getMinutes()&&(fe=Math.min(fe,ot.getSeconds()))}if(_e){var wt=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;z=Math.max(z,wt.getHours()),z===wt.getHours()&&X<wt.getMinutes()&&(X=wt.getMinutes()),X===wt.getMinutes()&&(fe=Math.max(fe,wt.getSeconds()))}}g(z,X,fe)}}function h(z){var X=z||n.latestSelectedDateObj;X&&X instanceof Date&&g(X.getHours(),X.getMinutes(),X.getSeconds())}function g(z,X,fe){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(z%24,X,fe||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=ss(n.config.time_24hr?z:(12+z)%12+12*Ls(z%12===0)),n.minuteElement.value=ss(X),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[Ls(z>=12)]),n.secondElement!==void 0&&(n.secondElement.value=ss(fe)))}function v(z){var X=ys(z),fe=parseInt(X.value)+(z.delta||0);(fe/1e3>1||z.key==="Enter"&&!/[^\d]/.test(fe.toString()))&&ee(fe)}function x(z,X,fe,_e){if(X instanceof Array)return X.forEach(function(ze){return x(z,ze,fe,_e)});if(z instanceof Array)return z.forEach(function(ze){return x(ze,X,fe,_e)});z.addEventListener(X,fe,_e),n._handlers.push({remove:function(){return z.removeEventListener(X,fe,_e)}})}function y(){ke("onChange")}function b(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(function(fe){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+fe+"]"),function(_e){return x(_e,"click",n[fe])})}),n.isMobile){De();return}var z=j0(D,50);if(n._debouncedChange=j0(y,G6),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&x(n.daysContainer,"mouseover",function(fe){n.config.mode==="range"&&re(ys(fe))}),x(n._input,"keydown",le),n.calendarContainer!==void 0&&x(n.calendarContainer,"keydown",le),!n.config.inline&&!n.config.static&&x(window,"resize",z),window.ontouchstart!==void 0?x(window.document,"touchstart",ge):x(window.document,"mousedown",ge),x(window.document,"focus",ge,{capture:!0}),n.config.clickOpens===!0&&(x(n._input,"focus",n.open),x(n._input,"click",n.open)),n.daysContainer!==void 0&&(x(n.monthNav,"click",Ae),x(n.monthNav,["keyup","increment"],v),x(n.daysContainer,"click",Y)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){var X=function(fe){return ys(fe).select()};x(n.timeContainer,["increment"],d),x(n.timeContainer,"blur",d,{capture:!0}),x(n.timeContainer,"click",k),x([n.hourElement,n.minuteElement],["focus","click"],X),n.secondElement!==void 0&&x(n.secondElement,"focus",function(){return n.secondElement&&n.secondElement.select()}),n.amPM!==void 0&&x(n.amPM,"click",function(fe){d(fe)})}n.config.allowInput&&x(n._input,"blur",G)}function w(z,X){var fe=z!==void 0?n.parseDate(z):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),_e=n.currentYear,ze=n.currentMonth;try{fe!==void 0&&(n.currentYear=fe.getFullYear(),n.currentMonth=fe.getMonth())}catch(Je){Je.message="Invalid date supplied: "+fe,n.config.errorHandler(Je)}X&&n.currentYear!==_e&&(ke("onYearChange"),R()),X&&(n.currentYear!==_e||n.currentMonth!==ze)&&ke("onMonthChange"),n.redraw()}function k(z){var X=ys(z);~X.className.indexOf("arrow")&&_(z,X.classList.contains("arrowUp")?1:-1)}function _(z,X,fe){var _e=z&&ys(z),ze=fe||_e&&_e.parentNode&&_e.parentNode.firstChild,Je=Oe("increment");Je.delta=X,ze&&ze.dispatchEvent(Je)}function j(){var z=window.document.createDocumentFragment();if(n.calendarContainer=hn("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(z.appendChild(q()),n.innerContainer=hn("div","flatpickr-innerContainer"),n.config.weekNumbers){var X=V(),fe=X.weekWrapper,_e=X.weekNumbers;n.innerContainer.appendChild(fe),n.weekNumbers=_e,n.weekWrapper=fe}n.rContainer=hn("div","flatpickr-rContainer"),n.rContainer.appendChild(H()),n.daysContainer||(n.daysContainer=hn("div","flatpickr-days"),n.daysContainer.tabIndex=-1),P(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),z.appendChild(n.innerContainer)}n.config.enableTime&&z.appendChild(U()),Ui(n.calendarContainer,"rangeMode",n.config.mode==="range"),Ui(n.calendarContainer,"animate",n.config.animate===!0),Ui(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(z);var ze=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!ze&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var Je=hn("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(Je,n.element),Je.appendChild(n.element),n.altInput&&Je.appendChild(n.altInput),Je.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function T(z,X,fe,_e){var ze=ie(X,!0),Je=hn("span",z,X.getDate().toString());return Je.dateObj=X,Je.$i=_e,Je.setAttribute("aria-label",n.formatDate(X,n.config.ariaDateFormat)),z.indexOf("hidden")===-1&&bs(X,n.now)===0&&(n.todayDateElem=Je,Je.classList.add("today"),Je.setAttribute("aria-current","date")),ze?(Je.tabIndex=-1,Qe(X)&&(Je.classList.add("selected"),n.selectedDateElem=Je,n.config.mode==="range"&&(Ui(Je,"startRange",n.selectedDates[0]&&bs(X,n.selectedDates[0],!0)===0),Ui(Je,"endRange",n.selectedDates[1]&&bs(X,n.selectedDates[1],!0)===0),z==="nextMonthDay"&&Je.classList.add("inRange")))):Je.classList.add("flatpickr-disabled"),n.config.mode==="range"&&ct(X)&&!Qe(X)&&Je.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&z!=="prevMonthDay"&&_e%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(X)+"</span>"),ke("onDayCreate",Je),Je}function N(z){z.focus(),n.config.mode==="range"&&re(z)}function E(z){for(var X=z>0?0:n.config.showMonths-1,fe=z>0?n.config.showMonths:-1,_e=X;_e!=fe;_e+=z)for(var ze=n.daysContainer.children[_e],Je=z>0?0:ze.children.length-1,nt=z>0?ze.children.length:-1,at=Je;at!=nt;at+=z){var jt=ze.children[at];if(jt.className.indexOf("hidden")===-1&&ie(jt.dateObj))return jt}}function A(z,X){for(var fe=z.className.indexOf("Month")===-1?z.dateObj.getMonth():n.currentMonth,_e=X>0?n.config.showMonths:-1,ze=X>0?1:-1,Je=fe-n.currentMonth;Je!=_e;Je+=ze)for(var nt=n.daysContainer.children[Je],at=fe-n.currentMonth===Je?z.$i+X:X<0?nt.children.length-1:0,jt=nt.children.length,ot=at;ot>=0&&ot<jt&&ot!=(X>0?jt:-1);ot+=ze){var wt=nt.children[ot];if(wt.className.indexOf("hidden")===-1&&ie(wt.dateObj)&&Math.abs(z.$i-ot)>=Math.abs(X))return N(wt)}n.changeMonth(ze),L(E(ze),0)}function L(z,X){var fe=r(),_e=ue(fe||document.body),ze=z!==void 0?z:_e?fe:n.selectedDateElem!==void 0&&ue(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&ue(n.todayDateElem)?n.todayDateElem:E(X>0?1:-1);ze===void 0?n._input.focus():_e?A(ze,X):N(ze)}function C(z,X){for(var fe=(new Date(z,X,1).getDay()-n.l10n.firstDayOfWeek+7)%7,_e=n.utils.getDaysInMonth((X-1+12)%12,z),ze=n.utils.getDaysInMonth(X,z),Je=window.document.createDocumentFragment(),nt=n.config.showMonths>1,at=nt?"prevMonthDay hidden":"prevMonthDay",jt=nt?"nextMonthDay hidden":"nextMonthDay",ot=_e+1-fe,wt=0;ot<=_e;ot++,wt++)Je.appendChild(T("flatpickr-day "+at,new Date(z,X-1,ot),ot,wt));for(ot=1;ot<=ze;ot++,wt++)Je.appendChild(T("flatpickr-day",new Date(z,X,ot),ot,wt));for(var Wt=ze+1;Wt<=42-fe&&(n.config.showMonths===1||wt%7!==0);Wt++,wt++)Je.appendChild(T("flatpickr-day "+jt,new Date(z,X+1,Wt%ze),Wt,wt));var we=hn("div","dayContainer");return we.appendChild(Je),we}function P(){if(n.daysContainer!==void 0){qu(n.daysContainer),n.weekNumbers&&qu(n.weekNumbers);for(var z=document.createDocumentFragment(),X=0;X<n.config.showMonths;X++){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+X),z.appendChild(C(fe.getFullYear(),fe.getMonth()))}n.daysContainer.appendChild(z),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&re()}}function R(){if(!(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")){var z=function(_e){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&_e<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&_e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var X=0;X<12;X++)if(z(X)){var fe=hn("option","flatpickr-monthDropdown-month");fe.value=new Date(n.currentYear,X).getMonth().toString(),fe.textContent=hp(X,n.config.shorthandCurrentMonth,n.l10n),fe.tabIndex=-1,n.currentMonth===X&&(fe.selected=!0),n.monthsDropdownContainer.appendChild(fe)}}}function M(){var z=hn("div","flatpickr-month"),X=window.document.createDocumentFragment(),fe;n.config.showMonths>1||n.config.monthSelectorType==="static"?fe=hn("span","cur-month"):(n.monthsDropdownContainer=hn("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),x(n.monthsDropdownContainer,"change",function(nt){var at=ys(nt),jt=parseInt(at.value,10);n.changeMonth(jt-n.currentMonth),ke("onMonthChange")}),R(),fe=n.monthsDropdownContainer);var _e=Hu("cur-year",{tabindex:"-1"}),ze=_e.getElementsByTagName("input")[0];ze.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&ze.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(ze.setAttribute("max",n.config.maxDate.getFullYear().toString()),ze.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var Je=hn("div","flatpickr-current-month");return Je.appendChild(fe),Je.appendChild(_e),X.appendChild(Je),z.appendChild(X),{container:z,yearElement:ze,monthElement:fe}}function O(){qu(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var z=n.config.showMonths;z--;){var X=M();n.yearElements.push(X.yearElement),n.monthElements.push(X.monthElement),n.monthNav.appendChild(X.container)}n.monthNav.appendChild(n.nextMonthNav)}function q(){return n.monthNav=hn("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=hn("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=hn("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,O(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(z){n.__hidePrevMonthArrow!==z&&(Ui(n.prevMonthNav,"flatpickr-disabled",z),n.__hidePrevMonthArrow=z)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(z){n.__hideNextMonthArrow!==z&&(Ui(n.nextMonthNav,"flatpickr-disabled",z),n.__hideNextMonthArrow=z)}}),n.currentYearElement=n.yearElements[0],Tt(),n.monthNav}function U(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var z=cv(n.config);n.timeContainer=hn("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var X=hn("span","flatpickr-time-separator",":"),fe=Hu("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=fe.getElementsByTagName("input")[0];var _e=Hu("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=_e.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=ss(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?z.hours:u(z.hours)),n.minuteElement.value=ss(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():z.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(fe),n.timeContainer.appendChild(X),n.timeContainer.appendChild(_e),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var ze=Hu("flatpickr-second");n.secondElement=ze.getElementsByTagName("input")[0],n.secondElement.value=ss(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():z.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(hn("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(ze)}return n.config.time_24hr||(n.amPM=hn("span","flatpickr-am-pm",n.l10n.amPM[Ls((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function H(){n.weekdayContainer?qu(n.weekdayContainer):n.weekdayContainer=hn("div","flatpickr-weekdays");for(var z=n.config.showMonths;z--;){var X=hn("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(X)}return ae(),n.weekdayContainer}function ae(){if(n.weekdayContainer){var z=n.l10n.firstDayOfWeek,X=N0(n.l10n.weekdays.shorthand);z>0&&z<X.length&&(X=N0(X.splice(z,X.length),X.splice(0,z)));for(var fe=n.config.showMonths;fe--;)n.weekdayContainer.children[fe].innerHTML=`
      <span class='flatpickr-weekday'>
        `+X.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function V(){n.calendarContainer.classList.add("hasWeeks");var z=hn("div","flatpickr-weekwrapper");z.appendChild(hn("span","flatpickr-weekday",n.l10n.weekAbbreviation));var X=hn("div","flatpickr-weeks");return z.appendChild(X),{weekWrapper:z,weekNumbers:X}}function pe(z,X){X===void 0&&(X=!0);var fe=X?z:z-n.currentMonth;fe<0&&n._hidePrevMonthArrow===!0||fe>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=fe,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,ke("onYearChange"),R()),P(),ke("onMonthChange"),Tt())}function oe(z,X){if(z===void 0&&(z=!0),X===void 0&&(X=!0),n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,X===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){var fe=cv(n.config),_e=fe.hours,ze=fe.minutes,Je=fe.seconds;g(_e,ze,Je)}n.redraw(),z&&ke("onChange")}function ne(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),ke("onClose")}function se(){n.config!==void 0&&ke("onDestroy");for(var z=n._handlers.length;z--;)n._handlers[z].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var X=n.calendarContainer.parentNode;if(X.lastChild&&X.removeChild(X.lastChild),X.parentNode){for(;X.firstChild;)X.parentNode.insertBefore(X.firstChild,X);X.parentNode.removeChild(X)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(fe){try{delete n[fe]}catch{}})}function W(z){return n.calendarContainer.contains(z)}function ge(z){if(n.isOpen&&!n.config.inline){var X=ys(z),fe=W(X),_e=X===n.input||X===n.altInput||n.element.contains(X)||z.path&&z.path.indexOf&&(~z.path.indexOf(n.input)||~z.path.indexOf(n.altInput)),ze=!_e&&!fe&&!W(z.relatedTarget),Je=!n.config.ignoredFocusElements.some(function(nt){return nt.contains(X)});ze&&Je&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&d(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&n.clear(!1))}}function ee(z){if(!(!z||n.config.minDate&&z<n.config.minDate.getFullYear()||n.config.maxDate&&z>n.config.maxDate.getFullYear())){var X=z,fe=n.currentYear!==X;n.currentYear=X||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),fe&&(n.redraw(),ke("onYearChange"),R())}}function ie(z,X){var fe;X===void 0&&(X=!0);var _e=n.parseDate(z,void 0,X);if(n.config.minDate&&_e&&bs(_e,n.config.minDate,X!==void 0?X:!n.minDateHasTime)<0||n.config.maxDate&&_e&&bs(_e,n.config.maxDate,X!==void 0?X:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(_e===void 0)return!1;for(var ze=!!n.config.enable,Je=(fe=n.config.enable)!==null&&fe!==void 0?fe:n.config.disable,nt=0,at=void 0;nt<Je.length;nt++){if(at=Je[nt],typeof at=="function"&&at(_e))return ze;if(at instanceof Date&&_e!==void 0&&at.getTime()===_e.getTime())return ze;if(typeof at=="string"){var jt=n.parseDate(at,void 0,!0);return jt&&jt.getTime()===_e.getTime()?ze:!ze}else if(typeof at=="object"&&_e!==void 0&&at.from&&at.to&&_e.getTime()>=at.from.getTime()&&_e.getTime()<=at.to.getTime())return ze}return!ze}function ue(z){return n.daysContainer!==void 0?z.className.indexOf("hidden")===-1&&z.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(z):!1}function G(z){var X=z.target===n._input,fe=n._input.value.trimEnd()!==Ut();X&&fe&&!(z.relatedTarget&&W(z.relatedTarget))&&n.setDate(n._input.value,!0,z.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function le(z){var X=ys(z),fe=n.config.wrap?t.contains(X):X===n._input,_e=n.config.allowInput,ze=n.isOpen&&(!_e||!fe),Je=n.config.inline&&fe&&!_e;if(z.keyCode===13&&fe){if(_e)return n.setDate(n._input.value,!0,X===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),X.blur();n.open()}else if(W(X)||ze||Je){var nt=!!n.timeContainer&&n.timeContainer.contains(X);switch(z.keyCode){case 13:nt?(z.preventDefault(),d(),te()):Y(z);break;case 27:z.preventDefault(),te();break;case 8:case 46:fe&&!n.config.allowInput&&(z.preventDefault(),n.clear());break;case 37:case 39:if(!nt&&!fe){z.preventDefault();var at=r();if(n.daysContainer!==void 0&&(_e===!1||at&&ue(at))){var jt=z.keyCode===39?1:-1;z.ctrlKey?(z.stopPropagation(),pe(jt),L(E(1),0)):L(void 0,jt)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:z.preventDefault();var ot=z.keyCode===40?1:-1;n.daysContainer&&X.$i!==void 0||X===n.input||X===n.altInput?z.ctrlKey?(z.stopPropagation(),ee(n.currentYear-ot),L(E(1),0)):nt||L(void 0,ot*7):X===n.currentYearElement?ee(n.currentYear-ot):n.config.enableTime&&(!nt&&n.hourElement&&n.hourElement.focus(),d(z),n._debouncedChange());break;case 9:if(nt){var wt=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(function(he){return he}),Wt=wt.indexOf(X);if(Wt!==-1){var we=wt[Wt+(z.shiftKey?-1:1)];z.preventDefault(),(we||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(X)&&z.shiftKey&&(z.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&X===n.amPM)switch(z.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],p(),yt();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],p(),yt();break}(fe||W(X))&&ke("onKeyDown",z)}function re(z,X){if(X===void 0&&(X="flatpickr-day"),!(n.selectedDates.length!==1||z&&(!z.classList.contains(X)||z.classList.contains("flatpickr-disabled")))){for(var fe=z?z.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),_e=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),ze=Math.min(fe,n.selectedDates[0].getTime()),Je=Math.max(fe,n.selectedDates[0].getTime()),nt=!1,at=0,jt=0,ot=ze;ot<Je;ot+=K6.DAY)ie(new Date(ot),!0)||(nt=nt||ot>ze&&ot<Je,ot<_e&&(!at||ot>at)?at=ot:ot>_e&&(!jt||ot<jt)&&(jt=ot));var wt=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+X));wt.forEach(function(Wt){var we=Wt.dateObj,he=we.getTime(),Re=at>0&&he<at||jt>0&&he>jt;if(Re){Wt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function($e){Wt.classList.remove($e)});return}else if(nt&&!Re)return;["startRange","inRange","endRange","notAllowed"].forEach(function($e){Wt.classList.remove($e)}),z!==void 0&&(z.classList.add(fe<=n.selectedDates[0].getTime()?"startRange":"endRange"),_e<fe&&he===_e?Wt.classList.add("startRange"):_e>fe&&he===_e&&Wt.classList.add("endRange"),he>=at&&(jt===0||he<=jt)&&U6(he,_e,fe)&&Wt.classList.add("inRange"))})}}function D(){n.isOpen&&!n.config.static&&!n.config.inline&&F()}function I(z,X){if(X===void 0&&(X=n._positionElement),n.isMobile===!0){if(z){z.preventDefault();var fe=ys(z);fe&&fe.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),ke("onOpen");return}else if(n._input.disabled||n.config.inline)return;var _e=n.isOpen;n.isOpen=!0,_e||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),ke("onOpen"),F(X)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(z===void 0||!n.timeContainer.contains(z.relatedTarget))&&setTimeout(function(){return n.hourElement.select()},50)}function ce(z){return function(X){var fe=n.config["_"+z+"Date"]=n.parseDate(X,n.config.dateFormat),_e=n.config["_"+(z==="min"?"max":"min")+"Date"];fe!==void 0&&(n[z==="min"?"minDateHasTime":"maxDateHasTime"]=fe.getHours()>0||fe.getMinutes()>0||fe.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(function(ze){return ie(ze)}),!n.selectedDates.length&&z==="min"&&h(fe),yt()),n.daysContainer&&(me(),fe!==void 0?n.currentYearElement[z]=fe.getFullYear().toString():n.currentYearElement.removeAttribute(z),n.currentYearElement.disabled=!!_e&&fe!==void 0&&_e.getFullYear()===fe.getFullYear())}}function Z(){var z=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],X=Ri(Ri({},JSON.parse(JSON.stringify(t.dataset||{}))),e),fe={};n.config.parseDate=X.parseDate,n.config.formatDate=X.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(wt){n.config._enable=kt(wt)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(wt){n.config._disable=kt(wt)}});var _e=X.mode==="time";if(!X.dateFormat&&(X.enableTime||_e)){var ze=ii.defaultConfig.dateFormat||fc.dateFormat;fe.dateFormat=X.noCalendar||_e?"H:i"+(X.enableSeconds?":S":""):ze+" H:i"+(X.enableSeconds?":S":"")}if(X.altInput&&(X.enableTime||_e)&&!X.altFormat){var Je=ii.defaultConfig.altFormat||fc.altFormat;fe.altFormat=X.noCalendar||_e?"h:i"+(X.enableSeconds?":S K":" K"):Je+(" h:i"+(X.enableSeconds?":S":"")+" K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:ce("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:ce("max")});var nt=function(wt){return function(Wt){n.config[wt==="min"?"_minTime":"_maxTime"]=n.parseDate(Wt,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:nt("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:nt("max")}),X.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,fe,X);for(var at=0;at<z.length;at++)n.config[z[at]]=n.config[z[at]]===!0||n.config[z[at]]==="true";av.filter(function(wt){return n.config[wt]!==void 0}).forEach(function(wt){n.config[wt]=rv(n.config[wt]||[]).map(o)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var at=0;at<n.config.plugins.length;at++){var jt=n.config.plugins[at](n)||{};for(var ot in jt)av.indexOf(ot)>-1?n.config[ot]=rv(jt[ot]).map(o).concat(n.config[ot]):typeof X[ot]>"u"&&(n.config[ot]=jt[ot])}X.altInputClass||(n.config.altInputClass=K().className+" "+n.config.altInputClass),ke("onParseConfig")}function K(){return n.config.wrap?t.querySelector("[data-input]"):t}function B(){typeof n.config.locale!="object"&&typeof ii.l10ns[n.config.locale]>"u"&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Ri(Ri({},ii.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?ii.l10ns[n.config.locale]:void 0),Vl.D="("+n.l10n.weekdays.shorthand.join("|")+")",Vl.l="("+n.l10n.weekdays.longhand.join("|")+")",Vl.M="("+n.l10n.months.shorthand.join("|")+")",Vl.F="("+n.l10n.months.longhand.join("|")+")",Vl.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var z=Ri(Ri({},e),JSON.parse(JSON.stringify(t.dataset||{})));z.time_24hr===void 0&&ii.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=O2(n),n.parseDate=Wx({config:n.config,l10n:n.l10n})}function F(z){if(typeof n.config.position=="function")return void n.config.position(n,z);if(n.calendarContainer!==void 0){ke("onPreCalendarPosition");var X=z||n._positionElement,fe=Array.prototype.reduce.call(n.calendarContainer.children,(function(en,sa){return en+sa.offsetHeight}),0),_e=n.calendarContainer.offsetWidth,ze=n.config.position.split(" "),Je=ze[0],nt=ze.length>1?ze[1]:null,at=X.getBoundingClientRect(),jt=window.innerHeight-at.bottom,ot=Je==="above"||Je!=="below"&&jt<fe&&at.top>fe,wt=window.pageYOffset+at.top+(ot?-fe-2:X.offsetHeight+2);if(Ui(n.calendarContainer,"arrowTop",!ot),Ui(n.calendarContainer,"arrowBottom",ot),!n.config.inline){var Wt=window.pageXOffset+at.left,we=!1,he=!1;nt==="center"?(Wt-=(_e-at.width)/2,we=!0):nt==="right"&&(Wt-=_e-at.width,he=!0),Ui(n.calendarContainer,"arrowLeft",!we&&!he),Ui(n.calendarContainer,"arrowCenter",we),Ui(n.calendarContainer,"arrowRight",he);var Re=window.document.body.offsetWidth-(window.pageXOffset+at.right),$e=Wt+_e>window.document.body.offsetWidth,Ve=Re+_e>window.document.body.offsetWidth;if(Ui(n.calendarContainer,"rightMost",$e),!n.config.static)if(n.calendarContainer.style.top=wt+"px",!$e)n.calendarContainer.style.left=Wt+"px",n.calendarContainer.style.right="auto";else if(!Ve)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=Re+"px";else{var Fe=J();if(Fe===void 0)return;var Xe=window.document.body.offsetWidth,xt=Math.max(0,Xe/2-_e/2),Gt=".flatpickr-calendar.centerMost:before",Ln=".flatpickr-calendar.centerMost:after",pi=Fe.cssRules.length,qi="{left:"+at.left+"px;right:auto;}";Ui(n.calendarContainer,"rightMost",!1),Ui(n.calendarContainer,"centerMost",!0),Fe.insertRule(Gt+","+Ln+qi,pi),n.calendarContainer.style.left=xt+"px",n.calendarContainer.style.right="auto"}}}}function J(){for(var z=null,X=0;X<document.styleSheets.length;X++){var fe=document.styleSheets[X];if(fe.cssRules){try{fe.cssRules}catch{continue}z=fe;break}}return z??Q()}function Q(){var z=document.createElement("style");return document.head.appendChild(z),z.sheet}function me(){n.config.noCalendar||n.isMobile||(R(),Tt(),P())}function te(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function Y(z){z.preventDefault(),z.stopPropagation();var X=function(wt){return wt.classList&&wt.classList.contains("flatpickr-day")&&!wt.classList.contains("flatpickr-disabled")&&!wt.classList.contains("notAllowed")},fe=I2(ys(z),X);if(fe!==void 0){var _e=fe,ze=n.latestSelectedDateObj=new Date(_e.dateObj.getTime()),Je=(ze.getMonth()<n.currentMonth||ze.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=_e,n.config.mode==="single")n.selectedDates=[ze];else if(n.config.mode==="multiple"){var nt=Qe(ze);nt?n.selectedDates.splice(parseInt(nt),1):n.selectedDates.push(ze)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=ze,n.selectedDates.push(ze),bs(ze,n.selectedDates[0],!0)!==0&&n.selectedDates.sort(function(wt,Wt){return wt.getTime()-Wt.getTime()}));if(p(),Je){var at=n.currentYear!==ze.getFullYear();n.currentYear=ze.getFullYear(),n.currentMonth=ze.getMonth(),at&&(ke("onYearChange"),R()),ke("onMonthChange")}if(Tt(),P(),yt(),!Je&&n.config.mode!=="range"&&n.config.showMonths===1?N(_e):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){var jt=n.config.mode==="single"&&!n.config.enableTime,ot=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(jt||ot)&&te()}y()}}var Ce={locale:[B,ae],showMonths:[O,c,H],minDate:[w],maxDate:[w],positionElement:[Ie],clickOpens:[function(){n.config.clickOpens===!0?(x(n._input,"focus",n.open),x(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function ye(z,X){if(z!==null&&typeof z=="object"){Object.assign(n.config,z);for(var fe in z)Ce[fe]!==void 0&&Ce[fe].forEach(function(_e){return _e()})}else n.config[z]=X,Ce[z]!==void 0?Ce[z].forEach(function(_e){return _e()}):av.indexOf(z)>-1&&(n.config[z]=rv(X));n.redraw(),yt(!0)}function Te(z,X){var fe=[];if(z instanceof Array)fe=z.map(function(_e){return n.parseDate(_e,X)});else if(z instanceof Date||typeof z=="number")fe=[n.parseDate(z,X)];else if(typeof z=="string")switch(n.config.mode){case"single":case"time":fe=[n.parseDate(z,X)];break;case"multiple":fe=z.split(n.config.conjunction).map(function(_e){return n.parseDate(_e,X)});break;case"range":fe=z.split(n.l10n.rangeSeparator).map(function(_e){return n.parseDate(_e,X)});break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(z)));n.selectedDates=n.config.allowInvalidPreload?fe:fe.filter(function(_e){return _e instanceof Date&&ie(_e,!1)}),n.config.mode==="range"&&n.selectedDates.sort(function(_e,ze){return _e.getTime()-ze.getTime()})}function et(z,X,fe){if(X===void 0&&(X=!1),fe===void 0&&(fe=n.config.dateFormat),z!==0&&!z||z instanceof Array&&z.length===0)return n.clear(X);Te(z,fe),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),w(void 0,X),h(),n.selectedDates.length===0&&n.clear(!1),yt(X),X&&ke("onChange")}function kt(z){return z.slice().map(function(X){return typeof X=="string"||typeof X=="number"||X instanceof Date?n.parseDate(X,void 0,!0):X&&typeof X=="object"&&X.from&&X.to?{from:n.parseDate(X.from,void 0),to:n.parseDate(X.to,void 0)}:X}).filter(function(X){return X})}function At(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var z=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);z&&Te(z,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function qt(){if(n.input=K(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=hn(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),Ie()}function Ie(){n._positionElement=n.config.positionElement||n._input}function De(){var z=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=hn("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=z,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=z==="datetime-local"?"Y-m-d\\TH:i:S":z==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}x(n.mobileInput,"change",function(X){n.setDate(ys(X).value,!1,n.mobileFormatStr),ke("onChange"),ke("onClose")})}function xe(z){if(n.isOpen===!0)return n.close();n.open(z)}function ke(z,X){if(n.config!==void 0){var fe=n.config[z];if(fe!==void 0&&fe.length>0)for(var _e=0;fe[_e]&&_e<fe.length;_e++)fe[_e](n.selectedDates,n.input.value,n,X);z==="onChange"&&(n.input.dispatchEvent(Oe("change")),n.input.dispatchEvent(Oe("input")))}}function Oe(z){var X=document.createEvent("Event");return X.initEvent(z,!0,!0),X}function Qe(z){for(var X=0;X<n.selectedDates.length;X++){var fe=n.selectedDates[X];if(fe instanceof Date&&bs(fe,z)===0)return""+X}return!1}function ct(z){return n.config.mode!=="range"||n.selectedDates.length<2?!1:bs(z,n.selectedDates[0])>=0&&bs(z,n.selectedDates[1])<=0}function Tt(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(function(z,X){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+X),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[X].textContent=hp(fe.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=fe.getMonth().toString(),z.value=fe.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function Ut(z){var X=z||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map(function(fe){return n.formatDate(fe,X)}).filter(function(fe,_e,ze){return n.config.mode!=="range"||n.config.enableTime||ze.indexOf(fe)===_e}).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function yt(z){z===void 0&&(z=!0),n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=Ut(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=Ut(n.config.altFormat)),z!==!1&&ke("onValueUpdate")}function Ae(z){var X=ys(z),fe=n.prevMonthNav.contains(X),_e=n.nextMonthNav.contains(X);fe||_e?pe(fe?-1:1):n.yearElements.indexOf(X)>=0?X.select():X.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):X.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Be(z){z.preventDefault();var X=z.type==="keydown",fe=ys(z),_e=fe;n.amPM!==void 0&&fe===n.amPM&&(n.amPM.textContent=n.l10n.amPM[Ls(n.amPM.textContent===n.l10n.amPM[0])]);var ze=parseFloat(_e.getAttribute("min")),Je=parseFloat(_e.getAttribute("max")),nt=parseFloat(_e.getAttribute("step")),at=parseInt(_e.value,10),jt=z.delta||(X?z.which===38?1:-1:0),ot=at+nt*jt;if(typeof _e.value<"u"&&_e.value.length===2){var wt=_e===n.hourElement,Wt=_e===n.minuteElement;ot<ze?(ot=Je+ot+Ls(!wt)+(Ls(wt)&&Ls(!n.amPM)),Wt&&_(void 0,-1,n.hourElement)):ot>Je&&(ot=_e===n.hourElement?ot-Je-Ls(!n.amPM):ze,Wt&&_(void 0,1,n.hourElement)),n.amPM&&wt&&(nt===1?ot+at===23:Math.abs(ot-at)>nt)&&(n.amPM.textContent=n.l10n.amPM[Ls(n.amPM.textContent===n.l10n.amPM[0])]),_e.value=ss(ot)}}return a(),n}function vc(t,e){for(var n=Array.prototype.slice.call(t).filter(function(o){return o instanceof HTMLElement}),s=[],a=0;a<n.length;a++){var r=n[a];try{if(r.getAttribute("data-fp-omit")!==null)continue;r._flatpickr!==void 0&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=Y6(r,e||{}),s.push(r._flatpickr)}catch(o){console.error(o)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return vc(this,t)},HTMLElement.prototype.flatpickr=function(t){return vc([this],t)});var ii=function(t,e){return typeof t=="string"?vc(window.document.querySelectorAll(t),e):t instanceof Node?vc([t],e):vc(t,e)};ii.defaultConfig={};ii.l10ns={en:Ri({},ym),default:Ri({},ym)};ii.localize=function(t){ii.l10ns.default=Ri(Ri({},ii.l10ns.default),t)};ii.setDefaults=function(t){ii.defaultConfig=Ri(Ri({},ii.defaultConfig),t)};ii.parseDate=Wx({});ii.formatDate=O2({});ii.compareDates=bs;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return vc(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=ii);const Q6=["onCreate","onDestroy"],Kx=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],Z6=(t,e)=>(Kx.forEach(n=>{const s=e[n],a=t[n];if(s){a&&!Array.isArray(a)?t[n]=[t[n]]:t[n]||(t[n]=[]);const r=Array.isArray(s)?s:[s];t[n].length===0?t[n]=r:t[n].push(...r)}}),Kx.forEach(n=>{delete e[n]}),Q6.forEach(n=>{delete e[n]}),t),Wn=t=>{const e=f.useMemo(()=>({...t}),[t]),{defaultValue:n,options:s={},value:a,children:r,render:o,onCreate:c,onDestroy:d}=e,m=f.useMemo(()=>Z6(s,e),[s,e]),u=f.useRef(null),p=f.useRef(void 0);f.useImperativeHandle(t.ref,()=>({get flatpickr(){return p.current}}),[]),f.useEffect(()=>{const v=()=>{var y;m.onClose=m.onClose||(()=>{var b;(b=u.current)!=null&&b.blur&&u.current.blur()}),p.current=(((y=ii)==null?void 0:y.default)||ii)(u.current,m),c?.(p.current)},x=()=>{d?.(p.current),p.current&&p.current.destroy(),p.current=void 0};return v(),()=>{x()}},[m,c,d]),f.useEffect(()=>{var v;if(p.current){const x=Object.getOwnPropertyNames(m);for(let y=x.length-1;y>=0;y--){const b=x[y];let w=m[b];w?.toString()!==((v=p.current.config[b])==null?void 0:v.toString())&&(Kx.includes(b)&&!Array.isArray(w)&&(w=[w]),p.current.set(b,w))}a!==void 0&&a!==p.current.input.value&&p.current.setDate(a,!1)}},[m,a]);const h=f.useCallback(v=>{u.current=v},[]);if(o)return o({...e,defaultValue:n,value:a},h);const g=f.useCallback(v=>{var x,y;t&&t.onChange&&(Array.isArray(t?.onChange)?(x=t?.onChange)==null||x.forEach(()=>[new Date(v.target.value)],a?.toString()||""):typeof t.onChange=="function"&&((y=t?.onChange)==null||y.call(t,[new Date(v.target.value)],a?.toString()||"",p.current)))},[t,a]);return s.wrap?i.jsx("div",{className:"flatpickr",ref:h,children:r}):i.jsx("input",{onChange:g,...e,value:a?.toString(),defaultValue:n,ref:h})},Si=()=>{const t=Bm(),e=f.useMemo(()=>{const s=t.map(c=>{const{handle:d,params:m,data:u}=c,p=d?.meta||{};let h=p.breadcrumb||d?.breadcrumb||d?.title||p.title,g="";if(typeof h=="function")try{g=h(m,u,c)}catch(v){console.warn("[Breadcrumb] Resolver failed:",v),g=""}else g=h;return{key:c.id,path:c.pathname,label:g,isHome:c.pathname==="/"||c.pathname==="/dashboard"}}).filter(c=>c.label),a=[],r=new Set;return s.forEach(c=>{r.has(c.path)||(r.add(c.path),a.push(c))}),a.length>0&&a[0].path==="/"||a.unshift({key:"root-home",path:"/",label:l("Home","kivicare-clinic-management-system"),isHome:!0}),a.map(c=>({...c,label:l(c.label,"kivicare-clinic-management-system")}))},[t]);return e.length<=1?null:i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:e.map((n,s)=>{const a=s===e.length-1;return i.jsx("li",{className:`breadcrumb-item ${a?"active":""}`,...a?{"aria-current":"page"}:{},children:a?i.jsx("span",{className:"breadcrumb-text",children:n.label}):i.jsx(ht,{to:n.path,className:"breadcrumb-link",children:n.label})},n.key)})})})},So={getUpcomingAppointment:(t=null)=>{let e="dashboard/upcoming-appointments";if(t&&t.start_date&&t.end_date){const n=new URLSearchParams;n.append("start_date",t.start_date),n.append("end_date",t.end_date),e=`${e}?${n.toString()}`}return ve({endpoint:e,method:"GET"})},getStatsCount:(t,e=null)=>{let n=`dashboard/statistics/${t}`;if(e&&e.start_date&&e.end_date){const s=new URLSearchParams;s.append("start_date",e.start_date),s.append("end_date",e.end_date),n=`${n}?${s.toString()}`}return ve({endpoint:n,method:"GET"})},getTopDoctors:(t={})=>{const{limit:e=5,start_date:n,end_date:s}=t,a=new URLSearchParams;e&&a.append("limit",e),n&&a.append("start_date",n),s&&a.append("end_date",s);const r=a.toString(),o=`dashboard/top-doctors${r?"?"+r:""}`;return ve({endpoint:o,method:"GET"})},getRecentPayments:(t={})=>{const{limit:e=3,clinic_id:n,start_date:s,end_date:a}=t,r=new URLSearchParams;e&&r.append("limit",e),n&&r.append("clinic_id",n),s&&r.append("start_date",s),a&&r.append("end_date",a);const o=r.toString(),c=`dashboard/recent-payments${o?"?"+o:""}`;return ve({endpoint:c,method:"GET"})},getCalendarAppointments:(t={})=>{const e=new URLSearchParams;t.start_date&&e.append("date_from",t.start_date),t.end_date&&e.append("date_to",t.end_date),t.doctor&&e.append("doctor",t.doctor),t.patient&&e.append("patient",t.patient),t.clinic&&e.append("clinic",t.clinic),t.status&&e.append("status",t.status),t.search&&e.append("search",t.search),e.append("perPage","all");const n=e.toString(),s=`appointments${n?"?"+n:""}`;return ve({endpoint:s,method:"GET"})}},$s={all:["dashboard"],settings:(t={})=>[...$s.all,"settings",t?.start_date,t?.end_date],stats:(t,e={})=>[...$s.all,"stats",t,e?.start_date,e?.end_date],topDoctors:(t={},e={})=>[...$s.all,"topDoctors",JSON.stringify(t),e?.start_date,e?.end_date],recentPayments:(t={})=>[...$s.all,"recentPayments",JSON.stringify(t),t?.start_date,t?.end_date],calendarAppointments:t=>[...$s.all,"calendarAppointments",JSON.stringify(t)],bookingStatus:(t={})=>[...$s.all,"bookingStatus",t?.start_date,t?.end_date]},X6=(t={})=>{const{params:e,...n}=t;return gt({queryKey:t.queryKey||$s.settings(e),queryFn:()=>So.getUpcomingAppointment(e),staleTime:300*1e3,cacheTime:1800*1e3,...n})},J6=(t,e={})=>{const{params:n,...s}=e;return gt({queryKey:e.queryKey||$s.stats(t,n),queryFn:()=>So.getStatsCount(t,n),enabled:!!t,staleTime:300*1e3,cacheTime:1800*1e3,...s})},C0=async(t,e,n=null)=>{let s=null,a=null;typeof e=="function"?(s=e,a=n):e&&typeof e=="object"&&(a=e,s=n);try{const r=await So.getStatsCount(t,a);return s&&typeof s=="function"&&s(r),r}catch(r){throw console.error(`Error fetching stats for ${t}:`,r),s&&typeof s=="function"&&s(null,r),r}},e$=(t={},e={})=>{const{start_date:n,end_date:s,...a}=t,r=n&&s?{start_date:n,end_date:s}:{};return gt({queryKey:$s.topDoctors(a,r),queryFn:()=>So.getTopDoctors({...a,...r}),staleTime:300*1e3,cacheTime:1800*1e3,...e})},t$=(t={},e={})=>gt({queryKey:$s.recentPayments(t),queryFn:()=>So.getRecentPayments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),n$=(t={},e={})=>gt({queryKey:$s.calendarAppointments(t),queryFn:()=>So.getCalendarAppointments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),i$=(t={},e={})=>gt({queryKey:$s.bookingStatus(t),queryFn:()=>So.getStatsCount("booking-status",t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),s$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:30,viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M0.549316 24.1039C0.549574 24.814 0.836051 25.4949 1.34578 25.997C1.85551 26.4991 2.54678 26.7813 3.26764 26.7815H9.24796V21.9297C8.05264 21.7971 6.94867 21.2358 6.14653 20.3528C5.3444 19.4698 4.90021 18.327 4.89865 17.1421V14.4645C4.89991 14.0388 5.07215 13.6309 5.37775 13.3298C5.68335 13.0288 6.09746 12.8592 6.52964 12.8579H7.0733C7.1447 12.8579 7.2154 12.8718 7.28136 12.8987C7.34732 12.9256 7.40725 12.965 7.45773 13.0148C7.50822 13.0645 7.54826 13.1235 7.57558 13.1885C7.60291 13.2535 7.61697 13.3231 7.61697 13.3934C7.61697 13.4638 7.60291 13.5334 7.57558 13.5984C7.54826 13.6634 7.50822 13.7224 7.45773 13.7721C7.40725 13.8218 7.34732 13.8613 7.28136 13.8882C7.2154 13.9151 7.1447 13.929 7.0733 13.929H6.52964C6.38558 13.9294 6.24755 13.9859 6.14568 14.0863C6.04381 14.1866 5.9864 14.3226 5.98598 14.4645V17.1421C6.17796 22.1095 13.4071 22.1061 13.5973 17.1421V14.4645C13.5969 14.3226 13.5395 14.1866 13.4376 14.0863C13.3357 13.9859 13.1977 13.9294 13.0536 13.929H12.51C12.3672 13.9268 12.2311 13.8694 12.1309 13.7692C12.0308 13.669 11.9747 13.5341 11.9747 13.3934C11.9747 13.2528 12.0308 13.1179 12.1309 13.0177C12.2311 12.9175 12.3672 12.8601 12.51 12.8579H13.0536C13.4858 12.8592 13.8999 13.0288 14.2055 13.3298C14.5111 13.6309 14.6833 14.0388 14.6846 14.4645V17.1421C14.683 18.327 14.2388 19.4698 13.4367 20.3528C12.6346 21.2358 11.5306 21.7971 10.3353 21.9297C10.3332 22.1578 10.3368 26.7538 10.3353 26.7815C10.4885 27.6708 10.9531 28.479 11.6483 29.066C12.3435 29.6529 13.2255 29.9815 14.141 29.9946L16.3156 29.9946C17.2301 29.9941 18.1138 29.669 18.8048 29.0789C19.4957 28.4888 19.9476 27.6732 20.0777 26.7815H28.2762C28.9971 26.7813 29.6884 26.4991 30.1981 25.997C30.7078 25.4949 30.9943 24.814 30.9946 24.1039V9.10925H0.549316V24.1039ZM17.9466 19.2842C17.9468 18.5741 18.2333 17.8932 18.7431 17.3911C19.2528 16.889 19.9441 16.6068 20.6649 16.6066H21.2629C21.3883 16.0018 21.7219 15.4582 22.2074 15.0679C22.6928 14.6776 23.3003 14.4644 23.9269 14.4645C27.5184 14.5754 27.5207 19.7087 23.9269 19.8197C23.3002 19.8198 22.6928 19.6066 22.2074 19.2163C21.7219 18.8259 21.3883 18.2824 21.2629 17.6776H20.6649C20.2328 17.6789 19.8186 17.8485 19.513 18.1496C19.2074 18.4506 19.0352 18.8585 19.0339 19.2842V26.246C19.0323 26.9557 18.7454 27.6358 18.236 28.1376C17.7266 28.6394 17.0361 28.922 16.3156 28.9236H14.141C13.5143 28.9237 12.9069 28.7105 12.4214 28.3202C11.936 27.9298 11.6024 27.3863 11.477 26.7815H17.9466L17.9466 19.2842Z",fill:"currentColor"}),f.createElement("path",{d:"M23.9269 18.7487C24.3563 18.7438 24.7664 18.5724 25.0682 18.2717C25.3701 17.9709 25.5394 17.565 25.5394 17.1421C25.5394 16.7191 25.3701 16.3132 25.0682 16.0125C24.7663 15.7117 24.3562 15.5403 23.9269 15.5355C23.4975 15.5404 23.0874 15.7117 22.7856 16.0125C22.4837 16.3133 22.3144 16.7192 22.3144 17.1421C22.3144 17.5651 22.4837 17.9709 22.7856 18.2717C22.0875 18.5725 23.4976 18.7438 23.9269 18.7487ZM23.9269 16.6066C24.0697 16.6087 24.2059 16.666 24.3062 16.7662C24.4064 16.8664 24.4626 17.0014 24.4626 17.1421C24.4626 17.2828 24.4064 17.4178 24.3061 17.518C24.2059 17.6182 24.0697 17.6755 23.9269 17.6776C23.7841 17.6755 23.6479 17.6182 23.5476 17.518C23.4474 17.4178 23.3912 17.2827 23.3912 17.1421C23.3913 17.0014 23.4474 16.8664 23.5477 16.7662C23.6479 16.666 23.7841 16.6086 23.9269 16.6066Z",fill:"currentColor"}),f.createElement("path",{d:"M28.2762 2.68297H26.6452V1.61195C26.6403 1.18907 26.4662 0.785175 26.1609 0.48787C25.8556 0.190565 25.4436 0.0238284 25.0142 0.0238284C24.5849 0.0238284 24.1729 0.190565 23.8675 0.48787C23.5622 0.785175 23.3882 1.18907 23.3832 1.61195V5.36056C23.3813 5.50131 23.3231 5.63564 23.2214 5.73448C23.1196 5.83333 22.9825 5.88875 22.8396 5.88875C22.6967 5.88875 22.5595 5.83333 22.4578 5.73448C22.356 5.63564 22.2979 5.50131 22.2959 5.36056V2.68297H8.16061V1.61195C8.15652 1.1885 7.98288 0.783761 7.67745 0.485753C7.37202 0.187744 6.9595 0.0205639 6.52959 0.0205688C6.09969 0.0205738 5.68717 0.187763 5.38174 0.485779C5.07632 0.783795 4.90269 1.18854 4.89862 1.61198V5.36061C4.89632 5.50114 4.83803 5.63515 4.73632 5.73373C4.63461 5.83231 4.49764 5.88756 4.35495 5.88756C4.21227 5.88756 4.0753 5.83231 3.97359 5.73373C3.87188 5.63515 3.81359 5.50114 3.81129 5.36061V2.68302H3.26763C2.6666 2.68031 2.08185 2.87536 1.60615 3.23722C1.13045 3.59908 0.791025 4.10703 0.641715 4.68051C0.452452 5.13787 0.589135 7.52339 0.549259 8.03826H30.9946V5.36058C30.9943 4.65051 30.7078 3.96959 30.1981 3.46749C29.6884 2.9654 28.9971 2.68321 28.2762 2.68297ZM7.0733 2.68297H5.98595V1.61195C5.98595 1.46992 6.04323 1.3337 6.14519 1.23327C6.24714 1.13284 6.38543 1.07642 6.52962 1.07642C6.6738 1.07642 6.81209 1.13284 6.91404 1.23327C7.016 1.3337 7.07328 1.46992 7.07328 1.61195L7.0733 2.68297ZM25.5579 2.68297H24.4706V1.61195C24.4706 1.46992 24.5278 1.3337 24.6298 1.23327C24.7318 1.13284 24.87 1.07642 25.0142 1.07642C25.1584 1.07642 25.2967 1.13284 25.3987 1.23327C25.5006 1.3337 25.5579 1.46992 25.5579 1.61195L25.5579 2.68297Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:31,height:30,fill:"white"})))),a$=f.forwardRef(s$),r$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:38,height:30,viewBox:"0 0 38 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M12.9992 14.9391C16.7634 14.9391 19.8148 11.8876 19.8148 8.12343C19.8148 4.35926 16.7634 1.3078 12.9992 1.3078C9.23505 1.3078 6.18359 4.35926 6.18359 8.12343C6.18359 11.8876 9.23505 14.9391 12.9992 14.9391Z",fill:"currentColor"}),f.createElement("path",{d:"M36.3828 0.859375H28.8281C27.9609 0.859375 27.2656 1.5625 27.2656 2.42187V11.2266C27.2656 13.0547 28.2656 14.7422 29.8672 15.6172L31.8273 16.6812V23.2305C31.8273 25.6281 29.8766 27.5781 27.4797 27.5781H25.9469C25.9414 27.5781 25.9359 27.5812 25.9305 27.5812C25.8508 24.1313 24.4336 21.0031 22.1562 18.7266C20.7031 17.2812 18.9062 16.1719 16.8984 15.5391C15.7344 16.1562 14.4062 16.5 13 16.5C11.5938 16.5 10.2656 16.1562 9.10156 15.5391C3.85938 17.1875 0.0546875 22.0938 0.0546875 27.8828V29.1406H25.9453H25.9469H27.4797C30.7391 29.1406 33.3898 26.4891 33.3898 23.2305V16.6742L35.3359 15.618C36.9453 14.743 37.9453 13.0555 37.9453 11.2273V2.42187C37.9453 1.5625 37.2422 0.859375 36.3828 0.859375ZM35.2656 8.96094H33.3828V10.8438C33.3828 11.2812 33.0391 11.625 32.6016 11.625C32.1719 11.625 31.8203 11.2812 31.8203 10.8438V8.96094H29.9375C29.5078 8.96094 29.1562 8.61719 29.1562 8.17969C29.1562 7.75 29.5078 7.39844 29.9375 7.39844H31.8203V5.51563C31.8203 5.08594 32.1719 4.73438 32.6016 4.73438C33.0391 4.73438 33.3828 5.08594 33.3828 5.51563V7.39844H35.2656C35.7031 7.39844 36.0469 7.75 36.0469 8.17969C36.0469 8.61719 35.7031 8.96094 35.2656 8.96094Z",fill:"currentColor"})),l$=f.forwardRef(r$),o$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:25,height:31,viewBox:"0 0 25 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M18.8486 11V14C18.8486 14.1326 18.796 14.2598 18.7022 14.3536C18.6084 14.4473 18.4812 14.5 18.3486 14.5H14.8486V18C14.8486 18.1326 14.796 18.2598 14.7022 18.3536C14.6084 18.4473 14.4812 18.5 14.3486 18.5H11.3486C11.216 18.5 11.0888 18.4473 10.9951 18.3536C10.9013 18.2598 10.8486 18.1326 10.8486 18V14.5H7.34863C7.21602 14.5 7.08885 14.4473 6.99508 14.3536C6.90131 14.2598 6.84863 14.1326 6.84863 14V11C6.84863 10.8674 6.90131 10.7402 6.99508 10.6464C7.08885 10.5527 7.21602 10.5 7.34863 10.5H10.8486V7C10.8486 6.86739 10.9013 6.74021 10.9951 6.64645C11.0888 6.55268 11.216 6.5 11.3486 6.5H14.3486C14.4812 6.5 14.6084 6.55268 14.7022 6.64645C14.796 6.74021 14.8486 6.86739 14.8486 7V10.5H18.3486C18.4812 10.5 18.6084 10.5527 18.7022 10.6464C18.796 10.7402 18.8486 10.8674 18.8486 11ZM24.8486 12.5C24.8486 21.647 13.6238 30.0488 13.1458 30.4021C13.0597 30.4657 12.9556 30.5 12.8486 30.5C12.7417 30.5 12.6375 30.4657 12.5515 30.4021C12.0735 30.0488 0.848633 21.647 0.848633 12.5C0.848633 9.3174 2.11291 6.26515 4.36335 4.01472C6.61379 1.76428 9.66603 0.5 12.8486 0.5C16.0312 0.5 19.0835 1.76428 21.3339 4.01472C23.5844 6.26515 24.8486 9.3174 24.8486 12.5ZM21.8486 12.5C21.8486 10.72 21.3208 8.97991 20.3319 7.49987C19.3429 6.01983 17.9373 4.86627 16.2928 4.18508C14.6482 3.5039 12.8386 3.32567 11.0928 3.67293C9.34699 4.0202 7.74334 4.87737 6.48467 6.13604C5.226 7.39471 4.36883 8.99836 4.02157 10.7442C3.6743 12.49 3.85253 14.2996 4.53372 15.9442C5.21491 17.5887 6.36846 18.9943 7.8485 19.9832C9.32854 20.9722 11.0686 21.5 12.8486 21.5C15.2347 21.4973 17.5224 20.5482 19.2096 18.861C20.8968 17.1737 21.8459 14.8861 21.8486 12.5Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:24,height:30,fill:"white",transform:"translate(0.848633 0.5)"})))),c$=f.forwardRef(o$),d$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:27,height:31,viewBox:"0 0 27 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M21.9935 17.4026C22.2786 18.0609 22.4445 18.8663 22.4812 19.7977C23.4435 20.0182 24.1637 20.879 24.1637 21.9069C24.1637 23.1008 23.1924 24.0721 21.9985 24.0721C20.8046 24.0721 19.8333 23.1008 19.8333 21.9069C19.8333 20.8906 20.5378 20.0389 21.4832 19.806C21.4415 18.881 21.2204 17.4736 20.315 16.7787C19.8529 16.6591 19.3779 16.5725 18.8906 16.5279C18.8546 18.1485 13.4982 22.1478 13.4982 22.1478C13.4982 22.1478 8.14018 18.1491 8.10387 16.5286C7.56257 16.5779 7.03593 16.6768 6.52727 16.8194C5.86672 17.3423 5.52495 18.3167 5.50729 19.7331C5.7015 19.8447 5.85839 20.0189 5.95466 20.2297C6.66618 20.5658 7.29475 21.2727 7.7761 22.279C7.85671 22.4482 7.86737 22.6394 7.80807 22.814C8.09655 23.5565 8.26143 24.3679 8.26143 25.0495C8.26143 26.0045 8.26143 26.9076 7.22047 27.1394C7.10788 27.233 6.96664 27.2846 6.81841 27.2846H6.12288C5.77411 27.2846 5.49031 27.0002 5.49031 26.6524L5.49097 26.6277C5.5043 26.2913 5.78577 26.0198 6.12288 26.0198H6.81841C6.88969 26.0198 6.95931 26.0318 7.0266 26.0551C7.06857 26.0435 7.0819 26.0338 7.08223 26.0335C7.15951 25.8962 7.15951 25.3246 7.15951 25.0501C7.15951 24.4965 7.02094 23.828 6.7781 23.2067C6.65219 23.1351 6.55026 23.0268 6.48763 22.8959C6.06592 22.0129 5.4923 21.4426 5.02662 21.4426C4.55027 21.4426 3.94801 22.0595 3.52796 22.9762C3.45934 23.1258 3.33909 23.2474 3.19119 23.3203C2.97167 23.9146 2.85109 24.5265 2.85109 25.0498C2.85109 25.2803 2.85109 25.8919 2.93903 26.0358C2.94003 26.0358 2.95968 26.0478 3.01498 26.0615C3.08693 26.0338 3.16421 26.0195 3.24149 26.0195H3.93835C4.26313 26.0195 4.53462 26.2667 4.56726 26.5881L4.57059 26.6271C4.57059 27.0005 4.28678 27.285 3.93835 27.285H3.24149C3.10325 27.285 2.96967 27.2387 2.85975 27.1547C2.46168 27.0798 2.18121 26.9042 2.00366 26.6184C1.78847 26.273 1.74916 25.8193 1.74916 25.0498C1.74916 24.3749 1.90506 23.5975 2.1882 22.855C2.14656 22.6961 2.16055 22.5302 2.22984 22.3806C2.52464 21.7357 2.89972 21.1834 3.31411 20.784C3.54195 20.5645 3.78679 20.388 4.04295 20.259C4.13888 20.0345 4.30544 19.8503 4.50897 19.7341C4.51963 18.8463 4.6562 18.0798 4.9087 17.4479C2.01798 18.9143 0.0369873 21.9133 0.0369873 25.3766C0.0369873 29.8023 3.27047 30.0188 7.50328 30.0188C7.9653 30.0188 8.43831 30.0161 8.92165 30.0161H18.0711C18.5538 30.0161 19.0268 30.0188 19.4889 30.0188C23.7223 30.0188 26.9571 29.8023 26.9571 25.3766C26.9568 21.8766 24.9335 18.8513 21.9935 17.4026Z",fill:"currentColor"}),f.createElement("path",{d:"M13.4996 17.691C17.5915 17.691 20.9082 11.5382 20.9082 7.44661C20.9082 3.3557 17.5915 0.0389404 13.4996 0.0389404C9.40831 0.0389404 6.09155 3.3557 6.09155 7.44661C6.09155 11.5382 9.40831 17.691 13.4996 17.691Z",fill:"currentColor"}),f.createElement("path",{d:"M21.9981 22.9062C22.55 22.9062 22.9974 22.4588 22.9974 21.9069C22.9974 21.355 22.55 20.9076 21.9981 20.9076C21.4462 20.9076 20.9988 21.355 20.9988 21.9069C20.9988 22.4588 21.4462 22.9062 21.9981 22.9062Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:27,height:30.0578,fill:"white"})))),m$=f.forwardRef(d$),u$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:31,viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M15.1456 8.172C11.1049 8.172 7.8176 11.4593 7.8176 15.5C7.8176 19.5407 11.1049 22.8281 15.1456 22.8281C19.1863 22.8281 22.4737 19.5407 22.4737 15.5C22.4737 11.4593 19.1863 8.172 15.1456 8.172ZM14.1122 18.917L11.2788 16.0836L12.5217 14.8406L14.1123 16.4311L17.8389 12.7046L19.0818 13.9475L14.1122 18.917Z",fill:"currentColor"}),f.createElement("path",{d:"M30.1456 17.9258V13.0742L27.1493 12.2039C26.8752 11.2063 26.4774 10.249 25.9619 9.34689L27.4674 6.60869L24.0369 3.17814L21.2987 4.68371C20.3966 4.16826 19.4394 3.77047 18.4416 3.49631L17.5714 0.5H12.7198L11.8495 3.49631C10.8518 3.77041 9.89452 4.16826 8.99241 4.68371L6.25426 3.17814L2.82372 6.60869L4.32922 9.34689C3.81377 10.249 3.41592 11.2063 3.14182 12.2039L0.14563 13.0742V17.9258L3.14194 18.7961C3.41604 19.7937 3.81389 20.751 4.32934 21.6531L2.82383 24.3913L6.25438 27.8219L8.99252 26.3163C9.89463 26.8317 10.8519 27.2295 11.8496 27.5037L12.7199 30.5H17.5714L18.4418 27.5037C19.4394 27.2296 20.3967 26.8317 21.2989 26.3163L24.037 27.8219L27.4675 24.3913L25.962 21.6531C26.4775 20.751 26.8753 19.7937 27.1494 18.7961L30.1456 17.9258ZM15.1456 24.5858C10.1357 24.5858 6.05979 20.5099 6.05979 15.5C6.05979 10.4901 10.1357 6.41416 15.1456 6.41416C20.1556 6.41416 24.2315 10.4901 24.2315 15.5C24.2315 20.5099 20.1556 24.5858 15.1456 24.5858Z",fill:"currentColor"})),h$=f.forwardRef(u$),p$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:23,height:30,viewBox:"0 0 23 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M6.37115 5.625H16.5872L18.792 3.895C19.5427 3.3075 19.8231 2.35375 19.5057 1.46375C19.1884 0.57375 18.3638 0 17.4054 0H5.55295C4.59455 0 3.76998 0.575 3.45264 1.46375C3.1353 2.3525 3.41568 3.3075 4.16506 3.89375L6.37115 5.625Z",fill:"currentColor"}),f.createElement("path",{d:"M16.7618 7.5H6.19653C2.71598 10.8512 0.0090332 16.7312 0.0090332 21.5625C0.0090332 25.7612 2.27502 30 7.33717 30H15.9398C20.264 30 22.9493 26.7663 22.9493 21.5625C22.9493 16.7312 20.2423 10.8512 16.7618 7.5ZM10.9949 17.8125H11.9635C13.4533 17.8125 14.6653 19.0013 14.6653 20.4625C14.6653 21.7763 13.6993 22.8575 12.435 23.0775V24.0613C12.435 24.5788 12.0068 24.9988 11.4792 24.9988C10.9515 24.9988 10.5233 24.5788 10.5233 24.0613V23.125H9.24886C8.72123 23.125 8.29302 22.705 8.29302 22.1875C8.29302 21.67 8.72123 21.25 9.24886 21.25H11.9635C12.3993 21.25 12.7536 20.9025 12.7536 20.475C12.7536 20.035 12.3993 19.6875 11.9635 19.6875H10.9949C9.50503 19.6875 8.29302 18.4987 8.29302 17.0375C8.29302 15.7238 9.25906 14.6425 10.5233 14.4225V13.4375C10.5233 12.92 10.9515 12.5 11.4792 12.5C12.0068 12.5 12.435 12.92 12.435 13.4375V14.375H13.7095C14.2371 14.375 14.6653 14.795 14.6653 15.3125C14.6653 15.83 14.2371 16.25 13.7095 16.25H10.9949C10.559 16.25 10.2047 16.5975 10.2047 17.025C10.2047 17.465 10.559 17.8125 10.9949 17.8125Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:23,height:30,fill:"white"})))),g$=f.forwardRef(p$),f$=({component:t,title:e,iconKey:n,color:s="primary",useHook:a=!0,onDataLoaded:r=null,dateFilter:o=null,isFiltering:c=!1,isCurrency:d=!1,capability:m,linkTo:u=null,iconPosition:p="top",...h})=>{const{hasCapability:g}=mt();if(m&&!g(m))return null;const[v,x]=f.useState("--"),[y,b]=f.useState("--"),[w,k]=f.useState(!1),[_,j]=f.useState(null),T=We.useMemo(()=>{const H=["stats",t];return o?.start_date&&o?.end_date&&H.push(o.start_date,o.end_date),H},[t,o]),{data:N,isLoading:E,error:A,refetch:L}=J6(t,{enabled:a&&!!t,params:o,queryKey:T}),C=H=>{let ae=0,V=null;H?.json?.data?.count!==void 0?ae=H.json.data.count:H?.data?.count!==void 0?ae=H.data.count:H?.count!==void 0&&(ae=H.count),H?.json?.data?.formatted_count!==void 0?V=H.json.data.formatted_count:H?.data?.formatted_count!==void 0?V=H.data.formatted_count:H?.formatted_count!==void 0&&(V=H.formatted_count);const pe=V||(isNaN(ae)?ae:Number(ae).toLocaleString());let oe=pe;if(d&&!isNaN(ae)&&Number(ae)>1e3){const ne=Number(ae);let se;ne>=1e6?se=(ne/1e6).toFixed(2)+"M":se=(ne/1e3).toFixed(2)+"k",se=se.replace(".0",""),V?oe=V.replace(/[\d,.]+/,se):oe=se}return{displayCount:oe,fullDisplay:pe}};f.useEffect(()=>{if(N&&a)try{const{displayCount:H,fullDisplay:ae}=C(N);x(H),b(ae),r&&typeof r=="function"&&r(N,null,t)}catch(H){j(H)}},[N,t,a,r,d]),f.useEffect(()=>{A&&a&&(j(A),r&&typeof r=="function"&&r(null,A,t))},[A,t,a,r]),f.useEffect(()=>{!a&&t&&(k(!0),j(null),C0(t,(H,ae)=>{if(k(!1),ae)j(ae),x("--"),b("--");else{const{displayCount:V,fullDisplay:pe}=C(H);x(V),b(pe)}r&&typeof r=="function"&&r(H,ae,t)},o))},[t,a,r,o]);const P=a?E:w,R=a?A:_,M={appointment:a$,patient:l$,clinic:c$,doctor:m$,service:h$,revenue:g$},O=()=>{const H=M[n];return H?i.jsx(H,{className:"icon-svg",style:{width:"30px",height:"30px"},"aria-label":`${e} icon`}):i.jsx("div",{className:`text-center rounded-circle p-3 bg-${s}-subtle mb-3`,children:i.jsx("i",{className:`${n} fs-4 align-middle`})})},q=()=>i.jsx("div",{className:p==="right"?"text-start":"text-center",children:P?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"skeleton-element mb-2 mb-md-3 mx-auto",style:{width:"80px",height:"2rem"}}),i.jsx("div",{className:"skeleton-element mx-auto",style:{width:"140px",height:"1rem"}})]}):R?i.jsxs("div",{className:"text-danger mb-3",children:[l("Error","kivicare-clinic-management-system"),i.jsx("button",{className:"btn btn-link btn-sm text-decoration-none ms-2",onClick:()=>{a?L():t&&(k(!0),j(null),C0(t,(H,ae)=>{if(k(!1),ae)j(ae),x("--"),b("--");else{const{displayCount:V,fullDisplay:pe}=C(H);x(V),b(pe)}r&&r(H,ae,t)}))},children:l("Retry","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[d&&v!==y?i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{id:`tooltip-${t}`,children:y}),children:i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-2 mb-md-3 fw-bold",children:v})}):i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-0 fw-bold",children:v}),i.jsx("p",{className:"text-body line-clamp-1 fw-medium mb-0",children:e})]})}),U=i.jsx("div",{className:`card-body  ${p==="right"?"p-4":""}`,children:i.jsxs("div",{className:`d-flex ${p==="right"?"align-items-center justify-content-between gap-lg-3 gap-2":"align-items-center justify-content-center flex-column"}`,children:[p==="right"&&q(),i.jsx("div",{className:`card-icon ${p==="right"?"mb-0":""}`,children:O()}),p!=="right"&&q()]})});return i.jsx("div",{className:`card card-block card-stretch card-height overflow-hidden ${u?"cursor-pointer":""}`,children:u?i.jsx(ht,{to:u,className:"text-decoration-none text-reset",children:U}):U})},S0=({title:t,items:e=[],renderItem:n,viewAllLink:s="appointments",loading:a=!1,emptyMessage:r=l("No items to display","kivicare-clinic-management-system")})=>i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx("h6",{className:"card-title mb-0",children:t}),s==="appointments"&&i.jsx(ht,{to:"/appointments",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")}),s==="doctors"&&i.jsx(ht,{to:"/doctor",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"card-body pt-0",children:i.jsx("div",{className:"upcoming-appointments","data-scrollbar":"true",children:i.jsx("div",{className:"scroll-content",children:a?i.jsx("ul",{className:"list-inline p-0 m-0",children:Array.from({length:3}).map((o,c)=>i.jsx("li",{className:"items-list",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"2.5rem",height:"2.5rem"}}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"skeleton-element mb-2",style:{width:"140px",height:"1rem"}}),i.jsx("div",{className:"skeleton-element",style:{width:"100px",height:"0.875rem"}})]})]})})},`skeleton-${c}`))}):e.length>0?i.jsx("ul",{id:"upcoming-appointments",className:"list-inline p-0 m-0",children:e.map((o,c)=>i.jsx("li",{className:"items-list",children:n(o)},c))}):i.jsx("div",{className:"d-flex align-items-center justify-content-center p-3",style:{minHeight:"19rem"},children:i.jsx("p",{className:"text-muted mb-0",children:r})})})})})]});function Ym(t){return t+.5|0}const Xr=(t,e,n)=>Math.max(Math.min(t,n),e);function Bd(t){return Xr(Ym(t*2.55),0,255)}function ml(t){return Xr(Ym(t*255),0,255)}function pr(t){return Xr(Ym(t/2.55)/100,0,1)}function _0(t){return Xr(Ym(t*100),0,100)}const Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Gx=[..."0123456789ABCDEF"],v$=t=>Gx[t&15],x$=t=>Gx[(t&240)>>4]+Gx[t&15],zu=t=>(t&240)>>4===(t&15),y$=t=>zu(t.r)&&zu(t.g)&&zu(t.b)&&zu(t.a);function b$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Os[t[1]]*17,g:255&Os[t[2]]*17,b:255&Os[t[3]]*17,a:e===5?Os[t[4]]*17:255}:(e===7||e===9)&&(n={r:Os[t[1]]<<4|Os[t[2]],g:Os[t[3]]<<4|Os[t[4]],b:Os[t[5]]<<4|Os[t[6]],a:e===9?Os[t[7]]<<4|Os[t[8]]:255})),n}const w$=(t,e)=>t<255?e(t):"";function k$(t){var e=y$(t)?v$:x$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+w$(t.a,e):void 0}const j$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function L2(t,e,n){const s=e*Math.min(n,1-n),a=(r,o=(r+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function N$(t,e,n){const s=(a,r=(a+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function C$(t,e,n){const s=L2(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function S$(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function Zb(t){const n=t.r/255,s=t.g/255,a=t.b/255,r=Math.max(n,s,a),o=Math.min(n,s,a),c=(r+o)/2;let d,m,u;return r!==o&&(u=r-o,m=c>.5?u/(2-r-o):u/(r+o),d=S$(n,s,a,u,r),d=d*60+.5),[d|0,m||0,c]}function Xb(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(ml)}function Jb(t,e,n){return Xb(L2,t,e,n)}function _$(t,e,n){return Xb(C$,t,e,n)}function E$(t,e,n){return Xb(N$,t,e,n)}function F2(t){return(t%360+360)%360}function T$(t){const e=j$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Bd(+e[5]):ml(+e[5]));const a=F2(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=_$(a,r,o):e[1]==="hsv"?s=E$(a,r,o):s=Jb(a,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function A$(t,e){var n=Zb(t);n[0]=F2(n[0]+e),n=Jb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function D$(t){if(!t)return;const e=Zb(t),n=e[0],s=_0(e[1]),a=_0(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${pr(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const E0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function R$(){const t={},e=Object.keys(T0),n=Object.keys(E0);let s,a,r,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],a=0;a<n.length;a++)r=n[a],c=c.replace(r,E0[r]);r=parseInt(T0[o],16),t[c]=[r>>16&255,r>>8&255,r&255]}return t}let Vu;function P$(t){Vu||(Vu=R$(),Vu.transparent=[0,0,0,0]);const e=Vu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const M$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I$(t){const e=M$.exec(t);let n=255,s,a,r;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Bd(o):Xr(o*255,0,255)}return s=+e[1],a=+e[3],r=+e[5],s=255&(e[2]?Bd(s):Xr(s,0,255)),a=255&(e[4]?Bd(a):Xr(a,0,255)),r=255&(e[6]?Bd(r):Xr(r,0,255)),{r:s,g:a,b:r,a:n}}}function O$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const dv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Qo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function L$(t,e,n){const s=Qo(pr(t.r)),a=Qo(pr(t.g)),r=Qo(pr(t.b));return{r:ml(dv(s+n*(Qo(pr(e.r))-s))),g:ml(dv(a+n*(Qo(pr(e.g))-a))),b:ml(dv(r+n*(Qo(pr(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Uu(t,e,n){if(t){let s=Zb(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Jb(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function $2(t,e){return t&&Object.assign(e||{},t)}function A0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ml(t[3]))):(e=$2(t,{r:0,g:0,b:0,a:1}),e.a=ml(e.a)),e}function F$(t){return t.charAt(0)==="r"?I$(t):T$(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let s;n==="object"?s=A0(e):n==="string"&&(s=b$(e)||P$(e)||F$(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=$2(this._rgb);return e&&(e.a=pr(e.a)),e}set rgb(e){this._rgb=A0(e)}rgbString(){return this._valid?O$(this._rgb):void 0}hexString(){return this._valid?k$(this._rgb):void 0}hslString(){return this._valid?D$(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let r;const o=n===r?.5:n,c=2*o-1,d=s.a-a.a,m=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;r=1-m,s.r=255&m*s.r+r*a.r+.5,s.g=255&m*s.g+r*a.g+.5,s.b=255&m*s.b+r*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=L$(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=ml(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ym(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uu(this._rgb,2,e),this}darken(e){return Uu(this._rgb,2,-e),this}saturate(e){return Uu(this._rgb,1,e),this}desaturate(e){return Uu(this._rgb,1,-e),this}rotate(e){return A$(this._rgb,e),this}}function cr(){}const $$=(()=>{let t=0;return()=>t++})();function _n(t){return t==null}function ui(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function rn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ea(t,e){return Xs(t)?t:e}function an(t,e){return typeof t>"u"?e:t}const B$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,B2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function $n(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function kn(t,e,n,s){let a,r,o;if(ui(t))for(r=t.length,a=0;a<r;a++)e.call(n,t[a],a);else if(rn(t))for(o=Object.keys(t),r=o.length,a=0;a<r;a++)e.call(n,t[o[a]],o[a])}function pp(t,e){let n,s,a,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],r=e[n],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function gp(t){if(ui(t))return t.map(gp);if(rn(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=gp(t[n[a]]);return e}return t}function q2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function q$(t,e,n,s){if(!q2(t))return;const a=e[t],r=n[t];rn(a)&&rn(r)?wm(a,r,s):e[t]=gp(r)}function wm(t,e,n){const s=ui(e)?e:[e],a=s.length;if(!rn(t))return t;n=n||{};const r=n.merger||q$;let o;for(let c=0;c<a;++c){if(o=s[c],!rn(o))continue;const d=Object.keys(o);for(let m=0,u=d.length;m<u;++m)r(d[m],t,o,n)}return t}function em(t,e){return wm(t,e,{merger:H$})}function H$(t,e,n){if(!q2(t))return;const s=e[t],a=n[t];rn(s)&&rn(a)?em(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=gp(a))}const D0={"":t=>t,x:t=>t.x,y:t=>t.y};function z$(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function V$(t){const e=z$(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function oo(t,e){return(D0[e]||(D0[e]=V$(e)))(t)}function ew(t){return t.charAt(0).toUpperCase()+t.slice(1)}const km=t=>typeof t<"u",vl=t=>typeof t=="function",R0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function U$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Sn=Math.PI,oi=2*Sn,fp=Number.POSITIVE_INFINITY,W$=Sn/180,hi=Sn/2,Ol=Sn/4,P0=Sn*2/3,H2=Math.log10,ul=Math.sign;function Ph(t,e,n){return Math.abs(t-e)<n}function M0(t){const e=Math.round(t);t=Ph(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(H2(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function K$(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,r)=>a-r).pop(),e}function G$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function vp(t){return!G$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Y$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Q$(t,e,n){let s,a,r;for(s=0,a=t.length;s<a;s++)r=t[s][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function fr(t){return t*(Sn/180)}function Z$(t){return t*(180/Sn)}function I0(t){if(!Xs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function z2(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Sn&&(r+=oi),{angle:r,distance:a}}function X$(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ra(t){return(t%oi+oi)%oi}function xp(t,e,n,s){const a=Ra(t),r=Ra(e),o=Ra(n),c=Ra(r-a),d=Ra(o-a),m=Ra(a-r),u=Ra(a-o);return a===r||a===o||s&&r===o||c>d&&m<u}function ls(t,e,n){return Math.max(e,Math.min(n,t))}function J$(t){return ls(t,-32768,32767)}function Kl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function tw(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,a=0,r;for(;s-a>1;)r=a+s>>1,n(r)?a=r:s=r;return{lo:a,hi:s}}const Yx=(t,e,n,s)=>tw(t,n,s?a=>{const r=t[a][e];return r<n||r===n&&t[a+1][e]===n}:a=>t[a][e]<n),eB=(t,e,n)=>tw(t,n,s=>t[s][e]>=n);function tB(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const V2=["push","pop","shift","splice","unshift"];function nB(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),V2.forEach(n=>{const s="_onData"+ew(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=a.apply(this,r);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...r)}),o}})})}function O0(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(V2.forEach(r=>{delete t[r]}),delete t._chartjs)}function U2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const W2=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function K2(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,W2.call(window,()=>{s=!1,t.apply(e,n)}))}}function iB(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const nw=t=>t==="start"?"left":t==="end"?"right":"center",Di=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,sB=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Wu=t=>t===0||t===1,L0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*oi/n)),F0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*oi/n)+1,tm={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hi)+1,easeOutSine:t=>Math.sin(t*hi),easeInOutSine:t=>-.5*(Math.cos(Sn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Wu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Wu(t)?t:L0(t,.075,.3),easeOutElastic:t=>Wu(t)?t:F0(t,.075,.3),easeInOutElastic(t){return Wu(t)?t:t<.5?.5*L0(t*2,.1125,.45):.5+.5*F0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tm.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tm.easeInBounce(t*2)*.5:tm.easeOutBounce(t*2-1)*.5+.5};function G2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $0(t){return G2(t)?t:new bm(t)}function mv(t){return G2(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const aB=["x","y","borderWidth","radius","tension"],rB=["color","borderColor","backgroundColor"];function lB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:rB},numbers:{type:"number",properties:aB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function oB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const B0=new Map;function cB(t,e){e=e||{};const n=t+JSON.stringify(e);let s=B0.get(n);return s||(s=new Intl.NumberFormat(t,e),B0.set(n,s)),s}function iw(t,e,n){return cB(e,n).format(t)}const dB={values(t){return ui(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,r=t;if(n.length>1){const m=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),r=mB(t,n)}const o=H2(Math.abs(r)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),iw(t,s,d)}};function mB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Y2={formatters:dB};function uB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Y2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const co=Object.create(null),Qx=Object.create(null);function nm(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const r=n[s];t=t[r]||(t[r]=Object.create(null))}return t}function uv(t,e,n){return typeof e=="string"?wm(nm(t,e),n):wm(nm(t,""),e)}class hB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>mv(a.backgroundColor),this.hoverBorderColor=(s,a)=>mv(a.borderColor),this.hoverColor=(s,a)=>mv(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return uv(this,e,n)}get(e){return nm(this,e)}describe(e,n){return uv(Qx,e,n)}override(e,n){return uv(co,e,n)}route(e,n,s,a){const r=nm(this,e),o=nm(this,s),c="_"+n;Object.defineProperties(r,{[c]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[c],m=o[a];return rn(d)?Object.assign({},m,d):an(d,m)},set(d){this[c]=d}}})}apply(e){e.forEach(n=>n(this))}}var si=new hB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lB,oB,uB]);function pB(t){return!t||_n(t.size)||_n(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function q0(t,e,n,s,a){let r=e[a];return r||(r=e[a]=t.measureText(a).width,n.push(a)),r>s&&(s=r),s}function Ll(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function H0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function z0(t,e,n,s){Q2(t,e,n,s,null)}function Q2(t,e,n,s,a){let r,o,c,d,m,u,p,h;const g=e.pointStyle,v=e.rotation,x=e.radius;let y=(v||0)*W$;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),g){default:a?t.ellipse(n,s,a/2,x,0,0,oi):t.arc(n,s,x,0,oi),t.closePath();break;case"triangle":u=a?a/2:x,t.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*x),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*x),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*x),t.closePath();break;case"rectRounded":m=x*.516,d=x-m,o=Math.cos(y+Ol)*d,p=Math.cos(y+Ol)*(a?a/2-m:d),c=Math.sin(y+Ol)*d,h=Math.sin(y+Ol)*(a?a/2-m:d),t.arc(n-p,s-c,m,y-Sn,y-hi),t.arc(n+h,s-o,m,y-hi,y),t.arc(n+p,s+c,m,y,y+hi),t.arc(n-h,s+o,m,y+hi,y+Sn),t.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*x,u=a?a/2:d,t.rect(n-u,s-d,2*u,2*d);break}y+=Ol;case"rectRot":p=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,h=Math.sin(y)*(a?a/2:x),t.moveTo(n-p,s-c),t.lineTo(n+h,s-o),t.lineTo(n+p,s+c),t.lineTo(n-h,s+o),t.closePath();break;case"crossRot":y+=Ol;case"cross":p=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,h=Math.sin(y)*(a?a/2:x),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"star":p=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,h=Math.sin(y)*(a?a/2:x),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o),y+=Ol,p=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,h=Math.sin(y)*(a?a/2:x),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"line":o=a?a/2:Math.cos(y)*x,c=Math.sin(y)*x,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(a?a/2:x),s+Math.sin(y)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Z2(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function sw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function aw(t){t.restore()}function gB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_n(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function fB(t,e,n,s,a){if(a.strikethrough||a.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,c=e+r.actualBoundingBoxRight,d=n-r.actualBoundingBoxAscent,m=n+r.actualBoundingBoxDescent,u=a.strikethrough?(d+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,u),t.lineTo(c,u),t.stroke()}}function vB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jm(t,e,n,s,a,r={}){const o=ui(e)?e:[e],c=r.strokeWidth>0&&r.strokeColor!=="";let d,m;for(t.save(),t.font=a.string,gB(t,r),d=0;d<o.length;++d)m=o[d],r.backdrop&&vB(t,r.backdrop),c&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),_n(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(m,n,s,r.maxWidth)),t.fillText(m,n,s,r.maxWidth),fB(t,n,s,m,r),s+=Number(a.lineHeight);t.restore()}function yp(t,e){const{x:n,y:s,w:a,h:r,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Sn,Sn,!0),t.lineTo(n,s+r-o.bottomLeft),t.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Sn,hi,!0),t.lineTo(n+a-o.bottomRight,s+r),t.arc(n+a-o.bottomRight,s+r-o.bottomRight,o.bottomRight,hi,0,!0),t.lineTo(n+a,s+o.topRight),t.arc(n+a-o.topRight,s+o.topRight,o.topRight,0,-hi,!0),t.lineTo(n+o.topLeft,s)}const xB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bB(t,e){const n=(""+t).match(xB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const wB=t=>+t||0;function rw(t,e){const n={},s=rn(e),a=s?Object.keys(e):e,r=rn(t)?s?o=>an(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)n[o]=wB(r(o));return n}function X2(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xc(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Js(t){const e=X2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Li(t,e){t=t||{},e=e||si.font;let n=an(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=an(t.style,e.style);s&&!(""+s).match(yB)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:an(t.family,e.family),lineHeight:bB(an(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:an(t.weight,e.weight),string:""};return a.string=pB(a),a}function Ku(t,e,n,s){let a,r,o;for(a=0,r=t.length;a<r;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function kB(t,e,n){const{min:s,max:a}=t,r=B2(e,(a-s)/2),o=(c,d)=>n&&c===0?0:c+d;return{min:o(s,-Math.abs(r)),max:o(a,r)}}function ed(t,e){return Object.assign(Object.create(t),e)}function lw(t,e=[""],n,s,a=()=>t[0]){const r=n||t;typeof s>"u"&&(s=nT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:a,override:c=>lw([c,...t],e,r,s)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete t[0][d],!0},get(c,d){return eT(c,d,()=>AB(d,e,t,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,d){return U0(c).includes(d)},ownKeys(c){return U0(c)},set(c,d,m){const u=c._storage||(c._storage=a());return c[d]=u[d]=m,delete c._keys,!0}})}function Fc(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:J2(t,s),setContext:r=>Fc(t,r,n,s),override:r=>Fc(t.override(r),e,n,s)};return new Proxy(a,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,c){return eT(r,o,()=>NB(r,o,c))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,c){return t[o]=c,delete r[o],!0}})}function J2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:vl(n)?n:()=>n,isIndexable:vl(s)?s:()=>s}}const jB=(t,e)=>t?t+ew(e):e,ow=(t,e)=>rn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function eT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function NB(t,e,n){const{_proxy:s,_context:a,_subProxy:r,_descriptors:o}=t;let c=s[e];return vl(c)&&o.isScriptable(e)&&(c=CB(e,c,t,n)),ui(c)&&c.length&&(c=SB(e,c,t,o.isIndexable)),ow(e,c)&&(c=Fc(c,a,r&&r[e],o)),c}function CB(t,e,n,s){const{_proxy:a,_context:r,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let d=e(r,o||s);return c.delete(t),ow(t,d)&&(d=cw(a._scopes,a,t,d)),d}function SB(t,e,n,s){const{_proxy:a,_context:r,_subProxy:o,_descriptors:c}=n;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(rn(e[0])){const d=e,m=a._scopes.filter(u=>u!==d);e=[];for(const u of d){const p=cw(m,a,t,u);e.push(Fc(p,r,o&&o[t],c))}}return e}function tT(t,e,n){return vl(t)?t(e,n):t}const _B=(t,e)=>t===!0?e:typeof t=="string"?oo(e,t):void 0;function EB(t,e,n,s,a){for(const r of e){const o=_B(n,r);if(o){t.add(o);const c=tT(o._fallback,n,a);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function cw(t,e,n,s){const a=e._rootScopes,r=tT(e._fallback,n,s),o=[...t,...a],c=new Set;c.add(s);let d=V0(c,o,n,r||n,s);return d===null||typeof r<"u"&&r!==n&&(d=V0(c,o,r,d,s),d===null)?!1:lw(Array.from(c),[""],a,r,()=>TB(e,n,s))}function V0(t,e,n,s,a){for(;n;)n=EB(t,e,n,s,a);return n}function TB(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return ui(a)&&rn(n)?n:a||{}}function AB(t,e,n,s){let a;for(const r of e)if(a=nT(jB(r,t),n),typeof a<"u")return ow(t,a)?cw(n,s,t,a):a}function nT(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function U0(t){let e=t._keys;return e||(e=t._keys=DB(t._scopes)),e}function DB(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function dw(){return typeof window<"u"&&typeof document<"u"}function mw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bp(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Rg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function RB(t,e){return Rg(t).getPropertyValue(e)}const PB=["top","right","bottom","left"];function Xl(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const r=PB[a];s[r]=parseFloat(t[e+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const MB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function IB(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:r}=s;let o=!1,c,d;if(MB(a,r,t.target))c=a,d=r;else{const m=e.getBoundingClientRect();c=s.clientX-m.left,d=s.clientY-m.top,o=!0}return{x:c,y:d,box:o}}function ql(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Rg(n),r=a.boxSizing==="border-box",o=Xl(a,"padding"),c=Xl(a,"border","width"),{x:d,y:m,box:u}=IB(t,n),p=o.left+(u&&c.left),h=o.top+(u&&c.top);let{width:g,height:v}=e;return r&&(g-=o.width+c.width,v-=o.height+c.height),{x:Math.round((d-p)/g*n.width/s),y:Math.round((m-h)/v*n.height/s)}}function OB(t,e,n){let s,a;if(e===void 0||n===void 0){const r=t&&mw(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),c=Rg(r),d=Xl(c,"border","width"),m=Xl(c,"padding");e=o.width-m.width-d.width,n=o.height-m.height-d.height,s=bp(c.maxWidth,r,"clientWidth"),a=bp(c.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:s||fp,maxHeight:a||fp}}const Jr=t=>Math.round(t*10)/10;function LB(t,e,n,s){const a=Rg(t),r=Xl(a,"margin"),o=bp(a.maxWidth,t,"clientWidth")||fp,c=bp(a.maxHeight,t,"clientHeight")||fp,d=OB(t,e,n);let{width:m,height:u}=d;if(a.boxSizing==="content-box"){const h=Xl(a,"border","width"),g=Xl(a,"padding");m-=g.width+h.width,u-=g.height+h.height}return m=Math.max(0,m-r.width),u=Math.max(0,s?m/s:u-r.height),m=Jr(Math.min(m,o,d.maxWidth)),u=Jr(Math.min(u,c,d.maxHeight)),m&&!u&&(u=Jr(m/2)),(e!==void 0||n!==void 0)&&s&&d.height&&u>d.height&&(u=d.height,m=Jr(Math.floor(u*s))),{width:m,height:u}}function W0(t,e,n){const s=e||1,a=Jr(t.height*s),r=Jr(t.width*s);t.height=Jr(t.height),t.width=Jr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==a||o.width!==r?(t.currentDevicePixelRatio=s,o.height=a,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const FB=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function K0(t,e){const n=RB(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const $B=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},BB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function yc(t,e,n){return t?$B(e,n):BB()}function iT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function sT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Gu(t,e,n){return t.options.clip?t[n]:e[n]}function qB(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Gu(n,e,"left"),right:Gu(n,e,"right"),top:Gu(s,e,"top"),bottom:Gu(s,e,"bottom")}:e}function HB(t,e){const n=e._clip;if(n.disabled)return!1;const s=qB(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class zB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const r=n.listeners[a],o=n.duration;r.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=W2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,c=!1,d;for(;o>=0;--o)d=r[o],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),c=!0):(r[o]=r[r.length-1],r.pop());c&&(a.draw(),this._notify(a,s,e,"progress")),r.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mr=new zB;const G0="transparent",VB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=$0(t||G0),a=s.valid&&$0(e||G0);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class UB{constructor(e,n,s,a){const r=n[s];a=Ku([e.to,a,r,e.from]);const o=Ku([e.from,r,a]);this._active=!0,this._fn=e.fn||VB[e.type||typeof o],this._easing=tm[e.easing]||tm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ku([e.to,n,a,e.from]),this._from=Ku([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,r=this._from,o=this._loop,c=this._to;let d;if(this._active=r!==c&&(o||n<s),!this._active){this._target[a]=c,this._notify(!0);return}if(n<0){this._target[a]=r;return}d=n/s%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(r,c,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class aT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!rn(e))return;const n=Object.keys(si.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const r=e[a];if(!rn(r))return;const o={};for(const c of n)o[c]=r[c];(ui(r.properties)&&r.properties||[a]).forEach(c=>{(c===a||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,a=KB(e,s);if(!a)return[];const r=this._createAnimations(a,s);return s.$shared&&WB(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,n){const s=this._properties,a=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const m=o[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(e,n));continue}const u=n[m];let p=r[m];const h=s.get(m);if(p)if(h&&p.active()){p.update(h,u,c);continue}else p.cancel();if(!h||!h.duration){e[m]=u;continue}r[m]=p=new UB(h,e,m,u),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return mr.add(this._chart,s),!0}}function WB(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const r=t[s[a]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function KB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Y0(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:s?r:a,end:s?a:r}}function GB(t,e,n){if(n===!1)return!1;const s=Y0(t,n),a=Y0(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function YB(t){let e,n,s,a;return rn(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function rT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,r;for(a=0,r=s.length;a<r;++a)n.push(s[a].index);return n}function Q0(t,e,n,s={}){const a=t.keys,r=s.mode==="single";let o,c,d,m;if(e===null)return;let u=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===n){if(u=!0,s.all)continue;break}m=t.values[d],Xs(m)&&(r||e===0||ul(e)===ul(m))&&(e+=m)}return!u&&!s.all?0:e}function QB(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let d,m,u;for(d=0,m=o.length;d<m;++d)u=o[d],c[d]={[a]:u,[r]:t[u]};return c}function hv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function ZB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function XB(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function JB(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Z0(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const r=t[a.index];if(n&&r>0||!n&&r<0)return a.index}return null}function X0(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:c}=s,d=r.axis,m=o.axis,u=ZB(r,o,s),p=e.length;let h;for(let g=0;g<p;++g){const v=e[g],{[d]:x,[m]:y}=v,b=v._stacks||(v._stacks={});h=b[m]=JB(a,u,x),h[c]=y,h._top=Z0(h,o,!0,s.type),h._bottom=Z0(h,o,!1,s.type);const w=h._visualValues||(h._visualValues={});w[c]=y}}function pv(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function e8(t,e){return ed(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function t8(t,e,n){return ed(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function jd(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const r=a._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const gv=t=>t==="reset"||t==="none",J0=(t,e)=>e?t:Object.assign({},t),n8=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rT(n,!0),values:null};class uw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&jd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(p,h,g,v)=>p==="x"?h:p==="r"?v:g,r=n.xAxisID=an(s.xAxisID,pv(e,"x")),o=n.yAxisID=an(s.yAxisID,pv(e,"y")),c=n.rAxisID=an(s.rAxisID,pv(e,"r")),d=n.indexAxis,m=n.iAxisID=a(d,r,o,c),u=n.vAxisID=a(d,o,r,c);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(m),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&O0(this._data,this),e._stacked&&jd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(rn(n)){const a=this._cachedMeta;this._data=QB(n,a)}else if(s!==n){if(s){O0(s,this);const a=this._cachedMeta;jd(a),a._parsed=[]}n&&Object.isExtensible(n)&&nB(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const r=n._stacked;n._stacked=hv(n.vScale,n),n.stack!==s.stack&&(a=!0,jd(n),n.stack=s.stack),this._resyncElements(e),(a||r!==n._stacked)&&(X0(this,n._parsed),n._stacked=hv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:r,_stacked:o}=s,c=r.axis;let d=e===0&&n===a.length?!0:s._sorted,m=e>0&&s._parsed[e-1],u,p,h;if(this._parsing===!1)s._parsed=a,s._sorted=!0,h=a;else{ui(a[e])?h=this.parseArrayData(s,a,e,n):rn(a[e])?h=this.parseObjectData(s,a,e,n):h=this.parsePrimitiveData(s,a,e,n);const g=()=>p[c]===null||m&&p[c]<m[c];for(u=0;u<n;++u)s._parsed[u+e]=p=h[u],d&&(g()&&(d=!1),m=p);s._sorted=d}o&&X0(this,h)}parsePrimitiveData(e,n,s,a){const{iScale:r,vScale:o}=e,c=r.axis,d=o.axis,m=r.getLabels(),u=r===o,p=new Array(a);let h,g,v;for(h=0,g=a;h<g;++h)v=h+s,p[h]={[c]:u||r.parse(m[v],v),[d]:o.parse(n[v],v)};return p}parseArrayData(e,n,s,a){const{xScale:r,yScale:o}=e,c=new Array(a);let d,m,u,p;for(d=0,m=a;d<m;++d)u=d+s,p=n[u],c[d]={x:r.parse(p[0],u),y:o.parse(p[1],u)};return c}parseObjectData(e,n,s,a){const{xScale:r,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let u,p,h,g;for(u=0,p=a;u<p;++u)h=u+s,g=n[h],m[u]={x:r.parse(oo(g,c),h),y:o.parse(oo(g,d),h)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,r=this._cachedMeta,o=n[e.axis],c={keys:rT(a,!0),values:n._stacks[e.axis]._visualValues};return Q0(c,o,r.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const r=s[n.axis];let o=r===null?NaN:r;const c=a&&s._stacks[n.axis];a&&c&&(a.values=c,o=Q0(a,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,r=s._sorted&&e===s.iScale,o=a.length,c=this._getOtherScale(e),d=n8(n,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:p}=XB(c);let h,g;function v(){g=a[h];const x=g[c.axis];return!Xs(g[e.axis])||u>x||p<x}for(h=0;h<o&&!(!v()&&(this.updateRangeFromParsed(m,e,g,d),r));++h);if(r){for(h=o-1;h>=0;--h)if(!v()){this.updateRangeFromParsed(m,e,g,d);break}}return m}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,r,o;for(a=0,r=n.length;a<r;++a)o=n[a][e.axis],Xs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:a?""+a.getLabelForValue(r[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=YB(an(this.options.clip,GB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],r=n.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,m=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,c,d),u=c;u<c+d;++u){const p=a[u];p.hidden||(p.active&&m?o.push(p):p.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=t8(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=e8(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",r=this._cachedDataOpts,o=e+"-"+n,c=r[o],d=this.enableOptionSharing&&km(s);if(c)return J0(c,d);const m=this.chart.config,u=m.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],h=m.getOptionScopes(this.getDataset(),u),g=Object.keys(si.elements[e]),v=()=>this.getContext(s,a,n),x=m.resolveNamedOptions(h,g,v,p);return x.$shared&&(x.$shared=d,r[o]=Object.freeze(J0(x,d))),x}_resolveAnimations(e,n,s){const a=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,c=r[o];if(c)return c;let d;if(a.options.animation!==!1){const u=this.chart.config,p=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),p);d=u.createResolver(h,this.getContext(e,s,n))}const m=new aT(a,d&&d.animations);return d&&d._cacheable&&(r[o]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||gv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==a;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(e,n,s,a){gv(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!gv(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const r=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,d,m]of this._syncList)this[c](d,m);this._syncList=[];const a=s.length,r=n.length,o=Math.min(r,a);o&&this.parse(0,o),r>a?this._insertElements(a,r-a,e):r<a&&this._removeElements(r,a-r)}_insertElements(e,n,s=!0){const a=this._cachedMeta,r=a.data,o=e+n;let c;const d=m=>{for(m.length+=n,c=m.length-1;c>=o;c--)m[c]=m[c-n]};for(d(r),c=e;c<o;++c)r[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&jd(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function i8(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,r=n.length;a<r;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=U2(s.sort((a,r)=>a-r))}return t._cache.$bar}function s8(t){const e=t.iScale,n=i8(e,t.type);let s=e._length,a,r,o,c;const d=()=>{o===32767||o===-32768||(km(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(a=0,r=n.length;a<r;++a)o=e.getPixelForValue(n[a]),d();for(c=void 0,a=0,r=e.ticks.length;a<r;++a)o=e.getPixelForTick(a),d();return s}function a8(t,e,n,s){const a=n.barThickness;let r,o;return _n(a)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=a*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function r8(t,e,n,s){const a=e.pixels,r=a[t];let o=t>0?a[t-1]:null,c=t<a.length-1?a[t+1]:null;const d=n.categoryPercentage;o===null&&(o=r-(c===null?e.end-e.start:c-r)),c===null&&(c=r+r-o);const m=r-(r-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/s,ratio:n.barPercentage,start:m}}function l8(t,e,n,s){const a=n.parse(t[0],s),r=n.parse(t[1],s),o=Math.min(a,r),c=Math.max(a,r);let d=o,m=c;Math.abs(o)>Math.abs(c)&&(d=c,m=o),e[n.axis]=m,e._custom={barStart:d,barEnd:m,start:a,end:r,min:o,max:c}}function lT(t,e,n,s){return ui(t)?l8(t,e,n,s):e[n.axis]=n.parse(t,s),e}function eN(t,e,n,s){const a=t.iScale,r=t.vScale,o=a.getLabels(),c=a===r,d=[];let m,u,p,h;for(m=n,u=n+s;m<u;++m)h=e[m],p={},p[a.axis]=c||a.parse(o[m],m),d.push(lT(h,p,r,m));return d}function fv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function o8(t,e,n){return t!==0?ul(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function c8(t){let e,n,s,a,r;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",r="start"):(a="start",r="end"),{start:n,end:s,reverse:e,top:a,bottom:r}}function d8(t,e,n,s){let a=e.borderSkipped;const r={};if(!a){t.borderSkipped=r;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:d,top:m,bottom:u}=c8(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=m:(n._bottom||0)===s?a=u:(r[tN(u,o,c,d)]=!0,a=m)),r[tN(a,o,c,d)]=!0,t.borderSkipped=r}function tN(t,e,n,s){return s?(t=m8(t,e,n),t=nN(t,n,e)):t=nN(t,e,n),t}function m8(t,e,n){return t===e?n:t===n?e:t}function nN(t,e,n){return t==="start"?e:t==="end"?n:t}function u8(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class h8 extends uw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return eN(e,n,s,a)}parseArrayData(e,n,s,a){return eN(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:r,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=r.axis==="x"?c:d,u=o.axis==="x"?c:d,p=[];let h,g,v,x;for(h=s,g=s+a;h<g;++h)x=n[h],v={},v[r.axis]=r.parse(oo(x,m),h),p.push(lT(oo(x,u),v,o,h));return p}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const r=s._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,r=this.getParsed(e),o=r._custom,c=fv(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(r[a.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const r=a==="reset",{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),m=c.isHorizontal(),u=this._getRuler(),{sharedOptions:p,includeOptions:h}=this._getSharedOptions(n,a);for(let g=n;g<n+s;g++){const v=this.getParsed(g),x=r||_n(v[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),b=(v._stacks||{})[c.axis],w={horizontal:m,base:x.base,enableBorderRadius:!b||fv(v._custom)||o===b._top||o===b._bottom,x:m?x.head:y.center,y:m?y.center:x.head,height:m?y.size:Math.abs(x.size),width:m?Math.abs(x.size):y.size};h&&(w.options=p||this.resolveDataElementOptions(g,e[g].active?"active":a));const k=w.options||e[g].options;d8(w,k,b,o),u8(w,k,u.ratio),this.updateElement(e[g],g,w,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),d=c&&c[s.axis],m=u=>{const p=u._parsed.find(g=>g[s.axis]===d),h=p&&p[u.vScale.axis];if(_n(h)||isNaN(h))return!0};for(const u of a)if(!(n!==void 0&&m(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[an(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),r=n!==void 0?a.indexOf(n):-1;return r===-1?a.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let r,o;for(r=0,o=n.data.length;r<o;++r)a.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const c=e.barThickness;return{min:c||s8(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:r,minBarLength:o}}=this,c=r||0,d=this.getParsed(e),m=d._custom,u=fv(m);let p=d[n.axis],h=0,g=s?this.applyStack(n,d,s):p,v,x;g!==p&&(h=g-p,g=p),u&&(p=m.barStart,g=m.barEnd-m.barStart,p!==0&&ul(p)!==ul(m.barEnd)&&(h=0),h+=p);const y=!_n(r)&&!u?r:h;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(h+g):v=b,x=v-b,Math.abs(x)<o){x=o8(x,n,c)*o,p===c&&(b-=x/2);const w=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),_=Math.min(w,k),j=Math.max(w,k);b=Math.max(Math.min(b,j),_),v=b+x,s&&!u&&(d._stacks[n.axis]._visualValues[a]=n.getValueForPixel(v)-n.getValueForPixel(b))}if(b===n.getPixelForValue(c)){const w=ul(x)*n.getLineWidthForValue(c)/2;b+=w,x-=w}return{size:x,base:b,head:v,center:v+x/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,r=a.skipNull,o=an(a.maxBarThickness,1/0);let c,d;const m=this._getAxisCount();if(n.grouped){const u=r?this._getStackCount(e):n.stackCount,p=a.barThickness==="flex"?r8(e,n,a,u*m):a8(e,n,a,u*m),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(an(h,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+g;c=p.start+p.chunk*v+p.chunk/2,d=Math.min(o,p.chunk*p.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(o,n.min*n.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let r=0;for(;r<a;++r)this.getParsed(r)[n.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}function p8(t,e,n){let s=1,a=1,r=0,o=0;if(e<oi){const c=t,d=c+e,m=Math.cos(c),u=Math.sin(c),p=Math.cos(d),h=Math.sin(d),g=(k,_,j)=>xp(k,c,d,!0)?1:Math.max(_,_*n,j,j*n),v=(k,_,j)=>xp(k,c,d,!0)?-1:Math.min(_,_*n,j,j*n),x=g(0,m,p),y=g(hi,u,h),b=v(Sn,m,p),w=v(Sn+hi,u,h);s=(x-b)/2,a=(y-w)/2,r=-(x+b)/2,o=-(y+w)/2}return{ratioX:s,ratioY:a,offsetX:r,offsetY:o}}class g8 extends uw{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:r,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((d,m)=>{const p=e.getDatasetMeta(0).controller.getStyle(m);return{text:d,fillStyle:p.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(m),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:a,pointStyle:s,borderRadius:o&&(c||p.borderRadius),index:m}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let r=d=>+s[d];if(rn(s[e])){const{key:d="value"}=this._parsing;r=m=>+oo(s[m],d)}let o,c;for(o=e,c=e+n;o<c;++o)a._parsed[o]=r(o)}}_getRotation(){return fr(this.options.rotation-90)}_getCircumference(){return fr(this.options.circumference)}_getRotationExtents(){let e=oi,n=-oi;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,r=a._getRotation(),o=a._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,r=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),d=Math.min(B$(this.options.cutout,c),1),m=this._getRingWeight(this.index),{circumference:u,rotation:p}=this._getRotationExtents(),{ratioX:h,ratioY:g,offsetX:v,offsetY:x}=p8(p,u,d),y=(s.width-o)/h,b=(s.height-o)/g,w=Math.max(Math.min(y,b)/2,0),k=B2(this.options.radius,w),_=Math.max(k*d,0),j=(k-_)/this._getVisibleDatasetWeightTotal();this.offsetX=v*k,this.offsetY=x*k,a.total=this.calculateTotal(),this.outerRadius=k-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*m,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*r/oi)}updateElements(e,n,s,a){const r=a==="reset",o=this.chart,c=o.chartArea,m=o.options.animation,u=(c.left+c.right)/2,p=(c.top+c.bottom)/2,h=r&&m.animateScale,g=h?0:this.innerRadius,v=h?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(n,a);let b=this._getRotation(),w;for(w=0;w<n;++w)b+=this._circumference(w,r);for(w=n;w<n+s;++w){const k=this._circumference(w,r),_=e[w],j={x:u+this.offsetX,y:p+this.offsetY,startAngle:b,endAngle:b+k,circumference:k,outerRadius:v,innerRadius:g};y&&(j.options=x||this.resolveDataElementOptions(w,_.active?"active":a)),b+=k,this.updateElement(_,w,j,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const r=e._parsed[a];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?oi*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],r=iw(n._parsed[e],s.options.locale);return{label:a[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,r,o,c,d;if(!e){for(a=0,r=s.data.datasets.length;a<r;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,c=o.controller;break}}if(!e)return 0;for(a=0,r=e.length;a<r;++a)d=c.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(an(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Fl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hw{static override(e){Object.assign(hw.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Fl()}parse(){return Fl()}format(){return Fl()}add(){return Fl()}diff(){return Fl()}startOf(){return Fl()}endOf(){return Fl()}}var f8={_date:hw};function v8(t,e,n,s){const{controller:a,data:r,_sorted:o}=t,c=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&r.length){const m=c._reversePixels?eB:Yx;if(s){if(a._sharedOptions){const u=r[0],p=typeof u.getRange=="function"&&u.getRange(e);if(p){const h=m(r,e,n-p),g=m(r,e,n+p);return{lo:h.lo,hi:g.hi}}}}else{const u=m(r,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:h}=t,g=h.slice(0,u.lo+1).reverse().findIndex(x=>!_n(x[p.axis]));u.lo-=Math.max(0,g);const v=h.slice(u.hi).findIndex(x=>!_n(x[p.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:r.length-1}}function Pg(t,e,n,s,a){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,d=r.length;c<d;++c){const{index:m,data:u}=r[c],{lo:p,hi:h}=v8(r[c],e,o,a);for(let g=p;g<=h;++g){const v=u[g];v.skip||s(v,m,g)}}}function x8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const r=e?Math.abs(s.x-a.x):0,o=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function vv(t,e,n,s,a){const r=[];return!a&&!t.isPointInArea(e)||Pg(t,n,e,function(c,d,m){!a&&!Z2(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&r.push({element:c,datasetIndex:d,index:m})},!0),r}function y8(t,e,n,s){let a=[];function r(o,c,d){const{startAngle:m,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:p}=z2(o,{x:e.x,y:e.y});xp(p,m,u)&&a.push({element:o,datasetIndex:c,index:d})}return Pg(t,n,e,r),a}function b8(t,e,n,s,a,r){let o=[];const c=x8(n);let d=Number.POSITIVE_INFINITY;function m(u,p,h){const g=u.inRange(e.x,e.y,a);if(s&&!g)return;const v=u.getCenterPoint(a);if(!(!!r||t.isPointInArea(v))&&!g)return;const y=c(e,v);y<d?(o=[{element:u,datasetIndex:p,index:h}],d=y):y===d&&o.push({element:u,datasetIndex:p,index:h})}return Pg(t,n,e,m),o}function xv(t,e,n,s,a,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!s?y8(t,e,n,a):b8(t,e,n,s,a,r)}function iN(t,e,n,s,a){const r=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Pg(t,n,e,(d,m,u)=>{d[o]&&d[o](e[n],a)&&(r.push({element:d,datasetIndex:m,index:u}),c=c||d.inRange(e.x,e.y,a))}),s&&!c?[]:r}var w8={modes:{index(t,e,n,s){const a=ql(e,t),r=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?vv(t,a,r,s,o):xv(t,a,r,!1,s,o),d=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const u=c[0].index,p=m.data[u];p&&!p.skip&&d.push({element:p,datasetIndex:m.index,index:u})}),d):[]},dataset(t,e,n,s){const a=ql(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?vv(t,a,r,s,o):xv(t,a,r,!1,s,o);if(c.length>0){const d=c[0].datasetIndex,m=t.getDatasetMeta(d).data;c=[];for(let u=0;u<m.length;++u)c.push({element:m[u],datasetIndex:d,index:u})}return c},point(t,e,n,s){const a=ql(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return vv(t,a,r,s,o)},nearest(t,e,n,s){const a=ql(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return xv(t,a,r,n.intersect,s,o)},x(t,e,n,s){const a=ql(e,t);return iN(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=ql(e,t);return iN(t,a,"y",n.intersect,s)}}};const oT=["left","top","right","bottom"];function Nd(t,e){return t.filter(n=>n.pos===e)}function sN(t,e){return t.filter(n=>oT.indexOf(n.pos)===-1&&n.box.axis===e)}function Cd(t,e){return t.sort((n,s)=>{const a=e?s:n,r=e?n:s;return a.weight===r.weight?a.index-r.index:a.weight-r.weight})}function k8(t){const e=[];let n,s,a,r,o,c;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:r,options:{stack:o,stackWeight:c=1}}=a,e.push({index:n,box:a,pos:r,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&r+o,stackWeight:c});return e}function j8(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:r}=n;if(!s||!oT.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function N8(t,e){const n=j8(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let r,o,c;for(r=0,o=t.length;r<o;++r){c=t[r];const{fullSize:d}=c.box,m=n[c.stack],u=m&&c.stackWeight/m.weight;c.horizontal?(c.width=u?u*s:d&&e.availableWidth,c.height=a):(c.width=s,c.height=u?u*a:d&&e.availableHeight)}return n}function C8(t){const e=k8(t),n=Cd(e.filter(m=>m.box.fullSize),!0),s=Cd(Nd(e,"left"),!0),a=Cd(Nd(e,"right")),r=Cd(Nd(e,"top"),!0),o=Cd(Nd(e,"bottom")),c=sN(e,"x"),d=sN(e,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:Nd(e,"chartArea"),vertical:s.concat(a).concat(d),horizontal:r.concat(o).concat(c)}}function aN(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function cT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function S8(t,e,n,s){const{pos:a,box:r}=n,o=t.maxPadding;if(!rn(a)){n.size&&(t[a]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?r.height:r.width),n.size=p.size/p.count,t[a]+=n.size}r.getPadding&&cT(o,r.getPadding());const c=Math.max(0,e.outerWidth-aN(o,t,"left","right")),d=Math.max(0,e.outerHeight-aN(o,t,"top","bottom")),m=c!==t.w,u=d!==t.h;return t.w=c,t.h=d,n.horizontal?{same:m,other:u}:{same:u,other:m}}function _8(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function E8(t,e){const n=e.maxPadding;function s(a){const r={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return s(t?["left","right"]:["top","bottom"])}function qd(t,e,n,s){const a=[];let r,o,c,d,m,u;for(r=0,o=t.length,m=0;r<o;++r){c=t[r],d=c.box,d.update(c.width||e.w,c.height||e.h,E8(c.horizontal,e));const{same:p,other:h}=S8(e,n,c,s);m|=p&&a.length,u=u||h,d.fullSize||a.push(c)}return m&&qd(a,e,n,s)||u}function Yu(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function rN(t,e,n,s){const a=n.padding;let{x:r,y:o}=e;for(const c of t){const d=c.box,m=s[c.stack]||{placed:0,weight:1},u=c.stackWeight/m.weight||1;if(c.horizontal){const p=e.w*u,h=m.size||d.height;km(m.start)&&(o=m.start),d.fullSize?Yu(d,a.left,o,n.outerWidth-a.right-a.left,h):Yu(d,e.left+m.placed,o,p,h),m.start=o,m.placed+=p,o=d.bottom}else{const p=e.h*u,h=m.size||d.width;km(m.start)&&(r=m.start),d.fullSize?Yu(d,r,a.top,h,n.outerHeight-a.bottom-a.top):Yu(d,r,e.top+m.placed,h,p),m.start=r,m.placed+=p,r=d.right}}e.x=r,e.y=o}var Vs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=Js(t.options.layout.padding),r=Math.max(e-a.width,0),o=Math.max(n-a.height,0),c=C8(t.boxes),d=c.vertical,m=c.horizontal;kn(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=d.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},a);cT(h,Js(s));const g=Object.assign({maxPadding:h,w:r,h:o,x:a.left,y:a.top},a),v=N8(d.concat(m),p);qd(c.fullSize,g,p,v),qd(d,g,p,v),qd(m,g,p,v)&&qd(d,g,p,v),_8(g),rN(c.leftAndTop,g,p,v),g.x+=g.w,g.y+=g.h,rN(c.rightAndBottom,g,p,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},kn(c.chartArea,x=>{const y=x.box;Object.assign(y,t.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class dT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class T8 extends dT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mh="$chartjs",A8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lN=t=>t===null||t==="";function D8(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[Mh]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",lN(a)){const r=K0(t,"width");r!==void 0&&(t.width=r)}if(lN(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=K0(t,"height");r!==void 0&&(t.height=r)}return t}const mT=FB?{passive:!0}:!1;function R8(t,e,n){t&&t.addEventListener(e,n,mT)}function P8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,mT)}function M8(t,e){const n=A8[t.type]||t.type,{x:s,y:a}=ql(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function wp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function I8(t,e,n){const s=t.canvas,a=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||wp(c.addedNodes,s),o=o&&!wp(c.removedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function O8(t,e,n){const s=t.canvas,a=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||wp(c.removedNodes,s),o=o&&!wp(c.addedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const Nm=new Map;let oN=0;function uT(){const t=window.devicePixelRatio;t!==oN&&(oN=t,Nm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function L8(t,e){Nm.size||window.addEventListener("resize",uT),Nm.set(t,e)}function F8(t){Nm.delete(t),Nm.size||window.removeEventListener("resize",uT)}function $8(t,e,n){const s=t.canvas,a=s&&mw(s);if(!a)return;const r=K2((c,d)=>{const m=a.clientWidth;n(c,d),m<a.clientWidth&&n()},window),o=new ResizeObserver(c=>{const d=c[0],m=d.contentRect.width,u=d.contentRect.height;m===0&&u===0||r(m,u)});return o.observe(a),L8(t,r),o}function yv(t,e,n){n&&n.disconnect(),e==="resize"&&F8(t)}function B8(t,e,n){const s=t.canvas,a=K2(r=>{t.ctx!==null&&n(M8(r,t))},t);return R8(s,e,a),a}class q8 extends dT{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(D8(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Mh])return!1;const s=n[Mh].initial;["height","width"].forEach(r=>{const o=s[r];_n(o)?n.removeAttribute(r):n.setAttribute(r,o)});const a=s.style||{};return Object.keys(a).forEach(r=>{n.style[r]=a[r]}),n.width=n.width,delete n[Mh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),o={attach:I8,detach:O8,resize:$8}[n]||B8;a[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:yv,detach:yv,resize:yv}[n]||P8)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return LB(e,n,s,a)}isAttached(e){const n=e&&mw(e);return!!(n&&n.isConnected)}}function H8(t){return!dw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?T8:q8}let _o=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return vp(this.x)&&vp(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(r=>{a[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),a}};function z8(t,e){const n=t.options.ticks,s=V8(t),a=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?W8(e):[],o=r.length,c=r[0],d=r[o-1],m=[];if(o>a)return K8(e,m,r,o/a),m;const u=U8(r,e,a);if(o>0){let p,h;const g=o>1?Math.round((d-c)/(o-1)):null;for(Qu(e,m,u,_n(g)?0:c-g,c),p=0,h=o-1;p<h;p++)Qu(e,m,u,r[p],r[p+1]);return Qu(e,m,u,d,_n(g)?e.length:d+g),m}return Qu(e,m,u),m}function V8(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function U8(t,e,n){const s=G8(t),a=e.length/n;if(!s)return Math.max(a,1);const r=K$(s);for(let o=0,c=r.length-1;o<c;o++){const d=r[o];if(d>a)return d}return Math.max(a,1)}function W8(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function K8(t,e,n,s){let a=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),a++,r=n[a*s])}function Qu(t,e,n,s,a){const r=an(s,0),o=Math.min(an(a,t.length),t.length);let c=0,d,m,u;for(n=Math.ceil(n),a&&(d=a-s,n=d/Math.floor(d/n)),u=r;u<0;)c++,u=Math.round(r+c*n);for(m=Math.max(r,0);m<o;m++)m===u&&(e.push(t[m]),c++,u=Math.round(r+c*n))}function G8(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const Y8=t=>t==="left"?"right":t==="right"?"left":t,cN=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,dN=(t,e)=>Math.min(e||t,t);function mN(t,e){const n=[],s=t.length/e,a=t.length;let r=0;for(;r<a;r+=s)n.push(t[Math.floor(r)]);return n}function Q8(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,c=1e-6;let d=t.getPixelForTick(a),m;if(!(n&&(s===1?m=Math.max(d-r,o-d):e===0?m=(t.getPixelForTick(1)-d)/2:m=(d-t.getPixelForTick(a-1))/2,d+=a<e?m:-m,d<r-c||d>o+c)))return d}function Z8(t,e){kn(t,n=>{const s=n.gc,a=s.length/2;let r;if(a>e){for(r=0;r<a;++r)delete n.data[s[r]];s.splice(0,a)}})}function Sd(t){return t.drawTicks?t.tickLength:0}function uN(t,e){if(!t.display)return 0;const n=Li(t.font,e),s=Js(t.padding);return(ui(t.text)?t.text.length:1)*n.lineHeight+s.height}function X8(t,e){return ed(t,{scale:e,type:"scale"})}function J8(t,e,n){return ed(t,{tick:n,index:e,type:"tick"})}function e9(t,e,n){let s=nw(t);return(n&&e!=="right"||!n&&e==="right")&&(s=Y8(s)),s}function t9(t,e,n,s){const{top:a,left:r,bottom:o,right:c,chart:d}=t,{chartArea:m,scales:u}=d;let p=0,h,g,v;const x=o-a,y=c-r;if(t.isHorizontal()){if(g=Di(s,r,c),rn(n)){const b=Object.keys(n)[0],w=n[b];v=u[b].getPixelForValue(w)+x-e}else n==="center"?v=(m.bottom+m.top)/2+x-e:v=cN(t,n,e);h=c-r}else{if(rn(n)){const b=Object.keys(n)[0],w=n[b];g=u[b].getPixelForValue(w)-y+e}else n==="center"?g=(m.left+m.right)/2-y+e:g=cN(t,n,e);v=Di(s,o,a),p=n==="left"?-hi:hi}return{titleX:g,titleY:v,maxWidth:h,rotation:p}}class td extends _o{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=Ea(e,Number.POSITIVE_INFINITY),n=Ea(n,Number.NEGATIVE_INFINITY),s=Ea(s,Number.POSITIVE_INFINITY),a=Ea(a,Number.NEGATIVE_INFINITY),{min:Ea(e,s),max:Ea(n,a),minDefined:Xs(e),maxDefined:Xs(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:r}=this.getUserBounds(),o;if(a&&r)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let d=0,m=c.length;d<m;++d)o=c[d].controller.getMinMax(this,e),a||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=a&&n>s?n:s,{min:Ea(n,Ea(s,n)),max:Ea(s,Ea(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$n(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:r,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kB(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?mN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=z8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$n(this.options.afterUpdate,[this])}beforeSetDimensions(){$n(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$n(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),$n(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$n(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,r;for(s=0,a=e.length;s<a;s++)r=e[s],r.label=$n(n.callback,[r.value,s,e],this)}afterTickToLabelConversion(){$n(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$n(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=dN(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,r=n.maxRotation;let o=a,c,d,m;if(!this._isVisible()||!n.display||a>=r||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),p=u.widest.width,h=u.highest.height,g=ls(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/s:g/(s-1),p+6>c&&(c=g/(s-(e.offset?.5:1)),d=this.maxHeight-Sd(e.grid)-n.padding-uN(e.title,this.chart.options.font),m=Math.sqrt(p*p+h*h),o=Z$(Math.min(Math.asin(ls((u.highest.height+6)/c,-1,1)),Math.asin(ls(d/m,-1,1))-Math.asin(ls(h/m,-1,1)))),o=Math.max(a,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){$n(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$n(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:r}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=uN(a,n.options.font);if(c?(e.width=this.maxWidth,e.height=Sd(r)+d):(e.height=this.maxHeight,e.width=Sd(r)+d),s.display&&this.ticks.length){const{first:m,last:u,widest:p,highest:h}=this._getLabelSizes(),g=s.padding*2,v=fr(this.labelRotation),x=Math.cos(v),y=Math.sin(v);if(c){const b=s.mirror?0:y*p.width+x*h.height;e.height=Math.min(this.maxHeight,e.height+b+g)}else{const b=s.mirror?0:x*p.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+b+g)}this._calculatePadding(m,u,y,x)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:r,padding:o},position:c}=this.options,d=this.labelRotation!==0,m=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,g=0;d?m?(h=a*e.width,g=s*n.height):(h=s*e.height,g=a*n.width):r==="start"?g=n.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,g=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let u=n.height/2,p=e.height/2;r==="start"?(u=0,p=e.height):r==="end"&&(u=n.height,p=0),this.paddingTop=u+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$n(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)_n(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=mN(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:r}=this,o=[],c=[],d=Math.floor(n/dN(n,s));let m=0,u=0,p,h,g,v,x,y,b,w,k,_,j;for(p=0;p<n;p+=d){if(v=e[p].label,x=this._resolveTickFontOptions(p),a.font=y=x.string,b=r[y]=r[y]||{data:{},gc:[]},w=x.lineHeight,k=_=0,!_n(v)&&!ui(v))k=q0(a,b.data,b.gc,k,v),_=w;else if(ui(v))for(h=0,g=v.length;h<g;++h)j=v[h],!_n(j)&&!ui(j)&&(k=q0(a,b.data,b.gc,k,j),_+=w);o.push(k),c.push(_),m=Math.max(k,m),u=Math.max(_,u)}Z8(r,n);const T=o.indexOf(m),N=c.indexOf(u),E=A=>({width:o[A]||0,height:c[A]||0});return{first:E(0),last:E(n-1),widest:E(T),highest:E(N),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return J$(this._alignToPixels?Ll(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=J8(this.getContext(),e,s))}return this.$context||(this.$context=X8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=fr(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,c=r?r.widest.width+o:0,d=r?r.highest.height+o:0;return this.isHorizontal()?d*s>c*a?c/s:d/a:d*a<c*s?d/s:c/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:r,position:o,border:c}=a,d=r.offset,m=this.isHorizontal(),p=this.ticks.length+(d?1:0),h=Sd(r),g=[],v=c.setContext(this.getContext()),x=v.display?v.width:0,y=x/2,b=function(q){return Ll(s,q,x)};let w,k,_,j,T,N,E,A,L,C,P,R;if(o==="top")w=b(this.bottom),N=this.bottom-h,A=w-y,C=b(e.top)+y,R=e.bottom;else if(o==="bottom")w=b(this.top),C=e.top,R=b(e.bottom)-y,N=w+y,A=this.top+h;else if(o==="left")w=b(this.right),T=this.right-h,E=w-y,L=b(e.left)+y,P=e.right;else if(o==="right")w=b(this.left),L=e.left,P=b(e.right)-y,T=w+y,E=this.left+h;else if(n==="x"){if(o==="center")w=b((e.top+e.bottom)/2+.5);else if(rn(o)){const q=Object.keys(o)[0],U=o[q];w=b(this.chart.scales[q].getPixelForValue(U))}C=e.top,R=e.bottom,N=w+y,A=N+h}else if(n==="y"){if(o==="center")w=b((e.left+e.right)/2);else if(rn(o)){const q=Object.keys(o)[0],U=o[q];w=b(this.chart.scales[q].getPixelForValue(U))}T=w-y,E=T-h,L=e.left,P=e.right}const M=an(a.ticks.maxTicksLimit,p),O=Math.max(1,Math.ceil(p/M));for(k=0;k<p;k+=O){const q=this.getContext(k),U=r.setContext(q),H=c.setContext(q),ae=U.lineWidth,V=U.color,pe=H.dash||[],oe=H.dashOffset,ne=U.tickWidth,se=U.tickColor,W=U.tickBorderDash||[],ge=U.tickBorderDashOffset;_=Q8(this,k,d),_!==void 0&&(j=Ll(s,_,ae),m?T=E=L=P=j:N=A=C=R=j,g.push({tx1:T,ty1:N,tx2:E,ty2:A,x1:L,y1:C,x2:P,y2:R,width:ae,color:V,borderDash:pe,borderDashOffset:oe,tickWidth:ne,tickColor:se,tickBorderDash:W,tickBorderDashOffset:ge}))}return this._ticksLength=p,this._borderValue=w,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:r}=s,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:m,padding:u,mirror:p}=r,h=Sd(s.grid),g=h+u,v=p?-u:g,x=-fr(this.labelRotation),y=[];let b,w,k,_,j,T,N,E,A,L,C,P,R="middle";if(a==="top")T=this.bottom-v,N=this._getXAxisLabelAlignment();else if(a==="bottom")T=this.top+v,N=this._getXAxisLabelAlignment();else if(a==="left"){const O=this._getYAxisLabelAlignment(h);N=O.textAlign,j=O.x}else if(a==="right"){const O=this._getYAxisLabelAlignment(h);N=O.textAlign,j=O.x}else if(n==="x"){if(a==="center")T=(e.top+e.bottom)/2+g;else if(rn(a)){const O=Object.keys(a)[0],q=a[O];T=this.chart.scales[O].getPixelForValue(q)+g}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")j=(e.left+e.right)/2-g;else if(rn(a)){const O=Object.keys(a)[0],q=a[O];j=this.chart.scales[O].getPixelForValue(q)}N=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(d==="start"?R="top":d==="end"&&(R="bottom"));const M=this._getLabelSizes();for(b=0,w=c.length;b<w;++b){k=c[b],_=k.label;const O=r.setContext(this.getContext(b));E=this.getPixelForTick(b)+r.labelOffset,A=this._resolveTickFontOptions(b),L=A.lineHeight,C=ui(_)?_.length:1;const q=C/2,U=O.color,H=O.textStrokeColor,ae=O.textStrokeWidth;let V=N;o?(j=E,N==="inner"&&(b===w-1?V=this.options.reverse?"left":"right":b===0?V=this.options.reverse?"right":"left":V="center"),a==="top"?m==="near"||x!==0?P=-C*L+L/2:m==="center"?P=-M.highest.height/2-q*L+L:P=-M.highest.height+L/2:m==="near"||x!==0?P=L/2:m==="center"?P=M.highest.height/2-q*L:P=M.highest.height-C*L,p&&(P*=-1),x!==0&&!O.showLabelBackdrop&&(j+=L/2*Math.sin(x))):(T=E,P=(1-C)*L/2);let pe;if(O.showLabelBackdrop){const oe=Js(O.backdropPadding),ne=M.heights[b],se=M.widths[b];let W=P-oe.top,ge=0-oe.left;switch(R){case"middle":W-=ne/2;break;case"bottom":W-=ne;break}switch(N){case"center":ge-=se/2;break;case"right":ge-=se;break;case"inner":b===w-1?ge-=se:b>0&&(ge-=se/2);break}pe={left:ge,top:W,width:se+oe.width,height:ne+oe.height,color:O.backdropColor}}y.push({label:_,font:A,textOffset:P,options:{rotation:x,color:U,strokeColor:H,strokeWidth:ae,textAlign:V,textBaseline:R,translation:[j,T],backdrop:pe}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-fr(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:r}}=this.options,o=this._getLabelSizes(),c=e+r,d=o.widest.width;let m,u;return n==="left"?a?(u=this.right+r,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u+=d)):(u=this.right-c,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u=this.left)):n==="right"?a?(u=this.left+r,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u-=d)):(u=this.left+c,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u=this.right)):m="right",{textAlign:m,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(r=>r.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const c=(d,m,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=a.length;r<o;++r){const d=a[r];n.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,u,p,h;this.isHorizontal()?(m=Ll(e,this.left,o)-o/2,u=Ll(e,this.right,c)+c/2,p=h=d):(p=Ll(e,this.top,o)-o/2,h=Ll(e,this.bottom,c)+c/2,m=u=d),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(m,p),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&sw(s,a);const r=this.getLabelItems(e);for(const o of r){const c=o.options,d=o.font,m=o.label,u=o.textOffset;jm(s,m,0,u,d,c)}a&&aw(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const r=Li(s.font),o=Js(s.padding),c=s.align;let d=r.lineHeight/2;n==="bottom"||n==="center"||rn(n)?(d+=o.bottom,ui(s.text)&&(d+=r.lineHeight*(s.text.length-1))):d+=o.top;const{titleX:m,titleY:u,maxWidth:p,rotation:h}=t9(this,d,n,c);jm(e,s.text,0,0,r,{color:s.color,maxWidth:p,rotation:h,textAlign:e9(c,n,a),textBaseline:"middle",translation:[m,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=an(e.grid&&e.grid.z,-1),a=an(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==td.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let r,o;for(r=0,o=n.length;r<o;++r){const c=n[r];c[s]===this.id&&(!e||c.type===e)&&a.push(c)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Li(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;s9(n)&&(s=this.register(n));const a=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in a||(a[r]=e,n9(e,o,s),this.override&&si.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in si[a]&&(delete si[a][s],this.override&&delete co[s])}}function n9(t,e,n){const s=wm(Object.create(null),[n?si.get(n):{},si.get(e),t.defaults]);si.set(e,s),t.defaultRoutes&&i9(e,t.defaultRoutes),t.descriptors&&si.describe(e,t.descriptors)}function i9(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),r=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),d=o.join(".");si.route(r,a,d,c)})}function s9(t){return"id"in t&&"defaults"in t}let a9=class{constructor(){this.controllers=new Zu(uw,"datasets",!0),this.elements=new Zu(_o,"elements"),this.plugins=new Zu(Object,"plugins"),this.scales=new Zu(td,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const r=s||this._getRegistryForType(a);s||r.isForType(a)||r===this.plugins&&a.id?this._exec(e,r,a):kn(a,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const a=ew(e);$n(s["before"+a],[],s),n[e](s),$n(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}};var Da=new a9;class r9{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(r,e,n,s);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,a){a=a||{};for(const r of e){const o=r.plugin,c=o[s],d=[n,a,r.options];if($n(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){_n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=an(s.options&&s.options.plugins,{}),r=l9(s);return a===!1&&!n?[]:c9(e,r,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(r,o)=>r.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function l9(t){const e={},n=[],s=Object.keys(Da.plugins.items);for(let r=0;r<s.length;r++)n.push(Da.getPlugin(s[r]));const a=t.plugins||[];for(let r=0;r<a.length;r++){const o=a[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function o9(t,e){return!e&&t===!1?null:t===!0?{}:t}function c9(t,{plugins:e,localIds:n},s,a){const r=[],o=t.getContext();for(const c of e){const d=c.id,m=o9(s[d],a);m!==null&&r.push({plugin:c,options:d9(t.config,{plugin:c,local:n[d]},m,o)})}return r}function d9(t,{plugin:e,local:n},s,a){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zx(t,e){const n=si.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function m9(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function u9(t,e){return t===e?"_index_":"_value_"}function hN(t){if(t==="x"||t==="y"||t==="r")return t}function h9(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Xx(t,...e){if(hN(t))return t;for(const n of e){const s=n.axis||h9(n.position)||t.length>1&&hN(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function pN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function p9(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return pN(t,"x",n[0])||pN(t,"y",n[0])}return{}}function g9(t,e){const n=co[t.type]||{scales:{}},s=e.scales||{},a=Zx(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!rn(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Xx(o,c,p9(o,t),si.scales[c.type]),m=u9(d,a),u=n.scales||{};r[o]=em(Object.create(null),[{axis:d},c,u[d],u[m]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,d=o.indexAxis||Zx(c,e),u=(co[c]||{}).scales||{};Object.keys(u).forEach(p=>{const h=m9(p,d),g=o[h+"AxisID"]||h;r[g]=r[g]||Object.create(null),em(r[g],[{axis:h},s[g],u[p]])})}),Object.keys(r).forEach(o=>{const c=r[o];em(c,[si.scales[c.type],si.scale])}),r}function hT(t){const e=t.options||(t.options={});e.plugins=an(e.plugins,{}),e.scales=g9(t,e)}function pT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function f9(t){return t=t||{},t.data=pT(t.data),hT(t),t}const gN=new Map,gT=new Set;function Xu(t,e){let n=gN.get(t);return n||(n=e(),gN.set(t,n),gT.add(n)),n}const _d=(t,e,n)=>{const s=oo(e,n);s!==void 0&&t.add(s)};class v9{constructor(e){this._config=f9(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),hT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Xu(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:r}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const d=new Set;n.forEach(u=>{e&&(d.add(e),u.forEach(p=>_d(d,e,p))),u.forEach(p=>_d(d,a,p)),u.forEach(p=>_d(d,co[r]||{},p)),u.forEach(p=>_d(d,si,p)),u.forEach(p=>_d(d,Qx,p))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),gT.has(n)&&o.set(n,m),m}chartOptionScopes(){const{options:e,type:n}=this;return[e,co[n]||{},si.datasets[n]||{},{type:n},si,Qx]}resolveNamedOptions(e,n,s,a=[""]){const r={$shared:!0},{resolver:o,subPrefixes:c}=fN(this._resolverCache,e,a);let d=o;if(y9(o,n)){r.$shared=!1,s=vl(s)?s():s;const m=this.createResolver(e,s,c);d=Fc(o,s,m)}for(const m of n)r[m]=d[m];return r}createResolver(e,n,s=[""],a){const{resolver:r}=fN(this._resolverCache,e,s);return rn(n)?Fc(r,n,void 0,a):r}}function fN(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let r=s.get(a);return r||(r={resolver:lw(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(a,r)),r}const x9=t=>rn(t)&&Object.getOwnPropertyNames(t).some(e=>vl(t[e]));function y9(t,e){const{isScriptable:n,isIndexable:s}=J2(t);for(const a of e){const r=n(a),o=s(a),c=(o||r)&&t[a];if(r&&(vl(c)||x9(c))||o&&ui(c))return!0}return!1}var b9="4.5.1";const w9=["top","bottom","left","right","chartArea"];function vN(t,e){return t==="top"||t==="bottom"||w9.indexOf(t)===-1&&e==="x"}function xN(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function yN(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),$n(n&&n.onComplete,[t],e)}function k9(t){const e=t.chart,n=e.options.animation;$n(n&&n.onProgress,[t],e)}function fT(t){return dw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ih={},bN=t=>{const e=fT(t);return Object.values(Ih).filter(n=>n.canvas===e).pop()};function j9(t,e,n){const s=Object.keys(t);for(const a of s){const r=+a;if(r>=e){const o=t[a];delete t[a],(n>0||r>e)&&(t[r+n]=o)}}}function N9(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let Qm=class{static defaults=si;static instances=Ih;static overrides=co;static registry=Da;static version=b9;static getChart=bN;static register(...e){Da.add(...e),wN()}static unregister(...e){Da.remove(...e),wN()}constructor(e,n){const s=this.config=new v9(n),a=fT(e),r=bN(a);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||H8(a)),this.platform.updateConfig(s);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,m=d&&d.height,u=d&&d.width;if(this.id=$$(),this.ctx=c,this.canvas=d,this.width=u,this.height=m,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new r9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iB(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Ih[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}mr.listen(this,"complete",yN),mr.listen(this,"progress",k9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:r}=this;return _n(e)?n&&r?r:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Da}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H0(this.canvas,this.ctx),this}stop(){return mr.stop(this),this}resize(e,n){mr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,n,r),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,W0(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),$n(s.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};kn(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const c=n[o],d=Xx(o,c),m=d==="r",u=d==="x";return{options:c,dposition:m?"chartArea":u?"bottom":"left",dtype:m?"radialLinear":u?"category":"linear"}}))),kn(r,o=>{const c=o.options,d=c.id,m=Xx(d,c),u=an(c.type,o.dtype);(c.position===void 0||vN(c.position,m)!==vN(o.dposition))&&(c.position=o.dposition),a[d]=!0;let p=null;if(d in s&&s[d].type===u)p=s[d];else{const h=Da.getScale(u);p=new h({id:d,type:u,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(c,e)}),kn(a,(o,c)=>{o||delete s[c]}),kn(s,o=>{Vs.configure(this,o,o.options),Vs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,r)=>a.index-r.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(xN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const r=n[s];let o=this.getDatasetMeta(s);const c=r.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=r.indexAxis||Zx(c,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const d=Da.getController(c),{datasetElementType:m,dataElementType:u}=si.datasets[c];Object.assign(d,{dataElementType:Da.getElement(u),datasetElementType:m&&Da.getElement(m)}),o.controller=new d(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){kn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let m=0,u=this.data.datasets.length;m<u;m++){const{controller:p}=this.getDatasetMeta(m),h=!a&&r.indexOf(p)===-1;p.buildOrUpdateElements(h),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),a||kn(r,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xN("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){kn(this.scales,e=>{Vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!R0(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:r}of n){const o=s==="_removeElements"?-r:r;j9(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,c)=>c+","+o.splice(1).join(","))),a=s(0);for(let r=1;r<n;r++)if(!R0(a,s(r)))return;return Array.from(a).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],kn(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,r)=>{a._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,vl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mr.has(this)?this.attached&&!mr.running(this)&&mr.start(this):(this.draw(),yN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,r;for(a=0,r=n.length;a<r;++a){const o=n[a];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=HB(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&sw(n,a),e.controller.draw(),a&&aw(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Z2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const r=w8.modes[n];return typeof r=="function"?r(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(r=>r&&r._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=ed(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,a);km(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(c=>c.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),mr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ih[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},a=(r,o,c)=>{r.offsetX=o,r.offsetY=c,this._eventHandler(r)};kn(this.options.events,r=>s(r,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(d,m)=>{n.addEventListener(this,d,m),e[d]=m},a=(d,m)=>{e[d]&&(n.removeEventListener(this,d,m),delete e[d])},r=(d,m)=>{this.canvas&&this.resize(d,m)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){kn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},kn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let r,o,c,d;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const m=o&&this.getDatasetMeta(o.datasetIndex).controller;m&&m[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[o],index:o}});!pp(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,r=(d,m)=>d.filter(u=>!m.some(p=>u.datasetIndex===p.datasetIndex&&u.index===p.index)),o=r(n,e),c=s?e:r(e,n);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const r=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(r||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:r}=this,o=n,c=this._getActiveElements(e,a,s,o),d=U$(e),m=N9(e,this._lastEvent,s,d);s&&(this._lastEvent=null,$n(r.onHover,[e,c,this],this),d&&$n(r.onClick,[e,c,this],this));const u=!pp(c,a);return(u||n)&&(this._active=c,this._updateHoverStyles(c,a,n)),this._lastEvent=m,u}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,a)}};function wN(){return kn(Qm.instances,t=>t._plugins.invalidate())}function C9(t,e,n){const{startAngle:s,x:a,y:r,outerRadius:o,innerRadius:c,options:d}=e,{borderWidth:m,borderJoinStyle:u}=d,p=Math.min(m/o,Ra(s-n));if(t.beginPath(),t.arc(a,r,o-m/2,s+p/2,n-p/2),c>0){const h=Math.min(m/c,Ra(s-n));t.arc(a,r,c+m/2,n-h/2,s+h/2,!0)}else{const h=Math.min(m/2,o*Ra(s-n));if(u==="round")t.arc(a,r,h,n-Sn/2,s+Sn/2,!0);else if(u==="bevel"){const g=2*h*h,v=-g*Math.cos(n+Sn/2)+a,x=-g*Math.sin(n+Sn/2)+r,y=g*Math.cos(s+Sn/2)+a,b=g*Math.sin(s+Sn/2)+r;t.lineTo(v,x),t.lineTo(y,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function S9(t,e,n){const{startAngle:s,pixelMargin:a,x:r,y:o,outerRadius:c,innerRadius:d}=e;let m=a/c;t.beginPath(),t.arc(r,o,c,s-m,n+m),d>a?(m=a/d,t.arc(r,o,d,n+m,s-m,!0)):t.arc(r,o,a,n+hi,s-hi),t.closePath(),t.clip()}function _9(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function E9(t,e,n,s){const a=_9(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,s*e/2),c=d=>{const m=(n-Math.min(r,d))*s/2;return ls(d,0,Math.min(r,m))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:ls(a.innerStart,0,o),innerEnd:ls(a.innerEnd,0,o)}}function Zo(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function kp(t,e,n,s,a,r){const{x:o,y:c,startAngle:d,pixelMargin:m,innerRadius:u}=e,p=Math.max(e.outerRadius+s+n-m,0),h=u>0?u+s+n+m:0;let g=0;const v=a-d;if(s){const O=u>0?u-s:0,q=p>0?p-s:0,U=(O+q)/2,H=U!==0?v*U/(U+s):v;g=(v-H)/2}const x=Math.max(.001,v*p-n/Sn)/p,y=(v-x)/2,b=d+y+g,w=a-y-g,{outerStart:k,outerEnd:_,innerStart:j,innerEnd:T}=E9(e,h,p,w-b),N=p-k,E=p-_,A=b+k/N,L=w-_/E,C=h+j,P=h+T,R=b+j/C,M=w-T/P;if(t.beginPath(),r){const O=(A+L)/2;if(t.arc(o,c,p,A,O),t.arc(o,c,p,O,L),_>0){const ae=Zo(E,L,o,c);t.arc(ae.x,ae.y,_,L,w+hi)}const q=Zo(P,w,o,c);if(t.lineTo(q.x,q.y),T>0){const ae=Zo(P,M,o,c);t.arc(ae.x,ae.y,T,w+hi,M+Math.PI)}const U=(w-T/h+(b+j/h))/2;if(t.arc(o,c,h,w-T/h,U,!0),t.arc(o,c,h,U,b+j/h,!0),j>0){const ae=Zo(C,R,o,c);t.arc(ae.x,ae.y,j,R+Math.PI,b-hi)}const H=Zo(N,b,o,c);if(t.lineTo(H.x,H.y),k>0){const ae=Zo(N,A,o,c);t.arc(ae.x,ae.y,k,b-hi,A)}}else{t.moveTo(o,c);const O=Math.cos(A)*p+o,q=Math.sin(A)*p+c;t.lineTo(O,q);const U=Math.cos(L)*p+o,H=Math.sin(L)*p+c;t.lineTo(U,H)}t.closePath()}function T9(t,e,n,s,a){const{fullCircles:r,startAngle:o,circumference:c}=e;let d=e.endAngle;if(r){kp(t,e,n,s,d,a);for(let m=0;m<r;++m)t.fill();isNaN(c)||(d=o+(c%oi||oi))}return kp(t,e,n,s,d,a),t.fill(),d}function A9(t,e,n,s,a){const{fullCircles:r,startAngle:o,circumference:c,options:d}=e,{borderWidth:m,borderJoinStyle:u,borderDash:p,borderDashOffset:h,borderRadius:g}=d,v=d.borderAlign==="inner";if(!m)return;t.setLineDash(p||[]),t.lineDashOffset=h,v?(t.lineWidth=m*2,t.lineJoin=u||"round"):(t.lineWidth=m,t.lineJoin=u||"bevel");let x=e.endAngle;if(r){kp(t,e,n,s,x,a);for(let y=0;y<r;++y)t.stroke();isNaN(c)||(x=o+(c%oi||oi))}v&&S9(t,e,x),d.selfJoin&&x-o>=Sn&&g===0&&u!=="miter"&&C9(t,e,x),r||(kp(t,e,n,s,x,a),t.stroke())}class vT extends _o{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:r,distance:o}=z2(a,{x:e,y:n}),{startAngle:c,endAngle:d,innerRadius:m,outerRadius:u,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,g=an(p,d-c),v=xp(r,c,d)&&c!==d,x=g>=oi||v,y=Kl(o,m+h,u+h);return x&&y}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:r,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:m}=this.options,u=(a+r)/2,p=(o+c+m+d)/2;return{x:n+Math.cos(u)*p,y:s+Math.sin(u)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>oi?Math.floor(s/oi):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a);const d=1-Math.sin(Math.min(Sn,s||0)),m=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,T9(e,this,m,r,o),A9(e,this,m,r,o),e.restore()}}function xT(t,e){const{x:n,y:s,base:a,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let c,d,m,u,p;return t.horizontal?(p=o/2,c=Math.min(n,a),d=Math.max(n,a),m=s-p,u=s+p):(p=r/2,c=n-p,d=n+p,m=Math.min(s,a),u=Math.max(s,a)),{left:c,top:m,right:d,bottom:u}}function el(t,e,n,s){return t?0:ls(e,n,s)}function D9(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,r=X2(s);return{t:el(a.top,r.top,0,n),r:el(a.right,r.right,0,e),b:el(a.bottom,r.bottom,0,n),l:el(a.left,r.left,0,e)}}function R9(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,r=xc(a),o=Math.min(e,n),c=t.borderSkipped,d=s||rn(a);return{topLeft:el(!d||c.top||c.left,r.topLeft,0,o),topRight:el(!d||c.top||c.right,r.topRight,0,o),bottomLeft:el(!d||c.bottom||c.left,r.bottomLeft,0,o),bottomRight:el(!d||c.bottom||c.right,r.bottomRight,0,o)}}function P9(t){const e=xT(t),n=e.right-e.left,s=e.bottom-e.top,a=D9(t,n/2,s/2),r=R9(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:r},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function bv(t,e,n,s){const a=e===null,r=n===null,c=t&&!(a&&r)&&xT(t,s);return c&&(a||Kl(e,c.left,c.right))&&(r||Kl(n,c.top,c.bottom))}function M9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function I9(t,e){t.rect(e.x,e.y,e.w,e.h)}function wv(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+r,h:t.h+o,radius:t.radius}}class O9 extends _o{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:r,outer:o}=P9(this),c=M9(o.radius)?yp:I9;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),c(e,wv(o,n,r)),e.clip(),c(e,wv(r,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,wv(r,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return bv(this,e,n,s)}inXRange(e,n){return bv(this,e,null,n)}inYRange(e,n){return bv(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+a)/2:n,y:r?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const kN=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},L9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jN extends _o{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=$n(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Li(s.font),r=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=kN(s,r);let m,u;n.font=a.string,this.isHorizontal()?(m=this.maxWidth,u=this._fitRows(o,r,c,d)+10):(u=this.maxHeight,m=this._fitCols(o,a,c,d)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:r,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],u=a+c;let p=e;r.textAlign="left",r.textBaseline="middle";let h=-1,g=-u;return this.legendItems.forEach((v,x)=>{const y=s+n/2+r.measureText(v.text).width;(x===0||m[m.length-1]+y+2*c>o)&&(p+=u,m[m.length-(x>0?0:1)]=0,g+=u,h++),d[x]={left:0,top:g,row:h,width:y,height:a},m[m.length-1]+=y+c}),p}_fitCols(e,n,s,a){const{ctx:r,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],u=o-e;let p=c,h=0,g=0,v=0,x=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:w,itemHeight:k}=F9(s,n,r,y,a);b>0&&g+k+2*c>u&&(p+=h+c,m.push({width:h,height:g}),v+=h+c,x++,h=g=0),d[b]={left:v,top:g,col:x,width:w,height:k},h=Math.max(h,w),g+=k+c}),p+=h,m.push({width:h,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:r}}=this,o=yc(r,this.left,this.width);if(this.isHorizontal()){let c=0,d=Di(s,this.left+a,this.right-this.lineWidths[c]);for(const m of n)c!==m.row&&(c=m.row,d=Di(s,this.left+a,this.right-this.lineWidths[c])),m.top+=this.top+e+a,m.left=o.leftForLtr(o.x(d),m.width),d+=m.width+a}else{let c=0,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height);for(const m of n)m.col!==c&&(c=m.col,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height)),m.top=d,m.left+=this.left+a,m.left=o.leftForLtr(o.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sw(e,this),this._draw(),aw(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:r,labels:o}=e,c=si.color,d=yc(e.rtl,this.left,this.width),m=Li(o.font),{padding:u}=o,p=m.size,h=p/2;let g;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:v,boxHeight:x,itemHeight:y}=kN(o,p),b=function(T,N,E){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;a.save();const A=an(E.lineWidth,1);if(a.fillStyle=an(E.fillStyle,c),a.lineCap=an(E.lineCap,"butt"),a.lineDashOffset=an(E.lineDashOffset,0),a.lineJoin=an(E.lineJoin,"miter"),a.lineWidth=A,a.strokeStyle=an(E.strokeStyle,c),a.setLineDash(an(E.lineDash,[])),o.usePointStyle){const L={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:A},C=d.xPlus(T,v/2),P=N+h;Q2(a,L,C,P,o.pointStyleWidth&&v)}else{const L=N+Math.max((p-x)/2,0),C=d.leftForLtr(T,v),P=xc(E.borderRadius);a.beginPath(),Object.values(P).some(R=>R!==0)?yp(a,{x:C,y:L,w:v,h:x,radius:P}):a.rect(C,L,v,x),a.fill(),A!==0&&a.stroke()}a.restore()},w=function(T,N,E){jm(a,E.text,T,N+y/2,m,{strikethrough:E.hidden,textAlign:d.textAlign(E.textAlign)})},k=this.isHorizontal(),_=this._computeTitleHeight();k?g={x:Di(r,this.left+u,this.right-s[0]),y:this.top+u+_,line:0}:g={x:this.left+u,y:Di(r,this.top+_+u,this.bottom-n[0].height),line:0},iT(this.ctx,e.textDirection);const j=y+u;this.legendItems.forEach((T,N)=>{a.strokeStyle=T.fontColor,a.fillStyle=T.fontColor;const E=a.measureText(T.text).width,A=d.textAlign(T.textAlign||(T.textAlign=o.textAlign)),L=v+h+E;let C=g.x,P=g.y;d.setWidth(this.width),k?N>0&&C+L+u>this.right&&(P=g.y+=j,g.line++,C=g.x=Di(r,this.left+u,this.right-s[g.line])):N>0&&P+j>this.bottom&&(C=g.x=C+n[g.line].width+u,g.line++,P=g.y=Di(r,this.top+_+u,this.bottom-n[g.line].height));const R=d.x(C);if(b(R,P,T),C=sB(A,C+v+h,k?C+L:this.right,e.rtl),w(d.x(C),P,T),k)g.x+=L+u;else if(typeof T.text!="string"){const M=m.lineHeight;g.y+=yT(T,M)+u}else g.y+=j}),sT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Li(n.font),a=Js(n.padding);if(!n.display)return;const r=yc(e.rtl,this.left,this.width),o=this.ctx,c=n.position,d=s.size/2,m=a.top+d;let u,p=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+m,p=Di(e.align,p,this.right-h);else{const v=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);u=m+Di(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=Di(c,p,p+h);o.textAlign=r.textAlign(nw(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,jm(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=Li(e.font),s=Js(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,r;if(Kl(e,this.left,this.right)&&Kl(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(a=r[s],Kl(e,a.left,a.left+a.width)&&Kl(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!q9(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,r=L9(a,s);a&&!r&&$n(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!r&&$n(n.onHover,[e,s,this],this)}else s&&$n(n.onClick,[e,s,this],this)}}function F9(t,e,n,s,a){const r=$9(s,t,e,n),o=B9(a,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function $9(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+s.measureText(a).width}function B9(t,e,n){let s=t;return typeof e.text!="string"&&(s=yT(e,n)),s}function yT(t,e){const n=t.text?t.text.length:0;return e*n}function q9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var bT={id:"legend",_element:jN,start(t,e,n){const s=t.legend=new jN({ctx:t.ctx,options:n,chart:t});Vs.configure(t,s,n),Vs.addBox(t,s)},stop(t){Vs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Vs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:r,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(n?0:void 0),u=Js(m.borderWidth);return{text:e[d.index].label,fillStyle:m.backgroundColor,fontColor:r,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:o&&(c||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class wT extends _o{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=ui(s.text)?s.text.length:1;this._padding=Js(s.padding);const r=a*Li(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:r,options:o}=this,c=o.align;let d=0,m,u,p;return this.isHorizontal()?(u=Di(c,s,r),p=n+e,m=r-s):(o.position==="left"?(u=s+e,p=Di(c,a,n),d=Sn*-.5):(u=r-e,p=Di(c,n,a),d=Sn*.5),m=a-n),{titleX:u,titleY:p,maxWidth:m,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Li(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:m}=this._drawArgs(r);jm(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:m,textAlign:nw(n.align),textBaseline:"middle",translation:[o,c]})}}function H9(t,e){const n=new wT({ctx:t.ctx,options:e,chart:t});Vs.configure(t,n,e),Vs.addBox(t,n),t.titleBlock=n}var z9={id:"title",_element:wT,start(t,e,n){H9(t,n)},stop(t){const e=t.titleBlock;Vs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Vs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,r=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const d=c.tooltipPosition();s.add(d.x),a+=d.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((c,d)=>c+d)/s.size,y:a/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,r,o,c;for(r=0,o=t.length;r<o;++r){const d=t[r].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),u=X$(e,m);u<a&&(a=u,c=d)}}if(c){const d=c.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function Aa(t,e){return e&&(ui(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ur(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function V9(t,e){const{element:n,datasetIndex:s,index:a}=e,r=t.getDatasetMeta(s).controller,{label:o,value:c}=r.getLabelAndValue(a);return{chart:t,label:o,parsed:r.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:c,dataset:r.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function NN(t,e){const n=t.chart.ctx,{body:s,footer:a,title:r}=t,{boxWidth:o,boxHeight:c}=e,d=Li(e.bodyFont),m=Li(e.titleFont),u=Li(e.footerFont),p=r.length,h=a.length,g=s.length,v=Js(e.padding);let x=v.height,y=0,b=s.reduce((_,j)=>_+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,p&&(x+=p*m.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),b){const _=e.displayColors?Math.max(c,d.lineHeight):d.lineHeight;x+=g*_+(b-g)*d.lineHeight+(b-1)*e.bodySpacing}h&&(x+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let w=0;const k=function(_){y=Math.max(y,n.measureText(_).width+w)};return n.save(),n.font=m.string,kn(t.title,k),n.font=d.string,kn(t.beforeBody.concat(t.afterBody),k),w=e.displayColors?o+2+e.boxPadding:0,kn(s,_=>{kn(_.before,k),kn(_.lines,k),kn(_.after,k)}),w=0,n.font=u.string,kn(t.footer,k),n.restore(),y+=v.width,{width:y,height:x}}function U9(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function W9(t,e,n,s){const{x:a,width:r}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&a+r+o>e.width||t==="right"&&a-r-o<0)return!0}function K9(t,e,n,s){const{x:a,width:r}=n,{width:o,chartArea:{left:c,right:d}}=t;let m="center";return s==="center"?m=a<=(c+d)/2?"left":"right":a<=r/2?m="left":a>=o-r/2&&(m="right"),W9(m,t,e,n)&&(m="center"),m}function CN(t,e,n){const s=n.yAlign||e.yAlign||U9(t,n);return{xAlign:n.xAlign||e.xAlign||K9(t,e,n,s),yAlign:s}}function G9(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Y9(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function SN(t,e,n,s){const{caretSize:a,caretPadding:r,cornerRadius:o}=t,{xAlign:c,yAlign:d}=n,m=a+r,{topLeft:u,topRight:p,bottomLeft:h,bottomRight:g}=xc(o);let v=G9(e,c);const x=Y9(e,d,m);return d==="center"?c==="left"?v+=m:c==="right"&&(v-=m):c==="left"?v-=Math.max(u,h)+a:c==="right"&&(v+=Math.max(p,g)+a),{x:ls(v,0,s.width-e.width),y:ls(x,0,s.height-e.height)}}function Ju(t,e,n){const s=Js(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function _N(t){return Aa([],ur(t))}function Q9(t,e,n){return ed(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function EN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const kT={beforeTitle:cr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:cr,beforeBody:cr,beforeLabel:cr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _n(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:cr,afterBody:cr,beforeFooter:cr,footer:cr,afterFooter:cr};function is(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?kT[e].call(n,s):a}let TN=class extends _o{static positioners=Hd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,r=new aT(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Q9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=is(s,"beforeTitle",this,e),r=is(s,"title",this,e),o=is(s,"afterTitle",this,e);let c=[];return c=Aa(c,ur(a)),c=Aa(c,ur(r)),c=Aa(c,ur(o)),c}getBeforeBody(e,n){return _N(is(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return kn(e,r=>{const o={before:[],lines:[],after:[]},c=EN(s,r);Aa(o.before,ur(is(c,"beforeLabel",this,r))),Aa(o.lines,is(c,"label",this,r)),Aa(o.after,ur(is(c,"afterLabel",this,r))),a.push(o)}),a}getAfterBody(e,n){return _N(is(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=is(s,"beforeFooter",this,e),r=is(s,"footer",this,e),o=is(s,"afterFooter",this,e);let c=[];return c=Aa(c,ur(a)),c=Aa(c,ur(r)),c=Aa(c,ur(o)),c}_createItems(e){const n=this._active,s=this.chart.data,a=[],r=[],o=[];let c=[],d,m;for(d=0,m=n.length;d<m;++d)c.push(V9(this.chart,n[d]));return e.filter&&(c=c.filter((u,p,h)=>e.filter(u,p,h,s))),e.itemSort&&(c=c.sort((u,p)=>e.itemSort(u,p,s))),kn(c,u=>{const p=EN(e.callbacks,u);a.push(is(p,"labelColor",this,u)),r.push(is(p,"labelPointStyle",this,u)),o.push(is(p,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let r,o=[];if(!a.length)this.opacity!==0&&(r={opacity:0});else{const c=Hd[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const d=this._size=NN(this,s),m=Object.assign({},c,d),u=CN(this.chart,s,m),p=SN(s,m,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const r=this.getCaretPosition(e,s,a);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:r}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:d,topRight:m,bottomLeft:u,bottomRight:p}=xc(c),{x:h,y:g}=e,{width:v,height:x}=n;let y,b,w,k,_,j;return r==="center"?(_=g+x/2,a==="left"?(y=h,b=y-o,k=_+o,j=_-o):(y=h+v,b=y+o,k=_-o,j=_+o),w=y):(a==="left"?b=h+Math.max(d,u)+o:a==="right"?b=h+v-Math.max(m,p)-o:b=this.caretX,r==="top"?(k=g,_=k-o,y=b-o,w=b+o):(k=g+x,_=k+o,y=b+o,w=b-o),j=k),{x1:y,x2:b,x3:w,y1:k,y2:_,y3:j}}drawTitle(e,n,s){const a=this.title,r=a.length;let o,c,d;if(r){const m=yc(s.rtl,this.x,this.width);for(e.x=Ju(this,s.titleAlign,s),n.textAlign=m.textAlign(s.titleAlign),n.textBaseline="middle",o=Li(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,d=0;d<r;++d)n.fillText(a[d],m.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===r&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,a,r){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:d,boxWidth:m}=r,u=Li(r.bodyFont),p=Ju(this,"left",r),h=a.x(p),g=d<u.lineHeight?(u.lineHeight-d)/2:0,v=n.y+g;if(r.usePointStyle){const x={radius:Math.min(m,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(h,m)+m/2,b=v+d/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,z0(e,x,y,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,z0(e,x,y,b)}else{e.lineWidth=rn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=a.leftForLtr(h,m),y=a.leftForLtr(a.xPlus(h,1),m-2),b=xc(o.borderRadius);Object.values(b).some(w=>w!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,yp(e,{x,y:v,w:m,h:d,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),yp(e,{x:y,y:v+1,w:m-2,h:d-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,v,m,d),e.strokeRect(x,v,m,d),e.fillStyle=o.backgroundColor,e.fillRect(y,v+1,m-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:r,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:m,boxPadding:u}=s,p=Li(s.bodyFont);let h=p.lineHeight,g=0;const v=yc(s.rtl,this.x,this.width),x=function(E){n.fillText(E,v.x(e.x+g),e.y+h/2),e.y+=h+r},y=v.textAlign(o);let b,w,k,_,j,T,N;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Ju(this,y,s),n.fillStyle=s.bodyColor,kn(this.beforeBody,x),g=c&&y!=="right"?o==="center"?m/2+u:m+2+u:0,_=0,T=a.length;_<T;++_){for(b=a[_],w=this.labelTextColors[_],n.fillStyle=w,kn(b.before,x),k=b.lines,c&&k.length&&(this._drawColorBox(n,e,_,v,s),h=Math.max(p.lineHeight,d)),j=0,N=k.length;j<N;++j)x(k[j]),h=p.lineHeight;kn(b.after,x)}g=0,h=p.lineHeight,kn(this.afterBody,x),e.y-=r}drawFooter(e,n,s){const a=this.footer,r=a.length;let o,c;if(r){const d=yc(s.rtl,this.x,this.width);for(e.x=Ju(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",o=Li(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<r;++c)n.fillText(a[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:r,yAlign:o}=this,{x:c,y:d}=e,{width:m,height:u}=s,{topLeft:p,topRight:h,bottomLeft:g,bottomRight:v}=xc(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(c+p,d),o==="top"&&this.drawCaret(e,n,s,a),n.lineTo(c+m-h,d),n.quadraticCurveTo(c+m,d,c+m,d+h),o==="center"&&r==="right"&&this.drawCaret(e,n,s,a),n.lineTo(c+m,d+u-v),n.quadraticCurveTo(c+m,d+u,c+m-v,d+u),o==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(c+g,d+u),n.quadraticCurveTo(c,d+u,c,d+u-g),o==="center"&&r==="left"&&this.drawCaret(e,n,s,a),n.lineTo(c,d+p),n.quadraticCurveTo(c,d,c+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,r=s&&s.y;if(a||r){const o=Hd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=NN(this,e),d=Object.assign({},o,this._size),m=CN(n,e,d),u=SN(e,d,m,n);(a._to!==u.x||r._to!==u.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Js(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,a,n),iT(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),sT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:c,index:d})=>{const m=this.chart.getDatasetMeta(c);if(!m)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:m.data[d],index:d}}),r=!pp(s,a),o=this._positionChanged(a,n);(r||o)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,s),c=this._positionChanged(o,e),d=n||!pp(o,r)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,s,a){const r=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:a,options:r}=this,o=Hd[r.position].call(this,e,n);return o!==!1&&(s!==o.x||a!==o.y)}};var jT={id:"tooltip",_element:TN,positioners:Hd,afterInit(t,e,n){n&&(t.tooltip=new TN({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Z9=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function X9(t,e,n,s){const a=t.indexOf(e);if(a===-1)return Z9(t,e,n,s);const r=t.lastIndexOf(e);return a!==r?n:a}const J9=(t,e)=>t===null?null:ls(Math.round(t),0,e);function AN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eq extends td{static id="category";static defaults={ticks:{callback:AN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:r}of n)s[a]===r&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_n(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:X9(s,e,an(n,e),this._addedLabels),J9(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)a.push({value:o});return a}getLabelForValue(e){return AN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function tq(t,e){const n=[],{bounds:a,step:r,min:o,max:c,precision:d,count:m,maxTicks:u,maxDigits:p,includeBounds:h}=t,g=r||1,v=u-1,{min:x,max:y}=e,b=!_n(o),w=!_n(c),k=!_n(m),_=(y-x)/(p+1);let j=M0((y-x)/v/g)*g,T,N,E,A;if(j<1e-14&&!b&&!w)return[{value:x},{value:y}];A=Math.ceil(y/j)-Math.floor(x/j),A>v&&(j=M0(A*j/v/g)*g),_n(d)||(T=Math.pow(10,d),j=Math.ceil(j*T)/T),a==="ticks"?(N=Math.floor(x/j)*j,E=Math.ceil(y/j)*j):(N=x,E=y),b&&w&&r&&Y$((c-o)/r,j/1e3)?(A=Math.round(Math.min((c-o)/j,u)),j=(c-o)/A,N=o,E=c):k?(N=b?o:N,E=w?c:E,A=m-1,j=(E-N)/A):(A=(E-N)/j,Ph(A,Math.round(A),j/1e3)?A=Math.round(A):A=Math.ceil(A));const L=Math.max(I0(j),I0(N));T=Math.pow(10,_n(d)?L:d),N=Math.round(N*T)/T,E=Math.round(E*T)/T;let C=0;for(b&&(h&&N!==o?(n.push({value:o}),N<o&&C++,Ph(Math.round((N+C*j)*T)/T,o,DN(o,_,t))&&C++):N<o&&C++);C<A;++C){const P=Math.round((N+C*j)*T)/T;if(w&&P>c)break;n.push({value:P})}return w&&h&&E!==c?n.length&&Ph(n[n.length-1].value,c,DN(c,_,t))?n[n.length-1].value=c:n.push({value:c}):(!w||E===c)&&n.push({value:E}),n}function DN(t,e,{horizontal:n,minRotation:s}){const a=fr(s),r=(n?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class nq extends td{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _n(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:r}=this;const o=d=>a=n?a:d,c=d=>r=s?r:d;if(e){const d=ul(a),m=ul(r);d<0&&m<0?c(0):d>0&&m>0&&o(0)}if(a===r){let d=r===0?1:Math.abs(r*.05);c(r+d),e||o(a-d)}this.min=a,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=tq(a,r);return e.bounds==="ticks"&&Q$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return iw(e,this.chart.options.locale,this.options.ticks.format)}}class iq extends nq{static id="linear";static defaults={ticks:{callback:Y2.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xs(e)?e:0,this.max=Xs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=fr(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Mg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rs=Object.keys(Mg);function RN(t,e){return t-e}function PN(t,e){if(_n(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Xs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(a&&(o=a==="week"&&(vp(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,a)),+o)}function MN(t,e,n,s){const a=rs.length;for(let r=rs.indexOf(t);r<a-1;++r){const o=Mg[rs[r]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return rs[r]}return rs[a-1]}function sq(t,e,n,s,a){for(let r=rs.length-1;r>=rs.indexOf(n);r--){const o=rs[r];if(Mg[o].common&&t._adapter.diff(a,s,o)>=e-1)return o}return rs[n?rs.indexOf(n):0]}function aq(t){for(let e=rs.indexOf(t)+1,n=rs.length;e<n;++e)if(Mg[rs[e]].common)return rs[e]}function IN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=tw(n,e),r=n[s]>=e?n[s]:n[a];t[r]=!0}}function rq(t,e,n,s){const a=t._adapter,r=+a.startOf(e[0].value,s),o=e[e.length-1].value;let c,d;for(c=r;c<=o;c=+a.add(c,1,s))d=n[c],d>=0&&(e[d].major=!0);return e}function ON(t,e,n){const s=[],a={},r=e.length;let o,c;for(o=0;o<r;++o)c=e[o],a[c]=o,s.push({value:c,major:!1});return r===0||!n?s:rq(t,s,a,n)}class LN extends td{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new f8._date(e.adapters.date);a.init(n),em(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:PN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:r,minDefined:o,maxDefined:c}=this.getUserBounds();function d(m){!o&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!c&&!isNaN(m.max)&&(r=Math.max(r,m.max))}(!o||!c)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Xs(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),r=Xs(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const r=this.min,o=this.max,c=tB(a,r,o);return this._unit=n.unit||(s.autoSkip?MN(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):sq(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:aq(this._unit),this.initOffsets(a),e.reverse&&c.reverse(),ON(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,r;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ls(n,0,o),s=ls(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,r=a.time,o=r.unit||MN(r.minUnit,n,s,this._getLabelCapacity(n)),c=an(a.ticks.stepSize,1),d=o==="week"?r.isoWeekday:!1,m=vp(d)||d===!0,u={};let p=n,h,g;if(m&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,m?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(h=p,g=0;h<s;h=+e.add(h,c,o),g++)IN(u,h,v);return(h===s||a.bounds==="ticks"||g===1)&&IN(u,h,v),Object.keys(u).sort(RN).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,r=this._unit,o=n||a[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,a){const r=this.options,o=r.ticks.callback;if(o)return $n(o,[e,n,s],this);const c=r.time.displayFormats,d=this._unit,m=this._majorUnit,u=d&&c[d],p=m&&c[m],h=s[n],g=m&&p&&h&&h.major;return this._adapter.format(e,a||(g?p:u))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=fr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:s*r+c*o,h:s*o+c*r}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,ON(this,[e],this._majorUnit),a),o=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(PN(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return U2(e.sort(RN))}}function eh(t,e,n){let s=0,a=t.length-1,r,o,c,d;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Yx(t,"pos",e)),{pos:r,time:c}=t[s],{pos:o,time:d}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Yx(t,"time",e)),{time:r,pos:c}=t[s],{time:o,pos:d}=t[a]);const m=o-r;return m?c+(d-c)*(e-r)/m:c}class rpe extends LN{static id="timeseries";static defaults=LN.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=eh(n,this.min),this._tableRange=eh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],r=[];let o,c,d,m,u;for(o=0,c=e.length;o<c;++o)m=e[o],m>=n&&m<=s&&a.push(m);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=a.length;o<c;++o)u=a[o+1],d=a[o-1],m=a[o],Math.round((u+d)/2)!==m&&r.push({time:m,pos:o/(c-1)});return r}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,r)=>a-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(eh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return eh(this._table,s*this._tableRange+this._minPos,!0)}}const NT="label";function FN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function lq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function CT(t,e){t.labels=e}function ST(t,e,n=NT){const s=[];t.datasets=e.map(a=>{const r=t.datasets.find(o=>o[n]===a[n]);return!r||!a.data||s.includes(r)?{...a}:(s.push(r),Object.assign(r,a),r)})}function oq(t,e=NT){const n={labels:[],datasets:[]};return CT(n,t.labels),ST(n,t.datasets,e),n}function cq(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:r,type:o,data:c,options:d,plugins:m=[],fallbackContent:u,updateMode:p,...h}=t,g=f.useRef(null),v=f.useRef(null),x=()=>{g.current&&(v.current=new Qm(g.current,{type:o,data:oq(c,r),options:d&&{...d},plugins:m}),FN(e,v.current))},y=()=>{FN(e,null),v.current&&(v.current.destroy(),v.current=null)};return f.useEffect(()=>{!a&&v.current&&d&&lq(v.current,d)},[a,d]),f.useEffect(()=>{!a&&v.current&&CT(v.current.config.data,c.labels)},[a,c.labels]),f.useEffect(()=>{!a&&v.current&&c.datasets&&ST(v.current.config.data,c.datasets,r)},[a,c.datasets]),f.useEffect(()=>{v.current&&(a?(y(),setTimeout(x)):v.current.update(p))},[a,d,c.labels,c.datasets,p]),f.useEffect(()=>{v.current&&(y(),setTimeout(x))},[o]),f.useEffect(()=>(x(),()=>y()),[]),i.jsx("canvas",{ref:g,role:"img",height:n,width:s,...h,children:u})}const dq=f.forwardRef(cq);function _T(t,e){return Qm.register(e),f.forwardRef((n,s)=>i.jsx(dq,{...n,ref:s,type:t}))}const mq=_T("bar",h8),ET=_T("doughnut",g8);Qm.register(vT,jT,bT);const uq=({clinicId:t,dateRange:e})=>{const{darkMode:n}=mt(),s=f.useMemo(()=>{const p={clinic_id:t};if(e&&e.length===2){const h=g=>{if(!g)return"";const v=new Date(g),x=v.getFullYear(),y=String(v.getMonth()+1).padStart(2,"0"),b=String(v.getDate()).padStart(2,"0");return`${x}-${y}-${b}`};p.start_date=h(e[0]),p.end_date=h(e[1])}return p},[t,e]),{data:a,isLoading:r}=i$(s),o={booked:{color:"#00C853",label:l("Booked","kivicare-clinic-management-system")},check_in:{color:"#2962FF",label:l("Check-in","kivicare-clinic-management-system")},check_out:{color:"#82B1FF",label:l("Check-out","kivicare-clinic-management-system")},pending:{color:"#FF8A80",label:l("Pending","kivicare-clinic-management-system")},cancelled:{color:"#FF5252",label:l("Cancelled","kivicare-clinic-management-system")}},c=f.useMemo(()=>{if(!a?.data?.status_breakdown)return null;const p=a.data.status_breakdown;return{labels:Object.keys(o).map(h=>o[h].label),datasets:[{data:[p.booked||0,p.check_in||0,p.check_out||0,p.pending||0,p.cancelled||0],backgroundColor:[o.booked.color,o.check_in.color,o.check_out.color,o.pending.color,o.cancelled.color],borderWidth:0,hoverOffset:4}]}},[a]),d=a?.data?.count||0,m=f.useMemo(()=>({id:"centerText",beforeDraw:function(p){const{width:h}=p,{height:g}=p,{ctx:v}=p;v.restore();const x=(g/8).toFixed(2);v.font=`bold ${x}px sans-serif`,v.textBaseline="middle",v.fillStyle=n?"#ffffff":"#333333";const y=d.toLocaleString(),b=Math.round((h-v.measureText(y).width)/2),w=g/2;v.fillText(y,b,w-10);const k=(g/16).toFixed(2);v.font=`${k}px sans-serif`,v.fillStyle=n?"#adb5bd":"#6c757d";const _=l("Total Bookings","kivicare-clinic-management-system"),j=Math.round((h-v.measureText(_).width)/2);v.fillText(_,j,w+25),v.save()}}),[d,n]),u={cutout:"65%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(p){const h=p.label||"",g=p.raw||0,v=d>0?Math.round(g/d*100):0;return`${h}: ${g} (${v}%)`}}}},maintainAspectRatio:!1};return r?i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"200px",height:"200px"}})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((p,h)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"10px",height:"10px"}}),i.jsx("div",{className:"skeleton-element",style:{width:"80px",height:"1rem"}})]},`legend-skeleton-${h}`))})]})]}):i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4",style:{height:"220px"},children:c&&i.jsx(ET,{data:c,options:u,plugins:[m]},`${n?"dark":"light"}`)}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Object.entries(o).map(([p,h])=>{const g=a?.data?.status_breakdown?.[p]||0,v=d>0?Math.round(g/d*100):0;return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{className:"rounded-circle",style:{width:"10px",height:"10px",backgroundColor:h.color}}),i.jsx("span",{className:"fw-medium text-heading",children:h.label}),i.jsxs("span",{className:"text-muted",style:{color:"rgba(var(--bs-body-color-rgb), var(--bs-text-opacity))"},children:[g," (",v,"%)"]})]},p)})})]})]})};function On(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function tl(t,e){return typeof t=="function"?t(e):t}function Es(t,e){return n=>{e.setState(s=>({...s,[t]:tl(n,s[t])}))}}function Ig(t){return t instanceof Function}function hq(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function pq(t,e){const n=[],s=a=>{a.forEach(r=>{n.push(r);const o=e(r);o!=null&&o.length&&s(o)})};return s(t),n}function zt(t,e,n){let s=[],a;return r=>{let o;n.key&&n.debug&&(o=Date.now());const c=t(r);if(!(c.length!==s.length||c.some((u,p)=>s[p]!==u)))return a;s=c;let m;if(n.key&&n.debug&&(m=Date.now()),a=e(...c),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,p=Math.round((Date.now()-m)*100)/100,h=p/16,g=(v,x)=>{for(v=String(v);v.length<x;)v=" "+v;return v};console.info(`%c ${g(p,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n?.key)}return a}}function Vt(t,e,n,s){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:s}}function gq(t,e,n,s){const a=()=>{var o;return(o=r.getValue())!=null?o:t.options.renderFallbackValue},r={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(s),renderValue:a,getContext:zt(()=>[t,n,e,r],(o,c,d,m)=>({table:o,column:c,row:d,cell:m,getValue:m.getValue,renderValue:m.renderValue}),Vt(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(r,n,e,t)},{}),r}function fq(t,e,n,s){var a,r;const c={...t._getDefaultColumnDef(),...e},d=c.accessorKey;let m=(a=(r=c.id)!=null?r:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:d&&(d.includes(".")?u=h=>{let g=h;for(const x of d.split(".")){var v;g=(v=g)==null?void 0:v[x]}return g}:u=h=>h[c.accessorKey]),!m)throw new Error;let p={id:`${String(m)}`,accessorFn:u,parent:s,depth:n,columnDef:c,columns:[],getFlatColumns:zt(()=>[!0],()=>{var h;return[p,...(h=p.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},Vt(t.options,"debugColumns")),getLeafColumns:zt(()=>[t._getOrderColumnsFn()],h=>{var g;if((g=p.columns)!=null&&g.length){let v=p.columns.flatMap(x=>x.getLeafColumns());return h(v)}return[p]},Vt(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(p,t);return p}const Ti="debugHeaders";function $N(t,e,n){var s;let r={id:(s=n.id)!=null?s:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],c=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(c),o.push(d)};return c(r),o},getContext:()=>({table:t,header:r,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(r,t)}),r}const vq={createTable:t=>{t.getHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>{var r,o;const c=(r=s?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?r:[],d=(o=a?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?o:[],m=n.filter(p=>!(s!=null&&s.includes(p.id))&&!(a!=null&&a.includes(p.id)));return th(e,[...c,...m,...d],t)},Vt(t.options,Ti)),t.getCenterHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>(n=n.filter(r=>!(s!=null&&s.includes(r.id))&&!(a!=null&&a.includes(r.id))),th(e,n,t,"center")),Vt(t.options,Ti)),t.getLeftHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,s)=>{var a;const r=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return th(e,r,t,"left")},Vt(t.options,Ti)),t.getRightHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,s)=>{var a;const r=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return th(e,r,t,"right")},Vt(t.options,Ti)),t.getFooterGroups=zt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getLeftFooterGroups=zt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getCenterFooterGroups=zt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getRightFooterGroups=zt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getFlatHeaders=zt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getLeftFlatHeaders=zt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getCenterFlatHeaders=zt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getRightFlatHeaders=zt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getCenterLeafHeaders=zt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getLeftLeafHeaders=zt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getRightLeafHeaders=zt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getLeafHeaders=zt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,s)=>{var a,r,o,c,d,m;return[...(a=(r=e[0])==null?void 0:r.headers)!=null?a:[],...(o=(c=n[0])==null?void 0:c.headers)!=null?o:[],...(d=(m=s[0])==null?void 0:m.headers)!=null?d:[]].map(u=>u.getLeafHeaders()).flat()},Vt(t.options,Ti))}};function th(t,e,n,s){var a,r;let o=0;const c=function(h,g){g===void 0&&(g=1),o=Math.max(o,g),h.filter(v=>v.getIsVisible()).forEach(v=>{var x;(x=v.columns)!=null&&x.length&&c(v.columns,g+1)},0)};c(t);let d=[];const m=(h,g)=>{const v={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},x=[];h.forEach(y=>{const b=[...x].reverse()[0],w=y.column.depth===v.depth;let k,_=!1;if(w&&y.column.parent?k=y.column.parent:(k=y.column,_=!0),b&&b?.column===k)b.subHeaders.push(y);else{const j=$N(n,k,{id:[s,g,k.id,y?.id].filter(Boolean).join("_"),isPlaceholder:_,placeholderId:_?`${x.filter(T=>T.column===k).length}`:void 0,depth:g,index:x.length});j.subHeaders.push(y),x.push(j)}v.headers.push(y),y.headerGroup=v}),d.push(v),g>0&&m(x,g-1)},u=e.map((h,g)=>$N(n,h,{depth:o,index:g}));m(u,o-1),d.reverse();const p=h=>h.filter(v=>v.column.getIsVisible()).map(v=>{let x=0,y=0,b=[0];v.subHeaders&&v.subHeaders.length?(b=[],p(v.subHeaders).forEach(k=>{let{colSpan:_,rowSpan:j}=k;x+=_,b.push(j)})):x=1;const w=Math.min(...b);return y=y+w,v.colSpan=x,v.rowSpan=y,{colSpan:x,rowSpan:y}});return p((a=(r=d[0])==null?void 0:r.headers)!=null?a:[]),d}const pw=(t,e,n,s,a,r,o)=>{let c={id:e,index:s,original:n,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(c._valuesCache.hasOwnProperty(d))return c._valuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return c._valuesCache[d]=m.accessorFn(c.original,s),c._valuesCache[d]},getUniqueValues:d=>{if(c._uniqueValuesCache.hasOwnProperty(d))return c._uniqueValuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(c._uniqueValuesCache[d]=m.columnDef.getUniqueValues(c.original,s),c._uniqueValuesCache[d]):(c._uniqueValuesCache[d]=[c.getValue(d)],c._uniqueValuesCache[d])},renderValue:d=>{var m;return(m=c.getValue(d))!=null?m:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>pq(c.subRows,d=>d.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let d=[],m=c;for(;;){const u=m.getParentRow();if(!u)break;d.push(u),m=u}return d.reverse()},getAllCells:zt(()=>[t.getAllLeafColumns()],d=>d.map(m=>gq(t,c,m,m.id)),Vt(t.options,"debugRows")),_getAllCellsByColumnId:zt(()=>[c.getAllCells()],d=>d.reduce((m,u)=>(m[u.column.id]=u,m),{}),Vt(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const m=t._features[d];m==null||m.createRow==null||m.createRow(c,t)}return c},xq={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},TT=(t,e,n)=>{var s,a;const r=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(r))};TT.autoRemove=t=>ga(t);const AT=(t,e,n)=>{var s;return!!(!((s=t.getValue(e))==null||(s=s.toString())==null)&&s.includes(n))};AT.autoRemove=t=>ga(t);const DT=(t,e,n)=>{var s;return((s=t.getValue(e))==null||(s=s.toString())==null?void 0:s.toLowerCase())===n?.toLowerCase()};DT.autoRemove=t=>ga(t);const RT=(t,e,n)=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(n)};RT.autoRemove=t=>ga(t);const PT=(t,e,n)=>!n.some(s=>{var a;return!((a=t.getValue(e))!=null&&a.includes(s))});PT.autoRemove=t=>ga(t)||!(t!=null&&t.length);const MT=(t,e,n)=>n.some(s=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(s)});MT.autoRemove=t=>ga(t)||!(t!=null&&t.length);const IT=(t,e,n)=>t.getValue(e)===n;IT.autoRemove=t=>ga(t);const OT=(t,e,n)=>t.getValue(e)==n;OT.autoRemove=t=>ga(t);const gw=(t,e,n)=>{let[s,a]=n;const r=t.getValue(e);return r>=s&&r<=a};gw.resolveFilterValue=t=>{let[e,n]=t,s=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,r=e===null||Number.isNaN(s)?-1/0:s,o=n===null||Number.isNaN(a)?1/0:a;if(r>o){const c=r;r=o,o=c}return[r,o]};gw.autoRemove=t=>ga(t)||ga(t[0])&&ga(t[1]);const hr={includesString:TT,includesStringSensitive:AT,equalsString:DT,arrIncludes:RT,arrIncludesAll:PT,arrIncludesSome:MT,equals:IT,weakEquals:OT,inNumberRange:gw};function ga(t){return t==null||t===""}const yq={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Es("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);return typeof s=="string"?hr.includesString:typeof s=="number"?hr.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?hr.equals:Array.isArray(s)?hr.arrIncludes:hr.weakEquals},t.getFilterFn=()=>{var n,s;return Ig(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(s=e.options.filterFns)==null?void 0:s[t.columnDef.filterFn])!=null?n:hr[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,s,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((s=e.options.enableColumnFilters)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(s=>s.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,s;return(n=(s=e.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(s=>{const a=t.getFilterFn(),r=s?.find(u=>u.id===t.id),o=tl(n,r?r.value:void 0);if(BN(a,o,t)){var c;return(c=s?.filter(u=>u.id!==t.id))!=null?c:[]}const d={id:t.id,value:o};if(r){var m;return(m=s?.map(u=>u.id===t.id?d:u))!=null?m:[]}return s!=null&&s.length?[...s,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),s=a=>{var r;return(r=tl(e,a))==null?void 0:r.filter(o=>{const c=n.find(d=>d.id===o.id);if(c){const d=c.getFilterFn();if(BN(d,o.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(s)},t.resetColumnFilters=e=>{var n,s;t.setColumnFilters(e?[]:(n=(s=t.initialState)==null?void 0:s.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function BN(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const bq=(t,e,n)=>n.reduce((s,a)=>{const r=a.getValue(t);return s+(typeof r=="number"?r:0)},0),wq=(t,e,n)=>{let s;return n.forEach(a=>{const r=a.getValue(t);r!=null&&(s>r||s===void 0&&r>=r)&&(s=r)}),s},kq=(t,e,n)=>{let s;return n.forEach(a=>{const r=a.getValue(t);r!=null&&(s<r||s===void 0&&r>=r)&&(s=r)}),s},jq=(t,e,n)=>{let s,a;return n.forEach(r=>{const o=r.getValue(t);o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)))}),[s,a]},Nq=(t,e)=>{let n=0,s=0;if(e.forEach(a=>{let r=a.getValue(t);r!=null&&(r=+r)>=r&&(++n,s+=r)}),n)return s/n},Cq=(t,e)=>{if(!e.length)return;const n=e.map(r=>r.getValue(t));if(!hq(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((r,o)=>r-o);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},Sq=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),_q=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Eq=(t,e)=>e.length,kv={sum:bq,min:wq,max:kq,extent:jq,mean:Nq,median:Cq,unique:Sq,uniqueCount:_q,count:Eq},Tq={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Es("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(s=>s!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,s;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((s=e.options.enableGrouping)!=null?s:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);if(typeof s=="number")return kv.sum;if(Object.prototype.toString.call(s)==="[object Date]")return kv.extent},t.getAggregationFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(s=e.options.aggregationFns)==null?void 0:s[t.columnDef.aggregationFn])!=null?n:kv[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,s;t.setGrouping(e?[]:(n=(s=t.initialState)==null?void 0:s.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const s=e.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(t._groupingValuesCache[n]=s.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,s)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Aq(t,e,n){if(!(e!=null&&e.length)||!n)return t;const s=t.filter(r=>!e.includes(r.id));return n==="remove"?s:[...e.map(r=>t.find(o=>o.id===r)).filter(Boolean),...s]}const Dq={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Es("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=zt(n=>[im(e,n)],n=>n.findIndex(s=>s.id===t.id),Vt(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var s;return((s=im(e,n)[0])==null?void 0:s.id)===t.id},t.getIsLastColumn=n=>{var s;const a=im(e,n);return((s=a[a.length-1])==null?void 0:s.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=zt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,s)=>a=>{let r=[];if(!(e!=null&&e.length))r=a;else{const o=[...e],c=[...a];for(;c.length&&o.length;){const d=o.shift(),m=c.findIndex(u=>u.id===d);m>-1&&r.push(c.splice(m,1)[0])}r=[...r,...c]}return Aq(r,n,s)},Vt(t.options,"debugTable"))}},jv=()=>({left:[],right:[]}),Rq={getInitialState:t=>({columnPinning:jv(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Es("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const s=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var r,o;if(n==="right"){var c,d;return{left:((c=a?.left)!=null?c:[]).filter(p=>!(s!=null&&s.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(s!=null&&s.includes(p))),...s]}}if(n==="left"){var m,u;return{left:[...((m=a?.left)!=null?m:[]).filter(p=>!(s!=null&&s.includes(p))),...s],right:((u=a?.right)!=null?u:[]).filter(p=>!(s!=null&&s.includes(p)))}}return{left:((r=a?.left)!=null?r:[]).filter(p=>!(s!=null&&s.includes(p))),right:((o=a?.right)!=null?o:[]).filter(p=>!(s!=null&&s.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(s=>{var a,r,o;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((r=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?r:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:s,right:a}=e.getState().columnPinning,r=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return r?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();return a?(n=(s=e.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,s,a)=>{const r=[...s??[],...a??[]];return n.filter(o=>!r.includes(o.column.id))},Vt(e.options,"debugRows")),t.getLeftVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,s)=>(s??[]).map(r=>n.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),Vt(e.options,"debugRows")),t.getRightVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,s)=>(s??[]).map(r=>n.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),Vt(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,s;return t.setColumnPinning(e?jv():(n=(s=t.initialState)==null?void 0:s.columnPinning)!=null?n:jv())},t.getIsSomeColumnsPinned=e=>{var n;const s=t.getState().columnPinning;if(!e){var a,r;return!!((a=s.left)!=null&&a.length||(r=s.right)!=null&&r.length)}return!!((n=s[e])!=null&&n.length)},t.getLeftLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Vt(t.options,"debugColumns")),t.getRightLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Vt(t.options,"debugColumns")),t.getCenterLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s)=>{const a=[...n??[],...s??[]];return e.filter(r=>!a.includes(r.id))},Vt(t.options,"debugColumns"))}};function Pq(t){return t||(typeof document<"u"?document:null)}const nh={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nv=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Mq={getDefaultColumnDef:()=>nh,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nv(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Es("columnSizing",t),onColumnSizingInfoChange:Es("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,s,a;const r=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:nh.minSize,(s=r??t.columnDef.size)!=null?s:nh.size),(a=t.columnDef.maxSize)!=null?a:nh.maxSize)},t.getStart=zt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(0,t.getIndex(n)).reduce((a,r)=>a+r.getSize(),0),Vt(e.options,"debugColumns")),t.getAfter=zt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(t.getIndex(n)+1).reduce((a,r)=>a+r.getSize(),0),Vt(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:s,...a}=n;return a})},t.getCanResize=()=>{var n,s;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((s=e.options.enableColumnResizing)!=null?s:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var r;n+=(r=a.column.getSize())!=null?r:0}};return s(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const s=e.getColumn(t.column.id),a=s?.getCanResize();return r=>{if(!s||!a||(r.persist==null||r.persist(),Cv(r)&&r.touches&&r.touches.length>1))return;const o=t.getSize(),c=t?t.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[s.id,s.getSize()]],d=Cv(r)?Math.round(r.touches[0].clientX):r.clientX,m={},u=(b,w)=>{typeof w=="number"&&(e.setColumnSizingInfo(k=>{var _,j;const T=e.options.columnResizeDirection==="rtl"?-1:1,N=(w-((_=k?.startOffset)!=null?_:0))*T,E=Math.max(N/((j=k?.startSize)!=null?j:0),-.999999);return k.columnSizingStart.forEach(A=>{let[L,C]=A;m[L]=Math.round(Math.max(C+C*E,0)*100)/100}),{...k,deltaOffset:N,deltaPercentage:E}}),(e.options.columnResizeMode==="onChange"||b==="end")&&e.setColumnSizing(k=>({...k,...m})))},p=b=>u("move",b),h=b=>{u("end",b),e.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=Pq(n),v={moveHandler:b=>p(b.clientX),upHandler:b=>{g?.removeEventListener("mousemove",v.moveHandler),g?.removeEventListener("mouseup",v.upHandler),h(b.clientX)}},x={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),p(b.touches[0].clientX),!1),upHandler:b=>{var w;g?.removeEventListener("touchmove",x.moveHandler),g?.removeEventListener("touchend",x.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),h((w=b.touches[0])==null?void 0:w.clientX)}},y=Iq()?{passive:!1}:!1;Cv(r)?(g?.addEventListener("touchmove",x.moveHandler,y),g?.addEventListener("touchend",x.upHandler,y)):(g?.addEventListener("mousemove",v.moveHandler,y),g?.addEventListener("mouseup",v.upHandler,y)),e.setColumnSizingInfo(b=>({...b,startOffset:d,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:s.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nv():(n=t.initialState.columnSizingInfo)!=null?n:Nv())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0}}};let ih=null;function Iq(){if(typeof ih=="boolean")return ih;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ih=t,ih}function Cv(t){return t.type==="touchstart"}const Oq={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Es("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(s=>({...s,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,s;const a=t.columns;return(n=a.length?a.some(r=>r.getIsVisible()):(s=e.getState().columnVisibility)==null?void 0:s[t.id])!=null?n:!0},t.getCanHide=()=>{var n,s;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((s=e.options.enableHiding)!=null?s:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=zt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Vt(e.options,"debugRows")),t.getVisibleCells=zt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],Vt(e.options,"debugRows"))},createTable:t=>{const e=(n,s)=>zt(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),Vt(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var s;t.setColumnVisibility(n?{}:(s=t.initialState.columnVisibility)!=null?s:{})},t.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,r)=>({...a,[r.id]:n||!(r.getCanHide!=null&&r.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;t.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function im(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Lq={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Fq={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Es("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const s=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,s,a,r;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableGlobalFilter)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((r=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?r:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>hr.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:s}=t.options;return Ig(s)?s:s==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[s])!=null?e:hr[s]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},$q={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Es("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?s:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=s=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(s),t.toggleAllRowsExpanded=s=>{s??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=s=>{var a,r;t.setExpanded(s?{}:(a=(r=t.initialState)==null?void 0:r.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const s=t.getState().expanded;return s===!0||Object.values(s).some(Boolean)},t.getIsAllRowsExpanded=()=>{const s=t.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let s=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(r=>{const o=r.split(".");s=Math.max(s,o.length)}),s},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(s=>{var a;const r=s===!0?!0:!!(s!=null&&s[t.id]);let o={};if(s===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{o[c]=!0}):o=s,n=(a=n)!=null?a:!r,!r&&n)return{...o,[t.id]:!0};if(r&&!n){const{[t.id]:c,...d}=o;return d}return s})},t.getIsExpanded=()=>{var n;const s=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:s===!0||s?.[t.id])},t.getCanExpand=()=>{var n,s,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((s=e.options.enableExpanding)!=null?s:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,s=t;for(;n&&s.parentId;)s=e.getRow(s.parentId,!0),n=s.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Jx=0,ey=10,Sv=()=>({pageIndex:Jx,pageSize:ey}),Bq={getInitialState:t=>({...t,pagination:{...Sv(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Es("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?s:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=s=>{const a=r=>tl(s,r);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=s=>{var a;t.setPagination(s?Sv():(a=t.initialState.pagination)!=null?a:Sv())},t.setPageIndex=s=>{t.setPagination(a=>{let r=tl(s,a.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return r=Math.max(0,Math.min(r,o)),{...a,pageIndex:r}})},t.resetPageIndex=s=>{var a,r;t.setPageIndex(s?Jx:(a=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?a:Jx)},t.resetPageSize=s=>{var a,r;t.setPageSize(s?ey:(a=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?a:ey)},t.setPageSize=s=>{t.setPagination(a=>{const r=Math.max(1,tl(s,a.pageSize)),o=a.pageSize*a.pageIndex,c=Math.floor(o/r);return{...a,pageIndex:c,pageSize:r}})},t.setPageCount=s=>t.setPagination(a=>{var r;let o=tl(s,(r=t.options.pageCount)!=null?r:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=zt(()=>[t.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((r,o)=>o)),a},Vt(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:s}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:s<a-1},t.previousPage=()=>t.setPageIndex(s=>s-1),t.nextPage=()=>t.setPageIndex(s=>s+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var s;return(s=t.options.pageCount)!=null?s:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var s;return(s=t.options.rowCount)!=null?s:t.getPrePaginationRowModel().rows.length}}},_v=()=>({top:[],bottom:[]}),qq={getInitialState:t=>({rowPinning:_v(),...t}),getDefaultOptions:t=>({onRowPinningChange:Es("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,s,a)=>{const r=s?t.getLeafRows().map(d=>{let{id:m}=d;return m}):[],o=a?t.getParentRows().map(d=>{let{id:m}=d;return m}):[],c=new Set([...o,t.id,...r]);e.setRowPinning(d=>{var m,u;if(n==="bottom"){var p,h;return{top:((p=d?.top)!=null?p:[]).filter(x=>!(c!=null&&c.has(x))),bottom:[...((h=d?.bottom)!=null?h:[]).filter(x=>!(c!=null&&c.has(x))),...Array.from(c)]}}if(n==="top"){var g,v;return{top:[...((g=d?.top)!=null?g:[]).filter(x=>!(c!=null&&c.has(x))),...Array.from(c)],bottom:((v=d?.bottom)!=null?v:[]).filter(x=>!(c!=null&&c.has(x)))}}return{top:((m=d?.top)!=null?m:[]).filter(x=>!(c!=null&&c.has(x))),bottom:((u=d?.bottom)!=null?u:[]).filter(x=>!(c!=null&&c.has(x)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=e.options;return typeof s=="function"?s(t):(n=s??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:s,bottom:a}=e.getState().rowPinning,r=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return r?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();if(!a)return-1;const r=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:c}=o;return c});return(s=r?.indexOf(t.id))!=null?s:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,s;return t.setRowPinning(e?_v():(n=(s=t.initialState)==null?void 0:s.rowPinning)!=null?n:_v())},t.getIsSomeRowsPinned=e=>{var n;const s=t.getState().rowPinning;if(!e){var a,r;return!!((a=s.top)!=null&&a.length||(r=s.bottom)!=null&&r.length)}return!!((n=s[e])!=null&&n.length)},t._getPinnedRows=(e,n,s)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(o=>{const c=t.getRow(o,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(o=>e.find(c=>c.id===o))).filter(Boolean).map(o=>({...o,position:s}))},t.getTopRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Vt(t.options,"debugRows")),t.getBottomRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Vt(t.options,"debugRows")),t.getCenterRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,s)=>{const a=new Set([...n??[],...s??[]]);return e.filter(r=>!a.has(r.id))},Vt(t.options,"debugRows"))}},Hq={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Es("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const s={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(r=>{r.getCanSelect()&&(s[r.id]=!0)}):a.forEach(r=>{delete s[r.id]}),s})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const s=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(r=>{ty(a,r.id,s,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getFilteredSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getGroupedSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let s=!!(e.length&&Object.keys(n).length);return s&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let s=!!e.length;return s&&e.some(a=>!n[a.id])&&(s=!1),s},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,s)=>{const a=t.getIsSelected();e.setRowSelection(r=>{var o;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return r;const c={...r};return ty(c,t.id,n,(o=s?.selectChildren)!=null?o:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return fw(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return ny(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return ny(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return s=>{var a;n&&t.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},ty=(t,e,n,s,a)=>{var r;const o=a.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),o.getCanSelect()&&(t[e]=!0)):delete t[e],s&&(r=o.subRows)!=null&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(c=>ty(t,c.id,n,s,a))};function Ev(t,e){const n=t.getState().rowSelection,s=[],a={},r=function(o,c){return o.map(d=>{var m;const u=fw(d,n);if(u&&(s.push(d),a[d.id]=d),(m=d.subRows)!=null&&m.length&&(d={...d,subRows:r(d.subRows)}),u)return d}).filter(Boolean)};return{rows:r(e.rows),flatRows:s,rowsById:a}}function fw(t,e){var n;return(n=e[t.id])!=null?n:!1}function ny(t,e,n){var s;if(!((s=t.subRows)!=null&&s.length))return!1;let a=!0,r=!1;return t.subRows.forEach(o=>{if(!(r&&!a)&&(o.getCanSelect()&&(fw(o,e)?r=!0:a=!1),o.subRows&&o.subRows.length)){const c=ny(o,e);c==="all"?r=!0:(c==="some"&&(r=!0),a=!1)}}),a?"all":r?"some":!1}const iy=/([0-9]+)/gm,zq=(t,e,n)=>LT(xl(t.getValue(n)).toLowerCase(),xl(e.getValue(n)).toLowerCase()),Vq=(t,e,n)=>LT(xl(t.getValue(n)),xl(e.getValue(n))),Uq=(t,e,n)=>vw(xl(t.getValue(n)).toLowerCase(),xl(e.getValue(n)).toLowerCase()),Wq=(t,e,n)=>vw(xl(t.getValue(n)),xl(e.getValue(n))),Kq=(t,e,n)=>{const s=t.getValue(n),a=e.getValue(n);return s>a?1:s<a?-1:0},Gq=(t,e,n)=>vw(t.getValue(n),e.getValue(n));function vw(t,e){return t===e?0:t>e?1:-1}function xl(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function LT(t,e){const n=t.split(iy).filter(Boolean),s=e.split(iy).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),r=s.shift(),o=parseInt(a,10),c=parseInt(r,10),d=[o,c].sort();if(isNaN(d[0])){if(a>r)return 1;if(r>a)return-1;continue}if(isNaN(d[1]))return isNaN(o)?-1:1;if(o>c)return 1;if(c>o)return-1}return n.length-s.length}const Ed={alphanumeric:zq,alphanumericCaseSensitive:Vq,text:Uq,textCaseSensitive:Wq,datetime:Kq,basic:Gq},Yq={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Es("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const r=a?.getValue(t.id);if(Object.prototype.toString.call(r)==="[object Date]")return Ed.datetime;if(typeof r=="string"&&(s=!0,r.split(iy).length>1))return Ed.alphanumeric}return s?Ed.text:Ed.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(s=e.options.sortingFns)==null?void 0:s[t.columnDef.sortingFn])!=null?n:Ed[t.columnDef.sortingFn]},t.toggleSorting=(n,s)=>{const a=t.getNextSortingOrder(),r=typeof n<"u"&&n!==null;e.setSorting(o=>{const c=o?.find(g=>g.id===t.id),d=o?.findIndex(g=>g.id===t.id);let m=[],u,p=r?n:a==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&s?c?u="toggle":u="add":o!=null&&o.length&&d!==o.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(r||a||(u="remove")),u==="add"){var h;m=[...o,{id:t.id,desc:p}],m.splice(0,m.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?m=o.map(g=>g.id===t.id?{...g,desc:p}:g):u==="remove"?m=o.filter(g=>g.id!==t.id):m=[{id:t.id,desc:p}];return m})},t.getFirstSortDir=()=>{var n,s;return((n=(s=t.columnDef.sortDescFirst)!=null?s:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var s,a;const r=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==r&&((s=e.options.enableSortingRemoval)==null||s)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":r},t.getCanSort=()=>{var n,s;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((s=e.options.enableSorting)!=null?s:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,s;return(n=(s=t.columnDef.enableMultiSort)!=null?s:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const s=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return s?s.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,s;return(n=(s=e.getState().sorting)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return s=>{n&&(s.persist==null||s.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(s):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,s;t.setSorting(e?[]:(n=(s=t.initialState)==null?void 0:s.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Qq=[vq,Oq,Dq,Rq,xq,yq,Lq,Fq,Yq,Tq,$q,Bq,qq,Hq,Mq];function Zq(t){var e,n;const s=[...Qq,...(e=t._features)!=null?e:[]];let a={_features:s};const r=a._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),o=h=>a.options.mergeOptions?a.options.mergeOptions(r,h):{...r,...h};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(h=>{var g;d=(g=h.getInitialState==null?void 0:h.getInitialState(d))!=null?g:d});const m=[];let u=!1;const p={_features:s,options:{...r,...t},initialState:d,_queue:h=>{m.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:h=>{const g=tl(h,a.options);a.options=o(g)},getState:()=>a.options.state,setState:h=>{a.options.onStateChange==null||a.options.onStateChange(h)},_getRowId:(h,g,v)=>{var x;return(x=a.options.getRowId==null?void 0:a.options.getRowId(h,g,v))!=null?x:`${v?[v.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(h,g)=>{let v=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[h];if(!v&&(v=a.getCoreRowModel().rowsById[h],!v))throw new Error;return v},_getDefaultColumnDef:zt(()=>[a.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:v=>{const x=v.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:v=>{var x,y;return(x=(y=v.renderValue())==null||y.toString==null?void 0:y.toString())!=null?x:null},...a._features.reduce((v,x)=>Object.assign(v,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...h}},Vt(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:zt(()=>[a._getColumnDefs()],h=>{const g=function(v,x,y){return y===void 0&&(y=0),v.map(b=>{const w=fq(a,b,y,x),k=b;return w.columns=k.columns?g(k.columns,w,y+1):[],w})};return g(h)},Vt(t,"debugColumns")),getAllFlatColumns:zt(()=>[a.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),Vt(t,"debugColumns")),_getAllFlatColumnsById:zt(()=>[a.getAllFlatColumns()],h=>h.reduce((g,v)=>(g[v.id]=v,g),{}),Vt(t,"debugColumns")),getAllLeafColumns:zt(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(h,g)=>{let v=h.flatMap(x=>x.getLeafColumns());return g(v)},Vt(t,"debugColumns")),getColumn:h=>a._getAllFlatColumnsById()[h]};Object.assign(a,p);for(let h=0;h<a._features.length;h++){const g=a._features[h];g==null||g.createTable==null||g.createTable(a)}return a}function FT(){return t=>zt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,r,o){r===void 0&&(r=0);const c=[];for(let m=0;m<a.length;m++){const u=pw(t,t._getRowId(a[m],m,o),a[m],m,r,void 0,o?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),t.options.getSubRows){var d;u.originalSubRows=t.options.getSubRows(a[m],m),(d=u.originalSubRows)!=null&&d.length&&(u.subRows=s(u.originalSubRows,r+1,u))}}return c};return n.rows=s(e),n},Vt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Xq(t,e,n){return n.options.filterFromLeafRows?Jq(t,e,n):e7(t,e,n)}function Jq(t,e,n){var s;const a=[],r={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){var p;let g=d[h];const v=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(v.columnFilters=g.columnFilters,(p=g.subRows)!=null&&p.length&&m<o){if(v.subRows=c(g.subRows,m+1),g=v,e(g)&&!v.subRows.length){u.push(g),r[g.id]=g,a.push(g);continue}if(e(g)||v.subRows.length){u.push(g),r[g.id]=g,a.push(g);continue}}else g=v,e(g)&&(u.push(g),r[g.id]=g,a.push(g))}return u};return{rows:c(t),flatRows:a,rowsById:r}}function e7(t,e,n){var s;const a=[],r={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){let g=d[h];if(e(g)){var p;if((p=g.subRows)!=null&&p.length&&m<o){const x=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);x.subRows=c(g.subRows,m+1),g=x}u.push(g),a.push(g),r[g.id]=g}}return u};return{rows:c(t),flatRows:a,rowsById:r}}function t7(){return t=>zt(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,s)=>{if(!e.rows.length||!(n!=null&&n.length)&&!s){for(let h=0;h<e.flatRows.length;h++)e.flatRows[h].columnFilters={},e.flatRows[h].columnFiltersMeta={};return e}const a=[],r=[];(n??[]).forEach(h=>{var g;const v=t.getColumn(h.id);if(!v)return;const x=v.getFilterFn();x&&a.push({id:h.id,filterFn:x,resolvedValue:(g=x.resolveFilterValue==null?void 0:x.resolveFilterValue(h.value))!=null?g:h.value})});const o=(n??[]).map(h=>h.id),c=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());s&&c&&d.length&&(o.push("__global__"),d.forEach(h=>{var g;r.push({id:h.id,filterFn:c,resolvedValue:(g=c.resolveFilterValue==null?void 0:c.resolveFilterValue(s))!=null?g:s})}));let m,u;for(let h=0;h<e.flatRows.length;h++){const g=e.flatRows[h];if(g.columnFilters={},a.length)for(let v=0;v<a.length;v++){m=a[v];const x=m.id;g.columnFilters[x]=m.filterFn(g,x,m.resolvedValue,y=>{g.columnFiltersMeta[x]=y})}if(r.length){for(let v=0;v<r.length;v++){u=r[v];const x=u.id;if(u.filterFn(g,x,u.resolvedValue,y=>{g.columnFiltersMeta[x]=y})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const p=h=>{for(let g=0;g<o.length;g++)if(h.columnFilters[o[g]]===!1)return!1;return!0};return Xq(e.rows,p,t)},Vt(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function n7(){return t=>zt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const s=t.getState().sorting,a=[],r=s.filter(d=>{var m;return(m=t.getColumn(d.id))==null?void 0:m.getCanSort()}),o={};r.forEach(d=>{const m=t.getColumn(d.id);m&&(o[d.id]={sortUndefined:m.columnDef.sortUndefined,invertSorting:m.columnDef.invertSorting,sortingFn:m.getSortingFn()})});const c=d=>{const m=d.map(u=>({...u}));return m.sort((u,p)=>{for(let g=0;g<r.length;g+=1){var h;const v=r[g],x=o[v.id],y=x.sortUndefined,b=(h=v?.desc)!=null?h:!1;let w=0;if(y){const k=u.getValue(v.id),_=p.getValue(v.id),j=k===void 0,T=_===void 0;if(j||T){if(y==="first")return j?-1:1;if(y==="last")return j?1:-1;w=j&&T?0:j?y:-y}}if(w===0&&(w=x.sortingFn(u,p,v.id)),w!==0)return b&&(w*=-1),x.invertSorting&&(w*=-1),w}return u.index-p.index}),m.forEach(u=>{var p;a.push(u),(p=u.subRows)!=null&&p.length&&(u.subRows=c(u.subRows))}),m};return{rows:c(n.rows),flatRows:a,rowsById:n.rowsById}},Vt(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function jp(t,e){return t?i7(t)?f.createElement(t,e):t:null}function i7(t){return s7(t)||typeof t=="function"||a7(t)}function s7(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function a7(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function $T(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=f.useState(()=>({current:Zq(e)})),[s,a]=f.useState(()=>n.current.initialState);return n.current.setOptions(r=>({...r,...t,state:{...s,...t.state},onStateChange:o=>{a(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}const Nn=({columns:t=5,rows:e=5,showHeader:n=!0,showActions:s=!0,showPagination:a=!0,showBreadcrumb:r=!1,showPageHeader:o=!1,showFilterBar:c=!1})=>{const d=s?t+1:t;return i.jsxs(i.Fragment,{children:[r&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"100px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"120px",height:"1rem"})]}),i.jsx(S,{width:"80px",height:"2.5rem",className:"rounded"})]}),o&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"200px",height:"1.75rem"})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx(S,{width:"140px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"100px",height:"2.5rem",className:"rounded"})]})]}),c&&i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 px-0 pt-4",children:[i.jsxs("div",{className:"d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(S,{width:"180px",height:"2.5rem"}),i.jsx(S,{width:"120px",height:"2.5rem"})]}),i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx(S,{width:"200px",height:"2.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table",children:[n&&i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:d}).map((m,u)=>i.jsx("th",{className:"py-3",children:i.jsx(S,{width:"80%",height:"1rem"})},`th-${u}`))})}),i.jsx("tbody",{children:Array.from({length:e}).map((m,u)=>i.jsx("tr",{children:Array.from({length:d}).map((p,h)=>i.jsx("td",{className:"py-3",children:h===0?i.jsx(S,{width:"1rem",height:"1rem",className:"rounded"}):h===1?i.jsx(S,{width:"30px",height:"1rem"}):h>=2&&h<=d-2?i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"}):h===d-1&&s?i.jsxs("div",{className:"d-flex gap-1",children:[i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"})]}):i.jsx(S,{width:"90%",height:"1rem"})},`cell-${u}-${h}`))},`row-${u}`))})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 flex-wrap gap-2 pb-3 px-4",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((m,u)=>i.jsx(S,{width:"2.5rem",height:"2.5rem",className:"rounded"},`page-${u}`))})]})]})})]})},bn=({data:t=[],columns:e=[],pagination:n=null,isLoading:s=!1,error:a=null,bordered:r=!0,responsive:o=!0,onPageChange:c=()=>{},onPerPageChange:d=()=>{},onSortingChange:m=()=>{},currentPage:u=1,perPage:p=10,totalItems:h=0,lastPage:g=1,enableSelection:v=!0,manualPagination:x=!0,manualFiltering:y=!0,manualSorting:b=!1,moduleNamePlural:w="",renderEmptyState:k=null,bulkActionsButtonText:_="",bulkActions:j=[],isBulkActionShow:T=()=>{},skeletonColumns:N=null,skeletonRows:E=null,rowIdField:A="id",enableHighlightNewItems:L=!0,className:C=""})=>{const P=On(),R=f.useRef(null),[M,O]=f.useState({sorting:[],page:u,perPage:p}),[q,U]=f.useState(""),[H,ae]=f.useState(new Set),V=f.useRef([]);f.useEffect(()=>{if(L&&t?.length>V.current?.length){const re=new Set(V.current.map(I=>I[A]||I.id)),D=t.filter(I=>!re.has(I[A]||I.id)).map(I=>I[A]||I.id);if(D.length>0){ae(ce=>{const Z=new Set(ce);return D.forEach(K=>Z.add(K)),Z});const I=setTimeout(()=>{ae(ce=>{const Z=new Set(ce);return D.forEach(K=>Z.delete(K)),Z})},3e3);return()=>clearTimeout(I)}}V.current=t},[t,L,A]),f.useEffect(()=>{O(re=>({...re,page:u,perPage:p})),W(p==="all"||p===h)},[u,p,h]);const pe=f.useMemo(()=>{let re=[...e];return v&&re.unshift(P.display({id:"selection",header:({table:D})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:D.getIsAllRowsSelected(),onChange:D.getToggleAllRowsSelectedHandler()}),cell:({row:D})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:D.getIsSelected(),onChange:D.getToggleSelectedHandler()})})),re},[e,v,P]),oe=(re,D)=>{O(I=>({...I,[re]:D}))},ne=re=>{oe("page",re),c(re)},[se,W]=f.useState(!1),ge=re=>{if(re==="all")W(!0),oe("perPage","all"),d("all");else{W(!1);const D=Number(re);oe("perPage",D),d(D)}},ee=$T({data:t,columns:pe,state:{sorting:Array.isArray(M.sorting)?M.sorting:[]},onSortingChange:re=>{const D=typeof re=="function"?re(Array.isArray(M.sorting)?M.sorting:[]):Array.isArray(re)?re:[];oe("sorting",D),m(D)},getCoreRowModel:FT(),getFilteredRowModel:t7(),getSortedRowModel:b?void 0:n7(),enableRowSelection:v,enableSorting:!0,manualPagination:x,manualFiltering:y,manualSorting:b}),ie=ee.getSelectedRowModel().rows;f.useEffect(()=>{T(ie.length>0&&j?.length>0)},[ie]);const ue=()=>{if(!q)return;const re=(j||[]).find(D=>D.label===q);re&&typeof re.action=="function"&&re.action(ie.map(D=>D.original),()=>ee.resetRowSelection())},G=f.useMemo(()=>{const D=M.page-1,I=M.page+1,ce=[],Z=[];let K;for(let B=1;B<=g;B++)(B===1||B===g||B>=D&&B<=I)&&ce.push(B);for(let B of ce)K&&(B-K===2?Z.push(K+1):B-K!==1&&Z.push("...")),Z.push(B),K=B;return Z},[M.page,g]),le=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:pe.length,className:"text-center py-5 border-start border-end",children:i.jsx("h6",{className:"text-secondary fw-normal mb-0",children:l(`No ${w||"items"} found`,"kivicare-clinic-management-system")})})});return i.jsxs(i.Fragment,{children:[a&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:typeof a=="string"?a:a.message||l("An error occurred while loading data.","kivicare-clinic-management-system")}),s?i.jsx(Nn,{columns:N||pe.length,rows:E||(p==="all"?10:Math.min(p,10)),showActions:v}):i.jsxs(i.Fragment,{children:[i.jsx(Ci,{in:ie.length>0&&j?.length>0,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,appear:!0,nodeRef:R,children:i.jsx("div",{ref:R,className:"position-absolute top-0 rounded w-100 card",style:{zIndex:10},children:i.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center py-2 px-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{children:[ie.length," ",ie.length===1?l("row selected","kivicare-clinic-management-system"):l("rows selected","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link ",onClick:()=>ee.resetRowSelection(),children:l("Clear","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(lt,{value:q?{value:q,label:q}:null,onChange:re=>U(re?re.value:""),options:j.map(re=>({value:re.label,label:re.label})),placeholder:_||l("Bulk Actions","kivicare-clinic-management-system"),className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:re=>({...re,zIndex:9999})}}),i.jsx("button",{className:"btn btn-primary btn-sm px-3",onClick:ue,disabled:!q||ie.length===0,children:l("Apply","kivicare-clinic-management-system")})]})]})})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:o?"table-responsive":"",children:i.jsxs("table",{className:`table table-bordered  rounded ${C}`,children:[i.jsx("thead",{children:ee.getHeaderGroups().map(re=>i.jsx("tr",{children:re.headers.map(D=>i.jsx("th",{colSpan:D.colSpan,className:`align-middle ${D.column.columnDef.headerClassName||""}`,style:D.column.columnDef.meta?.width?{width:D.column.columnDef.meta.width}:void 0,children:D.isPlaceholder?null:i.jsxs("div",{className:D.column.getCanSort()?"cursor-pointer user-select-none d-flex align-items-center justify-content-between":"",onClick:D.column.getToggleSortingHandler(),children:[jp(D.column.columnDef.header,D.getContext()),D.column.getCanSort()&&i.jsx("span",{className:"ms-2",children:(()=>{const I=D.column.getIsSorted();return I==="asc"?i.jsx("i",{className:"ph ph-arrow-up"}):I==="desc"?i.jsx("i",{className:"ph ph-arrow-down"}):i.jsx("i",{className:"ph ph-arrows-vertical opacity-50"})})()})]})},D.id))},re.id))}),i.jsx("tbody",{children:ee.getRowModel().rows.length>0?ee.getRowModel().rows.map(re=>{const D=re.original[A]||re.original.id,I=H.has(D);return i.jsx("tr",{className:`align-middle ${re.getIsSelected()?"table-row-selected":""} ${I?"new-row-highlight":""}`,children:re.getVisibleCells().map(ce=>i.jsx("td",{style:ce.column.columnDef.meta?.width?{width:ce.column.columnDef.meta.width}:void 0,children:jp(ce.column.columnDef.cell,ce.getContext())},ce.id))},re.id)}):k?k():le()})]})}),(n||h>0)&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-around justify-content-md-between align-items-center gap-3 mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{children:l("Show","kivicare-clinic-management-system")}),i.jsxs("select",{className:"form-select form-select-sm w-auto",value:se?"all":M.perPage,onChange:re=>ge(re.target.value),children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"25",children:"25"}),i.jsx("option",{value:"50",children:"50"}),i.jsx("option",{value:"100",children:"100"}),i.jsx("option",{value:"all",children:l("All","kivicare-clinic-management-system")})]}),i.jsx("span",{children:l("entries","kivicare-clinic-management-system")})]}),i.jsx("div",{children:se?Pi(l("Showing all entries","kivicare-clinic-management-system")):Pi(l("Showing %1$d to %2$d of %3$d entries","kivicare-clinic-management-system"),Math.min((M.page-1)*M.perPage+1,h),Math.min(M.page*M.perPage,h),h)}),(n||h>0)&&!se&&i.jsx("nav",{"aria-label":"Page navigation",children:h>0&&i.jsxs("ul",{className:"pagination pagination-sm",children:[i.jsx("li",{className:`page-item ${M.page===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>ne(Math.max(M.page-1,1)),disabled:M.page===1,children:l("Previous","kivicare-clinic-management-system")})}),G.map((re,D)=>i.jsx("li",{className:`page-item ${M.page===re?"active":""} ${re==="..."?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>typeof re=="number"&&ne(re),disabled:re==="...",children:re})},D)),i.jsx("li",{className:`page-item ${M.page===g?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>ne(Math.min(M.page+1,g)),disabled:M.page===g,children:l("Next","kivicare-clinic-management-system")})})]})})]})]})]})]})};bn.propTypes={data:Pe.array.isRequired,columns:Pe.array.isRequired,pagination:Pe.object,isLoading:Pe.bool,error:Pe.oneOfType([Pe.string,Pe.object]),bulkActionsButtonText:Pe.string,bulkActions:Pe.arrayOf(Pe.shape({label:Pe.string.isRequired,action:Pe.func.isRequired})),striped:Pe.bool,bordered:Pe.bool,hover:Pe.bool,responsive:Pe.bool,onPageChange:Pe.func,onPerPageChange:Pe.func,onSortingChange:Pe.func,onRowSelect:Pe.func,currentPage:Pe.number,perPage:Pe.number,totalItems:Pe.number,lastPage:Pe.number,enableSelection:Pe.bool,manualPagination:Pe.bool,manualFiltering:Pe.bool,manualSorting:Pe.bool,moduleBaseUrl:Pe.string,moduleNameSingular:Pe.string,moduleNamePlural:Pe.string,renderCustomActions:Pe.func,renderEmptyState:Pe.func,beforeTable:Pe.node,afterTable:Pe.node,customBulkActions:Pe.arrayOf(Pe.shape({label:Pe.string.isRequired,action:Pe.func.isRequired})),isBulkActionShow:Pe.func,rowIdField:Pe.string,enableHighlightNewItems:Pe.bool};function $c({src:t,variant:e="primary",size:n="md",alt:s="Avatar",text:a="",badge:r=null,className:o="",onClick:c=null}){const d={xs:"avatar-40",sm:"avatar-40",md:"avatar-50",lg:"avatar-40",xl:"avatar-40"},m=typeof n=="string"?d[n]||d.md:`${n}px`,u=r?{position:"absolute",bottom:"0",right:"0",transform:"translate(20%, 20%)",border:"1px solid white",borderRadius:"50%",width:`calc(${m} * 0.4)`,height:`calc(${m} * 0.4)`,backgroundColor:`var(--bs-${r.variant||"danger"})`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:`calc(${m} * 0.2)`,color:"white"}:{},p=()=>a?a.substring(0,2).toUpperCase():s.substring(0,2).toUpperCase();return i.jsxs("div",{onClick:c,role:c?"button":void 0,children:[t?i.jsx(Y_,{src:t,alt:s,className:`avatar  ${o} ${m}`}):i.jsx("div",{className:`avatar  ${o} ${m}`,children:i.jsx("span",{children:p()})}),r&&i.jsx("div",{style:u,children:r.text})]})}$c.propTypes={src:Pe.string,variant:Pe.string,size:Pe.oneOfType([Pe.string,Pe.number]),alt:Pe.string,text:Pe.string,badge:Pe.shape({variant:Pe.string,text:Pe.oneOfType([Pe.string,Pe.number])}),className:Pe.string,onClick:Pe.func};const on=({profileUrl:t=null,name:e="",email:n="",gender:s="",phone:a="",address:r="",dob:o="",clinicName:c="",fallbackText:d=null,variant:m="primary",size:u="md",nameLabel:p=l("User Name","kivicare-clinic-management-system"),className:h="",onClick:g=null,rounded:v=!0})=>{const y=t?"":(k=>{if(!k)return"U";const _=k.trim().split(" ");return _.length===1?_[0].charAt(0).toUpperCase():(_[0].charAt(0)+_[1].charAt(0)).toUpperCase()})(e),b=typeof g=="function",w=i.jsxs("div",{className:`d-flex align-items-center gap-3 ${h} ${b?"cursor-pointer":""}`,children:[i.jsx($c,{src:t,alt:e||p,text:y,variant:m,size:u,className:`flex-shrink-0 bg-primary-subtle  ${v?"rounded-circle":"rounded"} `}),i.jsxs("div",{className:"user-data",children:[i.jsx("h6",{className:"font-size-14 mb-0",children:e||p}),c&&i.jsx("p",{className:"font-size-12 text-muted mb-1",children:c}),i.jsxs("div",{className:"d-flex align-items-center column-gap-5 row-gap-1 flex-wrap",children:[n&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsxs("span",{className:"text-muted line-anywhere",children:[" ",n]})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{className:"font-size-14 line-anywhere",children:a})]}),s&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-gender-"+s}),i.jsx("span",{className:"font-size-14",children:s})]}),o&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-cake"}),i.jsx("span",{className:"font-size-14",children:o})]}),r&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{className:"font-size-14",children:r})]})]})]})]});return b?i.jsx("div",{onClick:g,role:"button",tabIndex:0,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),g())},style:{cursor:"pointer"},children:w}):w};var sh={},qN;function r7(){if(qN)return sh;qN=1,Object.defineProperty(sh,"__esModule",{value:!0});function t(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(a.length===2)return n(a[0],a[1])||null;var o=a.slice(1).reduce(function(c,d){return n(c,d)},a[0]);return o||null}sh.default=t;var e=new WeakMap;function n(a,r){if(a&&r){var o=e.get(a)||new WeakMap;e.set(a,o);var c=o.get(r)||(function(d){s(a,d),s(r,d)});return o.set(r,c),c}return a||r}function s(a,r){typeof a=="function"?a(r):a.current=r}return sh}var l7=r7();const o7=wa(l7);var HN=Symbol("useLazyRef empty value"),c7=t=>{const e=f.useRef(HN);return e.current===HN&&(e.current=t()),e};function d7(){var t=f.useRef(!1);return f.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t}var ah=function(e){var n=We.useRef(e);return lp(function(){n.current=e}),n};function Gl(t){return{isOk:()=>!0,isOkAnd:n=>n(t),isErr:()=>!1,isErrAnd:()=>!1,ok:()=>xw(t),err:()=>Jl(),map:n=>Gl(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),mapErr:()=>Gl(t),expect:()=>t,expectErr:n=>{throw new Error(n)},unwrap:()=>t,unwrapErr:()=>{throw new Error(`${t}`)},unwrapOr:()=>t,unwrapOrElse:()=>t,and:n=>n,andThen:n=>n(t),or:()=>Gl(t),orElse:()=>Gl(t)}}function Yl(t){return{isOk:()=>!1,isOkAnd:()=>!1,isErr:()=>!0,isErrAnd:n=>n(t),ok:()=>Jl(),err:()=>xw(t),map:()=>Yl(t),mapOr:n=>n,mapOrElse:n=>n(t),mapErr:n=>Yl(n(t)),expect:n=>{throw new Error(n)},expectErr:()=>t,unwrap:()=>{throw new Error(`${t}`)},unwrapErr:()=>t,unwrapOr:n=>n,unwrapOrElse:n=>n(t),and:()=>Yl(t),andThen:()=>Yl(t),or:n=>n,orElse:n=>n(t)}}function Jl(){const t={and:()=>Jl(),andThen:()=>Jl(),expect:e=>{throw new Error(e)},filter:()=>t,isSome:()=>!1,isSomeAnd:()=>!1,isNone:()=>!0,map:()=>Jl(),mapOr:e=>e,mapOrElse:e=>e(),okOr:e=>Yl(e),okOrElse:e=>Yl(e()),or:e=>e,orElse:e=>e(),unwrap:()=>{throw new Error("panic! call `unwrap` on a `None` value")},unwrapOr:e=>e,unwrapOrElse:e=>e(),xor:e=>e.isSome()?e:t};return t}function xw(t){const e={and:n=>n,andThen:n=>n(t),expect:()=>t,filter:n=>n(t)?e:Jl(),isSome:()=>!0,isSomeAnd:n=>n(t),isNone:()=>!1,map:n=>xw(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),okOr:()=>Gl(t),okOrElse:()=>Gl(t),or:()=>e,orElse:()=>e,unwrap:()=>t,unwrapOr:()=>t,unwrapOrElse:()=>t,xor:n=>n.isNone()?e:Jl()};return e}function m7(t){return t.then(e=>Gl(e),e=>Yl(e))}var u7=setTimeout;function h7(t,e){var n=e.useCachedSetTimeout?u7:setTimeout;return new Promise((function(s){n(s,t)}))}function p7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.useCachedSetTimeout,s=h7(t,{useCachedSetTimeout:n});function a(r){return s.then((function(){return r}))}return a.then=function(){return s.then.apply(s,arguments)},a.catch=Promise.resolve().catch,a}var g7=300;function f7(t){function e(n){const{selectProps:s,innerRef:a}=n,{handleScrolledToBottom:r,shouldLoadMore:o}=s,c=f.useRef(null),d=f.useRef(null),m=f.useCallback(()=>{const h=d.current;if(!h)return!1;const{scrollTop:g,scrollHeight:v,clientHeight:x}=h;return o(v,x,g)},[o]),u=f.useCallback(()=>{m()&&r&&r()},[m,r]),p=f.useMemo(()=>{const h=()=>{u(),c.current=setTimeout(h,g7)};return h},[u]);return f.useEffect(()=>(p(),()=>{c.current&&clearTimeout(c.current)}),[]),i.jsx(t,{...n,innerRef:o7(a,d)})}return e}var v7=f7(b2.MenuList),x7=t=>f.useMemo(()=>({MenuList:v7,...t}),[t]),y7=(t,e)=>[...t,...e],b7=10,w7=(t,e,n)=>t-e-b7<n,BT=t=>({isFirstLoad:!0,options:[],hasMore:!0,isLoading:!1,lockedUntil:0,additional:t.additional}),k7=({options:t,defaultOptions:e,additional:n,defaultAdditional:s})=>{const a=e===!0?null:Array.isArray(e)?e:t;return a?{"":{isFirstLoad:!1,isLoading:!1,options:a,hasMore:!0,lockedUntil:0,additional:s||n}}:{}},zN='[react-select-async-paginate] response of "loadOptions" should be an object with "options" prop, which contains array of options.',j7=t=>{if(!t)return!1;const{options:e,hasMore:n}=t;return!(!Array.isArray(e)||typeof n!="boolean"&&typeof n<"u")},N7=t=>{if(!j7(t))throw console.error(zN,"Received:",t),new Error(zN);return!0},C7=async(t,e,n,s,a,r,o,c)=>{const d=e.current.inputValue,m=!n.current[d],u=m?BT(e.current):n.current[d];if(u.isLoading||!u.hasMore||u.lockedUntil>Date.now())return;if(a(x=>c&&t==="input-change"?{[d]:{...u,isLoading:!0}}:{...x,[d]:{...u,isLoading:!0}}),s>0&&t==="input-change"){await p7(s);const x=e.current.inputValue;if(d!==x){a(y=>{if(m){const{[d]:b,...w}=y;return w}return{...y,[d]:{...u,isLoading:!1}}});return}}const{loadOptions:p,reloadOnErrorTimeout:h=0}=e.current,g=await m7(Promise.resolve().then(()=>p(d,u.options,u.additional)));if(!o.current)return;if(g.isErr()){a(x=>({...x,[d]:{...u,isLoading:!1,lockedUntil:Date.now()+h}}));return}const v=g.unwrap();if(N7(v)){const{options:x,hasMore:y}=v,b=Object.hasOwn(v,"additional")?v.additional:u.additional;a(w=>({...w,[d]:{...u,options:r(u.options,x,b),hasMore:!!y,isLoading:!1,isFirstLoad:!1,additional:b}}))}},Tv=t=>t+1,S7=(t,e=[])=>{const{clearCacheOnSearchChange:n=!1,clearCacheOnMenuClose:s=!1,defaultOptions:a,loadOptionsOnMenuOpen:r=!0,debounceTimeout:o=0,inputValue:c,menuIsOpen:d,filterOption:m=null,reduceOptions:u=y7,shouldLoadMore:p=w7,mapOptionsForMenu:h=void 0}=t,g=ah(d),v=d7(),x=ah(u),y=ah(r),b=f.useRef(!0),w=f.useRef(t);w.current=t;const[k,_]=f.useState(0),j=c7(()=>k7(t)),T=ah(L=>{C7(L,w,j,o,C=>{j.current=C(j.current),v.current&&_(Tv)},x.current,v,n)}),N=f.useCallback(()=>{const L=w.current.inputValue;j.current[L]&&T.current("menu-scroll")},[T,j]);f.useEffect(()=>{b.current?b.current=!1:(j.current={},_(Tv)),a===!0&&T.current("autoload")},e),f.useEffect(()=>{g.current&&!j.current[c]&&T.current("input-change")},[T,c,g,j]),f.useEffect(()=>{if(d){if(!j.current[""]&&y.current){T.current("menu-toggle");return}return}s&&(j.current={},_(Tv))},[T,y,d,j,s]);const E=j.current[c]||BT(t),A=f.useMemo(()=>h?h(E.options):E.options,[E.options,h]);return{handleScrolledToBottom:N,shouldLoadMore:p,filterOption:m,isLoading:E.isLoading||E.lockedUntil>Date.now(),isFirstLoad:E.isFirstLoad,options:A}},_7=(t,e=[])=>{const{inputValue:n,menuIsOpen:s,defaultInputValue:a,defaultMenuIsOpen:r,onInputChange:o,onMenuClose:c,onMenuOpen:d}=t,[m,u]=f.useState(a||""),[p,h]=f.useState(!!r),g=typeof n=="string"?n:m,v=typeof s=="boolean"?s:p,x=f.useCallback((k,_)=>{o&&o(k,_),u(k)},[o]),y=f.useCallback(()=>{c&&c(),h(!1)},[c]),b=f.useCallback(()=>{d&&d(),h(!0)},[d]);return{...S7({...t,inputValue:g,menuIsOpen:v},e),inputValue:g,menuIsOpen:v,onInputChange:x,onMenuClose:y,onMenuOpen:b}},E7=[],T7={};function A7(t){function e(n){const{components:s=T7,selectRef:a=void 0,isLoading:r,cacheUniqs:o=E7,menuPlacement:c,menuShouldScrollIntoView:d,...m}=n,u=_7(m,o),p=x7(s),h=typeof r=="boolean"?r:u.isLoading;return i.jsx(t,{...n,...u,menuPlacement:c,menuShouldScrollIntoView:c==="auto"&&h?!1:d,isLoading:h,components:p,ref:a})}return e}var D7=A7(lt);const Xt=({id:t,value:e,onChange:n,placeholder:s,isSearchable:a=!0,isLoading:r=!1,isDisabled:o=!1,isMulti:c=!1,closeMenuOnSelect:d=!0,getOptionValue:m,getOptionLabel:u,customComponents:p={},loadOptions:h,dependencies:g={},searchPlaceholder:v=l("Search...","kivicare-clinic-management-system"),noOptionsMessage:x=l("No options available","kivicare-clinic-management-system"),loadingMessage:y=l("Loading...","kivicare-clinic-management-system"),debounceTimeout:b=300,additional:w={},isCreatable:k=!1,onCreateOption:_,formatCreateLabel:j=N=>`Create "${N}"`,...T})=>{const[N,E]=f.useState({page:1}),A=JSON.stringify(g),L=f.useCallback(async(M,O,{page:q})=>{if(console.log(" asyncLoadOptions called:",{searchQuery:M,page:q,dependencies:g}),!h)return{options:[],hasMore:!1,additional:{page:1}};try{const U={page:q||1,per_page:10,search:M||"",...g};console.log(" Calling loadOptions with params:",U);const H=await h(U);console.log(" Received result:",H);const ae=H?.data??H??[],V=H?.pagination??{},pe=Array.isArray(ae)?ae:[],oe=!!(V.has_more||V.current_page<V.total_pages);return console.log(" Returning options:",{optionsCount:pe.length,hasMore:oe,nextPage:(q||1)+1}),k&&M&&pe.length===0&&pe.push({value:"__create__",label:j(M),isCreateOption:!0,inputValue:M}),{options:pe,hasMore:oe,additional:{page:(q||1)+1}}}catch(U){return console.error(" Async load options error:",U),{options:[],hasMore:!1,additional:{page:1}}}},[h,A]);f.useEffect(()=>{console.log(" Dependencies changed! Resetting page to 1. New dependencies:",g),E({page:1})},[A]);const C=M=>{try{const O=m?m(M):M?.value??M?.id??"";return String(O??"")}catch{return""}},P=M=>{try{return u?u(M):M?.label??M?.name??M?.title??""}catch{return""}},R=(M,O)=>{if(M&&M.isCreateOption){_&&_(M.inputValue);return}if(c&&Array.isArray(M)){const q=new Set,U=[];M.forEach(H=>{const ae=C(H);q.has(ae)||(q.add(ae),U.push(H))}),n(U,O);return}n(M,O)};return i.jsx(D7,{id:t,value:e,loadOptions:L,onChange:R,additional:N,placeholder:s,isDisabled:o,isMulti:c,closeMenuOnSelect:d,debounceTimeout:b,isSearchable:a,getOptionValue:C,getOptionLabel:P,components:{...p||{}},styles:{menuPortal:M=>({...M,zIndex:9999})},cacheUniqueValue:A,...T})},Cl={getDoctorServices:(t={})=>ve({endpoint:"doctor-services",method:"GET",data:t}),getDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"GET"}),createDoctorService:t=>ve({endpoint:"doctor-services",method:"POST",data:t}),updateDoctorService:(t,e)=>ve({endpoint:`doctor-services/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`doctor-services/${t}/resend-credentials`,method:"POST"}),deleteDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"DELETE"}),bulkDeleteDoctorServices:t=>ve({endpoint:"doctor-services/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorServiceStatus:(t,e)=>ve({endpoint:"doctor-services/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportServices:(t={})=>ve({endpoint:"doctor-services/export",method:"GET",data:t})};class R7{async getStaticData(e={}){const{dataType:n="staticData",staticDataType:s,...a}=e,r=new URLSearchParams({dataType:n,...s&&{staticDataType:s},...a});return ve({endpoint:`static-data?${r}`,method:"GET"})}async getClinics(e={}){const n={dataType:"clinicList",page:e.page||1,per_page:e.per_page||10};return e.search&&e.search!=="undefined"&&e.search!=="null"&&(n.search=e.search),this.getStaticData(n)}async getStaticDataByType(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticData",type:e})}async getStaticDataWithLabel(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataWithLabel",type:e})}async getStaticDataWithPagination(e,n={}){const s={dataType:"staticData",staticDataType:"staticDataWithLabel",type:e,page:n.page||1,per_page:n.per_page||10};return n.search&&n.search!=="undefined"&&n.search!=="null"&&(s.search=n.search),this.getStaticData(s)}async getStaticDataTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataTypes"})}async getDoctors(e=null){const n={dataType:"staticData",staticDataType:"doctors"};return e&&(n.clinic_ids=e),this.getStaticData(n)}async getClinicDoctors(e,n={}){const s={};return e&&typeof e=="object"&&e!==null?e.length>0&&(s.clinic_ids=e.join(",")):e&&(s.clinic_id=e),this.getStaticData({dataType:"staticData",staticDataType:"clinicDoctors",...s,...n})}async getDefaultClinic(){return this.getStaticData({dataType:"staticData",staticDataType:"defaultClinic"})}async getServicesWithPrice(e=null,n=null){const s={dataType:"staticData",staticDataType:"servicesWithPrice"};return e&&(s.clinic_id=e),n&&(Array.isArray(n)?s.doctor_ids=n.join(","):s.doctor_id=n),this.getStaticData(s)}async getPatientClinics(e){return this.getStaticData({dataType:"staticData",staticDataType:"patientClinic",patient_id:e})}async getPrescriptions(){return this.getStaticData({dataType:"staticData",staticDataType:"prescriptions"})}async getEmailTemplateTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateType"})}async getEmailTemplateKeys(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateKey"})}async getUsersByClinic(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"getUsersByClinic",clinic_id:e,...n})}async getUsersByRole(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"users",role:e,...n})}async createSpecialty(e,n="specialization"){try{const s=await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:n}});return console.log("StaticDataService.createSpecialty response:",s),s}catch(s){throw console.error("StaticDataService.createSpecialty error:",s),s}}async createProblem(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_problems"}})}catch(n){throw console.error("StaticDataService.createProblem error:",n),n}}async createObservation(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_observations"}})}catch(n){throw console.error("StaticDataService.createObservation error:",n),n}}}const Et=new R7,Sl=()=>typeof window<"u"&&window.kc_frontend&&window.kc_frontend.prefix?window.kc_frontend.prefix:"kiviCare_";Sl();const ut={all:["staticData"],lists:()=>[...ut.all,"list"],list:t=>[...ut.lists(),{params:t}],types:()=>[...ut.all,"types"],type:t=>[...ut.types(),t],clinics:()=>[...ut.all,"clinics"],doctors:()=>[...ut.all,"doctors"],doctorsByClinic:t=>[...ut.doctors(),"clinic",t],services:()=>[...ut.all,"services"],servicesWithPrice:t=>[...ut.services(),"withPrice",t],users:()=>[...ut.all,"users"],usersByRole:t=>[...ut.users(),"role",t],usersByClinic:t=>[...ut.users(),"clinic",t],prescriptions:()=>[...ut.all,"prescriptions"],emailTemplates:()=>[...ut.all,"emailTemplates"],patientClinics:t=>[...ut.all,"patientClinics",t]},Np=(t={},e={})=>gt({queryKey:ut.list(t),queryFn:()=>Et.getStaticData(t),staleTime:300*1e3,...e}),Og=(t={},e)=>gt({queryKey:ut.clinics(),queryFn:()=>Et.getClinics(e),staleTime:600*1e3,...t}),Ua=(t,e={})=>gt({queryKey:[...ut.type(t),"withLabel"],queryFn:()=>Et.getStaticDataWithLabel(t),enabled:!!t,staleTime:900*1e3,...e}),qT=(t=null,e={})=>{const n=t?ut.doctorsByClinic(t):ut.doctors();return gt({queryKey:n,queryFn:()=>Et.getDoctors(t),staleTime:300*1e3,...e})},HT=(t,e={},n={})=>gt({queryKey:[...ut.doctorsByClinic(t),"detailed",e],queryFn:()=>Et.getClinicDoctors(t,e),enabled:!!t,staleTime:300*1e3,...n}),P7=(t={})=>gt({queryKey:[...ut.clinics(),"default"],queryFn:()=>Et.getDefaultClinic(),staleTime:1800*1e3,...t}),M7=(t={},e={})=>{const{clinicId:n,doctorId:s}=t;return gt({queryKey:ut.servicesWithPrice({clinicId:n,doctorId:s}),queryFn:()=>Et.getServicesWithPrice(n,s),staleTime:300*1e3,...e})},I7=()=>{const t=Ke();return{prefetchClinics:()=>{t.prefetchQuery({queryKey:ut.clinics(),queryFn:()=>Et.getClinics(),staleTime:600*1e3})},prefetchDoctors:(a=null)=>{const r=a?ut.doctorsByClinic(a):ut.doctors();t.prefetchQuery({queryKey:r,queryFn:()=>Et.getDoctors(a),staleTime:300*1e3})},prefetchStaticDataTypes:()=>{t.prefetchQuery({queryKey:ut.types(),queryFn:()=>Et.getStaticDataTypes(),staleTime:1800*1e3})}}},Lg=({specialty_type:t="specialization"}={})=>{const e=Ke();return He({mutationFn:n=>Et.createSpecialty(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:[...ut.type(t),"withLabel"]})}})},O7=()=>{const t=Ke();return He({mutationFn:e=>Et.createProblem(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...ut.type("clinical_problems"),"withLabel"]})}})},L7=()=>{const t=Ke();return He({mutationFn:e=>Et.createObservation(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...ut.type("clinical_observations"),"withLabel"]})}})},F7=()=>{const t=Ke();return He({mutationFn:e=>Et.createSpecialty(e,"prescription_medicine"),onSuccess:()=>{t.invalidateQueries({queryKey:[...ut.type("prescription_medicine"),"withLabel"]})}})},$7=()=>{const t=Sl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},B7=()=>{const t=Sl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},q7=()=>(Sl(),["administrator"]),H7=()=>["administrator",`${Sl()}clinic_admin`],z7=()=>{const t=Sl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},V7=()=>{const t=Sl();return["administrator",`${t}clinic_admin`,`${t}receptionist`]},U7=()=>{const t=Sl();return[`${t}doctor`,`${t}receptionist`]},Us={all:["doctorServices"],lists:()=>[...Us.all,"list"],list:t=>[...Us.lists(),{filters:t}],details:()=>[...Us.all,"detail"],detail:t=>[...Us.details(),t]},W7=(t={},e={})=>gt({queryKey:Us.list(t),queryFn:()=>Cl.getDoctorServices(t),...e}),K7=(t,e={})=>gt({queryKey:Us.detail(t),queryFn:()=>Cl.getDoctorService(t),enabled:!!t,...e}),G7=()=>{const t=Ke();return He({mutationFn:e=>Cl.createDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:ut.services()}),t.invalidateQueries({queryKey:["stats","service"]})}})},Y7=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Cl.updateDoctorService(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Us.detail(n.id)}),t.invalidateQueries({queryKey:Us.lists()})}})},Q7=()=>{const t=Ke();return He({mutationFn:e=>Cl.deleteDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},Z7=()=>{const t=Ke();return He({mutationFn:e=>Cl.bulkDeleteDoctorServices(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},X7=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>Cl.bulkUpdateDoctorServiceStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})};function zT(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function J7(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function VN(t,e){return t.get(zT(t,e))}function eH(t,e,n){J7(t,e),e.set(t,n)}function tH(t,e,n){return t.set(zT(t,e),n),n}const nH=100,Lt={},iH=()=>{Lt.previousActiveElement instanceof HTMLElement?(Lt.previousActiveElement.focus(),Lt.previousActiveElement=null):document.body&&document.body.focus()},sH=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;Lt.restoreFocusTimeout=setTimeout(()=>{iH(),e()},nH),window.scrollTo(n,s)}),VT="swal2-",aH=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],qe=aH.reduce((t,e)=>(t[e]=VT+e,t),{}),rH=["success","warning","info","question","error"],Cp=rH.reduce((t,e)=>(t[e]=VT+e,t),{}),UT="SweetAlert2:",yw=t=>t.charAt(0).toUpperCase()+t.slice(1),Ji=t=>{console.warn(`${UT} ${typeof t=="object"?t.join(" "):t}`)},Eo=t=>{console.error(`${UT} ${t}`)},UN=[],lH=t=>{UN.includes(t)||(UN.push(t),Ji(t))},WT=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;lH(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Fg=t=>typeof t=="function"?t():t,bw=t=>t&&typeof t.toPromise=="function",Zm=t=>bw(t)?t.toPromise():Promise.resolve(t),ww=t=>t&&Promise.resolve(t)===t,es=()=>document.body.querySelector(`.${qe.container}`),Xm=t=>{const e=es();return e?e.querySelector(t):null},As=t=>Xm(`.${t}`),cn=()=>As(qe.popup),nd=()=>As(qe.icon),oH=()=>As(qe["icon-content"]),KT=()=>As(qe.title),kw=()=>As(qe["html-container"]),GT=()=>As(qe.image),jw=()=>As(qe["progress-steps"]),$g=()=>As(qe["validation-message"]),Wa=()=>Xm(`.${qe.actions} .${qe.confirm}`),id=()=>Xm(`.${qe.actions} .${qe.cancel}`),To=()=>Xm(`.${qe.actions} .${qe.deny}`),cH=()=>As(qe["input-label"]),sd=()=>Xm(`.${qe.loader}`),Jm=()=>As(qe.actions),YT=()=>As(qe.footer),Bg=()=>As(qe["timer-progress-bar"]),Nw=()=>As(qe.close),dH=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Cw=()=>{const t=cn();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((r,o)=>{const c=parseInt(r.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return c>d?1:c<d?-1:0}),s=t.querySelectorAll(dH),a=Array.from(s).filter(r=>r.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(r=>hs(r))},Sw=()=>Sr(document.body,qe.shown)&&!Sr(document.body,qe["toast-shown"])&&!Sr(document.body,qe["no-backdrop"]),qg=()=>{const t=cn();return t?Sr(t,qe.toast):!1},mH=()=>{const t=cn();return t?t.hasAttribute("data-loading"):!1},Ds=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{t.appendChild(o)});const r=s.querySelector("body");r&&Array.from(r.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?t.appendChild(o.cloneNode(!0)):t.appendChild(o)})}},Sr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},uH=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(qe).includes(n)&&!Object.values(Cp).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},Ts=(t,e,n)=>{if(uH(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){Ji(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}tn(t,s)}},Hg=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${qe.popup} > .${qe[e]}`);case"checkbox":return t.querySelector(`.${qe.popup} > .${qe.checkbox} input`);case"radio":return t.querySelector(`.${qe.popup} > .${qe.radio} input:checked`)||t.querySelector(`.${qe.popup} > .${qe.radio} input:first-child`);case"range":return t.querySelector(`.${qe.popup} > .${qe.range} input`);default:return t.querySelector(`.${qe.popup} > .${qe.input}`)}},QT=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},ZT=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(s):a.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},tn=(t,e)=>{ZT(t,e,!0)},ea=(t,e)=>{ZT(t,e,!1)},nl=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const a=n[s];if(a instanceof HTMLElement&&Sr(a,e))return a}},eo=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},xi=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},$i=t=>{t&&(t.style.display="none")},_w=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{eu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},WN=(t,e,n,s)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,s)},eu=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?xi(t,n):$i(t)},hs=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),hH=()=>!hs(Wa())&&!hs(To())&&!hs(id()),KN=t=>t.scrollHeight>t.clientHeight,XT=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},Ew=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=Bg();n&&hs(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},pH=()=>{const t=Bg();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},gH=()=>typeof window>"u"||typeof document>"u",fH=`
 <div aria-labelledby="${qe.title}" aria-describedby="${qe["html-container"]}" class="${qe.popup}" tabindex="-1">
   <button type="button" class="${qe.close}"></button>
   <ul class="${qe["progress-steps"]}"></ul>
   <div class="${qe.icon}"></div>
   <img class="${qe.image}" />
   <h2 class="${qe.title}" id="${qe.title}"></h2>
   <div class="${qe["html-container"]}" id="${qe["html-container"]}"></div>
   <input class="${qe.input}" id="${qe.input}" />
   <input type="file" class="${qe.file}" />
   <div class="${qe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${qe.select}" id="${qe.select}"></select>
   <div class="${qe.radio}"></div>
   <label class="${qe.checkbox}">
     <input type="checkbox" id="${qe.checkbox}" />
     <span class="${qe.label}"></span>
   </label>
   <textarea class="${qe.textarea}" id="${qe.textarea}"></textarea>
   <div class="${qe["validation-message"]}" id="${qe["validation-message"]}"></div>
   <div class="${qe.actions}">
     <div class="${qe.loader}"></div>
     <button type="button" class="${qe.confirm}"></button>
     <button type="button" class="${qe.deny}"></button>
     <button type="button" class="${qe.cancel}"></button>
   </div>
   <div class="${qe.footer}"></div>
   <div class="${qe["timer-progress-bar-container"]}">
     <div class="${qe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),vH=()=>{const t=es();return t?(t.remove(),ea([document.documentElement,document.body],[qe["no-backdrop"],qe["toast-shown"],qe["has-column"]]),!0):!1},$l=()=>{Lt.currentInstance.resetValidationMessage()},xH=()=>{const t=cn(),e=nl(t,qe.input),n=nl(t,qe.file),s=t.querySelector(`.${qe.range} input`),a=t.querySelector(`.${qe.range} output`),r=nl(t,qe.select),o=t.querySelector(`.${qe.checkbox} input`),c=nl(t,qe.textarea);e.oninput=$l,n.onchange=$l,r.onchange=$l,o.onchange=$l,c.oninput=$l,s.oninput=()=>{$l(),a.value=s.value},s.onchange=()=>{$l(),a.value=s.value}},yH=t=>typeof t=="string"?document.querySelector(t):t,bH=t=>{const e=cn();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},wH=t=>{window.getComputedStyle(t).direction==="rtl"&&tn(es(),qe.rtl)},kH=t=>{const e=vH();if(gH()){Eo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=qe.container,e&&tn(n,qe["no-transition"]),Ds(n,fH),n.dataset.swal2Theme=t.theme;const s=yH(t.target);s.appendChild(n),bH(t),wH(s),xH()},Tw=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?jH(t,e):t&&Ds(e,t)},jH=(t,e)=>{t.jquery?NH(e,t):Ds(e,t.toString())},NH=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},CH=(t,e)=>{const n=Jm(),s=sd();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?$i(n):xi(n),Ts(n,e,"actions"),SH(n,s,e),Ds(s,e.loaderHtml||""),Ts(s,e,"loader"))};function SH(t,e,n){const s=Wa(),a=To(),r=id();!s||!a||!r||(Av(s,"confirm",n),Av(a,"deny",n),Av(r,"cancel",n),_H(s,a,r,n),n.reverseButtons&&(n.toast?(t.insertBefore(r,s),t.insertBefore(a,s)):(t.insertBefore(r,e),t.insertBefore(a,e),t.insertBefore(s,e))))}function _H(t,e,n,s){if(!s.buttonsStyling){ea([t,e,n],qe.styled);return}tn([t,e,n],qe.styled),s.confirmButtonColor&&(t.style.backgroundColor=s.confirmButtonColor,tn(t,qe["default-outline"])),s.denyButtonColor&&(e.style.backgroundColor=s.denyButtonColor,tn(e,qe["default-outline"])),s.cancelButtonColor&&(n.style.backgroundColor=s.cancelButtonColor,tn(n,qe["default-outline"]))}function Av(t,e,n){const s=yw(e);eu(t,n[`show${s}Button`],"inline-block"),Ds(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=qe[e],Ts(t,n,`${e}Button`)}const EH=(t,e)=>{const n=Nw();n&&(Ds(n,e.closeButtonHtml||""),Ts(n,e,"closeButton"),eu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},TH=(t,e)=>{const n=es();n&&(AH(n,e.backdrop),DH(n,e.position),RH(n,e.grow),Ts(n,e,"container"))};function AH(t,e){typeof e=="string"?t.style.background=e:e||tn([document.documentElement,document.body],qe["no-backdrop"])}function DH(t,e){e&&(e in qe?tn(t,qe[e]):(Ji('The "position" parameter is not valid, defaulting to "center"'),tn(t,qe.center)))}function RH(t,e){e&&tn(t,qe[`grow-${e}`])}var In={innerParams:new WeakMap,domCache:new WeakMap};const PH=["input","file","range","select","radio","checkbox","textarea"],MH=(t,e)=>{const n=cn();if(!n)return;const s=In.innerParams.get(t),a=!s||e.input!==s.input;PH.forEach(r=>{const o=nl(n,qe[r]);o&&(LH(r,e.inputAttributes),o.className=qe[r],a&&$i(o))}),e.input&&(a&&IH(e),FH(e))},IH=t=>{if(!t.input)return;if(!ni[t.input]){Eo(`Unexpected type of input! Expected ${Object.keys(ni).join(" | ")}, got "${t.input}"`);return}const e=JT(t.input);if(!e)return;const n=ni[t.input](e,t);xi(e),t.inputAutoFocus&&setTimeout(()=>{QT(n)})},OH=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},LH=(t,e)=>{const n=cn();if(!n)return;const s=Hg(n,t);if(s){OH(s);for(const a in e)s.setAttribute(a,e[a])}},FH=t=>{if(!t.input)return;const e=JT(t.input);e&&Ts(e,t,"input")},Aw=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},tu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),a=qe["input-label"];s.setAttribute("for",t.id),s.className=a,typeof n.customClass=="object"&&tn(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},JT=t=>{const e=cn();if(e)return nl(e,qe[t]||qe.input)},Sp=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:ww(e)||Ji(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},ni={};ni.text=ni.email=ni.password=ni.number=ni.tel=ni.url=ni.search=ni.date=ni["datetime-local"]=ni.time=ni.week=ni.month=(t,e)=>(Sp(t,e.inputValue),tu(t,t,e),Aw(t,e),t.type=e.input,t);ni.file=(t,e)=>(tu(t,t,e),Aw(t,e),t);ni.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return Sp(n,e.inputValue),n.type=e.input,Sp(s,e.inputValue),tu(n,t,e),t};ni.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");Ds(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return tu(t,t,e),t};ni.radio=t=>(t.textContent="",t);ni.checkbox=(t,e)=>{const n=Hg(cn(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return Ds(s,e.inputPlaceholder||e.inputLabel),n};ni.textarea=(t,e)=>{Sp(t,e.inputValue),Aw(t,e),tu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(cn()).width),a=()=>{if(!document.body.contains(t))return;const r=t.offsetWidth+n(t);r>s?cn().style.width=`${r}px`:eo(cn(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const $H=(t,e)=>{const n=kw();n&&(_w(n),Ts(n,e,"htmlContainer"),e.html?(Tw(e.html,n),xi(n,"block")):e.text?(n.textContent=e.text,xi(n,"block")):$i(n),MH(t,e))},BH=(t,e)=>{const n=YT();n&&(_w(n),eu(n,e.footer,"block"),e.footer&&Tw(e.footer,n),Ts(n,e,"footer"))},qH=(t,e)=>{const n=In.innerParams.get(t),s=nd();if(!s)return;if(n&&e.icon===n.icon){YN(s,e),GN(s,e);return}if(!e.icon&&!e.iconHtml){$i(s);return}if(e.icon&&Object.keys(Cp).indexOf(e.icon)===-1){Eo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),$i(s);return}xi(s),YN(s,e),GN(s,e),tn(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",eA)},GN=(t,e)=>{for(const[n,s]of Object.entries(Cp))e.icon!==n&&ea(t,s);tn(t,e.icon&&Cp[e.icon]),VH(t,e),eA(),Ts(t,e,"icon")},eA=()=>{const t=cn();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},HH=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,zH=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,YN=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=QN(e.iconHtml):e.icon==="success"?(s=HH,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=zH:e.icon&&(s=QN({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&Ds(t,s)},VH=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])WN(t,n,"background-color",e.iconColor);WN(t,".swal2-success-ring","border-color",e.iconColor)}},QN=t=>`<div class="${qe["icon-content"]}">${t}</div>`,UH=(t,e)=>{const n=GT();if(n){if(!e.imageUrl){$i(n);return}xi(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),eo(n,"width",e.imageWidth),eo(n,"height",e.imageHeight),n.className=qe.image,Ts(n,e,"image")}};let Dw=!1,tA=0,nA=0,iA=0,sA=0;const WH=t=>{t.addEventListener("mousedown",_p),document.body.addEventListener("mousemove",Ep),t.addEventListener("mouseup",Tp),t.addEventListener("touchstart",_p),document.body.addEventListener("touchmove",Ep),t.addEventListener("touchend",Tp)},KH=t=>{t.removeEventListener("mousedown",_p),document.body.removeEventListener("mousemove",Ep),t.removeEventListener("mouseup",Tp),t.removeEventListener("touchstart",_p),document.body.removeEventListener("touchmove",Ep),t.removeEventListener("touchend",Tp)},_p=t=>{const e=cn();if(t.target===e||nd().contains(t.target)){Dw=!0;const n=aA(t);tA=n.clientX,nA=n.clientY,iA=parseInt(e.style.insetInlineStart)||0,sA=parseInt(e.style.insetBlockStart)||0,tn(e,"swal2-dragging")}},Ep=t=>{const e=cn();if(Dw){let{clientX:n,clientY:s}=aA(t);e.style.insetInlineStart=`${iA+(n-tA)}px`,e.style.insetBlockStart=`${sA+(s-nA)}px`}},Tp=()=>{const t=cn();Dw=!1,ea(t,"swal2-dragging")},aA=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},GH=(t,e)=>{const n=es(),s=cn();if(!(!n||!s)){if(e.toast){eo(n,"width",e.width),s.style.width="100%";const a=sd();a&&s.insertBefore(a,nd())}else eo(s,"width",e.width);eo(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),$i($g()),YH(s,e),e.draggable&&!e.toast?(tn(s,qe.draggable),WH(s)):(ea(s,qe.draggable),KH(s))}},YH=(t,e)=>{const n=e.showClass||{};t.className=`${qe.popup} ${hs(t)?n.popup:""}`,e.toast?(tn([document.documentElement,document.body],qe["toast-shown"]),tn(t,qe.toast)):tn(t,qe.modal),Ts(t,e,"popup"),typeof e.customClass=="string"&&tn(t,e.customClass),e.icon&&tn(t,qe[`icon-${e.icon}`])},QH=(t,e)=>{const n=jw();if(!n)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){$i(n);return}xi(n),n.textContent="",a>=s.length&&Ji("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((r,o)=>{const c=ZH(r);if(n.appendChild(c),o===a&&tn(c,qe["active-progress-step"]),o!==s.length-1){const d=XH(e);n.appendChild(d)}})},ZH=t=>{const e=document.createElement("li");return tn(e,qe["progress-step"]),Ds(e,t),e},XH=t=>{const e=document.createElement("li");return tn(e,qe["progress-step-line"]),t.progressStepsDistance&&eo(e,"width",t.progressStepsDistance),e},JH=(t,e)=>{const n=KT();n&&(_w(n),eu(n,e.title||e.titleText,"block"),e.title&&Tw(e.title,n),e.titleText&&(n.innerText=e.titleText),Ts(n,e,"title"))},rA=(t,e)=>{GH(t,e),TH(t,e),QH(t,e),qH(t,e),UH(t,e),JH(t,e),EH(t,e),$H(t,e),CH(t,e),BH(t,e);const n=cn();typeof e.didRender=="function"&&n&&e.didRender(n),Lt.eventEmitter.emit("didRender",n)},ez=()=>hs(cn()),lA=()=>{var t;return(t=Wa())===null||t===void 0?void 0:t.click()},tz=()=>{var t;return(t=To())===null||t===void 0?void 0:t.click()},nz=()=>{var t;return(t=id())===null||t===void 0?void 0:t.click()},ad=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),oA=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},iz=(t,e,n)=>{oA(t),e.toast||(t.keydownHandler=s=>az(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:cn(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},sy=(t,e)=>{var n;const s=Cw();if(s.length){t=t+e,t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=cn())===null||n===void 0||n.focus()},cA=["ArrowRight","ArrowDown"],sz=["ArrowLeft","ArrowUp"],az=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?rz(e,t):e.key==="Tab"?lz(e):[...cA,...sz].includes(e.key)?oz(e.key):e.key==="Escape"&&cz(e,t,n)))},rz=(t,e)=>{if(!Fg(e.allowEnterKey))return;const n=Hg(cn(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;lA(),t.preventDefault()}},lz=t=>{const e=t.target,n=Cw();let s=-1;for(let a=0;a<n.length;a++)if(e===n[a]){s=a;break}t.shiftKey?sy(s,-1):sy(s,1),t.stopPropagation(),t.preventDefault()},oz=t=>{const e=Jm(),n=Wa(),s=To(),a=id();if(!e||!n||!s||!a)return;const r=[n,s,a];if(document.activeElement instanceof HTMLElement&&!r.includes(document.activeElement))return;const o=cA.includes(t)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let d=0;d<e.children.length;d++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&hs(c))break}c instanceof HTMLButtonElement&&c.focus()}},cz=(t,e,n)=>{Fg(e.allowEscapeKey)&&(t.preventDefault(),n(ad.esc))};var Bc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const dz=()=>{const t=es();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},dA=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},mA=typeof window<"u"&&!!window.GestureEvent,mz=()=>{if(mA&&!Sr(document.body,qe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,tn(document.body,qe.iosfix),uz()}},uz=()=>{const t=es();if(!t)return;let e;t.ontouchstart=n=>{e=hz(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},hz=t=>{const e=t.target,n=es(),s=kw();return!n||!s||pz(t)||gz(t)?!1:e===n||!KN(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(KN(s)&&s.contains(e))},pz=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",gz=t=>t.touches&&t.touches.length>1,fz=()=>{if(Sr(document.body,qe.iosfix)){const t=parseInt(document.body.style.top,10);ea(document.body,qe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},vz=()=>{const t=document.createElement("div");t.className=qe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let bc=null;const xz=t=>{bc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(bc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${bc+vz()}px`)},yz=()=>{bc!==null&&(document.body.style.paddingRight=`${bc}px`,bc=null)};function uA(t,e,n,s){qg()?ZN(t,s):(sH(n).then(()=>ZN(t,s)),oA(Lt)),mA?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Sw()&&(yz(),fz(),dA()),bz()}function bz(){ea([document.documentElement,document.body],[qe.shown,qe["height-auto"],qe["no-backdrop"],qe["toast-shown"]])}function il(t){t=kz(t);const e=Bc.swalPromiseResolve.get(this),n=wz(this);this.isAwaitingPromise?t.isDismissed||(nu(this),e(t)):n&&e(t)}const wz=t=>{const e=cn();if(!e)return!1;const n=In.innerParams.get(t);if(!n||Sr(e,n.hideClass.popup))return!1;ea(e,n.showClass.popup),tn(e,n.hideClass.popup);const s=es();return ea(s,n.showClass.backdrop),tn(s,n.hideClass.backdrop),jz(t,e,n),!0};function hA(t){const e=Bc.swalPromiseReject.get(this);nu(this),e&&e(t)}const nu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,In.innerParams.get(t)||t._destroy())},kz=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),jz=(t,e,n)=>{var s;const a=es(),r=XT(e);typeof n.willClose=="function"&&n.willClose(e),(s=Lt.eventEmitter)===null||s===void 0||s.emit("willClose",e),r?Nz(t,e,a,n.returnFocus,n.didClose):uA(t,a,n.returnFocus,n.didClose)},Nz=(t,e,n,s,a)=>{Lt.swalCloseEventFinishedCallback=uA.bind(null,t,n,s,a);const r=function(o){if(o.target===e){var c;(c=Lt.swalCloseEventFinishedCallback)===null||c===void 0||c.call(Lt),delete Lt.swalCloseEventFinishedCallback,e.removeEventListener("animationend",r),e.removeEventListener("transitionend",r)}};e.addEventListener("animationend",r),e.addEventListener("transitionend",r)},ZN=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Lt.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},qc=t=>{let e=cn();if(e||new $t,e=cn(),!e)return;const n=sd();qg()?$i(nd()):Cz(e,t),xi(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Cz=(t,e)=>{const n=Jm(),s=sd();!n||!s||(!e&&hs(Wa())&&(e=Wa()),xi(n),e&&($i(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),tn([t,n],qe.loading))},Sz=(t,e)=>{e.input==="select"||e.input==="radio"?Dz(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(bw(e.inputValue)||ww(e.inputValue))&&(qc(Wa()),Rz(t,e))},_z=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return Ez(n);case"radio":return Tz(n);case"file":return Az(n);default:return e.inputAutoTrim?n.value.trim():n.value}},Ez=t=>t.checked?1:0,Tz=t=>t.checked?t.value:null,Az=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,Dz=(t,e)=>{const n=cn();if(!n)return;const s=a=>{e.input==="select"?Pz(n,Ap(a),e):e.input==="radio"&&Mz(n,Ap(a),e)};bw(e.inputOptions)||ww(e.inputOptions)?(qc(Wa()),Zm(e.inputOptions).then(a=>{t.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):Eo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},Rz=(t,e)=>{const n=t.getInput();n&&($i(n),Zm(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,xi(n),n.focus(),t.hideLoading()}).catch(s=>{Eo(`Error in inputValue promise: ${s}`),n.value="",xi(n),n.focus(),t.hideLoading()}))};function Pz(t,e,n){const s=nl(t,qe.select);if(!s)return;const a=(r,o,c)=>{const d=document.createElement("option");d.value=c,Ds(d,o),d.selected=pA(c,n.inputValue),r.appendChild(d)};e.forEach(r=>{const o=r[0],c=r[1];if(Array.isArray(c)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,s.appendChild(d),c.forEach(m=>a(d,m[1],m[0]))}else a(s,c,o)}),s.focus()}function Mz(t,e,n){const s=nl(t,qe.radio);if(!s)return;e.forEach(r=>{const o=r[0],c=r[1],d=document.createElement("input"),m=document.createElement("label");d.type="radio",d.name=qe.radio,d.value=o,pA(o,n.inputValue)&&(d.checked=!0);const u=document.createElement("span");Ds(u,c),u.className=qe.label,m.appendChild(d),m.appendChild(u),s.appendChild(m)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const Ap=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let a=n;typeof a=="object"&&(a=Ap(a)),e.push([s,a])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Ap(s)),e.push([n,s])}),e},pA=(t,e)=>!!e&&e.toString()===t.toString(),Iz=t=>{const e=In.innerParams.get(t);t.disableButtons(),e.input?gA(t,"confirm"):Pw(t,!0)},Oz=t=>{const e=In.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?gA(t,"deny"):Rw(t,!1)},Lz=(t,e)=>{t.disableButtons(),e(ad.cancel)},gA=(t,e)=>{const n=In.innerParams.get(t);if(!n.input){Eo(`The "input" parameter is needed to be set when using returnInputValueOn${yw(e)}`);return}const s=t.getInput(),a=_z(t,n);n.inputValidator?Fz(t,a,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?Rw(t,a):Pw(t,a)},Fz=(t,e,n)=>{const s=In.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Zm(s.inputValidator(e,s.validationMessage))).then(r=>{t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):n==="deny"?Rw(t,e):Pw(t,e)})},Rw=(t,e)=>{const n=In.innerParams.get(t||void 0);n.showLoaderOnDeny&&qc(To()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),nu(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>fA(t||void 0,a))):t.close({isDenied:!0,value:e})},XN=(t,e)=>{t.close({isConfirmed:!0,value:e})},fA=(t,e)=>{t.rejectPromise(e)},Pw=(t,e)=>{const n=In.innerParams.get(t||void 0);n.showLoaderOnConfirm&&qc(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preConfirm(e,n.validationMessage))).then(a=>{hs($g())||a===!1?(t.hideLoading(),nu(t)):XN(t,typeof a>"u"?e:a)}).catch(a=>fA(t||void 0,a))):XN(t,e)};function Dp(){const t=In.innerParams.get(this);if(!t)return;const e=In.domCache.get(this);$i(e.loader),qg()?t.icon&&xi(nd()):$z(e),ea([e.popup,e.actions],qe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const $z=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?xi(e[0],"inline-block"):hH()&&$i(t.actions)};function vA(){const t=In.innerParams.get(this),e=In.domCache.get(this);return e?Hg(e.popup,t.input):null}function xA(t,e,n){const s=In.domCache.get(t);e.forEach(a=>{s[a].disabled=n})}function yA(t,e){const n=cn();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${qe.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else t.disabled=e}function bA(){xA(this,["confirmButton","denyButton","cancelButton"],!1)}function wA(){xA(this,["confirmButton","denyButton","cancelButton"],!0)}function kA(){yA(this.getInput(),!1)}function jA(){yA(this.getInput(),!0)}function NA(t){const e=In.domCache.get(this),n=In.innerParams.get(this);Ds(e.validationMessage,t),e.validationMessage.className=qe["validation-message"],n.customClass&&n.customClass.validationMessage&&tn(e.validationMessage,n.customClass.validationMessage),xi(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",qe["validation-message"]),QT(s),tn(s,qe.inputerror))}function CA(){const t=In.domCache.get(this);t.validationMessage&&$i(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),ea(e,qe.inputerror))}const wc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Bz=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],qz={allowEnterKey:void 0},Hz=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],SA=t=>Object.prototype.hasOwnProperty.call(wc,t),_A=t=>Bz.indexOf(t)!==-1,EA=t=>qz[t],zz=t=>{SA(t)||Ji(`Unknown parameter "${t}"`)},Vz=t=>{Hz.includes(t)&&Ji(`The parameter "${t}" is incompatible with toasts`)},Uz=t=>{const e=EA(t);e&&WT(t,e)},TA=t=>{t.backdrop===!1&&t.allowOutsideClick&&Ji('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(t.theme)&&Ji(`Invalid theme "${t.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(const e in t)zz(e),t.toast&&Vz(e),Uz(e)};function AA(t){const e=es(),n=cn(),s=In.innerParams.get(this);if(!n||Sr(n,s.hideClass.popup)){Ji("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=Wz(t),r=Object.assign({},s,a);TA(r),e.dataset.swal2Theme=r.theme,rA(this,r),In.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const Wz=t=>{const e={};return Object.keys(t).forEach(n=>{_A(n)?e[n]=t[n]:Ji(`Invalid parameter to update: ${n}`)}),e};function DA(){const t=In.domCache.get(this),e=In.innerParams.get(this);if(!e){RA(this);return}t.popup&&Lt.swalCloseEventFinishedCallback&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Lt.eventEmitter.emit("didDestroy"),Kz(this)}const Kz=t=>{RA(t),delete t.params,delete Lt.keydownHandler,delete Lt.keydownTarget,delete Lt.currentInstance},RA=t=>{t.isAwaitingPromise?(Dv(In,t),t.isAwaitingPromise=!0):(Dv(Bc,t),Dv(In,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Dv=(t,e)=>{for(const n in t)t[n].delete(e)};var Gz=Object.freeze({__proto__:null,_destroy:DA,close:il,closeModal:il,closePopup:il,closeToast:il,disableButtons:wA,disableInput:jA,disableLoading:Dp,enableButtons:bA,enableInput:kA,getInput:vA,handleAwaitingPromise:nu,hideLoading:Dp,rejectPromise:hA,resetValidationMessage:CA,showValidationMessage:NA,update:AA});const Yz=(t,e,n)=>{t.toast?Qz(t,e,n):(Xz(e),Jz(e),eV(t,e,n))},Qz=(t,e,n)=>{e.popup.onclick=()=>{t&&(Zz(t)||t.timer||t.input)||n(ad.close)}},Zz=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Rp=!1;const Xz=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Rp=!0)}}},Jz=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Rp=!0)}}},eV=(t,e,n)=>{e.container.onclick=s=>{if(Rp){Rp=!1;return}s.target===e.container&&Fg(t.allowOutsideClick)&&n(ad.backdrop)}},tV=t=>typeof t=="object"&&t.jquery,JN=t=>t instanceof Element||tV(t),nV=t=>{const e={};return typeof t[0]=="object"&&!JN(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const a=t[s];typeof a=="string"||JN(a)?e[n]=a:a!==void 0&&Eo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function iV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function sV(t){class e extends this{_main(s,a){return super._main(s,Object.assign({},t,a))}}return e}const aV=()=>Lt.timeout&&Lt.timeout.getTimerLeft(),PA=()=>{if(Lt.timeout)return pH(),Lt.timeout.stop()},MA=()=>{if(Lt.timeout){const t=Lt.timeout.start();return Ew(t),t}},rV=()=>{const t=Lt.timeout;return t&&(t.running?PA():MA())},lV=t=>{if(Lt.timeout){const e=Lt.timeout.increase(t);return Ew(e,!0),e}},oV=()=>!!(Lt.timeout&&Lt.timeout.isRunning());let e1=!1;const ay={};function cV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ay[t]=this,e1||(document.body.addEventListener("click",dV),e1=!0)}const dV=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in ay){const s=e.getAttribute(n);if(s){ay[n].fire({template:s});return}}};let mV=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){var s=this;const a=function(){s.removeListener(e,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];n.apply(s,o)};this.on(e,a)}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),a=s.indexOf(n);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};Lt.eventEmitter=new mV;const uV=(t,e)=>{Lt.eventEmitter.on(t,e)},hV=(t,e)=>{Lt.eventEmitter.once(t,e)},pV=(t,e)=>{if(!t){Lt.eventEmitter.reset();return}e?Lt.eventEmitter.removeListener(t,e):Lt.eventEmitter.removeAllListeners(t)};var gV=Object.freeze({__proto__:null,argsToParams:nV,bindClickHandler:cV,clickCancel:nz,clickConfirm:lA,clickDeny:tz,enableLoading:qc,fire:iV,getActions:Jm,getCancelButton:id,getCloseButton:Nw,getConfirmButton:Wa,getContainer:es,getDenyButton:To,getFocusableElements:Cw,getFooter:YT,getHtmlContainer:kw,getIcon:nd,getIconContent:oH,getImage:GT,getInputLabel:cH,getLoader:sd,getPopup:cn,getProgressSteps:jw,getTimerLeft:aV,getTimerProgressBar:Bg,getTitle:KT,getValidationMessage:$g,increaseTimer:lV,isDeprecatedParameter:EA,isLoading:mH,isTimerRunning:oV,isUpdatableParameter:_A,isValidParameter:SA,isVisible:ez,mixin:sV,off:pV,on:uV,once:hV,resumeTimer:MA,showLoading:qc,stopTimer:PA,toggleTimer:rV});class fV{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const IA=["swal-title","swal-html","swal-footer"],vV=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return CV(n),Object.assign(xV(n),yV(n),bV(n),wV(n),kV(n),jV(n),NV(n,IA))},xV=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{mo(s,["name","value"]);const a=s.getAttribute("name"),r=s.getAttribute("value");!a||!r||(typeof wc[a]=="boolean"?e[a]=r!=="false":typeof wc[a]=="object"?e[a]=JSON.parse(r):e[a]=r)}),e},yV=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),r=s.getAttribute("value");!a||!r||(e[a]=new Function(`return ${r}`)())}),e},bV=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{mo(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${yw(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},wV=t=>{const e={},n=t.querySelector("swal-image");return n&&(mo(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},kV=t=>{const e={},n=t.querySelector("swal-icon");return n&&(mo(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},jV=t=>{const e={},n=t.querySelector("swal-input");n&&(mo(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{mo(a,["value"]);const r=a.getAttribute("value");if(!r)return;const o=a.innerHTML;e.inputOptions[r]=o})),e},NV=(t,e)=>{const n={};for(const s in e){const a=e[s],r=t.querySelector(a);r&&(mo(r,[]),n[a.replace(/^swal-/,"")]=r.innerHTML.trim())}return n},CV=t=>{const e=IA.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||Ji(`Unrecognized element <${s}>`)})},mo=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Ji([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},OA=10,SV=t=>{const e=es(),n=cn();typeof t.willOpen=="function"&&t.willOpen(n),Lt.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;TV(e,n,t),setTimeout(()=>{_V(e,n)},OA),Sw()&&(EV(e,t.scrollbarPadding,a),dz()),!qg()&&!Lt.previousActiveElement&&(Lt.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Lt.eventEmitter.emit("didOpen",n),ea(e,qe["no-transition"])},Pp=t=>{const e=cn();if(t.target!==e)return;const n=es();e.removeEventListener("animationend",Pp),e.removeEventListener("transitionend",Pp),n.style.overflowY="auto"},_V=(t,e)=>{XT(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Pp),e.addEventListener("transitionend",Pp)):t.style.overflowY="auto"},EV=(t,e,n)=>{mz(),e&&n!=="hidden"&&xz(n),setTimeout(()=>{t.scrollTop=0})},TV=(t,e,n)=>{tn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),xi(e,"grid"),setTimeout(()=>{tn(e,n.showClass.popup),e.style.removeProperty("opacity")},OA)):xi(e,"grid"),tn([document.documentElement,document.body],qe.shown),n.heightAuto&&n.backdrop&&!n.toast&&tn([document.documentElement,document.body],qe["height-auto"])};var t1={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function AV(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=t1.email),t.input==="url"&&(t.inputValidator=t1.url))}function DV(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Ji('Target parameter is not valid, defaulting to "body"'),t.target="body")}function RV(t){AV(t),t.showLoaderOnConfirm&&!t.preConfirm&&Ji(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),DV(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),kH(t)}let Pa;var rh=new WeakMap;class ai{constructor(){if(eH(this,rh,void 0),typeof window>"u")return;Pa=this;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,tH(rh,this,this._main(Pa.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(TA(Object.assign({},n,e)),Lt.currentInstance){const r=Bc.swalPromiseResolve.get(Lt.currentInstance),{isAwaitingPromise:o}=Lt.currentInstance;Lt.currentInstance._destroy(),o||r({isDismissed:!0}),Sw()&&dA()}Lt.currentInstance=Pa;const s=MV(e,n);RV(s),Object.freeze(s),Lt.timeout&&(Lt.timeout.stop(),delete Lt.timeout),clearTimeout(Lt.restoreFocusTimeout);const a=IV(Pa);return rA(Pa,s),In.innerParams.set(Pa,s),PV(Pa,a,s)}then(e){return VN(rh,this).then(e)}finally(e){return VN(rh,this).finally(e)}}const PV=(t,e,n)=>new Promise((s,a)=>{const r=o=>{t.close({isDismissed:!0,dismiss:o})};Bc.swalPromiseResolve.set(t,s),Bc.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{Iz(t)},e.denyButton.onclick=()=>{Oz(t)},e.cancelButton.onclick=()=>{Lz(t,r)},e.closeButton.onclick=()=>{r(ad.close)},Yz(n,e,r),iz(Lt,n,r),Sz(t,n),SV(n),OV(Lt,n,r),LV(e,n),setTimeout(()=>{e.container.scrollTop=0})}),MV=(t,e)=>{const n=vV(t),s=Object.assign({},wc,e,n,t);return s.showClass=Object.assign({},wc.showClass,s.showClass),s.hideClass=Object.assign({},wc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},IV=t=>{const e={popup:cn(),container:es(),actions:Jm(),confirmButton:Wa(),denyButton:To(),cancelButton:id(),loader:sd(),closeButton:Nw(),validationMessage:$g(),progressSteps:jw()};return In.domCache.set(t,e),e},OV=(t,e,n)=>{const s=Bg();$i(s),e.timer&&(t.timeout=new fV(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(xi(s),Ts(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Ew(e.timer)})))},LV=(t,e)=>{if(!e.toast){if(!Fg(e.allowEnterKey)){WT("allowEnterKey"),BV();return}FV(t)||$V(t,e)||sy(-1,1)}},FV=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&hs(n))return n.focus(),!0;return!1},$V=(t,e)=>e.focusDeny&&hs(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&hs(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&hs(t.confirmButton)?(t.confirmButton.focus(),!0):!1,BV=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ai.prototype.disableButtons=wA;ai.prototype.enableButtons=bA;ai.prototype.getInput=vA;ai.prototype.disableInput=jA;ai.prototype.enableInput=kA;ai.prototype.hideLoading=Dp;ai.prototype.disableLoading=Dp;ai.prototype.showValidationMessage=NA;ai.prototype.resetValidationMessage=CA;ai.prototype.close=il;ai.prototype.closePopup=il;ai.prototype.closeModal=il;ai.prototype.closeToast=il;ai.prototype.rejectPromise=hA;ai.prototype.update=AA;ai.prototype._destroy=DA;Object.assign(ai,gV);Object.keys(Gz).forEach(t=>{ai[t]=function(){return Pa&&Pa[t]?Pa[t](...arguments):null}});ai.DismissReason=ad;ai.version="11.18.0";const $t=ai;$t.default=$t;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-hover-transform: none}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ta={getBills:(t={})=>ve({endpoint:"bills",method:"GET",data:t}),getBill:t=>ve({endpoint:`bills/${t}`,method:"GET"}),createBill:t=>ve({endpoint:"bills",method:"POST",data:t}),updateBill:(t,e)=>ve({endpoint:`bills/${t}`,method:"PUT",data:e}),calculateTaxForService:({service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:r})=>ve({endpoint:"bills/calculate-tax",method:"POST",data:{service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:r}}),getEncountersWithoutBill:()=>ve({endpoint:"bills/encounters-without-bill",method:"GET"}),getBillByEncounterId:t=>ve({endpoint:`bills/by-encounter/${t}`,method:"GET"}),deleteBillItem:t=>ve({endpoint:`bills/item/${t}`,method:"DELETE"}),updateBillItem:(t,e)=>ve({endpoint:`bills/item/${t}`,method:"PUT",data:e}),exportBills:(t={})=>ve({endpoint:"bills/export",method:"GET",data:t}),printBill:t=>ve({endpoint:`bills/${t}/print`,method:"GET",responseType:"blob"}),emailBill:t=>ve({endpoint:`bills/${t}/email`,method:"POST"})},vr={all:["bills"],lists:()=>[...vr.all,"list"],list:t=>[...vr.lists(),{filters:t}],details:()=>[...vr.all,"detail"],detail:t=>[...vr.details(),t]},qV=(t={},e={})=>gt({queryKey:vr.list(t),queryFn:()=>ta.getBills(t),...e}),Mw=(t,e={})=>gt({queryKey:vr.detail(t),queryFn:()=>ta.getBill(t),enabled:!!t,...e}),HV=()=>{const t=Ke();return He({mutationFn:e=>ta.createBill(e),onSuccess:()=>{t.invalidateQueries({queryKey:vr.lists()})}})},zV=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>ta.updateBill(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:vr.detail(n.id)}),t.invalidateQueries({queryKey:vr.lists()})}})},VV=()=>He({mutationFn:t=>ta.calculateTaxForService(t)}),UV=(t={})=>gt({queryKey:["encountersWithoutBill"],queryFn:()=>ta.getEncountersWithoutBill(),...t}),LA=(t,e={})=>gt({queryKey:["billByEncounterId",t],queryFn:()=>ta.getBillByEncounterId(t),enabled:!!t,...e}),WV=()=>He({mutationFn:t=>ta.deleteBillItem(t)}),KV=()=>He({mutationFn:({itemId:t,...e})=>ta.updateBillItem(t,e)}),GV=()=>He({mutationFn:t=>ta.exportBills(t)}),YV=()=>He({mutationFn:t=>ta.printBill(t)}),QV=()=>He({mutationFn:t=>ta.emailBill(t)}),Iw=({show:t,onHide:e,editFormData:n,setEditFormData:s,showAddServiceItemForm:a,setShowAddServiceItemForm:r,editBillId:o,handleCloseEditModal:c,onBillSaved:d,appointmentId:m})=>{const{getCurrencyDetail:u}=mt(),p=u(),h=p.prefix,g=p.postfix,v=zV(),[x,y]=f.useState([]),[b,w]=f.useState([]),k=VV(),[_,j]=f.useState(!1),T=HV(),[N,E]=f.useState(!0),A=WV(),L=KV(),[C,P]=f.useState({service_name:"",price:"",quantity:"",total:""}),[R,M]=f.useState({clinic_id:"",doctor_id:""});f.useEffect(()=>{n?.clinic?.id&&n?.doctor?.id&&M({clinic_id:n.clinic.id,doctor_id:n.doctor.id})},[n?.clinic?.id,n?.doctor?.id]),f.useEffect(()=>{t&&n?.serviceItems?.length>0&&(!n?.taxItems||n.taxItems.length===0)&&k.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:n.serviceItems},{onSuccess:Q=>{s(me=>({...me,taxItems:Q?.data?.calculated_taxes||[]}))}})},[t,o]);const[O,q]=f.useState(!1);f.useEffect(()=>{if(!O&&n?.serviceItems?.length>0){const me=n.serviceItems.every(te=>te.isPaid===!0)?"paid":"unpaid";n.status!==me&&s(te=>({...te,status:me})),q(!0)}t||q(!1)},[n?.serviceItems,t,O]);const U=Q=>{const{name:me,value:te}=Q.target;s(Y=>({...Y,[me]:te}))},[H,ae]=f.useState(""),V=Q=>{const me=Q.target.value;ae(""),me===""||me===null?ae(l("Discount value is required","kivicare-clinic-management-system")):Number(me)<0?ae(l("Discount value cannot be negative","kivicare-clinic-management-system")):Number(me)>oe+K&&ae(l("Discount value cannot be greater than subtotal + tax","kivicare-clinic-management-system")),s(te=>({...te,discount:me}))},pe=(Q=!1)=>{if(!n)return;if(!n?.serviceItems||n.serviceItems.length===0){$t.fire(l("Error!","kivicare-clinic-management-system"),l("Please add at least one bill item before saving.","kivicare-clinic-management-system"),"error");return}if(H){$t.fire(l("Error!","kivicare-clinic-management-system"),H,"error");return}const me=n.serviceItems.map(Y=>({...Y,name:Y.service_name||Y.name,isPaid:Y.isPaid??!1})),te={...n,serviceItems:me};o?v.mutate({id:o,...te,checkout:Q},{onSuccess:()=>{$t.fire(l("Updated!","kivicare-clinic-management-system"),l("The bill has been updated.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{$t.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to update bill.","kivicare-clinic-management-system"),"error")}}):T.mutate({...te,checkout:Q},{onSuccess:()=>{$t.fire(l("Created!","kivicare-clinic-management-system"),l("The bill has been created.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{$t.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to create bill.","kivicare-clinic-management-system"),"error")}})},oe=f.useMemo(()=>(n?.serviceItems||[]).reduce((Q,me)=>Q+Number(me.total||0),0),[n?.serviceItems]),ne=Q=>{P(Q?me=>({...me,serviceId:Q.value,service_name:Q.label,price:Q.charges,quantity:1,total:Q.charges}):{service_name:"",price:"",quantity:"",total:""})},[se,W]=f.useState(""),ge=Q=>{const me=Q.target.value;me<0?W(l("Price cannot be negative","kivicare-clinic-management-system")):W(""),P(te=>({...te,price:me,total:me&&te.quantity?Number(me)*Number(te.quantity):""}))},ee=Q=>{const me=Q.target.value;P(te=>({...te,quantity:me,total:te.price&&me?Number(te.price)*Number(me):""}))},ie=Q=>{const me={value:`custom-${Date.now()}`,label:Q,charges:0,isCustom:!0};y(te=>[...te,me]),P(te=>({...te,serviceId:me.value,service_name:me.label,price:me.charges,quantity:1,total:me.charges}))},ue=We.useRef(n);f.useEffect(()=>{ue.current=n},[n]);const G=async Q=>{const te=(ue.current?.serviceItems||[])[Q];let Y=te.serviceId||te.value||"";if(typeof Y=="string"&&Y.startsWith("custom-")){const Ce=te.service_name||te.name;if(!x.find(Te=>Te.value===Y)&&Ce){const Te={value:Y,label:Ce,charges:te.price,isCustom:!0};y(et=>[...et,Te])}}else Y&&(Y=parseInt(Y));P({serviceId:Y,service_name:te.service_name||te.name,price:te.price,quantity:te.quantity,total:te.total,editIndex:Q}),r(!0)},le=Q=>{const me=ue.current?.serviceItems[Q];if(me.id)$t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This will delete the service item from the bill.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(te=>{te.isConfirmed&&A.mutate(me.id,{onSuccess:()=>{const Y=ue.current?.serviceItems.filter((Ce,ye)=>ye!==Q);s(Ce=>({...Ce,serviceItems:Y})),k.mutate({clinic_id:ue.current?.clinic?.id,doctor_id:ue.current?.doctor?.id,serviceItems:Y},{onSuccess:Ce=>{s(ye=>({...ye,taxItems:Ce?.data?.calculated_taxes||[]}))}}),$t.fire(l("Deleted!","kivicare-clinic-management-system"),l("Service item deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{$t.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to delete service item.","kivicare-clinic-management-system"),"error")}})});else{const te=ue.current?.serviceItems.filter((Y,Ce)=>Ce!==Q);s(Y=>({...Y,serviceItems:te})),k.mutate({clinic_id:ue.current?.clinic?.id,doctor_id:ue.current?.doctor?.id,serviceItems:te},{onSuccess:Y=>{s(Ce=>({...Ce,taxItems:Y?.data?.calculated_taxes||[]}))}})}},re=async()=>{if(!C.quantity)return;if(C.price===""||C.price===null||C.price===void 0){W(l("Price is required","kivicare-clinic-management-system"));return}if(Number(C.price)<0){W(l("Price cannot be negative","kivicare-clinic-management-system"));return}const Q=C.serviceId||C.value;if(!Q){$t.fire(l("Error!","kivicare-clinic-management-system"),l("Service ID missing.","kivicare-clinic-management-system"),"error");return}if(typeof C.editIndex=="number"&&n.serviceItems[C.editIndex]?.id){const te=n.serviceItems[C.editIndex].id;L.mutate({itemId:te,serviceId:Q,quantity:C.quantity,price:C.price},{onSuccess:()=>{const Y=n.serviceItems.map((Ce,ye)=>ye===C.editIndex?{...Ce,serviceId:Q,service_name:C.service_name,price:C.price,quantity:C.quantity,total:C.total}:Ce);s(Ce=>({...Ce,serviceItems:Y})),k.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:Y},{onSuccess:Ce=>{s(ye=>({...ye,taxItems:Ce?.data?.calculated_taxes||[]}))}}),P({service_name:"",price:"",quantity:"",total:""}),r(!1),$t.fire(l("Updated!","kivicare-clinic-management-system"),l("Service item updated.","kivicare-clinic-management-system"),"success")},onError:()=>{$t.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to update service item.","kivicare-clinic-management-system"),"error")}});return}let me;typeof C.editIndex=="number"?me=n.serviceItems.map((te,Y)=>Y===C.editIndex?{...C,serviceId:Q,editIndex:void 0,isPaid:te.isPaid??!1}:te):me=[...n.serviceItems,{...C,serviceId:Q,isPaid:!1}],s(te=>({...te,serviceItems:me,status:typeof C.editIndex!="number"?"unpaid":te.status})),k.mutate({quantity:C.quantity,clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,amount:C.price,service_id:Q,serviceItems:me},{onSuccess:te=>{s(Y=>({...Y,taxItems:te?.data?.calculated_taxes||[]}))}}),P({service_name:"",price:"",quantity:"",total:""}),r(!1)},D=On(),I=f.useMemo(()=>[D.accessor("sr",{id:"sr",header:()=>l("Sr. No","kivicare-clinic-management-system"),cell:Q=>Q.row.index+1,enableSorting:!1}),D.accessor("service_name",{id:"service_name",header:()=>l("Services","kivicare-clinic-management-system"),cell:Q=>Q.getValue(),enableSorting:!1}),D.accessor("quantity",{id:"quantity",header:()=>l("Quantity","kivicare-clinic-management-system"),cell:Q=>Q.getValue(),enableSorting:!1}),D.accessor("price",{id:"price",header:()=>l("Price","kivicare-clinic-management-system"),cell:Q=>h+Q.getValue()+g,enableSorting:!1}),D.accessor("total",{id:"total",header:()=>l("Total Amount","kivicare-clinic-management-system"),cell:Q=>h+Q.getValue()+g,enableSorting:!1}),D.accessor("payment_status",{id:"payment_status",header:()=>l("Payment Status","kivicare-clinic-management-system"),cell:Q=>Q.row.original.isPaid?i.jsx("span",{className:"badge bg-success-subtle text-success px-2 py-1",children:l("Paid","kivicare-clinic-management-system")}):i.jsx("span",{className:"badge bg-warning-subtle text-warning px-2 py-1",children:l("Unpaid","kivicare-clinic-management-system")}),enableSorting:!1}),D.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:Q=>Q.row.original.isPaid?i.jsx("span",{className:"text-muted font-size-12",children:l("-","kivicare-clinic-management-system")}):i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary",title:l("Edit","kivicare-clinic-management-system"),onClick:()=>G(Q.row.index),children:i.jsx("i",{className:"ph ph-pencil"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:l("Delete","kivicare-clinic-management-system"),onClick:()=>le(Q.row.index),children:i.jsx("i",{className:"ph ph-trash"})})]}),enableSorting:!1})],[h,g]),ce=()=>{P({service_name:"",price:"",quantity:"",total:"",serviceId:""})},Z=Q=>{Q||ce(),r(Q)},K=f.useMemo(()=>(n?.taxItems||[]).reduce((Q,me)=>Q+Number(me.tax_amount||0),0),[n?.taxItems]),B=Number(n?.discountEnabled&&n?.discount||0),F=oe-B+K,J=f.useMemo(()=>{const Q={};return(n?.taxItems||[]).forEach(me=>{me.tax_name&&(Q[me.tax_name]?(Q[me.tax_name].count+=1,Q[me.tax_name].totalAmount+=Number(me.tax_amount)):Q[me.tax_name]={...me,count:1,totalAmount:Number(me.tax_amount)})}),Object.values(Q)},[n?.taxItems]);return f.useEffect(()=>{s(Q=>({...Q,service_total:oe,taxTotal:K,discountValue:B,total_amount:F}))},[oe,K,B,F,s]),f.useEffect(()=>{n?.discountEnabled||ae("")},[n?.discountEnabled]),i.jsx(rt,{show:t,backdrop:"static",onHide:e,centered:!0,size:"xl",dialogClassName:"edit-bill-model",children:n&&i.jsxs(i.Fragment,{children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{id:"closeEncounterModalLabel",children:o?l("Edit Bill","kivicare-clinic-management-system"):l("Generate Invoice","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(rt.Body,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:l("Add items in billing","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-secondary d-flex align-items-center gap-2",onClick:()=>Z(!a),children:a?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-minus-circle"}),i.jsx("span",{children:l("Close","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add New","kivicare-clinic-management-system")})]})})]}),a&&i.jsxs("div",{className:"encounter-box mb-5",children:[i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Xt,{id:"doctor-service-select",value:C.serviceId?{value:C.serviceId,label:C.service_name,charges:C.price,isCustom:typeof C.serviceId=="string"&&C.serviceId.startsWith("custom-")}:null,onChange:ne,className:"react-select-box",classNamePrefix:"react-select",formatCreateLabel:Q=>l("Create service","kivicare-clinic-management-system")+`: "${Q}"`,onCreateOption:ie,placeholder:l("Select or create service","kivicare-clinic-management-system"),loadOptions:async Q=>{if(!R.clinic_id||!R.doctor_id)return{data:[],pagination:{current_page:1,total_pages:1}};const me=await Cl.getDoctorServices({page:Q.page,perPage:Q.per_page,search:Q.search,clinic_id:R.clinic_id,doctor_id:R.doctor_id,status:"1"}),te=(me?.data?.doctorServices||[]).map(Ce=>({value:Ce.serviceId,label:Ce.serviceName,charges:Ce.charges,isCustom:!1,...Ce}));let Y=te;return Q.page===1&&(Y=[...x.filter(ye=>!Q.search||ye.label.toLowerCase().includes(Q.search.toLowerCase())),...te]),{data:Y,pagination:{current_page:me?.data?.pagination?.currentPage||1,total_pages:me?.data?.pagination?.lastPage||1}}},dependencies:R,isSearchable:!0,isCreatable:!0})]}),i.jsxs("p",{className:"mt-3 mb-0 text-primary font-size-12 fw-semibold",children:[l("Note: Type and press enter to create new service","kivicare-clinic-management-system")," "]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Price","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-field-reuquired",children:"*"}),i.jsx("input",{className:`form-control ${se?"is-invalid":""}`,type:"number",name:"price",value:C.price,onChange:ge,placeholder:l("eg $12","kivicare-clinic-management-system"),required:!0}),se&&i.jsx("div",{className:"invalid-feedback",children:se})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Quantity","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"quantity",value:C.quantity,onChange:ee,min:1,placeholder:l("eg 1","kivicare-clinic-management-system"),disabled:!C.serviceId})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Total","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"total",value:C.total,readOnly:!0,disabled:!0,placeholder:l("eg $12","kivicare-clinic-management-system")})]})})]})})}),i.jsx("button",{type:"button",className:"btn m-2 btn-secondary",onClick:()=>r(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn m-2 btn-primary",onClick:re,disabled:!C.serviceId||!C.quantity,children:l("Add","kivicare-clinic-management-system")})]}),i.jsx(bn,{data:n.serviceItems,columns:I,isLoading:!1,error:null,enableSelection:!1,renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:I.length,className:"text-center py-4 border-start border-end",children:l("No service data found","kivicare-clinic-management-system")})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap form-check form-switch p-0 mb-2",children:[i.jsx("label",{htmlFor:"switchCheckDiscount",className:"form-label m-0",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",name:"discountEnabled",id:"switchCheckDiscount",checked:n.discountEnabled||!1,onChange:Q=>s(me=>({...me,discountEnabled:Q.target.checked,discount:Q.target.checked?me.discount:0}))})]}),i.jsx("div",{className:"encounter-box mb-5",children:n.discountEnabled&&i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"",className:"form-label",children:[l("Discount Value","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${H?"is-invalid":""}`,type:"number",placeholder:l("eg $12","kivicare-clinic-management-system"),value:n.discount,onChange:V,name:"discount",required:!0}),H&&i.jsx("div",{className:"invalid-feedback",children:H})]})})})})})}),i.jsxs("div",{children:[i.jsx("h6",{children:l("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+oe+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>E(Q=>!Q),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${N?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsxs("span",{className:"text-danger h6 m-0 ms-1",children:[h,K.toFixed(2),g]})]})]}),N&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),J.length===0&&i.jsx("div",{className:"text-muted",children:l("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:J.map((Q,me)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[Q.tax_name,Q.count>1?` x${Q.count}`:"",Q.rate?` (${Q.rate}%)`:""]}),i.jsxs("h6",{className:"font-size-14 m-0 text-danger",children:[h,Q.totalAmount.toFixed(2),g]})]},me))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx("span",{className:"font-size-14",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+B+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")}),F>=0?i.jsx("h5",{className:"m-0 text-primary",children:h+F.toFixed(2)+g}):i.jsx("h5",{className:"m-0 text-primary",children:h+0+g})]})]})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"row gy-5",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"",className:"form-label",children:l("Payment Status","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap column-gap-5 row-gap-1",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"pending",value:"unpaid",checked:n.status==="unpaid",onChange:U}),i.jsx("label",{className:"form-check-label",htmlFor:"pending",children:l("Pending","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"paid",value:"paid",checked:n.status==="paid",onChange:U}),i.jsx("label",{className:"form-check-label",htmlFor:"paid",children:l("Paid","kivicare-clinic-management-system")})]})]})]})})}),i.jsx("p",{className:"mt-3 mb-0 text-danger font-size-12 fw-semibold",children:l("Note: To close encounter, invoice payment is mandatory","kivicare-clinic-management-system")})]})]}),i.jsxs(rt.Footer,{className:"gap-3",children:[i.jsx(Zt,{variant:"secondary",onClick:c,children:l("Cancel","kivicare-clinic-management-system")}),n.status==="paid"?i.jsxs(i.Fragment,{children:[i.jsx(Zt,{variant:"primary",onClick:()=>pe(!1),disabled:T?.isLoading||v?.isLoading,children:l("Close encounter","kivicare-clinic-management-system")}),Number(m)>0&&i.jsx(Zt,{variant:"primary",onClick:()=>pe(!0),disabled:T?.isLoading||v?.isLoading,children:l("Close and checkout","kivicare-clinic-management-system")})]}):i.jsx(Zt,{variant:"primary",onClick:()=>pe(!1),disabled:T?.isLoading||v?.isLoading,children:l("Save","kivicare-clinic-management-system")})]})]})})},ZV=({limit:t=3})=>{const e=On(),{user:n,isAddonActive:s,getPriceFormat:a}=mt(),[r,o]=f.useState(!1),[c,d]=f.useState(null),[m,u]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[p,h]=f.useState(!1),{data:g,isLoading:v}=Mw(c,{enabled:!!c&&r});f.useEffect(()=>{g&&u(g?.data)},[g]);const x=A=>{d(A.id),o(!0)},y=()=>{o(!1),d(null),h(!1)},b=n?.clinic_id||0,{data:w,isLoading:k,error:_}=t$({limit:t,clinic_id:b>0?b:void 0}),j=f.useMemo(()=>w?w.data&&Array.isArray(w.data.data)?w.data.data:Array.isArray(w.data)?w.data:Array.isArray(w)?w:[]:[],[w]),T=s("kiviPro"),N=f.useMemo(()=>[e.accessor("patient",{enableSorting:!1,header:()=>l("Patient","kivicare-clinic-management-system"),cell:({getValue:A})=>{const L=A();return L?i.jsx(on,{profileUrl:L.avatar,name:L.name,email:L.email,fallbackText:L.name?.charAt(0)||"P",variant:"primary",size:"sm"}):"-"}}),e.accessor("dateTime",{enableSorting:!1,header:()=>l("Date and time","kivicare-clinic-management-system"),cell:({getValue:A})=>{const L=A();return L||"-"}}),e.accessor("doctor",{enableSorting:!1,header:()=>l("Doctor","kivicare-clinic-management-system")}),...T?[e.accessor("clinic",{enableSorting:!1,header:()=>l("Clinic","kivicare-clinic-management-system"),cell:({getValue:A})=>A()||"-"})]:[],e.accessor("service",{enableSorting:!1,header:()=>l("Services","kivicare-clinic-management-system")}),e.accessor("charges",{enableSorting:!1,header:()=>l("Charges","kivicare-clinic-management-system"),cell:({getValue:A})=>a(parseFloat(String(A()||0).replace(/[^0-9.]/g,"")||"0"))}),e.accessor("paymentMode",{enableSorting:!1,header:()=>l("Payment Mode","kivicare-clinic-management-system")}),e.accessor("paymentStatus",{enableSorting:!1,header:()=>l("Status","kivicare-clinic-management-system"),cell:({getValue:A})=>{const L=A(),P=String(L||"").toLowerCase()==="paid";return i.jsx("span",{className:`badge ${P?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:P?l("Paid","kivicare-clinic-management-system"):l("Unpaid","kivicare-clinic-management-system")})}}),e.display({enableSorting:!1,id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:({row:A})=>{const L=A.original,P=String(L.paymentStatus||"").toLowerCase()==="paid";return i.jsxs("div",{className:"d-flex align-items-center gap-2 fs-5",children:[i.jsx(ht,{to:`/billings/view/${L.id}`,className:"text-secondary",title:l("View Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye"})}),!P&&i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>x(L),title:l("Edit Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})]})}})],[T,e]);if(_)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l("Error loading payment data:","kivicare-clinic-management-system")," ",_.message||l("Unknown error","kivicare-clinic-management-system")]});const E={currentPage:1,perPage:t,totalItems:j.length,lastPage:1};return i.jsxs(i.Fragment,{children:[i.jsx(bn,{data:j,columns:N,isLoading:k,currentPage:E.currentPage,perPage:E.perPage,totalItems:E.totalItems,lastPage:E.lastPage,bordered:!0,striped:!0,hover:!0,enableSelection:!1,manualPagination:!1,moduleNamePlural:"payments",renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"text-center py-4 border-start border-end",children:l("No payment records found","kivicare-clinic-management-system")})})}),i.jsx(Iw,{show:r,onHide:y,editFormData:m,setEditFormData:u,showAddServiceItemForm:p,setShowAddServiceItemForm:h,editBillId:c,handleCloseEditModal:y})]})};var zg,Ft,FA,$A,Hc,Ul,n1,BA,qA,Mp={},HA=[],XV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function sl(t,e){for(var n in e)t[n]=e[n];return t}function zA(t){var e=t.parentNode;e&&e.removeChild(t)}function je(t,e,n){var s,a,r,o={};for(r in e)r=="key"?s=e[r]:r=="ref"?a=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?zg.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)o[r]===void 0&&(o[r]=t.defaultProps[r]);return Oh(t,o,s,a,null)}function Oh(t,e,n,s,a){var r={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++FA};return a==null&&Ft.vnode!=null&&Ft.vnode(r),r}function Gi(){return{current:null}}function Pn(t){return t.children}function JV(t,e,n,s,a){var r;for(r in n)r==="children"||r==="key"||r in e||Ip(t,r,null,n[r],s);for(r in e)a&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===e[r]||Ip(t,r,e[r],n[r],s)}function i1(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||XV.test(e)?n:n+"px"}function Ip(t,e,n,s,a){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)n&&e in n||i1(t.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||i1(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?s||t.addEventListener(e,r?a1:s1,r):t.removeEventListener(e,r?a1:s1,r);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function s1(t){Hc=!0;try{return this.l[t.type+!1](Ft.event?Ft.event(t):t)}finally{Hc=!1}}function a1(t){Hc=!0;try{return this.l[t.type+!0](Ft.event?Ft.event(t):t)}finally{Hc=!1}}function Cs(t,e){this.props=t,this.context=e}function Cm(t,e){if(e==null)return t.__?Cm(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Cm(t):null}function VA(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return VA(t)}}function eU(t){Hc?setTimeout(t):BA(t)}function ry(t){(!t.__d&&(t.__d=!0)&&Ul.push(t)&&!Op.__r++||n1!==Ft.debounceRendering)&&((n1=Ft.debounceRendering)||eU)(Op)}function Op(){var t,e,n,s,a,r,o,c;for(Ul.sort(function(d,m){return d.__v.__b-m.__v.__b});t=Ul.shift();)t.__d&&(e=Ul.length,s=void 0,a=void 0,o=(r=(n=t).__v).__e,(c=n.__P)&&(s=[],(a=sl({},r)).__v=r.__v+1,Ow(c,r,a,n.__n,c.ownerSVGElement!==void 0,r.__h!=null?[o]:null,s,o??Cm(r),r.__h),YA(s,r),r.__e!=o&&VA(r)),Ul.length>e&&Ul.sort(function(d,m){return d.__v.__b-m.__v.__b}));Op.__r=0}function UA(t,e,n,s,a,r,o,c,d,m){var u,p,h,g,v,x,y,b=s&&s.__k||HA,w=b.length;for(n.__k=[],u=0;u<e.length;u++)if((g=n.__k[u]=(g=e[u])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?Oh(null,g,null,null,g):Array.isArray(g)?Oh(Pn,{children:g},null,null,null):g.__b>0?Oh(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(h=b[u])===null||h&&g.key==h.key&&g.type===h.type)b[u]=void 0;else for(p=0;p<w;p++){if((h=b[p])&&g.key==h.key&&g.type===h.type){b[p]=void 0;break}h=null}Ow(t,g,h=h||Mp,a,r,o,c,d,m),v=g.__e,(p=g.ref)&&h.ref!=p&&(y||(y=[]),h.ref&&y.push(h.ref,null,g),y.push(p,g.__c||v,g)),v!=null?(x==null&&(x=v),typeof g.type=="function"&&g.__k===h.__k?g.__d=d=WA(g,d,t):d=KA(t,g,h,b,v,d),typeof n.type=="function"&&(n.__d=d)):d&&h.__e==d&&d.parentNode!=t&&(d=Cm(h))}for(n.__e=x,u=w;u--;)b[u]!=null&&(typeof n.type=="function"&&b[u].__e!=null&&b[u].__e==n.__d&&(n.__d=GA(s).nextSibling),ZA(b[u],b[u]));if(y)for(u=0;u<y.length;u++)QA(y[u],y[++u],y[++u])}function WA(t,e,n){for(var s,a=t.__k,r=0;a&&r<a.length;r++)(s=a[r])&&(s.__=t,e=typeof s.type=="function"?WA(s,e,n):KA(n,s,s,a,s.__e,e));return e}function Lp(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Lp(n,e)}):e.push(t)),e}function KA(t,e,n,s,a,r){var o,c,d;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||a!=r||a.parentNode==null)e:if(r==null||r.parentNode!==t)t.appendChild(a),o=null;else{for(c=r,d=0;(c=c.nextSibling)&&d<s.length;d+=1)if(c==a)break e;t.insertBefore(a,r),o=r}return o!==void 0?o:a.nextSibling}function GA(t){var e,n,s;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(s=GA(n)))return s}return null}function Ow(t,e,n,s,a,r,o,c,d){var m,u,p,h,g,v,x,y,b,w,k,_,j,T,N,E=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,r=[c]),(m=Ft.__b)&&m(e);try{e:if(typeof E=="function"){if(y=e.props,b=(m=E.contextType)&&s[m.__c],w=m?b?b.props.value:m.__:s,n.__c?x=(u=e.__c=n.__c).__=u.__E:("prototype"in E&&E.prototype.render?e.__c=u=new E(y,w):(e.__c=u=new Cs(y,w),u.constructor=E,u.render=nU),b&&b.sub(u),u.props=y,u.state||(u.state={}),u.context=w,u.__n=s,p=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),E.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=sl({},u.__s)),sl(u.__s,E.getDerivedStateFromProps(y,u.__s))),h=u.props,g=u.state,u.__v=e,p)E.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(E.getDerivedStateFromProps==null&&y!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,w),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,w)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(A){A&&(A.__=e)}),k=0;k<u._sb.length;k++)u.__h.push(u._sb[k]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,w),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,g,v)})}if(u.context=w,u.props=y,u.__P=t,_=Ft.__r,j=0,"prototype"in E&&E.prototype.render){for(u.state=u.__s,u.__d=!1,_&&_(e),m=u.render(u.props,u.state,u.context),T=0;T<u._sb.length;T++)u.__h.push(u._sb[T]);u._sb=[]}else do u.__d=!1,_&&_(e),m=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++j<25);u.state=u.__s,u.getChildContext!=null&&(s=sl(sl({},s),u.getChildContext())),p||u.getSnapshotBeforeUpdate==null||(v=u.getSnapshotBeforeUpdate(h,g)),N=m!=null&&m.type===Pn&&m.key==null?m.props.children:m,UA(t,Array.isArray(N)?N:[N],e,n,s,a,r,o,c,d),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),x&&(u.__E=u.__=null),u.__e=!1}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=tU(n.__e,e,n,s,a,r,o,d);(m=Ft.diffed)&&m(e)}catch(A){e.__v=null,(d||r!=null)&&(e.__e=c,e.__h=!!d,r[r.indexOf(c)]=null),Ft.__e(A,e,n)}}function YA(t,e){Ft.__c&&Ft.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(s){s.call(n)})}catch(s){Ft.__e(s,n.__v)}})}function tU(t,e,n,s,a,r,o,c){var d,m,u,p=n.props,h=e.props,g=e.type,v=0;if(g==="svg"&&(a=!0),r!=null){for(;v<r.length;v++)if((d=r[v])&&"setAttribute"in d==!!g&&(g?d.localName===g:d.nodeType===3)){t=d,r[v]=null;break}}if(t==null){if(g===null)return document.createTextNode(h);t=a?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,h.is&&h),r=null,c=!1}if(g===null)p===h||c&&t.data===h||(t.data=h);else{if(r=r&&zg.call(t.childNodes),m=(p=n.props||Mp).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!c){if(r!=null)for(p={},v=0;v<t.attributes.length;v++)p[t.attributes[v].name]=t.attributes[v].value;(u||m)&&(u&&(m&&u.__html==m.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(JV(t,h,p,a,c),u)e.__k=[];else if(v=e.props.children,UA(t,Array.isArray(v)?v:[v],e,n,s,a&&g!=="foreignObject",r,o,r?r[0]:n.__k&&Cm(n,0),c),r!=null)for(v=r.length;v--;)r[v]!=null&&zA(r[v]);c||("value"in h&&(v=h.value)!==void 0&&(v!==t.value||g==="progress"&&!v||g==="option"&&v!==p.value)&&Ip(t,"value",v,p.value,!1),"checked"in h&&(v=h.checked)!==void 0&&v!==t.checked&&Ip(t,"checked",v,p.checked,!1))}return t}function QA(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(s){Ft.__e(s,n)}}function ZA(t,e,n){var s,a;if(Ft.unmount&&Ft.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||QA(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(r){Ft.__e(r,e)}s.base=s.__P=null,t.__c=void 0}if(s=t.__k)for(a=0;a<s.length;a++)s[a]&&ZA(s[a],e,n||typeof t.type!="function");n||t.__e==null||zA(t.__e),t.__=t.__e=t.__d=void 0}function nU(t,e,n){return this.constructor(t,n)}function Sm(t,e,n){var s,a,r;Ft.__&&Ft.__(t,e),a=(s=!1)?null:e.__k,r=[],Ow(e,t=e.__k=je(Pn,null,[t]),a||Mp,Mp,e.ownerSVGElement!==void 0,a?null:e.firstChild?zg.call(e.childNodes):null,r,a?a.__e:e.firstChild,s),YA(r,t)}function iU(t,e){var n={__c:e="__cC"+qA++,__:t,Consumer:function(s,a){return s.children(a)},Provider:function(s){var a,r;return this.getChildContext||(a=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(c){c.__e=!0,ry(c)})},this.sub=function(o){a.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),c&&c.call(o)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}zg=HA.slice,Ft={__e:function(t,e,n,s){for(var a,r,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((r=a.constructor)&&r.getDerivedStateFromError!=null&&(a.setState(r.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,s||{}),o=a.__d),o)return a.__E=a}catch(c){t=c}throw t}},FA=0,$A=function(t){return t!=null&&t.constructor===void 0},Hc=!1,Cs.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=sl({},this.state),typeof t=="function"&&(t=t(sl({},n),this.props)),t&&sl(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ry(this))},Cs.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ry(this))},Cs.prototype.render=Pn,Ul=[],BA=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Op.__r=0,qA=0;var Oa,Rv,r1,XA=[],Pv=[],l1=Ft.__b,o1=Ft.__r,c1=Ft.diffed,d1=Ft.__c,m1=Ft.unmount;function sU(){for(var t;t=XA.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Lh),t.__H.__h.forEach(ly),t.__H.__h=[]}catch(e){t.__H.__h=[],Ft.__e(e,t.__v)}}Ft.__b=function(t){Oa=null,l1&&l1(t)},Ft.__r=function(t){o1&&o1(t);var e=(Oa=t.__c).__H;e&&(Rv===Oa?(e.__h=[],Oa.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Pv,n.__N=n.i=void 0})):(e.__h.forEach(Lh),e.__h.forEach(ly),e.__h=[])),Rv=Oa},Ft.diffed=function(t){c1&&c1(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(XA.push(e)!==1&&r1===Ft.requestAnimationFrame||((r1=Ft.requestAnimationFrame)||aU)(sU)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Pv&&(n.__=n.__V),n.i=void 0,n.__V=Pv})),Rv=Oa=null},Ft.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Lh),n.__h=n.__h.filter(function(s){return!s.__||ly(s)})}catch(s){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Ft.__e(s,n.__v)}}),d1&&d1(t,e)},Ft.unmount=function(t){m1&&m1(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{Lh(s)}catch(a){e=a}}),n.__H=void 0,e&&Ft.__e(e,n.__v))};var u1=typeof requestAnimationFrame=="function";function aU(t){var e,n=function(){clearTimeout(s),u1&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(n,100);u1&&(e=requestAnimationFrame(n))}function Lh(t){var e=Oa,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Oa=e}function ly(t){var e=Oa;t.__c=t.__(),Oa=e}function rU(t,e){for(var n in e)t[n]=e[n];return t}function h1(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&t[s]!==e[s])return!0;return!1}function p1(t){this.props=t}(p1.prototype=new Cs).isPureReactComponent=!0,p1.prototype.shouldComponentUpdate=function(t,e){return h1(this.props,t)||h1(this.state,e)};var g1=Ft.__b;Ft.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),g1&&g1(t)};var lU=Ft.__e;Ft.__e=function(t,e,n,s){if(t.then){for(var a,r=e;r=r.__;)if((a=r.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(t,e)}lU(t,e,n,s)};var f1=Ft.unmount;function JA(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),t.__c.__H=null),(t=rU({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(s){return JA(s,e,n)})),t}function eD(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(s){return eD(s,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Mv(){this.__u=0,this.t=null,this.__b=null}function tD(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function lh(){this.u=null,this.o=null}Ft.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),f1&&f1(t)},(Mv.prototype=new Cs).__c=function(t,e){var n=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(n);var a=tD(s.__v),r=!1,o=function(){r||(r=!0,n.__R=null,a?a(c):c())};n.__R=o;var c=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=eD(m,m.__c.__P,m.__c.__O)}var u;for(s.setState({__a:s.__b=null});u=s.t.pop();)u.forceUpdate()}},d=e.__h===!0;s.__u++||d||s.setState({__a:s.__b=s.__v.__k[0]}),t.then(o,o)},Mv.prototype.componentWillUnmount=function(){this.t=[]},Mv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=JA(this.__b,n,s.__O=s.__P)}this.__b=null}var a=e.__a&&je(Pn,null,t.fallback);return a&&(a.__h=null),[je(Pn,null,e.__a?null:t.children),a]};var v1=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function oU(t){return this.getChildContext=function(){return t.context},t.children}function cU(t){var e=this,n=t.i;e.componentWillUnmount=function(){Sm(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,a){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),Sm(je(oU,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function dU(t,e){var n=je(cU,{__v:t,i:e});return n.containerInfo=e,n}(lh.prototype=new Cs).__a=function(t){var e=this,n=tD(e.__v),s=e.o.get(t);return s[0]++,function(a){var r=function(){e.props.revealOrder?(s.push(a),v1(e,t,s)):a()};n?n(r):r()}},lh.prototype.render=function(t){this.u=null,this.o=new Map;var e=Lp(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},lh.prototype.componentDidUpdate=lh.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){v1(t,n,e)})};var mU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,uU=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,hU=typeof document<"u",pU=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};Cs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Cs.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var x1=Ft.event;function gU(){}function fU(){return this.cancelBubble}function vU(){return this.defaultPrevented}Ft.event=function(t){return x1&&(t=x1(t)),t.persist=gU,t.isPropagationStopped=fU,t.isDefaultPrevented=vU,t.nativeEvent=t};var y1={configurable:!0,get:function(){return this.class}},b1=Ft.vnode;Ft.vnode=function(t){var e=t.type,n=t.props,s=n;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var r in s={},n){var o=n[r];hU&&r==="children"&&e==="noscript"||r==="value"&&"defaultValue"in n&&o==null||(r==="defaultValue"&&"value"in n&&n.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!pU(n.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():a&&uU.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),s[r]&&(r="oninputCapture")),s[r]=o)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),t.props=s,n.class!=n.className&&(y1.enumerable="className"in n,n.className!=null&&(s.class=n.className),Object.defineProperty(s,"className",y1))}t.$$typeof=mU,b1&&b1(t)};var w1=Ft.__r;Ft.__r=function(t){w1&&w1(t),t.__c};const nD=[],oy=new Map;function Lw(t){nD.push(t),oy.forEach(e=>{sD(e,t)})}function xU(t){t.isConnected&&t.getRootNode&&iD(t.getRootNode())}function iD(t){let e=oy.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=bU();n&&(e.nonce=n);const s=t===document?document.head:t,a=t===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,a)}oy.set(t,e),yU(e)}}function yU(t){for(const e of nD)sD(t,e)}function sD(t,e){const{sheet:n}=t,s=n.cssRules.length;e.split("}").forEach((a,r)=>{a=a.trim(),a&&n.insertRule(a+"}",s+r)})}let Iv;function bU(){return Iv===void 0&&(Iv=wU()),Iv}function wU(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&iD(document);var kU=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Lw(kU);class Fw{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:s}=this;e in s&&(n?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function $w(t){t.parentNode&&t.parentNode.removeChild(t)}function Ii(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(jU(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function jU(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function NU(t,e){let n=t instanceof HTMLElement?[t]:t,s=[];for(let a=0;a<n.length;a+=1){let r=n[a].querySelectorAll(e);for(let o=0;o<r.length;o+=1)s.push(r[o])}return s}const CU=/(top|left|right|bottom|width|height)$/i;function sm(t,e){for(let n in e)aD(t,n,e[n])}function aD(t,e,n){n==null?t.style[e]="":typeof n=="number"&&CU.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function rD(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let k1=0;function Vg(){return k1+=1,"fc-dom-"+k1}function Ug(t){t.preventDefault()}function SU(t,e){return n=>{let s=Ii(n.target,t);s&&e.call(s,n,s)}}function lD(t,e,n,s){let a=SU(n,s);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function _U(t,e,n,s){let a;return lD(t,"mouseover",e,(r,o)=>{if(o!==a){a=o,n(r,o);let c=d=>{a=null,s(d,o),o.removeEventListener("mouseleave",c)};o.addEventListener("mouseleave",c)}})}const j1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function EU(t,e){let n=s=>{e(s),j1.forEach(a=>{t.removeEventListener(a,n)})};j1.forEach(s=>{t.addEventListener(s,n)})}function oD(t){return Object.assign({onClick:t},cD(t))}function cD(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let N1=0;function Ao(){return N1+=1,String(N1)}function Bw(){document.body.classList.add("fc-not-allowed")}function qw(){document.body.classList.remove("fc-not-allowed")}function TU(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Ug)}function AU(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Ug)}function DU(t){t.addEventListener("contextmenu",Ug)}function RU(t){t.removeEventListener("contextmenu",Ug)}function PU(t){let e=[],n=[],s,a;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),s=0;s<n.length;s+=1)a=n[s],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function MU(t,e,n){let s,a;for(s=0;s<n.length;s+=1)if(a=IU(t,e,n[s]),a)return a;return 0}function IU(t,e,n){return n.func?n.func(t,e):OU(t[n.field],e[n.field])*(n.order||1)}function OU(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function kc(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function am(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((s,a,r)=>s.replace("$"+r,a||""),t):n}function LU(t,e){return t-e}function Fh(t){return t%1===0}function FU(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const C1=["years","months","days","milliseconds"],$U=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Qt(t,e){return typeof t=="string"?BU(t):typeof t=="object"&&t?S1(t):typeof t=="number"?S1({[e||"milliseconds"]:t}):null}function BU(t){let e=$U.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function S1(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function qU(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function cy(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function HU(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function zU(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function VU(t){return jc(t)/365}function UU(t){return jc(t)/30}function jc(t){return ha(t)/864e5}function ha(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function Hw(t,e){let n=null;for(let s=0;s<C1.length;s+=1){let a=C1[s];if(e[a]){let r=t[a]/e[a];if(!Fh(r)||n!==null&&n!==r)return null;n=r}else if(t[a])return null}return n}function dy(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function yl(t,e,n){if(t===e)return!0;let s=t.length,a;if(s!==e.length)return!1;for(a=0;a<s;a+=1)if(!(n?n(t[a],e[a]):t[a]===e[a]))return!1;return!0}const WU=["sun","mon","tue","wed","thu","fri","sat"];function _1(t,e){let n=al(t);return n[2]+=e*7,os(n)}function fi(t,e){let n=al(t);return n[2]+=e,os(n)}function bl(t,e){let n=al(t);return n[6]+=e,os(n)}function KU(t,e){return Do(t,e)/7}function Do(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function GU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function YU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function QU(t,e){return(e.valueOf()-t.valueOf())/1e3}function ZU(t,e){let n=Mn(t),s=Mn(e);return{years:0,months:0,days:Math.round(Do(n,s)),milliseconds:e.valueOf()-s.valueOf()-(t.valueOf()-n.valueOf())}}function XU(t,e){let n=Fp(t,e);return n!==null&&n%7===0?n/7:null}function Fp(t,e){return rl(t)===rl(e)?Math.round(Do(t,e)):null}function Mn(t){return os([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function JU(t){return os([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function eW(t){return os([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function tW(t){return os([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function nW(t,e,n){let s=t.getUTCFullYear(),a=Ov(t,s,e,n);if(a<1)return Ov(t,s-1,e,n);let r=Ov(t,s+1,e,n);return r>=1?Math.min(a,r):a}function Ov(t,e,n,s){let a=os([e,0,1+iW(e,n,s)]),r=Mn(t),o=Math.round(Do(a,r));return Math.floor(o/7)+1}function iW(t,e,n){let s=7+e-n;return-((7+os([t,0,s]).getUTCDay()-e)%7)+s-1}function E1(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function T1(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function al(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function os(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function dD(t){return!isNaN(t.valueOf())}function rl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function mD(t,e,n=!1){let s=t.toISOString();return s=s.replace(".000",""),n&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",Vw(e,!0)))),s}function zw(t){return t.toISOString().replace(/T.*$/,"")}function sW(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function aW(t){return kc(t.getUTCHours(),2)+":"+kc(t.getUTCMinutes(),2)+":"+kc(t.getUTCSeconds(),2)}function Vw(t,e=!1){let n=t<0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),r=Math.round(s%60);return e?`${n+kc(a,2)}:${kc(r,2)}`:`GMT${n}${a}${r?`:${kc(r,2)}`:""}`}function Bt(t,e,n){let s,a;return function(...r){if(!s)a=t.apply(this,r);else if(!yl(s,r)){let o=t.apply(this,r);(!e||!e(o,a))&&(a=o)}return s=r,a}}function $h(t,e,n){let s,a;return r=>(s?va(s,r)||(a=t.call(this,r)):a=t.call(this,r),s=r,a)}const Lv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},$p={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},oh=/\s*([ap])\.?m\.?/i,rW=/,/g,lW=/\s+/g,oW=/\u200e/g,cW=/UTC|GMT/;class dW{constructor(e){let n={},s={},a=9;for(let r in e)r in Lv?(s[r]=e[r],Lv[r]<9&&(a=Math.min(Lv[r],a))):(n[r]=e[r],r in $p&&(a=Math.min($p[r],a)));this.standardDateProps=n,this.extendedSettings=s,this.smallestUnitNum=a,this.buildFormattingFunc=Bt(A1)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,s,a){let{standardDateProps:r,extendedSettings:o}=this,c=fW(e.marker,n.marker,s.calendarSystem);if(!c)return this.format(e,s);let d=c;d>1&&(r.year==="numeric"||r.year==="2-digit")&&(r.month==="numeric"||r.month==="2-digit")&&(r.day==="numeric"||r.day==="2-digit")&&(d=1);let m=this.format(e,s),u=this.format(n,s);if(m===u)return m;let p=vW(r,d),h=A1(p,o,s),g=h(e),v=h(n),x=xW(m,g,u,v),y=o.separator||a||s.defaultSeparator||"";return x?x.before+g+y+v+x.after:m+y+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function A1(t,e,n){let s=Object.keys(t).length;return s===1&&t.timeZoneName==="short"?a=>Vw(a.timeZoneOffset):s===0&&e.week?a=>gW(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,e.week):mW(t,e,n)}function mW(t,e,n){t=Object.assign({},t),e=Object.assign({},e),uW(t,e),t.timeZone="UTC";let s=new Intl.DateTimeFormat(n.locale.codes,t),a;if(e.omitZeroMinute){let r=Object.assign({},t);delete r.minute,a=new Intl.DateTimeFormat(n.locale.codes,r)}return r=>{let{marker:o}=r,c;a&&!o.getUTCMinutes()?c=a:c=s;let d=c.format(o);return hW(d,r,t,e,n)}}function uW(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function hW(t,e,n,s,a){return t=t.replace(oW,""),n.timeZoneName==="short"&&(t=pW(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Vw(e.timeZoneOffset))),s.omitCommas&&(t=t.replace(rW,"").trim()),s.omitZeroMinute&&(t=t.replace(":00","")),s.meridiem===!1?t=t.replace(oh,"").trim():s.meridiem==="narrow"?t=t.replace(oh,(r,o)=>o.toLocaleLowerCase()):s.meridiem==="short"?t=t.replace(oh,(r,o)=>`${o.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(t=t.replace(oh,r=>r.toLocaleLowerCase())),t=t.replace(lW," "),t=t.trim(),t}function pW(t,e){let n=!1;return t=t.replace(cW,()=>(n=!0,e)),n||(t+=` ${e}`),t}function gW(t,e,n,s,a){let r=[];return a==="long"?r.push(n):(a==="short"||a==="narrow")&&r.push(e),(a==="long"||a==="short")&&r.push(" "),r.push(s.simpleNumberFormat.format(t)),s.options.direction==="rtl"&&r.reverse(),r.join("")}function fW(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:rl(t)!==rl(e)?1:0}function vW(t,e){let n={};for(let s in t)(!(s in $p)||$p[s]<=e)&&(n[s]=t[s]);return n}function xW(t,e,n,s){let a=0;for(;a<t.length;){let r=t.indexOf(e,a);if(r===-1)break;let o=t.substr(0,r);a=r+e.length;let c=t.substr(a),d=0;for(;d<n.length;){let m=n.indexOf(s,d);if(m===-1)break;let u=n.substr(0,m);d=m+s.length;let p=n.substr(d);if(o===u&&c===p)return{before:o,after:c}}}return null}function D1(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Bp(t,e,n,s){let a=D1(t,n.calendarSystem),r=e?D1(e,n.calendarSystem):null;return{date:a,start:a,end:r,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:s||n.defaultSeparator}}class yW{constructor(e){this.cmdStr=e}format(e,n,s){return n.cmdFormatter(this.cmdStr,Bp(e,null,n,s))}formatRange(e,n,s,a){return s.cmdFormatter(this.cmdStr,Bp(e,n,s,a))}}class bW{constructor(e){this.func=e}format(e,n,s){return this.func(Bp(e,null,n,s))}formatRange(e,n,s,a){return this.func(Bp(e,n,s,a))}}function Un(t){return typeof t=="object"&&t?new dW(t):typeof t=="string"?new yW(t):typeof t=="function"?new bW(t):null}const R1={navLinkDayClick:Le,navLinkWeekClick:Le,duration:Qt,bootstrapFontAwesome:Le,buttonIcons:Le,customButtons:Le,defaultAllDayEventDuration:Qt,defaultTimedEventDuration:Qt,nextDayThreshold:Qt,scrollTime:Qt,scrollTimeReset:Boolean,slotMinTime:Qt,slotMaxTime:Qt,dayPopoverFormat:Un,slotDuration:Qt,snapDuration:Qt,headerToolbar:Le,footerToolbar:Le,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Un,dayHeaderClassNames:Le,dayHeaderContent:Le,dayHeaderDidMount:Le,dayHeaderWillUnmount:Le,dayCellClassNames:Le,dayCellContent:Le,dayCellDidMount:Le,dayCellWillUnmount:Le,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Le,weekNumbers:Boolean,weekNumberClassNames:Le,weekNumberContent:Le,weekNumberDidMount:Le,weekNumberWillUnmount:Le,editable:Boolean,viewClassNames:Le,viewDidMount:Le,viewWillUnmount:Le,nowIndicator:Boolean,nowIndicatorSnap:Le,nowIndicatorClassNames:Le,nowIndicatorContent:Le,nowIndicatorDidMount:Le,nowIndicatorWillUnmount:Le,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Le,locale:Le,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Le,eventOrder:PU,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Le,contentHeight:Le,direction:String,weekNumberFormat:Un,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Le,initialDate:Le,now:Le,eventDataTransform:Le,stickyHeaderDates:Le,stickyFooterScrollbar:Le,viewHeight:Le,defaultAllDay:Boolean,eventSourceFailure:Le,eventSourceSuccess:Le,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Le,eventConstraint:Le,eventAllow:Le,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Le,eventContent:Le,eventDidMount:Le,eventWillUnmount:Le,selectConstraint:Le,selectOverlap:Le,selectAllow:Le,droppable:Boolean,unselectCancel:String,slotLabelFormat:Le,slotLaneClassNames:Le,slotLaneContent:Le,slotLaneDidMount:Le,slotLaneWillUnmount:Le,slotLabelClassNames:Le,slotLabelContent:Le,slotLabelDidMount:Le,slotLabelWillUnmount:Le,dayMaxEvents:Le,dayMaxEventRows:Le,dayMinWidth:Number,slotLabelInterval:Qt,allDayText:String,allDayClassNames:Le,allDayContent:Le,allDayDidMount:Le,allDayWillUnmount:Le,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Un,rerenderDelay:Number,moreLinkText:Le,moreLinkHint:Le,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Le,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Qt,hiddenDays:Le,fixedWeekCount:Boolean,validRange:Le,visibleRange:Le,titleFormat:Le,eventInteractive:Boolean,noEventsText:String,viewHint:Le,navLinkHint:Le,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Le,moreLinkClassNames:Le,moreLinkContent:Le,moreLinkDidMount:Le,moreLinkWillUnmount:Le,monthStartFormat:Un,handleCustomRendering:Le,customRenderingMetaMap:Le,customRenderingReplaces:Boolean},rm={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},P1={datesSet:Le,eventsSet:Le,eventAdd:Le,eventChange:Le,eventRemove:Le,windowResize:Le,eventClick:Le,eventMouseEnter:Le,eventMouseLeave:Le,select:Le,unselect:Le,loading:Le,_unmount:Le,_beforeprint:Le,_afterprint:Le,_noEventDrop:Le,_noEventResize:Le,_resize:Le,_scrollRequest:Le},M1={buttonText:Le,buttonHints:Le,views:Le,plugins:Le,initialEvents:Le,events:Le,eventSources:Le},Hl={headerToolbar:zl,footerToolbar:zl,buttonText:zl,buttonHints:zl,buttonIcons:zl,dateIncrement:zl,plugins:ch,events:ch,eventSources:ch,resources:ch};function zl(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?va(t,e):t===e}function ch(t,e){return Array.isArray(t)&&Array.isArray(e)?yl(t,e):t===e}const wW={type:String,component:Le,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Le,usesMinMaxTime:Boolean,classNames:Le,content:Le,didMount:Le,willUnmount:Le};function Fv(t){return Ww(t,Hl)}function Uw(t,e){let n={},s={};for(let a in e)a in t&&(n[a]=e[a](t[a]));for(let a in t)a in e||(s[a]=t[a]);return{refined:n,extra:s}}function Le(t){return t}const{hasOwnProperty:qp}=Object.prototype;function Ww(t,e){let n={};if(e){for(let s in e)if(e[s]===zl){let a=[];for(let r=t.length-1;r>=0;r-=1){let o=t[r][s];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){n[s]=o;break}}a.length&&(n[s]=Ww(a))}}for(let s=t.length-1;s>=0;s-=1){let a=t[s];for(let r in a)r in n||(n[r]=a[r])}return n}function uo(t,e){let n={};for(let s in t)e(t[s],s)&&(n[s]=t[s]);return n}function Rr(t,e){let n={};for(let s in t)n[s]=e(t[s],s);return n}function uD(t){let e={};for(let n of t)e[n]=!0;return e}function Kw(t){let e=[];for(let n in t)e.push(t[n]);return e}function va(t,e){if(t===e)return!0;for(let n in t)if(qp.call(t,n)&&!(n in e))return!1;for(let n in e)if(qp.call(e,n)&&t[n]!==e[n])return!1;return!0}const kW=/^on[A-Z]/;function jW(t,e){const n=NW(t,e);for(let s of n)if(!kW.test(s))return!1;return!0}function NW(t,e){let n=[];for(let s in t)qp.call(t,s)&&(s in e||n.push(s));for(let s in e)qp.call(e,s)&&t[s]!==e[s]&&n.push(s);return n}function $v(t,e,n={}){if(t===e)return!0;for(let s in e)if(!(s in t&&CW(t[s],e[s],n[s])))return!1;for(let s in t)if(!(s in e))return!1;return!0}function CW(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function SW(t,e=0,n,s=1){let a=[];n==null&&(n=Object.keys(t).length);for(let r=e;r<n;r+=s){let o=t[r];o!==void 0&&a.push(o)}return a}let hD={};function _W(t,e){hD[t]=e}function EW(t){return new hD[t]}class TW{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return os(e)}markerToArray(e){return al(e)}}_W("gregory",TW);const AW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function DW(t){let e=AW.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(dD(n)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class RW{constructor(e){let n=this.timeZone=e.timeZone,s=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=EW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):os(E1(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=os(e)),n===null||!dD(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=DW(e);if(n===null)return null;let{marker:s}=n,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:s,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n.years,s[1]+=n.months,s[2]+=n.days,s[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]-=n.years,s[1]-=n.months,s[2]-=n.days,s[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n,this.calendarSystem.arrayToMarker(s)}addMonths(e,n){let s=this.calendarSystem.markerToArray(e);return s[1]+=n,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,n){let{calendarSystem:s}=this;return rl(e)===rl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)&&s.getMarkerMonth(e)===s.getMarkerMonth(n)?s.getMarkerYear(n)-s.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:s}=this;return rl(e)===rl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)?s.getMarkerMonth(n)-s.getMarkerMonth(e)+(s.getMarkerYear(n)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let s=this.diffWholeYears(e,n);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,n),s!==null?{unit:"month",value:s}:(s=XU(e,n),s!==null?{unit:"week",value:s}:(s=Fp(e,n),s!==null?{unit:"day",value:s}:(s=GU(e,n),Fh(s)?{unit:"hour",value:s}:(s=YU(e,n),Fh(s)?{unit:"minute",value:s}:(s=QU(e,n),Fh(s)?{unit:"second",value:s}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,s){let a;return s.years&&(a=this.diffWholeYears(e,n),a!==null)?a/VU(s):s.months&&(a=this.diffWholeMonths(e,n),a!==null)?a/UU(s):s.days&&(a=Fp(e,n),a!==null)?a/jc(s):(n.valueOf()-e.valueOf())/ha(s)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?Mn(e):n==="hour"?JU(e):n==="minute"?eW(e):n==="second"?tW(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):nW(e,this.weekDow,this.weekDoy)}format(e,n,s={}){return n.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,s,a={}){return a.isEndExclusive&&(n=bl(n,-1)),s.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)}formatIso(e,n={}){let s=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?s=n.forcedTzo:s=this.offsetForMarker(e)),mD(e,s,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?os(E1(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):os(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-T1(al(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(al(e)):null}toDate(e,n){return this.timeZone==="local"?T1(al(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(al(e))*1e3*60):new Date(e.valueOf()-(n||0))}}let iu=class{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,s;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(s in e)n[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let s;return n&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}};iu.prototype.classes={};iu.prototype.iconClasses={};iu.prototype.baseIconClass="";iu.prototype.iconOverridePrefix="";function Hp(t){t();let e=Ft.debounceRendering,n=[];function s(a){n.push(a)}for(Ft.debounceRendering=s,Sm(je(PW,{}),document.createElement("div"));n.length;)n.shift()();Ft.debounceRendering=e}class PW extends Cs{render(){return je("div",{})}componentDidMount(){this.setState({})}}function pD(t){let e=iU(t),n=e.Provider;return e.Provider=function(){let s=!this.getChildContext,a=n.apply(this,arguments);if(s){let r=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&r.forEach(c=>{c.context=o.value,c.forceUpdate()})},this.sub=o=>{r.push(o);let c=o.componentWillUnmount;o.componentWillUnmount=()=>{r.splice(r.indexOf(o),1),c&&c.call(o)}}}return a},e}class MW{constructor(e,n,s,a){this.execFunc=e,this.emitter=n,this.scrollTime=s,this.scrollTimeReset=a,this.handleScrollRequest=r=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},r),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const $r=pD({});function IW(t,e,n,s,a,r,o,c,d,m,u,p,h,g){return{dateEnv:a,nowManager:r,options:n,pluginHooks:c,emitter:u,dispatch:d,getCurrentData:m,calendarApi:p,viewSpec:t,viewApi:e,dateProfileGenerator:s,theme:o,isRtl:n.direction==="rtl",addResizeHandler(v){u.on("_resize",v)},removeResizeHandler(v){u.off("_resize",v)},createScrollResponder(v){return new MW(v,u,Qt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:g}}class Ro extends Cs{shouldComponentUpdate(e,n){return!$v(this.props,e,this.propEquality)||!$v(this.state,n,this.stateEquality)}safeSetState(e){$v(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Ro.addPropsEquality=OW;Ro.addStateEquality=LW;Ro.contextType=$r;Ro.prototype.propEquality={};Ro.prototype.stateEquality={};class wn extends Ro{}wn.contextType=$r;function OW(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function LW(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Ka(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class Gw extends wn{constructor(){super(...arguments),this.id=Ao(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:s}=this.props;(!n.customRenderingReplaces||!my(s,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Ka(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:s}=n,{customGenerator:a,defaultGenerator:r,renderProps:o}=e,c=gD(e,[],this.handleEl);let d=!1,m,u=[],p;if(a!=null){const h=typeof a=="function"?a(o,je):a;if(h===!0)d=!0;else{const g=h&&typeof h=="object";g&&"html"in h?c.dangerouslySetInnerHTML={__html:h.html}:g&&"domNodes"in h?u=Array.prototype.slice.call(h.domNodes):(g?$A(h):typeof h!="function")?m=h:p=h}}else d=!my(e.generatorName,s);return d&&r&&(m=r(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=p,je(e.elTag,c,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:s,context:a}=this,{handleCustomRendering:r,customRenderingMetaMap:o}=a.options;if(r){const c=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o?.[s.generatorName];c&&r(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},s),{elClasses:(s.elClasses||[]).filter(FW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,s=this.base;if(!yl(e,n)){n.forEach($w);for(let a of e)s.appendChild(a);this.currentDomNodes=e}}}Gw.addPropsEquality({elClasses:yl,elStyle:va,elAttrs:jW,renderProps:va});function my(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function gD(t,e,n){const s=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(s.className=(t.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),t.elStyle&&(s.style=t.elStyle),s}function FW(t){return!!t}const fD=pD(0);class Rs extends Cs{constructor(){super(...arguments),this.InnerContent=$W.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Ka(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=BW(e.classNameGenerator,e.renderProps);if(e.children){const s=gD(e,n,this.handleEl),a=e.children(this.InnerContent,e.renderProps,s);return e.elTag?je(e.elTag,s,a):a}else return je(Gw,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Rs.contextType=fD;function $W(t,e){const n=t.props;return je(Gw,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function BW(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class zp extends wn{render(){let{props:e,context:n}=this,{options:s}=n,a={view:n.viewApi};return je(Rs,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...vD(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function vD(t){return[`fc-${t.type}-view`,"fc-view"]}function qW(t,e){let n=null,s=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(s=e.createMarker(t.end)),!n&&!s||n&&s&&s<n?null:{start:n,end:s}}function I1(t,e){let n=[],{start:s}=e,a,r;for(t.sort(HW),a=0;a<t.length;a+=1)r=t[a],r.start>s&&n.push({start:s,end:r.start}),r.end>s&&(s=r.end);return s<e.end&&n.push({start:s,end:e.end}),n}function HW(t,e){return t.start.valueOf()-e.start.valueOf()}function ho(t,e){let{start:n,end:s}=t,a=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(n===null||s===null||n<s)&&(a={start:n,end:s}),a}function zW(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Yw(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Wg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function _r(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function VW(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function xD(t){let e=Math.floor(Do(t.start,t.end))||1,n=Mn(t.start),s=fi(n,e);return{start:n,end:s}}function yD(t,e=Qt(0)){let n=null,s=null;if(t.end){s=Mn(t.end);let a=t.end.valueOf()-s.valueOf();a&&a>=ha(e)&&(s=fi(s,1))}return t.start&&(n=Mn(t.start),s&&s<=n&&(s=fi(n,1))),{start:n,end:s}}function oc(t,e,n,s){return s==="year"?Qt(n.diffWholeYears(t,e),"year"):s==="month"?Qt(n.diffWholeMonths(t,e),"month"):ZU(t,e)}class bD{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,s){let{dateEnv:a}=this.props,r=a.subtract(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(r,-1,s)}buildNext(e,n,s){let{dateEnv:a}=this.props,r=a.add(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(r,1,s)}build(e,n,s=!0){let{props:a}=this,r,o,c,d,m,u;return r=this.buildValidRange(),r=this.trimHiddenDays(r),s&&(e=VW(e,r)),o=this.buildCurrentRangeInfo(e,n),c=/^(year|month|week|day)$/.test(o.unit),d=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,c),d=this.trimHiddenDays(d),m=d,a.showNonCurrentDates||(m=ho(m,o.range)),m=this.adjustActiveRange(m),m=ho(m,r),u=Yw(o.range,r),_r(d,e)||(e=d.start),{currentDate:e,validRange:r,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:c,activeRange:m,renderRange:d,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:s}=this,a=null,r=null,o=null,c;return s.duration?(a=s.duration,r=s.durationUnit,o=this.buildRangeFromDuration(e,n,a,r)):(c=this.props.dayCount)?(r="day",o=this.buildRangeFromDayCount(e,n,c)):(o=this.buildCustomVisibleRange(e))?r=s.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),r=dy(a).unit,o=this.buildRangeFromDuration(e,n,a,r)),{duration:a,unit:r,range:o}}getFallbackDuration(){return Qt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:s,slotMinTime:a,slotMaxTime:r}=this.props,{start:o,end:c}=e;return s&&(jc(a)<0&&(o=Mn(o),o=n.add(o,a)),jc(r)>1&&(c=Mn(c),c=fi(c,-1),c=n.add(c,r))),{start:o,end:c}}buildRangeFromDuration(e,n,s,a){let{dateEnv:r,dateAlignment:o}=this.props,c,d,m;if(!o){let{dateIncrement:p}=this.props;p&&ha(p)<ha(s)?o=dy(p).unit:o=a}jc(s)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,n),c=Mn(c));function u(){c=r.startOf(e,o),d=r.add(c,s),m={start:c,end:d}}return u(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,n),u()),m}buildRangeFromDayCount(e,n,s){let{dateEnv:a,dateAlignment:r}=this.props,o=0,c=e,d;r&&(c=a.startOf(c,r)),c=Mn(c),c=this.skipHiddenDays(c,n),d=c;do d=fi(d,1),this.isHiddenDay(d)||(o+=1);while(o<s);return{start:c,end:d}}buildCustomVisibleRange(e){let{props:n}=this,s=n.visibleRangeInput,a=typeof s=="function"?s.call(n.calendarApi,n.dateEnv.toDate(e)):s,r=this.refineRange(a);return r&&(r.start==null||r.end==null)?null:r}buildRenderRange(e,n,s){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,s;return n||((s=this.props.dateAlignment)?Qt(1,s):e||Qt({days:1}))}refineRange(e){if(e){let n=qW(e,this.props.dateEnv);return n&&(n=yD(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],s=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(n[a]=e.indexOf(a)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:s}=e;return n&&(n=this.skipHiddenDays(n)),s&&(s=this.skipHiddenDays(s,-1,!0)),n==null||s==null||n<s?{start:n,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?n:0)+7)%7];)e=fi(e,n);return e}}function Qw(t,e,n,s){return{instanceId:Ao(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:s??null}}function UW(t,e,n,s){for(let a=0;a<s.length;a+=1){let r=s[a].parse(t,n);if(r){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=r.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:r.duration,typeData:r.typeData,typeId:a}}}return null}function po(t,e,n){let{dateEnv:s,pluginHooks:a,options:r}=n,{defs:o,instances:c}=t;c=uo(c,d=>!o[d.defId].recurringDef);for(let d in o){let m=o[d];if(m.recurringDef){let{duration:u}=m.recurringDef;u||(u=m.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);let p=WW(m,u,e,s,a.recurringTypes);for(let h of p){let g=Qw(d,{start:h,end:s.add(h,u)});c[g.instanceId]=g}}}return{defs:o,instances:c}}function WW(t,e,n,s,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:s.subtract(n.start,e),end:n.end},s);return t.allDay&&(o=o.map(Mn)),o}const Bh={id:String,groupId:String,title:String,url:String,interactive:Boolean},wD={start:Le,end:Le,date:Le,allDay:Boolean},KW=Object.assign(Object.assign(Object.assign({},Bh),wD),{extendedProps:Le});function kD(t,e,n,s,a=Zw(n),r,o){let{refined:c,extra:d}=jD(t,n,a),m=YW(e,n),u=UW(c,m,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let h=uy(c,d,e?e.sourceId:"",u.allDay,!!u.duration,n,r);return h.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:h,instance:null}}let p=GW(c,m,n,s);if(p){let h=uy(c,d,e?e.sourceId:"",p.allDay,p.hasEnd,n,r),g=Qw(h.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return o&&h.publicId&&o[h.publicId]&&(g.instanceId=o[h.publicId]),{def:h,instance:g}}return null}function jD(t,e,n=Zw(e)){return Uw(t,n)}function Zw(t){return Object.assign(Object.assign(Object.assign({},Vp),KW),t.pluginHooks.eventRefiners)}function uy(t,e,n,s,a,r,o){let c={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||Ao(),sourceId:n,allDay:s,hasEnd:a,interactive:t.interactive,ui:Up(t,r),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let d of r.pluginHooks.eventDefMemberAdders)Object.assign(c,d(t));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function GW(t,e,n,s){let{allDay:a}=t,r,o=null,c=!1,d,m=null,u=t.start!=null?t.start:t.date;if(r=n.dateEnv.createMarkerMeta(u),r)o=r.marker;else if(!s)return null;return t.end!=null&&(d=n.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!r||r.isTimeUnspecified)&&(!d||d.isTimeUnspecified)),a&&o&&(o=Mn(o)),d&&(m=d.marker,a&&(m=Mn(m)),o&&m<=o&&(m=null)),m?c=!0:s||(c=n.options.forceEventDuration||!1,m=n.dateEnv.add(o,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:c,range:{start:o,end:m},forcedStartTzo:r?r.forcedTzo:null,forcedEndTzo:d?d.forcedTzo:null}}function YW(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function _m(t,e,n,s,a,r){let o=Ss(),c=Zw(n);for(let d of t){let m=kD(d,e,n,s,c,a,r);m&&hy(m,o)}return o}function hy(t,e=Ss()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function Xw(t,e){let n=t.instances[e];if(n){let s=t.defs[n.defId],a=Kg(t,r=>QW(s,r));return a.defs[s.defId]=s,a.instances[n.instanceId]=n,a}return Ss()}function QW(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Ss(){return{defs:{},instances:{}}}function Jw(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Kg(t,e){let n=uo(t.defs,e),s=uo(t.instances,a=>n[a.defId]);return{defs:n,instances:s}}function ZW(t,e){let{defs:n,instances:s}=t,a={},r={};for(let o in n)e.defs[o]||(a[o]=n[o]);for(let o in s)!e.instances[o]&&a[s[o].defId]&&(r[o]=s[o]);return{defs:a,instances:r}}function XW(t,e){return Array.isArray(t)?_m(t,null,e,!0):typeof t=="object"&&t?_m([t],null,e,!0):t!=null?String(t):null}function O1(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Vp={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Le,overlap:Le,allow:Le,className:O1,classNames:O1,color:String,backgroundColor:String,borderColor:String,textColor:String},JW={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Up(t,e){let n=XW(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function ND(t){return t.reduce(eK,JW)}function eK(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const tK={id:String,defaultAllDay:Boolean,url:String,format:String,events:Le,eventDataTransform:Le,success:Le,failure:Le};function CD(t,e,n=SD(e)){let s;if(typeof t=="string"?s={url:t}:typeof t=="function"||Array.isArray(t)?s={events:t}:typeof t=="object"&&t&&(s=t),s){let{refined:a,extra:r}=Uw(s,n),o=nK(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:Ao(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Up(a,e),extendedProps:r}}return null}function SD(t){return Object.assign(Object.assign(Object.assign({},Vp),tK),t.pluginHooks.eventSourceRefiners)}function nK(t,e){let n=e.pluginHooks.eventSourceDefs;for(let s=n.length-1;s>=0;s-=1){let r=n[s].parseMeta(t);if(r)return{sourceDefId:s,meta:r}}return null}function iK(t,e,n,s,a){switch(e.type){case"RECEIVE_EVENTS":return sK(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return aK(t,n[e.sourceId],e.rawEvents,s.activeRange,a);case"ADD_EVENTS":return rK(t,e.eventStore,s?s.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Jw(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?po(t,s.activeRange,a):t;case"REMOVE_EVENTS":return ZW(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return ED(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kg(t,r=>!r.sourceId);case"REMOVE_ALL_EVENTS":return Ss();default:return t}}function sK(t,e,n,s,a,r){if(e&&n===e.latestFetchId){let o=_m(_D(a,e,r),e,r);return s&&(o=po(o,s,r)),Jw(ED(t,e.sourceId),o)}return t}function aK(t,e,n,s,a){const{defIdMap:r,instanceIdMap:o}=oK(t);let c=_m(_D(n,e,a),e,a,!1,r,o);return po(c,s,a)}function _D(t,e,n){let s=n.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=L1(t,a)),s&&(t=L1(t,s)),t}function L1(t,e){let n;if(!e)n=t;else{n=[];for(let s of t){let a=e(s);a?n.push(a):a==null&&n.push(s)}}return n}function rK(t,e,n,s){return n&&(e=po(e,n,s)),Jw(t,e)}function F1(t,e,n){let{defs:s}=t,a=Rr(t.instances,r=>s[r.defId].allDay?r:Object.assign(Object.assign({},r),{range:{start:n.createMarker(e.toDate(r.range.start,r.forcedStartTzo)),end:n.createMarker(e.toDate(r.range.end,r.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:r.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:r.forcedEndTzo}));return{defs:s,instances:a}}function ED(t,e){return Kg(t,n=>n.sourceId!==e)}function lK(t,e){return{defs:t.defs,instances:uo(t.instances,n=>!e[n.instanceId])}}function oK(t){const{defs:e,instances:n}=t,s={},a={};for(let r in e){const o=e[r],{publicId:c}=o;c&&(s[c]=r)}for(let r in n){const o=n[r],c=e[o.defId],{publicId:d}=c;d&&(a[d]=r)}return{defIdMap:s,instanceIdMap:a}}let Gg=class{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){cK(this.handlers,e,n)}off(e,n){dK(this.handlers,e,n)}trigger(e,...n){let s=this.handlers[e]||[],a=this.options&&this.options[e],r=[].concat(a||[],s);for(let o of r)o.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}};function cK(t,e,n){(t[e]||(t[e]=[])).push(n)}function dK(t,e,n){n?t[e]&&(t[e]=t[e].filter(s=>s!==n)):delete t[e]}const mK={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function uK(t,e){return _m(hK(t),null,e)}function hK(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},mK),n)),e}function TD(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},ek(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function pK(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function ek(t,e){let n={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(n,s(t,e));return Object.assign(n,EK(t,e.dateEnv)),n}function $1(t,e,n){let{dateEnv:s,options:a}=n,r=e;return t?(r=Mn(r),r=s.add(r,a.defaultAllDayEventDuration)):r=s.add(r,a.defaultTimedEventDuration),r}function tk(t,e,n,s){let a=Wp(t.defs,e),r=Ss();for(let o in t.defs){let c=t.defs[o];r.defs[o]=gK(c,a[o],n,s)}for(let o in t.instances){let c=t.instances[o],d=r.defs[c.defId];r.instances[o]=fK(c,d,a[c.defId],n,s)}return r}function gK(t,e,n,s){let a=n.standardProps||{};a.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);let r=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});n.extendedProps&&(r.extendedProps=Object.assign(Object.assign({},r.extendedProps),n.extendedProps));for(let o of s.pluginHooks.eventDefMutationAppliers)o(r,n,s);return!r.hasEnd&&s.options.forceEventDuration&&(r.hasEnd=!0),r}function fK(t,e,n,s,a){let{dateEnv:r}=a,o=s.standardProps&&s.standardProps.allDay===!0,c=s.standardProps&&s.standardProps.hasEnd===!1,d=Object.assign({},t);return o&&(d.range=xD(d.range)),s.datesDelta&&n.startEditable&&(d.range={start:r.add(d.range.start,s.datesDelta),end:r.add(d.range.end,s.datesDelta)}),s.startDelta&&n.durationEditable&&(d.range={start:r.add(d.range.start,s.startDelta),end:d.range.end}),s.endDelta&&n.durationEditable&&(d.range={start:d.range.start,end:r.add(d.range.end,s.endDelta)}),c&&(d.range={start:d.range.start,end:$1(e.allDay,d.range.start,a)}),e.allDay&&(d.range={start:Mn(d.range.start),end:Mn(d.range.end)}),d.range.end<d.range.start&&(d.range.end=$1(e.allDay,d.range.start,a)),d}class nc{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class zn{constructor(e,n,s){this._context=e,this._def=n,this._instance=s||null}setProp(e,n){if(e in wD)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=Bh[e](n),this.mutate({standardProps:{publicId:n}});else if(e in Bh)n=Bh[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Vp){let s=Vp[e](n);e==="color"?s={backgroundColor:n,borderColor:n}:e==="editable"?s={startEditable:n,durationEditable:n}:s={[e]:n},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:s}=this._context,a=s.createMarker(e);if(a&&this._instance){let r=this._instance.range,o=oc(r.start,a,s,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,n={}){let{dateEnv:s}=this._context,a;if(!(e!=null&&(a=s.createMarker(e),!a))&&this._instance)if(a){let r=oc(this._instance.range.end,a,s,n.granularity);this.mutate({endDelta:r})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,s={}){let{dateEnv:a}=this._context,r={allDay:s.allDay},o=a.createMarker(e),c;if(o&&!(n!=null&&(c=a.createMarker(n),!c))&&this._instance){let d=this._instance.range;s.allDay===!0&&(d=xD(d));let m=oc(d.start,o,a,s.granularity);if(c){let u=oc(d.end,c,a,s.granularity);qU(m,u)?this.mutate({datesDelta:m,standardProps:r}):this.mutate({startDelta:m,endDelta:u,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:m,standardProps:r})}}moveStart(e){let n=Qt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Qt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Qt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let s={allDay:e},{maintainDuration:a}=n;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=a),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:n}=this._context,s=this._instance,a=Un(e);return this._def.hasEnd?n.formatRange(s.range.start,s.range.end,a,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):n.format(s.range.start,a,{forcedTzo:s.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let s=this._def,a=this._context,{eventStore:r}=a.getCurrentData(),o=Xw(r,n.instanceId);o=tk(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let d=new zn(a,s,n);this._def=o.defs[s.defId],this._instance=o.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:d,event:this,relatedEvents:to(o,a,n),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:r})}})}}remove(){let e=this._context,n=AD(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new nc(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:s}=n,{startStr:a,endStr:r}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),a&&(o.start=a),r&&(o.end=r),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),s.display&&s.display!=="auto"&&(o.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?o.color=s.backgroundColor:(s.backgroundColor&&(o.backgroundColor=s.backgroundColor),s.borderColor&&(o.borderColor=s.borderColor)),s.textColor&&(o.textColor=s.textColor),s.classNames.length&&(o.classNames=s.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function AD(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function to(t,e,n){let{defs:s,instances:a}=t,r=[],o=n?n.instanceId:"";for(let c in a){let d=a[c],m=s[d.defId];d.instanceId!==o&&r.push(new zn(e,m,d))}return r}function B1(t,e,n,s){let a={},r={},o={},c=[],d=[],m=Wp(t.defs,e);for(let u in t.defs){let p=t.defs[u];m[p.defId].display==="inverse-background"&&(p.groupId?(a[p.groupId]=[],o[p.groupId]||(o[p.groupId]=p)):r[u]=[])}for(let u in t.instances){let p=t.instances[u],h=t.defs[p.defId],g=m[h.defId],v=p.range,x=!h.allDay&&s?yD(v,s):v,y=ho(x,n);y&&(g.display==="inverse-background"?h.groupId?a[h.groupId].push(y):r[p.defId].push(y):g.display!=="none"&&(g.display==="background"?c:d).push({def:h,ui:g,instance:p,range:y,isStart:x.start&&x.start.valueOf()===y.start.valueOf(),isEnd:x.end&&x.end.valueOf()===y.end.valueOf()}))}for(let u in a){let p=a[u],h=I1(p,n);for(let g of h){let v=o[u],x=m[v.defId];c.push({def:v,ui:x,instance:null,range:g,isStart:!1,isEnd:!1})}}for(let u in r){let p=r[u],h=I1(p,n);for(let g of h)c.push({def:t.defs[u],ui:m[u],instance:null,range:g,isStart:!1,isEnd:!1})}return{bg:c,fg:d}}function vK(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function q1(t,e){t.fcSeg=e}function zc(t){return t.fcSeg||t.parentNode.fcSeg||null}function Wp(t,e){return Rr(t,n=>DD(n,e))}function DD(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),ND(n)}function RD(t,e){let n=t.map(xK);return n.sort((s,a)=>MU(s,a,e)),n.map(s=>s._seg)}function xK(t){let{eventRange:e}=t,n=e.def,s=e.instance?e.instance.range:e.range,a=s.start?s.start.valueOf():0,r=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:a,end:r,duration:r-a,allDay:Number(n.allDay),_seg:t})}function yK(t,e){let{pluginHooks:n}=e,s=n.isDraggableTransformers,{def:a,ui:r}=t.eventRange,o=r.startEditable;for(let c of s)o=c(o,a,r,e);return o}function bK(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function wK(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function PD(t,e,n,s,a,r,o){let{dateEnv:c,options:d}=n,{displayEventTime:m,displayEventEnd:u}=d,p=t.eventRange.def,h=t.eventRange.instance;m==null&&(m=s!==!1),u==null&&(u=a!==!1);let g=h.range.start,v=h.range.end,x=t.start||t.eventRange.range.start,y=t.end||t.eventRange.range.end,b=Mn(g).valueOf()===Mn(x).valueOf(),w=Mn(bl(v,-1)).valueOf()===Mn(bl(y,-1)).valueOf();return m&&!p.allDay&&(b||w)?(x=b?g:x,y=w?v:y,u&&p.hasEnd?c.formatRange(x,y,e,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):c.format(x,e,{forcedTzo:h.forcedStartTzo})):""}function hl(t,e,n){let s=t.eventRange.range;return{isPast:s.end<=(n||e.start),isFuture:s.start>=(n||e.end),isToday:e&&_r(e,s.start)}}function kK(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function MD(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function ID(t,e){let{def:n,instance:s}=t.eventRange,{url:a}=n;if(a)return{href:a};let{emitter:r,options:o}=e,{eventInteractive:c}=o;return c==null&&(c=n.interactive,c==null&&(c=!!r.hasHandlers("eventClick"))),c?cD(d=>{r.trigger("eventClick",{el:d.target,event:new zn(e,n,s),jsEvent:d,view:e.viewApi})}):{}}const jK={start:Le,end:Le,allDay:Boolean};function NK(t,e,n){let s=CK(t,e),{range:a}=s;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=e.add(a.start,n)}return s}function CK(t,e){let{refined:n,extra:s}=Uw(t,jK),a=n.start?e.createMarkerMeta(n.start):null,r=n.end?e.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=a&&a.isTimeUnspecified&&(!r||r.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:r?r.marker:null},allDay:o},s)}function SK(t,e){return zW(t.range,e.range)&&t.allDay===e.allDay&&_K(t,e)}function _K(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function EK(t,e){return Object.assign(Object.assign({},LD(t.range,e,t.allDay)),{allDay:t.allDay})}function OD(t,e,n){return Object.assign(Object.assign({},LD(t,e,n)),{timeZone:e.timeZone})}function LD(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function TK(t,e,n){let s=jD({editable:!1},n),a=uy(s.refined,s.extra,"",t.allDay,!0,n);return{def:a,ui:DD(a,e),instance:Qw(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function AK(t,e,n){let s=!1,a=function(c){s||(s=!0,e(c))},r=function(c){s||(s=!0,n(c))},o=t(a,r);o&&typeof o.then=="function"&&o.then(a,r)}class H1 extends Error{constructor(e,n){super(e),this.response=n}}function DK(t,e,n){t=t.toUpperCase();const s={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(s.body=new URLSearchParams(n),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(a=>{if(a.ok)return a.json().then(r=>[r,a],()=>{throw new H1("Failure parsing JSON",a)});throw new H1("Request failed",a)})}let Bv;function FD(){return Bv==null&&(Bv=RK()),Bv}function RK(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class PK extends wn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Hp(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Hp(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:s}=this.state,a=s||n.height==="auto"||n.contentHeight==="auto",r=!a&&n.height!=null?n.height:"",o=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return FD()||o.push("fc-liquid-hack"),e.children(o,r,a,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class rd{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function MK(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function nk(t){return{[t.component.uid]:t}}const py={};class ld extends Cs{constructor(e,n){super(e,n),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,s=n.nowManager.getDateMarker(),{nowIndicatorSnap:a}=n.options;a==="auto"&&(a=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let r,o;return a?(r=n.dateEnv.startOf(s,e.unit),o=n.dateEnv.add(r,Qt(1,e.unit)).valueOf()-s.valueOf()):(r=s,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:r,todayRange:IK(r)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}ld.contextType=$r;function IK(t){let e=Mn(t),n=fi(e,1);return{start:e,end:n}}class OK{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let s=this.getCurrentData(),a;n=n||"day",a=s.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:s}=this.getCurrentData(),a=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),r,o;for(let c in n)a.push(c);for(r=0;r<a.length;r+=1)if(o=n[a[r]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),s=Qt(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),Un(n))}formatRange(e,n,s){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(n),Un(s),s)}formatIso(e,n){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:n})}select(e,n){let s;n==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:n};let a=this.getCurrentData(),r=NK(s,a.dateEnv,Qt({days:1}));r&&(this.dispatch({type:"SELECT_DATES",selection:r}),TD(r,null,a))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),pK(e,n))}addEvent(e,n){if(e instanceof zn){let o=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:hy({def:o,instance:c})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),a;if(n instanceof nc)a=n.internalEventSource;else if(typeof n=="boolean")n&&([a]=Kw(s.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;a=o.internalEventSource}let r=kD(e,a,s,!1);if(r){let o=new zn(s,r.def,r.def.recurringDef?null:r.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:hy(r)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:AD(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:s,instances:a}=n.eventStore;e=String(e);for(let r in s){let o=s[r];if(o.publicId===e){if(o.recurringDef)return new zn(n,o,null);for(let c in a){let d=a[c];if(d.defId===o.defId)return new zn(n,o,d)}}}return null}getEvents(){let e=this.getCurrentData();return to(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,s=[];for(let a in n)s.push(new nc(e,n[a]));return s}getEventSourceById(e){let n=this.getCurrentData(),s=n.eventSources;e=String(e);for(let a in s)if(s[a].publicId===e)return new nc(n,s[a]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof nc)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=CD(e,n);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new nc(n,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Qt(e);n&&this.trigger("_scrollRequest",{time:n})}}function LK(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function $D(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function FK(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function $K(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function BK(t,e){return{left:t.left-e.left,top:t.top-e.top}}const qv=Ss();class qK{constructor(){this.getKeysForEventDefs=Bt(this._getKeysForEventDefs),this.splitDateSelection=Bt(this._splitDateSpan),this.splitEventStore=Bt(this._splitEventStore),this.splitIndividualUi=Bt(this._splitIndividualUi),this.splitEventDrag=Bt(this._splitInteraction),this.splitEventResize=Bt(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),s=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),r=this.splitIndividualUi(e.eventUiBases,s),o=this.splitEventStore(e.eventStore,s),c=this.splitEventDrag(e.eventDrag),d=this.splitEventResize(e.eventResize),m={};this.eventUiBuilders=Rr(n,(u,p)=>this.eventUiBuilders[p]||Bt(HK));for(let u in n){let p=n[u],h=o[u]||qv,g=this.eventUiBuilders[u];m[u]={businessHours:p.businessHours||e.businessHours,dateSelection:a[u]||null,eventStore:h,eventUiBases:g(e.eventUiBases[""],p.ui,r[u]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:c[u]||null,eventResize:d[u]||null}}return m}_splitDateSpan(e){let n={};if(e){let s=this.getKeysForDateSpan(e);for(let a of s)n[a]=e}return n}_getKeysForEventDefs(e){return Rr(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:s,instances:a}=e,r={};for(let o in s)for(let c of n[o])r[c]||(r[c]=Ss()),r[c].defs[o]=s[o];for(let o in a){let c=a[o];for(let d of n[c.defId])r[d]&&(r[d].instances[o]=c)}return r}_splitIndividualUi(e,n){let s={};for(let a in e)if(a)for(let r of n[a])s[r]||(s[r]={}),s[r][a]=e[a];return s}_splitInteraction(e){let n={};if(e){let s=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),r=this._splitEventStore(e.mutatedEvents,a),o=c=>{n[c]||(n[c]={affectedEvents:s[c]||qv,mutatedEvents:r[c]||qv,isEvent:e.isEvent})};for(let c in s)o(c);for(let c in r)o(c)}return n}}function HK(t,e,n){let s=[];t&&s.push(t),e&&s.push(e);let a={"":ND(s)};return n&&Object.assign(a,n),a}function BD(t,e,n,s){return{dow:t.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!_r(s.activeRange,t))),isOther:!!(s&&!_r(s.currentRange,t)),isToday:!!(e&&_r(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function ik(t,e){let n=["fc-day",`fc-day-${WU[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const zK=Un({year:"numeric",month:"long",day:"numeric"}),VK=Un({week:"long"});function Kp(t,e,n="day",s=!0){const{dateEnv:a,options:r,calendarApi:o}=t;let c=a.format(e,n==="week"?VK:zK);if(r.navLinks){let d=a.toDate(e);const m=u=>{let p=n==="day"?r.navLinkDayClick:n==="week"?r.navLinkWeekClick:null;typeof p=="function"?p.call(o,a.toDate(e),u):(typeof p=="string"&&(n=p),o.zoomTo(e,n))};return Object.assign({title:am(r.navLinkHint,[c,d],c),"data-navlink":""},s?oD(m):{onClick:m})}return{"aria-label":c}}let Hv=null;function UK(){return Hv===null&&(Hv=WK()),Hv}function WK(){let t=document.createElement("div");sm(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return $w(t),n}let zv;function KK(){return zv||(zv=GK()),zv}function GK(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=qD(t);return document.body.removeChild(t),e}function qD(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function YK(t,e=!1){let n=window.getComputedStyle(t),s=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,r=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,c=qD(t),d=c.y-s-a,m=c.x-r-o,u={borderLeft:s,borderRight:a,borderTop:r,borderBottom:o,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return UK()&&n.direction==="rtl"?u.scrollbarLeft=d:u.scrollbarRight=d,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function QK(t,e=!1,n){let s=sk(t),a=YK(t,e),r={left:s.left+a.borderLeft+a.scrollbarLeft,right:s.right-a.borderRight-a.scrollbarRight,top:s.top+a.borderTop,bottom:s.bottom-a.borderBottom-a.scrollbarBottom};return e&&(r.left+=a.paddingLeft,r.right-=a.paddingRight,r.top+=a.paddingTop,r.bottom-=a.paddingBottom),r}function sk(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function ZK(t){let e=HD(t),n=t.getBoundingClientRect();for(let s of e){let a=$D(n,s.getBoundingClientRect());if(a)n=a;else return null}return n}function HD(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class Vc{constructor(e,n,s,a){this.els=n;let r=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(r.left),a&&this.buildElVerticals(r.top)}buildElHorizontals(e){let n=[],s=[];for(let a of this.els){let r=a.getBoundingClientRect();n.push(r.left-e),s.push(r.right-e)}this.lefts=n,this.rights=s}buildElVerticals(e){let n=[],s=[];for(let a of this.els){let r=a.getBoundingClientRect();n.push(r.top-e),s.push(r.bottom-e)}this.tops=n,this.bottoms=s}leftToIndex(e){let{lefts:n,rights:s}=this,a=n.length,r;for(r=0;r<a;r+=1)if(e>=n[r]&&e<s[r])return r}topToIndex(e){let{tops:n,bottoms:s}=this,a=n.length,r;for(r=0;r<a;r+=1)if(e>=n[r]&&e<s[r])return r}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return dh(this.tops||[],e.tops||[])&&dh(this.bottoms||[],e.bottoms||[])&&dh(this.lefts||[],e.lefts||[])&&dh(this.rights||[],e.rights||[])}}function dh(t,e){const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(Math.round(t[s])!==Math.round(e[s]))return!1;return!0}class ak{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class XK extends ak{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class JK extends ak{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Ja extends wn{constructor(){super(...arguments),this.uid=Ao()}prepareHits(){}queryHit(e,n,s,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Ii(e,".fc-event-mirror")}isValidDateDownEl(e){return!Ii(e,".fc-event:not(.fc-bg-event)")&&!Ii(e,".fc-more-link")&&!Ii(e,"a[data-navlink]")&&!Ii(e,".fc-popover")}}class zD{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let s of e)this.insertEntry(s,n);return n}insertEntry(e,n){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,s){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},n),{span:rk(n.span,e.touchingEntry.span)});s.push(a),this.splitEntry(n,e.touchingEntry,s)}else s.push(n)}splitEntry(e,n,s){let a=e.span,r=n.span;a.start<r.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:r.start}},s),a.end>r.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.end,end:a.end}},s)}insertEntryAt(e,n){let{entriesByLevel:s,levelCoords:a}=this;n.lateral===-1?(Vv(a,n.level,n.levelCoord),Vv(s,n.level,[e])):Vv(s[n.level],n.lateral,e),this.stackCnts[no(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:s,strictOrder:a,stackCnts:r}=this,o=n.length,c=0,d=-1,m=-1,u=null,p=0;for(let v=0;v<o;v+=1){const x=n[v];if(!a&&x>=c+this.getEntryThickness(e))break;let y=s[v],b,w=fy(y,e.span.start,gy),k=w[0]+w[1];for(;(b=y[k])&&b.span.start<e.span.end;){let _=x+this.getEntryThickness(b);_>c&&(c=_,u=b,d=v,m=k),_===c&&(p=Math.max(p,r[no(b)]+1)),k+=1}}let h=0;if(u)for(h=d+1;h<o&&n[h]<c;)h+=1;let g=-1;return h<o&&n[h]===c&&(g=fy(s[h],e.span.end,gy)[0]),{touchingLevel:d,touchingLateral:m,touchingEntry:u,stackCnt:p,levelCoord:c,level:h,lateral:g}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,s=e.length,a=[];for(let r=0;r<s;r+=1){let o=e[r],c=n[r];for(let d of o)a.push(Object.assign(Object.assign({},d),{thickness:this.getEntryThickness(d),levelCoord:c}))}return a}}function gy(t){return t.span.end}function no(t){return t.index+":"+t.span.start}function eG(t){let e=[];for(let n of t){let s=[],a={span:n.span,entries:[n]};for(let r of e)rk(r.span,a.span)?a={entries:r.entries.concat(a.entries),span:tG(r.span,a.span)}:s.push(r);s.push(a),e=s}return e}function tG(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function rk(t,e){let n=Math.max(t.start,e.start),s=Math.min(t.end,e.end);return n<s?{start:n,end:s}:null}function Vv(t,e,n){t.splice(e,0,n)}function fy(t,e,n){let s=0,a=t.length;if(!a||e<n(t[s]))return[0,0];if(e>n(t[a-1]))return[a,0];for(;s<a;){let r=Math.floor(s+(a-s)/2),o=n(t[r]);if(e<o)a=r;else if(e>o)s=r+1;else return[r,1]}return[s,0]}class nG{constructor(e,n){this.emitter=new Gg}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const lk={};function iG(t,e){return!t||e>10?Un({weekday:"short"}):e>1?Un({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Un({weekday:"long"})}const VD="fc-col-header-cell";function UD(t){return t.text}class sG extends wn{render(){let{dateEnv:e,options:n,theme:s,viewApi:a}=this.context,{props:r}=this,{date:o,dateProfile:c}=r,d=BD(o,r.todayRange,null,c),m=[VD].concat(ik(d,s)),u=e.format(o,r.dayHeaderFormat),p=!d.isDisabled&&r.colCnt>1?Kp(this.context,o):{},h=e.toDate(o);e.namedTimeZoneImpl&&(h=bl(h,36e5));let g=Object.assign(Object.assign(Object.assign({date:h,view:a},r.extraRenderProps),{text:u}),d);return je(Rs,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:r.colSpan,"data-date":d.isDisabled?void 0:zw(o)},r.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:UD,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},v=>je("div",{className:"fc-scrollgrid-sync-inner"},!d.isDisabled&&je(v,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",r.isSticky&&"fc-sticky"]})))}}const aG=Un({weekday:"long"});class rG extends wn{render(){let{props:e}=this,{dateEnv:n,theme:s,viewApi:a,options:r}=this.context,o=fi(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},d=n.format(o,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:o},c),{view:a}),e.extraRenderProps),{text:d});return je(Rs,{elTag:"th",elClasses:[VD,...ik(c,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:UD,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},u=>je("div",{className:"fc-scrollgrid-sync-inner"},je(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,aG)}})))}}class WD extends wn{constructor(){super(...arguments),this.createDayHeaderFormatter=Bt(lG)}render(){let{context:e}=this,{dates:n,dateProfile:s,datesRepDistinctDays:a,renderIntro:r}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,n.length);return je(ld,{unit:"day"},(c,d)=>je("tr",{role:"row"},r&&r("day"),n.map(m=>a?je(sG,{key:m.toISOString(),date:m,dateProfile:s,todayRange:d,colCnt:n.length,dayHeaderFormat:o}):je(rG,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:o}))))}}function lG(t,e,n){return t||iG(e,n)}class KD{constructor(e,n){let s=e.start,{end:a}=e,r=[],o=[],c=-1;for(;s<a;)n.isHiddenDay(s)?r.push(c+.5):(c+=1,r.push(c),o.push(s)),s=fi(s,1);this.dates=o,this.indices=r,this.cnt=o.length}sliceRange(e){let n=this.getDateDayIndex(e.start),s=this.getDateDayIndex(fi(e.end,-1)),a=Math.max(0,n),r=Math.min(this.cnt-1,s);return a=Math.ceil(a),r=Math.floor(r),a<=r?{firstIndex:a,lastIndex:r,isStart:n===a,isEnd:s===r}:null}getDateDayIndex(e){let{indices:n}=this,s=Math.floor(Do(this.dates[0],e));return s<0?n[0]-1:s>=n.length?n[n.length-1]+1:n[s]}}class GD{constructor(e,n){let{dates:s}=e,a,r,o;if(n){for(r=s[0].getUTCDay(),a=1;a<s.length&&s[a].getUTCDay()!==r;a+=1);o=Math.ceil(s.length/a)}else o=1,a=s.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let s=[];for(let a=0;a<this.colCnt;a+=1)s.push(this.buildCell(n,a));e.push(s)}return e}buildCell(e,n){let s=this.daySeries.dates[e*this.colCnt+n];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,s=this.daySeries.sliceRange(e),a=[];if(s){let{firstIndex:r,lastIndex:o}=s,c=r;for(;c<=o;){let d=Math.floor(c/n),m=Math.min((d+1)*n,o+1);a.push({row:d,firstCol:c%n,lastCol:(m-1)%n,isStart:s.isStart&&c===r,isEnd:s.isEnd&&m-1===o}),c=m}}return a}}class YD{constructor(){this.sliceBusinessHours=Bt(this._sliceBusinessHours),this.sliceDateSelection=Bt(this._sliceDateSpan),this.sliceEventStore=Bt(this._sliceEventStore),this.sliceEventDrag=Bt(this._sliceInteraction),this.sliceEventResize=Bt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,s,a,...r){let{eventUiBases:o}=e,c=this.sliceEventStore(e.eventStore,o,n,s,...r);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,s,o,a,...r),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,s,a,...r),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,n,s,...r),eventResize:this.sliceEventResize(e.eventResize,o,n,s,...r),eventSelection:e.eventSelection}}sliceNowDate(e,n,s,a,...r){return this._sliceDateSpan({range:{start:e,end:bl(e,1)},allDay:!1},n,s,{},a,...r)}_sliceBusinessHours(e,n,s,a,...r){return e?this._sliceEventStore(po(e,mh(n,!!s),a),{},n,s,...r).bg:[]}_sliceEventStore(e,n,s,a,...r){if(e){let o=B1(e,n,mh(s,!!a),a);return{bg:this.sliceEventRanges(o.bg,r),fg:this.sliceEventRanges(o.fg,r)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,s,a,...r){if(!e)return null;let o=B1(e.mutatedEvents,n,mh(s,!!a),a);return{segs:this.sliceEventRanges(o.fg,r),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,s,a,r,...o){if(!e)return[];let c=mh(n,!!s),d=ho(e.range,c);if(d){e=Object.assign(Object.assign({},e),{range:d});let m=TK(e,a,r),u=this.sliceRange(e.range,...o);for(let p of u)p.eventRange=m;return u}return[]}sliceEventRanges(e,n){let s=[];for(let a of e)s.push(...this.sliceEventRange(a,n));return s}sliceEventRange(e,n){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:fi(s.start,1)});let a=this.sliceRange(s,...n);for(let r of a)r.eventRange=e,r.isStart=e.isStart&&r.isStart,r.isEnd=e.isEnd&&r.isEnd;return a}}function mh(t,e){let n=t.activeRange;return e?n:{start:bl(n.start,t.slotMinTime.milliseconds),end:bl(n.end,t.slotMaxTime.milliseconds-864e5)}}function QD(t,e,n){let{instances:s}=t.mutatedEvents;for(let a in s)if(!Wg(e.validRange,s[a].range))return!1;return ZD({eventDrag:t},n)}function oG(t,e,n){return Wg(e.validRange,t.range)?ZD({dateSelection:t},n):!1}function ZD(t,e){let n=e.getCurrentData(),s=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||cG)(s,e)}function cG(t,e,n={},s){return!(t.eventDrag&&!dG(t,e,n,s)||t.dateSelection&&!mG(t,e,n,s))}function dG(t,e,n,s){let a=e.getCurrentData(),r=t.eventDrag,o=r.mutatedEvents,c=o.defs,d=o.instances,m=Wp(c,r.isEvent?t.eventUiBases:{"":a.selectionConfig});s&&(m=Rr(m,s));let u=lK(t.eventStore,r.affectedEvents.instances),p=u.defs,h=u.instances,g=Wp(p,t.eventUiBases);for(let v in d){let x=d[v],y=x.range,b=m[x.defId],w=c[x.defId];if(!XD(b.constraints,y,u,t.businessHours,e))return!1;let{eventOverlap:k}=e.options,_=typeof k=="function"?k:null;for(let T in h){let N=h[T];if(Yw(y,N.range)&&(g[N.defId].overlap===!1&&r.isEvent||b.overlap===!1||_&&!_(new zn(e,p[N.defId],N),new zn(e,w,x))))return!1}let j=a.eventStore;for(let T of b.allows){let N=Object.assign(Object.assign({},n),{range:x.range,allDay:w.allDay}),E=j.defs[w.defId],A=j.instances[v],L;if(E?L=new zn(e,E,A):L=new zn(e,w),!T(ek(N,e),L))return!1}}return!0}function mG(t,e,n,s){let a=t.eventStore,r=a.defs,o=a.instances,c=t.dateSelection,d=c.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!XD(m.constraints,d,a,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,p=typeof u=="function"?u:null;for(let h in o){let g=o[h];if(Yw(d,g.range)&&(m.overlap===!1||p&&!p(new zn(e,r[g.defId],g),null)))return!1}for(let h of m.allows){let g=Object.assign(Object.assign({},n),c);if(!h(ek(g,e),null))return!1}return!0}function XD(t,e,n,s,a){for(let r of t)if(!hG(uG(r,e,n,s,a),e))return!1;return!0}function uG(t,e,n,s,a){return t==="businessHours"?Uv(po(s,e,a)):typeof t=="string"?Uv(Kg(n,r=>r.groupId===t)):typeof t=="object"&&t?Uv(po(t,e,a)):[]}function Uv(t){let{instances:e}=t,n=[];for(let s in e)n.push(e[s].range);return n}function hG(t,e){for(let n of t)if(Wg(n,e))return!0;return!1}const uh=/^(visible|hidden)$/;class pG extends wn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Ka(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:s}=e,a=n&&s,r=["fc-scroller"];return n&&(s?r.push("fc-scroller-liquid-absolute"):r.push("fc-scroller-liquid")),je("div",{ref:this.handleEl,className:r.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(uh.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(uh.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return uh.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return uh.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class xr{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,s)=>{let{depths:a,currentMap:r}=this,o=!1,c=!1;n!==null?(o=s in r,r[s]=n,a[s]=(a[s]||0)+1,c=!0):(a[s]-=1,a[s]||(delete r[s],delete this.callbackMap[s],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(s)),c&&this.masterCallback(n,String(s)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),n}collect(e,n,s){return SW(this.currentMap,e,n,s)}getAll(){return Kw(this.currentMap)}}function gG(t){let e=NU(t,".fc-scrollgrid-shrink"),n=0;for(let s of e)n=Math.max(n,FU(s));return Math.ceil(n)}function JD(t,e){return t.liquid&&e.liquid}function fG(t,e){return e.maxHeight!=null||JD(t,e)}function vG(t,e,n,s){let{expandRows:a}=n;return typeof e.content=="function"?e.content(n):je("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,je(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function xG(t,e){return yl(t,e,va)}function yG(t,e){let n=[];for(let s of t){let a=s.span||1;for(let r=0;r<a;r+=1)n.push(je("col",{style:{width:s.width==="shrink"?bG(e):s.width||"",minWidth:s.minWidth||""}}))}return je("colgroup",{},...n)}function bG(t){return t??4}function wG(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function kG(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function jG(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function vy(t){return je("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Gp(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function eR(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class ok extends wn{constructor(){super(...arguments),this.processCols=Bt(e=>e,xG),this.renderMicroColGroup=Bt(yG),this.scrollerRefs=new xr,this.scrollerElRefs=new xr(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:s}=this,a=e.sections||[],r=this.processCols(e.cols),o=this.renderMicroColGroup(r,n.shrinkWidth),c=kG(e.liquid,s);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let d=a.length,m=0,u,p=[],h=[],g=[];for(;m<d&&(u=a[m]).type==="header";)p.push(this.renderSection(u,o,!0)),m+=1;for(;m<d&&(u=a[m]).type==="body";)h.push(this.renderSection(u,o,!1)),m+=1;for(;m<d&&(u=a[m]).type==="footer";)g.push(this.renderSection(u,o,!0)),m+=1;let v=!FD();const x={role:"rowgroup"};return je("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!v&&p.length)&&je("thead",x,...p),!!(!v&&h.length)&&je("tbody",x,...h),!!(!v&&g.length)&&je("tfoot",x,...g),v&&je("tbody",x,...p,...h,...g))}renderSection(e,n,s){return"outerContent"in e?je(Pn,{key:e.key},e.outerContent):je("tr",{key:e.key,role:"presentation",className:jG(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,s))}renderChunkTd(e,n,s,a){if("outerContent"in s)return s.outerContent;let{props:r}=this,{forceYScrollbars:o,scrollerClientWidths:c,scrollerClientHeights:d}=this.state,m=fG(r,e),u=JD(r,e),p=r.liquid?o?"scroll":m?"auto":"hidden":"visible",h=e.key,g=vG(e,s,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!r.collapsibleWidth&&c[h]!==void 0?c[h]:null,clientHeight:d[h]!==void 0?d[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return je(a?"th":"td",{ref:s.elRef,role:"presentation"},je("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},je(pG,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:p,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},g)))}_handleScrollerEl(e,n){let s=NG(this.props.sections,n);s&&Ka(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return wG(this.props.cols)?gG(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=KK(),{scrollerRefs:n,scrollerElRefs:s}=this,a=!1,r={},o={};for(let c in n.currentMap){let d=n.currentMap[c];if(d&&d.needsYScrolling()){a=!0;break}}for(let c of this.props.sections){let d=c.key,m=s.currentMap[d];if(m){let u=m.parentNode;r[d]=Math.floor(u.getBoundingClientRect().width-(a?e.y:0)),o[d]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:r,scrollerClientHeights:o}}}ok.addStateEquality({scrollerClientWidths:va,scrollerClientHeights:va});function NG(t,e){for(let n of t)if(n.key===e)return n;return null}class ck extends wn{constructor(){super(...arguments),this.buildPublicEvent=Bt((e,n,s)=>new zn(e,n,s)),this.handleEl=e=>{this.el=e,Ka(this.props.elRef,e),e&&q1(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{eventRange:r}=a,{ui:o}=r,c={event:this.buildPublicEvent(n,r.def,r.instance),view:n.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&yK(a,n),isStartResizable:!e.disableResizing&&bK(a,n),isEndResizable:!e.disableResizing&&wK(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return je(Rs,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...kK(c),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&q1(this.el,this.props.seg)}}class dk extends wn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{ui:r}=a.eventRange,o=s.eventTimeFormat||e.defaultTimeFormat,c=PD(a,o,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return je(ck,Object.assign({},e,{elTag:"a",elStyle:{borderColor:r.borderColor,backgroundColor:r.backgroundColor},elAttrs:ID(a,n),defaultGenerator:CG,timeText:c}),(d,m)=>je(Pn,null,je(d,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&je("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&je("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}dk.addPropsEquality({seg:va});function CG(t){return je("div",{className:"fc-event-main-frame"},t.timeText&&je("div",{className:"fc-event-time"},t.timeText),je("div",{className:"fc-event-title-container"},je("div",{className:"fc-event-title fc-sticky"},t.event.title||je(Pn,null,""))))}const mk=t=>je($r.Consumer,null,e=>{let{options:n}=e,s={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return je(Rs,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:s,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),SG=Un({day:"numeric"});class uk extends wn{constructor(){super(...arguments),this.refineRenderProps=$h(_G)}render(){let{props:e,context:n}=this,{options:s}=n,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:s.monthStartFormat});return je(Rs,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":zw(e.date)}),elClasses:[...ik(a,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function hk(t){return!!(t.dayCellContent||my("dayCellContent",t))}function _G(t){let{date:e,dateEnv:n,dateProfile:s,isMonthStart:a}=t,r=BD(e,t.todayRange,null,s),o=t.showDayNumber?n.format(e,a?t.monthStartFormat:SG):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},r),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class tR extends wn{render(){let{props:e}=this,{seg:n}=e;return je(ck,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:EG,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function EG(t){let{title:e}=t.event;return e&&je("div",{className:"fc-event-title"},t.event.title)}function nR(t){return je("div",{className:`fc-${t}`})}const iR=t=>je($r.Consumer,null,e=>{let{dateEnv:n,options:s}=e,{date:a}=t,r=s.weekNumberFormat||t.defaultFormat,o=n.computeWeekNumber(a),c=n.format(a,r),d={num:o,text:c,date:a};return je(Rs,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:d,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:TG,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},t.children)});function TG(t){return t.text}const Wv=10;class AG extends wn{constructor(){super(...arguments),this.state={titleId:Vg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Ka(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=rD(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:s,state:a}=this,r=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return dU(je("div",Object.assign({},s.extraAttrs,{id:s.id,className:r.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),je("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},je("span",{className:"fc-popover-title",id:a.titleId},s.title),je("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),je("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:s}=this.props,{rootEl:a}=this,r=ZK(n);if(r){let o=a.getBoundingClientRect(),c=s?Ii(n,".fc-scrollgrid").getBoundingClientRect().top:r.top,d=e?r.right-o.width:r.left;c=Math.max(c,Wv),d=Math.min(d,document.documentElement.clientWidth-Wv-o.width),d=Math.max(d,Wv);let m=a.offsetParent.getBoundingClientRect();sm(a,{top:c-m.top,left:d-m.left})}}}class DG extends Ja{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:s}=this,{startDate:a,todayRange:r,dateProfile:o}=s,c=n.format(a,e.dayPopoverFormat);return je(uk,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:r},(d,m,u)=>je(AG,{elRef:u.ref,id:s.id,title:c,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},hk(e)&&je(d,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,n,s,a){let{rootEl:r,props:o}=this;return e>=0&&e<s&&n>=0&&n<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:r,rect:{left:0,top:0,right:s,bottom:a},layer:1}:null}}class sR extends wn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Vg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Ka(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:s}=this,{moreLinkClick:a}=s.options,r=z1(n).start;function o(c){let{def:d,instance:m,range:u}=c.eventRange;return{event:new zn(s,d,m),start:s.dateEnv.toDate(u.start),end:s.dateEnv.toDate(u.end),isStart:c.isStart,isEnd:c.isEnd}}typeof a=="function"&&(a=a({date:r,allDay:!!n.allDayDate,allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:e,view:s.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&s.calendarApi.zoomTo(r,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return je($r.Consumer,null,s=>{let{viewApi:a,options:r,calendarApi:o}=s,{moreLinkText:c}=r,{moreCnt:d}=e,m=z1(e),u=typeof c=="function"?c.call(o,d):`+${d} ${c}`,p=am(r.moreLinkHint,[d],u),h={num:d,shortText:`+${d}`,text:u,view:a};return je(Pn,null,!!e.moreCnt&&je(Rs,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),oD(this.handleClick)),{title:p,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:r.moreLinkContent,defaultGenerator:e.defaultGenerator||RG,classNameGenerator:r.moreLinkClassNames,didMount:r.moreLinkDidMount,willUnmount:r.moreLinkWillUnmount},e.children),n.isPopoverOpen&&je(DG,{id:n.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ii(this.linkEl,".fc-view-harness"))}}function RG(t){return t.text}function z1(t){if(t.allDayDate)return{start:t.allDayDate,end:fi(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:aR(e),end:MG(e)}}function aR(t){return t.reduce(PG).eventRange.range.start}function PG(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function MG(t){return t.reduce(IG).eventRange.range.end}function IG(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class OG{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class LG extends OG{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let s=!1;e.isActive?(n.set(e.id,e),s=!0):n.has(e.id)&&(n.delete(e.id),s=!0),s&&this.set(n)}}const FG=[],rR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},lR=Object.assign(Object.assign({},rR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function $G(t){let e=t.length>0?t[0].code:"en",n=FG.concat(t),s={en:lR};for(let a of n)s[a.code]=a;return{map:s,defaultCode:e}}function oR(t,e){return typeof t=="object"&&!Array.isArray(t)?cR(t.code,[t.code],t):BG(t,e)}function BG(t,e){let n=[].concat(t||[]),s=qG(n,e)||lR;return cR(t,n,s)}function qG(t,e){for(let n=0;n<t.length;n+=1){let s=t[n].toLocaleLowerCase().split("-");for(let a=s.length;a>0;a-=1){let r=s.slice(0,a).join("-");if(e[r])return e[r]}}return null}function cR(t,e,n){let s=Ww([rR,n],["buttonText"]);delete s.code;let{week:a}=s;return delete s.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:s}}function Br(t){return{id:Ao(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function HG(t,e){let n={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(r){for(let o of r){const c=o.name,d=n[c];d===void 0?(n[c]=o.id,a(o.deps),s=VG(s,o)):d!==o.id&&console.warn(`Duplicate plugin '${c}'`)}}return t&&a(t),a(e),s}function zG(){let t=[],e=[],n;return(s,a)=>((!n||!yl(s,t)||!yl(a,e))&&(n=HG(s,a)),t=s,e=a,n)}function VG(t,e){return{premiumReleaseDate:UG(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function UG(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class _l extends iu{}_l.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};_l.prototype.baseIconClass="fc-icon";_l.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};_l.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};_l.prototype.iconOverrideOption="buttonIcons";_l.prototype.iconOverrideCustomButtonOption="icon";_l.prototype.iconOverridePrefix="fc-icon-";function WG(t,e){let n={},s;for(s in t)xy(s,n,t,e);for(s in e)xy(s,n,t,e);return n}function xy(t,e,n,s){if(e[t])return e[t];let a=KG(t,e,n,s);return a&&(e[t]=a),a}function KG(t,e,n,s){let a=n[t],r=s[t],o=u=>a&&a[u]!==null?a[u]:r&&r[u]!==null?r[u]:null,c=o("component"),d=o("superType"),m=null;if(d){if(d===t)throw new Error("Can't have a custom view type that references itself");m=xy(d,e,n,s)}return!c&&m&&(c=m.component),c?{type:t,component:c,defaults:Object.assign(Object.assign({},m?m.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),r?r.rawOptions:{})}:null}function V1(t){return Rr(t,GG)}function GG(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=U1(e):n&&!(n.prototype instanceof wn)&&(n=U1(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function U1(t){return e=>je($r.Consumer,null,n=>je(Rs,{elTag:"div",elClasses:vD(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function YG(t,e,n,s){let a=V1(t),r=V1(e.views),o=WG(a,r);return Rr(o,c=>QG(c,r,e,n,s))}function QG(t,e,n,s,a){let r=t.overrides.duration||t.defaults.duration||s.duration||n.duration,o=null,c="",d="",m={};if(r&&(o=ZG(r),o)){let h=dy(o);c=h.unit,h.value===1&&(d=c,m=e[c]?e[c].rawOptions:{})}let u=h=>{let g=h.buttonText||{},v=t.defaults.buttonTextKey;return v!=null&&g[v]!=null?g[v]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null},p=h=>{let g=h.buttonHints||{},v=t.defaults.buttonTextKey;return v!=null&&g[v]!=null?g[v]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null};return{type:t.type,component:t.component,duration:o,durationUnit:c,singleUnit:d,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},m),t.overrides),buttonTextOverride:u(s)||u(n)||t.overrides.buttonText,buttonTextDefault:u(a)||t.defaults.buttonText||u(rm)||t.type,buttonTitleOverride:p(s)||p(n)||t.overrides.buttonHint,buttonTitleDefault:p(a)||t.defaults.buttonHint||p(rm)}}let W1={};function ZG(t){let e=JSON.stringify(t),n=W1[e];return n===void 0&&(n=Qt(t),W1[e]=n),n}function XG(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function JG(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function eY(t,e,n){let s=t.initialDate;return s!=null?e.createMarker(s):n.getDateMarker()}function tY(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function nY(t,e,n,s){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||n);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(a=s.buildPrev(t,n),a.isValid)return a;break;case"NEXT":if(a=s.buildNext(t,n),a.isValid)return a;break}return t}function iY(t,e,n){let s=e?e.activeRange:null;return mR({},dY(t,n),s,n)}function sY(t,e,n,s){let a=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return mR(t,e.sources,a,s);case"REMOVE_EVENT_SOURCE":return rY(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?uR(t,a,s):t;case"FETCH_EVENT_SOURCES":return pk(t,e.sourceIds?uD(e.sourceIds):hR(t,s),a,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return cY(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function aY(t,e,n){let s=e?e.activeRange:null;return pk(t,hR(t,n),s,!0,n)}function dR(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function mR(t,e,n,s){let a={};for(let r of e)a[r.sourceId]=r;return n&&(a=uR(a,n,s)),Object.assign(Object.assign({},t),a)}function rY(t,e){return uo(t,n=>n.sourceId!==e)}function uR(t,e,n){return pk(t,uo(t,s=>lY(s,e,n)),e,!1,n)}function lY(t,e,n){return pR(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function pk(t,e,n,s,a){let r={};for(let o in t){let c=t[o];e[o]?r[o]=oY(c,n,s,a):r[o]=c}return r}function oY(t,e,n,s){let{options:a,calendarApi:r}=s,o=s.pluginHooks.eventSourceDefs[t.sourceDefId],c=Ao();return o.fetch({eventSource:t,range:e,isRefetch:n,context:s},d=>{let{rawEvents:m}=d;a.eventSourceSuccess&&(m=a.eventSourceSuccess.call(r,m,d.response)||m),t.success&&(m=t.success.call(r,m,d.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:c,fetchRange:e,rawEvents:m})},d=>{let m=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(r,d),m=!0),t.failure&&(t.failure(d),m=!0),m||console.warn(d.message,d),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:c,fetchRange:e,error:d})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:c})}function cY(t,e,n,s){let a=t[e];return a&&n===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:s})}):t}function hR(t,e){return uo(t,n=>pR(n,e))}function dY(t,e){let n=SD(e),s=[].concat(t.eventSources||[]),a=[];t.initialEvents&&s.unshift(t.initialEvents),t.events&&s.unshift(t.events);for(let r of s){let o=CD(r,e,n);o&&a.push(o)}return a}function pR(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function mY(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function uY(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function hY(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function pY(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function gY(t,e,n,s,a){let r=t.headerToolbar?K1(t.headerToolbar,t,e,n,s,a):null,o=t.footerToolbar?K1(t.footerToolbar,t,e,n,s,a):null;return{header:r,footer:o}}function K1(t,e,n,s,a,r){let o={},c=[],d=!1;for(let m in t){let u=t[m],p=fY(u,e,n,s,a,r);o[m]=p.widgets,c.push(...p.viewsWithButtons),d=d||p.hasTitle}return{sectionWidgets:o,viewsWithButtons:c,hasTitle:d}}function fY(t,e,n,s,a,r){let o=e.direction==="rtl",c=e.customButtons||{},d=n.buttonText||{},m=e.buttonText||{},u=n.buttonHints||{},p=e.buttonHints||{},h=t?t.split(" "):[],g=[],v=!1;return{widgets:h.map(y=>y.split(",").map(b=>{if(b==="title")return v=!0,{buttonName:b};let w,k,_,j,T,N;if(w=c[b])_=E=>{w.click&&w.click.call(E.target,E,E.target)},(j=s.getCustomButtonIconClass(w))||(j=s.getIconClass(b,o))||(T=w.text),N=w.hint||w.text;else if(k=a[b]){g.push(b),_=()=>{r.changeView(b)},(T=k.buttonTextOverride)||(j=s.getIconClass(b,o))||(T=k.buttonTextDefault);let E=k.buttonTextOverride||k.buttonTextDefault;N=am(k.buttonTitleOverride||k.buttonTitleDefault||e.viewHint,[E,b],E)}else if(r[b])if(_=()=>{r[b]()},(T=d[b])||(j=s.getIconClass(b,o))||(T=m[b]),b==="prevYear"||b==="nextYear"){let E=b==="prevYear"?"prev":"next";N=am(u[E]||p[E],[m.year||"year","year"],m[b])}else N=E=>am(u[b]||p[b],[m[E]||E,E],m[b]);return{buttonName:b,buttonClick:_,buttonIcon:j,buttonText:T,buttonHint:N}})),viewsWithButtons:g,hasTitle:v}}class vY{constructor(e,n,s){this.type=e,this.getCurrentData=n,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let xY={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const yY=Br({name:"array-event-source",eventSourceDefs:[xY]});let bY={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:s}=t.context,a=t.eventSource.meta;AK(a.bind(null,OD(t.range,s)),r=>e({rawEvents:r}),n)}};const wY=Br({name:"func-event-source",eventSourceDefs:[bY]}),kY={method:String,extraParams:Le,startParam:String,endParam:String,timeZoneParam:String};let jY={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:s}=t.eventSource,a=CY(s,t.range,t.context);DK(s.method,s.url,a).then(([r,o])=>{e({rawEvents:r,response:o})},n)}};const NY=Br({name:"json-event-source",eventSourceRefiners:kY,eventSourceDefs:[jY]});function CY(t,e,n){let{dateEnv:s,options:a}=n,r,o,c,d,m={};return r=t.startParam,r==null&&(r=a.startParam),o=t.endParam,o==null&&(o=a.endParam),c=t.timeZoneParam,c==null&&(c=a.timeZoneParam),typeof t.extraParams=="function"?d=t.extraParams():d=t.extraParams||{},Object.assign(m,d),m[r]=s.formatIso(e.start),m[o]=s.formatIso(e.end),s.timeZone!=="local"&&(m[c]=s.timeZone),m}const SY={daysOfWeek:Le,startTime:Qt,endTime:Qt,duration:Qt,startRecur:Le,endRecur:Le};let _Y={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},s;return t.duration&&(s=t.duration),!s&&t.startTime&&t.endTime&&(s=HU(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:s,typeData:n}}return null},expand(t,e,n){let s=ho(e,{start:t.startRecur,end:t.endRecur});return s?TY(t.daysOfWeek,t.startTime,t.dateEnv,n,s):[]}};const EY=Br({name:"simple-recurring-event",recurringTypes:[_Y],eventRefiners:SY});function TY(t,e,n,s,a){let r=t?uD(t):null,o=Mn(a.start),c=a.end,d=[];for(e&&(e.milliseconds<0?c=fi(c,1):e.milliseconds>=1e3*60*60*24&&(o=fi(o,-1)));o<c;){let m;(!r||r[o.getUTCDay()])&&(e?m=s.add(o,e):m=o,d.push(s.createMarker(n.toDate(m)))),o=fi(o,1)}return d}const AY=Br({name:"change-handler",optionChangeHandlers:{events(t,e){G1([t],e)},eventSources:G1}});function G1(t,e){let n=Kw(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let s=[];for(let a of t){let r=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===a){n.splice(o,1),r=!0;break}r||s.push(a)}for(let a of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of s)e.calendarApi.addEventSource(a)}function DY(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},OD(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function RY(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",to(t,e))}const PY=[yY,wY,NY,EY,AY,Br({name:"misc",isLoadingFuncs:[t=>dR(t.eventSources)],propSetHandlers:{dateProfile:DY,eventStore:RY}})];class MY{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new Fw(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],s;for(;s=e.shift();)this.runTask(s),n.push(s);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function IY(t,e,n){let s;return/^(year|month)$/.test(t.currentRangeUnit)?s=t.currentRange:s=t.activeRange,n.formatRange(s.start,s.end,Un(e.titleFormat||OY(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function OY(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Fp(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Y1{constructor(){this.resetListeners=new Set}handleInput(e,n){const s=this.dateEnv;if(e!==s&&(typeof n=="function"?this.nowFn=n:s||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class LY{constructor(e){this.computeCurrentViewData=Bt(this._computeCurrentViewData),this.organizeRawLocales=Bt($G),this.buildLocale=Bt(oR),this.buildPluginHooks=zG(),this.buildDateEnv=Bt(FY),this.buildTheme=Bt($Y),this.parseToolbars=Bt(gY),this.buildViewSpecs=Bt(YG),this.buildDateProfileGenerator=$h(BY),this.buildViewApi=Bt(qY),this.buildViewUiProps=$h(VY),this.buildEventUiBySource=Bt(HY,va),this.buildEventUiBases=Bt(zY),this.parseContextBusinessHours=$h(UY),this.buildTitle=Bt(IY),this.nowManager=new Y1,this.emitter=new Gg,this.actionRunner=new MY(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause(),this.nowManager=new Y1;let n={},s=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),a=s.calendarOptions.initialView||s.pluginHooks.initialView,r=this.computeCurrentViewData(a,s,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(r.options);let o={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=eY(s.calendarOptions,s.dateEnv,this.nowManager),d=r.dateProfileGenerator.build(c);_r(d.activeRange,c)||(c=d.currentRange.start);for(let h of s.pluginHooks.contextInit)h(o);let m=iY(s.calendarOptions,d,o),u={dynamicOptionOverrides:n,currentViewType:a,currentDate:c,dateProfile:d,businessHours:this.parseContextBusinessHours(o),eventSources:m,eventUiBases:{},eventStore:Ss(),renderableEventStore:Ss(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},p=Object.assign(Object.assign({},o),u);for(let h of s.pluginHooks.reducers)Object.assign(u,h(null,null,p));Kv(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:s}=this;n===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:s,emitter:a}=this,r=tY(s.dynamicOptionOverrides,e),o=this.computeOptionsData(n.optionOverrides,r,n.calendarApi),c=XG(s.currentViewType,e),d=this.computeCurrentViewData(c,o,n.optionOverrides,r);n.calendarApi.currentDataManager=this,a.setThisContext(n.calendarApi),a.setOptions(d.options);let m={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:p}=s;this.data&&this.data.dateProfileGenerator!==d.dateProfileGenerator&&(p=d.dateProfileGenerator.build(u)),u=JG(u,e),p=nY(p,e,u,d.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!_r(p.currentRange,u))&&(u=p.currentRange.start);let h=sY(s.eventSources,e,p,m),g=iK(s.eventStore,e,h,p,m),x=dR(h)&&!d.options.progressiveEventRendering&&s.renderableEventStore||g,{eventUiSingleBase:y,selectionConfig:b}=this.buildViewUiProps(m),w=this.buildEventUiBySource(h),k=this.buildEventUiBases(x.defs,y,w),_={dynamicOptionOverrides:r,currentViewType:c,currentDate:u,dateProfile:p,eventSources:h,eventStore:g,renderableEventStore:x,selectionConfig:b,eventUiBases:k,businessHours:this.parseContextBusinessHours(m),dateSelection:mY(s.dateSelection,e),eventSelection:uY(s.eventSelection,e),eventDrag:hY(s.eventDrag,e),eventResize:pY(s.eventResize,e)},j=Object.assign(Object.assign({},m),_);for(let E of o.pluginHooks.reducers)Object.assign(_,E(s,e,j));let T=Kv(s,m),N=Kv(_,m);!T&&N?a.trigger("loading",!0):T&&!N&&a.trigger("loading",!1),this.state=_,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,s=this.data,a=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),r=this.computeCurrentViewData(n.currentViewType,a,e.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,r.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),r),n),c=a.pluginHooks.optionChangeHandlers,d=s&&s.calendarOptions,m=a.calendarOptions;if(d&&d!==m){d.timeZone!==m.timeZone&&(n.eventSources=o.eventSources=aY(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=F1(o.eventStore,s.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=F1(o.renderableEventStore,s.dateEnv,o.dateEnv));for(let u in c)(this.optionsForHandling.indexOf(u)!==-1||d[u]!==m[u])&&c[u](m[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,n,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:r,localeDefaults:o,availableLocaleData:c,extra:d}=this.processRawCalendarOptions(e,n);Q1(d);let m=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,r,c,a.defaultRangeSeparator),u=this.buildViewSpecs(r.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),p=this.buildTheme(a,r),h=this.parseToolbars(a,this.stableOptionOverrides,p,u,s);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:r,dateEnv:m,viewSpecs:u,theme:p,toolbarConfig:h,localeDefaults:o,availableRawLocales:c.map}}processRawCalendarOptions(e,n){let{locales:s,locale:a}=Fv([rm,e,n]),r=this.organizeRawLocales(s),o=r.map,c=this.buildLocale(a||r.defaultCode,o).options,d=this.buildPluginHooks(e.plugins||[],PY),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R1),P1),M1),d.listenerRefiners),d.optionRefiners),u={},p=Fv([rm,c,e,n]),h={},g=this.currentCalendarOptionsInput,v=this.currentCalendarOptionsRefined,x=!1;for(let y in p)this.optionsForRefining.indexOf(y)===-1&&(p[y]===g[y]||Hl[y]&&y in g&&Hl[y](g[y],p[y]))?h[y]=v[y]:m[y]?(h[y]=m[y](p[y]),x=!0):u[y]=g[y];return x&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:d,availableLocaleData:r,localeDefaults:c,extra:u}}_computeCurrentViewData(e,n,s,a){let r=n.viewSpecs[e];if(!r)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:c}=this.processRawViewOptions(r,n.pluginHooks,n.localeDefaults,s,a);Q1(c),this.nowManager.handleInput(n.dateEnv,o.now);let d=this.buildDateProfileGenerator({dateProfileGeneratorClass:r.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:r.duration,durationUnit:r.durationUnit,usesMinMaxTime:r.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:r,options:o,dateProfileGenerator:d,viewApi:m}}processRawViewOptions(e,n,s,a,r){let o=Fv([rm,e.optionDefaults,s,a,e.optionOverrides,r]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R1),P1),M1),wW),n.listenerRefiners),n.optionRefiners),d={},m=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,p=!1,h={};for(let g in o)o[g]===m[g]||Hl[g]&&Hl[g](o[g],m[g])?d[g]=u[g]:(o[g]===this.currentCalendarOptionsInput[g]||Hl[g]&&Hl[g](o[g],this.currentCalendarOptionsInput[g])?g in this.currentCalendarOptionsRefined&&(d[g]=this.currentCalendarOptionsRefined[g]):c[g]?d[g]=c[g](o[g]):h[g]=o[g],p=!0);return p&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=d),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function FY(t,e,n,s,a,r,o,c){let d=oR(e||o.defaultCode,o.map);return new RW({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:d,weekNumberCalculation:n,firstDay:s,weekText:a,cmdFormatter:r.cmdFormatter,defaultSeparator:c})}function $Y(t,e){let n=e.themeClasses[t.themeSystem]||_l;return new n(t)}function BY(t){let e=t.dateProfileGeneratorClass||bD;return new e(t)}function qY(t,e,n){return new vY(t,e,n)}function HY(t){return Rr(t,e=>e.ui)}function zY(t,e,n){let s={"":e};for(let a in t){let r=t[a];r.sourceId&&n[r.sourceId]&&(s[a]=n[r.sourceId])}return s}function VY(t){let{options:e}=t;return{eventUiSingleBase:Up({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Up({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Kv(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function UY(t){return uK(t.options.businessHours,t)}function Q1(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class WY extends wn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return je("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:s}=this.context,a=[],r=!0;for(let o of e){let{buttonName:c,buttonClick:d,buttonText:m,buttonIcon:u,buttonHint:p}=o;if(c==="title")r=!1,a.push(je("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=c===n.activeButton,g=!n.isTodayEnabled&&c==="today"||!n.isPrevEnabled&&c==="prev"||!n.isNextEnabled&&c==="next",v=[`fc-${c}-button`,s.getClass("button")];h&&v.push(s.getClass("buttonActive")),a.push(je("button",{type:"button",title:typeof p=="function"?p(n.navUnit):p,disabled:g,"aria-pressed":h,className:v.join(" "),onClick:d},m||(u?je("span",{className:u,role:"img"}):"")))}}if(a.length>1){let o=r&&s.getClass("buttonGroup")||"";return je("div",{className:o},...a)}return a[0]}}let Z1=class extends wn{render(){let{model:e,extraClassName:n}=this.props,s=!1,a,r,o=e.sectionWidgets,c=o.center;return o.left?(s=!0,a=o.left):a=o.start,o.right?(s=!0,r=o.right):r=o.end,je("div",{className:[n||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",c||[]),this.renderSection("end",r||[]))}renderSection(e,n){let{props:s}=this;return je(WY,{key:e,widgetGroups:n,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}};class KY extends wn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Ka(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:s}=e,a=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],r="",o="";return s?n.availableWidth!==null?r=n.availableWidth/s:o=`${1/s*100}%`:r=e.height||"",je("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:r,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class GY extends rd{constructor(e){super(e),this.handleSegClick=(n,s)=>{let{component:a}=this,{context:r}=a,o=zc(s);if(o&&a.isValidSegDownEl(n.target)){let c=Ii(n.target,".fc-event-forced-url"),d=c?c.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:s,event:new zn(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:r.viewApi}),d&&!n.defaultPrevented&&(window.location.href=d)}},this.destroy=lD(e.el,"click",".fc-event",this.handleSegClick)}}class YY extends rd{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,s)=>{zc(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",n,s))},this.handleSegLeave=(n,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,s))},this.removeHoverListeners=_U(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,s){let{component:a}=this,{context:r}=a,o=zc(s);(!n||a.isValidSegDownEl(n.target))&&r.emitter.trigger(e,{el:s,event:new zn(r,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:r.viewApi})}}class QY extends Ro{constructor(){super(...arguments),this.buildViewContext=Bt(IW),this.buildViewPropTransformers=Bt(XY),this.buildToolbarProps=Bt(ZY),this.headerRef=Gi(),this.footerRef=Gi(),this.interactionsStore={},this.state={viewLabelId:Vg()},this.registerInteractiveComponent=(e,n)=>{let s=MK(e,n),o=[GY,YY].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(s));this.interactionsStore[e.uid]=o,py[e.uid]=s},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let s of n)s.destroy();delete this.interactionsStore[e.uid]}delete py[e.uid]},this.resizeRunner=new Fw(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:s}=e,a=!1,r="",o;e.isHeightAuto||e.forPrint?r="":s.height!=null?a=!0:s.contentHeight!=null?r=s.contentHeight:o=Math.max(s.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),d=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return je($r.Provider,{value:c},je(ld,{unit:"day"},m=>{let u=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return je(Pn,null,n.header&&je(Z1,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:d},u)),je(KY,{liquid:a,height:r,aspectRatio:o,labeledById:d},this.renderView(e),this.buildAppendContent()),n.footer&&je(Z1,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},u)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let s in n)n[s](e[s],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:s}=n.pluginHooks;for(let a in s)n[a]!==e[a]&&s[a](n[a],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(s=>s(e));return je(Pn,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:s}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},r=this.buildViewPropTransformers(n.viewPropsTransformers);for(let c of r)Object.assign(a,c.transform(a,e));let o=s.component;return je(o,Object.assign({},a))}}function ZY(t,e,n,s,a,r){let o=n.build(a,void 0,!1),c=n.buildPrev(e,s,!1),d=n.buildNext(e,s,!1);return{title:r,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!_r(e.currentRange,a),isPrevEnabled:c.isValid,isNextEnabled:d.isValid}}function XY(t){return t.map(e=>new e)}class JY extends OK{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;Hp(()=>{Sm(je(PK,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(a,r,o,c)=>(this.setClassNames(a),this.setHeight(r),je(fD.Provider,{value:this.customContentRenderId},je(QY,Object.assign({isHeightAuto:o,forPrint:c},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Sm(null,this.el),this.setClassNames([]),this.setHeight(""))},xU(e),this.el=e,this.renderRunner=new Fw(this.handleRenderRequest),new LY({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Hp(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!yl(e,this.currentClassNames)){let{classList:n}=this.el;for(let s of this.currentClassNames)n.remove(s);for(let s of e)n.add(s);this.currentClassNames=e}}setHeight(e){aD(this.el,"height",e)}}const eQ=parseInt(String(We.version).split(".")[0]),tQ=eQ<18;class gR extends f.Component{constructor(){super(...arguments),this.elRef=f.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(We.createElement(nQ,{key:n.id,customRendering:n}));return We.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new LG;this.handleCustomRendering=e.handle.bind(e),this.calendar=new JY(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{La.flushSync(()=>{})});let n;e.subscribe(s=>{const a=Date.now(),r=!n;(tQ||r||this.isUpdating||this.isUnmounting||a-n<100?fR:La.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{n=a,r?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}gR.act=fR;class nQ extends f.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,s=typeof n=="function"?n(e.renderProps):n;return La.createPortal(s,e.containerEl)}}function fR(t){t()}class iQ extends Ja{constructor(){super(...arguments),this.headerElRef=Gi()}renderSimpleLayout(e,n){let{props:s,context:a}=this,r=[],o=Gp(a.options);return e&&r.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),je(zp,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},je(ok,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:r}))}renderHScrollLayout(e,n,s,a){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:o,context:c}=this,d=!o.forPrint&&Gp(c.options),m=!o.forPrint&&eR(c.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:d,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),m&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:vy}]}),je(zp,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},je(r,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:s,minWidth:a}]}],sections:u}))}}function qh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.row].push(s);return n}function hh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.firstCol].push(s);return n}function X1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}const vR=Un({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function xR(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class yR extends wn{render(){let{props:e}=this;return je(dk,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:vR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class bR extends wn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,r=s.eventTimeFormat||vR,o=PD(a,r,n,!0,e.defaultDisplayEventEnd);return je(ck,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ID(e.seg,n),defaultGenerator:sQ,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function sQ(t){return je(Pn,null,je("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&je("div",{className:"fc-event-time"},t.timeText),je("div",{className:"fc-event-title"},t.event.title||je(Pn,null,"")))}class aQ extends wn{constructor(){super(...arguments),this.compileSegs=Bt(rQ)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return je(sR,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return je(Pn,null,n.map(r=>{let o=r.eventRange.instance.instanceId;return je("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},xR(r)?je(bR,Object.assign({seg:r,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},hl(r,e.todayRange))):je(yR,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},hl(r,e.todayRange))))}))}})}}function rQ(t){let e=[],n=[];for(let s of t)e.push(s.seg),s.isVisible||n.push(s.seg);return{allSegs:e,invisibleSegs:n}}const lQ=Un({week:"narrow"});let oQ=class extends Ja{constructor(){super(...arguments),this.rootElRef=Gi(),this.state={dayNumberId:Vg()},this.handleRootEl=e=>{Ka(this.rootElRef,e),Ka(this.props.elRef,e)}}render(){let{context:e,props:n,state:s,rootElRef:a}=this,{options:r,dateEnv:o}=e,{date:c,dateProfile:d}=n;const m=n.showDayNumber&&dQ(c,d.currentRange,o);return je(uk,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:cQ,date:c,dateProfile:d,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:m,extraRenderProps:n.extraRenderProps},(u,p)=>je("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&je(iR,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Kp(e,c,"week"),date:c,defaultFormat:lQ}),!p.isDisabled&&(n.showDayNumber||hk(r)||n.forceDayTop)?je("div",{className:"fc-daygrid-day-top"},je(u,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Kp(e,c)),{id:s.dayNumberId})})):n.showDayNumber?je("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},je("a",{className:"fc-daygrid-day-number"},"")):void 0,je("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,je("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},je(aQ,{allDayDate:c,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:a,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),je("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}};function cQ(t){return t.dayNumberText||je(Pn,null,"")}function dQ(t,e,n){const{start:s,end:a}=e,r=bl(a,-1),o=n.getYear(s),c=n.getMonth(s),d=n.getYear(r),m=n.getMonth(r);return!(o===d&&c===m)&&(t.valueOf()===s.valueOf()||n.getDay(t)===1&&t.valueOf()<a.valueOf())}function wR(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function kR(t){return wR(t)+":"+t.lastCol}function mQ(t,e,n,s,a,r,o){let c=new pQ(b=>{let w=t[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return a[w]||1});c.allowReslicing=!0,c.strictOrder=s,e===!0||n===!0?(c.maxCoord=r,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof n=="number"&&(c.maxStackCnt=n,c.hiddenConsumes=!0);let d=[],m=[];for(let b=0;b<t.length;b+=1){let w=t[b],k=kR(w);a[k]!=null?d.push({index:b,span:{start:w.firstCol,end:w.lastCol+1}}):m.push(w)}let u=c.addSegs(d),p=c.toRects(),{singleColPlacements:h,multiColPlacements:g,leftoverMargins:v}=uQ(p,t,o),x=[],y=[];for(let b of m){g[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=b.firstCol;w<=b.lastCol;w+=1)h[w].push({seg:Nc(b,w,w+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)x.push(0);for(let b of u){let w=t[b.index],k=b.span;g[k.start].push({seg:Nc(w,k.start,k.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let _=k.start;_<k.end;_+=1)x[_]+=1,h[_].push({seg:Nc(w,_,_+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)y.push(v[b]);return{singleColPlacements:h,multiColPlacements:g,moreCnts:x,moreMarginTops:y}}function uQ(t,e,n){let s=hQ(t,n.length),a=[],r=[],o=[];for(let c=0;c<n.length;c+=1){let d=s[c],m=[],u=0,p=0;for(let g of d){let v=e[g.index];m.push({seg:Nc(v,c,c+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-u}),u=g.levelCoord+g.thickness}let h=[];u=0,p=0;for(let g of d){let v=e[g.index],x=g.span.end-g.span.start>1,y=g.span.start===c;p+=g.levelCoord-u,u=g.levelCoord+g.thickness,x?(p+=g.thickness,y&&h.push({seg:Nc(v,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):y&&(h.push({seg:Nc(v,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:p}),p=0)}a.push(m),r.push(h),o.push(p)}return{singleColPlacements:a,multiColPlacements:r,leftoverMargins:o}}function hQ(t,e){let n=[];for(let s=0;s<e;s+=1)n.push([]);for(let s of t)for(let a=s.span.start;a<s.span.end;a+=1)n[a].push(s);return n}function Nc(t,e,n,s){if(t.firstCol===e&&t.lastCol===n-1)return t;let a=t.eventRange,r=a.range,o=ho(r,{start:s[e].date,end:fi(s[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===r.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===r.end.valueOf()})}class pQ extends zD{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:s}=this,a=r=>!this.forceHidden[no(r)];for(let r=0;r<s.length;r+=1)s[r]=s[r].filter(a);return n}handleInvalidInsertion(e,n,s){const{entriesByLevel:a,forceHidden:r}=this,{touchingEntry:o,touchingLevel:c,touchingLateral:d}=e;if(this.hiddenConsumes&&o){const m=no(o);if(!r[m])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:rk(o.span,n.span)}),p=no(u);r[p]=!0,a[c][d]=u,s.push(u),this.splitEntry(o,n,s)}else r[m]=!0,s.push(o)}super.handleInvalidInsertion(e,n,s)}}let jR=class extends Ja{constructor(){super(...arguments),this.cellElRefs=new xr,this.frameElRefs=new xr,this.fgElRefs=new xr,this.segHarnessRefs=new xr,this.rootElRef=Gi(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:s}=this,{options:a}=s,r=e.cells.length,o=hh(e.businessHourSegs,r),c=hh(e.bgEventSegs,r),d=hh(this.getHighlightSegs(),r),m=hh(this.getMirrorSegs(),r),{singleColPlacements:u,multiColPlacements:p,moreCnts:h,moreMarginTops:g}=mQ(RD(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),v=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return je("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((x,y)=>{let b=this.renderFgSegs(y,e.forPrint?u[y]:p[y],e.todayRange,v),w=this.renderFgSegs(y,gQ(m[y],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return je(oQ,{key:x.key,elRef:this.cellElRefs.createRef(x.key),innerElRef:this.frameElRefs.createRef(x.key),dateProfile:e.dateProfile,date:x.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:x.extraRenderProps,extraDataAttrs:x.extraDataAttrs,extraClassNames:x.extraClassNames,extraDateSpan:x.extraDateSpan,moreCnt:h[y],moreMarginTop:g[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(x.key),fgContent:je(Pn,null,je(Pn,null,b),je(Pn,null,w)),bgContent:je(Pn,null,this.renderFillSegs(d[y],"highlight"),this.renderFillSegs(o[y],"non-business"),this.renderFillSegs(c[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let s=this.props;this.updateSizing(!va(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,s,a,r,o,c){let{context:d}=this,{eventSelection:m}=this.props,{framePositions:u}=this.state,p=this.props.cells.length===1,h=r||o||c,g=[];if(u)for(let v of n){let{seg:x}=v,{instanceId:y}=x.eventRange.instance,b=v.isVisible&&!a[y],w=v.isAbsolute,k="",_="";w&&(d.isRtl?(_=0,k=u.lefts[x.lastCol]-u.lefts[x.firstCol]):(k=0,_=u.rights[x.firstCol]-u.rights[x.lastCol])),g.push(je("div",{className:"fc-daygrid-event-harness"+(w?" fc-daygrid-event-harness-abs":""),key:wR(x),ref:h?null:this.segHarnessRefs.createRef(kR(x)),style:{visibility:b?"":"hidden",marginTop:w?"":v.marginTop,top:w?v.absoluteTop:"",left:k,right:_}},xR(x)?je(bR,Object.assign({seg:x,isDragging:r,isSelected:y===m,defaultDisplayEventEnd:p},hl(x,s))):je(yR,Object.assign({seg:x,isDragging:r,isResizing:o,isDateSelecting:c,isSelected:y===m,defaultDisplayEventEnd:p},hl(x,s)))))}return g}renderFillSegs(e,n){let{isRtl:s}=this.context,{todayRange:a}=this.props,{framePositions:r}=this.state,o=[];if(r)for(let c of e){let d=s?{right:0,left:r.lefts[c.lastCol]-r.lefts[c.firstCol]}:{left:0,right:r.rights[c.firstCol]-r.rights[c.lastCol]};o.push(je("div",{key:MD(c.eventRange),className:"fc-daygrid-bg-harness",style:d},n==="bg-event"?je(tR,Object.assign({seg:c},hl(c,a))):nR(n)))}return je(Pn,{},...o)}updateSizing(e){let{props:n,state:s,frameElRefs:a}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let d=n.cells.map(m=>a.currentMap[m.key]);if(d.length){let m=this.rootElRef.current,u=new Vc(m,d,!0,!1);(!s.framePositions||!s.framePositions.similarTo(u))&&this.setState({framePositions:new Vc(m,d,!0,!1)})}}const r=this.state.segHeights,o=this.querySegHeights(),c=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},r),o),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let s in e){let a=Math.round(e[s].getBoundingClientRect().height);n[s]=Math.max(n[s]||0,a)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}};jR.addStateEquality({segHeights:va});function gQ(t,e){if(!t.length)return[];let n=fQ(e);return t.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:n[s.eventRange.instance.instanceId],marginTop:0}))}function fQ(t){let e={};for(let n of t)for(let s of n)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class vQ extends Ja{constructor(){super(...arguments),this.splitBusinessHourSegs=Bt(qh),this.splitBgEventSegs=Bt(xQ),this.splitFgEventSegs=Bt(qh),this.splitDateSelectionSegs=Bt(qh),this.splitEventDrag=Bt(X1),this.splitEventResize=Bt(X1),this.rowRefs=new xr}render(){let{props:e,context:n}=this,s=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,s),r=this.splitBgEventSegs(e.bgEventSegs,s),o=this.splitFgEventSegs(e.fgEventSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),u=s>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return je(ld,{unit:"day"},(p,h)=>je(Pn,null,e.cells.map((g,v)=>je(jR,{ref:this.rowRefs.createRef(v),key:g.length?g[0].date.toISOString():v,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:a[v],eventSelection:e.eventSelection,bgEventSegs:r[v],fgEventSegs:o[v],dateSelectionSegs:c[v],eventDrag:d[v],eventResize:m[v],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Vc(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Vc(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:s,rowPositions:a}=this,r=s.leftToIndex(e),o=a.topToIndex(n);if(o!=null&&r!=null){let c=this.props.cells[o][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,r),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(o,r),rect:{left:s.lefts[r],right:s.rights[r],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let s=this.props.cells[e][n].date,a=fi(s,1);return{start:s,end:a}}}function xQ(t,e){return qh(t.filter(yQ),e)}function yQ(t){return t.eventRange.def.allDay}let bQ=class extends Ja{constructor(){super(...arguments),this.elRef=Gi(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:s,expandRows:a}=e,r=s===!0||n===!0;r&&!a&&(r=!1,n=null,s=null);let o=["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return je("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},je("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,je("tbody",{role:"presentation"},je(vQ,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=wQ(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),s=n.closest(".fc-scroller"),a=e.getBoundingClientRect().top-n.getBoundingClientRect().top;s.scrollTop=a?a+1:0}this.needsScrollReset=!1}}};function wQ(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${sW(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${zw(e.currentDate)}"]`)),n}class kQ extends YD{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class NR extends Ja{constructor(){super(...arguments),this.slicer=new kQ,this.tableRef=Gi()}render(){let{props:e,context:n}=this;return je(bQ,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class jQ extends iQ{constructor(){super(...arguments),this.buildDayTableModel=Bt(NQ),this.headerRef=Gi(),this.tableRef=Gi()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:s}=this,a=this.buildDayTableModel(s.dateProfile,n),r=e.dayHeaders&&je(WD,{ref:this.headerRef,dateProfile:s.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=c=>je(NR,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:a,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(r,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(r,o)}}function NQ(t,e){let n=new KD(t.renderRange,e);return new GD(n,/year|month|week/.test(t.currentRangeUnit))}class CQ extends bD{buildRenderRange(e,n,s){let a=super.buildRenderRange(e,n,s),{props:r}=this;return SQ({currentRange:a,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}function SQ(t){let{dateEnv:e,currentRange:n}=t,{start:s,end:a}=n,r;if(t.snapToWeek&&(s=e.startOfWeek(s),r=e.startOfWeek(a),r.valueOf()!==a.valueOf()&&(a=_1(r,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(fi(n.end,-1))),c=Math.ceil(KU(o,a));a=_1(a,6-c)}return{start:s,end:a}}var _Q=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Lw(_Q);var EQ=Br({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:jQ,dateProfileGeneratorClass:CQ},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class TQ extends qK{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?vK(e)?["timed","allDay"]:["allDay"]:["timed"]}}const AQ=Un({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function CR(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return je($r.Consumer,null,n=>{if(!t.isLabeled)return je("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:s,options:a,viewApi:r}=n,o=a.slotLabelFormat==null?AQ:Array.isArray(a.slotLabelFormat)?Un(a.slotLabelFormat[0]):Un(a.slotLabelFormat),c={level:0,time:t.time,date:s.toDate(t.date),view:r,text:s.format(t.date,o)};return je(Rs,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:c,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:DQ,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},d=>je("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},je(d,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function DQ(t){return t.text}class RQ extends wn{render(){return this.props.slatMetas.map(e=>je("tr",{key:e.key},je(CR,Object.assign({},e))))}}const PQ=Un({week:"short"}),MQ=5;class IQ extends Ja{constructor(){super(...arguments),this.allDaySplitter=new TQ,this.headerElRef=Gi(),this.rootElRef=Gi(),this.scrollerElRef=Gi(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:s}=this.context,{dateProfile:a}=this.props,r=a.renderRange,c=Do(r.start,r.end)===1?Kp(this.context,r.start,"week"):{};return s.weekNumbers&&e==="day"?je(iR,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:r.start,defaultFormat:PQ},d=>je("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},je(d,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:c}))):je("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},je("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:s}=this.context,a={text:n.allDayText,view:s};return je(Rs,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:OQ,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},r=>je("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},je(r,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,s){let{context:a,props:r}=this,o=[],c=Gp(a.options);return e&&o.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(o.push({type:"body",key:"all-day",chunk:{content:n}}),o.push({type:"body",key:"all-day-divider",outerContent:je("tr",{role:"presentation",className:"fc-scrollgrid-section"},je("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),je(zp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},je(ok,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,n,s,a,r,o,c){let d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");let{context:m,props:u}=this,p=!u.forPrint&&Gp(m.options),h=!u.forPrint&&eR(m.options),g=[];e&&g.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>je("tr",{role:"presentation"},this.renderHeadAxis("day",x.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(g.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>je("tr",{role:"presentation"},this.renderTableRowAxis(x.rowSyncHeights[0]))},{key:"cols",content:n}]}),g.push({key:"all-day-divider",type:"body",outerContent:je("tr",{role:"presentation",className:"fc-scrollgrid-section"},je("td",{colSpan:2,className:"fc-timegrid-divider "+m.theme.getClass("tableCellShaded")}))}));let v=m.options.nowIndicator;return g.push({type:"body",key:"body",liquid:!0,expandRows:!!m.options.expandRows,chunks:[{key:"axis",content:x=>je("div",{className:"fc-timegrid-axis-chunk"},je("table",{"aria-hidden":!0,style:{height:x.expandRows?x.clientHeight:""}},x.tableColGroupNode,je("tbody",null,je(RQ,{slatMetas:o}))),je("div",{className:"fc-timegrid-now-indicator-container"},je(ld,{unit:v?"minute":"day"},y=>{let b=v&&c&&c.safeComputeTop(y);return typeof b=="number"?je(mk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:b},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),h&&g.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:vy},{key:"cols",content:vy}]}),je(zp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:m.viewSpec},je(d,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:r}]}],sections:g}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=MQ),{dayMaxEvents:e,dayMaxEventRows:n}}}function OQ(t){return t.text}class LQ{constructor(e,n,s){this.positions=e,this.dateProfile=n,this.slotDuration=s}safeComputeTop(e){let{dateProfile:n}=this;if(_r(n.currentRange,e)){let s=Mn(e),a=e.valueOf()-s.valueOf();if(a>=ha(n.slotMinTime)&&a<ha(n.slotMaxTime))return this.computeTimeTop(Qt(a))}return null}computeDateTop(e,n){return n||(n=Mn(e)),this.computeTimeTop(Qt(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:s}=this,a=n.els.length,r=(e.milliseconds-ha(s.slotMinTime))/ha(this.slotDuration),o,c;return r=Math.max(0,r),r=Math.min(a,r),o=Math.floor(r),o=Math.min(o,a-1),c=r-o,n.tops[o]+n.getHeight(o)*c}}class FQ extends wn{render(){let{props:e,context:n}=this,{options:s}=n,{slatElRefs:a}=e;return je("tbody",null,e.slatMetas.map((r,o)=>{let c={time:r.time,date:n.dateEnv.toDate(r.date),view:n.viewApi};return je("tr",{key:r.key,ref:a.createRef(r.key)},e.axis&&je(CR,Object.assign({},r)),je(Rs,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!r.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":r.isoTimeStr},renderProps:c,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class $Q extends wn{constructor(){super(...arguments),this.rootElRef=Gi(),this.slatElRefs=new xr}render(){let{props:e,context:n}=this;return je("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},je("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,je(FQ,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new LQ(new Vc(this.rootElRef.current,BQ(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function BQ(t,e){return e.map(n=>t[n.key])}function Td(t,e){let n=[],s;for(s=0;s<e;s+=1)n.push([]);if(t)for(s=0;s<t.length;s+=1)n[t[s].col].push(t[s]);return n}function J1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.col].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}class qQ extends wn{render(){let{props:e}=this;return je(sR,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>_R(e.hiddenSegs,e),defaultGenerator:HQ,forceTimed:!0},n=>je(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function HQ(t){return t.shortText}function zQ(t,e,n){let s=new zD;e!=null&&(s.strictOrder=e),n!=null&&(s.maxStackCnt=n);let a=s.addSegs(t),r=eG(a),o=VQ(s);return o=GQ(o,1),{segRects:YQ(o),hiddenGroups:r}}function VQ(t){const{entriesByLevel:e}=t,n=gk((s,a)=>s+":"+a,(s,a)=>{let r=KQ(t,s,a),o=eC(r,n),c=e[s][a];return[Object.assign(Object.assign({},c),{nextLevelNodes:o[0]}),c.thickness+o[1]]});return eC(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function eC(t,e){if(!t)return[[],0];let{level:n,lateralStart:s,lateralEnd:a}=t,r=s,o=[];for(;r<a;)o.push(e(n,r)),r+=1;return o.sort(UQ),[o.map(WQ),o[0][1]]}function UQ(t,e){return e[1]-t[1]}function WQ(t){return t[0]}function KQ(t,e,n){let{levelCoords:s,entriesByLevel:a}=t,r=a[e][n],o=s[e]+r.thickness,c=s.length,d=e;for(;d<c&&s[d]<o;d+=1);for(;d<c;d+=1){let m=a[d],u,p=fy(m,r.span.start,gy),h=p[0]+p[1],g=h;for(;(u=m[g])&&u.span.start<r.span.end;)g+=1;if(h<g)return{level:d,lateralStart:h,lateralEnd:g}}return null}function GQ(t,e){const n=gk((s,a,r)=>no(s),(s,a,r)=>{let{nextLevelNodes:o,thickness:c}=s,d=c+r,m=c/d,u,p=[];if(!o.length)u=e;else for(let g of o)if(u===void 0){let v=n(g,a,d);u=v[0],p.push(v[1])}else{let v=n(g,u,0);p.push(v[1])}let h=(u-a)*m;return[u-h,Object.assign(Object.assign({},s),{thickness:h,nextLevelNodes:p})]});return t.map(s=>n(s,0,0)[1])}function YQ(t){let e=[];const n=gk((a,r,o)=>no(a),(a,r,o)=>{let c=Object.assign(Object.assign({},a),{levelCoord:r,stackDepth:o,stackForward:0});return e.push(c),c.stackForward=s(a.nextLevelNodes,r+a.thickness,o+1)+1});function s(a,r,o){let c=0;for(let d of a)c=Math.max(n(d,r,o),c);return c}return s(t,0,0),e}function gk(t,e){const n={};return(...s)=>{let a=t(...s);return a in n?n[a]:n[a]=e(...s)}}function tC(t,e,n=null,s=0){let a=[];if(n)for(let r=0;r<t.length;r+=1){let o=t[r],c=n.computeDateTop(o.start,e),d=Math.max(c+(s||0),n.computeDateTop(o.end,e));a.push({start:Math.round(c),end:Math.round(d)})}return a}function QQ(t,e,n,s){let a=[],r=[];for(let m=0;m<t.length;m+=1){let u=e[m];u?a.push({index:m,thickness:1,span:u}):r.push(t[m])}let{segRects:o,hiddenGroups:c}=zQ(a,n,s),d=[];for(let m of o)d.push({seg:t[m.index],rect:m});for(let m of r)d.push({seg:m,rect:null});return{segPlacements:d,hiddenGroups:c}}const ZQ=Un({hour:"numeric",minute:"2-digit",meridiem:!1});class SR extends wn{render(){return je(dk,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:ZQ}))}}class XQ extends wn{constructor(){super(...arguments),this.sortEventSegs=Bt(RD)}render(){let{props:e,context:n}=this,{options:s}=n,a=s.selectMirror,r=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},c=this.sortEventSegs(e.fgEventSegs,s.eventOrder);return je(uk,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},d=>je("div",{className:"fc-timegrid-col-frame"},je("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),je("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(c,o,!1,!1,!1)),je("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(r,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),je("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),hk(s)&&je(d,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,s,a,r,o){let{props:c}=this;return c.forPrint?_R(e,c):this.renderPositionedFgSegs(e,n,s,a,r,o)}renderPositionedFgSegs(e,n,s,a,r,o){let{eventMaxStack:c,eventShortHeight:d,eventOrderStrict:m,eventMinHeight:u}=this.context.options,{date:p,slatCoords:h,eventSelection:g,todayRange:v,nowDate:x}=this.props,y=s||a||r,b=tC(e,p,h,u),{segPlacements:w,hiddenGroups:k}=QQ(e,b,m,c);return je(Pn,null,this.renderHiddenGroups(k,e),w.map(_=>{let{seg:j,rect:T}=_,N=j.eventRange.instance.instanceId,E=y||!!(!n[N]&&T),A=Gv(T&&T.span),L=!y&&T?this.computeSegHStyle(T):{left:0,right:0},C=!!T&&T.stackForward>0,P=!!T&&T.span.end-T.span.start<d;return je("div",{className:"fc-timegrid-event-harness"+(C?" fc-timegrid-event-harness-inset":""),key:o||N,style:Object.assign(Object.assign({visibility:E?"":"hidden"},A),L)},je(SR,Object.assign({seg:j,isDragging:s,isResizing:a,isDateSelecting:r,isSelected:N===g,isShort:P},hl(j,v,x))))}))}renderHiddenGroups(e,n){let{extraDateSpan:s,dateProfile:a,todayRange:r,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m}=this.props;return je(Pn,null,e.map(u=>{let p=Gv(u.span),h=JQ(u.entries,n);return je(qQ,{key:mD(aR(h)),hiddenSegs:h,top:p.top,bottom:p.bottom,extraDateSpan:s,dateProfile:a,todayRange:r,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m})}))}renderFillSegs(e,n){let{props:s,context:a}=this,o=tC(e,s.date,s.slatCoords,a.options.eventMinHeight).map((c,d)=>{let m=e[d];return je("div",{key:MD(m.eventRange),className:"fc-timegrid-bg-harness",style:Gv(c)},n==="bg-event"?je(tR,Object.assign({seg:m},hl(m,s.todayRange,s.nowDate))):nR(n))});return je(Pn,null,o)}renderNowIndicator(e){let{slatCoords:n,date:s}=this.props;return n?e.map((a,r)=>je(mk,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(a.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(e){let{isRtl:n,options:s}=this.context,a=s.slotEventOverlap,r=e.levelCoord,o=e.levelCoord+e.thickness,c,d;a&&(o=Math.min(1,r+(o-r)*2)),n?(c=1-o,d=r):(c=r,d=1-o);let m={zIndex:e.stackDepth+1,left:c*100+"%",right:d*100+"%"};return a&&!e.stackForward&&(m[n?"marginLeft":"marginRight"]=20),m}}function _R(t,{todayRange:e,nowDate:n,eventSelection:s,eventDrag:a,eventResize:r}){let o=(a?a.affectedInstances:null)||(r?r.affectedInstances:null)||{};return je(Pn,null,t.map(c=>{let d=c.eventRange.instance.instanceId;return je("div",{key:d,style:{visibility:o[d]?"hidden":""}},je(SR,Object.assign({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===s,isShort:!1},hl(c,e,n))))}))}function Gv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function JQ(t,e){return t.map(n=>e[n.index])}class eZ extends wn{constructor(){super(...arguments),this.splitFgEventSegs=Bt(Td),this.splitBgEventSegs=Bt(Td),this.splitBusinessHourSegs=Bt(Td),this.splitNowIndicatorSegs=Bt(Td),this.splitDateSelectionSegs=Bt(Td),this.splitEventDrag=Bt(J1),this.splitEventResize=Bt(J1),this.rootElRef=Gi(),this.cellElRefs=new xr}render(){let{props:e,context:n}=this,s=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,r=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitBgEventSegs(e.bgEventSegs,a),c=this.splitBusinessHourSegs(e.businessHourSegs,a),d=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),m=this.splitDateSelectionSegs(e.dateSelectionSegs,a),u=this.splitEventDrag(e.eventDrag,a),p=this.splitEventResize(e.eventResize,a);return je("div",{className:"fc-timegrid-cols",ref:this.rootElRef},je("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,je("tbody",{role:"presentation"},je("tr",{role:"row"},e.axis&&je("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},je("div",{className:"fc-timegrid-col-frame"},je("div",{className:"fc-timegrid-now-indicator-container"},typeof s=="number"&&je(mk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:e.nowDate})))),e.cells.map((h,g)=>je(XQ,{key:h.key,elRef:this.cellElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,fgEventSegs:r[g],bgEventSegs:o[g],businessHourSegs:c[g],nowIndicatorSegs:d[g],dateSelectionSegs:m[g],eventDrag:u[g],eventResize:p[g],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Vc(this.rootElRef.current,tZ(this.cellElRefs.currentMap,e.cells),!0,!1))}}function tZ(t,e){return e.map(n=>t[n.key])}class nZ extends Ja{constructor(){super(...arguments),this.processSlotOptions=Bt(iZ),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:s}=this.state;if(n&&s){if(e.time){let a=s.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),n(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return je("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},je($Q,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),je(eZ,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:s,options:a}=this.context,{colCoords:r}=this,{dateProfile:o}=this.props,{slatCoords:c}=this.state,{snapDuration:d,snapsPerSlot:m}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),u=r.leftToIndex(e),p=c.positions.topToIndex(n);if(u!=null&&p!=null){let h=this.props.cells[u],g=c.positions.tops[p],v=c.positions.getHeight(p),x=(n-g)/v,y=Math.floor(x*m),b=p*m+y,w=this.props.cells[u].date,k=cy(o.slotMinTime,zU(d,b)),_=s.add(w,k),j=s.add(_,d);return{dateProfile:o,dateSpan:Object.assign({range:{start:_,end:j},allDay:!1},h.extraDateSpan),dayEl:r.els[u],rect:{left:r.lefts[u],right:r.rights[u],top:g,bottom:g+v},layer:0}}return null}}function iZ(t,e){let n=e||t,s=Hw(t,n);return s===null&&(n=t,s=1),{snapDuration:n,snapsPerSlot:s}}class sZ extends YD{sliceRange(e,n){let s=[];for(let a=0;a<n.length;a+=1){let r=ho(e,n[a]);r&&s.push({start:r.start,end:r.end,isStart:r.start.valueOf()===e.start.valueOf(),isEnd:r.end.valueOf()===e.end.valueOf(),col:a})}return s}}class aZ extends Ja{constructor(){super(...arguments),this.buildDayRanges=Bt(rZ),this.slicer=new sZ,this.timeColsRef=Gi()}render(){let{props:e,context:n}=this,{dateProfile:s,dayTableModel:a}=e,{nowIndicator:r,nextDayThreshold:o}=n.options,c=this.buildDayRanges(a,s,n.dateEnv);return je(ld,{unit:r?"minute":"day"},(d,m)=>je(nZ,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,s,null,n,c),{forPrint:e.forPrint,axis:e.axis,dateProfile:s,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:d,nowIndicatorSegs:r&&this.slicer.sliceNowDate(d,s,o,n,c),todayRange:m,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function rZ(t,e,n){let s=[];for(let a of t.headerDates)s.push({start:n.add(a,e.slotMinTime),end:n.add(a,e.slotMaxTime)});return s}const nC=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function lZ(t,e,n,s,a){let r=new Date(0),o=t,c=Qt(0),d=n||oZ(s),m=[];for(;ha(o)<ha(e);){let u=a.add(r,o),p=Hw(c,d)!==null;m.push({date:u,time:o,key:u.toISOString(),isoTimeStr:aW(u),isLabeled:p}),o=cy(o,s),c=cy(c,s)}return m}function oZ(t){let e,n,s;for(e=nC.length-1;e>=0;e-=1)if(n=Qt(nC[e]),s=Hw(n,t),s!==null&&s>1)return n;return t}class cZ extends IQ{constructor(){super(...arguments),this.buildTimeColsModel=Bt(dZ),this.buildSlatMetas=Bt(lZ)}render(){let{options:e,dateEnv:n,dateProfileGenerator:s}=this.context,{props:a}=this,{dateProfile:r}=a,o=this.buildTimeColsModel(r,s),c=this.allDaySplitter.splitProps(a),d=this.buildSlatMetas(r.slotMinTime,r.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:m}=e,u=!m,p=m,h=e.dayHeaders&&je(WD,{dates:o.headerDates,dateProfile:r,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),g=e.allDaySlot!==!1&&(x=>je(NR,Object.assign({},c.allDay,{dateProfile:r,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:x.tableMinWidth,colGroupNode:x.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:x.clientWidth,clientHeight:x.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),v=x=>je(aZ,Object.assign({},c.timed,{dayTableModel:o,dateProfile:r,axis:u,slotDuration:e.slotDuration,slatMetas:d,forPrint:a.forPrint,tableColGroupNode:x.tableColGroupNode,tableMinWidth:x.tableMinWidth,clientWidth:x.clientWidth,clientHeight:x.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:x.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(h,g,v,o.colCnt,m,d,this.state.slatCoords):this.renderSimpleLayout(h,g,v)}}function dZ(t,e){let n=new KD(t.renderRange,e);return new GD(n,!1)}var mZ='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Lw(mZ);const uZ={allDaySlot:Boolean};var hZ=Br({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:uZ,views:{timeGrid:{component:cZ,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});lk.touchMouseIgnoreWait=500;let yy=0,Yp=0,by=!1;class ER{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&pZ(n)&&this.tryStart(n)){let s=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let s=this.createEventFromMouse(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let s=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let a=n.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let s=this.createEventFromTouch(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=n=>{if(this.isDragging){let s=n.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,gZ()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:a,deltaX:s-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new Gg,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),fZ()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),vZ()}tryStart(e){let n=this.querySubjectEl(e),s=e.target;return n&&(!this.handleSelector||Ii(s,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){by=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Ii(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return yy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(by=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let s=0,a=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:a}}createEventFromTouch(e,n){let s=e.touches,a,r,o=0,c=0;return s&&s.length?(a=s[0].pageX,r=s[0].pageY):(a=e.pageX,r=e.pageY),n?(this.origPageX=a,this.origPageY=r):(o=a-this.origPageX,c=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:r,deltaX:o,deltaY:c}}}function pZ(t){return t.button===0&&!t.ctrlKey}function gZ(){yy+=1,setTimeout(()=>{yy-=1},lk.touchMouseIgnoreWait)}function fZ(){Yp+=1,Yp===1&&window.addEventListener("touchmove",TR,{passive:!1})}function vZ(){Yp-=1,Yp||window.removeEventListener("touchmove",TR,{passive:!1})}function TR(t){by&&t.preventDefault()}class xZ{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let s=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,n){let s=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();s.style.transition="top "+n+"ms,left "+n+"ms",sm(s,{left:a.left,top:a.top}),EU(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&($w(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&sm(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),sm(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class AR extends ak{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class DR extends AR{constructor(e,n){super(new XK(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return QK(this.scrollController.el)}}class yZ extends AR{constructor(e){super(new JK,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const iC=typeof performance=="function"?performance.now:Date.now;class bZ{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=iC();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let s=e-window.scrollX,a=n-window.scrollY,r=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:s-this.pointerScreenX;r<0?this.everMovedUp=!0:r>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(iC()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:s}=e,{edgeThreshold:a}=this,r=a-e.distance,o=r*r/(a*a)*this.maxVelocity*n,c=1;switch(e.name){case"left":c=-1;case"right":s.setScrollLeft(s.getScrollLeft()+o*c);break;case"top":c=-1;case"bottom":s.setScrollTop(s.getScrollTop()+o*c);break}}computeBestEdge(e,n){let{edgeThreshold:s}=this,a=null,r=this.scrollCaches||[];for(let o of r){let c=o.clientRect,d=e-c.left,m=c.right-e,u=n-c.top,p=c.bottom-n;d>=0&&m>=0&&u>=0&&p>=0&&(u<=s&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"top",distance:u}),p<=s&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>p)&&(a={scrollCache:o,name:"bottom",distance:p}),d<=s&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"left",distance:d}),m<=s&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>m)&&(a={scrollCache:o,name:"right",distance:m}))}return a}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new yZ(!1):new DR(n,!1))}queryScrollEls(e){let n=[];for(let s of this.scrollQuery)typeof s=="object"?n.push(s):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return n}}class su extends nG{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,TU(document.body),DU(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let r=this.minDistance,o,{deltaX:c,deltaY:d}=a;o=c*c+d*d,o>=r*r&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,AU(document.body),RU(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new ER(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),n&&(s.selector=n),this.mirror=new xZ,this.autoScroller=new bZ}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class wZ{constructor(e){this.el=e,this.origRect=sk(e),this.scrollCaches=HD(e).map(n=>new DR(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let s={left:e,top:n};for(let a of this.scrollCaches)if(!kZ(a.getEventTarget())&&!LK(s,a.clientRect))return!1;return!0}}function kZ(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Yg{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):a.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Gg}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},s=n,a=e.subjectEl,r;a instanceof HTMLElement&&(r=sk(a),s=FK(s,r));let o=this.initialHit=this.queryHitForOffset(s.left,s.top);if(o){if(this.useSubjectCenter&&r){let c=$D(r,o.rect);c&&(s=$K(c))}this.coordAdjust=BK(s,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!Qg(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=Rr(this.droppableStore,e=>(e.component.prepareHits(),new wZ(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:s,offsetTrackers:a}=this,r=null;for(let o in s){let c=s[o].component,d=a[o];if(d&&d.isWithinClipping(e,n)){let m=d.computeLeft(),u=d.computeTop(),p=e-m,h=n-u,{origRect:g}=d,v=g.right-g.left,x=g.bottom-g.top;if(p>=0&&p<v&&h>=0&&h<x){let y=c.queryHit(p,h,v,x);y&&Wg(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||d.el.contains(d.el.getRootNode().elementFromPoint(p+m-window.scrollX,h+u-window.scrollY)))&&(!r||y.layer>r.layer)&&(y.componentId=o,y.context=c.context,y.rect.left+=m,y.rect.right+=m,y.rect.top+=u,y.rect.bottom+=u,r=y)}}}return r}}function Qg(t,e){return!t&&!e?!0:!!t!=!!e?!1:SK(t.dateSpan,e.dateSpan)}function RR(t,e){let n={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(n,s(t,e));return Object.assign(n,jZ(t,e.dateEnv)),n}function jZ(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class NZ extends rd{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:a}=this,r=s.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(r))},this.handleDragEnd=s=>{let{component:a}=this,{pointer:r}=this.dragging;if(!r.wasTouchScroll){let{initialHit:o,finalHit:c}=this.hitDragging;if(o&&c&&Qg(o,c)){let{context:d}=a,m=Object.assign(Object.assign({},RR(o.dateSpan,d)),{dayEl:o.dayEl,jsEvent:s.origEvent,view:d.viewApi||d.calendarApi.view});d.emitter.trigger("dateClick",m)}}},this.dragging=new su(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Yg(this.dragging,nk(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class CZ extends rd{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:c,dragging:d}=this,{options:m}=c.context,u=m.selectable&&c.isValidDateDownEl(o.origEvent.target);d.setIgnoreMove(!u),d.delay=o.isTouch?SZ(c):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,c)=>{let{context:d}=this.component,m=null,u=!1;if(o){let p=this.hitDragging.initialHit;o.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,o)||(m=_Z(p,o,d.pluginHooks.dateSelectionTransformers)),(!m||!oG(m,o.dateProfile,d))&&(u=!0,m=null)}m?d.dispatch({type:"SELECT_DATES",selection:m}):c||d.dispatch({type:"UNSELECT_DATES"}),u?Bw():qw(),c||(this.dragSelection=m)},this.handlePointerUp=o=>{this.dragSelection&&(TD(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:s}=n.context,a=this.dragging=new su(e.el);a.touchScrollAllowed=!1,a.minDistance=s.selectMinDistance||0,a.autoScroller.isEnabled=s.dragScroll;let r=this.hitDragging=new Yg(this.dragging,nk(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function SZ(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function _Z(t,e,n){let s=t.dateSpan,a=e.dateSpan,r=[s.range.start,s.range.end,a.range.start,a.range.end];r.sort(LU);let o={};for(let c of n){let d=c(t,e);if(d===!1)return null;d&&Object.assign(o,d)}return o.range={start:r[0],end:r[3]},o.allDay=s.allDay,o}class au extends rd{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let c=o.origEvent.target,{component:d,dragging:m}=this,{mirror:u}=m,{options:p}=d.context,h=d.context;this.subjectEl=o.subjectEl;let g=this.subjectSeg=zc(o.subjectEl),x=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=Xw(h.getCurrentData().eventStore,x),m.minDistance=o.isTouch?0:p.eventDragMinDistance,m.delay=o.isTouch&&x!==d.props.eventSelection?TZ(d):null,p.fixedMirrorParent?u.parentNode=p.fixedMirrorParent:u.parentNode=Ii(c,".fc"),u.revertDuration=p.dragRevertDuration;let y=d.isValidSegDownEl(c)&&!Ii(c,".fc-event-resizer");m.setIgnoreMove(!y),this.isDragging=y&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let c=this.component.context,d=this.eventRange,m=d.instance.instanceId;o.isTouch?m!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(o),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new zn(c,d.def,d.instance),jsEvent:o.origEvent,view:c.viewApi}))},this.handleHitUpdate=(o,c)=>{if(!this.isDragging)return;let d=this.relevantEvents,m=this.hitDragging.initialHit,u=this.component.context,p=null,h=null,g=null,v=!1,x={affectedEvents:d,mutatedEvents:Ss(),isEvent:!0};if(o){p=o.context;let y=p.options;u===p||y.editable&&y.droppable?(h=EZ(m,o,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(g=tk(d,p.getCurrentData().eventUiBases,h,p),x.mutatedEvents=g,QD(x,o.dateProfile,p)||(v=!0,h=null,g=null,x.mutatedEvents=Ss()))):p=null}this.displayDrag(p,x),v?Bw():qw(),c||(u===p&&Qg(m,o)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=h,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let c=this.component.context,d=c.viewApi,{receivingContext:m,validMutation:u}=this,p=this.eventRange.def,h=this.eventRange.instance,g=new zn(c,p,h),v=this.relevantEvents,x=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:o.origEvent,view:d}),u){if(m===c){let b=new zn(c,x.defs[p.defId],h?x.instances[h.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:x});let w={oldEvent:g,event:b,relatedEvents:to(x,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}},k={};for(let _ of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(k,_(u,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},w),k),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:d})),c.emitter.trigger("eventChange",w)}else if(m){let b={event:g,relatedEvents:to(v,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:o.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:v}),c.emitter.trigger("eventRemove",b);let w=x.defs[p.defId],k=x.instances[h.instanceId],_=new zn(m,w,k);m.dispatch({type:"MERGE_EVENTS",eventStore:x});let j={event:_,relatedEvents:to(x,m,k),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:x})}};m.emitter.trigger("eventAdd",j),o.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},RR(y.dateSpan,m)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:y.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},j),{draggedEl:o.subjectEl,view:y.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:s}=n.context,a=this.dragging=new su(e.el);a.pointer.selector=au.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=s.dragScroll;let r=this.hitDragging=new Yg(this.dragging,py);r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let s=this.component.context,a=this.receivingContext;a&&a!==e&&(a===s?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Ss(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}au.SELECTOR=".fc-event-draggable, .fc-event-resizable";function EZ(t,e,n,s){let a=t.dateSpan,r=e.dateSpan,o=a.range.start,c=r.range.start,d={};a.allDay!==r.allDay&&(d.allDay=r.allDay,d.hasEnd=e.context.options.allDayMaintainDuration,r.allDay?o=Mn(n):o=n);let m=oc(o,c,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);m.milliseconds&&(d.allDay=!1);let u={datesDelta:m,standardProps:d};for(let p of s)p(u,t,e);return u}function TZ(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class AZ extends rd{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=r=>{let{component:o}=this,c=this.querySegEl(r),d=zc(c),m=this.eventRange=d.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(r.origEvent.target)||r.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=r=>{let{context:o}=this.component,c=this.eventRange;this.relevantEvents=Xw(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let d=this.querySegEl(r);this.draggingSegEl=d,this.draggingSeg=zc(d),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:d,event:new zn(o,c.def,c.instance),jsEvent:r.origEvent,view:o.viewApi})},this.handleHitUpdate=(r,o,c)=>{let{context:d}=this.component,m=this.relevantEvents,u=this.hitDragging.initialHit,p=this.eventRange.instance,h=null,g=null,v=!1,x={affectedEvents:m,mutatedEvents:Ss(),isEvent:!0};r&&(r.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,r)||(h=DZ(u,r,c.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),h&&(g=tk(m,d.getCurrentData().eventUiBases,h,d),x.mutatedEvents=g,QD(x,r.dateProfile,d)||(v=!0,h=null,g=null,x.mutatedEvents=null)),g?d.dispatch({type:"SET_EVENT_RESIZE",state:x}):d.dispatch({type:"UNSET_EVENT_RESIZE"}),v?Bw():qw(),o||(h&&Qg(u,r)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=g)},this.handleDragEnd=r=>{let{context:o}=this.component,c=this.eventRange.def,d=this.eventRange.instance,m=new zn(o,c,d),u=this.relevantEvents,p=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:r.origEvent,view:o.viewApi}),this.validMutation){let h=new zn(o,p.defs[c.defId],d?p.instances[d.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:p});let g={oldEvent:m,event:h,relatedEvents:to(p,o,d),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Qt(0),endDelta:this.validMutation.endDelta||Qt(0),jsEvent:r.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",g)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,s=this.dragging=new su(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.context.options.dragScroll;let a=this.hitDragging=new Yg(this.dragging,nk(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Ii(e.subjectEl,".fc-event")}}function DZ(t,e,n,s){let a=t.context.dateEnv,r=t.dateSpan.range.start,o=e.dateSpan.range.start,c=oc(r,o,a,t.largeUnit);if(n){if(a.add(s.start,c)<s.end)return{startDelta:c}}else if(a.add(s.end,c)>s.start)return{endDelta:c};return null}class RZ{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let a=this.context.options.unselectCancel,r=rD(s.origEvent);this.matchesCancel=!!Ii(r,a),this.matchesEvent=!!Ii(r,au.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:a}=this,{documentPointer:r}=this,o=a.getCurrentData();if(!r.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let c=a.options.unselectAuto;c&&(!c||!this.matchesCancel)&&a.calendarApi.unselect(s)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new ER(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const PZ={fixedMirrorParent:Le},MZ={dateClick:Le,eventDragStart:Le,eventDragStop:Le,eventDrop:Le,eventResizeStart:Le,eventResizeStop:Le,eventResize:Le,drop:Le,eventReceive:Le,eventLeave:Le};lk.dataAttrPrefix="";var IZ=Br({name:"@fullcalendar/interaction",componentInteractions:[NZ,CZ,au,AZ],calendarInteractions:[RZ],elementDraggingImpl:su,optionRefiners:PZ,listenerRefiners:MZ});const OZ=()=>i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((t,e)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(S,{width:"60px",height:"1rem"})},`day-${e}`))}),Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((n,s)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(S,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(S,{width:"100%",height:"6px",className:"rounded"}),i.jsx(S,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${e}-${s}`))},`week-${e}`))]})]})})}),LZ=()=>(window.kiviCareData?.locale||window.wp?.i18n?.getLocaleData?.()?.[""]?.lang||"en").replace("_","-").toLowerCase(),FZ=t=>{switch(String(t)){case"0":return"#f5365c";case"1":return"#23a359";case"2":return"#efc51c";case"3":return"#78c0fb";case"4":return"#4874dc";default:return"#007bff"}},$Z=({events:t=[],onEventClick:e,onViewChange:n,loading:s=!1,eventContent:a})=>{const[r,o]=f.useState("dayGridMonth"),[c,d]=f.useState(!1);f.useEffect(()=>{!s&&!c&&d(!0)},[s,c]);const m=f.useCallback(h=>{e&&typeof e=="function"&&e(h)},[e]),u=f.useCallback(h=>{const g=h.view?.type||"dayGridMonth";o(g),n&&typeof n=="function"&&n(h)},[n]),p=We.useMemo(()=>t.map(h=>{const g=h.color||FZ(h.status);return{id:parseInt(h.id,10),title:h.title||`${h.doctorName} - ${h.patientName||l("Patient","kivicare-clinic-management-system")}`,start:h.start||h.appointmentStartDateWF,end:h.end||h.appointmentEndDateWF,backgroundColor:g,borderColor:g,textColor:"#ffffff",allDay:!1,extendedProps:{...h}}}),[t]);return s&&!c?i.jsx(OZ,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"calendar-container",style:{position:"relative"},children:i.jsx(gR,{plugins:[EQ,hZ,IZ],initialView:r,locale:LZ(),headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:l("Today","kivicare-clinic-management-system"),month:l("Month","kivicare-clinic-management-system"),week:l("Week","kivicare-clinic-management-system"),day:l("Day","kivicare-clinic-management-system")},events:p,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!0},dayMaxEvents:3,navLinks:!0,selectable:!0,editable:!1,eventClick:m,datesSet:u,eventContent:a,height:"auto",contentHeight:"auto",windowResize:()=>{}})})})})},fk={getSystemNotices:()=>ve({endpoint:"system/notices",method:"GET"}),sendTestEmail:(t={})=>ve({endpoint:"system/notices/test-email",method:"POST",data:t}),runMigrations:()=>ve({endpoint:"system/notices/run-migrations",method:"POST"})},BZ=(t={})=>gt({queryKey:["system","notices"],queryFn:()=>fk.getSystemNotices(),staleTime:300*1e3,...t}),qZ=()=>He({mutationFn:t=>fk.sendTestEmail(t)}),HZ=()=>He({mutationFn:()=>fk.runMigrations()}),dt=({title:t,text:e,icon:n="ph-warning",iconColor:s="text-warning",bgIconColor:a="bg-warning",confirmButtonText:r=l("Yes","kivicare-clinic-management-system"),cancelButtonText:o=l("No","kivicare-clinic-management-system"),confirmButtonClass:c="btn-danger",cancelButtonClass:d="btn-light",...m})=>$t.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle ${a} bg-opacity-25 avatar-70"
            >
              <i class="ph ${n} ${s} fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!0,focusConfirm:!1,reverseButtons:!0,confirmButtonText:r,cancelButtonText:o,customClass:{popup:"rounded-4 p-4",confirmButton:`btn ${c} px-4`,cancelButton:`btn ${d} px-4`,actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...m}),ft=({title:t=l("Loading...","kivicare-clinic-management-system"),text:e=l("Please wait...","kivicare-clinic-management-system"),...n}={})=>$t.fire({allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,background:"transparent",customClass:{popup:"border-0 shadow-none"},html:`
            <div class="bg-body rounded-4 shadow-lg px-5 py-5 text-center">
                <!-- Spinner -->
                <div class="mb-4 d-flex justify-content-center">
                    <div class="spinner-grow text-primary me-1"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.1s"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.2s"></div>
                </div>
                <!-- Title -->
                <h4 class="fw-semibold mb-2">
                    ${t||l("Deleting...","kivicare-clinic-management-system")}
                </h4>

                <!-- Description -->
                <p class="text-muted mb-1">
                    ${e||l("Please wait.","kivicare-clinic-management-system")}
                </p>

                <p class="text-muted small mb-0">
                    ${l("This wont take long.","kivicare-clinic-management-system")}
                </p>
            </div>
          `,...n}),tt=({title:t=l("Success","kivicare-clinic-management-system"),text:e,confirmButtonText:n=l("OK","kivicare-clinic-management-system"),...s})=>$t.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-25 avatar-70"
            >
              <i class="ph ph-check text-success fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),Me=({title:t=l("Error","kivicare-clinic-management-system"),text:e,confirmButtonText:n=l("OK","kivicare-clinic-management-system"),...s})=>$t.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-danger bg-opacity-25 avatar-70"
            >
              <i class="ph ph-x text-danger fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-danger px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),Yi=()=>{$t.close()},zZ=()=>{const[t,e]=f.useState([]),{data:n,isLoading:s,refetch:a}=BZ(),{mutate:r,isLoading:o}=qZ(),{mutate:c,isLoading:d}=HZ();if(f.useEffect(()=>{n?.data&&e(n.data)},[n]),t.length===0||s)return null;const m=async()=>{const p=window.kiviCareData?.admin_email||"",h=await dt({html:`
            <div class="pt-3 pb-4 text-start">
                <h4 class="fs-5 mb-0">
                    Add New Bill
                </h4>
            </div>
                <form id="test-email-form">
                    <div class="mb-3 text-start">
                        <label for="swal-email" class="form-label">
                            ${l("Email Address","kivicare-clinic-management-system")}
                        </label>
                        <input 
                            type="email" 
                            class="form-control" 
                            id="swal-email" 
                            value="${p}"
                            placeholder="${l("Enter email address","kivicare-clinic-management-system")}"
                            required
                        />
                        <div class="form-text text-start mt-2">
                            ${l("Test email will be sent to this address","kivicare-clinic-management-system")}
                        </div>
                    </div>
                </form>
            `,showCancelButton:!0,confirmButtonText:l("Send Email","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",focusConfirm:!1,allowOutsideClick:!1,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",cancelButton:"btn btn-secondary px-4",actions:"justify-content-end gap-2 mt-4 mx-0 px-3"},reverseButtons:!0,didOpen:()=>{const g=document.getElementById("swal-email");g&&g.focus()},preConfirm:()=>{const g=document.getElementById("swal-email").value;return g?{email:g}:(Me({text:l("Please enter an email address","kivicare-clinic-management-system")}),!1)}});if(h.isConfirmed&&h.value){const{email:g}=h.value;ft({title:l("Sending Email...","kivicare-clinic-management-system"),text:l("Please wait while we send the test email.","kivicare-clinic-management-system"),didOpen:()=>{r({email:g},{onSuccess:v=>{if(v.status===500){Me({title:l("Email Failed","kivicare-clinic-management-system"),text:v.data?.message||v.message||l("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")});return}tt({title:l("Email Sent!","kivicare-clinic-management-system"),text:l("Test email has been sent successfully. Please check your inbox.","kivicare-clinic-management-system")}),e(x=>x.filter(y=>y.type!=="smtp"))},onError:v=>{console.error("Email sending error:",v),Me({title:l("Email Failed","kivicare-clinic-management-system"),text:v.response?.data?.message||v.message||l("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")})}})}})}},u=async p=>{const h=p.details?.pending_count||0,g=p.details?.plugin_count||1,v=p.details?.migrations_by_plugin||{},x=p.details?.migrations||[];let y="";Object.keys(v).length>1?y=Object.entries(v).map(([w,k])=>`
                <div class="mb-2">
                    <strong class="text-primary">${w}:</strong>
                    <div class="ms-3">
                        ${k.map(_=>`
                            <div class="small text-muted py-1"> ${_}</div>
                        `).join("")}
                    </div>
                </div>
            `).join(""):y=x.map(w=>`
                <div class="small text-muted py-1"> ${w}</div>
            `).join(""),(await dt({title:l("Run Database Migrations","kivicare-clinic-management-system"),html:`
                <div class="text-start">
                    <div class="mb-4 text-center">
                        <span class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-25 avatar-70">
                            <i class="ph ph-database fs-1"></i>
                        </span>
                    </div>
                    
                    <p class="mb-3">
                        ${g>1?Pi(l("This will run database migrations from %1$d plugins:","kivicare-clinic-management-system"),g):l("This will run the following database migrations:","kivicare-clinic-management-system")}
                    </p>
                    <div class="mb-3">
                        <strong>
                            ${Pi(l("Total Pending Migrations: %1$d","kivicare-clinic-management-system"),h)}
                            ${g>1?Pi(l(" (from %1$d plugins)","kivicare-clinic-management-system"),g):""}
                        </strong>
                    </div>
                    ${x.length>0?`
                        <div class="mb-3">
                            <div class="border rounded p-3 bg-body" style="max-height: 300px; overflow-y: auto;">
                                ${y}
                            </div>
                        </div>
                    `:""}
                    <div class="alert alert-warning bg-warning-subtle small">
                        <i class="ph ph-warning-circle me-2"></i>
                        ${l("It is recommended to backup your database before running migrations.","kivicare-clinic-management-system")}
                    </div>
                    ${g>1?`
                        <div class="alert alert-info bg-info-subtle small">
                            <i class="ph ph-info me-2"></i>
                            ${l("Migrations from all plugins will be executed in the correct order.","kivicare-clinic-management-system")}
                        </div>
                    `:""}
                </div>
            `,icon:"ph-question",iconColor:"text-primary",bgIconColor:"bg-primary",showCancelButton:!0,confirmButtonText:l("Run Migrations","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",allowOutsideClick:!1,focusCancel:!0,width:"600px"})).isConfirmed&&ft({title:l("Running Migrations...","kivicare-clinic-management-system"),text:l("Please wait while we update your database. This may take a few moments.","kivicare-clinic-management-system"),didOpen:()=>{c({},{onSuccess:w=>{const k=w.data?.migrations_run||0;tt({title:l("Migrations Completed!","kivicare-clinic-management-system"),text:k>0?Pi(l("%1$d migrations have been executed successfully.","kivicare-clinic-management-system"),k):l("No migrations were needed.","kivicare-clinic-management-system")}),e(_=>_.filter(j=>j.type!=="migration")),setTimeout(()=>{a()},1e3)},onError:w=>{console.error("Migration error:",w),Me({title:l("Migration Failed","kivicare-clinic-management-system"),text:w.response?.data?.message||w.message||l("Failed to run migrations. Please try again or contact support.","kivicare-clinic-management-system")})}})}})};return i.jsx(i.Fragment,{children:t.map((p,h)=>{if(p.type==="version")return i.jsx("div",{className:"desktop-warning px-5 my-1 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("h6",{className:"setting-title mb-0",children:p.message})})},"version");if(p.type==="smtp")return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("h6",{className:"setting-title mb-0",children:p.message}),i.jsx("a",{href:"https://kivicare.io/docs/email-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:l("Learn more about SMTP configuration","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:m,disabled:o,children:l("Send Test Email","kivicare-clinic-management-system")})})]},"smtp");if(p.type==="migration"){const g=p.details?.pending_count||0,v=p.details?.plugin_count||1;return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-database text-danger fs-5 me-1"}),i.jsxs("div",{children:[i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message}),g>0&&i.jsx("small",{className:"text-muted",children:v>1?Pi(l("%1$d pending migrations from %2$d plugins","kivicare-clinic-management-system"),g,v):Pi(l("%1$d pending migrations found","kivicare-clinic-management-system"),g)})]}),i.jsx("a",{href:"https://kivicare.io/docs/database-migrations/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:l("Learn more about database migrations","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>u(p),disabled:d,children:[i.jsx("i",{className:"ph ph-play me-1"}),d?l("Running...","kivicare-clinic-management-system"):l("Run Migrations","kivicare-clinic-management-system")]})})]},"migration")}return p.type==="error"?i.jsx("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-warning-circle text-danger fs-5 me-1"}),i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message})]})},"error"):null})})},qa=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${s}`},vk=(t,e)=>e?Array.isArray(e)?t.filter(n=>e.includes(n.value)||e.includes(String(n.value))):t.find(n=>n.value===e||n.value===String(e))||null:null,PR=t=>{if(!t)return"";const e=document.createElement("div");e.innerHTML=t;const n=["script","style","iframe","object","embed","form","input","button","link","meta"],s=["onload","onerror","onclick","onmouseover","onmouseout","onkeydown","onkeyup","onkeypress","javascript:"];return n.forEach(r=>{e.querySelectorAll(r).forEach(c=>c.remove())}),e.querySelectorAll("*").forEach(r=>{Array.from(r.attributes).forEach(o=>{s.some(c=>o.name.toLowerCase().includes(c)||o.value.toLowerCase().includes("javascript:"))&&r.removeAttribute(o.name)})}),e.innerHTML},MR=(t,e,n)=>{function s(o){return o.toString(16)}function a(o){return parseInt(o,16)}n=typeof n<"u"?n:50;let r="#";for(let o=0;o<=5;o+=2){const c=a(t.substr(o,2)),d=a(e.substr(o,2));let m=s(Math.floor(d+(c-d)*(n/100)));for(;m.length<2;)m="0"+m;r+=m}return r},Yv=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return MR("FFFFFF",n,e)},Qv=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return MR("000000",n,e)},VZ=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null},sC=(t,e=null)=>{let n=document.getElementById("kivicare-dashboard-colors-style");const s=(o,c=!1)=>{let d="";return Object.entries(o).forEach(([m,u])=>{const p=`--bs-${m}`,h=VZ(u),g=c?Qv(u,80):Yv(u,80),v=c?Qv(u,20):Yv(u,20),x=c?Qv(u,30):Yv(u,30);d+=`
                ${p}: ${u};
                ${p}-rgb: ${h};
                ${p}-bg-subtle: ${g};
                ${p}-border-subtle: ${g};
                --bs-link-color-rgb: ${h};
                ${p}-hover-bg: ${v};
                ${p}-hover-border: ${x};
                ${p}-active-bg: ${v};
                ${p}-active-border: ${x};`}),d};let a=`[data-bs-theme="light"],:root {
`+s(t,!1)+`
}
`;return e&&Object.keys(e).length>0&&(a+=`[data-bs-theme="dark"] {
`+s(e,!0)+`
}`),n||(n=document.createElement("style"),n.setAttribute("id","kivicare-dashboard-colors-style"),document.head.appendChild(n)),n.innerHTML=a,document.querySelectorAll("style.custom-color").forEach(o=>o.remove()),a},Kn=()=>({firstDayOfWeek:window.kc_frontend?.start_of_week?parseInt(window.kc_frontend.start_of_week,10):0,weekdays:{shorthand:[l("Sun","kivicare-clinic-management-system"),l("Mon","kivicare-clinic-management-system"),l("Tue","kivicare-clinic-management-system"),l("Wed","kivicare-clinic-management-system"),l("Thu","kivicare-clinic-management-system"),l("Fri","kivicare-clinic-management-system"),l("Sat","kivicare-clinic-management-system")],longhand:[l("Sunday","kivicare-clinic-management-system"),l("Monday","kivicare-clinic-management-system"),l("Tuesday","kivicare-clinic-management-system"),l("Wednesday","kivicare-clinic-management-system"),l("Thursday","kivicare-clinic-management-system"),l("Friday","kivicare-clinic-management-system"),l("Saturday","kivicare-clinic-management-system")]},months:{shorthand:[l("Jan","kivicare-clinic-management-system"),l("Feb","kivicare-clinic-management-system"),l("Mar","kivicare-clinic-management-system"),l("Apr","kivicare-clinic-management-system"),l("May","kivicare-clinic-management-system"),l("Jun","kivicare-clinic-management-system"),l("Jul","kivicare-clinic-management-system"),l("Aug","kivicare-clinic-management-system"),l("Sep","kivicare-clinic-management-system"),l("Oct","kivicare-clinic-management-system"),l("Nov","kivicare-clinic-management-system"),l("Dec","kivicare-clinic-management-system")],longhand:[l("January","kivicare-clinic-management-system"),l("February","kivicare-clinic-management-system"),l("March","kivicare-clinic-management-system"),l("April","kivicare-clinic-management-system"),l("May","kivicare-clinic-management-system"),l("June","kivicare-clinic-management-system"),l("July","kivicare-clinic-management-system"),l("August","kivicare-clinic-management-system"),l("September","kivicare-clinic-management-system"),l("October","kivicare-clinic-management-system"),l("November","kivicare-clinic-management-system"),l("December","kivicare-clinic-management-system")]}}),UZ=t=>{let e=document.documentElement.lang||"en-US";try{return new Intl.NumberFormat(e).format(t)}catch{return new Intl.NumberFormat("en-US").format(t)}},vi=t=>{if(!t)return"Y-m-d";const e={d:"d",D:"D",j:"j",l:"l",N:"N",S:"S",w:"w",z:"z",W:"W",F:"F",m:"m",M:"M",n:"n",t:"K",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"h",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",v:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"U"};let n="",s=!1;for(let a=0;a<t.length;a++){const r=t[a];s?(n+=r,s=!1):r==="\\"?(s=!0,n+="\\"):n+=e[r]!==void 0?e[r]:r}return n},WZ=t=>{if(!t)return"YYYY-MM-DD";const e={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"",w:"d",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};let n="",s=!1;for(let a=0;a<t.length;a++){const r=t[a];s?(n+=r,s=!1):r==="\\"?s=!0:n+=e[r]!==void 0?e[r]:r}return n},Xn=t=>{if(!t)return null;const[e,n,s]=t.split("-").map(Number);return new Date(e,n-1,s)};var Hh={exports:{}},KZ=Hh.exports,aC;function GZ(){return aC||(aC=1,(function(t,e){(function(n,s){t.exports=s()})(KZ,(function(){var n=1e3,s=6e4,a=36e5,r="millisecond",o="second",c="minute",d="hour",m="day",u="week",p="month",h="quarter",g="year",v="date",x="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var O=["th","st","nd","rd"],q=M%100;return"["+M+(O[(q-20)%10]||O[q]||O[0])+"]"}},k=function(M,O,q){var U=String(M);return!U||U.length>=O?M:""+Array(O+1-U.length).join(q)+M},_={s:k,z:function(M){var O=-M.utcOffset(),q=Math.abs(O),U=Math.floor(q/60),H=q%60;return(O<=0?"+":"-")+k(U,2,"0")+":"+k(H,2,"0")},m:function M(O,q){if(O.date()<q.date())return-M(q,O);var U=12*(q.year()-O.year())+(q.month()-O.month()),H=O.clone().add(U,p),ae=q-H<0,V=O.clone().add(U+(ae?-1:1),p);return+(-(U+(q-H)/(ae?H-V:V-H))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:p,y:g,w:u,d:m,D:v,h:d,m:c,s:o,ms:r,Q:h}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},j="en",T={};T[j]=w;var N="$isDayjsObject",E=function(M){return M instanceof P||!(!M||!M[N])},A=function M(O,q,U){var H;if(!O)return j;if(typeof O=="string"){var ae=O.toLowerCase();T[ae]&&(H=ae),q&&(T[ae]=q,H=ae);var V=O.split("-");if(!H&&V.length>1)return M(V[0])}else{var pe=O.name;T[pe]=O,H=pe}return!U&&H&&(j=H),H||!U&&j},L=function(M,O){if(E(M))return M.clone();var q=typeof O=="object"?O:{};return q.date=M,q.args=arguments,new P(q)},C=_;C.l=A,C.i=E,C.w=function(M,O){return L(M,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var P=(function(){function M(q){this.$L=A(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[N]=!0}var O=M.prototype;return O.parse=function(q){this.$d=(function(U){var H=U.date,ae=U.utc;if(H===null)return new Date(NaN);if(C.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var V=H.match(y);if(V){var pe=V[2]-1||0,oe=(V[7]||"0").substring(0,3);return ae?new Date(Date.UTC(V[1],pe,V[3]||1,V[4]||0,V[5]||0,V[6]||0,oe)):new Date(V[1],pe,V[3]||1,V[4]||0,V[5]||0,V[6]||0,oe)}}return new Date(H)})(q),this.init()},O.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},O.$utils=function(){return C},O.isValid=function(){return this.$d.toString()!==x},O.isSame=function(q,U){var H=L(q);return this.startOf(U)<=H&&H<=this.endOf(U)},O.isAfter=function(q,U){return L(q)<this.startOf(U)},O.isBefore=function(q,U){return this.endOf(U)<L(q)},O.$g=function(q,U,H){return C.u(q)?this[U]:this.set(H,q)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(q,U){var H=this,ae=!!C.u(U)||U,V=C.p(q),pe=function(ue,G){var le=C.w(H.$u?Date.UTC(H.$y,G,ue):new Date(H.$y,G,ue),H);return ae?le:le.endOf(m)},oe=function(ue,G){return C.w(H.toDate()[ue].apply(H.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(G)),H)},ne=this.$W,se=this.$M,W=this.$D,ge="set"+(this.$u?"UTC":"");switch(V){case g:return ae?pe(1,0):pe(31,11);case p:return ae?pe(1,se):pe(0,se+1);case u:var ee=this.$locale().weekStart||0,ie=(ne<ee?ne+7:ne)-ee;return pe(ae?W-ie:W+(6-ie),se);case m:case v:return oe(ge+"Hours",0);case d:return oe(ge+"Minutes",1);case c:return oe(ge+"Seconds",2);case o:return oe(ge+"Milliseconds",3);default:return this.clone()}},O.endOf=function(q){return this.startOf(q,!1)},O.$set=function(q,U){var H,ae=C.p(q),V="set"+(this.$u?"UTC":""),pe=(H={},H[m]=V+"Date",H[v]=V+"Date",H[p]=V+"Month",H[g]=V+"FullYear",H[d]=V+"Hours",H[c]=V+"Minutes",H[o]=V+"Seconds",H[r]=V+"Milliseconds",H)[ae],oe=ae===m?this.$D+(U-this.$W):U;if(ae===p||ae===g){var ne=this.clone().set(v,1);ne.$d[pe](oe),ne.init(),this.$d=ne.set(v,Math.min(this.$D,ne.daysInMonth())).$d}else pe&&this.$d[pe](oe);return this.init(),this},O.set=function(q,U){return this.clone().$set(q,U)},O.get=function(q){return this[C.p(q)]()},O.add=function(q,U){var H,ae=this;q=Number(q);var V=C.p(U),pe=function(se){var W=L(ae);return C.w(W.date(W.date()+Math.round(se*q)),ae)};if(V===p)return this.set(p,this.$M+q);if(V===g)return this.set(g,this.$y+q);if(V===m)return pe(1);if(V===u)return pe(7);var oe=(H={},H[c]=s,H[d]=a,H[o]=n,H)[V]||1,ne=this.$d.getTime()+q*oe;return C.w(ne,this)},O.subtract=function(q,U){return this.add(-1*q,U)},O.format=function(q){var U=this,H=this.$locale();if(!this.isValid())return H.invalidDate||x;var ae=q||"YYYY-MM-DDTHH:mm:ssZ",V=C.z(this),pe=this.$H,oe=this.$m,ne=this.$M,se=H.weekdays,W=H.months,ge=H.meridiem,ee=function(G,le,re,D){return G&&(G[le]||G(U,ae))||re[le].slice(0,D)},ie=function(G){return C.s(pe%12||12,G,"0")},ue=ge||function(G,le,re){var D=G<12?"AM":"PM";return re?D.toLowerCase():D};return ae.replace(b,(function(G,le){return le||(function(re){switch(re){case"YY":return String(U.$y).slice(-2);case"YYYY":return C.s(U.$y,4,"0");case"M":return ne+1;case"MM":return C.s(ne+1,2,"0");case"MMM":return ee(H.monthsShort,ne,W,3);case"MMMM":return ee(W,ne);case"D":return U.$D;case"DD":return C.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return ee(H.weekdaysMin,U.$W,se,2);case"ddd":return ee(H.weekdaysShort,U.$W,se,3);case"dddd":return se[U.$W];case"H":return String(pe);case"HH":return C.s(pe,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return ue(pe,oe,!0);case"A":return ue(pe,oe,!1);case"m":return String(oe);case"mm":return C.s(oe,2,"0");case"s":return String(U.$s);case"ss":return C.s(U.$s,2,"0");case"SSS":return C.s(U.$ms,3,"0");case"Z":return V}return null})(G)||V.replace(":","")}))},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(q,U,H){var ae,V=this,pe=C.p(U),oe=L(q),ne=(oe.utcOffset()-this.utcOffset())*s,se=this-oe,W=function(){return C.m(V,oe)};switch(pe){case g:ae=W()/12;break;case p:ae=W();break;case h:ae=W()/3;break;case u:ae=(se-ne)/6048e5;break;case m:ae=(se-ne)/864e5;break;case d:ae=se/a;break;case c:ae=se/s;break;case o:ae=se/n;break;default:ae=se}return H?ae:C.a(ae)},O.daysInMonth=function(){return this.endOf(p).$D},O.$locale=function(){return T[this.$L]},O.locale=function(q,U){if(!q)return this.$L;var H=this.clone(),ae=A(q,U,!0);return ae&&(H.$L=ae),H},O.clone=function(){return C.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},M})(),R=P.prototype;return L.prototype=R,[["$ms",r],["$s",o],["$m",c],["$H",d],["$W",m],["$M",p],["$y",g],["$D",v]].forEach((function(M){R[M[1]]=function(O){return this.$g(O,M[0],M[1])}})),L.extend=function(M,O){return M.$i||(M(O,P,L),M.$i=!0),L},L.locale=A,L.isDayjs=E,L.unix=function(M){return L(1e3*M)},L.en=T[j],L.Ls=T,L.p={},L}))})(Hh)),Hh.exports}var YZ=GZ();const An=wa(YZ),na=({show:t,onHide:e,queryParams:n,onApplyFilters:s,onResetFilters:a,title:r=l("Filters","kivicare-clinic-management-system"),fields:o=[],hasAppliedFilters:c=!1,width:d="400px"})=>{const[m,u]=f.useState({...n}),[p,h]=f.useState(!1),g=["clinicAddress","clinicName","clinic","id","specialization","status","date_from","date_to","patientName","doctorAddress","doctorName","receptionistAddress","receptionistName","serviceName","charges","category","patient","search","startDate","endDate","taxName","service","doctor","encounter_id","serviceName","patient_unique_id","webhook_id"];f.useEffect(()=>{const T=g.some(N=>{const E=m[N];return Array.isArray(E)?E.length>0:typeof E=="number"?E!==0:E!=null&&E!==""});h(T)},[m]);const[v,x]=f.useState({});f.useEffect(()=>{u({...n});const T={};o.forEach(N=>{if(N.type==="dateRange"||N.type==="inlineDateRange"){const E=n[N.startDateKey],A=n[N.endDateKey];E&&A?T[N.name]=[new Date(E),new Date(A)]:T[N.name]=[]}}),x(T)},[n]);const y=(T,N)=>{u(E=>{const A={...E,[T]:N};return o.forEach(L=>{L.dependencies&&Object.values(L.dependencies).includes(T)&&(A[L.name]=L.type==="multiSelect"||L.isMulti?[]:"")}),A})},b=(T,N)=>{y(T,N?N.value:"")},w=(T,N,E,A)=>{if(x(L=>({...L,[T]:A})),A.length===2){const L=qa(A[0]),C=qa(A[1]);u(P=>({...P,[N]:L,[E]:C}))}},k=(T,N)=>{y(T,N)},_=()=>{s(m)},j=T=>{const{type:N,name:E,label:A,placeholder:L,options:C=[],isLoading:P=!1,optionLoader:R,dependencies:M,...O}=T;switch(N){case"select":const q=C.find(I=>I.value===m[E])||null;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsx(lt,{value:q,onChange:I=>b(E,I),options:C,menuShouldScrollIntoView:!1,maxMenuHeight:220,menuPosition:"fixed",isLoading:P,noOptionsMessage:()=>l("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:L||A,className:"react-select-box",classNamePrefix:"react-select",isDisabled:P,styles:{menuPortal:I=>({...I,zIndex:1050}),menu:I=>({...I,zIndex:1050})},...O})]},E);case"paginatedSelect":const U=T.storeObject?m[E]:T.value||C.find(I=>I.value===m[E])||null,H=T.dependencies?Object.keys(T.dependencies).reduce((I,ce)=>{const Z=m[T.dependencies[ce]];return I[ce]=Z&&typeof Z=="object"&&"value"in Z?Z.value:Z,I},{}):{},ae=T.key||`${E}-${JSON.stringify(H)}`;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsx(Xt,{value:U,id:`filter-${E}`,placeholder:L||A,className:"react-select-box",classNamePrefix:"react-select",loadOptions:R,dependencies:H,isDisabled:T.isDisabled,onChange:I=>{T.storeObject?y(E,I):y(E,I?I.value:""),T.onChange&&typeof T.onChange=="function"&&T.onChange(I)},isClearable:!0,menuShouldScrollIntoView:!1,styles:{menuPortal:I=>({...I,zIndex:1050}),menu:I=>({...I,zIndex:1050})}},ae)]},E);case"dateRange":const{startDateKey:V,endDateKey:pe}=T,oe=v[E]&&v[E].length>0;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsxs("div",{className:"input-group",children:[i.jsx(Wn,{value:(v[E]||[]).map(I=>typeof I=="string"?Xn(I):I),onChange:I=>{I.length===2?w(E,V,pe,I):I.length===0&&(x(ce=>({...ce,[E]:[]})),u(ce=>({...ce,[V]:"",[pe]:""})))},options:{mode:"range",dateFormat:vi(window.kc_frontend.date_format),locale:Kn(),...O.flatpickrOptions},className:"form-control",placeholder:L||l("Select date range","kivicare-clinic-management-system")}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})}),oe&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{x(I=>({...I,[E]:[]})),u(I=>({...I,[V]:"",[pe]:""}))},title:l("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},E);case"inlineDateRange":const{startDateKey:ne,endDateKey:se}=T,W=v[E]||[],ge=WZ(window.kc_frontend.date_format),ee=W[0]?An(W[0]).format(ge):"-",ie=W[1]?An(W[1]).format(ge):"-",ue=[{id:"today",label:l("Today","kivicare-clinic-management-system"),getRange:()=>[An(),An()]},{id:"last_30_days",label:l("Last 30 Days","kivicare-clinic-management-system"),getRange:()=>[An().subtract(30,"day"),An()]},{id:"this_month",label:l("This Month","kivicare-clinic-management-system"),getRange:()=>[An().startOf("month"),An().endOf("month")]},{id:"last_month",label:l("Last Month","kivicare-clinic-management-system"),getRange:()=>[An().subtract(1,"month").startOf("month"),An().subtract(1,"month").endOf("month")]},{id:"last_90_days",label:l("Last 90 Days","kivicare-clinic-management-system"),getRange:()=>[An().subtract(90,"day"),An()]},{id:"last_6_months",label:l("Last 6 Months","kivicare-clinic-management-system"),getRange:()=>[An().subtract(6,"month"),An()]},{id:"last_1_year",label:l("Last 1 Year","kivicare-clinic-management-system"),getRange:()=>[An().subtract(1,"year"),An()]}],G=(I,ce)=>{I.preventDefault();const Z=[ce[0].toDate(),ce[1].toDate()];w(E,ne,se,Z)},le=I=>W.length!==2?!1:An(W[0]).isSame(I[0],"day")&&An(W[1]).isSame(I[1],"day");return i.jsxs("div",{className:"col-12 from-group inline-flatpickr-wrapper",children:[i.jsx(Pt.Label,{children:A}),i.jsx("div",{className:"bg-body ranges rounded overflow-hidden border",children:i.jsxs("div",{className:"row p-0 m-0",children:[i.jsx("div",{className:"col-lg-4 p-0 border-end border-bottom-lg-0",children:i.jsx("ul",{className:"list-unstyled m-0 range-list",children:ue.map(I=>{const ce=I.getRange(),Z=le(ce);return i.jsx("li",{className:`range-list-item ${Z?"active":""}`,children:i.jsx("a",{href:"#",onClick:K=>G(K,ce),children:I.label})},I.id)})})}),i.jsxs("div",{className:"calender-list-box col-lg-8 p-0",children:[i.jsx("div",{className:"calender-header rounded-top-end bg-primary p-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"btn bg-white text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:ee}),i.jsx("div",{className:"btn text-white pe-none btn-sm fw-bold",children:ob("To","kivicare-clinic-management-system","kivicare-clinic-management-system")}),i.jsx("div",{className:"btn bg-white text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:ie})]})}),i.jsx("div",{className:"calander-body",children:i.jsx("div",{className:"form-group mb-0",children:i.jsx(Wn,{value:W.map(I=>typeof I=="string"?Xn(I):I),onChange:I=>{I.length===2?w(E,ne,se,I):I.length===0&&(x(ce=>({...ce,[E]:[]})),u(ce=>({...ce,[ne]:"",[se]:""})))},options:{mode:"range",inline:!0,dateFormat:vi(window.kc_frontend.date_format),locale:Kn(),...O.flatpickrOptions,static:!0,showMonths:1},className:"d-none"})})})]})]})})]},E);case"date":const re=m[E];return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsxs("div",{className:"position-relative",children:[i.jsx(Wn,{value:m[E]?Xn(m[E]):"",onChange:I=>{if(I.length>0){const ce=qa(I[0]);y(E,ce)}else y(E,"")},options:{dateFormat:vi(window.kc_frontend.date_format),locale:Kn(),...O.flatpickrOptions},className:"form-control",placeholder:L||l("Select date","kivicare-clinic-management-system")}),re&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>y(E,""),title:l("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},E);case"text":case"search":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsx(Pt.Control,{type:"text",value:m[E]||"",onChange:I=>k(E,I.target.value),placeholder:L||A,...O})]},E);case"number":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsx(Pt.Control,{type:"number",value:m[E]||"",onChange:I=>k(E,I.target.value),placeholder:L||A,...O})]},E);case"multiSelect":const D=C.filter(I=>Array.isArray(m[E])?m[E].includes(I.value):!1);return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Pt.Label,{children:A}),i.jsx(lt,{value:D,onChange:I=>{const ce=I?I.map(Z=>Z.value):[];y(E,ce)},className:"react-select-box",classNamePrefix:"react-select",options:C,isMulti:!0,isLoading:P,noOptionsMessage:()=>l("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:L||A,isDisabled:P,menuShouldScrollIntoView:!1,styles:{menuPortal:I=>({...I,zIndex:1050}),menu:I=>({...I,zIndex:1050})},...O})]},E);default:return null}};return i.jsxs(Mu,{show:t,onHide:e,placement:"end",backdrop:!0,className:"on-rtl end",style:{width:d},children:[i.jsx(Mu.Header,{closeButton:!0,className:"border-bottom",children:i.jsx(Mu.Title,{as:"h6",className:"mb-0",children:r})}),i.jsx(Mu.Body,{children:i.jsx(Pt,{children:i.jsx("div",{className:"row gy-4",children:o.map(T=>j(T))})})}),i.jsx("div",{className:"offcanvas-footer p-3 border-top",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Zt,{variant:"secondary",onClick:()=>{a(),e()},disabled:!c,children:l("Reset","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:_,disabled:!p,children:l("Apply","kivicare-clinic-management-system")})]})})]})};na.propTypes={show:Pe.bool.isRequired,onHide:Pe.func.isRequired,queryParams:Pe.object.isRequired,onApplyFilters:Pe.func.isRequired,onResetFilters:Pe.func.isRequired,title:Pe.string,fields:Pe.arrayOf(Pe.shape({type:Pe.oneOf(["select","multiSelect","dateRange","inlineDateRange","date","text","search","number"]).isRequired,name:Pe.string.isRequired,label:Pe.string.isRequired,placeholder:Pe.string,options:Pe.array,isLoading:Pe.bool,startDateKey:Pe.string,endDateKey:Pe.string,flatpickrOptions:Pe.object})).isRequired,hasAppliedFilters:Pe.bool,width:Pe.string};const Xo=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${a}`},rC=t=>{if(!t)return"";const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),s=e.toLocaleString("default",{month:"short"}),a=e.getFullYear();return`${n} ${s} ${a}`},lC=()=>{const t=Ke(),e=f.useRef(null),[n,s]=f.useState([]),[a,r]=f.useState(null),[o,c]=f.useState(!1),[d,m]=f.useState({start:new Date(new Date().setDate(1)),end:new Date(new Date().getDate()+30)}),[u,p]=f.useState(!1),[h,g]=f.useState(null),{hasCapability:v,userRole:x,user:y,module_config:b}=mt(),w=uI(x||"patient"),k=hI(),_=pI(),j=gI(),T=fI(),N=Xi()||Jn()||Fi(),E=Xi(),A=Fi(),L=Jn(),C=Vn(),[P,R]=f.useState(!1),[M,O]=f.useState([]),[q,U]=f.useState([]),[H,ae]=f.useState([]),[V,pe]=f.useState({clinic:"",patient:E&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),oe=f.useMemo(()=>!a||a.length!==2?{}:{start_date:Xo(a[0]),end_date:Xo(a[1])},[a]),{data:ne,isLoading:se}=e$({limit:3,...oe},{enabled:k}),W=We.useMemo(()=>ne?.data?ne.data.map(De=>({id:De.id,name:De.name||De.doctor_name,clinic:De.clinic||"",appointments:De.appointments||`${De.appointment_count}+`,image:De.image||De.doctor_image_url||null,speciality:De.speciality||""})):[],[ne]),{isAddonActive:ge,defaultClinicId:ee}=mt(),ie=ge("kiviPro"),ue=f.useMemo(()=>[{title:l("Total Appointments","kivicare-clinic-management-system"),component:"appointment",iconKey:"appointment",color:"primary",key:"total_appointments",roles:$7(),capability:"dashboard_total_appointment",linkTo:"/appointments"},{title:l("Total Patients","kivicare-clinic-management-system"),component:"patient",iconKey:"patient",color:"success",key:"total_patients",roles:B7(),capability:"dashboard_total_patient",linkTo:"/patient"},...ie?[{title:l("Total Clinics","kivicare-clinic-management-system"),component:"clinic",iconKey:"clinic",color:"info",key:"total_clinics",roles:q7(),capability:"dashboard_total_clinic",linkTo:"/clinic"}]:[],{title:l("Total Doctors","kivicare-clinic-management-system"),component:"doctor",iconKey:"doctor",color:"warning",key:"total_doctors",roles:H7(),capability:"dashboard_total_doctor",linkTo:"/doctor"},{title:l("Active Services","kivicare-clinic-management-system"),component:"service",iconKey:"service",color:"secondary",key:"active_services",roles:z7(),capability:"dashboard_total_service",linkTo:"/service"},...(b.billing??"1")==="1"?[{title:l("Total Revenue","kivicare-clinic-management-system"),component:"revenue",iconKey:"revenue",color:"success",key:"total_revenue",roles:V7(),capability:"dashboard_total_revenue"}]:[],{title:l("Today's Appointments","kivicare-clinic-management-system"),component:"today-appointment",iconKey:"appointment",color:"primary",key:"today_appointments",roles:U7(),capability:"dashboard_total_today_appointment",linkTo:"/appointments"}],[]),G=f.useMemo(()=>vI(ue,w),[ue,w]),le=f.useMemo(()=>{const De=G.length;if(De===0)return"";let xe="insights-container dashboard-insights-container stash-cards";return xe+=` grid-count-${De}`,xe},[G.length]),{data:re,isLoading:D}=X6({params:oe,queryKey:["upcomingAppointments",oe?.start_date,oe?.end_date],enabled:T}),I=re?.data||[],ce=De=>i.jsx(ht,{to:`/appointments/view/${De.id}`,className:"kc-link-wrapper",children:i.jsxs("div",{className:"bg-body p-3 rounded-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-2",children:[i.jsx(on,{profileUrl:De.patient_image_url||null,name:De.patientName,linkTo:`/patient/edit/${De.patientId}`,variant:"primary",size:"md",className:"flex-grow-1",fallbackText:"PT"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 text-nowrap",children:[i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:De.appointmentStartDateFormated}),i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:De.appointmentStartTimeFormated})]})]}),i.jsx("div",{className:"mb-2",children:i.jsx("span",{className:"font-size-14",children:De.clinicName})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("div",{className:"font-siz-14",children:[De.serviceListName," ",l("By ","kivicare-clinic-management-system"),i.jsx("span",{className:"font-size-14 heading-color fw-semibold",children:i.jsx(ht,{to:`/doctor/edit/${De.doctorId}`,className:"heading-color fw-semibold",children:De.doctorName})})]}),De.video_consultation&&i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-video text-success align-middle"}),i.jsx("span",{className:"font-size-12 heading-color fw-semibold",children:l("Telemed","kivicare-clinic-management-system")})]})]})]})}),Z=De=>i.jsx(ht,{to:`/doctor/edit/${De.id}`,className:"kc-link-wrapper",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between flex-wrap",children:[i.jsx(on,{profileUrl:De.image,name:De.name,clinicName:De.clinic,variant:"primary",size:"md",className:"flex-grow-1"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-size-14 fw-bold text-secondary",children:De.appointments}),i.jsxs("span",{className:"font-size-14 fw-medium",children:[" ",l("Appointments","kivicare-clinic-management-system")]})]})]})})}),{data:K,isLoading:B}=n$({start_date:d.start.toISOString().split("T")[0],end_date:d.end.toISOString().split("T")[0],doctor:V.doctor?.value||V.doctor||(A?y?.id:void 0),patient:V.patient?.value||V.patient||(E?y?.id:void 0),clinic:V.clinic?.value||V.clinic||y?.clinic_id||void 0,status:V.status?.value||V.status||void 0},{enabled:N}),F=K?.data?.appointments||[],J=f.useCallback(De=>{const xe=De.event.extendedProps;g(xe),p(!0)},[]),Q=De=>{const xe=!!De.event.extendedProps.zoom_data?.startUrl;return i.jsxs("div",{className:"d-flex align-items-center gap-1 overflow-hidden",children:[xe&&i.jsx("i",{className:"ph ph-video"}),i.jsx("span",{className:"text-truncate",children:De.event.title})]})},me=f.useCallback(De=>{const xe=De.view.activeStart,ke=De.view.activeEnd;m({start:xe,end:ke})},[]),te=De=>{switch(String(De)){case"0":return l("Cancelled","kivicare-clinic-management-system");case"1":return l("Booked","kivicare-clinic-management-system");case"2":return l("Pending","kivicare-clinic-management-system");case"3":return l("Completed","kivicare-clinic-management-system");case"4":return l("Check-In","kivicare-clinic-management-system");default:return l("Unknown","kivicare-clinic-management-system")}},Y=De=>{switch(String(De)){case"0":return"bg-danger";case"1":return"bg-success";case"2":return"bg-warning";case"3":return"bg-success";case"4":return"bg-primary";default:return"bg-secondary"}},Ce=f.useMemo(()=>({mode:"range",dateFormat:"d M Y",clickOpens:!0,allowInput:!0,disableMobile:!0,locale:Kn()}),[]),ye=async({page:De,per_page:xe,search:ke})=>{try{const Oe={dataType:"staticData",staticDataType:"clinics",page:De,per_page:xe,search:ke},Qe=await t.fetchQuery({queryKey:ut.list(Oe),queryFn:()=>Et.getStaticData(Oe),staleTime:300*1e3}),ct=Qe.data.map(Tt=>({value:Tt.id,label:Tt.label||Tt.name}));return O(Tt=>[...Tt,...ct]),Qe}catch(Oe){return console.error("Error loading clinics:",Oe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Te=async({page:De,per_page:xe,search:ke,clinic_ids:Oe})=>{try{let Qe=Oe;(L||C)&&ee&&(Qe=ee);const ct={dataType:"staticData",staticDataType:"users",role:dl(),clinic_ids:Qe,page:De,per_page:xe,search:ke},Tt=await t.fetchQuery({queryKey:ut.list(ct),queryFn:()=>Et.getStaticData(ct),staleTime:300*1e3}),Ut=Tt.data.map(yt=>({value:yt.id,label:yt.label||yt.name}));return U(yt=>[...yt,...Ut]),Tt}catch(Qe){return console.error("Error loading patients:",Qe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},et=async({page:De,per_page:xe,search:ke,clinic_ids:Oe})=>{try{let Qe=Oe;(L||C)&&ee&&(Qe=ee);const ct={dataType:"staticData",staticDataType:"doctors",clinic_ids:Qe,page:De,per_page:xe,search:ke},Tt=await t.fetchQuery({queryKey:ut.list(ct),queryFn:()=>Et.getStaticData(ct),staleTime:300*1e3}),Ut=Tt.data.map(yt=>({value:yt.id,label:yt.label||yt.name}));return ae(yt=>[...yt,...Ut]),Tt}catch(Qe){return console.error("Error loading doctors:",Qe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},kt=[...ie&&!L&&!C?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:ye,options:M,storeObject:!0}]:[],...E?[]:[{type:"paginatedSelect",name:"patient",label:l("Patient","kivicare-clinic-management-system"),placeholder:l("Select Patient","kivicare-clinic-management-system"),optionLoader:Te,options:q,dependencies:L||C?{}:{clinic_ids:"clinic"},storeObject:!0}],...A?[]:[{type:"paginatedSelect",name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),placeholder:l("Select Doctor","kivicare-clinic-management-system"),optionLoader:et,options:H,dependencies:L||C?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:l("Select Status","kivicare-clinic-management-system"),placeholder:l("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:l("Cancelled","kivicare-clinic-management-system")},{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"4",label:l("Check-In","kivicare-clinic-management-system")},{value:"3",label:l("Check-Out","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],At=f.useMemo(()=>["clinic","patient","doctor","status"].some(xe=>{const ke=V[xe];return typeof ke=="object"&&ke!==null?ke.value!==void 0&&ke.value!=="":ke!=null&&ke!==""}),[V]),qt=De=>{pe(xe=>({...xe,...De})),R(!1)},Ie=()=>{pe({clinic:"",patient:E&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),R(!1)};return i.jsxs(i.Fragment,{children:[Er()&&i.jsx(zZ,{}),i.jsx(Si,{}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("h5",{className:"mb-0",children:l("Insights","kivicare-clinic-management-system")}),a&&i.jsx("div",{className:"d-flex align-items-center",children:i.jsxs("span",{className:"badge bg-body text-secondary",children:[rC(a[0])," -"," ",rC(a[1]),i.jsx("button",{className:"btn btn-link btn-sm p-0 ms-2 text-danger",onClick:()=>{r(null),s([]),e.current&&e.current.flatpickr&&e.current.flatpickr.clear()},"aria-label":l("Clear filter","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})})]}),i.jsx("form",{className:"d-flex align-items-center gap-2 flex-end flex-wrap",onSubmit:De=>{De.preventDefault(),n&&n.length===2&&(c(!0),r(n),console.log("Invalidating patient age distribution query with new date range",n),t.invalidateQueries({queryKey:["dashboard","bookingStatus"]}),setTimeout(()=>c(!1),500))},children:!E&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"form-group my-0 flex-grow-1",children:i.jsx(Wn,{ref:e,options:{...Ce,dateFormat:vi(window.kc_frontend.date_format)},className:"form-control dashboard-date-range",onChange:De=>s(De),placeholder:l("Select Date Range","kivicare-clinic-management-system")})}),i.jsxs("button",{type:"submit",className:"btn btn-secondary",disabled:o,children:[o?i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):null,l("Apply Filter","kivicare-clinic-management-system")]})]})})]}),G.length>0&&i.jsx("div",{className:`${le}`,children:G.map((De,xe)=>i.jsx(f$,{component:De.component,title:De.title,iconKey:De.iconKey,color:De.color||"primary",useHook:!0,dateFilter:oe,isFiltering:o,isCurrency:De.component==="revenue"||De.key==="total_revenue",capability:De.capability,linkTo:De.linkTo,iconPosition:A||L?"right":"top",onDataLoaded:(ke,Oe)=>{}},`stats-card-${De.key}`))}),w!=="kivicare_patient"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-0 gx-4",children:[T&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:l("Upcoming Appointments","kivicare-clinic-management-system"),items:I,renderItem:ce,viewAllLink:"appointments",loading:D||o,emptyMessage:l("No upcoming appointments","kivicare-clinic-management-system"),dateFilter:a?`${Xo(a[0])} to ${Xo(a[1])}`:null})}),k&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:l("Top Doctors","kivicare-clinic-management-system"),items:W,renderItem:Z,viewAllLink:"doctors",loading:se||o,emptyMessage:l("No doctor data available","kivicare-clinic-management-system"),dateFilter:a?`${Xo(a[0])} to ${Xo(a[1])}`:null})}),_&&i.jsx("div",{className:"col-xl-4 col-lg-12",children:i.jsx(uq,{clinicId:y?.clinic_id,dateRange:a})})]}),j&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx("h6",{className:"mb-0",children:l("Payment History","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/billings",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")})]}),i.jsx(ZV,{limit:3})]})})]}),N&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("Appointment Calendar","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>R(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})})]}),i.jsx($Z,{events:F,loading:B,onEventClick:J,onViewChange:me,eventContent:Q})]}),i.jsx(na,{show:P,onHide:()=>R(!1),queryParams:V,onApplyFilters:qt,onResetFilters:Ie,title:l("Calendar Filters","kivicare-clinic-management-system"),fields:kt,hasAppliedFilters:At}),i.jsxs(rt,{show:u,onHide:()=>p(!1),centered:!0,size:"lg",children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:l("Appointment Details","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>p(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:h?i.jsxs("div",{className:"appointment-details",children:[i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Patient","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.patientName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Doctor","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.doctorName})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Date","kivicare-clinic-management-system")}),i.jsx("p",{children:h.appointmentStartDate})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Time","kivicare-clinic-management-system")}),i.jsx("p",{children:`${h.appointmentStartTime||""} - ${h.appointmentEndTime||""}`})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Clinic","kivicare-clinic-management-system")}),i.jsx("p",{children:h.clinicName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Status","kivicare-clinic-management-system")}),i.jsx("p",{children:i.jsx("span",{className:`badge text-white ${h.color?"":Y(h.status)}`,style:h.color?{backgroundColor:h.color,color:"var(--bs-white)"}:{},children:h.status_text||te(h.status)})})]})]}),h.services&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Services","kivicare-clinic-management-system")}),i.jsx("p",{children:h.services})]})}),h.description&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Description","kivicare-clinic-management-system")}),i.jsx("p",{children:h.description})]})})]}):i.jsx("div",{className:"text-center",children:i.jsx("p",{children:l("Loading appointment details...","kivicare-clinic-management-system")})})}),i.jsxs(rt.Footer,{className:"gap-3",children:[w!=="kivicare_patient"&&h&&(String(h.status)==="1"||String(h.status)==="2")&&i.jsxs(ht,{to:`/appointments/edit/${h.id}`,className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-pencil-simple me-1"}),l("Edit Appointment","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:l("Close","kivicare-clinic-management-system")})]})]})]})]})},QZ=[Ye({path:"/dashboard",component:lC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}}),Ye({path:"/",component:lC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}})],ZZ=()=>i.jsx("div",{className:"appointments-container",children:i.jsx(xs,{})}),xk=()=>i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"80px",height:"1rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("div",{className:"d-flex align-items-center gap-1",children:i.jsx(S,{width:"60px",height:"1rem"})})]}),i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"})]})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx(S,{width:"100px",height:"1.25rem"}),i.jsx(S,{width:"120px",height:"1.5rem"})]})]}),wy=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["50px","100px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(Nl,{titleWidth:"180px"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-lg-8",children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(P2,{count:6})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"form-group",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px",height:"32px"})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"80px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"position-sticky top-0",children:i.jsx(pt,{children:i.jsx(xk,{})})})})]})]}),IR=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["50px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsx(Nl,{titleWidth:"160px",buttonWidth:"140px"}),i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"40px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsx(Zd,{count:4,colClass:"col-xl-3 col-lg-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"140px"})})}),i.jsx(Zd,{count:3,colClass:"col-lg-4",children:t=>i.jsxs(i.Fragment,{children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"mt-2",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx(S,{width:"120px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"custom-form-container bg-body p-3 rounded",children:i.jsx(Zd,{count:4,colClass:"col-md-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"80px"})})})]})]})]}),i.jsx("div",{className:"col-xl-4",children:i.jsx(xk,{})})]})})})}),Bi={getAppointments:(t={})=>ve({endpoint:"appointments",method:"GET",data:t}),getAppointment:t=>ve({endpoint:`appointments/${t}`,method:"GET"}),createAppointment:t=>ve({endpoint:"appointments",method:"POST",data:t}),updateAppointment:(t,e)=>ve({endpoint:`appointments/${t}`,method:"PUT",data:e}),updateAppointmentStatus:(t,e)=>ve({endpoint:`appointments/${t}/status`,method:"PUT",data:{status:e}}),regenerateVideoConferenceLink:t=>ve({endpoint:`appointments/${t}/regenerate-video-conference`,method:"GET"}),deleteAppointment:t=>ve({endpoint:`appointments/${t}`,method:"DELETE"}),getAppointmentDetails:t=>ve({endpoint:`appointments/${t}/view`,method:"GET"}),getAppointmentInvoiceHTML:t=>ve({endpoint:`appointments/${t}/invoice-html`,method:"GET"}),printInvoice:t=>ve({endpoint:`appointments/${t}/print-invoice`,method:"GET",responseType:"blob"}),getAvailableSlots:(t={})=>ve({endpoint:"appointments/slots",method:"GET",data:t}),getAppointmentSummary:(t={})=>ve({endpoint:"appointments/summary",method:"GET",data:t}),onPaymentSuccess:t=>{const{method:e,...n}=t;return ve({endpoint:"appointments/payment-success",method:e||"GET",data:n})},verifyPayment:t=>ve({endpoint:"appointments/payment-verify",method:"POST",data:t}),exportAppointments:(t={})=>ve({endpoint:"appointments/export",method:"GET",data:t}),bulkDeleteAppointments:t=>ve({endpoint:"appointments/bulk/delete",method:"POST",data:{ids:t}})},jn={all:["appointments"],lists:()=>[...jn.all,"list"],list:t=>[...jn.lists(),{filters:t}],details:()=>[...jn.all,"detail"],detail:t=>[...jn.details(),t],slots:()=>[...jn.all,"slots"],availableSlots:t=>[...jn.slots(),t],summaries:()=>[...jn.all,"summary"],summary:t=>[...jn.summaries(),t]},XZ=(t={},e={})=>gt({queryKey:jn.list(t),queryFn:()=>Bi.getAppointments(t),...e}),JZ=(t,e={})=>gt({queryKey:jn.detail(t),queryFn:()=>Bi.getAppointment(t),enabled:!!t,...e}),eX=(t,e={})=>{const n=Jn(),s=Vn(),a=Fi();let r=!1;return t?.date&&(a?r=!0:r=!!t?.doctor_id),gt({queryKey:jn.availableSlots(t),queryFn:()=>Bi.getAvailableSlots(t),enabled:r,...e})},tX=()=>{const t=Ke();return He({mutationFn:e=>Bi.createAppointment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:jn.lists()}),t.invalidateQueries({queryKey:jn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:jn.availableSlots({doctor_id:n.doctor_id})})}})},nX=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Bi.updateAppointment(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:jn.detail(n.id)}),t.invalidateQueries({queryKey:jn.lists()}),t.invalidateQueries({queryKey:jn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:jn.availableSlots({doctor_id:n.doctor_id})})}})},iX=()=>{const t=Ke();return He({mutationFn:({id:e,status:n})=>Bi.updateAppointmentStatus(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:jn.detail(n.id)}),t.invalidateQueries({queryKey:jn.lists()})}})},sX=()=>{const t=Ke();return He({mutationFn:e=>Bi.regenerateVideoConferenceLink(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:jn.detail(n.id)}),t.invalidateQueries({queryKey:jn.lists()})}})},aX=()=>{const t=Ke();return He({mutationFn:e=>Bi.deleteAppointment(e),onSuccess:()=>{t.invalidateQueries({queryKey:jn.lists()})}})},rX=(t,e={})=>gt({queryKey:jn.detail(t),queryFn:()=>Bi.getAppointmentDetails(t),enabled:!!t,...e}),lX=(t,e={})=>gt({queryKey:jn.summary(t),queryFn:()=>Bi.getAppointmentSummary(t),...e}),OR=()=>He({mutationFn:t=>Bi.printInvoice(t)}),LR=()=>He({mutationFn:t=>Bi.onPaymentSuccess(t)}),ppe=()=>{const t=Ke();return He({mutationFn:e=>Bi.verifyPayment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:jn.lists()}),n.appointment_id&&t.invalidateQueries({queryKey:jn.detail(n.appointment_id)})}})},oX=()=>He({mutationFn:t=>Bi.exportAppointments(t)}),cX=()=>{const t=Ke();return He({mutationFn:e=>Bi.bulkDeleteAppointments(e),onSuccess:()=>{t.invalidateQueries({queryKey:jn.lists()})}})};function FR(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=FR(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function io(){for(var t,e,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=FR(t))&&(s&&(s+=" "),s+=e);return s}function dX(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}dX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ru=t=>typeof t=="number"&&!isNaN(t),go=t=>typeof t=="string",Pr=t=>typeof t=="function",mX=t=>go(t)||ru(t),ky=t=>go(t)||Pr(t)?t:null,uX=(t,e)=>t===!1||ru(t)&&t>0?t:e,jy=t=>f.isValidElement(t)||go(t)||Pr(t)||ru(t);function hX(t,e,n=300){let{scrollHeight:s,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,n)})})}function pX({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:r,position:o,preventExitTransition:c,done:d,nodeRef:m,isIn:u,playToast:p}){let h=n?`${t}--${o}`:t,g=n?`${e}--${o}`:e,v=f.useRef(0);return f.useLayoutEffect(()=>{let x=m.current,y=h.split(" "),b=w=>{w.target===m.current&&(p(),x.removeEventListener("animationend",b),x.removeEventListener("animationcancel",b),v.current===0&&w.type!=="animationcancel"&&x.classList.remove(...y))};x.classList.add(...y),x.addEventListener("animationend",b),x.addEventListener("animationcancel",b)},[]),f.useEffect(()=>{let x=m.current,y=()=>{x.removeEventListener("animationend",y),s?hX(x,d,a):d()};u||(c?y():(v.current=1,x.className+=` ${g}`,x.addEventListener("animationend",y)))},[u]),We.createElement(We.Fragment,null,r)}}function oC(t,e){return{content:$R(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function $R(t,e,n=!1){return f.isValidElement(t)&&!go(t.type)?f.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Pr(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function gX({closeToast:t,theme:e,ariaLabel:n="close"}){return We.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},We.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},We.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function fX({delay:t,isRunning:e,closeToast:n,type:s="default",hide:a,className:r,controlledProgress:o,progress:c,rtl:d,isIn:m,theme:u}){let p=a||o&&c===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(h.transform=`scaleX(${c})`);let g=io("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),v=Pr(r)?r({rtl:d,type:s,defaultClassName:g}):io(g,r),x={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{m&&n()}};return We.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},We.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),We.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:v,style:h,...x}))}var vX=1,BR=()=>`${vX++}`;function xX(t,e,n){let s=1,a=0,r=[],o=[],c=e,d=new Map,m=new Set,u=w=>(m.add(w),()=>m.delete(w)),p=()=>{o=Array.from(d.values()),m.forEach(w=>w())},h=({containerId:w,toastId:k,updateId:_})=>{let j=w?w!==t:t!==1,T=d.has(k)&&_==null;return j||T},g=(w,k)=>{d.forEach(_=>{var j;(k==null||k===_.props.toastId)&&((j=_.toggle)==null||j.call(_,w))})},v=w=>{var k,_;(_=(k=w.props)==null?void 0:k.onClose)==null||_.call(k,w.removalReason),w.isActive=!1},x=w=>{if(w==null)d.forEach(v);else{let k=d.get(w);k&&v(k)}p()},y=()=>{a-=r.length,r=[]},b=w=>{var k,_;let{toastId:j,updateId:T}=w.props,N=T==null;w.staleId&&d.delete(w.staleId),w.isActive=!0,d.set(j,w),p(),n(oC(w,N?"added":"updated")),N&&((_=(k=w.props).onOpen)==null||_.call(k))};return{id:t,props:c,observe:u,toggle:g,removeToast:x,toasts:d,clearQueue:y,buildToast:(w,k)=>{if(h(k))return;let{toastId:_,updateId:j,data:T,staleId:N,delay:E}=k,A=j==null;A&&a++;let L={...c,style:c.toastStyle,key:s++,...Object.fromEntries(Object.entries(k).filter(([P,R])=>R!=null)),toastId:_,updateId:j,data:T,isIn:!1,className:ky(k.className||c.toastClassName),progressClassName:ky(k.progressClassName||c.progressClassName),autoClose:k.isLoading?!1:uX(k.autoClose,c.autoClose),closeToast(P){d.get(_).removalReason=P,x(_)},deleteToast(){let P=d.get(_);if(P!=null){if(n(oC(P,"removed")),d.delete(_),a--,a<0&&(a=0),r.length>0){b(r.shift());return}p()}}};L.closeButton=c.closeButton,k.closeButton===!1||jy(k.closeButton)?L.closeButton=k.closeButton:k.closeButton===!0&&(L.closeButton=jy(c.closeButton)?c.closeButton:!0);let C={content:w,props:L,staleId:N};c.limit&&c.limit>0&&a>c.limit&&A?r.push(C):ru(E)?setTimeout(()=>{b(C)},E):b(C)},setProps(w){c=w},setToggle:(w,k)=>{let _=d.get(w);_&&(_.toggle=k)},isToastActive:w=>{var k;return(k=d.get(w))==null?void 0:k.isActive},getSnapshot:()=>o}}var Ki=new Map,Em=[],Ny=new Set,yX=t=>Ny.forEach(e=>e(t)),qR=()=>Ki.size>0;function bX(){Em.forEach(t=>zR(t.content,t.options)),Em=[]}var wX=(t,{containerId:e})=>{var n;return(n=Ki.get(e||1))==null?void 0:n.toasts.get(t)};function HR(t,e){var n;if(e)return!!((n=Ki.get(e))!=null&&n.isToastActive(t));let s=!1;return Ki.forEach(a=>{a.isToastActive(t)&&(s=!0)}),s}function kX(t){if(!qR()){Em=Em.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||mX(t))Ki.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Ki.get(t.containerId);e?e.removeToast(t.id):Ki.forEach(n=>{n.removeToast(t.id)})}}var jX=(t={})=>{Ki.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function zR(t,e){jy(t)&&(qR()||Em.push({content:t,options:e}),Ki.forEach(n=>{n.buildToast(t,e)}))}function NX(t){var e;(e=Ki.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function VR(t,e){Ki.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function CX(t){let e=t.containerId||1;return{subscribe(n){let s=xX(e,t,yX);Ki.set(e,s);let a=s.observe(n);return bX(),()=>{a(),Ki.delete(e)}},setProps(n){var s;(s=Ki.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=Ki.get(e))==null?void 0:n.getSnapshot()}}}function SX(t){return Ny.add(t),()=>{Ny.delete(t)}}function _X(t){return t&&(go(t.toastId)||ru(t.toastId))?t.toastId:BR()}function lu(t,e){return zR(t,e),e.toastId}function Zg(t,e){return{...e,type:e&&e.type||t,toastId:_X(e)}}function Xg(t){return(e,n)=>lu(e,Zg(t,n))}function Ee(t,e){return lu(t,Zg("default",e))}Ee.loading=(t,e)=>lu(t,Zg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function EX(t,{pending:e,error:n,success:s},a){let r;e&&(r=go(e)?Ee.loading(e,a):Ee.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,u,p)=>{if(u==null){Ee.dismiss(r);return}let h={type:m,...o,...a,data:p},g=go(u)?{render:u}:u;return r?Ee.update(r,{...h,...g}):Ee(g.render,{...h,...g}),p},d=Pr(t)?t():t;return d.then(m=>c("success",s,m)).catch(m=>c("error",n,m)),d}Ee.promise=EX;Ee.success=Xg("success");Ee.info=Xg("info");Ee.error=Xg("error");Ee.warning=Xg("warning");Ee.warn=Ee.warning;Ee.dark=(t,e)=>lu(t,Zg("default",{theme:"dark",...e}));function TX(t){kX(t)}Ee.dismiss=TX;Ee.clearWaitingQueue=jX;Ee.isActive=HR;Ee.update=(t,e={})=>{let n=wX(t,e);if(n){let{props:s,content:a}=n,r={delay:100,...s,...e,toastId:e.toastId||t,updateId:BR()};r.toastId!==t&&(r.staleId=t);let o=r.render||a;delete r.render,lu(o,r)}};Ee.done=t=>{Ee.update(t,{progress:1})};Ee.onChange=SX;Ee.play=t=>VR(!0,t);Ee.pause=t=>VR(!1,t);function AX(t){var e;let{subscribe:n,getSnapshot:s,setProps:a}=f.useRef(CX(t)).current;a(t);let r=(e=f.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function o(c){if(!r)return[];let d=new Map;return t.newestOnTop&&r.reverse(),r.forEach(m=>{let{position:u}=m.props;d.has(u)||d.set(u,[]),d.get(u).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:o,isToastActive:HR,count:r?.length}}function DX(t){let[e,n]=f.useState(!1),[s,a]=f.useState(!1),r=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:u,closeOnClick:p}=t;NX({id:t.toastId,containerId:t.containerId,fn:n}),f.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{g()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)}function g(){window.removeEventListener("focus",y),window.removeEventListener("blur",b)}function v(N){if(t.draggable===!0||t.draggable===N.pointerType){w();let E=r.current;o.canCloseOnClick=!0,o.canDrag=!0,E.style.transition="none",t.draggableDirection==="x"?(o.start=N.clientX,o.removalDistance=E.offsetWidth*(t.draggablePercent/100)):(o.start=N.clientY,o.removalDistance=E.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function x(N){let{top:E,bottom:A,left:L,right:C}=r.current.getBoundingClientRect();N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&N.clientX>=L&&N.clientX<=C&&N.clientY>=E&&N.clientY<=A?b():y()}function y(){n(!0)}function b(){n(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",j)}function k(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",j)}function _(N){let E=r.current;if(o.canDrag&&E){o.didMove=!0,e&&b(),t.draggableDirection==="x"?o.delta=N.clientX-o.start:o.delta=N.clientY-o.start,o.start!==N.clientX&&(o.canCloseOnClick=!1);let A=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;E.style.transform=`translate3d(${A},0)`,E.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function j(){k();let N=r.current;if(o.canDrag&&o.didMove&&N){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){a(!0),t.closeToast(!0),t.collapseAll();return}N.style.transition="transform 0.2s, opacity 0.2s",N.style.removeProperty("transform"),N.style.removeProperty("opacity")}}let T={onPointerDown:v,onPointerUp:x};return c&&d&&(T.onMouseEnter=b,t.stacked||(T.onMouseLeave=y)),p&&(T.onClick=N=>{u&&u(N),o.canCloseOnClick&&m(!0)}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:s,toastRef:r,eventHandlers:T}}var RX=typeof window<"u"?f.useLayoutEffect:f.useEffect,Jg=({theme:t,type:e,isLoading:n,...s})=>We.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function PX(t){return We.createElement(Jg,{...t},We.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function MX(t){return We.createElement(Jg,{...t},We.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function IX(t){return We.createElement(Jg,{...t},We.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function OX(t){return We.createElement(Jg,{...t},We.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function LX(){return We.createElement("div",{className:"Toastify__spinner"})}var Cy={info:MX,warning:PX,success:IX,error:OX,spinner:LX},FX=t=>t in Cy;function $X({theme:t,type:e,isLoading:n,icon:s}){let a=null,r={theme:t,type:e};return s===!1||(Pr(s)?a=s({...r,isLoading:n}):f.isValidElement(s)?a=f.cloneElement(s,r):n?a=Cy.spinner():FX(e)&&(a=Cy[e](r))),a}var BX=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:a,playToast:r}=DX(t),{closeButton:o,children:c,autoClose:d,onClick:m,type:u,hideProgressBar:p,closeToast:h,transition:g,position:v,className:x,style:y,progressClassName:b,updateId:w,role:k,progress:_,rtl:j,toastId:T,deleteToast:N,isIn:E,isLoading:A,closeOnClick:L,theme:C,ariaLabel:P}=t,R=io("Toastify__toast",`Toastify__toast-theme--${C}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":L}),M=Pr(x)?x({rtl:j,position:v,type:u,defaultClassName:R}):io(R,x),O=$X(t),q=!!_||!d,U={closeToast:h,type:u,theme:C},H=null;return o===!1||(Pr(o)?H=o(U):f.isValidElement(o)?H=f.cloneElement(o,U):H=gX(U)),We.createElement(g,{isIn:E,done:N,position:v,preventExitTransition:n,nodeRef:s,playToast:r},We.createElement("div",{id:T,tabIndex:0,onClick:m,"data-in":E,className:M,...a,style:y,ref:s,...E&&{role:k,"aria-label":P}},O!=null&&We.createElement("div",{className:io("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},O),$R(c,t,!e),H,!t.customProgressBar&&We.createElement(fX,{...w&&!q?{key:`p-${w}`}:{},rtl:j,theme:C,delay:d,isRunning:e,isIn:E,closeToast:h,hide:p,type:u,className:b,controlledProgress:q,progress:_||0})))},qX=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),HX=pX(qX("bounce",!0)),zX={position:"top-right",transition:HX,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function gpe(t){let e={...zX,...t},n=t.stacked,[s,a]=f.useState(!0),r=f.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=AX(e),{className:m,style:u,rtl:p,containerId:h,hotKeys:g}=e;function v(y){let b=io("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":p});return Pr(m)?m({position:y,rtl:p,defaultClassName:b}):io(b,ky(m))}function x(){n&&(a(!0),Ee.play())}return RX(()=>{var y;if(n){let b=r.current.querySelectorAll('[data-in="true"]'),w=12,k=(y=e.position)==null?void 0:y.includes("top"),_=0,j=0;Array.from(b).reverse().forEach((T,N)=>{let E=T;E.classList.add("Toastify__toast--stacked"),N>0&&(E.dataset.collapsed=`${s}`),E.dataset.pos||(E.dataset.pos=k?"top":"bot");let A=_*(s?.2:1)+(s?0:w*N);E.style.setProperty("--y",`${k?A:A*-1}px`),E.style.setProperty("--g",`${w}`),E.style.setProperty("--s",`${1-(s?j:0)}`),_+=E.offsetHeight,j+=.025})}},[s,d,n]),f.useEffect(()=>{function y(b){var w;let k=r.current;g(b)&&((w=k.querySelector('[tabIndex="0"]'))==null||w.focus(),a(!1),Ee.pause()),b.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(a(!0),Ee.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[g]),We.createElement("section",{ref:r,className:"Toastify",id:h,onMouseEnter:()=>{n&&(a(!1),Ee.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,b)=>{let w=b.length?{...u}:{...u,pointerEvents:"none"};return We.createElement("div",{tabIndex:-1,className:v(y),"data-stacked":n,style:w,key:`c-${y}`},b.map(({content:k,props:_})=>We.createElement(BX,{..._,stacked:n,collapseAll:x,isIn:c(_.toastId,_.containerId),key:`t-${_.key}`},k)))}))}const gs=(t,e="export.csv")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=[n.join(","),...t.map(r=>n.map(o=>{const c=r[o]||"",d=String(c);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"});UR(a,e)},fs=(t,e="export.xls")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=`
    <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head>
        <meta charset="utf-8">
        <!--[if gte mso 9]>
        <xml>
          <x:ExcelWorkbook>
            <x:ExcelWorksheets>
              <x:ExcelWorksheet>
                <x:Name>Doctors</x:Name>
                <x:WorksheetOptions>
                  <x:DisplayGridlines/>
                </x:WorksheetOptions>
              </x:ExcelWorksheet>
            </x:ExcelWorksheets>
          </x:ExcelWorkbook>
        </xml>
        <![endif]-->
        <style>
          table { 
            border-collapse: collapse; 
            width: 100%; 
            font-family: Arial, sans-serif;
            font-size: 11px;
          }
          th, td { 
            border: 1px solid #d0d0d0; 
            padding: 8px 10px; 
            text-align: left;
            white-space: nowrap;
          }
          th { 
            background-color: #4472C4; 
            color: white; 
            font-weight: bold;
            text-transform: lowercase;
          }
          tr:nth-child(even) {
            background-color: #f9f9f9;
          }
        </style>
      </head>
      <body>
        <table>
          <thead>
            <tr>
              ${n.map(r=>`<th>${cc(r)}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${t.map(r=>`
              <tr>
                ${n.map(o=>`<td>${cc(String(r[o]||""))}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
    </html>
  `,a=new Blob([s],{type:"application/vnd.ms-excel"});UR(a,e)},vs=(t,e="export.pdf",n="Export Data")=>{if(!t||t.length===0)throw new Error("No data to export");const s=Object.keys(t[0]),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>${cc(n)}</title>
        <style>
          @page { size: A4 landscape; margin: 15mm; }
          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; font-size: 11px; }
          h1 { color: #333; text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 10px; }
          th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; word-wrap: break-word; }
          th { background-color: #4472C4; color: white; font-weight: bold; text-transform: lowercase; }
          tr:nth-child(even) { background-color: #f9f9f9; }
          .footer { margin-top: 20px; text-align: center; font-size: 9px; color: #666; }
        </style>
      </head>
      <body>
        <h1>${cc(n)}</h1>
        <table>
          <thead><tr>${s.map(c=>`<th>${cc(c)}</th>`).join("")}</tr></thead>
          <tbody>${t.map(c=>`<tr>${s.map(d=>`<td>${cc(String(c[d]||""))}</td>`).join("")}</tr>`).join("")}</tbody>
        </table>
        <div class="footer">Generated on ${new Date().toLocaleString()}</div>
        <script>
          window.onload = () => setTimeout(() => window.print(), 500);
        <\/script>
      </body>
    </html>
  `,r=new Blob([a],{type:"text/html"}),o=URL.createObjectURL(r);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),1e3)},UR=(t,e)=>{const n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)},cc=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])},Ps={getSettings:(t={})=>ve({endpoint:"settings",method:"GET",data:t}),getSetting:(t,e,n={})=>{if(t==="webhooks"){let s;switch(e){case"list":s="webhooks";break;case"table-config":s="webhooks/table-config";break;case"events":s="webhooks/events";break;default:s=`webhooks/${e}`}return ve({endpoint:s,method:"GET",data:n})}return ve({endpoint:`${t}/${e}`,method:"GET",data:n})},updateSettings:(t,e,n)=>ve({endpoint:`${t}/${e}`,method:"PUT",data:n}),getClinicData:()=>ve({endpoint:"clinic",method:"GET"}),updateClinicData:t=>ve({endpoint:"clinic",method:"PUT",data:t}),getCustomNotifications:(t={})=>ve({endpoint:"settings/custom-notifications",method:"GET",data:t}),getCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"GET"}),createCustomNotification:t=>ve({endpoint:"settings/custom-notifications",method:"POST",data:t}),updateCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}`,method:"PUT",data:e}),testCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/test`,method:"POST",data:e}),deleteCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"DELETE"}),updateCustomNotificationStatus:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/status`,method:"PUT",data:e}),getWebhookStatistics:(t,e={})=>ve({endpoint:`webhooks/statistics/${t}`,method:"GET",data:e}),exportCustomFields:(t={})=>ve({endpoint:"setting/custom-field/export",method:"GET",data:t}),exportHolidays:(t={})=>ve({endpoint:"settings/holidays/export",method:"GET",data:t}),exportListings:(t={})=>ve({endpoint:"settings/listing/export",method:"GET",data:t}),getDisabledDates:(t={})=>ve({endpoint:"settings/holidays/disabled-dates",method:"GET",data:t})},Dn={all:["settings"],lists:()=>[...Dn.all,"list"],list:t=>[...Dn.lists(),{filters:t}],details:()=>[...Dn.all,"detail"],detail:(t,e)=>[...Dn.details(),t,e],clinic:()=>[...Dn.all,"clinic"],webhooks:()=>[...Dn.all,"webhooks"],webhookList:t=>[...Dn.webhooks(),"list",{filters:t}],webhookDetail:t=>[...Dn.webhooks(),"detail",t],webhookTableConfig:()=>[...Dn.webhooks(),"table-config"],webhookEvents:()=>[...Dn.webhooks(),"events"],webhookStatistics:(t,e)=>[...Dn.webhooks(),"statistics",t,{params:e}]},yn=(t,e,n={},s={})=>gt({queryKey:[...Dn.detail(t,e),n],queryFn:()=>Ps.getSetting(t,e,n),enabled:!!(t&&e),...s}),dn=(t,e)=>{const n=Ke();return He({mutationFn:s=>{const a=s?.module||t,r=s?.key||e,o=s?.module||s?.key?s?.data:s;return Ps.updateSettings(a,r,o)},onSuccess:(s,a)=>{const r=a?.module||t,o=a?.key||e;n.invalidateQueries({queryKey:Dn.lists()}),n.invalidateQueries({queryKey:["config","settings"]}),n.invalidateQueries({queryKey:Dn.details()}),r&&o&&n.invalidateQueries({queryKey:Dn.detail(r,o)})}})},VX=(t={},e={})=>gt({queryKey:[...Dn.all,"custom-notifications",t],queryFn:()=>Ps.getCustomNotifications(t),...e}),WR=(t,e={})=>gt({queryKey:[...Dn.all,"custom-notification",t],queryFn:()=>Ps.getCustomNotification(t),enabled:!!t&&t!=="new",...e}),UX=(t={})=>{const e=Ke();return He({mutationFn:n=>Ps.createCustomNotification(n),onSuccess:()=>{e.invalidateQueries({queryKey:[...Dn.all,"custom-notifications"]})},...t})},WX=(t={})=>{const e=Ke();return He({mutationFn:({id:n,data:s})=>Ps.updateCustomNotification(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Dn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Dn.all,"custom-notification",s]})},...t})},KX=(t={})=>He({mutationFn:({id:e,data:n})=>Ps.testCustomNotification(e,n),...t}),GX=(t={})=>{const e=Ke();return He({mutationFn:n=>Ps.deleteCustomNotification(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:[...Dn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Dn.all,"custom-notification",s]})},...t})},YX=(t={})=>{const e=Ke();return He({mutationFn:({id:n,data:s})=>Ps.updateCustomNotificationStatus(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Dn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Dn.all,"custom-notification",s]})},...t})},QX=()=>He({mutationFn:t=>Ps.exportCustomFields(t)}),ZX=()=>He({mutationFn:t=>Ps.exportHolidays(t)}),XX=()=>He({mutationFn:t=>Ps.exportListings(t)}),JX=(t={},e={})=>gt({queryKey:[...Dn.all,"holidays","disabled-dates",t],queryFn:()=>Ps.getDisabledDates(t),enabled:!!(t.module_type&&t.module_id),staleTime:30*1e3,...e}),ou=({id:t="kc-file-upload-input",name:e="file",defaultFile:n="",defaultFileId:s="",onChange:a,className:r="",disabled:o=!1,required:c=!1,label:d="",register:m,errors:u={},showPreview:p=!0,accept:h="",...g})=>{const[v,x]=f.useState(n),[y,b]=f.useState(s),[w,k]=f.useState(!1),[_,j]=f.useState(!1),[T,N]=f.useState(null),E=f.useRef(null),A=f.useRef(null),L=u[e],C=!!v,P={};c&&(P.required=l("This field is required","kivicare-clinic-management-system"));const{ref:R,...M}=m?m(e,P):{ref:null},O=!!L||!!T,q=L?.message||T;f.useEffect(()=>{k(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{n&&x(n),s&&b(s)},[n,s]);const U=async ne=>{try{j(!0),N(null);const se=window.kc_frontend?.rest_url,W=await ve({endpoint:`${se}/wp/v2/media`,method:"POST",data:ne,isFile:!0});if(!W||W.success===!1)throw new Error(W?.message||l("Failed to upload file","kivicare-clinic-management-system"));if(x(W.source_url),b(W.id),E.current){E.current.value=W.id;const ge=new Event("input",{bubbles:!0});E.current.dispatchEvent(ge)}return a&&a({id:W.id,url:W.source_url,filename:W.title?.raw||"",type:W.media_type,subtype:W.mime_type,size:W.media_details?.filesize||0},W.id),W}catch(se){throw console.error("Error uploading file:",se),N(se.message||l("Failed to upload file","kivicare-clinic-management-system")),se}finally{j(!1)}},H=ne=>{if(ne.preventDefault(),!window.wp||!window.wp.media){A.current&&A.current.click();return}N(null);const se=window.wp.media({title:l("Select or Upload File","kivicare-clinic-management-system"),button:{text:l("Use this file","kivicare-clinic-management-system")},multiple:!1,library:{type:h?h.split(",").map(W=>W.trim()):""}});se.on("select",function(){const W=se.state().get("selection").first().toJSON();if(h&&!h.split(",").map(ee=>ee.trim()).includes(W.mime)){N(l("Please select a valid file format","kivicare-clinic-management-system"));return}if(x(W.url),b(W.id),E.current){E.current.value=W.id;const ge=new Event("input",{bubbles:!0});E.current.dispatchEvent(ge)}a&&a({id:W.id,url:W.url,filename:W.filename,type:W.type,subtype:W.subtype,size:W.filesizeInBytes},W.id)}),se.open()},ae=async ne=>{const se=ne.target.files[0];if(se){if(N(null),h&&!h.split(",").map(ge=>ge.trim()).includes(se.type)){N(l("Please select a valid file format","kivicare-clinic-management-system"));return}if(se.size>10*1024*1024){N(l("File size should not exceed 10MB","kivicare-clinic-management-system"));return}try{if(x(se.name),b(""),E.current){E.current.value="";const W=new Event("input",{bubbles:!0});E.current.dispatchEvent(W)}a&&a({url:"",filename:se.name,type:se.type,size:se.size,file:se},""),w||await U(se)}catch(W){console.error("Error handling file:",W)}}},V=ne=>{if(o){ne.preventDefault();return}_||(w?H(ne):A.current&&A.current.click())},pe=ne=>{if(ne.preventDefault(),ne.stopPropagation(),!o){if(x(""),b(""),E.current){E.current.value="";const se=new Event("input",{bubbles:!0});E.current.dispatchEvent(se)}A.current&&(A.current.value=""),a&&a({url:"",filename:"",type:"",size:0},"")}},oe=ne=>{E.current=ne,R&&R(ne)};return i.jsxs("div",{className:`form-group ${r}`,children:[d&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[d,c&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:`kc-file-upload ${C?"uploaded":""} ${_?"uploading":""} ${O?"is-invalid":""}`,children:[i.jsx("input",{type:"text",id:`${t}-hidden`,className:"d-none",...M,value:y||"",ref:oe,readOnly:!0,disabled:o}),i.jsx("input",{type:"file",id:t,className:"kc-file-upload-input d-none",onChange:ae,accept:h,ref:A,disabled:_||o,"aria-invalid":O?"true":"false","aria-describedby":O?`${t}-error`:void 0}),C?i.jsxs("div",{className:"p-2 border rounded bg-light d-flex align-items-center justify-content-between",children:[i.jsx("span",{className:"text-truncate me-2",title:v?v.includes("/")?v.split("/").pop():v:"",children:v?v.includes("/")?v.split("/").pop():v:""}),p&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[v&&v.startsWith("http")&&i.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-icon",children:i.jsx(Ue,{placement:"top",overlay:ne=>i.jsx(it,{...ne,children:l("View File","kivicare-clinic-management-system")}),children:i.jsx("span",{className:"btn-inner",style:{color:"#000000"},children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M22.4627 11.666C22.6136 11.8715 22.6136 12.1528 22.4627 12.3582C20.6976 14.7607 16.5916 19.5 12.0001 19.5C7.40864 19.5 3.30252 14.7607 1.53744 12.3582C1.38656 12.1528 1.38656 11.8715 1.53744 11.666C3.30252 9.2635 7.40864 4.52417 12.0001 4.52417C16.5916 4.52417 20.6976 9.2635 22.4627 11.666Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})}),i.jsx("button",{type:"button",className:"btn btn-sm btn-icon",onClick:pe,disabled:o,children:i.jsx(Ue,{placement:"top",overlay:ne=>i.jsx(it,{...ne,children:l("Remove File","kivicare-clinic-management-system")}),children:i.jsx("span",{className:"btn-inner",style:{color:"#000000"},children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M19.3248 9.46826C19.3248 9.46826 18.7818 16.2033 18.4668 19.0403C18.3168 20.3953 17.4798 21.1893 16.1088 21.2143C13.4998 21.2613 10.8878 21.2643 8.27979 21.2093C6.96079 21.1823 6.13779 20.3783 5.99079 19.0473C5.67379 16.1853 5.13379 9.46826 5.13379 9.46826",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M20.708 6.23975H3.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M17.4406 6.23973C16.6556 6.23973 15.9796 5.68473 15.8256 4.91573L15.5826 3.69973C15.4326 3.13873 14.9246 2.75073 14.3456 2.75073H10.1126C9.53358 2.75073 9.02558 3.13873 8.87558 3.69973L8.63258 4.91573C8.47858 5.68473 7.80258 6.23973 7.01758 6.23973",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})})]})]}):i.jsx("div",{className:`kc-file-upload-wrapper ${O?"border-danger":""} ${o?"disabled":""}`,style:o?{pointerEvents:"none",opacity:.6}:{},children:i.jsxs("div",{className:"kc-file-upload-container",children:[i.jsx("button",{type:"button",className:"kc-browse-btn",onClick:V,disabled:_||o,children:_?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):l("Browse...","kivicare-clinic-management-system")}),i.jsx("div",{className:"kc-file-text-area",children:_?l("Uploading...","kivicare-clinic-management-system"):l("No file selected.","kivicare-clinic-management-system")})]})}),O&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:q})]})]})};ou.propTypes={id:Pe.string,name:Pe.string,defaultFile:Pe.string,defaultFileId:Pe.oneOfType([Pe.string,Pe.number]),onChange:Pe.func,className:Pe.string,disabled:Pe.bool,required:Pe.bool,label:Pe.string,register:Pe.func,errors:Pe.object,accept:Pe.string};const KR={importData:t=>{if(!t||!(t instanceof FormData))throw new Error("Invalid form data provided");const n=`import/${t.get("context")||"doctors"}`;return ve({endpoint:n,method:"POST",data:t,isFile:!0})},downloadSampleFile:(t,e)=>{if(!t||!e)throw new Error("Context and format are required");const r=`${{doctors:"doctor",patients:"patient",receptionists:"receptionist",clinics:"clinic",appointments:"appointment",services:"service","custom-fields":"customField",prescriptions:"prescription",listing:"listing"}[t]||"doctor"}${e==="csv"?".csv":".xlsx"}`,c={csv:"csv",xlsx:"xlsx"}[e]||e,m=`${window.kc_frontend?.kivicare_pro_dir_uri||""}demoImportFiles/${c}/${r}`;return Promise.resolve({data:m,fileName:r})},getImportTemplates:t=>{if(!t)throw new Error("Context is required");return ve({endpoint:`import/templates/${t}`,method:"GET"})},validateImportFile:t=>{if(!t)throw new Error("File data is required");return ve({endpoint:"import/validate",method:"POST",data:t,isFile:!0})}},eJ=()=>He({mutationFn:t=>KR.importData(t),onSuccess:t=>{},onError:t=>{console.error("Import failed:",t)}}),tJ=()=>He({mutationFn:({context:t,format:e})=>KR.downloadSampleFile(t,e),onSuccess:(t,e)=>{try{const n=document.createElement("a");n.href=t.data,n.download=t.fileName,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(n){console.error("Failed to download sample file:",n)}},onError:t=>{console.error("Sample file download failed:",t)}}),qr=({show:t,onHide:e,onImport:n,onReopenImport:s,onDataRefresh:a,context:r="doctors",encounterId:o=null})=>{const[c,d]=f.useState(null),[m,u]=f.useState(0),[p,h]=f.useState(null),[g,v]=f.useState(!1),x=eJ(),y=tJ(),{control:b,handleSubmit:w,watch:k,setValue:_,formState:{errors:j},reset:T}=Jt({defaultValues:{fileFormat:null,file:null,sendEmailNotification:!1,sendSMSNotification:!1}}),N=k("fileFormat"),E=[{value:"csv",label:l("CSV","kivicare-clinic-management-system"),icon:"ph-file-csv"},{value:"xlsx",label:l("XLSX","kivicare-clinic-management-system"),icon:"ph-file-xls"}],A=f.useMemo(()=>({doctors:{title:l("Doctors Import","kivicare-clinic-management-system"),requiredFields:[l("First Name","kivicare-clinic-management-system"),l("Last Name","kivicare-clinic-management-system"),l("Email","kivicare-clinic-management-system"),l("Country Calling Code","kivicare-clinic-management-system"),l("Country Code","kivicare-clinic-management-system"),l("Contact","kivicare-clinic-management-system"),l("Gender","kivicare-clinic-management-system"),l("Specialization","kivicare-clinic-management-system")]},patients:{title:l("Patients Import","kivicare-clinic-management-system"),requiredFields:[l("first_name","kivicare-clinic-management-system"),l("last_name","kivicare-clinic-management-system"),l("email","kivicare-clinic-management-system"),l("country_calling_code","kivicare-clinic-management-system"),l("country_code","kivicare-clinic-management-system"),l("contact","kivicare-clinic-management-system"),l("gender","kivicare-clinic-management-system")]},receptionists:{title:l("Receptionists Import","kivicare-clinic-management-system"),requiredFields:[l("First Name","kivicare-clinic-management-system"),l("Last Name","kivicare-clinic-management-system"),l("Email","kivicare-clinic-management-system"),l("Country Calling Code","kivicare-clinic-management-system"),l("Country Code","kivicare-clinic-management-system"),l("Contact ","kivicare-clinic-management-system"),l("Gender  ","kivicare-clinic-management-system")]},clinics:{title:l("Clinics Import","kivicare-clinic-management-system"),requiredFields:[l("clinic_name","kivicare-clinic-management-system"),l("email","kivicare-clinic-management-system"),l("country_calling_code","kivicare-clinic-management-system"),l("country_code","kivicare-clinic-management-system"),l("contact","kivicare-clinic-management-system"),l("specialization","kivicare-clinic-management-system"),l("address","kivicare-clinic-management-system"),l("city","kivicare-clinic-management-system"),l("country","kivicare-clinic-management-system"),l("postal_code","kivicare-clinic-management-system"),l("clinic_admin_first_name","kivicare-clinic-management-system"),l("clinic_admin_last_name","kivicare-clinic-management-system"),l("clinic_admin_email","kivicare-clinic-management-system"),l("clinic_admin_country_calling_code","kivicare-clinic-management-system"),l("clinic_admin_country_code","kivicare-clinic-management-system"),l("clinic_admin_contact","kivicare-clinic-management-system"),l("clinic_admin_gender","kivicare-clinic-management-system")]},services:{title:l("Services Import","kivicare-clinic-management-system"),requiredFields:[l("category","kivicare-clinic-management-system"),l("name","kivicare-clinic-management-system"),l("charges","kivicare-clinic-management-system"),l("doctor_id","kivicare-clinic-management-system")]},"custom-fields":{title:l("Custom Fields Import","kivicare-clinic-management-system"),requiredFields:[l("module","kivicare-clinic-management-system"),l("label","kivicare-clinic-management-system"),l("input_type","kivicare-clinic-management-system")]},appointments:{title:l("Appointments Import","kivicare-clinic-management-system"),requiredFields:[l("date","kivicare-clinic-management-system"),l("start_time","kivicare-clinic-management-system"),l("end_time","kivicare-clinic-management-system"),l("service","kivicare-clinic-management-system"),l("clinic_name","kivicare-clinic-management-system"),l("doctor_name","kivicare-clinic-management-system"),l("patient_name","kivicare-clinic-management-system")]},prescriptions:{title:l("Prescriptions Import","kivicare-clinic-management-system"),requiredFields:[l("name","kivicare-clinic-management-system"),l("frequency","kivicare-clinic-management-system"),l("duration","kivicare-clinic-management-system")]},listing:{title:l("Listings Import","kivicare-clinic-management-system"),requiredFields:[l("Name","kivicare-clinic-management-system"),l("Type","kivicare-clinic-management-system")]}}),[]),L=A[r]||A.doctors,C=L.requiredFields,P=f.useCallback(()=>{if(!N){Ee.error(l("Please select a file format first","kivicare-clinic-management-system"));return}y.mutate({context:r,format:N.value})},[N,r,y]),R=f.useCallback((q,U)=>{if(!q)return{valid:!1,message:l("Please select a file to import","kivicare-clinic-management-system")};const ae=(q.name||(q.url?q.url.split("/").pop():q.filename)||"").split(".").pop().toLowerCase(),pe={csv:["csv"],xlsx:["xlsx","xls"]}[U]||[];if(!pe.includes(ae)){const oe=pe.join(", ");return{valid:!1,message:`${l("File format invalid. Expected","kivicare-clinic-management-system")} ${oe.toUpperCase()} ${l("file for","kivicare-clinic-management-system")} ${U.toUpperCase()} ${l("format","kivicare-clinic-management-system")}`}}return{valid:!0}},[]),M=f.useCallback(async q=>{if(!q.fileFormat){Ee.error(l("Please select a file format","kivicare-clinic-management-system"));return}if(!q.file){Ee.error(l("Please select a file to import","kivicare-clinic-management-system"));return}const U=R(q.file,q.fileFormat.value);if(!U.valid){Ee.error(U.message);return}u(0);const H=setInterval(()=>{u(pe=>pe>=90?(clearInterval(H),90):pe+10)},200),ae=new FormData;ae.append("context",r),ae.append("file_format",q.fileFormat.value),ae.append("send_email_notification",q.sendEmailNotification),ae.append("send_sms_notification",q.sendSMSNotification),r==="prescriptions"&&o&&ae.append("encounter_id",o);let V=q.file instanceof File?q.file:q.file?.file||c;if(!(V instanceof File))if(V?.url)try{const oe=await(await fetch(V.url)).blob(),ne=V.filename&&V.filename.includes(".")?V.filename:V.url?V.url.split("/").pop():"import.csv";V=new File([oe],ne,{type:oe.type||"text/csv"})}catch(pe){throw console.error("Error fetching file from URL:",pe),new Error(l("Failed to load file for upload","kivicare-clinic-management-system"))}else throw new Error(l("Please select a valid file to import","kivicare-clinic-management-system"));if(!V)throw new Error(l("Please select a file to import","kivicare-clinic-management-system"));ae.append("file",V),x.mutate(ae,{onSuccess:pe=>{const oe=pe?.data?.data||pe?.data||{},ne={totalRows:oe.total_rows||0,insertedRows:oe.inserted_rows||0,errors:[],errorSummary:{},toastErrorMessage:oe.toast_error_message||""};if(h(ne),v(!0),ne.insertedRows>0)Ee.success("Data imported successfully",{autoClose:5e3}),a&&setTimeout(()=>{a()},1e3);else{const se=ne.toastErrorMessage||"No data imported";Ee.error(se,{autoClose:5e3})}e()},onError:pe=>{Ee.error(pe.message||l("Import failed. Please try again.","kivicare-clinic-management-system")),console.error("Import error:",pe)},onSettled:()=>{u(0),clearInterval(H)}})},[r,R,x,a,e]),O=f.useCallback(()=>{T(),d(null),u(0),h(null),v(!1),e()},[T,e]);return i.jsxs(i.Fragment,{children:[i.jsxs(rt,{show:t,onHide:O,size:"lg",centered:!0,children:[i.jsxs(rt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:L.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:O,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsx(Pt,{onSubmit:w(M),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"fileFormat",control:b,rules:{required:!0},render:({field:q})=>i.jsx(lt,{...q,placeholder:l("Choose file format...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:E,isClearable:!0,styles:{menuPortal:U=>({...U,zIndex:9999})},formatOptionLabel:U=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:`ph ${U.icon} h5 mb-0`}),i.jsx("span",{children:U.label})]})})})]})}),i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Upload File","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("div",{className:"gap-2",children:i.jsx(be,{name:"file",control:b,rules:{required:!0},render:({field:q})=>i.jsx(ou,{id:"import-file-upload",name:"file",showPreview:!1,accept:N?N.value==="csv"?"text/csv":N.value==="xlsx"?["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","),onChange:(U,H)=>{q.onChange(U?.file||U),d(U?.file||U)},errors:j,disabled:!N||x.isPending,required:!0})})})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:P,disabled:!N||x.isPending,children:[i.jsx("i",{className:"ph ph-download me-1"}),l("Click here to download sample file","kivicare-clinic-management-system")]})})}),C.length>0&&i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"required-fields-container mt-0",children:i.jsxs("div",{className:"bg-info-subtle p-3 rounded",children:[i.jsxs("h6",{className:"mb-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),N?l("Following fields are required in","kivicare-clinic-management-system")+" "+N.label.toUpperCase()+" "+l("file","kivicare-clinic-management-system"):l("Following fields are required in file","kivicare-clinic-management-system")]}),i.jsx("ul",{className:"mb-0",children:C.map((q,U)=>i.jsx("li",{children:i.jsx("strong",{children:q})},U))})]})})}),!["appointments","services","custom-fields","prescriptions"].includes(r)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{className:"mb-3",children:[i.jsx("i",{className:"ph ph-bell me-1"}),l("Send Notification when user register","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(be,{name:"sendEmailNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"emailNotification",disabled:x.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"emailNotification",children:[i.jsx("i",{className:"ph ph-envelope me-1"}),l("Email","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(be,{name:"sendSMSNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"smsNotification",disabled:x.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"smsNotification",children:[i.jsx("i",{className:"ph ph-phone me-1"}),l("SMS/WhatsApp","kivicare-clinic-management-system")]})]})})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"mb-0 bg-info-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-info"}),i.jsxs("small",{children:[i.jsx("strong",{children:l("Note:","kivicare-clinic-management-system")})," ",l("If notification is enabled, demo import will take time.","kivicare-clinic-management-system")]})]})})]}),x.isPending&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"progress mb-3",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${m}%`},"aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",children:[m,"%"]})}),i.jsx("div",{className:"text-center",children:i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),l("Importing data, please wait...","kivicare-clinic-management-system")]})})]})]})})}),i.jsxs(rt.Footer,{className:"d-flex justify-content-end gap-3",children:[i.jsx(Zt,{variant:"secondary",onClick:O,disabled:x.isPending,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:w(M),disabled:x.isPending,children:x.isPending?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),l("Importing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import","kivicare-clinic-management-system")]})})]})]}),i.jsxs(rt,{show:g,onHide:()=>v(!1),size:"md",centered:!0,children:[i.jsxs(rt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:L.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>v(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:p&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4",children:i.jsx("i",{className:`ph ${p.insertedRows>0?"ph-check-circle text-success":"ph-warning-circle text-warning"}`,style:{fontSize:"3rem"}})}),i.jsx("h4",{className:"mb-3",children:l("Import Summary","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Total Rows","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-primary",children:p.totalRows||0})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Successfully Inserted","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-success",children:p.insertedRows||0})]})})]})]})}),i.jsxs(rt.Footer,{className:"d-flex justify-content-center gap-3",children:[i.jsx(Zt,{variant:"outline-primary",onClick:()=>{v(!1),h(null),s&&s()},children:l("Import More File","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:()=>v(!1),children:l("Close","kivicare-clinic-management-system")})]})]})]})},cu={addReview:t=>ve({endpoint:"rating/add",method:"POST",data:t}),updateReview:t=>ve({endpoint:"rating/update",method:"POST",data:t}),getReviews:(t={})=>ve({endpoint:"rating/list",method:"GET",data:t}),getReviewByPatientDoctor:(t,e)=>ve({endpoint:"rating/list",method:"GET",data:{patient_id:t,doctor_id:e,per_page:1}}).then(n=>{const s=n.data?.reviews||[];return s.length>0?s[0]:null}),deleteReview:t=>ve({endpoint:"rating/delete",method:"POST",data:t})},yr={all:["ratings"],lists:()=>[...yr.all,"list"],list:t=>[...yr.lists(),{filters:t}],details:()=>[...yr.all,"detail"],detail:t=>[...yr.details(),t]},GR=(t={},e={})=>{const[n,s]=f.useState(!1),a=gt({queryKey:yr.list(t),queryFn:()=>cu.getReviews(t),...e}),{data:r,isLoading:o,isFetching:c}=a,d=r?.data?.pagination||{},m=f.useCallback(async()=>{if(!o&&d.page<d.total_pages&&!n)try{s(!0),await a.refetch({...t,page:(d.page||0)+1})}finally{s(!1)}},[o,d.page,d.total_pages,n,t]);return{...a,hasNextPage:d.page<d.total_pages,fetchNextPage:m,isFetchingNextPage:n}},nJ=(t,e,n={})=>gt({queryKey:[...yr.details(),"patient-doctor",t,e],queryFn:()=>cu.getReviewByPatientDoctor(t,e),enabled:!!t&&!!e,...n}),iJ=()=>{const t=Ke();return He({mutationFn:e=>cu.addReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:yr.lists()})}})},sJ=()=>{const t=Ke();return He({mutationFn:e=>cu.updateReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:yr.lists()})}})},aJ=()=>{const t=Ke();return He({mutationFn:e=>cu.deleteReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:yr.lists()})}})},rJ=({show:t,onHide:e})=>i.jsxs(rt,{show:t,onHide:e,centered:!0,children:[i.jsx(rt.Header,{closeButton:!0,children:i.jsx(rt.Title,{children:i.jsx(S,{width:"150px",height:"1.5rem"})})}),i.jsxs(rt.Body,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx("div",{className:"d-flex gap-1",children:[1,2,3,4,5].map(n=>i.jsx(S,{width:"24px",height:"24px",style:{borderRadius:"50%"}},n))})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"80px",style:{borderRadius:"4px"}})]})]}),i.jsxs(rt.Footer,{children:[i.jsx(st,{width:"80px",className:"me-2"}),i.jsx(st,{width:"120px"})]})]}),lJ=({show:t,onHide:e,appointment:n})=>{const{hasCapability:s}=mt(),[a,r]=f.useState(0),[o,c]=f.useState(""),[d,m]=f.useState(!1),u=iJ(),p=sJ(),h=aJ(),{data:g,isLoading:v}=nJ(n?.patientId,n?.doctorId,{enabled:t&&!!n?.patientId&&!!n?.doctorId&&s("patient_review_get")});f.useEffect(()=>{g?(r(g.rating||0),c(g.review_text||""),m(!0)):(r(0),c(""),m(!1))},[g,t]);const x=()=>{if(a===0){$t.fire({icon:"warning",title:l("Rating Required","kivicare-clinic-management-system"),text:l("Please select a rating before submitting.","kivicare-clinic-management-system")});return}const w={appointment_id:n?.id,rating:a,review_text:o.trim()};if(d&&g){if(!s("patient_review_edit")){$t.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to edit reviews.","kivicare-clinic-management-system")});return}p.mutate({review_id:g.id,rating:a,review_text:o.trim()},{onSuccess:k=>{$t.fire({icon:"success",title:l("Review Updated","kivicare-clinic-management-system"),text:l("Your review has been updated successfully!","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review update error:",k),$t.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to update review. Please try again.","kivicare-clinic-management-system")})}})}else{if(!s("patient_review_add")){$t.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to add reviews.","kivicare-clinic-management-system")});return}u.mutate(w,{onSuccess:k=>{$t.fire({icon:"success",title:l("Review Submitted","kivicare-clinic-management-system"),text:l("Thank you for your review!","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review submission error:",k),$t.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to submit review. Please try again.","kivicare-clinic-management-system")})}})}},y=async()=>{if(!s("patient_review_delete")){$t.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to delete reviews.","kivicare-clinic-management-system")});return}(await $t.fire({icon:"warning",title:l("Delete Review?","kivicare-clinic-management-system"),text:l("Are you sure you want to delete this review? This action cannot be undone.","kivicare-clinic-management-system"),showCancelButton:!0,confirmButtonText:l("Yes, Delete","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"})).isConfirmed&&h.mutate({review_id:g.id},{onSuccess:k=>{$t.fire({icon:"success",title:l("Review Deleted","kivicare-clinic-management-system"),text:l("Your review has been deleted successfully.","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review deletion error:",k),$t.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to delete review. Please try again.","kivicare-clinic-management-system")})}})},b=()=>{e(),r(0),c(""),m(!1)};return v?i.jsx(rJ,{show:t,onHide:b}):i.jsxs(rt,{show:t,onHide:b,centered:!0,children:[i.jsxs(rt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:d?l("Update Review","kivicare-clinic-management-system"):l("Leave Review","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>b(),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsxs(Pt,{children:[i.jsxs(Pt.Group,{className:"mb-3",children:[i.jsx(Pt.Label,{children:l("Rating","kivicare-clinic-management-system")}),i.jsx("div",{children:[1,2,3,4,5].map(w=>i.jsx("i",{className:`${a>=w?"ph-fill":"ph"} ph-star fs-4 me-1 text-warning cursor-pointer`,onClick:()=>r(w)},w))})]}),i.jsxs(Pt.Group,{children:[i.jsx(Pt.Label,{children:l("Please Share Your Experience","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{as:"textarea",rows:3,value:o,onChange:w=>c(w.target.value),placeholder:l("Share your experience...","kivicare-clinic-management-system")})]})]})}),i.jsx(rt.Footer,{children:i.jsxs("div",{className:"d-flex justify-content-end w-100",children:[d&&g&&s("patient_review_delete")&&i.jsx(Ue,{placement:"top",overlay:w=>i.jsx(it,{...w,children:l("Delete Review","kivicare-clinic-management-system")}),children:i.jsx(Zt,{variant:"danger",onClick:y,className:"me-2",disabled:u.isPending||p.isPending||h.isPending,children:l("Delete Review","kivicare-clinic-management-system")})}),i.jsx(Zt,{variant:"primary",onClick:x,disabled:u.isPending||p.isPending||h.isPending,children:u.isPending||p.isPending?l("Submitting...","kivicare-clinic-management-system"):d?l("Update Review","kivicare-clinic-management-system"):l("Submit Review","kivicare-clinic-management-system")})]})})]})};var zh={exports:{}},oJ=zh.exports,cC;function cJ(){return cC||(cC=1,(function(t,e){(function(n,s){t.exports=s()})(oJ,(function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(r,o,c){var d=o.prototype;c.utc=function(x){var y={date:x,utc:!0,args:arguments};return new o(y)},d.utc=function(x){var y=c(this.toDate(),{locale:this.$L,utc:!0});return x?y.add(this.utcOffset(),n):y},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),m.call(this,x)};var u=d.init;d.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else u.call(this)};var p=d.utcOffset;d.utcOffset=function(x,y){var b=this.$utils().u;if(b(x))return this.$u?0:b(this.$offset)?p.call(this):this.$offset;if(typeof x=="string"&&(x=(function(j){j===void 0&&(j="");var T=j.match(s);if(!T)return null;var N=(""+T[0]).match(a)||["-",0,0],E=N[0],A=60*+N[1]+ +N[2];return A===0?0:E==="+"?A:-A})(x),x===null))return this;var w=Math.abs(x)<=16?60*x:x;if(w===0)return this.utc(y);var k=this.clone();if(y)return k.$offset=w,k.$u=!1,k;var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(k=this.local().add(w+_,n)).$offset=w,k.$x.$localOffset=_,k};var h=d.format;d.format=function(x){var y=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,y)},d.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var g=d.toDate;d.toDate=function(x){return x==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var v=d.diff;d.diff=function(x,y,b){if(x&&this.$u===x.$u)return v.call(this,x,y,b);var w=this.local(),k=c(x).local();return v.call(w,k,y,b)}}}))})(zh)),zh.exports}var dJ=cJ();const mJ=wa(dJ);var Vh={exports:{}},uJ=Vh.exports,dC;function hJ(){return dC||(dC=1,(function(t,e){(function(n,s){t.exports=s()})(uJ,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(a,r,o){var c,d=function(h,g,v){v===void 0&&(v={});var x=new Date(h),y=(function(b,w){w===void 0&&(w={});var k=w.timeZoneName||"short",_=b+"|"+k,j=s[_];return j||(j=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:k}),s[_]=j),j})(g,v);return y.formatToParts(x)},m=function(h,g){for(var v=d(h,g),x=[],y=0;y<v.length;y+=1){var b=v[y],w=b.type,k=b.value,_=n[w];_>=0&&(x[_]=parseInt(k,10))}var j=x[3],T=j===24?0:j,N=x[0]+"-"+x[1]+"-"+x[2]+" "+T+":"+x[4]+":"+x[5]+":000",E=+h;return(o.utc(N).valueOf()-(E-=E%1e3))/6e4},u=r.prototype;u.tz=function(h,g){h===void 0&&(h=c);var v,x=this.utcOffset(),y=this.toDate(),b=y.toLocaleString("en-US",{timeZone:h}),w=Math.round((y-new Date(b))/1e3/60),k=15*-Math.round(y.getTimezoneOffset()/15)-w;if(!Number(k))v=this.utcOffset(0,g);else if(v=o(b,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(k,!0),g){var _=v.utcOffset();v=v.add(x-_,"minute")}return v.$x.$timezone=h,v},u.offsetName=function(h){var g=this.$x.$timezone||o.tz.guess(),v=d(this.valueOf(),g,{timeZoneName:h}).find((function(x){return x.type.toLowerCase()==="timezonename"}));return v&&v.value};var p=u.startOf;u.startOf=function(h,g){if(!this.$x||!this.$x.$timezone)return p.call(this,h,g);var v=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return p.call(v,h,g).tz(this.$x.$timezone,!0)},o.tz=function(h,g,v){var x=v&&g,y=v||g||c,b=m(+o(),y);if(typeof h!="string")return o(h).tz(y);var w=(function(T,N,E){var A=T-60*N*1e3,L=m(A,E);if(N===L)return[A,N];var C=m(A-=60*(L-N)*1e3,E);return L===C?[A,L]:[T-60*Math.min(L,C)*1e3,Math.max(L,C)]})(o.utc(h,x).valueOf(),b,y),k=w[0],_=w[1],j=o(k).utcOffset(_);return j.$x.$timezone=y,j},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(h){c=h}}}))})(Vh)),Vh.exports}var pJ=hJ();const gJ=wa(pJ);An.extend(mJ);An.extend(gJ);const fJ=t=>{if(!t)return"U";const e=t.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+(e[1].charAt(0)||"")).toUpperCase()},Sy=({hideBreadcrumbs:t=!1,patientId:e=!1})=>{const{patientIdParam:n}=Yt(),{isAddonActive:s,patientCalanderIntegration:a,hasCapability:r,wp_timezone:o,current_server_time:c,cancellationBufferEnabled:d,cancellationBufferHours:m,global_date_format:u,currentDoctorId:p,currentuserID:h,defaultClinicId:g}=mt(),v=Xi(),x=Fi(),y=Jn(),b=Vn(),w=s("kiviPro"),[k,_]=f.useState(!1),[j,T]=f.useState(!1),[N,E]=f.useState(!1),[A,L]=f.useState(null),[C,P]=f.useState(!1),R=f.useRef(null),[M,O]=f.useState([]),[q,U]=f.useState([]),[H,ae]=f.useState([]),[V,pe]=f.useState(null),[oe,ne]=f.useState({page:1,perPage:10,search:"",date:"",clinic:"",patient:e||"",doctor:x&&(p||h)||"",status:"",orderby:"",order:"",timeFrame:"upcoming"}),se={patientId:"patient",doctorId:"doctor",clinicId:"clinic",appointment_start_date:"dateTime"},W=oe.orderby?[{id:se[oe.orderby]||oe.orderby,desc:oe.order==="desc"}]:[],ge=we=>{if(we.length>0){const{id:he,desc:Re}=we[0],$e={patient:"patientId",doctor:"doctorId",clinic:"clinicId",dateTime:"appointment_start_date"};ne(Ve=>({...Ve,orderby:$e[he]||he,order:Re?"desc":"asc",page:1}))}else ne(he=>({...he,orderby:"",order:"",page:1}))},ee=Ke(),ie=async({page:we,per_page:he,search:Re})=>{try{const $e={dataType:"clinicList",page:we,per_page:he,search:Re},Ve=await ee.fetchQuery({queryKey:ut.list($e),queryFn:()=>Et.getStaticData($e),staleTime:300*1e3}),Fe=Ve.data.map(Xe=>({value:Xe.id,label:Xe.label||Xe.name}));return O(Xe=>[...Xe,...Fe]),Ve}catch($e){return console.error("Error loading clinics:",$e),{data:[],pagination:{has_more:!1}}}},ue=async({page:we,per_page:he,search:Re,clinic_ids:$e})=>{try{let Ve=$e;(y||b)&&g&&(Ve=g);const Fe={dataType:"staticData",staticDataType:"users",role:dl(),clinic_ids:Ve,page:we,per_page:he,search:Re},Xe=await ee.fetchQuery({queryKey:ut.list(Fe),queryFn:()=>Et.getStaticData(Fe),staleTime:300*1e3}),xt=Xe.data.map(Gt=>({value:Gt.id,label:Gt.label||Gt.name}));return U(Gt=>[...Gt,...xt]),Xe}catch(Ve){return console.error("Error loading patients:",Ve),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},G=async({page:we,per_page:he,search:Re,clinic_ids:$e})=>{try{let Ve=$e;(y||b)&&g&&(Ve=g);const Fe={dataType:"staticData",staticDataType:"doctors",clinic_ids:Ve,page:we,per_page:he,search:Re},Xe=await ee.fetchQuery({queryKey:ut.list(Fe),queryFn:()=>Et.getStaticData(Fe),staleTime:0}),xt=Xe.data.map(Gt=>({value:Gt.id,label:Gt.label||Gt.name}));return ae(Gt=>[...Gt,...xt]),Xe}catch(Ve){return console.error("Error loading doctors:",Ve),{data:[],pagination:{has_more:!1}}}},le=OR(),re=we=>{le.mutate(we,{onSuccess:he=>{const Re=new Blob([he],{type:"application/pdf"}),$e=URL.createObjectURL(Re);window.open($e,"_blank")},onError:he=>{Me({title:l("Error","kivicare-clinic-management-system"),text:he?.response?.data?.message||he?.message||l("Failed to generate invoice PDF.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};f.useEffect(()=>{n&&ne(we=>({...we,patient:n,page:1}))},[n]),f.useEffect(()=>{if(x&&(p||h)){const we=p||h;ne(he=>({...he,doctor:we,page:1}))}},[x,p,h]);const{data:D}=yn("settings","google-event-template",{},{enabled:w&&Xi()}),I=[{value:"all",label:ob("All","kivicare-clinic-management-system","kivicare-clinic-management-system")},{value:"upcoming",label:l("Upcoming","kivicare-clinic-management-system")},{value:"past",label:l("Past","kivicare-clinic-management-system")}],ce=f.useMemo(()=>Object.fromEntries(Object.entries(oe).filter(([we,he])=>he!==""&&he!==null&&he!==void 0).map(([we,he])=>he&&typeof he=="object"&&"value"in he?[we,he.value]:[we,he])),[oe]),{data:Z,isLoading:K,error:B,refetch:F}=XZ(ce),J=Z?.data?.appointments||[],Q=Z?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},me=aX(),te=iX(),Y=sX(),Ce=cX(),ye=f.useMemo(()=>{if(!v||!d||!o||!c)return{enabled:!1};const we=parseFloat(m);if(isNaN(we)||we<=0)return{enabled:!1};try{return{enabled:!0,bufferHours:we,serverTime:An.tz(c,"YYYY-MM-DD HH:mm:ss",o)}}catch(he){return console.error("Error parsing server time for cancellation buffer:",he),{enabled:!1}}},[v,d,m,o,c]),Te=oX(),et=async we=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const he={...ce,format:we,page:oe.page,perPage:oe.perPage};he.status&&typeof he.status=="object"&&(he.status=he.status.value);const Re=await Te.mutateAsync(he);if(Re?.data?.appointments&&Re.data.appointments.length>0){const $e=new Date().toISOString().split("T")[0],Ve=Re.data.appointments.map(Fe=>{const{id:Xe,date:xt,time:Gt,description:Ln,status:pi,created_at:qi,reports:en,doctor_name:sa,patient_name:sr,clinic_full_address:qn,clinic_name:Is,appointment_formated_start_date:ar,payment_mode:Ca,cancellation_buffer:ti,patient_contact_no:Hn,patient_image_url:Hi,custom_forms:aa,charges:Dl,services:zi,service_array:ra,...yi}=Fe;return{id:Xe,date:xt,time:Gt,description:Ln,status:pi,created_at:qi,reports:en,doctor_name:sa,patient_name:sr,clinic_full_address:qn,clinic_name:Is,appointment_formated_start_date:ar,payment_mode:Ca,cancellation_buffer:ti,patient_contact_no:Hn,patient_image_url:Hi,custom_forms:aa,charges:Dl,services:zi,service_array:ra,...yi}});switch(we){case"csv":gs(Ve,`appointments-${$e}.csv`);break;case"xls":fs(Ve,`appointments-${$e}.xls`);break;case"pdf":vs(Ve,`appointments-${$e}.pdf`,"Appointments List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else Yi(),Me({title:l("No Data to Export","kivicare-clinic-management-system"),text:l("No appointments found to export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(he){console.error("Export error:",he),Yi(),Me({title:l("Error!","kivicare-clinic-management-system"),text:he.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},kt=()=>et("csv"),At=()=>et("xls"),[qt,Ie]=f.useState(!1),De=()=>{qt||(Ie(!0),et("pdf"),setTimeout(()=>Ie(!1),2e3))},xe=(we,he)=>{const Re={service_name:he.services||"Appointment",clinic_name:he.clinicName||"",appointment_date:he.appointmentStartDate||"",appointment_time:he.appointmentStartTime||"",patient_name:he.patientName||"",doctor_name:he.doctorName||""};let $e=we;for(const[Ve,Fe]of Object.entries(Re))$e=$e.replace(new RegExp(`{{${Ve}}}`,"g"),Fe);return $e},ke=we=>{if(!we)return null;const he=new Date(we);return isNaN(he.getTime())?null:he},Oe=we=>{const he=we.getFullYear(),Re=String(we.getMonth()+1).padStart(2,"0"),$e=String(we.getDate()).padStart(2,"0"),Ve=String(we.getHours()).padStart(2,"0"),Fe=String(we.getMinutes()).padStart(2,"0"),Xe=String(we.getSeconds()).padStart(2,"0");return`${he}${Re}${$e}T${Ve}${Fe}${Xe}`},Qe=we=>{const he=D?.data?.data?.post_title||"";return encodeURIComponent(xe(he,we))},ct=we=>{const he=D?.data?.data?.post_content||"",Re=we.description?`

${we.description}`:"";return encodeURIComponent(xe(he,we)+Re)},Tt=we=>encodeURIComponent(we.clinicAddress||we.clinicName||""),Ut=we=>{const he=ke(we.start||`${we.appointmentStartDateWF}T${we.appointmentStartTimeWF}`),Re=ke(we.end||`${we.appointmentEndDateWF}T${we.appointmentEndTimeWF}`);if(!he||!Re)return"#";const $e=he.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ve=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Fe=Qe(we),Xe=ct(we),xt=Tt(we);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${Fe}&dates=${$e}/${Ve}&details=${Xe}&location=${xt}`},yt=we=>{const he=ke(we.start||`${we.appointmentStartDateWF}T${we.appointmentStartTimeWF}`),Re=ke(we.end||`${we.appointmentEndDateWF}T${we.appointmentEndTimeWF}`);if(!he||!Re)return"#";const $e=he.toISOString(),Ve=Re.toISOString(),Fe=Qe(we),Xe=ct(we),xt=Tt(we);return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${Fe}&startdt=${$e}&enddt=${Ve}&body=${Xe}&location=${xt}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent`},Ae=we=>{const he=ke(we.start||`${we.appointmentStartDateWF}T${we.appointmentStartTimeWF}`),Re=ke(we.end||`${we.appointmentEndDateWF}T${we.appointmentEndTimeWF}`);if(!he||!Re)return"#";const $e=he.toISOString(),Ve=Re.toISOString(),Fe=Qe(we),Xe=ct(we),xt=Tt(we);return`https://outlook.office.com/calendar/deeplink/compose?subject=${Fe}&startdt=${$e}&enddt=${Ve}&body=${Xe}&location=${xt}&path=/calendar/action/compose&rru=addevent`},Be=we=>{const he=ke(we.start||`${we.appointmentStartDateWF}T${we.appointmentStartTimeWF}`),Re=ke(we.end||`${we.appointmentEndDateWF}T${we.appointmentEndTimeWF}`);if(!he||!Re)return"#";const $e=Oe(he),Ve=Oe(Re),Fe=Qe(we),Xe=ct(we),xt=Tt(we);return`https://calendar.yahoo.com/?v=60&TITLE=${Fe}&ST=${$e}&ET=${Ve}&DESC=${Xe}&in_loc=${xt}`},z=we=>{const he=ke(we.start||`${we.appointmentStartDateWF}T${we.appointmentStartTimeWF}`),Re=ke(we.end||`${we.appointmentEndDateWF}T${we.appointmentEndTimeWF}`);if(!he||!Re)return"";const $e=he.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ve=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Fe=new Date().toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Xe=`appointment-${we.id}@kivicare.com`,xt=xe(D?.data?.data?.post_title||"",we),Gt=xe(D?.data?.data?.post_content||"",we),Ln=we.clinicName||"";return`BEGIN:VCALENDAR
      VERSION:2.0
      BEGIN:VEVENT
      UID:${Xe}
      DTSTAMP:${Fe}
      DTSTART:${$e}
      DTEND:${Ve}
      SUMMARY:${xt}
      DESCRIPTION:${Gt}
      LOCATION:${Ln}
      END:VEVENT
      END:VCALENDAR`},X=On(),fe=f.useMemo(()=>[X.accessor("patientId",{id:"patientId",header:()=>l("Appointment Details","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:we=>{const he=we.row.original;return i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:he.patient_image_url?i.jsx("img",{src:he.patient_image_url,alt:he.patientName,className:"avatar  flex-shrink-0 bg-primary-subtle  rounded-circle  avatar-60"}):i.jsx("div",{className:"avatar  flex-shrink-0 bg-primary-subtle text-primary rounded-circle  avatar-60 d-flex align-items-center justify-content-center fw-bold",children:fJ(he.patientName)})}),i.jsxs("div",{className:"flex-grow-1 min-w-0",children:[i.jsx("div",{className:"fw-semibold text-dark mb-1",children:i.jsx(ht,{to:`/patient/profile/${he.patientId}`,className:"text-decoration-none heading-color",children:he.patientName})}),!x&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-stethoscope me-2"}),i.jsxs("span",{className:"fw-medium",children:[l("Doctor","kivicare-clinic-management-system"),": "]}),v?i.jsx("span",{children:he.doctorName}):i.jsx(ht,{to:`/doctor/edit/${he.doctorId}`,className:"text-primary text-decoration-none",children:he.doctorName})]}),w&&!y&&!b&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-hospital me-2"}),i.jsxs("span",{className:"fw-medium",children:[l("Clinic","kivicare-clinic-management-system"),": "]}),!v&&!x?i.jsx(ht,{to:`/clinic/edit/${he.clinicId}`,className:"text-primary text-decoration-none",children:he.clinicName}):i.jsx("span",{children:he.clinicName})]})]})]})}}),X.accessor(we=>({startDate:we.appointmentStartDate,startTime:we.appointmentStartTime,endTime:we.appointmentEndTime}),{id:"dateTime",header:()=>l("Date and Time","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"datetime",cell:we=>{const{startDate:he,startTime:Re,endTime:$e}=we.getValue();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),he]}),i.jsx("div",{children:i.jsxs("b",{children:[i.jsx("i",{className:"ph ph-clock me-2"}),Re," - ",$e]})})]})}}),X.accessor("services",{id:"services",header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>we.row.original.services||"-"}),X.accessor("charges",{id:"charges",header:()=>l("Charges","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>we.getValue()||"-"}),X.accessor("payment",{id:"paymentMode",enableSorting:!1,header:()=>l("Payment Mode","kivicare-clinic-management-system"),cell:we=>we.row.original.payment?.mode||l("N/A","kivicare-clinic-management-system")}),X.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>{const he={CANCELLED:0,BOOKED:1,PENDING:2,CHECK_OUT:3,CHECK_IN:4},$e={[he.CANCELLED]:{text:l("Cancelled","kivicare-clinic-management-system"),class:"bg-danger-subtle"},[he.BOOKED]:{text:l("Booked","kivicare-clinic-management-system"),class:"bg-success-subtle"},[he.PENDING]:{text:l("Pending","kivicare-clinic-management-system"),class:"bg-warning-subtle"},[he.CHECK_OUT]:{text:l("Check Out","kivicare-clinic-management-system"),class:"bg-info-subtle"},[he.CHECK_IN]:{text:l("Check In","kivicare-clinic-management-system"),class:"bg-primary-subtle"}}[we.getValue()]||{text:l("Unknown","kivicare-clinic-management-system"),class:"bg-secondary-subtle"};return i.jsx("span",{className:`badge ${$e.class} px-3 py-2`,children:$e.text})}}),...v?[...a==="yes"?[X.accessor("Add To Calendar",{id:"calandarevent",header:()=>l("Add To Calendar","kivicare-clinic-management-system"),cell:we=>i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Add to Google Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Ut(we.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Google"})}),i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Add to Outlook","kivicare-clinic-management-system")}),children:i.jsx("a",{href:yt(we.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Outlook"})}),i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Add to Microsoft 365","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Ae(we.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Microsoft"})}),i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Add to Apple Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(z(we.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Apple"})}),i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Add to Yahoo Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Be(we.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Yahoo"})}),i.jsx(Ue,{placement:"top",overlay:he=>i.jsx(it,{...he,children:l("Download iCal","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(z(we.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-success px-2 py-1",children:i.jsx("i",{className:"ph ph-download"})})})]})})]:[]]:[],...r("appointment_edit")||r("appointment_view")||r("appointment_delete")||r("appointment_cancel")?[X.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>{const he={CANCELLED:0,BOOKED:1,CHECK_OUT:3,CHECK_IN:4},Re=parseInt(we.cell.row.original.status),$e={isBooked:Re===he.BOOKED,isCheckedIn:Re===he.CHECK_IN,isCheckedOut:Re===he.CHECK_OUT,isCancelled:Re===he.CANCELLED,isToday:we.cell.row.original.isToday},{isBooked:Ve,isCheckedIn:Fe,isCheckedOut:Xe,isCancelled:xt,isToday:Gt}=$e;let Ln=!0;const pi=we.row.original;if(ye.enabled)try{const qn=`${pi.appointmentStartDate} ${pi.appointmentStartTime}`,ar=An.tz(qn,"YYYY-MM-DD HH:mm:ss",o).subtract(ye.bufferHours,"hour");ye.serverTime.isAfter(ar)&&(Ln=!1)}catch(qn){console.error("Error calculating cancellation buffer for appointment:",pi.id,qn),Ln=!0}const qi=pi.isPast,en=qn=>Is=>i.jsx(it,{id:`tooltip-${we.cell.row.original.id}-${qn}`,...Is,children:qn}),sa=qn=>e?`/patient/profile/${e}/appointments/edit/${qn}`:`/appointments/edit/${qn}`,sr=qn=>e?`/patient/profile/${e}/appointments/view/${qn}`:`/appointments/view/${qn}`;return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[r("appointment_edit")&&!Fe&&!Xe&&!xt&&Ln&&!qi&&i.jsx(Ue,{placement:"top",overlay:en(l("Edit Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:sa(we.cell.row.original.id),className:"text-success",children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),r("appointment_view")&&i.jsxs(i.Fragment,{children:[i.jsx(Ue,{placement:"top",overlay:en(l("View Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:sr(we.cell.row.original.id),className:"text-gray",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Ue,{placement:"top",overlay:en(l("Print Details","kivicare-clinic-management-system")),children:i.jsx("span",{onClick:()=>re(we.cell.row.original.id),role:"button",className:"text-secondary fs-5 p-0",children:i.jsx("i",{className:"ph ph-printer fs-5 p-0"})})})]}),Fe&&i.jsx(Ue,{placement:"top",overlay:en(l("Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${we.cell.row.original.encounterId}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray ",children:i.jsx("i",{className:"ph ph-gauge fs-5"})})})}),Fe&&(()=>{const qn=we?.cell?.row?.original?.zoom_data?.startUrl;return qn?i.jsx(Ue,{placement:"top",overlay:en(l("Start Video Conference","kivicare-clinic-management-system")),children:i.jsx("a",{target:"_blank",href:qn,className:"btn btn-link text-primary fs-5 p-0",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-video-conference"})})}):!v&&!qn?i.jsx(Ue,{placement:"top",overlay:en(l("Video Conference Not Available","kivicare-clinic-management-system")),children:i.jsx("span",{className:"text-secondary fs-5 p-0",onClick:()=>Wt(we.cell.row.original),role:"button",tabIndex:0,children:i.jsx("i",{className:"ph ph-warning-octagon"})})}):null})(),!v&&r("patient_appointment_status_change")&&i.jsxs(i.Fragment,{children:[Ve&&Gt&&i.jsx(Ue,{placement:"top",overlay:en(l("Check In","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>at(we.cell.row.original,4),className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-in"})})}),Fe&&Gt&&i.jsx(Ue,{placement:"top",overlay:en(l("Check Out","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>at(we.cell.row.original,3),className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-out"})})})]}),w&&v&&Xe&&r("patient_review_add")&&i.jsx(Ue,{placement:"top",overlay:en(l("Leave Review","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>{L(we.cell.row.original),E(!0)},className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-star"})})}),!v&&r("appointment_delete")&&i.jsx(Ue,{placement:"top",overlay:en(l("Delete Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>jt(we.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})}),v&&r("appointment_cancel")&&Re!==he.CANCELLED&&!Fe&&!Xe&&Ln&&i.jsx(Ue,{placement:"top",overlay:en(l("Cancel Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ot(we.cell.row.original.id,0),children:i.jsx("i",{className:"ph ph-prohibit"})})})]})}})]:[]],[D,a,r,d,m,o,c]),_e=[{type:"inlineDateRange",name:"inlineDateRange",label:l("Select Date Range","kivicare-clinic-management-system"),placeholder:l("Select date range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},...w&&!y&&!b?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:ie,options:M,onChange:we=>{pe(we)},storeObject:!0}]:[],...e===!1&&!n&&!v?[{type:"paginatedSelect",name:"patient",label:l("Patient","kivicare-clinic-management-system"),placeholder:l("Select Patient","kivicare-clinic-management-system"),optionLoader:ue,options:q,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}]:[],...x?[]:[{type:"paginatedSelect",name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),placeholder:l("Select Doctor","kivicare-clinic-management-system"),optionLoader:G,options:H,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:l("Select Status","kivicare-clinic-management-system"),placeholder:l("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:l("Cancelled","kivicare-clinic-management-system")},{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"4",label:l("Check-In","kivicare-clinic-management-system")},{value:"3",label:l("Check-Out","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],ze=f.useMemo(()=>["search","date_from","date_to","clinic","patient","doctor","status"].some(he=>{const Re=oe[he];return typeof Re=="object"&&Re!==null?Re.value!==void 0&&Re.value!=="":Re!=null&&Re!==""})||oe.timeFrame!=="upcoming",[oe]),Je=we=>{ne({...oe,...we,page:1}),_(!1)},nt=()=>{ne({page:1,perPage:10,search:"",date:"",clinic:"",patient:"",doctor:"",status:"",orderby:"",order:"",timeFrame:"upcoming",startDate:"",endDate:"",date_from:"",date_to:""}),_(!1)},at=(we,he)=>{if(he===3){we.encounterStatus==1?dt({title:l("","kivicare-clinic-management-system"),text:l("Please close the Encounter to checkout patient","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1}):dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),te.mutate({id:we.id,status:he},{onSuccess:$e=>{tt({text:$e?.message||l("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:$e=>{console.error("Update appointment status error:",$e);const Ve=$e?.response?.data?.message||$e?.message||l("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");Me({text:Ve})}}))});return}he===4&&dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),te.mutate({id:we.id,status:he},{onSuccess:$e=>{tt({text:$e?.message||l("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:$e=>{console.error("Update appointment status error:",$e);const Ve=$e?.response?.data?.message||$e?.message||l("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");Me({text:Ve})}}))})},jt=we=>{dt({title:l("Delete Appointment?","kivicare-clinic-management-system"),text:l("You're about to delete this appointment. This action cannot be undone.","kivicare-clinic-management-system"),confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep appointment","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(he=>{he.isConfirmed&&(ft({title:l("Deleting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),me.mutate(we,{onSuccess:Re=>{tt({text:Re?.message||l("Appointment has been deleted successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Delete appointment error:",Re);const $e=Re?.response?.data?.message||Re?.message||l("Failed to delete appointment. Please try again.","kivicare-clinic-management-system");Me({text:$e})}}))})},ot=(we,he)=>{dt({title:l("Cancel Appointment","kivicare-clinic-management-system"),text:l("Are you sure you want to cancel this appointment?","kivicare-clinic-management-system"),confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-warning",icon:"ph-warning",iconColor:"text-warning",bgIconColor:"bg-warning"}).then(Re=>{Re.isConfirmed&&(ft({title:l("Canceling...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),te.mutate({id:we,status:he},{onSuccess:$e=>{tt({text:l("Appointment cancelled successfully.","kivicare-clinic-management-system")})},onError:$e=>{console.error("Cancel appointment error:",$e);const Ve=$e?.response?.data?.message||$e?.message||l("Failed to cancel appointment. Please try again.","kivicare-clinic-management-system");Me({text:Ve})}}))})},wt=()=>{F()},Wt=({id:we})=>{dt({title:l("Regenerate Video Conference Link","kivicare-clinic-management-system"),text:l("Are you sure you want to regenerate the video conference link for this appointment?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, regenerate","kivicare-clinic-management-system"),cancelButtonText:l("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(he=>{he.isConfirmed&&(ft({title:l("Regenerating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),Y.mutate(we,{onSuccess:Re=>{tt({text:Re?.message||l("Video conference link has been regenerated successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Regenerate video conference error:",Re);const $e=Re?.response?.data?.data?.error||Re?.message||l("Failed to regenerate video conference link. Please try again.","kivicare-clinic-management-system");Me({text:$e})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("div",{children:!t&&i.jsx(Si,{})}),!v&&w&&i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap",children:i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>T(!0),children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Appointments","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[r("appointment_add")&&i.jsxs(ht,{to:e?`/patient/profile/${e}/appointments/add`:"/appointments/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Appointment","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>_(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!C,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:R,children:i.jsxs("div",{ref:R,className:"position-absolute top-0  w-100 d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(lt,{className:"react-select-box",classNamePrefix:"react-select",options:I,value:I.find(we=>we.value===oe.timeFrame),isSearchable:!1,styles:{menuPortal:we=>({...we,zIndex:9999})},onChange:we=>ne(he=>({...he,timeFrame:we.value}))}),i.jsxs(Qd,{children:[i.jsx(Wn,{onChange:we=>{if(we.length===2){const[he,Re]=we,$e=Xe=>{const xt=Xe.getFullYear(),Gt=String(Xe.getMonth()+1).padStart(2,"0"),Ln=String(Xe.getDate()).padStart(2,"0");return`${xt}-${Gt}-${Ln}`},Ve=$e(he),Fe=$e(Re);ne(Xe=>({...Xe,timeFrame:"all",date_from:Ve,date_to:Fe,page:1}))}},value:oe.date_from&&oe.date_to?[Xn(oe.date_from),Xn(oe.date_to)]:null,options:{mode:"range",dateFormat:vi(window.kc_frontend.date_format),locale:Kn()},className:"form-control",placeholder:l("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:oe.date_from&&oe.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{ne(he=>({...he,date_from:"",date_to:"",page:1}));const we=document.querySelector('.form-control[placeholder="Select date range"]');we&&we._flatpickr&&we._flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:oe.search,onChange:we=>{const he=we.target.value;ne(Re=>({...Re,search:he,page:1}))}})]})}),r("appointment_export")&&w&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:kt,disabled:Te.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:At,disabled:Te.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:De,disabled:Te.isPending||qt,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:J,columns:fe,isLoading:K,error:B,currentPage:Q.currentPage,perPage:Q.perPage,totalItems:Q.total,lastPage:Q.lastPage,onPageChange:we=>ne(he=>({...he,page:we})),onPerPageChange:we=>ne(he=>({...he,perPage:we,page:1})),sorting:W,onSortingChange:ge,manualSorting:!0,enableSelection:!v,bulkActions:v?[]:[{label:l("Delete","kivicare-clinic-management-system"),action:(we,he)=>{const Re=we.map($e=>$e.id);dt({title:l("Delete Appointments?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${we.length} appointments</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep appointments","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then($e=>{$e.isConfirmed&&(ft({title:l("Deleting Appointments...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected appointments.<br>This won't take long.","kivicare-clinic-management-system")}),Ce.mutate(Re,{onSuccess:Ve=>{he&&he(),tt({title:l("Appointment Deleted","kivicare-clinic-management-system"),text:l(`${we.length} appointment${we.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to appointments","kivicare-clinic-management-system")})},onError:Ve=>{console.error("Bulk delete appointments error:",Ve);const Fe=Ve?.response?.data?.message||Ve?.message||l("Failed to delete selected appointments. Please try again.","kivicare-clinic-management-system");Me({text:Fe})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:P,moduleNamePlural:"appointments",skeletonRows:5,className:"kc-appointments-list"})]}),i.jsx(na,{show:k,onHide:()=>_(!1),queryParams:oe,onApplyFilters:Je,onResetFilters:nt,title:l("Filters","kivicare-clinic-management-system"),fields:_e,hasAppliedFilters:ze,width:"550px"}),w&&i.jsx(qr,{show:j,onHide:()=>T(!1),onReopenImport:()=>T(!0),onDataRefresh:wt,context:"appointments"}),i.jsx(lJ,{show:N,onHide:()=>E(!1),appointment:A})]})};function YR({Formwatch:t,summaryData:e,summaryLoading:n,summaryError:s,className:a={}}){const[r,o]=f.useState(!0),{getPriceFormat:c}=mt(),d=t("service"),m=f.useMemo(()=>{const u={};return(e?.applied_taxes||[]).forEach(p=>{if(p.tax_name)if(u[p.tax_name])u[p.tax_name].count+=1,u[p.tax_name].totalAmount+=Number(p.tax_amount);else{let h=1;parseInt(p.tax_value)/parseInt(p.tax_amount)>1&&p.type==="fixed"&&(h=Math.ceil(parseInt(p.tax_value)/parseInt(p.tax_amount))),u[p.tax_name]={...p,count:h,totalAmount:Number(p.tax_amount)}}}),Object.values(u)},[e?.applied_taxes]);return!d||d.length===0?i.jsx(Ct,{className:a,children:i.jsx(Ct.Body,{className:"text-center",children:i.jsxs("p",{children:[" ",l("No Service Is Selected","kivicare-clinic-management-system")," "]})})}):n?i.jsx(Ct,{className:a,children:i.jsx(xk,{})}):s?i.jsx(Ct,{className:a,children:i.jsx(Ct.Body,{className:"text-danger",children:l("Failed to load appointment summary.","kivicare-clinic-management-system")})}):i.jsx(Ct,{className:a,children:i.jsxs(Ct.Body,{children:[e?.services?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:u.title}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(u.price)})})]},p)),e?.applied_taxes?.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(e?.subtotal)})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 cursor-pointer applied-tax",onClick:()=>o(!r),children:[i.jsx("div",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{class:"ph ph-caret-up  fw-semibold rotated"}),i.jsx("p",{className:"m-0 text-danger",children:c(e?.tax)})]})]}),i.jsx(f_,{in:r,children:i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:m?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("div",{className:"font-size-14",children:[u.tax_name," ",u.count>1?` x${u.count}`:""," ",u.tax_type=="percentage"?`(${u.tax_value}%)`:""]}),i.jsx("div",{className:"text-end text-danger font-size-14 m-0",children:c(u.totalAmount)})]},p))})]})})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx("div",{children:i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")})}),i.jsx("div",{children:i.jsx("h5",{className:"m-0 text-primary",children:c(e?.grand_total)})})]})]})})}function vJ({showConfirmationModel:t,handleCloseConfirmationModel:e,handleConfirmAppointment:n,confirmationData:s,isSubmitting:a,setValue:r}){const{getPriceFormat:o,paymentGateway:c}=mt(),{clinicName:d,doctorName:m,service:u,date:p,time:h,grandTotal:g}=s||{},v=c?.map(x=>({value:x.id,label:x.name}));return i.jsx(rt,{show:t,onHide:e,backdrop:"static",keyboard:!1,centered:!0,size:"md",children:i.jsxs(rt.Body,{className:"appointment-confirmation-model",children:[i.jsx("div",{className:"d-flex justify-content-center mb-5 pb-lg-4 pb-0",children:i.jsx("div",{class:"modal-custom-icon",children:i.jsx("i",{class:"ph ph-question-mark text-primary"})})}),i.jsxs("div",{className:"text-center mb-5",children:[i.jsx("h4",{children:l("Confirm your Appointment","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Please review the details below to ensure everything is correct before proceeding.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"p-4 bg-body rounded-3 mb-3",children:[i.jsx("h6",{className:"pb-3 mb-4 border-bottom",children:l("Appointment Summary:","kivicare-clinic-management-system")}),i.jsxs(Qn,{className:"gy-2",children:[i.jsx(_t,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Clinic:","kivicare-clinic-management-system")})}),i.jsx(_t,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:d||l("N/A","kivicare-clinic-management-system")})}),i.jsx(_t,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Doctor:","kivicare-clinic-management-system")})}),i.jsx(_t,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:m||l("N/A","kivicare-clinic-management-system")})}),i.jsx(_t,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Service:","kivicare-clinic-management-system")})}),i.jsx(_t,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:Array.isArray(u)?u.map(x=>x.label).join(", "):u?.label||l("N/A","kivicare-clinic-management-system")})}),i.jsx(_t,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Date and Time:","kivicare-clinic-management-system")})}),i.jsx(_t,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:p&&h?`${p}, ${h}`:l("N/A","kivicare-clinic-management-system")})}),i.jsx(_t,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Price:","kivicare-clinic-management-system")})}),i.jsx(_t,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:g?o(g):l("Free","kivicare-clinic-management-system")})})]})]}),Number(g)>0&&i.jsxs("div",{children:[i.jsx("label",{children:l("Payment Gateway:","kivicare-clinic-management-system")}),i.jsx(lt,{options:v,onChange:x=>{r("payment_gateway",x.value)},className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:x=>({...x,zIndex:9999})}})]}),i.jsxs("div",{className:"d-flex justify-content-center gap-lg-4 gap-2 mt-5 pt-lg-2 pt-0",children:[i.jsx(Zt,{variant:"secondary",onClick:e,disabled:a,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:n,disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Confirming...","kivicare-clinic-management-system")]}):l("Confirm","kivicare-clinic-management-system")})]})]})})}const xJ={getSchedules:(t={})=>ve({endpoint:"clinic-schedules",method:"GET",data:t}),getSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"GET"}),createSchedule:t=>ve({endpoint:"clinic-schedules",method:"POST",data:t}),updateSchedule:(t,e)=>ve({endpoint:`clinic-schedules/${t}`,method:"PUT",data:e}),deleteSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"DELETE"}),getunavailableSchedule:(t={})=>ve({endpoint:"clinic-schedules/get-unavailable-schedule",method:"GET",data:t})},zd={all:["clinicSchedules"],lists:()=>[...zd.all,"list"],list:t=>[...zd.lists(),{filters:t}],details:()=>[...zd.all,"detail"],detail:t=>[...zd.details(),t]},yJ=(t={},e={})=>gt({queryKey:zd.list(t),queryFn:()=>xJ.getunavailableSchedule(t),...e}),bJ=()=>Fr(()=>import("./index-B0HAhLET.js"),[],import.meta.url),wJ=We.lazy(()=>Fr(()=>import("./react-stripe.esm-CPL41387.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckoutProvider}))),kJ=We.lazy(()=>Fr(()=>import("./react-stripe.esm-CPL41387.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckout}))),jJ=t=>{if(!t)return{isValid:!1,error:l("No appointment data provided","kivicare-clinic-management-system")};const{publishable_key:e,client_secret:n}=t;return e?n?e.startsWith("pk_")?n.includes("_secret_")?{isValid:!0,error:null}:{isValid:!1,error:l("Invalid Stripe client secret format","kivicare-clinic-management-system")}:{isValid:!1,error:l("Invalid Stripe publishable key format","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Stripe client secret","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Stripe publishable key","kivicare-clinic-management-system")}},NJ=()=>{let t=null;try{t=mn()}catch{}return f.useEffect(()=>{Fr(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url).catch(e=>console.warn("Failed to load payment gateway styles:",e))},[]),t},CJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const r=NJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState(null),[v,x]=f.useState(null),[y,b]=f.useState(!0),w=LR();f.useImperativeHandle(a,()=>({updateAppointmentData:j=>{c(j)}}),[]);const k=()=>{w.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,session_id:o.payment_response.data.payment_id,method:"POST"}).then(j=>{j.data.status=="success"?(Ee.success(j?.data?.message||l("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),e?setTimeout(()=>{e(j)},1500):r&&setTimeout(()=>{r("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Ee.error(j?.data?.message||l("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),n?n(j):r&&r("/appointments/add",{replace:!0}))})},_=()=>{$t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep paying","kivicare-clinic-management-system")}).then(async j=>{if(j.isConfirmed)try{const T=window.kc_frontend?.rest_url||"/wp-json/",N=o?.appointment_id,E=o?.payment_response?.gateway||"stripe";await fetch(`${T}kivicare/v1/appointments/payment-cancel?appointment_id=${N}&gateway=${E}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Ee.success(l("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),setTimeout(()=>{n?n():r&&r("/appointments",{replace:!0})},1e3)}catch(T){console.error("Error cancelling appointment:",T),p(!1)}})};return f.useEffect(()=>{const j=async()=>{try{b(!0),x(null);const T=jJ(o.payment_response?.data);if(!T.isValid){x(T.error);return}const N=await bJ();g(N);const E=await N.loadStripe(o.payment_response?.data?.publishable_key);if(!E){x(l("Failed to load Stripe. Please check your connection and try again.","kivicare-clinic-management-system"));return}m(E)}catch(T){console.error("Error initializing Stripe:",T),x(l("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{b(!1),p(!0)}};if(!o){p(!1);return}j()},[o]),i.jsx(rt,{show:u,centered:!0,size:"xl",animation:!0,onHide:()=>_(),backdrop:"static",keyboard:!1,className:"kivicare-payment-gateway-modal",...s,children:i.jsxs(rt.Body,{className:"position-relative",children:[i.jsx("button",{className:"close-btn",onClick:()=>_(),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})}),d&&h&&i.jsx(We.Suspense,{fallback:i.jsx(Ng,{}),children:i.jsx(wJ,{stripe:d,options:{clientSecret:o?.payment_response?.data?.client_secret,onComplete:k},children:i.jsx(kJ,{})})})]})})}),SJ=t=>{if(!t)return{isValid:!1,error:l("No appointment data provided","kivicare-clinic-management-system")};const{key_id:e,order_id:n,amount:s,currency:a}=t;return e?n?!s||isNaN(s)?{isValid:!1,error:l("Invalid amount","kivicare-clinic-management-system")}:a?{isValid:!0,error:null}:{isValid:!1,error:l("Missing currency","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Razorpay order ID","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Razorpay key ID","kivicare-clinic-management-system")}},_J=()=>{let t=null;try{t=mn()}catch{}return t},EJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const r=_J(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),h=LR();f.useImperativeHandle(a,()=>({updateAppointmentData:v=>{c(v)}}),[]);const g=async()=>{if((await $t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep paying","kivicare-clinic-management-system")})).isConfirmed)try{const x=window.kc_frontend?.rest_url||"/wp-json/",y=o?.appointment_id,b=o?.payment_response?.gateway||"razorpay";await fetch(`${x}kivicare/v1/appointments/payment-cancel?appointment_id=${y}&gateway=${b}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Ee.success(l("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{n?n():r&&r("/appointments",{replace:!0})},1e3)}catch(x){console.error("Error cancelling appointment:",x),n?n():r&&r("/appointments",{replace:!0})}};return f.useEffect(()=>{const v=async()=>{try{p(!0),m(null);const x=SJ(o.payment_response?.data);if(!x.isValid){m(x.error);return}const y=o.payment_response?.data;if(await(_=>new Promise((j,T)=>{const N=document.createElement("script");N.src=_,N.onload=()=>j(!0),N.onerror=()=>T(new Error("Failed to load Razorpay SDK")),document.body.appendChild(N)}))("https://checkout.razorpay.com/v1/checkout.js"),!window.Razorpay)throw new Error("Razorpay SDK failed to load");const w={key:y.key_id,currency:y.currency.toUpperCase(),order_id:y.order_id,handler:function(_){h.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,payment_id:_.razorpay_payment_id,razorpay_order_id:_.razorpay_order_id,razorpay_signature:_.razorpay_signature,method:"POST"}).then(j=>{j.data.status==="success"?(Ee.success(j?.data?.message||l("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{e?e(j):r&&r("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Ee.error(j?.data?.message||l("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n(j):r&&r("/appointments/add",{replace:!0}))}).catch(j=>{Ee.error(l("Payment processing failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n():r&&r("/appointments/add",{replace:!0})})},modal:{ondismiss:function(){g()}},prefill:{name:o.patient_name||"",email:o.patient_email||"",contact:o.patient_contact||""},notes:{appointment_id:o.appointment_id,transaction_ref:y.transaction_ref},theme:{color:"#3399cc"}};new window.Razorpay(w).open()}catch(x){console.error("Error initializing Razorpay:",x),m(l("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{p(!1)}};o&&v()},[o]),i.jsxs(i.Fragment,{children:[u&&i.jsxs("div",{className:"text-center",children:[i.jsx(Ng,{animation:"border"}),i.jsx("p",{children:l("Loading Razorpay...","kivicare-clinic-management-system")})]}),d&&i.jsx("div",{className:"alert alert-danger",children:d})]})}),El={getCustomForms:(t={})=>ve({endpoint:"custom-forms/admin",method:"GET",data:t}),getCustomFormsRender:(t={})=>ve({endpoint:"custom-forms/render",method:"GET",data:t}),getCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"GET"}),createCustomForm:t=>ve({endpoint:"custom-forms",method:"POST",data:t}),updateCustomForm:(t,e)=>ve({endpoint:`custom-forms/${t}`,method:"PUT",data:e}),deleteCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"DELETE"}),getCustomFormStats:(t={})=>ve({endpoint:"custom-forms/stats",method:"GET",data:t}),bulkDeleteCustomForms:t=>ve({endpoint:"custom-forms/bulk-delete",method:"POST",data:{ids:t}}),updateCustomFormStatus:(t,e)=>ve({endpoint:`custom-forms/${t}/status`,method:"PUT",data:{status:e}}),getCustomFormTableConfig:()=>ve({endpoint:"custom-forms/table-config",method:"GET"}),submitCustomForm:t=>ve({endpoint:"custom-forms/submit",method:"POST",data:t})},ji={all:["custom-forms"],lists:()=>[...ji.all,"list"],list:t=>[...ji.lists(),{filters:t}],details:()=>[...ji.all,"detail"],detail:t=>[...ji.details(),t],tableConfig:()=>[...ji.all,"table-config"]},TJ=(t={},e={})=>gt({queryKey:ji.list(t),queryFn:()=>El.getCustomForms(t),...e}),od=(t={},e={})=>gt({queryKey:ji.list(t),queryFn:()=>El.getCustomFormsRender(t),...e}),QR=(t,e={})=>gt({queryKey:ji.detail(t),queryFn:()=>El.getCustomForm(t),enabled:!!t,...e}),AJ=(t={})=>{const e=Ke();return He({mutationFn:n=>El.createCustomForm(n),onSuccess:n=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(n.id),n)},...t})},DJ=(t={})=>{const e=Ke();return He({mutationFn:({id:n,...s})=>El.updateCustomForm(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},RJ=(t={})=>{const e=Ke();return He({mutationFn:n=>El.deleteCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.removeQueries({queryKey:ji.detail(s)})},...t})},PJ=(t={})=>{const e=Ke();return He({mutationFn:({id:n,status:s})=>El.updateCustomFormStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},MJ=(t={})=>{const e=Ke();return He({mutationFn:n=>El.submitCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()})},...t})},Ga=f.forwardRef(({fields:t,data:e={},readOnly:n=!0,onChange:s,formId:a},r)=>{const{control:o,handleSubmit:c,watch:d,reset:m,trigger:u,formState:{errors:p,isValid:h,isDirty:g}}=Jt({defaultValues:e,mode:"onBlur",reValidateMode:"onBlur"}),v=d(),[x,y]=f.useState({isValid:!0,errors:{}}),b=f.useRef(p);f.useEffect(()=>{b.current=p},[p]);const w=f.useCallback(async()=>{const T=await u();await new Promise(A=>setTimeout(A,100));const N=b.current,E={isValid:T,errors:N};return y(E),E},[u]);f.useImperativeHandle(r,()=>({validateForm:async()=>(await w()).isValid,getFormData:()=>v,getFormErrors:()=>x.errors,getFormValidationState:()=>x,isFormValid:()=>x.isValid,resetForm:(T={})=>{m(T),y({isValid:!0,errors:{}})},triggerValidation:async()=>await w()}),[v,x,w,m]),f.useEffect(()=>{Object.keys(p).length>0&&y(T=>({...T,errors:p,isValid:!1}))},[p]),f.useEffect(()=>{s&&s(v)},[v,s]);const k=T=>{const N={};return T.required&&(N.required=T.errorMessage||l("This field is required","kivicare-clinic-management-system")),T.type==="email"&&(N.pattern={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}),T.type==="number"&&(T.min!==void 0&&(N.min={value:T.min,message:l(`Minimum value is ${T.min}`,"kivicare-clinic-management-system")}),T.max!==void 0&&(N.max={value:T.max,message:l(`Maximum value is ${T.max}`,"kivicare-clinic-management-system")})),T.minLength&&(N.minLength={value:T.minLength,message:l(`Minimum length is ${T.minLength} characters`,"kivicare-clinic-management-system")}),T.maxLength&&(N.maxLength={value:T.maxLength,message:l(`Maximum length is ${T.maxLength} characters`,"kivicare-clinic-management-system")}),T.pattern&&(N.pattern={value:new RegExp(T.pattern),message:T.patternMessage||l("Invalid format","kivicare-clinic-management-system")}),T.validate&&(N.validate=T.validate),N},_=T=>{if(n)return j(T);const N=k(T),E=!!p[T.id],A=p[T.id]?.message,L={id:`${a}_${T.id}`,isInvalid:E,"aria-describedby":E?`${a}_${T.id}_feedback`:void 0};switch(T.type){case"textarea":return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsx(Pt.Control,{as:"textarea",rows:3,...P,placeholder:T.placeholder,...L})}),E&&i.jsx(Pt.Control.Feedback,{id:`${L.id}_feedback`,type:"invalid",style:{display:"block"},children:A})]});case"select":return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsx(lt,{value:T.options?.find(R=>R===P.value)?{label:T.options.find(R=>R===P.value),value:P.value}:null,onChange:R=>P.onChange(R?.value||""),onBlur:P.onBlur,options:T.options?.map(R=>({label:R,value:R}))||[],placeholder:T.placeholder||l("Select an option","kivicare-clinic-management-system"),className:`react-select-box ${E?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})},...L})}),E&&i.jsx("div",{id:`${L.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"radio":return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsx("div",{className:E?"is-invalid":"",children:T.options?.map((R,M)=>i.jsx(Pt.Check,{id:M===0?L.id:`${L.id}_${M}`,inline:!0,type:"radio",label:R,name:T.id,value:R,checked:P.value===R,onChange:O=>P.onChange(O.target.value),onBlur:P.onBlur,isInvalid:E},M))})}),E&&i.jsx("div",{id:`${L.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"checkbox":return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsx(Pt.Check,{type:"checkbox",label:T.placeholder||T.label,checked:!!P.value,onChange:R=>P.onChange(R.target.checked),onBlur:P.onBlur,isInvalid:E,...L})}),E&&i.jsx("div",{id:`${L.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"file":const C=T.fileTypes&&T.fileTypes.length>0?T.fileTypes.map(P=>P.id||P).join(","):"";return i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>{const R=P.value,M=R&&(R.url||R.name);return i.jsx(ou,{id:`custom-form-field-${T.id}`,name:T.id,accept:C,required:T.required,defaultFile:M?R.url:"",defaultFileId:M?R.id:"",onChange:(O,q)=>{P.onChange({id:q,url:O.url,name:O.filename||O.name})},errors:p,readOnly:n})}});case"date":return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Wn,{className:`form-control ps-3 pe-5 ${E?"is-invalid":""}`,placeholder:T.placeholder,style:{display:"none"},options:We.useMemo(()=>({dateFormat:"Y-m-d",altInput:!0,altFormat:vi(window.kc_frontend.date_format),disableMobile:!0,locale:Kn()}),[]),...L,value:P.value||"",onChange:async R=>{const M=R[0]?qa(R[0]):"";P.onChange(M),await u(T.id)}}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]})}),E&&i.jsx("div",{id:`${L.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});default:return i.jsxs(i.Fragment,{children:[i.jsx(be,{name:T.id,control:o,rules:N,render:({field:P})=>i.jsx(Pt.Control,{type:T.type,...P,placeholder:T.placeholder,...L})}),E&&i.jsx(Pt.Control.Feedback,{id:`${L.id}_feedback`,type:"invalid",children:A})]})}},j=T=>{const N=v[T.id];if(N==null||N==="")return i.jsx("div",{className:" small",children:i.jsx("em",{children:l("No data","kivicare-clinic-management-system")})});switch(T.type){case"textarea":return i.jsx("div",{className:"font-size-14 h6 mb-0 text-prewrap",children:N});case"select":{const E=T.options?.find(A=>A===N);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:E||N})}case"radio":{const E=T.options?.find(A=>A===N);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:E||N})}case"checkbox":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N?l("Yes","kivicare-clinic-management-system"):l("No","kivicare-clinic-management-system")});case"file":return N?N instanceof File?i.jsxs("div",{className:"font-size-14 h6 mb-0",children:[i.jsx("div",{children:N.name}),i.jsxs("small",{children:[(N.size/1024).toFixed(2)," KB"]})]}):i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0 text-primary",children:l("View File","kivicare-clinic-management-system")}):i.jsx("div",{className:"small",children:i.jsx("em",{children:l("No file","kivicare-clinic-management-system")})});case"date":try{const E=new Date(N);if(!isNaN(E.getTime())){const A=E.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return i.jsx("div",{className:"font-size-14 h6 mb-0",children:A})}}catch{}return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N});case"email":return i.jsx("a",{href:`mailto:${N}`,className:"d-block font-size-14 h6 mb-0",children:N});case"tel":case"phone":return i.jsx("a",{href:`tel:${N}`,className:"d-block font-size-14 h6 mb-0",children:N});case"url":return i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0",children:N});case"number":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:Number(N).toLocaleString()});default:return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N})}};return!t||t.length===0?i.jsx("div",{children:l("No fields to display","kivicare-clinic-management-system")}):i.jsx("div",{className:`custom-form-container ${n?"bg-body p-3 rounded":""}`,children:i.jsx(Qn,{className:"gy-3",children:t.map(T=>i.jsx(_t,{className:`${T.columnClass} custom-form-border-end `,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:`form-label ${n?"text-body":""}`,htmlFor:`${a}_${T.id}`,children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:PR(T.label)}}),T.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),_(T)]})},T.id))})})});Ga.displayName="CustomFormRenderer";const IJ=({label:t,value:e,onChange:n,placeholder:s="",type:a="text",isDisable:r=!1,error:o=null,showError:c=!0,className:d="",hasTooltip:m=!1,hasUrl:u="",name:p="",key:h="",required:g=!1,register:v=()=>{},...x})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[(t||g||m)&&i.jsx(i.Fragment,{children:i.jsxs("label",{className:"form-label",children:[t,g&&i.jsx("span",{className:"input-field-required text-danger",children:"*"}),m&&i.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5"})})]})}),i.jsx("input",{name:p,type:a,className:`form-control ${d}`,placeholder:s,value:e,onChange:y=>n(y.target.value),disabled:r,...v(p,{required:g}),...x},h)]}),o&&c&&i.jsx("div",{className:"text-danger",children:o?.message||l("This field is required","kivicare-clinic-management-system")})]}),Ht=f.memo(IJ),sn=({label:t,checked:e,onChange:n,badge:s=null,className:a="",disabled:r=!1,error:o=null,inputClassName:c="",...d})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:`form-check form-switch custom-switch-xl p-0 d-flex align-items-md-center justify-content-between column-gap-3 row-gap-1 flex-md-row flex-column ${a}`,children:[t&&i.jsxs("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label m-0 h6 font-size-14",children:[i.jsx("span",{className:"mb-0 font-size-14",children:t}),s&&i.jsx("span",{className:`badge rounded-pill ${s.className}`,children:s.text})]}),i.jsx("input",{className:`form-check-input ${c}`,type:"checkbox",role:"switch",checked:e==="on"||e===!0,onChange:m=>{const u=m.target.checked;n(typeof e=="string"?u?"on":"off":!!u)},disabled:r,...d})]}),o&&i.jsx("div",{className:"text-danger",children:o.message})]}),mC=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],Zv=()=>{};function OJ(t){function e(a){const r={},o={},c=mC.map(d=>d.key);return Object.entries(a).forEach(d=>{let[m,u]=d;c.includes(m)&&We.isValidElement(u)?(r[m]=u,o[m]=" "):o[m]=u}),[r,o]}function n(a,r){Object.entries(r).forEach(o=>{let[c,d]=o;const u=mC.find(h=>h.key===c).getter(t),p=xI.createRoot(u);p.render(d),a.__roots.push(p)})}function s(a){a.__roots.forEach(r=>{r.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(We.isValidElement(a[0])||We.isValidElement(a[1])){const r={};return["title","html","icon"].forEach((o,c)=>{a[c]!==void 0&&(r[o]=a[c])}),r}else return t.argsToParams(a)}_main(a,r){this.__roots=[],this.__params=Object.assign({},r,a);const[o,c]=e(this.__params),d=c.willOpen||Zv,m=c.didOpen||Zv,u=c.didDestroy||Zv;return super._main(Object.assign({},c,{willOpen:p=>{n(this,o),d(p)},didOpen:p=>{setTimeout(()=>{m(p)})},didDestroy:p=>{u(p),s(this)}}))}update(a){Object.assign(this.__params,a),s(this);const[r,o]=e(this.__params);super.update(o),n(this,r)}}}const ZR=OJ($t),Xv={patient:"/patient",doctor:"/doctor",receptionist:"/receptionist",appointments:"/appointments",encounter:"/encounter",clinic:"/clinic",service:"/service","doctor-session":"/doctor-session",tax:"/tax",billings:"/billings"},ei=({text:t=l("Back","kivicare-clinic-management-system"),className:e="",size:n="",variant:s="primary",iconClass:a="ph ph-caret-left",showIcon:r=!0,style:o={},...c})=>{const d=mn(),m=Gn(),u=m.pathname.replace(/\/$/,"");if(Object.values(Xv).includes(u)||u==="")return null;const p=()=>{if(window.history.state&&window.history.state.idx>0){d(-1);return}let v="/";const x=m.pathname.split("/").filter(Boolean);for(const y of x)if(Xv[y]){v=Xv[y];break}d(v,{replace:!0})},h=n?`btn-${n}`:"",g=["btn","d-flex align-items-center gap-1 back-btn",`btn-${s}`,h,"fw-semibold",e].filter(Boolean).join(" ");return i.jsxs("button",{type:"button",className:g,onClick:p,style:o,...c,children:[r&&i.jsx("i",{className:`${a}`}),i.jsx("span",{className:"font-size-14",children:t})]})},Ta=We.forwardRef(({title:t,children:e,helpUrl:n=null,footer:s=null,headerActions:a=null,className:r="",...o},c)=>i.jsx("div",{className:`card ${r}`,ref:c,...o,children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[t,n&&i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"ms-2 d-inline-flex align-items-center p-0 ",children:i.jsx("i",{className:"ph ph-question align-middle h6 text-primary"})})]}),a&&i.jsx("div",{children:a})]}),e,s&&i.jsx("div",{className:"mt-3",children:s})]})})),ef=f.forwardRef(({id:t="kc-image-upload-input",name:e="image",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:r,className:o="",disabled:c=!1,required:d=!1,label:m="",register:u,setValue:p,errors:h={},accept:g,allowFile:v=!1,...x},y)=>{const[b,w]=f.useState(n),[k,_]=f.useState(s),[j,T]=f.useState(!1),[N,E]=f.useState(!1),[A,L]=f.useState(null),C=f.useRef(null),P=f.useRef(null),R=h[e],M=!!b,O={};d&&(O.required=l("This field is required","kivicare-clinic-management-system"));const{ref:q,...U}=u?u(e,O):{ref:null},H=!!R||!!A,ae=R?.message||A;f.useEffect(()=>{T(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{w(n||""),_(s||"")},[n,s]),f.useEffect(()=>{s&&ge(n||"",s)},[s]);const V=async G=>{try{E(!0),L(null);const le=window.kc_frontend?.rest_url,re=await ve({endpoint:`${le}/wp/v2/media`,method:"POST",data:G,isFile:!0});if(!re||re.success===!1)throw new Error(re?.message||l("Failed to upload image","kivicare-clinic-management-system"));return w(re.source_url),_(re.id),ge(re.source_url,re.id),a&&a({id:re.id,url:re.source_url,filename:re.title?.raw||"",type:re.media_type,subtype:re.mime_type,size:re.media_details?.filesize||0},re.id),re}catch(le){throw console.error("Error uploading image:",le),L(le.message||l("Failed to upload image","kivicare-clinic-management-system")),le}finally{E(!1)}},pe=G=>{if(G.preventDefault(),!window.wp||!window.wp.media){P.current&&P.current.click();return}L(null);const le=window.wp.media({title:l("Select or Upload Image","kivicare-clinic-management-system"),button:{text:l("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:v?"":"image"}});le.on("select",function(){const re=le.state().get("selection").first().toJSON();if(!v&&re.type!=="image"){L(l("Please select an image file","kivicare-clinic-management-system"));return}w(re.url),_(re.id),ge(re.url,re.id),a&&a({id:re.id,url:re.url,filename:re.filename,type:re.type,subtype:re.subtype,size:re.filesizeInBytes},re.id)}),le.open()},oe=async G=>{const le=G.target.files[0];if(le){if(L(null),!v&&!le.type.startsWith("image/")){L(l("Please select an image file","kivicare-clinic-management-system"));return}try{if(!v||le.type.startsWith("image/")){const re=URL.createObjectURL(le);w(re)}else w(le.name);_(""),ge(!v||le.type.startsWith("image/")?URL.createObjectURL(le):"",""),a&&a({url:!v||le.type.startsWith("image/")?URL.createObjectURL(le):"",filename:le.name,type:le.type,size:le.size,file:le},""),j||await V(le)}catch(re){console.error("Error handling file:",re)}}},ne=G=>{if(c){G.preventDefault();return}N||(j?pe(G):P.current&&P.current.click())},se=G=>{if(c){G.preventDefault();return}j?pe(G):P.current&&P.current.click()},W=()=>{w(""),_(""),L(null),ge("",""),P.current&&(P.current.value=""),r&&r()};f.useImperativeHandle(y,()=>({clearImage:W}));const ge=(G="",le="")=>{if(C.current)try{if(C.current.value=le,U&&typeof U.onChange=="function")try{U.onChange({target:{value:le},currentTarget:{value:le}})}catch{}try{const re=new Event("input",{bubbles:!0});C.current.dispatchEvent(re);const D=new Event("change",{bubbles:!0});C.current.dispatchEvent(D)}catch{}}catch{}a&&a({id:le,url:G,filename:"",type:"image",size:0},le);try{typeof p=="function"&&(p(e,G),p(`${e}Id`,le))}catch{}},ee=G=>{G.preventDefault(),G.stopPropagation(),!(c||N)&&W()},ie=G=>{C.current=G,q&&q(G)},ue=g||(v?void 0:"image/*");return i.jsxs("div",{className:`form-group mb-3 ${o}`,children:[m&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[m,d&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsxs("div",{className:`kc-image-upload ${M?"uploaded":""} ${N?"uploading":""} ${H?"is-invalid":""}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,...U,value:k||"",ref:ie,readOnly:!0,disabled:c}),i.jsx("input",{type:"file",id:t,className:"kc-image-upload-input d-none",onChange:oe,accept:ue,ref:P,disabled:N||c,"aria-invalid":H?"true":"false","aria-describedby":H?`${t}-error`:void 0}),i.jsx("div",{className:`kc-image-upload-label ${H?"border-danger":""}  ${c?"disabled":""}`,onClick:ne,style:c?{pointerEvents:"none",opacity:.6}:{},children:M?i.jsxs("span",{className:"kc-image-uploaded-image-container",children:[i.jsx("span",{className:"kc-image-uploaded-image",children:typeof b=="string"&&/\.(jpe?g|png|gif|webp|bmp|svg)$/i.test(b)?i.jsx("img",{src:b,alt:l("uploaded","kivicare-clinic-management-system")}):i.jsx("span",{children:b})}),i.jsxs("div",{className:"upload-actions",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"edit-upload-btn",onClick:se,disabled:N||c,children:N?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"remove-upload-btn",onClick:ee,disabled:N||c,children:i.jsx("i",{className:"ph ph-x"})})})]})]}):i.jsxs("span",{className:"kc-image-upload-image-container",children:[i.jsx("span",{className:"kc-image-upload-image",children:N?i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):v?i.jsx("i",{className:"ph ph-upload-simple"}):i.jsx("i",{className:"ph ph-camera"})}),i.jsx("span",{className:"upload-text",children:N?l("Uploading...","kivicare-clinic-management-system"):j&&!v?l("Choose Image","kivicare-clinic-management-system"):l("Choose file","kivicare-clinic-management-system")})]})}),H&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:ae})]})]})});ef.propTypes={id:Pe.string,name:Pe.string,defaultImage:Pe.string,defaultImageId:Pe.oneOfType([Pe.string,Pe.number]),onChange:Pe.func,onClear:Pe.func,setValue:Pe.func,className:Pe.string,disabled:Pe.bool,required:Pe.bool,label:Pe.string,register:Pe.func,errors:Pe.object,accept:Pe.string,allowFile:Pe.bool};const Ad=({label:t=l("Select Media","kivicare-clinic-management-system"),value:e,onChange:n,className:s="",preview:a=!0,disabled:r=!1})=>{const o=f.useRef(null),c=f.useRef(null),[d,m]=f.useState(!1),u=async g=>{try{m(!0);const v=window.kc_frontend?.rest_url,x=await ve({endpoint:`${v}/wp/v2/media`,method:"POST",data:g,isFile:!0});if(!x||x.success===!1)throw new Error(x?.message||l("Failed to upload media","kivicare-clinic-management-system"));return n&&n({id:x.id,url:x.source_url,filename:x.title?.raw||"",type:x.media_type,subtype:x.mime_type,size:x.media_details?.filesize||0,width:x.media_details?.width,height:x.media_details?.height}),x}catch(v){console.error("Error uploading media:",v),alert(v.message||l("Failed to upload media","kivicare-clinic-management-system"))}finally{m(!1),c.current&&(c.current.value="")}},p=g=>{if(!window.wp||!window.wp.media){c.current&&c.current.click();return}if(o.current){o.current.open();return}const v=window.wp.media({title:l("Select or Upload Media","kivicare-clinic-management-system"),button:{text:l("Use this media","kivicare-clinic-management-system")},multiple:!1});v.on("select",()=>{const x=v.state().get("selection").first().toJSON();g(x)}),o.current=v,v.open()},h=async g=>{const v=g.target.files[0];v&&await u(v)};return i.jsx(f.Fragment,{children:i.jsxs("div",{className:"row align-items-center",children:[i.jsxs("div",{className:`form-group ${s}`,children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:t})}),i.jsx("input",{className:"form-control",type:"file",style:{cursor:"pointer"},ref:c,onClick:g=>{window.wp&&window.wp.media&&(g.preventDefault(),p(n))},onChange:h,disabled:r||d})]}),a&&e&&(e.url||typeof e=="string")?i.jsx("div",{className:"mt-2 col-md-6",children:i.jsx("img",{src:typeof e=="string"?e:e.url,alt:"media_preview",className:"img-fluid",style:{maxHeight:100}})}):i.jsx("div",{className:"col-md-6 mt-2",children:i.jsx("p",{className:"double-lines-spinner"})})]})})},ci=({text:t,title:e=l("Premium Feature","kivicare-clinic-management-system"),icon:n="ph-lock",className:s="",overlayStyle:a={},contentStyle:r={},link:o=""})=>{const c={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#0000009e",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9,borderRadius:8,...a},d={textAlign:"center",padding:"1.5rem",color:"white",...r};return i.jsx("a",{href:o,className:"text-decoration-none",children:i.jsx("div",{style:c,className:s,children:i.jsxs("div",{style:d,children:[i.jsx("div",{className:"mb-4 fs-1",children:i.jsx("i",{className:`ph ${n} text-white`})}),i.jsx("h4",{className:"text-white mb-3",children:e}),i.jsx("p",{className:"text-white",children:t})]})})})},LJ=({fields:t,data:e,title:n})=>{const s=t||[],a=e||{};if(Object.keys(a).length===0)return null;const r=(o,c)=>{if(c==null||c==="")return null;const d=o?.type;if(d==="multi_select"){let m=[];return c.forEach(u=>{m.push(u?.label)}),i.jsx("span",{className:"text-dark",children:m.join(", ")})}if(d==="file_upload"){let m=c;if(typeof c=="string")try{m=JSON.parse(c)}catch{return i.jsx("span",{className:"text-dark",children:c})}if(m&&typeof m=="object"&&m.url)return i.jsx("a",{href:m.url,download:!0,className:"text-primary text-decoration-underline",style:{cursor:"pointer"},children:m.name||l("Download File","kivicare-clinic-management-system")})}return Array.isArray(c)?i.jsx("span",{className:"text-dark",children:c.join(", ")}):typeof c=="object"&&c!==null?c.label?i.jsx("span",{className:"text-dark",children:c.label}):c.value?i.jsx("span",{className:"text-dark",children:c.value}):i.jsx("span",{className:"text-dark",children:JSON.stringify(c)}):i.jsx("span",{className:"text-dark",children:String(c)})};return i.jsxs("div",{className:"mt-4  border-top pt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:n||l("Other Information","kivicare-clinic-management-system")}),Object.entries(a).map(([o,c])=>{const d=s.find(p=>p.id==o),m=d?.name||`${l("Field","kivicare-clinic-management-system")} ${o}`,u=r(d,c);return u?i.jsxs("div",{className:"mb-2",children:[i.jsxs("strong",{children:[m,":"]})," ",u]},o):null})]})};function Qp({trigger:t,children:e,placement:n="bottom"}){const[s,a]=f.useState(!1),r=f.useRef(null),o=()=>{r.current&&clearTimeout(r.current),a(!0)},c=()=>{r.current=setTimeout(()=>{a(!1)},50)},d=m=>i.jsx(Ix,{id:"button-tooltip",...m,className:"contact-card-popover border-0 bg-transparent shadow-none",onMouseEnter:o,onMouseLeave:c,children:i.jsx(Ix.Body,{className:"p-0 border-0 bg-transparent",children:i.jsx("div",{className:"contact-card",style:{pointerEvents:"auto",minWidth:"500px"},children:e})})});return i.jsx(Ue,{placement:n,show:s,overlay:d,trigger:["hover","focus"],children:i.jsx("span",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:c,children:t})})}const Tm=({avatar:t,name:e,email:n,phone:s,address:a})=>i.jsxs("div",{className:"contact-card-wrapper",children:[i.jsxs("div",{className:"contact-card-header",children:[t?i.jsx("img",{src:t,className:"contact-card-avatar",alt:e||"Avatar"}):i.jsx("span",{className:"contact-card-avatar-fallback",children:i.jsx($c,{alt:e,size:28})}),i.jsx("div",{className:"contact-card-name heading-color",children:e})]}),(n||s)&&i.jsxs("div",{className:"contact-card-row",children:[n&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("a",{href:`mailto:${n}`,className:"contact-card-link",children:n})]}),s&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{children:s})]})]}),a&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{children:a})]})]});Tm.propTypes={avatar:Pe.string,name:Pe.string.isRequired,email:Pe.string,phone:Pe.string,address:Pe.string,fallbackIcon:Pe.string};const yk={getCustomFieldsByModule:(t={})=>ve({endpoint:"setting/custom-field/by-module",method:"GET",data:t}),saveCustomFieldData:t=>ve({endpoint:"setting/custom-field/save-data",method:"POST",data:t}),getCustomFieldData:(t={})=>ve({endpoint:"setting/custom-field/get-data",method:"GET",data:t})},Uc={all:["customFields"],byModule:(t,e)=>[...Uc.all,"byModule",t,e],data:(t,e)=>[...Uc.all,"data",t,e]},XR=(t,e=null)=>gt({queryKey:Uc.byModule(t,e),queryFn:()=>yk.getCustomFieldsByModule({module_type:t,...e&&{module_id:e}}),enabled:!!t}),bk=()=>{const t=Ke();return He({mutationFn:({moduleType:e,moduleId:n,fieldsData:s})=>yk.saveCustomFieldData({module_type:e,module_id:n,fields_data:s}),onSuccess:(e,n)=>{t.invalidateQueries(Uc.data(n.moduleType,n.moduleId)),t.invalidateQueries(Uc.byModule(n.moduleType,n.moduleId))}})},_y=(t,e,n={})=>gt({queryKey:Uc.data(t,e),queryFn:()=>yk.getCustomFieldData({module_type:t,module_id:e}),enabled:n.enabled!==void 0?n.enabled:!!t&&!!e,...n}),tf=({moduleType:t,moduleId:e=null,control:n,errors:s,setValue:a,watch:r,initialData:o=[]})=>{const[c,d]=f.useState(!1),[m,u]=f.useState(null),{module_config:p={}}=mt()||{};if(p?.custom_fields=="0")return null;const{data:h,isLoading:g,error:v}=XR(t,e),x=bk(),y=h?.data||[],b=f.useMemo(()=>Array.isArray(o)?o:o&&typeof o=="object"?Object.entries(o).map(([N,E])=>({id:Number(N),value:E})):[],[o]);f.useEffect(()=>{b.length>0&&b.forEach(({id:N,value:E})=>{a(`custom_field_${N}`,E,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})})},[b,a]);const w=N=>{const E=b.find(A=>A.id===N);return E?E.value:""},k=N=>N.isRequired==="1"||N.isRequired===!0||N.isRequired===1,_=N=>{if(!t||!e)return;d(!0),u(null);const E={};y.forEach(A=>{const L=`custom_field_${A.id}`,C=N[L];C!==void 0&&(E[A.id]=C)}),x.mutate({moduleType:t,moduleId:e,fieldsData:E},{onSuccess:()=>{u({type:"success",text:l("Custom fields saved successfully","kivicare-clinic-management-system")}),d(!1)},onError:()=>{u({type:"error",text:l("Failed to save custom fields","kivicare-clinic-management-system")}),d(!1)}})};if(!n)return g?i.jsx(Vx,{}):y.length===0?null:i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),y.map(N=>i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"font-size-14 text-muted mb-1",children:[N.name,":"]}),i.jsx("input",{type:"text",className:"form-control",value:"",readOnly:!0,placeholder:N.placeholder||"No data"})]},N.id))]});const j=N=>{const E=`custom_field_${N.id}`,A=k(N);switch(N.type){case"text":return i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx(Ht,{...L,type:"text",label:N.name,placeholder:N.placeholder,required:A,error:s?.[E]?.message})},N.id);case"number":return i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx(Ht,{...L,type:"text",inputMode:"decimal",label:N.name,placeholder:N.placeholder,required:A,error:s?.[E]?.message,onInput:C=>{C.target.value=C.target.value.replace(/[^0-9.]/g,""),L.onChange(C)}})},N.id);case"textarea":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx("textarea",{...L,className:"form-control",placeholder:N.placeholder,rows:"4"})}),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx(lt,{...L,options:N.options.map(C=>({value:C.value||C.id||C,label:C.label||C.text||C})),placeholder:N.placeholder||l("Select an option","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:C=>({...C,zIndex:9999})}})}),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"multi_select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx(lt,{...L,isMulti:!0,options:N.options.map(C=>({value:C.value||C,label:C.label||C})),placeholder:N.placeholder||l("Select options","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:C=>({...C,zIndex:9999})}})}),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"radio":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:N.options.map((C,P)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...L,type:"radio",className:"form-check-input",id:`${E}_${P}`,value:C.value||C,checked:L.value===(C.value||C)}),i.jsx("label",{className:"form-check-label",htmlFor:`${E}_${P}`,children:C.label||C})]},P))})}),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"checkbox":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:N.options.map((C,P)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",id:`${E}_${P}`,value:C.value||C,checked:(L.value||[]).includes(C.value||C),onChange:R=>{const M=L.value||[],O=C.value||C;R.target.checked?L.onChange([...M,O]):L.onChange(M.filter(q=>q!==O))}}),i.jsx("label",{className:"form-check-label",htmlFor:`${E}_${P}`,children:C.label||C})]},P))})}),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"calendar":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Wn,{className:`form-control ps-3 pe-5 ${s?.[E]?"is-invalid":""}`,placeholder:N.placeholder,options:{dateFormat:vi(window.kc_frontend.date_format),disableMobile:!0,locale:Kn()},value:L.value?Xn(L.value):"",onChange:C=>{const P=C[0]?qa(C[0]):"";L.onChange(P)}}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})},N.id),s&&s[E]&&i.jsx("span",{className:"text-danger p",children:s[E].message})]},N.id);case"file_upload":return i.jsx(be,{name:E,control:n,defaultValue:w(N.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:L})=>{const C=L.value,P=C&&(C.url||C.name),R=N.file_upload_type&&Array.isArray(N.file_upload_type)?N.file_upload_type.map(M=>M.id||M.value||M).join(","):"";return i.jsx(ou,{id:`custom-field-${N.id}`,name:E,label:N.name,accept:R,required:A,defaultFile:P?C.url:"",defaultFileId:P?C.id:"",onChange:(M,O)=>{L.onChange({id:O,url:M.url,name:M.filename||M.name})},errors:s})}},N.id);default:return null}};if(g)return i.jsx(Vx,{});if(y.length===0)return null;const T=t==="patient_encounter_module";return i.jsx("div",{className:"card mt-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),i.jsx("div",{className:"row gy-4",children:y.map(N=>i.jsx("div",{className:"col-lg-6",children:j(N)},N.id))}),T&&i.jsxs("div",{className:"mt-4",children:[m&&i.jsx("div",{className:`alert alert-${m.type==="success"?"success":"danger"} mb-3`,children:m.text}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:c,onClick:()=>_(r()),children:c?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})]})]})})},wk=f.createContext();function fpe({children:t}){const[e,n]=f.useState([]),[s,a]=f.useState(!1),r=(d,m={})=>{const u=Date.now(),p={id:u,message:d,type:m.type||"success",position:m.position||"bottom-center",duration:m.duration||5e3,showIcon:m.showIcon!==!1,dismissible:m.dismissible!==!1};return n(h=>[p]),a(!0),p.duration>0&&setTimeout(()=>{a(!1),setTimeout(()=>n([]),300)},p.duration),u},o=()=>{a(!1),setTimeout(()=>n([]),300)},c={success:(d,m)=>r(d,{...m,type:"success"}),error:(d,m)=>r(d,{...m,type:"danger"}),warning:(d,m)=>r(d,{...m,type:"warning"}),info:(d,m)=>r(d,{...m,type:"info"}),dismiss:o};return i.jsx(wk.Provider,{value:{toast:c,toasts:e,visible:s,onDismiss:o},children:t})}function vpe(){const t=f.useContext(wk);if(!t)return console.warn("ToastContainer must be used within a ToastProvider"),null;const{toasts:e,visible:n,onDismiss:s}=t,a=e[0];return a?i.jsx("div",{className:`alert-container alert-widget-container ${n?"visible":""}`,children:i.jsx("div",{className:`alert alert-popup alert-${a.type} alert-left`,onClick:a.dismissible?s:void 0,children:i.jsxs("div",{className:"alert-content",children:[a.showIcon&&i.jsxs("span",{className:"alert-icon",children:[a.type==="success"&&"",a.type==="danger"&&"",a.type==="warning"&&"",a.type==="info"&&""]}),i.jsx("span",{className:"alert-message",children:a.message}),a.dismissible&&i.jsx("button",{className:"alert-close",onClick:r=>{r.stopPropagation(),s()},title:"Dismiss",children:""})]})})}):null}function FJ(){const t=f.useContext(wk);if(!t)throw new Error("useToast must be used within a ToastProvider");return t.toast}const $J=({disabled:t=!1,isUploading:e=!1,wpMediaAvailable:n=!1,onFilesSelect:s,onClick:a})=>{const r=!n,o=t||e,c=d=>{if(!r||o)return;d.preventDefault(),d.currentTarget.classList.remove("drag-over");const m=Array.from(d.dataTransfer.files);m.length&&s(m)};return i.jsxs("div",{className:`kc-dropzone ${o?"disabled":""}`,onClick:o?void 0:a,onDragOver:d=>{!r||o||(d.preventDefault(),d.currentTarget.classList.add("drag-over"))},onDragLeave:d=>{!r||o||(d.preventDefault(),d.currentTarget.classList.remove("drag-over"))},onDrop:c,children:[i.jsx("style",{children:`.kc-dropzone {
                    position: relative;
                }

                /* Loader overlay */
                .kc-dropzone-loader {
                    position: absolute;
                    inset: 0;
                    background: rgba(255, 255, 255, 0.85);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 2;
                    border-radius: 8px;
                }

                /* Spinner */
                .kc-spinner {
                    width: 32px;
                    height: 32px;
                    border: 3px solid #e5e7eb;
                    border-top-color: #4f46e5;
                    border-radius: 50%;
                    animation: kc-spin 0.8s linear infinite;
                    margin-bottom: 10px;
                }

                @keyframes kc-spin {
                    to {
                        transform: rotate(360deg);
                    }
                }
                `}),e&&i.jsxs("div",{className:"kc-dropzone-loader",children:[i.jsx("span",{className:"kc-spinner"}),i.jsx("p",{className:"kc-uploading-text",children:l("Uploading...","kivicare-clinic-management-system")})]}),!e&&i.jsxs("div",{className:"kc-dropzone-content",children:[i.jsx("i",{className:"ph ph-upload-simple kc-upload-icon"}),i.jsxs("p",{className:"kc-dropzone-text",children:[i.jsx("strong",{children:l("Choose Image","kivicare-clinic-management-system")}),!n&&i.jsxs(i.Fragment,{children:[" ",l("or drag & drop","kivicare-clinic-management-system")]})]}),!n&&i.jsx("small",{className:"kc-dropzone-hint",children:l("Support: JPG, PNG, JPEG, PDF, Doc","kivicare-clinic-management-system")})]})]})},BJ=({id:t="kc-multi-file-upload",name:e="files",label:n=l("Upload Documents","kivicare-clinic-management-system"),defaultFiles:s=[],setValue:a,disabled:r=!1,required:o=!1,allowFile:c=!0,widgetId:d=null,isEdit:m=!1})=>{let u;try{u=FJ()}catch{u={error:console.error,success:console.log}}const[p,h]=f.useState([]);f.useEffect(()=>{m&&h(s)},[s]);const[g,v]=f.useState(!1),[x,y]=f.useState(!1),[b,w]=f.useState(!0),k=f.useRef(null);f.useEffect(()=>{y(typeof window<"u"&&window.wp&&window.wp.media),console.log(x,"wpMediaAvailable")},[]);const _=A=>{h(A),a?.(e,A,{shouldValidate:!0})},j=async A=>{const L=window.kc_frontend?.rest_url;let C=`${L}/wp/v2/media`,P="",R={};d&&(C=`${L}kivicare/v1/frontend/kc-book-appointment/upload-medical-report`,P=window.kc_frontend.nonce,R["Media-Nonce"]=P);try{const M=await ve({endpoint:C,method:"POST",data:A,isFile:!0,headers:R}),O=M.data||M;return{id:O.id,url:O.source_url||O.url,filename:A.name||O.filename||O.title?.raw,type:O.media_type||O.type,size:O.media_details?.filesize||O.size||A.size}}catch(M){return u.error(M?.response?.data?.message||M?.message||l("File upload failed","kivicare-clinic-management-system")),null}},T=async A=>{if(!A.length)return;v(!0);const L=[];for(let C of A){const P=await j(C);P&&L.push(P)}L.length&&(_([...p,...L]),u.success(l("Files uploaded successfully","kivicare-clinic-management-system")),x||w(!1)),v(!1),k.current&&(k.current.value="")},N=()=>{if(!x){w(!0);return}const A=window.wp.media({title:l("Select or Upload Files","kivicare-clinic-management-system"),button:{text:l("Use These Files","kivicare-clinic-management-system")},multiple:!0,library:{type:c?"":"image"}});A.on("select",()=>{const C=A.state().get("selection").toJSON().map(P=>({id:P.id,url:P.url,filename:P.filename,type:P.type,size:P.filesizeInBytes}));_([...p,...C])}),A.open()},E=A=>{_(p.filter((L,C)=>C!==A))};return i.jsxs("div",{className:"form-group",id:t,children:[i.jsx("style",{children:`
                .kc-dropzone {
                    border: 2px dashed #d0d5dd;
                    background: #f9fafb;
                    padding: 40px;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 8px;
                    transition: 0.2s ease;
                }

                .kc-dropzone.drag-over {
                    border-color: #4f46e5;
                    background: #eef2ff;
                }

                .kc-dropzone.disabled {
                    opacity: 0.6;
                    pointer-events: none;
                }

                .kc-upload-icon {
                    font-size: 28px;
                    margin-bottom: 10px;
                    display: block;
                }

                .kc-dropzone-text {
                    font-size: 15px;
                }

                .kc-dropzone-text strong {
                    color: #ef4444;
                }

                .kc-dropzone-hint {
                    font-size: 12px;
                    color: #667085;
                }

                .kc-uploading-text {
                    margin-top: 8px;
                    color: #4f46e5;
                    font-size: 13px;
                }

                .kc-uploaded-files {
                    margin-top: 16px;
                }

                .kc-uploaded-file {
                    background: #f9fafb;
                    border-radius: 6px;
                    padding: 12px 14px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                }

                .kc-file-name {
                    font-size: 14px;
                    color: #344054;
                }

                .kc-file-delete {
                    background: transparent;
                    border: none;
                    color: #ef4444;
                    cursor: pointer;
                    font-size: 16px;
                }
                `}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsxs("label",{className:"form-label mb-0",children:[n,o&&i.jsx("span",{className:"text-danger",children:"*"})]}),(x||!b)&&m===!1&&i.jsx("button",{type:"button",className:"iq-button iq-button-primary btn btn-sm btn-primary",onClick:N,disabled:r||g,children:l("Add Documents","kivicare-clinic-management-system")})]}),i.jsx("input",{id:"kc-hidden-file-input",type:"file",className:"d-none",multiple:!0,ref:k,disabled:r||g,onChange:A=>T(Array.from(A.target.files))}),!x&&b&&i.jsx($J,{disabled:r,isUploading:g,wpMediaAvailable:x,onFilesSelect:T,onClick:()=>{console.log("ASDFsdfdfsdf",k),k.current?.click(),!r&&k.current}}),p.length>0&&i.jsx("div",{className:"kc-uploaded-files mt-3",children:p.map((A,L)=>i.jsxs("div",{className:"kc-uploaded-file",children:[i.jsx("span",{className:"kc-file-name",children:A.filename}),i.jsxs("div",{className:"kc-file-actions",children:[i.jsx("a",{className:"me-2",href:A.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})}),i.jsx("button",{type:"button",className:"kc-file-delete",onClick:()=>E(L),children:i.jsx("i",{className:"ph ph-trash"})})]})]},L))})]})},Zp=({isEditing:t=!1,patientId:e=!1})=>{f.useEffect(()=>{const he=new URLSearchParams(window.location.search),Re=he.get("payment_status"),$e=he.get("message");if(Re&&$e){Ee[Re==="cancelled"?"error":"info"](decodeURIComponent($e),{position:"top-right",autoClose:5e3});const Ve=window.location.pathname;window.history.replaceState({},"",Ve)}},[]);const{id:n}=Yt(),s=f.useRef(null),a=f.useRef(null),r=f.useRef({}),o=Ke(),{getPriceFormat:c,appointmentDescription:d,is_uploadfile_appointment:m,pre_book:u,post_book:p,only_same_day_book:h,isAddonActive:g,hasCapability:v,currentClinicId:x,currentDoctorId:y,defaultClinicId:b,currentUser:w,patientUniqueIdSetting:k}=mt(),_=Gn(),j=mn(),{prefetchClinics:T}=I7();f.useEffect(()=>{T()},[T]);const N=Fi(),E=Xi(),A=Jn(),L=Vn(),C=g("kiviPro"),P=new Date;P.setHours(0,0,0,0);const R=_.state?.patientId,M=e||R,[O,q]=f.useState(!1),[U,H]=f.useState(null),ae=f.useRef([]),{data:V,isLoading:pe,error:oe}=JZ(n,{enabled:t&&!!n}),ne=V?.data,se=tX(),W=nX(),[ge,ee]=f.useState(!1),ie=ge||se.isPending||W.isPending||pe,ue=f.useMemo(()=>{if(C){if((L||A)&&(x||b)){const he=x||b;return{value:he,label:he}}}else if(b)return{value:b,label:b};return null},[L,A,C,t,x,b]),{register:G,handleSubmit:le,control:re,watch:D,setValue:I,getValues:ce,formState:{errors:Z}}=Jt({defaultValues:{clinic:ue,doctor:null,service:null,patient:null,appointmentDate:"",appointmentSlot:"",status:{value:"1",label:l("Booked","kivicare-clinic-management-system")},description:""}}),K=D("clinic"),B=D("doctor"),F=D("service"),J=D("appointmentDate"),Q=D("appointmentSlot"),me=y,te=x,{data:Y,isLoading:Ce}=eX({doctor_id:B?.value||me,clinic_id:K?.value||te||(C?null:0),service_id:F?.map(he=>he.id)||[],date:J,appointment_id:t?n:null});let ye=!1;F?.length&&(C?N?ye=!!(K?.value||te):L||A?ye=!!(B?.value||me):ye=!!((B?.value||me)&&(K?.value||te)):ye=!!(B?.value||me));const{data:Te,isLoading:et,isError:kt,error:At}=lX({doctorId:B?.value||me,clinicId:K?.value||te||(C?null:0),services:F?.map(he=>he.id)||[]},{enabled:ye}),{data:qt,isLoading:Ie}=yn("settings","appointment-setting"),De=f.useMemo(()=>{if(!qt?.data)return{minDate:null,maxDate:null};const{only_same_day_book:he,pre_book:Re,post_book:$e}=qt.data,Ve=[!0,"true",1,"1","on","yes"].includes(he),Fe=An();if(Ve){const Xe=Fe.format("YYYY-MM-DD");return{minDate:Xe,maxDate:Xe}}return{minDate:Fe.add(parseInt(Re)||0,"day").format("YYYY-MM-DD"),maxDate:Fe.add(parseInt($e)||365,"day").format("YYYY-MM-DD")}},[qt]),{data:xe}=yJ({clinic_id:A||L?x:K?.value||te||(C?null:0),doctor_id:B?.value||me},{enabled:!!(B?.value||me)&&(!!K?.value||!!te||!C||A||L)}),ke=f.useRef({}),Oe=f.useRef(null),Qe=f.useCallback(async(he,Re)=>{const $e=B?.value||me,Ve=K?.value||te||(C?null:0),Fe=F?.map(xt=>xt.id)||service||[];if(!$e||!Fe.length)return;const Xe=`${he}-${String(Re).padStart(2,"0")}`;try{const xt={doctor_id:$e,clinic_id:Ve,service_id:Fe,date:Xe},Gt=await o.fetchQuery({queryKey:jn.availableSlots(xt),queryFn:()=>Bi.getAvailableSlots(xt),staleTime:1e3*60*5});Gt?.data?.dates&&(Object.entries(Gt.data.dates).forEach(([Ln,pi])=>{const qi=`${$e}-${Ve}-${Ln}`;ke.current[qi]={total_count:pi.total_count,available_count:pi.available_count,date:pi.date,day_of_week:pi.day_of_week}}),Oe.current?.flatpickr&&Oe.current.flatpickr.redraw())}catch(xt){console.error("Error fetching month slots:",xt)}},[B,K,F,me,te,C,o]),ct=xe?.data??{},{data:Tt}=od({module_type:"appointment_module",status:1,module_id:n},{enabled:g("kiviPro")&&!!(K?.value||te)}),Ut=Te?.data,yt=f.useMemo(()=>{const he=Tt?.data?.forms||[],Re=K?.value||te;return Re?he.filter($e=>{const Ve=$e.conditions?.clinics||[];return Ve.length===0||Ve.includes(parseInt(Re))}):[]},[Tt,K,te]),Ae=()=>{yt.forEach(he=>{const Re=document.querySelector(`#custom-forms-tabs-tab-${he.id}`);Re&&(ae.current.map($e=>parseInt($e)).includes(parseInt(he.id))?Re.classList.add("form-error-block"):Re.classList.remove("form-error-block"))})},Be=async()=>{const he={};let Re=!0,$e=null;for(const Fe of yt){const Xe=r.current[Fe.id];if(Xe){const xt=await Xe.triggerValidation();he[Fe.id]={isValid:xt.isValid,data:Xe.getFormData(),errors:xt.errors},xt.isValid||(Re=!1,$e||($e=Fe.id))}}const Ve=Object.keys(he).filter(Fe=>!he[Fe].isValid);return ae.current=Ve,Ae(),{allValid:Re,formResults:he,firstInvalidFormId:$e}},z=()=>{const he={};return yt.forEach(Re=>{const $e=r.current[Re.id];$e&&(he[Re.id]=$e.getFormData())}),he},X=[{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"4",label:l("Check In","kivicare-clinic-management-system")},{value:"3",label:l("Check Out","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")},{value:"0",label:l("Cancelled","kivicare-clinic-management-system")}],fe=async({page:he,per_page:Re,search:$e})=>{try{const Ve={dataType:"clinicList",page:he,per_page:Re,search:$e};return await o.fetchQuery({queryKey:ut.list(Ve),queryFn:()=>Et.getStaticData(Ve),staleTime:300*1e3})}catch(Ve){return console.error("Error loading clinics:",Ve),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},_e=async({page:he,per_page:Re,search:$e,clinic_ids:Ve})=>{try{const Fe={dataType:"staticData",staticDataType:"doctors",clinic_ids:Ve,page:he,per_page:Re,search:$e};return await o.fetchQuery({queryKey:ut.list(Fe),queryFn:()=>Et.getStaticData(Fe),staleTime:300*1e3})}catch(Fe){return console.error("Error loading doctors:",Fe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},ze=async({page:he,per_page:Re,search:$e,clinic_ids:Ve})=>{try{const Fe={dataType:"staticData",staticDataType:"patients",clinic_ids:Ve,page:he,per_page:Re,search:$e};return await o.fetchQuery({queryKey:ut.list(Fe),queryFn:()=>Et.getStaticData(Fe),staleTime:300*1e3})}catch(Fe){return console.error("Error loading patients:",Fe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Je=f.useCallback(async({page:he,per_page:Re,search:$e,clinic_id:Ve,doctor_id:Fe})=>{console.log(" loadServiceOptions called with:",{page:he,per_page:Re,search:$e,clinic_id:Ve,doctor_id:Fe});try{const Xe={dataType:"staticData",staticDataType:"servicesWithPrice",clinic_id:Ve,doctor_id:Fe,page:he,per_page:Re,search:$e};console.log(" Query key:",ut.list(Xe));const xt=await o.fetchQuery({queryKey:ut.list(Xe),queryFn:()=>Et.getStaticData(Xe),staleTime:0});return console.log(" Services loaded:",xt),xt}catch(Xe){return console.error(" Error loading services:",Xe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[o]),nt=Y?.data?.slots_by_session||[],at=f.useMemo(()=>{if(!nt||nt.length===0)return!1;const he=An();let Re=!1,$e=!1;for(const Ve of nt)if(Ve&&Ve.length>0){$e=!0;for(const Fe of Ve)if(Fe.datetime){if(An(Fe.datetime).isAfter(he)||Fe.available===!0){Re=!0;break}}else if(Fe.available===!0){Re=!0;break}if(Re)break}return $e&&!Re},[nt]),jt=f.useMemo(()=>nt&&nt.length>0&&nt.some(he=>he&&he.length>0)&&!at,[nt,at]);if(f.useEffect(()=>{if((B?.value||me)&&F?.length){const he=new Date,Re=he.getFullYear(),$e=he.getMonth()+1;ke.current={},Qe(Re,$e)}},[B,F,me,Qe]),f.useEffect(()=>{if(t&&ne&&!pe){if(I("clinic",{value:ne.clinicId,label:ne.clinicName}),I("doctor",{value:ne.doctorId,label:ne.doctorName}),I("patient",{value:ne.patientId,label:ne.patientName}),ne.service_list&&ne.service_list.length>0){const he=ne.service_list.map(Re=>({value:Re.id,label:Re.title,id:Re.id,price:Re.price}));I("service",he)}I("description",ne.description||""),I("appointmentDate",ne.appointmentStartDate),I("appointmentSlot",ne.appointmentFormatedStartTime),E?I("status",{value:"1",label:l("Booked","kivicare-clinic-management-system")}):I("status",vk(X,ne.status))}},[t,ne,pe]),f.useEffect(()=>{if(t)return;const he=M;if(!he)return;let Re=!1;return(async()=>{try{const Ve={dataType:"staticData",staticDataType:"patients",patient_id:he,page:1,per_page:1},Fe=await o.fetchQuery({queryKey:ut.list(Ve),queryFn:()=>Et.getStaticData(Ve),staleTime:300*1e3});if(Re)return;const Xe=Fe?.data||Fe?.data?.data||[],xt=Array.isArray(Xe)?Xe[0]:null;if(xt){const Gt=xt.label||xt.display_name||`${xt.first_name||""} ${xt.last_name||""}`.trim()||xt.name||xt.fullName||String(xt.id);I("patient",{value:xt.id||he,label:Gt})}else I("patient",{value:he,label:String(he)})}catch{I("patient",{value:he,label:String(he)})}})(),()=>{Re=!0}},[M,t,o,I]),f.useEffect(()=>{t&&ne?.custom_fields&&I&&Object.keys(ne.custom_fields).forEach(he=>{I(`custom_field_${he}`,ne.custom_fields[he])})},[t,ne?.custom_fields,I]),t&&oe)return i.jsxs("div",{className:"alert alert-danger bg-danger-subtle",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:l("Error Loading Appointment Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:l("Unable to load appointment information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>j(-1),children:l("Back to Appointments","kivicare-clinic-management-system")})]});const ot=async he=>{if(ee(!0),yt.length>0)if((await Be()).allValid)ae.current=[],Ae();else{Ee.error(l("Please fix errors in the additional information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),ee(!1);return}const Re={};Object.keys(he).forEach(Ve=>{if(Ve.startsWith("custom_field_")){const Fe=Ve.replace("custom_field_","");Re[Fe]=he[Ve]}});const $e={tax_data:Ut.applied_taxes,clinicId:he.clinic?.value||((L||A)&&C?x||b:C?null:b),doctorId:he.doctor?.value,patientId:he.patient?.value,serviceId:he.service?.map(Ve=>Ve.id),appointmentStartDate:he.appointmentDate,appointmentStartTime:he.appointmentSlot,status:he.status?.value||he.status,description:he.description||"",customForm:z(),customFields:Re,appointmentFile:he?.appointmentFile};he.appointmentFiles&&he.appointmentFiles.length>0&&($e.appointmentFileId=he.appointmentFiles.map(Ve=>Ve.id));try{if(t){let Ve=await W.mutateAsync({id:n,...$e});Ee.success(Ve.message||l("Appointment updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j("/appointments")}else if(E)H({clinicName:he.clinic?.label,doctorName:he.doctor?.label,service:he.service,date:he.appointmentDate,time:he.appointmentSlot,grandTotal:Ut?.grand_total,customFormData:z(),customFieldData:Re}),q(!0);else{let Ve=await se.mutateAsync($e);console.log("Create response",Ve),Ee.success(Ve.message||l("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j(e==!1?"/appointments":"/patient/profile/"+e+"/appointments/")}}catch(Ve){console.error("Error saving appointment:",Ve);const Fe=Ve?.response?.data?.message||(t?l("Failed to update appointment","kivicare-clinic-management-system"):l("Failed to create appointment","kivicare-clinic-management-system"));Ee.error(Fe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{ee(!1)}},wt=async()=>{ee(!0);const he=ce();E&&w&&w.id&&(he.patient={value:w.id,label:w.display_name||w.user_email});const Re={};Object.keys(he).forEach(Fe=>{if(Fe.startsWith("custom_field_")){const Xe=Fe.replace("custom_field_","");Re[Xe]=he[Fe]}});const $e=z(),Ve={clinicId:he.clinic?.value||((L||A)&&C?x||b:C?null:b),doctorId:he.doctor?.value,patientId:he.patient?.value,serviceId:he.service?.map(Fe=>Fe.id),appointmentStartDate:he.appointmentDate,appointmentStartTime:he.appointmentSlot,status:he.status?.value||he.status,description:he.description||"",paymentGateway:he.payment_gateway||null,customForm:$e,customFields:Re,tax_data:Ut.applied_taxes};he.appointmentFiles&&he.appointmentFiles.length>0&&(Ve.appointmentFileId=he.appointmentFiles.map(Fe=>Fe.id)),se.mutateAsync(Ve).then(Fe=>{o.invalidateQueries({queryKey:["appointments"]});const Xe=Fe?.data?.payment_response?.gateway,xt=Fe?.data?.payment_response?.data,Gt=xt?.redirect_url||xt?.payment_url;switch(Xe?.startsWith("knit_pay")?"knit_pay":Xe){case"paypal":case"woocommerce":case"knit_pay":Gt?window.location.href=Gt:Ee.error(l("Payment gateway did not provide a redirect URL.","kivicare-clinic-management-system"));break;case"stripe":s?.current?.updateAppointmentData(Fe?.data),q(!1);break;case"razorpay":a?.current?.updateAppointmentData(Fe?.data),q(!1);break;case"manual":default:Ee.success(Fe.message||l("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),q(!1),Gt||j("/appointments");break}}).catch(Fe=>{console.error("Error confirming appointment:",Fe),Ee.error(Fe?.response?.data?.message||l("Failed to create appointment","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}).finally(()=>{ee(!1)})},Wt=async he=>{const Re=Object.keys(he)[0],{formResults:$e,firstInvalidFormId:Ve}=await Be();let Fe=null;if(Re&&(Fe=document.getElementById(Re),Fe)){Fe.scrollIntoView({behavior:"smooth",block:"center"}),Fe.focus();return}if(Ve&&(Fe=document.getElementById(`custom-form-${Ve}`),Fe)){Fe.scrollIntoView({behavior:"smooth",block:"center"});const Xe=document.querySelector(`[data-rb-event-key="${Ve}"]`);Xe&&Xe.click()}},we={clinic:{required:C&&!L&&!A?l("Clinic is required","kivicare-clinic-management-system"):!1},doctor:{required:l("Doctor is required","kivicare-clinic-management-system")},service:{required:l("Service is required","kivicare-clinic-management-system")},patient:{required:l("Patient is required","kivicare-clinic-management-system")},appointmentDate:{required:l("Appointment date is required","kivicare-clinic-management-system"),validate:he=>{if(!he)return!0;const[Re,$e,Ve]=he.split("-").map(Number);return new Date(Re,$e-1,Ve)>=P||l("Appointment date cannot be in the past","kivicare-clinic-management-system")}},appointmentSlot:{required:l("Appointment slot is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")}};return t&&pe?i.jsx(wy,{}):i.jsxs(i.Fragment,{children:[e==!1&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t?l("Edit Appointment","kivicare-clinic-management-system"):l("Add Appointment","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("form",{onSubmit:le(ot,Wt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[!L&&!A&&C&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:re,rules:we.clinic,render:({field:he})=>i.jsx(Xt,{id:"clinic",loadOptions:fe,value:he.value,onChange:Re=>{he.onChange(Re),I("doctor",null),I("service",null)},placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${Z.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t,dependencies:{}})}),Z.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.clinic.message})]})}),!N&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"doctor",control:re,rules:we.doctor,render:({field:he})=>i.jsx(Xt,{id:"doctor",loadOptions:_e,value:he.value,onChange:Re=>{he.onChange(Re),I("service",null),I("appointmentSlot",""),o.invalidateQueries({queryKey:["staticData","servicesWithPrice"]})},placeholder:D("clinic")?.value?l('eg "Mark Martin"',"kivicare-clinic-management-system"):l("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${Z.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||pe||!D("clinic")?.value,dependencies:{clinic_ids:D("clinic")?.value}},`doctor-${D("clinic")?.value}`)}),Z.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.doctor.message})]})}),i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[l("Select Service","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!(t||E)&&i.jsx(ht,{to:"/service/add",className:"label-action fw-semibold font-size-12",children:l("Add Service","kivicare-clinic-management-system")})]}),i.jsx(be,{name:"service",control:re,rules:we.service,render:({field:he})=>{const Re=he.value?.some(Xe=>Xe?.allow_multiple),$e=Xe=>{if(!Xe){he.onChange([]);return}const xt=Array.isArray(Xe)?Xe:[Xe],Gt=xt.some(Ln=>!Ln.allow_multiple);he.onChange(Gt?[xt.find(Ln=>!Ln.allow_multiple)]:xt)},Ve=N?y:D("doctor")?.value,Fe=D("clinic")?.value;return i.jsx(Xt,{id:"service",loadOptions:Je,value:he.value,onChange:$e,placeholder:Ve?l('eg "Checkup"',"kivicare-clinic-management-system"):l("Select Doctor First","kivicare-clinic-management-system"),className:`react-select-box ${Z.service?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!Ve||t&&!pe,isMulti:Re,closeMenuOnSelect:!1,getOptionValue:Xe=>Xe.id,getOptionLabel:Xe=>Xe.label,customComponents:{IndicatorSeparator:()=>null,Option:({innerProps:Xe,data:xt})=>i.jsxs("div",{className:`option select-service-option d-flex justify-content-between align-items-center gap-1 ${xt.allow_multiple?"allow-multiple":""}`,...Xe,children:[i.jsxs("div",{className:"d-flex flex-column",children:[i.jsxs("div",{className:"d-flex align-items-center gap-06",children:[xt.is_telemed&&i.jsx("span",{className:"badge bg-success-subtle border border-success rounded-pill ",children:l("Telemed","kivicare-clinic-management-system")}),xt.allow_multiple&&i.jsx("span",{className:"badge bg-info-subtle border border-info rounded-pill ",children:l("Multiple","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"m-0 texts font-size-14 heading-color fw-medium form-label",children:[" ",xt.label," "]})]}),i.jsx("span",{className:"text-secondary font-size-14 fw-semibold",children:c(xt.price)})]})},dependencies:{clinic_id:Fe,doctor_id:Ve}},`service-${Fe}-${Ve}`)}}),Z.service&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.service.message})]})}),!E&&e===!1&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[l("Select Patient","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!t&&i.jsx(ht,{to:{pathname:"/patient/add",search:"from=appointment"},className:"label-action fw-semibold font-size-12",children:l("Add Patient","kivicare-clinic-management-system")})]}),i.jsx(be,{name:"patient",control:re,rules:we.patient,render:({field:he})=>i.jsx(Xt,{id:"patient",loadOptions:ze,value:he.value,onChange:he.onChange,placeholder:D("clinic")?.value?k?.enable?l('eg "Alena James" or ID',"kivicare-clinic-management-system"):l('eg "Alena James"',"kivicare-clinic-management-system"):l("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${Z.patient?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||pe||!D("clinic")?.value,dependencies:{clinic_ids:D("clinic")?.value}},`patient-${D("clinic")?.value}`)}),Z.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.patient.message})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Appointment Date","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"appointmentDate",control:re,rules:we.appointmentDate,render:({field:he})=>i.jsxs("div",{className:"kc-flatpickr-calendar",children:[i.jsx(Wn,{id:"appointmentDate",className:`d-none ${Z.appointmentDate?"is-invalid":""}`,value:he.value?Xn(he.value):"",onChange:Re=>{const $e=qa(Re[0]);he.onChange($e),I("appointmentSlot","")},placeholder:l('eg "05/02/2025"',"kivicare-clinic-management-system"),disabled:t&&pe||Ie,options:{dateFormat:"Y-m-d",altFormat:vi(window.kc_frontend.date_format),minDate:De.minDate,maxDate:De.maxDate,disableMobile:!0,inline:!0,disable:[function(Re){if(!ct)return!1;const{off_days:$e=[],holidays:Ve=[]}=ct;if($e.includes(String(Re.getDay())))return!0;const Fe=qa(Re);return(Array.isArray(Ve)?Ve:Object.values(Ve)).includes(Fe)}],locale:Kn(),onMonthChange:(Re,$e,Ve)=>{const Fe=Ve.currentMonth+1,Xe=Ve.currentYear;Qe(Xe,Fe)},onDayCreate:(Re,$e,Ve,Fe)=>{const Xe=Fe.dateObj;if(!Xe)return;const xt=new Date;if(xt.setHours(0,0,0,0),Xe<xt){Fe.classList.add("past-date");return}Fe.innerHTML=Fe.innerHTML.replace(/\d+/g,yi=>UZ(yi));const Gt=qa(Xe),{off_days:Ln=[],holidays:pi=[],clinic_holidays:qi=[],doctor_holidays:en=[]}=ct||{},sa=Array.isArray(qi)?qi:Object.values(qi),sr=Array.isArray(en)?en:Object.values(en),qn=Ln.includes(String(Xe.getDay())),Is=sa.includes(Gt),ar=sr.includes(Gt),Ca=Is||ar,ti=document.createElement("div");ti.className="day-tooltip",ti.innerHTML=`
                                                      <span class="tooltip-date">
                                                        ${An(Xe).format("dddd, MMMM D, YYYY")}
                                                      </span>
                                                    `;const Hn=document.createElement("span");Hn.className="tooltip-info";const Hi=document.createElement("span");Hi.className="day-icon";const aa=B?.value||me,Dl=K?.value||te||(C?null:0);let zi;if(aa&&F?.length){const yi=`${aa}-${Dl}-${Gt}`;zi=ke.current?.[yi]}if(Ca||qn){if(zi&&zi.total_count>0&&zi.available_count===0){const yi=document.createElement("span");yi.className="slot-indicator",Fe.classList.add("slots-full"),Fe.classList.remove("flatpickr-disabled"),yi.textContent=l("Full","kivicare-clinic-management-system"),Hn.textContent=l("All slots are booked","kivicare-clinic-management-system"),Fe.append(yi),ti.append(Hn),Fe.append(ti);return}Fe.classList.add(Is?"clinic-holiday":"doctor-leave"),Fe.classList.remove("flatpickr-disabled"),Hn.textContent=Is?l("Clinic Holiday","kivicare-clinic-management-system"):l("Doctor on leave","kivicare-clinic-management-system"),Fe.append(Hi),ti.append(Hn),Fe.append(ti);return}if(!aa||!F?.length){Hn.textContent=l("Select doctor & service first","kivicare-clinic-management-system"),ti.append(Hn),Fe.append(ti);return}if(!zi){Hn.textContent=l("Available","kivicare-clinic-management-system"),ti.append(Hn),Fe.append(ti);return}const ra=document.createElement("span");if(ra.className="slot-indicator",zi.available_count>0){Fe.classList.add("available"),ra.textContent=`${zi.available_count} ${l("Slots","kivicare-clinic-management-system")}`,Hn.textContent=`${zi.available_count} ${l("slots available","kivicare-clinic-management-system")}`;const yi=document.createElement("span");yi.className="tooltip-action",yi.textContent=l("Click to select","kivicare-clinic-management-system"),ti.append(Hn,yi),Fe.append(ra)}else zi.total_count>0?(Fe.classList.add("slots-full"),ra.textContent=l("Full","kivicare-clinic-management-system"),Hn.textContent=l("All slots are booked","kivicare-clinic-management-system"),Fe.append(ra),ti.append(Hn)):(Hn.textContent=l("Available","kivicare-clinic-management-system"),ti.append(Hn));Fe.append(ti)}},ref:Re=>{Oe.current=Re,he.ref(Re)}},`flatpickr-${B?.value||"no-doctor"}-${F?.length||0}`),i.jsxs("div",{className:"calendar-legend",children:[i.jsx("div",{className:"calendar-legend-title",children:l("Calendar Legend","kivicare-clinic-management-system")}),i.jsxs("div",{className:"calendar-legend-items",children:[i.jsxs("div",{className:"calendar-legend-item available",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:l("Available","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item slots-full",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:l("Slots Full","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item clinic-holiday",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-hospital"})}),i.jsx("span",{className:"legend-label",children:l("Clinic Holiday","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item doctor-leave",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-stethoscope"})}),i.jsx("span",{className:"legend-label",children:l("Doctor on leave","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item past-date",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-x"})}),i.jsx("span",{className:"legend-label",children:l("Past Date","kivicare-clinic-management-system")})]})]})]})]})}),Z.appointmentDate&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.appointmentDate.message})]})}),i.jsxs("div",{className:"col-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Available Slot","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"appointmentSlot",control:re,rules:we.appointmentSlot,render:({field:he})=>i.jsx(i.Fragment,{children:Ce?i.jsx(P2,{count:18}):jt?i.jsx("div",{className:`p-3 bg-body rounded slot-scrolling ${Z.appointmentSlot?" form-control is-invalid":""} `,children:nt.map((Re,$e)=>i.jsx(We.Fragment,{children:Re.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"session-divider","aria-hidden":"true",children:i.jsx("span",{children:l(`Session ${$e+1}`,"kivicare-clinic-management-system")})}),i.jsx("div",{className:"appointments-slot-select",children:Re.map((Ve,Fe)=>i.jsxs("div",{className:"form-check slot-select",children:[i.jsx("input",{type:"radio",name:he.name,className:`form-check-input ${Z.appointmentSlot?"is-invalid":""}`,id:`slot-${$e}-${Fe}`,value:Ve.time,checked:Q===Ve.time,onChange:Xe=>{he.onChange(Xe.target.value)},ref:he.ref,disabled:t&&pe}),i.jsx("label",{className:"form-check-label",htmlFor:`slot-${$e}-${Fe}`,children:Ve.time})]},`slot-${$e}-${Fe}`))})]})},`session-${$e}`))}):Y?.status===!1?i.jsx("div",{className:"p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:Y?.data?.error})}):i.jsx("div",{className:"slot-none p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:l("No available slots for the selected date and doctor.","kivicare-clinic-management-system")})})})}),Z.appointmentSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.appointmentSlot.message})]}),!E&&i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:re,rules:we.status,render:({field:he})=>i.jsx(lt,{id:"status",options:X,value:he.value,onChange:he.onChange,placeholder:l('eg "Booked"',"kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Re=>({...Re,zIndex:9999})},isDisabled:t&&pe||!v("patient_appointment_status_change")})}),Z.status&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.status.message})]})]})]})}),m&&(!t||ne?.appointmentReport&&ne.appointmentReport.length>0)&&i.jsx("div",{className:"col-6",children:i.jsx(BJ,{name:"appointmentFiles",label:l("Upload Documents","kivicare-clinic-management-system"),setValue:I,defaultFiles:ne?.appointmentReport||[],allowFile:!0,isEdit:t})}),d&&i.jsx("div",{className:"col -12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:`form-control ${Z.description?"is-invalid":""}`,placeholder:l("Enter appointment description (optional)","kivicare-clinic-management-system"),rows:"3",...G("description"),disabled:t&&pe}),Z.description&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.description.message})]})})]})})}),g("kiviPro")&&B&&i.jsx(tf,{moduleType:"appointment_module",moduleId:B?.value,control:re,errors:Z,setValue:I,watch:D},`custom-fields-${B?.value||"no-doctor"}`),g("kiviPro")&&yt.length>0&&i.jsx("div",{className:"mt-4 card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),yt.length===1?i.jsx("div",{id:`custom-form-${yt[0].id}`,children:i.jsx(Ga,{ref:he=>r.current[yt[0].id]=he,fields:yt[0].fields,data:yt[0].form_data,readOnly:!1,formId:`form_${yt[0].id}`})}):i.jsx(Cg,{defaultActiveKey:yt[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:yt.map(he=>i.jsx(Ic,{eventKey:he.id,title:he.name?.text||he.name,children:i.jsx("div",{id:`custom-form-${he.id}`,children:i.jsx(Ga,{ref:Re=>r.current[he.id]=Re,fields:he.fields,data:he.form_data||{},readOnly:!1,formId:`form_${he.id}`})})},he.id))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(ei,{fallbackPath:"/appointments",text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:ie}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ie||t&&pe,children:ie?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Appointment","kivicare-clinic-management-system"):l("Save Appointment","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(YR,{Formwatch:D,summaryData:Ut,summaryLoading:et,summaryError:kt,className:"position-sticky top-0"})})]})}),E&&i.jsx(vJ,{showConfirmationModel:O,handleCloseConfirmationModel:()=>q(!1),handleConfirmAppointment:wt,confirmationData:U,isSubmitting:ge,setValue:I}),!t&&i.jsx(CJ,{ref:s,appointmentData:!1}),!t&&i.jsx(EJ,{ref:a,appointmentData:!1})]})},JR=()=>{const{id:t}=Yt(),{getPriceFormat:e,isAddonActive:n}=mt(),[s,a]=f.useState(!0),{data:r,isLoading:o,error:c}=rX(t),{data:d}=od({module_type:"appointment_module",status:1,module_id:t},{enabled:n("kiviPro")}),m=OR(),u=r?.data||{},p=d?.data?.forms||[],h=[{value:0,text:l("Cancelled","kivicare-clinic-management-system"),color:"text-danger"},{value:1,text:l("Booked","kivicare-clinic-management-system"),color:"text-info"},{value:2,text:l("Pending","kivicare-clinic-management-system"),color:"text-warning"},{value:3,text:l("Check Out","kivicare-clinic-management-system"),color:"text-danger"},{value:4,text:l("Check In","kivicare-clinic-management-system"),color:"text-success"}],v=(j=>{if(j==null)return{text:l("Unknown","kivicare-clinic-management-system"),color:"text-secondary"};const T=Number(j);return h.find(N=>N.value===T)||{text:l("Unknown","kivicare-clinic-management-system"),color:"text-secondary"}})(u.status),x=[{value:0,text:l("Closed","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"},{value:1,text:l("Active","kivicare-clinic-management-system"),badgeClass:"text-bg-success"}],b=(j=>{if(j==null)return{text:l("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"};const T=Number(j);return x.find(N=>N.value===T)||{text:l("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"}})(u.encounterStatus),w=j=>{m.mutate(j,{onSuccess:T=>{const N=new Blob([T],{type:"application/pdf"}),E=URL.createObjectURL(N);window.open(E,"_blank")},onError:T=>{$t.fire({title:l("Error","kivicare-clinic-management-system"),text:T?.response?.data?.message||T?.message||l("Failed to generate invoice PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})},k=f.useMemo(()=>!u||!u.serviceName?null:{services:u.service_list,applied_taxes:u?.taxItems?.tax_data,subtotal:u.subtotal||0,tax:u?.taxItems?.total_tax||0,grand_total:(u.subtotal||0)+(u?.taxItems?.total_tax||0)},[u]),_=j=>j==="service"?u.serviceName?[{name:u.serviceName}]:[]:null;return o?i.jsx(IR,{}):c?i.jsx("div",{className:"alert alert-danger",children:l("Failed to load appointment details.","kivicare-clinic-management-system")}):i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:location.pathname!=="/appointments"&&i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Appointment Detail","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsx("button",{type:"button",onClick:()=>w(u.id),className:"btn btn-primary",children:l("Download Invoice","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Appointment ID","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"m-0 font-size-14 text-primary",children:["#",u.id]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Payment Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"m-0 font-size-14 text-primary",children:u.paymentStatus})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Date & Time","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.appointmentDateTime})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Service Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.serviceName})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Booking Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:`font-size-14 mt-2 mb-0 ${v.color}`,children:v.text})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Payment Mode","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.paymentMode})]})]})}),u.description&&i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsxs("span",{className:"font-size-14",children:[l("Description","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 ms-1 mb-0",children:u.description})]})}),i.jsx("div",{children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Patient Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(on,{profileUrl:u.patient_image_url,name:u.patientName,phone:u.patientMobileNo,variant:"primary",size:"md",nameLabel:l("Patient Name","kivicare-clinic-management-system")})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Clinic Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(on,{profileUrl:u.clinic_image_url,name:u.clinicName,phone:u.clinicMobileNo,variant:"primary",size:"md",nameLabel:l("Clinic Name","kivicare-clinic-management-system"),rounded:!1})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Doctor Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(on,{profileUrl:u.doctor_image_url,name:u.doctorName,phone:u.doctorMobileNo,variant:"primary",size:"md",nameLabel:l("Doctor Name","kivicare-clinic-management-system")})})})]})]})}),u.encounterId&&i.jsxs("div",{className:"spcing-top",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-2",children:[i.jsx("h6",{className:"mb-0 font-size-14",children:l("Encounter Detail","kivicare-clinic-management-system")}),i.jsx(ht,{to:`/encounter/dashboard/${u.encounterId}`,className:"font-size-14 fw-bold",children:l("View Details","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"p-3 bg-body rounded",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Description","kivicare-clinic-management-system"),":"]}),i.jsx("p",{className:"h6 mb-0",children:u.encounterDescription||l("No records found","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"d-flex align-items-center justify-content-lg-end",children:i.jsx("span",{className:`badge ${b.badgeClass} text-uppercase rounded-pill`,children:b.text})})})]})})]}),n("kiviPro")&&p.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Forms","kivicare-clinic-management-system")}),p.length===1?i.jsx("div",{children:i.jsx(Ga,{fields:p[0].fields,data:p[0].form_data,readOnly:!0})}):i.jsx(Cg,{defaultActiveKey:p[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:p.map(j=>i.jsx(Ic,{eventKey:j.id,title:j.name?.text||j.name,children:i.jsx("div",{children:i.jsx(Ga,{fields:j.fields,data:j.form_data,readOnly:!0})})},j.id))})]})]})}),u?.appointmentReport?.length>0&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:l("Documents","kivicare-clinic-management-system")}),i.jsx(bn,{columns:[{header:l("File Name","kivicare-clinic-management-system"),accessorKey:"filename",enableSorting:!1,cell:j=>j.getValue()},{header:l("Actions","kivicare-clinic-management-system"),enableSorting:!1,maxWidth:100,accessorKey:"actions",cell:j=>i.jsx("a",{href:j.row.original.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})}],data:u.appointmentReport,enableSelection:!1})]})})]}),i.jsxs("div",{className:"col-xl-4",children:[i.jsx("h5",{className:"mb-3",children:l("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"mb-3",children:i.jsx(YR,{Formwatch:_,summaryData:k,summaryLoading:o,summaryError:c})})]})]})},qJ=[Yn({path:"/appointments",title:"Appointments",outlet:ZZ,permissions:["appointment_list"],meta:{description:"Appointment management system",icon:"calendar",showInSidebar:!0},children:[Ye({path:"",component:Sy,title:"All Appointments",index:!0,permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all appointments",breadcrumb:"All Appointments"}}),Ye({path:"patient/:patientIdParam",component:Sy,title:"Appointments by Patient",permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"Appointments filtered by patient",breadcrumb:"Appointments"}}),Ye({path:"add",component:Zp,title:"Add Appointment",props:{isEditing:!1},permissions:["appointment_add"],skeleton:wy,meta:{description:"Create a new appointment",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:Zp,title:"Edit Appointment",props:{isEditing:!0},permissions:["appointment_edit"],skeleton:wy,meta:{description:"Edit existing appointment",breadcrumb:"Edit"}}),Ye({path:"view/:id",component:JR,title:"View Appointment",props:{readOnly:!0},permissions:["appointment_view"],skeleton:IR,meta:{description:"View appointment details",breadcrumb:"View"}})]})],uC=()=>{const t=Gn(),e=["/encounter","/encounter-template"],n=t.pathname.replace(/\/$/,""),s=!e.includes(n);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{updateOnRouteChange:!0}),s&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx(ko,{})]})},kk={getMedicalHistories:(t={})=>ve({endpoint:"medical-history",method:"GET",data:t}),getMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"GET"}),createMedicalHistory:t=>ve({endpoint:"medical-history",method:"POST",data:t}),updateMedicalHistory:(t,e)=>ve({endpoint:`medical-history/${t}`,method:"PUT",data:e}),deleteMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"DELETE"})},Ql={all:["medicalHistory"],lists:()=>[...Ql.all],list:t=>[...Ql.lists(),{filters:t}],details:()=>[...Ql.all,"detail"],detail:t=>[...Ql.details(),t]},Uh=(t={},e={})=>gt({queryKey:Ql.list(t),queryFn:()=>kk.getMedicalHistories(t),...e}),Ey=()=>He({mutationFn:kk.createMedicalHistory}),eP=()=>(Ke(),He({mutationFn:t=>kk.deleteMedicalHistory(t)})),jk={getEncounterTemplateMedicalHistory:(t,e={})=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"GET",data:e}),createEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"POST",data:e}),deleteEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history/${e}`,method:"DELETE"})},br={all:["encounterTemplateMedicalHistory"],lists:()=>[...br.all,"list"],list:(t,e)=>[...br.lists(),t,{filters:e}],details:()=>[...br.all,"detail"],detail:(t,e)=>[...br.details(),t,e]},Wh=(t,e={},n={})=>gt({queryKey:br.list(t,e),queryFn:()=>jk.getEncounterTemplateMedicalHistory(t,e),enabled:!!t,...n}),Ty=()=>{const t=Ke();return He({mutationFn:({templateId:e,...n})=>jk.createEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(br.list(n.templateId))}})},tP=()=>{const t=Ke();return He({mutationFn:({templateId:e,itemId:n})=>jk.deleteEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(br.list(n.templateId))}})},Mr={createEncounter:t=>ve({endpoint:"encounters",method:"POST",data:t}),updateEncounter:(t,e)=>ve({endpoint:`encounters/${t}`,method:"PUT",data:e}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),getEncounters:t=>ve({endpoint:"encounters",method:"GET",data:t}),deleteEncounter:t=>ve({endpoint:`encounters/${t}`,method:"DELETE"}),bulkUpdateEncounterStatus:(t,e)=>ve({endpoint:"encounters/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeletEencounters:t=>ve({endpoint:"encounters/bulk/delete",method:"POST",data:{ids:t}}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),printEncounter:t=>ve({endpoint:`encounters/${t}/print`,method:"GET",responseType:"blob"}),exportEncounters:(t={})=>ve({endpoint:"encounters/export",method:"GET",data:t})},fo={createTemplate:t=>ve({endpoint:"encounter-templates",method:"POST",data:t}),updateTemplate:(t,e)=>ve({endpoint:`encounter-templates/${t}`,method:"PUT",data:e}),getTemplateById:t=>ve({endpoint:`encounter-templates/${t}`,method:"GET"}),getTemplates:t=>ve({endpoint:"encounter-templates",method:"GET",data:t}),deleteTemplate:t=>ve({endpoint:`encounter-templates/${t}`,method:"DELETE"}),bulkDeleteTemplates:t=>ve({endpoint:"encounter-templates/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateStatus:(t,e)=>ve({endpoint:"encounter-templates/bulk/status",method:"PUT",data:{ids:t,status:e}}),applyTemplateToEncounter:(t,e)=>ve({endpoint:`encounter-templates/${t}/apply-to-encounter/${e}`,method:"POST"})},HJ=()=>{const t=Ke();return He({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Mr.updateEncounter(e,n):Mr.createEncounter(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},zJ=(t={})=>gt({queryKey:["encounters",t],queryFn:()=>Mr.getEncounters(t)}),VJ=()=>{const t=Ke();return He({mutationFn:e=>Mr.bulkDeletEencounters(e),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},nP=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>Mr.bulkUpdateEncounterStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},Nk=(t,e={})=>gt({queryKey:["encounter",t],queryFn:()=>Mr.getEncounterById(t),enabled:!!t,...e}),UJ=()=>{const t=Ke();return He({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?fo.updateTemplate(e,n):fo.createTemplate(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounter-templates"]})}})},iP=(t={})=>gt({queryKey:["encounter-templates",t],queryFn:()=>fo.getTemplates(t)}),WJ=()=>{const t=Ke();return He({mutationFn:e=>fo.deleteTemplate(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},KJ=()=>{const t=Ke();return He({mutationFn:e=>fo.bulkDeleteTemplates(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},GJ=()=>{const t=Ke();return He({mutationFn:({templateId:e,encounterId:n})=>fo.applyTemplateToEncounter(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["medicalHistory"]}),t.invalidateQueries({queryKey:["prescriptions"]})}})},YJ=()=>He({mutationFn:t=>Mr.printEncounter(t)}),QJ=()=>He({mutationFn:t=>Mr.exportEncounters(t)}),Ck=f.createContext(),nf=()=>{const t=f.useContext(Ck);if(!t)throw new Error("useEncounterContext must be used within an EncounterProvider");return t},ZJ=({children:t})=>{const{id:e}=Yt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:r}=mt(),o=s||"patient",{data:c,isLoading:d,error:m}=Nk(e),u=c?.data||{},{data:p,isLoading:h,error:g}=LA(e),{data:v}=od({module_type:"patient_encounter_module",status:1,module_id:e},{enabled:r("kiviPro"),staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),x=f.useMemo(()=>v?.data?.forms||[],[v?.data?.forms]),{data:y}=XR("appointment_module",u?.doctorId),{data:b}=_y("appointment_module",u?.appointmentId,{enabled:!!u?.appointmentId,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),{data:w}=_y("patient_encounter_module",e,{enabled:!!e,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),k=f.useMemo(()=>y?.data||[],[y?.data]),_=f.useMemo(()=>b?.data||{},[b?.data]),j=f.useMemo(()=>w?.data||[],[w?.data]),[T,N]=f.useState(!1),[E,A]=f.useState(null),[L,C]=f.useState(!1),[P,R]=f.useState(!1),[M,O]=f.useState({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{},doctor:{},patient:{},patientEncounter:{},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),q=Er(o)||Vn(o)||Jn(o)||Fi(o),{data:U}=Cn(),H=U?.data?.allowEncounterEdit;f.useEffect(()=>{N((Number(u?.status)===1||H==="on")&&(Er(o)||Vn(o)||Jn(o)||Fi(o)&&u?.doctorId===a))},[u,o,a,H]),f.useEffect(()=>{p?.data&&O(p.data)},[p]);const ae=f.useCallback(()=>{A(p?.data?.id||null),O(p?.data||M),C(!0)},[p,M]),V=f.useCallback(()=>{C(!1),R(!1)},[]),pe=f.useMemo(()=>({isOpen:Number(u?.status)===1,isClosed:Number(u?.status)===0,isPending:Number(u?.status)===2,canClose:Number(u?.status)===1}),[u?.status]),oe=f.useMemo(()=>({name:u.patientName||"Unknown Patient",email:u.patientEmail||"No email provided",phone:u.patientPhone,age:u.patientAge,gender:u.patientGender,address:u?.patient_data?.address||u?.patientAddress,profileImage:u.patient_image_url}),[u.patientName,u.patientEmail,u.patientPhone,u.patientAge,u.patientGender,u?.patient_data?.address,u?.patientAddress,u.patient_image_url]),ne=f.useMemo(()=>({name:u.clinicName||"Unknown Clinic",address:u.clinicAddress,doctorName:u.doctorName||"Unknown Doctor",profileImage:u.clinic_image_url,description:u.description}),[u.clinicName,u.clinicAddress,u.doctorName,u.clinic_image_url,u.description]),se=f.useMemo(()=>({encounterId:e,encounterData:u,isEncounterLoading:d,encounterError:m,billData:p?.data,isBillLoading:h,billError:g,customForms:x,customFields:k,customFieldData:_,encounterCustomFieldData:j,canEditEncounter:q,canUpdateEncounter:T,userRole:o,showEditBillModal:L,showAddServiceItemForm:P,editFormData:M,setEditFormData:O,setShowAddServiceItemForm:R,handleOpenEditBillModal:ae,handleCloseEditBillModal:V,encounterStatus:pe,patientInfo:oe,clinicInfo:ne,hasCapability:n,currentDoctorId:a,isAddonActive:r}),[e,u,d,m,p?.data,h,g,x,q,T,o,L,P,M,O,R,ae,V,pe,oe,ne,n,a,r,k,_,j]);return i.jsx(Ck.Provider,{value:se,children:t})},XJ=(t,{isProblemEnabled:e,isObservationEnabled:n,isNoteEnabled:s})=>{const{hasCapability:a}=mt(),{encounterData:r,isEncounterLoading:o,patientInfo:c,isEncounterTemplate:d}=nf(),{data:m}=Cn(),u=m?.data?.allowEncounterEdit,[p,h]=f.useState([]),[g,v]=f.useState(null),[x,y]=f.useState(!0),[b,w]=f.useState(!0),[k,_]=f.useState(!0),[j,T]=f.useState([]),[N,E]=f.useState([]),[A,L]=f.useState(!1),C=!o&&t,{data:P}=Ua(e&&x&&C?"clinical_problems":null),{data:R}=Ua(n&&b&&C?"clinical_observations":null),M={enabled:C&&g!==null},O=(G,le,re)=>G?le():re(),{data:q}=O(d,()=>Wh(t,{type:"problem"},{enabled:!!x&&!!C}),()=>Uh({patient_id:g,encounter_id:t,type:"problem"},{enabled:!!x&&!!M.enabled&&e})),{data:U}=O(d,()=>Wh(t,{type:"observation"},{enabled:!!b&&!!C}),()=>Uh({patient_id:g,encounter_id:t,type:"observation"},{enabled:b&&M.enabled&&n})),{data:H}=O(d,()=>Wh(t,{type:"note"},{enabled:!!k&&!!C}),()=>Uh({patient_id:g,encounter_id:t,type:"note"},{enabled:!!k&&!!M.enabled&&s})),ae=d?Ty():Ey(),V=d?tP():eP(),pe=f.useMemo(()=>P?.data?P.data.map(G=>({value:G.value||G.id,label:G.label})):[],[P]),oe=f.useMemo(()=>R?.data?R.data.map(G=>({value:G.value||G.id,label:G.label})):[],[R]);f.useEffect(()=>{const le=(d?q?.data?.items||[]:q?.data?.histories||[]).map(re=>({...re,title:re.clinical_detail_val||re.title}));T(le)},[q,d]),f.useEffect(()=>{const le=(d?U?.data?.items||[]:U?.data?.histories||[]).map(re=>({...re,title:re.clinical_detail_val||re.title}));E(le)},[U,d]),f.useEffect(()=>{const G=d?H?.data?.items||[]:H?.data?.histories||[];h(G.map(le=>({id:le.id,title:le.clinical_detail_val||le.title})))},[H,d]),f.useEffect(()=>{L(d?a("encounters_template_edit"):(Number(r?.status)===1||u==="on")&&a("patient_encounter_edit")),(r?.patientId||c?.id)&&v(r?.patientId||c?.id)},[r,c,d,a,u]);const ne=(G,le)=>{const re=d?{templateId:t,template_id:t}:{patient_id:g,encounter_id:t};ae.mutate({...re,type:G,title:le})},se=G=>ne("problem",G),W=G=>ne("observation",G),ge=G=>ne("note",G),ee=G=>{d?V.mutate({templateId:t,itemId:G}):V.mutate(G)},ie=a(d?"encounters_template_edit":"patient_encounter_edit"),ue=a("medical_records_list");return{clinicalData:{problems:{list:j,staticOptions:pe},observations:{list:N,staticOptions:oe},notes:p,patientId:g,isEncounterTemplate:d},handlers:{addProblem:se,addObservation:W,addNote:ge,deleteMedicalHistory:ee},permissions:{canEditEncounter:ie,canUpdateEncounter:A,canViewMedicalRecords:ue},uiState:{showProblems:x,showObservations:b,showNote:k,setShowProblems:y,setShowObservations:w,setShowNote:_}}},Po={getReports:(t,e={})=>ve({endpoint:"patient-medical-reports",method:"GET",data:{patient_id:t,...e}}),getReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"GET"}),createReport:t=>ve({endpoint:"patient-medical-reports",method:"POST",data:t}),updateReport:(t,e)=>ve({endpoint:`patient-medical-reports/${t}`,method:"PUT",data:e}),deleteReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"DELETE"}),printReport:t=>ve({endpoint:`patient-medical-reports/print/${t}`,method:"GET",responseType:"blob"}),sendReports:t=>ve({endpoint:"patient-medical-reports/send-email",method:"POST",data:t})},wr={all:["patientMedicalReports"],lists:()=>[...wr.all,"list"],list:(t,e={})=>[...wr.lists(),{patientId:t,params:e}],details:()=>[...wr.all,"detail"],detail:t=>[...wr.details(),t]},JJ=(t,e={},n={})=>gt({queryKey:wr.list(t,e),queryFn:()=>Po.getReports(t,e),enabled:!!t,...n}),eee=()=>{const t=Ke();return He({mutationFn:e=>Po.createReport(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:wr.list(n.patient_id)})}})},tee=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Po.updateReport(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:wr.detail(n.id)}),n.patient_id&&t.invalidateQueries({queryKey:wr.list(n.patient_id)})}})},nee=()=>{const t=Ke();return He({mutationFn:({id:e,patient_id:n})=>Po.deleteReport(e),onSuccess:(e,n)=>{n.patient_id&&t.invalidateQueries({queryKey:wr.list(n.patient_id)})}})},iee=()=>He({mutationFn:t=>Po.printReport(t)}),see=()=>He({mutationFn:t=>Po.sendReports(t)}),ll=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body",children:[t&&i.jsx("h6",{className:"font-size-14 mb-3",children:t}),e]})}),Sk=({patientId:t,canEditEncounter:e,canUpdateEncounter:n,showViewReport:s=!1})=>{const{isAddonActive:a,allowed_mime_types:r,hasCapability:o}=mt(),c=a("kiviPro");if(!c&&!e)return null;const[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState([]),[v,x]=f.useState(null),[y,b]=f.useState(""),[w,k]=f.useState(""),[_,j]=f.useState(!1),[T,N]=f.useState([]),[E,A]=f.useState([]),[L,C]=f.useState(!1),[P,R]=f.useState({page:1,perPage:10}),M=eee(),O=tee(),q=nee(),U=Ke(),{data:H,isLoading:ae}=JJ(t,P,{enabled:c&&!!t}),V=H?.data?.pagination||{total:0,total_pages:1,per_page:10,current_page:1},pe=see();f.useEffect(()=>{H?.data?.reports&&g(H.data.reports.map(K=>({id:K.id,name:K.name||"",date:K.date||"",file:K.file||null})))},[H]);const oe=K=>{K&&dt({title:l("Delete Report?","kivicare-clinic-management-system"),text:l("You're about to delete this report.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep report","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(B=>{B.isConfirmed&&(ft({title:l("Deleting Report...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected report.<br>This won't take long.","kivicare-clinic-management-system")}),q.mutate({id:K,patient_id:t},{onSuccess:F=>{tt({title:l("Report Deleted","kivicare-clinic-management-system"),text:F?.message||l("Report has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:F=>{console.error("Delete report error:",F);const J=F?.response?.data?.message||F?.message||l("Failed to delete report. Please try again.","kivicare-clinic-management-system");Me({text:J})}}))})},{register:ne,handleSubmit:se,reset:W,setValue:ge,formState:{errors:ee},control:ie}=Jt({defaultValues:{name:"",date:"",file:null}}),ue=K=>{let B=K.file;Array.isArray(B)&&(B=B[0]);const F={...K,file:B};if(d!==null){const Q=[...h];Q[d]=F,g(Q),m(null)}else g([...h,F]);const J={patient_id:t,name:K.name,date:K.date,upload_report:B.id};v?(O.mutate({id:v,...J}),x(null),Ee.success(l("Report updated successfully","kivicare-clinic-management-system"))):(M.mutate(J),Ee.success(l("Report created successfully","kivicare-clinic-management-system"))),W(),p(!1),b(""),k("")},G=K=>{const B=h.find(F=>String(F.id)===String(K));B&&(m(K),p(!0),x(B.id),ge("name",B.name),ge("date",B.date),ge("file",B.file),B.file?B.file instanceof File?(b(URL.createObjectURL(B.file)),k("")):B.file.url?(b(B.file.url),k(B.file.id||"")):typeof B.file=="string"?(b(B.file),k("")):(b(""),k("")):(b(""),k("")))},{mutate:le}=iee(),re=K=>{le(K,{onSuccess:B=>{const F=B instanceof Blob?B:new Blob([B],{type:B.type||"application/pdf"}),J=URL.createObjectURL(F);window.open(J,"_blank"),setTimeout(()=>{URL.revokeObjectURL(J)},6e4)},onError:B=>{Me({text:B?.response?.data?.message||B?.message||l("Failed to open report","kivicare-clinic-management-system")})}})},D=()=>{W(),p(!1),b(""),k(""),m(null)},I=[{header:l("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:K=>K.getValue()},{header:l("Date","kivicare-clinic-management-system"),accessorKey:"date",cell:K=>K.getValue()},{header:l("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:K=>{const B=J=>Q=>i.jsx(it,{id:`tooltip-${K.cell.row.original.id}-${J}`,...Q,children:J}),F=K.row.original.id;return i.jsxs("div",{className:"d-flex gap-2",children:[o("patient_report_edit")&&i.jsx(Ue,{placement:"top",overlay:B(l("Edit Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>G(F),children:i.jsx("i",{className:"ph ph-pencil-simple"})})}),i.jsx(Ue,{placement:"top",overlay:B(l("View Report","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-sm text-primary fs-5",onClick:()=>re(F),children:i.jsx("i",{className:"ph ph-eye"})})}),o("patient_report_delete")&&i.jsx(Ue,{placement:"top",overlay:B(l("Delete Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>oe(F),children:i.jsx("i",{className:"ph ph-trash"})})})]})}}],ce={name:{required:l("Report name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Report name must be at least 2 characters","kivicare-clinic-management-system")}},date:{required:l("Date is required","kivicare-clinic-management-system")},file:{required:l("File is required","kivicare-clinic-management-system")}},Z=async({page:K,per_page:B,search:F})=>{try{const J=["patientMedicalReports",t,K,B,F],Q=await U.fetchQuery({queryKey:J,queryFn:()=>Po.getReports(t,{page:K,per_page:B,search:F}),staleTime:300*1e3}),te=(Q.data?.reports||[]).map(Y=>({value:Y.id,label:`${Y.name} - ${Y.date}`}));return A(Y=>[...Y,...te]),{data:te,pagination:Q.data?.pagination||{}}}catch(J){return console.error("Error loading report options:",J),{data:[],pagination:{has_more:!1}}}};return i.jsxs("div",{className:"position-relative",children:[!c&&i.jsx(ci,{text:l("Medical Report feature is available in KiviCare Pro. Upgrade to Pro to unlock uploading and managing patient medical reports.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx("h6",{children:l("Uploaded Reports","kivicare-clinic-management-system")}),(o("patient_report_add")||o("patient_report_view"))&&i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o("patient_report_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>{p(K=>!K),W(),b(""),k(""),m(null),x(null)},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Report","kivicare-clinic-management-system")})]}),o("patient_report_view")&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("span",{children:l("Send Email","kivicare-clinic-management-system")})]})]})]}),u&&i.jsx(ll,{className:`${s?"":"bg-body"}`,children:i.jsxs("form",{onSubmit:se(ue),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${ee.name?"is-invalid":""}`,type:"text",...ne("name",ce.name),placeholder:"eg Blood Test Report"}),ee.name&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Date","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"date",control:ie,rules:ce.date,render:({field:K})=>i.jsx(Wn,{id:"date",className:`form-control ${ee.date?"is-invalid":""}`,value:K.value?Xn(K.value):"",onChange:B=>{if(B&&B[0]){const F=B[0],J=F.getFullYear(),Q=String(F.getMonth()+1).padStart(2,"0"),me=String(F.getDate()).padStart(2,"0");K.onChange(`${J}-${Q}-${me}`)}else K.onChange("")},options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Kn()},placeholder:l("Select date","kivicare-clinic-management-system")})}),ee.date&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.date.message})]})}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(ou,{id:"report-file",name:"file",label:l("Upload File","kivicare-clinic-management-system"),accept:r?Object.values(r).join(","):".jpg,.jpeg,.png,.gif,.webp,.bmp,.svg,.tiff,.ico,.pdf",className:`${ee.file?"is-invalid":""}`,...ne("file",ce.file),onChange:K=>{ge("file",K.file||K,{shouldValidate:!0}),b(K.url||(K.file?URL.createObjectURL(K.file):"")),k(K.id||"")},required:!0,defaultFile:y,defaultFileId:w,disabled:v!==null}),ee.file&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.file.message})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:D,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:l("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(bn,{data:H?.data?.reports||[],columns:I,enableSelection:!1,currentPage:V.current_page,perPage:V.per_page,totalItems:V.total,lastPage:V.total_pages,onPageChange:K=>R(B=>({...B,page:K})),onPerPageChange:K=>R(B=>({...B,perPage:K,page:1})),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:I.length,className:"text-center py-4 border-start border-end",children:l("No data added","kivicare-clinic-management-system")})}),moduleNamePlural:l("reports","kivicare-clinic-management-system"),isLoading:ae})}),i.jsxs(rt,{show:_,onHide:()=>{j(!1),N([])},size:"md",backdrop:"static",centered:!0,children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:l("Send Email","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>j(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(rt.Body,{children:[i.jsx("p",{children:l("Select reports to send via email:","kivicare-clinic-management-system")}),i.jsx(Xt,{id:"report-select",placeholder:l("Select reports","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:Z,isMulti:!0,closeMenuOnSelect:!1,value:T.map(K=>{const B=E.find(F=>F.value===K);return B?{value:B.value,label:B.label}:null}).filter(Boolean),onChange:K=>{N(K?K.map(B=>B.value):[])},dependencies:{}})]}),i.jsxs(rt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{j(!1),N([])},disabled:L,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(T.length===0){Ee.error(l("Please select reports","kivicare-clinic-management-system"));return}C(!0),pe.mutate({report_ids:T,patient_id:t},{onSuccess:()=>{Ee.success(l("Reports sent successfully","kivicare-clinic-management-system")),j(!1),N([]),C(!1)},onError:K=>{Ee.error(K?.response?.data?.message||l("Failed to send reports","kivicare-clinic-management-system")),C(!1)}})},disabled:L,children:L?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Sending...","kivicare-clinic-management-system")]}):l("Send","kivicare-clinic-management-system")})]})]})]})},aee=({patientId:t,permissions:e})=>i.jsx(Ct,{children:i.jsx(Va,{children:i.jsx(Sk,{patientId:t,canEditEncounter:e.canEditEncounter,canUpdateEncounter:e.canUpdateEncounter})})});var ree=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],hC=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),r=String(s.getOptionValue(n)).toLowerCase(),o=String(s.getOptionLabel(n)).toLowerCase();return r===a||o===a},Jv={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,s,a){return!(!e||n.some(function(r){return hC(e,r,a)})||s.some(function(r){return hC(e,r,a)}))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};function lee(t){var e=t.allowCreateWhileLoading,n=e===void 0?!1:e,s=t.createOptionPosition,a=s===void 0?"last":s,r=t.formatCreateLabel,o=r===void 0?Jv.formatCreateLabel:r,c=t.isValidNewOption,d=c===void 0?Jv.isValidNewOption:c,m=t.getNewOptionData,u=m===void 0?Jv.getNewOptionData:m,p=t.onCreateOption,h=t.options,g=h===void 0?[]:h,v=t.onChange,x=ka(t,ree),y=x.getOptionValue,b=y===void 0?C2:y,w=x.getOptionLabel,k=w===void 0?N2:w,_=x.inputValue,j=x.isLoading,T=x.isMulti,N=x.value,E=x.name,A=f.useMemo(function(){return d(_,cp(N),g,{getOptionValue:b,getOptionLabel:k})?u(_,o(_)):void 0},[o,u,k,b,_,d,g,N]),L=f.useMemo(function(){return(n||!j)&&A?a==="first"?[A].concat(hc(g)):[].concat(hc(g),[A]):g},[n,a,j,A,g]),C=f.useCallback(function(P,R){if(R.action!=="select-option")return v(P,R);var M=Array.isArray(P)?P:[P];if(M[M.length-1]===A){if(p)p(_);else{var O=u(_,_),q={action:"create-option",name:E,option:O};v($d(T,[].concat(hc(cp(N)),[O]),O),q)}return}v(P,R)},[u,_,T,E,A,p,v,N]);return Ot(Ot({},x),{},{options:L,onChange:C})}var oee=f.forwardRef(function(t,e){var n=BE(t),s=lee(n);return f.createElement(Qb,It({ref:e},s))}),du=oee;Pe.string.isRequired,Pe.string,Pe.string,Pe.array.isRequired,Pe.func.isRequired,Pe.array.isRequired,Pe.func.isRequired,Pe.bool.isRequired,Pe.func.isRequired,Pe.object,Pe.string,Pe.func,Pe.func,Pe.bool,Pe.string,Pe.bool,Pe.bool,Pe.bool,Pe.func;const cee=({recordData:t,permissions:e,show:n,onToggle:s})=>{const{type:a,encounter_id:r,patient_id:o,isEncounterTemplate:c}=t,[d,m]=f.useState({title:"",type:a,encounter_id:r}),[u,p]=f.useState(!1),[h,g]=f.useState(!1),v=Ke(),{hasCapability:x}=mt(),y=a==="note",{data:b}=Ua(y?null:a==="problem"?"clinical_problems":"clinical_observations"),w=f.useMemo(()=>b?.data?b.data.map(H=>({value:H.value||H.id,label:H.label})):[],[b]),k=c?Wh(r,{type:a},{enabled:n}):Uh({patient_id:o,encounter_id:r,type:a},{enabled:n&&!!o}),_=f.useMemo(()=>(c?k?.data?.data?.items||[]:k?.data?.data?.histories||[]).map(ae=>({...ae,title:ae.clinical_detail_val||ae.title})),[k,c]),j=c?Ty():Ey(),T=c?tP():eP();c?Ty():Ey();const N=O7(),E=L7();f.useMemo(()=>{const H=_.map(ae=>ae.title);return w.filter(ae=>!H.includes(ae.label))},[w,_]),f.useEffect(()=>{m(H=>({...H,encounter_id:r}))},[r]);const A=async H=>{const ae=H;if(g(!0),!!ae.trim()){p(!0);try{const V=c?{templateId:r,template_id:r,type:a,title:ae}:{patient_id:o,encounter_id:r,type:a,title:ae};await j.mutateAsync(V),H||m({title:"",type:a,encounter_id:r}),k.refetch()}catch(V){console.error("Error saving medical history:",V),k.refetch()}finally{p(!1),g(!1)}}},L=H=>{const ae=c?br.list(r,{type:a}):Ql.list({patient_id:o,encounter_id:r,type:a});v.setQueryData(ae,V=>{const pe={id:Date.now(),title:H,clinical_detail_val:H,type:a,label:H};return V?c?{...V,data:{...V?.data,items:[...V?.data?.items||[],pe]}}:{...V,data:{...V?.data,histories:[...V?.data?.histories||[],pe]}}:c?{data:{items:[pe]}}:{data:{histories:[pe]}}})},C=H=>{const ae=c?br.list(r,{type:a}):Ql.list({patient_id:o,encounter_id:r,type:a});v.setQueryData(ae,V=>V&&(c?{...V,data:{...V?.data,items:(V?.data?.items||[]).filter(pe=>pe.id!==H)}}:{...V,data:{...V?.data,histories:(V?.data?.histories||[]).filter(pe=>pe.id!==H)}}))},P=async H=>{C(H);try{c?await T.mutateAsync({templateId:r,itemId:H}):await T.mutateAsync(H),k.refetch()}catch(ae){console.error("Error deleting medical history:",ae),k.refetch()}},R=f.useMemo(()=>a==="problem"?l("Select or type to add problem","kivicare-clinic-management-system"):a==="observation"?l("Select or type to add observation","kivicare-clinic-management-system"):l("Enter note","kivicare-clinic-management-system"),[a]),M=f.useMemo(()=>a==="problem"?l("Select Problems","kivicare-clinic-management-system"):a==="observation"?l("Select Observations","kivicare-clinic-management-system"):l("Notes","kivicare-clinic-management-system"),[a]),O=f.useMemo(()=>a==="problem"?l("Problems","kivicare-clinic-management-system"):a==="observation"?l("Observations","kivicare-clinic-management-system"):l("Notes","kivicare-clinic-management-system"),[a]),q=f.useCallback(async H=>{try{const ae=a==="problem"?"clinical_problems":"clinical_observations",V=await Et.getStaticDataWithPagination(ae,H),oe=(V?.data||[]).map(W=>({value:W.value||W.id,label:W.label})),ne=new Set((H.selectedTitles||"").split("|").filter(Boolean).map(W=>W.toLowerCase().trim()));return{data:oe.filter(W=>{const ge=W.label?W.label.toLowerCase().trim():"";return!ne.has(ge)}),pagination:V?.pagination||{}}}catch(ae){return console.error("Error loading options:",ae),{data:[],pagination:{}}}},[a]),U=async H=>{L(H);const ae=a==="problem"?N:E;ae?ae.mutate(H,{onSuccess:()=>{A(H)},onError:()=>{k.refetch()}}):A(H)};return n?y?i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:l("Notes","kivicare-clinic-management-system")}),i.jsxs(ll,{className:"bg-body card-block card-stretch card-height card mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_add")&&i.jsxs("div",{className:"form-group position-relative add-note-input d-flex",children:[i.jsx("textarea",{className:"form-control",placeholder:R,value:d.title,onChange:H=>m(ae=>({...ae,title:H.target.value})),rows:4}),i.jsx("button",{type:"button",className:"btn btn-primary py-1 px-3 add-btn-notes ms-2",onClick:()=>{d.title.trim()&&(L(d.title),A(d.title),m(H=>({...H,title:""})))},disabled:u||!d.title.trim(),children:l("Add","kivicare-clinic-management-system")})]}),_.length>0?i.jsx("ol",{className:"mt-3 mb-0 list-data-scroll",children:_.map(H=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("p",{className:"font-size-14 mb-0",children:H.title}),e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_delete")&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>P(H.id)})]})},H.id))}):i.jsx("div",{className:"text-danger mt-4 text-center",children:l("No record found","kivicare-clinic-management-system")})]})]})}):i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:O}),i.jsxs("div",{className:"bg-body card-block card-stretch card-height card p-3 mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("p",{className:"text-danger font-size-12 fw-bold mb-3",children:l("Note: Type and press enter to create new","kivicare-clinic-management-system")+" "+a}),i.jsx("div",{className:"form-group",children:e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_add")&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:M}),i.jsx(Xt,{placeholder:R,loadOptions:q,className:"react-select-box",classNamePrefix:"react-select",dependencies:{type:a,selectedTitles:_.map(H=>H.title).sort().join("|")},isCreatable:!0,onCreateOption:U,formatCreateLabel:H=>l("Add","kivicare-clinic-management-system")+` ${O}: "${H}"`,onChange:H=>{H&&(L(H.label),A(H.label))},value:null,isClearable:!0,isLoading:!1,noCache:!0},`select-${_.map(H=>H.title).sort().join("|")}`)]})}),_.length>0?i.jsx("ol",{className:"mt-4 mb-0 list-data-scroll",children:_.map(H=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("span",{className:"text-break",children:H.title}),e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_delete")&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>P(H.id)})]})},H.id))}):i.jsx("div",{className:"card-body text-danger mt-4 text-center",children:l("No record found","kivicare-clinic-management-system")})]})]})}):null},Mo={getPrescriptions:(t={})=>ve({endpoint:"prescriptions",method:"GET",data:t}),getPrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"GET"}),createPrescription:t=>ve({endpoint:"prescriptions",method:"POST",data:t}),updatePrescription:(t,e)=>ve({endpoint:`prescriptions/${t}`,method:"PUT",data:e}),deletePrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"DELETE"}),printPrescriptions:t=>ve({endpoint:`prescriptions/encounter/${t}/print`,method:"GET",responseType:"blob"}),exportPrescriptions:(t={})=>ve({endpoint:"prescriptions/export",method:"GET",data:t}),sendPrescriptionEmail:(t={})=>ve({endpoint:`prescriptions/${t.encounter_id}/email`,method:"POST",data:t})},cs={all:["prescriptions"],lists:()=>[...cs.all,"list"],list:t=>[...cs.lists(),{params:t}],details:()=>[...cs.all,"detail"],detail:t=>[...cs.details(),t]},dee=(t={},e={})=>gt({queryKey:cs.list(t),queryFn:()=>Mo.getPrescriptions(t),...e}),mee=()=>{const t=Ke();return He({mutationFn:e=>Mo.createPrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:cs.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:cs.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:cs.list({encounter_id:n.encounter_id})})}})},uee=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Mo.updatePrescription(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:cs.detail(n.id)}),n?.patient_id&&t.invalidateQueries({queryKey:cs.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:cs.list({encounter_id:n.encounter_id})})}})},hee=()=>{const t=Ke();return He({mutationFn:({id:e})=>Mo.deletePrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:cs.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:cs.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:cs.list({encounter_id:n.encounter_id})})}})},pee=()=>He({mutationFn:t=>Mo.printPrescriptions(t)}),gee=()=>He({mutationFn:t=>Mo.exportPrescriptions(t)}),fee=()=>He({mutationFn:t=>Mo.sendPrescriptionEmail(t)}),sf={getEncounterTemplatePrescriptions:t=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"GET"}),createEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"POST",data:e}),updateEncounterTemplatePrescription:(t,e,n)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"PUT",data:n}),deleteEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"DELETE"})},ol={all:["encounterTemplatePrescription"],lists:()=>[...ol.all,"list"],list:t=>[...ol.lists(),t],details:()=>[...ol.all,"detail"],detail:(t,e)=>[...ol.details(),t,e]},vee=(t,e={})=>gt({queryKey:ol.list(t),queryFn:()=>sf.getEncounterTemplatePrescriptions(t),...e}),xee=()=>{const t=Ke();return He({mutationFn:({templateId:e,...n})=>sf.createEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(ol.list(e.templateId))}})},yee=()=>{const t=Ke();return He({mutationFn:({templateId:e,id:n,...s})=>sf.updateEncounterTemplatePrescription(e,n,s),onSuccess:(e,n)=>{t.invalidateQueries(ol.list(n.templateId))}})},bee=()=>{const t=Ke();return He({mutationFn:({templateId:e,itemId:n})=>sf.deleteEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(ol.list(e.templateId))}})},wee=({patientId:t,encounterId:e,permissions:n})=>{const{prescription_modules:s,loading:a}=mt();if(!f.useMemo(()=>{if(a||!Array.isArray(s))return!0;const F=s.find(J=>J.name==="prescription");return F?F.status==1:!0},[a,s]))return null;const o=Ke(),{isAddonActive:c,hasCapability:d}=mt(),m=Bm(),{isEncounterTemplate:u}=m[m.length-1].handle.meta,{canEditEncounter:p,canUpdateEncounter:h}=n,[g,v]=f.useState(null),[x,y]=f.useState(!1),[b,w]=f.useState(!1),k=c("kiviPro"),_=mee(),j=uee(),T=hee(),N=xee(),E=yee(),A=bee(),L=pee(),C=gee(),P=fee(),{data:R,isLoading:M}=Ua("prescription_medicine"),O=F7(),{data:q,isLoading:U}=u?vee(e,{enabled:!0}):dee({patient_id:t,encounter_id:e}),H=q?.data?.items||q?.data||[],{register:ae,handleSubmit:V,reset:pe,setValue:oe,control:ne,formState:{errors:se}}=Jt({defaultValues:{name:"",frequency:"",duration:"",instruction:""}}),W=F=>{v(F),y(!0);const J=H[F];oe("name",{label:J.name,value:J.name}),oe("frequency",J.frequency),oe("duration",J.duration),oe("instruction",J.instruction)},ge=F=>{const J={patient_id:t,encounter_id:e,name:F.name?.label||F.name,frequency:F.frequency,duration:F.duration,instruction:F.instruction,added_by:1};if(g!==null&&H[g])u?E.mutate({templateId:e,id:H[g].id,...J}):j.mutate({id:H[g].id,...J}),Ee.success(l("Prescription updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});else{const Q=u?N:_,me=u?{templateId:e,name:F.name?.label||F.name,frequency:F.frequency,duration:F.duration,instruction:F.instruction}:J;Q.mutate(me),Ee.success(l("Prescription created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}pe(),y(!1),v(null)},ee=()=>{pe(),y(!1),v(null)},ie=F=>{const J=H[F];J?.id&&dt({title:l("Delete Prescription?","kivicare-clinic-management-system"),text:l("You're about to delete this prescription.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep prescription","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{if(Q.isConfirmed){ft({title:l("Deleting Prescription...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected prescription.<br>This won't take long.","kivicare-clinic-management-system")});const me=u?A:T,te=u?{templateId:e,id:J.id}:{id:J.id,patient_id:t,encounter_id:e};me.mutate(te,{onSuccess:Y=>{tt({title:l("Prescription Deleted","kivicare-clinic-management-system"),text:Y?.message||l("Prescription has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:Y=>{console.error("Delete prescription error:",Y);const Ce=Y?.response?.data?.message||Y?.message||l("Failed to delete prescription. Please try again.","kivicare-clinic-management-system");Me({text:Ce})}})}})},ue=[{header:l("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:F=>F.getValue()},{header:l("Frequency","kivicare-clinic-management-system"),accessorKey:"frequency",cell:F=>F.getValue()},{header:l("Duration","kivicare-clinic-management-system"),accessorKey:"duration",cell:F=>{const J=F.getValue();return J?`${J} ${l("days","kivicare-clinic-management-system")}`:l("N/A","kivicare-clinic-management-system")}},{header:l("Instruction","kivicare-clinic-management-system"),accessorKey:"instruction",cell:F=>F.getValue()||l("No data added","kivicare-clinic-management-system")},...Xi()?[]:[{header:l("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:F=>{const J=F.row.index;return h?i.jsxs("div",{className:"d-flex gap-2",children:[(u||d("prescription_edit"))&&i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>W(J),children:i.jsx("i",{className:"ph ph-pencil-simple"})}),d("prescription_delete")&&i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>ie(J),children:i.jsx("i",{className:"ph ph-trash"})})]}):i.jsx("div",{className:"text-center text-muted",children:"-"})}}]],G={name:{required:l("Prescription name is required","kivicare-clinic-management-system")},frequency:{required:l("Frequency is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:l("Frequency must be a number greater than zero","kivicare-clinic-management-system")}},duration:{required:l("Duration is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:l("Duration must be a number greater than zero","kivicare-clinic-management-system")}}},le=()=>{const F={onSuccess:J=>{const Q=new Blob([J],{type:"application/pdf"}),me=URL.createObjectURL(Q);window.open(me,"_blank"),setTimeout(()=>URL.revokeObjectURL(me),6e4)},onError:J=>{Ee.error(J?.response?.data?.message||l("Failed to print prescriptions","kivicare-clinic-management-system"))}};L.mutate(e,F)},re=async F=>({success:!0}),D=()=>{o.invalidateQueries(["prescriptions",{patient_id:t,encounter_id:e}])},I=async F=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const J={format:F,patient_id:t,encounter_id:e},Q=await C.mutateAsync(J);if(Q?.data?.prescriptions){const me=new Date().toISOString().split("T")[0],te=Q.data.prescriptions;switch(F){case"csv":gs(te,`prescriptions-${me}.csv`);break;case"xls":fs(te,`prescriptions-${me}.xls`);break;case"pdf":vs(te,`prescriptions-${me}.pdf`,"Prescriptions List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(J){console.error("Export error:",J),Me({title:l("Error!","kivicare-clinic-management-system"),text:J.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},ce=()=>I("csv"),Z=()=>I("xls"),K=()=>I("pdf"),B=()=>{P.mutate({encounter_id:e},{onSuccess:F=>{Ee.success(F?.message||l("Prescription email sent successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})},onError:F=>{Ee.error(F?.response?.data?.message||l("Failed to send prescription email","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})}})};return i.jsxs(i.Fragment,{children:[d("prescription_list")&&i.jsx(Ct,{children:i.jsxs(Va,{children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap justify-content-between mb-3",children:[i.jsx("h5",{children:l("Prescription","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[!u&&i.jsxs(i.Fragment,{children:[H.length>0&&p&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:B,children:l("Email","kivicare-clinic-management-system")}),h&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>w(!0),children:l("Import","kivicare-clinic-management-system")}),k&&H.length>0&&i.jsx(i.Fragment,{children:i.jsxs("button",{className:"btn btn-primary",type:"button",onClick:le,children:[i.jsx("i",{className:"ph ph-printer"})," ",l("Print","kivicare-clinic-management-system")]})})]}),h&&d("prescription_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>y(F=>!F),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Prescription","kivicare-clinic-management-system")})]})]})]}),k&&!u&&H.length>0&&i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 flex-wrap mb-3",children:d("prescription_export")&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-import-bg",onClick:ce,title:l("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:Z,title:l("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:K,title:l("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]})}),x&&i.jsx(ll,{className:"bg-body",children:i.jsxs("form",{onSubmit:V(ge),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"name",control:ne,rules:G.name,render:({field:F})=>i.jsx(du,{id:"prescription-name",...F,isClearable:!0,options:R?.data??[],placeholder:l("Select or create medicine","kivicare-clinic-management-system"),className:`react-select-container ${se.name?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isLoading:M||O.isPending,getOptionValue:J=>{const Q=J.value??J.id;return Q!=null?String(Q):""},getOptionLabel:J=>J.label,onChange:J=>{F.onChange(J)},onCreateOption:J=>{O.mutate(J,{onSuccess:Q=>{if(Q?.data){const me=Q.data?.data?.id||Q.data?.id,te=Q.data?.data?.label||J,Y={id:parseInt(me,10),value:parseInt(me,10),label:te};F.onChange(Y)}else F.onChange({label:J,value:J});Ee.success(l("Medicine added successfully","kivicare-clinic-management-system"))},onError:Q=>{console.error("Failed to save medicine:",Q);const me={label:J,value:J};F.onChange(me),Ee.error(l("Failed to save medicine to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},noOptionsMessage:()=>l("Type to create a new medicine","kivicare-clinic-management-system"),formatCreateLabel:J=>l("Add medicine","kivicare-clinic-management-system")+`: "${J}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new prescription","kivicare-clinic-management-system")]}),se.name&&i.jsx("div",{className:"invalid-feedback d-block",children:se.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Frequency","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${se.frequency?"is-invalid":""}`,type:"text",...ae("frequency",G.frequency),placeholder:'eg "1"(times per day)'}),se.frequency&&i.jsx("div",{className:"invalid-feedback d-block",children:se.frequency.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Duration (In Days)","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${se.duration?"is-invalid":""}`,type:"text",...ae("duration",G.duration),placeholder:'eg "5" (days)'}),se.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:se.duration.message})]})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Instruction","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",...ae("instruction"),placeholder:'eg "Drink milk after taking pills"'})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:ee,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:l("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(bn,{data:H,columns:ue,enableSelection:!1,isLoading:U,skeletonColumns:4,skeletonRows:3,striped:!0,bordered:!0,hover:!0,responsive:!0,moduleNamePlural:l("prescriptions","kivicare-clinic-management-system"),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:ue.length,className:"text-center py-4 border-start border-end",children:l("No data added","kivicare-clinic-management-system")})})})})]})}),k&&i.jsx(qr,{show:b,onHide:()=>w(!1),onImport:re,onReopenImport:()=>w(!0),onDataRefresh:D,context:"prescriptions",encounterId:e})]})},sP=()=>{const{id:t}=Yt(),{encounter_modules:e,loading:n}=mt(),{control:s,formState:{errors:a},setValue:r,watch:o}=Jt(),{encounterCustomFieldData:c}=nf(),{data:d}=Cn(),u=Xi()&&d?.data?.hideClinicalDetailsForPatient===!0,p=f.useCallback(w=>{if(n||!Array.isArray(e))return!0;const k=e.find(_=>_.name===w);return k?k.status==1:!0},[n,e]),h=p("problem"),g=p("observation"),v=p("note"),{clinicalData:x,permissions:y,uiState:b}=XJ(t,{isProblemEnabled:h,isObservationEnabled:g,isNoteEnabled:v});return i.jsxs("div",{className:"mt-4",children:[!u&&y.canViewMedicalRecords&&(h||g||v)&&i.jsx(Ct,{children:i.jsx(Va,{children:i.jsx("div",{className:"row",children:[{type:"problem",moduleName:"problem",show:b.showProblems,onToggle:b.setShowProblems},{type:"observation",moduleName:"observation",show:b.showObservations,onToggle:b.setShowObservations},{type:"note",moduleName:"note",show:b.showNote,onToggle:b.setShowNote}].map(w=>p(w.moduleName)&&i.jsx(cee,{recordData:{type:w.type,encounter_id:t,patient_id:x.patientId,isEncounterTemplate:x.isEncounterTemplate},permissions:y,show:w.show,onToggle:w.onToggle},w.type))})})}),!x.isEncounterTemplate&&i.jsx(aee,{patientId:x.patientId,permissions:y}),i.jsx(wee,{patientId:x.patientId,encounterId:t,permissions:y}),i.jsx(tf,{moduleType:"patient_encounter_module",moduleId:parseInt(t),control:s,errors:a,setValue:r,watch:o,initialData:c})]})},kee=()=>{const{id:t}=Yt(),e=Bm(),{isEncounterTemplate:n}=e[e.length-1].handle.meta,s={encounterData:null,isEncounterLoading:!1,encounterError:null,customForms:[],canEditEncounter:!0,canUpdateEncounter:!0,showEditBillModal:!1,showAddServiceItemForm:!1,editFormData:{},setEditFormData:()=>{},setShowAddServiceItemForm:()=>{},handleOpenEditBillModal:()=>{},handleCloseEditBillModal:()=>{},billData:null,encounterStatus:null,patientInfo:null,clinicInfo:null,isAddonActive:()=>!1,isEncounterTemplate:n||!1};return i.jsx(Ck.Provider,{value:s,children:i.jsx("div",{className:"row mb-0",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-5",children:i.jsx("h6",{className:"m-0",children:l("Other Details","kivicare-clinic-management-system")})}),i.jsx(sP,{})]})})})},pC=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["50px","120px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(Nl,{titleWidth:"140px"}),i.jsxs("form",{className:"mb-0",children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"})]})]})]}),gC=({view:t=null,children:e=null})=>i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"mt-4",children:e||i.jsx(i.Fragment,{children:t==="clinic-detail"?i.jsx(pt,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((n,s)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},s)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]})}):t==="body-chart"?i.jsx(Nn,{columns:5,rows:5,showHeader:!0,showActions:!0,showPagination:!0,showFilterBar:!0}):t==="custom-form"?i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"custom-form-container",children:i.jsxs("div",{className:"gy-3 row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"150px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:4}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"80px",height:"0.875rem"})]},s))})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"130px",inputHeight:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"200px",height:"0.875rem"})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"180px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:3}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]},s))})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"120px",height:"42px"})})]})}):i.jsxs(i.Fragment,{children:[i.jsx(pt,{children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(S,{width:"80px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(S,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(S,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"140px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-12",children:[i.jsx(S,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"100%",height:"80px",className:"mb-2",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100%",height:"1rem"})]})})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx(S,{width:"140px",height:"1.125rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"120px"}),i.jsx(st,{width:"120px"})]})]}),i.jsx(Nn,{columns:3,rows:2,showHeader:!0,showActions:!1,showPagination:!1})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap pt-3 justify-content-between mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"160px"})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 mb-3",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Nn,{columns:5,rows:3,showHeader:!0,showActions:!0,showPagination:!1})]})]})})})}),ph=({view:t=null})=>Gn().key!="default"?i.jsx(gC,{view:t}):i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["50px","120px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:"position-sticky top-0",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsxs(pt,{children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"180px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"100px",height:"0.875rem"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(S,{width:"100px",height:"1.125rem"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"140px"})]})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-2"}),i.jsx(pt,{children:i.jsx(Se,{labelWidth:"180px",inputHeight:"38px"})})]})]})}),i.jsxs("div",{className:"col-xl-9 col-lg-8",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"20px"}})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"140px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx(gC,{view:t})]})]})]}),jee=()=>i.jsx("div",{className:"body-chart-outlet",children:i.jsx(xs,{})}),Nee=()=>i.jsx("div",{className:"body-chart-editor-page",children:i.jsxs(Ct,{children:[i.jsx(Ct.Header,{className:"mb-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx(S,{width:"150px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"120px"})]})]})}),i.jsxs(Ct.Body,{children:[i.jsx(Qn,{children:i.jsxs(_t,{md:12,children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"100px"})]})]})}),i.jsx(Qn,{className:"mt-4",children:i.jsx(_t,{xs:12,children:i.jsx(Ct,{children:i.jsx(Ct.Body,{children:i.jsxs("div",{style:{height:"76vh",position:"relative"},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(st,{width:"40px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"})]}),i.jsx(S,{width:"100%",height:"100%"})]})})})})})]})]})}),Hr={getClinics:(t={})=>ve({endpoint:"clinics",method:"GET",data:t}),getClinic:t=>ve({endpoint:`clinics/${t}`,method:"GET"}),createClinic:t=>ve({endpoint:"clinics",method:"POST",data:t}),updateClinic:(t,e)=>ve({endpoint:`clinics/${t}`,method:"PUT",data:e}),deleteClinic:t=>ve({endpoint:`clinics/${t}`,method:"DELETE"}),getClinicDoctors:(t,e={})=>ve({endpoint:`clinics/${t}/doctors`,method:"GET",data:e}),getClinicPatients:(t,e={})=>ve({endpoint:`clinics/${t}/patients`,method:"GET",data:e}),getClinicServices:(t,e={})=>ve({endpoint:`clinics/${t}/services`,method:"GET",data:e}),getClinicSchedule:(t,e={})=>ve({endpoint:`clinics/${t}/schedule`,method:"GET",data:e}),resendCredentials:t=>ve({endpoint:`clinics/${t}/resend-credentials`,method:"POST"}),updateClinicStatus:(t,e)=>ve({endpoint:`clinics/${t}/status`,method:"PUT",data:{status:e}}),bulkDeleteClinics:t=>ve({endpoint:"clinics/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"clinics/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateClinicStatus:(t,e)=>ve({endpoint:"clinics/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportClinics:(t={})=>ve({endpoint:"clinics/export",method:"GET",data:t})},Ws={all:["clinics"],lists:()=>[...Ws.all,"list"],list:t=>[...Ws.lists(),{filters:t}],details:()=>[...Ws.all,"detail"],detail:t=>[...Ws.details(),t]},aP=(t={},e={})=>gt({queryKey:Ws.list(t),queryFn:()=>Hr.getClinics(t),...e}),Cee=(t,e={})=>gt({queryKey:Ws.detail(t),queryFn:()=>Hr.getClinic(t),enabled:!!t,...e}),See=()=>{const t=Ke();return He({mutationFn:e=>Hr.createClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},_ee=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Hr.updateClinic(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ws.detail(n.id)}),t.invalidateQueries({queryKey:Ws.lists()})}})},Eee=()=>{const t=Ke();return He({mutationFn:e=>Hr.deleteClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Tee=()=>He({mutationFn:t=>Hr.resendCredentials(t)}),Aee=()=>{const t=Ke();return He({mutationFn:e=>Hr.bulkDeleteClinics(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Dee=()=>He({mutationFn:t=>Hr.bulkResendCredentials(t)}),Ree=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>Hr.bulkUpdateClinicStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},er={getDoctors:(t={})=>ve({endpoint:"doctors",method:"GET",data:t}),getDoctor:t=>ve({endpoint:`doctors/${t}`,method:"GET"}),createDoctor:t=>ve({endpoint:"doctors",method:"POST",data:t}),updateDoctor:(t,e)=>ve({endpoint:`doctors/${t}`,method:"PUT",data:e}),deleteDoctor:t=>ve({endpoint:`doctors/${t}`,method:"DELETE"}),getDoctorSchedule:(t,e={})=>ve({endpoint:`doctors/${t}/schedule`,method:"GET",data:e}),bulkDeleteDoctors:t=>ve({endpoint:"doctors/bulk/delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`doctors/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"doctors/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateDoctorStatus:(t,e)=>ve({endpoint:"doctors/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctors:(t={})=>ve({endpoint:"doctors/export",method:"GET",data:t})},as={all:["doctors"],lists:()=>[...as.all,"list"],list:t=>[...as.lists(),{filters:t}],details:()=>[...as.all,"detail"],detail:t=>[...as.details(),t],schedule:()=>[...as.all,"schedule"],doctorSchedule:t=>[...as.schedule(),t]},_k=(t={},e={})=>gt({queryKey:as.list(t),queryFn:()=>er.getDoctors(t),...e}),af=(t,e={})=>gt({queryKey:as.detail(t),queryFn:()=>er.getDoctor(t),enabled:!!t,...e}),Pee=()=>{const t=Ke();return He({mutationFn:e=>er.createDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:as.lists()})}})},Mee=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>er.updateDoctor(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:as.detail(n.id)}),t.invalidateQueries({queryKey:as.lists()}),t.invalidateQueries({queryKey:["dashboard","topDoctors"]})}})},Iee=()=>{const t=Ke();return He({mutationFn:e=>er.deleteDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:as.lists()})}})},Oee=()=>{const t=Ke();return He({mutationFn:e=>er.bulkDeleteDoctors(e),onSuccess:()=>{t.invalidateQueries({queryKey:as.lists()})}})},Lee=()=>He({mutationFn:t=>er.resendCredentials(t)}),Fee=()=>He({mutationFn:t=>er.bulkResendCredentials(t)}),$ee=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>er.bulkUpdateDoctorStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:as.lists()})}})},Bee=()=>He({mutationFn:t=>er.exportDoctors(t)}),ia={getPatients:(t={})=>ve({endpoint:"patients",method:"GET",data:t}),getPatient:t=>ve({endpoint:`patients/${t}`,method:"GET"}),createPatient:t=>ve({endpoint:"patients",method:"POST",data:t}),updatePatient:(t,e)=>ve({endpoint:`patients/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`patients/${t}/resend-credentials`,method:"POST"}),deletePatient:t=>ve({endpoint:`patients/${t}`,method:"DELETE"}),bulkDeletePatients:t=>ve({endpoint:"patients/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"patients/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdatePatientStatus:(t,e)=>ve({endpoint:"patients/bulk/status",method:"PUT",data:{ids:t,status:e}}),getPatientUniqueId:()=>ve({endpoint:"patients/uniqueid",method:"GET"}),exportPatients:(t={})=>ve({endpoint:"patients/export",method:"GET",data:t}),getPatientStatistics:t=>ve({endpoint:`patients/${t}/statistics`,method:"GET"})},ds={all:["patients"],lists:()=>[...ds.all,"list"],list:t=>[...ds.lists(),{filters:t}],details:()=>[...ds.all,"detail"],detail:t=>[...ds.details(),t]},rP=(t={},e={})=>gt({queryKey:ds.list(t),queryFn:()=>ia.getPatients(t),...e}),qee=(t,e={})=>gt({queryKey:ds.detail(t),queryFn:()=>ia.getPatient(t),enabled:!!t,...e}),Hee=()=>{const t=Ke();return He({mutationFn:e=>ia.createPatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:ds.lists()}),t.invalidateQueries({queryKey:ut.users()})}})},zee=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>ia.updatePatient(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ds.detail(n.id)}),t.invalidateQueries({queryKey:ds.lists()})}})},Vee=()=>He({mutationFn:t=>ia.resendCredentials(t)}),Uee=()=>{const t=Ke();return He({mutationFn:e=>ia.deletePatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:ds.lists()})}})},Wee=()=>{const t=Ke();return He({mutationFn:e=>ia.bulkDeletePatients(e),onSuccess:()=>{t.invalidateQueries({queryKey:ds.lists()})}})},Kee=()=>He({mutationFn:t=>ia.bulkResendCredentials(t)}),Gee=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>ia.bulkUpdatePatientStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:ds.lists()})}})},Yee=(t={})=>gt({queryKey:[...ds.all,"uniqueid"],queryFn:()=>ia.getPatientUniqueId(),...t}),Qee=()=>He({mutationFn:t=>ia.exportPatients(t)}),Zee=(t,e={})=>gt({queryKey:[...ds.detail(t),"statistics"],queryFn:()=>ia.getPatientStatistics(t),enabled:!!t,...e}),Ay=({patientId:t})=>{const[e,n]=f.useState(!1),[s,a]=f.useState(()=>{const I={};return t&&(I.patientId=t),I}),[r,o]=f.useState(!1),c=f.useRef(null),{userRole:d,isAddonActive:m,hasCapability:u}=mt(),{data:p}=Cn(),h=m("kiviPro"),g=Jn(),v=Vn(),x=Fi(),y=Xi(),b=p?.data?.allowEncounterEdit,[w,k]=f.useState(null),_=On(),[j,T]=f.useState(null),N=Za(j,500);We.useEffect(()=>{a(I=>({...I,search:N,page:1,...t?{patientId:t}:{}}))},[N,t]);const E=I=>{T(I.target.value)};nP();const A=VJ(),L=Ke(),C=f.useMemo(()=>Object.fromEntries(Object.entries(s).filter(([I,ce])=>ce!==""&&ce!==null&&ce!==void 0)),[s]),P=QJ(),R=async I=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const Z=(await P.mutateAsync({format:I,...C})).data,K=new Date().toISOString().split("T")[0],B=`${l("Patients Encounter List","kivicare-clinic-management-system")} - ${K}`;I==="csv"?gs(Z,`${B}.csv`):I==="xls"?fs(Z,`${B}.xls`):I==="pdf"&&vs(Z,`${B}.pdf`,l("Patients Encounter List","kivicare-clinic-management-system")),Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(ce){console.error("Export failed:",ce),Me({title:l("Error!","kivicare-clinic-management-system"),text:ce.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},M=He({mutationFn:I=>Mr.deleteEncounter(I),onSuccess:()=>{L.invalidateQueries({queryKey:["encounters"]})}}),O=f.useMemo(()=>[_.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:I=>I.getValue(),enableSorting:!0}),_.accessor("patientName",{header:()=>l("Patient","kivicare-clinic-management-system"),cell:I=>{const ce=I.row.original;return i.jsx(on,{profileUrl:ce.patient_image_url,name:ce.patientName,email:ce.patientEmail||"",nameLabel:l("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0}),...x?[]:[_.accessor("doctorName",{header:()=>l("Doctor","kivicare-clinic-management-system"),cell:I=>{const ce=I.row.original;return i.jsx(on,{profileUrl:ce.doctor_image_url,name:ce.doctorName,email:ce.doctorEmail||"",nameLabel:l("Doctor","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})],...h&&!g&&!v?[_.accessor("clinicName",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:I=>{const ce=I.row.original;return i.jsx(on,{profileUrl:ce.clinic_image_url,name:ce.clinicName,email:ce.clinicEmail||"",nameLabel:l("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})]:[],_.accessor("encounterDate",{header:()=>l("Date","kivicare-clinic-management-system"),cell:I=>I.getValue(),enableSorting:!0}),_.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:I=>{const ce=I.getValue();return ce===1||ce==="1"?i.jsx("span",{className:"badge bg-success-subtle px-3 py-2",children:l("Active","kivicare-clinic-management-system")}):ce===0||ce==="0"?i.jsx("span",{className:"badge bg-danger-subtle px-3 py-2",children:l("Closed","kivicare-clinic-management-system")}):i.jsx("span",{children:ce})},enableSorting:!0}),...u("patient_encounter_edit")||u("patient_encounter_view")||u("patient_encounter_delete")||u("patient_encounter_view_billing")?[_.display({id:"action",header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>{const ce=Z=>K=>i.jsx(it,{id:`tooltip-${I.cell.row.original.id}-${Z}`,...K,children:Z});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[u("patient_encounter_edit")&&(I.cell.row.original.status!=="0"||b==="on")&&!y&&i.jsx(Ue,{placement:"top",overlay:ce(l("Edit Encounter","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/edit/${I.cell.row.original.id}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),I.cell.row.original.status=="0"&&h&&I.cell.row.original.billId&&u("patient_encounter_view_billing")&&i.jsx(Ue,{placement:"top",overlay:ce(l("View Billing","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/billings/view/${I.cell.row.original.billId}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),u("patient_encounter_view")&&i.jsx(Ue,{placement:"top",overlay:ce(l("View Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${I.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),u("patient_encounter_delete")&&i.jsx(Ue,{placement:"top",overlay:ce(l("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async Z=>{Z.preventDefault(),dt({title:l("Delete Encounter?","kivicare-clinic-management-system"),text:l("You're about to delete this encounter.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep encounter","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(K=>{K.isConfirmed&&(ft({title:l("Deleting Encounter...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected encounter.<br>This won't take long.","kivicare-clinic-management-system")}),M.mutate(I.cell.row.original.id,{onSuccess:B=>{tt({title:l("Encounter Deleted","kivicare-clinic-management-system"),text:B?.message||l("Encounter has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to encounters","kivicare-clinic-management-system")})},onError:B=>{Me({text:B?.response?.data?.message||B?.message||l("Failed to delete encounter. Please try again.","kivicare-clinic-management-system")})}}))})},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})}})]:[]],[_,M,u,b,g,v]),q=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Closed","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],U=()=>R("csv"),H=()=>R("xls"),[ae,V]=f.useState(!1),pe=()=>{ae||(V(!0),R("pdf"),setTimeout(()=>V(!1),2e3))},{data:oe,isLoading:ne,error:se}=zJ(s),{data:W,isLoading:ge}=aP(),{data:ee,isLoading:ie}=_k(),{data:ue,isLoading:G}=rP(),le=(W?.data?.clinics||[]).map(I=>({value:I.id,label:I.name||I.clinic_name})),re=(ee?.data?.doctors||[]).map(I=>({value:I.id,label:I.name||`${I.first_name||""} ${I.last_name||""}`})),D=(ue?.data?.patients||[]).map(I=>({value:I.id,label:I.name||`${I.first_name||""} ${I.last_name||""}`}));return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:l("All Encounter List","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[!y&&u("patient_encounter_add")&&i.jsxs(ht,{to:"/encounter/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Encounter","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>n(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!r,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:c,children:i.jsxs("div",{ref:c,className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Wn,{className:"form-control w-auto",value:w?Xn(w):"",options:{dateFormat:vi(window.kc_frontend.date_format),allowInput:!0,locale:Kn()},onChange:I=>{if(I&&I[0]){const ce=I[0],Z=ce.getFullYear(),K=String(ce.getMonth()+1).padStart(2,"0"),B=String(ce.getDate()).padStart(2,"0"),F=`${Z}-${K}-${B}`;k(F),a(J=>({...J,encounterDate:F}))}else k(null),a(ce=>({...ce,encounterDate:void 0}))},placeholder:l("Select Date","kivicare-clinic-management-system")}),w&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute",style:{right:"48px",top:"50%",transform:"translateY(-50%)",zIndex:10,padding:"4px 8px",background:"transparent",border:"none"},onClick:()=>{k(null),a(I=>({...I,encounterDate:void 0}))},title:l("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x text-danger",style:{fontSize:"16px"}})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:q,onChange:I=>a(ce=>({...ce,encounterStatus:I?I.value:""})),value:q.find(I=>I.value===s.encounterStatus)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:I=>({...I,zIndex:9999})}})]}),i.jsx("div",{className:"position-relative"}),i.jsx("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:j,onChange:E})]}),u("patient_encounter_export")&&h&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:U,disabled:P.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:H,disabled:P.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:pe,disabled:P.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})}),i.jsx(bn,{data:oe?.data.encounters||[],columns:O,moduleNamePlural:"encounters",currentPage:oe?.data.page,perPage:oe?.data.per_page||10,totalItems:oe?.data.total||(oe?.data.encounters?oe.data.length:0),lastPage:oe?.data.total_pages||1,isLoading:ne,enableSelection:!y,enableSorting:!0,onPageChange:I=>a(ce=>({...ce,page:I})),onPerPageChange:I=>a(ce=>({...ce,perPage:I,page:1})),onSortingChange:I=>{a(ce=>({...ce,sortBy:I.length>0?I[0].id:void 0,sortOrder:I.length>0?I[0].desc?"desc":"asc":void 0,page:1}))},bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(I,ce)=>{const Z=I.map(K=>K.id);dt({title:l("Delete Encounters?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${I.length} encounters</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep encounters","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(K=>{K.isConfirmed&&(ft({title:l("Deleting Encounters...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected encounters.<br>This won't take long.","kivicare-clinic-management-system")}),A.mutate(Z,{onSuccess:B=>{tt({title:l("Encounter Deleted","kivicare-clinic-management-system"),text:l(`${I.length} encounter${I.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to encounters","kivicare-clinic-management-system")}),ce()},onError:B=>{console.error("Bulk delete encounters error:",B);const F=B?.response?.data?.message||B?.message||l("Failed to delete selected encounters. Please try again.","kivicare-clinic-management-system");Me({text:F})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:I=>{o(I)}})]}),i.jsx(na,{show:e,width:"540px",onHide:()=>n(!1),queryParams:s,onApplyFilters:I=>{a(ce=>({...ce,...I,page:1})),n(!1)},onResetFilters:()=>{a({...t?{patientId:t}:{}}),n(!1)},title:l("Filters","kivicare-clinic-management-system"),fields:[{name:"inlineDateRange",label:l("Select Date","kivicare-clinic-management-system"),type:"inlineDateRange",startDateKey:"startDate",endDateKey:"endDate",placeholder:l("eg Feb 25,2025","kivicare-clinic-management-system")},{name:"id",label:l("ID","kivicare-clinic-management-system"),type:"text",placeholder:l("eg 123","kivicare-clinic-management-system")},...x?[]:[...h?[{name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),type:"select",options:le,isLoading:ge,placeholder:l("eg Mount Health Care","kivicare-clinic-management-system")}]:[],{name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),type:"select",options:re,isLoading:ie,placeholder:l("eg Albert Heaven","kivicare-clinic-management-system")}],...y?[]:[{name:"patient",label:l("Patient","kivicare-clinic-management-system"),type:"select",options:D,isLoading:G,placeholder:l("eg Amelia Brightwell","kivicare-clinic-management-system")}],{name:"status",label:l("Status","kivicare-clinic-management-system"),type:"select",options:q,placeholder:l("eg Active","kivicare-clinic-management-system")}],hasAppliedFilters:f.useMemo(()=>["id","clinic","doctor","patient","startDate","endDate","status","search","encounterDate","encounterStatus"].some(ce=>{const Z=s[ce];return Z!=null&&Z!==""})||j!==null&&j!=="",[s,j])})]})},Xee=We.memo(({formData:t={},onSubmit:e,onCancel:n,isSubmitting:s})=>{const{register:a,handleSubmit:r,watch:o,setValue:c,reset:d,control:m,formState:{errors:u,isDirty:p}}=Jt(),{userRole:h,currentDoctorId:g,isAddonActive:v,defaultClinicId:x}=mt(),y=Ke(),[b,w]=f.useState({clinics:[],doctors:[],patients:[],loadingClinics:!0,loadingDoctors:!1,loadingPatients:!1,clinicError:null,doctorError:null,patientError:null,initialLoadComplete:!1}),[k,_]=f.useState(!1),j=o("clinic"),T=f.useRef(t),N=f.useRef(!0),E=f.useRef(null),A=v("kiviPro"),L=Jn();bk();const C=t?.id,{data:P}=_y("patient_encounter_module",C,{enabled:!!C}),R=f.useCallback(async({page:ee,per_page:ie,search:ue})=>{try{const G={dataType:"clinicList",page:ee,per_page:ie,search:ue};return await y.fetchQuery({queryKey:ut.list(G),queryFn:()=>Et.getStaticData(G),staleTime:0})}catch(G){return console.error("Error loading clinics:",G),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),M=f.useCallback(async({page:ee,per_page:ie,search:ue,clinic_ids:G})=>{try{const le={dataType:"staticData",staticDataType:"doctors",clinic_ids:G,page:ee,per_page:ie,search:ue};return await y.fetchQuery({queryKey:ut.list(le),queryFn:()=>Et.getStaticData(le),staleTime:0})}catch(le){return console.error("Error loading doctors:",le),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),O=f.useCallback(async({page:ee,per_page:ie,search:ue,clinic_ids:G})=>{try{const le={dataType:"staticData",staticDataType:"patients",clinic_ids:G,page:ee,per_page:ie,search:ue};return await y.fetchQuery({queryKey:ut.list(le),queryFn:()=>Et.getStaticData(le),staleTime:0})}catch(le){return console.error("Error loading patients:",le),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),q=f.useMemo(()=>new Date().toISOString().slice(0,10),[]),U=ee=>ee!=null?String(ee):"",H=(ee,ie=!1)=>{if(ie&&ee){if(typeof ee=="string"&&ee.length>=10){const D=ee.substring(0,10);if(/^\d{4}-\d{2}-\d{2}$/.test(D))return D}const ue=new Date(ee);if(isNaN(ue.getTime()))return q;const G=ue.getFullYear(),le=String(ue.getMonth()+1).padStart(2,"0"),re=String(ue.getDate()).padStart(2,"0");return`${G}-${le}-${re}`}return q},ae=!!(t?.id||t?.encounterDate||t?.clinic||t?.doctor||t?.patient),V=f.useCallback(async()=>{w(ee=>({...ee,loadingClinics:!0,clinicError:null}));try{const ee=await Et.getClinics(),ie=ee.data||ee||[];if(w(ue=>({...ue,clinics:ie,loadingClinics:!1})),T.current?.clinic&&N.current){const ue=U(T.current.clinic);ie.some(le=>U(le.id)===ue||U(le.ID)===ue||U(le.slug)===ue||U(le.name)===ue)&&c("clinic",ue,{shouldDirty:!1})}}catch(ee){w(ie=>({...ie,clinicError:ee.message||"Failed to fetch clinics",loadingClinics:!1}))}},[]),pe=f.useCallback(async ee=>{if(!ee){w(ie=>({...ie,doctors:[]}));return}w(ie=>({...ie,loadingDoctors:!0,doctorError:null}));try{const ie=await Et.getDoctors(ee),ue=ie.data||ie||[];if(w(G=>({...G,doctors:ue,loadingDoctors:!1})),T.current?.doctor&&N.current){const G=U(T.current.doctor);ue.some(re=>U(re.id)===G||U(re.ID)===G||U(re.slug)===G||U(re.name)===G)&&c("doctor",G,{shouldDirty:!1})}}catch(ie){w(ue=>({...ue,doctorError:ie.message||"Failed to fetch doctors",doctors:[],loadingDoctors:!1}))}},[]),oe=f.useCallback(async()=>{w(ee=>({...ee,loadingPatients:!0,patientError:null}));try{const ee=dl(),ie=await Et.getUsersByRole(ee),ue=ie.data||ie||[];if(w(G=>({...G,patients:ue,loadingPatients:!1})),T.current?.patient&&N.current){const G=U(T.current.patient);ue.some(re=>U(re.id)===G||U(re.ID)===G||U(re.slug)===G||U(re.name)===G)&&c("patient",G,{shouldDirty:!1})}}catch(ee){w(ie=>({...ie,patientError:ee.message||"Failed to fetch patients",patients:[],loadingPatients:!1}))}},[]);f.useEffect(()=>{(async()=>{const ie=t?.id||"new_session";if(E.current===ie)return;T.current=t;const ue={encounterDate:H(t?.encounterDate,ae),clinic:t?.clinic?{value:U(t?.clinic),label:t?.clinicName||U(t?.clinic)}:(!A||L)&&x?{value:U(x),label:U(x)}:null,doctor:h==="kiviCare_doctor"?g:t?.doctor?{value:U(t?.doctor),label:t?.doctorName||U(t?.doctor)}:null,patient:t?.patient?{value:U(t?.patient),label:t?.patientName||U(t?.patient)}:null,description:t?.description||""};d(ue),await Promise.all([V(),oe()]),t?.clinic&&await pe(t?.clinic),t?.clinic&&c("clinic",{value:U(t?.clinic),label:t?.clinicName||U(t?.clinic)},{shouldDirty:!1}),t?.doctor&&h!=="kiviCare_doctor"&&c("doctor",{value:U(t?.doctor),label:t?.doctorName||U(t?.doctor)},{shouldDirty:!1}),t?.patient&&c("patient",{value:U(t?.patient),label:t?.patientName||U(t?.patient)},{shouldDirty:!1}),w(G=>({...G,initialLoadComplete:!0})),E.current=ie,N.current=!1})()},[t,d,V,pe,oe,h,g,A,x,ae]),f.useEffect(()=>{b.initialLoadComplete&&j&&!N.current&&pe(j)},[j,b.initialLoadComplete,pe]),f.useEffect(()=>{C&&P&&c&&Object.keys(P).forEach(ee=>{c(`custom_field_${ee}`,P[ee])})},[C,P,c]);const ne=f.useCallback(async ee=>{if(!(s||k)){_(!0);try{ee.clinic=ee.clinic?.value??ee.clinic,ee.doctor=ee.doctor?.value??ee.doctor,ee.patient=ee.patient?.value??ee.patient,h==="kiviCare_doctor"&&(ee.doctor=g);const ie={};Object.keys(ee).forEach(ue=>{if(ue.startsWith("custom_field_")){const G=ue.replace("custom_field_","");ie[G]=ee[ue],delete ee[ue]}}),ee.customFieldData=ie,await new Promise(ue=>setTimeout(ue,1e3)),await e(ee)}catch(ie){console.error("Form submission error:",ie)}finally{_(!1)}}},[e,s,h,g,k]),se=f.useCallback(()=>{n()},[n]),W=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:x},[A,x,o("clinic")]),ge=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:x},[A,x,o("clinic")]);return i.jsxs("form",{onSubmit:r(ne),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Encounter Date","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx(be,{name:"encounterDate",control:m,rules:{required:l("Encounter date is required","kivicare-clinic-management-system")},render:({field:ee})=>i.jsx(Wn,{...ee,value:ae?ee.value?Xn(ee.value):"":ee.value?Xn(ee.value):Xn(q),className:`form-control ${u.encounterDate?"is-invalid":""}`,options:{dateFormat:vi(window.kc_frontend.date_format),allowInput:!0,locale:Kn()},onChange:ie=>{if(ie&&ie[0]){const ue=ie[0],G=ue.getFullYear(),le=String(ue.getMonth()+1).padStart(2,"0"),re=String(ue.getDate()).padStart(2,"0");ee.onChange(`${G}-${le}-${re}`)}else ee.onChange("")}})}),u.encounterDate&&i.jsx("div",{className:"invalid-feedback",children:u.encounterDate.message}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})]})}),A&&i.jsx("div",{className:`col-lg-3 col-sm-6 ${L?"d-none":""}`,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:m,rules:{required:l("Clinic is required","kivicare-clinic-management-system")},render:({field:ee})=>i.jsx(Xt,{id:"clinic",loadOptions:R,value:ee.value,onChange:ie=>{ee.onChange(ie),c("doctor",null),c("patient",null)},placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{}})}),u.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:u.clinic.message})]})}),h!=="kiviCare_doctor"&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"doctor",control:m,rules:{required:l("Doctor is required","kivicare-clinic-management-system")},render:({field:ee})=>i.jsx(Xt,{id:"doctor",loadOptions:M,value:ee.value,onChange:ie=>{ee.onChange(ie)},placeholder:l("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic"),dependencies:W},A?`doctor-${o("clinic")?.value}`:"doctor-lite")}),u.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:u.doctor.message})]})})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Patient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"patient",control:m,rules:{required:l("Patient is required","kivicare-clinic-management-system")},render:({field:ee})=>i.jsx(i.Fragment,{children:i.jsx(Xt,{id:"patient",loadOptions:O,value:ee.value,onChange:ie=>{ee.onChange(ie)},placeholder:l("Select Patient","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic")||ae,dependencies:ge},A?`patient-${o("clinic")?.value}`:"patient-lite")})}),u.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:u.patient.message})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",placeholder:l("Write description","kivicare-clinic-management-system"),...a("description")})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:se,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p||k,children:k?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})]})]})});function fC({isEditing:t=!1,...e}){const n=mn(),{mutate:s,isLoading:a}=HJ(),{id:r}=Yt(),o=bk(),c=h=>{const g=h.customFieldData||{};delete h.customFieldData,s({id:t?r:null,data:h,isEdit:t},{onSuccess:async v=>{const x=v?.data?.id||r;if(Object.keys(g).length>0&&x)try{await o.mutateAsync({moduleType:"patient_encounter_module",moduleId:x,fieldsData:g})}catch(y){console.error("Error saving custom field data:",y)}Ee.success(l("Encounter saved successfully!","kivicare-clinic-management-system")),setTimeout(()=>{n(`/encounter/dashboard/${x}/clinical-details`)},1600)},onError:v=>{console.error("Error:",v)}})},{data:d,isLoading:m,error:u}=t&&r?Nk(r):{data:null,isLoading:!1,error:null};We.useEffect(()=>{u&&(u?.response?.status===403||u?.status===403)&&n("/403")},[u,n]);const p=f.useMemo(()=>{if(t&&d){const h=d.data||d;if(h)return{id:r,encounterDate:h.encounterDate,clinic:h.clinicId,clinicName:h.clinicName,doctor:h.doctorId,doctorName:h.doctorName,patient:h.patientId,patientName:h.patientName,description:h.description,status:h.status}}return{}},[t,d,r]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:t?l("Edit Encounter","kivicare-clinic-management-system"):l("Add Encounter","kivicare-clinic-management-system")})})}),i.jsx(Xee,{formData:p,onSubmit:c,onCancel:()=>n(-1),isSubmitting:a})]})}const Jee=()=>i.jsxs(pt,{children:[i.jsx(S,{width:"100px",height:"14px",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"150px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"100px",height:"14px"}),i.jsx(S,{width:"100px",height:"14px"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"80px",height:"14px"}),i.jsx(S,{width:"40px",height:"14px"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(S,{width:"100px",height:"14px"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"120px"})]})]}),ete=({canEditEncounter:t,templateId:e,encounterId:n})=>{const{isAddonActive:s}=mt(),a=Ke(),r=s("kiviPro");if(!r&&!t)return null;const c=(r?iP():{data:{data:{list:[]}}})?.data?.data?.list??[],d=c.map(v=>({value:v.id,label:v.name})),[m,u]=f.useState(d.find(v=>v.value==e)),p=GJ();f.useEffect(()=>{if(c.length>0){const v=d.find(x=>x.value==e);u(v||null)}},[e,c]);const h=async v=>{if(!v||!n){u(v);return}try{await p.mutateAsync({templateId:v.value,encounterId:n}),u(v),Ee.success(l("Template applied to encounter successfully!","kivicare-clinic-management-system"))}catch(x){console.error("Error applying template:",x),Ee.error(l("Failed to apply template to encounter.","kivicare-clinic-management-system")),u(d.find(y=>y.value==e)||null)}},g=f.useCallback(async({page:v,per_page:x,search:y})=>{try{const b={page:v,per_page:x,search:y},w=await a.fetchQuery({queryKey:["encounter-templates",b],queryFn:()=>fo.getTemplates(b),staleTime:0});return{data:w.data.list.map(j=>({value:j.id,label:j.name})),pagination:{total:w.data.total_rows,per_page:w.data.per_page,current_page:w.data.page,total_pages:w.data.total_pages,has_more:w.data.has_more}}}catch(b){return console.error("Error loading clinics:",b),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[a]);return i.jsxs("div",{className:"mt-5 pt-2 position-relative",children:[!r&&i.jsx(ci,{link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("h6",{children:l("Encounter Template","kivicare-clinic-management-system")}),i.jsx(ll,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Select Encounter Template","kivicare-clinic-management-system")}),i.jsx(Xt,{id:"encounter-template",loadOptions:g,value:m,onChange:h,placeholder:l("Select Encounter Template","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:p.isPending,dependencies:{}})]})})]})},tte=()=>{const{id:t}=Yt(),e=mn(),n=Gn(),s=Ke(),a=Xi(),r=YJ(),{encounterData:o,isEncounterLoading:c,encounterError:d,customForms:m,canEditEncounter:u,canUpdateEncounter:p,showEditBillModal:h,showAddServiceItemForm:g,editFormData:v,setEditFormData:x,setShowAddServiceItemForm:y,handleOpenEditBillModal:b,handleCloseEditBillModal:w,billData:k,encounterStatus:_,patientInfo:j,clinicInfo:T,isAddonActive:N,customFields:E,customFieldData:A}=nf(),{module_config:L}=mt(),C=nP(),P=N("kiviPro"),R=()=>{$t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This will close the encounter directly without generating an invoice.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, close it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(H=>{H.isConfirmed&&C.mutate({ids:[t],status:"0"},{onSuccess:()=>{$t.fire({title:l("Closed!","kivicare-clinic-management-system"),text:l("The encounter has been closed successfully.","kivicare-clinic-management-system"),icon:"success"}),s.invalidateQueries({queryKey:["encounter",t]})},onError:ae=>{$t.fire({title:l("Error!","kivicare-clinic-management-system"),text:ae.message||l("Failed to close the encounter.","kivicare-clinic-management-system"),icon:"error"})}})})},M=()=>{(L.billing??"1")==="1"?b():R()},O=()=>{const H=n.pathname;if(H.includes("/body-chart"))return"body-chart";if(H.includes("/clinical-details"))return"clinical-details";for(const ae of m)if(H.includes(`/custom-form-${ae.id}`))return`custom-form-${ae.id}`;return"clinical-details"},q=H=>{H==="clinical-details"?e("clinical-details"):H==="body-chart"?e("body-chart"):H.startsWith("custom-form-")?e(`${H}`):e("clinical-details")};f.useEffect(()=>{n.pathname===`/encounter/dashboard/${t}`&&e("clinical-details",{replace:!0})},[n.pathname,t,e]);const U=()=>{r.mutate(t,{onSuccess:H=>{const ae=new Blob([H],{type:"application/pdf"}),V=URL.createObjectURL(ae);window.open(V,"_blank"),setTimeout(()=>URL.revokeObjectURL(V),6e4)},onError:H=>{$t.fire({title:l("Error","kivicare-clinic-management-system"),text:H?.response?.data?.message||H?.message||l("Failed to generate encounter PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:" position-sticky top-0",children:[i.jsx("h6",{className:"mb-2",children:l("Encounter Details","kivicare-clinic-management-system")}),c&&i.jsx(Jee,{}),d&&!c&&i.jsx(ll,{className:"border-danger",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("i",{className:"ph ph-warning-circle text-danger",style:{fontSize:"2rem"}})}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"text-danger mb-1",children:l("Failed to Load Encounter","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-2 font-size-14",children:d?.message||l("Unable to load encounter details. Please try again.","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>window.location.reload(),children:l("Retry","kivicare-clinic-management-system")})]})]})}),!c&&!d&&!o&&i.jsx(ll,{className:"text-center py-5",children:i.jsxs("div",{className:"d-flex flex-column align-items-center gap-3",children:[i.jsx("i",{className:"ph ph-file-x text-muted",style:{fontSize:"3rem"}}),i.jsxs("div",{children:[i.jsx("h6",{className:"mb-1",children:l("No Encounter Found","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0 font-size-14",children:l("The requested encounter could not be found.","kivicare-clinic-management-system")})]})]})}),!c&&!d&&o&&i.jsx(i.Fragment,{children:i.jsxs(ll,{children:[i.jsx("h6",{className:"font-size-14 mb-3",children:l("About Patient","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-md-3 gap-2 flex-nowrap",children:[i.jsx($c,{src:j.profileImage,alt:j.name||l("Patient","kivicare-clinic-management-system"),text:!j.profileImage&&j.name?j.name.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:j.name}),i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope-simple"}),i.jsx("a",{href:`mailto:${j.email}`,className:"text-muted line-anywhere lh-1",children:j.email})]}),j.phone&&i.jsx("div",{className:"mt-1",children:i.jsx("span",{className:"font-size-14 text-muted",children:j.phone})})]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Encounter Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:o.encounterDate||l("Not specified","kivicare-clinic-management-system")})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Address","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.address||"-"})]})}),j.age&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Age","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"font-size-14 fw-normal mb-0",children:[j.age," ",l("years","kivicare-clinic-management-system")]})]})}),j.gender&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Gender","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.gender})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx("h6",{className:"mb-0",children:l("About Clinic","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex gap-3 flex-wrap",children:[i.jsx($c,{src:T.profileImage,alt:T.name||l("Clinic","kivicare-clinic-management-system"),text:!T.profileImage&&T.name?T.name.charAt(0).toUpperCase():"C",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:T.name}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("span",{className:"heading-color",children:i.jsx("i",{className:"ph ph-stethoscope"})}),i.jsx("span",{className:"font-size-14",children:T.doctorName})]}),T.address&&i.jsx("div",{className:"mt-1",children:i.jsxs("span",{className:"font-size-14 text-muted",children:[i.jsx("i",{className:"ph ph-map-pin me-1"}),T.address]})})]})]}),T.description&&i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"font-size-14 mb-2",children:l("Description","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 font-size-14 text-muted",children:T.description})]}),_.isClosed&&i.jsx("div",{className:"mt-3 pt-3 border-top",children:i.jsxs("h6",{className:"text-danger mb-0",children:[i.jsx("span",{className:"fw-bold",children:l("Note:","kivicare-clinic-management-system")})," ",i.jsx("i",{children:l("This encounter is closed","kivicare-clinic-management-system")})]})})]})]})}),p&&i.jsx(ete,{canEditEncounter:u,templateId:o.templateId,encounterId:o.id}),((A&&Object.keys(A)?.length)>0||o?.appointmentReport?.length>0)&&i.jsx(i.Fragment,{children:i.jsxs(ll,{className:"mt-4",children:[i.jsx("h5",{className:"fw-semibold mb-3",children:l("Patient extra details","kivicare-clinic-management-system")}),o?.appointmentReport?.length>0&&i.jsxs("div",{className:"kc-uploaded-files border-top pt-3 mt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:l("Medical Report","kivicare-clinic-management-system")}),o?.appointmentReport?.map((H,ae)=>i.jsxs("div",{className:"kc-uploaded-file d-flex justify-content-between align-items-center",children:[i.jsx("span",{className:"kc-file-name",children:H.filename}),i.jsx("div",{className:"kc-file-actions",children:i.jsx("a",{className:"me-2",href:H.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})})]},ae))]}),i.jsx(LJ,{fields:E,data:A,title:l("Other Information","kivicare-clinic-management-system")})]})})]})}),i.jsx("div",{className:"col-xl-9 col-lg-8",children:i.jsxs(Ic.Container,{activeKey:O(),onSelect:q,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap my-3",children:[i.jsxs(Rn,{variant:"pills",className:"nav-pill-card",children:[i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:"clinical-details",children:l("Clinical Details","kivicare-clinic-management-system")})}),N("bodyChart")&&i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:"body-chart",children:l("Body Chart","kivicare-clinic-management-system")})}),m.map(H=>i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:`custom-form/${H.id}`,children:H.name?.text||H.name})},H.id))]}),i.jsxs("div",{className:"d-flex gap-2",children:[P&&i.jsxs(i.Fragment,{children:[i.jsx(Zt,{variant:"primary",onClick:U,children:l("Print Encounter","kivicare-clinic-management-system")}),_.isClosed&&k?.id&&i.jsx(ht,{className:"btn btn-primary",to:`/encounter/billings/view/${k?.id}`,children:l("Bill Details","kivicare-clinic-management-system")})]}),_.canClose&&i.jsx(i.Fragment,{children:!a&&i.jsx(Zt,{variant:"secondary",onClick:M,children:l("Close Encounter","kivicare-clinic-management-system")})})]})]}),i.jsx(xs,{})]})})]}),i.jsx(Iw,{show:h,onHide:w,editFormData:v,setEditFormData:x,showAddServiceItemForm:g,setShowAddServiceItemForm:y,discountValue:v?.discountValue||0,totalPayable:v?.totalPayable||0,editBillId:k?.id,appointmentId:o?.appointmentId,handleCloseEditModal:w,onBillSaved:()=>{s.invalidateQueries(["encounter",t]),s.invalidateQueries(["billByEncounterId",t])}})]})},nte=()=>i.jsx(ZJ,{children:i.jsx(tte,{})}),ite=()=>{const{isAddonActive:t,hasCapability:e}=mt(),n=t("kiviPro"),s=On(),[a,r]=f.useState(""),[o,c]=f.useState(1),[d,m]=f.useState(10),[u,p]=f.useState([]),h=Za(a,500),g=n?iP({page:o,perPage:d,search:h,sort:u}):{data:{data:{list:[]}},isLoading:!1},v=g?.data?.data?.list??[],x=g?.isLoading??!1,y=g?.data?.data?.total_rows??0,b=g?.data?.data?.total_pages??1,{mutateAsync:w}=UJ(),k=WJ(),_=KJ(),j=()=>n?!0:($t.fire({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Encounter template management is only available in KiviCarePro.","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:l("OK","kivicare-clinic-management-system")}),!1),T=async(A=null)=>{if(!j())return;const L=!!A,{value:C,isConfirmed:P}=await $t.fire({title:L?l("Edit Template","kivicare-clinic-management-system"):l("Add New Template","kivicare-clinic-management-system"),input:"text",inputLabel:l("Enter Template Name","kivicare-clinic-management-system"),inputPlaceholder:l("e.g. 'Dummy Encounter'","kivicare-clinic-management-system"),inputValue:A?.name||"",showCancelButton:!0,confirmButtonText:l("Save","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),reverseButtons:!0,customClass:{validationMessage:"text-danger fw-medium"},preConfirm:R=>R.trim()?R.trim():($t.showValidationMessage(l("Template name is required","kivicare-clinic-management-system")),!1)});if(P&&C)try{await w({id:A?.id,data:{name:C},isEdit:L}),Ee.success(L?l("Template updated successfully.","kivicare-clinic-management-system"):l("Template created successfully.","kivicare-clinic-management-system"))}catch(R){const M=R?.response?.data?.message||R?.response?.data?.errors?.name?.[0]||l("Something went wrong. Please try again.","kivicare-clinic-management-system");Ee.error(M)}},N=f.useMemo(()=>[s.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:A=>A.getValue()}),s.accessor("name",{header:()=>l("Template Name","kivicare-clinic-management-system"),headerClassName:"w-75",cell:A=>A.getValue()}),...e("encounters_template_edit")||e("encounters_template_view")||e("encounters_template_delete")?[s.display({id:"action",header:()=>l("Action","kivicare-clinic-management-system"),cell:A=>{const L=C=>P=>i.jsx(it,{id:`tooltip-${A.cell.row.original.id}-${C}`,...P,children:C});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("encounters_template_edit")&&i.jsx(Ue,{placement:"top",overlay:L(l("Edit Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-success fs-5",onClick:C=>{C.preventDefault(),T(A.row.original)},children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),e("encounters_template_view")&&i.jsx(Ue,{placement:"top",overlay:L(l("Template Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter-template/dashboard/${A.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),e("encounters_template_delete")&&i.jsx(Ue,{placement:"top",overlay:L(l("Delete Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-danger fs-5",onClick:C=>{C.preventDefault(),dt({title:l("Delete Template?","kivicare-clinic-management-system"),text:l("You're about to delete this template.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep template","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(P=>{P.isConfirmed&&(ft({title:l("Deleting Template...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected template.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(A.cell.row.original.id,{onSuccess:R=>{tt({title:l("Template Deleted","kivicare-clinic-management-system"),text:R?.message||l("Template has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to templates","kivicare-clinic-management-system")})},onError:R=>{Me({text:R?.response?.data?.message||R?.message||l("Failed to delete encounter. Please select another template to delete.","kivicare-clinic-management-system")})}}))})},children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[n]),E=f.useMemo(()=>n?[{label:l("Delete","kivicare-clinic-management-system"),icon:i.jsx("i",{className:"ph ph-trash"}),action:async(A,L)=>{const C=A.map(P=>P.id);dt({title:l("Delete Templates?","kivicare-clinic-management-system"),text:l("You're about to delete the selected templates.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep templates","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(P=>{P.isConfirmed&&(ft({title:l("Deleting Templates...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected templates.<br>This won't take long.","kivicare-clinic-management-system")}),_.mutate(C,{onSuccess:R=>{L(),tt({title:l("Templates Deleted","kivicare-clinic-management-system"),text:R?.message||l("Selected templates have been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to templates","kivicare-clinic-management-system")})},onError:R=>{Me({text:R?.response?.data?.message||R?.message||l("Failed to delete selected templates. Please try again.","kivicare-clinic-management-system")})}}))})}}]:[],[n,_]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:l("All Encounter Template List","kivicare-clinic-management-system")})}),e("encounters_template_add")&&i.jsx("div",{className:"d-flex align-items-center flex-wrap gap-3",children:i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>T(),disabled:!n,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Template","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search templates","kivicare-clinic-management-system"),value:a,onChange:A=>n&&r(A.target.value),disabled:!n})]})})}),i.jsx(bn,{data:v,columns:N,currentPage:o,perPage:d,totalItems:y,lastPage:b,isLoading:x,enableSelection:n,onPageChange:c,onPerPageChange:A=>{m(A),c(1)},onSortingChange:p,bulkActions:E,moduleNamePlural:"encounter templates"}),!n&&i.jsx(ci,{text:l("Encounter template management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},ste=()=>{const{id:t}=Yt();return i.jsx(Ay,{patientId:t})},ate=({bill:t})=>{const{getPriceFormat:e}=mt(),[n,s]=f.useState(!0),a=On(),r=f.useMemo(()=>[a.accessor("sr",{id:"sr",header:()=>l("Sr. No","kivicare-clinic-management-system"),cell:c=>c.row.index+1,enableSorting:!1}),a.accessor("service_name",{id:"service_name",header:()=>l("Services","kivicare-clinic-management-system"),cell:c=>c.getValue(),enableSorting:!1}),a.accessor("discount",{id:"discount",header:()=>l("Discount","kivicare-clinic-management-system"),cell:c=>{const d=c.getValue();if((d==null||d===0)&&t.discount){const m=t.discount/(t.serviceItems?.length||1);return`${e(m)}`}return d!=null?`${e(d)}`:"0"},enableSorting:!1}),a.accessor("price",{id:"price",header:()=>l("Price","kivicare-clinic-management-system"),cell:c=>e(c.getValue()),enableSorting:!1}),a.accessor("total",{id:"total",header:()=>l("Total Amount","kivicare-clinic-management-system"),cell:c=>{const d=c.row.original,m=d.discount||(t.discount?t.discount/(t.serviceItems?.length||1):0),u=d.price*d.quantity-m;return e(u)},enableSorting:!1})],[]),o=f.useMemo(()=>{const c={};return(t.taxItems||[]).forEach(d=>{if(d.tax_name)if(c[d.tax_name])c[d.tax_name].count+=1,c[d.tax_name].totalAmount+=Number(d.tax_amount);else{let m=1;parseInt(d.tax_value)/parseInt(d.tax_amount)>1&&d.type==="fixed"&&(m=Math.ceil(parseInt(d.tax_value)/parseInt(d.tax_amount))),c[d.tax_name]={...d,count:m,totalAmount:Number(d.tax_amount)}}}),Object.values(c)},[t.taxItems]);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Invoice ID","kivicare-clinic-management-system"),": "]}),i.jsxs("span",{className:"fw-semibold text-primary",children:["#",t.invoiceId]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Date & Time","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:"fw-semibold heading-color",children:t.date||"-"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Payment Status","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:`text-${t?.status==="paid"?"success":"danger"} fw-semibold`,children:t?.status?.toUpperCase()})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Patient","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(on,{profileUrl:t.patient?.patient_image_url,name:t.patient?.name,gender:t.patient?.gender,dob:t.patient?.dob,size:"sm"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Doctor","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(on,{profileUrl:t.doctor?.doctor_image_url,name:t.doctor?.name,email:t.doctor?.email,phone:t.doctor?.phone,size:"sm"})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Clinic","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(on,{profileUrl:t.clinic?.clinic_image_url,name:t.clinic?.name,email:t.clinic?.email,phone:t.clinic?.phone,address:t.clinic?.address,size:"sm"})})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx("h6",{children:l("Service","kivicare-clinic-management-system")}),i.jsx(bn,{data:t.serviceItems||[],columns:r,isLoading:!1,error:null,enableSelection:!1})]}),i.jsxs("div",{children:[i.jsx("h6",{children:l("Payment Details","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.subTotal)??"0.00"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.discount||0)})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>s(c=>!c),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${n?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsx("span",{className:"text-danger h6 m-0 ms-1",children:e(t.totalTax)??"0.00"})]})]}),n&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),o.length===0&&i.jsx("div",{className:"text-muted",children:l("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:o.map((c,d)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[c.tax_name,c.count>1?` x${c.count}`:"",c.rate?` (${c.rate}%)`:""]}),i.jsx("h6",{className:"font-size-14 m-0 text-danger",children:e(c.totalAmount)})]},d))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-5",children:[i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")}),i.jsx("h5",{className:"m-0 text-primary",children:e(t.actual_amount)??"0.00"})]})]})})]})]})})},lP=()=>i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"160px",height:"2rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100px",height:"32px"}),i.jsx(st,{width:"80px",height:"32px"})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"90px",height:"0.875rem"}),i.jsx(S,{width:"120px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"110px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx(S,{width:"60px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"100px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"160px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]})]})]})})]}),i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"70px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx(S,{width:"70px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(S,{width:"30px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx(S,{width:"15px",height:"15px",className:"me-1"}),i.jsx(S,{width:"70px",height:"1.125rem"})]})]}),i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx(S,{width:"90px",height:"1.125rem"}),i.jsx(S,{width:"80px",height:"1.25rem"})]})]})})]})]})})]}),oP=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{id:n}=Yt(),{data:s,isLoading:a}=Mw(n,{enabled:e}),r=s?.data||{},o=YV(),c=QV(),d=()=>{o.mutate(n,{onSuccess:u=>{const p=new Blob([u],{type:"application/pdf"}),h=URL.createObjectURL(p);window.open(h,"_blank")},onError:u=>{$t.fire({title:l("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||l("Failed to generate bill PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})},m=()=>{c.mutate(n,{onSuccess:()=>{$t.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Bill PDF sent to patient email successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:u=>{$t.fire({title:l("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||l("Failed to send bill email.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};return a?i.jsx(lP,{}):i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h3",{className:"mb-0",children:l("Billing Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary btn-sm",onClick:d,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-printer me-1"}),l("Print Bill","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:m,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-envelope me-1"}),l("Email","kivicare-clinic-management-system")]})]})]}),!a&&i.jsx(ate,{bill:r}),!e&&i.jsx(ci,{text:l("Billing module is KiviCare Pro feature.","kivicare-clinic-management-system")})]})},rte=()=>{const{id:t}=Yt(),{data:e,isLoading:n}=LA(t),s=e?.data||{};return i.jsx("div",{className:"billing-details",children:!n&&i.jsx(oP,{bill:s})})},Io={getBodyCharts:(t={})=>ve({endpoint:"body-chart",method:"GET",data:t}),getBodyChartConfig:()=>ve({endpoint:"body-chart/config",method:"GET"}),saveBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"POST",data:t}),updateBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"PUT",data:t}),saveBodyChart:t=>ve({endpoint:"body-chart",method:"POST",data:t}),getBodyChart:(t,e)=>ve({endpoint:"body-chart/get",method:"GET",data:{body_chart_id:t,encounter_id:e}}),getBodyChartEdit:(t={})=>ve({endpoint:"body-chart/edit",method:"GET",data:t}),deleteBodyChart:(t,e)=>ve({endpoint:"body-chart/delete",method:"POST",data:{body_chart_id:t,encounter_id:e}}),emailBodyChart:(t,e)=>ve({endpoint:"body-chart/email",method:"POST",data:{body_chart_id:t,...e}}),bulkDeleteBodyCharts:t=>ve({endpoint:"body-chart/bulk-delete",method:"POST",data:{ids:t}})},ki={all:["bodyCharts"],lists:()=>[...ki.all,"list"],list:t=>[...ki.lists(),{filters:t}],details:()=>[...ki.all,"detail"],detail:t=>[...ki.details(),t],config:()=>[...ki.all,"config"],edit:()=>[...ki.all,"edit"],editData:t=>[...ki.edit(),t]},lte=(t={},e={})=>{const{sort:n,sorting:s,...a}=t;return gt({queryKey:ki.list(a),queryFn:()=>Io.getBodyCharts(t),enabled:!!t.encounter_id,...e})},ote=(t={})=>gt({queryKey:ki.config(),queryFn:()=>Io.getBodyChartConfig(),staleTime:300*1e3,...t}),xpe=({chartId:t,encounterId:e},n={})=>gt({queryKey:ki.detail(t),queryFn:()=>Io.getBodyChart(t,e),enabled:!!t&&!!e,...n}),cte=(t={})=>{const e=Ke();return He({mutationFn:n=>Io.saveBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:ki.config()}),e.setQueryData(ki.config(),n)},...t})},dte=(t={})=>{const e=Ke();return He({mutationFn:n=>Io.updateBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:ki.config()}),e.setQueryData(ki.config(),n)},...t})},ype=(t={})=>{const e=Ke();return He({mutationFn:n=>Io.saveBodyChart(n),onSuccess:(n,s)=>{s.encounter_id&&e.invalidateQueries({queryKey:ki.lists(),predicate:a=>a.queryKey[2]?.filters?.encounter_id===s.encounter_id})},...t})},mte=(t={})=>{const e=Ke();return He({mutationFn:n=>Io.deleteBodyChart(n.body_chart_id,n.encounter_id),...t,onSuccess:(n,s,a)=>{e.invalidateQueries({queryKey:ki.lists()}),e.removeQueries({queryKey:ki.detail(s.body_chart_id)}),t.onSuccess&&t.onSuccess(n,s,a)}})},ute=()=>{const{id:t}=Yt(),{encounterData:e}=nf(),n=Xi(),s=mn(),[a,r]=f.useState(1),[o,c]=f.useState(10),[d,m]=f.useState([]),[u,p]=f.useState(!1),h=f.useRef(null),{data:g,isLoading:v,error:x}=lte({encounter_id:t,page:a,perPage:o}),y=f.useMemo(()=>{if(!g?.data?.data)return[];let M=[...g.data.data];if(d.length>0){const O=d[0];M.sort((q,U)=>{const H=q[O.id],ae=U[O.id];if(H==null&&ae==null)return 0;if(H==null)return O.desc?1:-1;if(ae==null)return O.desc?-1:1;if(typeof H=="string"&&typeof ae=="string"){const V=H.localeCompare(ae);return O.desc?-V:V}return typeof H=="number"&&typeof ae=="number"?O.desc?ae-H:H-ae:H<ae?O.desc?1:-1:H>ae?O.desc?-1:1:0})}return M},[g?.data?.data,d]),b=mte({onSuccess:()=>{$t.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Body chart deleted successfully","kivicare-clinic-management-system"),icon:"success",timer:2e3})},onError:M=>{$t.fire({title:l("Error","kivicare-clinic-management-system"),text:M.message||l("Failed to delete body chart","kivicare-clinic-management-system"),icon:"error"})}}),w=M=>{r(M)},k=M=>{c(M),r(1)},_=M=>{m(M)},j=On(),T=f.useMemo(()=>[j.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:M=>M.getValue(),enableSorting:!0,size:80}),j.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:M=>M.getValue()||"-",enableSorting:!0,size:200}),j.accessor("chart_image",{header:()=>l("Image","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>{const O=M.getValue();return O?i.jsx("div",{className:"d-flex align-items-center",children:i.jsx("img",{src:O,alt:M.row.original.name||"Body Chart",className:"rounded",style:{width:"60px",height:"60px",objectFit:"cover",cursor:"pointer"},onClick:()=>L(O)})}):i.jsx("span",{className:"text-muted",children:"-"})},size:100}),j.accessor("description",{header:()=>l("Description","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>{const O=M.getValue();return O&&O.trim()!==""?i.jsx("span",{title:O,children:O.length>50?`${O.substring(0,50)}...`:O}):"-"},size:250}),j.accessor("last_update_user",{header:()=>l("Last Updated By","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>M.getValue()||"-",size:150}),j.accessor("updatedAt",{header:()=>l("Updated At","kivicare-clinic-management-system"),cell:M=>M.getValue(),size:120,enableSorting:!1}),j.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),cell:M=>i.jsxs("div",{className:"d-flex gap-2",children:[Number(e?.status)===1&&!n&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(Zt,{variant:"link",onClick:()=>P(M.row.original.id),children:i.jsx("i",{className:"ph ph-pencil-simple text-primary"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("View","kivicare-clinic-management-system")}),children:i.jsx(Zt,{variant:"link",onClick:()=>L(M.row.original.chart_image),children:i.jsx("i",{className:"ph ph-eye text-info"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Download","kivicare-clinic-management-system")}),children:i.jsx(Zt,{variant:"link",onClick:()=>C(M.row.original.chart_image,M.row.original.name),children:i.jsx("i",{className:"ph ph-download text-success"})})}),Number(e?.status)===1&&!n&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx(Zt,{variant:"link",onClick:()=>R(M.row.original.id),children:i.jsx("i",{className:"ph ph-trash text-danger"})})})]}),size:120,enableSorting:!1})],[e,n]),N=Number(e?.status)===1&&!n?[{label:l("Delete","kivicare-clinic-management-system"),action:M=>{$t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l(`Delete ${M.length} selected body chart?`,"kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:l("Yes, delete them!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(O=>{O.isConfirmed&&M.forEach(q=>{b.mutate({body_chart_id:q.id,encounter_id:t})})})}}]:[],E=()=>{s(`/encounter/dashboard/${t}/body-chart/create`)},A=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"text-center  py-4 text-muted border-start border-end",children:i.jsxs("div",{className:"py-4",children:[i.jsx("i",{className:"ph ph-chart-bar-horizontal fs-1 text-muted mb-3 d-block"}),i.jsx("h6",{children:l("No body charts found","kivicare-clinic-management-system")}),!n&&i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-muted mb-3",children:Number(e?.status)===1?l("Start by creating your first body chart for this encounter","kivicare-clinic-management-system"):l("No body charts available for this closed encounter","kivicare-clinic-management-system")})})]})})}),L=M=>{window.open(M,"_blank")},C=(M,O)=>{const q=document.createElement("a");q.href=M,q.download=O||"body-chart",q.click()},P=M=>{s(`/encounter/dashboard/${t}/body-chart/edit/${M}`)},R=M=>{$t.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This action cannot be undone!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(O=>{O.isConfirmed&&b.mutate({body_chart_id:M,encounter_id:t})})};return i.jsx("div",{className:"body-chart-list-page",children:i.jsx(Ct,{children:i.jsx(Ct.Body,{children:i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!u,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:h,children:i.jsxs("div",{ref:h,className:"position-absolute top-0 w-100 d-flex justify-content-between align-items-center mb-4",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-1",children:l("Body Charts","kivicare-clinic-management-system")})}),!n&&Number(e?.status)===1&&i.jsx("div",{className:"d-flex gap-2",children:i.jsxs(Zt,{variant:"secondary",onClick:E,children:[i.jsx("i",{className:"ph ph-plus-circle me-2"}),l("Add New","kivicare-clinic-management-system")]})})]})}),i.jsx(bn,{data:y,columns:T,isLoading:v,error:x,currentPage:a,perPage:o,totalItems:g?.data?.total||0,lastPage:Math.ceil((g?.data?.total||0)/o),onPageChange:w,onPerPageChange:k,onSortingChange:_,enableSelection:Number(e?.status)===1&&!n,bulkActions:N,bulkActionsButtonText:l("Bulk Actions","kivicare-clinic-management-system"),moduleNamePlural:"body charts",renderEmptyState:A,bordered:!0,responsive:!0,manualPagination:!0,manualFiltering:!0,manualSorting:!1,onBulkActionsVisibilityChange:p})]})})})})},hte=()=>{const{id:t,formId:e}=Yt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:r}=mt(),o=s||"patient",[c,d]=f.useState(!1),m=Ke(),u=f.useRef({}),{data:p,isLoading:h}=Nk(t),g=p?.data||{},{data:v}=od({module_type:"patient_encounter_module",status:1,module_id:t},{enabled:r("kiviPro")}),y=(v?.data?.forms||[]).find(k=>k.id.toString()===e),b=MJ({onSuccess:()=>{$t.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Form data saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}),m.invalidateQueries(["custom-forms"])},onError:k=>{console.error("Error saving form data:",k),$t.fire({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save form data. Please try again.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}});f.useEffect(()=>{d(Number(g?.status)===1&&(Er(o)||Vn(o)||Jn(o)||Fi(o)&&g?.doctorId===a))},[g]);const w=async(k,_)=>{console.log("Saving form data:",{formId:k,formData:_,encounterId:t}),b.mutate({form_id:k,module_id:t,module_type:"patient_encounter_module",form_data:_})};return y?i.jsx("div",{className:"mt-4",children:i.jsx(Ct,{children:i.jsxs(Va,{children:[i.jsx("div",{id:`custom-form-${y.id}`,children:i.jsx(Ga,{ref:k=>u.current[y.id]=k,fields:y.fields,data:y.form_data||{},readOnly:!c,formId:`form_${y.id}`})}),c&&i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsx(Zt,{variant:"primary",onClick:()=>{const k=u.current[y.id];if(k){const _=k.getFormData();w(y.id,_)}},disabled:b.isPending,children:b.isPending?l("Saving...","kivicare-clinic-management-system"):l("Save Form","kivicare-clinic-management-system")})})]})})}):i.jsx("div",{className:"mt-4",children:i.jsx(Ct,{children:i.jsx(Va,{children:i.jsx("div",{className:"text-center",children:i.jsx("p",{children:l("Form not found","kivicare-clinic-management-system")})})})})})},vC=f.lazy(()=>Fr(()=>import("./BodyChartEditor-CMSxDQ0z.js"),__vite__mapDeps([0,2]),import.meta.url)),pte=[Yn({path:"/encounter",title:l("Encounter List","kivicare-clinic-management-system"),outlet:uC,permissions:["patient_encounter_list"],meta:{description:l("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[Ye({path:"",component:Ay,title:l("All Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_list"],meta:{description:l("List of all encounters","kivicare-clinic-management-system"),breadcrumb:l("All Encounters","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:fC,props:{isEditing:!1,mode:"add"},title:l("Add Encounter","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_add"],skeleton:pC,meta:{description:l("Add new encounter","kivicare-clinic-management-system"),breadcrumb:l("Add Encounter","kivicare-clinic-management-system")}}),Ye({path:"edit/:id",component:fC,props:{isEditing:!0,mode:"edit"},title:l("Edit Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_edit"],skeleton:pC,meta:{description:l("Edit encounter","kivicare-clinic-management-system"),breadcrumb:l("Edit Encounter","kivicare-clinic-management-system")}}),Ye({path:"view/:id",component:Ay,title:l("All Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("View encounter","kivicare-clinic-management-system"),breadcrumb:l("View Encounter","kivicare-clinic-management-system")}}),Yn({path:"dashboard/:id",title:l("Encounters","kivicare-clinic-management-system"),outlet:nte,permissions:["patient_encounter_view"],skeleton:ph,meta:{description:l("Encounter dashbord","kivicare-clinic-management-system"),breadcrumb:l("Encounter dashbord","kivicare-clinic-management-system")},children:[Ye({path:"clinical-details",component:sP,title:l("Clinical Details","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"clinical-details"}),meta:{description:l("Clinical details of encounter","kivicare-clinic-management-system"),breadcrumb:l("Clinical Details","kivicare-clinic-management-system")}}),Ye({path:"custom-form/:formId",component:hte,title:l("Custom Form","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"custom-form"}),meta:{description:l("Custom form of encounter","kivicare-clinic-management-system"),breadcrumb:l("Custom Form","kivicare-clinic-management-system")}}),Yn({path:"body-chart",title:l("Body Charts","kivicare-clinic-management-system"),outlet:jee,meta:{description:l("Body chart management for encounter","kivicare-clinic-management-system"),breadcrumb:l("Body Charts","kivicare-clinic-management-system")},children:[Ye({path:"",component:ute,title:l("Body Chart List","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"body-chart"}),index:!0,meta:{description:l("List of body charts for encounter","kivicare-clinic-management-system"),breadcrumb:l("List","kivicare-clinic-management-system")}}),Ye({path:"create",component:vC,props:{mode:"create"},title:l("Create Body Chart","kivicare-clinic-management-system"),meta:{description:l("Create new body chart","kivicare-clinic-management-system"),breadcrumb:l("Create","kivicare-clinic-management-system")},skeleton:Nee}),Ye({path:"edit/:chartId",component:vC,props:{mode:"edit"},title:l("Edit Body Chart","kivicare-clinic-management-system"),meta:{description:l("Edit existing body chart","kivicare-clinic-management-system"),breadcrumb:l("Edit","kivicare-clinic-management-system")}})]})]}),Ye({path:"patient/:id",component:ste,title:l("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:l("Patient Encounters","kivicare-clinic-management-system")}}),Ye({path:"billings/view/:id",component:rte,title:l("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:l("Patient Encounters","kivicare-clinic-management-system")}})]}),Yn({path:"/encounter-template",title:l("Encounter Template List","kivicare-clinic-management-system"),roles:["administrator","clinic_admin","doctor","receptionist"],outlet:uC,meta:{description:l("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[Ye({path:"",component:ite,title:l("All Encounter Templates","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of all encounter templates","kivicare-clinic-management-system"),breadcrumb:l("All Encounter Templates","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:4,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"dashboard/:id",title:l("Encounters Dashboard","kivicare-clinic-management-system"),component:kee,meta:{description:l("Encounter template dashboard","kivicare-clinic-management-system"),breadcrumb:l("Encounter template dashboard","kivicare-clinic-management-system"),isEncounterTemplate:!0}})]})],gte=()=>{const t=Gn();return i.jsxs("div",{className:"clinics-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/clinic"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Dy=()=>i.jsxs(i.Fragment,{children:[i.jsx(Nl,{titleWidth:"120px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"85px"})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx(S,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"}),i.jsx(S,{width:"55px",height:"1rem"})]})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),fte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""}),n=Z=>{if(Z.length>0){const{id:K,desc:B}=Z[0],F={id:"id",name:"name",admin:"clinic_admin_name",contact:"telephone_no",status:"status"};e(J=>({...J,orderby:F[K]||K,order:B?"desc":"asc",page:1}))}else e(K=>({...K,orderby:"",order:"",page:1}))},[s,a]=f.useState(""),[r,o]=f.useState([]),[c,d]=f.useState([]),m=Za(s,500),u=Eee(),p=Tee(),h=Aee(),g=Dee(),v=Ree(),[x,y]=f.useState(!1),b=async Z=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const K=new Date().toISOString().split("T")[0],B=J=>{if(!J)return"";try{const Q=typeof J=="string"?JSON.parse(J):J;return Array.isArray(Q)?Q.map(me=>me.label||"").filter(Boolean).join(", "):J}catch{return J}},F=V.map(J=>({id:J.id,name:J.name,email:J.email,contact:J.contact,clinic_admin_name:J.clinic_admin_name,clinic_admin_email:J.clinic_admin_email,specialty:B(J.specialty),address:[J.address,J.city,J.state,J.postal_code,J.country].filter(Boolean).join(", "),status:J.status===1?"Active":"Inactive"}));switch(Z){case"csv":gs(F,`clinics-${K}.csv`);break;case"xls":fs(F,`clinics-${K}.xls`);break;case"pdf":vs(F,`clinics-${K}.pdf`,"Clinics List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(K){console.error("Export error:",K),Me({title:l("Error!","kivicare-clinic-management-system"),text:K.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},w=()=>b("csv"),k=()=>b("xls"),_=()=>{x||(y(!0),b("pdf"),setTimeout(()=>y(!1),2e3))};f.useEffect(()=>{e(Z=>({...Z,search:m,page:1}))},[m]),We.useEffect(()=>{e(Z=>({...Z,search:m,page:1}))},[m]);const[j,T]=f.useState(!1),N=f.useRef(null),[E,A]=f.useState(!1),[L,C]=f.useState(!1),{isAddonActive:P,hasCapability:R}=mt(),M=P("kiviPro"),O=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([Z,K])=>K!==""&&K!==null&&K!==void 0)),[t]),{data:q,isLoading:U,error:H,refetch:ae}=aP(O);We.useEffect(()=>{q?.data?.clinics&&q.data.clinics.length>0&&q.data.clinics.forEach((Z,K)=>{if(Z.specialty&&typeof Z.specialty=="string"&&Z.specialty.startsWith("["))try{const B=JSON.parse(Z.specialty)}catch{console.log(`Failed to parse specialty for clinic ${K+1}`)}})},[q]);const V=q?.data?.clinics||[],pe=q?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},oe=Ke(),ne=async({page:Z,per_page:K,search:B})=>{try{const F={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:Z,per_page:K,search:B},J=await oe.fetchQuery({queryKey:ut.list(F),queryFn:()=>Et.getStaticData(F),staleTime:300*1e3}),Q=J.data.map(me=>({value:me.id,label:me.label||me.name}));return o(me=>[...me,...Q]),J.data.map(me=>{let te="",Y="";return typeof me=="string"?(te=me,Y=me):typeof me=="object"&&me!==null&&(te=me.label||me.name||"",Y=me.id??me.name??te),{value:Y,label:te}})}catch(F){return console.error("Error loading clinics:",F),{data:[],pagination:{has_more:!1}}}},se=async({page:Z,per_page:K,search:B})=>{try{const F={dataType:"clinicList",page:Z,per_page:K,search:B},J=await oe.fetchQuery({queryKey:ut.list(F),queryFn:()=>Et.getStaticData(F),staleTime:300*1e3}),Q=J.data.map(me=>({value:me.id,label:me.label||me.name}));return d(me=>[...me,...Q]),J}catch(F){return console.error("Error loading clinics:",F),{data:[],pagination:{has_more:!1}}}},W=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],ge=On(),ee=f.useMemo(()=>[ge.accessor("id",{id:"id",enableSorting:!0,header:()=>l("ID","kivicare-clinic-management-system"),cell:Z=>i.jsx("div",{className:"font-weight-medium",children:Z.getValue()})}),ge.accessor("name",{id:"name",enableSorting:!0,header:()=>l("Clinic","kivicare-clinic-management-system"),cell:Z=>i.jsx(on,{profileUrl:Z.row.original.clinic_image_url,name:Z.row.original.name,email:Z.row.original.email||"",variant:"success",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")})}),ge.accessor("admin",{id:"admin",header:()=>l("Clinic Admin","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(Z,K)=>{const B=Z.original.clinic_admin_name||"",F=K.original.clinic_admin_name||"";return B.localeCompare(F)},cell:Z=>i.jsx(on,{profileUrl:Z.row.original.clinic_admin_image_url,name:Z.row.original.clinic_admin_name,email:Z.row.original.clinic_admin_email||"",variant:"success",size:"md",nameLabel:l("Clinic Name","kivicare-clinic-management-system")})}),ge.accessor("contact",{id:"contact",enableSorting:!0,header:()=>l("Contact No","kivicare-clinic-management-system"),cell:Z=>i.jsx("div",{children:i.jsx("span",{children:Z.row.original.contact||""})})}),ge.accessor("specialty",{id:"specialty",enableSorting:!1,header:()=>l("Specialization","kivicare-clinic-management-system"),cell:Z=>{const K=Z.row.original.specialty;let B=[];try{if(typeof K=="string")if(K.startsWith("["))try{const F=JSON.parse(K);Array.isArray(F)&&(B=F.map(J=>typeof J=="object"&&J!==null?{label:J.label||""}:{label:J}))}catch{B=[{label:K}]}else B=[{label:K}];else Array.isArray(K)?B=K.map(F=>typeof F=="object"&&F!==null?{label:F.label||F.name||""}:{label:F}):typeof K=="object"&&K!==null&&(K.label?B=[{label:K.label}]:K.name?B=[{label:K.name}]:B=[{label:JSON.stringify(K)}])}catch(F){console.error("Error processing specialty:",F),B=[{label:String(K||"")}]}return B=B.filter(F=>F.label),i.jsx("div",{children:B.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[B.slice(0,2).map((F,J)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:F.label},J)),B.length>2&&i.jsx(Ue,{placement:"top",overlay:F=>i.jsx(it,{id:`tooltip-specialization-${Z.row.original.id}`,...F,children:B.slice(2).map(J=>J.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",B.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),ge.accessor("address",{id:"address",enableSorting:!1,header:()=>l("Clinic Address","kivicare-clinic-management-system"),cell:Z=>{const K=Z.row.original.address||"",B=Z.row.original.city||"",F=Z.row.original.state||"",J=Z.row.original.country||"",Q=Z.row.original.postal_code||"",me=[K,B,F,Q,J].filter(Boolean).join(", ");return i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"",children:me||""})})}}),...M?[ge.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:Z=>{const K=Number(Z.getValue()),B=Z.row.original,F=()=>{const J=K===1?0:1;dt({title:l("Update Status?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),B.name,J===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(Q=>{Q.isConfirmed&&(ft({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),v.mutate({ids:[B.id],status:J},{onSuccess:()=>{tt({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Clinic status has been updated successfully.","kivicare-clinic-management-system")})},onError:me=>{Me({title:l("Error","kivicare-clinic-management-system"),text:me.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return R("clinic_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`clinic-status-${B.id}`,checked:K===1,onChange:F})}):i.jsx("span",{className:`badge ${K===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:K===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}})]:[],...R("clinic_edit")||R("clinic_resend_credential")||R("clinic_delete")?[ge.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Z=>{const K=B=>F=>i.jsx(it,{id:`tooltip-${Z.cell.row.original.id}-${B}`,...F,children:B});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[R("clinic_edit")&&i.jsx(Ue,{placement:"top",overlay:K(l("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/clinic/edit/${Z.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),R("clinic_resend_credential")&&i.jsx(Ue,{placement:"top",overlay:K(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>ie(Z.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),R("clinic_delete")&&M&&i.jsx(Ue,{placement:"top",overlay:K(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ue(Z.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[R]),ie=Z=>{dt({title:l("Resend Credential","kivicare-clinic-management-system"),text:l("Are you sure you want to resend the credential for this clinic?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(K=>{K.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),p.mutate(Z,{onSuccess:B=>{tt({text:B?.message||l("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:B=>{console.error("Resend credential error:",B);const F=B?.response?.data?.message||B?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({text:F})}}))})},ue=Z=>{dt({title:l("Delete Clinic?","kivicare-clinic-management-system"),text:l("You're about to delete this clinic.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep clinic","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(K=>{K.isConfirmed&&(ft({title:l("Deleting Clinic...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected clinic.<br>This won't take long.","kivicare-clinic-management-system")}),u.mutate(Z,{onSuccess:B=>{tt({title:l("Clinic Deleted","kivicare-clinic-management-system"),text:B?.message||l("Clinic has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to clinics","kivicare-clinic-management-system")})},onError:B=>{console.error("Delete clinic error:",B);const F=B?.response?.data?.message||B?.message||l("Failed to delete clinic. Please try again.","kivicare-clinic-management-system");Me({text:F})}}))})},G=[{type:"number",name:"id",label:l("Clinic ID","kivicare-clinic-management-system"),placeholder:l("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Z=>{Z.target.value=Z.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l("Select Clinic","kivicare-clinic-management-system"),options:c,optionLoader:se,isSearchable:!0,key:"clinic-filter"},{type:"paginatedSelect",name:"specialization",label:l("Specialization","kivicare-clinic-management-system"),placeholder:l("Select Specialization","kivicare-clinic-management-system"),options:r,optionLoader:ne,isSearchable:!0},{type:"text",name:"clinicAddress",label:l("Clinic Address","kivicare-clinic-management-system"),placeholder:l("eg 123 Wellness Way , HC 3456")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select Status","kivicare-clinic-management-system"),options:W,isSearchable:!1}],le=Z=>{e(K=>({...K,...Z,page:1})),A(!1)},re=()=>{const Z={page:1,perPage:t.perPage,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""};e(Z),o([]),d([]),A(!1)},D=f.useMemo(()=>["search","id","clinicName","specialization","clinicAddress","status"].some(K=>{const B=t[K];return B!=null&&B!==""})||s!=="",[t,s]),I=Z=>{M?A(Z):Z===!0&&dt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},ce=()=>{ae()};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Clinics","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[R("clinic_add")&&i.jsxs(ht,{to:M?"/clinic/add":"#",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:Z=>{M||dt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Clinic","kivicare-clinic-management-system")})]}),M&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>M?C(!0):dt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic import is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1}),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>I(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:M?"kc-table-wrapper":"",children:[M&&i.jsx(i.Fragment,{children:i.jsx(Ci,{in:!j,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:N,children:i.jsxs("div",{ref:N,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(Xt,{id:"clinic-filter",placeholder:l("Clinics","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:se,value:c.find(Z=>Z.label===t.clinicName)||null,onChange:Z=>{M&&e(K=>({...K,clinicName:Z?Z.label:""}))},isDisabled:!M,dependencies:{},isClearable:!0}),i.jsx(Xt,{id:"specialties-filter",placeholder:l("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ne,value:r.find(Z=>Z.label===t.specialization)||null,onChange:Z=>{M&&e(K=>({...K,specialization:Z?Z.label:""}))},isDisabled:!M,dependencies:{},isClearable:!0}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:W,onChange:Z=>M&&e(K=>({...K,status:Z?Z.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Z=>({...Z,zIndex:9999})},isDisabled:!M})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:s,onChange:Z=>a(Z.target.value),disabled:!M})]})}),R("clinic_export")&&M&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:w,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:k,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:_,disabled:x,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})})}),i.jsx(bn,{data:V,columns:ee,isLoading:U,error:H,currentPage:pe.currentPage,perPage:pe.perPage,totalItems:pe.total,lastPage:pe.lastPage,onPageChange:Z=>M&&e(K=>({...K,page:Z})),onPerPageChange:Z=>M&&e(K=>({...K,perPage:Z,page:1})),onSortingChange:n,manualSorting:!0,enableSelection:M,moduleNamePlural:"clinics",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(Z,K)=>{const B=Z.map(F=>F.id);dt({title:l("Delete Clinics?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${Z.length} clinics</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep clinics","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(F=>{F.isConfirmed&&(ft({title:l("Deleting Clinics...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected clinics.<br>This won't take long.","kivicare-clinic-management-system")}),h.mutate(B,{onSuccess:J=>{tt({title:l("Clinic Deleted","kivicare-clinic-management-system"),text:l(`${Z.length} clinic${Z.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to clinics","kivicare-clinic-management-system")}),K()},onError:J=>{console.error("Bulk delete clinics error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");Me({text:Q})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(Z,K)=>{const B=Z.map(F=>F.id);dt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected clinics?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),g.mutate(B,{onSuccess:J=>{tt({title:l("Success","kivicare-clinic-management-system"),text:J?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),K()},onError:J=>{console.error("Bulk resend credentials error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(Z,K)=>{const B=Z.map(F=>F.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected clinics to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(F=>{F.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),v.mutate({ids:B,status:"1"},{onSuccess:J=>{tt({title:l("Success","kivicare-clinic-management-system"),text:J?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),K()},onError:J=>{console.error("Bulk update status error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(Z,K)=>{const B=Z.map(F=>F.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected clinics to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(F=>{F.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),v.mutate({ids:B,status:"0"},{onSuccess:J=>{tt({title:l("Success","kivicare-clinic-management-system"),text:J?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),K()},onError:J=>{console.error("Bulk update status error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Z=>{T(Z)}})]})]}),i.jsx(na,{show:E,onHide:()=>I(!1),queryParams:t,onApplyFilters:M?le:()=>{},onResetFilters:M?re:()=>{},title:l("Filters","kivicare-clinic-management-system"),fields:G,hasAppliedFilters:D}),i.jsx(qr,{show:L,onHide:()=>C(!1),onReopenImport:()=>C(!0),onDataRefresh:ce,context:"clinics"})]})})},wl=f.forwardRef(({id:t="profile-image-upload",name:e="doctorImage",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:r,className:o="",disabled:c=!1,size:d=120,setValue:m,register:u,accept:p,allowFile:h=!1},g)=>{const[v,x]=f.useState(n),[y,b]=f.useState(s),[w,k]=f.useState(!1),[_,j]=f.useState(!1),T=f.useRef(null),N=f.useRef(null),E=!!v;f.useEffect(()=>{x(n||""),b(s||"")},[n,s]),f.useEffect(()=>{j(typeof window<"u"&&!!(window.wp&&window.wp.media))},[]),f.useEffect(()=>{if(u&&typeof u=="function"&&N.current)try{u(e)}catch{}},[u,e]);const A=async q=>{try{k(!0);const U=window.kc_frontend?.rest_url,H=await ve({endpoint:`${U}/wp/v2/media`,method:"POST",data:q,isFile:!0});if(!H||H.success===!1)throw new Error(H?.message||l("Failed to upload image","kivicare-clinic-management-system"));return O(H.source_url,H.id),a&&a({id:H.id,url:H.source_url,filename:H.title?.raw||"",type:H.media_type,subtype:H.mime_type,size:H.media_details?.filesize||0},H.id),H}catch(U){throw console.error("Error uploading image:",U),U}finally{k(!1)}},L=q=>{if(!_)return;const U=window.wp.media({title:l("Select or Upload Image","kivicare-clinic-management-system"),button:{text:l("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:h?"":"image"}});U.on("select",function(){const H=U.state().get("selection").first().toJSON();!h&&H.type!=="image"||O(H.url||H.source_url||"",H.id||"")}),U.open()},C=q=>{q.preventDefault(),!(c||w)&&(_&&!h?L():T.current?.click())},P=async q=>{const U=q.target.files[0];if(U){if(!h&&!U.type.startsWith("image/")){console.error("Please select an image file");return}try{const H=URL.createObjectURL(U);x(H),b(""),await A(U)}catch(H){console.error("Error handling file:",H),x(""),b(""),O("","")}}},R=()=>{if(x(""),b(""),T.current&&(T.current.value=""),O("",""),r&&r(),a)try{a({id:"",url:"",filename:"",type:"image",size:0},"")}catch{}},M=q=>{q.preventDefault(),q.stopPropagation(),!(c||w)&&R()};f.useImperativeHandle(g,()=>({clearImage:R}));const O=(q="",U="")=>{if(x(q||""),b(U||""),N.current)try{N.current.value=U||"";try{N.current.dispatchEvent(new Event("input",{bubbles:!0})),N.current.dispatchEvent(new Event("change",{bubbles:!0}))}catch{}}catch{}if(typeof m=="function"&&e)try{m(e,q||""),m(`${e}Id`,U||"")}catch{}if(typeof a=="function")try{a({id:U||"",url:q||"",filename:"",type:"image",size:0},U||"")}catch{}};return i.jsxs("div",{className:`profile-image-uploader bg-body rounded w-100 p-3 ${o}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,name:e?`${e}Id`:void 0,ref:N,readOnly:!0,value:y||""}),i.jsx("input",{type:"file",id:t,ref:T,onChange:P,accept:p||(h?void 0:"image/*"),disabled:w||c,className:"profile-image-input"}),i.jsxs("div",{className:`profile-image-container ${c?"disabled":""}`,style:{width:d,height:d,"--profile-size":`${d}px`},onClick:C,children:[E?i.jsx("img",{src:v,alt:"",className:"profile-image"}):i.jsx("div",{className:"profile-image-placeholder",children:i.jsx("i",{className:"ph ph-user",style:{fontSize:`${Math.round(d*.6)}px`,color:"#ccc"}})}),i.jsx("div",{className:"profile-image-overlay",children:w?i.jsx("div",{className:"profile-image-spinner",style:{width:d*.18,height:d*.18,borderWidth:Math.max(2,Math.round(d*.03))}}):i.jsx("i",{className:"ph ph-camera",style:{fontSize:`${Math.round(d*.3)}px`,color:"white"}})}),E&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"profile-image-cancel-icon",onClick:M,disabled:w||c,"aria-label":l("Remove image","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x",style:{fontSize:"14px",color:"white"}})})})]})]})});wl.displayName="ProfileImageUploader";function Ry({isEditing:t=!1,isProfile:e=!1,...n}){const{id:s}=Yt(),{currentuserID:a,defaultClinicId:r,isAddonActive:o,defaultCountryCode:c,showOtherGender:d,userRole:m}=mt(),{data:u}=Cn(),p=mn(),h=o("kiviPro"),g=e?r:s,{data:v,isLoading:x,error:y}=Cee(g,{enabled:(t||e)&&!!g}),b=v?.data,w=See(),k=_ee(),[_,j]=f.useState(!1),T=_||w.isPending||k.isPending||x,N=Yc.PhoneNumberUtil.getInstance(),E=ie=>{try{return N.isValidNumber(N.parseAndKeepRawInput(ie))}catch{return!1}},A=[{value:1,label:l("Active","kivicare-clinic-management-system")},{value:0,label:l("Inactive","kivicare-clinic-management-system")}],{register:L,handleSubmit:C,control:P,watch:R,setValue:M,formState:{errors:O},reset:q}=Jt({defaultValues:{clinicImage:"",clinicImageId:"",clinicName:"",clinicEmail:"",contactNumber:"",status:A[0],specialties:null,address:"",country:"",city:"",postalCode:"",adminImage:"",adminImageId:"",firstName:"",lastName:"",adminEmail:"",adminContactNumber:"",dob:"",gender:""}}),U=f.useMemo(()=>u?.data?.kc_available_translations,[u]),{data:H,isLoading:ae,refetch:V}=Ua("specialization"),pe=Lg(),oe=ie=>{if(ie==null)return null;const ue=parseInt(ie);return A.find(G=>G.value===ue)||null};if(f.useEffect(()=>{if(t&&b&&!x){M("clinicName",b.clinic_name||""),M("clinicEmail",b.clinic_email||""),setTimeout(()=>{M("contactNumber",b.clinic_contact||"")},0),M("address",b.address||""),M("city",b.city||""),M("country",b.country||""),M("postalCode",b.postal_code||"");const ie=oe(b.status);M("status",ie),M("specialties",b.specialties),b.clinic_image&&M("clinicImage",b.clinic_image),b.clinic_image_id&&M("clinicImageId",b.clinic_image_id),M("firstName",b.first_name||""),M("lastName",b.last_name||""),M("adminEmail",b.admin_email||""),setTimeout(()=>{M("adminContactNumber",b.admin_contact_number||"")},0),M("dob",b.dob||""),M("gender",b.gender||""),b.clinic_admin_image_url&&M("adminImage",b.clinic_admin_image_url),b.clinic_admin_image_id&&M("adminImageId",b.clinic_admin_image_id)}},[t,b,x,M]),t&&y)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:l("Error Loading Clinic Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:l("Unable to load clinic information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>p("/clinic"),children:l("Back to Clinics","kivicare-clinic-management-system")})]});const ne=(ie,ue)=>{M(ie,ue.url||ue.image),M(`${ie}Id`,ue.id||ue.imageId)},se=async ie=>{j(!0);const ue={clinic_name:ie.clinicName,clinic_email:ie.clinicEmail,clinic_contact:ie.contactNumber,status:ie.status?parseInt(ie.status.value):1,specialties:ie.specialties,address:ie.address,country:ie.country,city:ie.city,postal_code:ie.postalCode,clinic_image:ie.clinicImage,clinic_image_id:ie.clinicImageId,admin_image:ie.adminImage,admin_image_id:ie.adminImageId,first_name:ie.firstName,last_name:ie.lastName,admin_email:ie.adminEmail,admin_contact_number:ie.adminContactNumber,dob:ie.dob,gender:ie.gender};try{if(t){let G=await k.mutateAsync({id:g,...ue});Ee.success(G.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}else{let G=await w.mutateAsync(ue);Ee.success(G.data.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}e&&p(-1),t&&m=="clinic_admin"&&p(-1),p("/clinic",{replace:!0})}catch(G){console.error("Error saving clinic:",G);const le=G?.response?.data?.message||(t?l("Failed to update clinic","kivicare-clinic-management-system"):l("Failed to create clinic","kivicare-clinic-management-system"));Ee.error(le,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{j(!1)}},W=ie=>{const ue=Object.keys(ie)[0],G=document.getElementById(ue);G&&(G.scrollIntoView({behavior:"smooth",block:"center"}),G.focus())},ee={...{clinicName:{required:l("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}},clinicEmail:{required:l("Clinic email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:ue=>ue?E(ue)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},specialties:{required:l("At least one specialty is required","kivicare-clinic-management-system"),validate:{notEmpty:ue=>ue&&ue.length>0||l("At least one specialty is required","kivicare-clinic-management-system")}},address:{required:l("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},country:{required:l("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}},city:{required:l("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,11}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}},firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},adminEmail:{required:l("Admin email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},adminContactNumber:{required:l("Admin contact number is required","kivicare-clinic-management-system"),validate:ue=>ue?E(ue)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Admin contact number is required","kivicare-clinic-management-system")},dob:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:ue=>{const G=new Date(ue);return new Date().getFullYear()-G.getFullYear()>=18||l("Admin must be at least 18 years old","kivicare-clinic-management-system")}},gender:{required:l("Gender is required","kivicare-clinic-management-system")}};return x&&(t||e)?i.jsx(Dy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Clinic","kivicare-clinic-management-system"):l("Add Clinic","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:C(se,W),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(be,{name:"clinicImage",control:P,render:({field:ie})=>i.jsx(wl,{id:"clinic-image-upload",name:"clinicImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:ie.value,defaultImageId:R("clinicImageId"),onChange:ue=>ne("clinicImage",ue),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicName",className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"clinicName",className:`form-control ${O.clinicName?"is-invalid":""}`,placeholder:l('eg "Health care Clinic"',"kivicare-clinic-management-system"),...L("clinicName",ee.clinicName),disabled:t&&x}),O.clinicName&&i.jsx("div",{className:"invalid-feedback d-block",children:O.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicEmail",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"clinicEmail",className:`form-control ${O.clinicEmail?"is-invalid":""}`,placeholder:l('eg "clinic@example.com"',"kivicare-clinic-management-system"),...L("clinicEmail",ee.clinicEmail),disabled:t&&x}),O.clinicEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:O.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"contactNumber",control:P,rules:ee.contactNumber,render:({field:ie})=>i.jsx(so,{defaultCountry:c,inputProps:{className:`form-control ${O.contactNumber?"is-invalid":""}`,placeholder:l("Enter phone number","kivicare-clinic-management-system"),disabled:t&&x},...ie})}),O.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:O.contactNumber.message})]})}),!e&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:P,rules:ee.status,render:({field:ie})=>i.jsx(lt,{id:"status",options:A,value:ie.value,onChange:ie.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:ue=>({...ue,zIndex:9999})},isDisabled:t&&x||!h})}),O.status&&i.jsx("div",{className:"invalid-feedback d-block",children:O.status.message})]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"specialties",className:"form-label",children:[l("Specialties","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"specialties",control:P,rules:ee.specialties,render:({field:ie})=>i.jsx(du,{id:"specialties",options:H?.data??[],value:ie.value,onChange:ue=>{ie.onChange(ue)},onCreateOption:ue=>{pe.mutate(ue,{onSuccess:G=>{if(G?.data?.data){const le=(ie.value||[]).map(re=>re.id===tempOption.id?{id:G.data.data.id,label:G.data.data.label}:re);ie.onChange(le)}Ee.success(l("Specialty added successfully","kivicare-clinic-management-system"))},onError:G=>{console.error("Failed to save specialty:",G),console.error("Error details:",G.response?.data),Ee.error(l("Failed to save specialty to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:ue=>ue.id,placeholder:l("Select or create specialties","kivicare-clinic-management-system"),className:`react-select-box ${O.specialties?"is-invalid":""}`,classNamePrefix:"react-select",isLoading:ae,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,isDisabled:t&&x,noOptionsMessage:()=>l("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:ue=>l("Add specialty","kivicare-clinic-management-system")+`: "${ue}"`})}),O.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:O.specialties.message})]}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type a new specialty and press enter to add it","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"address",className:"form-label",children:[l("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"address",className:`form-control ${O.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...L("address",ee.address),disabled:t&&x}),O.address&&i.jsx("div",{className:"invalid-feedback d-block",children:O.address.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"country",className:"form-label",children:[l("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"country",className:`form-control ${O.country?"is-invalid":""}`,placeholder:l('eg "USA"',"kivicare-clinic-management-system"),...L("country",ee.country),disabled:t&&x}),O.country&&i.jsx("div",{className:"invalid-feedback d-block",children:O.country.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"city",className:"form-label",children:[l("City","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"city",className:`form-control ${O.city?"is-invalid":""}`,placeholder:l('eg "New York"',"kivicare-clinic-management-system"),...L("city",ee.city),disabled:t&&x}),O.city&&i.jsx("div",{className:"invalid-feedback d-block",children:O.city.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"postalCode",className:"form-label",children:[l("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${O.postalCode?"is-invalid":""}`,placeholder:l('eg "123456"',"kivicare-clinic-management-system"),...L("postalCode",ee.postalCode),disabled:t&&x}),O.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:O.postalCode.message})]})}),e&&i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"language",className:"form-label",children:[l("Choose Language","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"language",control:P,rules:ee.language,render:({field:ie})=>i.jsx(lt,{id:"language",options:U.map(ue=>({value:ue.lang,label:ue.label})),value:ie.value,onChange:ie.onChange,placeholder:l("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:ue=>({...ue,zIndex:9999})},isDisabled:t&&x})}),O.language&&i.jsx("div",{className:"invalid-feedback d-block",children:O.language.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx("h6",{className:"mb-3",children:t?l("Update Admin Details","kivicare-clinic-management-system"):l("Create Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(be,{name:"adminImage",control:P,render:({field:ie})=>i.jsx(wl,{id:"admin-image-upload",name:"adminImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:ie.value,defaultImageId:R("adminImageId"),onChange:ue=>ne("adminImage",ue),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${O.firstName?"is-invalid":""}`,placeholder:l('eg "Mark"',"kivicare-clinic-management-system"),...L("firstName",ee.firstName),disabled:t&&x}),O.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:O.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${O.lastName?"is-invalid":""}`,placeholder:l('eg "Avenue"',"kivicare-clinic-management-system"),...L("lastName",ee.lastName),disabled:t&&x}),O.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:O.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminEmail",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"adminEmail",className:`form-control ${O.adminEmail?"is-invalid":""}`,placeholder:l('eg "admin@example.com"',"kivicare-clinic-management-system"),...L("adminEmail",ee.adminEmail),disabled:t&&x}),O.adminEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:O.adminEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminContactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"adminContactNumber",control:P,rules:ee.adminContactNumber,render:({field:ie})=>i.jsx(so,{defaultCountry:c,value:ie.value,onChange:ie.onChange,inputProps:{className:`form-control ${O.adminContactNumber?"is-invalid":""}`,placeholder:l("Enter phone number","kivicare-clinic-management-system"),disabled:t&&x}})}),O.adminContactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:O.adminContactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[l("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"dob",control:P,rules:ee.dob,render:({field:ie})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Wn,{id:"dob",className:`form-control ${O.dob?"is-invalid":""}`,value:ie.value?Xn(ie.value):"",onChange:ue=>{if(ue&&ue[0]){const G=ue[0],le=`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}-${String(G.getDate()).padStart(2,"0")}`;ie.onChange(le)}else ie.onChange("")},options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Kn()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&x}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})}),O.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:O.dob.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",...L("gender",ee.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",...L("gender",ee.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),d&&i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",...L("gender",ee.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),O.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:O.gender.message})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(ei,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:T||t&&x}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:T||t&&x,children:T?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Clinic","kivicare-clinic-management-system"):l("Save Clinic","kivicare-clinic-management-system")})]})]})})]})}const vte=Object.freeze(Object.defineProperty({__proto__:null,default:Ry},Symbol.toStringTag,{value:"Module"})),xte=[Yn({path:"/clinic",title:"Clinic",outlet:gte,permissions:["clinic_list"],meta:{description:"Clinic management system",icon:"hospital",showInSidebar:!0},children:[Ye({path:"",component:fte,title:"All Clinics",index:!0,permissions:["clinic_list"],meta:{description:"List of all clinics",breadcrumb:"All Clinics"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:Ry,title:"Add Clinic",props:{isEditing:!1},addons:["kiviPro"],permissions:["clinic_add"],skeleton:Dy,meta:{description:"Create a new clinic",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:Ry,title:"Edit Clinic",props:{isEditing:!0},permissions:["clinic_edit"],skeleton:Dy,meta:{description:"Edit existing clinic",breadcrumb:"Edit"}})]})],yte=()=>i.jsx("div",{className:"patients-container",children:i.jsx(ko,{})}),Py=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["50px","80px","100px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(Nl,{titleWidth:"150px"}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"150px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"80px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"100px",height:"38px"})]})]})]})})})}),cP=()=>i.jsxs(No,{fluid:!0,className:"content-inner pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Co,{items:["80px","100px","120px"]}),i.jsx(S,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsx(Qn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:Array.from({length:4}).map((t,e)=>i.jsx(_t,{children:i.jsx(Ct,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(Ct.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-1 justify-content-between",children:[i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(S,{width:"60px",height:"1.5rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx(S,{width:"2rem",height:"2rem",style:{borderRadius:"50%"}})})]})})})},e))}),i.jsx(Ct,{children:i.jsx(Ct.Body,{children:i.jsx(Qn,{children:i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"custom-tab-slider",children:[i.jsxs(Rn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Rn.Item,{children:i.jsx(S,{width:"60px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Rn.Item,{children:i.jsx(S,{width:"70px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Rn.Item,{children:i.jsx(S,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsx(pt,{children:i.jsx(S,{width:"100%",height:"200px"})})})]})})})})})]}),bte=({label:t,count:e,icon:n})=>i.jsx(_t,{children:i.jsx(Ct,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(Ct.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"text-body line-clamp-1 fw-medium mb-3",children:t}),i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-0 fw-bold",children:e})]}),i.jsx("div",{className:"card-icon",children:i.jsx("i",{className:`${n} fs-1 text-primary`,"aria-hidden":"true"})})]})})})}),wte=()=>{const{patientProfileId:t}=Yt(),e=Gn(),n=mn(),{isAddonActive:s,getPriceFormat:a}=mt(),[r,o]=f.useState([]),c=s("kiviPro"),{data:d,isLoading:m,isError:u,error:p}=Zee(t),h=()=>{const v=e.pathname;return v.includes("/appointments")?"appointments":v.includes("/reports")?"reports":(v.endsWith(`/profile/${t}`)||v.endsWith(`/profile/${t}/`),"profile")},g=v=>{switch(v){case"profile":n("",{relative:"path"});break;case"reports":n("reports",{relative:"path"});break;case"appointments":n("appointments",{relative:"path"});break;default:n("",{relative:"path"})}};return f.useEffect(()=>{if(d?.data){const v=d?.data?.statistics;o([{label:l("Total Appointments","kivicare-clinic-management-system"),count:v.total_appointments||0,icon:"ph-fill ph-calendar-dots"},{label:l("Completed Appointments","kivicare-clinic-management-system"),count:v.completed_appointments||0,icon:"ph-fill ph-calendar-check"},{label:l("Total Encounters","kivicare-clinic-management-system"),count:v.total_encounters||0,icon:"ph-fill ph-stethoscope"},{label:l("Total Billing Amount","kivicare-clinic-management-system"),count:a(v.total_billing_amount)||0,icon:"ph-fill ph-currency-dollar"}])}},[d]),m?i.jsx(cP,{}):u?i.jsx(No,{fluid:!0,className:"content-inner pb-0",children:i.jsx("div",{className:"text-center py-5",children:i.jsx("p",{className:"text-danger",children:p?.message||l("Failed to load patient data","kivicare-clinic-management-system")})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx(ei,{})]}),i.jsx(Qn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:r.map((v,x)=>i.jsx(bte,{...v},x))}),i.jsx(Ct,{children:i.jsx(Ct.Body,{children:i.jsx(Qn,{children:i.jsx(_t,{xs:12,children:i.jsx("div",{className:"custom-tab-slider",children:i.jsxs(Ic.Container,{activeKey:h(),onSelect:g,children:[i.jsxs(Rn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{eventKey:"profile",children:l("Profile","kivicare-clinic-management-system")})}),c&&i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{eventKey:"reports",children:l("Reports","kivicare-clinic-management-system")})}),i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{eventKey:"appointments",children:l("Appointments","kivicare-clinic-management-system")})})]}),i.jsx(xs,{})]})})})})})})]})},kte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:"",date_from:"",date_to:"",registeredOn:"",patient_unique_id:""}),n=B=>{if(B.length>0){const{id:F,desc:J}=B[0],Q={name:"name",registeredOn:"registered_on",mobileNumber:"contact_number",status:"status",id:"id"};e(me=>({...me,orderby:Q[F]||F,order:J?"desc":"asc",page:1}))}else e(F=>({...F,orderby:"",order:"",page:1}))},[s,a]=f.useState([]),r=Jn(),o=Vn(),c=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([B,F])=>F!==""&&F!==null&&F!==void 0)),[t]),[d,m]=f.useState(!1),u=f.useRef(null),{data:p,isLoading:h,error:g,refetch:v}=rP(c),x=Uee(),y=Vee(),b=Wee(),w=Kee(),k=Gee(),[_,j]=f.useState(!1),T=p?.data?.patients||[],N=p?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},E=Ke(),A=async({page:B,per_page:F,search:J})=>{try{const Q={dataType:"clinicList",page:B,per_page:F,search:J},me=await E.fetchQuery({queryKey:ut.list(Q),queryFn:()=>Et.getStaticData(Q),staleTime:300*1e3}),te=me.data.map(Y=>({value:Y.id,label:Y.label||Y.name}));return a(Y=>[...Y,...te]),me}catch(Q){return console.error("Error loading clinics:",Q),{data:[],pagination:{has_more:!1}}}},L=[{value:"0",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"1",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[C,P]=f.useState(""),R=B=>{P(B.target.value)},M=f.useMemo(()=>C.trim()?T.filter(B=>{const F=C.toLowerCase();return B.name?.toLowerCase().includes(F)||B.email?.toLowerCase().includes(F)||B.mobileNumber?.toLowerCase().includes(F)||B.clinicName?.toLowerCase().includes(F)||B.id?.toString().includes(F)||B.patient_unique_id?.toLowerCase().includes(F)}):T,[T,C]),O=Qee(),q=async B=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const F={format:B,search:t.search,clinic:t.clinic,status:t.status},J=await O.mutateAsync(F);if(J?.data?.patients){const Q=new Date().toISOString().split("T")[0],me=J.data.patients.map(te=>({id:te.id,patient_image_url:te.patient_image_url,name:te.name,clinic:te.clinic,email:te.email,mobile:te.mobile,gender:te.gender,dob:te.dob,blood_group:te.blood_group,registered_on:te.registered_on,status:te.status,address:te.address}));switch(B){case"csv":gs(me,`patients-${Q}.csv`);break;case"xls":fs(me,`patients-${Q}.xls`);break;case"pdf":vs(me,`patients-${Q}.pdf`,"Patients List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(F){console.error("Export error:",F),Me({title:l("Error!","kivicare-clinic-management-system"),text:F.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},U=()=>q("csv"),H=()=>q("xls"),[ae,V]=f.useState(!1),pe=()=>{ae||(V(!0),q("pdf"),setTimeout(()=>V(!1),2e3))},[oe,ne]=f.useState(!1),se=B=>{e(F=>({...F,...B,page:1})),ne(!1)},W=f.useMemo(()=>["search","id","patientName","clinic","status","date_from","date_to","patient_unique_id"].some(F=>{const J=t[F];return J!=null&&J!==""}),[t]),ge=()=>{const B={page:1,perPage:t.perPage,search:"",id:"",patientName:"",clinicName:"",registeredOn:"",status:"",orderBy:"",order:"",patient_unique_id:"",date_from:"",date_to:"",clinic:""};e(B),a([]),ne(!1)},{isAddonActive:ee,defaultClinicId:ie,patientUniqueIdSetting:ue,hasCapability:G}=mt(),le=ee("kiviPro"),re=[...ue?.enable?[{type:"text",name:"patient_unique_id",label:l("Patient Unique ID","kivicare-clinic-management-system"),placeholder:l("Enter Patient Unique ID","kivicare-clinic-management-system")}]:[{type:"number",name:"id",label:l("Patient ID","kivicare-clinic-management-system"),placeholder:l("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:B=>{B.target.value=B.target.value.replace(/[^0-9]/g,"")}}],{type:"text",name:"patientName",label:l("Patient Name","kivicare-clinic-management-system"),placeholder:l("eg Sophia Anderson","kivicare-clinic-management-system")},...le&&!r&&!o?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:A,options:s,key:"clinic-filter"}]:[],{type:"dateRange",name:"registeredOn",label:l("Registered ON","kivicare-clinic-management-system"),placeholder:l("eg 15/03/25","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("eg Active","kivicare-clinic-management-system"),options:L,isSearchable:!1}],D=On(),I=f.useMemo(()=>[D.accessor("id",{header:()=>ue?.enable?l("Unique ID","kivicare-clinic-management-system"):l("ID","kivicare-clinic-management-system"),cell:B=>{const F=B.row.original;return ue?.enable?F.patient_unique_id?F.patient_unique_id:"-":`#${B.getValue()}`}}),D.accessor("name",{id:"name",header:()=>l("Patient","kivicare-clinic-management-system"),cell:B=>i.jsx(on,{profileUrl:B.row.original.patient_image_url,name:B.getValue(),email:B.row.original.email,fallbackText:"PT",variant:"primary",size:"md",nameLabel:l("Patient","kivicare-clinic-management-system")})}),...le&&!r&&!o?[D.accessor("clinicNameArray",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:B=>{const F=B.row.original.clinics||[];return i.jsx("div",{children:F.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[F.slice(0,2).map((J,Q)=>i.jsx(Qp,{placement:B.row.index<N.perPage-2?"bottom":"top",trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:J.clinic_name}),children:i.jsx(Tm,{avatar:J.clinic_image_url,name:J.clinic_name,email:J.clinic_email,phone:J.clinic_contact_number,address:J.clinic_address,fallbackIcon:"ph-hospital"})},Q)),F.length>2&&i.jsx(Qp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",F.length-2]}),placement:B.row.index<N.perPage-2?"bottom":"top",children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:l("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:F.slice(2).map((J,Q)=>i.jsx("div",{className:Q!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:J.clinic_image_url,name:J.clinic_name,email:J.clinic_email,phone:J.clinic_contact_number,address:J.clinic_address,fallbackIcon:"ph-hospital"})},Q))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})},enableSorting:!1})]:[],D.accessor("mobileNumber",{header:()=>l("Mobile Number","kivicare-clinic-management-system"),cell:B=>B.getValue()}),D.accessor("registeredOn",{header:()=>l("Registered ON","kivicare-clinic-management-system"),cell:B=>B.getValue()}),D.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:B=>{l("Active","kivicare-clinic-management-system"),l("Inactive","kivicare-clinic-management-system");const F=Number(B.getValue()),J=B.row.original,Q=()=>{const me=F===1?0:1;dt({title:l("Update Status?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),J.name,me===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(te=>{te.isConfirmed&&(ft({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),k.mutate({ids:[J.id],status:me},{onSuccess:()=>{tt({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Patient status has been updated successfully.","kivicare-clinic-management-system")})},onError:Y=>{Me({title:l("Error","kivicare-clinic-management-system"),text:Y.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return G("patient_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`patient-status-${J.id}`,checked:F===0,onChange:Q})}):i.jsx("span",{className:`badge ${F===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:F===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})},enableSorting:!1}),...G("patient_edit")||G("patient_appointment")||G("patient_appointment_report")||G("patient_resend_credential")||G("patient_encounter")||G("patient_profile")||G("patient_delete")?[D.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:B=>{const F=J=>Q=>i.jsx(it,{id:`tooltip-${B.cell.row.original.id}-${J}`,...Q,children:J});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[G("patient_edit")&&i.jsx(Ue,{placement:"top",overlay:F(l("Edit Patient","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/edit/${B.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),G("patient_appointment")&&i.jsx(Ue,{placement:"top",overlay:F(l("Appointments","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${encodeURIComponent(B.row.original.id)}/appointments`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar"})})}),G("patient_appointment_report")&&i.jsx(Ue,{placement:"top",overlay:F(l("Reports","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient-medical-report_id/patient/${B.row.original.id}`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-file"})})}),G("patient_resend_credential")&&i.jsx(Ue,{placement:"top",overlay:F(l("Resend Credential","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>ce(B.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),G("patient_encounter")&&i.jsx(Ue,{placement:"top",overlay:F(l("Patient Encounters","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/patient/${B.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-primary fs-4",children:i.jsx("i",{className:"ph ph-calendar-check"})})})}),G("patient_profile")&&i.jsx(Ue,{placement:"top",overlay:F(l("View Profile","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${B.row.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-user-circle-check"})})}),G("patient_delete")&&i.jsx(Ue,{placement:"top",overlay:F(l("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>Z(B.cell.row.original.id,B.row.original.name),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[ue,G]),ce=B=>{dt({title:l("Resend Credential","kivicare-clinic-management-system"),text:l("Are you sure you want to resend the credential for this patient?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),y.mutate(B,{onSuccess:J=>{tt({text:J?.message||l("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:J=>{console.error("Resend credential error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({text:Q})}}))})},Z=(B,F)=>{dt({title:l("Delete Patient?","kivicare-clinic-management-system"),text:Pi(l("You're about to delete <strong>%s</strong>.<br>This action cannot be undone.","kivicare-clinic-management-system"),F),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep patient","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(J=>{J.isConfirmed&&(ft({title:l("Deleting Patient...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected patient.<br>This won't take long.","kivicare-clinic-management-system")}),x.mutate(B,{onSuccess:Q=>{tt({title:l("Patient Deleted","kivicare-clinic-management-system"),text:Q?.message||l("Patient has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to patients","kivicare-clinic-management-system")})},onError:Q=>{console.error("Delete patient error:",Q);const me=Q?.response?.data?.message||Q?.message||l("Failed to delete patient. Please try again.","kivicare-clinic-management-system");Me({text:me})}}))})},K=()=>{v()};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsx(Si,{})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Patients","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[G("patient_add")&&i.jsxs(ht,{to:"/patient/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Patient","kivicare-clinic-management-system")})]}),le&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>ne(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[le&&!r&&!o&&i.jsx(Xt,{id:"clinic-filter",placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:A,value:s.find(B=>B.value===t.clinic)||null,onChange:B=>{e(F=>({...F,clinic:B?B.value:""}))},dependencies:{},isClearable:!0}),i.jsx("div",{className:"position-relative",children:i.jsxs(Qd,{children:[i.jsx(Wn,{onChange:B=>{if(B.length===2){const[F,J]=B;e(Q=>({...Q,date_from:qa(F),date_to:qa(J),page:1}))}else B.length===0&&e(F=>({...F,date_from:"",date_to:"",page:1}))},value:t.date_from&&t.date_to?[Xn(t.date_from),Xn(t.date_to)]:null,options:{mode:"range",dateFormat:vi(window.kc_frontend.date_format),locale:Kn()},className:"form-control",placeholder:l("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:t.date_from||t.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{e(F=>({...F,date_from:"",date_to:"",page:1}));const B=document.querySelector('.form-control[placeholder="Select date range"]');B&&B._flatpickr&&B._flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:L,onChange:B=>e(F=>({...F,status:B?B.value:""})),value:L.find(B=>B.value===t.status)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:B=>({...B,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:C,onChange:R})]})}),G("patient_export")&&le&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:U,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:H,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:pe,disabled:O.isPending||ae,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:M,columns:I,isLoading:h,error:g,currentPage:N.currentPage,perPage:N.perPage,totalItems:N.total,lastPage:N.lastPage,onPageChange:B=>e(F=>({...F,page:B})),onPerPageChange:B=>e(F=>({...F,perPage:B,page:1})),enableSelection:!0,bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(B,F)=>{const J=B.map(Q=>Q.id);dt({title:l("Delete Patients?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${B.length} patients</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep patients","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{Q.isConfirmed&&(ft({title:l("Deleting Patients...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected patients.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(J,{onSuccess:me=>{tt({title:l("Patient Deleted","kivicare-clinic-management-system"),text:l(`${B.length} patient${B.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to patients","kivicare-clinic-management-system")}),F()},onError:me=>{console.error("Bulk delete patient(s) error:",me);const te=me?.response?.data?.message||me?.message||l("Failed to delete selected patient(s). Please try again.","kivicare-clinic-management-system");Me({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(B,F)=>{const J=B.map(Q=>Q.id);dt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(Q=>{Q.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate(J,{onSuccess:me=>{tt({text:me?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system")}),F()},onError:me=>{console.error("Bulk resend credentials error:",me);const te=me?.response?.data?.message||me?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(B,F)=>{const J=B.map(Q=>Q.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to activate the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(Q=>{Q.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:J,status:"0"},{onSuccess:me=>{tt({text:me?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system")}),F()},onError:me=>{console.error("Bulk update status error:",me);const te=me?.response?.data?.message||me?.message||l("Failed to update patient status. Please try again.","kivicare-clinic-management-system");Me({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(B,F)=>{const J=B.map(Q=>Q.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to inactive the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{Q.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:J,status:"1"},{onSuccess:me=>{tt({text:me?.message||l("Patient status has been updated successfully.","kivicare-clinic-management-system")}),F()},onError:me=>{console.error("Bulk update status error:",me);const te=me?.response?.data?.message||me?.message||l("Failed to update patient(s) status. Please try again.","kivicare-clinic-management-system");Me({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:B=>{m(B)},onSortingChange:n,skeletonColumns:6,skeletonRows:5,moduleNamePlural:"patients"})]}),i.jsx(na,{show:oe,onHide:()=>ne(!1),queryParams:t,onApplyFilters:se,onResetFilters:ge,title:l("Filters","kivicare-clinic-management-system"),fields:re,hasAppliedFilters:W}),le&&i.jsx(qr,{show:_,onHide:()=>j(!1),onReopenImport:()=>j(!0),onDataRefresh:K,context:"patients"})]})};function Xp({isEditing:t=!1,isProfile:e=!1,hideBreadcrumbs:n=!1,...s}){const{patientProfileId:a}=Yt(),r=Ke(),{currentuserID:o,isAddonActive:c,userRole:d,defaultClinicId:m,patientUniqueIdSetting:u,defaultCountryCode:p,showOtherGender:h,sidebarItems:g}=mt(),{data:v}=Cn();f.useMemo(()=>v?.data?.kc_available_translations,[v]);const x=Xi(d)&&e?o:a,[y]=yI(),b=y.get("from")==="appointment",{data:w,isLoading:k,error:_}=qee(x,{enabled:t&&!!x}),j=w?.data,T=async({page:Q,per_page:me,search:te})=>{try{const Y={dataType:"clinicList",page:Q,per_page:me,search:te};return await r.fetchQuery({queryKey:ut.list(Y),queryFn:()=>Et.getStaticData(Y),staleTime:300*1e3})}catch(Y){return console.error("Error loading clinics:",Y),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},N=Hee(),E=zee(),A=mn(),L=!Xi(d)||g&&g.length>0,C=u?.enable,{data:P}=od({module_type:"patient_module",status:1,module_id:x},{enabled:c("kiviPro")}),R=P?.data?.forms||[],M=f.useRef({});f.useEffect(()=>{t&&R.length>0&&R.forEach(Q=>{const me=Q.form_data;me&&M.current[Q.id]&&setTimeout(()=>{const te=M.current[Q.id];te&&te.resetForm&&te.resetForm(me)},100)})},[t,R]);const O=()=>{const Q={};return R.forEach(me=>{const te=M.current[me.id];te&&(Q[me.id]=te.getFormData())}),Q},q=async()=>{const Q={};let me=!0,te=null;for(const Y of R){const Ce=M.current[Y.id];if(Ce){const ye=await Ce.triggerValidation();Q[Y.id]={isValid:ye.isValid,data:Ce.getFormData(),errors:ye.errors},ye.isValid||(me=!1,te||(te=Y.id))}}return{allValid:me,formResults:Q,firstInvalidFormId:te}},{data:U,isLoading:H,refetch:ae}=Yee({enabled:!t&&!e&&C}),[V,pe]=f.useState(!1),oe=V||N.isPending||E.isPending||k,ne=Yc.PhoneNumberUtil.getInstance(),se=Q=>{try{return ne.isValidNumber(ne.parseAndKeepRawInput(Q))}catch{return!1}},W=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],{register:ge,handleSubmit:ee,control:ie,watch:ue,setValue:G,formState:{errors:le},reset:re}=Jt({defaultValues:{patientImage:"",patientImageId:"",patientUniqueId:"",firstName:"",lastName:"",email:"",contactNumber:"",dob:"",clinic:[],status:W[0],bloodGroup:null,gender:"",address:"",city:"",country:"",postalCode:""}}),D=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],I=Q=>Q==null?null:W.find(me=>me.value===Q||me.value===String(Q)||Q===0&&me.value==="active"||Q===1&&me.value==="inactive")||null,ce=Q=>!Q||D.length===0?null:D.find(me=>me.value===Q||me.label===Q)||null;f.useEffect(()=>{!t&&U?.data?.unique_id&&C&&G("patientUniqueId",U.data.unique_id)},[U,t,C,G]),f.useEffect(()=>{if(t&&j&&!k){if(G("firstName",j.first_name||""),G("lastName",j.last_name||""),G("email",j.email||""),G("patientUniqueId",j.patient_unique_id||""),setTimeout(()=>{G("contactNumber",j.contact_number||j.mobile_number||"")},0),G("dob",j.dob||""),G("gender",j.gender||""),d==="kiviCare_receptionist")G("clinic",[{value:m}]);else{const te=Array.isArray(j.clinic)?j.clinic.map(Y=>({value:Y.value??Y.id??Y.ID??"",label:Y.label??Y.name??""})):[];G("clinic",te)}const Q=I(j.status);G("status",Q);const me=ce(j.blood_group);G("bloodGroup",me),G("address",j.address||""),G("city",j.city||""),G("country",j.country||""),G("postalCode",j.postal_code||""),j.patient_image_url&&G("patientImage",j.patient_image_url),j.patient_image_id&&G("patientImageId",j.patient_image_id),j.customFields&&typeof j.customFields=="object"&&Object.entries(j.customFields).forEach(([te,Y])=>{G(`custom_field_${te}`,Y)})}},[t,j,k,G]),f.useEffect(()=>{if(_){const Q=_?.response?.data?.message||l("You do not have permission to view this patient.","kivicare-clinic-management-system");Ee.error(Q,{position:"top-right",autoClose:5e3}),A("/patient",{replace:!0})}},[_,A]);const Z=(Q,me)=>{G(Q,me.url||me.image),G(`${Q}Id`,me.id||me.imageId)},K=c("kiviPro"),B={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"?{required:l("At least one clinic selection is required","kivicare-clinic-management-system"),validate:Q=>!Q||Array.isArray(Q)&&Q.length===0?l("At least one clinic must be selected","kivicare-clinic-management-system"):!0}:{},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:Q=>Q?se(Q)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},dob:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:Q=>{const me=new Date(Q),te=new Date;return me.setHours(0,0,0,0),te.setHours(0,0,0,0),me>te?l("Date of birth cannot be in the future","kivicare-clinic-management-system"):!0}},gender:{required:l("Gender is required","kivicare-clinic-management-system")},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,11}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}},F=async Q=>{if(pe(!0),R.length>0&&!(await q()).allValid){pe(!1);return}let me=Q.clinic;d==="kiviCare_receptionist"||d==="kiviCare_clinic_admin"?me=[{value:m}]:me=Array.isArray(me)?me.map(Ce=>({value:Ce.value||Ce})):[];const te={};Object.keys(Q).forEach(Ce=>{if(Ce.startsWith("custom_field_")){const ye=Ce.replace("custom_field_","");te[ye]=Q[Ce]}});const Y={first_name:Q.firstName,last_name:Q.lastName,email:Q.email,mobile_number:Q.contactNumber,dob:Q.dob,status:Q.status?.value||Q.status,blood_group:Q.bloodGroup?.value||Q.bloodGroup,gender:Q.gender,profile_image:Q.patientImageId,patient_unique_id:Q.patientUniqueId,address:Q.address,city:Q.city,country:Q.country,postal_code:Q.postalCode,clinics:me,customForm:O(),customFields:te};try{let Ce;t?(Ce=await E.mutateAsync({id:x,...Y}),Ee.success(l("Patient updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(Ce=await N.mutateAsync(Y),Ee.success(l("Patient created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||A(b?"/appointments/add":"/patient",{replace:!0,state:{NewPatientId:Ce.data.id}})}catch(Ce){console.error("Error saving patient:",Ce);const ye=Ce?.response?.data?.message||(t?l("Failed to update patient","kivicare-clinic-management-system"):l("Failed to create patient","kivicare-clinic-management-system"));Ee.error(ye,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{pe(!1)}},J=Q=>{console.log("Validation errors:",Q);const me=Object.keys(Q)[0],te=document.getElementById(me);te&&(te.scrollIntoView({behavior:"smooth",block:"center"}),te.focus())};return t&&k?i.jsx(Py,{}):t&&_?null:i.jsxs(i.Fragment,{children:[i.jsx(f.Activity,{mode:n?"hidden":"visible",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),L&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Patient","kivicare-clinic-management-system"):l("Add Patient","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:ee(F,J),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(be,{name:"patientImage",control:ie,render:({field:Q})=>i.jsx(wl,{id:"patient-image-upload",name:"patientImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:Q.value,defaultImageId:ue("patientImageId"),onChange:me=>Z("patientImage",me),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[C&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"patientUniqueId",className:"form-label",children:l("Patient Unique ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"patientUniqueId",className:`form-control ${le.patientUniqueId?"is-invalid":""}`,placeholder:l("Enter Patient Unique ID","kivicare-clinic-management-system"),...ge("patientUniqueId"),disabled:t&&k}),le.patientUniqueId&&i.jsx("div",{className:"invalid-feedback d-block",children:le.patientUniqueId.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${le.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...ge("firstName",B.firstName),disabled:t&&k}),le.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:le.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${le.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...ge("lastName",B.lastName),disabled:t&&k}),le.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:le.lastName.message})]})}),K&&d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinics","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:ie,rules:B.clinic,render:({field:Q})=>i.jsx(i.Fragment,{children:i.jsx(Xt,{id:"clinic",loadOptions:T,value:Q.value,onChange:me=>{Q.onChange(me)},isMulti:!0,closeMenuOnSelect:!1,placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${le.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t&&k,dependencies:{},getOptionValue:me=>me?.value??me?.id,getOptionLabel:me=>me?.label??me?.name??me?.clinic_name})})}),le.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:le.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${le.email?"is-invalid":""}`,placeholder:l('eg "markavenue@gmail.com"',"kivicare-clinic-management-system"),...ge("email",B.email),disabled:t&&k}),le.email&&i.jsx("div",{className:"invalid-feedback d-block",children:le.email.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"contactNumber",control:ie,rules:B.contactNumber,render:({field:Q})=>i.jsx(so,{defaultCountry:p,value:Q.value,onChange:Q.onChange,inputProps:{className:`form-control ${le.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),disabled:t&&k}})}),le.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:le.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[l("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"dob",control:ie,rules:B.dob,render:({field:Q})=>i.jsx(Wn,{id:"dob",className:`form-control ${le.dob?"is-invalid":""}`,value:Q.value?Xn(Q.value):"",onChange:me=>{if(me&&me[0]){const te=me[0],Y=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}-${String(te.getDate()).padStart(2,"0")}`;Q.onChange(Y)}else Q.onChange("")},options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Kn()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&k})}),le.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:le.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:ie,rules:B.status,render:({field:Q})=>i.jsx(lt,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:W,value:Q.value,onChange:Q.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:me=>({...me,zIndex:9999})}})}),le.status&&i.jsx("div",{className:"invalid-feedback d-block",children:le.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"bloodGroup",className:"form-label",children:l("Blood Group","kivicare-clinic-management-system")}),i.jsx(be,{name:"bloodGroup",control:ie,rules:B.bloodGroup,render:({field:Q})=>i.jsx(lt,{id:"bloodGroup",className:"react-select-box",classNamePrefix:"react-select",options:D,value:Q.value,onChange:Q.onChange,placeholder:l("Select Blood Group","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:me=>({...me,zIndex:9999})},isDisabled:t&&k})}),le.bloodGroup&&i.jsx("div",{className:"invalid-feedback d-block",children:le.bloodGroup.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${le.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...ge("gender",B.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${le.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...ge("gender",B.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),h&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${le.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...ge("gender",B.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),le.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:le.gender.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Other Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${le.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...ge("address",B.address),disabled:t&&k}),le.address&&i.jsx("div",{className:"invalid-feedback d-block",children:le.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${le.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...ge("city",B.city),disabled:t&&k}),le.city&&i.jsx("div",{className:"invalid-feedback d-block",children:le.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${le.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...ge("country",B.country),disabled:t&&k}),le.country&&i.jsx("div",{className:"invalid-feedback d-block",children:le.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${le.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...ge("postalCode",B.postalCode),disabled:t&&k}),le.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:le.postalCode.message})]})})]})]})]})}),i.jsx(tf,{moduleType:"patient_module",control:ie,errors:le,setValue:G,watch:ue}),K&&R.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Information","kivicare-clinic-management-system")}),R.map(Q=>i.jsx(Ct,{className:"mb-4",children:i.jsxs(Va,{children:[i.jsx("h6",{className:"mb-3",children:Q.name?.text||Q.name}),i.jsx("div",{id:`custom-form-${Q.id}`,children:i.jsx(Ga,{ref:me=>M.current[Q.id]=me,fields:Q.fields,data:Q.form_data||{},readOnly:!1,formId:`form_${Q.id}`})})]})},Q.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[L&&i.jsx(ei,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:oe||t&&k}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:oe||t&&k,children:oe?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Patient","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})})]})}const jte=Object.freeze(Object.defineProperty({__proto__:null,default:Xp},Symbol.toStringTag,{value:"Module"})),Nte=()=>i.jsx(Xp,{isEditing:!0,isProfile:!0,hideBreadcrumbs:!0}),Cte=()=>{const{patientProfileId:t}=Yt();return i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0})},Ste=()=>{const{patientProfileId:t}=Yt();return i.jsx(Sy,{hideBreadcrumbs:!0,patientId:t})},_te=()=>{const{patientProfileId:t}=Yt();return i.jsx(Zp,{isEditing:!1,hideBreadcrumbs:!0,patientId:t})},Ete=()=>{const{patientProfileId:t}=Yt();return i.jsx(Zp,{isEditing:!0,hideBreadcrumbs:!0,patientId:t})},Tte=()=>{const{patientProfileId:t}=Yt();return i.jsx(JR,{readOnly:!0,hideBreadcrumbs:!0,patientId:t})},Ate=[Yn({path:"/patient",title:"Patients",outlet:yte,permissions:["patient_list"],meta:{description:"Patient management system",icon:"users"},children:[Ye({path:"",component:kte,title:"All Patients",index:!0,permissions:["patient_list"],meta:{description:"List of all patients",breadcrumb:"All Patients"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:Xp,title:"Add Patient",props:{isEditing:!1},permissions:["patient_add"],meta:{description:"Create a new patient",breadcrumb:"Add New"},skeleton:Py}),Ye({path:"edit/:patientProfileId",component:Xp,title:"Edit Patient",props:{isEditing:!0},permissions:["patient_edit"],meta:{description:"Edit existing patient",breadcrumb:"Edit"},skeleton:Py}),Yn({path:"profile/:patientProfileId",outlet:wte,title:"Patient Profile",permissions:["patient_view","patient_profile"],meta:{description:"View patient profile and details",breadcrumb:"Profile"},children:[Ye({path:"",component:Nte,title:"Patient Profile",index:!0,permissions:["patient_view","patient_profile"],meta:{description:"Patient profile overview",breadcrumb:"Profile"},skeleton:cP}),Ye({path:"reports",component:Cte,title:"Patient Reports",permissions:["patient_view"],addons:["kiviPro"],meta:{description:"Patient medical reports",breadcrumb:"Reports"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:3,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),Ye({path:"appointments",component:Ste,title:"Patient Appointments",permissions:["appointment_list"],meta:{description:"Patient appointments list",breadcrumb:"Appointments"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),Ye({path:"appointments/add",component:_te,title:"Add Appointment",permissions:["appointment_add"],meta:{description:"Create a new appointment for patient",breadcrumb:"Add Appointment"}}),Ye({path:"appointments/edit/:id",component:Ete,title:"Edit Appointment",permissions:["appointment_edit"],meta:{description:"Edit patient appointment",breadcrumb:"Edit Appointment"}}),Ye({path:"appointments/view/:id",component:Tte,title:"View Appointment",permissions:["appointment_view"],meta:{description:"View patient appointment details",breadcrumb:"View Appointment"}})]})]})],Dte=()=>{const t=Gn();return i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/patient-medical-report_id"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(ko,{})]})},xC=({patientId:t=!1})=>{const e=Yt(),n=Xi(),{currentuserID:s}=mt();return n?t=s:!t&&e&&e.patientId&&(t=e.patientId),i.jsx(i.Fragment,{children:i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0,showViewReport:!0})})},Rte=[Yn({path:"/patient-medical-report_id",title:"Patient Medical Reports",outlet:Dte,permissions:["patient_report"],meta:{description:"Patient medical reports",icon:"ph ph-file",showInSidebar:!0},children:[Ye({path:"",component:xC,title:"All Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports",breadcrumb:"All Patient Reports"}}),Ye({path:"patient/:patientId",component:xC,title:"Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports for patient",breadcrumb:"Patient Reports"}})]})],Pte=()=>{const t=Gn();return i.jsxs("div",{className:"doctors-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/doctor"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},My=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(Nl,{titleWidth:"120px"}),i.jsx("div",{className:"d-flex gap-4",children:i.jsxs("div",{className:"kc-doctor-profile flex-fill",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"100px"})})]})})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"55px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})]})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})]})})})}),Jp=()=>i.jsxs("div",{className:"doctor-session-module",children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-4"}),i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})})})}),i.jsx("div",{className:"mb-3",children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsxs("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:[i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"80px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"90px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"85px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"75px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})})]}),i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx(st,{width:"80px",height:"38px",className:"me-3"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),eg=()=>i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"55px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"200px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]}),Mte=({reviewCount:t=2})=>i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsx(S,{width:"140px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"position-relative",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"card mb-3 border-0 shadow-sm",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((s,a)=>i.jsx(S,{width:"1rem",height:"1rem"},a))}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsx(S,{width:"80px",height:"0.875rem"})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"70%",height:"1rem"})]})},n))}),i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((e,n)=>i.jsx(S,{width:"2.5rem",height:"2.5rem",style:{borderRadius:"4px"}},n))})})]}),Ite=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+l(" years ago","kivicare-clinic-management-system"):n===1?l("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+l(" months ago","kivicare-clinic-management-system"):n===1?l("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+l(" days ago","kivicare-clinic-management-system"):n===1?l("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+l(" hours ago","kivicare-clinic-management-system"):n===1?l("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+l(" minutes ago","kivicare-clinic-management-system"):n===1?l("1 minute ago","kivicare-clinic-management-system"):e<10?l("just now","kivicare-clinic-management-system"):Math.floor(e)+l(" seconds ago","kivicare-clinic-management-system")))))},Ote=We.memo(({show:t,onHide:e,doctorId:n})=>{const[s,a]=f.useState("date"),[r,o]=f.useState(1),{data:c,isLoading:d,isFetching:m}=GR({doctor_id:n,page:r,per_page:10,sort_by:s},{enabled:t&&!!n,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1});f.useEffect(()=>{o(1)},[s,n]);const u=c?.data?.reviews||[],p=c?.data?.pagination||{},h=c?.data?.doctor_data,g=parseFloat(c?.data?.avg_rating||0),v=parseInt(c?.data?.total_reviews||0),x=f.useCallback(_=>{s!==_&&(a(_),o(1))},[s]),y=f.useCallback(_=>{o(_)},[]),b=f.useCallback(_=>[...Array(5)].map((j,T)=>i.jsx("i",{className:`${T<_?"ph-fill ph-star text-warning":"ph ph-star text-muted"} fs-4`},T)),[]),w=f.useMemo(()=>i.jsxs("div",{className:"review-header d-flex gap-4 align-items-start mb-4 justify-content-between",children:[i.jsx("div",{className:"doctor-profile",children:i.jsx(on,{profileUrl:h?.profileImage,name:h?.name,email:h?.email,variant:"info",size:"lg"})}),i.jsx("div",{className:"rating-summary",children:v>0?i.jsxs("div",{className:"d-flex align-items-center gap-3 mb-3",children:[i.jsx("h2",{className:"mb-0",children:g.toFixed(1)}),i.jsxs("div",{children:[b(Math.round(g)),i.jsxs("div",{className:"text-muted",children:[l("Based on","kivicare-clinic-management-system")," ",v," ",l("reviews","kivicare-clinic-management-system")]})]})]}):i.jsx("div",{className:"text-muted",children:l("No average review found.","kivicare-clinic-management-system")})})]}),[h,g,v,b]),k=f.useMemo(()=>d&&!c?i.jsx(Mte,{}):!d&&u.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("i",{className:"ph ph-chat-centered-text fs-1 text-muted mb-3 d-block"}),i.jsx("p",{className:"text-muted",children:l("No reviews found","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h5",{className:"mb-0",children:[l("Reviews","kivicare-clinic-management-system")," (",v||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:s,onChange:_=>x(_.target.value),children:[i.jsx("option",{value:"date",children:l("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:l("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:l("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:`${m?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:u.map(_=>i.jsx(Ct,{className:"mb-3 border-0 shadow-sm",children:i.jsxs(Ct.Body,{className:"p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{children:b(_.rating)}),i.jsxs("small",{className:"text-muted",children:[l("by","kivicare-clinic-management-system")," ",i.jsx("strong",{children:_.patient_name})]})]}),i.jsx("small",{className:"text-muted",children:Ite(_.created_at)})]}),_.review_text&&i.jsx("p",{className:"mb-0 text-dark",children:_.review_text})]})},_.id))}),m&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx(Ng,{animation:"border",variant:"secondary",size:"sm"})})]}),p?.total_pages>1&&i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsxs(Il,{size:"sm",children:[i.jsx(Il.First,{onClick:()=>y(1),disabled:r===1}),i.jsx(Il.Prev,{onClick:()=>y(r-1),disabled:r===1}),[...Array(p.total_pages)].map((_,j)=>{const T=j+1;return T===1||T===p.total_pages||T>=r-1&&T<=r+1?i.jsx(Il.Item,{active:T===r,onClick:()=>y(T),children:T},T):T===r-2||T===r+2?i.jsx(Il.Ellipsis,{},T):null}),i.jsx(Il.Next,{onClick:()=>y(r+1),disabled:r===p.total_pages}),i.jsx(Il.Last,{onClick:()=>y(p.total_pages),disabled:r===p.total_pages})]})})]}),[d,m,u,s,v,p,r,x,y,b,c]);return i.jsxs(rt,{show:t,onHide:e,size:"lg",backdrop:"static",centered:!0,children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:l("Doctor Reviews","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(rt.Body,{className:"p-4",children:[w,k]})]})}),Lte=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(null),[a,r]=f.useState([]),[o,c]=f.useState([]),[d,m]=f.useState([]),[u,p]=f.useState(!1),h=f.useRef(null),g=Jn(),v=Vn(),x={page:1,perPage:10,search:"",date:"",clinic:"",name:"",specialization:"",status:"",orderBy:"",order:""},[y,b]=f.useState(x),[w,k]=f.useState(""),{isAddonActive:_,hasCapability:j,userRole:T,defaultClinicId:N}=mt(),E=Iee(),A=Oee(),L=Fee(),C=$ee(),P=Bee(),R=Lee(),M=_("kiviPro"),{data:O,isLoading:q}=Ua("specialization");f.useMemo(()=>O?.data?O.data.map(Ie=>{let De="";return typeof Ie=="string"?De=Ie:typeof Ie=="object"&&Ie!==null&&(De=Ie.label||Ie.name||""),{value:De,label:De}}):[],[O]);const U=Za(w,500);We.useEffect(()=>{b(Ie=>({...Ie,search:U,page:1}))},[U]);const H=Ie=>{if(Ie.length>0){const{id:De,desc:xe}=Ie[0],ke={id:"id",name:"name",status:"status"};b(Oe=>({...Oe,orderby:ke[De]||De,order:xe?"desc":"asc",page:1}))}else b(De=>({...De,orderby:"",order:"",page:1}))},ae=Ke(),V=async({page:Ie,per_page:De,search:xe})=>{try{const ke={dataType:"clinicList",page:Ie,per_page:De,search:xe},Oe=await ae.fetchQuery({queryKey:ut.list(ke),queryFn:()=>Et.getStaticData(ke),staleTime:300*1e3}),Qe=Oe.data.map(ct=>({value:ct.id,label:ct.label||ct.name}));return r(ct=>[...ct,...Qe]),Oe}catch(ke){return console.error("Error loading clinics:",ke),{data:[],pagination:{has_more:!1}}}},pe=async({page:Ie,per_page:De,search:xe})=>{try{const ke={dataType:"doctorList",page:Ie,per_page:De,search:xe},Oe=await ae.fetchQuery({queryKey:ut.list(ke),queryFn:()=>Et.getStaticData(ke),staleTime:300*1e3}),Qe=Oe.data.map(ct=>({value:ct.id,label:ct.label||ct.name}));return c(ct=>[...ct,...Qe]),Oe}catch(ke){return console.error("Error loading doctors:",ke),{data:[],pagination:{has_more:!1}}}},oe=f.useMemo(()=>{const Ie=Object.fromEntries(Object.entries(y).filter(([De,xe])=>xe!==""&&xe!==null&&xe!==void 0));return T==="clinic_admin"&&N&&!Ie.clinic&&!Ie.id&&(Ie.clinic=N),Ie},[y,T,N]),{data:ne,isLoading:se,error:W,refetch:ge}=_k(oe),ee=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],ie=ne?.data?.doctors||[],ue=ne?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},G=async({page:Ie,per_page:De,search:xe})=>{try{const ke={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:Ie,per_page:De,search:xe},Oe=await ae.fetchQuery({queryKey:ut.list(ke),queryFn:()=>Et.getStaticData(ke),staleTime:300*1e3}),Qe=Oe.data.map(ct=>({value:ct.id,label:ct.label||ct.name}));return m(ct=>[...ct,...Qe]),Oe.data.map(ct=>{let Tt="",Ut="";return typeof ct=="string"?(Tt=ct,Ut=ct):typeof ct=="object"&&ct!==null&&(Tt=ct.label||ct.name||"",Ut=ct.id??ct.name??Tt),{value:Ut,label:Tt}})}catch(ke){return console.error("Error loading Specialties:",ke),{data:[],pagination:{has_more:!1}}}},le=On(),re=f.useMemo(()=>[le.accessor("id",{id:"id",enableSorting:!0,header:()=>l("ID","kivicare-clinic-management-system"),cell:Ie=>i.jsx("div",{className:"font-weight-medium",children:Ie.getValue()})}),le.accessor("name",{id:"name",enableSorting:!0,header:()=>l("Doctor","kivicare-clinic-management-system"),cell:Ie=>i.jsx(on,{profileUrl:Ie.row.original.doctor_image_url,name:Ie.row.original.name,email:Ie.row.original.email||"",fallbackText:"DR",variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system")})}),...M&&!g&&!v?[le.accessor("clinicNameArray",{id:"clinic_name",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!1,cell:Ie=>{const De=Ie.row.original.clinics||[];return i.jsx("div",{children:De.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[De.slice(0,2).map((xe,ke)=>i.jsx(Qp,{trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:xe.clinic_name}),children:i.jsx(Tm,{avatar:xe.clinic_image_url,name:xe.clinic_name,email:xe.clinic_email,phone:xe.clinic_contact_number,address:xe.clinic_address,fallbackIcon:"ph-hospital"})},ke)),De.length>2&&i.jsx(Qp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",De.length-2]}),children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:l("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:De.slice(2).map((xe,ke)=>i.jsx("div",{className:ke!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:xe.clinic_image_url,name:xe.clinic_name,email:xe.clinic_email,phone:xe.clinic_contact_number,address:xe.clinic_address,fallbackIcon:"ph-hospital"})},ke))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})}})]:[],le.accessor("mobile_number",{id:"mobile_number",header:()=>l("Mobile Number","kivicare-clinic-management-system"),cell:Ie=>i.jsx("div",{children:i.jsx("span",{children:Ie.row.original.mobile_number||""})})}),le.accessor("specialization",{id:"specialization",enableSorting:!1,header:()=>l("Specialization","kivicare-clinic-management-system"),cell:Ie=>{const De=Ie.row.original.specialties||[];return i.jsx("div",{children:De.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[De.slice(0,2).map((xe,ke)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:xe.label},ke)),De.length>2&&i.jsx(Ue,{placement:"top",overlay:xe=>i.jsx(it,{id:`tooltip-specialization-${Ie.row.original.id}`,...xe,children:De.slice(2).map(ke=>ke.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",De.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),le.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:Ie=>{const De=Number(Ie.getValue()),xe=Ie.row.original,ke=()=>{const Oe=De===1?0:1;dt({title:l("Update Status?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),xe.name,Oe===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(Qe=>{Qe.isConfirmed&&(ft({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),C.mutate({ids:[xe.id],status:Oe},{onSuccess:()=>{tt({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Doctor status has been updated successfully.","kivicare-clinic-management-system")})},onError:ct=>{Me({title:l("Error","kivicare-clinic-management-system"),text:ct.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return j("doctor_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`doctor-status-${xe.id}`,checked:De===0,onChange:ke})}):i.jsx("span",{className:`badge ${De===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:De===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),...j("doctor_edit")||j("patient_review_get")||j("doctor_resend_credential")||j("doctor_session")||j("doctor_service")||j("doctor_delete")?[le.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Ie=>{const De=xe=>ke=>i.jsx(it,{id:`tooltip-${Ie.cell.row.original.id}-${xe}`,...ke,children:xe});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[j("doctor_edit")&&i.jsx(Ue,{placement:"top",overlay:De(l("Edit Doctor","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/edit/${Ie.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),j("patient_review_get")&&i.jsx(Ue,{placement:"top",overlay:De(l("View Reviews","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>{s(Ie.cell.row.original.id),e(!0)},children:i.jsx("i",{className:"ph ph-star"})})}),j("doctor_edit")&&i.jsx(Ue,{placement:"top",overlay:De(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>I(Ie.cell.row.original.id,Ie.cell.row.original.name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),j("doctor_session")&&i.jsx(Ue,{placement:"top",overlay:De(l("View Doctor Sessions","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${Ie.cell.row.original.id}/sessions`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar-plus"})})}),j("doctor_service")&&i.jsx(Ue,{placement:"top",overlay:De(l("Add Service","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${Ie.cell.row.original.id}/add-service`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-plus-square"})})}),j("doctor_delete")&&i.jsx(Ue,{placement:"top",overlay:De(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>D(Ie.cell.row.original.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[j]),D=Ie=>{dt({title:l("Delete Doctor?","kivicare-clinic-management-system"),text:l("You're about to delete this doctor.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep doctor","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(De=>{De.isConfirmed&&(ft({title:l("Deleting Doctor...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected doctor.<br>This won't take long.","kivicare-clinic-management-system")}),E.mutate(Ie,{onSuccess:()=>{tt({title:l("Doctor Deleted","kivicare-clinic-management-system"),text:l("Doctor has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to doctors","kivicare-clinic-management-system")})},onError:xe=>{Me({title:l("Error!","kivicare-clinic-management-system"),text:xe.message||l("Failed to delete doctor.","kivicare-clinic-management-system")})}}))})},I=(Ie,De)=>{dt({title:l("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),De),icon:"ph-question",confirmButtonText:l("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(xe=>{xe.isConfirmed&&R.mutate(Ie,{onSuccess:()=>{tt({title:l("Credentials Sent!","kivicare-clinic-management-system"),text:l("Doctor credentials have been resent successfully.","kivicare-clinic-management-system")})},onError:ke=>{Me({title:l("Error!","kivicare-clinic-management-system"),text:ke.message||l("Failed to resend credentials.","kivicare-clinic-management-system")})}})})},ce=Ie=>{k(Ie.target.value)},Z=()=>{b(x),r([]),c([]),m([]),k("")},K=f.useMemo(()=>["search","id","doctorName","clinic","specialization","doctorAddress","status"].some(De=>{const xe=y[De];return xe!=null&&xe!==""})||w!=="",[y,w]),B=async Ie=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const De={format:Ie};y.search&&(De.search=y.search),y.name&&(De.name=y.name),y.clinic&&(De.clinic_id=y.clinic),y.status!==""&&y.status!==null&&y.status!==void 0&&(De.status=y.status);const xe=await P.mutateAsync(De);if(xe?.data?.doctors){const ke=new Date().toISOString().split("T")[0],Oe=xe.data.doctors.map(Qe=>({id:Qe.id,name:Qe.doctorName||"",clinic_name:Qe.clinic_name||"",clinic_id:Qe.clinic_id||"",email:Qe.email,mobile_number:Qe.mobile_number,gender:Qe.gender,dob:Qe.dob,specialties:Qe.specialties,status:Qe.user_status,full_address:Qe.full_address}));switch(Ie){case"csv":gs(Oe,`doctors-${ke}.csv`);break;case"xls":fs(Oe,`doctors-${ke}.xls`);break;case"pdf":vs(Oe,`doctors-${ke}.pdf`,"Doctors List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}}catch(De){console.error("Export error:",De),Me({title:l("Error!","kivicare-clinic-management-system"),text:De.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system")})}},F=()=>B("csv"),J=()=>B("xls"),[Q,me]=f.useState(!1),te=()=>{Q||(me(!0),B("pdf"),setTimeout(()=>me(!1),2e3))},[Y,Ce]=f.useState(!1),[ye,Te]=f.useState(!1),et=Ie=>{b({...y,...Ie,page:1}),Ce(!1)},kt=async Ie=>({success:!0}),At=()=>{ge()},qt=[{type:"number",name:"id",label:l("Doctor ID","kivicare-clinic-management-system"),placeholder:l("Enter Doctor ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Ie=>{Ie.target.value=Ie.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("Select Doctor","kivicare-clinic-management-system"),optionLoader:pe,options:o,key:"doctor-filter"},...M&&!g&&!v?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:V,options:a,key:"clinic-filter"}]:[],{type:"paginatedSelect",name:"specialization",label:l("Specialization","kivicare-clinic-management-system"),placeholder:l("Select Specialization","kivicare-clinic-management-system"),options:d,optionLoader:G,isSearchable:!0},{type:"text",name:"doctorAddress",label:l("Doctor Address","kivicare-clinic-management-system"),placeholder:l("Search by address, city, or state","kivicare-clinic-management-system")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select status","kivicare-clinic-management-system"),options:ee}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Doctors","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[j("doctor_add")&&i.jsxs(ht,{to:"/doctor/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Doctor","kivicare-clinic-management-system")})]}),M&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>Te(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>Ce(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!u,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:h,children:i.jsxs("div",{ref:h,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(Xt,{id:"doctor-filter",placeholder:l("Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:pe,value:o.find(Ie=>Ie.value===y.doctorName),onChange:Ie=>{b(De=>({...De,doctorName:Ie?Ie.value:""}))},dependencies:{},isClearable:!0}),M&&!g&&!v&&i.jsx(i.Fragment,{children:i.jsx(Xt,{id:"clinic-filter",placeholder:l("Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:V,value:a.find(Ie=>Ie.value===y.clinic_id)||null,onChange:Ie=>{b(De=>({...De,clinic_id:Ie?Ie.value:""}))},dependencies:{},isClearable:!0})}),i.jsx(Xt,{id:"specialties-selection",placeholder:l("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:G,value:d.find(Ie=>Ie.label===y.specialization)||null,onChange:Ie=>b(De=>({...De,specialization:Ie?Ie.label:""})),isClearable:!0}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ee,onChange:Ie=>b(De=>({...De,status:Ie?Ie.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Ie=>({...Ie,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:w,onChange:ce})]})}),j("doctor_export")&&M&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:F,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:J,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:te,disabled:P.isPending||Q,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:ie,columns:re,isLoading:se,error:W,currentPage:ue.currentPage,perPage:ue.perPage,totalItems:ue.total,lastPage:ue.lastPage,moduleNamePlural:"doctors",onPageChange:Ie=>b(De=>({...De,page:Ie})),onPerPageChange:Ie=>b(De=>({...De,perPage:Ie,page:1})),onSortingChange:H,manualSorting:!0,enableSelection:!0,bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(Ie,De)=>{const xe=Ie.map(ke=>ke.id);dt({title:l("Delete Doctors?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${Ie.length} doctors</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep doctors","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",reverseButtons:!0}).then(ke=>{ke.isConfirmed&&(ft({title:l("Deleting Doctors...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected doctors.<br>This won't take long.","kivicare-clinic-management-system")}),A.mutate(xe,{onSuccess:Oe=>{tt({title:l("Doctor Deleted","kivicare-clinic-management-system"),text:l(`${Ie.length} doctor${Ie.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to doctors","kivicare-clinic-management-system")}),De()},onError:Oe=>{console.error("Bulk delete doctors error:",Oe);const Qe=Oe?.response?.data?.message||Oe?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");Me({text:Qe})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(Ie,De)=>{const xe=Ie.map(ke=>ke.id);dt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected Doctors?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ke=>{ke.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),L.mutate(xe,{onSuccess:Oe=>{tt({text:Oe?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system")}),De()},onError:Oe=>{console.error("Bulk resend credentials error:",Oe);const Qe=Oe?.response?.data?.message||Oe?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({text:Qe})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(Ie,De)=>{const xe=Ie.map(ke=>ke.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Doctors to active?","kivicare-clinic-management-system"),icon:"ph-question",showCancelButton:!0,confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(ke=>{ke.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),C.mutate({ids:xe,status:"0"},{onSuccess:Oe=>{tt({text:Oe?.message||l("Doctors status has been updated successfully.","kivicare-clinic-management-system")}),De()},onError:Oe=>{console.error("Bulk update status error:",Oe);const Qe=Oe?.response?.data?.message||Oe?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");Me({text:Qe})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(Ie,De)=>{const xe=Ie.map(ke=>ke.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected doctors to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(ke=>{ke.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),C.mutate({ids:xe,status:"1"},{onSuccess:Oe=>{tt({title:l("Success","kivicare-clinic-management-system"),text:Oe?.message||l("Doctors status has been updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}),De()},onError:Oe=>{console.error("Bulk update status error:",Oe);const Qe=Oe?.response?.data?.message||Oe?.message||l("Failed to update Doctor status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Qe,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Ie=>{p(Ie)}})]}),i.jsx(na,{show:Y,onHide:()=>Ce(!1),queryParams:y,onApplyFilters:et,onResetFilters:Z,title:l("Filters","kivicare-clinic-management-system"),fields:qt,hasAppliedFilters:K}),M&&i.jsx(qr,{show:ye,onHide:()=>Te(!1),onImport:kt,onReopenImport:()=>Te(!0),onDataRefresh:At,context:"doctors"}),i.jsx(Ote,{show:t,onHide:()=>{e(!1),s(null)},doctorId:n})]})};function vo(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}vo.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};vo.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};vo.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Ek(t,e,n,s){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=s}Ek.prototype.length=function(){for(var t=10,e=0,n=void 0,s=void 0,a=0;a<=t;a+=1){var r=a/t,o=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=o-n,m=c-s;e+=Math.sqrt(d*d+m*m)}n=o,s=c}return e};Ek.prototype._point=function(t,e,n,s,a){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*s*(1-t)*t*t+a*t*t*t};function Fte(t,e,n){var s,a,r,o=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:Date.now(),o=null,r=t.apply(s,a),o||(s=a=null)};return function(){var m=Date.now();!c&&n.leading===!1&&(c=m);var u=e-(m-c);return s=this,a=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),c=m,r=t.apply(s,a),o||(s=a=null)):!o&&n.trailing!==!1&&(o=setTimeout(d,u)),r}}function En(t,e){var n=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=Fte(En.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=En.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var r=a.changedTouches[0];n._strokeBegin(r)}},this._handleTouchMove=function(a){a.preventDefault();var r=a.targetTouches[0];n._strokeMoveUpdate(r)},this._handleTouchEnd=function(a){var r=a.target===n._canvas;r&&(a.preventDefault(),n._strokeEnd(a))},this.on()}En.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};En.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=n.ratio||window.devicePixelRatio||1,r=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),s.src=t,s.onload=function(){e._ctx.drawImage(s,0,0,r,o)},this._isEmpty=!1};En.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[t].concat(s))}};En.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};En.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};En.prototype.isEmpty=function(){return this._isEmpty};En.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};En.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,s=this._createPoint(e,n),a=this._data[this._data.length-1],r=a&&a[a.length-1],o=r&&s.distanceTo(r)<this.minDistance;if(!(r&&o)){var c=this._addPoint(s),d=c.curve,m=c.widths;d&&m&&this._drawCurve(d,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};En.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var s=this._data[this._data.length-1],a=s[s.length-1];n.equals(a)||s.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};En.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};En.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};En.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};En.prototype._createPoint=function(t,e,n){var s=this._canvas.getBoundingClientRect();return new vo(t-s.left,e-s.top,n||new Date().getTime())};En.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=n.c1,r=new Ek(e[1],s,a,e[2]),o=this._calculateCurveWidths(r);return e.shift(),{curve:r,widths:o}}return{}};En.prototype._calculateCurveControlPoints=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,r=e.x-n.x,o=e.y-n.y,c={x:(t.x+e.x)/2,y:(t.y+e.y)/2},d={x:(e.x+n.x)/2,y:(e.y+n.y)/2},m=Math.sqrt(s*s+a*a),u=Math.sqrt(r*r+o*o),p=c.x-d.x,h=c.y-d.y,g=u/(m+u),v={x:d.x+p*g,y:d.y+h*g},x=e.x-v.x,y=e.y-v.y;return{c1:new vo(c.x+x,c.y+y),c2:new vo(d.x+x,d.y+y)}};En.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(a);return s.start=this._lastWidth,s.end=r,this._lastVelocity=a,this._lastWidth=r,s};En.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};En.prototype._drawPoint=function(t,e,n){var s=this._ctx;s.moveTo(t,e),s.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};En.prototype._drawCurve=function(t,e,n){var s=this._ctx,a=n-e,r=Math.floor(t.length());s.beginPath();for(var o=0;o<r;o+=1){var c=o/r,d=c*c,m=d*c,u=1-c,p=u*u,h=p*u,g=h*t.startPoint.x;g+=3*p*c*t.control1.x,g+=3*u*d*t.control2.x,g+=m*t.endPoint.x;var v=h*t.startPoint.y;v+=3*p*c*t.control1.y,v+=3*u*d*t.control2.y,v+=m*t.endPoint.y;var x=e+m*a;this._drawPoint(g,v,x)}s.closePath(),s.fill()};En.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};En.prototype._fromData=function(t,e,n){for(var s=0;s<t.length;s+=1){var a=t[s];if(a.length>1)for(var r=0;r<a.length;r+=1){var o=a[r],c=new vo(o.x,o.y,o.time),d=o.color;if(r===0)this.penColor=d,this._reset(),this._addPoint(c);else if(r!==a.length-1){var m=this._addPoint(c),u=m.curve,p=m.widths;u&&p&&e(u,p,d)}}else{this._reset();var h=a[0];n(h)}}};En.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,r=0,o=n.width/s,c=n.height/s,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",n.width),d.setAttributeNS(null,"height",n.height),this._fromData(e,function(b,w,k){var _=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){var j="M "+b.startPoint.x.toFixed(3)+","+b.startPoint.y.toFixed(3)+" "+("C "+b.control1.x.toFixed(3)+","+b.control1.y.toFixed(3)+" ")+(b.control2.x.toFixed(3)+","+b.control2.y.toFixed(3)+" ")+(b.endPoint.x.toFixed(3)+","+b.endPoint.y.toFixed(3));_.setAttribute("d",j),_.setAttribute("stroke-width",(w.end*2.25).toFixed(3)),_.setAttribute("stroke",k),_.setAttribute("fill","none"),_.setAttribute("stroke-linecap","round"),d.appendChild(_)}},function(b){var w=document.createElement("circle"),k=typeof t.dotSize=="function"?t.dotSize():t.dotSize;w.setAttribute("r",k),w.setAttribute("cx",b.x),w.setAttribute("cy",b.y),w.setAttribute("fill",b.color),d.appendChild(w)});var m="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+r+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",p=d.innerHTML;if(p===void 0){var h=document.createElement("dummy"),g=d.childNodes;h.innerHTML="";for(var v=0;v<g.length;v+=1)h.appendChild(g[v].cloneNode(!0));p=h.innerHTML}var x="</svg>",y=u+p+x;return m+btoa(y)};En.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,s){return e._drawCurve(n,s.start,s.end)},function(n){return e._drawDot(n)}),this._data=t};En.prototype.toData=function(){return this._data};var Kh={exports:{}},$te=Kh.exports,yC;function Bte(){return yC||(yC=1,(function(t,e){(function(n,s){t.exports=s()})($te,function(){return(function(n){function s(r){if(a[r])return a[r].exports;var o=a[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}var a={};return s.m=n,s.c=a,s.p="",s(0)})([function(n,s){function a(m){var u=m.getContext("2d"),p=m.width,h=m.height,g=u.getImageData(0,0,p,h).data,v=c(!0,p,h,g),x=c(!1,p,h,g),y=d(!0,p,h,g),b=d(!1,p,h,g),w=b-y+1,k=x-v+1,_=u.getImageData(y,v,w,k);return m.width=w,m.height=k,u.clearRect(0,0,w,k),u.putImageData(_,0,0),m}function r(m,u,p,h){return{red:h[4*(p*u+m)],green:h[4*(p*u+m)+1],blue:h[4*(p*u+m)+2],alpha:h[4*(p*u+m)+3]}}function o(m,u,p,h){return r(m,u,p,h).alpha}function c(m,u,p,h){for(var g=m?1:-1,v=m?0:p-1,x=v;m?x<p:x>-1;x+=g)for(var y=0;y<u;y++)if(o(y,x,u,h))return x;return null}function d(m,u,p,h){for(var g=m?1:-1,v=m?0:u-1,x=v;m?x<u:x>-1;x+=g)for(var y=0;y<p;y++)if(o(x,y,u,h))return x;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Kh)),Kh.exports}var qte=Bte();const Hte=wa(qte);var zte=["canvasProps","clearOnResize"],rf=(function(t){zE(n,t);var e=UE(n);function n(){var s;qE(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=e.call.apply(e,[this].concat(r)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(c){s._canvas=c,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var c=s.props;c.canvasProps,c.clearOnResize;var d=ka(c,zte);return d},s.componentDidMount=function(){var c=s.getCanvas();s._sigPad=new En(c,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var c=s.getCanvas(),d=document.createElement("canvas");return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),Hte(d)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var c,d,m=(c=s.props.canvasProps)!==null&&c!==void 0?c:{},u=m.width,p=m.height;if(!(typeof u<"u"&&typeof p<"u")){var h=s.getCanvas(),g=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof u>"u"&&(h.width=h.offsetWidth*g),typeof p>"u"&&(h.height=h.offsetHeight*g),h.getContext("2d").scale(g,g),s.clear()}},s.render=function(){var c=s.props.canvasProps;return We.createElement("canvas",It({ref:s.setRef},c))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(c,d){return s.getSignaturePad().fromDataURL(c,d)},s.toDataURL=function(c,d){return s.getSignaturePad().toDataURL(c,d)},s.fromData=function(c){return s.getSignaturePad().fromData(c)},s.toData=function(){return s.getSignaturePad().toData()},s}return HE(n)})(f.Component);rf.propTypes={velocityFilterWeight:Pe.number,minWidth:Pe.number,maxWidth:Pe.number,minDistance:Pe.number,dotSize:Pe.oneOfType([Pe.number,Pe.func]),penColor:Pe.string,throttle:Pe.number,onEnd:Pe.func,onBegin:Pe.func,canvasProps:Pe.object,clearOnResize:Pe.bool};rf.defaultProps={clearOnResize:!0};rf.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const Vte=t=>{if(!t)return"";const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+l(" years ago","kivicare-clinic-management-system"):n===1?l("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+l(" months ago","kivicare-clinic-management-system"):n===1?l("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+l(" days ago","kivicare-clinic-management-system"):n===1?l("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+l(" hours ago","kivicare-clinic-management-system"):n===1?l("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+l(" minutes ago","kivicare-clinic-management-system"):n===1?l("1 minute ago","kivicare-clinic-management-system"):e<10?l("just now","kivicare-clinic-management-system"):Math.floor(e)+l(" seconds ago","kivicare-clinic-management-system")))))},Ute=({filled:t})=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t?"#F59E0B":"#E5E7EB",stroke:t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),dP=({rating:t,size:e="md"})=>{const n={sm:14,md:16,lg:20};return i.jsx("div",{className:"kc-star-rating",children:[...Array(5)].map((s,a)=>i.jsx("svg",{width:n[e],height:n[e],viewBox:"0 0 24 24",fill:a<t?"#F59E0B":"#E5E7EB",stroke:a<t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},a))})},Wte=({distribution:t,totalReviews:e})=>{const n=[5,4,3,2,1];return i.jsx("div",{className:"kc-rating-distribution",children:n.map(s=>{const a=t[s]||0,r=e>0?a/e*100:0;return i.jsxs("div",{className:"kc-distribution-row",children:[i.jsx("span",{className:"kc-rating-number",children:s}),i.jsx(Ute,{filled:!0}),i.jsx("div",{className:"kc-bar-track",children:i.jsx("div",{className:"kc-bar-fill",style:{width:`${r}%`}})})]},s)})})},Kte=({review:t})=>i.jsxs("div",{className:"kc-review-card",children:[i.jsx("div",{className:"kc-review-avatar",children:i.jsx($c,{src:t.profileUrl,alt:t.patientName||l("Patient","kivicare-clinic-management-system"),text:!t.profileUrl&&t.patientName?t.patientName.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"})}),i.jsxs("div",{className:"kc-review-content",children:[i.jsx("h4",{className:"kc-review-name",children:t.patientName}),i.jsxs("div",{className:"kc-review-meta",children:[i.jsx(dP,{rating:t.rating,size:"sm"}),i.jsx("span",{className:"kc-review-separator",children:""}),i.jsx("span",{className:"kc-review-date",children:Vte(t.createdAt)||""})]}),t.reviewText&&i.jsx("p",{className:"kc-review-text",children:t.reviewText})]})]}),Gte=({doctorId:t})=>{const[e,n]=f.useState("date"),[s,a]=f.useState(1),[r,o]=f.useState([]),[c,d]=f.useState(!1),[m,u]=f.useState({5:0,4:0,3:0,2:0,1:0}),[p,h]=f.useState(0),[g,v]=f.useState(0),[x,y]=f.useState(0),b=f.useRef(null),w=5,k={doctor_id:t,page:s,per_page:w,...e?{sort_by:e}:{}},{data:_,isLoading:j,isFetching:T}=GR(k,{enabled:!!t,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),N=E=>{E!==e&&(n(E),a(1))};return f.useEffect(()=>{s===1&&_?.data?.distribution&&(v(_?.data?.avg_rating||0),y(_?.data?.total_reviews||0),u(_.data.distribution),h(x))},[_,s,x]),f.useEffect(()=>{const E=_?.data?.reviews||[],A=_?.data?.pagination||{},L=typeof A.has_more<"u"?!!A.has_more:A.total_pages?A.page<A.total_pages:E.length===w;d(L),s===1?o(E||[]):E&&E.length>0&&o(C=>{const P=new Set(C.map(M=>M.id)),R=[...C];return E.forEach(M=>{P.has(M.id)||(R.push(M),P.add(M.id))}),R})},[_,s]),f.useEffect(()=>{a(1),o([]),d(!1),u({5:0,4:0,3:0,2:0,1:0})},[t]),f.useEffect(()=>{const E=b.current;if(!E)return;let A=!1;const L=()=>{A||(A=!0,requestAnimationFrame(()=>{const{scrollTop:C,scrollHeight:P,clientHeight:R}=E;P-C-R<200&&c&&!T&&a(O=>O+1),A=!1}))};return E.addEventListener("scroll",L),()=>E.removeEventListener("scroll",L)},[c,T]),t?i.jsxs("div",{className:"card kc-reviews-panel",children:[i.jsx("div",{className:"kc-reviews-header",children:i.jsx("h3",{children:l("Reviews","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"kc-reviews-body",children:[i.jsxs("div",{className:"kc-rating-summary form-control",children:[i.jsxs("div",{className:"kc-rating-score",children:[i.jsx("span",{className:"kc-score-number",children:g.toFixed(1)}),i.jsxs("span",{className:"kc-score-label",children:["(",l("Ratings","kivicare-clinic-management-system"),")"]})]}),i.jsx("div",{className:"kc-rating-stars-center",children:i.jsx(dP,{rating:Math.round(g),size:"lg"})}),i.jsxs("p",{className:"kc-reviews-count",children:[x," ",l("reviews","kivicare-clinic-management-system")]}),i.jsx(Wte,{distribution:m,totalReviews:p})]}),i.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[l("Reviews","kivicare-clinic-management-system")," (",x||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:e,onChange:E=>N(E.target.value),children:[i.jsx("option",{value:"date",children:l("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:l("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:l("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{ref:b,className:"kc-reviews-list position-relative",style:{maxHeight:850,overflowY:"auto"},children:[i.jsx("div",{className:`${T?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:j&&r.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("span",{className:"spinner-border  spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Loading...","kivicare-clinic-management-system")]}):r.length===0?i.jsx("div",{className:"text-center py-4 border-start border-end",children:l("No reviews yet","kivicare-clinic-management-system")}):r.map(E=>i.jsx(Kte,{review:{id:E.id,patientName:E.patient_name||E.patientName,rating:E.rating||E.rating,reviewText:E.review_text||E.reviewText,createdAt:E.created_at||E.createdAt,profileUrl:E.patient_profile_url||E.patient_profile_url}},E.id))}),T&&r.length>0&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx("div",{className:"spinner-border",role:"status"})}),!c&&r.length>0&&i.jsx("div",{className:"text-center small text-muted py-2",children:l("No more reviews","kivicare-clinic-management-system")})]})]})]}):null};function Iy({isEditing:t=!1,isProfile:e=!1}){const n=Ke(),s=Pee(),a=Mee(),r=mn(),{isAddonActive:o,currentuserID:c,userRole:d,defaultCountryCode:m,showOtherGender:u,defaultClinicId:p}=mt(),{data:h}=Cn();f.useMemo(()=>h?.data?.kc_available_translations,[h]);const g=o("kiviPro"),{id:v}=Yt(),x=p?parseInt(p,10):null,y=Fi(),b=Jn(),w=Vn(),k=e?c:v,[_,j]=f.useState(!1),T=f.useRef(null),{data:N}=od({module_type:"doctor_module",status:1,module_id:k},{enabled:o("kiviPro")}),E=N?.data?.forms||[];f.useEffect(()=>{t&&E.length>0&&E.forEach(Ae=>{const Be=Ae.form_data;Be&&A.current[Ae.id]&&setTimeout(()=>{const z=A.current[Ae.id];z&&z.resetForm&&z.resetForm(Be)},100)})},[t,E]);const A=f.useRef({}),L=()=>{const Ae={};return E.forEach(Be=>{const z=A.current[Be.id];z&&(Ae[Be.id]=z.getFormData())}),Ae},C=async()=>{const Ae={};let Be=!0,z=null;for(const X of E){const fe=A.current[X.id];if(fe){const _e=await fe.triggerValidation();Ae[X.id]={isValid:_e.isValid,data:fe.getFormData(),errors:_e.errors},_e.isValid||(Be=!1,z||(z=X.id))}}return{allValid:Be,formResults:Ae,firstInvalidFormId:z}},P=()=>{T.current.clear(),j(!0)},R=()=>{const Ae=T.current.toData();Ae&&(Ae.pop(),T.current.fromData(Ae),j(!0))};f.useEffect(()=>{if(T.current){const Ae=T.current.getCanvas(),Be=()=>{j(!0)};return Ae.addEventListener("mousedown",Be),Ae.addEventListener("touchstart",Be),()=>{Ae.removeEventListener("mousedown",Be),Ae.removeEventListener("touchstart",Be)}}},[]);const[M,O]=f.useState({degree:"",university:"",year:""}),[q,U]=f.useState({}),[H,ae]=f.useState(-1),[V,pe]=f.useState(!1),[oe,ne]=f.useState(!1),se=oe||s.isPending,[W,ge]=f.useState(!1),{data:ee,isLoading:ie,error:ue}=af(k,{enabled:(t||e)&&!!k}),G=ee?.data,le=Yc.PhoneNumberUtil.getInstance(),re=Ae=>{try{return le.isValidNumber(le.parseAndKeepRawInput(Ae))}catch{return!1}},D=[{value:0,label:l("Active","kivicare-clinic-management-system")},{value:1,label:l("Inactive","kivicare-clinic-management-system")}],{register:I,handleSubmit:ce,control:Z,watch:K,setValue:B,formState:{errors:F},reset:J}=Jt({defaultValues:{doctorImage:"",doctorImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",specialization:[],experience:null,bloodGroup:null,status:D[0],gender:"",signature:"",description:"",address:"",city:"",country:"",postalCode:"",qualifications:[]}}),{fields:Q,append:me,remove:te,update:Y}=kr({control:Z,name:"qualifications"}),Ce=async({page:Ae,per_page:Be,search:z})=>{try{const X={dataType:"clinicList",page:Ae,per_page:Be,search:z};return await n.fetchQuery({queryKey:ut.list(X),queryFn:()=>Et.getStaticData(X),staleTime:300*1e3})}catch(X){return console.error("Error loading clinics:",X),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},{data:ye,isLoading:Te,refetch:et}=Ua("specialization"),kt=Lg();if(f.useEffect(()=>{if((t||e)&&G&&!ie){const Ae={firstName:G.first_name||"",lastName:G.last_name||"",email:G.email||"",contactNumber:G.contact_number||"",dob:G.dob||"",gender:G.gender||"",status:D.find(Be=>Be.value===parseInt(G.status))||D[0],clinic:Array.isArray(G?.clinics)?G.clinics.map(Be=>{const z=Be.id??Be.clinic_id??Be.value,X=parseInt(z,10);return{...Be,id:X,value:X,label:Be.name||Be.clinic_name||Be.label}}):null,specialization:Array.isArray(G?.specialties)?G.specialties.map(Be=>{let z=parseInt(Be.id??Be.value,10);if(isNaN(z)&&ye?.data){const X=ye.data.find(fe=>fe.label===Be.label);X&&(z=parseInt(X.id,10))}return{id:z,value:z,label:Be.label}}):[],doctorImage:G.doctor_image_url||"",doctorImageId:G.doctor_image_id||"",experience:G.no_of_experience||"",address:G.address||"",city:G.city||"",country:G.country||"",postalCode:G.postal_code||"",qualifications:Array.isArray(G.qualifications)?G.qualifications.map(Be=>({degree:Be.degree||"",university:Be.university||"",year:Be.year||"",file:Be.file||""})):[],description:G.doctor_description||""};J(Ae),G.customFields&&typeof G.customFields=="object"&&Object.entries(G.customFields).forEach(([Be,z])=>{B(`custom_field_${Be}`,z)}),G.doctor_signature&&T.current&&!_&&setTimeout(()=>{T?.current?.fromDataURL(G.doctor_signature)},100),setTimeout(()=>{B("contactNumber",G.contact_number||"")},0)}},[t,e,G,ye]),f.useEffect(()=>{if(ue){const Ae=ue?.response?.data?.message||l("You do not have permission to view this doctor.","kivicare-clinic-management-system");Ee.error(Ae,{position:"top-right",autoClose:5e3}),r("/doctor",{replace:!0})}},[ue,r]),(t||e)&&ie)return i.jsx(My,{});if((t||e)&&ue)return null;const At=()=>{O({degree:"",university:"",year:""}),ae(-1),pe(!0)},qt=Ae=>{const Be=Q[Ae];O({degree:Be.degree||"",university:Be.university||"",year:Be.year||""}),ae(Ae),pe(!0)},Ie=Ae=>{const{name:Be,value:z}=Ae.target;O(X=>({...X,[Be]:z})),q[Be]&&U(X=>({...X,[Be]:""}))},De=()=>{const Ae={};if(M.degree.trim()||(Ae.degree=l("Degree is required","kivicare-clinic-management-system")),M.university.trim()||(Ae.university=l("University is required","kivicare-clinic-management-system")),!M.year)Ae.year=l("Year is required","kivicare-clinic-management-system");else{const Be=new Date().getFullYear(),z=parseInt(M.year);(z<1950||z>Be)&&(Ae.year=l(`Year must be between 1950 and ${Be}`,"kivicare-clinic-management-system"))}if(Object.keys(Ae).length>0){U(Ae);return}U({}),H>=0?(Ee.success(l("Qualification updated successfully","kivicare-clinic-management-system")),Y(H,M)):(Ee.success(l("Qualification added successfully","kivicare-clinic-management-system")),me(M)),O({degree:"",university:"",year:""}),pe(!1),ae(-1)},xe=()=>{O({degree:"",university:"",year:""}),U({}),pe(!1),ae(-1)},ke={control:(Ae,Be)=>({...Ae,borderColor:Be.isFocused?"#86b7fe":"#dee2e6",boxShadow:Be.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null,"&:hover":{borderColor:Be.isFocused?"#86b7fe":"#dee2e6"},minHeight:"38px",fontSize:"1rem"}),placeholder:Ae=>({...Ae,color:"#6c757d"}),singleValue:Ae=>({...Ae,color:"#495057"})},Oe=Ae=>({...ke,control:(Be,z)=>({...ke.control(Be,z),borderColor:Ae?"#dc3545":z.isFocused?"#86b7fe":"#dee2e6",boxShadow:Ae?"0 0 0 0.25rem rgba(220, 53, 69, 0.25)":z.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null})}),Qe=(Ae,Be)=>{B(Ae,Be.url||Be.image),B(`${Ae}Id`,Be.id||Be.imageId)},ct=async Ae=>{if(ne(!0),E.length>0&&!(await C()).allValid){Ee.error(l("Please fix errors in the custom information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),ne(!1);return}let Be=null;if(T.current&&(_||!t))try{T.current.isEmpty()?Be="":Be=T.current.getCanvas().toDataURL("image/png")}catch(X){console.error("Error processing signature:",X)}const z={first_name:Ae.firstName,last_name:Ae.lastName,email:Ae.email,mobile_number:Ae.contactNumber,dob:Ae.dob,specialties:Array.isArray(Ae.specialization)?Ae.specialization.map(X=>({id:X.value,label:X.label})):Ae.specialization?[{id:Ae.specialization.value,label:Ae.specialization.label}]:[],experience_years:Ae.experience?.value||Ae.experience,blood_group:Ae.bloodGroup?.value||Ae.bloodGroup,status:typeof Ae.status=="object"?Ae.status?.value:Ae.status,gender:Ae.gender,signature:Ae.signature,description:Ae.description,doctor_image_id:Ae.doctorImageId??null,address:Ae.address,city:Ae.city,country:Ae.country,postal_code:Ae.postalCode,qualifications:Ae.qualifications,..._||!t?{doctor_signature:Be??""}:{},customForm:L(),customFields:Object.keys(Ae).reduce((X,fe)=>{if(fe.startsWith("custom_field_")){const _e=fe.replace("custom_field_","");X[_e]=Ae[fe]}return X},{})};w||b?z.clinic_id=[{id:String(x)}]:Ae.clinic&&Array.isArray(Ae.clinic)&&Ae.clinic.length>0&&(z.clinic_id=Ae.clinic.map(X=>({id:String(X.value||X.id)})));try{let X;t||e?(X=await a.mutateAsync({id:k,...z}),Ee.success(l("Doctor updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),e||r("/doctor")):(X=await s.mutateAsync(z),Ee.success(l("Doctor created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),r("/doctor"))}catch(X){console.error("Error saving doctor:",X);const fe=X?.response?.data?.message||(t?l("Failed to update doctor","kivicare-clinic-management-system"):l("Failed to create doctor","kivicare-clinic-management-system"));Ee.error(fe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{ne(!1)}},Tt=Ae=>{console.log("Validation errors:",Ae);const Be=Object.keys(Ae)[0],z=document.getElementById(Be);z&&(z.scrollIntoView({behavior:"smooth",block:"center"}),z.focus())},Ut=Ae=>{te(Ae),Ee.success(l("Qualification deleted successfully","kivicare-clinic-management-system"))},yt={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:!w&&!b?{required:l("Clinic selection is required","kivicare-clinic-management-system")}:{},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:Ae=>Ae?re(Ae)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},dob:{validate:Ae=>{if(!Ae)return!0;const Be=new Date(Ae);return new Date().getFullYear()-Be.getFullYear()>=18||l("Doctor must be at least 18 years old","kivicare-clinic-management-system")}},specialization:{required:l("Specialization is required","kivicare-clinic-management-system")},experience:{validate:Ae=>{if(!Ae)return!0;const Be=parseFloat(Ae);return isNaN(Be)?l("Please enter a valid number","kivicare-clinic-management-system"):Be<0?l("Experience cannot be negative","kivicare-clinic-management-system"):Be>100?l("Experience cannot be more than 100 years","kivicare-clinic-management-system"):!0}},status:{required:l("Status is required","kivicare-clinic-management-system")},gender:{required:l("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},"qualifications.degree":{required:l("Degree is required","kivicare-clinic-management-system")},"qualifications.university":{required:l("College/University is required","kivicare-clinic-management-system")},"qualifications.year":{required:l("Year is required","kivicare-clinic-management-system"),min:{message:l("Year must be 1950 or later","kivicare-clinic-management-system")},max:{value:new Date().getFullYear(),message:l(`Year cannot be later than ${new Date().getFullYear()}`,"kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,11}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Doctor","kivicare-clinic-management-system"):l("Add Doctor","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"d-flex gap-4",children:[i.jsx("div",{className:"kc-doctor-profile",children:i.jsxs("form",{onSubmit:ce(ct,Tt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:l("Profile Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(be,{name:"doctorImage",control:Z,render:({field:Ae})=>i.jsx(wl,{id:"doctor-image-upload",name:"doctorImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:Ae.value,defaultImageId:K("doctorImageId"),onChange:Be=>Qe("doctorImage",Be),setValue:B,size:200})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${F.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...I("firstName",yt.firstName)}),F.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${F.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...I("lastName",yt.lastName)}),F.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${F.email?"is-invalid":""}`,placeholder:l('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...I("email",yt.email)}),F.email&&i.jsx("div",{className:"invalid-feedback d-block",children:F.email.message})]})}),g&&!w&&!b&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:Z,rules:yt.clinic,render:({field:Ae})=>i.jsx(Xt,{id:"clinic",loadOptions:Ce,value:Ae.value,onChange:Be=>{Ae.onChange(Be)},placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${F.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{},isMulti:!0,getOptionValue:Be=>Be?.value??Be?.id,getOptionLabel:Be=>Be?.label??Be?.name??Be?.clinic_name})}),F.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"contactNumber",control:Z,rules:yt.contactNumber,render:({field:Ae})=>i.jsx(so,{defaultCountry:m,value:Ae.value,onChange:Ae.onChange,inputProps:{className:`form-control ${F.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":F.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),F.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:l("DOB","kivicare-clinic-management-system")}),i.jsx(be,{name:"dob",control:Z,rules:yt.dob,render:({field:Ae})=>i.jsx(Wn,{id:"dob",className:`form-control ${F.dob?"is-invalid":""}`,value:Ae.value?Xn(Ae.value):"",onChange:Be=>{if(Be&&Be[0]){const z=Be[0],X=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`;Ae.onChange(X)}else Ae.onChange("")},options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Kn()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&ie})}),F.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:F.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"specialization",className:"form-label",children:[l("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"specialization",control:Z,rules:yt.specialization,render:({field:Ae})=>i.jsx(du,{id:"specialization",options:ye?.data??[],value:Ae.value,onChange:Be=>{Ae.onChange(Be)},onCreateOption:Be=>{kt.mutate(Be,{onSuccess:z=>{if(z?.data){const X={id:parseInt(z?.data?.data.id,10),value:parseInt(z?.data?.data.id,10),label:z?.data?.data.label};Ae.onChange([...Ae.value||[],X])}Ee.success(l("Specialization added successfully","kivicare-clinic-management-system"))},onError:z=>{console.error("Failed to save specialization:",z),console.error("Error details:",z.response?.data),Ee.error(l("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Be=>{const z=Be.value??Be.id;return z!=null?String(z):""},getOptionLabel:Be=>Be.label,placeholder:l("Select or create specialization","kivicare-clinic-management-system"),isLoading:Te,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1,className:`react-select ${F.specialization?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",noOptionsMessage:()=>l("Type to create a new specialization","kivicare-clinic-management-system"),formatCreateLabel:Be=>l("Add specialization","kivicare-clinic-management-system")+`: "${Be}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new specialization","kivicare-clinic-management-system")]}),F.specialization&&i.jsx("div",{className:"invalid-feedback d-block",children:F.specialization.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"experience",className:"form-label",children:l("Experience (In Years)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"experience",className:`form-control ${F.experience?"is-invalid":""}`,placeholder:l("Enter experience","kivicare-clinic-management-system"),...I("experience",yt.experience),onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}}),F.experience&&i.jsx("div",{className:"invalid-feedback d-block",children:F.experience.message})]})}),!e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:Z,rules:yt.status,render:({field:Ae})=>i.jsx(lt,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:D,value:Ae.value,onChange:Ae.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{...Oe(F.status),menuPortal:Be=>({...Be,zIndex:9999})}})}),F.status&&i.jsx("div",{className:"invalid-feedback d-block",children:F.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",style:{cursor:"pointer"},...I("gender",yt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",style:{cursor:"pointer"},...I("gender",yt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),u&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",style:{cursor:"pointer"},...I("gender",yt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),F.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:F.gender.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",className:"form-label h6",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:"form-control",rows:"2",placeholder:l("Write description","kivicare-clinic-management-system"),...I("description")})]})}),i.jsxs("div",{className:"col-lg-4 col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signature",className:"form-label d-block",children:l("Signature","kivicare-clinic-management-system")}),i.jsx(rf,{ref:T,id:"signatureCanvas",className:"w-100 rounded",canvasProps:{width:500,height:100,className:"sigCanvas"},penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(220,220,220)"})]}),i.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[i.jsx("button",{type:"button",onClick:R,className:"btn btn-secondary",children:l("Undo","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",onClick:P,className:"btn btn-primary",children:l("Clear","kivicare-clinic-management-system")})]})]})]})})]}),i.jsx("div",{className:"row gy-4"})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:l("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${F.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...I("address",yt.address)}),F.address&&i.jsx("div",{className:"invalid-feedback d-block",children:F.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${F.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...I("city",yt.city)}),F.city&&i.jsx("div",{className:"invalid-feedback d-block",children:F.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${F.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...I("country",yt.country)}),F.country&&i.jsx("div",{className:"invalid-feedback d-block",children:F.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${F.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...I("postalCode",yt.postalCode)}),F.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:F.postalCode.message})]})})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:l("Add Qualification","kivicare-clinic-management-system")}),!V&&i.jsxs("button",{type:"button",onClick:At,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Qualification","kivicare-clinic-management-system")})]})]}),V&&i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-4 bg-body rounded",children:[i.jsx("h6",{children:H>=0?l("Edit Qualification","kivicare-clinic-management-system"):l("Add Qualification","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3 mt-2",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"degree",className:"form-label",children:[l("Degree","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"degree",name:"degree",className:`form-control ${q.degree?"is-invalid":""}`,placeholder:l('eg "Dermatology"',"kivicare-clinic-management-system"),value:M.degree,onChange:Ie}),q.degree&&i.jsx("div",{className:"invalid-feedback d-block",children:q.degree})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"university",className:"form-label",children:[l("University","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"university",name:"university",className:`form-control ${q.university?"is-invalid":""}`,placeholder:l('eg "I"',"kivicare-clinic-management-system"),value:M.university,onChange:Ie}),q.university&&i.jsx("div",{className:"invalid-feedback d-block",children:q.university})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"year",className:"form-label",children:[l("Year","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"number",id:"year",name:"year",className:`form-control ${q.year?"is-invalid":""}`,placeholder:l("1999","kivicare-clinic-management-system"),min:"1950",max:new Date().getFullYear(),value:M.year,onChange:Ie,onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}}),q.year&&i.jsx("div",{className:"invalid-feedback d-block",children:q.year})]})}),i.jsxs("div",{className:"col-12 text-end",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:xe,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:De,children:l("Save","kivicare-clinic-management-system")})]})]})]})}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",children:l("SR. NO","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Degree","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("College/University","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Year","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Action","kivicare-clinic-management-system")})]})}),i.jsx("tbody",{children:Q.length>0?Q.map((Ae,Be)=>i.jsxs("tr",{children:[i.jsxs("th",{children:[Be+1,"."]}),i.jsx("td",{children:Ae.degree}),i.jsx("td",{children:Ae.university}),i.jsx("td",{children:Ae.year}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:()=>qt(Be),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-pencil"})})}),i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>Ut(Be),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})]})})]},Ae.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"text-center py-4 start-border end-border",children:l("No records found","kivicare-clinic-management-system")})})})]})})]})}),i.jsx(tf,{moduleType:"doctor_module",control:Z,errors:F,setValue:B,watch:K}),g&&E.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Form","kivicare-clinic-management-system")}),E.map(Ae=>i.jsx(Ct,{className:"mb-4",children:i.jsxs(Va,{children:[i.jsx("h6",{className:"mb-3",children:Ae.name?.text||Ae.name}),i.jsx("div",{id:`custom-form-${Ae.id}`,children:i.jsx(Ga,{ref:Be=>A.current[Ae.id]=Be,fields:Ae.fields,data:Ae.form_data||{},readOnly:!1,formId:`form_${Ae.id}`})})]})},Ae.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:se}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:se,children:se?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save Doctor","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"kc-doctor-ratings-reviews",children:y&&(t||e)&&k&&g&&i.jsx(Gte,{doctorId:k})})]})]})}const Yte=Object.freeze(Object.defineProperty({__proto__:null,default:Iy},Symbol.toStringTag,{value:"Module"})),Oo={getDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions",method:"GET",data:t}),getDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"GET"}),createDoctorSession:t=>ve({endpoint:"doctor-sessions",method:"POST",data:t}),updateDoctorSession:(t,e)=>ve({endpoint:`doctor-sessions/${t}`,method:"PUT",data:e}),deleteDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"DELETE"}),bulkDeleteDoctorSessions:t=>ve({endpoint:"doctor-sessions/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorSessionStatus:(t,e)=>ve({endpoint:"doctor-sessions/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions/export",method:"GET",data:t})},pa={all:["doctorSessions"],lists:()=>[...pa.all,"list"],list:t=>[...pa.lists(),{filters:t}],details:()=>[...pa.all,"detail"],detail:t=>[...pa.details(),t]},Qte=(t={},e={})=>gt({queryKey:pa.list(t),queryFn:()=>Oo.getDoctorSessions(t),...e}),Zte=(t,e={})=>gt({queryKey:pa.detail(t),queryFn:()=>Oo.getDoctorSession(t),enabled:!!t,...e}),Xte=()=>{const t=Ke();return He({mutationFn:e=>Oo.createDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:pa.lists()})}})},Jte=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>Oo.updateDoctorSession(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:pa.detail(n.id)}),t.invalidateQueries({queryKey:pa.lists()})}})},ene=()=>{const t=Ke();return He({mutationFn:e=>Oo.deleteDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:pa.lists()})}})},tne=()=>{const t=Ke();return He({mutationFn:e=>Oo.bulkDeleteDoctorSessions(e),onSuccess:()=>{t.invalidateQueries({queryKey:pa.lists()})}})},nne=()=>He({mutationFn:t=>Oo.exportDoctorSessions(t)}),xn={timeToMinutes:t=>{if(!t)return 0;const[e,n]=t.split(":").map(Number);return e*60+n},minutesToTime:t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},formatTime:t=>{if(!t)return"";try{const[e,n]=t.split(":").map(Number),s=new Date;return s.setHours(e,n,0),s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return t}},isBefore:(t,e)=>xn.timeToMinutes(t)<xn.timeToMinutes(e),isAfter:(t,e)=>xn.timeToMinutes(t)>xn.timeToMinutes(e),doRangesOverlap:(t,e,n,s)=>{const a=xn.timeToMinutes(t),r=xn.timeToMinutes(e),o=xn.timeToMinutes(n),c=xn.timeToMinutes(s);return a<c&&o<r}},Am=({name:t,control:e,rules:n,placeholder:s,error:a,id:r})=>i.jsx(be,{name:t,control:e,rules:n,render:({field:o})=>{let c=Array.isArray(o.value)?o.value[0]:o.value;return c instanceof Date&&(c=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`),i.jsx(Wn,{value:c,onChange:d=>{if(d&&d.length>0){const m=d[0],u=`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`;o.onChange(u)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Kn()},className:`form-control d-none ${a?"is-invalid":""}`,placeholder:s,id:r||t})}}),ine=()=>{const{getValues:t}=pg(),e=f.useCallback(r=>o=>o?!0:l("Start time is required","kivicare-clinic-management-system"),[]),n=f.useCallback(r=>o=>{if(!o)return l("End time is required","kivicare-clinic-management-system");const c=t(`days.${r}.mainSession.start`);return c?xn.isAfter(o,c)?xn.timeToMinutes(o)-xn.timeToMinutes(c)<30?l("Session must be at least 30 minutes long","kivicare-clinic-management-system"):!0:l("End time must be after start time","kivicare-clinic-management-system"):!0},[t]),s=f.useCallback((r,o)=>c=>{if(!c)return l("Break start time is required","kivicare-clinic-management-system");const d=t(`days.${r}.mainSession`);if(!d||!d.start||!d.end)return l("Please set main session times first","kivicare-clinic-management-system");if(!xn.isAfter(c,d.start)||!xn.isBefore(c,d.end))return l("Break must be within session hours","kivicare-clinic-management-system");const u=(t(`days.${r}.breaks`)||[]).filter((p,h)=>h!==o);for(let p=0;p<u.length;p++){const h=u[p];if(h.start&&h.end&&xn.timeToMinutes(c)>=xn.timeToMinutes(h.start)&&xn.timeToMinutes(c)<xn.timeToMinutes(h.end))return l("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]),a=f.useCallback((r,o)=>c=>{if(!c)return l("Break end time is required","kivicare-clinic-management-system");const d=t(`days.${r}.mainSession`),m=t(`days.${r}.breaks.${o}.start`);if(!d||!d.start||!d.end)return l("Please set main session times first","kivicare-clinic-management-system");if(!m)return l("Please set break start time first","kivicare-clinic-management-system");if(!xn.isAfter(c,m))return l("Break end time must be after break start time","kivicare-clinic-management-system");if(!xn.isBefore(c,d.end))return l("Break must end before session ends","kivicare-clinic-management-system");if(xn.timeToMinutes(c)-xn.timeToMinutes(m)<15)return l("Break must be at least 15 minutes long","kivicare-clinic-management-system");const h=(t(`days.${r}.breaks`)||[]).filter((g,v)=>v!==o);for(let g=0;g<h.length;g++){const v=h[g];if(v.start&&v.end&&xn.doRangesOverlap(m,c,v.start,v.end))return l("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]);return{validateSessionStart:e,validateSessionEnd:n,validateBreakStart:s,validateBreakEnd:a}};function Dm({isEditing:t=!1,hideDoctorField:e=!1}){const n=f.useMemo(()=>[{id:"mon",label:l("Monday","kivicare-clinic-management-system")},{id:"tue",label:l("Tuesday","kivicare-clinic-management-system")},{id:"wed",label:l("Wednesday","kivicare-clinic-management-system")},{id:"thu",label:l("Thursday","kivicare-clinic-management-system")},{id:"fri",label:l("Friday","kivicare-clinic-management-system")},{id:"sat",label:l("Saturday","kivicare-clinic-management-system")},{id:"sun",label:l("Sunday","kivicare-clinic-management-system")}],[]),{id:s,doctorId:a}=Yt(),{data:r,isLoading:o}=Zte(s),{data:c}=af(a?parseInt(a):null),{pathname:d}=Gn(),m=d.includes("setting")?"/setting":"",u=mn(),{isAddonActive:p,defaultClinicId:h,currentDoctorId:g,userRole:v}=mt(),{data:x}=Cn(),y=Fi(),b=Jn(),w=Vn(),k=p("kiviPro"),_=y?g:a?parseInt(a):null,j=Xte(),T=Jte(),N=Jt({defaultValues:{clinic:w||b?{value:h,label:""}:k?null:{value:h,label:""},doctor:null,timeSlot:"00:00",days:n.map(ee=>({id:ee.id,enabled:!1,mainSession:{start:"09:00",end:"18:00"},breaks:[]}))},mode:"onChange"}),{control:E,handleSubmit:A,setValue:L,getValues:C,formState:{errors:P,isValid:R}}=N,M=Ke(),O=async({page:ee,per_page:ie,search:ue,doctor_id:G})=>{try{const le={dataType:"clinicList",page:ee,per_page:ie,search:ue};return G&&(le.doctor_id=G,le.exclude_with_sessions=!0),await M.fetchQuery({queryKey:ut.list(le),queryFn:()=>Et.getStaticData(le),staleTime:300*1e3})}catch(le){return console.error("Error loading clinics:",le),{data:[],pagination:{has_more:!1}}}},q=async({page:ee,per_page:ie,search:ue,clinic_ids:G})=>{try{const le={dataType:"staticData",staticDataType:"doctors",clinic_ids:G,page:ee,per_page:ie,search:ue};return G&&!s&&(le.exclude_with_sessions=!0),await M.fetchQuery({queryKey:ut.list(le),queryFn:()=>Et.getStaticData(le),staleTime:0})}catch(le){return console.error("Error loading doctors:",le),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},U=jr({control:E,name:"clinic"}),H=f.useMemo(()=>w||b?h:k?Array.isArray(U)&&U.length>0?U.map(ie=>ie.value):U&&U.value?U.value:null:h,[k,U,h,v]),{data:ae,isLoading:V}=HT(H),pe=f.useMemo(()=>ae?.data?ae.data:[],[ae?.data]);f.useEffect(()=>{if(c?.data&&_&&!s){const ee=c.data.display_name||"";L("doctor",{value:_,label:ee})}},[c,_,s,L]),f.useEffect(()=>{if(r&&s){const ee=r?.data,ie=n.map(ue=>{const G=ee.days?.find(re=>re.id===ue.id),le=!!G?.enabled;return le&&Array.isArray(G.breaks)&&G.breaks.length>0&&G.breaks,{id:ue.id,enabled:le,mainSession:le?{start:G.main_session?.start||"",end:G.main_session?.end||""}:{start:"",end:""},breaks:le?Array.isArray(G.breaks)?G.breaks:[]:[]}});N.reset({clinic:ee.clinicId?{value:ee.clinicId,label:ee.clinicName}:null,doctor:ee.doctorId?{value:ee.doctorId,label:ee.doctorName}:null,timeSlot:ee.time_slot||"00:30",days:ie})}},[r,s,N]);const oe=jr({control:E,name:"days"}),ne=f.useMemo(()=>oe?.every(ee=>ee.enabled)||!1,[oe]),se=f.useCallback(ee=>{const ie=C("days");L("days",ie.map(ue=>({...ue,enabled:ee,mainSession:ee?{start:"09:00",end:"18:00"}:{start:"",end:""}})))},[C,L]),W=f.useCallback(ee=>{const ie=ee.days.filter(re=>re.enabled);if(ie.length===0){Ee.error(l("Please select at least one day","kivicare-clinic-management-system"));return}for(const re of ie)if(!re.mainSession.start||!re.mainSession.end){Ee.error(l(`Please set session times for ${n.find(D=>D.id===re.id)?.label}`,"kivicare-clinic-management-system"));return}const ue=a?parseInt(a):y?g:ee?.doctor?.value,G=ee?.clinic?.value||h,le={doctor_id:ue,clinic_id:G,time_slot:ee?.timeSlot,days:ee.days.map(re=>({id:re.id,enabled:re.enabled,main_session:{start:re.mainSession.start,end:re.mainSession.end},breaks:re.breaks.map(D=>({start:D.start,end:D.end}))}))};t&&s?T.mutate({id:s,...le},{onSuccess:()=>{Ee.success(l("Doctor session updated successfully","kivicare-clinic-management-system")),u(`${m}/doctor-session`)},onError:re=>{Ee.error(re?.message||l("Failed to update session","kivicare-clinic-management-system"))}}):j.mutate(le,{onSuccess:()=>{Ee.success(l("Doctor session created successfully","kivicare-clinic-management-system")),a&&M.invalidateQueries({queryKey:ut.list({dataType:"clinicList",doctor_id:parseInt(a)})});const re=a?`/doctor/${a}/sessions`:`${m}/doctor-session`;u(re)},onError:re=>{console.log(re),Ee.error(re?.response?.data?.message||l("Failed to create session","kivicare-clinic-management-system"))}})},[y,g,h,j,T,t,s,m,u,a]),ge=f.useCallback(ee=>{const ie=Object.keys(ee);if(ie.length>0){const ue=ie[0];if(["clinic","doctor","timeSlot"].includes(ue)){const G=document.getElementById(ue);if(G){G.scrollIntoView({behavior:"smooth",block:"center"});return}}if(ue==="days"){const G=ee.days;for(const le in G){const re=G[le];if(re){if(re.mainSession){if(re.mainSession.start){document.getElementById(`days.${le}.mainSession.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(re.mainSession.end){document.getElementById(`days.${le}.mainSession.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}if(re.breaks)for(const D in re.breaks){const I=re.breaks[D];if(I){if(I.start){document.getElementById(`days.${le}.breaks.${D}.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(I.end){document.getElementById(`days.${le}.breaks.${D}.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}}}}}}},[]);return t&&o?i.jsx(Jp,{}):i.jsx(r_,{...N,children:i.jsxs("div",{className:"doctor-session-module",children:[i.jsx("h5",{className:"mb-4",children:t?l("Edit Doctor Sessions","kivicare-clinic-management-system"):l("Add Doctor Session","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:A(W,ge),className:"mb-0",children:[i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:i.jsx(sne,{control:E,errors:P,isProActive:k,isDoctorUser:y,isEditing:t,isReceptionistUser:b,isClinicAdminUser:w,loadClinicOptions:O,loadDoctorOptions:q,doctors:pe,loadingDoctors:V,doctorSessionData:r?.data,hideDoctorField:e,doctorId:a})})})})}),i.jsx(ane,{checked:ne,onChange:se}),i.jsx("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:oe?.map((ee,ie)=>i.jsx(lne,{day:n.find(ue=>ue.id===ee.id),dayIndex:ie,control:E,errors:P},ee.id))}),i.jsx(rne,{isValid:R,isEditing:t,onCancel:()=>u(`${m}/doctor-session`)})]})]})})}const sne=({control:t,errors:e,isProActive:n,isDoctorUser:s,isEditing:a,isReceptionistUser:r,isClinicAdminUser:o,loadClinicOptions:c,loadDoctorOptions:d,doctors:m,loadingDoctors:u,doctorSessionData:p,hideDoctorField:h=!1,doctorId:g})=>{const v=jr({control:t,name:"clinic"}),{setValue:x,clearErrors:y}=pg(),b=f.useMemo(()=>Array.isArray(v)?v.map(_=>_?.value).filter(Boolean):v?.value?v.value:null,[v]),w=f.useMemo(()=>Array.isArray(b)?b.length>0:!!b,[b]),k=f.useMemo(()=>Array.isArray(b)?`doctor-${b.join(",")||"none"}`:`doctor-${b||"none"}`,[b]);return i.jsxs(i.Fragment,{children:[n&&!r&&!o&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:t,rules:{required:l("Clinic selection is required","kivicare-clinic-management-system")},render:({field:_})=>i.jsx(Xt,{id:"clinic",loadOptions:c,value:_.value,onChange:j=>{_.onChange(j),!g&&!s&&!h&&(x("doctor",null,{shouldDirty:!0,shouldTouch:!1,shouldValidate:!1}),y("doctor"))},placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${e.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:g?{doctor_id:parseInt(g)}:{}})}),e.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:e.clinic.message})]})}),!s&&!h&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"doctor",control:t,rules:{required:l("Doctor selection is required","kivicare-clinic-management-system")},render:({field:_})=>i.jsx(Xt,{id:"doctor",loadOptions:d,value:_.value,onChange:j=>_.onChange(j),placeholder:w?l("Select Doctor","kivicare-clinic-management-system"):l("Select Clinic first","kivicare-clinic-management-system"),className:`react-select-box ${e.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!w,dependencies:{clinic_ids:b}},k)}),e.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:e.doctor.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Time Slot Duration","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"timeSlot",control:t,rules:{required:l("Time slot is required","kivicare-clinic-management-system"),validate:_=>!_||_==="00:00"?l("Time slot is required","kivicare-clinic-management-system"):!0},render:({field:_})=>i.jsx(Am,{name:_.name,control:t,rules:_.rules,placeholder:l("Select time slot","kivicare-clinic-management-system"),error:e.timeSlot,format:"m"})}),e.timeSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:e.timeSlot.message})]})})]})},ane=({checked:t,onChange:e})=>i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:t,onChange:n=>e(n.target.checked),id:"select-all-days"}),i.jsx("label",{htmlFor:"select-all-days",className:"form-label heading-color fw-semibold font-size-14 mb-0",children:l("Select All Days","kivicare-clinic-management-system")})]})}),rne=({isValid:t,isEditing:e,onCancel:n})=>i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-3",onClick:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:e?l("Update Sessions","kivicare-clinic-management-system"):l("Save Session","kivicare-clinic-management-system")})]}),lne=We.memo(({day:t,dayIndex:e,control:n,errors:s})=>{const a=jr({control:n,name:`days.${e}.enabled`,defaultValue:!1}),{fields:r,append:o,remove:c}=kr({control:n,name:`days.${e}.breaks`}),d=f.useCallback(()=>o({start:"",end:""}),[o]),{validateSessionStart:m,validateSessionEnd:u,validateBreakStart:p,validateBreakEnd:h}=ine(),g=jr({control:n,name:`days.${e}.mainSession.start`}),v=jr({control:n,name:`days.${e}.mainSession.end`}),x=f.useMemo(()=>{if(g&&v){const y=xn.timeToMinutes(v)-xn.timeToMinutes(g);return y>0?y:0}return 0},[g,v]);return i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap",children:[i.jsxs("div",{className:"form-check",children:[i.jsx(be,{name:`days.${e}.enabled`,control:n,render:({field:y})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:y.value,onChange:b=>{const w=b.target.checked;y.onChange(w)},id:`days.${e}.enabled`})}),i.jsx("label",{className:"form-label heading-color fw-semibold font-size-14 mb-0",htmlFor:`days.${e}.enabled`,children:t.label})]}),a?i.jsx("button",{type:"button",className:"btn btn-link fw-bold font-size-14 p-0",onClick:d,disabled:!g||!v,children:l("Add Break","kivicare-clinic-management-system")}):i.jsx("span",{className:"fw-bold font-size-14 text-muted",children:l("Not scheduled","kivicare-clinic-management-system")})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mt-3",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Session Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.start`,control:n,rules:{required:a&&l("Start time is required","kivicare-clinic-management-system"),validate:m(e)},placeholder:l("Start Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Session End","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.end`,control:n,rules:{required:a&&l("End time is required","kivicare-clinic-management-system"),validate:u(e)},placeholder:l("End Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.end})]})]}),g&&v&&x>0&&i.jsx("div",{className:"bg-info-subtle rounded py-2 px-3 my-3",children:i.jsxs("small",{children:[l("Session Duration:","kivicare-clinic-management-system")," ",Math.floor(x/60),"h ",x%60,"m",i.jsx("br",{}),l("Time:","kivicare-clinic-management-system")," ",xn.formatTime(g)," - ",xn.formatTime(v)]})}),(s?.days?.[e]?.mainSession?.start||s?.days?.[e]?.mainSession?.end)&&i.jsx("div",{className:"bg-danger-subtle rounded py-2 px-3",children:s.days[e].mainSession.start?.message||s.days[e].mainSession.end?.message}),r.map((y,b)=>i.jsx(one,{dayIndex:e,breakIndex:b,control:n,errors:s,onRemove:()=>c(b),validateStart:p(e,b),validateEnd:h(e,b)},y.id)),g&&v&&r.length===0&&i.jsx("div",{className:"text-center mt-3",children:i.jsx("small",{className:"text-muted",children:l('No breaks scheduled. Click "Add Break" to add a break time.',"kivicare-clinic-management-system")})})]})]})})})})}),one=We.memo(({dayIndex:t,breakIndex:e,control:n,errors:s,onRemove:a,validateStart:r,validateEnd:o})=>{const c=`days.${t}.breaks.${e}.start`,d=`days.${t}.breaks.${e}.end`,m=jr({control:n,name:c}),u=jr({control:n,name:d}),p=f.useMemo(()=>{if(m&&u){const h=xn.timeToMinutes(u)-xn.timeToMinutes(m);return h>0?h:0}return 0},[m,u]);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border rounded p-3 mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsxs("h6",{className:"mb-0",children:[l("Break","kivicare-clinic-management-system")," ",e+1]}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a,children:[i.jsx("i",{className:"ph ph-trash"})," ",l("Remove","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Break Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:c,control:n,rules:{required:l("Break start time is required","kivicare-clinic-management-system"),validate:r},placeholder:l("Break Start","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Break End","kivicare-clinic-management-system")}),i.jsx(Am,{name:d,control:n,rules:{required:l("Break end time is required","kivicare-clinic-management-system"),validate:o},placeholder:l("Break End","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.end})]})]}),m&&u&&p>0&&i.jsx("div",{className:"alert alert-light py-1 mb-0",children:i.jsxs("small",{children:[l("Break Duration:","kivicare-clinic-management-system")," ",p,"m (",xn.formatTime(m)," - ",xn.formatTime(u),")"]})}),(s?.days?.[t]?.breaks?.[e]?.start||s?.days?.[t]?.breaks?.[e]?.end)&&i.jsx("div",{className:"alert alert-danger py-2 mt-2 mb-0 text-white",children:i.jsx("small",{children:s.days[t].breaks[e].start?.message||s.days[t].breaks[e].end?.message})})]})})});function Tk({filterByDoctor:t=!1}){const{pathname:e}=Gn(),{doctorId:n}=Yt(),s=e.includes("setting")?"/setting":"",a=Fi(),[r,o]=f.useState([]),c=Ke(),d=Jn(),m=Vn(),[u,p]=f.useState({page:1,perPage:10,search:"",doctor_id:t&&n?parseInt(n):"",clinic_id:"",days:"",timeSlot:"",orderBy:"",order:""}),[h,g]=f.useState(""),[v,x]=f.useState(!1),[y,b]=f.useState(!1),w=f.useRef(null),{isAddonActive:k,hasCapability:_}=mt(),j=k?k("kiviPro"):!0,{data:T,isLoading:N,error:E}=Qte(u),{data:A,isLoading:L}=_k({perPage:100}),{data:C}=af(t&&n?parseInt(n):null),P=async({page:G,per_page:le,search:re})=>{try{const D={dataType:"clinicList",page:G,per_page:le,search:re},I=await c.fetchQuery({queryKey:ut.list(D),queryFn:()=>Et.getStaticData(D),staleTime:300*1e3}),ce=I.data.map(Z=>({value:Z.id,label:Z.label||Z.name}));return o(Z=>[...Z,...ce]),I}catch(D){return console.error("Error loading clinics:",D),{data:[],pagination:{has_more:!1}}}};f.useEffect(()=>{t&&n&&p(G=>({...G,doctor_id:parseInt(n)}))},[n,t]);const R=ene(),M=tne(),O=nne(),q=T?.data?.sessions||[],U=T?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},H=f.useMemo(()=>A?.data?.doctors?[...A.data.doctors.map(G=>({value:G.id,label:G.name}))]:[],[A?.data?.doctors]),ae=async G=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const le={format:G,...u},re=await O.mutateAsync(le);if(re?.data?.sessions){const D=re.data.sessions,I=new Date().toISOString().split("T")[0],ce=D.map(Z=>({id:Z.id,clinic_id:Z.clinic_id||"",clinic_name:Z.clinic_name||"",days:Z.days||"",doctor_id:Z.doctor_id||"",doctor_name:Z.doctor_name||"",time_slot:Z.time_slot||"",morning_session:Z.morning_session||"",evening_session:Z.evening_session||""}));switch(G){case"csv":gs(ce,`doctor-sessions-${I}.csv`);break;case"xls":fs(ce,`doctor-sessions-${I}.xls`);break;case"pdf":vs(ce,`doctor-sessions-${I}.pdf`,"Doctor Sessions List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(le){console.error("Export error:",le),Me({title:l("Error!","kivicare-clinic-management-system"),text:le.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},V=()=>ae("csv"),pe=()=>ae("xls"),[oe,ne]=f.useState(!1),se=()=>{oe||(ne(!0),ae("pdf"),setTimeout(()=>ne(!1),2e3))},W=On(),ge=f.useMemo(()=>[W.accessor("doctor",{id:"doctor",header:()=>l("Doctors","kivicare-clinic-management-system"),cell:G=>i.jsx(on,{profileUrl:G.row.original.doctor.doctor_image_url,name:G.row.original.doctor.name,email:G.row.original.doctor.email,variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system")})}),...j&&!d&&!m?[W.accessor("clinic",{id:"clinic",header:()=>l("Clinics","kivicare-clinic-management-system"),cell:G=>i.jsx(on,{profileUrl:G.row.original.clinic.clinic_image_url,name:G.row.original.clinic.name,email:G.row.original.clinic.email,variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")})})]:[],W.accessor("days",{id:"days",header:()=>l("Days","kivicare-clinic-management-system"),enableSorting:!1,cell:G=>i.jsx("div",{className:"d-flex flex-wrap gap-1",children:G.row.original.days.split(", ").map((le,re)=>i.jsx("span",{className:"badge bg-primary-subtle text-primary",children:le},re))})}),W.accessor("time_slot",{id:"time_slot",header:()=>l("Time Slot","kivicare-clinic-management-system"),cell:G=>{const le=G.row.original.time_slot;if(!le)return i.jsx("span",{children:""});const re=parseInt(le);if(re>=60){const D=Math.floor(re/60),I=re%60;return i.jsxs("span",{children:[D,"h ",I>0?`${I}min`:""]})}return i.jsxs("span",{children:[re," min"]})}}),..._("doctor_session_edit")||_("doctor_session_delete")?[W.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:G=>{const le=re=>D=>i.jsx(it,{id:`tooltip-${G.cell.row.original.id}-${re}`,...D,children:re});return i.jsxs("div",{className:"d-flex align-items-center gap-3 fs-5",children:[_("doctor_session_edit")&&i.jsx(Ue,{placement:"top",overlay:le(l("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`${s}/doctor-session/edit/${G.row.original.id}`,className:"text-success",children:i.jsx("i",{className:"ph text-bold ph-pencil-simple-line"})})}),_("doctor_session_delete")&&i.jsx(Ue,{placement:"top",overlay:le(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger p-0 fs-5",onClick:()=>ee(G.row.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[j,_]),ee=G=>{dt({title:l("Delete Sessions?","kivicare-clinic-management-system"),text:l("You're about to delete all sessions for this doctor.<br>This will remove all scheduled days and cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(le=>{le.isConfirmed&&(ft({title:l("Deleting Sessions...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),R.mutate(G.id,{onSuccess:re=>{tt({title:l("Sessions Deleted","kivicare-clinic-management-system"),text:re?.message||l("Sessions have been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to sessions","kivicare-clinic-management-system")}),G.doctor?.id&&c.invalidateQueries({queryKey:ut.list({dataType:"clinicList",doctor_id:G.doctor.id})})},onError:re=>{Me({text:l("Failed to delete sessions. Please try again.","kivicare-clinic-management-system")})}}))})},ie=f.useCallback(G=>{g(G.target.value),p(le=>({...le,search:G.target.value,page:1}))},[]),ue=G=>{if(G.length>0){const{id:le,desc:re}=G[0],D={doctor:"doctor_name",clinic:"clinic_name",time_slot:"time_slot"};p(I=>({...I,orderby:D[le]||le,order:re?"desc":"asc",page:1}))}else p(le=>({...le,orderby:"",order:"",page:1}))};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t&&C?.data?.display_name?`${C.data.display_name}'s Sessions`:l("Doctor Sessions","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t&&n&&i.jsxs(ht,{to:`/doctor/${n}/add-session`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Session","kivicare-clinic-management-system")})]}),!t&&_("doctor_session_add")&&i.jsxs(ht,{to:`${s}/doctor-session/add`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Session","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!y,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:w,children:i.jsxs("div",{ref:w,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[j&&!d&&!m&&i.jsx(Xt,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:P,value:r.find(G=>G.value===u.clinic_id)||null,onChange:G=>{p(le=>({...le,clinic_id:G?G.value:""}))},dependencies:{},isClearable:!0}),!a&&!t&&i.jsx(lt,{placeholder:l("Doctor Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:H,onChange:G=>p(le=>({...le,doctor_id:G?G.value:""})),isLoading:L,value:H.find(G=>G.value===u.doctor_id)||null,isClearable:!0,styles:{menuPortal:G=>({...G,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:h,onChange:ie})]})}),_("doctor_session_export")&&j&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:V,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:pe,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:se,disabled:O.isPending||oe,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:q,columns:ge,isLoading:N,error:E,currentPage:U.currentPage,perPage:U.perPage,totalItems:U.total,lastPage:U.lastPage,onPageChange:G=>p(le=>({...le,page:G})),onPerPageChange:G=>p(le=>({...le,perPage:G,page:1})),onSortingChange:ue,enableSelection:!0,moduleNamePlural:"doctor sessions",bulkActions:_("doctor_session_delete")?[{label:l("Delete","kivicare-clinic-management-system"),action:(G,le)=>{const re=G.map(D=>D.id);dt({title:l("Delete Sessions?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${G.length} sessions</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(D=>{D.isConfirmed&&(ft({title:l("Deleting Sessions...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),M.mutate(re,{onSuccess:I=>{tt({title:l("Sessions Deleted","kivicare-clinic-management-system"),text:l(`${G.length} session${G.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to sessions","kivicare-clinic-management-system")}),le()},onError:I=>{console.error("Bulk delete doctor sessions error:",I);const ce=I?.response?.data?.message||I?.message||l("Failed to delete selected doctor sessions. Please try again.","kivicare-clinic-management-system");Me({text:ce})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}]:[],isBulkActionShow:G=>{b(G)}})]})]})})}function Oy({isEditing:t=!1}){const{id:e,doctorId:n}=Yt(),s=mn(),[a,r]=f.useState([]),{isAddonActive:o,defaultClinicId:c,userRole:d,googleMeetIntegration:m,currencyPrefix:u,currencyPostfix:p}=mt(),{data:h}=af(n?parseInt(n):null),g=Fi(),v=Jn(),x=Vn(),y=Er(),b=o("kiviPro"),{data:w,isLoading:k,error:_}=K7(e,{enabled:t&&!!e}),j=w?.data,T=G7(),N=Y7(),[E,A]=f.useState(!1),[L,C]=f.useState(0),P=E||T.isPending||N.isPending||k,{data:R,isLoading:M}=Ua("service_type"),{data:O}=P7(),{data:q,isLoading:U}=Og({enabled:b}),H=Ke(),ae=async({page:ye,per_page:Te,search:et})=>{try{const kt={dataType:"clinicList",page:ye,per_page:Te,search:et},At=await H.fetchQuery({queryKey:ut.list(kt),queryFn:()=>Et.getStaticData(kt),staleTime:300*1e3}),qt=At.data.map(Ie=>({value:Ie.id,label:Ie.label||Ie.name}));return r(Ie=>[...Ie,...qt]),At}catch(kt){return console.error("Error loading clinics:",kt),{data:[],pagination:{has_more:!1}}}},V=async({page:ye,per_page:Te,search:et,clinic_ids:kt,telemed_service:At})=>{try{let qt=kt;(v||x)&&c&&(qt=c);const Ie={dataType:"staticData",staticDataType:"doctors",clinic_ids:qt,telemed_service:At,page:ye,per_page:Te,search:et};return await H.fetchQuery({queryKey:ut.list(Ie),queryFn:()=>Et.getStaticData(Ie),staleTime:0})}catch(qt){return console.error("Error loading doctors:",qt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},pe=async({page:ye,per_page:Te,search:et})=>{try{const kt={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:ye,per_page:Te,search:et};return await H.fetchQuery({queryKey:ut.list(kt),queryFn:()=>Et.getStaticData(kt),staleTime:0})}catch(kt){return console.error("Error loading doctors:",kt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},oe=Lg({specialty_type:"service_type"}),{register:ne,handleSubmit:se,control:W,setValue:ge,watch:ee,formState:{errors:ie},reset:ue}=Jt({defaultValues:{serviceImage:"",serviceImageId:"",category:null,name:"",charges:0,telemed_service:{value:"no",label:"No"},clinic:[],doctor:[],duration:0,status:null,allowMulti:null}}),G=ee("telemed_service");f.useEffect(()=>{if(h?.data&&n&&!t){const ye=h.data.clinics?.[0]?.id,Te=h.data.clinics?.[0]?.clinic_name,et=h.data.display_name||"";ge("doctor",[{value:parseInt(n),label:et}]),(x||v)&&c&&Te?ge("clinic",[{value:c,label:Te}]):ye&&Te&&ge("clinic",[{value:ye,label:Te}])}},[h,n,t,ge,x,v,c]);const le=jr({control:W,name:"clinic"}),re=f.useMemo(()=>x||v?c:b?Array.isArray(le)&&le.length>0?le.map(Te=>Te.value):le&&le.value?le.value:null:c,[b,le,c,x,v]),{data:D,isLoading:I}=HT(re),ce=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),Z=f.useMemo(()=>[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}],[]),K=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),B=ye=>ye==null?null:Z.find(Te=>Te.value===ye||Te.value===String(ye)||ye===1&&Te.value==="active"||ye===0&&Te.value==="inactive")||null,F=ye=>ye==null?null:ce.find(Te=>Te.value===ye||Te.value===String(ye))||null,J=ye=>ye==null?null:K.find(Te=>Te.value===ye||Te.value===String(ye))||null;f.useEffect(()=>{if(t&&j&&!k){j.service_image_url&&ge("serviceImage",j.service_image_url),j.service_image_id&&ge("serviceImageId",j.service_image_id),ge("category",j.service_category),ge("name",j.name||""),ge("charges",j.price||0);const ye=F(j.telemed_service);ge("telemed_service",ye),ge("clinic",j.clinics||[]),ge("doctor",j.doctors||[]),ge("duration",j.duration||0);const Te=B(j.status);ge("status",Te);const et=J(j.allow_multi);ge("allowMulti",et)}},[t,j,k,ge]);const Q=(ye,Te)=>{ge(ye,Te.url||Te.image),ge(`${ye}Id`,Te.id||Te.imageId)},me={category:{required:l("Service category is required","kivicare-clinic-management-system")},name:{required:l("Service name is required","kivicare-clinic-management-system"),minLength:{value:3,message:l("Service name must be at least 3 characters","kivicare-clinic-management-system")},maxLength:{value:100,message:l("Service name must be less than 100 characters","kivicare-clinic-management-system")}},charges:{required:l("Charges are required","kivicare-clinic-management-system"),min:{value:0,message:l("Charges must be a positive number","kivicare-clinic-management-system")},pattern:{value:/^\d+(\.\d{1,2})?$/,message:l("Invalid price format (e.g. 50 or 50.00)","kivicare-clinic-management-system")}},telemed_service:{required:l("Telemed service selection is required","kivicare-clinic-management-system")},clinic:{required:l("At least one clinic must be selected","kivicare-clinic-management-system"),validate:ye=>(Array.isArray(ye)?ye.length>0:!!ye)||l("At least one clinic must be selected","kivicare-clinic-management-system")},doctor:{required:l("At least one doctor must be selected","kivicare-clinic-management-system"),validate:ye=>(Array.isArray(ye)?ye.length>0:!!ye)||l("At least one doctor must be selected","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},allowMulti:{required:l("Multi-selection option is required","kivicare-clinic-management-system")}},te=async ye=>{A(!0);const Te=Ie=>Array.isArray(Ie)?Ie:Ie?[Ie]:[],et=Te(ye.clinic),kt=Te(ye.doctor),At=et.length?et:Te(O?.data),qt={profile_image:ye.serviceImageId,category:ye.category?.id,name:ye.name,price:ye.charges,telemed_service:ye.telemed_service?.value,clinics:At,doctors:kt,duration:ye.duration,status:ye.status?.value,allow_multi:ye.allowMulti?.value};try{let Ie;t?(Ie=await N.mutateAsync({id:e,...qt}),Ee.success(l("Service updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(Ie=await T.mutateAsync(qt),Ee.success(l("Service created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),s("/service",{replace:!0})}catch(Ie){const De=Ie?.response?.data?.message||(t?l("Failed to update service","kivicare-clinic-management-system"):l("Failed to create service","kivicare-clinic-management-system"));Ee.error(De,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{A(!1)}},Y=ye=>{console.log("Validation errors:",ye);const Te=Object.keys(ye)[0],et=document.getElementById(Te);et&&(et.scrollIntoView({behavior:"smooth",block:"center"}),et.focus())},Ce=()=>{s("/service")};return f.useEffect(()=>{if(_){const ye=_?.response?.data?.message||l("You do not have permission to view this service.","kivicare-clinic-management-system");Ee.error(ye,{position:"top-right",autoClose:5e3}),s("/service",{replace:!0})}},[_,s]),t&&k?i.jsx(eg,{}):i.jsx("div",{className:"position-relative",children:(!t||t&&j)&&i.jsxs("form",{onSubmit:se(te,Y),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex justify-content-center pt-5",children:i.jsx(be,{name:"serviceImage",control:W,render:({field:ye})=>i.jsx(wl,{id:"service-image-upload",name:"serviceImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:ye.value,defaultImageId:ee("serviceImageId"),onChange:Te=>Q("serviceImage",Te),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service Category","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"category",control:W,rules:me.category,render:({field:ye})=>i.jsxs(i.Fragment,{children:[i.jsx(Xt,{id:"category",loadOptions:pe,value:ye.value,onChange:Te=>{ye.onChange(Te)},onCreateOption:Te=>{oe.mutate(Te,{onSuccess:et=>{if(et?.data?.data){const kt={id:et.data.data.id,label:et.data.data.label};H.setQueryData(["staticData","service_type"],At=>({...At,data:[...At?.data||[],kt]})),ye.onChange(kt),C(At=>At+1)}Ee.success(l("category added successfully","kivicare-clinic-management-system"))},onError:et=>{console.error("Failed to save category:",et),console.error("Error details:",et.response?.data),Ee.error(l("Failed to save category to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Te=>Te.id,placeholder:l("Select or create categories","kivicare-clinic-management-system"),isLoading:M,isSearchable:!0,isMulti:!1,closeMenuOnSelect:!0,className:`react-select ${ie.category?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t,noOptionsMessage:()=>l("Type to create a new category","kivicare-clinic-management-system"),formatCreateLabel:Te=>l("Add category","kivicare-clinic-management-system")+`: "${Te}"`,isCreatable:!0},L),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new Category","kivicare-clinic-management-system")]})]})}),ie.category&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.category.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"name",className:`form-control ${ie.name?"is-invalid":""}`,placeholder:l("Enter the Service Name","kivicare-clinic-management-system"),...ne("name",me.name),disabled:t&&k}),ie.name&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.name.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Charges","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[u&&i.jsx("span",{className:"input-group-text",children:u}),i.jsx("input",{type:"number",id:"charges",step:"0.01",min:"0",className:`form-control ${ie.charges?"is-invalid":""}`,placeholder:l("Enter Charges","kivicare-clinic-management-system"),...ne("charges",me.charges),disabled:t&&k}),p&&i.jsx("span",{className:"input-group-text",children:p})]}),ie.charges&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.charges.message})]})}),(o("googlemeet")||o("telemed"))&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Telemed Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"telemed_service",control:W,rules:me.telemed_service,render:({field:ye})=>i.jsx(lt,{...ye,onChange:Te=>{ye.onChange(Te),ge("doctor",[])},id:"telemed_service",options:ce,placeholder:l("Select Telemed Service","kivicare-clinic-management-system"),className:`react-select ${ie.telemed_service?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&k,styles:{menuPortal:Te=>({...Te,zIndex:9999})}})}),ie.telemed_service&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.telemed_service.message})]})}),b&&y&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(be,{name:"clinic",control:W,rules:me.clinic,render:({field:ye})=>{const Te=a??q?.data??[],[et,kt]=f.useState(!1),At=Array.isArray(ye.value)&&ye.value.length>0&&ye.value.length===Te.length,qt=async Ie=>{if(Ie.target.checked){kt(!0);try{const ke=((await ae({page:-1,per_page:1,search:""}))?.data||[]).map(Oe=>({value:Oe.id,label:Oe.label||Oe.name}));r(ke),ye.onChange(ke)}catch(xe){console.error("Error selecting all clinics:",xe)}finally{kt(!1)}}else ye.onChange([])};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[l("Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllClinics",className:"form-check-input",checked:At,onChange:qt,disabled:et}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllClinics",children:et?l("Loading...","kivicare-clinic-management-system"):l("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(Xt,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isMulti:!t,loadOptions:ae,value:ye.value,onChange:Ie=>{ye.onChange(Ie),ge("doctor",null)}}),ie.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.clinic.message})]})}})})}),!g&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(be,{name:"doctor",control:W,rules:me.doctor,render:({field:ye})=>{const Te=Array.isArray(ee("clinic"))?ee("clinic").map(xe=>xe.value):ee("clinic")?.value,[et,kt]=f.useState(!1),[At,qt]=f.useState(0),Ie=Array.isArray(ye.value)&&ye.value.length>0&&At>0&&ye.value.length===At,De=async xe=>{if(xe.target.checked){kt(!0);try{const Qe=((await V({page:-1,per_page:1,search:"",clinic_ids:Te}))?.data||[]).map(ct=>({value:ct.id,label:ct.label||ct.name}));qt(Qe.length),ye.onChange(Qe)}catch(Oe){console.error("Error selecting all doctors:",Oe)}finally{kt(!1)}}else ye.onChange([])};return f.useEffect(()=>{Te&&V({page:-1,per_page:1,search:"",clinic_ids:Te}).then(xe=>{qt(xe?.data?.length||0)})},[Te]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[l("Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllDoctors",className:"form-check-input",checked:Ie,onChange:De,disabled:et||!Te}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllDoctors",children:et?l("Loading...","kivicare-clinic-management-system"):l("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(Xt,{id:"doctor",loadOptions:V,value:ye.value,onChange:xe=>ye.onChange(xe),placeholder:Te?l("Select doctor","kivicare-clinic-management-system"):l("Select a clinic first","kivicare-clinic-management-system"),className:`react-select-box ${ie.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isMulti:!t,isDisabled:!Te||t&&k,dependencies:{clinic_ids:Te,telemed_service:G?.value}},`doctor-${Te}-${G?.value}`),ie.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.doctor.message})]})}})})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[b&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Duration","kivicare-clinic-management-system")}),i.jsx(be,{name:"duration",control:W,rules:me.duration,render:({field:ye})=>{let Te=ye.value;if(typeof Te=="number"&&!isNaN(Te)){const et=Math.floor(Te/60).toString().padStart(2,"0"),kt=(Te%60).toString().padStart(2,"0");Te=`${et}:${kt}`}else Te instanceof Date&&(Te=`${Te.getHours().toString().padStart(2,"0")}:${Te.getMinutes().toString().padStart(2,"0")}`);return i.jsx(Wn,{value:Te,onChange:et=>{if(et&&et.length>0){const kt=et[0],At=kt.getHours()*60+kt.getMinutes();ye.onChange(At)}else ye.onChange(null)},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:0,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Kn()},className:`form-control d-none  ${ie.duration?"is-invalid":""}`,placeholder:l("MM:SS","kivicare-clinic-management-system")})}}),ie.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.duration.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:W,rules:me.status,render:({field:ye})=>i.jsx(lt,{...ye,id:"status",options:Z,placeholder:l("Select Status","kivicare-clinic-management-system"),className:`react-select ${ie.status?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",styles:{menuPortal:Te=>({...Te,zIndex:9999})}})}),ie.status&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Allow multi selection while booking?","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"allowMulti",control:W,rules:me.allowMulti,render:({field:ye})=>i.jsx(lt,{...ye,id:"allowMulti",options:K,placeholder:l("Allow multi selection?","kivicare-clinic-management-system"),className:`react-select ${ie.allowMulti?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&k,styles:{menuPortal:Te=>({...Te,zIndex:9999})}})}),ie.allowMulti&&i.jsx("div",{className:"invalid-feedback d-block",children:ie.allowMulti.message})]})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ce,disabled:P||t&&k,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P||t&&k,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Service","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})})}const cne=[Yn({path:"/doctor",title:"Doctors",outlet:Pte,permissions:["doctor_list"],meta:{description:"Doctor management system",icon:"stethoscope",showInSidebar:!0},children:[Ye({path:"",component:Lte,title:"All Doctors",index:!0,permissions:["doctor_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all doctors",breadcrumb:"All Doctors"}}),Ye({path:"add",component:Iy,title:"Add Doctor",props:{isEditing:!1},permissions:["doctor_add"],skeleton:My,meta:{description:"Create a new doctor",breadcrumb:"Add Doctor"}}),Ye({path:"edit/:id",component:Iy,title:"Edit Doctor",props:{isEditing:!0},permissions:["doctor_edit"],meta:{description:"Edit existing doctor",breadcrumb:"Edit Doctor"},skeleton:My}),Ye({path:":doctorId/sessions",component:Tk,title:"Doctor Sessions",props:{filterByDoctor:!0},permissions:["doctor_session_list"],meta:{description:"View all sessions for this doctor",breadcrumb:t=>t.doctorId?`Doctor #${t.doctorId} Sessions`:"Doctor Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:":doctorId/add-session",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create",hideDoctorField:!0},permissions:["doctor_session_add"],meta:{description:"Add a new doctor session for specific doctor",breadcrumb:"Add Session"},skeleton:Jp}),Ye({path:":doctorId/add-service",component:Oy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],meta:{description:"Add a new service for specific doctor",breadcrumb:"Add Service"},skeleton:eg})]})],dne=()=>{const t=Gn();return t.pathname==="/tax/add"||t.pathname.startsWith("/tax/edit/"),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/tax"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Ly=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(Nl,{titleWidth:"80px"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"55px"}),i.jsx(S,{width:"200px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(S,{width:"220px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(S,{width:"230px",height:"0.8rem",className:"mt-2"})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"55px"})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})})}),Ir={createTax:t=>ve({endpoint:"taxes",method:"POST",data:t}),updateTax:(t,e)=>ve({endpoint:`taxes/${t}`,method:"PUT",data:e}),getTaxById:t=>ve({endpoint:`taxes/${t}`,method:"GET"}),getTaxes:t=>ve({endpoint:"taxes",method:"GET",data:t}),deleteTax:t=>ve({endpoint:`taxes/${t}`,method:"DELETE"}),bulkUpdateTaxStatus:(t,e)=>ve({endpoint:"taxes/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeleteTaxes:t=>ve({endpoint:"taxes/bulk/delete",method:"POST",data:{ids:t}}),updateTaxStatus:(t,e)=>ve({endpoint:`taxes/${t}/status`,method:"PUT",data:{status:e}}),exportTaxes:(t={})=>ve({endpoint:"taxes/export",method:"GET",data:t})},mne=()=>{const t=Ke();return He({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Ir.updateTax(e,n):Ir.createTax(n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},mP=(t={},e={})=>gt({queryKey:["taxes",t],queryFn:()=>Ir.getTaxes(t),...e}),une=()=>{const t=Ke();return He({mutationFn:e=>Ir.bulkDeleteTaxes(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},hne=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>Ir.bulkUpdateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},pne=(t,e={})=>gt({queryKey:["tax",t],queryFn:()=>Ir.getTaxById(t),enabled:!!t,...e}),gne=()=>{const t=Ke();return He({mutationFn:e=>Ir.deleteTax(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},fne=()=>{const t=Ke();return He({mutationFn:({id:e,status:n})=>Ir.updateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},vne=()=>He({mutationFn:t=>Ir.exportTaxes(t)}),xne=()=>{const{isAddonActive:t,getCurrencyDetail:e,hasCapability:n}=mt(),a=e().prefix,r=t("kiviPro"),[o,c]=f.useState(!1),[d,m]=f.useState(!1),u=f.useRef(null),[p,h]=f.useState({}),g=Jn(),v=Vn(),x=Ke(),y=async({page:se,per_page:W,search:ge,clinic_ids:ee})=>{try{const ie={dataType:"staticData",staticDataType:"users",role:mc(),page:se,per_page:W,search:ge||""},ue=ee&&typeof ee=="object"?ee.value:ee,G=String(ue||"").split(",").filter(re=>re&&re!=="undefined"&&re!=="null").join(",");return G&&(ie.clinic_ids=G),(await x.fetchQuery({queryKey:ut.list(ie),queryFn:()=>Et.getStaticData(ie),staleTime:300*1e3})).data.map(re=>({value:re.id||re.ID,label:re.label||re.display_name}))}catch(ie){return console.error("Error loading doctors:",ie),{options:[],hasMore:!1}}},b=async({page:se,per_page:W,search:ge,clinic_id:ee,doctor_ids:ie})=>{try{const ue={dataType:"staticData",staticDataType:"servicesWithPrice",page:se,per_page:W,search:ge||""},G=ee&&typeof ee=="object"?ee.value:ee,le=ie&&typeof ie=="object"?ie.value:ie,re=Number(G);!isNaN(re)&&re>0&&(ue.clinic_id=re);const D=String(le||"").split(",").filter(ce=>ce&&ce!=="undefined"&&ce!=="null").join(",");return D&&(ue.doctor_ids=D),(await x.fetchQuery({queryKey:ut.list(ue),queryFn:()=>Et.getStaticData(ue),staleTime:300*1e3})).data.map(ce=>({value:ce.id,label:ce.label}))}catch(ue){return console.error("Error loading services:",ue),{options:[],hasMore:!1}}},w=gne(),k=une(),_=hne(),j=fne(),T=vne(),{data:N,isLoading:E}=mP(p,{enabled:r}),A=Array.isArray(N?.data?.taxes)?N.data.taxes:[],L=N?.data?.page||1,C=N?.data?.per_page||10,P=N?.data?.total||0,R=N?.data?.total_pages||1,{data:M}=Og(),{data:O}=qT(),{data:q}=M7({clinicId:p.clinic&&typeof p.clinic=="object"?p.clinic.value:p.clinic||null,doctorId:p.doctor&&typeof p.doctor=="object"?p.doctor.value:p.doctor||null}),U=Array.isArray(M?.data)?M.data:[];Array.isArray(O?.data)&&O.data,Array.isArray(q?.data)&&q.data;const H=f.useMemo(()=>Object.fromEntries(Object.entries(p).map(([se,W])=>{const ge=W&&typeof W=="object"&&"value"in W?W.value:W;return[se,ge]}).filter(([se,W])=>W!==""&&W!==null&&W!==void 0)),[p]),ae=se=>{if(se.length>0){const{id:W,desc:ge}=se[0],ee={id:"id",taxName:"taxName",taxRate:"taxRate",clinicName:"clinicName",doctorName:"doctorName",serviceName:"serviceName",status:"status"};h(ie=>({...ie,orderby:ee[W]||W,order:ge?"desc":"asc",page:1}))}else h(W=>({...W,orderby:"",order:"",page:1}))},V=async se=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const W={format:se,...H},ee=(await T.mutateAsync(W))?.data?.taxes||[];if(!ee.length){dt({icon:"ph-info",title:l("No data","kivicare-clinic-management-system"),text:l("No tax records found for export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const ie=new Date().toISOString().split("T")[0],ue=ee.map(G=>({id:G.id,tax_name:G.tax_name,tax_rate:G.tax_rate,clinic_name:G.clinic_name,doctor_name:G.doctor_name,service_name:G.service_name,status:G.status}));switch(se){case"csv":gs(ue,`taxes-${ie}.csv`);break;case"xls":fs(ue,`taxes-${ie}.xls`);break;case"pdf":vs(ue,`taxes-${ie}.pdf`,"Tax Records");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(W){console.error("Export error:",W),Me({title:l("Error!","kivicare-clinic-management-system"),text:W.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},pe=A.map(se=>({id:se.id,taxName:se.name,taxRate:se.taxType==="fixed"?a+`${se.taxValue}`:`${se.taxValue}%`,clinicName:se.clinicName,clinic_image_url:se.clinic_image_url,clinicEmail:se.clinicEmail,doctorName:se.doctorName,doctor_image_url:se.doctor_image_url,doctorEmail:se.doctorEmail,serviceName:se.serviceName,service_image_url:se.service_image_url,status:se.status})),oe=r?[{label:l("Delete","kivicare-clinic-management-system"),action:(se,W)=>{const ge=se.map(ee=>ee.id);dt({title:l("Delete Taxes?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${se.length} taxes</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep taxes","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ee=>{ee.isConfirmed&&(ft({title:l("Deleting Taxes...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected taxes.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(ge,{onSuccess:()=>{tt({title:l("Tax Deleted","kivicare-clinic-management-system"),text:l(`${se.length} tax${se.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to taxes","kivicare-clinic-management-system")}).then(()=>{W()})},onError:ie=>{Me({title:l("Error","kivicare-clinic-management-system"),text:ie?.response?.data?.message||ie?.message||l("Failed to delete selected taxes.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(se,W)=>{const ge=se.map(ee=>ee.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Taxes to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(ee=>{ee.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),_.mutate({ids:ge,status:"1"},{onSuccess:ie=>{tt({title:l("Success","kivicare-clinic-management-system"),text:ie?.message||l("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{W()})},onError:ie=>{const ue=ie?.response?.data?.message||ie?.message||l("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:ue,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(se,W)=>{const ge=se.map(ee=>ee.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Taxes to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ee=>{ee.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),_.mutate({ids:ge,status:"0"},{onSuccess:ie=>{tt({title:l("Success","kivicare-clinic-management-system"),text:ie?.message||l("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{W()})},onError:ie=>{console.error("Bulk update status error:",ie);const ue=ie?.response?.data?.message||ie?.message||l("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:ue,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}]:[],ne=f.useMemo(()=>[{accessorKey:"id",header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:se=>se.getValue()},{accessorKey:"taxName",header:()=>l("Tax Name","kivicare-clinic-management-system"),enableSorting:!0,cell:se=>se.getValue()},{accessorKey:"taxRate",header:()=>l("Tax Rate","kivicare-clinic-management-system"),enableSorting:!0,cell:se=>se.getValue()},...!g&&!v?[{accessorKey:"clinicName",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:se})=>i.jsx(i.Fragment,{children:se.original.clinicName?i.jsx(on,{profileUrl:se.original.clinic_image_url,name:se.original.clinicName,email:se.original.clinicEmail}):i.jsx("span",{className:"",children:l("All Clinic","kivicare-clinic-management-system")})})}]:[],{accessorKey:"doctorName",header:()=>l("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:se})=>i.jsx(i.Fragment,{children:se.original.doctorName?i.jsx(on,{profileUrl:se.original.doctor_image_url,name:se.original.doctorName,email:se.original.doctorEmail}):i.jsx("span",{className:"",children:l("All Doctor","kivicare-clinic-management-system")})})},{accessorKey:"serviceName",header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:se})=>i.jsx(i.Fragment,{children:se.original.serviceName?i.jsx(on,{profileUrl:se.original.service_image_url,name:se.original.serviceName}):i.jsx("span",{className:"",children:l("All Service","kivicare-clinic-management-system")})})},{accessorKey:"status",header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:se=>{const W=se.row.original,ge=Number(W.status),ee=async ie=>{const ue=ie.target.checked?1:0,{isConfirmed:G}=await dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update status?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"});if(!G){ie.target.checked=ge===1;return}ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),j.mutate({id:W.id,status:ue},{onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Status updated successfully.","kivicare-clinic-management-system")})},onError:le=>{ie.target.checked=ge===1,Me({title:l("Error","kivicare-clinic-management-system"),text:le?.response?.data?.message||le?.message||l("Failed to update status.","kivicare-clinic-management-system")})}})};return n("tax_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`tax-status-${W.id}`,checked:ge===1,onChange:ee})}):i.jsx("span",{className:`badge ${ge===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:ge===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}},...n("tax_edit")||n("tax_view")||n("tax_delete")?[{id:"action",header:()=>l("Action","kivicare-clinic-management-system"),cell:se=>{const W=se.row.original,ge=ee=>ie=>i.jsx(it,{id:`tooltip-${se.cell.row.original.id}-${ee}`,...ie,children:ee});return i.jsx("div",{className:"d-flex align-items-center gap-3",children:r?i.jsxs(i.Fragment,{children:[n("tax_edit")&&i.jsx(Ue,{placement:"top",overlay:ge(l("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/tax/edit/${W.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),n("tax_delete")&&i.jsx(Ue,{placement:"top",overlay:ge(l("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async ee=>{ee.preventDefault();const{isConfirmed:ie}=await dt({title:l("Delete Tax?","kivicare-clinic-management-system"),text:l("You're about to delete this tax.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep tax","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"});ie&&(ft({title:l("Deleting Tax...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected tax.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(W.id,{onSuccess:()=>{tt({title:l("Tax Deleted","kivicare-clinic-management-system"),text:l("Tax has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to taxes","kivicare-clinic-management-system")})},onError:ue=>{Me({title:l("Error","kivicare-clinic-management-system"),text:ue?.response?.data?.message||ue?.message||l("Failed to delete tax.","kivicare-clinic-management-system")})}}))},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]}):i.jsx("span",{className:"text-muted",children:l("Pro Only","kivicare-clinic-management-system")})})}}]:[]],[n,g,v]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsx("h5",{children:l("Tax List","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[n("tax_add")&&i.jsxs(ht,{to:r?"/tax/add":"#",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-plus-circle"})," ",l("Add Tax","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[i.jsx("i",{className:"ph ph-funnel"})," ",l("Filter","kivicare-clinic-management-system")]})]})]}),n("tax_export")&&r&&i.jsx("div",{className:"kc-table-wrapper",children:i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsx("div",{ref:u,className:"d-flex justify-content-end mb-4 position-absolute top-0 w-100",children:i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>V("csv"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>V("xls"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>V("pdf"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})})})}),i.jsx(bn,{data:pe,columns:ne,moduleNamePlural:"taxes",currentPage:L,perPage:C,totalItems:P,lastPage:R,isLoading:E,bulkActions:oe,onPageChange:se=>h(W=>({...W,page:se})),onPerPageChange:se=>h(W=>({...W,perPage:se,page:1})),onSortingChange:ae,manualSorting:!0,isBulkActionShow:se=>{m(se)}}),i.jsx(na,{show:o,onHide:()=>c(!1),queryParams:p,hasAppliedFilters:Object.keys(H).length>0,onApplyFilters:se=>{h({...se,page:1}),c(!1)},onResetFilters:()=>{h({}),c(!1)},title:l("Filters","kivicare-clinic-management-system"),fields:[{name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),type:"select",options:U},{name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:y,dependencies:{clinic_ids:"clinic"},isSearchable:!0,storeObject:!0},{name:"service",label:l("Service","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:b,dependencies:{clinic_id:"clinic",doctor_ids:"doctor"},isSearchable:!0,storeObject:!0},{name:"taxName",label:l("Tax Name","kivicare-clinic-management-system"),type:"text",placeholder:l("Enter Tax Name","kivicare-clinic-management-system")},{name:"status",label:l("Status","kivicare-clinic-management-system"),type:"select",options:[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}]}]}),!r&&i.jsx(ci,{text:l("Taxes management is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},yne=({values:t,errors:e,onChange:n,onValidate:s,onCancel:a,isLoading:r,error:o,success:c,isEditing:d=!1})=>{const{getCurrencyDetail:m,userRole:u,defaultClinicId:p}=mt(),g=m().prefix,v=Vn(u);f.useEffect(()=>{v&&p&&!t.clinic&&n({...t,clinic:p})},[v,p]);const x=[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}],y=[{value:"fixed",label:g},{value:"percentage",label:"%"}],{data:b,isLoading:w}=Og(),_=(Array.isArray(b)?b:Array.isArray(b?.data)?b.data:[]).map(P=>({value:P.id,label:P.label||P.name})),j=Ke(),T=async({page:P,per_page:R,search:M})=>{try{const O={dataType:"clinicList",page:P,per_page:R,search:M};return await j.fetchQuery({queryKey:ut.list(O),queryFn:()=>Et.getStaticData(O),staleTime:3e5})}catch{return{data:[],pagination:{has_more:!1}}}},N=async({page:P,per_page:R,search:M,clinic_ids:O})=>{try{const q={dataType:"staticData",staticDataType:"doctors",page:P,per_page:R,search:M},U=O&&O.length>0?O:t.clinic?[t.clinic]:[];return U.length>0&&(q.clinic_ids=U),await j.fetchQuery({queryKey:ut.list(q),queryFn:()=>Et.getStaticData(q),staleTime:0})}catch{return{data:[],pagination:{has_more:!1}}}},E=async({page:P,per_page:R,search:M,clinic_ids:O,doctor_ids:q})=>{try{const U={dataType:"staticData",staticDataType:"servicesWithPrice",page:P,per_page:R,search:M},H=O&&O.length>0?O:t.clinic?[t.clinic]:[];H.length>0&&(U.clinic_ids=H),q&&q.length>0&&(U.doctor_ids=Array.isArray(q)?q.join(","):q);const ae=await j.fetchQuery({queryKey:ut.list(U),queryFn:()=>Et.getStaticData(U),staleTime:0});return ae.data=ae.data.map(V=>({...V,id:V.service_id})),ae}catch{return{data:[],pagination:{has_more:!1}}}},A=_.find(P=>String(P.value)===String(t.clinic))||null,L=y.find(P=>P.value===t.rateType?.value)||y[0],C=x.find(P=>String(P.value)===String(t.status?.value||t.status))||x[0];return i.jsxs("div",{className:"add-tax-form",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${e.name?" is-invalid":""}`,placeholder:l("Enter Tax Name","kivicare-clinic-management-system"),value:t.name,onChange:P=>n({...t,name:P.target.value}),required:!0}),e.name&&i.jsx("div",{className:"invalid-feedback",children:e.name})]})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Tax Rate","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(lt,{options:y,value:L,onChange:P=>n({...t,rateType:P}),isDisabled:!1,styles:{container:P=>({...P,minWidth:80,width:80}),menuPortal:P=>({...P,zIndex:9999})},className:"react-select-box",classNamePrefix:"react-select"}),i.jsx("input",{type:"text",className:`form-control${e.rateValue?" is-invalid":""}`,placeholder:l("Enter Tax Rate","kivicare-clinic-management-system"),value:t.rateValue,onChange:P=>{let R=P.target.value;R=R.replace(/[^0-9.]/g,"");const M=R.split(".");M.length>2&&(R=M[0]+"."+M.slice(1).join("")),n({...t,rateValue:R})},onInput:P=>{let R=P.target.value;R=R.replace(/[^0-9.]/g,"");const M=R.split(".");M.length>2&&(R=M[0]+"."+M.slice(1).join("")),P.target.value=R},required:!0})]}),e.rateValue&&i.jsx("div",{className:"invalid-feedback d-block",children:e.rateValue})]})}),!v&&i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Clinic","kivicare-clinic-management-system")}),i.jsx(Xt,{id:"clinic",loadOptions:T,value:A,onChange:P=>n({...t,clinic:P?P.value:null,doctor:null}),placeholder:l("Select clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isClearable:!0})]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("To apply tax to all clinics, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Doctor","kivicare-clinic-management-system")}),i.jsx(Xt,{id:"doctor",loadOptions:N,value:t.doctor,onChange:P=>n({...t,doctor:P,service:null}),placeholder:l("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[]},isClearable:!0,isMulti:!d},`doctor-${t.clinic||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",t.clinic?l("To apply tax to all doctors in the selected clinic, please leave the selection blank.","kivicare-clinic-management-system"):l("To apply tax to all doctors, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Service","kivicare-clinic-management-system")}),i.jsx(Xt,{id:"service",loadOptions:E,value:t.service,onChange:P=>n({...t,service:P}),placeholder:l("Select Service","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[],doctor_ids:Array.isArray(t.doctor)?t.doctor.map(P=>P?.value):t.doctor?.value?[t.doctor.value]:[]},isClearable:!0,isMulti:!d},`service-${t.clinic||"none"}-${Array.isArray(t.doctor)?t.doctor.map(P=>P?.value).join(","):t.doctor?.value||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",t.clinic?l("To apply tax to all services in the selected clinic, please leave the selection blank.","kivicare-clinic-management-system"):l("To apply tax to all services, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(lt,{className:"react-select-box",classNamePrefix:"react-select",options:x,value:C,onChange:P=>n({...t,status:P}),isClearable:!1,styles:{menuPortal:P=>({...P,zIndex:9999})},placeholder:l("Status","kivicare-clinic-management-system"),required:!0}),e.status&&i.jsx("div",{className:"invalid-feedback",children:e.status})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary d-flex align-items-center",onClick:a,disabled:r,children:i.jsx("span",{children:l("Cancel","kivicare-clinic-management-system")})}),i.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center",onClick:s,disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),i.jsx("span",{children:l("Saving...","kivicare-clinic-management-system")})]}):i.jsx("span",{children:l("Save","kivicare-clinic-management-system")})})]})]})},bC=({isEditing:t=!1,editId:e,onSuccess:n,onCancel:s,...a})=>{const{getCurrencyDetail:r,userRole:o,defaultClinicId:c}=mt(),m=r().prefix,u=Vn(o),p=[{value:"1",label:"Active"},{value:"0",label:"Inactive"}],h=[{value:"fixed",label:m},{value:"percentage",label:"%"}],g={name:"",rateType:h[0],rateValue:"",clinic:u&&c&&!t?c:null,doctor:null,service:null,status:p[0]},{id:v}=Yt(),[x,y]=f.useState(g),[b,w]=f.useState({}),[k,_]=f.useState(!1),j=mne(),T=mn(),{data:N,isLoading:E}=pne(t?v:null),{data:A}=mP({per_page:9999},{enabled:t}),L=Array.isArray(A?.data?.taxes)?A.data.taxes:[],C=s?()=>s(T):()=>T("/tax"),P=async(O,q)=>{if(!O)return null;try{const H=(await Et.getStaticData({dataType:"staticData",staticDataType:q,page:1,per_page:100,search:""}))?.data||[],ae=String(O),V=H.find(pe=>String(pe.id)===ae||String(pe.value)===ae);if(V)return[{value:String(V.id||V.value),label:V.label||V.name||String(V.id||V.value)}]}catch(U){console.error(`Error fetching ${q} data:`,U)}return null};f.useEffect(()=>{t&&N&&(async()=>{const[q,U]=await Promise.all([P(N.data.doctor_id,"doctors"),P(N.data.service_id,"servicesWithPrice")]);y({name:N.data.name||"",rateType:h.find(H=>H.value===N.data.taxType)||h[0],rateValue:N.data.taxValue||"",clinic:N.data.clinic_id||(u&&c?c:""),doctor:q,service:N.data.service,status:p.find(H=>String(H.value)===String(N.data.status))||p[0]})})()},[t,N,u,c]);const R=()=>{const O={},q=x.name?.trim(),U=x.rateValue?.trim(),H=x.clinic,ae=x.rateType?.value;return q||(O.name=l("Tax Name is required","kivicare-clinic-management-system")),U?isNaN(U)?O.rateValue=l("Tax Rate must be a number","kivicare-clinic-management-system"):parseFloat(U)<0?O.rateValue=l("Tax Rate cannot be negative","kivicare-clinic-management-system"):x.rateType?.value==="percentage"&&parseFloat(U)>100&&(O.rateValue=l("Percentage cannot be greater than 100","kivicare-clinic-management-system")):O.rateValue=l("Tax Rate is required","kivicare-clinic-management-system"),t&&L.length>0&&L.find(pe=>{if(String(pe.id)===String(v))return!1;const oe=String(pe.name||"").trim().toLowerCase()===q?.toLowerCase(),ne=String(pe.taxType||"").trim().toLowerCase()===ae?.toLowerCase(),se=String(pe.taxValue||pe.rateValue||"").trim()===U,W=String(pe.clinicId||"")===String(H||"");return oe&&ne&&se&&W})&&(O.name=l("Same tax name already exists","kivicare-clinic-management-system"),O.rateValue=l("Same tax rate or type already exists","kivicare-clinic-management-system"),O.clinic=l("Same clinic tax already exists","kivicare-clinic-management-system")),x.status||(O.status=l("Status is required","kivicare-clinic-management-system")),w(O),Object.keys(O).length===0},M=()=>{R()&&(_(!0),j.mutate({id:t?v:void 0,data:{name:x.name,rateType:x.rateType.value,rateValue:x.rateValue,clinic:x.clinic||null,doctor:x.doctor||null,service:x.service||null,status:x.status?.value||null},isEdit:t},{onSuccess:O=>{Ee.success(O?.message||l("Tax saved successfully!","kivicare-clinic-management-system"),{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{T("/tax")},1600)},onError:O=>{const q=O?.response?.data?.message||O?.message||l("Something went wrong!","kivicare-clinic-management-system");Ee.error(q),_(!1)}}))};return t&&E?i.jsx(Ly,{}):i.jsx(yne,{values:x,errors:b,onChange:y,onValidate:M,onCancel:C,isLoading:k||j.isLoading||E,error:j.isError,success:j.isSuccess,isEditing:t})},bne=[Yn({path:"/tax",title:"Taxes",outlet:dne,permissions:["tax_list"],meta:{description:"Tax management system",icon:"stethoscope",showInSidebar:!0},children:[Ye({path:"",component:xne,title:"All Taxes",index:!0,permissions:["tax_list"],meta:{description:"List of all taxes",breadcrumb:"All Taxes"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!1})})}),Ye({path:"add",component:bC,title:"Add Tax",props:{isEditing:!1},permissions:["tax_add"],meta:{description:"Create a new tax",breadcrumb:"Add New"},skeleton:Ly}),Ye({path:"edit/:id",component:bC,title:"Edit Tax",props:{isEditing:!0},index:!0,permissions:["tax_edit"],meta:{description:"Edit existing tax",breadcrumb:"Edit"},skeleton:Ly})]})],wne=()=>i.jsxs("div",{className:"get-help-container",children:[i.jsx("div",{className:"get-help-header"}),i.jsx("div",{className:"get-help-content",children:i.jsx(ko,{})}),i.jsx("div",{className:"get-help-footer"})]}),kne=({activeTab:t="shortcodes",showHeader:e=!0,showTabs:n=!0})=>i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[e&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"help-tabs",children:[n&&i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:Array.from({length:8}).map((s,a)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:`${80+Math.random()*40}px`,height:"38px",style:{borderRadius:"4px"}})},`tab-skeleton-${a}`))}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-4"}),Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"mb-3",children:i.jsx(S,{width:`${120+Math.random()*60}px`,height:"1.25rem",className:"d-inline-block me-4 mb-2"})}),i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem"})]}),i.jsxs("div",{className:"mt-3 mt-md-0 ms-md-3 flex-shrink-0",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx(S,{width:"70px",height:"0.875rem"})]})]},`shortcode-${a}`))]})}),t!=="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx(S,{width:"200px",height:"1.25rem"}),i.jsx(S,{width:"150px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"98%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem",className:"mb-4"}),i.jsx(S,{width:"180px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-3 mb-4",children:Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"d-flex gap-2 mb-2",children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem"})]},`content-${a}`))}),i.jsx("div",{className:"ps-4 mb-3",children:Array.from({length:3}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"98%",height:"1rem"})]},`list-item-${a}`))})]})})]})})]})]})})}),jne=()=>{const[t,e]=f.useState("shortcodes"),[n,s]=f.useState(null),{isAddonActive:a}=mt(),r=(o,c)=>{navigator.clipboard.writeText(o),s(c),setTimeout(()=>{s(null)},1500)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("Get help","kivicare-clinic-management-system")})}),a("kiviPro")&&i.jsx("div",{className:" d-flex align-items-center gap-3",children:i.jsx("a",{href:"https://iqonic.desky.support/",className:"btn btn-primary",children:l("Get Support","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"help-tabs",children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:[i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="shortcodes"?"nav-link active":"nav-link",id:"nav-shortcodes-tab",onClick:()=>e("shortcodes"),type:"button",role:"tab","aria-controls":"nav-shortcodes","aria-selected":t==="shortcodes",children:l("Shortcodes","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="telemed"?"nav-link active":"nav-link",id:"nav-telemed-tab",onClick:()=>e("telemed"),type:"button",role:"tab","aria-controls":"nav-telemed","aria-selected":t==="telemed",children:l("Telemed (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="woocommerce"?"nav-link active":"nav-link",id:"nav-woocommerce-tab",onClick:()=>e("woocommerce"),type:"button",role:"tab","aria-controls":"nav-woocommerce","aria-selected":t==="woocommerce",children:l("Woocommerce (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="googlecalendar"?"nav-link active":"nav-link",id:"nav-googlecalendar-tab",onClick:()=>e("googlecalendar"),type:"button",role:"tab","aria-controls":"nav-googlecalendar","aria-selected":t==="googlecalendar",children:l("Google Calendar (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="sms"?"nav-link active":"nav-link",id:"nav-sms-tab",onClick:()=>e("sms"),type:"button",role:"tab","aria-controls":"nav-sms","aria-selected":t==="sms",children:l("SMS (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="language"?"nav-link active":"nav-link",id:"nav-language-tab",onClick:()=>e("language"),type:"button",role:"tab","aria-controls":"nav-language","aria-selected":t==="language",children:l("Language","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="appointments"?"nav-link active":"nav-link",id:"nav-appointments-tab",onClick:()=>e("appointments"),type:"button",role:"tab","aria-controls":"nav-appointments","aria-selected":t==="appointments",children:l("Appointments","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="holiday"?"nav-link active":"nav-link",id:"nav-holiday-tab",onClick:()=>e("holiday"),type:"button",role:"tab","aria-controls":"nav-holiday","aria-selected":t==="holiday",children:l("Holiday","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel","aria-labelledby":"nav-shortcodes-tab",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx("h5",{className:"mb-4",children:l("KiviCare Shortcode","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[bookAppointment]"}),i.jsx(Ue,{placement:"top",overlay:o=>i.jsx(it,{...o,children:n==="bookAppointment"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[bookAppointment]","bookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[patientDashboard]"}),i.jsx(Ue,{placement:"top",overlay:o=>i.jsx(it,{...o,children:n==="patientDashboard"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[patientDashboard]","patientDashboard"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode patient can register,login, manage profile, manage password and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/patient-dashboard-widget/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointment]"}),i.jsx(Ue,{placement:"top",overlay:o=>i.jsx(it,{...o,children:n==="kivicareBookAppointment"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareBookAppointment]","kivicareBookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"mt-md-3",children:i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget-customizable/",children:l("Overview","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareRegisterLogin]"}),i.jsx(Ue,{placement:"top",overlay:o=>i.jsx(it,{...o,children:n==="kivicareRegisterLogin"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareRegisterLogin]","kivicareRegisterLogin"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode kivicare users ( doctor, patient and receptionist ) can register and login","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointmentButton]"}),i.jsx(Ue,{placement:"top",overlay:o=>i.jsx(it,{...o,children:n==="kivicareBookAppointmentButton"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareBookAppointmentButton]","kivicareBookAppointmentButton"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsxs("p",{className:"mt-3 mb-0",children:[l("With following shortcode Users can register/login and book appointment In Popup","kivicare-clinic-management-system")," ",i.jsx(rt,{className:""})]})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-button-widget-customizable/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]})]})}),t==="telemed"&&i.jsxs("div",{className:"tab-pane fade show active",id:"nav-telemed",role:"tabpanel","aria-labelledby":"nav-telemed-tab",children:[i.jsxs("div",{className:" mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Telemed (Zoom Integration)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/#zoom-configuration",className:"btn btn-primary",children:l("Telemed Documentation","kivicare-clinic-management-system")})]}),i.jsx("p",{className:"mb-2",children:l("Setting up a Telemed (Zoom) appointment booking for a doctor. Doctor need to just follow few steps as mentioned below. We have also mentioned these steps in the doctor detail page. An administrator or Clinic admin can also do this for a doctor.","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("When a doctor is done with saving the Zoom API keys and charges, the doctor will get a Telemed service in their appointment services list.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Service name rendered from settings.","kivicare-clinic-management-system")]})]}),i.jsx("h6",{className:"fw-semibold mb-3",children:l("Zoom Configuration Guide","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 1:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[l("Sign up or sign in here. ","kivicare-clinic-management-system"),i.jsx("a",{href:"https://marketplace.zoom.us/",className:"text-decoration-none fw-semibold",children:l("Zoom Market Place Portal","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 2:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[l("Click/Hover on Develop button at the right in navigation bar and click on build app. ","kivicare-clinic-management-system"),i.jsxs("a",{href:"https://marketplace.zoom.us/develop/create",className:"text-decoration-none fw-semibold",children:['"',l("Create App","kivicare-clinic-management-system"),'"']}),"."]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 3:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l("Select JWT and click Create.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 4:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l("Fill the mandatory information. In the App Credentials tab, you can see the API Key and API Secret.","kivicare-clinic-management-system")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"fw-bold",children:l("Step 5:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l(`Copy and paste the API Key and API Secret here, then click on "Save"  you're ready to go.`,"kivicare-clinic-management-system")})]})]})]}),t==="woocommerce"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-woocommerce",role:"tabpanel","aria-labelledby":"nav-woocommerce-tab",children:i.jsxs("div",{className:"wocommerce-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("Woocommerce Payment Gateway","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/",className:"btn btn-primary ",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("For setting up a woocommerce payment gateway with kivicare payment, You have a basic woocommmerce setup with any payment method on it.","kivicare-clinic-management-system")}),i.jsx("li",{className:"mb-3",children:l("By default woocommerce payment is Disabled you need to Enabled it from payment tab in Setting page .","kivicare-clinic-management-system")}),i.jsx("li",{children:l("Appointment Service charges are considered for appointment's woocommerce payment.","kivicare-clinic-management-system")})]})]})}),t==="googlecalendar"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-googlecalendar",role:"tabpanel","aria-labelledby":"nav-googlecalendar-tab",children:i.jsxs("div",{className:"google-calander-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("Google Calendar","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-calendar/",className:"btn btn-primary",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:l("For setting up a Google Calendar (Appointment reminder) in kivicare setup we have provide a setup option in Pro Setting tab. You just need to enable google calendar service and fillup the Api key details.","kivicare-clinic-management-system")})})]})}),t==="sms"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-sms",role:"tabpanel","aria-labelledby":"nav-sms-tab",children:i.jsxs("div",{className:"sms-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("SMS (Twilio)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/pro-version/sms-notifications-twilio/",className:"btn btn-primary",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[l("For sending a SMS with kivicare we are providing","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/sms",children:l("Twilio SMS","kivicare-clinic-management-system")})," ",l("support.","kivicare-clinic-management-system")]})})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Set Twilio Geo Location Permission with your Twilio account. Basically you need to select country where you want to enable your SMS Service. ","kivicare-clinic-management-system"),i.jsx("a",{className:"text-primary flex-shrink-0 fw-semibold",href:"https://www.twilio.com/console/sms/settings/geo-permissions",children:l("Enable Geo Location","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-3",children:l("Common issue with Free trial SMS setup with Twilio","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("With twilio free SMS trial you can send SMS on only verified number.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[l("Here you can verify receiver's number with Twilio.","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/console/phone-numbers/verified",children:l("Verify receiver's number here","kivicare-clinic-management-system")})]})})]})]})]})}),t==="language"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-language",role:"tabpanel","aria-labelledby":"nav-language-tab",children:i.jsxs("div",{className:"language-tab",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:i.jsxs("h6",{className:"mb-0",children:[l("Multi-Language","kivicare-clinic-management-system")," ",i.jsxs("span",{className:"text-muted",children:["(",l("Soft deprecated","kivicare-clinic-management-system"),")"]})]})}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("For changing a language in your kivicare setup you we have provided a change language option in Pro settings tab in Settings page.","kivicare-clinic-management-system")}),i.jsx("li",{children:l("You need to change text for your selected language manually from Language setting tab in Settings page.","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Kivicare plugin requires a folder permission on mention path wp-content/uploads/kiviCare_lang","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("Common issue: Kivicare dashboard blank ?","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("This is happening because your kivicare setup has not given a appropriate permission for this wp-content/uploads/kiviCare_lang path.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"fw-semibold",children:l("Solution:","kivicare-clinic-management-system")})," ",l("You need to manually copy language json files from plugin folder resources/assets/lang and paste it to wp-content/uploads/kiviCare_lang folder.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:l("Wordpress Translation Plugin Support","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("You can change kivicare plugin text with the use of any wordpress translation plugin.","kivicare-clinic-management-system")})]})]})}),t==="appointments"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-appointments",role:"tabpanel","aria-labelledby":"nav-appointments-tab",children:i.jsxs("div",{className:"appointments-tab",children:[i.jsxs("p",{className:"mb-5",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If Woocommerce payment settings is toggle on, then appointment message sent through Email/SMS/Whatsapp after payment successfully done by patient And this feature is only available on Kivicare-Pro.","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-3",children:l("Restrict Advance Appointment Booking","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Open booking days:","kivicare-clinic-management-system")}),l("As consideration of current date booking already opened as mentioned days in settings.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:l("Close booking days:","kivicare-clinic-management-system")}),l("As consideration of current date booking already closed as mentioned days in settings.","kivicare-clinic-management-system")]})]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("Example","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("Current Date: 25 November","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-2",children:[i.jsx("span",{className:"",children:l("Pre-booking:","kivicare-clinic-management-system")})," ",l("10 days , so patient/doctor/receptionist can't select the date from 25 November to 5 December.","kivicare-clinic-management-system")]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"",children:l("Post-booking:","kivicare-clinic-management-system")})," ",l("10 days, so patient/doctor/receptionist can't select the date after 5 December.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("File Upload Setting","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("If Appointment File Upload toggle is on, then patient can add their reports at the time of booking an appointment.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If kivicare pro version is activate then patients can add more then one report, else patients can only add one report at a time while booking an appointment.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:l("Appointment Reminder","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Appointment Email Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Email Reminder will be send to patient through Email.","kivicare-clinic-management-system")]}),i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Appointment Sms Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Sms Reminder will be send to patient through SMS.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:l("Appointment Whatsapp Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Whatsapp Reminder will be send to patient through WhatsApp.","kivicare-clinic-management-system")]})]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Appointment Sms Reminder and Appointment Whatsapp Reminder, Required Kivicare-Pro to be Activated and also from pro settings: Toggle on WhatsApp and SMS, for access Appointment Sms Reminder and Appointment Whatsapp Reminder, this two setting is required to toggle on.","kivicare-clinic-management-system")]})]})]})}),t==="holiday"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-holiday",role:"tabpanel","aria-labelledby":"nav-holiday-tab",children:i.jsxs("div",{className:"holiday-tab",children:[i.jsx("h6",{className:"mb-4",children:l("Add Holiday","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsx("li",{className:"mb-3",children:l("If an holiday is set and they have an appointment between that holiday dates then all appointments will get cancelled and appointment cancelled mail/sms/whatsapp message will send to patients.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:l("sms/whatsapp only work in kivicare-pro only.","kivicare-clinic-management-system")})})]}),i.jsxs("p",{className:"m-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("once an holiday is set and appointments get cancelled then cancelled appointments cannot be reverted.","kivicare-clinic-management-system")]})]})})]})})]})]})})})};function wC(){return i.jsx("div",{children:"GetHelpManageForm"})}const Nne=[Yn({path:"/get-help",title:"Get Help",outlet:wne,meta:{description:"Help and support system",icon:"help-circle",showInSidebar:!0},children:[Ye({path:"",component:jne,title:"All Help Topics",index:!0,skeleton:kne,meta:{description:"List of all help topics",breadcrumb:"All Help Topics"}}),Ye({path:"add",component:wC,title:"Add Help Topic",props:{isEditing:!1},meta:{description:"Create a new help topic",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:wC,title:"Edit Help Topic",props:{isEditing:!0},index:!0,meta:{description:"Edit existing help topic",breadcrumb:"Edit"}})]})],Cne=()=>{const t=Gn();return i.jsxs("div",{className:"receptionists-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/receptionist"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Fy=()=>i.jsxs(i.Fragment,{children:[i.jsx(Nl,{titleWidth:"140px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",style:{borderRadius:"50%"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"}),i.jsx(S,{width:"55px",height:"1rem"})]})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"120px"})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"130px",height:"38px"})]})]}),tr={getReceptionists:(t={})=>ve({endpoint:"receptionists",method:"GET",data:t}),getReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"GET"}),createReceptionist:t=>ve({endpoint:"receptionists",method:"POST",data:t}),updateReceptionist:(t,e)=>ve({endpoint:`receptionists/${t}`,method:"PUT",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),getClinicReceptionists:(t,e={})=>ve({endpoint:`clinics/${t}/receptionists`,method:"GET",data:e}),getReceptionistPatients:(t,e={})=>ve({endpoint:`receptionists/${t}/patients`,method:"GET",data:e}),getReceptionistSchedule:(t,e={})=>ve({endpoint:`receptionists/${t}/schedule`,method:"GET",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),bulkDeleteReceptionists:t=>ve({endpoint:"receptionists/bulk-delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`receptionists/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"receptionists/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateReceptionistStatus:(t,e)=>ve({endpoint:"receptionists/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportReceptionists:(t={})=>ve({endpoint:"receptionists/export",method:"GET",data:t})},Ks={all:["receptionists"],lists:()=>[...Ks.all,"list"],list:t=>[...Ks.lists(),{filters:t}],details:()=>[...Ks.all,"detail"],detail:t=>[...Ks.details(),t]},Sne=(t={},e={})=>gt({queryKey:Ks.list(t),queryFn:()=>tr.getReceptionists(t),...e}),_ne=(t,e={})=>gt({queryKey:Ks.detail(t),queryFn:()=>tr.getReceptionist(t),enabled:!!t,...e}),Ene=()=>{const t=Ke();return He({mutationFn:e=>tr.createReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Tne=()=>{const t=Ke();return He({mutationFn:({id:e,...n})=>tr.updateReceptionist(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ks.detail(n.id)}),t.invalidateQueries({queryKey:Ks.lists()})}})},Ane=()=>{const t=Ke();return He({mutationFn:e=>tr.deleteReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Dne=()=>{const t=Ke();return He({mutationFn:e=>tr.bulkDeleteReceptionists(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Rne=()=>He({mutationFn:t=>tr.resendCredentials(t)}),Pne=()=>He({mutationFn:t=>tr.bulkResendCredentials(t)}),Mne=()=>{const t=Ke();return He({mutationFn:({ids:e,status:n})=>tr.bulkUpdateReceptionistStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Ine=()=>He({mutationFn:t=>tr.exportReceptionists(t)}),One=()=>{const{hasCapability:t,isAddonActive:e}=mt(),[n,s]=f.useState([]),[a,r]=f.useState(!1),o=f.useRef(null),c=Jn(),d=Vn(),m={page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:""},[u,p]=f.useState(m),h=K=>{if(K.length>0){const{id:B,desc:F}=K[0],J={id:"id",profile:"display_name",clinic_name:"clinic_name",contact_number:"contact_number",status:"user_status"};p(Q=>({...Q,orderby:J[B]||B,order:F?"desc":"asc",page:1}))}else p(B=>({...B,orderby:"",order:"",page:1}))},[g,v]=f.useState(""),x=Za(g,500);We.useEffect(()=>{p(K=>({...K,search:x,page:1}))},[x]);const[y,b]=f.useState(!1),[w,k]=f.useState(!1),_=f.useMemo(()=>Object.fromEntries(Object.entries(u).filter(([K,B])=>B!==""&&B!==null&&B!==void 0)),[u]),{data:j,isLoading:T,error:N,refetch:E}=Sne(_),A=Ke(),L=async({page:K,per_page:B,search:F})=>{try{const J={dataType:"clinicList",page:K,per_page:B,search:F},Q=await A.fetchQuery({queryKey:ut.list(J),queryFn:()=>Et.getStaticData(J),staleTime:300*1e3}),me=Q.data.map(te=>({value:te.id,label:te.label||te.name}));return s(te=>[...te,...me]),Q}catch(J){return console.error("Error loading clinics:",J),{data:[],pagination:{has_more:!1}}}},C=Ane(),P=Dne(),R=Pne(),M=Mne(),O=Ine(),q=Rne(),U=j?.data?.receptionists||[],H=j?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ae=K=>{dt({title:l("Delete Receptionist?","kivicare-clinic-management-system"),text:l("You're about to delete this receptionist.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep receptionist","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(B=>{B.isConfirmed&&(ft({title:l("Deleting Receptionist...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected receptionist.<br>This won't take long.","kivicare-clinic-management-system")}),C.mutate(K,{onSuccess:()=>{tt({title:l("Receptionist Deleted","kivicare-clinic-management-system"),text:l("Receptionist has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to receptionists","kivicare-clinic-management-system")}),E()},onError:F=>{Me({title:l("Error!","kivicare-clinic-management-system"),text:F.message||l("Failed to delete receptionist.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},V=(K,B)=>{dt({title:l("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),B),icon:"ph-question",confirmButtonText:l("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(F=>{F.isConfirmed&&q.mutate(K,{onSuccess:()=>{tt({title:l("Credentials Sent!","kivicare-clinic-management-system"),text:l("Receptionist credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:J=>{Me({title:l("Error!","kivicare-clinic-management-system"),text:J.message||l("Failed to resend credentials.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}})})},pe=e("kiviPro"),oe=On(),ne=f.useMemo(()=>[oe.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:K=>i.jsx("div",{className:"font-weight-medium",children:K.getValue()})}),oe.accessor("profile",{id:"profile",enableSorting:!0,header:()=>l("Receptionist","kivicare-clinic-management-system"),cell:K=>i.jsx(on,{profileUrl:K.row.original.receptionist_image_url,name:K.row.original.first_name+" "+K.row.original.last_name,email:K.row.original.email||"",fallbackText:(K.row.original.first_name?.charAt(0)||"")+(K.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")}),sortingFn:(K,B)=>{const F=`${K.original.first_name} ${K.original.last_name}`.toLowerCase(),J=`${B.original.first_name} ${B.original.last_name}`.toLowerCase();return F.localeCompare(J)}}),...pe&&!c&&!d?[oe.accessor("clinic_name",{id:"clinic_name",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(K,B)=>{const F=`${K.original.first_name} ${K.original.last_name}`.toLowerCase(),J=`${B.original.first_name} ${B.original.last_name}`.toLowerCase();return F.localeCompare(J)},cell:K=>i.jsx(on,{profileUrl:K.row.original?.clinic?.clinic_image_url,name:K.row.original?.clinic?.clinic_name,email:K.row.original?.clinic?.clinic_email||"",fallbackText:(K.row.original.first_name?.charAt(0)||"")+(K.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:l("Receptionist","kivicare-clinic-management-system")})})]:[],oe.accessor("contact_number",{id:"contact_number",header:()=>l("Contact Number","kivicare-clinic-management-system"),cell:K=>i.jsx("div",{children:i.jsx("span",{children:K.row.original.contact_number||""})})}),oe.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:K=>{const B=Number(K.getValue()),F=K.row.original,J=()=>{const Q=B===1?0:1;dt({title:l("Update Status?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),F.first_name+" "+F.last_name,Q===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(me=>{me.isConfirmed&&(ft({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),M.mutate({ids:[F.id],status:Q},{onSuccess:()=>{tt({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Receptionist status has been updated successfully.","kivicare-clinic-management-system")})},onError:te=>{Me({title:l("Error","kivicare-clinic-management-system"),text:te.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return t("receptionist_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`receptionist-status-${F.id}`,checked:B===0,onChange:J})}):i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:B===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),...t("receptionist_edit")||t("receptionist_resend_credential")||t("receptionist_delete")?[oe.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:K=>{const B=F=>J=>i.jsx(it,{id:`tooltip-${K.cell.row.original.id}-${F}`,...J,children:F});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[t("receptionist_edit")&&i.jsx(Ue,{placement:"top",overlay:B(l("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/receptionist/edit/${K.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),t("receptionist_resend_credential")&&i.jsx(Ue,{placement:"top",overlay:B(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>V(K.row.original.id,K.row.original.display_name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),t("receptionist_delete")&&i.jsx(Ue,{placement:"top",overlay:B(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ae(K.row.original.id),disabled:C.isPending,children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[C.isPending,t]),se=K=>{v(K.target.value)},W=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],ge=async K=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:K};u.search&&(B.search=u.search),u.clinic&&(B.clinic_id=u.clinic),u.status!==""&&u.status!==null&&u.status!==void 0&&(B.status=u.status),u.orderBy&&(B.orderby=u.orderBy),u.order&&(B.order=u.order);const F=await O.mutateAsync(B);if(F?.data?.receptionists){const J=new Date().toISOString().split("T")[0],Q=F.data.receptionists.map(me=>({id:me.id,name:me.name,clinic_name:me.clinic_name||"",clinic_id:me.clinic_id||"",email:me.email,contact_number:me.contact_number,gender:me.gender,dob:me.dob,status:me.user_status,full_address:me.full_address}));switch(K){case"csv":gs(Q,`receptionists-${J}.csv`);break;case"xls":fs(Q,`receptionists-${J}.xls`);break;case"pdf":vs(Q,`receptionists-${J}.pdf`,"Receptionists List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}}catch(B){console.error("Export error:",B),Me({title:l("Error!","kivicare-clinic-management-system"),text:B.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},ee=()=>ge("csv"),ie=()=>ge("xls"),[ue,G]=f.useState(!1),le=()=>{ue||(G(!0),ge("pdf"),setTimeout(()=>G(!1),2e3))},re=K=>{p({...u,...K,page:1}),b(!1)},D=()=>{p(m),s([]),v("")},I=f.useMemo(()=>["search","id","receptionistName","clinic","receptionistAddress","status"].some(B=>{const F=u[B];return F!=null&&F!==""})||g!=="",[u,g]),ce=async K=>{console.log("Import data:",K);try{return tt({title:l("Success!","kivicare-clinic-management-system"),text:l("Receptionists data imported successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),{success:!0}}catch(B){throw console.error("Import error:",B),B}},Z=[{type:"number",name:"id",label:l("Receptionist ID","kivicare-clinic-management-system"),placeholder:l("Enter Receptionist ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:K=>{K.target.value=K.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"receptionistName",label:l("Receptionist Name","kivicare-clinic-management-system"),placeholder:l("Enter Receptionist Name","kivicare-clinic-management-system"),min:1},...pe&&!c&&!d?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:L,options:n,key:"clinic-filter"}]:[],{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select status","kivicare-clinic-management-system"),options:W}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Receptionists","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t("receptionist_add")&&i.jsxs(ht,{to:"/receptionist/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Receptionist","kivicare-clinic-management-system")})]}),pe&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>k(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>b(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!a,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:o,children:i.jsxs("div",{ref:o,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[pe&&!c&&!d&&i.jsx(Xt,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:L,value:n.find(K=>K.value===u.clinic)||null,onChange:K=>{p(B=>({...B,clinic:K?K.value:""}))},dependencies:{},isClearable:!0}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:W,onChange:K=>p(B=>({...B,status:K?K.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:K=>({...K,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:g,onChange:se})]})}),t("receptionist_export")&&pe&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ee,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ie,disabled:O.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:le,disabled:ue,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:U,columns:ne,isLoading:T||C.isPending,error:N,currentPage:H.currentPage,perPage:H.perPage,totalItems:H.total,lastPage:H.lastPage,onPageChange:K=>p(B=>({...B,page:K})),onPerPageChange:K=>p(B=>({...B,perPage:K,page:1})),onSortingChange:h,manualSorting:!0,enableSelection:!0,moduleNamePlural:"receptionists",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(K,B)=>{const F=K.map(J=>J.id);dt({title:l("Delete Receptionists?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${K.length} receptionists</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep receptionists","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(J=>{J.isConfirmed&&(ft({title:l("Deleting Receptionists...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected receptionists.<br>This won't take long.","kivicare-clinic-management-system")}),P.mutate(F,{onSuccess:Q=>{tt({title:l("Receptionist Deleted","kivicare-clinic-management-system"),text:l(`${K.length} receptionist${K.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to receptionists","kivicare-clinic-management-system")}),B()},onError:Q=>{console.error("Bulk delete clinics error:",Q);const me=Q?.response?.data?.message||Q?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(K,B)=>{const F=K.map(J=>J.id);dt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected Receptionists?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(J=>{J.isConfirmed&&(ft({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),R.mutate(F,{onSuccess:Q=>{tt({title:l("Success","kivicare-clinic-management-system"),text:Q?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),B()},onError:Q=>{console.error("Bulk resend credentials error:",Q);const me=Q?.response?.data?.message||Q?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(K,B)=>{const F=K.map(J=>J.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Receptionists to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(J=>{J.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),M.mutate({ids:F,status:"0"},{onSuccess:Q=>{tt({title:l("Success","kivicare-clinic-management-system"),text:Q?.message||l("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),B()},onError:Q=>{console.error("Bulk update status error:",Q);const me=Q?.response?.data?.message||Q?.message||l("Failed to update Receptionists status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(K,B)=>{const F=K.map(J=>J.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Receptionists to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(J=>{J.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),M.mutate({ids:F,status:"1"},{onSuccess:Q=>{tt({title:l("Success","kivicare-clinic-management-system"),text:Q?.message||l("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),B()},onError:Q=>{console.error("Bulk update status error:",Q);const me=Q?.response?.data?.message||Q?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:K=>{r(K)}})]}),i.jsx(na,{show:y,onHide:()=>b(!1),queryParams:u,onApplyFilters:re,onResetFilters:D,title:l("Filters","kivicare-clinic-management-system"),fields:Z,hasAppliedFilters:I}),pe&&i.jsx(qr,{show:w,onHide:()=>k(!1),onImport:ce,onReopenImport:()=>k(!0),onDataRefresh:E,context:"receptionists"})]})};function $y({isEditing:t=!1,isProfile:e=!1}){const n=mn(),{id:s}=Yt(),{currentuserID:a,defaultCountryCode:r,showOtherGender:o}=mt(),{data:c}=Cn(),d=Ke(),m=f.useMemo(()=>c?.data?.kc_available_translations||[{lang:"en_US",label:"English (United States)"}],[c]),u=e?a:s,p=Ene(),h=Tne(),{isAddonActive:g}=mt(),v=g("kiviPro"),[x,y]=f.useState(!1),b=x||p.isPending,{data:w,isLoading:k,error:_}=_ne(u,{enabled:(t||e)&&!!u}),j=w?.data,T=async({page:ne,per_page:se,search:W})=>{try{const ge={dataType:"clinicList",page:ne,per_page:se,search:W};return await d.fetchQuery({queryKey:ut.list(ge),queryFn:()=>Et.getStaticData(ge),staleTime:300*1e3})}catch(ge){return console.error("Error loading clinics:",ge),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},N=Yc.PhoneNumberUtil.getInstance(),E=ne=>{try{return N.isValidNumber(N.parseAndKeepRawInput(ne))}catch{return!1}},A=[{value:0,label:l("Active","kivicare-clinic-management-system")},{value:1,label:l("Inactive","kivicare-clinic-management-system")}],{register:L,handleSubmit:C,control:P,watch:R,setValue:M,formState:{errors:O},reset:q}=Jt({defaultValues:{receptionistImage:"",receptionistImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",status:A[0],gender:"",address:"",city:"",country:"",postalCode:""}});f.useEffect(()=>{if(t&&j&&!k){const ne={firstName:j.first_name||"",lastName:j.last_name||"",email:j.email||"",contactNumber:j.contact_number||"",dob:j.dob||"",gender:j.gender||"",status:A.find(se=>se.value===parseInt(j.status))||A[0],clinic:j?.clinic?{value:j.clinic.clinic_id,label:j.clinic.clinic_name}:null,receptionistImageId:j.receptionist_image_id||"",receptionistImage:j.receptionist_image_url||"",address:j.address||"",city:j.city||"",country:j.country||"",postalCode:j.postal_code||""};console.log(ne.clinic),q(ne),setTimeout(()=>{M("contactNumber",j.contact_number||"")},0)}},[t,j]);const U=(ne,se)=>{console.log(`Updating ${ne} with:`,se),M(ne,se.url||se.image),M(`${ne}Id`,se.id||se.imageId)},H=async ne=>{y(!0);try{console.log("Form Data:",ne);const se={first_name:ne.firstName,last_name:ne.lastName,email:ne.email,clinic_id:ne.clinic?.value||ne.clinic,contact_number:ne.contactNumber,dob:ne.dob,status:ne.status?.value||ne.status,gender:ne.gender,receptionist_image:ne.receptionistImage,receptionist_image_id:ne.receptionistImageId,address:ne.address,city:ne.city,country:ne.country,postal_code:ne.postalCode};let W;t?(W=await h.mutateAsync({id:u,...se}),Ee.success(l("Receptionist updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(W=await p.mutateAsync(se),Ee.success(l("Receptionist created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||n("/receptionist")}catch(se){console.error("Submission error:",se);const W=se.response?.data?.message||se.message||l("Failed to save receptionist. Please try again.","kivicare-clinic-management-system");Ee.error(W,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{y(!1)}},ae=ne=>{console.log("Validation errors:",ne);const se=Object.keys(ne)[0],W=document.getElementById(se);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.focus())},V={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:{required:l("Clinic selection is required","kivicare-clinic-management-system")},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:ne=>ne?E(ne)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},dob:{validate:ne=>{if(!ne)return!0;const se=new Date(ne);return new Date().getFullYear()-se.getFullYear()>=18||l("Receptionist must be at least 18 years old","kivicare-clinic-management-system")}},status:{required:l("Status is required","kivicare-clinic-management-system")},gender:{required:l("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},city:{minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}},country:{minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,11}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}},pe=t?l("Edit Receptionist","kivicare-clinic-management-system"):l("Add Receptionist","kivicare-clinic-management-system"),oe=t?l("Update Receptionist","kivicare-clinic-management-system"):l("Save Receptionist","kivicare-clinic-management-system");return(t||e)&&k?i.jsx(Fy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):pe})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("form",{onSubmit:C(H,ae),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(be,{name:"receptionistImage",control:P,render:({field:ne})=>i.jsx(wl,{id:"receptionist-image-upload",name:"receptionistImage",label:l("Profile Image","kivicare-clinic-management-system"),defaultImage:ne.value,defaultImageId:R("receptionistImageId"),onChange:se=>{U("receptionistImage",se)},size:200,register:L,errors:O,className:""})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${O.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...L("firstName",V.firstName)}),O.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:O.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${O.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...L("lastName",V.lastName)}),O.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:O.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${O.email?"is-invalid":""}`,placeholder:l('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...L("email",V.email)}),O.email&&i.jsx("div",{className:"invalid-feedback d-block",children:O.email.message})]})}),v&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"clinic",control:P,rules:V.clinic,render:({field:ne})=>i.jsx(Xt,{id:"clinic",loadOptions:T,value:ne.value,onChange:se=>ne.onChange(se),placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${O.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{}})}),O.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:O.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"contactNumber",control:P,rules:V.contactNumber,render:({field:ne})=>i.jsx(so,{defaultCountry:r,value:ne.value,onChange:ne.onChange,inputProps:{className:`form-control ${O.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":O.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),O.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:O.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:l("DOB","kivicare-clinic-management-system")}),i.jsx(be,{name:"dob",control:P,rules:V.dob,render:({field:ne})=>i.jsx(Wn,{id:"dob",className:`form-control ${O.dob?"is-invalid":""}`,value:ne.value?Xn(ne.value):"",onChange:se=>{if(se&&se[0]){const W=se[0],ge=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}-${String(W.getDate()).padStart(2,"0")}`;ne.onChange(ge)}else ne.onChange("")},options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Kn()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&k})}),O.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:O.dob.message})]})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(be,{name:"status",control:P,rules:V.status,render:({field:ne})=>i.jsx(lt,{id:"status",className:`react-select-box ${O.status?"is-invalid":""}`,classNamePrefix:"react-select",options:A,value:ne.value,onChange:ne.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:se=>({...se,zIndex:9999})}})}),O.status&&i.jsx("div",{className:"invalid-feedback d-block",children:O.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...L("gender",V.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...L("gender",V.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),o&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${O.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...L("gender",V.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),O.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:O.gender.message})]})}),e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"language",className:"form-label",children:l("Choose Language","kivicare-clinic-management-system")}),i.jsx(be,{name:"language",control:P,render:({field:ne})=>i.jsx(lt,{id:"language",options:m.map(se=>({value:se.lang,label:se.label})),value:ne.value,onChange:ne.onChange,placeholder:l("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:se=>({...se,zIndex:9999})}})})]})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:l("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${O.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...L("address",V.address)}),O.address&&i.jsx("div",{className:"invalid-feedback d-block",children:O.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${O.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...L("city",V.city)}),O.city&&i.jsx("div",{className:"invalid-feedback d-block",children:O.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${O.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...L("country",V.country)}),O.country&&i.jsx("div",{className:"invalid-feedback d-block",children:O.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${O.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...L("postalCode",V.postalCode)}),O.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:O.postalCode.message})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:b}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):oe})]})]})]})}const Lne=Object.freeze(Object.defineProperty({__proto__:null,default:$y},Symbol.toStringTag,{value:"Module"})),Fne=[Yn({path:"/receptionist",title:"Receptionist",outlet:Cne,permissions:["receptionist_list"],module:"receptionist",meta:{description:"Receptionist management system",icon:"user-circle",showInSidebar:!0},children:[Ye({path:"",component:One,title:"All Receptionists",index:!0,permissions:["receptionist_list"],module:"receptionist",meta:{description:"List of all receptionists",breadcrumb:"All Receptionists"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:$y,title:"Add Receptionist",props:{isEditing:!1},permissions:["receptionist_add"],module:"receptionist",skeleton:Fy,meta:{description:"Create a new receptionist",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:$y,title:"Edit Receptionist",props:{isEditing:!0},permissions:["receptionist_edit"],module:"receptionist",skeleton:Fy,meta:{description:"Edit existing receptionist",breadcrumb:"Edit"}})]})],$ne=()=>{const t=Gn();return i.jsxs("div",{className:"doctors-service-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/service"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Bne=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",category:"",status:"",orderBy:"",order:""}),[n,s]=f.useState([]),{isAddonActive:a,hasCapability:r,currencyPrefix:o,currencyPostfix:c}=mt(),d=a("kiviPro"),m=Jn(),u=Vn(),{data:p,isLoading:h}=Ua("service_type"),g=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([I,ce])=>ce!==""&&ce!==null&&ce!==void 0)),[t]),{data:v,isLoading:x,error:y}=W7(g),b=Q7(),w=Z7(),k=X7(),[_,j]=f.useState(!1),[T,N]=f.useState(!1),E=async I=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ce=new Date().toISOString().split("T")[0],Z=P.map(K=>({id:K.id,serviceId:K.serviceId,serviceName:K.serviceName,clinicName:K.clinicName,doctorName:K.doctorName,charges:K.charges,duration:K.duration,category:K.category,status:K.status===1?"Active":"Inactive"}));switch(I){case"csv":gs(Z,`services-${ce}.csv`);break;case"xls":fs(Z,`services-${ce}.xls`);break;case"pdf":vs(Z,`services-${ce}.pdf`,"Services List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(ce){console.error("Export error:",ce),Me({title:l("Error!","kivicare-clinic-management-system"),text:ce.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},A=()=>E("csv"),L=()=>E("xls"),C=()=>{_||(j(!0),E("pdf"),setTimeout(()=>j(!1),2e3))},P=v?.data?.doctorServices||[],R=v?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useMemo(()=>p?.data?p.data.map(I=>{let ce="",Z="";return typeof I=="string"?(ce=I,Z=I):typeof I=="object"&&I!==null&&(ce=I.label||I.name||"",Z=I.id??I.name??ce),{value:Z,label:ce}}):[],[p]);const M=Ke(),O=f.useCallback(async({page:I,per_page:ce,search:Z})=>{try{const K={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:I,per_page:ce,search:Z},B=await M.fetchQuery({queryKey:ut.list(K),queryFn:()=>Et.getStaticData(K),staleTime:0}),F=B.data.map(J=>({value:J.id,label:J.label||J.name}));return s(J=>{const Q=F.filter(me=>!J.some(te=>te.value===me.value));return[...J,...Q]}),B.data.map(J=>{let Q="",me="";return typeof J=="string"?(Q=J,me=J):typeof J=="object"&&J!==null&&(Q=J.label||J.name||"",me=J.id??J.name??Q),{value:me,label:Q}})}catch(K){return console.error("Error loading Specialties:",K),{data:[],pagination:{has_more:!1}}}},[M]),q=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[U,H]=f.useState(""),ae=Za(U,500);We.useEffect(()=>{e(I=>({...I,search:ae,page:1}))},[ae]);const V=I=>{if(I.length>0){const{id:ce,desc:Z}=I[0],K={id:"id",serviceId:"serviceId",serviceName:"serviceName",clinicName:"clinicName",doctorName:"doctorName",charges:"charges",duration:"duration",category:"category",status:"status"};e(B=>({...B,orderby:K[ce]||ce,order:Z?"desc":"asc",page:1}))}else e(ce=>({...ce,orderby:"",order:"",page:1}))},pe=I=>{H(I.target.value)},[oe,ne]=f.useState(!1),[se,W]=f.useState(!1),ge=f.useRef(null),ee=I=>{const ce={};for(const Z in I)if(Object.prototype.hasOwnProperty.call(I,Z)){const K=I[Z];ce[Z]=typeof K=="string"?K.trim():K}e(Z=>({...Z,...ce,page:1})),ne(!1)},ie=()=>{const I={page:1,perPage:t.perPage,search:"",id:"",doctorName:"",clinicName:"",serviceName:"",charges:"",duration:"",category:"",status:"",orderBy:"",order:""};e(I),s([]),ne(!1)},ue=f.useMemo(()=>["search","id","serviceName","clinicName","doctorName","charges","category","status"].some(ce=>{const Z=t[ce];return typeof Z=="object"&&Z!==null?Z.value!==void 0&&Z.value!=="":Z!=null&&Z!==""})||U!=="",[t,U]),G=[{type:"number",name:"id",label:l("ID","kivicare-clinic-management-system"),placeholder:l('eg "123"',"kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:I=>{I.target.value=I.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"serviceName",label:l("Service Name","kivicare-clinic-management-system"),placeholder:l("eg Full body checkup","kivicare-clinic-management-system")},...d&&!m&&!u?[{type:"text",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system")}]:[],{type:"text",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("eg Albert Heaven","kivicare-clinic-management-system")},{type:"number",name:"charges",label:l("Charges","kivicare-clinic-management-system"),placeholder:l('eg "100"',"kivicare-clinic-management-system"),min:0,pattern:"[0-9]*",onInput:I=>{I.target.value=I.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"category",label:l("Category","kivicare-clinic-management-system"),placeholder:l('eg "General Dentistry"',"kivicare-clinic-management-system"),optionLoader:O,isSearchable:!0,perPage:50,storeObject:!0},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l('eg "Active"',"kivicare-clinic-management-system"),options:q,isSearchable:!1}],le=On(),re=f.useMemo(()=>[le.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>`${I.getValue()}`}),le.accessor("serviceId",{header:()=>l("Service ID","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>I.getValue()}),le.accessor("serviceName",{header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>i.jsx(on,{profileUrl:I.row.original.service_image_url,name:I.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:l("Service","kivicare-clinic-management-system")})}),...d&&!m&&!u?[le.accessor("clinicName",{id:"clinicName",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>{const ce=I.row.original.clinicName,Z=I.row.original.clinicProfileImage,K=I.row.original.clinicEmail,B=I.row.original.clinicContactNumber;return i.jsx(on,{profileUrl:Z,name:ce,fallbackText:"CL",variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system"),email:K,contactNumber:B})}})]:[],le.accessor("doctorName",{header:()=>l("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>i.jsx(on,{profileUrl:I.row.original.doctorProfileImage,name:I.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system"),email:I.row.original.doctorEmail,contactNumber:I.row.original.doctorContactNumber})}),le.accessor("charges",{header:()=>l("Charges","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>`${o||""}${I.getValue()}${c||""}`}),le.accessor("duration",{header:()=>l("Duration","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>I.getValue()}),le.accessor("category",{header:()=>l("Category","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>I.getValue()}),le.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>{const ce=Number(I.getValue()),Z=I.row.original,K=()=>{const B=ce===1?0:1;dt({title:l("Update Status?","kivicare-clinic-management-system"),text:Pi(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),Z.service_name,B===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&(ft({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),k.mutate({ids:[Z.id],status:B},{onSuccess:()=>{tt({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Service status has been updated successfully.","kivicare-clinic-management-system")})},onError:J=>{Me({title:l("Error","kivicare-clinic-management-system"),text:J.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return r("service_edit")?i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`service-status-${Z.id}`,checked:ce===1,onChange:K})}):i.jsx("span",{className:`badge ${ce===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:ce===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),le.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>{const ce=Z=>K=>i.jsx(it,{id:`tooltip-${I.cell.row.original.id}-${Z}`,...K,children:Z});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[r("service_edit")&&i.jsx(Ue,{placement:"top",overlay:ce(l("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/service/edit/${I.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),r("service_delete")&&i.jsx(Ue,{placement:"top",overlay:ce(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>D(I.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[r]),D=I=>{dt({title:l("Delete Service?","kivicare-clinic-management-system"),text:l("You're about to delete this service.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep service","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ce=>{ce.isConfirmed&&(ft({title:l("Deleting Service...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected service.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(I,{onSuccess:Z=>{tt({title:l("Deleted!","kivicare-clinic-management-system"),text:Z?.message||l("Service has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to services","kivicare-clinic-management-system")})},onError:Z=>{Me({text:Z?.response?.data?.message||l("Failed to delete service. Please try again.","kivicare-clinic-management-system")})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Services","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[r("service_add")&&i.jsxs(ht,{to:"/service/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Service","kivicare-clinic-management-system")})]}),d&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>ne(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsx(na,{show:oe,onHide:()=>ne(!1),queryParams:t,onApplyFilters:ee,onResetFilters:ie,title:l("Filters","kivicare-clinic-management-system"),fields:G,hasAppliedFilters:ue}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!se,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:ge,children:i.jsxs("div",{ref:ge,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(Xt,{id:"specialties-filter",placeholder:l("Category","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:O,value:n.find(I=>I.value===t.category)||null,onChange:I=>{console.log(I),e(ce=>({...ce,category:I?I.value:""}))},isClearable:!0,perPage:50}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:q,onChange:I=>e(ce=>({...ce,status:I?String(I.value):""})),isSearchable:!1,isClearable:!0,styles:{menuPortal:I=>({...I,zIndex:9999})},value:q.find(I=>String(I.value)===String(t.status))||null})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:U,onChange:pe})]})}),r("service_export")&&d&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:A,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:L,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:C,disabled:_,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(bn,{data:P,columns:re,isLoading:x,error:y,currentPage:R.currentPage,perPage:R.perPage,totalItems:R.total,lastPage:R.lastPage,onPageChange:I=>e(ce=>({...ce,page:I})),onPerPageChange:I=>e(ce=>({...ce,perPage:I,page:1})),onSortingChange:V,manualSorting:!0,enableSelection:!0,moduleNamePlural:"services",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(I,ce)=>{const Z=I.map(K=>K.id);dt({title:l("Delete Services?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${I.length} services</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep services","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(K=>{K.isConfirmed&&(ft({title:l("Deleting Services...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected services.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(Z,{onSuccess:B=>{tt({title:l("Deleted!","kivicare-clinic-management-system"),text:l(`${I.length} service${I.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to services","kivicare-clinic-management-system")}),ce()},onError:B=>{Me({text:B?.response?.data?.message||l("Failed to delete selected services. Please try again.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(I,ce)=>{const Z=I.map(K=>K.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to activate selected services?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, activate","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(K=>{K.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:Z,status:1},{onSuccess:B=>{tt({text:B?.message||l("Services have been activated successfully.","kivicare-clinic-management-system")}),ce()},onError:B=>{Me({text:B?.response?.data?.message||l("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(I,ce)=>{const Z=I.map(K=>K.id);dt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to deactivate selected services?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, deactivate","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(K=>{K.isConfirmed&&(ft({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:Z,status:0},{onSuccess:B=>{tt({text:B?.message||l("Services have been deactivated successfully.","kivicare-clinic-management-system")}),ce()},onError:B=>{Me({text:B?.response?.data?.message||l("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:I=>{W(I)}})]}),d&&i.jsx(qr,{show:T,onHide:()=>N(!1),onReopenImport:()=>N(!0),onDataRefresh:()=>{window.location.reload()},context:"services"})]})},qne=[Yn({path:"/service",title:"Services",outlet:$ne,permissions:["service_list"],meta:{description:"Manage doctor services",icon:"fa-server",showInSidebar:!0},children:[Ye({path:"",component:Bne,index:!0,permissions:["service_list"],meta:{description:"List of all doctor services",breadcrumb:"All Doctor Services"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:Oy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],skeleton:eg,meta:{description:"Create a new doctor service",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:Oy,title:"Edit Doctor Service",props:{isEditing:!0},permissions:["service_edit"],skeleton:eg,meta:{description:"Edit existing doctor service",breadcrumb:"Edit"}})]})],Hne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"404"}),i.jsx("p",{className:"fs-3",children:l("Page not found.","kivicare-clinic-management-system")}),i.jsx("p",{className:"lead",children:l("The page you're looking for doesn't exist.","kivicare-clinic-management-system")}),i.jsx(ei,{text:l("Go Home","kivicare-clinic-management-system"),showIcon:!1})]})}),zne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"500"}),i.jsx("p",{className:"fs-3",children:l("Internal Server Error","kivicare")}),i.jsx("p",{className:"lead",children:l("Something went wrong on our end. Please try again later.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:l("Go Home","kivicare")})]})}),Vne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("Maintenance","kivicare")}),i.jsx("p",{className:"fs-3",children:l("System Under Maintenance","kivicare")}),i.jsx("p",{className:"lead",children:l("We're currently performing scheduled maintenance. Please check back soon.","kivicare")}),i.jsx("p",{className:"text-muted",children:l("We apologize for any inconvenience.","kivicare")})]})}),Une=[Ye({path:"/403",component:Xd,title:"Access Denied",exact:!0,meta:{description:"Access denied error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),Ye({path:"/500",component:zne,title:"Server Error",exact:!0,meta:{description:"Internal server error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),Ye({path:"/maintenance",component:Vne,title:"Maintenance",exact:!0,meta:{description:"Maintenance mode page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),Ye({path:"*",component:Hne,title:"Page Not Found",meta:{description:"Page not found fallback",hideFromBreadcrumb:!0,hideFromSidebar:!0}})],Wne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsx(pt,{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column py-4",children:[i.jsx(S,{width:"70px",height:"70px",className:"rounded-circle"}),i.jsxs("div",{className:"text-center w-100",children:[i.jsx(S,{width:"250px",height:"1.5rem",className:"mx-auto mb-3"}),i.jsx(S,{width:"350px",height:"1rem",className:"mx-auto mb-5"}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx(S,{width:"80%",height:"3rem",style:{borderRadius:"50px"}})}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(st,{className:"mx-auto",width:"120px",height:"42px"})})]})]})})})]})})}),Kne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"320px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Gne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e)),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]})]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(pt,{children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"350px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsx("div",{className:"row gy-4",children:Array.from({length:6}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e))})}),i.jsx("div",{className:"col-md-4 ",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Yne=({currentStep:t,onStepClick:e})=>{const n={1:"ph ph-hand-waving",2:"ph ph-hospital",3:"ph ph-user-circle-check"};return i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill",children:i.jsx("ul",{className:"nav nav-pills vendar-reg-tab",id:"step-tabs",role:"tablist",children:[1,2,3].map(s=>{const a=We.useRef(null),r=t===s,o=t>s,c=s<=t;return i.jsx(Ci,{nodeRef:a,in:!0,appear:!0,timeout:300,classNames:"step-transition",children:i.jsxs("li",{className:"nav-item",role:"presentation",children:[i.jsxs("a",{className:`nav-link ${o?"complete":""} ${r?"active current":""}`,id:`step-${s}-tab`,"data-bs-toggle":"pill",href:`#step-${s}`,role:"tab","aria-controls":`step-${s}`,"aria-selected":r?"true":"false",tabIndex:r?void 0:"-1",style:{cursor:c?"pointer":"default"},onClick:d=>{d.preventDefault(),c&&e&&e(s)},children:[i.jsxs("span",{className:"no",children:["0",s]}),o&&i.jsx("i",{className:`ph-fill ph-check-circle complete-icon ${o?"icon-transition-active":""}`}),!o&&i.jsx("i",{className:`${n[s]} current-icon ${r?"visible":""}`})]}),i.jsxs("div",{className:"setup-data",children:[i.jsxs("small",{className:"text-primary fw-bold",children:[l("Step","kivicare-clinic-management-system")," ",s]}),i.jsx("h6",{children:s===1?l("Welcome","kivicare-clinic-management-system"):s===2?l("Clinic Basic Detail","kivicare-clinic-management-system"):l("Clinic Admin Detail","kivicare-clinic-management-system")})]})]})},s)})})})})},Qne={clinicImage:null,clinicName:"",clinicEmail:"",specialties:[],contactNumber:"",currencyPrefix:"",currencyPostfix:"",address:"",city:"",country:"",postalCode:"",adminImage:null,firstName:"",lastName:"",adminEmail:"",adminContact:"",dob:"",gender:"",roles:[]},kC={step2Fields:["clinicName","clinicEmail","specialties","contactNumber"],step3Fields:["firstName","lastName","adminEmail","adminContact","gender"]},uP={saveSetupWizard:t=>ve({endpoint:"setup-wizard/save",method:"POST",data:t}),getSetupWizard:()=>ve({endpoint:"setup-wizard",method:"GET"}),completeSetupWizard:t=>ve({endpoint:"setup-wizard/complete",method:"POST",data:t}),setupClinic:t=>{const e={clinic_name:t.clinicName,clinic_email:t.clinicEmail,clinic_contact:t.contactNumber,address:t.address,city:t.city,postal_code:t.postalCode,country:t.country,specialties:t.specialties,clinic_image_id:t.clinicImage?.id||t.clinicImage,firstName:t.firstName,lastName:t.lastName,adminEmail:t.adminEmail,adminContact:t.adminContact,dob:t.dob,gender:t.gender,roles:Array.isArray(t.roles)?t.roles:[]};return t.adminImage&&typeof t.adminImage=="object"&&(e.adminProfile=t.adminImage),ve({endpoint:"setup-wizard/clinic",method:"POST",data:e})},updateStepCompletion:t=>ve({endpoint:"setup-wizard/step-complete",method:"POST",data:{step:t}})},Ak={all:["setup-wizard"],data:()=>[...Ak.all,"data"]},Zne=()=>{const t=Ke();return He({mutationFn:e=>uP.setupClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},Xne=()=>{const t=Ke();return He({mutationFn:e=>uP.updateStepCompletion(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},lf=f.createContext(),Jne=()=>{const{themeSettings:t}=mt(),e=Gn(),n=mn(),s=f.useRef(null),a=l_(),r=()=>{const j=e.pathname;return j.includes("admin-info")?3:j.includes("basic-info")?2:1},[o,c]=f.useState(r()),[d,m]=f.useState([1]);f.useEffect(()=>{const j=r();c(j),d.includes(j)||m(T=>[...T,j])},[e.pathname]);const u=Jt({defaultValues:Qne,mode:"onTouched",shouldUnregister:!1}),{handleSubmit:p,trigger:h,getValues:g}=u,v=Zne(),x=Xne(),y={1:"/clinic-setup",2:"/clinic-setup/basic-info",3:"/clinic-setup/admin-info"},b=async()=>{if(console.log("hit"),o===1){try{await x.mutateAsync({step:1}),d.includes(2)||m(N=>[...N,2]),n("/clinic-setup/basic-info")}catch(N){console.error("Failed to update step completion:",N),Ee.error(l("Failed to update progress","kivicare-clinic-management-system"))}return}const j=o===2?kC.step2Fields:kC.step3Fields;if(await h(j))if(o===2)try{const N=g();await x.mutateAsync({step:2,formData:N}),d.includes(3)||m(E=>[...E,3]),n("/clinic-setup/admin-info")}catch(N){console.error("Failed to update step completion:",N),Ee.error(l("Failed to update progress","kivicare-clinic-management-system"))}else p(k)()},w=()=>{o===2?n("/clinic-setup"):o===3&&n("/clinic-setup/basic-info")},k=async j=>{console.log(" Final form submission with ALL data:",j);try{const T=await v.mutateAsync(j);Ee.success(l("Clinic setup completed successfully!","kivicare-clinic-management-system")),setTimeout(()=>{const N=window.kc_frontend&&window.kc_frontend.dashboard_uri?window.kc_frontend.dashboard_uri:window.location.origin;window.location.href=N},1500)}catch(T){const N=T?.response?.data?.message||T?.message||l("Failed to setup clinic","kivicare-clinic-management-system");Ee.error(N),console.error("Setup clinic error:",T)}},_=j=>{j<=Math.max(...d)&&n(y[j])};return i.jsx(No,{className:"my-5 pt-5",children:i.jsx(Qn,{children:i.jsx(r_,{...u,children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx("img",{className:"logo-normal",src:t.siteLogo,height:"45",alt:"logo"})})}),i.jsx(Yne,{currentStep:o,onStepClick:_}),i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:s,timeout:250,classNames:"fade",unmountOnExit:!0,appear:!0,children:i.jsx("div",{ref:s,className:"step-content",children:a&&i.jsx(lf.Provider,{value:{onNext:b,onPrevious:w,currentStep:o,isLoading:v.isPending||x.isPending},children:a})})},e.pathname.replace(/\/$/,""))})]})})})})},eie=()=>{const{onNext:t}=f.useContext(lf);return i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column",children:[i.jsx("i",{className:"ph ph-hand-waving text-secondary fs-70"}),i.jsxs("div",{className:"text-center",children:[i.jsx("h5",{className:"mb-3",children:l("Welcome to kiviCare","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-5 pb-3",children:l("Explore more features by creating account in kivicare.","kivicare-clinic-management-system")}),i.jsx("span",{className:"py-2 px-5 bg-secondary-subtle border border-secondary rounded-pill setup-wizard-badge h5 m-0",children:l("KiviCare - Clinic and Patient Management System (EHR)","kivicare-clinic-management-system")}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(ht,{className:"btn btn-primary",onClick:t,to:"/clinic-setup/basic-info",children:l("Proceed","kivicare-clinic-management-system")})})]})]})})})},jC=Yc.PhoneNumberUtil.getInstance(),tie=()=>{const{control:t,register:e,formState:n,setValue:s,getValues:a,handleSubmit:r}=pg(),{onNext:o,onPrevious:c}=f.useContext(lf),{errors:d}=n,{data:m,isLoading:u,refetch:p}=Ua("specialization"),h=Lg(),[g]=We.useState(n.submitCount);f.useEffect(()=>{a("currencyPrefix")||s("currencyPrefix","$"),a("currencyPostfix")||s("currencyPostfix","/-")},[]);const v=x=>{try{return jC.isValidNumber(jC.parseAndKeepRawInput(x))}catch{return!1}};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:l("Clinic Basic detail","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Enter basic detail of your clinic and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicName",{required:l("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicName?"is-invalid":""}`,placeholder:l("Enter clinic name","kivicare-clinic-management-system")}),d.clinicName&&i.jsx("div",{className:"invalid-feedback",children:d.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicEmail",{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicEmail?"is-invalid":""}`,placeholder:l("Enter clinic email","kivicare-clinic-management-system")}),d.clinicEmail&&i.jsx("div",{className:"invalid-feedback",children:d.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"specialties",control:t,rules:{required:l("At least one specialization is required","kivicare-clinic-management-system"),validate:{notEmpty:x=>x&&x.length>0||l("At least one specialty is required","kivicare-clinic-management-system")}},render:({field:x})=>i.jsx(du,{id:"specialties",options:m?.data??[],value:x.value,onChange:y=>{x.onChange(y)},onCreateOption:y=>{const b={id:`temp-${Date.now()}`,label:y},w=x.value||[];x.onChange([...w,b]),h.mutate(y,{onSuccess:k=>{if(k?.data?.data){const _=(x.value||[]).map(j=>j.id===b.id?{id:k.data.data.id,label:k.data.data.label}:j);x.onChange(_)}Ee.success(l("specialization added successfully","kivicare-clinic-management-system"))},onError:k=>{console.error("Failed to save specialization:",k),Ee.error(l("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:y=>y.id,placeholder:l("Select or create specialization","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:u,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,noOptionsMessage:()=>l("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:y=>l("Add specialty","kivicare-clinic-management-system")+`: "${y}"`})}),d.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:d.specialties.message}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type a new specialization and press enter to add it","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"contactNumber",control:t,rules:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:x=>x?v(x)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},render:({field:x,fieldState:y})=>i.jsxs(i.Fragment,{children:[i.jsx(so,{...x,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>x.onBlur()},placeholder:l("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:d.contactNumber.message})]})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Currency Prefix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPrefix"),className:"form-control",placeholder:l("e.g. $","kivicare-clinic-management-system"),onChange:x=>s("currencyPrefix",x.target.value)})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Currency Postfix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPostfix"),className:"form-control",placeholder:l("e.g. USD","kivicare-clinic-management-system"),onChange:x=>s("currencyPostfix",x.target.value)})]})})]})}),i.jsx("div",{className:"col-md-4",children:i.jsx(ef,{id:"clinic-logo",name:"clinicLogo",label:l("Clinic Logo","kivicare-clinic-management-system"),register:e,defaultImage:a("clinicLogo")?.url,errors:d,className:"mb-3",onChange:(x,y)=>{s("clinicLogo",x,{shouldValidate:!0,shouldDirty:!0})}})})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("address",{required:l("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.address?"is-invalid":""}`,placeholder:l("Enter clinic address","kivicare-clinic-management-system")}),d.address&&i.jsx("div",{className:"invalid-feedback",children:d.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("City","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("city",{required:l("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.city?"is-invalid":""}`,placeholder:l("Enter city","kivicare-clinic-management-system")}),d.city&&i.jsx("div",{className:"invalid-feedback",children:d.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("country",{required:l("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.country?"is-invalid":""}`,placeholder:l("Enter country","kivicare-clinic-management-system")}),d.country&&i.jsx("div",{className:"invalid-feedback",children:d.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("postalCode",{required:l("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9]+$/,message:l("Invalid postal code format","kivicare-clinic-management-system")}}),className:`form-control ${d.postalCode?"is-invalid":""}`,placeholder:l("Enter postal code","kivicare-clinic-management-system"),onInput:x=>x.target.value=x.target.value.replace(/[^0-9]/g,"")}),d.postalCode&&i.jsx("div",{className:"invalid-feedback",children:d.postalCode.message})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,children:l("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:r(o),type:"button",children:l("Next","kivicare-clinic-management-system")})]})]})})},NC=Yc.PhoneNumberUtil.getInstance(),nie=()=>{const{register:t,control:e,formState:n,setValue:s,getValues:a,handleSubmit:r}=pg(),{onNext:o,onPrevious:c,isLoading:d=!1}=f.useContext(lf),{errors:m}=n,[u]=f.useState(n.submitCount),[p,h]=f.useState(()=>{const k=a("roles");return Array.isArray(k)&&k.length?k:["doctor","receptionist","patient"]}),[g,v]=f.useState(!1),x=k=>{h(_=>_.includes(k)?_.filter(j=>j!==k):[..._,k])},y=()=>{v(!0)},b=()=>{s("roles",p,{shouldDirty:!0,shouldValidate:!1}),v(!1),o()},w=k=>{try{return NC.isValidNumber(NC.parseAndKeepRawInput(k))}catch{return!1}};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:l("Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Enter basic detail of Clinic Admin and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("firstName",{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.firstName?"is-invalid":""}`,placeholder:l("Enter first name","kivicare-clinic-management-system")}),m.firstName&&i.jsx("div",{className:"invalid-feedback",children:m.firstName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("lastName",{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.lastName?"is-invalid":""}`,placeholder:l("Enter last name","kivicare-clinic-management-system")}),m.lastName&&i.jsx("div",{className:"invalid-feedback",children:m.lastName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("adminEmail",{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${m.adminEmail?"is-invalid":""}`,placeholder:l("Enter admin email","kivicare-clinic-management-system")}),m.adminEmail&&i.jsx("div",{className:"invalid-feedback",children:m.adminEmail.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"adminContact",control:e,rules:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:k=>k?w(k)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},render:({field:k,fieldState:_})=>i.jsxs(i.Fragment,{children:[i.jsx(so,{...k,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>k.onBlur()},placeholder:l("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact&&i.jsx("div",{className:"invalid-feedback d-block",children:m.adminContact.message})]})})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Date of Birth","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"dob",control:e,rules:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:k=>{const _=new Date(k),j=new Date;let T=j.getFullYear()-_.getFullYear();const N=j.getMonth()-_.getMonth();return(N<0||N===0&&j.getDate()<_.getDate())&&T--,T>=18||l("Admin must be at least 18 years old","kivicare-clinic-management-system")}},render:({field:k})=>i.jsx(Wn,{...k,className:`form-control ${m.dob?"is-invalid":""}`,placeholder:l("Select date of birth","kivicare-clinic-management-system"),options:{dateFormat:vi(window.kc_frontend.date_format),maxDate:new Date(new Date().setFullYear(new Date().getFullYear()-18)),disableMobile:!0,locale:Kn()},value:k.value?Xn(k.value):"",onChange:_=>{if(_&&_[0]){const j=_[0],T=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(j.getDate()).padStart(2,"0")}`;k.onChange(T)}else k.onChange("")}})}),m.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:m.dob.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("select",{...t("gender",{required:l("Gender is required","kivicare-clinic-management-system")}),className:`form-select ${m.gender?"is-invalid":""}`,children:[i.jsx("option",{value:"",children:l("Select Gender","kivicare-clinic-management-system")}),i.jsx("option",{value:"male",children:l("Male","kivicare-clinic-management-system")}),i.jsx("option",{value:"female",children:l("Female","kivicare-clinic-management-system")}),i.jsx("option",{value:"other",children:l("Other","kivicare-clinic-management-system")})]}),m.gender&&i.jsx("div",{className:"invalid-feedback",children:m.gender.message})]})})]})}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Admin Profile Picture","kivicare-clinic-management-system")}),i.jsx(wl,{id:"admin-profile",name:"adminProfile",label:l("Admin Profile Picture","kivicare-clinic-management-system"),register:t,errors:m,size:230,defaultImage:a("adminProfile")?.url,className:"mb-3",onChange:(k,_)=>{s("adminProfile",k,{shouldValidate:!0,shouldDirty:!0})}})]})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,type:"button",disabled:d,children:l("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:r(y),type:"button",disabled:d,children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Setting up...","kivicare-clinic-management-system")]}):l("Finish","kivicare-clinic-management-system")})]})]}),i.jsxs(rt,{show:g,onHide:()=>v(!1),centered:!0,className:"swal2-modal",children:[i.jsx(rt.Header,{closeButton:!0,className:"border-0 pb-0",children:i.jsx(rt.Title,{className:"swal2-title w-100 text-center",children:l("Create Demo Users","kivicare-clinic-management-system")})}),i.jsx(rt.Body,{className:"text-center pt-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-4 flex-wrap",children:[i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("doctor"),onChange:()=>x("doctor")}),i.jsx("span",{children:l("Doctor","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("receptionist"),onChange:()=>x("receptionist")}),i.jsx("span",{children:l("Receptionist","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("patient"),onChange:()=>x("patient")}),i.jsx("span",{children:l("Patient","kivicare-clinic-management-system")})]})]})}),i.jsxs(rt.Footer,{className:"border-0 justify-content-center pt-0",children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>v(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:b,children:l("Finish","kivicare-clinic-management-system")})]})]})]})},iie=[Yn({path:"",title:"Clinic Setup",outlet:Jne,meta:{description:"Clinic setup wizard",requiresSetup:!0},children:[Ye({index:!0,component:eie,title:"Welcome",props:{stepNumber:1},skeleton:Wne,meta:{description:"Setup wizard welcome page",step:1,stepName:"getting_started"}}),Ye({path:"basic-info",component:tie,title:"Basic Information",props:{stepNumber:2},skeleton:Kne,meta:{description:"Clinic basic information setup",step:2,stepName:"clinic"}}),Ye({path:"admin-info",component:nie,title:"Admin Information",props:{stepNumber:3},skeleton:Gne,meta:{description:"Admin user information setup",step:3,stepName:"clinic_admin"}})]})],sie=()=>{const t=Gn(),e=Fi();Xi();const n=Jn(),s=Vn(),a=Er(),{calanderIntegration:r,googleMeetIntegration:o,zoomIntegration:c,isAddonActive:d,hasCapability:m,module_config:u}=mt();let h=[{id:"general-settings",label:l("General Settings","kivicare-clinic-management-system"),iconClass:"ph ph-tree-structure",link:"/setting/general-setting",allowedRoles:["administrator"]},{id:"holidays",label:l("Holidays","kivicare-clinic-management-system"),iconClass:"ph ph-house-line",link:"/setting/holidays",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"clinic_schedule"},{id:"doctor-session",label:l("Doctor Session","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-check",link:"/setting/doctor-session",allowedRoles:["doctor","receptionist"],capability:"doctor_session_list"},{id:"configurations",label:l("Configurations","kivicare-clinic-management-system"),iconClass:"ph ph-toggle-left",link:"/setting/configurations",allowedRoles:["administrator"]},{id:"app-configuration",label:l("App Configuration","kivicare-clinic-management-system"),iconClass:"ph ph-device-mobile",link:"/setting/app-configuration",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"api"},{id:"email-template",label:l("Email Template","kivicare-clinic-management-system"),iconClass:"ph ph-envelope",link:"/setting/email-template",allowedRoles:["administrator"]},{id:"sms-whatsapp-template",label:l("SMS/WhatsApp Template","kivicare-clinic-management-system"),iconClass:"ph ph-chat-circle-dots",link:"/setting/sms-whatsapp-template",allowedRoles:["administrator"],requiresPro:!0},{id:"webhooks",label:l("Webhooks","kivicare-clinic-management-system"),iconClass:"ph ph-webhooks-logo",link:"/setting/webhooks",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"webhooks"},{id:"custom-notification",label:l("Custom notification","kivicare-clinic-management-system"),iconClass:"ph ph-bell",link:"/setting/custom-notification",allowedRoles:["administrator"],requiresPro:!0},{id:"custom-form",label:l("Custom Form","kivicare-clinic-management-system"),iconClass:"ph ph-table",link:"/setting/custom-form",allowedRoles:["administrator","clinic_admin"],capability:"custom_form_list",requiresPro:!0},{id:"encounter-body-chart",label:l("Encounter body chart","kivicare-clinic-management-system"),iconClass:"ph ph-person",link:"/setting/encounter-body-chart",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"bodyChart"},{id:"patient-setting",label:l("Patient Setting","kivicare-clinic-management-system"),iconClass:"ph ph-user",link:"/setting/patient-setting",allowedRoles:["administrator"]},{id:"widget-setting",label:l("Widget Setting","kivicare-clinic-management-system"),iconClass:"ph ph-gear",link:"/setting/widget-setting",allowedRoles:["administrator"]},{id:"google-event-template",label:l("Google Event Template","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-blank",link:"/setting/google-event-template",allowedRoles:["administrator"],requiresPro:!0},{id:"google-meet",label:l("Google Meet","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"googlemeet"},{id:"google-meet-configuration",label:l("Google Meet Integration","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet-configuration",allowedRoles:["doctor"]},{id:"zoom-telemed",label:l("Zoom Telemed","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-telemed",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"telemed"},{id:"zoom-configuration",label:l("Zoom Telemed setting","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-configuration",allowedRoles:["doctor"]},{id:"listings",label:l("Listings","kivicare-clinic-management-system"),iconClass:"ph ph-list-dashes",link:"/setting/listings",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"static_data_list"},{id:"custom-field",label:l("Custom Field","kivicare-clinic-management-system"),iconClass:"ph ph-magic-wand",link:"/setting/custom-field",allowedRoles:["administrator","clinic_admin"],capability:"custom_field_list",module:"custom_fields"},{id:"pro-settings",label:l("Pro Settings","kivicare-clinic-management-system"),iconClass:"ph ph-wrench",link:"/setting/pro-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"payment",label:l("Payment","kivicare-clinic-management-system"),iconClass:"ph ph-credit-card",link:"/setting/payments",allowedRoles:["administrator"]},{id:"appointment-settings",label:l("Appointment Setting","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-plus",link:"/setting/appointment-settings",allowedRoles:["administrator"]},{id:"permission",label:l("Permission Setting","kivicare-clinic-management-system"),iconClass:"ph ph-lock-simple",link:"/setting/permission",allowedRoles:["administrator"],requiresPro:!0},{id:"sidebar-settings",label:l("Sidebar Setting","kivicare-clinic-management-system"),iconClass:"ph ph-list",link:"/setting/sidebar-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"google-calendar-integration",label:l("Google Calendar Integration","kivicare-clinic-management-system"),iconClass:"ph ph-calendar",link:"/setting/google-calendar-integration",allowedRoles:["doctor","receptionist"]}].filter(v=>{if(v.id==="google-meet-configuration")return d("googlemeet")&&e&&o==="yes";if(v.id==="zoom-configuration")return d("telemed")&&e&&c==="yes";if(v.module&&(u[v.module]??"1")==="0")return!1;if(v.id==="google-calendar-integration")return(e||n)&&r==="yes";const x=v.allowedRoles.some(y=>!!(y==="administrator"&&a||y==="clinic_admin"&&s||y==="doctor"&&e||y==="receptionist"&&n));return v.capability&&!m(v.capability)?!1:x});const g=v=>t.pathname===v.link||t.pathname.startsWith(v.link);return i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:h.map((v,x)=>{const y=g(v),b=v.requiresPro&&!d("kiviPro"),w=v.requiresAddon&&!d(v.addonKey);return i.jsxs(ht,{className:`nav-link ${y?"active":""}`,id:v.id,to:v.link,type:"button","aria-selected":"true",children:[i.jsx("i",{className:v.iconClass}),v.label,b&&i.jsx("span",{className:"pro-badge",children:"PRO"}),w&&i.jsx("span",{className:"addon-badge",children:"ADDON"})]},x)})})})})},aie=()=>{const e=Bm().at?.(-1),{hideSettingSidebar:n,noTransitionAnimation:s=!1}=e.handle,a=f.useRef(null);return i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx(Ci,{in:!n,nodeRef:a,timeout:300,classNames:"sidebar",unmountOnExit:!0,children:i.jsx("div",{className:"col-md-3",children:i.jsx("div",{ref:a,className:"sidebar-wrapper position-sticky top-0",children:i.jsx(sie,{})})})}),i.jsx("div",{className:n?"col-12":"col-md-9",children:s?i.jsx(ko,{}):i.jsx(xs,{})})]})})},rie=()=>i.jsx(pt,{children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"200px",height:"0.875rem"}),i.jsx("hr",{className:"mt-2"})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"d-flex gap-3 mt-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"60px",height:"1rem"})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"120px",height:"1.125rem"}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]}),Array.from({length:2}).map((t,e)=>i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx(S,{width:"24px",height:"24px",style:{borderRadius:"50%"},className:"position-absolute top-0 end-0 mt-1 me-1"}),i.jsx("div",{className:"card-body p-3",children:i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx(S,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]})})]},e))]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]})});function lie(){const{gateway:t}=Yt(),[e,n]=f.useState(!1),s=mn(),{data:a,isLoading:r}=yn("settings","payment-gateway/"+t,{},{enabled:!!t}),{mutateAsync:o}=dn("settings","payment-gateway/"+t),{data:c}=Cn(),d=c?.data?.hideUtilityLinks,{handleSubmit:m,formState:{errors:u},reset:p,control:h,setValue:g,register:v}=Jt({defaultValues:a?.data?.settings||{}}),x=y=>{n(!0),console.log("Form data:",y),o(y).then(()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Settings updated successfully.","kivicare-clinic-management-system")}),s("/setting/payments/"),p(y)}).catch(b=>{const w=b?.response?.data?.message||b.message||l("Failed to update settings.","kivicare-clinic-management-system");Me({title:l("Error Updating Settings","kivicare-clinic-management-system"),text:w})}).finally(()=>{n(!1)})};return f.useEffect(()=>{if(a?.data?.settings){const y=a.data.settings;a.data.fields.forEach(b=>{b.type==="select"?g(b.name,vk(b.options,y[b.name]||"")):g(b.name,y[b.name]||"")})}},[a,p,g]),i.jsxs("div",{className:"manage-payment-setting",children:[i.jsxs("div",{className:"d-flex align-items-center mb-3 justify-content-between",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l(`${t.charAt(0).toUpperCase()+t.slice(1)} Payment Setting `,"kivicare-clinic-management-system"),d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#payment-setting",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:-1,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[l("Back","kivicare-clinic-management-system")," "]})]})]}),i.jsxs("form",{onSubmit:m(x),children:[r?i.jsx(rie,{}):i.jsx(oie,{fields:a?.data?.fields||[],errors:u,control:h,setValue:g,register:v}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e,children:e?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})})})]})]})}const oie=({fields:t,errors:e,control:n,setValue:s,register:a})=>!t||t.length===0?i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body text-center text-muted",children:l("No payment gateway available.","kivicare-clinic-management-system")})}):i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:t.map((r,o)=>r.type==="header"?i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx("h6",{className:"fw-bold",children:r.label}),r.description&&i.jsx("p",{className:"text-muted small mb-0",children:r.description}),i.jsx("hr",{className:"mt-2"})]},o):r.type==="repeater"?i.jsx("div",{className:"col-12",children:i.jsx(cie,{control:n,register:a,setValue:s,errors:e,field:r})},o):i.jsx("div",{className:`col-${r.col||"md-6"}`,children:i.jsxs("div",{className:"form-group",children:[r.type!=="checkbox_switch"&&r.type!=="checkbox"&&i.jsxs("label",{htmlFor:r.name,className:"form-label",children:[r.label,r.validation?.required&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{control:n,name:r.name,rules:r.validation,render:({field:{onChange:c,value:d,ref:m,...u}})=>{if(r.type==="checkbox_switch")return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check form-switch custom-switch-md",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"checkbox",role:"switch",id:r.name,checked:d,onChange:p=>{c(p.target.checked)},...u}),i.jsx("label",{className:"form-check-label",htmlFor:r.name,children:r.label})]}),r.description&&i.jsx("div",{className:"form-text text-muted mt-1",children:r.description}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]});if(["text","email","number","password"].includes(r.type))return i.jsxs(i.Fragment,{children:[i.jsx("input",{type:r.type,id:r.name,className:`form-control ${e[r.name]?"is-invalid":""}`,placeholder:r.placeholder,value:d||"",onChange:c,...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback",children:e[r.name].message})]});if(r.type==="select")return i.jsxs(i.Fragment,{children:[i.jsx(lt,{inputId:r.name,options:r.options,placeholder:l("Select","kivicare-clinic-management-system"),className:`react-select-box ${e[r.name]?"is-invalid":""}`,classNamePrefix:"react-select",value:d,onChange:c,styles:{menuPortal:p=>({...p,zIndex:9999})},...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]});if(r.type==="radio"){const p=r.options||[{value:"on",label:l("On","kivicare-clinic-management-system")},{value:"off",label:l("Off","kivicare-clinic-management-system")}];return i.jsxs("div",{children:[p.map(h=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"radio",id:`${r.name}_${h.value}`,value:h.value,checked:d===h.value,onChange:()=>c(h.value),...u}),i.jsx("label",{className:"form-check-label",htmlFor:`${r.name}_${h.value}`,children:h.label})]},h.value)),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]})}return r.type==="checkbox"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"checkbox",id:r.name,checked:d,onChange:p=>c(p.target.checked),...u}),i.jsx("label",{className:"form-check-label",htmlFor:r.name,children:r.checkboxLabel||r.label})]}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",id:r.name,className:`form-control ${e[r.name]?"is-invalid":""}`,placeholder:r.placeholder,value:d||"",onChange:c,...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]})}})]})},o))})})}),cie=({control:t,register:e,setValue:n,errors:s,field:a})=>{const{fields:r,append:o,remove:c}=kr({control:t,name:a.name}),d=(m,u,p,h)=>i.jsx("div",{className:`col-${m.col||"md-6"}`,children:i.jsxs("div",{className:"form-group mb-0",children:[i.jsxs("label",{className:"form-label small text-muted mb-1",children:[m.label,m.validation?.required&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsx(be,{control:t,name:`${a.name}.${p}.${m.name}`,rules:m.validation,render:({field:{onChange:g,value:v,ref:x,...y},fieldState:{error:b}})=>m.type==="select"?i.jsxs(i.Fragment,{children:[i.jsx(lt,{options:m.options,value:vk(m.options,v),onChange:w=>g(w?w.value:""),className:`react-select-box ${b?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:w=>({...w,zIndex:9999})},placeholder:l("Select","kivicare-clinic-management-system")}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):m.type==="image"?i.jsx(ef,{id:`${a.name}.${p}.${m.name}`,name:`${a.name}.${p}.${m.name}`,defaultImage:v,register:e,setValue:n,onChange:w=>{g(w.url)},errors:b?{[`${a.name}.${p}.${m.name}`]:b}:{},className:"mb-0"}):m.type==="textarea"?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{className:`form-control ${b?"is-invalid":""}`,value:v||"",onChange:g,rows:"2",placeholder:m.placeholder||m.label,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:m.type||"text",className:`form-control ${b?"is-invalid":""}`,value:v||"",onChange:g,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]})})]})},`${u.id}-${m.name}-${h}`);return i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0 fw-bold",children:a.label}),i.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>o({}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),a.add_button_text||l("Add Item","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"repeater-list",children:r.map((m,u)=>{const p=a.fields.filter(v=>v.group==="main"),h=a.fields.filter(v=>v.group==="side"),g=p.length>0&&h.length>0;return i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx("button",{type:"button",className:"btn btn-icon btn-sm text-danger position-absolute top-0 end-0 mt-1 me-1",onClick:()=>c(u),style:{zIndex:10},title:l("Remove","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})}),i.jsx("div",{className:"card-body p-3",children:g?i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row g-2",children:p.map((v,x)=>d(v,m,u,x))})}),i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"row g-2 h-100",children:h.map((v,x)=>d(v,m,u,x))})})]}):i.jsx("div",{className:"row g-2",children:a.fields.map((v,x)=>d(v,m,u,x))})})]},m.id)})})]})},die=()=>i.jsx("div",{className:"settings-container",children:i.jsx(xs,{})}),mie=()=>i.jsx("div",{className:"custom-notification-outlet",children:i.jsx(ko,{})});function uie(){return i.jsx("div",{children:i.jsx(ko,{})})}const hie=()=>i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"sidebar-wrapper position-sticky top-0",children:i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:Array.from({length:20}).map((t,e)=>i.jsxs("div",{className:"nav-link skeleton-nav-link",type:"button",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2"}),i.jsx(S,{width:`${120+Math.random()*80}px`,height:"0.875rem"}),Math.random()>.7&&i.jsx(S,{width:Math.random()>.5?"35px":"60px",height:"0.75rem",className:"ms-auto",style:{borderRadius:"10px"}})]},e))})})})})}),i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})})]}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(S,{width:"140px",height:"38px",style:{borderRadius:"4px"}})})})]})})})})]})}),hP=()=>i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(S,{width:"300px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"170px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(st,{width:"140px",height:"38px"})})})]})})}),pie=()=>i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"120px",height:"1.125rem",className:"mt-2"})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(S,{width:"140px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(st,{width:"120px",height:"36px"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"100px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"100px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mt-3",children:[i.jsx(S,{width:"200px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"60px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})]})}),pP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:i.jsxs("div",{className:"configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"200px",height:"1.125rem"}),i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"90px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"70px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"50px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap gap-4",children:i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"90px",height:"0.875rem"})]})})]})}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx(st,{width:"80px",height:"38px"})})]})}),gP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:"app-configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"280px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px"})})]})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"220px",height:"1.125rem"}),i.jsx(st,{width:"180px",height:"32px"})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"40px",height:"24px",style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})})]},e))})]})})]})]})}),gie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsx("div",{className:"webhook-setting",children:i.jsx("div",{className:"",children:i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:i.jsx(pt,{children:i.jsx(S,{width:"100%",height:"400px",style:{borderRadius:"4px"}})})})})})}),fP=()=>i.jsxs("div",{className:"webhook-form",children:[i.jsxs("div",{className:"d-flex justify-content-end gap-2 mb-3",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"100px"})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"150px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"120px"})})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"180px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"150px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(S,{width:"80px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"90px",height:"28px",style:{borderRadius:"4px"}})]})]}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"140px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-12",children:i.jsx(S,{width:"200px",height:"1rem"})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx(st,{width:"140px"})})]}),CC=()=>i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"200px",height:"1.75rem",className:"mb-1"}),i.jsx(S,{width:"400px",height:"0.875rem"})]}),i.jsx(st,{width:"120px"})]}),i.jsx(fP,{})]}),By=()=>i.jsxs("div",{className:"custom-notification-edit",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"250px",height:"1.75rem",className:"mb-1"}),i.jsx(S,{width:"350px",height:"0.875rem"})]}),i.jsx(st,{width:"140px"})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"130px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsx(Se,{labelWidth:"100px"})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"160px"}),i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"130px"})})]})]})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"160px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsx(Se,{labelWidth:"80px"})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"170px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(S,{width:"120px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"90px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"110px",height:"28px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100%",height:"150px",style:{borderRadius:"4px"}})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"160px"}),i.jsx(st,{width:"140px"}),i.jsx(st,{width:"80px"})]})]}),fie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:"custom-forms-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[i.jsx(S,{width:"150px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx(S,{width:"16px",height:"16px"})}),i.jsx(S,{width:"200px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(st,{width:"120px"})]})]}),i.jsx("div",{className:"table-responsive",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"30px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}}),i.jsx(S,{width:"60px",height:"20px",style:{borderRadius:"10px"}})]})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})})]})})}),qy=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb m-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:i.jsx(S,{width:"100px",height:"1rem"})})]})}),i.jsx(st,{width:"80px"})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 col-md-5 col-lg-4 col-xl-3",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-4",children:[i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"60px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"70px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:[i.jsx(S,{width:"100px",height:"1rem",className:"me-3"}),i.jsx(S,{width:"80px",height:"1rem"})]})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})})]})})]})}),i.jsxs("div",{className:"col-12 col-md-7 col-lg-8 col-xl-9",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx(S,{width:"180px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"120px"})]})]}),i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx(S,{width:"150px",height:"1.25rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row gy-4 custom-form-content",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),Array.from({length:3}).map((t,e)=>i.jsx("div",{className:"col-xl-6 col-12",children:i.jsxs("div",{className:"form-group custom-form-group",children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"},className:"flex-shrink-0 mt-2"}),i.jsx("div",{className:"flex-grow-1",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})},e)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"text-center py-5 border-2 border-dashed border-primary rounded",children:[i.jsx(S,{width:"48px",height:"48px",className:"mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(S,{width:"200px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"300px",height:"1rem"})]})})]})]})]})]})]}),vP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:"encounter-body-chart-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(pt,{children:i.jsxs("form",{children:[i.jsxs("div",{className:"row gy-4 mb-5 pb-3",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"200px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"180px",height:"0.875rem"})]}),i.jsx(st,{width:"100px"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:3}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"},className:"me-2 d-inline-block"}),i.jsx(S,{width:"60px",height:"1rem",className:"d-inline-block"})]})}),i.jsx("td",{children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"4px"}})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})]})}),xP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"140px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"140px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"70px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e)),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"80px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(pt,{children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"110px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Array.from({length:4}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"120px",height:"1rem"})]},e))})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"110px",height:"1.125rem",className:"mb-3"}),Array.from({length:7}).map((t,e)=>i.jsxs("div",{className:"p-3 bg-body mb-2 d-flex align-items-center gap-3",children:[i.jsx(S,{width:"20px",height:"20px"}),i.jsx(S,{width:"180px",height:"1rem"})]},e))]}),i.jsxs(pt,{children:[i.jsx(S,{width:"150px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"140px"})})]})}),yP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-event-template-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"180px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),bP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-meet-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(pt,{children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})})}),i.jsxs(pt,{children:[i.jsxs("div",{className:"row gy-4 pb-4 mb-4 border-bottom",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"90px"})})]}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"250px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"400px",height:"0.875rem"})]})}),i.jsx(S,{width:"150px",height:"1rem",className:"mt-4 mb-3"}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(S,{width:"250px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx(S,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(S,{width:"350px",height:"1rem"})]})]}),i.jsx(S,{width:"500px",height:"0.875rem"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"form-group mb-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),vie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:"position-relative zoom-telemed-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"200px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(S,{width:"250px",height:"1rem"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"280px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(S,{width:"300px",height:"1rem"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px"})})]})})}),wP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"pro-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:11}).map((t,e)=>i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group pro-setting-color",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]})},e))})]})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})},e))})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"120px"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"130px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(st,{width:"130px",className:"mb-4"}),i.jsx(S,{width:"140px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))}),i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(st,{width:"150px",className:"mb-4"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"80px"})})]}),i.jsx("div",{className:"row gy-4 pt-4 mb-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"220px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"400px",height:"0.875rem"})]})}),i.jsx(S,{width:"250px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"150px",height:"1.125rem",className:"mb-3"}),Array.from({length:3}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(pt,{children:[i.jsx(S,{width:"90px",height:"1.125rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"160px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})}),xie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:"webhook-setting",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]})}),i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"row g-3",children:Array.from({length:4}).map((t,e)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx(S,{width:"60px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"50%"}})})]})})})},e))})}),i.jsx("div",{className:"",children:i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-3",role:"tablist",children:[i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Qi={getWebhooks:(t={})=>ve({endpoint:"webhooks",method:"GET",data:t}),getWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"GET"}),createWebhook:t=>ve({endpoint:"webhooks",method:"POST",data:t}),updateWebhook:(t,e)=>ve({endpoint:`webhooks/${t}`,method:"PUT",data:e}),deleteWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"DELETE"}),testWebhook:(t,e={})=>ve({endpoint:`webhooks/${t}/test`,method:"POST",data:e}),getWebhookStats:(t={})=>ve({endpoint:"webhooks/statistics",method:"GET",data:t}),getAvailableEvents:()=>ve({endpoint:"webhooks/events",method:"GET"}),bulkDeleteWebhooks:t=>ve({endpoint:"webhooks/bulk-delete",method:"POST",data:{ids:t}}),updateWebhookStatus:(t,e)=>ve({endpoint:`webhooks/${t}/status`,method:"PATCH",data:{status:e}}),getTableConfig:()=>ve({endpoint:"webhooks/table-config",method:"GET"}),exchangeOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/exchange-token",method:"POST",data:{code:t.code,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl,redirect_uri:t.redirectUri}}),refreshOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/refresh-token",method:"POST",data:{refresh_token:t.refreshToken,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl}}),getWebhookLogs:(t={})=>ve({endpoint:"webhook-logs",method:"GET",data:t}),getWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"GET"}),deleteWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"DELETE"}),bulkDeleteWebhookLogs:t=>ve({endpoint:"webhook-logs",method:"DELETE",data:{ids:t}}),getWebhookLogStats:(t={})=>ve({endpoint:"webhook-logs/stats",method:"GET",data:t}),getWebhookLogsByWebhook:(t,e={})=>ve({endpoint:"webhook-logs",method:"GET",data:{webhook_id:t,...e}}),clearOldLogs:(t=30)=>ve({endpoint:"webhook-logs/clear",method:"POST",data:{days:t}}),exportWebhookLogs:(t={})=>ve({endpoint:"webhook-logs/export",method:"GET",data:t})},Bn={all:["webhooks"],lists:()=>[...Bn.all,"list"],list:t=>[...Bn.lists(),{filters:t}],details:()=>[...Bn.all,"detail"],detail:t=>[...Bn.details(),t],stats:()=>[...Bn.all,"stats"],statsList:t=>[...Bn.stats(),t],events:()=>[...Bn.all,"events"],tableConfig:()=>[...Bn.all,"table-config"]},ks={all:["webhook-logs"],lists:()=>[...ks.all,"list"],list:t=>[...ks.lists(),{filters:t}],details:()=>[...ks.all,"detail"],detail:t=>[...ks.details(),t],stats:()=>[...ks.all,"stats"],statsList:t=>[...ks.stats(),t]},kP=(t={},e={})=>gt({queryKey:Bn.list(t),queryFn:()=>Qi.getWebhooks(t),enabled:e.enabled!==!1,...e}),yie=(t,e={})=>gt({queryKey:Bn.detail(t),queryFn:()=>Qi.getWebhook(t),enabled:!!t,...e}),bie=(t={},e={})=>gt({queryKey:Bn.statsList(t),queryFn:()=>Qi.getWebhookStats(t),enabled:e.enabled!==!1,...e}),wie=(t={})=>gt({queryKey:Bn.tableConfig(),queryFn:()=>Qi.getTableConfig(),...t}),kie=(t={})=>{const e=Ke();return He({mutationFn:n=>Qi.createWebhook(n),onSuccess:n=>{e.invalidateQueries({queryKey:Bn.lists()}),e.invalidateQueries({queryKey:Bn.stats()}),e.setQueryData(Bn.detail(n.id),n)},...t})},jie=(t={})=>{const e=Ke();return He({mutationFn:({id:n,...s})=>Qi.updateWebhook(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Bn.lists()}),e.invalidateQueries({queryKey:Bn.stats()}),e.setQueryData(Bn.detail(s.id),n)},...t})},Nie=(t={})=>{const e=Ke();return He({mutationFn:n=>Qi.deleteWebhook(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Bn.lists()}),e.invalidateQueries({queryKey:Bn.stats()}),e.removeQueries({queryKey:Bn.detail(s)})},...t})},Cie=(t={})=>{const e=Ke();return He({mutationFn:n=>Qi.testWebhook(n.webhookId,{event_name:n.eventName,payload:n.payload}),onSuccess:(n,s)=>{const a=typeof s=="object"?s.webhookId:s;e.invalidateQueries({queryKey:["webhook-logs"]}),e.setQueryData(Bn.detail(a),r=>({...r,lastTested:new Date().toISOString(),testResult:n}))},...t})},Sie=(t={})=>{const e=Ke();return He({mutationFn:({id:n,status:s})=>Qi.updateWebhookStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Bn.lists()}),e.invalidateQueries({queryKey:Bn.stats()}),e.setQueryData(Bn.detail(s.id),n)},...t})},_ie=(t={},e={})=>gt({queryKey:ks.list(t),queryFn:()=>Qi.getWebhookLogs(t),...e}),Eie=(t={})=>{const e=Ke();return He({mutationFn:n=>Qi.deleteWebhookLog(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ks.lists()}),e.invalidateQueries({queryKey:ks.stats()}),e.removeQueries({queryKey:ks.detail(s)})},...t})},Tie=(t={})=>{const e=Ke();return He({mutationFn:n=>Qi.bulkDeleteWebhookLogs(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ks.lists()}),e.invalidateQueries({queryKey:ks.stats()}),s.forEach(a=>{e.removeQueries({queryKey:ks.detail(a)})})},...t})},Aie=()=>{const[t,e]=f.useState({startDate:null,endDate:null}),n={};t.startDate&&t.endDate&&(n.start_date=t.startDate,n.end_date=t.endDate);const{data:s,isLoading:a,error:r,refetch:o}=bie(n),d=[{title:l("Activate Webhook","kivicare-clinic-management-system"),value:"0",key:"active_webhooks",icon:"ph-broadcast"},{title:l("Success Rate","kivicare-clinic-management-system"),value:"0%",key:"success_rate",icon:"ph-check-circle"},{title:l("Failed Deliveries","kivicare-clinic-management-system"),value:"0",key:"failed_deliveries",icon:"ph-warning-circle"},{title:l("Events Today","kivicare-clinic-management-system"),value:"0",key:"events_today",icon:"ph-bell"}].map(m=>{if(s?.data&&s?.data[m.key]!==void 0){let u=s?.data[m.key];return m.key==="success_rate"&&(u=`${u}%`),{...m,value:u.toString()}}return m});return a?i.jsx(xie,{}):i.jsxs("div",{className:"mb-3",children:[r&&i.jsxs("div",{className:"alert alert-danger mb-3",children:[l("Error loading statistics:","kivicare-clinic-management-system")," ",r.message]}),i.jsx("div",{className:"row g-3",children:d.map((m,u)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"heading-color counter mb-2 fw-bold",children:a?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):m.value}),i.jsx("p",{className:"text-body fw-medium mb-0",children:m.title})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx("i",{className:`ph ${m.icon} fs-1 text-primary`})})]})})})},u))})]})},Die=()=>{const{isAddonActive:t}=mt(),e=t("webhooks"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks;return i.jsx("div",{className:"tab-pane active opacity-1 position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:e?"webhook-setting":"p-4",children:[!e&&i.jsx(ci,{text:l("Upgrade to access Webhooks","kivicare-clinic-management-system"),title:l("Premium Feature","kivicare-clinic-management-system"),icon:"ph-lock",link:"https://codecanyon.net/item/kivicare-webhook-addon/54591262"}),i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[l("Webhook","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-webhook/webhook-documentation/getting-started-webhook-documentation/what-is-kivicare-webhook-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]})}),e&&i.jsx(Aie,{}),i.jsxs("div",{className:"",children:[i.jsxs(Rn,{variant:"pills",className:"nav-pill-card mb-3",children:[i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:"/setting/webhooks/configuration",children:l("Configuration","kivicare-clinic-management-system")})}),i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:"/setting/webhooks/events-log",children:l("Events Log","kivicare-clinic-management-system")})}),i.jsx(Rn.Item,{children:i.jsx(Rn.Link,{as:dc,to:"/setting/webhooks/testing",children:l("Testing","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:e?i.jsx(xs,{}):null})]})]})})},Rie=({stepNumber:t,children:e})=>i.jsx("div",{className:"d-flex flex-column items-list",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsxs("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:[l("Step","kivicare-clinic-management-system")," ",t,":"]}),i.jsx("span",{className:"font-size-14 heading-color",children:e})]})}),Pie=()=>{const{isAddonActive:t}=mt(),e=t("telemed"),{data:n,isLoading:s,error:a}=yn("settings","zoom-telemed",{},{enabled:e}),r=dn("settings","zoom-telemed"),{control:o,handleSubmit:c,watch:d,reset:m,setValue:u,formState:{errors:p}}=Jt({defaultValues:{auth_type:"none",client_id:"",client_secret:"",server_to_server_enabled:!1},shouldUnregister:!1}),[h,g]=f.useState(!1),v=d("auth_type");d("server_to_server_enabled");const x=k=>{u("auth_type",k),k==="oauth"&&u("server_to_server_enabled",!1)};f.useEffect(()=>{if(n?.status&&n?.data){const k=n.data,j={auth_type:k.auth_type||"none",client_id:k.client_id||"",client_secret:k.client_secret||""};m(j)}},[n,m]);const y=k=>{g(!0);const _={auth_type:k.auth_type,client_id:k.client_id,client_secret:k.client_secret,server_to_server_enabled:k.server_to_server_enabled?"Yes":"No"};r.mutateAsync(_).then(j=>{console.log(j),j.status===!0?tt({title:l("Success","kivicare-clinic-management-system"),text:l(j.message||"Zoom Telemed settings saved successfully","kivicare-clinic-management-system")}):Me({title:l("Error","kivicare-clinic-management-system"),text:l(j.message||"Failed to save settings","kivicare-clinic-management-system")})}).finally(()=>{g(!1)})},b=[{name:"client_id",label:l("Zoom Telemed Client ID","kivicare-clinic-management-system"),placeholder:l("Enter your Zoom Client ID","kivicare-clinic-management-system"),isRequired:!0},{name:"client_secret",label:l("Zoom Telemed Client Secret","kivicare-clinic-management-system"),placeholder:l("Enter your Zoom Client Secret","kivicare-clinic-management-system"),isRequired:!0}],w=[{step:1,content:i.jsxs(i.Fragment,{children:[l("Sign up or Sign in here","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:l("Zoom market Place portal","kivicare-clinic-management-system")})]})},{step:2,content:i.jsxs(i.Fragment,{children:[l("Click/Hover on Develop button at the right in navigation bar and click on build app","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/develop/create",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:l("Create app","kivicare-clinic-management-system")})]})},{step:3,content:l("Select OAuth and click Create","kivicare-clinic-management-system")},{step:4,content:l("Fill the mandatory information and In the App credentials tag you can see Client ID, Client secret And Redirect URL for OAuth.","kivicare-clinic-management-system")},{step:5,content:l("Copy and Paste Client ID, Client secret And Redirect URL here and click on save button and you are ready to go.","kivicare-clinic-management-system")}];if(a){let k;typeof a=="string"?k=a:a?.response?.data?.message?k=a.response.data.message:a?.message?k=a.message:k=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(k,"kivicare-clinic-management-system")})}return e&&(h||s)?i.jsx(vie,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:`position-relative zoom-telemed-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ci,{title:l("Available In Telemed AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-telemed-addon/29363726?s_rank=9"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Zoom Telemed Configuration","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation-telemed/getting-started-telemed-addon/what-is-kivicare-telemedicine-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!h||!s)&&i.jsxs("form",{onSubmit:c(y),children:[i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(be,{name:"auth_type",control:o,render:({field:k})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomOAuthSwitch",children:l("Enable Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomOAuthSwitch",checked:k.value==="oauth",onChange:_=>x(_.target.checked?"oauth":"none"),disabled:h||s})]})})})}),v==="oauth"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-4",children:[b.map(k=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"mb-3",children:i.jsx(be,{name:k.name,control:o,rules:{required:k.isRequired?`${k.label} is required`:!1},render:({field:_})=>i.jsxs(i.Fragment,{children:[i.jsxs("label",{htmlFor:_.name,className:"form-label",children:[k.label,k.isRequired&&i.jsx("span",{className:"input-field-required text-danger ms-1",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${p[k.name]?" is-invalid":""}`,id:_.name,name:_.name,placeholder:k.placeholder,value:_.value,onChange:_.onChange}),p[k.name]&&i.jsx("div",{className:"invalid-feedback",children:p[k.name].message})]})})})},k.name)),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Redirect URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:n?.data?.redirect_url||"",readOnly:!0,disabled:!0}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>navigator.clipboard.writeText(n?.data?.redirect_url||""),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:l("Add this URL to your Zoom app's redirect URLs","kivicare-clinic-management-system")})]})})]}),i.jsx("h6",{className:"text-secondary font-size-14 mt-4",children:l("Guide to setup Zoom Telemed with OAuth","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:w.map(k=>i.jsx(Rie,{stepNumber:k.step,children:k.content},k.step))})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(be,{name:"auth_type",control:o,render:({field:k})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomServerSwitch",children:l("Enable Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomServerSwitch",checked:k.value==="server-to-server",onChange:_=>x(_.target.checked?"server-to-server":"none"),disabled:h||s})]})})})}),v==="server-to-server"&&i.jsx("div",{className:"alert alert-info mb-4 bg-info-subtle",children:l("After enabling this, each doctor must configure their Server-to-Server in their own settings","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})]})})})},SC=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"40px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx(st,{width:"70px"}),i.jsx(st,{width:"80px"})]})]})})}),jP=()=>i.jsx("div",{className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"280px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(S,{width:"100%",height:"0.875rem",className:"mt-2"}),i.jsx(S,{width:"80%",height:"0.875rem"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"90%",height:"0.875rem",className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mt-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})})]})})}),NP=()=>i.jsxs("div",{className:"permission-setting p-4 position-relative overflow-hidden z-0",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"160px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"permission-setting-tabs",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"100px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:15}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"tab-content mt-2",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsx("div",{className:"permission-switches",children:Array.from({length:12}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"200px",height:"1rem"}),i.jsx(S,{width:"60px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsx(S,{width:"50px",height:"20px",style:{borderRadius:"10px"}})]},e))})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px",height:"38px"})})]})]}),CP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:"sidebar-setting p-4",children:[i.jsx("h6",{className:"setting-title mb-3",children:i.jsx(S,{width:"160px",height:"1.25rem"})}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",children:i.jsx(S,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(S,{width:"90px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsxs("div",{className:"sidebar-items bg-gray-900",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"40px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"50px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"50px",height:"1.125rem",className:"bg-white"})})})]}),Array.from({length:15}).map((t,e)=>i.jsx("div",{style:{paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"20px",height:"20px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-3",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:i.jsx(S,{width:"24px",height:"24px"})})]})},e))]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx(S,{width:"130px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(S,{width:"70px",height:"38px",style:{borderRadius:"4px"}})]})})]})})}),SP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"180px",height:"1.5rem"}),i.jsx(S,{width:"1rem",height:"1rem",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"250px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"38px"})})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx(S,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Mie=()=>i.jsxs(No,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"200px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"400px",height:"1rem"})]}),i.jsxs(Qn,{className:"g-4",children:[i.jsx(_t,{lg:6,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{children:[i.jsx(Ct.Title,{className:"d-flex align-items-center",children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx(Ct.Subtitle,{className:"text-muted small",children:i.jsx(S,{width:"250px",height:"0.875rem"})})]}),i.jsx(Ct.Body,{children:i.jsxs(Qn,{className:"g-3",children:[i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(st,{width:"100px",height:"31px"})]}),i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100%",height:"38px",className:"flex-fill"}),i.jsx(st,{width:"100px",height:"38px"})]})})]})})]})}),i.jsx(_t,{lg:6,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{children:[i.jsx(Ct.Title,{children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx(Ct.Subtitle,{className:"text-muted",children:i.jsx(S,{width:"300px",height:"0.875rem"})})]}),i.jsx(Ct.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"hidden"},children:i.jsx("div",{className:"d-grid gap-3",children:[1,2,3].map(t=>i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2 pb-1"}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:[1,2].map(e=>i.jsx("div",{className:"p-3 border rounded",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"0.75rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1.25rem",style:{borderRadius:"10px"}}),i.jsx(S,{width:"16px",height:"16px"})]})]})},e))})]},t))})})})]})})]}),i.jsx(Qn,{className:"mt-4",children:i.jsx(_t,{xs:12,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{children:[i.jsx(Ct.Title,{children:i.jsx(S,{width:"120px",height:"1.5rem"})}),i.jsx(Ct.Subtitle,{className:"text-muted",children:i.jsx(S,{width:"250px",height:"0.875rem"})})]}),i.jsx(Ct.Body,{children:i.jsxs("div",{className:"text-center py-5",children:[i.jsx(S,{width:"60px",height:"60px",className:"d-block mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(S,{width:"300px",height:"1rem",className:"mx-auto"})]})})]})})})]}),of=()=>i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsx(S,{width:"80px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"250px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:Array.from({length:6}).map((t,e)=>i.jsx(S,{width:"100px",height:"2rem",style:{borderRadius:"4px"}},e))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(S,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),Iie=[{key:"doctor",label:l("Default status when doctor register","kivicare-clinic-management-system")},{key:"receptionist",label:l("Default status when Receptionist register","kivicare-clinic-management-system")},{key:"patient",label:l("Default status when patient register","kivicare-clinic-management-system")}],Oie={kiviCare_doctor:"doctor",kiviCare_receptionist:"receptionist",kiviCare_patient:"patient"},_C=[{key:Nx(),label:l("Clinic Admin","kivicare-clinic-management-system")},{key:mc(),label:l("Doctor","kivicare-clinic-management-system")},{key:uc(),label:l("Receptionist","kivicare-clinic-management-system")},{key:dl(),label:l("Patient","kivicare-clinic-management-system")}],Lie="https://www.google.com/recaptcha/admin",Dd={hideUtilityLinks:"off",hideLanguageSwitcher:"off",currencyPrefix:"",currencyPostfix:"",countryCode:"us",countryDialCode:"+44",status:{doctor:"off",receptionist:"off",patient:"on"},role:{[mc()]:"on",[uc()]:"on",[dl()]:"on"},enableRecaptcha:"off",recaptchaSiteKey:"",recaptchaSecretKey:"",showOtherGender:"on",loginRedirects:{[Nx()]:"",[mc()]:"",[uc()]:"",[dl()]:""},logoutRedirects:{[Nx()]:"",[mc()]:"",[uc()]:"",[dl()]:""},allowEncounterEdit:"off"},Fie=({setting:t,registrationSetting:e,watchedRoles:n,control:s,errors:a,isLoading:r,getBadge:o})=>{const c=n?.[t.key]==="on",d=m=>m===!0||m==="on"?"on":"off";return i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(be,{name:`role.${t.key}`,control:s,render:({field:m})=>i.jsx(sn,{label:t.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:r,error:a.role?.[t.key]})}),i.jsx("div",{className:`kivi-collapse ${c&&e?"show":""}`,children:c&&e&&i.jsx("div",{className:"ms-4",children:i.jsx(be,{name:`status.${e.key}`,control:s,render:({field:m})=>i.jsx(sn,{label:e.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:r,error:a.status?.[e.key]})})})})]})},$ie=({error:t})=>(f.useEffect(()=>{if(t){let e;typeof t=="string"?e=t:t?.response?.data?.message?e=t.response.data.message:t?.message?e=t.message:e=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(e,"kivicare-clinic-management-system")})}},[t]),null),Bie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(!1),a=f.useRef(null),{data:r,isLoading:o,error:c}=yn("settings","general",{},{enabled:!0}),d=dn("settings","general"),{data:m}=Cn(),u=m?.data?.hideUtilityLinks,{control:p,handleSubmit:h,watch:g,setValue:v,reset:x,formState:{errors:y}}=Jt({defaultValues:Dd}),b=g("enableRecaptcha"),w=g("role"),k=f.useMemo(()=>[{key:mc(),label:l("Doctor Role","kivicare-clinic-management-system")},{key:uc(),label:l("Receptionist Role","kivicare-clinic-management-system")},{key:dl(),label:l("Patient Role","kivicare-clinic-management-system")}],[]),_=f.useCallback(E=>({text:E==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:E==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),[]),j=f.useCallback(E=>{const A={...E};if(!A.role)A.role={...Dd.role};else{const C={...Dd.role};Object.keys(C).forEach(P=>{if(A.role[P]===void 0||A.role[P]===null)A.role[P]=C[P];else{const R=A.role[P];A.role[P]=R===!0||R==="on"?"on":"off"}})}if(!A.status)A.status={...Dd.status};else{const C={...Dd.status};Object.keys(C).forEach(P=>{if(A.status[P]===void 0||A.status[P]===null)A.status[P]=C[P];else{const R=A.status[P];A.status[P]=R===!0||R==="on"?"on":"off"}})}return["hideUtilityLinks","hideLanguageSwitcher","enableRecaptcha","showOtherGender","allowEncounterEdit"].forEach(C=>{if(A[C]!==void 0){const P=A[C];A[C]=P===!0||P==="on"?"on":"off"}}),(!A.countryCode||A.countryCode===null)&&(A.countryCode="us"),(!A.countryDialCode||A.countryDialCode===null)&&(A.countryDialCode="+44"),(!A.currencyPrefix||A.currencyPrefix===null)&&(A.currencyPrefix=""),(!A.currencyPostfix||A.currencyPostfix===null)&&(A.currencyPostfix=""),(!A.recaptchaSiteKey||A.recaptchaSiteKey===null)&&(A.recaptchaSiteKey=""),(!A.recaptchaSecretKey||A.recaptchaSecretKey===null)&&(A.recaptchaSecretKey=""),A},[]);f.useEffect(()=>{if(r?.data){const E=j(r.data);x(E)}},[r,x,j]);const T=f.useCallback(async E=>{try{e(""),s(!0);const A=j(E);if(!Object.values(A.role||{}).some(P=>P==="on")){e(l("At least one user registration role must be enabled.","kivicare-clinic-management-system")),a.current?.scrollIntoView({behavior:"smooth"}),a.current?.classList.add("highlight-section"),setTimeout(()=>{a.current?.classList.remove("highlight-section")},2e3);return}if(A.enableRecaptcha==="on"&&(!A.recaptchaSiteKey.trim()||!A.recaptchaSecretKey.trim())){e(l("Both Site Key and Secret Key are required when reCAPTCHA is enabled.","kivicare-clinic-management-system"));return}const C=await d.mutateAsync(A);C.status?tt({title:l("Success","kivicare-clinic-management-system"),text:l(C.message,"kivicare-clinic-management-system")}):Me({title:l("Error","kivicare-clinic-management-system"),text:l(C.message,"kivicare-clinic-management-system")}),C.status?e(""):e(C.message)}catch(A){console.error("Failed to save settings:",A),Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings. Please try again.","kivicare-clinic-management-system")})}finally{s(!1)}},[d,j]),N=f.useCallback(E=>{const A=E?.iso2||"us",L=E?.dialCode?`+${E.dialCode}`:"+1";v("countryCode",A),v("countryDialCode",L)},[v]);return c?i.jsx($ie,{error:c}):o?i.jsx(hP,{}):i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx("form",{onSubmit:h(T),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Utility Links Setting","kivicare-clinic-management-system"),children:i.jsx(be,{name:"hideUtilityLinks",control:p,render:({field:E})=>i.jsx(sn,{label:l("Hide all utility links : Request features | Get Help | Documentation. ","kivicare-clinic-management-system"),checked:E.value,onChange:A=>{const L=A===!0||A==="on"?"on":"off";E.onChange(L)},disabled:n,error:y.hideUtilityLinks})})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Language Display Settings","kivicare-clinic-management-system"),children:i.jsx(be,{name:"hideLanguageSwitcher",control:p,render:({field:E})=>i.jsx(sn,{label:l("Hide Language Switcher in Header","kivicare-clinic-management-system"),checked:E.value,onChange:A=>{const L=A===!0||A==="on"?"on":"off";E.onChange(L)},disabled:n,error:y.hideLanguageSwitcher})})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Currency Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(be,{name:"currencyPrefix",control:p,render:({field:E})=>i.jsx(Ht,{label:l("Currency Prefix","kivicare-clinic-management-system"),value:E.value,onChange:E.onChange,placeholder:l("Enter currency prefix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPrefix})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(be,{name:"currencyPostfix",control:p,render:({field:E})=>i.jsx(Ht,{label:l("Currency Postfix","kivicare-clinic-management-system"),value:E.value,onChange:E.onChange,placeholder:l("Enter currency postfix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPostfix})})})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Country Code Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Default Country Code For Contact","kivicare-clinic-management-system")}),i.jsx(be,{name:"countryCode",control:p,render:({field:E})=>{const A=typeof E.value=="string"&&E.value.length===2?E.value.toLowerCase():"us",L=bI({field:"iso2",value:A}),C=L?`+${L.dialCode}`:g("countryDialCode")||"+44";return i.jsx("div",{className:"react-international-phone",children:i.jsx(wI,{className:"col-md-6",selectedCountry:A,onSelect:P=>{E.onChange(P.iso2),N(P)},renderButtonWrapper:({children:P,rootProps:R})=>i.jsxs("div",{className:"kivicare-country-code-field d-flex align-items-center gap-2 px-3 py-2 rounded border cursor-pointer",style:{minHeight:"38px"},onClick:R.onClick,onKeyDown:R.onKeyDown,onMouseDown:R.onMouseDown,role:R.role,"aria-haspopup":R["aria-haspopup"],"aria-expanded":R["aria-expanded"],tabIndex:0,title:R.title,children:[i.jsx(kI,{iso2:A,style:{width:24,height:18}}),i.jsx("span",{className:"text-body flex-grow-1",children:C}),i.jsx("span",{className:"d-inline-block opacity-75","aria-hidden":"true",children:i.jsx("i",{class:"ph ph-caret-down"})})]}),dropdownStyleProps:{className:"country-selector-dropdown"}})})}}),(y.countryCode||y.countryDialCode)&&i.jsx("div",{className:"text-danger mt-1",children:y.countryCode?.message||y.countryDialCode?.message})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx("h4",{children:l("Registration Shortcode Setting","kivicare-clinic-management-system")}),i.jsx(Ta,{title:l("Allowed User Role","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#4-registration-shortcode-settings"},children:i.jsx("div",{className:"d-flex flex-column row-gap-3",ref:a,children:k.map(E=>{const A=Oie[E.key],L=Iie.find(C=>C.key===A);return i.jsx(Fie,{setting:E,registrationSetting:L,watchedRoles:w,control:p,errors:y,isLoading:n,getBadge:_},E.key)})})})]}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Google Recaptcha Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#5-google-recaptcha-settings"},children:i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(be,{name:"enableRecaptcha",control:p,render:({field:E})=>i.jsx(sn,{label:l("Enable Recaptcha","kivicare-clinic-management-system"),checked:E.value,onChange:A=>{const L=A===!0||A==="on"?"on":"off";E.onChange(L)},badge:_(E.value),disabled:n,error:y.enableRecaptcha})}),b==="on"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(be,{name:"recaptchaSiteKey",control:p,render:({field:E})=>i.jsx(Ht,{label:l("Recaptcha Site Key","kivicare-clinic-management-system"),value:E.value,onChange:E.onChange,placeholder:l("Enter site key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSiteKey})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(be,{name:"recaptchaSecretKey",control:p,render:({field:E})=>i.jsx(Ht,{label:l("Recaptcha Secret Key","kivicare-clinic-management-system"),value:E.value,onChange:E.onChange,placeholder:l("Enter secret key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSecretKey})})})]}),i.jsx("a",{href:Lie,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-decoration-none",children:l("Please Click Here To Create New Site and a Secret Key","kivicare-clinic-management-system")})]}),t&&i.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:t})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Other Gender Setting","kivicare-clinic-management-system"),children:i.jsx(be,{name:"showOtherGender",control:p,render:({field:E})=>i.jsx(sn,{label:l("Show Other Gender Option","kivicare-clinic-management-system"),checked:E.value,onChange:A=>{const L=A===!0||A==="on"?"on":"off";E.onChange(L)},badge:_(E.value),disabled:n,error:y.showOtherGender})})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Login Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#7-login-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(E=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(be,{name:`loginRedirects.${E.key}`,control:p,render:({field:A})=>i.jsx(Ht,{label:`${E.label} ${l("Login Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:l("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.loginRedirects?.[E.key]})})},E.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Logout Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#8-logout-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(E=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(be,{name:`logoutRedirects.${E.key}`,control:p,render:({field:A})=>i.jsx(Ht,{label:`${E.label} ${l("Logout Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:l("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.logoutRedirects?.[E.key]})})},E.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ta,{title:l("Encounter Setting","kivicare-clinic-management-system"),children:i.jsx(be,{name:"allowEncounterEdit",control:p,render:({field:E})=>i.jsx(sn,{label:l("Allow Encounter Edit After Close","kivicare-clinic-management-system"),checked:E.value,onChange:A=>{const L=A===!0||A==="on"?"on":"off";E.onChange(L)},badge:_(E.value),disabled:n,error:y.allowEncounterEdit})})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})})})]})})})})},EC=({value:t,onChange:e,placeholder:n,error:s,id:a})=>i.jsx(Wn,{value:t,onChange:r=>{if(r&&r.length>0){const o=r[0],c=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`;e(c)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Kn()},className:`form-control d-none ${s?"is-invalid":""}`,placeholder:n,id:a}),ex=({isEditing:t=!1,isAdding:e=!1,...n})=>{const{id:s}=Yt(),a=mn(),r=Ke(),{isAddonActive:o,userRole:c,currentDoctorId:d,hasCapability:m,defaultClinicId:u}=mt(),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,g=t||e,[v,x]=f.useState(!1),[y,b]=f.useState([]),[w,k]=f.useState(""),[_,j]=f.useState(null),[T,N]=f.useState([]),[E,A]=f.useState([]),[L,C]=f.useState(!0),[P,R]=f.useState({module_type:"",scheduleDate:"",module_id:""}),[M,O]=f.useState("range"),[q,U]=f.useState([]),[H,ae]=f.useState(!1),[V,pe]=f.useState({start_time:"09:00",end_time:"17:00"}),[oe,ne]=f.useState({module_type:"",scheduleDate:"",module_id:""}),se=o("kiviPro"),W=c==="kiviCare_doctor",ge=Za(w,500),ee=On(),ie=f.useMemo(()=>{let z="",X="";W&&d?(z="doctor",X=d):oe.module_type&&oe.module_id&&(z=typeof oe.module_type=="object"?oe.module_type.id:oe.module_type,X=typeof oe.module_id=="object"?oe.module_id.id:oe.module_id);const fe={module_type:z,module_id:X};return t&&s&&(fe.exclude_id=s),fe},[oe.module_type,oe.module_id,W,d,t,s]),{data:ue}=JX(ie),G=f.useMemo(()=>ue?.data?.disabled_dates?ue.data.disabled_dates:[],[ue]),le=async({page:z,per_page:X,search:fe})=>{try{const _e={dataType:"clinicList",page:z,per_page:X,search:fe};return await r.fetchQuery({queryKey:ut.list(_e),queryFn:()=>Et.getStaticData(_e),staleTime:300*1e3})}catch(_e){return console.error("Error loading clinics:",_e),{options:[]}}},re=async({page:z,per_page:X,search:fe})=>{try{const _e={dataType:"staticData",staticDataType:"doctors",page:z,per_page:X,search:fe};return(c==="kiviCare_clinic_admin"||c==="kiviCare_receptionist")&&u&&(_e.clinic_ids=u),await r.fetchQuery({queryKey:ut.list(_e),queryFn:()=>Et.getStaticData(_e),staleTime:300*1e3})}catch(_e){return console.error("Error loading doctors:",_e),{options:[]}}},[D,I]=f.useState({page:1,perPage:10,searchTerm:"",name:"",module_type:"",module_id:"",orderby:"id",order:"desc"}),{data:ce,isLoading:Z,error:K}=Np({dataType:"staticData",staticDataType:"clinics"},{enabled:!0}),{data:B,isLoading:F}=Np({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),J=dn("settings","holidays/update"),Q=dn("settings","holidays/delete"),me=ZX(),te=f.useMemo(()=>Object.fromEntries(Object.entries(D).filter(([z,X])=>X!==""&&X!==null&&X!==void 0)),[D]),{data:Y,isLoading:Ce}=yn("settings","holidays",te,{enabled:!0}),ye=f.useMemo(()=>[{id:"clinic",label:l("Clinic","kivicare-clinic-management-system")},{id:"doctor",label:l("Doctor","kivicare-clinic-management-system")}],[]);f.useEffect(()=>{W&&d&&I(z=>({...z,module_type:"doctor",module_id:d}))},[W,d]),f.useEffect(()=>{ce?.status&&ce?.data&&N(ce.data),Y?.status&&Y?.data&&(b(Y.data.data||[]),Y.data.pagination&&Ut(Y.data.pagination)),B?.status&&B?.data&&A(B.data)},[ce,B,Y]),f.useEffect(()=>{if(t&&s&&y.length>0){const z=y.find(X=>String(X.id)===String(s));if(W&&z&&z.module_type_label==="clinic"){a("/setting/holidays",{replace:!0});return}z&&j(z)}else if(e)if(O("range"),U([]),ae(!1),pe({start_time:"09:00",end_time:"17:00"}),W){const z=E.find(X=>X.id===d);ne({module_type:{id:"doctor",label:l("Doctor","kivicare-clinic-management-system")},scheduleDate:"",module_id:z||{id:d,label:""}})}else ne({module_type:"",scheduleDate:"",module_id:""})},[t,e,s,y,W,d,E,a]),f.useEffect(()=>{I(z=>({...z,searchTerm:ge,page:1}))},[ge]);const Te=f.useCallback(z=>{dt({title:l("Delete Schedule?","kivicare-clinic-management-system"),text:l("You're about to delete this holiday.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep holiday","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(X=>{X.isConfirmed&&(ft({title:l("Deleting Schedule...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected holiday.<br>This won't take long.","kivicare-clinic-management-system")}),Q.mutate({id:z},{onSuccess:fe=>{tt({title:l("Schedule Deleted","kivicare-clinic-management-system"),text:fe?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to holidays","kivicare-clinic-management-system")}),r.invalidateQueries(["settings","listing"])},onError:fe=>{console.error("Delete clinic error:",fe);const _e=fe?.response?.data?.message||fe?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:_e,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},[Q,r]),et=f.useMemo(()=>[ee.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),cell:z=>z.getValue()}),ee.accessor("module_type_label",{header:()=>l("Schedule of","kivicare-clinic-management-system"),cell:z=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:z.row.original.module_type_label})})}),ee.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:z=>z.getValue()}),ee.display({id:"date",meta:{width:"35%"},header:()=>l("Date","kivicare-clinic-management-system"),cell:z=>{const X=z.row.original,fe=X.selection_mode||"range",_e=2;if(fe==="single"){const ze=X.start_date;return ze?i.jsx("div",{className:"d-flex flex-wrap gap-1",children:i.jsx("span",{className:"badge bg-info-subtle text-info",children:ze})}):i.jsx("span",{className:"text-muted",children:""})}if(fe==="range"){const ze=X.start_date,Je=X.end_date,nt=ze&&Je?`${ze} - ${Je}`:ze||Je;return nt?i.jsx("div",{className:"d-flex flex-wrap gap-1",children:i.jsx("span",{className:"badge bg-info-subtle text-info",children:nt})}):i.jsx("span",{className:"text-muted",children:""})}if(fe==="multiple"&&Array.isArray(X.selected_dates_formated)&&X.selected_dates_formated.length>0){const Je=[...X.selected_dates_formated].sort();return i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[Je.slice(0,_e).map((nt,at)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:nt},at)),Je.length>_e&&i.jsx(Ue,{placement:"top",overlay:nt=>i.jsx(it,{id:`tooltip-holiday-dates-${X.id}`,...nt,children:Je.slice(_e).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",Je.length-_e]})})]})}return i.jsx("span",{className:"text-muted",children:""})}}),...m("clinic_schedule_edit")||m("clinic_schedule_delete")?[ee.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:z=>{const X=z.row.original,fe=X.module_type_label==="clinic",_e=!(W&&fe);return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[m("clinic_schedule_edit")&&_e&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`/setting/holidays/edit/${X.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5"})})}),m("clinic_schedule_delete")&&_e&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",onClick:()=>Te(X.id),className:"btn btn-link text-danger p-0",children:i.jsx("i",{className:"ph ph-trash fs-5"})})})]})},enableSorting:!1})]:[]],[ee,Te,m]),kt=f.useCallback(z=>{k(z.target.value)},[]);f.useEffect(()=>{if(_){const z=ye.find(Je=>Je.id===_.module_type_label),X=Je=>new Date(Je).toISOString().slice(0,10);let fe=null;_.module_type_label==="clinic"?fe=T.find(Je=>String(Je.id)===String(_.module_id)):_.module_type_label==="doctor"&&(fe=E.find(Je=>String(Je.id)===String(_.module_id)));const _e=_.selection_mode||"range";O(_e),_e==="multiple"&&Array.isArray(_.selected_dates)&&U(_.selected_dates);const ze=!!_.time_specific;ae(ze),pe(ze?{start_time:_.start_time||"09:00",end_time:_.end_time||"17:00"}:{start_time:"09:00",end_time:"17:00"}),ne({id:Number(_.id),module_type:z||"",scheduleDate:{start:X(_.start_date_raw),end:X(_.end_date_raw)},module_id:fe||""})}},[_,T,E,ye]);const At=()=>{a("/setting/holidays/add")},qt=()=>{a("/setting/holidays")},Ie=()=>{a("/setting/holidays")},De=async()=>{const z=M==="multiple"?q.length>0:!!oe.scheduleDate,X=W?z:!!(oe.module_type&&z&&oe.module_id);if(H&&(!V.start_time||!V.end_time)){R(fe=>({...fe,scheduleDate:l("Start time and end time are required for time-specific holidays.","kivicare-clinic-management-system")})),C(!1);return}if(H&&V.start_time>=V.end_time){R(fe=>({...fe,scheduleDate:l("End time must be after start time.","kivicare-clinic-management-system")})),C(!1);return}if(!X){R({module_type:!W&&!oe.module_type?l("Module Type is required.","kivicare-clinic-management-system"):"",scheduleDate:z?"":l("Schedule Date is required.","kivicare-clinic-management-system"),module_id:!W&&!oe.module_id?l("Module ID is required.","kivicare-clinic-management-system"):""}),C(!1);return}dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("All the appointments on the selected date will be cancelled.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, save","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(async fe=>{if(fe.isConfirmed){x(!0);try{const _e={...oe,selectionMode:M,selectedDates:M==="multiple"?q:void 0,timeSpecific:H,...H&&{start_time:V.start_time,end_time:V.end_time}},ze=await J.mutateAsync(_e);await r.invalidateQueries(["settings","holidays"]),ze.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l(ze.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):tt({title:l("Success","kivicare-clinic-management-system"),text:l(ze.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),x(!1),a("/setting/holidays"),ne({module_type:"",scheduleDate:"",module_id:""}),_&&j(null),R({module_type:"",scheduleDate:"",module_id:""}),C(!0)}catch(_e){x(!1),console.error("Error submitting form:",_e),Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save holiday. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}}})};f.useEffect(()=>{if(K){let z;typeof K=="string"?z=K:K?.response?.data?.message?z=K.response.data.message:K?.message?z=K.message:z=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(z,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}},[K]);const[xe,ke]=f.useState(!1),Oe=async z=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const X={format:z,...te},fe=await me.mutateAsync(X);if(!fe.status||!fe.data||!fe.data.holidays)throw new Error(fe.message||l("Failed to retrieve export data","kivicare-clinic-management-system"));const _e=new Date().toISOString().split("T")[0],ze=fe.data.holidays;switch(z){case"csv":gs(ze,`holidays-${_e}.csv`);break;case"xls":fs(ze,`holidays-${_e}.xls`);break;case"pdf":vs(ze,`holidays-${_e}.pdf`,"Holidays List");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(X){console.error("Export error:",X),Me({title:l("Error!","kivicare-clinic-management-system"),text:X.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},Qe=z=>{if(z==="pdf"){if(xe)return;ke(!0),Oe("pdf"),setTimeout(()=>ke(!1),2e3)}else Oe(z)},ct=()=>m("clinic_schedule_export")?i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Qe("csv"),children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Qe("xls"),children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Qe("pdf"),children:i.jsx("i",{className:"ph ph-file-pdf"})})})]}):null,[Tt,Ut]=f.useState({total:0,lastPage:1,perPage:10,currentPage:1}),yt=z=>{I(X=>({...X,page:z}))},Ae=z=>{I(X=>({...X,page:1,perPage:z}))},Be=z=>{const X=z[0];I(X?fe=>({...fe,page:1,orderby:X.id,order:X.desc?"desc":"asc"}):fe=>({...fe,page:1,orderby:"id",order:"desc"}))};return i.jsx("div",{className:"tab-content",id:"v-pills-tabContent",children:i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-holidays",role:"tabpanel","aria-labelledby":"v-pills-holidays-tab",tabIndex:"0",children:g?i.jsxs("div",{className:"add-holiday-setting",children:[i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-header border-0 pb-0 d-flex align-items-center  justify-content-between ",children:[i.jsxs("div",{className:"custom-header ",children:[i.jsx("h4",{className:"card-title mb-2",children:e?l("Add Holiday","kivicare-clinic-management-system"):l("Edit Holiday","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:e?l("Create and  schedule a new holiday event for your clinic locations.","kivicare-clinic-management-system"):l("Update the holiday event details.","kivicare-clinic-management-system")})]}),i.jsxs("button",{onClick:qt,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-4",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row g-3",children:[!W&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"holidayOf",className:"form-label",children:[l("Holiday Category","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(lt,{placeholder:l("Select Category","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:ye,getOptionValue:z=>z.id,getOptionLabel:z=>z.label,onChange:z=>{P?.module_type&&(R(X=>({...X,module_type:""})),C(!0)),ne(X=>({...X,module_type:z||"",module_id:""}))},value:oe.module_type||null,isSearchable:!1,isClearable:!0,error:!!P?.module_type,styles:{menuPortal:z=>({...z,zIndex:9999})}},"holiday-of-select"),P?.module_type&&i.jsx("div",{className:"text-danger mt-1",children:P.module_type})]})}),!W&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"doctor",className:"form-label",children:[oe.module_type?.id==="doctor"?l("Target Doctor","kivicare-clinic-management-system"):l("Target Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Xt,{className:"w-100 react-select-box",classNamePrefix:"react-select",loadOptions:oe.module_type?.id==="doctor"?re:le,onChange:z=>{P?.module_id&&(R(X=>({...X,module_id:""})),C(!0)),ne(X=>({...X,module_id:z||""}))},value:oe.module_id||null,isSearchable:!0,isClearable:!0,isDisabled:!oe.module_type,error:!!P?.module_id},`form-module-select-${oe.module_type?.id}`),P?.module_id&&i.jsx("div",{className:"text-danger mt-1",children:P.module_id})]})})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Date Selection Mode","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsxs("div",{className:"btn-group w-100 mb-3",role:"group",children:[i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-single",checked:M==="single",onChange:()=>{O("single"),ne(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-single",children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),l("Single","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-multiple",checked:M==="multiple",onChange:()=>{O("multiple"),ne(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-multiple",children:[i.jsx("i",{className:"ph ph-calendar-check me-2"}),l("Multiple","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-range",checked:M==="range",onChange:()=>{O("range"),ne(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-range",children:[i.jsx("i",{className:"ph ph-calendar-dots me-2"}),l("Date Range","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"scheduleDate",className:"form-label",children:[l("Schedule Date Selection","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("div",{className:"kc-flatpickr-calendar",children:i.jsx(Wn,{options:{inline:!0,mode:M==="multiple"?"multiple":M==="single"?"single":"range",minDate:"today",locale:Kn(),...M==="multiple"&&{conjunction:", "},...G.length>0&&{disable:G},onDayCreate:(z,X,fe,_e)=>{if(G.length>0){const ze=_e.dateObj.getFullYear(),Je=String(_e.dateObj.getMonth()+1).padStart(2,"0"),nt=String(_e.dateObj.getDate()).padStart(2,"0"),at=`${ze}-${Je}-${nt}`;if(G.includes(at)){_e.classList.add("kc-holiday-disabled");const jt=document.createElement("div");jt.className="day-tooltip",jt.innerHTML=`
                                  <span class="tooltip-info">${l("Holiday already scheduled","kivicare-clinic-management-system")}</span>
                                `,_e.appendChild(jt)}}}},className:"d-none",placeholder:l("dd / mm / yyyy","kivicare-clinic-management-system"),value:M==="multiple"?q.map(z=>Xn(z)):oe.scheduleDate&&oe.scheduleDate.start?[Xn(oe.scheduleDate.start),Xn(oe.scheduleDate.end||oe.scheduleDate.start)]:"",onChange:z=>{P?.scheduleDate&&(R(fe=>({...fe,scheduleDate:""})),C(!0));const X=fe=>{if(!fe)return"";const _e=fe instanceof Date?fe:new Date(fe);return`${_e.getFullYear()}-${String(_e.getMonth()+1).padStart(2,"0")}-${String(_e.getDate()).padStart(2,"0")}`};M==="single"&&z.length>0?ne(fe=>({...fe,scheduleDate:{start:X(z[0]),end:X(z[0])}})):M==="multiple"&&z.length>0?(U(z.map(fe=>X(fe))),ne(fe=>({...fe,scheduleDate:{start:X(z[0]),end:X(z[z.length-1])}}))):M==="range"&&z.length===2&&ne(fe=>({...fe,scheduleDate:{start:X(z[0]),end:X(z[1])}}))},error:P?.scheduleDate?"true":"false"},`flatpickr-${M}-${ie.module_type}-${ie.module_id}-${G.length}`)}),P?.scheduleDate&&i.jsx("div",{className:"text-danger mt-1",children:P.scheduleDate}),G.length>0&&i.jsxs("div",{className:"alert alert-warning mt-3 py-2 px-3 d-flex align-items-center gap-2 bg-warning-subtle",children:[i.jsx("i",{className:"ph ph-warning-circle fs-5"}),i.jsxs("small",{children:[G.length," ",l("date(s) already have holidays and are disabled.","kivicare-clinic-management-system")]})]}),M==="multiple"&&q.length>0&&i.jsxs("div",{className:"alert alert-info mt-3 bg-primary-subtle",children:[i.jsxs("strong",{children:[l("Selected Dates","kivicare-clinic-management-system"),":"]}),i.jsx("div",{className:"mt-2",children:q.map((z,X)=>i.jsx("span",{className:"badge bg-primary me-2 mb-1",children:z},X))}),i.jsxs("small",{className:"d-block mt-2",children:[q.length," ",l("date's selected","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"form-label mb-0",children:l("Apply Specific Time","kivicare-clinic-management-system")}),i.jsx("small",{className:"d-block text-muted",children:l("Set if the holiday isn't all-day","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"timeSpecific",checked:H,onChange:z=>ae(z.target.checked),style:{width:"3rem",height:"1.5rem",cursor:"pointer"}})})]}),H&&i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"startTime",className:"form-label",children:[l("Start Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(EC,{placeholder:l("Select start time","kivicare-clinic-management-system"),value:V.start_time,onChange:z=>pe(X=>({...X,start_time:z})),id:"startTime"})]}),i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"endTime",className:"form-label",children:[l("End Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(EC,{placeholder:l("Select end time","kivicare-clinic-management-system"),value:V.end_time,onChange:z=>pe(X=>({...X,end_time:z})),id:"endTime"})]})]})]})})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ie,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:De,disabled:!L||v||F||Ce,children:v||F||Ce?_?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):_?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"holiday-setting",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between row-gap-2 column-gap-3 flex-md-row flex-column mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0 d-flex align-items-center",children:[l("Holiday List","kivicare-clinic-management-system"),h!=="on"&&i.jsx("span",{className:"ms-2",children:i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/holidays-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})})]}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-4 flex-wrap",children:[se&&i.jsx(ct,{}),m("clinic_schedule_add")&&i.jsxs("button",{onClick:At,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Holiday","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[!W&&i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(lt,{placeholder:l("Schedule Type","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:ye,getOptionValue:z=>z.id,getOptionLabel:z=>z.label,onChange:z=>{I(X=>({...X,module_type:z?z.id:"",module_id:""}))},value:ye.find(z=>z.id===D.module_type)||null,isSearchable:!1,isClearable:!0,styles:{menuPortal:z=>({...z,zIndex:9999})}},"schedule-type-select"),i.jsx(Xt,{className:"w-100 react-select-box",classNamePrefix:"react-select",placeholder:D.module_type==="doctor"?l("Select Doctor","kivicare-clinic-management-system"):D.module_type==="clinic"?l("Select Clinic","kivicare-clinic-management-system"):l("Select Type First","kivicare-clinic-management-system"),loadOptions:D.module_type==="doctor"?re:D.module_type==="clinic"?le:()=>Promise.resolve({options:[]}),isDisabled:!D.module_type,onChange:z=>{I(X=>({...X,module_id:z?z.id:""}))},isSearchable:!0,isClearable:!0},`filter-module-select-${D.module_type}`)]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search by filter","kivicare-clinic-management-system"),onChange:kt})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:y,columns:et,currentPage:Tt.currentPage,perPage:Tt.perPage,totalItems:Tt.total,lastPage:Tt.lastPage,onPageChange:yt,onPerPageChange:Ae,onSortingChange:Be,manualSorting:!0,enableSelection:!1,isLoading:v||F||Ce})})]})})})},qie=()=>{const t=dn("settings","configurations"),[e,n]=f.useState(!1),{isAddonActive:s}=mt(),a=s("kiviPro"),{data:r}=Cn(),o=r?.data?.hideUtilityLinks,{data:c,isLoading:d,error:m}=yn("settings","configurations",{},{enabled:!0}),u=[{label:l("Receptionist","kivicare-clinic-management-system"),name:"receptionist",status:0},{label:l("Billing","kivicare-clinic-management-system"),name:"billing",status:0},{label:l("Custom Fields","kivicare-clinic-management-system"),name:"custom_fields",status:0}],p=[{label:l("Problem","kivicare-clinic-management-system"),name:"problem",status:0},{label:l("Observations","kivicare-clinic-management-system"),name:"observation",status:0},{label:l("Note","kivicare-clinic-management-system"),name:"note",status:0}],h=[{label:l("Prescription","kivicare-clinic-management-system"),name:"prescription",status:0}],{register:g,handleSubmit:v,watch:x,setValue:y,reset:b}=Jt({defaultValues:{module_config:u,encounter_modules:p,prescription_modules:h}});f.useEffect(()=>{if(!c?.status||!c?.data)return;const j=N=>Array.isArray(N)?N.map(E=>({...E,status:Number(E.status)||0})):[],T={module_config:u,encounter_modules:p,prescription_modules:h};b(N=>{const E={...N};return["module_config","encounter_modules","prescription_modules"].forEach(A=>{const L=c?.data?.[A];E[A]=j(Array.isArray(L)&&L.length>0?L:T[A])}),E})},[c,b]);const w=async j=>{try{n(!0);const T={module_config:j.module_config,encounter_modules:j.encounter_modules,prescription_modules:j.prescription_modules},N=await t.mutateAsync(T);N.status!==!0?(n(!1),Me({title:l("Error","kivicare-clinic-management-system"),text:l(N.message,"kivicare-clinic-management-system")})):(n(!1),tt({title:l("Success","kivicare-clinic-management-system"),text:l(N.message,"kivicare-clinic-management-system")}))}catch(T){n(!1),console.error("Failed to save settings:",T)}},k=(j,T)=>{const E=x(j).map(A=>A.name===T?{...A,status:A.status===1?0:1}:A);y(j,E)};if(m){let j;typeof m=="string"?j=m:m?.response?.data?.message?j=m.response.data.message:m?.message?j=m.message:j=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(j,"kivicare-clinic-management-system")})}const _=({title:j,name:T,disabled:N})=>{const E=x(T);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:j}),i.jsx("div",{className:"",children:E.map(A=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",checked:A.status===1,onChange:()=>k(T,A.name),id:A.name,disabled:N}),i.jsx("label",{htmlFor:A.name,className:"form-check-label",children:A.label})]},A.name))})]})})};return d?i.jsx(pP,{}):i.jsxs("div",{className:"tab-pane active opacity-1",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:[d&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!d&&i.jsxs("form",{onSubmit:v(w),className:"configuration-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Enable/Disable Modules","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/system-configuration/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx(_,{title:l("Module config","kivicare-clinic-management-system"),name:"module_config",disabled:e}),c?.data?.encounter_modules&&a&&Array.isArray(c.data.encounter_modules)&&i.jsx(_,{title:l("Encounter Module","kivicare-clinic-management-system"),name:"encounter_modules",disabled:e}),c?.data?.prescription_modules&&a&&Array.isArray(c.data.prescription_modules)&&i.jsx(_,{title:l("Prescription Module","kivicare-clinic-management-system"),name:"prescription_modules",disabled:e}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})},tx=[{id:"image/jpeg",text:l("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:l("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:l("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:l("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:l("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:l("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:l("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:l("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:l("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:l("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:l("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:l("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:l("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:l("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:l("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:l("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:l("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:l("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:l("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:l("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:l("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:l("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:l("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:l("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:l("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:l("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:l("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:l("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:l("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:l("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:l("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:l("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:l("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:l("7Z Archive (7z)","kivicare-clinic-management-system")}],nx=()=>{const t=mn(),{hasCapability:e,module_config:n,loading:s}=mt(),{data:a}=Cn(),r=a?.data?.hideUtilityLinks;if(f.useEffect(()=>{if(!s){if((n.custom_fields??"1")==="0"){t("/setting/general-setting",{replace:!0});return}e("custom_field_list")||t("/403",{replace:!0})}},[s,n,e,t]),s||n&&(n.custom_fields??"1")==="0"||!e("custom_field_list"))return null;const[o,c]=f.useState(!1),[d,m]=f.useState(!1),[u,p]=f.useState([]),[h,g]=f.useState(null),v=dn("setting","custom-field/delete"),x=dn("setting","custom-field/status"),{control:y,handleSubmit:b,formState:{errors:w},reset:k,watch:_}=Jt(),j=Ke(),{isAddonActive:T}=mt(),[N,E]=f.useState([]),A=T("kiviPro"),[L,C]=f.useState(!1),{id:P}=Yt(),R=Gn(),M=f.useCallback((xe,ke)=>!xe||!Array.isArray(xe)||xe.length===0?[]:xe.map(Oe=>{const Qe=typeof Oe=="object"?Oe.id:Oe;return ke.find(ct=>ct.id===Qe)}).filter(Boolean),[]),O=f.useCallback(()=>({id:"",label:"",module_type:"",type:"",status:"",placeholder:"",isRequired:!1,options:[],file_types:[]}),[]),q=QX(),[U,H]=f.useState(!1),ae=()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ye("csv"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ye("xls"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ye("pdf"),disabled:q.isPending||U,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]}),[V,pe]=f.useState({page:1,perPage:10,searchTerm:"",input_type:"",module_type:"",status:""}),[oe,ne]=f.useState([]),se=f.useMemo(()=>Object.fromEntries(Object.entries(V).filter(([xe,ke])=>ke!==""&&ke!==null&&ke!==void 0)),[V]),{data:W,isLoading:ge,error:ee}=yn("setting","custom-field",se,{enabled:!0}),ie=dn("setting","custom-field/update"),{data:ue,isLoading:G}=Np({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),[le,re]=f.useState(""),D=Za(le,500),I=f.useCallback(xe=>{re(xe.target.value)},[]),ce=xe=>{const ke=xe[0];pe(ke?Oe=>({...Oe,page:1,orderby:ke.id,order:ke.desc?"desc":"asc"}):Oe=>({...Oe,page:1,orderby:"id",order:"desc"}))};f.useEffect(()=>{if(R.pathname.endsWith("/add"))c(!0),g(null),k(O());else if(P){const ke=u.find(Oe=>String(Oe.id)===P);if(ke){g(ke),c(!0);const Oe=M(ke.file_types,tx);k({id:ke.id,label:ke.field,module_type:me.find(Qe=>Qe.label===ke.type)||null,type:te.find(Qe=>Qe.value===ke.inputType)||null,module_id:ke.module_id&&N.find(Qe=>Qe.id===ke.module_id)||null,status:Y.find(Qe=>Qe.id===ke.status)||null,placeholder:ke.placeholder||"",isRequired:!!ke.isRequired,options:ke.options||[],file_types:Oe})}else c(!1),g(null)}else c(!1),g(null),k(O())},[P,R.pathname,u,k,N,M,O]),f.useEffect(()=>{if(h){const xe=h.module_id&&N.length>0?N.find(Oe=>String(Oe.id)===String(h.module_id)):null,ke=M(h.file_types,tx);k({id:h.id,label:h.field,module_type:me.find(Oe=>Oe.label===h.type)||null,type:te.find(Oe=>Oe.value===h.inputType)||null,module_id:xe||null,status:Y.find(Oe=>Oe.id===h.status)||null,placeholder:h.placeholder||"",isRequired:!!h.isRequired,options:h.options||[],file_types:ke})}},[h,N,M]),f.useEffect(()=>{const xe=_((ke,{name:Oe,type:Qe})=>{Oe==="module_type"&&Qe==="change"&&(ke.module_type?.id==="appointment_module"||k(Tt=>({...Tt,module_id:null}),{keepDefaultValues:!0}))});return()=>xe.unsubscribe()},[_,k]);const Z=_("module_type"),K=_("type"),B=On(),F=[B.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system")}),B.accessor("field",{header:()=>l("Field","kivicare-clinic-management-system")}),B.accessor("inputType",{header:()=>l("Input Type","kivicare-clinic-management-system")}),B.accessor("type",{header:()=>l("Type","kivicare-clinic-management-system")}),B.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:xe=>{const ke=xe.row.original.id,Oe=xe.row.original.status,Qe=Oe===1;Oe===0?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system");const ct=Tt=>{const Ut=Tt?1:0;x.mutate({id:ke,status:Ut},{onSuccess:()=>{Ee.success(l("Field status has been updated.","kivicare-clinic-management-system")),j.invalidateQueries(["setting","custom-field"])},onError:()=>{Ee.error(l("Failed to update field status.","kivicare-clinic-management-system"))}})};return i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(sn,{checked:Qe,onChange:ct,disabled:x.isPending,className:"m-0"})})}}),...e("custom_field_edit")||e("custom_field_delete")?[B.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:xe=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("custom_field_edit")&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/custom-field/edit/${xe.row.original.id}`,children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),e("custom_field_delete")&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-link text-danger p-0",onClick:()=>Ce(xe.cell.row.original.id),children:i.jsx("i",{className:"ph text-danger ph-trash fs-5 p-0"})})})]})})]:[]];f.useEffect(()=>{pe(xe=>({...xe,searchTerm:D,page:1}))},[D]),f.useEffect(()=>{if(!W?.status){p([]);return}if(W?.data?.data&&Array.isArray(W.data.data)){const xe=W.data.data.map(Oe=>{let Qe={};try{Qe=Oe.fields?JSON.parse(Oe.fields):{},typeof Qe=="object"&&Qe!==null?Qe={label:Qe.name||"",type:Qe.type||"",placeholder:Qe.placeholder||"",isRequired:Qe.isRequired||0,options:Qe.options||[],file_types:Qe.file_upload_type||[],status:Qe.status||1}:Qe={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}catch{Qe={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}return{id:Oe.id,field:Qe.label,inputType:Qe.type,type:me.find(ct=>ct.id===Oe.module_type)?.label||Oe.module_type||"",module_id:Oe.module_id??null,placeholder:Qe.placeholder,status:Number(Oe.status),isRequired:Number(Qe.isRequired),options:Qe.options,file_types:Qe.file_types||[]}}),ke=A?xe:xe.filter(Oe=>Oe.type!=="Appointment Module");p(ke)}else p([])},[W,A]),f.useEffect(()=>{ue?.status&&ue?.data&&E(ue.data)},[ue]);const J=f.useCallback(xe=>{I(xe)},[I]),Q=W?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},me=[{id:"doctor_module",label:l("Doctor Module","kivicare-clinic-management-system")},{id:"patient_module",label:l("Patient Module","kivicare-clinic-management-system")},{id:"patient_encounter_module",label:l("Patient Encounter Module","kivicare-clinic-management-system")},{id:"appointment_module",label:l("Appointment Module","kivicare-clinic-management-system")}],te=[{value:"text",label:l("Text","kivicare-clinic-management-system")},{value:"number",label:l("Number","kivicare-clinic-management-system")},{value:"textarea",label:l("Textarea","kivicare-clinic-management-system")},{value:"file_upload",label:l("File Upload","kivicare-clinic-management-system")},{value:"select",label:l("Select","kivicare-clinic-management-system")},{value:"multi_select",label:l("Multi Select","kivicare-clinic-management-system")},{value:"radio",label:l("Radio","kivicare-clinic-management-system")},{value:"checkbox",label:l("Checkbox","kivicare-clinic-management-system")},{value:"calendar",label:l("Calendar","kivicare-clinic-management-system")}],Y=[{id:1,label:l("Active","kivicare-clinic-management-system")},{id:0,label:l("Inactive","kivicare-clinic-management-system")}],Ce=xe=>{dt({title:l("Delete Custom Field?","kivicare-clinic-management-system"),text:l("You're about to delete this custom field.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep custom field","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ke=>{ke.isConfirmed&&(ft({title:l("Deleting Custom Field...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected custom field.<br>This won't take long.","kivicare-clinic-management-system")}),v.mutate({id:xe},{onSuccess:Oe=>{tt({title:l("Custom Field Deleted","kivicare-clinic-management-system"),text:Oe?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to custom fields","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"])},onError:Oe=>{console.error("Delete clinic error:",Oe);const Qe=Oe?.response?.data?.message||Oe?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Qe,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},ye=xe=>{A?(xe==="csv"&&et(),xe==="xls"&&kt(),xe==="pdf"&&At()):dt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},Te=async xe=>{try{const ke={format:xe,searchTerm:V.searchTerm,module_type:V.module_type,input_type:V.input_type,status:V.status},Oe=await q.mutateAsync(ke),Qe=Oe?.data?.customFields||Oe?.customFields||Oe?.data?.data?.customFields;if(Qe){const ct=new Date().toISOString().split("T")[0],Tt=Qe.map(Ut=>({id:Ut.id,module:Ut.module,label:Ut.label,placeholder:Ut.placeholder,options:Ut.options,input_type:Ut.input_type,required:Ut.required,status:xe==="pdf"?Ut.status==1?"Active":"Inactive":Ut.status}));switch(xe){case"csv":gs(Tt,`custom-fields-${ct}.csv`);break;case"xls":fs(Tt,`custom-fields-${ct}.xls`);break;case"pdf":vs(Tt,`custom-fields-${ct}.pdf`,"Custom Fields List");break;default:throw new Error("Invalid export format")}Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw console.error("No custom fields data found in response:",Oe),new Error(`No data received from server. Response structure: ${JSON.stringify(Oe,null,2)}`)}catch(ke){console.error("Export error:",ke),Me({title:l("Error!","kivicare-clinic-management-system"),text:ke.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},et=()=>Te("csv"),kt=()=>Te("xls"),At=()=>{U||(H(!0),Te("pdf").finally(()=>{setTimeout(()=>H(!1),1e3)}))},qt=()=>{m(!0)},Ie=()=>{j.invalidateQueries(["setting","custom-field"])},De=async xe=>{try{C(!0);const ke={id:xe.id||"",module_type:{id:xe.module_type?.id||"",label:xe.module_type?.label||""},module_id:xe.module_id?{id:xe.module_id.id||xe.module_id,label:xe.module_id.label||""}:null,fields:[{label:xe.label,type:xe.type?.value||"",options:xe.options||[],file_types:xe.file_types||[],isRequired:xe.isRequired?"1":"0",placeholder:xe.placeholder||"",status:String(xe.status?.id??1)}]};xe.id&&(ke.fields[0].id=xe.id);const Oe=await ie.mutateAsync(ke);Oe.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l(Oe.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):(tt({title:l("Success","kivicare-clinic-management-system"),text:l(Oe.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"]),t("/setting/custom-field"),c(!1),k())}catch(ke){console.error("Form submission error:",ke),Me({title:l("Error","kivicare-clinic-management-system"),text:l(ke.response?.data?.message||"Failed to save custom field","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{C(!1)}};if(ee){let xe;typeof ee=="string"?xe=ee:ee?.response?.data?.message?xe=ee.response.data.message:ee?.message?xe=ee.message:xe=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(xe,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"tab-pane active opacity-1",id:"v-pills-custom-filed",role:"tabpanel","aria-labelledby":"v-pills-custom-filed-tab",tabIndex:"0",children:[!o&&i.jsxs("div",{className:"custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Custom Field Data","kivicare-clinic-management-system")," ",r!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/custom-field-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[e("custom_field_add")&&i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>t("/setting/custom-field/add"),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Custom field","kivicare-clinic-management-system")})]}),A&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:qt,children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),e("custom_field_export")&&i.jsx(ae,{})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(lt,{options:te,placeholder:l("Input Type","kivicare-clinic-management-system"),isSearchable:!0,onChange:xe=>{pe(ke=>({...ke,input_type:xe?xe.value:""}))},value:te.find(xe=>xe.value===V.input_type)||null,isClearable:!0,styles:{menuPortal:xe=>({...xe,zIndex:9999})}}),i.jsx(lt,{placeholder:l("Module Type","kivicare-clinic-management-system"),options:me,onChange:xe=>{pe(ke=>({...ke,module_type:xe?xe.id:""}))},value:me.find(xe=>xe.id===V.module_type)||null,isSearchable:!0,isClearable:!0,styles:{menuPortal:xe=>({...xe,zIndex:9999})}}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),options:Y,getOptionLabel:xe=>xe.label,getOptionValue:xe=>xe.id,onChange:xe=>{pe(ke=>({...ke,status:xe?xe.id:""}))},value:Y.find(xe=>xe.id===V.status)||null,isClearable:!0,styles:{menuPortal:xe=>({...xe,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",onChange:J})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:u,columns:F,isLoading:ge,error:ee,currentPage:Q.currentPage,perPage:V.perPage==="all"?Q.total||"all":Q.perPage,totalItems:Q.total,lastPage:Q.perPage==="all"?1:Q.lastPage,onPageChange:xe=>pe(ke=>({...ke,page:xe})),onPerPageChange:xe=>pe(ke=>({...ke,perPage:xe,page:1})),enableSelection:!1,onSortingChange:ce,manualSorting:!0})})]}),o&&i.jsxs("div",{className:"add-custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title m-0",children:h?l("Edit Custom Field","kivicare-clinic-management-system"):l("Add Custom Field","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsxs("form",{onSubmit:b(De),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"module_type",control:y,rules:{required:l("Module is required","kivicare-clinic-management-system")},render:({field:xe})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:xe.value?JSON.stringify(xe.value):"",onChange:ke=>{const Oe=me.find(Qe=>JSON.stringify(Qe)===ke.target.value);xe.onChange(Oe||null)},children:[i.jsx("option",{value:"",children:l("Select Module","kivicare-clinic-management-system")}),me.filter(ke=>A||ke.id!=="appointment_module").map(ke=>i.jsx("option",{value:JSON.stringify(ke),children:ke.label},ke.id))]}),xe.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>xe.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),w.module_type&&i.jsx("span",{className:"text-danger p",children:w.module_type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Doctor","kivicare-clinic-management-system")," "]}),i.jsx(be,{name:"module_id",control:y,render:({field:xe})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:xe.value?JSON.stringify(xe.value):"",onChange:ke=>{const Oe=N.find(Qe=>JSON.stringify(Qe)===ke.target.value);xe.onChange(Oe||null)},disabled:!Z||Z.id!=="appointment_module",children:[i.jsx("option",{value:"",children:l("Select Doctor","kivicare-clinic-management-system")}),N.map(ke=>i.jsx("option",{value:JSON.stringify(ke),children:ke.label},ke.id))]}),xe.value&&Z?.id==="appointment_module"&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>xe.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),w.module_id&&i.jsx("span",{className:"text-danger p",children:w.module_id.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(be,{name:"label",control:y,rules:{required:l("Label is required","kivicare-clinic-management-system")},render:({field:xe})=>i.jsx(Ht,{placeholder:l('e.g. "Patient Module"',"kivicare-clinic-management-system"),required:!0,label:l("Label (Where it looks like)","kivicare-clinic-management-system"),hasTooltip:r!=="on",hasUrl:r!=="on"?"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/core-concepts/custom-fields/":"",type:"text",isDisable:!1,error:w.label,value:xe.value??"",onChange:xe.onChange,className:"form-control"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Input Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"type",control:y,rules:{required:l("Input Type is required","kivicare-clinic-management-system")},render:({field:xe})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:xe.value?JSON.stringify(xe.value):"",onChange:ke=>{const Oe=te.find(Qe=>JSON.stringify(Qe)===ke.target.value);xe.onChange(Oe||null)},children:[i.jsx("option",{value:"",children:l("Select Input Type","kivicare-clinic-management-system")}),te.map(ke=>i.jsx("option",{value:JSON.stringify(ke),children:ke.label},ke.value))]}),xe.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>xe.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),w.type&&i.jsx("span",{className:"text-danger p",children:w.type.message})]})}),K?.value&&K.value!=="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(be,{name:"placeholder",control:y,render:({field:xe})=>i.jsx(Ht,{placeholder:l('eg "Enter placeholder" ',"kivicare-clinic-management-system"),required:!1,label:l("Placeholder","kivicare-clinic-management-system"),type:"text",isDisable:!1,error:w.placeholder,value:xe.value??"",onChange:xe.onChange,className:"form-control"})})})}),K?.value&&K.value==="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"file_types",control:y,rules:{validate:xe=>K?.value==="file_upload"&&(!xe||xe.length===0)?l("File types are required for file upload","kivicare-clinic-management-system"):!0},render:({field:xe})=>i.jsx(lt,{isMulti:!0,className:"w-100",placeholder:l("Select file types","kivicare-clinic-management-system"),options:tx,getOptionLabel:ke=>ke.text,getOptionValue:ke=>ke.id,value:xe.value||[],onChange:xe.onChange,isClearable:!0,styles:{menuPortal:ke=>({...ke,zIndex:9999})}})}),w.file_types&&i.jsx("span",{className:"text-danger p",children:w.file_types.message})]})}),K?.value&&["select","multi_select","radio","checkbox"].includes(K.value)&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Options","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"options",control:y,rules:{validate:xe=>K?.value&&["select","multi_select","radio","checkbox"].includes(K.value)&&(!xe||xe.length===0)?l("Options are required for this input type","kivicare-clinic-management-system"):!0},render:({field:xe})=>i.jsx(du,{isMulti:!0,className:"w-100",placeholder:l("Type and press enter to add","kivicare-clinic-management-system"),value:xe.value||[],onChange:xe.onChange,onCreateOption:ke=>{const Oe={label:ke,value:ke};ne(Qe=>[...Qe,Oe]),xe.onChange([...xe.value||[],Oe])},options:[...oe,...xe.value||[]],isClearable:!0})}),w.options&&i.jsx("span",{className:"text-danger p",children:w.options.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"status",control:y,rules:{required:l("Status is required","kivicare-clinic-management-system")},render:({field:xe})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:xe.value?JSON.stringify(xe.value):"",onChange:ke=>{const Oe=Y.find(Qe=>JSON.stringify(Qe)===ke.target.value);xe.onChange(Oe||null)},children:[i.jsx("option",{value:"",children:l("Select Status","kivicare-clinic-management-system")}),Y.map(ke=>i.jsx("option",{value:JSON.stringify(ke),children:ke.label},ke.id))]}),xe.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>xe.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),w.status&&i.jsx("span",{className:"text-danger p",children:w.status.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Validation","kivicare-clinic-management-system")," "]}),i.jsx(be,{name:"isRequired",control:y,render:({field:xe})=>i.jsx("div",{className:"bg-body px-3 py-2 rounded",children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"mandatory-field",checked:!!xe.value,onChange:xe.onChange}),i.jsx("label",{htmlFor:"mandatory-field",className:"form-check-label",children:l("Mandatory field","kivicare-clinic-management-system")})]})})}),w.isRequired&&i.jsx("span",{className:"text-danger p",children:w.isRequired.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:L,children:L?h?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):h?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})]})]}),i.jsx(qr,{show:d,onHide:()=>m(!1),onDataRefresh:Ie,context:"custom-fields"})]})},Hie=()=>i.jsx("div",{className:"custom-form-preview-skeleton p-3",children:i.jsxs(Qn,{className:"g-3",children:[i.jsx(_t,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(_t,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(_t,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"5rem"})]})}),i.jsx(_t,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"90px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(_t,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"110px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(_t,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(_t,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"130px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex gap-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"60px",height:"1rem"})]})]})]})})]})}),zie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(1),[a]=f.useState(10),[r,o]=f.useState(!1),[c,d]=f.useState(null),{hasCapability:m,isAddonActive:u}=mt(),p=u("kiviPro"),{data:h}=Cn(),g=h?.data?.hideUtilityLinks,{data:v,isLoading:x,error:y}=TJ({page:n,limit:a,search:t||void 0},{enabled:p}),b=RJ(),w=PJ(),k=v?.pagination||{total:0,lastPage:1,perPage:a,currentPage:n},_=v?.data?.forms?.map(A=>({id:A.id,name:A.name?.text||A.name,type:A.moduleType?.label,status:A.status.label,statusValue:A.status.value,statusClass:A.status.value==="active"?"bg-success-subtle":"bg-danger-subtle",hasView:!0}))||[],j=On(),T=[j.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system")}),j.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system")}),j.accessor("type",{header:()=>l("Type","kivicare-clinic-management-system")}),j.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:A=>{const L=A.row.original.id,C=A.row.original.statusValue;A.getValue();const P=C==="active",R=M=>{const O=M?1:0;w.mutate({id:L,status:O},{onSuccess:()=>{Ee.success(l("Form status has been updated.","kivicare-clinic-management-system"))},onError:()=>{Ee.error(l("Failed to update form status.","kivicare-clinic-management-system"))}})};return i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(sn,{checked:P,onChange:R,disabled:w.isLoading,className:"m-0"})})}}),...m("custom_form_view")||m("custom_form_edit")||m("custom_form_delete")?[j.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:A=>i.jsx(N,{hasView:A.row.original.hasView,id:A.row.original.id})})]:[]],N=({hasView:A,id:L})=>{const C=()=>{d(L),o(!0)},P=()=>{dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(R=>{R.isConfirmed&&b.mutate(L,{onSuccess:()=>{tt({title:l("Deleted!","kivicare-clinic-management-system"),text:l("Your form has been deleted.","kivicare-clinic-management-system")})},onError:()=>{Me({title:l("Error!","kivicare-clinic-management-system"),text:l("Failed to delete the form.","kivicare-clinic-management-system")})}})})};return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[A&&m("custom_form_view")&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("View","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",onClick:C,className:"btn btn-link p-0 d-inline-block",children:i.jsx("span",{className:"text-gray fs-5",children:i.jsx("i",{className:"ph ph-eye"})})})}),m("custom_form_edit")&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`edit/${L}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),m("custom_form_delete")&&i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),P()},className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})},E=A=>{e(A.target.value),s(1)};return y?i.jsx("div",{className:"alert alert-danger",children:l("Failed to load custom forms","kivicare-clinic-management-system")}):i.jsxs("div",{children:[i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-forms-setting${p?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Custom Form List","kivicare-clinic-management-system")," ",g!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-form-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",value:t,onChange:E})]})}),m("custom_form_add")&&i.jsxs(ht,{to:"add/",className:`btn btn-primary d-flex align-items-center gap-2 ${p?"":"disabled"}`,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Form","kivicare-clinic-management-system")})]})]}),!p&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:_,columns:T,currentPage:k.currentPage,perPage:k.perPage,totalItems:k.total,lastPage:k.lastPage,enableSelection:!1,isLoading:x,onPageChange:s})})]})}),i.jsx(Vie,{show:r,onHide:()=>o(!1),formId:c})]})},Vie=({show:t,onHide:e,formId:n})=>{const{data:s,isLoading:a}=QR(n,{enabled:!!n}),r=s?.data;return i.jsxs(rt,{show:t,onHide:e,size:"lg",centered:!0,backdrop:"static",children:[i.jsxs(rt.Header,{children:[i.jsxs(rt.Title,{children:[l("Form Preview","kivicare-clinic-management-system")," - ",r?.name?.text||r?.name]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:a?i.jsx(Hie,{}):i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Ga,{fields:r?.fields||[],data:{},readOnly:!1,formId:`preview_form_${n}`}),r?.fields?.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:l("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(rt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:l("Close Preview","kivicare-clinic-management-system")})})]})};function Uie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cd(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Dk(t){return"nodeType"in t}function ts(t){var e,n;return t?cd(t)?t:Dk(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Rk(t){const{Document:e}=ts(t);return t instanceof e}function mu(t){return cd(t)?!1:t instanceof ts(t).HTMLElement}function _P(t){return t instanceof ts(t).SVGElement}function dd(t){return t?cd(t)?t.document:Dk(t)?Rk(t)?t:mu(t)||_P(t)?t.ownerDocument:document:document:document}const xa=cf?f.useLayoutEffect:f.useEffect;function df(t){const e=f.useRef(t);return xa(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function Wie(){const t=f.useRef(null),e=f.useCallback((s,a)=>{t.current=setInterval(s,a)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Rm(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return xa(()=>{n.current!==t&&(n.current=t)},e),n}function uu(t,e){const n=f.useRef();return f.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function tg(t){const e=df(t),n=f.useRef(null),s=f.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,s]}function ng(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let ix={};function hu(t,e){return f.useMemo(()=>{if(e)return e;const n=ix[t]==null?0:ix[t]+1;return ix[t]=n,t+"-"+n},[t,e])}function EP(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((r,o)=>{const c=Object.entries(o);for(const[d,m]of c){const u=r[d];u!=null&&(r[d]=u+t*m)}return r},{...e})}}const Cc=EP(1),ig=EP(-1);function Kie(t){return"clientX"in t&&"clientY"in t}function mf(t){if(!t)return!1;const{KeyboardEvent:e}=ts(t.target);return e&&t instanceof e}function Gie(t){if(!t)return!1;const{TouchEvent:e}=ts(t.target);return e&&t instanceof e}function sg(t){if(Gie(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Kie(t)?{x:t.clientX,y:t.clientY}:null}const Ya=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ya.Translate.toString(t),Ya.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),TC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Yie(t){return t.matches(TC)?t:t.querySelector(TC)}const Qie={display:"none"};function Zie(t){let{id:e,value:n}=t;return We.createElement("div",{id:e,style:Qie},n)}function Xie(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return We.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function Jie(){const[t,e]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const TP=f.createContext(null);function ese(t){const e=f.useContext(TP);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function tse(){const[t]=f.useState(()=>new Set),e=f.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[f.useCallback(s=>{let{type:a,event:r}=s;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,r)})},[t]),e]}const nse={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ise={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function sse(t){let{announcements:e=ise,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=nse}=t;const{announce:r,announcement:o}=Jie(),c=hu("DndLiveRegion"),[d,m]=f.useState(!1);if(f.useEffect(()=>{m(!0)},[]),ese(f.useMemo(()=>({onDragStart(p){let{active:h}=p;r(e.onDragStart({active:h}))},onDragMove(p){let{active:h,over:g}=p;e.onDragMove&&r(e.onDragMove({active:h,over:g}))},onDragOver(p){let{active:h,over:g}=p;r(e.onDragOver({active:h,over:g}))},onDragEnd(p){let{active:h,over:g}=p;r(e.onDragEnd({active:h,over:g}))},onDragCancel(p){let{active:h,over:g}=p;r(e.onDragCancel({active:h,over:g}))}}),[r,e])),!d)return null;const u=We.createElement(We.Fragment,null,We.createElement(Zie,{id:s,value:a.draggable}),We.createElement(Xie,{id:c,announcement:o}));return n?La.createPortal(u,n):u}var mi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(mi||(mi={}));function ag(){}function Gh(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function AP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ya=Object.freeze({x:0,y:0});function ase(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rse(t,e){const n=sg(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function lse(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function ose(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function cse(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function AC(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const DP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=AC(e,e.left,e.top),r=[];for(const o of s){const{id:c}=o,d=n.get(c);if(d){const m=ase(AC(d),a);r.push({id:c,data:{droppableContainer:o,value:m}})}}return r.sort(lse)};function dse(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),r=Math.min(e.top+e.height,t.top+t.height),o=a-s,c=r-n;if(s<a&&n<r){const d=e.width*e.height,m=t.width*t.height,u=o*c,p=u/(d+m-u);return Number(p.toFixed(4))}return 0}const RP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=[];for(const r of s){const{id:o}=r,c=n.get(o);if(c){const d=dse(c,e);d>0&&a.push({id:o,data:{droppableContainer:r,value:d}})}}return a.sort(ose)};function mse(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function PP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ya}function use(t){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),r=1;r<s;r++)a[r-1]=arguments[r];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const hse=use(1);function MP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function pse(t,e,n){const s=MP(e);if(!s)return t;const{scaleX:a,scaleY:r,x:o,y:c}=s,d=t.left-o-(1-a)*parseFloat(n),m=t.top-c-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?t.width/a:t.width,p=r?t.height/r:t.height;return{width:u,height:p,top:m,right:d+u,bottom:m+p,left:d}}const gse={ignoreTransform:!1};function md(t,e){e===void 0&&(e=gse);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=ts(t).getComputedStyle(t);m&&(n=pse(n,m,u))}const{top:s,left:a,width:r,height:o,bottom:c,right:d}=n;return{top:s,left:a,width:r,height:o,bottom:c,right:d}}function DC(t){return md(t,{ignoreTransform:!0})}function fse(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function vse(t,e){return e===void 0&&(e=ts(t).getComputedStyle(t)),e.position==="fixed"}function xse(t,e){e===void 0&&(e=ts(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const r=e[a];return typeof r=="string"?n.test(r):!1})}function Pk(t,e){const n=[];function s(a){if(e!=null&&n.length>=e||!a)return n;if(Rk(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!mu(a)||_P(a)||n.includes(a))return n;const r=ts(t).getComputedStyle(a);return a!==t&&xse(a,r)&&n.push(a),vse(a,r)?n:s(a.parentNode)}return t?s(t):n}function IP(t){const[e]=Pk(t,1);return e??null}function sx(t){return!cf||!t?null:cd(t)?t:Dk(t)?Rk(t)||t===dd(t).scrollingElement?window:mu(t)?t:null:null}function OP(t){return cd(t)?t.scrollX:t.scrollLeft}function LP(t){return cd(t)?t.scrollY:t.scrollTop}function Hy(t){return{x:OP(t),y:LP(t)}}var gi;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(gi||(gi={}));function FP(t){return!cf||!t?!1:t===document.scrollingElement}function $P(t){const e={x:0,y:0},n=FP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,r=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,c=t.scrollLeft>=s.x;return{isTop:a,isLeft:r,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const yse={x:.2,y:.2};function bse(t,e,n,s,a){let{top:r,left:o,right:c,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=yse);const{isTop:m,isBottom:u,isLeft:p,isRight:h}=$P(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*a.y,width:e.width*a.x};return!m&&r<=e.top+x.height?(g.y=gi.Backward,v.y=s*Math.abs((e.top+x.height-r)/x.height)):!u&&d>=e.bottom-x.height&&(g.y=gi.Forward,v.y=s*Math.abs((e.bottom-x.height-d)/x.height)),!h&&c>=e.right-x.width?(g.x=gi.Forward,v.x=s*Math.abs((e.right-x.width-c)/x.width)):!p&&o<=e.left+x.width&&(g.x=gi.Backward,v.x=s*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:v}}function wse(t){if(t===document.scrollingElement){const{innerWidth:r,innerHeight:o}=window;return{top:0,left:0,right:r,bottom:o,width:r,height:o}}const{top:e,left:n,right:s,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:a,width:t.clientWidth,height:t.clientHeight}}function BP(t){return t.reduce((e,n)=>Cc(e,Hy(n)),ya)}function kse(t){return t.reduce((e,n)=>e+OP(n),0)}function jse(t){return t.reduce((e,n)=>e+LP(n),0)}function qP(t,e){if(e===void 0&&(e=md),!t)return;const{top:n,left:s,bottom:a,right:r}=e(t);IP(t)&&(a<=0||r<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Nse=[["x",["left","right"],kse],["y",["top","bottom"],jse]];class Mk{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Pk(n),a=BP(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,o,c]of Nse)for(const d of o)Object.defineProperty(this,d,{get:()=>{const m=c(s),u=a[r]-m;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var a;(a=this.target)==null||a.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function Cse(t){const{EventTarget:e}=ts(t);return t instanceof e?t:dd(t)}function ax(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Fs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Fs||(Fs={}));function RC(t){t.preventDefault()}function Sse(t){t.stopPropagation()}var gn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(gn||(gn={}));const HP={start:[gn.Space,gn.Enter],cancel:[gn.Esc],end:[gn.Space,gn.Enter,gn.Tab]},_se=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case gn.Right:return{...n,x:n.x+25};case gn.Left:return{...n,x:n.x-25};case gn.Down:return{...n,y:n.y+25};case gn.Up:return{...n,y:n.y-25}}};class Ik{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new lm(dd(n)),this.windowListeners=new lm(ts(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fs.Resize,this.handleCancel),this.windowListeners.add(Fs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&qP(s),n(ya)}handleKeyDown(e){if(mf(e)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:r=HP,coordinateGetter:o=_se,scrollBehavior:c="smooth"}=a,{code:d}=e;if(r.end.includes(d)){this.handleEnd(e);return}if(r.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=s.current,u=m?{x:m.left,y:m.top}:ya;this.referenceCoordinates||(this.referenceCoordinates=u);const p=o(e,{active:n,context:s.current,currentCoordinates:u});if(p){const h=ig(p,u),g={x:0,y:0},{scrollableAncestors:v}=s.current;for(const x of v){const y=e.code,{isTop:b,isRight:w,isLeft:k,isBottom:_,maxScroll:j,minScroll:T}=$P(x),N=wse(x),E={x:Math.min(y===gn.Right?N.right-N.width/2:N.right,Math.max(y===gn.Right?N.left:N.left+N.width/2,p.x)),y:Math.min(y===gn.Down?N.bottom-N.height/2:N.bottom,Math.max(y===gn.Down?N.top:N.top+N.height/2,p.y))},A=y===gn.Right&&!w||y===gn.Left&&!k,L=y===gn.Down&&!_||y===gn.Up&&!b;if(A&&E.x!==p.x){const C=x.scrollLeft+h.x,P=y===gn.Right&&C<=j.x||y===gn.Left&&C>=T.x;if(P&&!h.y){x.scrollTo({left:C,behavior:c});return}P?g.x=x.scrollLeft-C:g.x=y===gn.Right?x.scrollLeft-j.x:x.scrollLeft-T.x,g.x&&x.scrollBy({left:-g.x,behavior:c});break}else if(L&&E.y!==p.y){const C=x.scrollTop+h.y,P=y===gn.Down&&C<=j.y||y===gn.Up&&C>=T.y;if(P&&!h.x){x.scrollTo({top:C,behavior:c});return}P?g.y=x.scrollTop-C:g.y=y===gn.Down?x.scrollTop-j.y:x.scrollTop-T.y,g.y&&x.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,Cc(ig(p,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ik.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=HP,onActivation:a}=e,{active:r}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const c=r.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function PC(t){return!!(t&&"distance"in t)}function MC(t){return!!(t&&"delay"in t)}class Ok{constructor(e,n,s){var a;s===void 0&&(s=Cse(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:r}=e,{target:o}=r;this.props=e,this.events=n,this.document=dd(o),this.documentListeners=new lm(this.document),this.listeners=new lm(s),this.windowListeners=new lm(ts(o)),this.initialCoordinates=(a=sg(r))!=null?a:ya,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Fs.Resize,this.handleCancel),this.windowListeners.add(Fs.DragStart,RC),this.windowListeners.add(Fs.VisibilityChange,this.handleCancel),this.windowListeners.add(Fs.ContextMenu,RC),this.documentListeners.add(Fs.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(MC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(PC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Fs.Click,Sse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:a,props:r}=this,{onMove:o,options:{activationConstraint:c}}=r;if(!a)return;const d=(n=sg(e))!=null?n:ya,m=ig(a,d);if(!s&&c){if(PC(c)){if(c.tolerance!=null&&ax(m,c.tolerance))return this.handleCancel();if(ax(m,c.distance))return this.handleStart()}if(MC(c)&&ax(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===gn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Ese={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lk extends Ok{constructor(e){const{event:n}=e,s=dd(n.target);super(e,Ese,s)}}Lk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Tse={move:{name:"mousemove"},end:{name:"mouseup"}};var zy;(function(t){t[t.RightClick=2]="RightClick"})(zy||(zy={}));class zP extends Ok{constructor(e){super(e,Tse,dd(e.event.target))}}zP.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===zy.RightClick?!1:(s?.({event:n}),!0)}}];const rx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class VP extends Ok{constructor(e){super(e,rx)}static setup(){return window.addEventListener(rx.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(rx.move.name,e)};function e(){}}}VP.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:a}=n;return a.length>1?!1:(s?.({event:n}),!0)}}];var om;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(om||(om={}));var rg;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(rg||(rg={}));function Ase(t){let{acceleration:e,activator:n=om.Pointer,canScroll:s,draggingRect:a,enabled:r,interval:o=5,order:c=rg.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:p,threshold:h}=t;const g=Rse({delta:p,disabled:!r}),[v,x]=Wie(),y=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),w=f.useMemo(()=>{switch(n){case om.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case om.DraggableRect:return a}},[n,a,d]),k=f.useRef(null),_=f.useCallback(()=>{const T=k.current;if(!T)return;const N=y.current.x*b.current.x,E=y.current.y*b.current.y;T.scrollBy(N,E)},[]),j=f.useMemo(()=>c===rg.TreeOrder?[...m].reverse():m,[c,m]);f.useEffect(()=>{if(!r||!m.length||!w){x();return}for(const T of j){if(s?.(T)===!1)continue;const N=m.indexOf(T),E=u[N];if(!E)continue;const{direction:A,speed:L}=bse(T,E,w,e,h);for(const C of["x","y"])g[C][A[C]]||(L[C]=0,A[C]=0);if(L.x>0||L.y>0){x(),k.current=T,v(_,o),y.current=L,b.current=A;return}}y.current={x:0,y:0},b.current={x:0,y:0},x()},[e,_,s,x,r,o,JSON.stringify(w),JSON.stringify(g),v,m,j,u,JSON.stringify(h)])}const Dse={x:{[gi.Backward]:!1,[gi.Forward]:!1},y:{[gi.Backward]:!1,[gi.Forward]:!1}};function Rse(t){let{delta:e,disabled:n}=t;const s=ng(e);return uu(a=>{if(n||!s||!a)return Dse;const r={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[gi.Backward]:a.x[gi.Backward]||r.x===-1,[gi.Forward]:a.x[gi.Forward]||r.x===1},y:{[gi.Backward]:a.y[gi.Backward]||r.y===-1,[gi.Forward]:a.y[gi.Forward]||r.y===1}}},[n,e,s])}function Pse(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return uu(a=>{var r;return e==null?null:(r=s??a)!=null?r:null},[s,e])}function Mse(t,e){return f.useMemo(()=>t.reduce((n,s)=>{const{sensor:a}=s,r=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...r]},[]),[t,e])}var Pm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pm||(Pm={}));var Vy;(function(t){t.Optimized="optimized"})(Vy||(Vy={}));const IC=new Map;function Ise(t,e){let{dragging:n,dependencies:s,config:a}=e;const[r,o]=f.useState(null),{frequency:c,measure:d,strategy:m}=a,u=f.useRef(t),p=y(),h=Rm(p),g=f.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(w=>w===null?b:w.concat(b.filter(k=>!w.includes(k))))},[h]),v=f.useRef(null),x=uu(b=>{if(p&&!n)return IC;if(!b||b===IC||u.current!==t||r!=null){const w=new Map;for(let k of t){if(!k)continue;if(r&&r.length>0&&!r.includes(k.id)&&k.rect.current){w.set(k.id,k.rect.current);continue}const _=k.node.current,j=_?new Mk(d(_),_):null;k.rect.current=j,j&&w.set(k.id,j)}return w}return b},[t,r,n,p,d]);return f.useEffect(()=>{u.current=t},[t]),f.useEffect(()=>{p||g()},[n,p]),f.useEffect(()=>{r&&r.length>0&&o(null)},[JSON.stringify(r)]),f.useEffect(()=>{p||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},c))},[c,p,g,...s]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:r!=null};function y(){switch(m){case Pm.Always:return!1;case Pm.BeforeDragging:return n;default:return!n}}}function Fk(t,e){return uu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Ose(t,e){return Fk(t,e)}function Lse(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(s)},[s,n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function uf(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(s)},[n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function Fse(t){return new Mk(md(t),t)}function OC(t,e,n){e===void 0&&(e=Fse);const[s,a]=f.useState(null);function r(){a(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const u=e(t);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=Lse({callback(d){if(t)for(const m of d){const{type:u,target:p}=m;if(u==="childList"&&p instanceof HTMLElement&&p.contains(t)){r();break}}}}),c=uf({callback:r});return xa(()=>{r(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),s}function $se(t){const e=Fk(t);return PP(t,e)}const LC=[];function Bse(t){const e=f.useRef(t),n=uu(s=>t?s&&s!==LC&&t&&e.current&&t.parentNode===e.current.parentNode?s:Pk(t):LC,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function qse(t){const[e,n]=f.useState(null),s=f.useRef(t),a=f.useCallback(r=>{const o=sx(r.target);o&&n(c=>c?(c.set(o,Hy(o)),new Map(c)):null)},[]);return f.useEffect(()=>{const r=s.current;if(t!==r){o(r);const c=t.map(d=>{const m=sx(d);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,Hy(m)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=t}return()=>{o(t),o(r)};function o(c){c.forEach(d=>{const m=sx(d);m?.removeEventListener("scroll",a)})}},[a,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((r,o)=>Cc(r,o),ya):BP(t):ya,[t,e])}function FC(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const s=t!==ya;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?ig(t,n.current):ya}function Hse(t){f.useEffect(()=>{if(!cf)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function zse(t,e){return f.useMemo(()=>t.reduce((n,s)=>{let{eventName:a,handler:r}=s;return n[a]=o=>{r(o,e)},n},{}),[t,e])}function UP(t){return f.useMemo(()=>t?fse(t):null,[t])}const $C=[];function Vse(t,e){e===void 0&&(e=md);const[n]=t,s=UP(n?ts(n):null),[a,r]=f.useState($C);function o(){r(()=>t.length?t.map(d=>FP(d)?s:new Mk(e(d),d)):$C)}const c=uf({callback:o});return xa(()=>{c?.disconnect(),o(),t.forEach(d=>c?.observe(d))},[t]),a}function WP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return mu(e)?e:t}function Use(t){let{measure:e}=t;const[n,s]=f.useState(null),a=f.useCallback(m=>{for(const{target:u}of m)if(mu(u)){s(p=>{const h=e(u);return p?{...p,width:h.width,height:h.height}:h});break}},[e]),r=uf({callback:a}),o=f.useCallback(m=>{const u=WP(m);r?.disconnect(),u&&r?.observe(u),s(u?e(u):null)},[e,r]),[c,d]=tg(o);return f.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Wse=[{sensor:Lk,options:{}},{sensor:Ik,options:{}}],Kse={current:{}},Yh={draggable:{measure:DC},droppable:{measure:DC,strategy:Pm.WhileDragging,frequency:Vy.Optimized},dragOverlay:{measure:md}};class cm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Gse={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ag},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Yh,measureDroppableContainers:ag,windowRect:null,measuringScheduled:!1},KP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ag,draggableNodes:new Map,over:null,measureDroppableContainers:ag},pu=f.createContext(KP),GP=f.createContext(Gse);function Yse(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new cm}}}function Qse(t,e){switch(e.type){case mi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case mi.DragEnd:case mi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mi.RegisterDroppable:{const{element:n}=e,{id:s}=n,a=new cm(t.droppable.containers);return a.set(s,n),{...t,droppable:{...t.droppable,containers:a}}}case mi.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=e,r=t.droppable.containers.get(n);if(!r||s!==r.key)return t;const o=new cm(t.droppable.containers);return o.set(n,{...r,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case mi.UnregisterDroppable:{const{id:n,key:s}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const r=new cm(t.droppable.containers);return r.delete(n),{...t,droppable:{...t.droppable,containers:r}}}default:return t}}function Zse(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:a}=f.useContext(pu),r=ng(s),o=ng(n?.id);return f.useEffect(()=>{if(!e&&!s&&r&&o!=null){if(!mf(r)||document.activeElement===r.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:m}=c;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const p=Yie(u);if(p){p.focus();break}}})}},[s,e,a,o,r]),null}function YP(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((a,r)=>r({transform:a,...s}),n):n}function Xse(t){return f.useMemo(()=>({draggable:{...Yh.draggable,...t?.draggable},droppable:{...Yh.droppable,...t?.droppable},dragOverlay:{...Yh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Jse(t){let{activeNode:e,measure:n,initialRect:s,config:a=!0}=t;const r=f.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;xa(()=>{if(!o&&!c||!e){r.current=!1;return}if(r.current||!s)return;const m=e?.node.current;if(!m||m.isConnected===!1)return;const u=n(m),p=PP(u,s);if(o||(p.x=0),c||(p.y=0),r.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=IP(m);h&&h.scrollBy({top:p.y,left:p.x})}},[e,o,c,s,n])}const hf=f.createContext({...ya,scaleX:1,scaleY:1});var Yr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Yr||(Yr={}));const $k=f.memo(function(e){var n,s,a,r;let{id:o,accessibility:c,autoScroll:d=!0,children:m,sensors:u=Wse,collisionDetection:p=RP,measuring:h,modifiers:g,...v}=e;const x=f.useReducer(Qse,void 0,Yse),[y,b]=x,[w,k]=tse(),[_,j]=f.useState(Yr.Uninitialized),T=_===Yr.Initialized,{draggable:{active:N,nodes:E,translate:A},droppable:{containers:L}}=y,C=N!=null?E.get(N):null,P=f.useRef({initial:null,translated:null}),R=f.useMemo(()=>{var Ae;return N!=null?{id:N,data:(Ae=C?.data)!=null?Ae:Kse,rect:P}:null},[N,C]),M=f.useRef(null),[O,q]=f.useState(null),[U,H]=f.useState(null),ae=Rm(v,Object.values(v)),V=hu("DndDescribedBy",o),pe=f.useMemo(()=>L.getEnabled(),[L]),oe=Xse(h),{droppableRects:ne,measureDroppableContainers:se,measuringScheduled:W}=Ise(pe,{dragging:T,dependencies:[A.x,A.y],config:oe.droppable}),ge=Pse(E,N),ee=f.useMemo(()=>U?sg(U):null,[U]),ie=yt(),ue=Ose(ge,oe.draggable.measure);Jse({activeNode:N!=null?E.get(N):null,config:ie.layoutShiftCompensation,initialRect:ue,measure:oe.draggable.measure});const G=OC(ge,oe.draggable.measure,ue),le=OC(ge?ge.parentElement:null),re=f.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),D=L.getNodeFor((n=re.current.over)==null?void 0:n.id),I=Use({measure:oe.dragOverlay.measure}),ce=(s=I.nodeRef.current)!=null?s:ge,Z=T?(a=I.rect)!=null?a:G:null,K=!!(I.nodeRef.current&&I.rect),B=$se(K?null:G),F=UP(ce?ts(ce):null),J=Bse(T?D??ge:null),Q=Vse(J),me=YP(g,{transform:{x:A.x-B.x,y:A.y-B.y,scaleX:1,scaleY:1},activatorEvent:U,active:R,activeNodeRect:G,containerNodeRect:le,draggingNodeRect:Z,over:re.current.over,overlayNodeRect:I.rect,scrollableAncestors:J,scrollableAncestorRects:Q,windowRect:F}),te=ee?Cc(ee,A):null,Y=qse(J),Ce=FC(Y),ye=FC(Y,[G]),Te=Cc(me,Ce),et=Z?hse(Z,me):null,kt=R&&et?p({active:R,collisionRect:et,droppableRects:ne,droppableContainers:pe,pointerCoordinates:te}):null,At=cse(kt,"id"),[qt,Ie]=f.useState(null),De=K?me:Cc(me,ye),xe=mse(De,(r=qt?.rect)!=null?r:null,G),ke=f.useRef(null),Oe=f.useCallback((Ae,Be)=>{let{sensor:z,options:X}=Be;if(M.current==null)return;const fe=E.get(M.current);if(!fe)return;const _e=Ae.nativeEvent,ze=new z({active:M.current,activeNode:fe,event:_e,options:X,context:re,onAbort(nt){if(!E.get(nt))return;const{onDragAbort:jt}=ae.current,ot={id:nt};jt?.(ot),w({type:"onDragAbort",event:ot})},onPending(nt,at,jt,ot){if(!E.get(nt))return;const{onDragPending:Wt}=ae.current,we={id:nt,constraint:at,initialCoordinates:jt,offset:ot};Wt?.(we),w({type:"onDragPending",event:we})},onStart(nt){const at=M.current;if(at==null)return;const jt=E.get(at);if(!jt)return;const{onDragStart:ot}=ae.current,wt={activatorEvent:_e,active:{id:at,data:jt.data,rect:P}};La.unstable_batchedUpdates(()=>{ot?.(wt),j(Yr.Initializing),b({type:mi.DragStart,initialCoordinates:nt,active:at}),w({type:"onDragStart",event:wt}),q(ke.current),H(_e)})},onMove(nt){b({type:mi.DragMove,coordinates:nt})},onEnd:Je(mi.DragEnd),onCancel:Je(mi.DragCancel)});ke.current=ze;function Je(nt){return async function(){const{active:jt,collisions:ot,over:wt,scrollAdjustedTranslate:Wt}=re.current;let we=null;if(jt&&Wt){const{cancelDrop:he}=ae.current;we={activatorEvent:_e,active:jt,collisions:ot,delta:Wt,over:wt},nt===mi.DragEnd&&typeof he=="function"&&await Promise.resolve(he(we))&&(nt=mi.DragCancel)}M.current=null,La.unstable_batchedUpdates(()=>{b({type:nt}),j(Yr.Uninitialized),Ie(null),q(null),H(null),ke.current=null;const he=nt===mi.DragEnd?"onDragEnd":"onDragCancel";if(we){const Re=ae.current[he];Re?.(we),w({type:he,event:we})}})}}},[E]),Qe=f.useCallback((Ae,Be)=>(z,X)=>{const fe=z.nativeEvent,_e=E.get(X);if(M.current!==null||!_e||fe.dndKit||fe.defaultPrevented)return;const ze={active:_e};Ae(z,Be.options,ze)===!0&&(fe.dndKit={capturedBy:Be.sensor},M.current=X,Oe(z,Be))},[E,Oe]),ct=Mse(u,Qe);Hse(u),xa(()=>{G&&_===Yr.Initializing&&j(Yr.Initialized)},[G,_]),f.useEffect(()=>{const{onDragMove:Ae}=ae.current,{active:Be,activatorEvent:z,collisions:X,over:fe}=re.current;if(!Be||!z)return;const _e={active:Be,activatorEvent:z,collisions:X,delta:{x:Te.x,y:Te.y},over:fe};La.unstable_batchedUpdates(()=>{Ae?.(_e),w({type:"onDragMove",event:_e})})},[Te.x,Te.y]),f.useEffect(()=>{const{active:Ae,activatorEvent:Be,collisions:z,droppableContainers:X,scrollAdjustedTranslate:fe}=re.current;if(!Ae||M.current==null||!Be||!fe)return;const{onDragOver:_e}=ae.current,ze=X.get(At),Je=ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null,nt={active:Ae,activatorEvent:Be,collisions:z,delta:{x:fe.x,y:fe.y},over:Je};La.unstable_batchedUpdates(()=>{Ie(Je),_e?.(nt),w({type:"onDragOver",event:nt})})},[At]),xa(()=>{re.current={activatorEvent:U,active:R,activeNode:ge,collisionRect:et,collisions:kt,droppableRects:ne,draggableNodes:E,draggingNode:ce,draggingNodeRect:Z,droppableContainers:L,over:qt,scrollableAncestors:J,scrollAdjustedTranslate:Te},P.current={initial:Z,translated:et}},[R,ge,kt,et,E,ce,Z,ne,L,qt,J,Te]),Ase({...ie,delta:A,draggingRect:et,pointerCoordinates:te,scrollableAncestors:J,scrollableAncestorRects:Q});const Tt=f.useMemo(()=>({active:R,activeNode:ge,activeNodeRect:G,activatorEvent:U,collisions:kt,containerNodeRect:le,dragOverlay:I,draggableNodes:E,droppableContainers:L,droppableRects:ne,over:qt,measureDroppableContainers:se,scrollableAncestors:J,scrollableAncestorRects:Q,measuringConfiguration:oe,measuringScheduled:W,windowRect:F}),[R,ge,G,U,kt,le,I,E,L,ne,qt,se,J,Q,oe,W,F]),Ut=f.useMemo(()=>({activatorEvent:U,activators:ct,active:R,activeNodeRect:G,ariaDescribedById:{draggable:V},dispatch:b,draggableNodes:E,over:qt,measureDroppableContainers:se}),[U,ct,R,G,b,V,E,qt,se]);return We.createElement(TP.Provider,{value:k},We.createElement(pu.Provider,{value:Ut},We.createElement(GP.Provider,{value:Tt},We.createElement(hf.Provider,{value:xe},m)),We.createElement(Zse,{disabled:c?.restoreFocus===!1})),We.createElement(sse,{...c,hiddenTextDescribedById:V}));function yt(){const Ae=O?.autoScrollEnabled===!1,Be=typeof d=="object"?d.enabled===!1:d===!1,z=T&&!Ae&&!Be;return typeof d=="object"?{...d,enabled:z}:{enabled:z}}}),eae=f.createContext(null),BC="button",tae="Draggable";function nae(t){let{id:e,data:n,disabled:s=!1,attributes:a}=t;const r=hu(tae),{activators:o,activatorEvent:c,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:p,over:h}=f.useContext(pu),{role:g=BC,roleDescription:v="draggable",tabIndex:x=0}=a??{},y=d?.id===e,b=f.useContext(y?hf:eae),[w,k]=tg(),[_,j]=tg(),T=zse(o,e),N=Rm(n);xa(()=>(p.set(e,{id:e,key:r,node:w,activatorNode:_,data:N}),()=>{const A=p.get(e);A&&A.key===r&&p.delete(e)}),[p,e]);const E=f.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":s,"aria-pressed":y&&g===BC?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,g,x,y,v,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:m,attributes:E,isDragging:y,listeners:s?void 0:T,node:w,over:h,setNodeRef:k,setActivatorNodeRef:j,transform:b}}function QP(){return f.useContext(GP)}const iae="Droppable",sae={timeout:25};function aae(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:a}=t;const r=hu(iae),{active:o,dispatch:c,over:d,measureDroppableContainers:m}=f.useContext(pu),u=f.useRef({disabled:n}),p=f.useRef(!1),h=f.useRef(null),g=f.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:y}={...sae,...a},b=Rm(x??s),w=f.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{m(Array.isArray(b.current)?b.current:[b.current]),g.current=null},y)},[y]),k=uf({callback:w,disabled:v||!o}),_=f.useCallback((E,A)=>{k&&(A&&(k.unobserve(A),p.current=!1),E&&k.observe(E))},[k]),[j,T]=tg(_),N=Rm(e);return f.useEffect(()=>{!k||!j.current||(k.disconnect(),p.current=!1,k.observe(j.current))},[j,k]),f.useEffect(()=>(c({type:mi.RegisterDroppable,element:{id:s,key:r,disabled:n,node:j,rect:h,data:N}}),()=>c({type:mi.UnregisterDroppable,key:r,id:s})),[s]),f.useEffect(()=>{n!==u.current.disabled&&(c({type:mi.SetDroppableDisabled,id:s,key:r,disabled:n}),u.current.disabled=n)},[s,r,n,c]),{active:o,rect:h,isOver:d?.id===s,node:j,over:d,setNodeRef:T}}function rae(t){let{animation:e,children:n}=t;const[s,a]=f.useState(null),[r,o]=f.useState(null),c=ng(n);return!n&&!s&&c&&a(c),xa(()=>{if(!r)return;const d=s?.key,m=s?.props.id;if(d==null||m==null){a(null);return}Promise.resolve(e(m,r)).then(()=>{a(null)})},[e,s,r]),We.createElement(We.Fragment,null,n,s?f.cloneElement(s,{ref:o}):null)}const lae={x:0,y:0,scaleX:1,scaleY:1};function oae(t){let{children:e}=t;return We.createElement(pu.Provider,{value:KP},We.createElement(hf.Provider,{value:lae},e))}const cae={position:"fixed",touchAction:"none"},dae=t=>mf(t)?"transform 250ms ease":void 0,mae=f.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:a,children:r,className:o,rect:c,style:d,transform:m,transition:u=dae}=t;if(!c)return null;const p=a?m:{...m,scaleX:1,scaleY:1},h={...cae,width:c.width,height:c.height,top:c.top,left:c.left,transform:Ya.Transform.toString(p),transformOrigin:a&&s?rse(s,c):void 0,transition:typeof u=="function"?u(s):u,...d};return We.createElement(n,{className:o,style:h,ref:e},r)}),uae=t=>e=>{let{active:n,dragOverlay:s}=e;const a={},{styles:r,className:o}=t;if(r!=null&&r.active)for(const[c,d]of Object.entries(r.active))d!==void 0&&(a[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(r!=null&&r.dragOverlay)for(const[c,d]of Object.entries(r.dragOverlay))d!==void 0&&s.node.style.setProperty(c,d);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[d,m]of Object.entries(a))n.node.style.setProperty(d,m);o!=null&&o.active&&n.node.classList.remove(o.active)}},hae=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ya.Transform.toString(e)},{transform:Ya.Transform.toString(n)}]},pae={duration:250,easing:"ease",keyframes:hae,sideEffects:uae({styles:{active:{opacity:"0"}}})};function gae(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=t;return df((r,o)=>{if(e===null)return;const c=n.get(r);if(!c)return;const d=c.node.current;if(!d)return;const m=WP(o);if(!m)return;const{transform:u}=ts(o).getComputedStyle(o),p=MP(u);if(!p)return;const h=typeof e=="function"?e:fae(e);return qP(d,a.draggable.measure),h({active:{id:r,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:a,transform:p})})}function fae(t){const{duration:e,easing:n,sideEffects:s,keyframes:a}={...pae,...t};return r=>{let{active:o,dragOverlay:c,transform:d,...m}=r;if(!e)return;const u={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},h={x:d.x-u.x,y:d.y-u.y,...p},g=a({...m,active:o,dragOverlay:c,transform:{initial:d,final:h}}),[v]=g,x=g[g.length-1];if(JSON.stringify(v)===JSON.stringify(x))return;const y=s?.({active:o,dragOverlay:c,...m}),b=c.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{b.onfinish=()=>{y?.(),w()}})}}let qC=0;function vae(t){return f.useMemo(()=>{if(t!=null)return qC++,qC},[t])}const ZP=We.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:a,transition:r,modifiers:o,wrapperElement:c="div",className:d,zIndex:m=999}=t;const{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggableNodes:v,droppableContainers:x,dragOverlay:y,over:b,measuringConfiguration:w,scrollableAncestors:k,scrollableAncestorRects:_,windowRect:j}=QP(),T=f.useContext(hf),N=vae(p?.id),E=YP(o,{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:k,scrollableAncestorRects:_,transform:T,windowRect:j}),A=Fk(h),L=gae({config:s,draggableNodes:v,droppableContainers:x,measuringConfiguration:w}),C=A?y.setRef:void 0;return We.createElement(oae,null,We.createElement(rae,{animation:L},p&&N?We.createElement(mae,{key:N,id:p.id,ref:C,as:c,activatorEvent:u,adjustScale:e,className:d,transition:r,rect:A,style:{zIndex:m,...a},transform:E},n):null))});function pf(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function xae(t,e){return t.reduce((n,s,a)=>{const r=e.get(s);return r&&(n[a]=r),n},Array(t.length))}function gh(t){return t!==null&&t>=0}function yae(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bae(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Bk=t=>{let{rects:e,activeIndex:n,overIndex:s,index:a}=t;const r=pf(e,s,n),o=e[a],c=r[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},fh={scaleX:1,scaleY:1},XP=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:a,rects:r,overIndex:o}=t;const c=(e=r[n])!=null?e:s;if(!c)return null;if(a===n){const m=r[o];return m?{x:0,y:n<o?m.top+m.height-(c.top+c.height):m.top-c.top,...fh}:null}const d=wae(r,a,n);return a>n&&a<=o?{x:0,y:-c.height-d,...fh}:a<n&&a>=o?{x:0,y:c.height+d,...fh}:{x:0,y:0,...fh}};function wae(t,e,n){const s=t[e],a=t[e-1],r=t[e+1];return s?n<e?a?s.top-(a.top+a.height):r?r.top-(s.top+s.height):0:r?r.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const JP="Sortable",eM=We.createContext({activeIndex:-1,containerId:JP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bk,disabled:{draggable:!1,droppable:!1}});function qk(t){let{children:e,id:n,items:s,strategy:a=Bk,disabled:r=!1}=t;const{active:o,dragOverlay:c,droppableRects:d,over:m,measureDroppableContainers:u}=QP(),p=hu(JP,n),h=c.rect!==null,g=f.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),v=o!=null,x=o?g.indexOf(o.id):-1,y=m?g.indexOf(m.id):-1,b=f.useRef(g),w=!yae(g,b.current),k=y!==-1&&x===-1||w,_=bae(r);xa(()=>{w&&v&&u(g)},[w,g,v,u]),f.useEffect(()=>{b.current=g},[g]);const j=f.useMemo(()=>({activeIndex:x,containerId:p,disabled:_,disableTransforms:k,items:g,overIndex:y,useDragOverlay:h,sortedRects:xae(g,d),strategy:a}),[x,p,_.draggable,_.droppable,k,g,y,d,h,a]);return We.createElement(eM.Provider,{value:j},e)}const kae=t=>{let{id:e,items:n,activeIndex:s,overIndex:a}=t;return pf(n,s,a).indexOf(e)},jae=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:a,items:r,newIndex:o,previousItems:c,previousContainerId:d,transition:m}=t;return!m||!s||c!==r&&a===o?!1:n?!0:o!==a&&e===d},Nae={duration:200,easing:"ease"},tM="transform",Cae=Ya.Transition.toString({property:tM,duration:0,easing:"linear"}),Sae={roleDescription:"sortable"};function _ae(t){let{disabled:e,index:n,node:s,rect:a}=t;const[r,o]=f.useState(null),c=f.useRef(n);return xa(()=>{if(!e&&n!==c.current&&s.current){const d=a.current;if(d){const m=md(s.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&o(u)}}n!==c.current&&(c.current=n)},[e,n,s,a]),f.useEffect(()=>{r&&o(null)},[r]),r}function Hk(t){let{animateLayoutChanges:e=jae,attributes:n,disabled:s,data:a,getNewIndex:r=kae,id:o,strategy:c,resizeObserverConfig:d,transition:m=Nae}=t;const{items:u,containerId:p,activeIndex:h,disabled:g,disableTransforms:v,sortedRects:x,overIndex:y,useDragOverlay:b,strategy:w}=f.useContext(eM),k=Eae(s,g),_=u.indexOf(o),j=f.useMemo(()=>({sortable:{containerId:p,index:_,items:u},...a}),[p,a,_,u]),T=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:N,node:E,isOver:A,setNodeRef:L}=aae({id:o,data:j,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...d}}),{active:C,activatorEvent:P,activeNodeRect:R,attributes:M,setNodeRef:O,listeners:q,isDragging:U,over:H,setActivatorNodeRef:ae,transform:V}=nae({id:o,data:j,attributes:{...Sae,...n},disabled:k.draggable}),pe=Uie(L,O),oe=!!C,ne=oe&&!v&&gh(h)&&gh(y),se=!b&&U,W=se&&ne?V:null,ee=ne?W??(c??w)({rects:x,activeNodeRect:R,activeIndex:h,overIndex:y,index:_}):null,ie=gh(h)&&gh(y)?r({id:o,items:u,activeIndex:h,overIndex:y}):_,ue=C?.id,G=f.useRef({activeId:ue,items:u,newIndex:ie,containerId:p}),le=u!==G.current.items,re=e({active:C,containerId:p,isDragging:U,isSorting:oe,id:o,index:_,items:u,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:m,wasDragging:G.current.activeId!=null}),D=_ae({disabled:!re,index:_,node:E,rect:N});return f.useEffect(()=>{oe&&G.current.newIndex!==ie&&(G.current.newIndex=ie),p!==G.current.containerId&&(G.current.containerId=p),u!==G.current.items&&(G.current.items=u)},[oe,ie,p,u]),f.useEffect(()=>{if(ue===G.current.activeId)return;if(ue!=null&&G.current.activeId==null){G.current.activeId=ue;return}const ce=setTimeout(()=>{G.current.activeId=ue},50);return()=>clearTimeout(ce)},[ue]),{active:C,activeIndex:h,attributes:M,data:j,rect:N,index:_,newIndex:ie,items:u,isOver:A,isSorting:oe,isDragging:U,listeners:q,node:E,overIndex:y,over:H,setNodeRef:pe,setActivatorNodeRef:ae,setDroppableNodeRef:L,setDraggableNodeRef:O,transform:D??ee,transition:I()};function I(){if(D||le&&G.current.newIndex===_)return Cae;if(!(se&&!mf(P)||!m)&&(oe||re))return Ya.Transition.toString({...m,property:tM})}}function Eae(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}gn.Down,gn.Right,gn.Up,gn.Left;const Tae="Patient Registration",Aae="appointment_module",Dae="active",Rae=[{id:"name",type:"text",label:"Full Name",placeholder:"Enter full name",required:!0,columnClass:"col-md-6 col-12"},{id:"email",type:"email",label:"Email",placeholder:"Enter email",required:!0,columnClass:"col-md-6 col-12"},{id:"phone",type:"text",label:"Phone",placeholder:"Enter phone",required:!1,columnClass:"col-md-6 col-12"},{id:"gender",type:"select",label:"Gender",placeholder:"Select gender",required:!0,columnClass:"col-md-6 col-12",options:["Male","Female","Other"]}],Pae={appointment_status:[{id:"1"}],show_mode:[{id:"appointment"}],clinics:[],roles:["doctor","receptionist"]},Mae={name:Tae,moduleType:Aae,status:Dae,fields:Rae,conditions:Pae},Iae=[{id:"image/jpeg",text:l("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:l("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:l("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:l("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:l("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:l("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:l("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:l("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:l("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:l("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:l("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:l("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:l("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:l("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:l("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:l("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:l("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:l("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:l("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:l("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:l("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:l("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:l("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:l("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:l("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:l("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:l("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:l("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:l("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:l("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:l("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:l("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:l("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:l("7Z Archive (7z)","kivicare-clinic-management-system")}],nM=[{type:"number",label:l("Number","kivicare-clinic-management-system"),icon:"ph-list-numbers"},{type:"textarea",label:l("Text Area","kivicare-clinic-management-system"),icon:"ph-article-ny-times"},{type:"email",label:l("Email","kivicare-clinic-management-system"),icon:"ph-envelope"},{type:"select",label:l("Dropdown","kivicare-clinic-management-system"),icon:"ph-caret-down"},{type:"radio",label:l("Radio Buttons","kivicare-clinic-management-system"),icon:"ph-radio-button"},{type:"checkbox",label:l("Checkbox","kivicare-clinic-management-system"),icon:"ph-check-square"},{type:"file",label:l("File Upload","kivicare-clinic-management-system"),icon:"ph-paperclip"},{type:"date",label:l("Date","kivicare-clinic-management-system"),icon:"ph-calendar"}],HC=[{value:"col-12",label:l("Full Width","kivicare-clinic-management-system")},{value:"col-md-6 col-12",label:l("Half Width (Desktop)","kivicare-clinic-management-system")},{value:"col-lg-4 col-md-6 col-12",label:l("One Third (Large Screen)","kivicare-clinic-management-system")},{value:"col-lg-3 col-md-6 col-12",label:l("One Fourth (Large Screen)","kivicare-clinic-management-system")},{value:"col-xl-2 col-lg-3 col-md-6 col-12",label:l("One Sixth (Extra Large)","kivicare-clinic-management-system")}],Oae=[{value:"appointment_module",label:l("Appointment","kivicare-clinic-management-system")},{value:"patient_encounter_module",label:l("Encounter","kivicare-clinic-management-system")},{value:"patient_module",label:l("Patient","kivicare-clinic-management-system")},{value:"doctor_module",label:l("Doctor","kivicare-clinic-management-system")}],zC=[{value:"active",label:l("Active","kivicare-clinic-management-system")},{value:"inactive",label:l("Inactive","kivicare-clinic-management-system")}],Lae=t=>({id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:t,label:`${t.charAt(0).toUpperCase()+t.slice(1)} ${l("Field","kivicare-clinic-management-system")}`,placeholder:`${l("Enter","kivicare-clinic-management-system")} ${t}`,required:!1,className:"",columnClass:"col-xl-6 col-12",options:t==="select"||t==="radio"?[l("Option 1","kivicare-clinic-management-system"),l("Option 2","kivicare-clinic-management-system")]:[],fileTypes:t==="file"?[]:void 0}),Fae=({field:t,onEdit:e,onDelete:n,isActive:s,onClick:a})=>{const{attributes:r,listeners:o,setNodeRef:c,transform:d,transition:m,isDragging:u}=Hk({id:t.id}),p={transform:Ya.Transform.toString(d),transition:m,opacity:u?.5:1},h=()=>{switch(t.type){case"textarea":return i.jsx(Pt.Control,{as:"textarea",rows:1,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()});case"select":return i.jsx(lt,{placeholder:t.placeholder,options:t.options?.map(g=>({label:g,value:g}))||[],className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:g=>({...g,zIndex:9999})}});case"radio":return i.jsx("div",{className:"d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:t.options?.map((g,v)=>i.jsx(Pt.Check,{inline:!0,label:g,name:t.id,type:"radio",id:`${t.id}-radio-${v}`,className:"m-0"},v))});case"checkbox":return i.jsx(Pt.Check,{type:"checkbox",label:t.placeholder});case"file":return i.jsx(Pt.Control,{type:"file",onKeyDown:g=>g.stopPropagation()});case"date":return i.jsxs("div",{className:"input-group",children:[i.jsx(Wn,{onChange:()=>{},options:{dateFormat:"Y-m-d H:i",enableTime:!0,locale:Kn()},className:"form-control",placeholder:t.placeholder}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]});default:return i.jsx(Pt.Control,{type:t.type,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()})}};return i.jsxs("div",{ref:c,style:p,...r,className:`form-group custom-form-group ${s?"active":""}`,onClick:a,children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("span",{children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:PR(t.label)}}),t.required&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),e(t)},children:i.jsx("i",{className:"ph ph-pencil-simple-line font-size-18 text-primary"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),n(t.id)},children:i.jsx("i",{className:"ph ph-trash font-size-18 text-danger"})})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx("i",{className:"ph ph-hand-grabbing p-3 font-size-18 rounded bg-primary-subtle icon-color flex-shrink-0",...o,style:{cursor:"grab"},onMouseDown:g=>g.preventDefault()}),i.jsx("div",{className:"flex-grow-1",children:h()})]})]})},VC=({fieldType:t,onDragStart:e})=>{const n=nM.find(s=>s.type===t);return i.jsxs("div",{className:"d-flex align-items-center gap-lg-4 gap-2 p-3 bg-body rounded w-100",draggable:!0,onDragStart:s=>e(s,t),style:{cursor:"grab",userSelect:"none"},children:[i.jsx("i",{className:`ph ${n.icon} font-size-18 icon-color`}),i.jsx("span",{className:"font-size-14 fw-medium",children:n.label})]})},UC=()=>{const{id:t}=Yt(),{defaultClinicId:e}=mt(),n=!!t,[s,a]=f.useState("form"),[r,o]=f.useState(!1),[c,d]=f.useState(null),[m,u]=f.useState([]),[p,h]=f.useState(null),[g,v]=f.useState(!1),[x,y]=f.useState("right"),[b,w]=f.useState({name:"Custom Form",moduleType:"appointment_module",status:"active",formIcon:"",showInEncounter:!1,showInAppointment:!0,clinics:[],roles:[]}),[k,_]=f.useState(""),[j,T]=f.useState(!1),[N,E]=f.useState(!1),{control:A,handleSubmit:L,watch:C,setValue:P,reset:R,getValues:M}=Jt({defaultValues:b});f.useEffect(()=>{!n&&Vn()&&e&&(P("clinics",[String(e)]),w(Y=>({...Y,clinics:[String(e)]})))},[e,n,P]);const O=C("name"),q=C("moduleType"),U=mn(),H=typeof window<"u"?document.querySelector(".kivicare-dashboard")||document.body:null,{data:ae,isLoading:V}=QR(t,{enabled:n}),[pe,oe]=f.useState([]),[ne,se]=f.useState(""),[W,ge]=f.useState(!1);f.useEffect(()=>{(async()=>{try{ge(!0);const Ce=await Et.getClinics({page:1,per_page:100}),Te=(Ce?.data?.data||Ce?.data||[]).map(et=>({value:et.id,label:et.clinic_name||et.name||et.label||et.display_name}));oe(Te)}catch(Ce){console.error("[Clinics] Error:",Ce)}finally{ge(!1)}})()},[]);const ee=ne?pe.filter(Y=>Y.label.toLowerCase().includes(ne.toLowerCase())):pe,ie=AJ({onSuccess:Y=>{console.log("Custom form created successfully:",Y),U("/setting/custom-form/")},onError:Y=>{console.error("Error creating custom form:",Y)}}),ue=DJ({onSuccess:Y=>{console.log("Custom form updated successfully:",Y),U("/setting/custom-form/")},onError:Y=>{console.error("Error updating custom form:",Y)}});f.useEffect(()=>{if(n&&ae){const Y=ae.data;R({name:Y.name?.text||Y.name,moduleType:Y.moduleType,status:Y.status?.value||Y.status,showInEncounter:Y.conditions?.show_mode?.some(Ce=>Ce.id==="encounter")||!1,showInAppointment:Y.conditions?.show_mode?.some(Ce=>Ce.id==="appointment")||!1,clinics:Y.conditions?.clinics||[],roles:Y.conditions?.roles||[]}),u(Y.fields||[]),w(Ce=>({...Ce,name:Y.name?.text||Y.name,moduleType:Y.moduleType?.value||Y.moduleType,status:Y.status?.value||Y.status}))}},[ae,n,R]);const G=Y=>{if(Vn()&&e){const ye=Y.clinics||[],Te=String(e);ye.includes(Te)||(Y.clinics=[...ye,Te])}Y.moduleType=Y.moduleType?.value||Y.moduleType;const Ce={...Y,fields:m};console.log("Saving form:",Ce),n?ue.mutate({id:t,...Ce}):ie.mutate(Ce)},le=Y=>{Y!==r&&(v(!0),y(Y?"right":"left"),setTimeout(()=>{o(Y),setTimeout(()=>v(!1),300)},150))},re=(Y,Ce)=>{h(Ce),Y.dataTransfer.setData("text/plain",Ce)},D=Y=>{Y.preventDefault()},I=Y=>{Y.preventDefault();const Ce=Y.dataTransfer.getData("text/plain")||p;if(Ce){const ye=Lae(Ce);u(Te=>[...Te,ye]),d(ye),o(!0)}h(null)},ce=Y=>{d(Y),le(!0)},Z=Y=>{dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ce=>{Ce.isConfirmed&&(u(ye=>ye.filter(Te=>Te.id!==Y)),c?.id===Y&&(d(null),o(!1)),tt({title:l("Deleted!","kivicare-clinic-management-system"),text:l("Your field has been deleted.","kivicare-clinic-management-system")}))})},K=Y=>{u(Ce=>Ce.map(ye=>ye.id===Y.id?Y:ye)),d(Y)},B=Y=>{d(Y),le(!0)},F=()=>{try{const Y=JSON.parse(k);Y.name&&(P("name",Y.name),w(Ce=>({...Ce,name:Y.name}))),Y.moduleType&&(P("moduleType",Y.moduleType),w(Ce=>({...Ce,moduleType:Y.moduleType}))),Y.status&&(P("status",Y.status),w(Ce=>({...Ce,status:Y.status}))),Y.conditions&&(Y.conditions.show_mode&&(P("showInEncounter",Y.conditions.show_mode.some(Ce=>Ce.id==="encounter")),P("showInAppointment",Y.conditions.show_mode.some(Ce=>Ce.id==="appointment"))),Y.conditions.clinics&&P("clinics",Y.conditions.clinics),Y.conditions.roles&&P("roles",Y.conditions.roles)),Y.fields&&u(Y.fields),_(""),a("form"),tt({title:l("Success","kivicare-clinic-management-system"),text:l("Form imported successfully","kivicare-clinic-management-system")})}catch{Me({title:l("Error","kivicare-clinic-management-system"),text:l("Invalid JSON format","kivicare-clinic-management-system")})}},J=()=>{const Y=M(),Ce={name:Y.name,moduleType:Y.moduleType?.value||Y.moduleType,status:Y.status,fields:m,conditions:{show_mode:[],clinics:Y.clinics||[],roles:Y.roles||[]}};Y.showInAppointment&&Ce.conditions.show_mode.push({id:"appointment"}),Y.showInEncounter&&Ce.conditions.show_mode.push({id:"encounter"});const ye="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(Ce,null,2)),Te=document.createElement("a");Te.setAttribute("href",ye),Te.setAttribute("download",(Y.name||"custom_form")+".json"),document.body.appendChild(Te),Te.click(),Te.remove()},Q=()=>{T(!0)},me=()=>{T(!1)},te=Y=>{const{active:Ce,over:ye}=Y;Ce.id!==ye.id&&u(Te=>{const et=Te.findIndex(At=>At.id===Ce.id),kt=Te.findIndex(At=>At.id===ye.id);return pf(Te,et,kt)})};return n&&V?i.jsx(qy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:L(G),children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:"/setting/custom-form/",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[l("Back","kivicare-clinic-management-system")," "]})]})})]}),i.jsxs(Qn,{children:[i.jsx(_t,{xs:12,md:5,lg:4,xl:3,children:i.jsx("div",{className:"card custom-form-builder-sidebar",children:i.jsx("div",{className:"card-body",children:r?i.jsxs("div",{className:`slide-transition ${g&&x==="left"?"slide-enter-left":"slide-active"}`,children:[i.jsxs("button",{className:"d-flex align-items-center gap-2 mb-4 btn btn-link p-0",onClick:()=>le(!1),type:"button",children:[i.jsx("i",{className:"ph ph-caret-left font-size-18 icon-color"}),i.jsx("h6",{className:"m-0",children:l("Back to Fields","kivicare-clinic-management-system")})]}),i.jsxs(Qn,{className:"gy-3",children:[i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Label","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{type:"text",value:c?.label||"",onChange:Y=>K({...c,label:Y.target.value}),onKeyDown:Y=>Y.stopPropagation(),placeholder:l("Field label (HTML allowed)","kivicare-clinic-management-system")}),i.jsx("small",{className:"text-muted",children:l("HTML tags like <strong>, <em>, <span> are allowed for formatting","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Placeholder","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{type:"text",value:c?.placeholder||"",onChange:Y=>K({...c,placeholder:Y.target.value}),onKeyDown:Y=>Y.stopPropagation(),placeholder:l("Field placeholder","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Field Type","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{type:"text",value:c?.type||"",disabled:!0})]})}),c?.type==="file"&&i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(lt,{isMulti:!0,className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Select file types","kivicare-clinic-management-system"),options:Iae,getOptionLabel:Y=>Y.text,getOptionValue:Y=>Y.id,value:c?.fileTypes||[],onChange:Y=>K({...c,fileTypes:Y||[]}),isClearable:!0,styles:{menuPortal:Y=>({...Y,zIndex:9999})}}),i.jsx("small",{className:"text-muted",children:l("Select allowed file types for upload","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsx("div",{className:`py-2 px-3 bg-body border rounded ${c?.required?"border-primary":""}`,children:i.jsx(Pt.Check,{inline:!0,label:l("Required field","kivicare-clinic-management-system"),checked:c?.required||!1,onChange:Y=>K({...c,required:Y.target.checked}),type:"checkbox"})})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("CSS Class","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{type:"text",value:c?.className||"",onChange:Y=>K({...c,className:Y.target.value}),onKeyDown:Y=>Y.stopPropagation(),placeholder:"mb-3"})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Column Width","kivicare-clinic-management-system")}),i.jsx(lt,{placeholder:l("Select column width","kivicare-clinic-management-system"),value:HC.find(Y=>Y.value===c?.columnClass)||null,onChange:Y=>K({...c,columnClass:Y?.value||"col-md-6 col-12"}),options:HC,className:"react-select-box",menuPlacement:"top",menuPosition:"fixed",menuPortalTarget:H,classNamePrefix:"react-select",styles:{menuPortal:Y=>({...Y,zIndex:9999})}})]})}),(c?.type==="select"||c?.type==="radio")&&i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Options (one per line)","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{as:"textarea",rows:3,value:c?.options?.join(`
`)||"",onChange:Y=>K({...c,options:Y.target.value.split(`
`)}),onKeyDown:Y=>Y.stopPropagation(),placeholder:`${l("Option 1","kivicare-clinic-management-system")}
${l("Option 2","kivicare-clinic-management-system")}
${l("Option 3","kivicare-clinic-management-system")}`})]})})]})]}):i.jsxs("div",{className:`slide-transition ${g&&x==="right"?"slide-enter-right":"slide-active"}`,children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",id:"pills-tab",role:"tablist",children:[i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="form"?" active":""}`,onClick:()=>a("form"),type:"button",children:l("Form","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="formFields"?" active":""}`,onClick:()=>a("formFields"),type:"button",children:l("Form Fields","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"tab-content",id:"pills-tabContent",children:[s==="form"&&i.jsx("div",{className:"tab-pane active opacity-1",children:i.jsxs(Qn,{className:"gy-3",children:[i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Form Name","kivicare-clinic-management-system")}),i.jsx(be,{name:"name",control:A,render:({field:Y})=>i.jsx(Pt.Control,{...Y,type:"text",onKeyDown:Ce=>Ce.stopPropagation(),placeholder:l("Enter form name","kivicare-clinic-management-system")})})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Module Type","kivicare-clinic-management-system")}),i.jsx(be,{name:"moduleType",control:A,render:({field:Y})=>i.jsx(lt,{placeholder:l("Select module type","kivicare-clinic-management-system"),value:Y.value,onChange:Y.onChange,options:Oae,isSearchable:!1,isDisabled:n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Status","kivicare-clinic-management-system")}),i.jsx(be,{name:"status",control:A,render:({field:Y})=>i.jsx(lt,{placeholder:l("Select status","kivicare-clinic-management-system"),value:zC.find(Ce=>Ce.value===Y.value)||null,onChange:Ce=>Y.onChange(Ce?.value||""),options:zC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})})]})}),q.value==="appointment_module"&&i.jsx(i.Fragment,{children:i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Show in Sections","kivicare-clinic-management-system")}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:[i.jsx(be,{name:"showInAppointment",control:A,render:({field:Y})=>i.jsx(Pt.Check,{inline:!0,label:l("Appointment","kivicare-clinic-management-system"),checked:Y.value,onChange:Ce=>Y.onChange(Ce.target.checked),type:"checkbox",id:"showInAppointment",className:"m-0"})}),i.jsx(be,{name:"showInEncounter",control:A,render:({field:Y})=>i.jsx(Pt.Check,{inline:!0,label:l("Encounter","kivicare-clinic-management-system"),checked:Y.value,onChange:Ce=>Y.onChange(Ce.target.checked),type:"checkbox",id:"showInEncounter",className:"m-0"})})]}),i.jsx("small",{className:"text-muted",children:l("Note: If encounter is selected, form will only be displayed if there has been an appointment encounter","kivicare-clinic-management-system")})]})})}),Er()&&i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Clinics","kivicare-clinic-management-system")}),i.jsx(be,{name:"clinics",control:A,render:({field:Y})=>i.jsx(lt,{placeholder:l("Select clinics","kivicare-clinic-management-system"),value:Y.value?Y.value.map(Ce=>pe.find(ye=>String(ye.value)===String(Ce))).filter(Boolean):[],onChange:Ce=>Y.onChange(Ce?Ce.map(ye=>ye.value):[]),onInputChange:Ce=>se(Ce),options:ee,isMulti:!0,isLoading:W,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:Ce=>({...Ce,zIndex:9999})},filterOption:null})}),i.jsx("small",{className:"text-muted",children:l("Note: To show form to all clinics, please leave the selection blank.","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Roles to Access","kivicare-clinic-management-system")}),i.jsx(be,{name:"roles",control:A,render:({field:Y})=>i.jsx(lt,{placeholder:l("Select roles","kivicare-clinic-management-system"),value:Y.value?Y.value.map(Ce=>dj().find(ye=>ye.value===Ce)):[],onChange:Ce=>Y.onChange(Ce?Ce.map(ye=>ye.value):[]),options:dj(),isMulti:!0,isSearchable:!1,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})}),i.jsx("small",{className:"text-muted",children:l("Note: To show form to all roles, please leave the selection blank.","kivicare-clinic-management-system")})]})})]})}),s==="formFields"&&i.jsx("div",{className:"tab-pane active opacity-1",children:i.jsx("div",{className:"form-filed-content d-flex align-items-center gap-2 flex-column",children:nM.map(Y=>i.jsx(VC,{fieldType:Y.type,onDragStart:re},Y.type))})})]})]})})})}),i.jsxs(_t,{xs:12,md:7,lg:8,xl:9,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:n?l("Edit Custom Form","kivicare-clinic-management-system"):l("Add Custom Form","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>E(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:J,children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:l("Export","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:Q,children:[i.jsx("i",{className:"ph ph-eye"}),i.jsx("span",{children:l("View Form","kivicare-clinic-management-system")})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ie.isPending||ue.isPending,children:ie.isPending||ue.isPending?l("Saving...","kivicare-clinic-management-system"):n?l("Update Form","kivicare-clinic-management-system"):l("Save Form","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",onDragOver:D,onDrop:I,style:{minHeight:"400px"},children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:b.name}),i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{o(!1),a("formFields")},children:l("Add fields","kivicare-clinic-management-system")})})]}),i.jsxs($k,{collisionDetection:RP,onDragEnd:te,children:[i.jsx(qk,{items:m.map(Y=>Y.id),strategy:Bk,children:i.jsxs(Qn,{className:"gy-4 custom-form-content",children:[i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Form Name","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{type:"text",value:O,onChange:Y=>P("name",Y.target.value),onKeyDown:Y=>Y.stopPropagation(),placeholder:l("Enter form name","kivicare-clinic-management-system")})]})}),m.map(Y=>i.jsx(_t,{className:Y.columnClass,children:i.jsx(Fae,{field:Y,onEdit:ce,onDelete:Z,isActive:c?.id===Y.id,onClick:()=>B(Y)})},Y.id)),m.length===0&&i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"text-center p-5 border-2 border-dashed rounded",style:{borderStyle:"dashed"},children:[i.jsx("i",{className:"ph ph-upload-simple font-size-32 text-muted mb-3"}),i.jsx("p",{className:"text-muted",children:l('Drag and drop form fields here or click "Add fields" to get started',"kivicare-clinic-management-system")})]})})]})}),i.jsx(ZP,{children:p?i.jsx("div",{className:"opacity-50",children:i.jsx(VC,{fieldType:p,onDragStart:re})}):null})]})]})})]})]})]}),i.jsxs(rt,{show:j,onHide:me,size:"lg",centered:!0,backdrop:"static",children:[i.jsxs(rt.Header,{children:[i.jsxs(rt.Title,{children:[l("Form Preview","kivicare-clinic-management-system")," - ",O||b.name]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:me,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Ga,{fields:m,data:{},readOnly:!1,formId:"preview_form"}),m.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:l("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(rt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:me,children:l("Close Preview","kivicare-clinic-management-system")})})]}),i.jsxs(rt,{show:N,onHide:()=>E(!1),size:"md",centered:!0,backdrop:"static",children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:l("Import Form","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>E(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Import JSON","kivicare-clinic-management-system")}),i.jsx(Pt.Control,{as:"textarea",rows:10,placeholder:l("Paste your JSON here","kivicare-clinic-management-system"),value:k,onChange:Y=>_(Y.target.value)}),i.jsx("div",{className:"mt-2",children:i.jsx("a",{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(Mae,null,2))}`,download:"sample1.json",children:l("Click here to download sample json file","kivicare-clinic-management-system")})})]})}),i.jsxs(rt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>E(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{F(),E(!1)},children:l("Import Form","kivicare-clinic-management-system")})]})]})]})},$ae=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s,isError:a,error:r}=VX(),o=GX(),c=YX(),d=n?.data||[],{data:m}=Cn(),u=m?.data?.hideUtilityLinks,p=On(),h=f.useMemo(()=>[p.accessor("server_name",{header:l("Service Name","kivicare-clinic-management-system"),cell:g=>i.jsxs("div",{children:[i.jsx("h6",{className:"m-0",children:g.getValue()}),i.jsx("small",{className:"text-muted",children:g.row.original.server_url})]})}),p.accessor("server_type",{header:l("Type","kivicare-clinic-management-system"),cell:g=>{const v=g.row.original.type_label||g.getValue();let x="bg-primary";switch(v.toLowerCase()){case"email":x="bg-primary";break;case"whatsapp":x="bg-success";break;case"sms":x="bg-success";break;case"push notification":x="bg-warning";break;case"webhook":x="bg-info";break;case"custom api":x="bg-secondary";break;default:x="bg-secondary"}return i.jsx("span",{className:`badge ${x}`,children:v})}}),p.accessor("is_active",{header:l("Status","kivicare-clinic-management-system"),cell:g=>i.jsx("div",{className:"form-check form-switch custom-switch-xl",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!g.getValue(),onClick:v=>{const x=g.row.original.id,y=v.target.checked;try{c.mutateAsync({id:x,data:{status:y}}).then(b=>{Ee(b.message)})}catch{v.target.checked=!y,Ee(l("Failed to update status","kivicare-clinic-management-system"))}}})})}),p.display({id:"actions",header:l("Action","kivicare-clinic-management-system"),cell:g=>{const{id:v}=g.row.original;return i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ht,{to:`/setting/custom-notification/edit/${v}`,className:"btn btn-link text-secondary p-0",title:l("Configure","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-gear"})}),i.jsx(ht,{to:`/setting/custom-notification/test/${v}`,className:"btn btn-link text-info p-0",title:l("Test","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-flask"})}),i.jsx(ht,{onClick:async x=>{x.preventDefault(),dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(async y=>{if(y.isConfirmed)try{await o.mutateAsync(v),Ee(l("Service deleted successfully","kivicare-clinic-management-system"))}catch{Ee(l("Failed to delete service","kivicare-clinic-management-system"))}})},className:"btn btn-link text-danger p-0",title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})})]})}})],[]);return e&&s?i.jsx(Nn,{}):i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-notification-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("Custom Notification","kivicare-clinic-management-system"),u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-notification-settings-documentation/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 ms-2 text-primary"})})]}),i.jsxs(ht,{to:"/setting/custom-notification/add",className:"btn btn-primary btn-sm",children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add New Service","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"table-responsive",children:a?i.jsx("div",{className:"alert alert-danger",children:r?.message||l("Failed to load data","kivicare-clinic-management-system")}):i.jsx(bn,{data:d,columns:h,enableSelection:!1})})]})})},WC=()=>{const{id:t}=Yt(),e=mn(),n=t&&t!=="new",s=UX(),a=WX(),{data:r,isLoading:o}=WR(t,{enabled:n}),{control:c,handleSubmit:d,formState:{errors:m},setValue:u,watch:p,reset:h,getValues:g}=Jt({defaultValues:{serverType:"",serverName:"",serverUrl:"",port:443,httpMethod:"POST",authMethod:"none",apiKey:"",keyLocation:"header",headerParamName:"Authorization",username:"",password:"",encoding:"Base64",accessToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature",senderName:"",senderEmail:"",enableSSL:!1,contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBodyFields:[{key:"",value:""}],requestBody:""}}),{append:v,remove:x}=kr({control:c,name:"customHeaders"}),{append:y,remove:b}=kr({control:c,name:"queryParams"}),{append:w,remove:k}=kr({control:c,name:"requestBodyFields"}),_=p(),[j,T]=f.useState(!1),[N,E]=f.useState(!1);f.useEffect(()=>{if(n&&r?.data){const D=r.data;let I=[{key:"",value:""}],ce=D.request_body||"";if(D.request_body)try{const Z=JSON.parse(D.request_body);typeof Z=="object"&&Z!==null?(I=Object.entries(Z).map(([K,B])=>({key:K,value:typeof B=="string"?B:JSON.stringify(B)})),I.length===0&&(I=[{key:"",value:""}])):I=[{key:"",value:D.request_body}]}catch{if(D.content_type==="application/x-www-form-urlencoded")try{const K=new URLSearchParams(D.request_body);I=[];for(let[B,F]of K.entries())I.push({key:B,value:F});I.length===0&&(I=[{key:"",value:""}])}catch{I=[{key:"",value:D.request_body}]}else I=[{key:"",value:D.request_body}]}console.log(D.auth_config?.access_token,"ritesh"),h({serverType:D.server_type||"",serverName:D.server_name||"",serverUrl:D.server_url||"",port:D.port||443,httpMethod:D.http_method||"POST",authMethod:D.auth_method||"none",apiKey:D.auth_config?.api_key||"",keyLocation:D.auth_config?.key_location||"header",headerParamName:D.auth_config?.header_param_name||"Authorization",clientId:D.auth_config?.client_id||"",clientSecret:D.auth_config?.client_secret||"",authUrl:D.auth_config?.auth_url||"",tokenUrl:D.auth_config?.token_url||"",redirectUrl:D.auth_config?.redirect_url||"",username:D.auth_config?.username||"",password:D.auth_config?.password||"",accessToken:D.auth_config?.access_token||"",tokenExpiry:D.auth_config?.token_expiry||"",scopes:D.auth_config?.scopes,senderName:D.sender_name||"",senderEmail:D.sender_email||"",enableSSL:D.enable_ssl||!1,contentType:D.content_type||"application/json",customHeaders:D.custom_headers?.length>0?D.custom_headers:[{key:"",value:""}],queryParams:D.query_params?.length>0?D.query_params:[{key:"",value:""}],requestBodyFields:I,requestBody:ce})}},[n,r,h]),f.useEffect(()=>{if(_.authMethod==="bearer"&&!_.redirectUrl){const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";u("redirectUrl",D)}},[_.authMethod,_.redirectUrl,u]);const A=[{name:"receiver_email",description:l("Recipient email address","kivicare-clinic-management-system"),example:"user@example.com"},{name:"receiver_number",description:l("Recipient phone number","kivicare-clinic-management-system"),example:"+1234567890"},{name:"subject",description:l("Message subject/title","kivicare-clinic-management-system"),example:"Appointment Confirmation"},{name:"content",description:l("Message content/body","kivicare-clinic-management-system"),example:"Your appointment is confirmed for tomorrow at 10:00 AM"},{name:"timestamp",description:l("Current timestamp","kivicare-clinic-management-system"),example:"2024-01-15 10:30:45"},{name:"clinic_name",description:l("Clinic/site name","kivicare-clinic-management-system"),example:"Healthcare Clinic"},{name:"content_sid",description:l("Content/Message SID identifier","kivicare-clinic-management-system"),example:"SM1234567890abcdef"}],L=[{value:"sms",label:"SMS"},{value:"whatsapp",label:"WhatsApp"},{value:"email",label:"Email"},{value:"webhook",label:"Webhook"},{value:"custom-api",label:"Custom API"},{value:"push-notification",label:"Push Notification"}],C=[{value:"none",label:"No Authentication"},{value:"apikey",label:"API Key Authentication"},{value:"basic",label:"Basic Authentication"},{value:"bearer",label:"Bearer Token Authentication (OAuth2 / JWT)"},{value:"jwt",label:"JWT (JSON Web Token)"},{value:"hmac",label:"HMAC / Signature Authentication"}],P=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],R=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],M=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],O=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],q=[{value:"HS256",label:"HS256"},{value:"HS384",label:"HS384"},{value:"HS512",label:"HS512"},{value:"RS256",label:"RS256"},{value:"RS384",label:"RS384"},{value:"RS512",label:"RS512"},{value:"ES256",label:"ES256"},{value:"ES384",label:"ES384"},{value:"ES512",label:"ES512"}],U=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}],H=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],ae=[{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],V=(D,I)=>{u(D,I)},pe=D=>{D==="customHeaders"?v({key:"",value:""}):D==="queryParams"?y({key:"",value:""}):D==="requestBodyFields"&&w({key:"",value:""})},oe=(D,I,ce,Z)=>{if(D==="customHeaders"){const B=g("customHeaders").map((F,J)=>J===I?{...F,[ce]:Z}:F);u("customHeaders",B)}else if(D==="queryParams"){const B=g("queryParams").map((F,J)=>J===I?{...F,[ce]:Z}:F);u("queryParams",B)}else if(D==="requestBodyFields"){const B=g("requestBodyFields").map((F,J)=>J===I?{...F,[ce]:Z}:F);u("requestBodyFields",B)}},ne=(D,I)=>{D==="customHeaders"?x(I):D==="queryParams"?b(I):D==="requestBodyFields"&&k(I)},se=()=>{switch(_.serverType){case"sms":return l("Enter phone number (e.g., +1234567890)","kivicare-clinic-management-system");case"email":return l("Enter email address (e.g., noreply@domain.com)","kivicare-clinic-management-system");case"push-notification":return l("Enter app identifier or sender ID","kivicare-clinic-management-system");default:return l("Enter sender identifier","kivicare-clinic-management-system")}},W=()=>{switch(_.contentType){case"application/json":return`{
  "to": "{{receiver_number}}",
  "message": "{{content}}",
  "content_id": "{{contentid}}",
  "appointment_id": "{{appointment_id}}",
  "patient_name": "{{patient_name}}",
  "doctor_name": "{{doctor_name}}",
  "clinic_name": "{{clinic_name}}",
  "appointment_date": "{{appointment_date}}",
  "appointment_time": "{{appointment_time}}"
}`;case"application/xml":return`<?xml version="1.0"?>
<notification>
  <to>{{receiver_number}}</to>
  <message>{{content}}</message>
  <content_id>{{contentid}}</content_id>
  <appointment_id>{{appointment_id}}</appointment_id>
  <patient_name>{{patient_name}}</patient_name>
  <doctor_name>{{doctor_name}}</doctor_name>
  <clinic_name>{{clinic_name}}</clinic_name>
  <appointment_date>{{appointment_date}}</appointment_date>
  <appointment_time>{{appointment_time}}</appointment_time>
</notification>`;case"application/x-www-form-urlencoded":return"to={{receiver_number}}&message={{content}}&content_id={{contentid}}&appointment_id={{appointment_id}}&patient_name={{patient_name}}&doctor_name={{doctor_name}}&clinic_name={{clinic_name}}&appointment_date={{appointment_date}}&appointment_time={{appointment_time}}";default:return"Use variables like {{receiver_number}}, {{content}}, {{contentid}}, {{appointment_id}}, {{patient_name}}, {{doctor_name}}, {{clinic_name}}, {{appointment_date}}, {{appointment_time}}"}},ge=()=>["POST","PUT","PATCH"].includes(_.httpMethod),ee=async D=>{try{await navigator.clipboard.writeText(`{{${D}}}`),console.log(`Copied {{${D}}} to clipboard`)}catch{const ce=document.createElement("textarea");ce.value=`{{${D}}}`,document.body.appendChild(ce),ce.select(),document.execCommand("copy"),document.body.removeChild(ce),console.log(`Copied {{${D}}} to clipboard`)}},ie=async()=>{if(!_.clientId||!_.clientSecret||!_.authUrl||!_.tokenUrl){Ee.error(l("Error: Please fill in all required OAuth2 fields (Client ID, Client Secret, Auth URL, Token URL)","kivicare-clinic-management-system"));return}E(!0),Ee.info(l("Starting OAuth2 authorization flow...","kivicare-clinic-management-system"));try{const D=new URLSearchParams({response_type:"code",client_id:_.clientId,redirect_uri:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",scope:_.scopes||"read write",state:Math.random().toString(36).substring(2,15)}),I=`${_.authUrl}?${D.toString()}`;Ee.info(l("Opening authorization window...","kivicare-clinic-management-system"));const ce=window.open(I,"oauth2_auth","width=600,height=700,scrollbars=yes,resizable=yes");if(!ce)throw new Error(l("Failed to open authorization window. Please allow popups for this site.","kivicare-clinic-management-system"));const Z=B=>{B.origin===window.location.origin&&(B.data.type==="oauth2_success"&&B.data.code?(ce.close(),window.removeEventListener("message",Z),ue(B.data.code)):B.data.type==="oauth2_error"&&(ce.close(),window.removeEventListener("message",Z),Ee.error(l("Authorization failed: ","kivicare-clinic-management-system")+B.data.error),E(!1)))};window.addEventListener("message",Z);const K=setInterval(()=>{ce.closed&&(clearInterval(K),window.removeEventListener("message",Z),Ee.warning(l("Authorization cancelled by user","kivicare-clinic-management-system")),E(!1))},1e3)}catch(D){console.error("OAuth2 Error:",D),Ee.error(l("Error: ","kivicare-clinic-management-system")+D.message),E(!1)}},ue=async D=>{try{Ee.info(l("Exchanging authorization code for access token...","kivicare-clinic-management-system"));const I=new URLSearchParams({grant_type:"authorization_code",client_id:_.clientId,client_secret:_.clientSecret,code:D,redirect_uri:_.redirectUrl||window.location.origin+"#/setting/custom-notification/oauth2/callback"}),ce={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},Z=btoa(`${_.clientId}:${_.clientSecret}`);ce.Authorization=`Basic ${Z}`;const K=await fetch(_.tokenUrl,{method:"POST",headers:ce,body:I.toString(),mode:"cors",credentials:"omit"});let B,F;try{B=await K.text(),F=JSON.parse(B)}catch{throw new Error(`Invalid response format: ${B.substring(0,200)}...`)}if(!K.ok){const J=F?.error_description||F?.error||B;throw new Error(`Token exchange failed (${K.status}): ${J}`)}if(F.access_token){if(V("accessToken",F.access_token),F.refresh_token&&V("refreshToken",F.refresh_token),F.expires_in){const J=new Date;J.setSeconds(J.getSeconds()+parseInt(F.expires_in)),V("tokenExpiry",J.toISOString().slice(0,16))}F.token_type&&V("tokenType",F.token_type),Ee.success(l(" Access token generated successfully! Token will expire at: ","kivicare-clinic-management-system")+(F.expires_in?new Date(Date.now()+parseInt(F.expires_in)*1e3).toLocaleString():l("Unknown","kivicare-clinic-management-system")))}else throw F.error?new Error(F.error_description||F.error):new Error(l("No access token received from server. Response: ","kivicare-clinic-management-system")+JSON.stringify(F))}catch(I){console.error("Token Exchange Error:",I);let ce=I.message;I.message.includes("CORS")?ce=l("CORS error: The OAuth provider does not allow browser requests. You may need to configure CORS settings or use server-side token exchange.","kivicare-clinic-management-system"):I.message.includes("Failed to fetch")&&(ce=l("Network error: Unable to reach the token endpoint. Please check the Token URL and your internet connection.","kivicare-clinic-management-system")),Ee.error(l("Token exchange failed: ","kivicare-clinic-management-system")+ce)}finally{E(!1)}},G=async()=>{if(!_.refreshToken||!_.tokenUrl){Ee.error(l("Error: Refresh token and token URL are required for token refresh","kivicare-clinic-management-system"));return}E(!0),Ee.info(l("Refreshing access token...","kivicare-clinic-management-system"));try{const D=new URLSearchParams({grant_type:"refresh_token",client_id:_.clientId,client_secret:_.clientSecret,refresh_token:_.refreshToken}),I={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ce=btoa(`${_.clientId}:${_.clientSecret}`);I.Authorization=`Basic ${ce}`;const Z=await fetch(_.tokenUrl,{method:"POST",headers:I,body:D.toString(),mode:"cors",credentials:"omit"});let K,B;try{K=await Z.text(),B=JSON.parse(K)}catch{throw new Error(`Invalid response format: ${K.substring(0,200)}...`)}if(!Z.ok){const F=B?.error_description||B?.error||K;throw new Error(`Token refresh failed (${Z.status}): ${F}`)}if(B.access_token){if(V("accessToken",B.access_token),B.refresh_token&&V("refreshToken",B.refresh_token),B.expires_in){const F=new Date;F.setSeconds(F.getSeconds()+parseInt(B.expires_in)),V("tokenExpiry",F.toISOString().slice(0,16))}B.token_type&&V("tokenType",B.token_type),Ee.success(l(" Access token refreshed successfully! New expiry: ","kivicare-clinic-management-system")+(B.expires_in?new Date(Date.now()+parseInt(B.expires_in)*1e3).toLocaleString():l("Unknown","kivicare-clinic-management-system")))}else throw new Error(l("No access token received during refresh","kivicare-clinic-management-system"))}catch(D){console.error("Token Refresh Error:",D),Ee.error(l("Token refresh failed: ","kivicare-clinic-management-system")+D.message)}finally{E(!1)}},le=(D=_)=>{const I={};D.authMethod==="apikey"?(I.api_key=D.apiKey,I.key_location=D.keyLocation,I.header_param_name=D.headerParamName):D.authMethod==="basic"?(I.username=D.username,I.password=D.password,I.encoding=D.encoding):D.authMethod==="bearer"?(I.access_token=D.accessToken,I.token_type=D.tokenType,I.token_expiry=D.tokenExpiry,D.clientId&&(I.client_id=D.clientId),D.clientSecret&&(I.client_secret=D.clientSecret),D.authUrl&&(I.auth_url=D.authUrl),D.tokenUrl&&(I.token_url=D.tokenUrl),D.redirectUrl&&(I.redirect_url=D.redirectUrl),D.scopes&&(I.scopes=D.scopes),D.refreshToken&&(I.refresh_token=D.refreshToken)):D.authMethod==="jwt"?(I.issuer=D.jwtIssuer,I.subject=D.jwtSubject,I.audience=D.jwtAudience,I.private_key=D.jwtPrivateKey,I.algorithm=D.jwtAlgorithm,I.expiry_duration=D.jwtExpiryDuration,I.expiry_unit=D.jwtExpiryUnit):D.authMethod==="hmac"&&(I.access_key=D.hmacAccessKey,I.secret_key=D.hmacSecretKey,I.algorithm=D.hmacAlgorithm,I.signature_location=D.hmacSignatureLocation,I.header_param_name=D.hmacHeaderParamName);const ce=D.customHeaders.filter(F=>F.key&&F.value),Z=D.queryParams.filter(F=>F.key&&F.value),K=D.requestBodyFields?D.requestBodyFields.filter(F=>F.key&&F.value):[];let B=D.requestBody;if(D.contentType==="application/x-www-form-urlencoded"&&K.length>0){const F=new URLSearchParams;K.forEach(J=>{F.append(J.key,J.value)}),B=F.toString()}else if(D.contentType==="application/json"&&K.length>0){const F={};K.forEach(J=>{F[J.key]=J.value}),B=JSON.stringify(F)}else if(K.length>0&&K.some(F=>F.key&&F.value))if(D.contentType==="application/json"){const F={};K.forEach(J=>{F[J.key]=J.value}),B=JSON.stringify(F)}else{const F=new URLSearchParams;K.forEach(J=>{F.append(J.key,J.value)}),B=F.toString()}return{server_type:D.serverType,server_name:D.serverName,server_url:D.serverUrl,port:parseInt(D.port),http_method:D.httpMethod,auth_method:D.authMethod,auth_config:Object.keys(I).length>0?I:null,sender_name:D.senderName,sender_email:D.senderEmail,enable_ssl:D.enableSSL,content_type:D.contentType,custom_headers:ce.length>0?ce:null,query_params:Z.length>0?Z:null,request_body:B,is_active:!0}},re=async D=>{T(!0);try{const I=le(D);n?(await a.mutateAsync({id:parseInt(t),data:I}),Ee.success(l("Configuration updated successfully","kivicare-clinic-management-system"))):(await s.mutateAsync(I),Ee.success(l("Configuration saved successfully","kivicare-clinic-management-system"))),e("/setting/custom-notification")}catch(I){console.error("Error saving notification service:",I)}finally{T(!1)}};return n&&o?i.jsx(By,{}):i.jsx("div",{className:"custom-notification-edit",children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:n?l("Edit Notification Service","kivicare-clinic-management-system"):l("Create Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:n?l("Configure settings for notification service ID:","kivicare-clinic-management-system")+" "+t:l("Configure settings for a new notification service","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-primary",children:l("Back","kivicare-clinic-management-system")})]}),i.jsxs("form",{onSubmit:d(re),children:[i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Basic Settings","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Notification Server Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(lt,{options:L,value:L.find(D=>D.value===_.serverType)||null,onChange:D=>V("serverType",D?.value||""),placeholder:l("Select server type","kivicare-clinic-management-system"),classNamePrefix:"react-select",isClearable:!0,isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})},className:m.serverType?"react-select-box is-invalid":"react-select-box"}),m.serverType&&i.jsx("div",{className:"invalid-feedback d-block",children:m.serverType})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Server Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.serverName?"is-invalid":""}`,value:_.serverName,onChange:D=>V("serverName",D.target.value),placeholder:l("Enter server name","kivicare-clinic-management-system")}),m.serverName&&i.jsx("div",{className:"invalid-feedback",children:m.serverName})]})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Server URL / Host","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"url",className:`form-control ${m.serverUrl?"is-invalid":""}`,value:_.serverUrl,onChange:D=>V("serverUrl",D.target.value),placeholder:l("https://api.example.com/v1/send","kivicare-clinic-management-system")}),m.serverUrl&&i.jsx("div",{className:"invalid-feedback",children:m.serverUrl})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Port Number","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.port?"is-invalid":""}`,value:_.port,onChange:D=>V("port",D.target.value),placeholder:"443"}),m.port&&i.jsx("div",{className:"invalid-feedback",children:m.port})]})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(lt,{options:P,value:P.find(D=>D.value===_.httpMethod)||null,onChange:D=>V("httpMethod",D?.value||"POST"),placeholder:l("Select HTTP method","kivicare-clinic-management-system"),className:m.httpMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})}}),m.httpMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.httpMethod})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Authentication","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Authentication Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(lt,{options:C,value:C.find(D=>D.value===_.authMethod)||null,onChange:D=>V("authMethod",D?.value||""),placeholder:l("Select authentication method","kivicare-clinic-management-system"),isSearchable:!1,className:m.authMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}}),m.authMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.authMethod})]}),_.authMethod==="apikey"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("API Key Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("API Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.apiKey?"is-invalid":""}`,value:_.apiKey,onChange:D=>V("apiKey",D.target.value),placeholder:l("Enter API key","kivicare-clinic-management-system")}),m.apiKey&&i.jsx("div",{className:"invalid-feedback",children:m.apiKey})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Key Location","kivicare-clinic-management-system")}),console.log(_),i.jsx(lt,{options:M,value:M.find(D=>D.value===_.keyLocation)||M[0],onChange:D=>V("keyLocation",D?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.headerParamName?"is-invalid":""}`,value:_.headerParamName,onChange:D=>V("headerParamName",D.target.value),placeholder:l("Authorization","kivicare-clinic-management-system")}),m.headerParamName&&i.jsx("div",{className:"invalid-feedback",children:m.headerParamName})]})})]})]}),_.authMethod==="basic"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("Basic Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Username","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.username?"is-invalid":""}`,value:_.username,onChange:D=>V("username",D.target.value),placeholder:l("Enter username","kivicare-clinic-management-system")}),m.username&&i.jsx("div",{className:"invalid-feedback",children:m.username})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Password","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.password?"is-invalid":""}`,value:_.password,onChange:D=>V("password",D.target.value),placeholder:l("Enter password","kivicare-clinic-management-system")}),m.password&&i.jsx("div",{className:"invalid-feedback",children:m.password})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Encoding","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.encoding,onChange:D=>V("encoding",D.target.value),placeholder:"Base64",readOnly:!0})]})})]})]}),_.authMethod==="bearer"&&i.jsxs("div",{className:"border p-3 rounded ",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Access Token","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.accessToken?"is-invalid":""}`,value:_.accessToken,onChange:D=>V("accessToken",D.target.value),placeholder:l("Enter access token","kivicare-clinic-management-system")}),m.accessToken&&i.jsx("div",{className:"invalid-feedback",children:m.accessToken})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token Type","kivicare-clinic-management-system")}),i.jsx(lt,{options:O,value:O.find(D=>D.value===_.tokenType)||O[0],onChange:D=>V("tokenType",D?.value||"Bearer"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token Expiry","kivicare-clinic-management-system")}),i.jsx("input",{type:"datetime-local",className:"form-control",value:_.tokenExpiry,onChange:D=>V("tokenExpiry",D.target.value)})]})})]}),i.jsx("h6",{className:"mt-4 mb-3",children:l("OAuth2 Flow (Optional)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Client ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.clientId,onChange:D=>V("clientId",D.target.value),placeholder:l("Enter client ID","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Client Secret","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:_.clientSecret,onChange:D=>V("clientSecret",D.target.value),placeholder:l("Enter client secret","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Authorization URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:_.authUrl,onChange:D=>V("authUrl",D.target.value),placeholder:l("Enter authorization URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:_.tokenUrl,onChange:D=>V("tokenUrl",D.target.value),placeholder:l("Enter token URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Redirect URL / Callback","kivicare-clinic-management-system"),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{id:"redirect-url-tooltip",children:l("This is the callback URL you need to configure in your OAuth2 provider settings. It tells the provider where to send the authorization code after user approval.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ms-1",style:{cursor:"help"}})})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"url",className:"form-control",value:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",onChange:D=>V("redirectUrl",D.target.value),placeholder:l("OAuth2 callback URL","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";V("redirectUrl",D)},title:l("Set default callback URL","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-link"})}),i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:async()=>{try{const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";await navigator.clipboard.writeText(D),Ee.success(l(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}catch{const I=document.createElement("textarea");I.value=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",document.body.appendChild(I),I.select(),document.execCommand("copy"),document.body.removeChild(I),Ee.success(l(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}},title:l("Copy callback URL to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("strong",{children:l("Important:","kivicare-clinic-management-system")})," ",l(`Copy this URL and paste it as the "Redirect URI" or "Callback URL" in your OAuth2 provider's application settings. This allows the provider to send the authorization code back to this application.`,"kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Scopes","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.scopes,onChange:D=>V("scopes",D.target.value),placeholder:l("Enter scopes (comma separated)","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Refresh Token","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:_.refreshToken,onChange:D=>V("refreshToken",D.target.value),placeholder:l("Enter refresh token","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[" ",l("OAuth2 Token Generation","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:ie,disabled:N||!_.clientId||!_.clientSecret||!_.authUrl||!_.tokenUrl,children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Generating...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),l("Generate Access Token","kivicare-clinic-management-system")]})}),_.refreshToken&&i.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:G,disabled:N||!_.refreshToken||!_.tokenUrl,children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Refreshing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-arrow-clockwise me-2"}),l("Refresh Token","kivicare-clinic-management-system")]})})]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:l('Fill in all OAuth2 fields above, then click "Generate Access Token" to start the OAuth2 authorization flow. This will automatically populate the Access Token field. If you have a refresh token, you can use the "Refresh Token" button to get a new access token without going through the full authorization flow again.',"kivicare-clinic-management-system")})]})]}),_.authMethod==="jwt"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("JWT (JSON Web Token)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Issuer (iss)","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.jwtIssuer?"is-invalid":""}`,value:_.jwtIssuer,onChange:D=>V("jwtIssuer",D.target.value),placeholder:l("Enter issuer","kivicare-clinic-management-system")}),m.jwtIssuer&&i.jsx("div",{className:"invalid-feedback",children:m.jwtIssuer})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Subject (sub)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.jwtSubject,onChange:D=>V("jwtSubject",D.target.value),placeholder:l("Enter subject","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Audience (aud)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.jwtAudience,onChange:D=>V("jwtAudience",D.target.value),placeholder:l("Enter audience","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Private Key / Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${m.jwtPrivateKey?"is-invalid":""}`,rows:"4",value:_.jwtPrivateKey,onChange:D=>V("jwtPrivateKey",D.target.value),placeholder:l("Enter private key or secret","kivicare-clinic-management-system"),style:{fontFamily:"monospace"}}),m.jwtPrivateKey&&i.jsx("div",{className:"invalid-feedback",children:m.jwtPrivateKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(lt,{options:q,value:q.find(D=>D.value===_.jwtAlgorithm)||q[0],onChange:D=>V("jwtAlgorithm",D?.value||"HS256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Expiry Duration","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.jwtExpiryDuration?"is-invalid":""}`,value:_.jwtExpiryDuration,onChange:D=>V("jwtExpiryDuration",D.target.value),placeholder:"60",min:"1"}),m.jwtExpiryDuration&&i.jsx("div",{className:"invalid-feedback",children:m.jwtExpiryDuration})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Unit","kivicare-clinic-management-system")}),i.jsx(lt,{options:ae,value:ae.find(D=>D.value===_.jwtExpiryUnit)||ae[0],onChange:D=>V("jwtExpiryUnit",D?.value||"minutes"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})})]})]}),_.authMethod==="hmac"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("HMAC / Signature Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Access Key / Public Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacAccessKey?"is-invalid":""}`,value:_.hmacAccessKey,onChange:D=>V("hmacAccessKey",D.target.value),placeholder:l("Enter access key","kivicare-clinic-management-system")}),m.hmacAccessKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacAccessKey})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.hmacSecretKey?"is-invalid":""}`,value:_.hmacSecretKey,onChange:D=>V("hmacSecretKey",D.target.value),placeholder:l("Enter secret key","kivicare-clinic-management-system")}),m.hmacSecretKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacSecretKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(lt,{options:U,value:U.find(D=>D.value===_.hmacAlgorithm)||U[0],onChange:D=>V("hmacAlgorithm",D?.value||"HMAC-SHA256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Signature Location","kivicare-clinic-management-system")}),i.jsx(lt,{options:H,value:H.find(D=>D.value===_.hmacSignatureLocation)||H[0],onChange:D=>V("hmacSignatureLocation",D?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacHeaderParamName?"is-invalid":""}`,value:_.hmacHeaderParamName,onChange:D=>V("hmacHeaderParamName",D.target.value),placeholder:l("X-Signature","kivicare-clinic-management-system")}),m.hmacHeaderParamName&&i.jsx("div",{className:"invalid-feedback",children:m.hmacHeaderParamName})]})})]})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Sender Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Sender Name / From","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.senderName,onChange:D=>V("senderName",D.target.value),placeholder:l("Enter sender name","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Sender Email / Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:_.senderEmail,onChange:D=>V("senderEmail",D.target.value),placeholder:se()})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"enableSSL",checked:_.enableSSL,onChange:D=>V("enableSSL",D.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"enableSSL",children:l("Enable SSL/TLS","kivicare-clinic-management-system")})]}),i.jsx("span",{className:`badge ${_.enableSSL?"bg-success":"bg-warning"}`,children:_.enableSSL?l("Secure","kivicare-clinic-management-system"):l("Insecure","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Request Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Content Type","kivicare-clinic-management-system")}),i.jsx(lt,{options:R,value:R.find(D=>D.value===_.contentType)||R[0],onChange:D=>V("contentType",D?.value||"application/json"),placeholder:l("Select content type","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>pe("customHeaders"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Header","kivicare-clinic-management-system")]})]}),_.customHeaders.map((D,I)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Header name","kivicare-clinic-management-system"),value:D.key,onChange:ce=>oe("customHeaders",I,"key",ce.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Header value","kivicare-clinic-management-system"),value:D.value,onChange:ce=>oe("customHeaders",I,"value",ce.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>ne("customHeaders",I),children:i.jsx("i",{className:"ph ph-trash"})})})]},I))]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>pe("queryParams"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Parameter","kivicare-clinic-management-system")]})]}),_.queryParams.map((D,I)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Parameter name","kivicare-clinic-management-system"),value:D.key,onChange:ce=>oe("queryParams",I,"key",ce.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Parameter value","kivicare-clinic-management-system"),value:D.value,onChange:ce=>oe("queryParams",I,"value",ce.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>ne("queryParams",I),children:i.jsx("i",{className:"ph ph-trash"})})})]},I))]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Dynamic Variables","kivicare-clinic-management-system")}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{id:"dynamic-variables-tooltip",children:l("Click any variable button to copy it to your clipboard, then paste it in your request body, headers, or query parameters. Variables will be automatically replaced with actual values when the notification is sent.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ",style:{cursor:"help"}})})]}),i.jsx("small",{className:"text-muted",children:l("Click to copy variable to clipboard","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:A.map((D,I)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary d-flex align-items-center gap-1",onClick:()=>ee(D.name),title:`${D.description} - ${l("Example:","kivicare-clinic-management-system")} ${D.example}`,children:[i.jsx("code",{className:"small text-white",children:`{{${D.name}}}`}),i.jsx("i",{className:"ph ph-copy"})]},I))})]}),ge()&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Request Body","kivicare-clinic-management-system")}),_.contentType==="application/x-www-form-urlencoded"?i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("small",{className:"text-muted",children:l("Add key-value pairs for the request body","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>pe("requestBodyFields"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Field","kivicare-clinic-management-system")]})]}),_.requestBodyFields&&_.requestBodyFields.map((D,I)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Field name","kivicare-clinic-management-system"),value:D.key,onChange:ce=>oe("requestBodyFields",I,"key",ce.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Field value","kivicare-clinic-management-system"),value:D.value,onChange:ce=>oe("requestBodyFields",I,"value",ce.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>ne("requestBodyFields",I),children:i.jsx("i",{className:"ph ph-trash"})})})]},I))]}):i.jsx("textarea",{className:"form-control",rows:"8",value:_.requestBody,onChange:D=>V("requestBody",D.target.value),placeholder:W(),style:{fontFamily:"monospace"}}),i.jsx("div",{className:"form-text",children:l("Use the dynamic variables from above in your request body. Copy variables by clicking the copy button next to each variable.","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:j||s.isPending||a.isPending,children:[i.jsx("i",{className:"ph ph-floppy-disk me-1"}),j||s.isPending||a.isPending?l("Saving...","kivicare-clinic-management-system"):l("Save Configuration","kivicare-clinic-management-system")]}),i.jsxs("button",{type:"button",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-lightning me-1"}),l("Test Connection","kivicare-clinic-management-system")]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-secondary",children:l("Cancel","kivicare-clinic-management-system")})]})]})]})})},Bae=()=>i.jsxs("div",{className:"custom-notification-test",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"250px",height:"1.75rem",className:"mb-2"}),i.jsx(S,{width:"150px",height:"1rem"})]}),i.jsx(S,{width:"140px",height:"2.25rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"200px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"120px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})]})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"160px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"140px",height:"1rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"40px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"60px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"50px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"70px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"180px",height:"1rem"})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"120px",height:"1rem"})]})]})]})})]})]}),qae=()=>{const{id:t}=Yt(),[e,n]=f.useState(null),{data:s,isLoading:a}=WR(t),r=KX(),{register:o,handleSubmit:c,formState:{errors:d},watch:m}=Jt({defaultValues:{recipient:"",message:""}}),u=m("message"),p=async x=>{try{const y=await r.mutateAsync({id:parseInt(t),data:{recipient:x.recipient,message:x.message}});n({success:!0,message:y.message||l("Test notification sent successfully!","kivicare-clinic-management-system"),timestamp:new Date().toLocaleString(),details:y.data||null}),Ee.success(l("Test notification sent successfully!","kivicare-clinic-management-system"))}catch(y){console.error("Test notification error:",y);const b=y.response?.data?.message||y.message||l("Failed to send test notification","kivicare-clinic-management-system");n({success:!1,message:b,timestamp:new Date().toLocaleString(),details:y.response?.data?.data||null}),Ee.error(b)}};return i.jsx("div",{className:"custom-notification-test",children:a?i.jsx(Bae,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:l("Test Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:s?.data?.server_name?`${s.data.server_name} (ID: ${t})`:`${l("Service ID:","kivicare-clinic-management-system")} ${t}`})]}),i.jsxs(ht,{to:"/setting/custom-notification",className:"btn btn-outline-secondary",children:[i.jsx("i",{className:"ph ph-arrow-left me-1"}),l("Back to Services","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-8",children:[i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Send Test Notification","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:c(p),children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Test Recipient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${d.recipient?"is-invalid":""}`,placeholder:l("Enter email, phone number, or device token","kivicare-clinic-management-system"),...o("recipient",{required:l("Recipient is required","kivicare-clinic-management-system")})}),d.recipient&&i.jsx("div",{className:"invalid-feedback",children:d.recipient.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Test Message","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${d.message?"is-invalid":""}`,rows:"4",placeholder:l("Enter test message content","kivicare-clinic-management-system"),...o("message",{required:l("Message is required","kivicare-clinic-management-system"),minLength:{value:1,message:l("Message cannot be empty","kivicare-clinic-management-system")}})}),d.message&&i.jsx("div",{className:"invalid-feedback",children:d.message.message})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r.isPending||!u?.trim(),children:r.isPending?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Sending...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-paper-plane-tilt me-1"}),l("Send Test","kivicare-clinic-management-system")]})})]})})]}),e&&i.jsx("div",{className:`alert ${e.success?"alert-success":"alert-danger"} mt-3`,children:i.jsxs("div",{className:"d-flex align-items-start",children:[i.jsx("i",{className:`ph ${e.success?"ph-check-circle":"ph-x-circle"} me-2 mt-1`}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("strong",{children:e.message}),i.jsx("br",{}),i.jsxs("small",{children:[l("Sent at:","kivicare-clinic-management-system")," ",e.timestamp]}),e.details&&i.jsxs("div",{className:"mt-2",children:[i.jsx("small",{className:"text-muted",children:i.jsx("strong",{children:l("Details:","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"small p-2 mt-1 rounded",style:{textWrap:"wrap"},children:JSON.stringify(e.details,null,2)})]})]})]})})]}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Service Information","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:s?.data?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Service Name","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:s.data.server_name})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Type","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${g(s.data.server_type)}`,children:h(s.data.server_type)})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Status","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${s.data.is_active?"bg-success":"bg-secondary"}`,children:s.data.is_active?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Server URL","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-break",children:s.data.server_url})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Authentication","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small",children:v(s.data.auth_method)})]})]}):i.jsxs("div",{className:"text-center py-3",children:[i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"small text-muted mt-2 mb-0",children:l("Loading service info...","kivicare-clinic-management-system")})]})})]})})]})]})});function h(x){return{sms:"SMS",email:"Email",webhook:"Webhook","custom-api":"Custom API","push-notification":"Push Notification"}[x]||x}function g(x){return{sms:"bg-primary",email:"bg-info",webhook:"bg-warning","custom-api":"bg-secondary","push-notification":"bg-success"}[x]||"bg-secondary"}function v(x){return{none:l("No Authentication","kivicare-clinic-management-system"),apikey:l("API Key","kivicare-clinic-management-system"),basic:l("Basic Auth","kivicare-clinic-management-system"),bearer:l("Bearer Token","kivicare-clinic-management-system"),jwt:l("JWT","kivicare-clinic-management-system"),hmac:l("HMAC","kivicare-clinic-management-system")}[x]||x}},Hae=()=>(f.useEffect(()=>{(()=>{try{let e=new URLSearchParams(window.location.search),n=e.get("code"),s=e.get("error"),a=e.get("error_description");if(!n&&!s&&window.location.hash){const r=new URLSearchParams(window.location.hash.substring(1));n=r.get("code"),s=r.get("error"),a=r.get("error_description")}s?window.opener?.postMessage({type:"oauth2_error",error:a||s},window.location.origin):n?window.opener?.postMessage({type:"oauth2_success",code:n},window.location.origin):window.opener?.postMessage({type:"oauth2_error",error:"No authorization code received"},window.location.origin),setTimeout(()=>{window.close()},1e3)}catch(e){console.error("OAuth2 callback error:",e),window.opener?.postMessage({type:"oauth2_error",error:"Callback processing failed: "+e.message},window.location.origin),setTimeout(()=>{window.close()},1e3)}})()},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:l("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("Please wait while we process your authorization. This window will close automatically.","kivicare-clinic-management-system")})]})})),zae=()=>{const t=mn(),[e,n]=f.useState(!1),[s,a]=f.useState([]),[r,o]=f.useState({}),[c,d]=f.useState(""),[m,u]=f.useState(""),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,{data:g,isLoading:v,error:x}=yn("settings","email-template",{},{enabled:!0}),y=dn("settings","email-template"),b=On(),w=P=>{const R=[];return!P||typeof P!="object"||Object.keys(P).forEach(M=>{(Array.isArray(P[M])?P[M]:[]).forEach(q=>{R.push({...q,user_type:M})})}),R};f.useEffect(()=>{if(!g?.status||!g.data){a([]),o({});return}a(w(g.data.data)),o(g.data.dynamicKey||{})},[g]);const k=()=>{n(!1)},_=P=>{t(`/setting/email-template/edit/${P.ID}`)},j=()=>{t("/setting/email-template/test")},T=async(P,R)=>{const M={ID:P,post_status:R==="publish"?"draft":"publish"};y.mutate(M,{onError:O=>{console.error("Error updating status:",O),Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to update template status","kivicare-clinic-management-system")})}})},N=P=>{console.log("sending test mail"),alert(l("Test mail send","kivicare-clinic-management-system"))},E=f.useMemo(()=>[...new Set(s.map(R=>R.user_type))].sort(),[s]),A=f.useMemo(()=>{let P=s;return c&&(P=P.filter(R=>R.post_title?.toLowerCase().includes(c.toLowerCase()))),m&&(P=P.filter(R=>R.user_type===m)),P},[s,c,m]),L=f.useMemo(()=>[b.accessor("templates",{id:"templates",header:()=>l("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:P.row.original.post_title})})}),b.accessor("recipient",{id:"recipient",header:()=>l("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:P.row.original.user_type})})}),b.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(sn,{checked:P.row.original.post_status==="publish",onChange:()=>T(P.row.original.ID,P.row.original.post_status),inputClassName:"text-center"})}),b.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("button",{onClick:()=>_(P.row.original),className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:l("Manage","kivicare-clinic-management-system")})})],[v,r]);if(x){let P;typeof x=="string"?P=x:x?.response?.data?.message?P=x.response.data.message:x?.message?P=x.message:P=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(P,"kivicare-clinic-management-system")})}const C=({type:P,title:R})=>i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:R}),i.jsx("div",{children:i.jsxs("button",{onClick:k,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Enter email id","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:l('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system")})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>N(),children:l("Test","kivicare-clinic-management-system")})]})]});return v?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:10,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-email-template",role:"tabpanel","aria-labelledby":"v-pills-email-template-tab",tabIndex:"0",children:e?i.jsx(C,{type:"email",title:l("Test Email","kivicare-clinic-management-system")}):i.jsxs("div",{className:"email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("Email Template","kivicare-clinic-management-system")," ",h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/email-template-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx("button",{type:"button",onClick:j,className:"btn btn-primary",children:l("Send Test Email","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"row mb-3 g-3 justify-content-end",children:[i.jsx("div",{className:"col-md-2 d-flex align-items-center input-search-select",children:i.jsx("div",{className:"input-search-select",children:i.jsxs("div",{className:"input-group input-group-search ",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search templates","kivicare-clinic-management-system"),value:c,onChange:P=>d(P.target.value)}),c&&i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(""),children:i.jsx("i",{className:"ph ph-x"})})]})})}),i.jsx("div",{className:"col-md-2",children:i.jsx(lt,{className:"react-select-box",classNamePrefix:"react-select",value:m?{value:m,label:m.charAt(0).toUpperCase()+m.slice(1)}:{value:"",label:l("All Recipients","kivicare-clinic-management-system")},onChange:P=>u(P?.value||""),options:[{value:"",label:l("All Recipients","kivicare-clinic-management-system")},...E.map(P=>({value:P,label:P.charAt(0).toUpperCase()+P.slice(1)}))],isClearable:!1,isSearchable:!1,styles:{menuPortal:P=>({...P,zIndex:9999})}})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:A,columns:L,enableSelection:!1,isLoading:v})})]})})};var iM=typeof global=="object"&&global&&global.Object===Object&&global,Vae=typeof self=="object"&&self&&self.Object===Object&&self,nr=iM||Vae||Function("return this")(),kl=nr.Symbol,sM=Object.prototype,Uae=sM.hasOwnProperty,Wae=sM.toString,Rd=kl?kl.toStringTag:void 0;function Kae(t){var e=Uae.call(t,Rd),n=t[Rd];try{t[Rd]=void 0;var s=!0}catch{}var a=Wae.call(t);return s&&(e?t[Rd]=n:delete t[Rd]),a}var Gae=Object.prototype,Yae=Gae.toString;function Qae(t){return Yae.call(t)}var Zae="[object Null]",Xae="[object Undefined]",KC=kl?kl.toStringTag:void 0;function ud(t){return t==null?t===void 0?Xae:Zae:KC&&KC in Object(t)?Kae(t):Qae(t)}function Or(t){return t!=null&&typeof t=="object"}var xo=Array.isArray;function Tl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function aM(t){return t}var Jae="[object AsyncFunction]",ere="[object Function]",tre="[object GeneratorFunction]",nre="[object Proxy]";function zk(t){if(!Tl(t))return!1;var e=ud(t);return e==ere||e==tre||e==Jae||e==nre}var lx=nr["__core-js_shared__"],GC=(function(){var t=/[^.]+$/.exec(lx&&lx.keys&&lx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function ire(t){return!!GC&&GC in t}var sre=Function.prototype,are=sre.toString;function Lo(t){if(t!=null){try{return are.call(t)}catch{}try{return t+""}catch{}}return""}var rre=/[\\^$.*+?()[\]{}|]/g,lre=/^\[object .+?Constructor\]$/,ore=Function.prototype,cre=Object.prototype,dre=ore.toString,mre=cre.hasOwnProperty,ure=RegExp("^"+dre.call(mre).replace(rre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hre(t){if(!Tl(t)||ire(t))return!1;var e=zk(t)?ure:lre;return e.test(Lo(t))}function pre(t,e){return t?.[e]}function Fo(t,e){var n=pre(t,e);return hre(n)?n:void 0}var Uy=Fo(nr,"WeakMap"),YC=Object.create,gre=(function(){function t(){}return function(e){if(!Tl(e))return{};if(YC)return YC(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function fre(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function vre(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var xre=800,yre=16,bre=Date.now;function wre(t){var e=0,n=0;return function(){var s=bre(),a=yre-(s-n);if(n=s,a>0){if(++e>=xre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function kre(t){return function(){return t}}var lg=(function(){try{var t=Fo(Object,"defineProperty");return t({},"",{}),t}catch{}})(),jre=lg?function(t,e){return lg(t,"toString",{configurable:!0,enumerable:!1,value:kre(e),writable:!0})}:aM,Nre=wre(jre);function Cre(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var Sre=9007199254740991,_re=/^(?:0|[1-9]\d*)$/;function rM(t,e){var n=typeof t;return e=e??Sre,!!e&&(n=="number"||n!="symbol"&&_re.test(t))&&t>-1&&t%1==0&&t<e}function Vk(t,e,n){e=="__proto__"&&lg?lg(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function gu(t,e){return t===e||t!==t&&e!==e}var Ere=Object.prototype,Tre=Ere.hasOwnProperty;function lM(t,e,n){var s=t[e];(!(Tre.call(t,e)&&gu(s,n))||n===void 0&&!(e in t))&&Vk(t,e,n)}function Are(t,e,n,s){var a=!n;n||(n={});for(var r=-1,o=e.length;++r<o;){var c=e[r],d=void 0;d===void 0&&(d=t[c]),a?Vk(n,c,d):lM(n,c,d)}return n}var QC=Math.max;function Dre(t,e,n){return e=QC(e===void 0?t.length-1:e,0),function(){for(var s=arguments,a=-1,r=QC(s.length-e,0),o=Array(r);++a<r;)o[a]=s[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=s[a];return c[e]=n(o),fre(t,this,c)}}function Rre(t,e){return Nre(Dre(t,e,aM),t+"")}var Pre=9007199254740991;function oM(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Pre}function gf(t){return t!=null&&oM(t.length)&&!zk(t)}function Mre(t,e,n){if(!Tl(n))return!1;var s=typeof e;return(s=="number"?gf(n)&&rM(e,n.length):s=="string"&&e in n)?gu(n[e],t):!1}function Ire(t){return Rre(function(e,n){var s=-1,a=n.length,r=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(r=t.length>3&&typeof r=="function"?(a--,r):void 0,o&&Mre(n[0],n[1],o)&&(r=a<3?void 0:r,a=1),e=Object(e);++s<a;){var c=n[s];c&&t(e,c,s,r)}return e})}var Ore=Object.prototype;function Uk(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Ore;return t===n}function Lre(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var Fre="[object Arguments]";function ZC(t){return Or(t)&&ud(t)==Fre}var cM=Object.prototype,$re=cM.hasOwnProperty,Bre=cM.propertyIsEnumerable,Wy=ZC((function(){return arguments})())?ZC:function(t){return Or(t)&&$re.call(t,"callee")&&!Bre.call(t,"callee")};function qre(){return!1}var dM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,XC=dM&&typeof module=="object"&&module&&!module.nodeType&&module,Hre=XC&&XC.exports===dM,JC=Hre?nr.Buffer:void 0,zre=JC?JC.isBuffer:void 0,Mm=zre||qre,Vre="[object Arguments]",Ure="[object Array]",Wre="[object Boolean]",Kre="[object Date]",Gre="[object Error]",Yre="[object Function]",Qre="[object Map]",Zre="[object Number]",Xre="[object Object]",Jre="[object RegExp]",ele="[object Set]",tle="[object String]",nle="[object WeakMap]",ile="[object ArrayBuffer]",sle="[object DataView]",ale="[object Float32Array]",rle="[object Float64Array]",lle="[object Int8Array]",ole="[object Int16Array]",cle="[object Int32Array]",dle="[object Uint8Array]",mle="[object Uint8ClampedArray]",ule="[object Uint16Array]",hle="[object Uint32Array]",Fn={};Fn[ale]=Fn[rle]=Fn[lle]=Fn[ole]=Fn[cle]=Fn[dle]=Fn[mle]=Fn[ule]=Fn[hle]=!0;Fn[Vre]=Fn[Ure]=Fn[ile]=Fn[Wre]=Fn[sle]=Fn[Kre]=Fn[Gre]=Fn[Yre]=Fn[Qre]=Fn[Zre]=Fn[Xre]=Fn[Jre]=Fn[ele]=Fn[tle]=Fn[nle]=!1;function ple(t){return Or(t)&&oM(t.length)&&!!Fn[ud(t)]}function Wk(t){return function(e){return t(e)}}var mM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dm=mM&&typeof module=="object"&&module&&!module.nodeType&&module,gle=dm&&dm.exports===mM,ox=gle&&iM.process,Wc=(function(){try{var t=dm&&dm.require&&dm.require("util").types;return t||ox&&ox.binding&&ox.binding("util")}catch{}})(),eS=Wc&&Wc.isTypedArray,Kk=eS?Wk(eS):ple,fle=Object.prototype,vle=fle.hasOwnProperty;function uM(t,e){var n=xo(t),s=!n&&Wy(t),a=!n&&!s&&Mm(t),r=!n&&!s&&!a&&Kk(t),o=n||s||a||r,c=o?Lre(t.length,String):[],d=c.length;for(var m in t)(e||vle.call(t,m))&&!(o&&(m=="length"||a&&(m=="offset"||m=="parent")||r&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||rM(m,d)))&&c.push(m);return c}function hM(t,e){return function(n){return t(e(n))}}var xle=hM(Object.keys,Object),yle=Object.prototype,ble=yle.hasOwnProperty;function wle(t){if(!Uk(t))return xle(t);var e=[];for(var n in Object(t))ble.call(t,n)&&n!="constructor"&&e.push(n);return e}function kle(t){return gf(t)?uM(t):wle(t)}function jle(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Nle=Object.prototype,Cle=Nle.hasOwnProperty;function Sle(t){if(!Tl(t))return jle(t);var e=Uk(t),n=[];for(var s in t)s=="constructor"&&(e||!Cle.call(t,s))||n.push(s);return n}function pM(t){return gf(t)?uM(t,!0):Sle(t)}var Im=Fo(Object,"create");function _le(){this.__data__=Im?Im(null):{},this.size=0}function Ele(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Tle="__lodash_hash_undefined__",Ale=Object.prototype,Dle=Ale.hasOwnProperty;function Rle(t){var e=this.__data__;if(Im){var n=e[t];return n===Tle?void 0:n}return Dle.call(e,t)?e[t]:void 0}var Ple=Object.prototype,Mle=Ple.hasOwnProperty;function Ile(t){var e=this.__data__;return Im?e[t]!==void 0:Mle.call(e,t)}var Ole="__lodash_hash_undefined__";function Lle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Im&&e===void 0?Ole:e,this}function yo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}yo.prototype.clear=_le;yo.prototype.delete=Ele;yo.prototype.get=Rle;yo.prototype.has=Ile;yo.prototype.set=Lle;function Fle(){this.__data__=[],this.size=0}function ff(t,e){for(var n=t.length;n--;)if(gu(t[n][0],e))return n;return-1}var $le=Array.prototype,Ble=$le.splice;function qle(t){var e=this.__data__,n=ff(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():Ble.call(e,n,1),--this.size,!0}function Hle(t){var e=this.__data__,n=ff(e,t);return n<0?void 0:e[n][1]}function zle(t){return ff(this.__data__,t)>-1}function Vle(t,e){var n=this.__data__,s=ff(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function zr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}zr.prototype.clear=Fle;zr.prototype.delete=qle;zr.prototype.get=Hle;zr.prototype.has=zle;zr.prototype.set=Vle;var Om=Fo(nr,"Map");function Ule(){this.size=0,this.__data__={hash:new yo,map:new(Om||zr),string:new yo}}function Wle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vf(t,e){var n=t.__data__;return Wle(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Kle(t){var e=vf(this,t).delete(t);return this.size-=e?1:0,e}function Gle(t){return vf(this,t).get(t)}function Yle(t){return vf(this,t).has(t)}function Qle(t,e){var n=vf(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function $o(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}$o.prototype.clear=Ule;$o.prototype.delete=Kle;$o.prototype.get=Gle;$o.prototype.has=Yle;$o.prototype.set=Qle;function Zle(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var gM=hM(Object.getPrototypeOf,Object),Xle="[object Object]",Jle=Function.prototype,eoe=Object.prototype,fM=Jle.toString,toe=eoe.hasOwnProperty,noe=fM.call(Object);function ioe(t){if(!Or(t)||ud(t)!=Xle)return!1;var e=gM(t);if(e===null)return!0;var n=toe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&fM.call(n)==noe}function soe(){this.__data__=new zr,this.size=0}function aoe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function roe(t){return this.__data__.get(t)}function loe(t){return this.__data__.has(t)}var ooe=200;function coe(t,e){var n=this.__data__;if(n instanceof zr){var s=n.__data__;if(!Om||s.length<ooe-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new $o(s)}return n.set(t,e),this.size=n.size,this}function Ha(t){var e=this.__data__=new zr(t);this.size=e.size}Ha.prototype.clear=soe;Ha.prototype.delete=aoe;Ha.prototype.get=roe;Ha.prototype.has=loe;Ha.prototype.set=coe;var vM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tS=vM&&typeof module=="object"&&module&&!module.nodeType&&module,doe=tS&&tS.exports===vM,nS=doe?nr.Buffer:void 0,iS=nS?nS.allocUnsafe:void 0;function xM(t,e){if(e)return t.slice();var n=t.length,s=iS?iS(n):new t.constructor(n);return t.copy(s),s}function moe(t,e){for(var n=-1,s=t==null?0:t.length,a=0,r=[];++n<s;){var o=t[n];e(o,n,t)&&(r[a++]=o)}return r}function uoe(){return[]}var hoe=Object.prototype,poe=hoe.propertyIsEnumerable,sS=Object.getOwnPropertySymbols,goe=sS?function(t){return t==null?[]:(t=Object(t),moe(sS(t),function(e){return poe.call(t,e)}))}:uoe;function foe(t,e,n){var s=e(t);return xo(t)?s:Zle(s,n(t))}function Ky(t){return foe(t,kle,goe)}var Gy=Fo(nr,"DataView"),Yy=Fo(nr,"Promise"),Qy=Fo(nr,"Set"),aS="[object Map]",voe="[object Object]",rS="[object Promise]",lS="[object Set]",oS="[object WeakMap]",cS="[object DataView]",xoe=Lo(Gy),yoe=Lo(Om),boe=Lo(Yy),woe=Lo(Qy),koe=Lo(Uy),ca=ud;(Gy&&ca(new Gy(new ArrayBuffer(1)))!=cS||Om&&ca(new Om)!=aS||Yy&&ca(Yy.resolve())!=rS||Qy&&ca(new Qy)!=lS||Uy&&ca(new Uy)!=oS)&&(ca=function(t){var e=ud(t),n=e==voe?t.constructor:void 0,s=n?Lo(n):"";if(s)switch(s){case xoe:return cS;case yoe:return aS;case boe:return rS;case woe:return lS;case koe:return oS}return e});var joe=Object.prototype,Noe=joe.hasOwnProperty;function Coe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Noe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var og=nr.Uint8Array;function Gk(t){var e=new t.constructor(t.byteLength);return new og(e).set(new og(t)),e}function Soe(t,e){var n=Gk(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var _oe=/\w*$/;function Eoe(t){var e=new t.constructor(t.source,_oe.exec(t));return e.lastIndex=t.lastIndex,e}var dS=kl?kl.prototype:void 0,mS=dS?dS.valueOf:void 0;function Toe(t){return mS?Object(mS.call(t)):{}}function yM(t,e){var n=e?Gk(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Aoe="[object Boolean]",Doe="[object Date]",Roe="[object Map]",Poe="[object Number]",Moe="[object RegExp]",Ioe="[object Set]",Ooe="[object String]",Loe="[object Symbol]",Foe="[object ArrayBuffer]",$oe="[object DataView]",Boe="[object Float32Array]",qoe="[object Float64Array]",Hoe="[object Int8Array]",zoe="[object Int16Array]",Voe="[object Int32Array]",Uoe="[object Uint8Array]",Woe="[object Uint8ClampedArray]",Koe="[object Uint16Array]",Goe="[object Uint32Array]";function Yoe(t,e,n){var s=t.constructor;switch(e){case Foe:return Gk(t);case Aoe:case Doe:return new s(+t);case $oe:return Soe(t);case Boe:case qoe:case Hoe:case zoe:case Voe:case Uoe:case Woe:case Koe:case Goe:return yM(t,n);case Roe:return new s;case Poe:case Ooe:return new s(t);case Moe:return Eoe(t);case Ioe:return new s;case Loe:return Toe(t)}}function bM(t){return typeof t.constructor=="function"&&!Uk(t)?gre(gM(t)):{}}var Qoe="[object Map]";function Zoe(t){return Or(t)&&ca(t)==Qoe}var uS=Wc&&Wc.isMap,Xoe=uS?Wk(uS):Zoe,Joe="[object Set]";function ece(t){return Or(t)&&ca(t)==Joe}var hS=Wc&&Wc.isSet,tce=hS?Wk(hS):ece,nce=1,wM="[object Arguments]",ice="[object Array]",sce="[object Boolean]",ace="[object Date]",rce="[object Error]",kM="[object Function]",lce="[object GeneratorFunction]",oce="[object Map]",cce="[object Number]",jM="[object Object]",dce="[object RegExp]",mce="[object Set]",uce="[object String]",hce="[object Symbol]",pce="[object WeakMap]",gce="[object ArrayBuffer]",fce="[object DataView]",vce="[object Float32Array]",xce="[object Float64Array]",yce="[object Int8Array]",bce="[object Int16Array]",wce="[object Int32Array]",kce="[object Uint8Array]",jce="[object Uint8ClampedArray]",Nce="[object Uint16Array]",Cce="[object Uint32Array]",Tn={};Tn[wM]=Tn[ice]=Tn[gce]=Tn[fce]=Tn[sce]=Tn[ace]=Tn[vce]=Tn[xce]=Tn[yce]=Tn[bce]=Tn[wce]=Tn[oce]=Tn[cce]=Tn[jM]=Tn[dce]=Tn[mce]=Tn[uce]=Tn[hce]=Tn[kce]=Tn[jce]=Tn[Nce]=Tn[Cce]=!0;Tn[rce]=Tn[kM]=Tn[pce]=!1;function Qh(t,e,n,s,a,r){var o,c=e&nce;if(o!==void 0)return o;if(!Tl(t))return t;var d=xo(t);if(d)o=Coe(t);else{var m=ca(t),u=m==kM||m==lce;if(Mm(t))return xM(t,c);if(m==jM||m==wM||u&&!a)o=u?{}:bM(t);else{if(!Tn[m])return a?t:{};o=Yoe(t,m,c)}}r||(r=new Ha);var p=r.get(t);if(p)return p;r.set(t,o),tce(t)?t.forEach(function(v){o.add(Qh(v,e,n,v,t,r))}):Xoe(t)&&t.forEach(function(v,x){o.set(x,Qh(v,e,n,x,t,r))});var h=Ky,g=d?void 0:h(t);return Cre(g||t,function(v,x){g&&(x=v,v=t[x]),lM(o,x,Qh(v,e,n,x,t,r))}),o}var Sce=1,_ce=4;function Sc(t){return Qh(t,Sce|_ce)}var Ece="__lodash_hash_undefined__";function Tce(t){return this.__data__.set(t,Ece),this}function Ace(t){return this.__data__.has(t)}function cg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new $o;++e<n;)this.add(t[e])}cg.prototype.add=cg.prototype.push=Tce;cg.prototype.has=Ace;function Dce(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function Rce(t,e){return t.has(e)}var Pce=1,Mce=2;function NM(t,e,n,s,a,r){var o=n&Pce,c=t.length,d=e.length;if(c!=d&&!(o&&d>c))return!1;var m=r.get(t),u=r.get(e);if(m&&u)return m==e&&u==t;var p=-1,h=!0,g=n&Mce?new cg:void 0;for(r.set(t,e),r.set(e,t);++p<c;){var v=t[p],x=e[p];if(s)var y=o?s(x,v,p,e,t,r):s(v,x,p,t,e,r);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!Dce(e,function(b,w){if(!Rce(g,w)&&(v===b||a(v,b,n,s,r)))return g.push(w)})){h=!1;break}}else if(!(v===x||a(v,x,n,s,r))){h=!1;break}}return r.delete(t),r.delete(e),h}function Ice(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}function Oce(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var Lce=1,Fce=2,$ce="[object Boolean]",Bce="[object Date]",qce="[object Error]",Hce="[object Map]",zce="[object Number]",Vce="[object RegExp]",Uce="[object Set]",Wce="[object String]",Kce="[object Symbol]",Gce="[object ArrayBuffer]",Yce="[object DataView]",pS=kl?kl.prototype:void 0,cx=pS?pS.valueOf:void 0;function Qce(t,e,n,s,a,r,o){switch(n){case Yce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gce:return!(t.byteLength!=e.byteLength||!r(new og(t),new og(e)));case $ce:case Bce:case zce:return gu(+t,+e);case qce:return t.name==e.name&&t.message==e.message;case Vce:case Wce:return t==e+"";case Hce:var c=Ice;case Uce:var d=s&Lce;if(c||(c=Oce),t.size!=e.size&&!d)return!1;var m=o.get(t);if(m)return m==e;s|=Fce,o.set(t,e);var u=NM(c(t),c(e),s,a,r,o);return o.delete(t),u;case Kce:if(cx)return cx.call(t)==cx.call(e)}return!1}var Zce=1,Xce=Object.prototype,Jce=Xce.hasOwnProperty;function ede(t,e,n,s,a,r){var o=n&Zce,c=Ky(t),d=c.length,m=Ky(e),u=m.length;if(d!=u&&!o)return!1;for(var p=d;p--;){var h=c[p];if(!(o?h in e:Jce.call(e,h)))return!1}var g=r.get(t),v=r.get(e);if(g&&v)return g==e&&v==t;var x=!0;r.set(t,e),r.set(e,t);for(var y=o;++p<d;){h=c[p];var b=t[h],w=e[h];if(s)var k=o?s(w,b,h,e,t,r):s(b,w,h,t,e,r);if(!(k===void 0?b===w||a(b,w,n,s,r):k)){x=!1;break}y||(y=h=="constructor")}if(x&&!y){var _=t.constructor,j=e.constructor;_!=j&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(x=!1)}return r.delete(t),r.delete(e),x}var tde=1,gS="[object Arguments]",fS="[object Array]",vh="[object Object]",nde=Object.prototype,vS=nde.hasOwnProperty;function ide(t,e,n,s,a,r){var o=xo(t),c=xo(e),d=o?fS:ca(t),m=c?fS:ca(e);d=d==gS?vh:d,m=m==gS?vh:m;var u=d==vh,p=m==vh,h=d==m;if(h&&Mm(t)){if(!Mm(e))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new Ha),o||Kk(t)?NM(t,e,n,s,a,r):Qce(t,e,d,n,s,a,r);if(!(n&tde)){var g=u&&vS.call(t,"__wrapped__"),v=p&&vS.call(e,"__wrapped__");if(g||v){var x=g?t.value():t,y=v?e.value():e;return r||(r=new Ha),a(x,y,n,s,r)}}return h?(r||(r=new Ha),ede(t,e,n,s,a,r)):!1}function CM(t,e,n,s,a){return t===e?!0:t==null||e==null||!Or(t)&&!Or(e)?t!==t&&e!==e:ide(t,e,n,s,CM,a)}function sde(t){return function(e,n,s){for(var a=-1,r=Object(e),o=s(e),c=o.length;c--;){var d=o[++a];if(n(r[d],d,r)===!1)break}return e}}var ade=sde();function Zy(t,e,n){(n!==void 0&&!gu(t[e],n)||n===void 0&&!(e in t))&&Vk(t,e,n)}function rde(t){return Or(t)&&gf(t)}function Xy(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function lde(t){return Are(t,pM(t))}function ode(t,e,n,s,a,r,o){var c=Xy(t,n),d=Xy(e,n),m=o.get(d);if(m){Zy(t,n,m);return}var u=r?r(c,d,n+"",t,e,o):void 0,p=u===void 0;if(p){var h=xo(d),g=!h&&Mm(d),v=!h&&!g&&Kk(d);u=d,h||g||v?xo(c)?u=c:rde(c)?u=vre(c):g?(p=!1,u=xM(d,!0)):v?(p=!1,u=yM(d,!0)):u=[]:ioe(d)||Wy(d)?(u=c,Wy(c)?u=lde(c):(!Tl(c)||zk(c))&&(u=bM(d))):p=!1}p&&(o.set(d,u),a(u,d,s,r,o),o.delete(d)),Zy(t,n,u)}function SM(t,e,n,s,a){t!==e&&ade(e,function(r,o){if(a||(a=new Ha),Tl(r))ode(t,e,o,n,SM,s,a);else{var c=s?s(Xy(t,o),r,o+"",t,e,a):void 0;c===void 0&&(c=r),Zy(t,o,c)}},pM)}function Qr(t,e){return CM(t,e)}var pl=Ire(function(t,e,n){SM(t,e,n)}),St=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(St||{});class Qa{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const a=St.TYPE&St.ATTRIBUTE;this.scope=s.scope!=null?s.scope&St.LEVEL|a:St.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class _c extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const _M=class Jy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const a=this.query(n);if(a==null)throw new _c(`Unable to create ${n} blot`);const r=a,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:r.create(s),c=new r(e,o,s);return Jy.blots.set(c.domNode,c),c}find(e,n=!1){return Jy.find(e,n)}query(e,n=St.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&St.LEVEL&St.BLOCK?s=this.types.block:e&St.LEVEL&St.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(s=this.classes[a],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&St.LEVEL&s.scope&&n&St.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,a="attrName"in n;if(!s&&!a)throw new _c("Invalid definition");if(s&&n.blotName==="abstract")throw new _c("Cannot register abstract class");const r=s?n.blotName:a?n.attrName:void 0;return this.types[r]=n,a?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};_M.blots=new WeakMap;let Kc=_M;function xS(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class cde extends Qa{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){xS(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(xS(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const ja=cde;function dx(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class dde extends Qa{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[dx(this.keyName)]=n,!0):!1}remove(e){e.style[dx(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[dx(this.keyName)];return this.canAdd(e,n)?n:""}}const Al=dde;class mde{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Kc.find(this.domNode);if(e==null)return;const n=Qa.keys(this.domNode),s=ja.keys(this.domNode),a=Al.keys(this.domNode);n.concat(s).concat(a).forEach(r=>{const o=e.scroll.query(r,St.ATTRIBUTE);o instanceof Qa&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const xf=mde,EM=class{constructor(e,n){this.scroll=e,this.domNode=n,Kc.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new _c("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Kc.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,a){const r=this.isolate(e,n);if(this.scroll.query(s,St.BLOT)!=null&&a)r.wrap(s,a);else if(this.scroll.query(s,St.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);r.wrap(o),o.format(s,a)}}insertAt(e,n,s){const a=s==null?this.scroll.create("text",n):this.scroll.create(n,s),r=this.split(e);this.parent.insertBefore(a,r||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new _c(`Cannot wrap ${e}`);return s.appendChild(this),s}};EM.blotName="abstract";let TM=EM;const AM=class extends TM{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};AM.scope=St.INLINE_BLOT;let ude=AM;const Oi=ude;class hde{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),a=0;for(;s;){if(s===e)return a;a+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let a=s();for(;a;){const r=a.length();if(e<r||n&&e===r&&(a.next==null||a.next.length()!==0))return[a,e];e-=r,a=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[a,r]=this.find(e);let o=e-r;const c=this.iterator(a);let d=c();for(;d&&o<e+n;){const m=d.length();e>o?s(d,e-o,Math.min(n,o+m-e)):s(d,0,Math.min(m,e+n-o)),o+=m,d=c()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let a=s();for(;a;)n=e(n,a),a=s();return n}}function yS(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(St.INLINE);return Array.from(t.childNodes).forEach(a=>{s.domNode.appendChild(a)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const DM=class Kr extends TM{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Kr.uiClass&&this.uiNode.classList.add(Kr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new hde,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=yS(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof _c)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,a,r)=>{s.deleteAt(a,r)})}descendant(e,n=0){const[s,a]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,a]:s instanceof Kr?s.descendant(e,a):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let a=[],r=s;return this.children.forEachAt(n,s,(o,c,d)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&a.push(o),o instanceof Kr&&(a=a.concat(o.descendants(e,c,r))),r-=d}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===St.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Kr?n.unwrap():n.remove())})}formatAt(e,n,s,a){this.children.forEachAt(e,n,(r,o,c)=>{r.formatAt(o,c,s,a)})}insertAt(e,n,s){const[a,r]=this.children.find(e);if(a)a.insertAt(r,n,s);else{const o=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,a]=this.children.find(e,n),r=[[this,e]];return s instanceof Kr?r.concat(s.path(a,n)):(s!=null&&r.push([s,a]),r)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof Kr&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(a,r,o)=>{const c=a.split(r,n);c!=null&&s.appendChild(c)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],a=[];e.forEach(r=>{r.target===this.domNode&&r.type==="childList"&&(s.push(...r.addedNodes),a.push(...r.removedNodes))}),a.forEach(r=>{if(r.parentNode!=null&&r.tagName!=="IFRAME"&&document.body.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(r);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(r=>r.parentNode===this.domNode&&r!==this.uiNode).sort((r,o)=>r===o?0:r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(r=>{let o=null;r.nextSibling!=null&&(o=this.scroll.find(r.nextSibling));const c=yS(r,this.scroll);(c.next!==o||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,o||void 0))}),this.enforceAllowedChildren()}};DM.uiClass="";let pde=DM;const fa=pde;function gde(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const ic=class sc extends fa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(sc.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof sc||(s=s.wrap(sc.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,St.INLINE);if(s==null)return;s instanceof Qa?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.formats()[s]!=null||this.scroll.query(s,St.ATTRIBUTE)?this.isolate(e,n).format(s,a):super.formatAt(e,n,s,a)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof sc&&s.prev===this&&gde(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof sc&&this.attributes.move(s),s}};ic.allowedChildren=[ic,Oi],ic.blotName="inline",ic.scope=St.INLINE_BLOT,ic.tagName="SPAN";let fde=ic;const Yk=fde,ac=class eb extends fa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(eb.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){const s=this.scroll.query(e,St.BLOCK);s!=null&&(s instanceof Qa?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(eb.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.scroll.query(s,St.BLOCK)!=null?this.format(s,a):super.formatAt(e,n,s,a)}insertAt(e,n,s){if(s==null||this.scroll.query(n,St.INLINE)!=null)super.insertAt(e,n,s);else{const a=this.split(e);if(a!=null){const r=this.scroll.create(n,s);a.parent.insertBefore(r,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};ac.blotName="block",ac.scope=St.BLOCK_BLOT,ac.tagName="P",ac.allowedChildren=[Yk,ac,Oi];let vde=ac;const Lm=vde,tb=class extends fa{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};tb.blotName="container",tb.scope=St.BLOCK_BLOT;let xde=tb;const yf=xde;class yde extends Oi{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,a){e===0&&n===this.length()?this.format(s,a):super.formatAt(e,n,s,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ms=yde,bde={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},wde=100,rc=class extends fa{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,bde),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=St.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,a){this.update(),super.formatAt(e,n,s,a)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const r=(d,m=!0)=>{d==null||d===this||d.domNode.parentNode!=null&&(s.has(d.domNode)||s.set(d.domNode,[]),m&&r(d.parent))},o=d=>{s.has(d.domNode)&&(d instanceof fa&&d.children.forEach(o),s.delete(d.domNode),d.optimize(n))};let c=e;for(let d=0;c.length>0;d+=1){if(d>=wde)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(m=>{const u=this.find(m.target,!0);u!=null&&(u.domNode===m.target&&(m.type==="childList"?(r(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(p=>{const h=this.find(p,!1);r(h,!1),h instanceof fa&&h.children.forEach(g=>{r(g,!1)})})):m.type==="attributes"&&r(u.prev)),r(u))}),this.children.forEach(o),c=Array.from(this.observer.takeRecords()),a=c.slice();a.length>0;)e.push(a.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(a=>{const r=this.find(a.target,!0);return r==null?null:s.has(r.domNode)?(s.get(r.domNode).push(a),null):(s.set(r.domNode,[a]),r)}).forEach(a=>{a!=null&&a!==this&&s.has(a.domNode)&&a.update(s.get(a.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};rc.blotName="scroll",rc.defaultChild=Lm,rc.allowedChildren=[Lm,yf],rc.scope=St.BLOCK_BLOT,rc.tagName="DIV";let kde=rc;const Qk=kde,nb=class RM extends Oi{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof RM&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};nb.blotName="text",nb.scope=St.INLINE_BLOT;let jde=nb;const dg=jde,Nde=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Qa,AttributorStore:xf,BlockBlot:Lm,ClassAttributor:ja,ContainerBlot:yf,EmbedBlot:Ms,InlineBlot:Yk,LeafBlot:Oi,ParentBlot:fa,Registry:Kc,Scope:St,ScrollBlot:Qk,StyleAttributor:Al,TextBlot:dg},Symbol.toStringTag,{value:"Module"}));var xh={exports:{}},mx,bS;function Cde(){if(bS)return mx;bS=1;var t=-1,e=1,n=0;function s(C,P,R,M,O){if(C===P)return C?[[n,C]]:[];if(R!=null){var q=A(C,P,R);if(q)return q}var U=c(C,P),H=C.substring(0,U);C=C.substring(U),P=P.substring(U),U=m(C,P);var ae=C.substring(C.length-U);C=C.substring(0,C.length-U),P=P.substring(0,P.length-U);var V=a(C,P);return H&&V.unshift([n,H]),ae&&V.push([n,ae]),w(V,O),M&&p(V),V}function a(C,P){var R;if(!C)return[[e,P]];if(!P)return[[t,C]];var M=C.length>P.length?C:P,O=C.length>P.length?P:C,q=M.indexOf(O);if(q!==-1)return R=[[e,M.substring(0,q)],[n,O],[e,M.substring(q+O.length)]],C.length>P.length&&(R[0][0]=R[2][0]=t),R;if(O.length===1)return[[t,C],[e,P]];var U=u(C,P);if(U){var H=U[0],ae=U[1],V=U[2],pe=U[3],oe=U[4],ne=s(H,V),se=s(ae,pe);return ne.concat([[n,oe]],se)}return r(C,P)}function r(C,P){for(var R=C.length,M=P.length,O=Math.ceil((R+M)/2),q=O,U=2*O,H=new Array(U),ae=new Array(U),V=0;V<U;V++)H[V]=-1,ae[V]=-1;H[q+1]=0,ae[q+1]=0;for(var pe=R-M,oe=pe%2!==0,ne=0,se=0,W=0,ge=0,ee=0;ee<O;ee++){for(var ie=-ee+ne;ie<=ee-se;ie+=2){var ue=q+ie,G;ie===-ee||ie!==ee&&H[ue-1]<H[ue+1]?G=H[ue+1]:G=H[ue-1]+1;for(var le=G-ie;G<R&&le<M&&C.charAt(G)===P.charAt(le);)G++,le++;if(H[ue]=G,G>R)se+=2;else if(le>M)ne+=2;else if(oe){var re=q+pe-ie;if(re>=0&&re<U&&ae[re]!==-1){var D=R-ae[re];if(G>=D)return o(C,P,G,le)}}}for(var I=-ee+W;I<=ee-ge;I+=2){var re=q+I,D;I===-ee||I!==ee&&ae[re-1]<ae[re+1]?D=ae[re+1]:D=ae[re-1]+1;for(var ce=D-I;D<R&&ce<M&&C.charAt(R-D-1)===P.charAt(M-ce-1);)D++,ce++;if(ae[re]=D,D>R)ge+=2;else if(ce>M)W+=2;else if(!oe){var ue=q+pe-I;if(ue>=0&&ue<U&&H[ue]!==-1){var G=H[ue],le=q+G-ue;if(D=R-D,G>=D)return o(C,P,G,le)}}}}return[[t,C],[e,P]]}function o(C,P,R,M){var O=C.substring(0,R),q=P.substring(0,M),U=C.substring(R),H=P.substring(M),ae=s(O,q),V=s(U,H);return ae.concat(V)}function c(C,P){if(!C||!P||C.charAt(0)!==P.charAt(0))return 0;for(var R=0,M=Math.min(C.length,P.length),O=M,q=0;R<O;)C.substring(q,O)==P.substring(q,O)?(R=O,q=R):M=O,O=Math.floor((M-R)/2+R);return k(C.charCodeAt(O-1))&&O--,O}function d(C,P){var R=C.length,M=P.length;if(R==0||M==0)return 0;R>M?C=C.substring(R-M):R<M&&(P=P.substring(0,R));var O=Math.min(R,M);if(C==P)return O;for(var q=0,U=1;;){var H=C.substring(O-U),ae=P.indexOf(H);if(ae==-1)return q;U+=ae,(ae==0||C.substring(O-U)==P.substring(0,U))&&(q=U,U++)}}function m(C,P){if(!C||!P||C.slice(-1)!==P.slice(-1))return 0;for(var R=0,M=Math.min(C.length,P.length),O=M,q=0;R<O;)C.substring(C.length-O,C.length-q)==P.substring(P.length-O,P.length-q)?(R=O,q=R):M=O,O=Math.floor((M-R)/2+R);return _(C.charCodeAt(C.length-O))&&O--,O}function u(C,P){var R=C.length>P.length?C:P,M=C.length>P.length?P:C;if(R.length<4||M.length*2<R.length)return null;function O(se,W,ge){for(var ee=se.substring(ge,ge+Math.floor(se.length/4)),ie=-1,ue="",G,le,re,D;(ie=W.indexOf(ee,ie+1))!==-1;){var I=c(se.substring(ge),W.substring(ie)),ce=m(se.substring(0,ge),W.substring(0,ie));ue.length<ce+I&&(ue=W.substring(ie-ce,ie)+W.substring(ie,ie+I),G=se.substring(0,ge-ce),le=se.substring(ge+I),re=W.substring(0,ie-ce),D=W.substring(ie+I))}return ue.length*2>=se.length?[G,le,re,D,ue]:null}var q=O(R,M,Math.ceil(R.length/4)),U=O(R,M,Math.ceil(R.length/2)),H;if(!q&&!U)return null;U?q?H=q[4].length>U[4].length?q:U:H=U:H=q;var ae,V,pe,oe;C.length>P.length?(ae=H[0],V=H[1],pe=H[2],oe=H[3]):(pe=H[0],oe=H[1],ae=H[2],V=H[3]);var ne=H[4];return[ae,V,pe,oe,ne]}function p(C){for(var P=!1,R=[],M=0,O=null,q=0,U=0,H=0,ae=0,V=0;q<C.length;)C[q][0]==n?(R[M++]=q,U=ae,H=V,ae=0,V=0,O=C[q][1]):(C[q][0]==e?ae+=C[q][1].length:V+=C[q][1].length,O&&O.length<=Math.max(U,H)&&O.length<=Math.max(ae,V)&&(C.splice(R[M-1],0,[t,O]),C[R[M-1]+1][0]=e,M--,M--,q=M>0?R[M-1]:-1,U=0,H=0,ae=0,V=0,O=null,P=!0)),q++;for(P&&w(C),b(C),q=1;q<C.length;){if(C[q-1][0]==t&&C[q][0]==e){var pe=C[q-1][1],oe=C[q][1],ne=d(pe,oe),se=d(oe,pe);ne>=se?(ne>=pe.length/2||ne>=oe.length/2)&&(C.splice(q,0,[n,oe.substring(0,ne)]),C[q-1][1]=pe.substring(0,pe.length-ne),C[q+1][1]=oe.substring(ne),q++):(se>=pe.length/2||se>=oe.length/2)&&(C.splice(q,0,[n,pe.substring(0,se)]),C[q-1][0]=e,C[q-1][1]=oe.substring(0,oe.length-se),C[q+1][0]=t,C[q+1][1]=pe.substring(se),q++),q++}q++}}var h=/[^a-zA-Z0-9]/,g=/\s/,v=/[\r\n]/,x=/\n\r?\n$/,y=/^\r?\n\r?\n/;function b(C){function P(se,W){if(!se||!W)return 6;var ge=se.charAt(se.length-1),ee=W.charAt(0),ie=ge.match(h),ue=ee.match(h),G=ie&&ge.match(g),le=ue&&ee.match(g),re=G&&ge.match(v),D=le&&ee.match(v),I=re&&se.match(x),ce=D&&W.match(y);return I||ce?5:re||D?4:ie&&!G&&le?3:G||le?2:ie||ue?1:0}for(var R=1;R<C.length-1;){if(C[R-1][0]==n&&C[R+1][0]==n){var M=C[R-1][1],O=C[R][1],q=C[R+1][1],U=m(M,O);if(U){var H=O.substring(O.length-U);M=M.substring(0,M.length-U),O=H+O.substring(0,O.length-U),q=H+q}for(var ae=M,V=O,pe=q,oe=P(M,O)+P(O,q);O.charAt(0)===q.charAt(0);){M+=O.charAt(0),O=O.substring(1)+q.charAt(0),q=q.substring(1);var ne=P(M,O)+P(O,q);ne>=oe&&(oe=ne,ae=M,V=O,pe=q)}C[R-1][1]!=ae&&(ae?C[R-1][1]=ae:(C.splice(R-1,1),R--),C[R][1]=V,pe?C[R+1][1]=pe:(C.splice(R+1,1),R--))}R++}}function w(C,P){C.push([n,""]);for(var R=0,M=0,O=0,q="",U="",H;R<C.length;){if(R<C.length-1&&!C[R][1]){C.splice(R,1);continue}switch(C[R][0]){case e:O++,U+=C[R][1],R++;break;case t:M++,q+=C[R][1],R++;break;case n:var ae=R-O-M-1;if(P){if(ae>=0&&T(C[ae][1])){var V=C[ae][1].slice(-1);if(C[ae][1]=C[ae][1].slice(0,-1),q=V+q,U=V+U,!C[ae][1]){C.splice(ae,1),R--;var pe=ae-1;C[pe]&&C[pe][0]===e&&(O++,U=C[pe][1]+U,pe--),C[pe]&&C[pe][0]===t&&(M++,q=C[pe][1]+q,pe--),ae=pe}}if(j(C[R][1])){var V=C[R][1].charAt(0);C[R][1]=C[R][1].slice(1),q+=V,U+=V}}if(R<C.length-1&&!C[R][1]){C.splice(R,1);break}if(q.length>0||U.length>0){q.length>0&&U.length>0&&(H=c(U,q),H!==0&&(ae>=0?C[ae][1]+=U.substring(0,H):(C.splice(0,0,[n,U.substring(0,H)]),R++),U=U.substring(H),q=q.substring(H)),H=m(U,q),H!==0&&(C[R][1]=U.substring(U.length-H)+C[R][1],U=U.substring(0,U.length-H),q=q.substring(0,q.length-H)));var oe=O+M;q.length===0&&U.length===0?(C.splice(R-oe,oe),R=R-oe):q.length===0?(C.splice(R-oe,oe,[e,U]),R=R-oe+1):U.length===0?(C.splice(R-oe,oe,[t,q]),R=R-oe+1):(C.splice(R-oe,oe,[t,q],[e,U]),R=R-oe+2)}R!==0&&C[R-1][0]===n?(C[R-1][1]+=C[R][1],C.splice(R,1)):R++,O=0,M=0,q="",U="";break}}C[C.length-1][1]===""&&C.pop();var ne=!1;for(R=1;R<C.length-1;)C[R-1][0]===n&&C[R+1][0]===n&&(C[R][1].substring(C[R][1].length-C[R-1][1].length)===C[R-1][1]?(C[R][1]=C[R-1][1]+C[R][1].substring(0,C[R][1].length-C[R-1][1].length),C[R+1][1]=C[R-1][1]+C[R+1][1],C.splice(R-1,1),ne=!0):C[R][1].substring(0,C[R+1][1].length)==C[R+1][1]&&(C[R-1][1]+=C[R+1][1],C[R][1]=C[R][1].substring(C[R+1][1].length)+C[R+1][1],C.splice(R+1,1),ne=!0)),R++;ne&&w(C,P)}function k(C){return C>=55296&&C<=56319}function _(C){return C>=56320&&C<=57343}function j(C){return _(C.charCodeAt(0))}function T(C){return k(C.charCodeAt(C.length-1))}function N(C){for(var P=[],R=0;R<C.length;R++)C[R][1].length>0&&P.push(C[R]);return P}function E(C,P,R,M){return T(C)||j(M)?null:N([[n,C],[t,P],[e,R],[n,M]])}function A(C,P,R){var M=typeof R=="number"?{index:R,length:0}:R.oldRange,O=typeof R=="number"?null:R.newRange,q=C.length,U=P.length;if(M.length===0&&(O===null||O.length===0)){var H=M.index,ae=C.slice(0,H),V=C.slice(H),pe=O?O.index:null;e:{var oe=H+U-q;if(pe!==null&&pe!==oe||oe<0||oe>U)break e;var ne=P.slice(0,oe),se=P.slice(oe);if(se!==V)break e;var W=Math.min(H,oe),ge=ae.slice(0,W),ee=ne.slice(0,W);if(ge!==ee)break e;var ie=ae.slice(W),ue=ne.slice(W);return E(ge,ie,ue,V)}e:{if(pe!==null&&pe!==H)break e;var G=H,ne=P.slice(0,G),se=P.slice(G);if(ne!==ae)break e;var le=Math.min(q-G,U-G),re=V.slice(V.length-le),D=se.slice(se.length-le);if(re!==D)break e;var ie=V.slice(0,V.length-le),ue=se.slice(0,se.length-le);return E(ae,ie,ue,re)}}if(M.length>0&&O&&O.length===0)e:{var ge=C.slice(0,M.index),re=C.slice(M.index+M.length),W=ge.length,le=re.length;if(U<W+le)break e;var ee=P.slice(0,W),D=P.slice(U-le);if(ge!==ee||re!==D)break e;var ie=C.slice(W,q-le),ue=P.slice(W,U-le);return E(ge,ie,ue,re)}return null}function L(C,P,R,M){return s(C,P,R,M,!0)}return L.INSERT=e,L.DELETE=t,L.EQUAL=n,mx=L,mx}var Vd={exports:{}};Vd.exports;var wS;function PM(){return wS||(wS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=9007199254740991,r="[object Arguments]",o="[object Array]",c="[object Boolean]",d="[object Date]",m="[object Error]",u="[object Function]",p="[object GeneratorFunction]",h="[object Map]",g="[object Number]",v="[object Object]",x="[object Promise]",y="[object RegExp]",b="[object Set]",w="[object String]",k="[object Symbol]",_="[object WeakMap]",j="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",E="[object Float64Array]",A="[object Int8Array]",L="[object Int16Array]",C="[object Int32Array]",P="[object Uint8Array]",R="[object Uint8ClampedArray]",M="[object Uint16Array]",O="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/\w*$/,H=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,V={};V[r]=V[o]=V[j]=V[T]=V[c]=V[d]=V[N]=V[E]=V[A]=V[L]=V[C]=V[h]=V[g]=V[v]=V[y]=V[b]=V[w]=V[k]=V[P]=V[R]=V[M]=V[O]=!0,V[m]=V[u]=V[_]=!1;var pe=typeof Zr=="object"&&Zr&&Zr.Object===Object&&Zr,oe=typeof self=="object"&&self&&self.Object===Object&&self,ne=pe||oe||Function("return this")(),se=e&&!e.nodeType&&e,W=se&&!0&&t&&!t.nodeType&&t,ge=W&&W.exports===se;function ee($,de){return $.set(de[0],de[1]),$}function ie($,de){return $.add(de),$}function ue($,de){for(var Ne=-1,Ge=$?$.length:0;++Ne<Ge&&de($[Ne],Ne,$)!==!1;);return $}function G($,de){for(var Ne=-1,Ge=de.length,Kt=$.length;++Ne<Ge;)$[Kt+Ne]=de[Ne];return $}function le($,de,Ne,Ge){for(var Kt=-1,Rt=$?$.length:0;++Kt<Rt;)Ne=de(Ne,$[Kt],Kt,$);return Ne}function re($,de){for(var Ne=-1,Ge=Array($);++Ne<$;)Ge[Ne]=de(Ne);return Ge}function D($,de){return $?.[de]}function I($){var de=!1;if($!=null&&typeof $.toString!="function")try{de=!!($+"")}catch{}return de}function ce($){var de=-1,Ne=Array($.size);return $.forEach(function(Ge,Kt){Ne[++de]=[Kt,Ge]}),Ne}function Z($,de){return function(Ne){return $(de(Ne))}}function K($){var de=-1,Ne=Array($.size);return $.forEach(function(Ge){Ne[++de]=Ge}),Ne}var B=Array.prototype,F=Function.prototype,J=Object.prototype,Q=ne["__core-js_shared__"],me=(function(){var $=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""})(),te=F.toString,Y=J.hasOwnProperty,Ce=J.toString,ye=RegExp("^"+te.call(Y).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=ge?ne.Buffer:void 0,et=ne.Symbol,kt=ne.Uint8Array,At=Z(Object.getPrototypeOf,Object),qt=Object.create,Ie=J.propertyIsEnumerable,De=B.splice,xe=Object.getOwnPropertySymbols,ke=Te?Te.isBuffer:void 0,Oe=Z(Object.keys,Object),Qe=la(ne,"DataView"),ct=la(ne,"Map"),Tt=la(ne,"Promise"),Ut=la(ne,"Set"),yt=la(ne,"WeakMap"),Ae=la(Object,"create"),Be=Vi(Qe),z=Vi(ct),X=Vi(Tt),fe=Vi(Ut),_e=Vi(yt),ze=et?et.prototype:void 0,Je=ze?ze.valueOf:void 0;function nt($){var de=-1,Ne=$?$.length:0;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function at(){this.__data__=Ae?Ae(null):{}}function jt($){return this.has($)&&delete this.__data__[$]}function ot($){var de=this.__data__;if(Ae){var Ne=de[$];return Ne===s?void 0:Ne}return Y.call(de,$)?de[$]:void 0}function wt($){var de=this.__data__;return Ae?de[$]!==void 0:Y.call(de,$)}function Wt($,de){var Ne=this.__data__;return Ne[$]=Ae&&de===void 0?s:de,this}nt.prototype.clear=at,nt.prototype.delete=jt,nt.prototype.get=ot,nt.prototype.has=wt,nt.prototype.set=Wt;function we($){var de=-1,Ne=$?$.length:0;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function he(){this.__data__=[]}function Re($){var de=this.__data__,Ne=Hn(de,$);if(Ne<0)return!1;var Ge=de.length-1;return Ne==Ge?de.pop():De.call(de,Ne,1),!0}function $e($){var de=this.__data__,Ne=Hn(de,$);return Ne<0?void 0:de[Ne][1]}function Ve($){return Hn(this.__data__,$)>-1}function Fe($,de){var Ne=this.__data__,Ge=Hn(Ne,$);return Ge<0?Ne.push([$,de]):Ne[Ge][1]=de,this}we.prototype.clear=he,we.prototype.delete=Re,we.prototype.get=$e,we.prototype.has=Ve,we.prototype.set=Fe;function Xe($){var de=-1,Ne=$?$.length:0;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function xt(){this.__data__={hash:new nt,map:new(ct||we),string:new nt}}function Gt($){return Pl(this,$).delete($)}function Ln($){return Pl(this,$).get($)}function pi($){return Pl(this,$).has($)}function qi($,de){return Pl(this,$).set($,de),this}Xe.prototype.clear=xt,Xe.prototype.delete=Gt,Xe.prototype.get=Ln,Xe.prototype.has=pi,Xe.prototype.set=qi;function en($){this.__data__=new we($)}function sa(){this.__data__=new we}function sr($){return this.__data__.delete($)}function qn($){return this.__data__.get($)}function Is($){return this.__data__.has($)}function ar($,de){var Ne=this.__data__;if(Ne instanceof we){var Ge=Ne.__data__;if(!ct||Ge.length<n-1)return Ge.push([$,de]),this;Ne=this.__data__=new Xe(Ge)}return Ne.set($,de),this}en.prototype.clear=sa,en.prototype.delete=sr,en.prototype.get=qn,en.prototype.has=Is,en.prototype.set=ar;function Ca($,de){var Ne=fd($)||Uo($)?re($.length,String):[],Ge=Ne.length,Kt=!!Ge;for(var Rt in $)Y.call($,Rt)&&!(Kt&&(Rt=="length"||Rf(Rt,Ge)))&&Ne.push(Rt);return Ne}function ti($,de,Ne){var Ge=$[de];(!(Y.call($,de)&&Cu(Ge,Ne))||Ne===void 0&&!(de in $))&&($[de]=Ne)}function Hn($,de){for(var Ne=$.length;Ne--;)if(Cu($[Ne][0],de))return Ne;return-1}function Hi($,de){return $&&gd(de,xd(de),$)}function aa($,de,Ne,Ge,Kt,Rt,ln){var nn;if(Ge&&(nn=Rt?Ge($,Kt,Rt,ln):Ge($)),nn!==void 0)return nn;if(!_a($))return $;var ri=fd($);if(ri){if(nn=Af($),!de)return _f($,nn)}else{var fn=lr($),_i=fn==u||fn==p;if(Su($))return Vo($,de);if(fn==v||fn==r||_i&&!Rt){if(I($))return Rt?$:{};if(nn=Sa(_i?{}:$),!de)return Ef($,Hi(nn,$))}else{if(!V[fn])return Rt?$:{};nn=Df($,fn,aa,de)}}ln||(ln=new en);var ns=ln.get($);if(ns)return ns;if(ln.set($,nn),!ri)var di=Ne?Tf($):xd($);return ue(di||$,function(Ei,bi){di&&(bi=Ei,Ei=$[bi]),ti(nn,bi,aa(Ei,de,Ne,Ge,bi,$,ln))}),nn}function Dl($){return _a($)?qt($):{}}function zi($,de,Ne){var Ge=de($);return fd($)?Ge:G(Ge,Ne($))}function ra($){return Ce.call($)}function yi($){if(!_a($)||Mf($))return!1;var de=vd($)||I($)?ye:H;return de.test(Vi($))}function jf($){if(!ju($))return Oe($);var de=[];for(var Ne in Object($))Y.call($,Ne)&&Ne!="constructor"&&de.push(Ne);return de}function Vo($,de){if(de)return $.slice();var Ne=new $.constructor($.length);return $.copy(Ne),Ne}function pd($){var de=new $.constructor($.byteLength);return new kt(de).set(new kt($)),de}function Rl($,de){var Ne=de?pd($.buffer):$.buffer;return new $.constructor(Ne,$.byteOffset,$.byteLength)}function wu($,de,Ne){var Ge=de?Ne(ce($),!0):ce($);return le(Ge,ee,new $.constructor)}function ku($){var de=new $.constructor($.source,U.exec($));return de.lastIndex=$.lastIndex,de}function Nf($,de,Ne){var Ge=de?Ne(K($),!0):K($);return le(Ge,ie,new $.constructor)}function Cf($){return Je?Object(Je.call($)):{}}function Sf($,de){var Ne=de?pd($.buffer):$.buffer;return new $.constructor(Ne,$.byteOffset,$.length)}function _f($,de){var Ne=-1,Ge=$.length;for(de||(de=Array(Ge));++Ne<Ge;)de[Ne]=$[Ne];return de}function gd($,de,Ne,Ge){Ne||(Ne={});for(var Kt=-1,Rt=de.length;++Kt<Rt;){var ln=de[Kt],nn=void 0;ti(Ne,ln,nn===void 0?$[ln]:nn)}return Ne}function Ef($,de){return gd($,rr($),de)}function Tf($){return zi($,xd,rr)}function Pl($,de){var Ne=$.__data__;return Pf(de)?Ne[typeof de=="string"?"string":"hash"]:Ne.map}function la($,de){var Ne=D($,de);return yi(Ne)?Ne:void 0}var rr=xe?Z(xe,Object):Of,lr=ra;(Qe&&lr(new Qe(new ArrayBuffer(1)))!=T||ct&&lr(new ct)!=h||Tt&&lr(Tt.resolve())!=x||Ut&&lr(new Ut)!=b||yt&&lr(new yt)!=_)&&(lr=function($){var de=Ce.call($),Ne=de==v?$.constructor:void 0,Ge=Ne?Vi(Ne):void 0;if(Ge)switch(Ge){case Be:return T;case z:return h;case X:return x;case fe:return b;case _e:return _}return de});function Af($){var de=$.length,Ne=$.constructor(de);return de&&typeof $[0]=="string"&&Y.call($,"index")&&(Ne.index=$.index,Ne.input=$.input),Ne}function Sa($){return typeof $.constructor=="function"&&!ju($)?Dl(At($)):{}}function Df($,de,Ne,Ge){var Kt=$.constructor;switch(de){case j:return pd($);case c:case d:return new Kt(+$);case T:return Rl($,Ge);case N:case E:case A:case L:case C:case P:case R:case M:case O:return Sf($,Ge);case h:return wu($,Ge,Ne);case g:case w:return new Kt($);case y:return ku($);case b:return Nf($,Ge,Ne);case k:return Cf($)}}function Rf($,de){return de=de??a,!!de&&(typeof $=="number"||ae.test($))&&$>-1&&$%1==0&&$<de}function Pf($){var de=typeof $;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?$!=="__proto__":$===null}function Mf($){return!!me&&me in $}function ju($){var de=$&&$.constructor,Ne=typeof de=="function"&&de.prototype||J;return $===Ne}function Vi($){if($!=null){try{return te.call($)}catch{}try{return $+""}catch{}}return""}function Nu($){return aa($,!0,!0)}function Cu($,de){return $===de||$!==$&&de!==de}function Uo($){return If($)&&Y.call($,"callee")&&(!Ie.call($,"callee")||Ce.call($)==r)}var fd=Array.isArray;function Wo($){return $!=null&&_u($.length)&&!vd($)}function If($){return Eu($)&&Wo($)}var Su=ke||Lf;function vd($){var de=_a($)?Ce.call($):"";return de==u||de==p}function _u($){return typeof $=="number"&&$>-1&&$%1==0&&$<=a}function _a($){var de=typeof $;return!!$&&(de=="object"||de=="function")}function Eu($){return!!$&&typeof $=="object"}function xd($){return Wo($)?Ca($):jf($)}function Of(){return[]}function Lf(){return!1}t.exports=Nu})(Vd,Vd.exports)),Vd.exports}var Ud={exports:{}};Ud.exports;var kS;function MM(){return kS||(kS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=1,r=2,o=9007199254740991,c="[object Arguments]",d="[object Array]",m="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",h="[object Error]",g="[object Function]",v="[object GeneratorFunction]",x="[object Map]",y="[object Number]",b="[object Null]",w="[object Object]",k="[object Promise]",_="[object Proxy]",j="[object RegExp]",T="[object Set]",N="[object String]",E="[object Symbol]",A="[object Undefined]",L="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",R="[object Float32Array]",M="[object Float64Array]",O="[object Int8Array]",q="[object Int16Array]",U="[object Int32Array]",H="[object Uint8Array]",ae="[object Uint8ClampedArray]",V="[object Uint16Array]",pe="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,W={};W[R]=W[M]=W[O]=W[q]=W[U]=W[H]=W[ae]=W[V]=W[pe]=!0,W[c]=W[d]=W[C]=W[u]=W[P]=W[p]=W[h]=W[g]=W[x]=W[y]=W[w]=W[j]=W[T]=W[N]=W[L]=!1;var ge=typeof Zr=="object"&&Zr&&Zr.Object===Object&&Zr,ee=typeof self=="object"&&self&&self.Object===Object&&self,ie=ge||ee||Function("return this")(),ue=e&&!e.nodeType&&e,G=ue&&!0&&t&&!t.nodeType&&t,le=G&&G.exports===ue,re=le&&ge.process,D=(function(){try{return re&&re.binding&&re.binding("util")}catch{}})(),I=D&&D.isTypedArray;function ce($,de){for(var Ne=-1,Ge=$==null?0:$.length,Kt=0,Rt=[];++Ne<Ge;){var ln=$[Ne];de(ln,Ne,$)&&(Rt[Kt++]=ln)}return Rt}function Z($,de){for(var Ne=-1,Ge=de.length,Kt=$.length;++Ne<Ge;)$[Kt+Ne]=de[Ne];return $}function K($,de){for(var Ne=-1,Ge=$==null?0:$.length;++Ne<Ge;)if(de($[Ne],Ne,$))return!0;return!1}function B($,de){for(var Ne=-1,Ge=Array($);++Ne<$;)Ge[Ne]=de(Ne);return Ge}function F($){return function(de){return $(de)}}function J($,de){return $.has(de)}function Q($,de){return $?.[de]}function me($){var de=-1,Ne=Array($.size);return $.forEach(function(Ge,Kt){Ne[++de]=[Kt,Ge]}),Ne}function te($,de){return function(Ne){return $(de(Ne))}}function Y($){var de=-1,Ne=Array($.size);return $.forEach(function(Ge){Ne[++de]=Ge}),Ne}var Ce=Array.prototype,ye=Function.prototype,Te=Object.prototype,et=ie["__core-js_shared__"],kt=ye.toString,At=Te.hasOwnProperty,qt=(function(){var $=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""})(),Ie=Te.toString,De=RegExp("^"+kt.call(At).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=le?ie.Buffer:void 0,ke=ie.Symbol,Oe=ie.Uint8Array,Qe=Te.propertyIsEnumerable,ct=Ce.splice,Tt=ke?ke.toStringTag:void 0,Ut=Object.getOwnPropertySymbols,yt=xe?xe.isBuffer:void 0,Ae=te(Object.keys,Object),Be=rr(ie,"DataView"),z=rr(ie,"Map"),X=rr(ie,"Promise"),fe=rr(ie,"Set"),_e=rr(ie,"WeakMap"),ze=rr(Object,"create"),Je=Vi(Be),nt=Vi(z),at=Vi(X),jt=Vi(fe),ot=Vi(_e),wt=ke?ke.prototype:void 0,Wt=wt?wt.valueOf:void 0;function we($){var de=-1,Ne=$==null?0:$.length;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function he(){this.__data__=ze?ze(null):{},this.size=0}function Re($){var de=this.has($)&&delete this.__data__[$];return this.size-=de?1:0,de}function $e($){var de=this.__data__;if(ze){var Ne=de[$];return Ne===s?void 0:Ne}return At.call(de,$)?de[$]:void 0}function Ve($){var de=this.__data__;return ze?de[$]!==void 0:At.call(de,$)}function Fe($,de){var Ne=this.__data__;return this.size+=this.has($)?0:1,Ne[$]=ze&&de===void 0?s:de,this}we.prototype.clear=he,we.prototype.delete=Re,we.prototype.get=$e,we.prototype.has=Ve,we.prototype.set=Fe;function Xe($){var de=-1,Ne=$==null?0:$.length;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function xt(){this.__data__=[],this.size=0}function Gt($){var de=this.__data__,Ne=Vo(de,$);if(Ne<0)return!1;var Ge=de.length-1;return Ne==Ge?de.pop():ct.call(de,Ne,1),--this.size,!0}function Ln($){var de=this.__data__,Ne=Vo(de,$);return Ne<0?void 0:de[Ne][1]}function pi($){return Vo(this.__data__,$)>-1}function qi($,de){var Ne=this.__data__,Ge=Vo(Ne,$);return Ge<0?(++this.size,Ne.push([$,de])):Ne[Ge][1]=de,this}Xe.prototype.clear=xt,Xe.prototype.delete=Gt,Xe.prototype.get=Ln,Xe.prototype.has=pi,Xe.prototype.set=qi;function en($){var de=-1,Ne=$==null?0:$.length;for(this.clear();++de<Ne;){var Ge=$[de];this.set(Ge[0],Ge[1])}}function sa(){this.size=0,this.__data__={hash:new we,map:new(z||Xe),string:new we}}function sr($){var de=la(this,$).delete($);return this.size-=de?1:0,de}function qn($){return la(this,$).get($)}function Is($){return la(this,$).has($)}function ar($,de){var Ne=la(this,$),Ge=Ne.size;return Ne.set($,de),this.size+=Ne.size==Ge?0:1,this}en.prototype.clear=sa,en.prototype.delete=sr,en.prototype.get=qn,en.prototype.has=Is,en.prototype.set=ar;function Ca($){var de=-1,Ne=$==null?0:$.length;for(this.__data__=new en;++de<Ne;)this.add($[de])}function ti($){return this.__data__.set($,s),this}function Hn($){return this.__data__.has($)}Ca.prototype.add=Ca.prototype.push=ti,Ca.prototype.has=Hn;function Hi($){var de=this.__data__=new Xe($);this.size=de.size}function aa(){this.__data__=new Xe,this.size=0}function Dl($){var de=this.__data__,Ne=de.delete($);return this.size=de.size,Ne}function zi($){return this.__data__.get($)}function ra($){return this.__data__.has($)}function yi($,de){var Ne=this.__data__;if(Ne instanceof Xe){var Ge=Ne.__data__;if(!z||Ge.length<n-1)return Ge.push([$,de]),this.size=++Ne.size,this;Ne=this.__data__=new en(Ge)}return Ne.set($,de),this.size=Ne.size,this}Hi.prototype.clear=aa,Hi.prototype.delete=Dl,Hi.prototype.get=zi,Hi.prototype.has=ra,Hi.prototype.set=yi;function jf($,de){var Ne=Uo($),Ge=!Ne&&Cu($),Kt=!Ne&&!Ge&&Wo($),Rt=!Ne&&!Ge&&!Kt&&Eu($),ln=Ne||Ge||Kt||Rt,nn=ln?B($.length,String):[],ri=nn.length;for(var fn in $)At.call($,fn)&&!(ln&&(fn=="length"||Kt&&(fn=="offset"||fn=="parent")||Rt&&(fn=="buffer"||fn=="byteLength"||fn=="byteOffset")||Df(fn,ri)))&&nn.push(fn);return nn}function Vo($,de){for(var Ne=$.length;Ne--;)if(Nu($[Ne][0],de))return Ne;return-1}function pd($,de,Ne){var Ge=de($);return Uo($)?Ge:Z(Ge,Ne($))}function Rl($){return $==null?$===void 0?A:b:Tt&&Tt in Object($)?lr($):ju($)}function wu($){return _a($)&&Rl($)==c}function ku($,de,Ne,Ge,Kt){return $===de?!0:$==null||de==null||!_a($)&&!_a(de)?$!==$&&de!==de:Nf($,de,Ne,Ge,ku,Kt)}function Nf($,de,Ne,Ge,Kt,Rt){var ln=Uo($),nn=Uo(de),ri=ln?d:Sa($),fn=nn?d:Sa(de);ri=ri==c?w:ri,fn=fn==c?w:fn;var _i=ri==w,ns=fn==w,di=ri==fn;if(di&&Wo($)){if(!Wo(de))return!1;ln=!0,_i=!1}if(di&&!_i)return Rt||(Rt=new Hi),ln||Eu($)?gd($,de,Ne,Ge,Kt,Rt):Ef($,de,ri,Ne,Ge,Kt,Rt);if(!(Ne&a)){var Ei=_i&&At.call($,"__wrapped__"),bi=ns&&At.call(de,"__wrapped__");if(Ei||bi){var Ur=Ei?$.value():$,or=bi?de.value():de;return Rt||(Rt=new Hi),Kt(Ur,or,Ne,Ge,Rt)}}return di?(Rt||(Rt=new Hi),Tf($,de,Ne,Ge,Kt,Rt)):!1}function Cf($){if(!_u($)||Pf($))return!1;var de=Su($)?De:ne;return de.test(Vi($))}function Sf($){return _a($)&&vd($.length)&&!!W[Rl($)]}function _f($){if(!Mf($))return Ae($);var de=[];for(var Ne in Object($))At.call($,Ne)&&Ne!="constructor"&&de.push(Ne);return de}function gd($,de,Ne,Ge,Kt,Rt){var ln=Ne&a,nn=$.length,ri=de.length;if(nn!=ri&&!(ln&&ri>nn))return!1;var fn=Rt.get($);if(fn&&Rt.get(de))return fn==de;var _i=-1,ns=!0,di=Ne&r?new Ca:void 0;for(Rt.set($,de),Rt.set(de,$);++_i<nn;){var Ei=$[_i],bi=de[_i];if(Ge)var Ur=ln?Ge(bi,Ei,_i,de,$,Rt):Ge(Ei,bi,_i,$,de,Rt);if(Ur!==void 0){if(Ur)continue;ns=!1;break}if(di){if(!K(de,function(or,Ml){if(!J(di,Ml)&&(Ei===or||Kt(Ei,or,Ne,Ge,Rt)))return di.push(Ml)})){ns=!1;break}}else if(!(Ei===bi||Kt(Ei,bi,Ne,Ge,Rt))){ns=!1;break}}return Rt.delete($),Rt.delete(de),ns}function Ef($,de,Ne,Ge,Kt,Rt,ln){switch(Ne){case P:if($.byteLength!=de.byteLength||$.byteOffset!=de.byteOffset)return!1;$=$.buffer,de=de.buffer;case C:return!($.byteLength!=de.byteLength||!Rt(new Oe($),new Oe(de)));case u:case p:case y:return Nu(+$,+de);case h:return $.name==de.name&&$.message==de.message;case j:case N:return $==de+"";case x:var nn=me;case T:var ri=Ge&a;if(nn||(nn=Y),$.size!=de.size&&!ri)return!1;var fn=ln.get($);if(fn)return fn==de;Ge|=r,ln.set($,de);var _i=gd(nn($),nn(de),Ge,Kt,Rt,ln);return ln.delete($),_i;case E:if(Wt)return Wt.call($)==Wt.call(de)}return!1}function Tf($,de,Ne,Ge,Kt,Rt){var ln=Ne&a,nn=Pl($),ri=nn.length,fn=Pl(de),_i=fn.length;if(ri!=_i&&!ln)return!1;for(var ns=ri;ns--;){var di=nn[ns];if(!(ln?di in de:At.call(de,di)))return!1}var Ei=Rt.get($);if(Ei&&Rt.get(de))return Ei==de;var bi=!0;Rt.set($,de),Rt.set(de,$);for(var Ur=ln;++ns<ri;){di=nn[ns];var or=$[di],Ml=de[di];if(Ge)var oj=ln?Ge(Ml,or,di,de,$,Rt):Ge(or,Ml,di,$,de,Rt);if(!(oj===void 0?or===Ml||Kt(or,Ml,Ne,Ge,Rt):oj)){bi=!1;break}Ur||(Ur=di=="constructor")}if(bi&&!Ur){var Tu=$.constructor,Au=de.constructor;Tu!=Au&&"constructor"in $&&"constructor"in de&&!(typeof Tu=="function"&&Tu instanceof Tu&&typeof Au=="function"&&Au instanceof Au)&&(bi=!1)}return Rt.delete($),Rt.delete(de),bi}function Pl($){return pd($,xd,Af)}function la($,de){var Ne=$.__data__;return Rf(de)?Ne[typeof de=="string"?"string":"hash"]:Ne.map}function rr($,de){var Ne=Q($,de);return Cf(Ne)?Ne:void 0}function lr($){var de=At.call($,Tt),Ne=$[Tt];try{$[Tt]=void 0;var Ge=!0}catch{}var Kt=Ie.call($);return Ge&&(de?$[Tt]=Ne:delete $[Tt]),Kt}var Af=Ut?function($){return $==null?[]:($=Object($),ce(Ut($),function(de){return Qe.call($,de)}))}:Of,Sa=Rl;(Be&&Sa(new Be(new ArrayBuffer(1)))!=P||z&&Sa(new z)!=x||X&&Sa(X.resolve())!=k||fe&&Sa(new fe)!=T||_e&&Sa(new _e)!=L)&&(Sa=function($){var de=Rl($),Ne=de==w?$.constructor:void 0,Ge=Ne?Vi(Ne):"";if(Ge)switch(Ge){case Je:return P;case nt:return x;case at:return k;case jt:return T;case ot:return L}return de});function Df($,de){return de=de??o,!!de&&(typeof $=="number"||se.test($))&&$>-1&&$%1==0&&$<de}function Rf($){var de=typeof $;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?$!=="__proto__":$===null}function Pf($){return!!qt&&qt in $}function Mf($){var de=$&&$.constructor,Ne=typeof de=="function"&&de.prototype||Te;return $===Ne}function ju($){return Ie.call($)}function Vi($){if($!=null){try{return kt.call($)}catch{}try{return $+""}catch{}}return""}function Nu($,de){return $===de||$!==$&&de!==de}var Cu=wu((function(){return arguments})())?wu:function($){return _a($)&&At.call($,"callee")&&!Qe.call($,"callee")},Uo=Array.isArray;function fd($){return $!=null&&vd($.length)&&!Su($)}var Wo=yt||Lf;function If($,de){return ku($,de)}function Su($){if(!_u($))return!1;var de=Rl($);return de==g||de==v||de==m||de==_}function vd($){return typeof $=="number"&&$>-1&&$%1==0&&$<=o}function _u($){var de=typeof $;return $!=null&&(de=="object"||de=="function")}function _a($){return $!=null&&typeof $=="object"}var Eu=I?F(I):Sf;function xd($){return fd($)?jf($):_f($)}function Of(){return[]}function Lf(){return!1}t.exports=If})(Ud,Ud.exports)),Ud.exports}var yh={},jS;function Sde(){if(jS)return yh;jS=1,Object.defineProperty(yh,"__esModule",{value:!0});const t=PM(),e=MM();var n;return(function(s){function a(d={},m={},u=!1){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});let p=t(m);u||(p=Object.keys(p).reduce((h,g)=>(p[g]!=null&&(h[g]=p[g]),h),{}));for(const h in d)d[h]!==void 0&&m[h]===void 0&&(p[h]=d[h]);return Object.keys(p).length>0?p:void 0}s.compose=a;function r(d={},m={}){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});const u=Object.keys(d).concat(Object.keys(m)).reduce((p,h)=>(e(d[h],m[h])||(p[h]=m[h]===void 0?null:m[h]),p),{});return Object.keys(u).length>0?u:void 0}s.diff=r;function o(d={},m={}){d=d||{};const u=Object.keys(m).reduce((p,h)=>(m[h]!==d[h]&&d[h]!==void 0&&(p[h]=m[h]),p),{});return Object.keys(d).reduce((p,h)=>(d[h]!==m[h]&&m[h]===void 0&&(p[h]=null),p),u)}s.invert=o;function c(d,m,u=!1){if(typeof d!="object")return m;if(typeof m!="object")return;if(!u)return m;const p=Object.keys(m).reduce((h,g)=>(d[g]===void 0&&(h[g]=m[g]),h),{});return Object.keys(p).length>0?p:void 0}s.transform=c})(n||(n={})),yh.default=n,yh}var bh={},NS;function IM(){if(NS)return bh;NS=1,Object.defineProperty(bh,"__esModule",{value:!0});var t;return(function(e){function n(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=n})(t||(t={})),bh.default=t,bh}var wh={},CS;function _de(){if(CS)return wh;CS=1,Object.defineProperty(wh,"__esModule",{value:!0});const t=IM();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const a=this.ops[this.index];if(a){const r=this.offset,o=t.default.length(a);if(s>=o-r?(s=o-r,this.index+=1,this.offset=0):this.offset+=s,typeof a.delete=="number")return{delete:s};{const c={};return a.attributes&&(c.attributes=a.attributes),typeof a.retain=="number"?c.retain=s:typeof a.retain=="object"&&a.retain!==null?c.retain=a.retain:typeof a.insert=="string"?c.insert=a.insert.substr(r,s):c.insert=a.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,a=this.index,r=this.next(),o=this.ops.slice(this.index);return this.offset=s,this.index=a,[r].concat(o)}}else return[]}}return wh.default=e,wh}var SS;function Ede(){return SS||(SS=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=Cde(),s=PM(),a=MM(),r=Sde();e.AttributeMap=r.default;const o=IM();e.Op=o.default;const c=_de();e.OpIterator=c.default;const d="\0",m=(p,h)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const g=Object.keys(p)[0];if(!g||g!==Object.keys(h)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(h)[0]}`);return[g,p[g],h[g]]};class u{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,g){this.handlers[h]=g}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const g=this.handlers[h];if(!g)throw new Error(`no handlers for embed type "${h}"`);return g}insert(h,g){const v={};return typeof h=="string"&&h.length===0?this:(v.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(v.attributes=g),this.push(v))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,g){if(typeof h=="number"&&h<=0)return this;const v={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(v.attributes=g),this.push(v)}push(h){let g=this.ops.length,v=this.ops[g-1];if(h=s(h),typeof v=="object"){if(typeof h.delete=="number"&&typeof v.delete=="number")return this.ops[g-1]={delete:v.delete+h.delete},this;if(typeof v.delete=="number"&&h.insert!=null&&(g-=1,v=this.ops[g-1],typeof v!="object"))return this.ops.unshift(h),this;if(a(h.attributes,v.attributes)){if(typeof h.insert=="string"&&typeof v.insert=="string")return this.ops[g-1]={insert:v.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof v.retain=="number")return this.ops[g-1]={retain:v.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const g=[],v=[];return this.forEach(x=>{(h(x)?g:v).push(x)}),[g,v]}reduce(h,g){return this.ops.reduce(h,g)}changeLength(){return this.reduce((h,g)=>g.insert?h+o.default.length(g):g.delete?h-g.delete:h,0)}length(){return this.reduce((h,g)=>h+o.default.length(g),0)}slice(h=0,g=1/0){const v=[],x=new c.default(this.ops);let y=0;for(;y<g&&x.hasNext();){let b;y<h?b=x.next(h-y):(b=x.next(g-y),v.push(b)),y+=o.default.length(b)}return new u(v)}compose(h){const g=new c.default(this.ops),v=new c.default(h.ops),x=[],y=v.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let w=y.retain;for(;g.peekType()==="insert"&&g.peekLength()<=w;)w-=g.peekLength(),x.push(g.next());y.retain-w>0&&v.next(y.retain-w)}const b=new u(x);for(;g.hasNext()||v.hasNext();)if(v.peekType()==="insert")b.push(v.next());else if(g.peekType()==="delete")b.push(g.next());else{const w=Math.min(g.peekLength(),v.peekLength()),k=g.next(w),_=v.next(w);if(_.retain){const j={};if(typeof k.retain=="number")j.retain=typeof _.retain=="number"?w:_.retain;else if(typeof _.retain=="number")k.retain==null?j.insert=k.insert:j.retain=k.retain;else{const N=k.retain==null?"insert":"retain",[E,A,L]=m(k[N],_.retain),C=u.getHandler(E);j[N]={[E]:C.compose(A,L,N==="retain")}}const T=r.default.compose(k.attributes,_.attributes,typeof k.retain=="number");if(T&&(j.attributes=T),b.push(j),!v.hasNext()&&a(b.ops[b.ops.length-1],j)){const N=new u(g.rest());return b.concat(N).chop()}}else typeof _.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&b.push(_)}return b.chop()}concat(h){const g=new u(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g}diff(h,g){if(this.ops===h.ops)return new u;const v=[this,h].map(k=>k.map(_=>{if(_.insert!=null)return typeof _.insert=="string"?_.insert:d;const j=k===h?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")),x=new u,y=n(v[0],v[1],g,!0),b=new c.default(this.ops),w=new c.default(h.ops);return y.forEach(k=>{let _=k[1].length;for(;_>0;){let j=0;switch(k[0]){case n.INSERT:j=Math.min(w.peekLength(),_),x.push(w.next(j));break;case n.DELETE:j=Math.min(_,b.peekLength()),b.next(j),x.delete(j);break;case n.EQUAL:j=Math.min(b.peekLength(),w.peekLength(),_);const T=b.next(j),N=w.next(j);a(T.insert,N.insert)?x.retain(j,r.default.diff(T.attributes,N.attributes)):x.push(N).delete(j);break}_-=j}}),x.chop()}eachLine(h,g=`
`){const v=new c.default(this.ops);let x=new u,y=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const b=v.peek(),w=o.default.length(b)-v.peekLength(),k=typeof b.insert=="string"?b.insert.indexOf(g,w)-w:-1;if(k<0)x.push(v.next());else if(k>0)x.push(v.next(k));else{if(h(x,v.next(1).attributes||{},y)===!1)return;y+=1,x=new u}}x.length()>0&&h(x,{},y)}invert(h){const g=new u;return this.reduce((v,x)=>{if(x.insert)g.delete(o.default.length(x));else{if(typeof x.retain=="number"&&x.attributes==null)return g.retain(x.retain),v+x.retain;if(x.delete||typeof x.retain=="number"){const y=x.delete||x.retain;return h.slice(v,v+y).forEach(w=>{x.delete?g.push(w):x.retain&&x.attributes&&g.retain(o.default.length(w),r.default.invert(x.attributes,w.attributes))}),v+y}else if(typeof x.retain=="object"&&x.retain!==null){const y=h.slice(v,v+1),b=new c.default(y.ops).next(),[w,k,_]=m(x.retain,b.insert),j=u.getHandler(w);return g.retain({[w]:j.invert(k,_)},r.default.invert(x.attributes,b.attributes)),v+1}}return v},0),g.chop()}transform(h,g=!1){if(g=!!g,typeof h=="number")return this.transformPosition(h,g);const v=h,x=new c.default(this.ops),y=new c.default(v.ops),b=new u;for(;x.hasNext()||y.hasNext();)if(x.peekType()==="insert"&&(g||y.peekType()!=="insert"))b.retain(o.default.length(x.next()));else if(y.peekType()==="insert")b.push(y.next());else{const w=Math.min(x.peekLength(),y.peekLength()),k=x.next(w),_=y.next(w);if(k.delete)continue;if(_.delete)b.push(_);else{const j=k.retain,T=_.retain;let N=typeof T=="object"&&T!==null?T:w;if(typeof j=="object"&&j!==null&&typeof T=="object"&&T!==null){const E=Object.keys(j)[0];if(E===Object.keys(T)[0]){const A=u.getHandler(E);A&&(N={[E]:A.transform(j[E],T[E],g)})}}b.retain(N,r.default.transform(k.attributes,_.attributes,g))}}return b.chop()}transformPosition(h,g=!1){g=!!g;const v=new c.default(this.ops);let x=0;for(;v.hasNext()&&x<=h;){const y=v.peekLength(),b=v.peekType();if(v.next(),b==="delete"){h-=Math.min(y,h-x);continue}else b==="insert"&&(x<h||!g)&&(h+=y);x+=y}return h}}u.Op=o.default,u.OpIterator=c.default,u.AttributeMap=r.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(xh,xh.exports)),xh.exports}var Gs=Ede();const Nt=wa(Gs);class Na extends Ms{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Na.blotName="break";Na.tagName="BR";let ba=class extends dg{};const Tde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bf(t){return t.replace(/[&<>"']/g,e=>Tde[e])}class Wi extends Yk{static allowedChildren=[Wi,Na,Ms,ba];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const s=Wi.order.indexOf(e),a=Wi.order.indexOf(n);return s>=0||a>=0?s-a:e===n?0:e<n?-1:1}formatAt(e,n,s,a){if(Wi.compare(this.statics.blotName,s)<0&&this.scroll.query(s,St.BLOT)){const r=this.isolate(e,n);a&&r.wrap(s,a)}else super.formatAt(e,n,s,a)}optimize(e){if(super.optimize(e),this.parent instanceof Wi&&Wi.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const _S=1;class Ni extends Lm{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=OM(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,a){n<=0||(this.scroll.query(s,St.BLOCK)?e+n===this.length()&&this.format(s,a):super.formatAt(e,Math.min(n,this.length()-e-1),s,a),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const a=n.split(`
`),r=a.shift();r.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let o=this;a.reduce((c,d)=>(o=o.split(c,!0),o.insertAt(0,d),d.length),e+r.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof Na&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+_S),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-_S)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const s=super.split(e,n);return this.cache={},s}}Ni.blotName="block";Ni.tagName="P";Ni.defaultChild=Na;Ni.allowedChildren=[Na,Wi,Ms,ba];class zs extends Ms{attach(){super.attach(),this.attributes=new xf(this.domNode)}delta(){return new Nt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,St.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,a){this.format(s,a)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const a=n.split(`
`),r=a.pop(),o=a.map(d=>{const m=this.scroll.create(Ni.blotName);return m.insertAt(0,d),m}),c=this.split(e);o.forEach(d=>{this.parent.insertBefore(d,c)}),r&&this.parent.insertBefore(this.scroll.create("text",r),c)}}zs.scope=St.BLOCK_BLOT;function OM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Oi).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),Bs(s,{},e)),new Nt).insert(`
`,Bs(t))}function Bs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Bs(t.parent,e,n)}class da extends Ms{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode(da.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,a=0;for(;s!=null&&s.statics.scope!==St.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=da.CONTENTS.length,s.optimize(),s.formatAt(a,da.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof ba?this.prev:null,s=n?n.length():0,a=this.next instanceof ba?this.next:null,r=a?a.text:"",{textNode:o}=this,c=o.data.split(da.CONTENTS).join("");o.data=da.CONTENTS;let d;if(n)d=n,(c||a)&&(n.insertAt(n.length(),c+r),a&&a.remove());else if(a)d=a,a.insertAt(0,c);else{const m=document.createTextNode(c);d=this.scroll.create(m),this.parent.insertBefore(d,this)}if(this.remove(),e){const m=(h,g)=>n&&h===n.domNode?g:h===o?s+g-1:a&&h===a.domNode?s+c.length+g:null,u=m(e.start.node,e.start.offset),p=m(e.end.node,e.end.offset);if(u!==null&&p!==null)return{startNode:d.domNode,startOffset:u,endNode:d.domNode,endOffset:p}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=da.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var ux={exports:{}},ES;function Ade(){return ES||(ES=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(d,m,u){this.fn=d,this.context=m,this.once=u||!1}function r(d,m,u,p,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,p||d,h),v=n?n+m:m;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],g]:d._events[v].push(g):(d._events[v]=g,d._eventsCount++),d}function o(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],u,p;if(this._eventsCount===0)return m;for(p in u=this._events)e.call(u,p)&&m.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},c.prototype.listeners=function(m){var u=n?n+m:m,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,g=p.length,v=new Array(g);h<g;h++)v[h]=p[h].fn;return v},c.prototype.listenerCount=function(m){var u=n?n+m:m,p=this._events[u];return p?p.fn?1:p.length:0},c.prototype.emit=function(m,u,p,h,g,v){var x=n?n+m:m;if(!this._events[x])return!1;var y=this._events[x],b=arguments.length,w,k;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,p),!0;case 4:return y.fn.call(y.context,u,p,h),!0;case 5:return y.fn.call(y.context,u,p,h,g),!0;case 6:return y.fn.call(y.context,u,p,h,g,v),!0}for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];y.fn.apply(y.context,w)}else{var _=y.length,j;for(k=0;k<_;k++)switch(y[k].once&&this.removeListener(m,y[k].fn,void 0,!0),b){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,u);break;case 3:y[k].fn.call(y[k].context,u,p);break;case 4:y[k].fn.call(y[k].context,u,p,h);break;default:if(!w)for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];y[k].fn.apply(y[k].context,w)}}return!0},c.prototype.on=function(m,u,p){return r(this,m,u,p,!1)},c.prototype.once=function(m,u,p){return r(this,m,u,p,!0)},c.prototype.removeListener=function(m,u,p,h){var g=n?n+m:m;if(!this._events[g])return this;if(!u)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===u&&(!h||v.once)&&(!p||v.context===p)&&o(this,g);else{for(var x=0,y=[],b=v.length;x<b;x++)(v[x].fn!==u||h&&!v[x].once||p&&v[x].context!==p)&&y.push(v[x]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},c.prototype.removeAllListeners=function(m){var u;return m?(u=n?n+m:m,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(ux)),ux.exports}var Dde=Ade();const Rde=wa(Dde),ib=new WeakMap,sb=["error","warn","log","info"];let ab="warn";function LM(t){if(ab&&sb.indexOf(t)<=sb.indexOf(ab)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function Vr(t){return sb.reduce((e,n)=>(e[n]=LM.bind(console,n,t),e),{})}Vr.level=t=>{ab=t};LM.level=Vr.level;const hx=Vr("quill:events"),Pde=["selectionchange","mousedown","mouseup","click"];Pde.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const r=ib.get(a);r&&r.emitter&&r.emitter.handleDOM(...n)})})});class bt extends Rde{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",hx.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return hx.log.call(hx,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(r=>{let{node:o,handler:c}=r;(e.target===o||o.contains(e.target))&&c(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}const px=Vr("quill:selection");class bo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Mde{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new bo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,bt.sources.USER),1)}),this.emitter.on(bt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(bt.events.SCROLL_UPDATE,(a,r)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const o=r.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(o?bt.sources.SILENT:a)}catch{}})}),this.emitter.on(bt.events.SCROLL_OPTIMIZE,(s,a)=>{if(a.range){const{startNode:r,startOffset:o,endNode:c,endOffset:d}=a.range;this.setNativeRange(r,o,c,d),this.update(bt.sources.SILENT)}}),this.update(bt.sources.SILENT)}handleComposition(){this.emitter.on(bt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(bt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(bt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,St.BLOCK))){if(s.start.node!==this.cursor.textNode){const a=this.scroll.find(s.start.node,!1);if(a==null)return;if(a instanceof Oi){const r=a.split(s.start.offset);a.parent.insertBefore(this.cursor,r)}else a.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let a,[r,o]=this.scroll.leaf(e);if(r==null)return null;if(n>0&&o===r.length()){const[u]=this.scroll.leaf(e+1);if(u){const[p]=this.scroll.line(e),[h]=this.scroll.line(e+1);p===h&&(r=u,o=0)}}[a,o]=r.position(o,!0);const c=document.createRange();if(n>0)return c.setStart(a,o),[r,o]=this.scroll.leaf(e+n),r==null?null:([a,o]=r.position(o,!0),c.setEnd(a,o),c.getBoundingClientRect());let d="left",m;if(a instanceof Text){if(!a.data.length)return null;o<a.data.length?(c.setStart(a,o),c.setEnd(a,o+1)):(c.setStart(a,o-1),c.setEnd(a,o),d="right"),m=c.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;m=r.domNode.getBoundingClientRect(),o>0&&(d="right")}return{bottom:m.top+m.height,height:m.height,left:m[d],right:m[d],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return px.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&gx(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(o=>{const[c,d]=o,m=this.scroll.find(c,!0),u=m.offset(this.scroll);return d===0?u:m instanceof Oi?u+m.index(c,d):u+m.length()}),a=Math.min(Math.max(...s),this.scroll.length()-1),r=Math.min(a,...s);return new bo(r,a-r)}normalizeNative(e){if(!gx(this.root,e.startContainer)||!e.collapsed&&!gx(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:a,offset:r}=s;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>r)a=a.childNodes[r],r=0;else if(a.childNodes.length===r)a=a.lastChild,a instanceof Text?r=a.data.length:a.childNodes.length>0?r=a.childNodes.length:r=a.childNodes.length+1;else break;s.node=a,s.offset=r}),n}rangeToNative(e){const n=this.scroll.length(),s=(a,r)=>{a=Math.min(n-1,a);const[o,c]=this.scroll.leaf(a);return o?o.position(c,r):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(px.info("setNativeRange",e,n,s,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||r||e!==c.startContainer||n!==c.startOffset||s!==c.endContainer||a!==c.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(a=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const d=document.createRange();d.setStart(e,n),d.setEnd(s,a),o.removeAllRanges(),o.addRange(d)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bt.sources.API;if(typeof n=="string"&&(s=n,n=!1),px.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bt.sources.USER;const n=this.lastRange,[s,a]=this.getRange();if(this.lastRange=s,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!Qr(n,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const r=[bt.events.SELECTION_CHANGE,Sc(this.lastRange),Sc(n),e];this.emitter.emit(bt.events.EDITOR_CHANGE,...r),e!==bt.sources.SILENT&&this.emitter.emit(...r)}}}function gx(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Ide=/^[ -~]*$/;class Ode{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=TS(e),a=new Nt;return Fde(s.ops.slice()).reduce((o,c)=>{const d=Gs.Op.length(c);let m=c.attributes||{},u=!1,p=!1;if(c.insert!=null){if(a.retain(d),typeof c.insert=="string"){const v=c.insert;p=!v.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(zs,o)[0]),this.scroll.insertAt(o,v);const[x,y]=this.scroll.line(o);let b=pl({},Bs(x));if(x instanceof Ni){const[w]=x.descendant(Oi,y);w&&(b=pl(b,Bs(w)))}m=Gs.AttributeMap.diff(b,m)||{}}else if(typeof c.insert=="object"){const v=Object.keys(c.insert)[0];if(v==null)return o;const x=this.scroll.query(v,St.INLINE)!=null;if(x)(n<=o||this.scroll.descendant(zs,o)[0])&&(p=!0);else if(o>0){const[y,b]=this.scroll.descendant(Oi,o-1);y instanceof ba?y.value()[b]!==`
`&&(u=!0):y instanceof Ms&&y.statics.scope===St.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,v,c.insert[v]),x){const[y]=this.scroll.descendant(Oi,o);if(y){const b=pl({},Bs(y));m=Gs.AttributeMap.diff(b,m)||{}}}}n+=d}else if(a.push(c),c.retain!==null&&typeof c.retain=="object"){const v=Object.keys(c.retain)[0];if(v==null)return o;this.scroll.updateEmbedAt(o,v,c.retain[v])}Object.keys(m).forEach(v=>{this.scroll.formatAt(o,d,v,m[v])});const h=u?1:0,g=p?1:0;return n+=h+g,a.retain(h),a.delete(g),o+d+h+g},0),a.reduce((o,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(o,c.delete),o):o+Gs.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Nt().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(r=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(r,s[r])})}),this.scroll.optimize();const a=new Nt().retain(e).retain(n,Sc(s));return this.update(a)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(r=>{this.scroll.formatAt(e,n,r,s[r])});const a=new Nt().retain(e).retain(n,Sc(s));return this.update(a)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Nt)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=[];n===0?this.scroll.path(e).forEach(c=>{const[d]=c;d instanceof Ni?s.push(d):d instanceof Oi&&a.push(d)}):(s=this.scroll.lines(e,n),a=this.scroll.descendants(Oi,e,n));const[r,o]=[s,a].map(c=>{const d=c.shift();if(d==null)return{};let m=Bs(d);for(;Object.keys(m).length>0;){const u=c.shift();if(u==null)return m;m=Lde(Bs(u),m)}return m});return{...r,...o}}getHTML(e,n){const[s,a]=this.scroll.line(e);if(s){const r=s.length();return s.length()>=a+n&&!(a===0&&n===r)?Fm(s,a,n,!0):Fm(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=TS(n),a=new Nt().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(a)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new Nt().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(a=>{this.scroll.formatAt(e,n.length,a,s[a])}),this.update(new Nt().retain(e).insert(n,Sc(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ni.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Na}removeFormat(e,n){const s=this.getText(e,n),[a,r]=this.scroll.line(e+n);let o=0,c=new Nt;a!=null&&(o=a.length()-r,c=a.delta().slice(r,r+o-1).insert(`
`));const m=this.getContents(e,n+o).diff(new Nt().insert(s).concat(c)),u=new Nt().retain(e).concat(m);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(Ide)&&this.scroll.find(n[0].target)){const r=this.scroll.find(n[0].target),o=Bs(r),c=r.offset(this.scroll),d=n[0].oldValue.replace(da.CONTENTS,""),m=new Nt().insert(d),u=new Nt().insert(r.value()),p=s&&{oldRange:AS(s.oldRange,-c),newRange:AS(s.newRange,-c)};e=new Nt().retain(c).concat(m.diff(u,p)).reduce((g,v)=>v.insert?g.insert(v.insert,o):g.push(v),new Nt),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!Qr(a.compose(e),this.delta))&&(e=a.diff(this.delta,s));return e}}function lc(t,e,n){if(t.length===0){const[g]=fx(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${lc([],e-1,n)}`}const[{child:s,offset:a,length:r,indent:o,type:c},...d]=t,[m,u]=fx(c);if(o>e)return n.push(c),o===e+1?`<${m}><li${u}>${Fm(s,a,r)}${lc(d,o,n)}`:`<${m}><li>${lc(t,e+1,n)}`;const p=n[n.length-1];if(o===e&&c===p)return`</li><li${u}>${Fm(s,a,r)}${lc(d,o,n)}`;const[h]=fx(n.pop());return`</li></${h}>${lc(t,e-1,n)}`}function Fm(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof ba)return bf(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof fa){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,n,(u,p,h)=>{const g="formats"in u&&typeof u.formats=="function"?u.formats():{};m.push({child:u,offset:p,length:h,indent:g.indent||0,type:g.list})}),lc(m,-1,[])}const a=[];if(t.children.forEachAt(e,n,(m,u,p)=>{a.push(Fm(m,u,p))}),s||t.statics.blotName==="list")return a.join("");const{outerHTML:r,innerHTML:o}=t.domNode,[c,d]=r.split(`>${o}<`);return c==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${d}`:`${c}>${a.join("")}<${d}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Lde(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const a=e[s];return a===t[s]?n[s]=a:Array.isArray(a)?a.indexOf(t[s])<0?n[s]=a.concat([t[s]]):n[s]=a:n[s]=[a,t[s]],n},{})}function fx(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function TS(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new Nt)}function AS(t,e){let{index:n,length:s}=t;return new bo(n+e,s)}function Fde(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((a,r)=>{r&&e.push({insert:`
`,attributes:n.attributes}),a&&e.push({insert:a,attributes:n.attributes})}):e.push(n)}),e}class ir{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const kh="\uFEFF";class Zk extends Ms{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(kh),this.rightGuard=document.createTextNode(kh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const a=e.data.split(kh).join("");if(e===this.leftGuard)if(this.prev instanceof ba){const r=this.prev.length();this.prev.insertAt(r,a),n={startNode:this.prev.domNode,startOffset:r+a.length}}else s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof ba?(this.next.insertAt(0,a),n={startNode:this.next.domNode,startOffset:a.length}):(s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:a.length}));return e.data=kh,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const a=this.restore(s.target);a&&(n.range=a)}})}}class $de{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Zk)&&(this.emitter.emit(bt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(bt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(bt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(bt.events.COMPOSITION_END,e),this.isComposing=!1}}class hd{static DEFAULTS={modules:{}};static themes={default:hd};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const Bde=t=>t.parentElement||t.getRootNode().host||null,qde=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},jh=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},DS=(t,e,n,s,a,r)=>t<n&&e>s?0:t<n?-(n-t+a):e>s?e-t>s-n?t+a-n:e-s+r:0,Hde=(t,e)=>{const n=t.ownerDocument;let s=e,a=t;for(;a;){const r=a===n.body,o=r?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:qde(a),c=getComputedStyle(a),d=DS(s.left,s.right,o.left,o.right,jh(c.scrollPaddingLeft),jh(c.scrollPaddingRight)),m=DS(s.top,s.bottom,o.top,o.bottom,jh(c.scrollPaddingTop),jh(c.scrollPaddingBottom));if(d||m)if(r)n.defaultView?.scrollBy(d,m);else{const{scrollLeft:u,scrollTop:p}=a;m&&(a.scrollTop+=m),d&&(a.scrollLeft+=d);const h=a.scrollLeft-u,g=a.scrollTop-p;s={left:s.left-h,top:s.top-g,right:s.right-h,bottom:s.bottom-g}}a=r||c.position==="fixed"?null:Bde(a)}},zde=100,Vde=["block","break","cursor","inline","scroll","text"],Ude=(t,e,n)=>{const s=new Kc;return Vde.forEach(a=>{const r=e.query(a);r&&s.register(r)}),t.forEach(a=>{let r=e.query(a);r||n.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;r;)if(s.register(r),r="blotName"in r?r.requiredContainer??null:null,o+=1,o>zde){n.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),s},Ec=Vr("quill"),Nh=new Kc;fa.uiClass="ql-ui";class Ze{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Nh,theme:"default"};static events=bt.events;static sources=bt.sources;static version="2.0.3";static imports={delta:Nt,parchment:Nde,"core/module":ir,"core/theme":hd};static debug(e){e===!0&&(e="log"),Vr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ib.get(e)||Nh.find(e,n)}static import(e){return this.imports[e]==null&&Ec.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(a=>{this.register(a,e[a],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&Ec.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Nh.register(n),typeof n.register=="function"&&n.register(Nh)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Wde(e,n),this.container=this.options.container,this.container==null){Ec.error("Invalid Quill container",e);return}this.options.debug&&Ze.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ib.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new bt;const a=Qk.blotName,r=this.options.registry.query(a);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ode(this.scroll),this.selection=new Mde(this.scroll,this.emitter),this.composition=new $de(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(bt.events.EDITOR_CHANGE,o=>{o===bt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(bt.events.SCROLL_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;oa.call(this,()=>this.editor.update(null,c,u),o)}),this.emitter.on(bt.events.SCROLL_EMBED_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;oa.call(this,()=>{const p=new Nt().retain(o.offset(this)).retain({[o.statics.blotName]:c});return this.editor.update(p,[],u)},Ze.sources.USER)}),s){const o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=dr(e,n,s),oa.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bt.sources.API;return oa.call(this,()=>{const a=this.getSelection(!0);let r=new Nt;if(a==null)return r;if(this.scroll.query(e,St.BLOCK))r=this.editor.formatLine(a.index,a.length,{[e]:n});else{if(a.length===0)return this.selection.format(e,n),r;r=this.editor.formatText(a.index,a.length,{[e]:n})}return this.setSelection(a,bt.sources.SILENT),r},s)}formatLine(e,n,s,a,r){let o;return[e,n,o,r]=dr(e,n,s,a,r),oa.call(this,()=>this.editor.formatLine(e,n,o),r,e,0)}formatText(e,n,s,a,r){let o;return[e,n,o,r]=dr(e,n,s,a,r),oa.call(this,()=>this.editor.formatText(e,n,o),r,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const a=this.container.getBoundingClientRect();return{bottom:s.bottom-a.top,height:s.height,left:s.left-a.left,right:s.right-a.left,top:s.top-a.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=dr(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=dr(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=dr(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ze.sources.API;return oa.call(this,()=>this.editor.insertEmbed(e,n,s),a,e)}insertText(e,n,s,a,r){let o;return[e,,o,r]=dr(e,0,s,a,r),oa.call(this,()=>this.editor.insertText(e,n,o),r,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=dr(e,n,s),oa.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){Hde(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bt.sources.API;return oa.call(this,()=>{e=new Nt(e);const s=this.getLength(),a=this.editor.deleteText(0,s),r=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return a.compose(r).compose(o)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||Ze.sources.API):([e,n,,s]=dr(e,n,s),this.selection.setRange(new bo(Math.max(0,e),n),s),s!==bt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bt.sources.API;const s=new Nt().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bt.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bt.sources.API;return oa.call(this,()=>(e=new Nt(e),this.editor.applyDelta(e)),n,!0)}}function RS(t){return typeof t=="string"?document.querySelector(t):t}function vx(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,a]=n;return{...e,[s]:a===!0?{}:a}},{})}function PS(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function Wde(t,e){const n=RS(t);if(!n)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===Ze.DEFAULTS.theme?hd:Ze.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...o}=Ze.DEFAULTS,{modules:c,...d}=a.DEFAULTS;let m=vx(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const u=pl({},vx(r),vx(c),m),p={...o,...PS(d),...PS(e)};let h=e.registry;return h?e.formats&&Ec.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?Ude(e.formats,p.registry,Ec):p.registry,{...p,registry:h,container:n,theme:a,modules:Object.entries(u).reduce((g,v)=>{let[x,y]=v;if(!y)return g;const b=Ze.import(`modules/${x}`);return b==null?(Ec.error(`Cannot load ${x} module. Are you sure you registered it?`),g):{...g,[x]:pl({},b.DEFAULTS||{},y)}},{}),bounds:RS(p.bounds)}}function oa(t,e,n,s){if(!this.isEnabled()&&e===bt.sources.USER&&!this.allowReadOnlyEdits)return new Nt;let a=n==null?null:this.getSelection();const r=this.editor.delta,o=t();if(a!=null&&(n===!0&&(n=a.index),s==null?a=MS(a,o,e):s!==0&&(a=MS(a,n,s,e)),this.setSelection(a,bt.sources.SILENT)),o.length()>0){const c=[bt.events.TEXT_CHANGE,o,r,e];this.emitter.emit(bt.events.EDITOR_CHANGE,...c),e!==bt.sources.SILENT&&this.emitter.emit(...c)}return o}function dr(t,e,n,s,a){let r={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(a=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(a=s,s=n,n=e,e=0),typeof n=="object"?(r=n,a=s):typeof n=="string"&&(s!=null?r[n]=s:a=n),a=a||bt.sources.API,[t,e,r,a]}function MS(t,e,n,s){const a=typeof n=="number"?n:0;if(t==null)return null;let r,o;return e&&typeof e.transformPosition=="function"?[r,o]=[t.index,t.index+t.length].map(c=>e.transformPosition(c,s!==bt.sources.USER)):[r,o]=[t.index,t.index+t.length].map(c=>c<e||c===e&&s===bt.sources.USER?c:a>=0?c+a:Math.max(e,c+a)),new bo(r,o-r)}class Bo extends yf{}function IS(t){return t instanceof Ni||t instanceof zs}function OS(t){return typeof t.updateContent=="function"}class Kde extends Qk{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ni;static allowedChildren=[Ni,zs,Bo];constructor(e,n,s){let{emitter:a}=s;super(e,n),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",r=>this.handleDragStart(r))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(bt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(bt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(bt.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,a]=this.line(e),[r]=this.line(e+n);if(super.deleteAt(e,n),r!=null&&s!==r&&a>0){if(s instanceof zs||r instanceof zs){this.optimize();return}const o=r.children.head instanceof Na?null:r.children.head;s.moveChildren(r,o),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,St.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),s==null&&n.endsWith(`
`)?a.insertAt(0,n.slice(0,-1),s):a.insertAt(0,n,s)}else{const a=this.scroll.create(n,s);this.appendChild(a)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===St.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new Nt().insert(`
`))),a=s.pop();if(a==null)return;this.batchStart();const r=s.shift();if(r){const d=r.type==="block"&&(r.delta.length()===0||!this.descendant(zs,e)[0]&&e<this.length()),m=r.type==="block"?r.delta:new Nt().insert({[r.key]:r.value});xx(this,e,m);const u=r.type==="block"?1:0,p=e+m.length()+u;d&&this.insertAt(p-1,`
`);const h=Bs(this.line(e)[0]),g=Gs.AttributeMap.diff(h,r.attributes)||{};Object.keys(g).forEach(v=>{this.formatAt(p-1,1,v,g[v])}),e=p}let[o,c]=this.children.find(e);if(s.length&&(o&&(o=o.split(c),c=0),s.forEach(d=>{if(d.type==="block"){const m=this.createBlock(d.attributes,o||void 0);xx(m,0,d.delta)}else{const m=this.create(d.key,d.value);this.insertBefore(m,o||void 0),Object.keys(d.attributes).forEach(u=>{m.format(u,d.attributes[u])})}})),a.type==="block"&&a.delta.length()){const d=o?o.offset(o.scroll)+c:this.length();xx(this,d,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,a]=n;return s instanceof Oi?[s,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(IS,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(a,r,o)=>{let c=[],d=o;return a.children.forEachAt(r,o,(m,u,p)=>{IS(m)?c.push(m):m instanceof yf&&(c=c.concat(s(m,u,d))),d-=p}),c};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(bt.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=bt.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:a}=s;const r=this.find(a,!0);return r&&!OS(r)}),e.length>0&&this.emitter.emit(bt.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(bt.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[a]=this.descendant(r=>r instanceof zs,e);a&&a.statics.blotName===n&&OS(a)&&a.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new Nt;return e.forEach(a=>{const r=a?.insert;if(r)if(typeof r=="string"){const o=r.split(`
`);o.slice(0,-1).forEach(d=>{s.insert(d,a.attributes),n.push({type:"block",delta:s,attributes:a.attributes??{}}),s=new Nt});const c=o[o.length-1];c&&s.insert(c,a.attributes)}else{const o=Object.keys(r)[0];if(!o)return;this.query(o,St.INLINE)?s.push(a):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new Nt,n.push({type:"blockEmbed",key:o,value:r[o],attributes:a.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const a={};Object.entries(e).forEach(c=>{let[d,m]=c;this.query(d,St.BLOCK&St.BLOT)!=null?s=d:a[d]=m});const r=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(r,n||void 0);const o=r.length();return Object.entries(a).forEach(c=>{let[d,m]=c;r.formatAt(0,o,d,m)}),r}}function xx(t,e,n){n.reduce((s,a)=>{const r=Gs.Op.length(a);let o=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const c=a.insert;t.insertAt(s,c);const[d]=t.descendant(Oi,s),m=Bs(d);o=Gs.AttributeMap.diff(m,o)||{}}else if(typeof a.insert=="object"){const c=Object.keys(a.insert)[0];if(c==null)return s;if(t.insertAt(s,c,a.insert[c]),t.scroll.query(c,St.INLINE)!=null){const[m]=t.descendant(Oi,s),u=Bs(m);o=Gs.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(c=>{t.formatAt(s,r,c,o[c])}),s+r},e)}const Xk={scope:St.BLOCK,whitelist:["right","center","justify"]},Gde=new Qa("align","align",Xk),FM=new ja("align","ql-align",Xk),$M=new Al("align","text-align",Xk);class BM extends Al{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):n}}const Yde=new ja("color","ql-color",{scope:St.INLINE}),Jk=new BM("color","color",{scope:St.INLINE}),Qde=new ja("background","ql-bg",{scope:St.INLINE}),ej=new BM("background","background-color",{scope:St.INLINE});class qo extends Bo{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${bf(this.code(e,n))}
</pre>`}}class Zi extends Ni{static TAB="  ";static register(){Ze.register(qo)}}class tj extends Wi{}tj.blotName="code";tj.tagName="CODE";Zi.blotName="code-block";Zi.className="ql-code-block";Zi.tagName="DIV";qo.blotName="code-block-container";qo.className="ql-code-block-container";qo.tagName="DIV";qo.allowedChildren=[Zi];Zi.allowedChildren=[ba,Na,da];Zi.requiredContainer=qo;const nj={scope:St.BLOCK,whitelist:["rtl"]},qM=new Qa("direction","dir",nj),HM=new ja("direction","ql-direction",nj),zM=new Al("direction","direction",nj),VM={scope:St.INLINE,whitelist:["serif","monospace"]},UM=new ja("font","ql-font",VM);class Zde extends Al{value(e){return super.value(e).replace(/["']/g,"")}}const WM=new Zde("font","font-family",VM),KM=new ja("size","ql-size",{scope:St.INLINE,whitelist:["small","large","huge"]}),GM=new Al("size","font-size",{scope:St.INLINE,whitelist:["10px","18px","32px"]}),Xde=Vr("quill:keyboard"),Jde=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class wf extends ir{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=tme(e);if(a==null){Xde.warn("Attempted to add invalid keyboard binding",a);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(a.key)?a.key:[a.key]).forEach(o=>{const c={...a,key:o,...n,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>wf.match(e,b));if(a.length===0)return;const r=Ze.find(e.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[c,d]=this.quill.getLine(o.index),[m,u]=this.quill.getLeaf(o.index),[p,h]=o.length===0?[m,u]:this.quill.getLeaf(o.index+o.length),g=m instanceof dg?m.value().slice(0,u):"",v=p instanceof dg?p.value().slice(h):"",x={collapsed:o.length===0,empty:o.length===0&&c.length()<=1,format:this.quill.getFormat(o),line:c,offset:d,prefix:g,suffix:v,event:e};a.some(b=>{if(b.collapsed!=null&&b.collapsed!==x.collapsed||b.empty!=null&&b.empty!==x.empty||b.offset!=null&&b.offset!==x.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(w=>x.format[w]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(w=>b.format[w]===!0?x.format[w]!=null:b.format[w]===!1?x.format[w]==null:Qr(b.format[w],x.format[w])))return!1;return b.prefix!=null&&!b.prefix.test(x.prefix)||b.suffix!=null&&!b.suffix.test(x.suffix)?!1:b.handler.call(this,o,x,b)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[r]=this.quill.getLine(e.index);let o=new Nt().retain(e.index-s).delete(s);if(n.offset===0){const[c]=this.quill.getLine(e.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const m=r.formats(),u=this.quill.getFormat(e.index-1,1);if(a=Gs.AttributeMap.diff(m,u)||{},Object.keys(a).length>0){const p=new Nt().retain(e.index+r.length()-2).retain(1,a);o=o.compose(p)}}}this.quill.updateContents(o,Ze.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let a={};const[r]=this.quill.getLine(e.index);let o=new Nt().retain(e.index).delete(s);if(n.offset>=r.length()-1){const[c]=this.quill.getLine(e.index+1);if(c){const d=r.formats(),m=this.quill.getFormat(e.index,1);a=Gs.AttributeMap.diff(d,m)||{},Object.keys(a).length>0&&(o=o.retain(c.length()-1).retain(1,a))}}this.quill.updateContents(o,Ze.sources.USER),this.quill.focus()}handleDeleteRange(e){ij({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((r,o)=>(this.quill.scroll.query(o,St.BLOCK)&&!Array.isArray(n.format[o])&&(r[o]=n.format[o]),r),{}),a=new Nt().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(a,Ze.sources.USER),this.quill.setSelection(e.index+1,Ze.sources.SILENT),this.quill.focus()}}const eme={bindings:{bold:yx("bold"),italic:yx("italic"),underline:yx("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Ze.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Ze.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Ze.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Ze.sources.USER)}},"indent code-block":LS(!0),"outdent code-block":LS(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Ze.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Nt().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,Ze.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Ze.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Ze.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Ze.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},a=new Nt().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,Ze.sources.USER),this.quill.setSelection(t.index+1,Ze.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),a=new Nt().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,Ze.sources.USER),this.quill.setSelection(t.index+1,Ze.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,a,r]=e.getTable(t),o=nme(n,s,a,r);if(o==null)return;let c=n.offset();if(o<0){const d=new Nt().retain(c).insert(`
`);this.quill.updateContents(d,Ze.sources.USER),this.quill.setSelection(t.index+1,t.length,Ze.sources.SILENT)}else if(o>0){c+=n.length();const d=new Nt().retain(c).insert(`
`);this.quill.updateContents(d,Ze.sources.USER),this.quill.setSelection(c,Ze.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,a=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(a-1,Ze.sources.USER):this.quill.setSelection(a+s.length(),Ze.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,a]=this.quill.getLine(t.index);if(a>n)return!0;let r;switch(e.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}this.quill.insertText(t.index," ",Ze.sources.USER),this.quill.history.cutoff();const o=new Nt().retain(t.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:r});return this.quill.updateContents(o,Ze.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Ze.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,s-=1,s<=0){const r=new Nt().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,Ze.sources.USER),this.quill.setSelection(t.index-1,Ze.sources.SILENT),!1}return!0}},"embed left":Ch("ArrowLeft",!1),"embed left shift":Ch("ArrowLeft",!0),"embed right":Ch("ArrowRight",!1),"embed right shift":Ch("ArrowRight",!0),"table down":FS(!1),"table up":FS(!0)}};wf.DEFAULTS=eme;function LS(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const a=this.quill.scroll.query("code-block"),{TAB:r}=a;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,r,Ze.sources.USER),this.quill.setSelection(e.index+r.length,Ze.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:d}=e;o.forEach((m,u)=>{t?(m.insertAt(0,r),u===0?c+=r.length:d+=r.length):m.domNode.textContent.startsWith(r)&&(m.deleteAt(0,r.length),u===0?c-=r.length:d-=r.length)}),this.quill.update(Ze.sources.USER),this.quill.setSelection(c,d,Ze.sources.SILENT)}}}function Ch(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:a}=s;t==="ArrowRight"&&(a+=s.length+1);const[r]=this.quill.getLeaf(a);return r instanceof Ms?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,Ze.sources.USER):this.quill.setSelection(s.index-1,Ze.sources.USER):e?this.quill.setSelection(s.index,s.length+1,Ze.sources.USER):this.quill.setSelection(s.index+s.length+1,Ze.sources.USER),!1):!0}}}function yx(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Ze.sources.USER)}}}function FS(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",a=n.line,r=a.parent[s];if(r!=null){if(r.statics.blotName==="table-row"){let o=r.children.head,c=a;for(;c.prev!=null;)c=c.prev,o=o.next;const d=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(d,0,Ze.sources.USER)}}else{const o=a.table()[s];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Ze.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Ze.sources.USER))}return!1}}}function tme(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Sc(t);else return null;return t.shortKey&&(t[Jde]=t.shortKey,delete t.shortKey),t}function ij(t){let{quill:e,range:n}=t;const s=e.getLines(n);let a={};if(s.length>1){const r=s[0].formats(),o=s[s.length-1].formats();a=Gs.AttributeMap.diff(o,r)||{}}e.deleteText(n,Ze.sources.USER),Object.keys(a).length>0&&e.formatLine(n.index,1,a,Ze.sources.USER),e.setSelection(n.index,Ze.sources.SILENT)}function nme(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const ime=/font-weight:\s*normal/,sme=["P","OL","UL"],$S=t=>t&&sme.includes(t.tagName),ame=t=>{Array.from(t.querySelectorAll("br")).filter(e=>$S(e.previousElementSibling)&&$S(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},rme=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(ime)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function lme(t){t.querySelector('[id^="docs-internal-guid-"]')&&(rme(t),ame(t))}const ome=/\bmso-list:[^;]*ignore/i,cme=/\bmso-list:[^;]*\bl(\d+)/i,dme=/\bmso-list:[^;]*\blevel(\d+)/i,mme=(t,e)=>{const n=t.getAttribute("style"),s=n?.match(cme);if(!s)return null;const a=Number(s[1]),r=n?.match(dme),o=r?Number(r[1]):1,c=new RegExp(`@list l${a}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),d=e.match(c),m=d&&d[1]==="bullet"?"bullet":"ordered";return{id:a,indent:o,type:m,element:t}},ume=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(o=>{(o.getAttribute("style")||"").match(ome)?n.push(o):s.push(o)}),n.forEach(o=>o.parentNode?.removeChild(o));const a=t.documentElement.innerHTML,r=s.map(o=>mme(o,a)).filter(o=>o);for(;r.length;){const o=[];let c=r.shift();for(;c;)o.push(c),c=r.length&&r[0]?.element===c.element.nextElementSibling&&r[0].id===c.id?r.shift():null;const d=document.createElement("ul");o.forEach(p=>{const h=document.createElement("li");h.setAttribute("data-list",p.type),p.indent>1&&h.setAttribute("class",`ql-indent-${p.indent-1}`),h.innerHTML=p.element.innerHTML,d.appendChild(h)});const m=o[0]?.element,{parentNode:u}=m??{};m&&u?.replaceChild(d,m),o.slice(1).forEach(p=>{let{element:h}=p;u?.removeChild(h)})}};function hme(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&ume(t)}const pme=[hme,lme],gme=t=>{t.documentElement&&pme.forEach(e=>{e(t)})},fme=Vr("quill:clipboard"),vme=[[Node.TEXT_NODE,Ame],[Node.TEXT_NODE,qS],["br",jme],[Node.ELEMENT_NODE,qS],[Node.ELEMENT_NODE,kme],[Node.ELEMENT_NODE,wme],[Node.ELEMENT_NODE,Eme],["li",Sme],["ol, ul",_me],["pre",Nme],["tr",Tme],["b",bx("bold")],["i",bx("italic")],["strike",bx("strike")],["style",Cme]],xme=[Gde,qM].reduce((t,e)=>(t[e.keyName]=e,t),{}),BS=[$M,ej,Jk,zM,WM,GM].reduce((t,e)=>(t[e.keyName]=e,t),{});class yme extends ir{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],vme.concat(this.options.matchers??[]).forEach(s=>{let[a,r]=s;this.addMatcher(a,r)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Zi.blotName])return new Nt().insert(s||"",{[Zi.blotName]:a[Zi.blotName]});if(!n)return new Nt().insert(s||"",a);const r=this.convertHTML(n);return fu(r,`
`)&&(r.ops[r.ops.length-1].attributes==null||a.table)?r.compose(new Nt().retain(r.length()-1).delete(1)):r}normalizeHTML(e){gme(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,a=new WeakMap,[r,o]=this.prepareMatching(s,a);return sj(this.quill.scroll,s,r,o,a)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ze.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,n),this.quill.setSelection(0,Ze.sources.SILENT)}else{const a=this.convert({html:n,text:""});this.quill.updateContents(new Nt().retain(e).concat(a),s),this.quill.setSelection(e+a.length(),Ze.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:a,text:r}=this.onCopy(s,n);e.clipboardData?.setData("text/plain",r),e.clipboardData?.setData("text/html",a),n&&ij({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!s&&!a){const o=e.clipboardData?.getData("text/uri-list");o&&(a=this.normalizeURIList(o))}const r=Array.from(e.clipboardData?.files||[]);if(!s&&r.length>0){this.quill.uploader.upload(n,r);return}if(s&&r.length>0){const o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,r);return}}this.onPaste(n,{html:s,text:a})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:a}=n;const r=this.quill.getFormat(e.index),o=this.convert({text:s,html:a},r);fme.log("onPaste",o,{text:s,html:a});const c=new Nt().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(c,Ze.sources.USER),this.quill.setSelection(c.length()-e.length,Ze.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],a=[];return this.matchers.forEach(r=>{const[o,c]=r;switch(o){case Node.TEXT_NODE:a.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(e.querySelectorAll(o)).forEach(d=>{n.has(d)?n.get(d)?.push(c):n.set(d,[c])});break}}),[s,a]}}function Ho(t,e,n,s){return s.query(e)?t.reduce((a,r)=>{if(!r.insert)return a;if(r.attributes&&r.attributes[e])return a.push(r);const o=n?{[e]:n}:{};return a.insert(r.insert,{...o,...r.attributes})},new Nt):t}function fu(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const a=t.ops[s];if(typeof a.insert!="string")break;n=a.insert+n}return n.slice(-1*e.length)===e}function cl(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ms?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function bme(t,e){return t.previousElementSibling&&t.nextElementSibling&&!cl(t.previousElementSibling,e)&&!cl(t.nextElementSibling,e)}const Sh=new WeakMap;function YM(t){return t==null?!1:(Sh.has(t)||(t.tagName==="PRE"?Sh.set(t,!0):Sh.set(t,YM(t.parentNode))),Sh.get(t))}function sj(t,e,n,s,a){return e.nodeType===e.TEXT_NODE?s.reduce((r,o)=>o(e,r,t),new Nt):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((r,o)=>{let c=sj(t,o,n,s,a);return o.nodeType===e.ELEMENT_NODE&&(c=n.reduce((d,m)=>m(o,d,t),c),c=(a.get(o)||[]).reduce((d,m)=>m(o,d,t),c)),r.concat(c)},new Nt):new Nt}function bx(t){return(e,n,s)=>Ho(n,t,!0,s)}function wme(t,e,n){const s=Qa.keys(t),a=ja.keys(t),r=Al.keys(t),o={};return s.concat(a).concat(r).forEach(c=>{let d=n.query(c,St.ATTRIBUTE);d!=null&&(o[d.attrName]=d.value(t),o[d.attrName])||(d=xme[c],d!=null&&(d.attrName===c||d.keyName===c)&&(o[d.attrName]=d.value(t)||void 0),d=BS[c],d!=null&&(d.attrName===c||d.keyName===c)&&(d=BS[c],o[d.attrName]=d.value(t)||void 0))}),Object.entries(o).reduce((c,d)=>{let[m,u]=d;return Ho(c,m,u,n)},e)}function kme(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Ms){const a={},r=s.value(t);if(r!=null)return a[s.blotName]=r,new Nt().insert(a,s.formats(t,n))}else if(s.prototype instanceof Lm&&!fu(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Ho(e,s.blotName,s.formats(t,n),n);return e}function jme(t,e){return fu(e,`
`)||e.insert(`
`),e}function Nme(t,e,n){const s=n.query("code-block"),a=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return Ho(e,"code-block",a,n)}function Cme(){return new Nt}function Sme(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!fu(e,`
`))return e;let a=-1,r=t.parentNode;for(;r!=null;)["OL","UL"].includes(r.tagName)&&(a+=1),r=r.parentNode;return a<=0?e:e.reduce((o,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?o.push(c):o.insert(c.insert,{indent:a,...c.attributes||{}}):o,new Nt)}function _me(t,e,n){const s=t;let a=s.tagName==="OL"?"ordered":"bullet";const r=s.getAttribute("data-checked");return r&&(a=r==="true"?"checked":"unchecked"),Ho(e,"list",a,n)}function qS(t,e,n){if(!fu(e,`
`)){if(cl(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(cl(s,n))return e.insert(`
`);const a=n.query(s);if(a&&a.prototype instanceof zs)return e.insert(`
`);s=s.firstChild}}}return e}function Eme(t,e,n){const s={},a=t.style||{};return a.fontStyle==="italic"&&(s.italic=!0),a.textDecoration==="underline"&&(s.underline=!0),a.textDecoration==="line-through"&&(s.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((r,o)=>{let[c,d]=o;return Ho(r,c,d,n)},e),parseFloat(a.textIndent||0)>0?new Nt().insert("	").concat(e):e}function Tme(t,e,n){const s=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(s!=null){const r=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return Ho(e,"table",r,n)}return e}function Ame(t,e,n){let s=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!YM(t)){if(s.trim().length===0&&s.includes(`
`)&&!bme(t,n))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&cl(t.parentElement,n)||t.previousSibling instanceof Element&&cl(t.previousSibling,n))&&(s=s.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&cl(t.parentElement,n)||t.nextSibling instanceof Element&&cl(t.nextSibling,n))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class Dme extends ir{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(Ze.events.EDITOR_CHANGE,(s,a,r,o)=>{s===Ze.events.SELECTION_CHANGE?a&&o!==Ze.sources.SILENT&&(this.currentRange=a):s===Ze.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===Ze.sources.USER?this.record(a,r):this.transform(a)),this.currentRange=rb(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const a=this.quill.getContents(),r=s.delta.invert(a);this.stack[n].push({delta:r,range:rb(s.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,Ze.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),a=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),a=o.range)}else this.lastRecorded=r;s.length()!==0&&(this.stack.undo.push({delta:s,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){HS(this.stack.undo,e),HS(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Ze.sources.USER);else{const n=Pme(this.quill.scroll,e.delta);this.quill.setSelection(n,Ze.sources.USER)}}}function HS(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const a=t[s];t[s]={delta:n.transform(a.delta,!0),range:a.range&&rb(a.range,n)},n=a.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function Rme(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,St.BLOCK)!=null):!1}function Pme(t,e){const n=e.reduce((a,r)=>a+(r.delete||0),0);let s=e.length()-n;return Rme(t,e)&&(s-=1),s}function rb(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class QM extends ir{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{s.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);a=document.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)}const r=a&&e.selection.normalizeNative(a);if(r){const o=e.selection.normalizedToRange(r);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&s.push(a)}),s.length>0&&this.options.handler.call(this,e,s)}}QM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(a=>{const r=new FileReader;r.onload=()=>{a(r.result)},r.readAsDataURL(s)}));Promise.all(n).then(s=>{const a=s.reduce((r,o)=>r.insert({image:o}),new Nt().retain(t.index).delete(t.length));this.quill.updateContents(a,bt.sources.USER),this.quill.setSelection(t.index+s.length,bt.sources.SILENT)})}};const Mme=["insertText","insertReplacementText"];class Ime extends ir{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(Ze.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ij({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Nt().retain(e.index).insert(n,s),Ze.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,Ze.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Mme.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=Ome(e);if(s==null)return;const a=this.quill.selection.normalizeNative(n),r=a?this.quill.selection.normalizedToRange(a):null;r&&this.replaceText(r,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Ome(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Lme=/Mac/i.test(navigator.platform),Fme=100,$me=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Lme&&t.key==="a"&&t.ctrlKey===!0);class Bme extends ir{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:a}=n;if(!(s instanceof fa)||!s.uiNode)return!0;const r=getComputedStyle(s.domNode).direction==="rtl";return r&&a.key!=="ArrowRight"||!r&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),Ze.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&$me(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Fme,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof fa)||!s.uiNode)return;const a=document.createRange();a.setStartAfter(s.uiNode),a.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(a)}}Ze.register({"blots/block":Ni,"blots/block/embed":zs,"blots/break":Na,"blots/container":Bo,"blots/cursor":da,"blots/embed":Zk,"blots/inline":Wi,"blots/scroll":Kde,"blots/text":ba,"modules/clipboard":yme,"modules/history":Dme,"modules/keyboard":wf,"modules/uploader":QM,"modules/input":Ime,"modules/uiNode":Bme});class qme extends ja{add(e,n){let s=0;if(n==="+1"||n==="-1"){const a=this.value(e)||0;s=n==="+1"?a+1:a-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const Hme=new qme("indent","ql-indent",{scope:St.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class zme extends Ni{static blotName="blockquote";static tagName="blockquote"}class Vme extends Ni{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class vu extends Bo{}vu.blotName="list-container";vu.tagName="OL";class xu extends Ni{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Ze.register(vu)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),a=r=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),r.preventDefault()):o==="unchecked"&&(this.format("list","checked"),r.preventDefault())};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}xu.blotName="list";xu.tagName="LI";vu.allowedChildren=[xu];xu.requiredContainer=vu;class aj extends Wi{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Ume extends aj{static blotName="italic";static tagName=["EM","I"]}class mg extends Wi{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return ZM(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function ZM(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class Wme extends Wi{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class Kme extends aj{static blotName="strike";static tagName=["S","STRIKE"]}class Gme extends Wi{static blotName="underline";static tagName="U"}class Yme extends Zk{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const zS=["alt","height","width"];let Qme=class extends Ms{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return zS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return ZM(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){zS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const VS=["height","width"];class Zme extends zs{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return VS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return mg.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){VS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Wd=new ja("code-token","hljs",{scope:St.INLINE});class Lr extends Wi{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Zi.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Wd.add(this.domNode,s)}format(e,n){e!==Lr.blotName?super.format(e,n):n?Wd.add(this.domNode,n):(Wd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Wd.value(this.domNode)||this.unwrap()}}Lr.blotName="code-token";Lr.className="ql-token";class qs extends Zi{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Lr.blotName,!1),super.replaceWith(e,n)}}class mm extends qo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===qs.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,a){s===qs.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,a)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,r=qs.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const o=this.children.reduce((d,m)=>d.concat(OM(m,!1)),new Nt),c=e(a,r);o.diff(c).reduce((d,m)=>{let{retain:u,attributes:p}=m;return u?(p&&Object.keys(p).forEach(h=>{[qs.blotName,Lr.blotName].includes(h)&&this.formatAt(d,u,h,p[h])}),d+u):d},0)}this.cachedText=a,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?qs.formats(s.domNode):"plain"}">
${bf(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=qs.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}mm.allowedChildren=[qs];qs.requiredContainer=mm;qs.allowedChildren=[Lr,da,ba,Na];const Xme=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class XM extends ir{static register(){Ze.register(Lr,!0),Ze.register(qs,!0),Ze.register(mm,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,a)=>{let{key:r}=a;return s[r]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Ze.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof mm))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:a,label:r}=s;const o=n.ownerDocument.createElement("option");o.textContent=r,o.setAttribute("value",a),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(qs.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=qs.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Ze.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Ze.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(mm):[e]).forEach(r=>{r.highlight(this.highlightBlot,n)}),this.quill.update(Ze.sources.SILENT),s!=null&&this.quill.setSelection(s,Ze.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return bf(e).split(`
`).reduce((a,r,o)=>(o!==0&&a.insert(`
`,{[Zi.blotName]:n}),a.insert(r)),new Nt);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Zi.className),s.innerHTML=Xme(this.options.hljs,n,e),sj(this.quill.scroll,s,[(a,r)=>{const o=Wd.value(a);return o?r.compose(new Nt().retain(r.length(),{[Lr.blotName]:o})):r}],[(a,r)=>a.data.split(`
`).reduce((o,c,d)=>(d!==0&&o.insert(`
`,{[Zi.blotName]:n}),o.insert(c)),r)],new WeakMap)}}XM.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class ua extends Ni{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",rj()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===ua.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class wo extends Bo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),a=n.next.formats();if(s.table!==a.table){const r=this.splitAfter(n);r&&r.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class gl extends Bo{static blotName="table-body";static tagName="TBODY"}class ug extends Bo{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(wo),n=e.reduce((s,a)=>Math.max(a.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let a;s.children.head!=null&&(a=ua.formats(s.children.head.domNode));const r=this.scroll.create(ua.blotName,a);s.appendChild(r),r.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(gl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e);a?.remove()})}insertColumn(e){const[n]=this.descendant(gl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e),r=ua.formats(s.children.head.domNode),o=this.scroll.create(ua.blotName,r);s.insertBefore(o,a)})}insertRow(e){const[n]=this.descendant(gl);if(n==null||n.children.head==null)return;const s=rj(),a=this.scroll.create(wo.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(ua.blotName,s);a.appendChild(o)});const r=n.children.at(e);n.insertBefore(a,r)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}ug.allowedChildren=[gl];gl.requiredContainer=ug;gl.allowedChildren=[wo];wo.requiredContainer=gl;wo.allowedChildren=[ua];ua.requiredContainer=wo;function rj(){return`row-${Math.random().toString(36).slice(2,6)}`}class Jme extends ir{static register(){Ze.register(ua),Ze.register(wo),Ze.register(gl),Ze.register(ug)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ug).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(Ze.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Ze.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(Ze.sources.USER),this.quill.setSelection(n,Ze.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==ua.blotName)return[null,null,null,-1];const a=n.parent;return[a.parent.parent,a,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,a,r]=this.getTable(n);if(r==null)return;const o=r.cellOffset();s.insertColumn(o+e),this.quill.update(Ze.sources.USER);let c=a.rowOffset();e===0&&(c+=1),this.quill.setSelection(n.index+c,n.length,Ze.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,a,r]=this.getTable(n);if(r==null)return;const o=a.rowOffset();s.insertRow(o+e),this.quill.update(Ze.sources.USER),e>0?this.quill.setSelection(n,Ze.sources.SILENT):this.quill.setSelection(n.index+a.children.length,n.length,Ze.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const a=new Array(e).fill(0).reduce(r=>{const o=new Array(n).fill(`
`).join("");return r.insert(o,{table:rj()})},new Nt().retain(s.index));this.quill.updateContents(a,Ze.sources.USER),this.quill.setSelection(s.index,Ze.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Ze.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(Ze.events.TEXT_CHANGE,(s,a,r)=>{r===Ze.sources.USER&&this.balanceTables()}),!0):!1)})}}const US=Vr("quill:toolbar");class lj extends ir{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),eue(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){US.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const a=this.options.handlers?.[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Ze.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){US.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,a=>{let r;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const c=e.options[e.selectedIndex];c.hasAttribute("selected")?r=!1:r=c.value||!1}else e.classList.contains("ql-active")?r=!1:r=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,r);else if(this.quill.scroll.query(n).prototype instanceof Ms){if(r=prompt(`Enter ${n}`),!r)return;this.quill.updateContents(new Nt().retain(o.index).delete(o.length).insert({[n]:r}),Ze.sources.USER)}else this.quill.format(n,r,Ze.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[a,r]=s;if(r.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[a]==null)o=r.querySelector("option[selected]");else if(!Array.isArray(n[a])){let c=n[a];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),o=r.querySelector(`option[value="${c}"]`)}o==null?(r.value="",r.selectedIndex=-1):o.selected=!0}else if(e==null)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const o=n[a],c=o===r.getAttribute("value")||o!=null&&o.toString()===r.getAttribute("value")||o==null&&!r.getAttribute("value");r.classList.toggle("ql-active",c),r.setAttribute("aria-pressed",c.toString())}else{const o=n[a]!=null;r.classList.toggle("ql-active",o),r.setAttribute("aria-pressed",o.toString())}})}}lj.DEFAULTS={};function WS(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function eue(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(a=>{if(typeof a=="string")WS(s,a);else{const r=Object.keys(a)[0],o=a[r];Array.isArray(o)?tue(s,r,o):WS(s,r,o)}}),t.appendChild(s)})}function tue(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(a=>{const r=document.createElement("option");a!==!1?r.setAttribute("value",String(a)):r.setAttribute("selected","selected"),s.appendChild(r)}),t.appendChild(s)}lj.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,St.INLINE)!=null&&this.quill.format(n,!1,Ze.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Ze.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Ze.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Ze.sources.USER),this.quill.format("direction",t,Ze.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let a=t==="+1"?1:-1;n.direction==="rtl"&&(a*=-1),this.quill.format("indent",s+a,Ze.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Ze.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,Ze.sources.USER):this.quill.format("list","unchecked",Ze.sources.USER):this.quill.format("list",t,Ze.sources.USER)}}};const nue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',iue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',sue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',aue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',rue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',lue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',oue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',cue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',KS='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',due='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',mue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',uue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',hue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',pue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',gue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',xue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',yue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',bue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',wue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',kue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',jue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Nue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Cue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Sue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',_ue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Eue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Tue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Aue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Due='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Rue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Pue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',$m={align:{"":nue,center:iue,right:sue,justify:aue},background:rue,blockquote:lue,bold:oue,clean:cue,code:KS,"code-block":KS,color:due,direction:{"":mue,rtl:uue},formula:hue,header:{1:pue,2:gue,3:fue,4:vue,5:xue,6:yue},italic:bue,image:wue,indent:{"+1":kue,"-1":jue},link:Nue,list:{bullet:Cue,check:Sue,ordered:_ue},script:{sub:Eue,super:Tue},strike:Aue,table:Due,underline:Rue,video:Pue},Mue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let GS=0;function YS(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class kf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),YS(this.label,"aria-expanded"),YS(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(n,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Mue,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${GS}`,GS+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class JM extends kf{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=a:s.style.fill=a)}}class eI extends kf{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Iue=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class tI{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Iue(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let o=0;if(r.right>a.right&&(o=a.right-r.right,this.root.style.left=`${n+o}px`),r.left<a.left&&(o=a.left-r.left,this.root.style.left=`${n+o}px`),r.bottom>a.bottom){const c=r.bottom-r.top,d=e.bottom-e.top+c;this.root.style.top=`${s-d}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Oue=[!1,"center","right","justify"],Lue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Fue=[!1,"serif","monospace"],$ue=["1","2","3",!1],Bue=["small",!1,"large","huge"];class yu extends hd{constructor(e,n){super(e,n);const s=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(r=>{r.container.contains(a.target)||r.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(r=>{if(r.startsWith("ql-")&&(r=r.slice(3),n[r]!=null))if(r==="direction")s.innerHTML=n[r][""]+n[r].rtl;else if(typeof n[r]=="string")s.innerHTML=n[r];else{const o=s.value||"";o!=null&&n[r][o]&&(s.innerHTML=n[r][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Pd(a,Oue),typeof n.align=="object"))return new eI(a,n.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const r=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Pd(a,Lue,r==="background"?"#ffffff":"#000000"),new JM(a,n[r])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Pd(a,Fue):a.classList.contains("ql-header")?Pd(a,$ue):a.classList.contains("ql-size")&&Pd(a,Bue)),new kf(a)});const s=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(bt.events.EDITOR_CHANGE,s)}}yu.DEFAULTS=pl({},hd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class nI extends tI{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,bt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,bt.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=que(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,bt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",bt.sources.USER),this.quill.setSelection(s+2,bt.sources.USER)}break}}this.textbox.value="",this.hide()}}function que(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Pd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const a=document.createElement("option");s===n?a.setAttribute("selected","selected"):a.setAttribute("value",String(s)),t.appendChild(a)})}const Hue=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class zue extends nI{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(bt.events.EDITOR_CHANGE,(s,a,r,o)=>{if(s===bt.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&o===bt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(a.index,a.length);if(c.length===1){const d=this.quill.getBounds(a);d!=null&&this.position(d)}else{const d=c[c.length-1],m=this.quill.getIndex(d),u=Math.min(d.length()-1,a.index+a.length-m),p=this.quill.getBounds(new bo(m,u));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(bt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}class iI extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Hue),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new zue(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m))}}iI.DEFAULTS=pl({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Ze.sources.USER)}}}}});const Vue=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Uue extends nI{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,bt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(bt.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===bt.sources.USER){const[a,r]=this.quill.scroll.descendant(mg,e.index);if(a!=null){this.linkRange=new bo(e.index-r,a.length());const o=mg.formats(a.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class sI extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Vue),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m),this.tooltip=new Uue(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}sI.DEFAULTS=pl({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,Ze.sources.USER)}}}}});Ze.register({"attributors/attribute/direction":qM,"attributors/class/align":FM,"attributors/class/background":Qde,"attributors/class/color":Yde,"attributors/class/direction":HM,"attributors/class/font":UM,"attributors/class/size":KM,"attributors/style/align":$M,"attributors/style/background":ej,"attributors/style/color":Jk,"attributors/style/direction":zM,"attributors/style/font":WM,"attributors/style/size":GM},!0);Ze.register({"formats/align":FM,"formats/direction":HM,"formats/indent":Hme,"formats/background":ej,"formats/color":Jk,"formats/font":UM,"formats/size":KM,"formats/blockquote":zme,"formats/code-block":Zi,"formats/header":Vme,"formats/list":xu,"formats/bold":aj,"formats/code":tj,"formats/italic":Ume,"formats/link":mg,"formats/script":Wme,"formats/strike":Kme,"formats/underline":Gme,"formats/formula":Yme,"formats/image":Qme,"formats/video":Zme,"modules/syntax":XM,"modules/table":Jme,"modules/toolbar":lj,"themes/bubble":iI,"themes/snow":sI,"ui/icons":$m,"ui/picker":kf,"ui/icon-picker":eI,"ui/color-picker":JM,"ui/tooltip":tI},!0);class zo extends We.Component{constructor(e){super(e),this.editingAreaRef=f.createRef(),this.containerRef=f.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,a,r,o)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,o,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(a,o,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(We.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(We.Children.count(e.children)&&We.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const s=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!Qr(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!Qr(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){const{delta:s,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const r=this.editor;r.setContents(s),QS(()=>this.setEditorSelection(r,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const s=new Ze(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?Qr(e.ops,n.ops):Qr(e,n)}setEditorContents(e,n){this.value=n;const s=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),QS(()=>this.setEditorSelection(e,s))}setEditorSelection(e,n){if(this.selection=n,n){const s=e.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:s}=this.state,a={key:s,ref:this.editingAreaRef};return We.Children.count(e)?We.cloneElement(We.Children.only(e),a):n?We.createElement("pre",{...a}):We.createElement("div",{...a})}render(){return We.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,s,a){if(!this.editor)return;const r=this.isDelta(this.value)?a.getContents():a.getHTML();r!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=r,this.props.onChange?.(e,n,s,a))}onEditorChangeSelection(e,n,s){if(!this.editor)return;const a=this.getEditorSelection(),r=!a&&e,o=a&&!e;Qr(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,n,s),r?this.props.onFocus?.(e,n,s):o&&this.props.onBlur?.(a,n,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}zo.displayName="React Quill";zo.Quill=Ze;zo.defaultProps={theme:"snow",modules:{},readOnly:!1};function QS(t){Promise.resolve().then(t)}const Wue=({isEditing:t})=>{const{id:e}=Yt(),n=mn(),[s,a]=f.useState(""),[r,o]=f.useState(""),[c,d]=f.useState([]),[m,u]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),{data:v,isLoading:x,error:y}=yn("settings","email-template",{id:e},{enabled:t&&!!e,select:N=>N?.status&&N.data?{status:N.status,message:N.message,data:{templatePost:N.data.templatePost||{},dynamicKeys:N.data.dynamic_keys||[]}}:N}),b=dn("settings","email-template");f.useEffect(()=>{if(v?.status&&v.data&&!p){const{templatePost:N,dynamicKeys:E}=v.data;o(N.post_title||""),a(N.post_content||""),h(!0),d(E.map(A=>A.replace(/[{}]/g,""))||[])}},[v,p]),f.useEffect(()=>{if(y){let N;typeof y=="string"?N=y:y?.response?.data?.message?N=y.response.data.message:y?.message?N=y.message:N=l("Failed to load template","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:N}).then(()=>n(-1))}},[y,n]);const w=N=>{p&&a(N)},k=async()=>{try{const N={ID:e,post_content:s,post_title:r};u(!0);const E=await b.mutateAsync(N);E.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:E.message||l("Failed to update template","kivicare-clinic-management-system")}):tt({title:l("Success","kivicare-clinic-management-system"),text:E.message||l("Template updated successfully","kivicare-clinic-management-system")}).then(()=>n("/setting/email-template"))}catch(N){console.error("Error updating template:",N),Me({title:l("Error","kivicare-clinic-management-system"),text:l("An error occurred while updating the template","kivicare-clinic-management-system")})}finally{u(!1)}},_=N=>{navigator.clipboard.writeText(`{{${N}}}`),ZR.fire({title:l("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},j={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},T=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return x&&!v?i.jsx(of,{}):i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Edit Email Template","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:()=>n(-1),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:m,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"emailSubject",className:"form-label h6",children:l("Email Subject","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"emailSubject",className:"form-control",placeholder:l("Email Subject","kivicare-clinic-management-system"),value:r,onChange:N=>o(N.target.value),disabled:m})]}),c.length>0&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:c.map(N=>i.jsx(Ue,{placement:"top",overlay:E=>i.jsx(it,{...E,children:l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>_(N),disabled:m,children:[N,i.jsx("i",{className:"ph ph-copy"})]})},N))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Email Content","kivicare-clinic-management-system")}),i.jsx(zo,{ref:g,theme:"snow",value:s,onChange:w,modules:j,formats:T,readOnly:m||x})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:k,disabled:m||x||!p,children:m?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})})]})},Kue=()=>{const t=mn(),[e,n]=f.useState(""),[s,a]=f.useState(""),[r,o]=f.useState(!1),c=dn("settings","email-template/test"),d=()=>{t("/setting/email-template")},m=async()=>{if(!e.trim()){Me({title:l("Error","kivicare-clinic-management-system"),text:l("Please enter an email address","kivicare-clinic-management-system")});return}if(!s.trim()){Me({title:l("Error","kivicare-clinic-management-system"),text:l("Please enter test content","kivicare-clinic-management-system")});return}try{o(!0);const u={email:e,content:s},p=await c.mutateAsync(u);if(p?.status===!0)tt({title:l("Success","kivicare-clinic-management-system"),text:p.message||l("Test email sent successfully","kivicare-clinic-management-system")}),n(""),a("");else throw new Error(p?.message||"Failed to send test email")}catch(u){console.error("Error sending test email:",u),Me({title:l("Error","kivicare-clinic-management-system"),text:u.message||l("Failed to send test email","kivicare-clinic-management-system")})}finally{o(!1)}};return i.jsx("div",{className:"tab-pane active opacity-1",children:i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Test Email","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:d,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:r,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"email",className:"form-control",placeholder:l("Enter email id","kivicare-clinic-management-system"),value:e,onChange:u=>n(u.target.value),required:!0,disabled:r})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:l('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system"),value:s,onChange:u=>a(u.target.value),required:!0,disabled:r})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,disabled:r,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,disabled:r,children:r?l("Sending...","kivicare-clinic-management-system"):l("Send Test Email","kivicare-clinic-management-system")})]})]})})},ZS=({show:t,onSave:e,onCancel:n,existingImageData:s=[],editData:a=null,title:r=null})=>{const{control:o,handleSubmit:c,setValue:d,reset:m,setError:u,clearErrors:p,formState:{errors:h}}=Jt({defaultValues:{name:"",url:"",imageId:""}}),g=f.useRef(null);f.useEffect(()=>{t&&a?(d("name",a.name||""),d("url",a.url||""),d("imageId",a.imageId||"")):t||(m(),p(),g.current&&g.current.clearImage())},[t,a,d,m,p]);const v=x=>{e(x)};return i.jsxs(rt,{show:t,onHide:n,centered:!0,children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:r||l("Upload New","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:n,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"name",control:o,rules:{required:l("Name is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsx("input",{...x,type:"text",className:`form-control ${h.name?"is-invalid":""}`,placeholder:l("Image name","kivicare-clinic-management-system")})}),h.name&&i.jsx("div",{className:"invalid-feedback d-block",children:h.name.message})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Upload File","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"url",control:o,rules:{required:l("Image is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsxs(i.Fragment,{children:[i.jsx(ef,{ref:g,id:a?`edit-image-upload-${a.id}`:"new-image-upload",name:a?`edit_image_${a.id}`:"new_image",defaultImage:a?.url,defaultImageId:a?.imageId,className:"mb-0",required:!0,onChange:(y,b)=>{if(s.some((k,_)=>a&&_===a.index?!1:k.imageId===b)){u("url",{type:"duplicate",message:l("This image is already uploaded","kivicare-clinic-management-system")}),d("url",a?.url||""),d("imageId",a?.imageId||"");return}p("url"),d("url",y.url||""),d("imageId",b||"")},errors:h.url?{[a?`edit_image_${a.id}`:"new_image"]:{message:h.url.message}}:{}}),h.url&&i.jsx("div",{className:"invalid-feedback d-block",children:h.url.message})]})})]})})]})}),i.jsxs(rt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary ms-2",onClick:c(v),children:l("Save","kivicare-clinic-management-system")})]})]})},Gue=()=>{const{isAddonActive:t}=mt(),e=t("bodyChart"),{data:n,isLoading:s,error:a}=ote({enabled:e}),r=f.useRef(!1),o=f.useRef(null),c=(W,ge=null)=>{if(r.current){let ee;switch(ge){case"add":ee=l("Image template added successfully","kivicare-clinic-management-system");break;case"delete":ee=l("Image template deleted successfully","kivicare-clinic-management-system");break;case"edit":ee=l("Image template updated successfully","kivicare-clinic-management-system");break;default:ee=l("Image template updated successfully","kivicare-clinic-management-system")}Ee.success(ee)}else tt({title:l("Success","kivicare-clinic-management-system"),text:W});r.current=!1,o.current=null},d=cte({onSuccess:()=>c(l("Configuration saved successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Me({title:l("Error","kivicare-clinic-management-system"),text:W.message||l("Failed to save configuration","kivicare-clinic-management-system")}),r.current=!1,o.current=null}}),m=dte({onSuccess:()=>c(l("Configuration updated successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Me({title:l("Error","kivicare-clinic-management-system"),text:W.message||l("Failed to update configuration","kivicare-clinic-management-system")}),r.current=!1,o.current=null}}),{control:u,handleSubmit:p,watch:h,setValue:g,reset:v,getValues:x,register:y,formState:{errors:b,isValid:w}}=Jt({defaultValues:{theme:"whiteTheme",menuBarPosition:"left",replaceOrNewAfterEditImage:"new",menu:[],defaultImageData:[],defaultImage:-1},mode:"onChange"}),{fields:k,append:_,remove:j}=kr({control:u,name:"defaultImageData"}),[T,N]=f.useState(!1),[E,A]=f.useState(null),[L,C]=f.useState(null),P=h();f.useEffect(()=>{n?.data&&v({theme:n.data.theme||"whiteTheme",menuBarPosition:n.data.menuBarPosition||"left",replaceOrNewAfterEditImage:n.data.replaceOrNewAfterEditImage||"new",menu:n.data.menu||[],defaultImageData:n.data.defaultImageData&&Array.isArray(n.data.defaultImageData)?n.data.defaultImageData.map((W,ge)=>({id:ge+1,name:W.name||"",url:W.url||"",imageId:W.imageId||""})):[],defaultImage:n.data.defaultImage})},[n,v]);const R=f.useMemo(()=>k.map((W,ge)=>({id:W.id,name:W.name||"",url:W.url||"",imageId:W.imageId||"",placeholder:W.name||l("Image name","kivicare-clinic-management-system"),defaultValue:W.name||"",radioId:`radioDefault${W.id}`,selected:P.defaultImage===(W.imageId||"")})),[k,P.defaultImage]),M=f.useMemo(()=>On(),[]);f.useRef(null);const O=async W=>{console.log(W);const ge=x("defaultImageData")||[],ee={...W,defaultImageData:ge};try{if(!ee.defaultImageData||ee.defaultImageData.length===0){const le={...ee,defaultImageData:[],defaultImage:-1};n?.data?await m.mutateAsync(le):await d.mutateAsync(le);return}if(ee.defaultImageData.some(le=>!le.name||le.name.trim()===""||!le.url&&!le.imageId)){Me({title:l("Validation Error","kivicare-clinic-management-system"),text:l("Please complete all required fields in the image templates","kivicare-clinic-management-system")});return}if(ee.defaultImageData.length>0&&(!ee.defaultImage||ee.defaultImage===-1||ee.defaultImage==="")){Me({title:l("Validation Error","kivicare-clinic-management-system"),text:l("Please select a default image from the image templates","kivicare-clinic-management-system")});return}if(!ee.defaultImageData.some(le=>le.imageId===ee.defaultImage)){Me({title:l("Validation Error","kivicare-clinic-management-system"),text:l("Selected default image is no longer available. Please select another default image.","kivicare-clinic-management-system")});return}const G={...ee,defaultImageData:ee.defaultImageData.map(le=>({id:le.id,name:le.name.trim(),url:le.url||"",imageId:le.imageId||""}))};n?.data?await m.mutateAsync(G):await d.mutateAsync(G)}catch(ie){console.error("Error saving configuration:",ie)}},q=f.useCallback(W=>{const ge=k[W];if(j(W),P.defaultImage===ge.imageId){const ee=k.filter((ie,ue)=>ue!==W);ee.length>0&&ee[0].imageId?g("defaultImage",ee[0].imageId):g("defaultImage",-1)}setTimeout(()=>{r.current=!0,o.current="delete",p(O)()},100)},[k,j,g,P.defaultImage,p,O]),U=W=>{const ge=k[W];A({...ge,index:W})},H=W=>{E&&(g(`defaultImageData.${E.index}.name`,W.name),g(`defaultImageData.${E.index}.url`,W.url),g(`defaultImageData.${E.index}.imageId`,W.imageId),A(null),setTimeout(()=>{r.current=!0,o.current="edit",p(O)()},100))},ae=f.useMemo(()=>[M.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:W=>i.jsx("span",{children:W.row.original.name})}),M.accessor("radio",{header:()=>l("Default","kivicare-clinic-management-system"),cell:W=>i.jsx(be,{name:"defaultImage",control:u,render:({field:ge})=>{const ee=W.row.original.imageId;return i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"defaultImage",id:W.row.original.radioId,value:ee,checked:ge.value===ee,disabled:!ee,onChange:()=>{ee&&ge.onChange(ee)}}),i.jsx("label",{className:"form-check-label",htmlFor:W.row.original.radioId,children:l("Default","kivicare-clinic-management-system")})]})}},`radio-${W.row.original.id}`)}),M.accessor("url",{header:()=>l("Image","kivicare-clinic-management-system"),cell:W=>i.jsx("div",{className:"d-flex align-items-center",children:W.row.original.url?i.jsx("img",{src:W.row.original.url,alt:W.row.original.name,className:"rounded",style:{width:"40px",height:"40px",objectFit:"cover"}}):i.jsx("div",{className:"bg-light rounded d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:i.jsx("i",{className:"ph ph-image text-muted"})})})}),M.accessor("action",{header:()=>l("Action","kivicare-clinic-management-system"),cell:W=>i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0 text-primary",onClick:()=>U(W.row.index),title:l("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple fs-5"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0 text-danger",onClick:()=>q(W.row.index),title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})})],[M,k.length,q,u]),V=$T({data:R,columns:ae,getCoreRowModel:FT(),autoResetPageIndex:!1,autoResetExpanded:!1,autoResetSorting:!1,autoResetFilters:!1,autoResetRowSelection:!1,autoResetColumnOrder:!1,autoResetColumnPinning:!1,autoResetColumnSizing:!1,autoResetColumnVisibility:!1,autoResetGlobalFilter:!1,autoResetGrouping:!1}),pe=()=>{N(!0)},oe=W=>{if((x("defaultImageData")||[]).some(le=>le.imageId===W.imageId)){Me({title:l("Error","kivicare-clinic-management-system"),text:l("This image is already used in another template","kivicare-clinic-management-system")});return}const ue={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:W.name,url:W.url,imageId:W.imageId};_(ue),N(!1);const G=x("defaultImage");(!G||G===-1||G==="")&&ue.imageId&&g("defaultImage",ue.imageId),setTimeout(()=>{r.current=!0,o.current="add",p(O)()},100)};if(s)return i.jsx(vP,{});if(a)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l("Error loading configuration:","kivicare-clinic-management-system")," ",a.message]});const ne=[{id:"theme-mode",label:l("Theme mode","kivicare-clinic-management-system"),required:!0,value:P.theme,options:[{value:"whiteTheme",label:l("Light","kivicare-clinic-management-system")},{value:"blackTheme",label:l("Dark","kivicare-clinic-management-system")}]},{id:"menu-position",label:l("Menu bar position","kivicare-clinic-management-system"),required:!0,value:P.menuBarPosition,options:[{value:"left",label:l("Left","kivicare-clinic-management-system")},{value:"right",label:l("Right","kivicare-clinic-management-system")},{value:"top",label:l("Top","kivicare-clinic-management-system")},{value:"bottom",label:l("Bottom","kivicare-clinic-management-system")}]},{id:"image-handling",label:l("Image Handling Preference (when image save after editing)","kivicare-clinic-management-system"),required:!0,value:P.replaceOrNewAfterEditImage,options:[{value:"new",label:l("Create New Image","kivicare-clinic-management-system")},{value:"replace",label:l("Replace Original Image","kivicare-clinic-management-system")}]},{id:"menu-type",label:l("Menu Type","kivicare-clinic-management-system"),required:!0,value:P.menu,options:[{value:"crop",label:l("Crop","kivicare-clinic-management-system")},{value:"flip",label:l("Flip","kivicare-clinic-management-system")},{value:"rotate",label:l("Rotate","kivicare-clinic-management-system")},{value:"draw",label:l("Draw","kivicare-clinic-management-system")},{value:"shape",label:l("Shape","kivicare-clinic-management-system")},{value:"icon",label:l("Icon","kivicare-clinic-management-system")},{value:"filter",label:l("Filter","kivicare-clinic-management-system")},{value:"text",label:l("Text","kivicare-clinic-management-system")},{value:"mask",label:l("Mask","kivicare-clinic-management-system")}],isMulti:!0}],se=({fieldConfig:W,control:ge,errors:ee,openMenuFieldId:ie,setOpenMenuFieldId:ue})=>{const G=W.isMulti?W.value?.map(ce=>({value:typeof ce=="object"?ce.id:ce,label:typeof ce=="object"?ce.label:W.options.find(Z=>Z.value===ce)?.label||ce}))||[]:W.options.find(ce=>ce.value===W.value)||null,re={"theme-mode":"theme","menu-position":"menuBarPosition","image-handling":"replaceOrNewAfterEditImage","menu-type":"menu"}[W.id],D=W.isMulti,I=D?ie===W.id:void 0;return i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:W.id,className:"form-label",children:[W.label," ",W.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:re,control:ge,rules:{required:W.required?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:ce})=>i.jsx(lt,{...ce,className:`react-select-box ${ee[re]?"is-invalid":""}`,classNamePrefix:"react-select",options:W.options,isSearchable:!1,isMulti:W.isMulti||!1,closeMenuOnSelect:!1,blurInputOnSelect:!1,value:G,menuIsOpen:I,onMenuOpen:()=>D&&ue(W.id),onMenuClose:()=>D&&ue(null),onChange:Z=>{let K;W.isMulti?K=Z?Z.map(B=>({id:B.value,label:B.label})):[]:K=Z?Z.value:"",ce.onChange(K),W.isMulti&&setTimeout(()=>ue(W.id),0)},id:W.id,styles:{menuPortal:Z=>({...Z,zIndex:9999})}})}),ee[re]&&i.jsx("div",{className:"invalid-feedback d-block",children:ee[re].message})]})})};return i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:`encounter-body-chart-setting${e?"":" p-4"}`,children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Encounter body chart Settings","kivicare-clinic-management-system"),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-encounter-body-chart-addon-24687/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!e&&i.jsx(ci,{title:l("Available For Encounter Body Chart Addon","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-encounter-body-chart-addon/51585503"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:p(O),children:[i.jsx("div",{className:"row gy-4 mb-5 pb-3",children:ne.map(W=>i.jsx(se,{fieldConfig:W,control:u,errors:b,openMenuFieldId:L,setOpenMenuFieldId:C},W.id))}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("label",{className:"form-label mb-0",children:[l("Image Template","kivicare-clinic-management-system"),i.jsx("div",{className:"text-muted small fw-normal",children:l("Add image templates for body chart","kivicare-clinic-management-system")})]}),i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:pe,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add New","kivicare-clinic-management-system")})]})]}),i.jsx(ZS,{show:T,onSave:oe,onCancel:()=>N(!1),existingImageData:x("defaultImageData")||[]}),i.jsx(ZS,{show:!!E,onSave:H,onCancel:()=>A(null),existingImageData:x("defaultImageData")||[],editData:E,title:l("Edit Image Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:V.getHeaderGroups().map(W=>i.jsx("tr",{children:W.headers.map(ge=>i.jsx("th",{children:jp(ge.column.columnDef.header,ge.getContext())},ge.id))},W.id))}),i.jsx("tbody",{children:V.getRowModel().rows.map(W=>i.jsx("tr",{children:W.getVisibleCells().map((ge,ee)=>i.jsxs("td",{children:[ee===0&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.name`),defaultValue:W.original.name}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.url`),defaultValue:W.original.url}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.imageId`),defaultValue:W.original.imageId})]}),jp(ge.column.columnDef.cell,ge.getContext())]},`cell-${W.original.id}-${ge.column.id}`))},`row-${W.original.id}`))})]})}),b.defaultImage&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),b.defaultImage.message]}),b.defaultImageData&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),Array.isArray(b.defaultImageData)?i.jsx("ul",{className:"mb-0",children:b.defaultImageData.map((W,ge)=>W&&i.jsxs("li",{children:[l("Row","kivicare-clinic-management-system")," ",ge+1,":",W.name?.message&&` ${W.name.message}`,W.url?.message&&` ${W.url.message}`]},ge))}):b.defaultImageData.message]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d.isLoading||m.isLoading,children:d.isLoading||m.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})})})]})})},Yue=()=>{const[t,e]=f.useState({ID:"",post_title:"",post_content:""}),{isAddonActive:n}=mt(),s=n("kiviPro"),{data:a,isLoading:r,error:o}=yn("settings","google-event-template",{},{enabled:s}),c=dn("settings","google-event-template"),[d,m]=f.useState(!1),{data:u}=Cn(),p=u?.data?.hideUtilityLinks;f.useEffect(()=>{if(!a?.data?.data)return;const x=a.data.data;e({ID:x.ID||"",post_title:x.post_title||"",post_content:x.post_content||""})},[a]);const h=x=>{e(y=>({...y,post_title:x.target.value}))},g=x=>{e(y=>({...y,post_content:x}))},v=async()=>{try{m(!0),(await c.mutateAsync(t)).status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings","kivicare-clinic-management-system")}):tt({title:l("Success","kivicare-clinic-management-system"),text:l("Settings saved successfully!","kivicare-clinic-management-system")}),m(!1)}catch(x){m(!1),console.error("Error submitting form:",x)}};if(o){let x;typeof o=="string"?x=o:o?.response?.data?.message?x=o.response.data.message:o?.message?x=o.message:x=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(x,"kivicare-clinic-management-system")})}return(r||d)&&s?i.jsx(yP,{}):i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-event-template-setting${s?"":" p-4"}`,children:[!s&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Google Event Template","kivicare-clinic-management-system"),p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/google-event-template/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!r&&!d&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:l("Google Event Template","kivicare-clinic-management-system")}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx("label",{htmlFor:"event-title",className:"form-label",children:l("Google Event Title","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:t?.post_title,onChange:h,disabled:d||r})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"event-description",className:"form-label h6",children:l("Google Event Description","kivicare-clinic-management-system")}),t?.ID&&i.jsx(zo,{theme:"snow",value:t?.post_content||"",onChange:g},t?.ID)]})]})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:v,disabled:d||r,children:l("Save","kivicare-clinic-management-system")})})]})]})})},Que=()=>{const[t,e]=f.useState(!1),{isAddonActive:n}=mt(),s=n("googlemeet"),{data:a,isLoading:r,error:o,refetch:c}=yn("settings","googlemeet",{},{enabled:s}),[d,m]=f.useState(""),u=dn("settings","googlemeet"),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,{control:g,handleSubmit:v,watch:x,reset:y,formState:{errors:b}}=Jt({defaultValues:{enableCal:!1,client_id:"",client_secret:"",app_name:""}}),w=x("enableCal"),k=[{id:"client_id",label:l("Google Meet Client ID","kivicare-clinic-management-system"),placeholder:"EXAMPLE-1234567890.apps.googleusercontent.com"},{id:"client_secret",label:l("Google Meet Client Secret","kivicare-clinic-management-system"),placeholder:"EXAMPLE-GOCSPX-ecA6KW3s9suV9ifVKET5FwqxzW"},{id:"app_name",label:l("App Name","kivicare-clinic-management-system"),placeholder:"My Google App Name"}];f.useEffect(()=>{!a?.status||!a?.data?.data||(m(a.data.data),!(!a?.data?.config?.data||Object.keys(a.data.config.data).length===0)&&y(N=>{const E=Object.fromEntries(Object.entries(a.data.config.data).filter(([A,L])=>L!=null&&L!==""));return{...N,...E,enableCal:E.enableCal==="Yes"}}))},[a,y]);const _=N=>{m(E=>({...E,post_title:N.target.value}))},j=N=>{m(E=>({...E,post_content:N}))},T=async N=>{try{e(!0);const A={google_meet_config:{...N,enableCal:N.enableCal?"Yes":"No"},google_meet_event_template:d};(await u.mutateAsync(A)).status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings","kivicare-clinic-management-system")}):(tt({title:l("Success","kivicare-clinic-management-system"),text:l("Settings saved successfully!","kivicare-clinic-management-system")}),c()),e(!1)}catch(E){e(!1),console.error("Error submitting form:",E)}};if(o){let N;typeof o=="string"?N=o:o?.response?.data?.message?N=o.response.data.message:o?.message?N=o.message:N=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(N,"kivicare-clinic-management-system")})}return s&&(r||t)?i.jsx(bP,{}):i.jsx("div",{className:"tab-pane active opacity-1 position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-meet-setting${s?"":" p-4"}`,children:[!s&&i.jsx(ci,{title:l("Available In GoogleMeet AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-google-meet-telemed-addon/35301137?s_rank=21"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Google Meet","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/getting-started-googlemeet/what-is-kivicare-google-meet-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!t||!r)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsx("div",{className:"card-body p-3",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx(be,{name:"enableCal",control:g,render:({field:N})=>i.jsx(sn,{label:l("Google Meet Configuration","kivicare-clinic-management-system"),checked:N.value,onChange:N.onChange,disabled:t||r,error:b?.enableCal})})})})})}),i.jsxs("form",{onSubmit:v(T),children:[w&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"row gy-4",children:[k.map(({id:N,label:E,placeholder:A})=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(be,{name:N,control:g,rules:{required:`${N} is required`},render:({field:L})=>i.jsx(Ht,{label:E,type:"text",className:"form-control",placeholder:A,value:L.value,required:!0,onChange:L.onChange,isDisable:t||r,error:b[N]})})})},N)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:a?.data?.redirection_url||"",readOnly:!0,disabled:t||r,placeholder:l("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{a?.data?.redirection_url&&(navigator.clipboard.writeText(a.data.redirection_url),tt({title:l("Copied!","kivicare-clinic-management-system"),text:l("Redirection URL copied to clipboard","kivicare-clinic-management-system")}))},disabled:!a?.data?.redirection_url||t||r,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),l("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})]}),i.jsxs("div",{className:"pt-4 mt-4 border-top",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Guide to setup Google Meet.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l("Step 1:","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/configuration-doc/global-google-meet-settings-admin/",target:"_blank",className:"font-size-14 heading-color",children:l("Please refer the following link for the setup.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l("Step 2:","kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 heading-color",children:l("Copy the Redirection URL above and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")})]})]})]}),i.jsxs("p",{className:"font-size-12 mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If you have already set up Google Calendar, you can use the same Client ID and Client Secret here.","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:l("Google Meet Event Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-group mb-4",children:i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:d.post_title,onChange:_,disabled:t||r})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"eventDescription",className:"form-label fw-semibold text-body",children:l("Google Event Description","kivicare-clinic-management-system")}),i.jsx("div",{className:"quill-editor-wrapper",children:i.jsx(zo,{theme:"snow",value:d.post_content,onChange:j})})]})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||r,children:l("Save","kivicare-clinic-management-system")})})]})]})]})})},Zue=()=>{const{isAddonActive:t,googleMeetIntegration:e}=mt();if(!t("googlemeet")||e!=="yes")return i.jsx(hg,{to:"/setting",replace:!0});const n=t("googlemeet"),[s,a]=f.useState(!1),[r,o]=f.useState(!1),{data:c,isLoading:d,error:m,refetch:u}=yn("settings","googlemeet/doctor-config",{},{enabled:n}),{refetch:p}=yn("settings","googlemeet/authorize",{},{enabled:!1}),{refetch:h}=yn("settings","googlemeet/disconnect",{},{enabled:!1});f.useEffect(()=>{const y=new URLSearchParams(window.location.search);y.get("google_meet_connected")==="1"&&(tt({title:l("Success","kivicare-clinic-management-system"),text:l("Google Meet connected successfully!","kivicare-clinic-management-system")}),y.delete("google_meet_connected"),window.history.replaceState({},document.title,window.location.pathname),u())},[u]);const g=async()=>{const{data:y}=await u();if(!(y?.data?.is_zoom_connected&&!(await dt({title:l("Warning","kivicare-clinic-management-system"),text:l("Press yes to connect to Google Meet. Connecting to Google Meet will disconnect Zoom.","kivicare-clinic-management-system")})).isConfirmed))try{a(!0);const{data:w}=await p();w?.data?.redirect_url?window.location.href=w.data.redirect_url:Me({title:l("Error","kivicare-clinic-management-system"),text:w?.message||l("Failed to initiate Google Meet connection","kivicare-clinic-management-system")})}catch(w){console.error("Connection failed:",w),Me({title:l("Error","kivicare-clinic-management-system"),text:w.message||l("An error occurred","kivicare-clinic-management-system")})}finally{a(!1)}},v=async()=>{if((await dt({title:l("Disconnect Google Meet","kivicare-clinic-management-system"),text:l("Are you sure you want to disconnect your Google Meet account?","kivicare-clinic-management-system"),confirmButtonText:l("Disconnect","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"})).isConfirmed)try{o(!0);const{data:b}=await h();b?.status?(u(),tt({title:l("Success","kivicare-clinic-management-system"),text:l("Disconnected from Google Meet","kivicare-clinic-management-system")})):Me({title:l("Error","kivicare-clinic-management-system"),text:b?.message||l("Failed to disconnect from Google Meet","kivicare-clinic-management-system")})}catch(b){console.error("Disconnection failed:",b),Me({title:l("Error","kivicare-clinic-management-system"),text:b.message||l("An error occurred","kivicare-clinic-management-system")})}finally{o(!1)}},x=()=>!c||!c.data?null:c.data.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("Your Google Meet account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:v,disabled:r,children:r?l("Disconnecting...","kivicare-clinic-management-system"):l("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),l("Your Google Meet account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:g,disabled:s,children:s?l("Connecting...","kivicare-clinic-management-system"):l("Connect Google Meet Account","kivicare-clinic-management-system")})]});return i.jsx("div",{className:"google-meet-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsx("div",{className:"d-flex align-items-center mb-4",children:i.jsx("h4",{className:"mb-0",children:l("Google Meet Settings","kivicare-clinic-management-system")})}),d||s||r?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:l("Loading Google Meet configuration...","kivicare-clinic-management-system")})]}):m?i.jsxs("div",{className:"alert alert-danger",children:[i.jsx("i",{className:"fas fa-exclamation-circle me-2"}),l("Failed to load Google Meet configuration:","kivicare-clinic-management-system")," ",m.message]}):i.jsxs(i.Fragment,{children:[n?x():i.jsx("div",{className:"alert alert-warning",children:l("Google Meet telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"mb-3",children:l("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-question-circle text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-meet-telemed-woocommerce-addon/doctor/",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:l("Google Meet integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("Learn how to set up and use Google Meet telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-video text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://support.google.com/meet",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:l("Google Meet requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})]})})})},Jo=[{id:1,label:l("Active","kivicare-clinic-management-system")},{id:0,label:l("Inactive","kivicare-clinic-management-system")}],XS=[{label:"Prescription type",value:"prescription_type"},{label:"Service type",value:"service_type"}],Xue={page:1,perPage:10,searchTerm:"",type:"",status:""},wx=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),[a,r]=f.useState([]),[o,c]=f.useState(null),[d,m]=f.useState(""),[u,p]=f.useState(XS),[h,g]=f.useState(Xue),[v,x]=f.useState(!1),y=Er(),b=mn(),w=Gn(),{id:k}=Yt(),_=Ke(),j=Za(d,500),{control:T,handleSubmit:N,formState:{errors:E},reset:A}=Jt(),{isAddonActive:L,hasCapability:C}=mt(),P=L("kiviPro"),{data:R}=Cn(),M=R?.data?.hideUtilityLinks,{data:O,isLoading:q,error:U}=yn("settings","listing",h,{enabled:!0}),{data:H}=Np({dataType:"staticData",staticDataType:"staticDataTypes"},{enabled:!!O}),ae=dn("settings","listing/update"),V=dn("settings","listing/delete"),pe=XX(),oe=O?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useEffect(()=>{g(B=>({...B,searchTerm:j,page:1}))},[j]),f.useEffect(()=>{if(H?.status&&H?.data&&p(H.data.length?H.data:XS),!O?.status){r([]);return}r(Array.isArray(O?.data?.data)?O.data.data.map(B=>({id:B.id,name:B.label,type:B.type,raw_type:B.raw_type,status:B.status===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})):[])},[O,H]),f.useEffect(()=>{if(w.pathname.endsWith("/add"))s(!0),c(null),A({id:"",label:"",type:"",status:""});else if(k){const F=a.find(J=>String(J.id)===k);F&&(c(F),s(!0),A({id:F.id,label:F.name,type:u.find(J=>J.value===(O?.data?.data?.find(Q=>Q.id===F.id)?.raw_type||F.type.replace(/\s+/g,"_").toLowerCase()))||null,status:Jo.find(J=>J.label===F.status)||null}))}else s(!1),c(null),A({id:"",label:"",type:"",status:""})},[k,w.pathname,a,A,u]);const ne=f.useCallback(B=>{m(B.target.value)},[]),se=f.useCallback(B=>{dt({title:l("Delete Listing?","kivicare-clinic-management-system"),text:l("You're about to delete this listing.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep listing","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(F=>{F.isConfirmed&&(ft({title:l("Deleting Listing...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected listing.<br>This won't take long.","kivicare-clinic-management-system")}),V.mutate({id:B},{onSuccess:J=>{tt({title:l("Listing Deleted","kivicare-clinic-management-system"),text:J?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to listings","kivicare-clinic-management-system")}),_.invalidateQueries(["settings","listing"])},onError:J=>{console.error("Delete clinic error:",J);const Q=J?.response?.data?.message||J?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},[V,_]),W=f.useCallback(async B=>{try{e(!0),!o&&(!B.id||B.id==="")&&delete B.id;const F=await ae.mutateAsync(B);F.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l(F.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):tt({title:l("Success","kivicare-clinic-management-system"),text:l(F.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),await _.invalidateQueries(["settings","listing"]),s(!1),c(null),A(),b("/setting/listings")}catch(F){console.error("Error submitting form:",F)}finally{e(!1)}},[o,b,_,A,ae]),[ge,ee]=f.useState(!1),ie=async B=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const F={format:B,searchTerm:h.searchTerm||"",type:h.type||"",status:h.status!==""?h.status:void 0},J=await pe.mutateAsync(F);if(!J.status||!J.data||!J.data.listings)throw new Error(J.message||l("Failed to retrieve export data","kivicare-clinic-management-system"));const Q=new Date().toISOString().split("T")[0],me=J.data.listings;switch(B){case"csv":gs(me,`listings-${Q}.csv`);break;case"xls":fs(me,`listings-${Q}.xls`);break;case"pdf":vs(me,`listings-${Q}.pdf`,"Listings Data");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(F){console.error("Export error:",F),Me({title:l("Error!","kivicare-clinic-management-system"),text:F.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},ue=f.useCallback(()=>ie("csv"),[]),G=f.useCallback(()=>ie("xls"),[]),le=f.useCallback(()=>{ge||(ee(!0),ie("pdf"),setTimeout(()=>ee(!1),2e3))},[ge]),re=f.useCallback(B=>{if(!P){dt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}switch(B){case"csv":ue();break;case"xls":G();break;case"pdf":le();break}},[ue,G,le,P]),D=f.useCallback(()=>{x(!0)},[]),I=f.useCallback(()=>{_.invalidateQueries(["settings","listing"])},[_]),ce=f.useCallback(()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>re("csv"),title:l("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>re("xls"),title:l("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>re("pdf"),title:l("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}),[re]),Z=On(),K=f.useMemo(()=>[Z.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),cell:B=>i.jsx("div",{className:"font-weight-medium",children:B.getValue()})}),Z.accessor("name",{id:"name",header:()=>l("Name","kivicare-clinic-management-system"),cell:B=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:B.row.original.name})})}),Z.accessor("type",{id:"type",header:()=>l("Type","kivicare-clinic-management-system"),cell:B=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:B.row.original.type})})}),Z.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:B=>{const F=B.getValue(),J=Jo.find(Q=>Q.label===F)||{label:l("Unknown","kivicare-clinic-management-system"),class:"bg-body"};return J.label===l("Active","kivicare-clinic-management-system")?J.class="bg-success-subtle text-success":J.label===l("Inactive","kivicare-clinic-management-system")&&(J.class="bg-danger-subtle text-danger"),i.jsx("span",{className:`badge ${J.class} px-3 py-2`,children:J.label})}}),Z.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:B=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[C("static_data_edit")&&i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/listings/edit/${B.cell.row.original.id}`,children:i.jsx("i",{className:"h6 text-success ph ph-pencil-simple-line"})}),y&&i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>se(B.cell.row.original.id),children:i.jsx("i",{className:"ph h6 text-danger ph-trash"})})]})})],[Z,se,C]);if(U){let B;typeof U=="string"?B=U:U?.response?.data?.message?B=U.response.data.message:U?.message?B=U.message:B=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(B,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return!n&&q?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsxs("div",{className:"tab-pane active opacity-1",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:[n?i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{onSubmit:N(W),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(be,{name:"label",control:T,rules:{required:l("Label is required","kivicare-clinic-management-system")},render:({field:B})=>i.jsx(Ht,{label:l("Label","kivicare-clinic-management-system"),placeholder:l("Dummy Data","kivicare-clinic-management-system"),required:!0,type:"text",isDisable:!1,error:E.label,value:B.value??"",onChange:B.onChange,showError:!1,className:"form-control"})}),E.label&&i.jsx("span",{className:"text-danger p",children:E.label.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"type",control:T,rules:{required:l("Type is required","kivicare-clinic-management-system")},render:({field:B})=>i.jsxs("select",{className:"form-select select2-basic-single",value:B.value?JSON.stringify(B.value):"",onChange:F=>{const J=u.find(Q=>JSON.stringify(Q)===F.target.value);B.onChange(J||null)},children:[i.jsx("option",{value:"",children:l("Select Type","kivicare-clinic-management-system")}),u.map(F=>i.jsx("option",{value:JSON.stringify(F),children:F.label},F.value))]})}),E.type&&i.jsx("span",{className:"text-danger p",children:E.type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(be,{name:"status",control:T,rules:{required:l("Status is required","kivicare-clinic-management-system")},render:({field:B})=>i.jsxs("select",{className:"form-select select2-basic-single",value:B.value?JSON.stringify(B.value):"",onChange:F=>{const J=Jo.find(Q=>JSON.stringify(Q)===F.target.value);B.onChange(J||null)},children:[i.jsx("option",{value:"",children:l("Select Status","kivicare-clinic-management-system")}),Jo.map(F=>i.jsx("option",{value:JSON.stringify(F),children:F.label},F.id))]})}),E.status&&i.jsx("span",{className:"text-danger p",children:E.status.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{b("/setting/listings"),s(!1),c(null)},children:l("Back","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?o?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):o?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})}):i.jsxs("div",{className:"listing-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Listing Data","kivicare-clinic-management-system"),M!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/listings-configuration/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[C("static_data_add")&&i.jsxs("button",{onClick:()=>b("/setting/listings/add"),className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add List","kivicare-clinic-management-system")})]}),P&&C("static_data_export")&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:D,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsx(ce,{})]}),P&&!C("static_data_export")&&i.jsxs("button",{onClick:D,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-sm-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[i.jsx(lt,{placeholder:l("Select Type","kivicare-clinic-management-system"),options:u,onChange:B=>{g(F=>({...F,type:B?B.value:"",page:1}))},value:u.find(B=>B.value===h.type)||null,isClearable:!0,styles:{menuPortal:B=>({...B,zIndex:9999})},className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select"}),i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),options:Jo,getOptionLabel:B=>B.label,getOptionValue:B=>B.id,onChange:B=>{g(F=>({...F,status:B?B.id:"",page:1}))},value:Jo.find(B=>B.id===h.status)||null,isClearable:!0,styles:{menuPortal:B=>({...B,zIndex:9999})},className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select"})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),onChange:ne})]})})]}),i.jsx(bn,{data:a,columns:K,isLoading:q,error:U,currentPage:oe.currentPage,perPage:oe.perPage,totalItems:oe.total,lastPage:oe.lastPage,onPageChange:B=>g(F=>({...F,page:B})),onPerPageChange:B=>g(F=>({...F,perPage:B,page:1})),enableSelection:!1})]}),i.jsx(qr,{show:v,onHide:()=>x(!1),onReopenImport:()=>x(!0),onDataRefresh:I,context:"listing"})]})},Jue=()=>{const[t,e]=f.useState(!1),{control:n,handleSubmit:s,watch:a,reset:r,formState:{errors:o}}=Jt({defaultValues:{enable:"off",only_number:"off",prefix_value:"",postfix_value:""}}),{data:c,isLoading:d,error:m}=yn("settings","patient-setting",{},{enabled:!0}),u=dn("settings","patient-setting"),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,g=a("enable"),v=y=>({text:y==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:y==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"});f.useEffect(()=>{!c?.status||!c?.data||(e(!1),r(y=>{const b={...y,...Object.fromEntries(Object.entries(c.data).filter(([,w])=>w!=null&&w!==""))};return b.enable=b.enable===!0?"on":"off",b.only_number=b.only_number===!0?"on":"off",b}))},[c,r]);const x=async y=>{e(!0),y.enable=y.enable==="on",y.only_number=y.only_number==="on";try{const b=await u.mutateAsync(y);b.status?tt({title:l("Success","kivicare-clinic-management-system"),text:l(b.message,"kivicare-clinic-management-system")}):Me({title:l("Error","kivicare-clinic-management-system"),text:l(b.message,"kivicare-clinic-management-system")})}catch(b){console.error("Error submitting form:",b)}finally{e(!1)}};if(m){const y=typeof m=="string"?m:m?.response?.data?.message||m?.message||l("An unknown error occurred","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:y})}return i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Patient Settings","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/patient-settings/",target:"_blank",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),d?i.jsx(SP,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body p-3",children:i.jsxs("form",{onSubmit:s(x),children:[i.jsx(be,{name:"enable",control:n,render:({field:y})=>i.jsx(sn,{label:l("Patient unique ID Setting","kivicare-clinic-management-system"),checked:y.value,onChange:y.onChange,badge:v(y.value),disabled:t})}),g==="on"&&i.jsxs(i.Fragment,{children:[i.jsx(be,{name:"only_number",control:n,render:({field:y})=>i.jsx(sn,{label:l("Show only numbers in patient unique ID","kivicare-clinic-management-system"),className:"my-3",checked:y.value,onChange:y.onChange,badge:v(y.value),disabled:t})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"prefix_value",control:n,render:({field:y})=>i.jsx(Ht,{label:l("Prefix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:l("e.g., PAT-","kivicare-clinic-management-system"),error:o.prefix_value,disabled:t})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"postfix_value",control:n,render:({field:y})=>i.jsx(Ht,{label:l("Postfix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:l("e.g., -001","kivicare-clinic-management-system"),error:o.postfix_value,disabled:t})})})]})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:l("Save","kivicare-clinic-management-system")})})]})})})]})})},ehe=()=>{const t=Ke(),{data:e,isLoading:n}=yn("settings","payments-gateway",{},{enabled:!0}),{mutateAsync:s}=dn(),{data:a}=Cn(),r=a?.data?.hideUtilityLinks,o=async m=>{const u=m.status?"off":"on",p={paypal:"enablePaypal",woocommerce:"enableWooCommerce",manual:"enablePayLater",knit_pay:"enableKnitPay"};if(p[m.id])try{await s({module:"settings",key:`payment-gateway/${m.id}`,data:{id:m.id,[p[m.id]]:u}}),tt({title:l("Success","kivicare-clinic-management-system"),text:l("Status updated successfully.","kivicare-clinic-management-system")}),t.invalidateQueries({queryKey:[...Dn.details(),"settings","payments-gateway"]})}catch(h){console.error("Toggle Error:",h);const g=h?.response?.data?.message||h.message||l("Update failed","kivicare-clinic-management-system");Me({title:l("Cannot Enable Gateway","kivicare-clinic-management-system"),text:g})}},c=On(),d=f.useMemo(()=>[c.accessor("name",{header:l("Payment method","kivicare-clinic-management-system"),cell:m=>i.jsx("h6",{className:"m-0",children:m.getValue()})}),c.accessor("status",{header:l("Status","kivicare-clinic-management-system"),cell:m=>i.jsx("div",{className:"form-check form-switch custom-switch-xl p-0",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!m.getValue(),onChange:()=>o(m.row.original),style:{cursor:"pointer"}})})}),c.display({id:"actions",header:l("Action","kivicare-clinic-management-system"),cell:m=>i.jsx(ht,{to:`/setting/payment/${m.row.original.id}`,className:"btn btn-link text-secondary fw-semibold p-0",children:l("Manage","kivicare-clinic-management-system")})})],[]);return i.jsxs("div",{className:"payment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Payment Setting","kivicare-clinic-management-system"),r!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/payment-settings/",target:"_blank",rel:"noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:e?.data||[],columns:d,enableSelection:!1,isLoading:n})})]})},JS=We.memo(({items:t,activeTab:e,onSelect:n,baseId:s})=>{const a=We.useRef(null),[r,o]=We.useState(!1),[c,d]=We.useState(!1),m=We.useCallback(()=>{const h=a.current;if(!h)return;const{scrollLeft:g,scrollWidth:v,clientWidth:x}=h;o(g>0),d(g<v-x-1)},[]);We.useEffect(()=>{m();const h=a.current;if(!h)return;const g=new ResizeObserver(m);return g.observe(h),()=>g.disconnect()},[t,m]);const u=()=>{const h=a.current;h&&(h.scrollBy({left:-200,behavior:"smooth"}),setTimeout(m,300))},p=()=>{const h=a.current;h&&(h.scrollBy({left:200,behavior:"smooth"}),setTimeout(m,300))};return i.jsxs("div",{className:"tab-nav-wrapper mb-4 position-relative",children:[r&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-left rounded-circle",onClick:u,"aria-label":l("Scroll left","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-left"})}),i.jsx("div",{ref:a,className:"tab-nav-scroll-container",onScroll:m,style:{overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-0",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:t.map(h=>{const g=typeof h=="string"?h:h.key,v=typeof h=="string"?h:h.name;return i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:`nav-link ${e===g?"active":""}`,id:`${s}-${g}-tab`,"data-bs-toggle":"tab","data-bs-target":`#${s}-${g}`,type:"button",role:"tab","aria-controls":`${s}-${g}`,"aria-selected":e===g,onClick:()=>n(g),children:v})},g)})})}),c&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-right rounded-circle",onClick:p,"aria-label":l("Scroll right","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-right"})})]})}),the=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks,{data:a,isLoading:r,error:o}=yn("settings","permission-setting",{},{enabled:e}),[c,d]=f.useState({}),m=Ke(),u=f.useMemo(()=>[{key:"administrator",name:l("Administrator","kivicare-clinic-management-system")},{key:"clinic_admin",name:l("Clinic Admin","kivicare-clinic-management-system")},{key:"receptionist",name:l("Receptionist","kivicare-clinic-management-system")},{key:"doctor",name:l("Doctor","kivicare-clinic-management-system")},{key:"patient",name:l("Patient","kivicare-clinic-management-system")}],[]),p=f.useMemo(()=>[{key:"appointment_module",name:l("Appointment","kivicare-clinic-management-system"),permissions:[{key:"appointment_list",label:l("Appointment List","kivicare-clinic-management-system")},{key:"appointment_add",label:l("Appointment Add","kivicare-clinic-management-system")},{key:"appointment_edit",label:l("Appointment Edit","kivicare-clinic-management-system")},{key:"appointment_view",label:l("Appointment View","kivicare-clinic-management-system")},{key:"appointment_delete",label:l("Appointment Delete","kivicare-clinic-management-system")},{key:"appointment_export",label:l("Appointment Export","kivicare-clinic-management-system")},{key:"patient_appointment_status_change",label:l("Patient Appointment Status Change","kivicare-clinic-management-system")},{key:"appointment_cancel",label:l("Appointment Cancel","kivicare-clinic-management-system")}]},{key:"billing_module",name:l("Billing","kivicare-clinic-management-system"),permissions:[{key:"patient_bill_list",label:l("Patient Bill List","kivicare-clinic-management-system")},{key:"patient_bill_add",label:l("Patient Bill Add","kivicare-clinic-management-system")},{key:"patient_bill_edit",label:l("Patient Bill Edit","kivicare-clinic-management-system")},{key:"patient_bill_view",label:l("Patient Bill View","kivicare-clinic-management-system")},{key:"patient_bill_export",label:l("Patient Bill Export","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:l("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"clinic_module",name:l("Clinic","kivicare-clinic-management-system"),permissions:[{key:"clinic_list",label:l("Clinic List","kivicare-clinic-management-system")},{key:"clinic_add",label:l("Clinic Add","kivicare-clinic-management-system")},{key:"clinic_edit",label:l("Clinic Edit","kivicare-clinic-management-system")},{key:"clinic_delete",label:l("Clinic Delete","kivicare-clinic-management-system")},{key:"clinic_profile",label:l("Clinic Profile","kivicare-clinic-management-system")},{key:"clinic_resend_credential",label:l("Clinic Resend Credential","kivicare-clinic-management-system")},{key:"clinic_export",label:l("Clinic Export","kivicare-clinic-management-system")}]},{key:"clinical_detail_module",name:l("Clinical Detail","kivicare-clinic-management-system"),permissions:[{key:"medical_records_list",label:l("Medical Records List","kivicare-clinic-management-system")},{key:"medical_records_add",label:l("Medical Records Add","kivicare-clinic-management-system")},{key:"medical_records_delete",label:l("Medical Records Delete","kivicare-clinic-management-system")},{key:"medical_records_view",label:l("Medical Records View","kivicare-clinic-management-system")}]},{key:"custom_field_module",name:l("Custom Field","kivicare-clinic-management-system"),permissions:[{key:"custom_field_list",label:l("Custom Field List","kivicare-clinic-management-system")},{key:"custom_field_add",label:l("Custom Field Add","kivicare-clinic-management-system")},{key:"custom_field_edit",label:l("Custom Field Edit","kivicare-clinic-management-system")},{key:"custom_field_delete",label:l("Custom Field Delete","kivicare-clinic-management-system")},{key:"custom_field_export",label:l("Custom Field Export","kivicare-clinic-management-system")}]},{key:"dashboard_module",name:l("Dashboard","kivicare-clinic-management-system"),permissions:[{key:"dashboard_total_patient",label:l("Dashboard Total Patient","kivicare-clinic-management-system")},{key:"dashboard_total_doctor",label:l("Dashboard Total Doctor","kivicare-clinic-management-system")},{key:"dashboard_total_appointment",label:l("Dashboard Total Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_revenue",label:l("Dashboard Total Revenue","kivicare-clinic-management-system")},{key:"dashboard_total_today_appointment",label:l("Dashboard Total Today Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_service",label:l("Dashboard Total Service","kivicare-clinic-management-system")},{key:"dashboard_total_clinic",label:l("Dashboard Total Clinic","kivicare-clinic-management-system")},{key:"dashboard",label:l("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:l("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:l("Home Page","kivicare-clinic-management-system")}]},{key:"doctor_module",name:l("Doctor","kivicare-clinic-management-system"),permissions:[{key:"doctor_list",label:l("Doctor List","kivicare-clinic-management-system")},{key:"doctor_add",label:l("Doctor Add","kivicare-clinic-management-system")},{key:"doctor_edit",label:l("Doctor Edit","kivicare-clinic-management-system")},{key:"doctor_delete",label:l("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_session",label:l("Doctor Session","kivicare-clinic-management-system")},{key:"doctor_service",label:l("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_resend_credential",label:l("Doctor Resend Credential","kivicare-clinic-management-system")},{key:"patient_review_get",label:l("Patient Review Get","kivicare-clinic-management-system")},{key:"doctor_export",label:l("Doctor Export","kivicare-clinic-management-system")}]},{key:"encounter_module",name:l("Encounter","kivicare-clinic-management-system"),permissions:[{key:"patient_encounter_list",label:l("Patient Encounter List","kivicare-clinic-management-system")},{key:"patient_encounter_add",label:l("Patient Encounter Add","kivicare-clinic-management-system")},{key:"patient_encounter_edit",label:l("Patient Encounter Edit","kivicare-clinic-management-system")},{key:"patient_encounter_view",label:l("Patient Encounter View","kivicare-clinic-management-system")},{key:"patient_encounter_delete",label:l("Patient Encounter Delete","kivicare-clinic-management-system")},{key:"patient_encounter_view_billing",label:l("Patient Encounter View Billing","kivicare-clinic-management-system")},{key:"patient_encounter_export",label:l("Patient Encounter Export","kivicare-clinic-management-system")}]},{key:"encounters_template_module",name:l("Encounter Template","kivicare-clinic-management-system"),permissions:[{key:"encounters_template_list",label:l("Encounters Template List","kivicare-clinic-management-system")},{key:"encounters_template_add",label:l("Encounters Template Add","kivicare-clinic-management-system")},{key:"encounters_template_edit",label:l("Encounters Template Edit","kivicare-clinic-management-system")},{key:"encounters_template_view",label:l("Encounters Template View","kivicare-clinic-management-system")},{key:"encounters_template_delete",label:l("Encounters Template Delete","kivicare-clinic-management-system")}]},{key:"holiday_module",name:l("Holiday","kivicare-clinic-management-system"),permissions:[{key:"clinic_schedule",label:l("Clinic Schedule","kivicare-clinic-management-system")},{key:"clinic_schedule_add",label:l("Clinic Schedule Add","kivicare-clinic-management-system")},{key:"clinic_schedule_edit",label:l("Clinic Schedule Edit","kivicare-clinic-management-system")},{key:"clinic_schedule_delete",label:l("Clinic Schedule Delete","kivicare-clinic-management-system")},{key:"clinic_schedule_export",label:l("Clinic Schedule Export","kivicare-clinic-management-system")}]},{key:"other_module",name:l("Other","kivicare-clinic-management-system"),permissions:[{key:"dashboard",label:l("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:l("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:l("Home Page","kivicare-clinic-management-system")},{key:"medical_records_view",label:l("Medical Records View","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:l("Patient Bill Delete","kivicare-clinic-management-system")},{key:"change_password",label:l("Change Password","kivicare-clinic-management-system")}]},{key:"tax_module",name:l("Tax","kivicare-clinic-management-system"),permissions:[{key:"tax_list",label:l("Tax List","kivicare-clinic-management-system")},{key:"tax_add",label:l("Tax Add","kivicare-clinic-management-system")},{key:"tax_edit",label:l("Tax Edit","kivicare-clinic-management-system")},{key:"tax_delete",label:l("Tax Delete","kivicare-clinic-management-system")},{key:"tax_export",label:l("Tax Export","kivicare-clinic-management-system")}]},{key:"custom_form_module",name:l("Custom Form","kivicare-clinic-management-system"),permissions:[{key:"custom_form_list",label:l("Custom Form List","kivicare-clinic-management-system")},{key:"custom_form_add",label:l("Custom Form Add","kivicare-clinic-management-system")},{key:"custom_form_edit",label:l("Custom Form Edit","kivicare-clinic-management-system")},{key:"custom_form_view",label:l("Custom Form View","kivicare-clinic-management-system")},{key:"custom_form_delete",label:l("Custom Form Delete","kivicare-clinic-management-system")}]},{key:"patient_module",name:l("Patient","kivicare-clinic-management-system"),permissions:[{key:"patient_list",label:l("Patient List","kivicare-clinic-management-system")},{key:"patient_add",label:l("Patient Add","kivicare-clinic-management-system")},{key:"patient_edit",label:l("Patient Edit","kivicare-clinic-management-system")},{key:"patient_delete",label:l("Patient Delete","kivicare-clinic-management-system")},{key:"patient_profile",label:l("Patient Profile","kivicare-clinic-management-system")},{key:"patient_resend_credential",label:l("Patient Resend Credential","kivicare-clinic-management-system")},{key:"patient_export",label:l("Patient Export","kivicare-clinic-management-system")},{key:"patient_clinic",label:l("Patient Clinic","kivicare-clinic-management-system")},{key:"patient_appointment",label:l("Patient Appointment","kivicare-clinic-management-system")},{key:"patient_appointment_report",label:l("Patient Report","kivicare-clinic-management-system")},{key:"patient_encounter",label:l("Patient Encounter","kivicare-clinic-management-system")}]},{key:"patient_report_module",name:l("Patient Reports","kivicare-clinic-management-system"),permissions:[{key:"patient_report",label:l("Patient Reports","kivicare-clinic-management-system")},{key:"patient_report_add",label:l("Patient Reports Add","kivicare-clinic-management-system")},{key:"patient_report_view",label:l("Patient Reports View","kivicare-clinic-management-system")},{key:"patient_report_delete",label:l("Patient Reports Delete","kivicare-clinic-management-system")},{key:"patient_report_edit",label:l("Patient Reports Edit","kivicare-clinic-management-system")}]},{key:"patient_review_module",name:l("Patient Review","kivicare-clinic-management-system"),permissions:[{key:"patient_review_add",label:l("Patient Review Add","kivicare-clinic-management-system")},{key:"patient_review_edit",label:l("Patient Review Edit","kivicare-clinic-management-system")},{key:"patient_review_get",label:l("Patient Review Get","kivicare-clinic-management-system")},{key:"patient_review_delete",label:l("Patient Review Delete","kivicare-clinic-management-system")}]},{key:"prescription_module",name:l("Prescription","kivicare-clinic-management-system"),permissions:[{key:"prescription_list",label:l("Prescription List","kivicare-clinic-management-system")},{key:"prescription_add",label:l("Prescription Add","kivicare-clinic-management-system")},{key:"prescription_edit",label:l("Prescription Edit","kivicare-clinic-management-system")},{key:"prescription_delete",label:l("Prescription Delete","kivicare-clinic-management-system")},{key:"prescription_export",label:l("Prescription Export","kivicare-clinic-management-system")}]},{key:"receptionist_module",name:l("Receptionist","kivicare-clinic-management-system"),permissions:[{key:"receptionist_list",label:l("Receptionist List","kivicare-clinic-management-system")},{key:"receptionist_add",label:l("Receptionist Add","kivicare-clinic-management-system")},{key:"receptionist_edit",label:l("Receptionist Edit","kivicare-clinic-management-system")},{key:"receptionist_delete",label:l("Receptionist Delete","kivicare-clinic-management-system")},{key:"receptionist_resend_credential",label:l("Receptionist Resend Credential","kivicare-clinic-management-system")},{key:"receptionist_export",label:l("Receptionist Export","kivicare-clinic-management-system")}]},{key:"service_module",name:l("Service","kivicare-clinic-management-system"),permissions:[{key:"service_list",label:l("Service List","kivicare-clinic-management-system")},{key:"service_add",label:l("Service Add","kivicare-clinic-management-system")},{key:"service_edit",label:l("Service Edit","kivicare-clinic-management-system")},{key:"service_delete",label:l("Service Delete","kivicare-clinic-management-system")},{key:"service_export",label:l("Service Export","kivicare-clinic-management-system")}]},{key:"session_module",name:l("Doctor Session","kivicare-clinic-management-system"),permissions:[{key:"doctor_session_list",label:l("Doctor Session List","kivicare-clinic-management-system")},{key:"doctor_session_add",label:l("Doctor Session Add","kivicare-clinic-management-system")},{key:"doctor_session_edit",label:l("Doctor Session Edit","kivicare-clinic-management-system")},{key:"doctor_session_delete",label:l("Doctor Session Delete","kivicare-clinic-management-system")},{key:"doctor_session_export",label:l("Doctor Session Export","kivicare-clinic-management-system")}]},{key:"static_data_module",name:l("Static/Listing Data","kivicare-clinic-management-system"),permissions:[{key:"static_data_list",label:l("Static Data List","kivicare-clinic-management-system")},{key:"static_data_add",label:l("Static Data Add","kivicare-clinic-management-system")},{key:"static_data_edit",label:l("Static Data Edit","kivicare-clinic-management-system")},{key:"static_data_export",label:l("Static Data Export","kivicare-clinic-management-system")}]}],[]),h=f.useMemo(()=>({administrator:{modules:p.filter(Z=>Z.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinic_module:["clinic_list","clinic_add","clinic_edit","clinic_delete","clinic_profile","clinic_resend_credential","clinic_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["medical_records_view","patient_bill_delete"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},clinic_admin:{modules:p.filter(Z=>Z.key!=="clinic_module"&&Z.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete"],other_module:["dashboard","medical_records_view","change_password"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},doctor:{modules:p.filter(Z=>!["clinic_module","doctor_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(Z.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_appointment","dashboard_total_today_appointment","dashboard_total_service"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},patient:{modules:p.filter(Z=>["appointment_module","billing_module","clinical_detail_module","encounter_module","other_module","patient_module","patient_report_module","patient_review_module","prescription_module"].includes(Z.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_cancel","appointment_export"],billing_module:["patient_bill_list","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list"],encounter_module:["patient_encounter_list","patient_encounter_view","patient_encounter_export","patient_encounter_view_billing"],other_module:["dashboard","change_password","medical_records_view","home_page"],patient_module:["patient_profile","patient_clinic"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],patient_review_module:["patient_review_add","patient_review_edit","patient_review_get","patient_review_delete"],prescription_module:["prescription_list","prescription_export"]}},receptionist:{modules:p.filter(Z=>!["clinic_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(Z.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_today_appointment"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","doctor_export","patient_review_get"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}}}),[p]),[g,v]=f.useState(u),[x,y]=f.useState("administrator"),[b,w]=f.useState(h.administrator.modules),[k,_]=f.useState(h.administrator.modules[0]?.key||""),{control:j,handleSubmit:T,setValue:N,watch:E}=Jt({defaultValues:{}}),A=E(`${x}.appointment_module.appointment_list`)??!0,L=E(`${x}.billing_module.patient_bill_list`)??!0,C=E(`${x}.service_module.service_list`)??!0,P=E(`${x}.prescription_module.prescription_list`)??!0,R=E(`${x}.clinical_detail_module.medical_records_list`)??!0,M=E(`${x}.static_data_module.static_data_list`)??!0,O=E(`${x}.holiday_module.clinic_schedule`)??!0,q=E(`${x}.encounter_module.patient_encounter_list`)??!0,U=E(`${x}.receptionist_module.receptionist_list`)??!0,H=E(`${x}.doctor_module.doctor_list`)??!0,ae=E(`${x}.custom_field_module.custom_field_list`)??!0,V=E(`${x}.session_module.doctor_session_list`)??!0,pe=E(`${x}.clinic_module.clinic_list`)??!0,oe=E(`${x}.dashboard_module.dashboard_total_patient`)??!0,ne=E(`${x}.patient_report_module.patient_report`)??!0,se=E(`${x}.patient_module.patient_list`)??!0,W=E(`${x}.tax_module.tax_list`)??!0,ge=E(`${x}.custom_form_module.custom_form_list`)??!0,ee=E(`${x}.encounters_template_module.encounters_template_list`)??!0,[ie,ue]=f.useState(!1),G=dn("settings","permission-setting");f.useEffect(()=>{if(a?.status&&a?.data){const Z=a.data;d(Z);const K=u.map(F=>({...F,capabilities:Z[F.key]?.capabilities||{}}));v(K);const B={};u.forEach(F=>{const J=F.key;(h[J]?.modules||[]).forEach(me=>{const te=me.key;(h[J]?.permissions[te]||[]).forEach(Ce=>{const ye=Z[J]?.capabilities?.[te]?.[Ce];B[`${J}.${te}.${Ce}`]=ye!==void 0?ye:!0})})}),Object.entries(B).forEach(([F,J])=>N(F,J))}},[a,N,u,h]);const le=f.useCallback(Z=>{y(Z);const K=h[Z]?.modules||[];w(K),_(K[0]?.key||"")},[h]);f.useEffect(()=>{c&&c[x]&&(h[x]?.modules||[]).forEach(K=>{const B=K.key;(h[x]?.permissions[B]||[]).forEach(J=>{const Q=c[x]?.capabilities?.[B]?.[J];N(`${x}.${B}.${J}`,Q!==void 0?Q:!0)})})},[x,c,h,N]);const re=f.useCallback((Z,K)=>{const B=p.find(J=>J.key===K)?.permissions||[],F=h[Z]?.permissions[K]||[];return B.filter(J=>F.includes(J.key)).map(J=>({key:J.key,label:J.label,value:c[Z]?.capabilities?.[K]?.[J.key]||!1}))},[p,h,c]),D=Z=>({text:Z===!0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:Z===!0?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),I=f.useCallback((Z,K,B)=>{const F={};return Object.entries(Z).forEach(([J,Q])=>{F[J]={name:K[J]?.name||J,capabilities:{}},Object.entries(Q).forEach(([me,te])=>{F[J].capabilities[me]={...te}})}),{data:F,type:B}},[]),ce=f.useCallback(async Z=>{try{if(!Z||Object.keys(Z).length===0){Me({title:l("Error","kivicare-clinic-management-system"),text:l("No permission data to save","kivicare-clinic-management-system")});return}ue(!0);const K=I(Z,c,x);if(!K.data||Object.keys(K.data).length===0)throw new Error(l("Invalid permission data structure","kivicare-clinic-management-system"));const B=await G.mutateAsync(K);B.status!==!0?(ue(!1),Me({title:l("Error","kivicare-clinic-management-system"),text:l(B.message,"kivicare-clinic-management-system")})):(ue(!1),m.invalidateQueries(["config"]),tt({title:l("Success","kivicare-clinic-management-system"),text:l(B.message,"kivicare-clinic-management-system")}))}catch(K){ue(!1),console.error("Failed to save settings:",K);const B=K?.response?.data?.message||K?.message||l("Failed to save permission settings","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:l(B,"kivicare-clinic-management-system")})}},[I,c,x,G]);if(o){let Z;return typeof o=="string"?Z=o:o?.response?.data?.message?Z=o.response.data.message:o?.message?Z=o.message:Z=l("An unknown error occurred","kivicare-clinic-management-system"),i.jsx(KCAlert,{icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(Z,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsxs("div",{className:`permission-setting${e?"":" p-4 position-relative overflow-hidden z-0"}`,children:[!e&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Permission Setting","kivicare-clinic-management-system")," "," ",s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/permission-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&(r||ie)&&i.jsx(NP,{}),i.jsx("div",{className:"permission-setting-tabs",children:i.jsxs("form",{onSubmit:T(ce),children:[i.jsx(JS,{items:g,activeTab:x,onSelect:le,baseId:"role"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane active opacity-1",id:`role-${x}`,role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx(JS,{items:b,activeTab:k,onSelect:_,baseId:"module"}),i.jsx("div",{className:"tab-content mt-4 ",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane active opacity-1",id:`module-${k}`,role:"tabpanel",children:re(x,k).map(Z=>{let K=!1;return k==="appointment_module"&&Z.key!=="appointment_list"?K=!A:k==="billing_module"&&Z.key!=="patient_bill_list"?K=!L:k==="service_module"&&Z.key!=="service_list"?K=!C:k==="prescription_module"&&Z.key!=="prescription_list"?K=!P:k==="clinical_detail_module"&&Z.key!=="medical_records_list"?K=!R:k==="static_data_module"&&Z.key!=="static_data_list"?K=!M:k==="holiday_module"&&Z.key!=="clinic_schedule"?K=!O:k==="encounter_module"&&Z.key!=="patient_encounter_list"?K=!q:k==="receptionist_module"&&Z.key!=="receptionist_list"?K=!U:k==="doctor_module"&&Z.key!=="doctor_list"?K=!H:k==="custom_field_module"&&Z.key!=="custom_field_list"?K=!ae:k==="session_module"&&Z.key!=="doctor_session_list"?K=!V:k==="clinic_module"&&Z.key!=="clinic_list"?K=!pe:k==="dashboard_module"&&Z.key!=="dashboard_total_patient"?K=!oe:k==="encounters_template_module"&&Z.key!=="encounters_template_list"?K=!ee:k==="patient_module"&&Z.key!=="patient_list"?K=!se:k==="patient_report_module"&&Z.key!=="patient_report"?K=!ne:k==="tax_module"&&Z.key!=="tax_list"?K=!W:k==="custom_form_module"&&Z.key!=="custom_form_list"&&(K=!ge),i.jsx(be,{name:`${x}.${k}.${Z.key}`,control:j,render:({field:B})=>i.jsx(sn,{label:Z.label,checked:B.value,onChange:B.onChange,badge:D(B.value),className:"mb-2",inputClassName:"mb-2",disabled:K})},Z.key)})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ie,children:ie?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})})]})},e_=({isOpen:t,onClose:e,isLoading:n,messageData:s,setMessageData:a,onSubmit:r,disabled:o=!1,mode:c="sms",requiredFields:d=[]})=>{if(!t)return null;const m=o||n||!s?.phoneNumber||!s?.messageContent||d.some(g=>!g.value),u=g=>{const{name:v,value:x}=g.target;a(y=>({...y,[v]:x}))},p=c==="whatsapp"?l("Test WhatsApp Message","kivicare-clinic-management-system"):l("Test SMS","kivicare-clinic-management-system"),h=c==="whatsapp"?l("Welcome to KiviCare, This is test WhatsApp message","kivicare-clinic-management-system"):l("Welcome to KiviCare, This is test SMS message","kivicare-clinic-management-system");return i.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:i.jsx("div",{className:"modal-dialog",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:p}),i.jsx("button",{type:"button",className:"btn-close",onClick:e,disabled:n,"aria-label":l("Close","kivicare-clinic-management-system"),children:i.jsx("i",{class:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Phone Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"phoneNumber",className:"form-control",value:s.phoneNumber||"",onChange:u,placeholder:l("Enter phone number with country code (e.g., +1234567890)","kivicare-clinic-management-system"),disabled:n})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Message Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"messageContent",className:"form-control",rows:"4",value:s.messageContent||h,onChange:u,disabled:n})]}),i.jsx("div",{className:"alert alert-warning mb-0",children:c==="whatsapp"?l("Note: Standard Twilio WhatsApp Charges Applicable","kivicare-clinic-management-system"):l("Note: Standard Twilio SMS Charges Applicable","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-primary ms-2",onClick:g=>{g.preventDefault(),r()},disabled:m,children:[n&&i.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),l("Send Test","kivicare-clinic-management-system")]})]})]})})})},Wr=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(t,"kivicare-clinic-management-system")}),e]})}),t_=({title:t,text:e})=>i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l(t,"kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 heading-color",children:l(e,"kivicare-clinic-management-system")})]})}),nhe=()=>{const{isAddonActive:t,darkMode:e,toggleDarkMode:n}=mt(),s=t("kiviPro"),[a,r]=f.useState(!1),[o,c]=f.useState(""),d=dn("settings","pro-settings"),{data:m}=Cn(),u=m?.data?.hideUtilityLinks,{data:p,isLoading:h,error:g}=yn("settings","pro-settings",{},{enabled:s}),{control:v,handleSubmit:x,watch:y,reset:b,formState:{errors:w}}=Jt({defaultValues:{site_logo:"",site_mini_logo:"",dark_site_logo:"",dark_site_mini_logo:"",rtl:!1,darkMode:!1,themeColor:"#007bff",primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",darkPrimaryColor:"#5670CC",darkSecondaryColor:"#f68685",darkSuccessColor:"#219653",darkWarningColor:"#FAA100",darkDangerColor:"#F54438",darkInfoColor:"#007EA7",darkBodyBg:"#1e2023",darkBodyColor:"#828A90",darkBorderColor:"#303030",darkHeadingColor:"#d6dce2",darkCardColor:"#252934",wordpressLogo:"",wordpressLogoStatus:!1,enabledCustomizableSms:!1,enabledCustomizableWhatsApp:!1,enableTwilioSms:!1,twilioSmsAccountSID:"",twilioSmsAuthToken:"",twilioSmsPhoneNumber:"",enableTwilioWhatsApp:!1,twilioWhatsAppAccountSID:"",twilioWhatsAppAuthToken:"",twilioWhatsAppPhoneNumber:"",googleCalendarConfiguration:!1,googleCalendarClientId:"",googleCalendarClientSecret:"",appName:"",patientCalendarEvent:!1,clinicEncounterPrint:!1,doctorEncounterPrint:!1,hideEncounterClinicalDetails:!1,copyrightText:"KiviCare - Clinic and Patient Management System (EHR)",AdminSlug:"",clinicAdminSlug:"",doctorSlug:"",receptionistSlug:"",patientSlug:""}}),[k,_]=f.useState(e?"dark":"light");f.useEffect(()=>{_(e?"dark":"light")},[e]),f.useEffect(()=>{if(p){const D=Z=>Z===!0||Z==="true"||Z===1||Z==="1"||Z==="yes"||Z==="on",I=["rtl","darkMode","wordpressLogoStatus","enabledCustomizableSms","enabledCustomizableWhatsApp","enableTwilioSms","enableTwilioWhatsApp","googleCalendarConfiguration","patientCalendarEvent","clinicEncounterPrint","doctorEncounterPrint","hideEncounterClinicalDetails"],ce={...p};I.forEach(Z=>{Z in ce&&(ce[Z]=D(ce[Z]))}),b(Z=>({...Z,...ce})),(ce.rtl===!0||ce.rtl==="true")&&(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode"))}},[p,b]);const j=(D="light")=>{const I=D==="dark";return{primary:y(I?"darkPrimaryColor":"primaryColor"),secondary:y(I?"darkSecondaryColor":"secondaryColor"),success:y(I?"darkSuccessColor":"successColor"),warning:y(I?"darkWarningColor":"warningColor"),danger:y(I?"darkDangerColor":"dangerColor"),info:y(I?"darkInfoColor":"infoColor"),"body-bg":y(I?"darkBodyBg":"bodyBg"),"body-color":y(I?"darkBodyColor":"bodyColor"),"border-color":y(I?"darkBorderColor":"borderColor"),"heading-color":y(I?"darkHeadingColor":"headingColor"),"gray-900":y(I?"darkCardColor":"cardColor")}},T=()=>{const D=j("light"),I=j("dark"),ce=Z=>Object.fromEntries(Object.entries(Z).filter(([K,B])=>B&&B.trim()!==""));sC(ce(D),ce(I))},N=y("googleCalendarConfiguration"),E=y("wordpressLogoStatus"),A=y("enableTwilioSms"),L=y("enableTwilioWhatsApp"),C=D=>({text:D===!0||D==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:D===!0||D==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),P=[{key:"clinicEncounterPrint",label:l("Include Encounter Clinical Details In Prescription Print","kivicare-clinic-management-system")},{key:"doctorEncounterPrint",label:l("Include Encounter Custom Fields In Prescription Print","kivicare-clinic-management-system")},{key:"hideEncounterClinicalDetails",label:l("Hide Encounter Clinical Details To Patient","kivicare-clinic-management-system")}],R=[{key:"googleCalendarClientId",label:l("Google Calendar Client Id","kivicare-clinic-management-system"),placeholder:l("Enter Google Calendar Client Id","kivicare-clinic-management-system"),isInteger:!1},{key:"googleCalendarClientSecret",label:l("Google Calendar Client Secret","kivicare-clinic-management-system"),placeholder:l("Enter Google Calendar Client Secret","kivicare-clinic-management-system"),isInteger:!1},{key:"appName",label:l("App Name","kivicare-clinic-management-system"),placeholder:l("Enter App Name","kivicare-clinic-management-system"),isInteger:!1}];l("Step 1:","kivicare-clinic-management-system"),l("Please refer the following link for the setup.","kivicare-clinic-management-system");const M=[{key:"twilioSmsAccountSID",label:l("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:l("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsAuthToken",label:l("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:l("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsPhoneNumber",label:l("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:l("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],O=[{key:"twilioWhatsAppAccountSID",label:l("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:l("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppAuthToken",label:l("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:l("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppPhoneNumber",label:l("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:l("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],q=[{title:l("Step 1:","kivicare-clinic-management-system"),text:l("You can sign up for a free Twilio trial account here: Step 1: You can sign up for a free Twilio trial account here","kivicare-clinic-management-system")},{title:l("Step 2:","kivicare-clinic-management-system"),text:l("To get the Twilio CLI connected to your account. Visit , Twilo SMS portal and youll find your unique Account SID and Auth Token to provide to the CLI.","kivicare-clinic-management-system")},{title:l("Step 3:","kivicare-clinic-management-system"),text:l("Copy and Paste ACCOUNT SID and AUTH TOKEN and click on save button and here you go.","kivicare-clinic-management-system")},{title:l("Step 4 (Optional):","kivicare-clinic-management-system"),text:l("To get your first Twilio phone number for sending sms. Visit , head on over to the console and you will get phone number to send SMS if you dont want any particular number to send message use your SID.","kivicare-clinic-management-system")},{title:l("Important Note:","kivicare-clinic-management-system"),text:l("Reciever(doctor/patient) Phone/contact No must be in twillo specific format ([+] [country code] [mobile number] ) , Please Refer here for more details","kivicare-clinic-management-system")}],U=D=>D?String(D).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-"):"",H=D=>{const I=D.key;D.ctrlKey||D.metaKey||D.altKey||["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(I)||/^[a-z0-9-]$/.test(I)||D.preventDefault()},ae=dn("settings","sms-whatsapp-template/test"),[V,pe]=f.useState(!1),[oe,ne]=f.useState(!1),[se,W]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test SMS message"}),[ge,ee]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test WhatsApp message"}),ie=async()=>{try{r(!0),ae.mutate({type:"sms",mobile:se.phoneNumber,content:se.messageContent},{onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Test SMS sent successfully!","kivicare-clinic-management-system")}),pe(!1)},onError:D=>{Me({title:l("Error","kivicare-clinic-management-system"),text:D.message||l("Failed to send test SMS","kivicare-clinic-management-system")})},onSettled:()=>{r(!1)}})}catch{r(!1)}},ue=async()=>{try{r(!0),ae.mutate({type:"whatsapp",mobile:ge.phoneNumber,content:ge.messageContent},{onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Test WhatsApp message sent successfully!","kivicare-clinic-management-system")}),ne(!1)},onError:D=>{Me({title:l("Error","kivicare-clinic-management-system"),text:D?.response?.data?.message||D?.message||l("Failed to send test WhatsApp message","kivicare-clinic-management-system")})},onSettled:()=>{r(!1)}})}catch{r(!1)}},G=()=>{dt({title:l("Reset Color Settings","kivicare-clinic-management-system"),text:l("Are you sure you want to reset all color settings to their default values?","kivicare-clinic-management-system")}).then(D=>{D.isConfirmed&&(b(I=>({...I,primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",darkPrimaryColor:"#5670CC",darkSecondaryColor:"#f68685",darkSuccessColor:"#219653",darkWarningColor:"#FAA100",darkDangerColor:"#F54438",darkInfoColor:"#007EA7",darkBodyBg:"#1e2023",darkBodyColor:"#828A90",darkBorderColor:"#303030",darkHeadingColor:"#d6dce2",darkCardColor:"#252934"})),setTimeout(T,100))})},le=D=>!D||/^\d+$/.test(String(D))?!0:l("Invalid parameter","kivicare-clinic-management-system"),re=async D=>{try{c(""),r(!0);const I=k==="dark",ce=Q=>Object.fromEntries(Object.entries(Q).filter(([me,te])=>te&&te.trim()!=="")),Z={primary:D.primaryColor,secondary:D.secondaryColor,success:D.successColor,warning:D.warningColor,danger:D.dangerColor,info:D.infoColor,"body-bg":D.bodyBg,"body-color":D.bodyColor,"border-color":D.borderColor,"heading-color":D.headingColor,"gray-900":D.cardColor},K={primary:D.darkPrimaryColor,secondary:D.darkSecondaryColor,success:D.darkSuccessColor,warning:D.darkWarningColor,danger:D.darkDangerColor,info:D.darkInfoColor,"body-bg":D.darkBodyBg,"body-color":D.darkBodyColor,"border-color":D.darkBorderColor,"heading-color":D.darkHeadingColor,"gray-900":D.darkCardColor},B=sC(ce(Z),ce(K)),F={...D,darkMode:I,site_logo:D.site_logo&&D.site_logo.id?D.site_logo.id:null,site_mini_logo:D.site_mini_logo&&D.site_mini_logo.id?D.site_mini_logo.id:null,dark_site_logo:D.dark_site_logo&&D.dark_site_logo.id?D.dark_site_logo.id:null,dark_site_mini_logo:D.dark_site_mini_logo&&D.dark_site_mini_logo.id?D.dark_site_mini_logo.id:null,wordpressLogo:D.wordpressLogo&&D.wordpressLogo.id?D.wordpressLogo.id:null,clinicEncounterPrint:D.clinicEncounterPrint,doctorEncounterPrint:D.doctorEncounterPrint,hideEncounterClinicalDetails:D.hideEncounterClinicalDetails,rtl:D.rtl,customNotification:[{type:"sms",status:D.enabledCustomizableSms?"yes":"no"},{type:"whatsapp",status:D.enabledCustomizableWhatsApp?"yes":"no"}],twilioSms:{account_id:D.twilioSmsAccountSID||"",auth_token:D.twilioSmsAuthToken||"",to_number:D.twilioSmsPhoneNumber||"",enableSMS:D.enableTwilioSms},twilioWhatsApp:{account_id:D.twilioWhatsAppAccountSID||"",auth_token:D.twilioWhatsAppAuthToken||"",to_number:D.twilioWhatsAppPhoneNumber||"",enableWhatsApp:D.enableTwilioWhatsApp},googleAccount:{client_id:D.googleCalendarClientId,client_secret:D.googleCalendarClientSecret,app_name:D.appName,enableCal:!!D.googleCalendarConfiguration},generatedColors:B},J=await d.mutateAsync(F);J.status!==!0?(r(!1),c(J.message),Me({title:l("Error","kivicare-clinic-management-system"),text:l(J.message,"kivicare-clinic-management-system")})):(r(!1),c(""),D.rtl===!0||D.rtl==="true"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode")):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang","en"),document.body.classList.remove("rtl-mode")),D.darkMode===!0||D.darkMode==="true"?document.body.setAttribute("data-bs-theme","dark"):document.body.setAttribute("data-bs-theme","light"),tt({title:l("Success","kivicare-clinic-management-system"),text:l(J.message,"kivicare-clinic-management-system")}))}catch(I){r(!1),console.error("Failed to save settings:",I)}};if(g){let D;typeof g=="string"?D=g:g?.response?.data?.message?D=g.response.data.message:g?.message?D=g.message:D=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(D,"kivicare-clinic-management-system")})}return i.jsx(i.Fragment,{children:i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`pro-setting${s?"":" p-4"}`,children:[!s&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Pro Settings","kivicare-clinic-management-system")," ",u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/pro-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),s&&h&&i.jsx(wP,{}),!h&&i.jsxs("form",{onSubmit:x(re),children:[i.jsxs(Wr,{title:l("Theme Setting","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"rtl",control:v,render:({field:D})=>i.jsx(sn,{label:l("RTL Mode","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.rtl})}),i.jsx("div",{className:"mt-4",children:i.jsxs(Cg,{id:"pills-tab",activeKey:k,onSelect:D=>{_(D),D==="light"&&e&&n(),D==="dark"&&!e&&n()},className:"mb-3 nav-fill",children:[i.jsxs(Ic,{eventKey:"light",title:l("Light Mode","kivicare-clinic-management-system"),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"site_logo",control:v,render:({field:D})=>i.jsx(Ad,{label:l("Site Logo","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,className:"col-md-6",preview:!!D.value,disabled:a})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"site_mini_logo",control:v,render:({field:D})=>i.jsx(Ad,{label:l("Site Mini Logo","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,className:"col-md-6",preview:!!D.value,disabled:a})})})]}),i.jsx("div",{className:"row gy-4",children:i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[l("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:G,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"primaryColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Primary Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.primaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"secondaryColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Secondary Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.secondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"successColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Success Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.successColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"warningColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Warning Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.warningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"dangerColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Danger Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.dangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"infoColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Info Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.infoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"bodyBg",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Body Background Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.bodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"bodyColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Body Text Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.bodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"borderColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Border Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.borderColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"headingColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Heading Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.headingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"cardColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Card Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.cardColor,className:"form-control-color"})})})})]})]})})]}),i.jsx(Ic,{eventKey:"dark",title:l("Dark Mode","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"dark_site_logo",control:v,render:({field:D})=>i.jsx(Ad,{label:l("Site Logo","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,className:"col-md-6",preview:!!D.value,disabled:a})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"dark_site_mini_logo",control:v,render:({field:D})=>i.jsx(Ad,{label:l("Site Mini Logo","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,className:"col-md-6",preview:!!D.value,disabled:a})})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[l("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:G,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkPrimaryColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Primary Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkPrimaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkSecondaryColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Secondary Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkSecondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkSuccessColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Success Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkSuccessColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkWarningColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Warning Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkWarningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkDangerColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Danger Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkDangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkInfoColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Info Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkInfoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkBodyBg",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Body Background Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkBodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkBodyColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Body Text Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkBodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkHeadingColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Heading Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkHeadingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkCardColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Card Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkCardColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(be,{name:"darkBorderColor",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Border Color","kivicare-clinic-management-system"),type:"color",value:D.value,onChange:I=>{D.onChange(I),T()},disabled:a,error:w?.darkBorderColor,className:"form-control-color"})})})})]})]})]})})]})})]}),i.jsxs(Wr,{title:l("Dashboard Slug","kivicare-clinic-management-system"),children:[i.jsx("div",{className:"col-12",children:i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:l("Note :","kivicare-clinic-management-system")})," ",l("If you change slug here then you need to also change in general setting login redirect url slug","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"row gy-4 ",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"AdminSlug",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Admin Slug","kivicare-clinic-management-system"),value:D.value,onChange:I=>D.onChange(U(I?.target?I.target.value:I)),onKeyDown:H,placeholder:l("e.g. kivicare-admin","kivicare-clinic-management-system"),error:w?.AdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"clinicAdminSlug",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Clinic Admin Slug","kivicare-clinic-management-system"),value:D.value,onChange:I=>D.onChange(U(I?.target?I.target.value:I)),onKeyDown:H,placeholder:l("e.g. kivicare-clinic-admin","kivicare-clinic-management-system"),error:w?.clinicAdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"doctorSlug",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Doctor Slug","kivicare-clinic-management-system"),value:D.value,onChange:I=>D.onChange(U(I?.target?I.target.value:I)),onKeyDown:H,placeholder:l("e.g. kivicare-doctor","kivicare-clinic-management-system"),error:w?.doctorSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"receptionistSlug",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Receptionist Slug","kivicare-clinic-management-system"),value:D.value,onChange:I=>D.onChange(U(I?.target?I.target.value:I)),onKeyDown:H,placeholder:l("e.g. kivicare-receptionist","kivicare-clinic-management-system"),error:w?.receptionistSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(be,{name:"patientSlug",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Patient Slug","kivicare-clinic-management-system"),value:D.value,onChange:I=>D.onChange(U(I?.target?I.target.value:I)),onKeyDown:H,placeholder:l("e.g. kivicare-patient","kivicare-clinic-management-system"),error:w?.patientSlug})})})]})]}),i.jsxs(Wr,{title:l("WordPress Logo","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"wordpressLogoStatus",control:v,render:({field:D})=>i.jsx(sn,{label:l("Enable WordPress Logo","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.wordpressLogo})}),E||E=="on"?i.jsx(be,{name:"wordpressLogo",control:v,render:({field:D})=>i.jsx(Ad,{label:l("WordPress Logo","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,className:"col-md-6",preview:!!D.value,disabled:a})}):i.jsx(i.Fragment,{})]}),i.jsxs(Wr,{title:l("Custom Notification","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"enabledCustomizableSms",control:v,render:({field:D})=>i.jsx(sn,{label:l("Enable SMS","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.enabledCustomizableSms})}),i.jsx(be,{name:"enabledCustomizableWhatsApp",control:v,render:({field:D})=>i.jsx(sn,{label:l("Enable whatsApp","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.enabledCustomizableWhatsApp})})]}),i.jsxs(Wr,{title:l("Twilio Account Settings","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"enableTwilioSms",control:v,render:({field:D})=>i.jsx(sn,{label:l("SMS Configuration","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.enableTwilioSms})}),A||A=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:M.map(D=>i.jsx("div",{className:"col-lg-4",children:i.jsx(be,{name:D.key,control:v,rules:{required:A||A=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:D.isInteger&&(A||A=="on")?le:void 0},render:({field:I})=>i.jsx(Ht,{label:l(D.label,"kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,placeholder:l(D.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:w?.[D.key]})})},D.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>pe(!0),disabled:a||!y("twilioSmsAccountSID")||!y("twilioSmsAuthToken"),children:[i.jsx("i",{className:"ph ph-chat-circle-text"})," ",l("Send Test SMS","kivicare-clinic-management-system")]})}),i.jsx(e_,{isOpen:V,onClose:()=>pe(!1),isLoading:a,messageData:se,setMessageData:W,onSubmit:ie,mode:"sms",requiredFields:[{value:y("twilioSmsAccountSID"),label:"Account SID"},{value:y("twilioSmsAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Twilio SMS guide","kivicare-clinic-management-system")}),q.map(D=>i.jsx(t_,{title:D.title,text:D.text}))]})]}):i.jsx(i.Fragment,{}),i.jsx(be,{name:"enableTwilioWhatsApp",control:v,render:({field:D})=>i.jsx(sn,{label:l("WhatsApp Configuration","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.enableTwilioWhatsApp})}),L||L=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:O.map(D=>i.jsx("div",{className:"col-lg-4",children:i.jsx(be,{name:D.key,control:v,rules:{required:L||L=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:D.isInteger&&(L||L=="on")?le:void 0},render:({field:I})=>i.jsx(Ht,{label:l(D.label,"kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,placeholder:l(D.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:w?.[D.key]})})},D.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>ne(!0),disabled:a||!y("twilioWhatsAppAccountSID")||!y("twilioWhatsAppAuthToken"),children:[i.jsx("i",{className:"ph ph-whatsapp-logo"})," ",l("Send Test WhatsApp","kivicare-clinic-management-system")]})}),i.jsx(e_,{isOpen:oe,onClose:()=>ne(!1),isLoading:a,messageData:ge,setMessageData:ee,onSubmit:ue,mode:"whatsapp",requiredFields:[{value:y("twilioWhatsAppAccountSID"),label:"Account SID"},{value:y("twilioWhatsAppAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Twilio WhatsApp guide","kivicare-clinic-management-system")}),q.map(D=>i.jsx(t_,{title:D.title,text:D.text}))]})]}):i.jsx(i.Fragment,{})]}),i.jsxs(Wr,{title:l("Google Account Settings","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"googleCalendarConfiguration",control:v,render:({field:D})=>i.jsx(sn,{label:l("Google Calendar Configuration","kivicare-clinic-management-system"),className:"mb-3",checked:D.value,onChange:D.onChange,badge:C(D.value),disabled:a,error:w?.googleCalendarConfiguration})}),N||N=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:R.map(D=>i.jsx("div",{className:"col-lg-4",children:i.jsx(be,{name:D.key,control:v,rules:{required:N||N=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:D.isInteger&&(N||N=="on")?le:void 0},render:({field:I})=>i.jsx(Ht,{label:l(D.label,"kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,placeholder:l(D.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:w?.[D.key]})})},D.key))}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:p?.googleCalendarRedirectionUrl||"",readOnly:!0,disabled:a,placeholder:l("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{p?.googleCalendarRedirectionUrl&&(navigator.clipboard.writeText(p.googleCalendarRedirectionUrl),tt({title:l("Copied!","kivicare-clinic-management-system"),text:l("Redirection URL copied to clipboard","kivicare-clinic-management-system")}))},disabled:!p?.googleCalendarRedirectionUrl||a,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),l("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})})]}):i.jsx(i.Fragment,{}),i.jsx(be,{name:"patientCalendarEvent",control:v,render:({field:D})=>i.jsx(sn,{label:l("Setting for add event in calendar for patient.","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:a,error:w?.patientCalendarEvent})})]}),i.jsx(Wr,{title:l("Encounters Settings","kivicare-clinic-management-system"),children:P.map(D=>i.jsx(be,{name:D.key,control:v,render:({field:I})=>i.jsx(sn,{label:l(D.label,"kivicare-clinic-management-system"),className:"mb-3",checked:I.value,onChange:I.onChange,badge:C(I.value),disabled:a,error:w?.[D.key]})}))}),i.jsx(Wr,{title:l("Copyright","kivicare-clinic-management-system"),children:i.jsx(be,{name:"copyrightText",control:v,render:({field:D})=>i.jsx(Ht,{label:l("Change Copyright Text","kivicare-clinic-management-system"),placeholder:l("Western State Pain Institute","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,error:w?.copyrightText})})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})})})},ihe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks,a=dn("settings","sms-whatsapp-template"),r=dn("settings","sms-whatsapp-template/test"),[o,c]=f.useState(!1),[d,m]=f.useState(""),[u,p]=f.useState(!1),[h,g]=f.useState(!1),[v,x]=f.useState([]),y=()=>setShow(!1),b=()=>{p(!0),setTimeout(()=>g(!0),10)},w=()=>{g(!1),setTimeout(()=>p(!1),300)},{data:k,isLoading:_,error:j}=yn("settings","sms-whatsapp-template",{},{enabled:e}),T=L=>{const C=[];return!L||typeof L!="object"||Object.keys(L).forEach(P=>{(Array.isArray(L[P])?L[P]:[]).forEach(M=>{C.push({...M,user_type:P})})}),C};f.useEffect(()=>{if(!k?.status||!k.data){x([]);return}x(T(k.data.data))},[k]);const N=async(L,C)=>{c(!0);const P={ID:L,post_status:C==="publish"?"draft":"publish"};a.mutate(P,{onSuccess:()=>{x(R=>R.map(M=>M.ID===L?{...M,post_status:P.post_status}:M)),c(!1)},onError:R=>{console.error("Error submitting form:",R),c(!1)}})},E=On(),A=f.useMemo(()=>[E.accessor("post_title",{id:"templates",header:()=>l("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:L=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:L.getValue()})})}),E.accessor("user_type",{id:"recipient",header:()=>l("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:L=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:L.getValue()})})}),E.accessor("post_status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:L=>i.jsx(sn,{checked:L.getValue()==="publish",onChange:()=>N(L.row.original.ID,L.getValue()),inputClassName:"text-center"})}),E.accessor("ID",{id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:L=>i.jsx(ht,{to:`/setting/sms-whatsapp-template/edit/${L.getValue()}`,className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:l("Manage","kivicare-clinic-management-system")})})],[]);if(j){const L=typeof j=="string"?j:j?.response?.data?.message||j?.message||l("An unknown error occurred","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:l(L,"kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-smswhatsapp-template",role:"tabpanel","aria-labelledby":"v-pills-smswhatsapp-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`sms-template-setting${e?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("SMS/WhatsApp Template","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sms-whatsapp-template-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[i.jsx("button",{className:"btn btn-secondary",disabled:!e,onClick:()=>{e&&(m("sms"),b())},children:l("Send Test SMS","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",disabled:!e,onClick:()=>{e&&(m("whatsapp"),b())},children:l("Send Test Whatsapp","kivicare-clinic-management-system")})]}),!e&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(bn,{data:v,columns:A,enableSelection:!1,isLoading:o||_})})]})}),u&&i.jsxs(rt,{show:h,onHide:y,centered:!0,className:"modal",tabIndex:"-1",role:"dialog",children:[i.jsxs(rt.Header,{children:[i.jsx("h5",{className:"modal-title",children:d==="sms"?l("Send Test SMS","kivicare-clinic-management-system"):l("Send Test Whatsapp","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:w,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{children:i.jsxs("form",{onSubmit:L=>{L.preventDefault();const C=new FormData(L.target),P=C.get("mobile"),R=C.get("content");r.mutate({type:d,mobile:P,content:R},{onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Test message sent successfully!","kivicare-clinic-management-system")}),w()},onError:M=>{const O=M?.response?.data?.message||M?.message||l("Something went wrong","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:O})}})},children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"mobile",className:"form-label",children:l("Mobile Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"mobile",className:"form-control",required:!0})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"content",className:"form-label",children:l("Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"content",className:"form-control",rows:"3",required:!0})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:w,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r.isLoading,children:r.isLoading?l("Sending...","kivicare-clinic-management-system"):l("Send","kivicare-clinic-management-system")})]})]})})]})]})},she=()=>{const{id:t}=Yt(),e=mn(),{isAddonActive:n}=mt(),s=n("kiviPro"),[a,r]=f.useState(""),[o,c]=f.useState(""),[d,m]=f.useState(""),[u,p]=f.useState([]),[h,g]=f.useState(!0),[v,x]=f.useState(!1),y=dn("settings","sms-whatsapp-template"),{data:b,isLoading:w,error:k}=yn("settings","sms-whatsapp-template",{id:t},{enabled:s&&!!t,select:A=>A?.status&&A.data?{status:A.status,message:A.message,data:{post_content:A.data.templatePost?.post_content||"",post_status:A.data.templatePost?.post_status||"draft",post_title:A.data.templatePost?.post_title||"",content_sid:A.data.templatePost?.content_sid||"",dynamic_keys:A.data.dynamic_keys||[]}}:A});f.useEffect(()=>{if(b?.status&&b.data&&!v){const{post_content:A,content_sid:L,post_title:C,dynamic_keys:P}=b.data;r(A),c(L),m(C),p(P.map(R=>R.replace(/[{}]/g,""))),x(!0),g(!1)}},[b,v]),f.useEffect(()=>{if(k){let A;typeof k=="string"?A=k:k?.response?.data?.message?A=k.response.data.message:k?.message?A=k.message:A=l("Failed to load template","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:A}).then(()=>e(-1))}},[k,e]);const _=A=>{v&&r(A)},j=f.useCallback(A=>{navigator.clipboard.writeText(`{{${A}}}`),ZR.fire({title:l("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},[]),T=f.useCallback(async()=>{try{if(!v)return;g(!0);const A={ID:t,content_sid:o,post_content:a},L=await y.mutateAsync(A);L.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l(L.message,"kivicare-clinic-management-system")}):(tt({title:l("Success","kivicare-clinic-management-system"),text:l(L.message,"kivicare-clinic-management-system")}),e("/setting/sms-whatsapp-template"))}catch(A){Me({title:l("Error","kivicare-clinic-management-system"),text:l(A.message||"Failed to save template","kivicare-clinic-management-system")})}finally{g(!1)}},[t,o,a,y,e,v]),N={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},E=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return w&&!v||!b?i.jsx(of,{}):i.jsxs("div",{className:"edit-template-page",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Edit SMS/WhatsApp Template","kivicare-clinic-management-system")}),i.jsxs("button",{onClick:()=>e("/setting/sms-whatsapp-template"),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:h,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx("h5",{className:"mb-0",children:d})}),i.jsx("div",{className:"row mb-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Content SID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Enter Content SID","kivicare-clinic-management-system"),value:o,onChange:A=>c(A.target.value),disabled:h||!v})]})})}),u.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"form-label",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Ue,{placement:"top",overlay:L=>i.jsx(it,{...L,children:l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>j(A),disabled:h||!v,children:[A,i.jsx("i",{className:"ph ph-copy"})]},A)},A))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Template Content","kivicare-clinic-management-system")}),i.jsx(zo,{theme:"snow",value:a,onChange:_,modules:N,formats:E,readOnly:h||!v})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>e("/setting/sms-whatsapp-template"),disabled:h,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:T,disabled:h||!v,children:h?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})]})]})},ahe=()=>{const[t,e]=f.useState({page:1,per_page:10}),n=On(),{data:s,isLoading:a,error:r,refetch:o}=kP(t),c=Sie({onSuccess:()=>{Ee.success(l("Webhook status updated","kivicare-clinic-management-system")),o()},onError:()=>{Ee.error(l("Failed to update webhook status","kivicare-clinic-management-system"))}}),d=Nie({onSuccess:()=>{Ee.success(l("Webhook deleted successfully","kivicare-clinic-management-system")),o()},onError:()=>{Ee.error(l("Failed to delete webhook","kivicare-clinic-management-system"))}}),m=s?.data?.data||[],u={currentPage:s?.data?.pagination?.currentPage||1,perPage:s?.data?.pagination?.perPage||10,totalItems:s?.data?.pagination?.total||0,lastPage:s?.data?.pagination?.lastPage||1},p=async(w,k)=>{const _=k===1?0:1;console.log(k),c.mutate({id:w,status:_})},h=w=>{dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(k=>{k.isConfirmed&&d.mutate(w)})},g=f.useMemo(()=>[n.accessor("id",{header:l("ID","kivicare-clinic-management-system"),cell:w=>w.getValue(),enableSorting:!0}),n.accessor("name",{header:l("Name","kivicare-clinic-management-system"),cell:w=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-semibold",children:w.getValue()}),i.jsx("small",{className:"text-muted",children:w.row.original.module_name})]}),enableSorting:!0}),n.accessor("endpoint",{header:l("Endpoint","kivicare-clinic-management-system"),cell:w=>{const k=w.getValue();return i.jsx("code",{className:"text-break",children:k})},enableSorting:!1}),n.accessor("event_name",{header:l("Event","kivicare-clinic-management-system"),cell:w=>i.jsx("span",{className:"badge bg-info",children:w.getValue()}),enableSorting:!0}),n.accessor("status",{header:l("Status","kivicare-clinic-management-system"),cell:w=>{const k=w.row.original,_=w.getValue();return i.jsx("div",{className:"d-flex align-items-center",children:i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`status-toggle-${k.id}`,defaultChecked:_===1,onChange:()=>p(k.id,_)})})})},enableSorting:!0}),n.accessor("updated_at",{header:l("Last Delivery","kivicare-clinic-management-system"),cell:w=>{const k=w.getValue();return i.jsx("span",{children:k?new Date(k).toLocaleDateString():l("Never","kivicare-clinic-management-system")})},enableSorting:!0}),n.display({id:"actions",header:l("Actions","kivicare-clinic-management-system"),cell:w=>{const k=w.row.original;return i.jsxs("div",{className:"d-flex align-items-center gap-3",role:"group",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Edit Webhook","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`/setting/webhooks/configuration/edit/${k.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Delete Webhook","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"btn btn-link text-danger fs-5 p-0",onClick:()=>h(k.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[n]),v=w=>{e(k=>({...k,page:w}))},x=w=>{e(k=>({...k,page:1,per_page:w}))},y=w=>{console.log("Sorting changed:",w)},b=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:g.length,className:"text-center py-4 border-start border-end",children:i.jsxs("div",{className:"d-flex flex-column align-items-center",children:[i.jsx("i",{className:"ph ph-webhook text-muted"}),i.jsx("p",{className:"text-muted mb-3",children:l("No webhooks configured yet","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-outline-primary btn-sm",children:l("Create Your First Webhook","kivicare-clinic-management-system")})]})})});return a?i.jsx(gie,{}):i.jsxs("div",{className:"webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h4",{className:"mb-0",children:l("Webhook Configuration","kivicare-clinic-management-system")}),i.jsxs(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-plus me-2"}),l("Add Webhook","kivicare-clinic-management-system")]})]}),i.jsx(bn,{data:m,columns:g,isLoading:a,error:r,pagination:u,currentPage:u.currentPage,perPage:u.perPage,totalItems:u.totalItems,lastPage:u.lastPage,onPageChange:v,onPerPageChange:x,onSortingChange:y,moduleNamePlural:"webhooks",renderEmptyState:b,enableSelection:!1,manualPagination:!0,manualFiltering:!0})]})},rhe=()=>{const[t,e]=f.useState({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),[n,s]=f.useState(!1),[a,r]=f.useState(null),{data:o,isLoading:c,error:d,refetch:m}=_ie(t);Eie();const u=Tie({onSuccess:()=>{toast.success(l("Events log deleted successfully","kivicare-clinic-management-system")),m()},onError:()=>{toast.error(l("Failed to delete event log","kivicare-clinic-management-system"))}}),[p,h]=f.useState(!1),g=f.useMemo(()=>[{type:"number",name:"webhook_id",label:l("Webhook ID","kivicare-clinic-management-system"),placeholder:l("Enter webhook ID","kivicare-clinic-management-system")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("All Statuses","kivicare-clinic-management-system"),options:[{value:"success",label:l("Success","kivicare-clinic-management-system")},{value:"failed",label:l("Failed","kivicare-clinic-management-system")},{value:"pending",label:l("Pending","kivicare-clinic-management-system")}]},{type:"dateRange",name:"date_range",label:l("Date Range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to",placeholder:l("Select date range","kivicare-clinic-management-system")}],[]),v=f.useMemo(()=>["webhook_id","status","date_from","date_to"].some(A=>{const L=t[A];return L!=null&&L!==""}),[t]),x=f.useMemo(()=>[{accessorKey:"id",header:l("ID","kivicare-clinic-management-system"),size:80},{accessorKey:"webhook_name",header:l("Webhook","kivicare-clinic-management-system"),cell:({row:E})=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-medium",children:E.original.webhook_name||l("Unknown Webhook","kivicare-clinic-management-system")}),i.jsxs("div",{className:"text-muted small",children:["ID: ",E.original.webhook_id]})]})},{accessorKey:"event_type",header:l("Event Type","kivicare-clinic-management-system"),cell:({row:E})=>i.jsx(ma,{bg:"primary",children:E.original.event_type||l("Unknown","kivicare-clinic-management-system")})},{accessorKey:"status",header:l("Status","kivicare-clinic-management-system"),cell:({row:E})=>{const A=E.original.status,L={success:"success",failed:"danger",pending:"warning"};return i.jsx(ma,{bg:L[A]||"secondary",children:A||l("Unknown","kivicare-clinic-management-system")})}},{accessorKey:"created_at",header:l("Created At","kivicare-clinic-management-system"),cell:({row:E})=>{const A=new Date(E.original.created_at);return i.jsxs(i.Fragment,{children:[i.jsx("div",{children:A.toLocaleDateString()}),i.jsx("div",{children:A.toLocaleTimeString()})]})}},{accessorKey:"execution_time",header:l("Execution Time","kivicare-clinic-management-system"),cell:({row:E})=>i.jsx("span",{children:E.original.execution_time?`${E.original.execution_time}ms`:"-"})},{accessorKey:"actions",header:l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:E})=>{const A=L=>C=>i.jsx(it,{...C,children:L});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(Ue,{placement:"top",overlay:A(l("View Log Details","kivicare-clinic-management-system")),children:i.jsx("button",{onClick:()=>w(E.original),className:"btn btn-link",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Ue,{placement:"top",overlay:A(l("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>j(E.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}}],[]),y=E=>{e(A=>({...A,page:E}))},b=E=>{e(A=>({...A,page:1,per_page:E}))},w=E=>{r(E),s(!0)},k=E=>{e(A=>({...A,...E,page:1})),h(!1)},_=()=>{e({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),h(!1)},j=E=>{dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(A=>{A.isConfirmed&&u.mutate(E)})};l("Delete","kivicare-clinic-management-system");const T=o?.data?.logs||[],N=o?.data?.pagination||{};return i.jsxs(No,{fluid:!0,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h5",{className:"mb-0",children:l("Webhook Event Logs","kivicare-clinic-management-system")}),i.jsxs(Zt,{variant:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>h(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),l("Filters","kivicare-clinic-management-system")]})]}),i.jsx(bn,{data:T,columns:x,isLoading:c,error:d,pagination:N,currentPage:t.currentPage,perPage:t.perPage,totalItems:N.total||0,lastPage:N.lastPage||1,onPageChange:y,onPerPageChange:b,enableSelection:!0,moduleNamePlural:l("webhook logs","kivicare-clinic-management-system"),bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(E,A)=>{const L=E.map(C=>C.id);dt({title:l("Delete Events log?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${E.length} events log</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep events log","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(C=>{C.isConfirmed&&u.mutate(L)})},icon:i.jsx("i",{className:"ph ph-trash"})}],bulkActionsButtonText:l("Bulk Actions","kivicare-clinic-management-system")}),i.jsxs(rt,{show:n,onHide:()=>s(!1),size:"xl",scrollable:!0,children:[i.jsxs(rt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[l("Webhook Log Details","kivicare-clinic-management-system")," - ",a?.webhook_name]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>s(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{className:"p-4",children:a&&i.jsxs(i.Fragment,{children:[i.jsxs(Qn,{className:"",children:[i.jsx(_t,{md:6,children:i.jsxs(Ct,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:l("Event Information","kivicare-clinic-management-system")})}),i.jsx(Lx,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Event Type","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ma,{bg:"primary",children:a.event_type})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Status","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ma,{bg:a.status==="success"?"success":a.status==="failed"?"danger":"warning",children:a.status})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Execution Time","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:a.execution_time?`${a.execution_time}ms`:"-"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Created At","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:new Date(a.created_at).toLocaleString()})]})]})})]})}),i.jsx(_t,{md:6,children:i.jsxs(Ct,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:l("Response Information","kivicare-clinic-management-system")})}),i.jsx(Lx,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Response Code","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ma,{bg:a.response_code>=200&&a.response_code<300?"success":"danger",children:a.response_code||"-"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Response Body","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{className:"small text-truncate",style:{maxWidth:"200px"},children:a.response?.body?a.response.body.substring(0,100)+"...":"-"})]})]})})]})})]}),a.payload&&i.jsxs(Ct,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:l("Payload Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.payload,null,2)})})]}),a.response&&i.jsxs(Ct,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:l("Response Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.response,null,2)})})]}),a.error_message&&i.jsxs(Ct,{children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0 text-danger",children:l("Error Message","kivicare-clinic-management-system")})}),i.jsx("div",{className:"alert alert-danger",children:i.jsx("pre",{children:i.jsx("code",{children:a.error_message})})})]})]})}),i.jsx(rt.Footer,{children:i.jsx(Zt,{variant:"secondary",onClick:()=>s(!1),children:l("Close","kivicare-clinic-management-system")})})]}),i.jsx(na,{show:p,onHide:()=>h(!1),queryParams:t,onApplyFilters:k,onResetFilters:_,title:l("Filter Webhook Logs","kivicare-clinic-management-system"),fields:g,hasAppliedFilters:v})]})},aI=({initialData:t=null,onSubmit:e,isLoading:n=!1,isEditing:s=!1})=>{const[a,r]=f.useState(null),[o,c]=f.useState([]),[d,m]=f.useState({header:[],body:[],query_params:[]}),[u,p]=f.useState(!0),{control:h,handleSubmit:g,formState:{errors:v},setValue:x,watch:y,reset:b,getValues:w}=Jt({defaultValues:{name:"",moduleName:"",eventName:"",webhookUrl:"",httpMethod:"POST",status:1,authMethod:"none",authConfig:{apiKey:"",keyLocation:"header",headerName:"Authorization",username:"",password:"",encoding:"Base64",bearerToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",accessToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature"},contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBody:"",timeout:30,retryAttempts:3,retryDelay:5,enableSSL:!0}}),{fields:k,append:_,remove:j}=kr({control:h,name:"customHeaders"}),{fields:T,append:N,remove:E}=kr({control:h,name:"queryParams"}),A=y(),[L,C]=f.useState(!1),[P,R]=f.useState(!1),[M,O]=f.useState(""),[q,U]=f.useState(""),[H,ae]=f.useState(!1),[V,pe]=f.useState(null),oe=f.useRef(null);f.useEffect(()=>{(async()=>{try{const Y=await Qi.getTableConfig();Y.data&&r(Y.data)}catch(Y){console.error("Failed to load table config:",Y),Ee.error(l("Failed to load configuration","kivicare-clinic-management-system"))}finally{p(!1)}})()},[]),f.useEffect(()=>{const te=y((Y,{name:Ce})=>{if(Y.moduleName){const ye=a?.modules?.find(Te=>Te.value===Y.moduleName);ye&&(c(ye.events||[]),Ce==="moduleName"&&!s&&x("eventName",""),m({header:[],body:[],query_params:[]}))}if(Y.eventName){const ye=o.find(Te=>Te.value===Y.eventName);ye?.dynamic_variables&&m(ye.dynamic_variables)}});return()=>te.unsubscribe()},[a,y,o,x,s]),f.useEffect(()=>{const te=w("moduleName");if(te&&a?.modules){const Y=a.modules.find(Ce=>Ce.value===te);Y&&c(Y.events||[])}},[a,w]),f.useEffect(()=>{const te=w("eventName");if(te&&o.length>0){const Y=o.find(Ce=>Ce.value===te);Y?.dynamic_variables&&m(Y.dynamic_variables)}},[o,w]),f.useEffect(()=>{s&&t&&(console.log("Initial Data:",t),b({name:t.name||"",moduleName:t.moduleName||"",eventName:t.eventName||"",webhookUrl:t?.webhookData?.url||"",httpMethod:t?.methods||"POST",status:t.status||1,authMethod:t?.webhookData?.auth_method||"none",authConfig:{apiKey:t?.webhookData?.auth_config?.api_key||"",keyLocation:t?.webhookData?.auth_config?.key_location||"header",headerName:t?.webhookData?.auth_config?.header_name||"Authorization",username:t?.webhookData?.auth_config?.username||"",password:t?.webhookData?.auth_config?.password||"",encoding:t?.webhookData?.auth_config?.encoding||"Base64",bearerToken:t?.webhookData?.auth_config?.bearer_token||"",tokenType:t?.webhookData?.auth_config?.token_type||"Bearer",tokenExpiry:t?.webhookData?.auth_config?.token_expiry||"",clientId:t?.webhookData?.auth_config?.client_id||"",clientSecret:t?.webhookData?.auth_config?.client_secret||"",authUrl:t?.webhookData?.auth_config?.auth_url||"",tokenUrl:t?.webhookData?.auth_config?.token_url||"",redirectUrl:t?.webhookData?.auth_config?.redirect_url||"",scopes:t?.webhookData?.auth_config?.scopes||"",refreshToken:t?.webhookData?.auth_config?.refresh_token||"",accessToken:t?.webhookData?.auth_config?.access_token||"",jwtIssuer:t?.webhookData?.auth_config?.jwt_issuer||"",jwtSubject:t?.webhookData?.auth_config?.jwt_subject||"",jwtAudience:t?.webhookData?.auth_config?.jwt_audience||"",jwtPrivateKey:t?.webhookData?.auth_config?.jwt_private_key||"",jwtAlgorithm:t?.webhookData?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:t?.webhookData?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:t?.webhookData?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:t?.webhookData?.auth_config?.hmac_access_key||"",hmacSecretKey:t?.webhookData?.auth_config?.hmac_secret_key||"",hmacAlgorithm:t?.webhookData?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:t?.webhookData?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:t?.webhookData?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:t?.webhookData?.content_type||"application/json",customHeaders:t?.webhookData?.custom_headers?.length>0?t.webhookData.custom_headers:[{key:"",value:""}],queryParams:t?.webhookData?.query_params?.length>0?t.webhookData.query_params:[{key:"",value:""}],requestBody:t?.webhookData?.request_body||"",timeout:t?.webhookData?.timeout||30,retryAttempts:t?.webhookData?.retry_attempts||3,retryDelay:t?.webhookData?.retry_delay||5,enableSSL:t?.webhookData?.enable_ssl!==!1}))},[s,t,b]),f.useEffect(()=>{if(A.authMethod==="oauth2"&&!A.authConfig.redirectUrl){const te=window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback";x("authConfig.redirectUrl",te)}},[A.authMethod,A.authConfig.redirectUrl,x]);const ne=async te=>{try{await navigator.clipboard.writeText(te),Ee.success(l("Copied to clipboard!","kivicare-clinic-management-system"))}catch(Y){console.error("Failed to copy:",Y),Ee.error(l("Failed to copy to clipboard","kivicare-clinic-management-system"))}},se=te=>{if(O(te),!te.trim()){U(""),ae(!1),pe(null);return}try{const Y=JSON.parse(te);if(!Y.name){U(l("Missing required field: name","kivicare-clinic-management-system")),ae(!1),pe(null);return}if(!Y.module_name){U(l("Missing required field: module_name","kivicare-clinic-management-system")),ae(!1),pe(null);return}if(!Y.webhook_data?.url){U(l("Missing required field: webhook_data.url","kivicare-clinic-management-system")),ae(!1),pe(null);return}U(""),ae(!0),pe(Y)}catch(Y){U(l("Invalid JSON format: ","kivicare-clinic-management-system")+Y.message),ae(!1),pe(null)}},W=te=>{const Y=te.target.files[0];if(!Y)return;if(!Y.name.endsWith(".json")){Ee.error(l("Please select a valid JSON file","kivicare-clinic-management-system"));return}const Ce=new FileReader;Ce.onload=ye=>{try{const Te=ye.target.result;se(Te)}catch{Ee.error(l("Failed to read file","kivicare-clinic-management-system"))}},Ce.onerror=()=>{Ee.error(l("Failed to read file","kivicare-clinic-management-system"))},Ce.readAsText(Y)},ge=()=>{if(!H||!V){Ee.error(l("Please provide valid JSON configuration","kivicare-clinic-management-system"));return}try{b({name:V.name||"",moduleName:V.module_name||"",eventName:V.event_name||"",webhookUrl:V.webhook_data?.url||"",httpMethod:V.methods||"POST",status:V.status||1,authMethod:V.webhook_data?.auth_method||"none",authConfig:{apiKey:V.webhook_data?.auth_config?.api_key||"",keyLocation:V.webhook_data?.auth_config?.key_location||"header",headerName:V.webhook_data?.auth_config?.header_name||"Authorization",username:V.webhook_data?.auth_config?.username||"",password:V.webhook_data?.auth_config?.password||"",encoding:V.webhook_data?.auth_config?.encoding||"Base64",bearerToken:V.webhook_data?.auth_config?.bearer_token||"",tokenType:V.webhook_data?.auth_config?.token_type||"Bearer",tokenExpiry:V.webhook_data?.auth_config?.token_expiry||"",clientId:V.webhook_data?.auth_config?.client_id||"",clientSecret:V.webhook_data?.auth_config?.client_secret||"",authUrl:V.webhook_data?.auth_config?.auth_url||"",tokenUrl:V.webhook_data?.auth_config?.token_url||"",redirectUrl:V.webhook_data?.auth_config?.redirect_url||"",scopes:V.webhook_data?.auth_config?.scopes||"",refreshToken:V.webhook_data?.auth_config?.refresh_token||"",accessToken:V.webhook_data?.auth_config?.access_token||"",jwtIssuer:V.webhook_data?.auth_config?.jwt_issuer||"",jwtSubject:V.webhook_data?.auth_config?.jwt_subject||"",jwtAudience:V.webhook_data?.auth_config?.jwt_audience||"",jwtPrivateKey:V.webhook_data?.auth_config?.jwt_private_key||"",jwtAlgorithm:V.webhook_data?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:V.webhook_data?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:V.webhook_data?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:V.webhook_data?.auth_config?.hmac_access_key||"",hmacSecretKey:V.webhook_data?.auth_config?.hmac_secret_key||"",hmacAlgorithm:V.webhook_data?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:V.webhook_data?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:V.webhook_data?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:V.webhook_data?.content_type||"application/json",customHeaders:V.webhook_data?.custom_headers?.length>0?V.webhook_data.custom_headers:[{key:"",value:""}],queryParams:V.webhook_data?.query_params?.length>0?V.webhook_data.query_params:[{key:"",value:""}],requestBody:V.webhook_data?.request_body||"",timeout:V.webhook_data?.timeout||30,retryAttempts:V.webhook_data?.retry_attempts||3,retryDelay:V.webhook_data?.retry_delay||5,enableSSL:V.webhook_data?.enable_ssl!==!1}),ee(),Ee.success(l("Webhook configuration imported successfully!","kivicare-clinic-management-system"))}catch(te){console.error("Import error:",te),Ee.error(l("Failed to import configuration. Please try again.","kivicare-clinic-management-system"))}},ee=()=>{R(!1),O(""),U(""),ae(!1),pe(null),oe.current&&(oe.current.value="")},ie=async()=>{const{clientId:te,authUrl:Y,redirectUrl:Ce,scopes:ye}=A.authConfig;if(!te||!Y||!Ce){Ee.error(l("Please fill in Client ID, Authorization URL, and Redirect URL","kivicare-clinic-management-system"));return}C(!0);try{const Te=new URLSearchParams({client_id:te,redirect_uri:Ce,response_type:"code",scope:ye||"",state:Math.random().toString(36).substring(7)}),et=`${Y}?${Te.toString()}`,kt=600,At=700,qt=window.screenX+(window.outerWidth-kt)/2,Ie=window.screenY+(window.outerHeight-At)/2,De=window.open(et,"OAuth2 Authorization",`width=${kt},height=${At},left=${qt},top=${Ie},toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes`);if(!De){Ee.error(l("Popup blocked. Please allow popups for this site.","kivicare-clinic-management-system")),C(!1);return}const xe=async Oe=>{Oe.origin===window.location.origin&&Oe.data.type==="oauth2_callback"&&(window.removeEventListener("message",xe),De.close(),Oe.data.code?await ue(Oe.data.code):Oe.data.error&&(Ee.error(l("Authorization failed: ","kivicare-clinic-management-system")+Oe.data.error),C(!1)))};window.addEventListener("message",xe);const ke=setInterval(()=>{De.closed&&(clearInterval(ke),window.removeEventListener("message",xe),C(!1))},1e3)}catch(Te){console.error("OAuth2 generation error:",Te),Ee.error(l("Failed to generate OAuth2 token","kivicare-clinic-management-system")),C(!1)}},ue=async te=>{const{clientId:Y,clientSecret:Ce,tokenUrl:ye,redirectUrl:Te}=A.authConfig;try{const et=await Qi.exchangeOAuth2Token({code:te,clientId:Y,clientSecret:Ce,tokenUrl:ye,redirectUri:Te});x("authConfig.accessToken",et?.data?.access_token),et?.data?.refresh_token&&x("authConfig.refreshToken",et?.data?.refresh_token),Ee.success(l("OAuth2 tokens generated successfully!","kivicare-clinic-management-system")),C(!1)}catch(et){console.error("Token exchange error:",et),Ee.error(l("Failed to exchange authorization code for token","kivicare-clinic-management-system")),C(!1)}},G=async()=>{const{clientId:te,clientSecret:Y,tokenUrl:Ce,refreshToken:ye}=A.authConfig;if(!ye){Ee.error(l("No refresh token available","kivicare-clinic-management-system"));return}C(!0);try{const Te=await Qi.refreshOAuth2Token({refreshToken:ye,clientId:te,clientSecret:Y,tokenUrl:Ce});console.log(Te,"test"),x("authConfig.accessToken",Te.data.access_token),Te.data.refresh_token&&x("authConfig.refreshToken",Te.data.refresh_token),Ee.success(l("Access token refreshed successfully!","kivicare-clinic-management-system")),C(!1)}catch(Te){console.error("Token refresh error:",Te),Ee.error(l("Failed to refresh access token","kivicare-clinic-management-system")),C(!1)}},le=a?.modules?.map(te=>({value:te.value,label:te.label}))||[],re=o.map(te=>({value:te.value,label:te.label})),D=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],I=[{value:"none",label:l("No Authentication","kivicare-clinic-management-system")},{value:"apikey",label:l("API Key Authentication","kivicare-clinic-management-system")},{value:"basic",label:l("Basic Authentication","kivicare-clinic-management-system")},{value:"bearer",label:l("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")},{value:"oauth2",label:l("OAuth2 Authentication","kivicare-clinic-management-system")},{value:"hmac",label:l("HMAC / Signature Authentication","kivicare-clinic-management-system")}],ce=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],Z=[{value:"header",label:l("Header","kivicare-clinic-management-system")},{value:"query",label:l("Query Parameter","kivicare-clinic-management-system")}],K=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],B=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}];l("Minutes","kivicare-clinic-management-system"),l("Hours","kivicare-clinic-management-system"),l("Days","kivicare-clinic-management-system");const F=()=>{switch(A.contentType){case"application/json":return`{
                    "event": "{{event_name}}",
                    "module": "{{module_name}}",
                    "data": {
                        "id": "{{record_id}}",
                        "timestamp": "{{timestamp}}"
                    }}`;case"application/xml":return`<?xml version="1.0"?>
                    <webhook>
                    <event>{{event_name}}</event>
                    <module>{{module_name}}</module>
                    <data>
                        <id>{{record_id}}</id>
                        <timestamp>{{timestamp}}</timestamp>
                    </data>
                    </webhook>`;case"application/x-www-form-urlencoded":return"event={{event_name}}&module={{module_name}}&id={{record_id}}&timestamp={{timestamp}}";default:return"Use variables like {{event_name}}, {{module_name}}, {{record_id}}, {{timestamp}}"}},J=()=>["POST","PUT","PATCH"].includes(A.httpMethod),Q=te=>{const Y={};te.authMethod==="apikey"?(Y.api_key=te.authConfig.apiKey,Y.key_location=te.authConfig.keyLocation,Y.header_name=te.authConfig.headerName):te.authMethod==="basic"?(Y.username=te.authConfig.username,Y.password=te.authConfig.password,Y.encoding=te.authConfig.encoding):te.authMethod==="bearer"?(Y.bearer_token=te.authConfig.bearerToken,Y.token_type=te.authConfig.tokenType,Y.token_expiry=te.authConfig.tokenExpiry):te.authMethod==="oauth2"?(Y.client_id=te.authConfig.clientId,Y.client_secret=te.authConfig.clientSecret,Y.auth_url=te.authConfig.authUrl,Y.token_url=te.authConfig.tokenUrl,Y.redirect_url=te.authConfig.redirectUrl,Y.scopes=te.authConfig.scopes,Y.refresh_token=te.authConfig.refreshToken,Y.access_token=te.authConfig.accessToken):te.authMethod==="hmac"&&(Y.hmac_access_key=te.authConfig.hmacAccessKey,Y.hmac_secret_key=te.authConfig.hmacSecretKey,Y.hmac_algorithm=te.authConfig.hmacAlgorithm,Y.hmac_signature_location=te.authConfig.hmacSignatureLocation,Y.hmac_header_param_name=te.authConfig.hmacHeaderParamName);const Ce=te.customHeaders.filter(et=>et.key&&et.value),ye=te.queryParams.filter(et=>et.key&&et.value),Te={url:te.webhookUrl,method:te.httpMethod,auth_method:te.authMethod,auth_config:Y,content_type:te.contentType,custom_headers:Ce,query_params:ye,request_body:te.requestBody,timeout:parseInt(te.timeout),retry_attempts:parseInt(te.retryAttempts),retry_delay:parseInt(te.retryDelay),enable_ssl:te.enableSSL};return{name:te.name,module_name:te.moduleName,event_name:te.eventName,methods:te.httpMethod,webhook_data:Te,status:te.status}},me=te=>{const Y=Q(te);e(Y)};return i.jsxs("form",{onSubmit:g(me),className:"webhook-form",children:[i.jsx("div",{className:"d-flex justify-content-end gap-2 mb-3",children:i.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>R(!0),children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import JSON","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Basic Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Webhook Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"name",control:h,rules:{required:l("Webhook name is required","kivicare-clinic-management-system")},render:({field:te})=>i.jsx("input",{...te,type:"text",className:`form-control ${v.name?"is-invalid":""}`,placeholder:l("Enter webhook name","kivicare-clinic-management-system")})}),v.name&&i.jsx("div",{className:"invalid-feedback d-block",children:v.name.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"moduleName",control:h,rules:{required:l("Module is required","kivicare-clinic-management-system")},render:({field:te})=>i.jsx(lt,{...te,options:le,className:`react-select-box ${v.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:l("Select module","kivicare-clinic-management-system"),value:le.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})}),v.moduleName&&i.jsx("div",{className:"invalid-feedback d-block",children:v.moduleName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Event","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"eventName",control:h,rules:{required:l("Event is required","kivicare-clinic-management-system")},render:({field:te})=>i.jsx(lt,{...te,options:re,className:`react-select-box ${v.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:l("Select event","kivicare-clinic-management-system"),value:re.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})}),v.eventName&&i.jsx("div",{className:"invalid-feedback d-block",children:v.eventName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"httpMethod",control:h,rules:{required:l("HTTP method is required","kivicare-clinic-management-system")},render:({field:te})=>i.jsx(lt,{...te,options:D,value:D.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[l("Webhook URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"webhookUrl",control:h,rules:{required:l("Webhook URL is required","kivicare-clinic-management-system"),pattern:{value:/^https?:\/\/.+/,message:l("Please enter a valid URL","kivicare-clinic-management-system")}},render:({field:te})=>i.jsx("input",{...te,type:"url",className:`form-control ${v.webhookUrl?"is-invalid":""}`,placeholder:"https://example.com/webhook"})}),v.webhookUrl&&i.jsx("div",{className:"invalid-feedback d-block",children:v.webhookUrl.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Status","kivicare-clinic-management-system")}),i.jsx(be,{name:"status",control:h,render:({field:te})=>i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{...te,type:"checkbox",className:"form-check-input",checked:te.value===1,onChange:Y=>te.onChange(Y.target.checked?1:0)}),i.jsx("label",{className:"form-check-label",children:te.value===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})]})})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Authentication","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Authentication Method","kivicare-clinic-management-system")}),i.jsx(be,{name:"authMethod",control:h,render:({field:te})=>i.jsx(lt,{...te,options:I,value:I.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),A.authMethod==="apikey"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("API Key","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.apiKey",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Enter API key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:l("Location","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.keyLocation",control:h,render:({field:te})=>i.jsx(lt,{...te,options:Z,className:"react-select-box",classNamePrefix:"react-select",value:Z.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:l("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.headerName",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:"Authorization"})})]})]}),A.authMethod==="basic"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Username","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.username",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Enter username","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Password","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.password",control:h,render:({field:te})=>i.jsx("input",{...te,type:"password",className:"form-control",placeholder:l("Enter password","kivicare-clinic-management-system")})})]})]}),A.authMethod==="bearer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-8",children:[i.jsx("label",{className:"form-label",children:l("Bearer Token","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.bearerToken",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Enter bearer token","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Token Type","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.tokenType",control:h,render:({field:te})=>i.jsx(lt,{...te,options:K,className:"react-select-box",classNamePrefix:"react-select",value:K.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-12",children:[i.jsx("label",{className:"form-label",children:l("Token Expiry (Optional)","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.tokenExpiry",control:h,render:({field:te})=>i.jsx("input",{...te,type:"datetime-local",className:"form-control"})}),i.jsx("small",{className:"text-muted",children:l("Set when the token expires to get a reminder to refresh it","kivicare-clinic-management-system")})]})]}),A.authMethod==="oauth2"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),l("OAuth2 allows secure authorization without sharing passwords. Configure your OAuth2 provider settings below.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.clientId",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Enter client ID","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.clientSecret",control:h,render:({field:te})=>i.jsx("input",{...te,type:"password",className:"form-control",placeholder:l("Enter client secret","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Authorization URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.authUrl",control:h,render:({field:te})=>i.jsx("input",{...te,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/authorize"})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Token URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.tokenUrl",control:h,render:({field:te})=>i.jsx("input",{...te,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/token"})})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Redirect URL (Callback)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx(be,{name:"authConfig.redirectUrl",control:h,render:({field:te})=>i.jsx("input",{...te,type:"url",className:"form-control",placeholder:window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback",readOnly:!0})}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>ne(A.authConfig.redirectUrl),title:l("Copy to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:l("Configure this URL in your OAuth2 provider settings","kivicare-clinic-management-system")})]}),"                                ",i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Scopes","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.scopes",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:"read write admin"})}),i.jsx("small",{className:"text-muted",children:l("Space-separated list of permission scopes","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Access Token","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.accessToken",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Refresh Token","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.refreshToken",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary",onClick:ie,disabled:L||!A.authConfig.clientId||!A.authConfig.authUrl||!A.authConfig.redirectUrl,children:L?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Authorizing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),l("Generate OAuth2 Token","kivicare-clinic-management-system")]})}),A.authConfig.refreshToken&&i.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:G,disabled:L,children:[i.jsx("i",{className:"ph ph-arrows-clockwise me-2"}),l("Refresh Token","kivicare-clinic-management-system")]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:l('Click "Generate OAuth2 Token" to open authorization popup and obtain access tokens',"kivicare-clinic-management-system")})]})]}),A.authMethod==="hmac"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),l("HMAC (Hash-based Message Authentication Code) provides request signing for enhanced security.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Access Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.hmacAccessKey",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:l("Enter access key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(be,{name:"authConfig.hmacSecretKey",control:h,render:({field:te})=>i.jsx("input",{...te,type:"password",className:"form-control",placeholder:l("Enter secret key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.hmacAlgorithm",control:h,render:({field:te})=>i.jsx(lt,{...te,options:B,className:"react-select-box",classNamePrefix:"react-select",value:B.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Signature Location","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.hmacSignatureLocation",control:h,render:({field:te})=>i.jsx(lt,{...te,options:Z,className:"react-select-box",classNamePrefix:"react-select",value:Z.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(be,{name:"authConfig.hmacHeaderParamName",control:h,render:({field:te})=>i.jsx("input",{...te,type:"text",className:"form-control",placeholder:"X-Signature"})})]})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Request Configuration","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Content Type","kivicare-clinic-management-system")}),i.jsx(be,{name:"contentType",control:h,render:({field:te})=>i.jsx(lt,{...te,options:ce,className:"react-select-box",classNamePrefix:"react-select",value:ce.find(Y=>Y.value===te.value),onChange:Y=>te.onChange(Y?.value),styles:{menuPortal:Y=>({...Y,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:l("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>_({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Header","kivicare-clinic-management-system")]})]}),k.map((te,Y)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(be,{name:`customHeaders.${Y}.key`,control:h,render:({field:Ce})=>i.jsx("input",{...Ce,type:"text",className:"form-control",placeholder:l("Header Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(be,{name:`customHeaders.${Y}.value`,control:h,render:({field:Ce})=>i.jsx(lt,{...Ce,options:d.header?.map(ye=>({value:ye,label:ye}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Header Value","kivicare-clinic-management-system"),isClearable:!0,value:Ce.value?{value:Ce.value,label:Ce.value}:null,onChange:ye=>Ce.onChange(ye?.value||""),onInputChange:(ye,{action:Te})=>{Te==="input-change"&&Ce.onChange(ye)},styles:{menuPortal:ye=>({...ye,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>j(Y),children:i.jsx("i",{className:"ph ph-trash"})})})]},te.id))]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:l("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>N({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Parameter","kivicare-clinic-management-system")]})]}),T.map((te,Y)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(be,{name:`queryParams.${Y}.key`,control:h,render:({field:Ce})=>i.jsx("input",{...Ce,type:"text",className:"form-control",placeholder:l("Parameter Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(be,{name:`queryParams.${Y}.value`,control:h,render:({field:Ce})=>i.jsx(lt,{...Ce,options:d.query_params?.map(ye=>({value:ye,label:ye}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Parameter Value","kivicare-clinic-management-system"),isClearable:!0,value:Ce.value?{value:Ce.value,label:Ce.value}:null,onChange:ye=>Ce.onChange(ye?.value||""),onInputChange:(ye,{action:Te})=>{Te==="input-change"&&Ce.onChange(ye)},styles:{menuPortal:ye=>({...ye,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>E(Y),children:i.jsx("i",{className:"ph ph-trash"})})})]},te.id))]}),J()&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-2",children:i.jsx("label",{className:"form-label mb-0",children:l("Request Body","kivicare-clinic-management-system")})}),d.body?.length>0?i.jsxs("div",{className:"mb-2",children:[i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("strong",{children:l("Available Variables - Click to copy:","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-wrap gap-1",children:d.body.map((te,Y)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>ne(te),title:l("Click to copy","kivicare-clinic-management-system"),children:[i.jsx("i",{className:"ph ph-copy me-1"}),te]},Y))})]}):i.jsx("div",{className:"mb-2",children:i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("em",{children:l("Select a module and event above to see available variables","kivicare-clinic-management-system")})})}),i.jsx(be,{name:"requestBody",control:h,render:({field:te})=>i.jsx("textarea",{...te,className:"form-control font-monospace",rows:"8",placeholder:F()})}),i.jsx("small",{className:"text-muted",children:l("Click on variable buttons above to copy them to clipboard, then paste in the body","kivicare-clinic-management-system")})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Advanced Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Timeout (seconds)","kivicare-clinic-management-system")}),i.jsx(be,{name:"timeout",control:h,render:({field:te})=>i.jsx("input",{...te,type:"number",min:"1",max:"300",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Retry Attempts","kivicare-clinic-management-system")}),i.jsx(be,{name:"retryAttempts",control:h,render:({field:te})=>i.jsx("input",{...te,type:"number",min:"0",max:"10",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Retry Delay (seconds)","kivicare-clinic-management-system")}),i.jsx(be,{name:"retryDelay",control:h,render:({field:te})=>i.jsx("input",{...te,type:"number",min:"1",max:"60",className:"form-control"})})]}),i.jsx("div",{className:"col-12",children:i.jsx(be,{name:"enableSSL",control:h,render:({field:te})=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...te,type:"checkbox",className:"form-check-input",checked:te.value,onChange:Y=>te.onChange(Y.target.checked)}),i.jsx("label",{className:"form-check-label",children:l("Enable SSL Certificate Verification","kivicare-clinic-management-system")})]})})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-floppy-disk me-2"}),s?l("Update Webhook","kivicare-clinic-management-system"):l("Create Webhook","kivicare-clinic-management-system")]})})}),i.jsxs(rt,{show:P,onHide:ee,size:"lg",centered:!0,children:[i.jsxs(rt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[i.jsx("i",{className:"ph ph-upload me-2"}),l("Import Webhook Configuration","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:ee,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(rt.Body,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-file-arrow-up me-2"}),l("Upload JSON File","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("input",{ref:oe,type:"file",accept:".json",className:"form-control",onChange:W}),i.jsx(Zt,{variant:"outline-secondary",onClick:()=>oe.current?.click(),children:i.jsx("i",{className:"ph ph-file"})})]}),i.jsx("small",{className:"text-muted",children:l("Upload a .json file containing the webhook configuration","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center mb-4",children:i.jsx("span",{className:"badge bg-secondary",children:l("OR","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-code me-2"}),l("Paste JSON Configuration","kivicare-clinic-management-system")]}),i.jsx("textarea",{className:`form-control font-monospace ${q?"is-invalid":H?"is-valid":""}`,rows:"12",value:M,onChange:te=>se(te.target.value),placeholder:JSON.stringify({name:"Example Webhook",module_name:"appointment",event_name:"created",webhook_data:{url:"https://example.com/webhook",method:"POST"}},null,2),style:{fontSize:"0.875rem"}}),q&&i.jsxs("div",{className:"invalid-feedback d-block",children:[i.jsx("i",{className:"ph ph-warning-circle me-1"}),q]}),H&&!q&&i.jsxs("div",{className:"valid-feedback d-block",children:[i.jsx("i",{className:"ph ph-check-circle me-1"}),l("Valid JSON configuration detected","kivicare-clinic-management-system")]}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),l("Paste a valid webhook JSON configuration. The format will be validated automatically.","kivicare-clinic-management-system")]})]}),V&&H&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-3",children:[i.jsxs("h6",{className:"alert-heading",children:[i.jsx("i",{className:"ph ph-eye me-2"}),l("Configuration Preview","kivicare-clinic-management-system")]}),i.jsx("hr",{}),i.jsxs("div",{className:"small",children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Name:","kivicare-clinic-management-system")})," ",V.name]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Module:","kivicare-clinic-management-system")})," ",V.module_name]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Event:","kivicare-clinic-management-system")})," ",V.event_name||l("N/A","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("URL:","kivicare-clinic-management-system")}),i.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},children:V.webhook_data?.url})]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Method:","kivicare-clinic-management-system")})," ",V.methods||V.webhook_data?.method||"POST"]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Auth:","kivicare-clinic-management-system")})," ",V.webhook_data?.auth_method||"none"]})]})]})]})]}),i.jsxs(rt.Footer,{children:[i.jsxs(Zt,{variant:"secondary",className:"me-2",onClick:ee,children:[i.jsx("i",{className:"ph ph-x me-1"}),l("Cancel","kivicare-clinic-management-system")]}),i.jsxs(Zt,{variant:"primary",onClick:ge,disabled:!H,children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import Configuration","kivicare-clinic-management-system")]})]})]})]})};function lhe(){const t=mn(),e=kie({onSuccess:()=>{Ee.success(l("Webhook created successfully","kivicare-clinic-management-system")),t("/setting/webhooks/configuration")},onError:s=>{console.error("Error creating webhook:",s),Ee.error(l("Failed to create webhook","kivicare-clinic-management-system"))}}),n=s=>{e.mutate(s)};return i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:l("Add New Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Configure a new webhook to send notifications when events occur","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",onClick:()=>t("/setting/webhooks/configuration"),children:[i.jsx("i",{className:"ph ph-caret-left"}),l("Back","kivicare-clinic-management-system")]})]}),i.jsx(aI,{onSubmit:n,isLoading:e.isLoading,isEditing:!1})]})}function ohe(){const{id:t}=Yt(),e=mn(),{data:n,isLoading:s}=yie(t,{enabled:!!t}),a=jie({onSuccess:()=>{Ee.success(l("Webhook updated successfully","kivicare-clinic-management-system")),e("/setting/webhooks/configuration")},onError:o=>{console.error("Error updating webhook:",o),Ee.error(l("Failed to update webhook","kivicare-clinic-management-system"))}}),r=o=>{a.mutate({id:t,...o})};return s?i.jsx(fP,{}):n?.data?i.jsxs("div",{className:"edit-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:l("Edit Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Update webhook configuration and settings","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/webhooks/configuration",className:"btn btn-primary",children:l("Back","kivicare-clinic-management-system")})]}),i.jsx(aI,{initialData:n.data,onSubmit:r,isLoading:a.isLoading,isEditing:!0})]}):i.jsx("div",{className:"alert alert-warning",children:l("Webhook not found","kivicare-clinic-management-system")})}const che=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(""),[a,r]=f.useState(""),[o,c]=f.useState([]),[d,m]=f.useState(!1),{data:u}=kP({page:1,per_page:100}),p=u?.data?.data||[],h=p.map(N=>({value:N.id,label:N.name,url:N.url,method:N.method,status:N.status})),{data:g}=wie(),v=g?.data?.modules||[];g?.data?.common_variables;const x=Cie({onSuccess:N=>{let E=null,A=null;for(const P of v){const R=P.events.find(M=>M.value===n);if(R){E=P,A=R;break}}const L=N.data||N,C={id:Date.now(),webhook:L.webhook_data?.name||p.find(P=>P.id==t)?.name||"Unknown",module:E?.label||"Unknown",event:A?.label||n,status:L.success?"success":"failed",responseCode:L.status_code||0,responseTime:L.execution_time||0,response:L.response||L.error||"No response data",url:L.webhook_data?.url||"Unknown URL",method:L.webhook_data?.method||"POST",timestamp:new Date().toLocaleString()};c(P=>[C,...P]),N.status?Ee.success(l("Test webhook delivered successfully","kivicare-clinic-management-system")):Ee.error(l("Test webhook delivery failed","kivicare-clinic-management-system"))},onError:N=>{let E=null,A=null;for(const C of v){const P=C.events.find(R=>R.value===n);if(P){E=C,A=P;break}}const L={id:Date.now(),webhook:p.find(C=>C.id==t)?.name||"Unknown",module:E?.label||"Unknown",event:A?.label||n,status:"failed",responseCode:0,responseTime:0,response:N.message||"Network error occurred",url:"Unknown URL",method:"Unknown",timestamp:new Date().toLocaleString()};c(C=>[L,...C]),Ee.error(l("Test failed: Network error","kivicare-clinic-management-system"))}}),y=N=>{let E=null,A=null;for(const P of v){const R=P.events.find(M=>M.value===N);if(R){E=P,A=R;break}}if(!A)return{};const L=A.dynamic_variables,C={};return L.body?.forEach(P=>{const R=P.replace(/{{|}}/g,"");if(R.includes("_id"))R.includes("appointment_id")?C[R]=Math.floor(Math.random()*1e3)+1:R.includes("patient_id")?C[R]=Math.floor(Math.random()*500)+100:R.includes("doctor_id")?C[R]=Math.floor(Math.random()*100)+50:R.includes("clinic_id")?C[R]=Math.floor(Math.random()*10)+1:R.includes("encounter_id")?C[R]=Math.floor(Math.random()*2e3)+500:C[R]=Math.floor(Math.random()*1e3)+1;else if(R.includes("_email"))R.includes("patient_email")?C[R]="john.doe@example.com":R.includes("doctor_email")?C[R]="dr.smith@kivicare.com":R.includes("clinic_email")?C[R]="info@healthclinic.com":C[R]="contact@kivicare.com";else if(R.includes("_name")||R.includes("_full_name"))R.includes("patient")?C[R]="John Doe":R.includes("doctor")?C[R]="Dr. Sarah Smith":R.includes("clinic")?C[R]="Main Health Clinic":R.includes("first_name")?C[R]="John":R.includes("last_name")?C[R]="Doe":R.includes("service_names")?C[R]="General Consultation, Blood Test":C[R]="Sample Name";else if(R.includes("_contact_number")||R.includes("_phone")){const M=["+1-555-0123","+1 (555) 123-4567","555-123-4567"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("_date")){const M=new Date;if(R.includes("appointment_date")||R.includes("encounter_date")){const O=new Date(M);O.setDate(M.getDate()+Math.floor(Math.random()*30)+1),C[R]=O.toISOString().split("T")[0]}else if(R.includes("dob")||R.includes("date_of_birth")){const O=1970+Math.floor(Math.random()*40);C[R]=`${O}-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`}else if(R.includes("registered_date")){const O=new Date(M);O.setDate(M.getDate()-Math.floor(Math.random()*365)),C[R]=O.toISOString().split("T")[0]}else C[R]=M.toISOString().split("T")[0]}else if(R.includes("_time"))if(R.includes("start_time")){const M=["09:00:00","10:00:00","11:00:00","14:00:00","15:00:00"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("end_time")){const M=["09:30:00","10:30:00","11:30:00","14:30:00","15:30:00"];C[R]=M[Math.floor(Math.random()*M.length)]}else C[R]=new Date().toTimeString().split(" ")[0];else if(R.includes("_address")){const M=["123 Main Street, New York, NY 10001","456 Oak Avenue, Los Angeles, CA 90210","789 Elm Drive, Chicago, IL 60601","321 Pine Road, Houston, TX 77001"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("_status"))if(R.includes("appointment_status")){const M=["1","2","3"];C[R]=M[Math.floor(Math.random()*M.length)]}else C[R]="1";else if(R.includes("_gender")){const M=["male","female","other"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("blood_group")){const M=["A+","A-","B+","B-","AB+","AB-","O+","O-"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("specialization")){const M=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("qualification")){const M=["MBBS, MD","MBBS, MS","BDS, MDS","BAMS","BHMS"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("experience"))C[R]=`${Math.floor(Math.random()*20)+1} years`;else if(R.includes("description"))R.includes("doctor")?C[R]="Experienced physician with expertise in general medicine and patient care.":R.includes("encounter")?C[R]="Regular check-up and consultation for ongoing health monitoring.":C[R]="Sample description for healthcare services.";else if(R.includes("postal_code")||R.includes("zip_code"))C[R]=String(Math.floor(Math.random()*9e4)+1e4);else if(R.includes("city")){const M=["New York","Los Angeles","Chicago","Houston","Phoenix"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("country")){const M=["United States","Canada","United Kingdom","Australia"];C[R]=M[Math.floor(Math.random()*M.length)]}else if(R.includes("profile_photo")||R.includes("signature"))C[R]=`https://via.placeholder.com/150x150?text=${R.replace(/_/g,"+")}`;else if(R.includes("clinic_ids")||R.includes("_ids"))C[R]="[1, 2, 3]";else if(R.includes("custom_fields_data"))C[R]=JSON.stringify({insurance_provider:"Blue Cross Blue Shield",emergency_contact:"+1-555-9876",allergies:"None known",medical_history:"Hypertension"});else if(R==="current_date_time")C[R]=new Date().toISOString();else if(R==="current_date")C[R]=new Date().toISOString().split("T")[0];else if(R==="current_time")C[R]=new Date().toTimeString().split(" ")[0];else if(R==="current_user_id")C[R]="1";else{const M=R.replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase());C[R]=`Sample ${M}`}}),{event:N,module:E?.value,data:C,metadata:{timestamp:new Date().toISOString(),webhook_id:t,test_mode:!0}}},b=N=>{s(N);const E=y(N);r(JSON.stringify(E,null,2)),Ee.success(l("Sample payload loaded","kivicare-clinic-management-system"))},w=N=>{try{return JSON.parse(N),!0}catch{return!1}},k=async()=>{if(!t||!n||!a){Ee.error(l("Please select a webhook, event, and provide payload data","kivicare-clinic-management-system"));return}if(!w(a)){Ee.error(l("Invalid JSON payload","kivicare-clinic-management-system"));return}m(!0);try{await x.mutateAsync({webhookId:t,eventName:n,payload:JSON.parse(a)})}finally{m(!1)}},_=async()=>{if(!t){Ee.error(l("Please select a webhook endpoint","kivicare-clinic-management-system"));return}m(!0);for(const N of v.slice(0,3)){const E=N.events[0];if(E)try{s(E.value);const A=y(E.value);r(JSON.stringify(A,null,2)),await x.mutateAsync({webhookId:t,eventName:E.value,payload:A}),await new Promise(L=>setTimeout(L,1e3))}catch(A){console.error("Bulk test error:",A)}}m(!1),Ee.success(l("Bulk test completed","kivicare-clinic-management-system"))},j=N=>{switch(N){case"success":return i.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"});case"failed":return i.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2"});default:return i.jsx("i",{className:"bi bi-clock-fill text-warning me-2"})}},T=N=>{switch(N){case"success":return"success";case"failed":return"danger";default:return"warning"}};return i.jsxs(No,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"mb-2",children:l("Webhook Testing","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("Test webhook deliveries with sample or custom payloads","kivicare-clinic-management-system")})]}),i.jsxs(Qn,{className:"g-4",children:[i.jsx(_t,{lg:6,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:l("Test Configuration","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Configure and execute webhook tests","kivicare-clinic-management-system")})]}),i.jsx(Ct.Body,{children:i.jsxs(Qn,{className:"g-3",children:[i.jsx(_t,{xs:12,children:i.jsxs(Pt.Group,{children:[i.jsx(Pt.Label,{children:l("Select Webhook","kivicare-clinic-management-system")}),i.jsx(lt,{value:h.find(N=>N.value==t)||null,onChange:N=>e(N?N.value:""),options:h,placeholder:l("Choose webhook endpoint...","kivicare-clinic-management-system"),isClearable:!0,isSearchable:!0,noOptionsMessage:()=>l("No webhooks found","kivicare-clinic-management-system"),loadingMessage:()=>l("Loading webhooks...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:N=>({...N,zIndex:9999})}}),p.length===0&&i.jsx(Pt.Text,{className:"text-muted",children:l("No webhooks configured. Please create a webhook first.","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsxs(Pt.Group,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(Pt.Label,{children:l("Payload Data","kivicare-clinic-management-system")}),i.jsxs(Zt,{variant:"btn btn-secondary",size:"sm",onClick:()=>b(n),disabled:!n,children:[i.jsx("i",{className:"bi bi-code me-1"}),l("Reload Sample","kivicare-clinic-management-system")]})]}),i.jsx(Pt.Control,{as:"textarea",rows:10,value:a,onChange:N=>r(N.target.value),placeholder:l("Enter JSON payload or select a sample from the right panel...","kivicare-clinic-management-system")}),a&&!w(a)&&i.jsx(Pt.Text,{className:"text-danger",children:l("Invalid JSON format","kivicare-clinic-management-system")})]})}),i.jsx(_t,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(Zt,{variant:"primary",onClick:k,disabled:d||!t||!n||!a,className:"flex-fill",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Testing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-play-fill me-2"}),l("Send Test","kivicare-clinic-management-system")]})}),i.jsx(Zt,{variant:"btn btn-primary",onClick:_,disabled:d||!t,children:l("Bulk Test","kivicare-clinic-management-system")})]})})]})})]})}),i.jsx(_t,{lg:6,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:l("Sample Payloads","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Click on any event below to load its sample payload for testing","kivicare-clinic-management-system")})]}),i.jsx(Ct.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"auto"},children:v.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-muted",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"text-muted mt-2",children:l("Loading events...","kivicare-clinic-management-system")})]}):i.jsx("div",{className:"d-grid gap-3",children:v.map(N=>i.jsxs("div",{children:[i.jsx("h6",{className:"text-muted mb-2 border-bottom pb-1",children:N.label}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:N.events.map(E=>i.jsx("div",{className:`p-3 border rounded cursor-pointer transition-colors ${n===E.value?"border-primary bg-primary bg-opacity-10":"border-light hover:bg-light"}`,onClick:()=>b(E.value),onMouseEnter:A=>{n!==E.value&&(A.target.style.backgroundColor="#f8f9fa")},onMouseLeave:A=>{n!==E.value&&(A.target.style.backgroundColor="")},children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"fw-medium mb-1",children:E.label}),i.jsx("div",{className:"small text-muted",children:E.value})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n===E.value&&i.jsx(ma,{bg:"primary",className:"small",children:l("Selected","kivicare-clinic-management-system")}),i.jsxs(ma,{bg:"secondary",className:"small",children:[E.dynamic_variables?.body?.length||0," ",l("vars","kivicare-clinic-management-system")]}),i.jsx("i",{className:"bi bi-arrow-right text-muted"})]})]})},E.value))})]},N.value))})})})]})})]}),i.jsx(Qn,{className:"mt-4",children:i.jsx(_t,{xs:12,children:i.jsxs(Ct,{children:[i.jsxs(Ct.Header,{children:[i.jsx("h4",{className:"d-flex align-items-center",children:l("Test Results","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Recent webhook test deliveries and responses","kivicare-clinic-management-system")})]}),i.jsx(Ct.Body,{children:o.length===0?i.jsxs("div",{className:"text-center py-5 text-muted",children:[i.jsx("i",{className:"bi bi-play display-1 opacity-25 d-block mb-3"}),i.jsx("p",{children:l("No test results yet. Run a test to see delivery results here.","kivicare-clinic-management-system")})]}):i.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:i.jsx("div",{className:"d-grid gap-3",children:o.map(N=>i.jsxs("div",{className:"border rounded p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[j(N.status),i.jsxs("div",{children:[i.jsx("p",{className:"fw-medium mb-1",children:N.webhook}),i.jsxs("p",{className:"text-muted small mb-1",children:[N.module,"  ",N.event]}),i.jsxs("p",{className:"text-muted small mb-0",children:[i.jsx(ma,{bg:"secondary",className:"me-2",children:N.method}),N.url]})]})]}),i.jsxs("div",{className:"text-end",children:[i.jsx(ma,{bg:T(N.status),className:"mb-1",children:N.responseCode}),i.jsxs("p",{className:"text-muted small mb-1",children:[N.responseTime,"ms"]}),i.jsx("p",{className:"text-muted small mb-0",children:N.timestamp})]})]}),i.jsx("hr",{className:"my-3"}),i.jsxs("div",{children:[i.jsx(Pt.Label,{className:"small text-muted",children:l("Response Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-light p-3 rounded mt-1",children:[i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Status:","kivicare-clinic-management-system")}),i.jsx(ma,{bg:T(N.status),className:"ms-1",children:N.status.toUpperCase()})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Code:","kivicare-clinic-management-system")}),i.jsx("span",{className:"ms-1 fw-medium",children:N.responseCode})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Time:","kivicare-clinic-management-system")}),i.jsxs("span",{className:"ms-1 fw-medium",children:[N.responseTime,"ms"]})]})]}),i.jsxs("div",{children:[i.jsx("small",{className:"text-muted d-block mb-1",children:l("Response Body:","kivicare-clinic-management-system")}),i.jsx("pre",{className:"small mb-0",style:{overflowX:"auto",fontSize:"0.75rem",maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #dee2e6",borderRadius:"0.25rem",padding:"0.5rem"},children:typeof N.response=="string"?N.response:JSON.stringify(N.response,null,2)})]})]})]})]},N.id))})})})]})})})]})},dhe=()=>(f.useEffect(()=>{const t=new URLSearchParams(window.location.search),e=t.get("code"),n=t.get("error"),s=t.get("error_description");window.opener?(e?window.opener.postMessage({type:"oauth2_callback",code:e},window.location.origin):n&&window.opener.postMessage({type:"oauth2_callback",error:s||n},window.location.origin),setTimeout(()=>{window.close()},500)):console.error("OAuth2Callback: No opener window found")},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:l("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("This window will close automatically.","kivicare-clinic-management-system")})]})})),mhe=[{att_name:"clinic",name:l("Choose your Clinic","kivicare-clinic-management-system"),fixed:!1},{att_name:"doctor",name:l("Choose your Doctor","kivicare-clinic-management-system"),fixed:!1},{att_name:"servicesCategory",name:l("Services from Category","kivicare-clinic-management-system"),fixed:!1},{att_name:"selectDateTime",name:l("Select Date and Time","kivicare-clinic-management-system"),fixed:!0},{att_name:"userDetail",name:l("User Detail information","kivicare-clinic-management-system"),fixed:!0},{att_name:"appointmentExtra",name:l("Appointment Extra Data","kivicare-clinic-management-system"),fixed:!0},{att_name:"confirmation",name:l("Confirmation","kivicare-clinic-management-system"),fixed:!0}],kx=[{id:1,label:l("Show Phone & Email","kivicare-clinic-management-system")},{id:2,label:l("Show Phone Number","kivicare-clinic-management-system")},{id:3,label:l("Show Email Address","kivicare-clinic-management-system")},{id:4,label:l("Hide contact details","kivicare-clinic-management-system")}],Md={clinic:[{key:"showClinicImage",label:l("Show Clinic Image","kivicare-clinic-management-system")},{key:"showClinicAddress",label:l("Show Clinic Address","kivicare-clinic-management-system")}],doctor:[{key:"showDoctorImage",label:l("Show Doctor Image","kivicare-clinic-management-system")},{key:"showDoctorExperience",label:l("Show Doctor Experience","kivicare-clinic-management-system")},{key:"showDoctorSpeciality",label:l("Show doctor speciality","kivicare-clinic-management-system")},{key:"showDoctorDegree",label:l("Show doctor degree","kivicare-clinic-management-system")},{key:"showDoctorRating",label:l("Show doctor rating","kivicare-clinic-management-system")}],service:[{key:"showServiceImage",label:l("Show Service Image","kivicare-clinic-management-system")},{key:"showServicetype",label:l("Show Service Type","kivicare-clinic-management-system")},{key:"showServicePrice",label:l("Show Service Price","kivicare-clinic-management-system")},{key:"showServiceDuration",label:l("Show Service Duration","kivicare-clinic-management-system")},{key:"skip_service_when_single",label:l("Skip service when single is present","kivicare-clinic-management-system")}],color:[{key:"primaryColor",label:l("Primary Color","kivicare-clinic-management-system")},{key:"primaryHoverColor",label:l("Primary Hover Color","kivicare-clinic-management-system")},{key:"secondaryColor",label:l("Secondary Color","kivicare-clinic-management-system")},{key:"secondaryHoverColor",label:l("Secondary Hover Color","kivicare-clinic-management-system")}],print:[{key:"widget_print",label:l("Print Detail","kivicare-clinic-management-system")},{key:"afterWoocommerceRedirect",label:l("Redirect to Print after payment","kivicare-clinic-management-system")}]},uhe=({label:t,value:e="#000000",onChange:n,disabled:s=!1})=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx("input",{type:"color",className:"form-control form-control-color",value:e,title:l("Choose your color","kivicare-clinic-management-system"),onChange:n,disabled:s}),i.jsx("label",{className:"form-label",children:l(t,"kivicare-clinic-management-system")})]}),ec=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(t,"kivicare-clinic-management-system")}),e]})}),hhe=({id:t,name:e,fixed:n,disabled:s})=>{const{attributes:a,listeners:r,setNodeRef:o,transform:c,transition:d,isDragging:m}=Hk({id:t,disabled:n}),u={transform:Ya.Transform.toString(c),transition:d,opacity:m?.7:1,cursor:n?"not-allowed":"grab",background:m?"#eaf1ff":void 0,boxShadow:m?"0 0 10px #5670CC":void 0,pointerEvents:n?"none":"auto",filter:s?"grayscale(1) opacity(0.5)":void 0};return i.jsxs("div",{ref:o,style:u,...a,...!n&&!s?r:{},className:`p-3 bg-body mb-2 d-flex align-items-center gap-3 ${s?"disabled":""}`,children:[!n&&!s&&i.jsx("i",{className:"ph ph-list fs-5"}),i.jsx("span",{className:"font-size-14 flex-grow-1",children:l(e,"kivicare-clinic-management-system")})]})},phe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s,error:a}=yn("settings","widget-setting",{},{enabled:!0}),r=dn("settings","widget-setting"),[o,c]=f.useState(!1),{data:d}=Cn(),m=d?.data?.hideUtilityLinks,{control:u,handleSubmit:p,setValue:h,watch:g,reset:v}=Jt({defaultValues:{showClinicImage:!1,showClinicAddress:!1,clinicContactDetails:kx[0],showDoctorImage:!1,showDoctorExperience:!1,showDoctorSpeciality:!1,showDoctorDegree:!1,showDoctorRating:!1,doctorContactDetails:kx[0],primaryColor:"#5670CC",primaryHoverColor:"#4563CC",secondaryColor:"#F67E7D",secondaryHoverColor:"#000000",widget_print:!1,afterWoocommerceRedirect:!1,widgetOrder:mhe,showServiceImage:!0,showServicetype:!0,showServicePrice:!0,showServiceDuration:!0,skip_service_when_single:!1}}),x=g("widgetOrder"),y=AP(Gh(Lk,{activationConstraint:{distance:5}}));f.useEffect(()=>{!n?.status||!n?.data||v(T=>({...T,...Object.fromEntries(Object.entries(n.data).filter(([N,E])=>E!=null&&E!==""))}))},[n,v]),f.useEffect(()=>{if(!a)return;const T=typeof a=="string"?a:a?.response?.data?.message||a?.message||l("An unknown error occurred","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:T})},[a]);const b=T=>{const{active:N,over:E}=T;if(!E||N.id===E.id)return;const A=x.findIndex(C=>C.att_name===N.id),L=x.findIndex(C=>C.att_name===E.id);if(!x[A].fixed&&!x[L].fixed){const C=pf(x,A,L);h("widgetOrder",C,{shouldDirty:!0})}},w=p(async T=>{c(!0);try{const N={...T,widgetOrder:x},E=await r.mutateAsync(N);E.status?tt({title:l("Success","kivicare-clinic-management-system"),text:E.message}):Me({title:l("Error","kivicare-clinic-management-system"),text:E.message})}catch(N){console.error("Error saving settings:",N),Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings. Please try again.","kivicare-clinic-management-system")})}finally{c(!1)}}),k=T=>({text:T?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:T?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),_=T=>T.map(({key:N,label:E})=>i.jsx(be,{name:N,control:u,render:({field:A})=>i.jsx(sn,{label:E,checked:A.value,onChange:A.onChange,badge:k(A.value),className:"mb-3",disabled:o})},N)),j=T=>i.jsx(be,{name:T,control:u,render:({field:N})=>i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:l("Contact Details","kivicare-clinic-management-system")})}),i.jsx(lt,{className:"react-select-box",options:kx,value:N.value,onChange:N.onChange,isDisabled:o,getOptionLabel:E=>E.label,getOptionValue:E=>E.id,classNamePrefix:"react-select",styles:{menuPortal:E=>({...E,zIndex:9999})}})]})});return s?i.jsx(xP,{}):i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Widget Settings","kivicare-clinic-management-system"),m!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/widget-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary Google Event Template"})})]}),e&&i.jsxs(ec,{title:"Clinic",children:[_(Md.clinic),j("clinicContactDetails")]}),i.jsxs(ec,{title:"Doctor",children:[_(Md.doctor),j("doctorContactDetails")]}),i.jsx(ec,{title:"Service",children:_(Md.service)}),i.jsx(ec,{title:"Widget Color",children:i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Md.color.map(({key:T,label:N})=>i.jsx(be,{name:T,control:u,render:({field:E})=>i.jsx(uhe,{label:N,value:E.value,onChange:A=>E.onChange(A.target.value),disabled:o})},T))})}),i.jsxs("div",{className:"position-relative",children:[!e&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),text:l("Change widget order setting is available in Kivicare Pro. Upgrade now to access these features.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx(ec,{title:"Widget Order",children:i.jsx($k,{sensors:y,collisionDetection:DP,onDragEnd:b,children:i.jsx(qk,{items:x.map(T=>T.att_name),strategy:XP,children:x.map(T=>i.jsx(hhe,{id:T.att_name,name:T.name,fixed:T.fixed,disabled:o},T.att_name))})})})]}),i.jsx(ec,{title:"Print Detail setting",children:_(Md.print)}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary px-4",onClick:w,disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save Settings","kivicare-clinic-management-system")})})]})})},ghe=({title:t,titleId:e,...n},s)=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:26,viewBox:"0 0 114 26",width:114,ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"m23.6977 25.2924h-20.10301c-1.32885 0-2.58954-.6978-3.202853-1.8892-.698493-1.3617-.4429462-2.9956.630343-4.068l13.98692-13.97375h-10.01743c-2.7599 0-4.99167-2.22968-4.99167-4.987h18.5186c1.3288 0 2.5895.69784 3.2028 1.88927.6986 1.36164.443 2.9956-.6303 4.0679l-13.98691 13.97378h11.60181c2.7599 0 4.9917 2.2297 4.9917 4.987zm79.5603-25.2924c-2.879 0-5.4691 1.24249-7.241 3.23389-1.7883-1.9914-4.3781-3.23389-7.2401-3.23389-5.3497 0-9.7108 4.56149-9.7108 9.88887v15.40353c2.7598 0 4.9915-2.2297 4.9915-4.987v-10.46757c0-2.5701 1.9933-4.74871 4.5487-4.85083 2.692-.10213 4.9237 2.05945 4.9237 4.73169v10.58671c0 2.7573 2.2317 4.987 4.9915 4.987v-15.45457c0-2.5701 1.9935-4.74871 4.5485-4.85083 2.692-.10213 4.924 2.05945 4.924 4.73169v10.58671c0 2.7573 2.232 4.987 4.991 4.987v-15.40353c-.017-5.32738-4.378-9.88887-9.727-9.88887zm-54.3805 12.8334c0 7.0806-5.7583 12.8335-12.8455 12.8335-7.0871 0-12.8454-5.7529-12.8454-12.8335 0-7.0805 5.7753-12.8334 12.8454-12.8334 7.0702 0 12.8455 5.7529 12.8455 12.8334zm-4.9917 0c0-4.32315-3.5265-7.8464-7.8538-7.8464-4.3272 0-7.8538 3.52325-7.8538 7.8464 0 4.3233 3.5266 7.8465 7.8538 7.8465 4.3273 0 7.8538-3.5232 7.8538-7.8465zm32.6758 0c0 7.0806-5.758 12.8335-12.8451 12.8335-7.0877 0-12.8458-5.7529-12.8458-12.8335 0-7.0805 5.7757-12.8334 12.8458-12.8334 7.0696 0 12.8451 5.7529 12.8451 12.8334zm-4.9915 0c0-4.32315-3.5264-7.8464-7.8536-7.8464-4.3273 0-7.8541 3.52325-7.8541 7.8464 0 4.3233 3.5268 7.8465 7.8541 7.8465 4.3272 0 7.8536-3.5232 7.8536-7.8465z",fill:"#0b5cff"})),n_=f.forwardRef(ghe);function fhe(){const{isAddonActive:t,zoomIntegration:e}=mt();if(!t("telemed")||e!=="yes")return i.jsx(hg,{to:"/setting",replace:!0});const n=Ke(),s=t("telemed"),[a,r]=f.useState(!1),[o,c]=f.useState(!1),{register:d,handleSubmit:m,reset:u,control:p,watch:h,formState:{isDirty:g,errors:v},getValues:x}=Jt({defaultValues:{auth_type:"none",account_id:"",client_id:"",client_secret:"",enable_server_to_server:!1}}),y=h("enable_server_to_server"),{data:b,isLoading:w,error:k}=yn("settings","zoom-telemed/doctor-config",{},{enabled:s});f.useEffect(()=>{if(b?.data){const R=b.data,M=R.auth_type==="server-to-server",O=R.is_connected===!0,q={auth_type:R.auth_type,account_id:R.account_id||"",client_id:R.client_id||"",client_secret:R.client_secret||"",enable_server_to_server:M&&O};u(q)}},[b,u]);const{refetch:_}=yn("settings","zoom-telemed/authorize",{},{enabled:a}),{refetch:j}=yn("settings","zoom-telemed/disconnect",{},{enabled:s&&b?.data?.connection_status==="not_connected"}),T=dn("settings","zoom-telemed/doctor-config"),N=dn("settings","zoom-telemed/test-connection"),E=async R=>{const M=R.enable_server_to_server,O=b?.data?.is_google_meet_connected;if(!(M&&O&&!(await dt({title:l("Warning","kivicare-clinic-management-system"),text:l("Press Yes to save server to server oauth configuration and will disconnect Google Meet.","kivicare-clinic-management-system")})).isConfirmed))try{r(!0),await T.mutateAsync({...R,auth_type:M?"server-to-server":"none"}),n.invalidateQueries(["settings","zoom-telemed/doctor-config"]),n.invalidateQueries(["config"]),tt({title:l("Success","kivicare-clinic-management-system"),text:l("Configuration saved successfully","kivicare-clinic-management-system")})}catch(q){console.error("Update failed:",q),Me({title:l("Error","kivicare-clinic-management-system"),text:q?.response?.data?.message||l("Failed to save settings","kivicare-clinic-management-system")})}finally{r(!1)}},A=async()=>{if(!(b?.data?.is_google_meet_connected&&!(await dt({title:l("Warning","kivicare-clinic-management-system"),text:l("Press yes to connect to Zoom. Connecting to Zoom will disconnect Google Meet.","kivicare-clinic-management-system")})).isConfirmed))try{r(!0);const{data:M}=await _();window.location.href=M?.data?.redirect_url}catch(M){console.error("Connection failed:",M),alert(l("Failed to connect to Zoom. Please try again.","kivicare-clinic-management-system"))}finally{r(!1)}},L=async()=>{N.mutateAsync({...x(),auth_type:"server-to-server"}).then(R=>{R?.data?.success?tt({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:l("Zoom configuration test successful!","kivicare-clinic-management-system")}):Me({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:l("Zoom configuration test failed. Please check your settings.","kivicare-clinic-management-system")})}).catch(R=>{console.error("Test failed:",R),Me({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:R?.response?.data?.data?.error||R?.message})})},C=async()=>{if((await dt({title:l("Disconnect Zoom","kivicare-clinic-management-system"),text:l("Are you sure you want to disconnect your Zoom account?","kivicare-clinic-management-system"),confirmButtonText:l("Disconnect","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"})).isConfirmed)try{c(!0);const{data:M}=await j();n.invalidateQueries(["settings","zoom-telemed/doctor-config"])}catch(M){console.error("Disconnection failed:",M),alert(l("Failed to disconnect from Zoom. Please try again.","kivicare-clinic-management-system"))}finally{c(!1)}},P=()=>b?b?.data?.auth_type!=="oauth"?i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Telemed Server To Server Oauth","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:m(E),children:[i.jsx("div",{className:"mb-3 p-0 form-check form-switch",children:i.jsx(be,{name:"enable_server_to_server",control:p,render:({field:R})=>i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[i.jsx("label",{className:"form-check-label",htmlFor:"enableServerToServer",children:l("Zoom Telemed Server To Server Oauth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableServerToServer",checked:R.value,onChange:M=>R.onChange(M.target.checked),disabled:a})]})})}),y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Account ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${v.account_id?"is-invalid":""}`,placeholder:l("Enter Zoom Account ID","kivicare-clinic-management-system"),...d("account_id",{required:l("Account ID is required","kivicare-clinic-management-system")})}),v.account_id&&i.jsx("div",{className:"invalid-feedback",children:v.account_id.message}),i.jsx("div",{className:"form-text",children:l("Find this in your Zoom app credentials","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${v.client_id?"is-invalid":""}`,placeholder:l("Enter Client ID","kivicare-clinic-management-system"),...d("client_id",{required:l("Client ID is required","kivicare-clinic-management-system")})}),v.client_id&&i.jsx("div",{className:"invalid-feedback",children:v.client_id.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${v.client_secret?"is-invalid":""}`,placeholder:l("Enter Client Secret","kivicare-clinic-management-system"),...d("client_secret",{required:l("Client Secret is required","kivicare-clinic-management-system")})}),v.client_secret&&i.jsx("div",{className:"invalid-feedback",children:v.client_secret.message})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a||!g,children:a?l("Saving...","kivicare-clinic-management-system"):l("Save Settings","kivicare-clinic-management-system")}),y&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:L,children:l("Test Zoom Config","kivicare-clinic-management-system")})]})]}),y&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-4",children:[l("Your administrator has enabled server to server authentication.","kivicare-clinic-management-system"),i.jsx("br",{}),l("Meetings will be created using these credentials.","kivicare-clinic-management-system")]})]}):b?.data?.auth_type==="oauth"?i.jsxs("div",{className:"bg-body p-4 rounded",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Account Connection","kivicare-clinic-management-system")}),b?.data?.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("Your Zoom account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:C,disabled:o,children:o?l("Disconnecting...","kivicare-clinic-management-system"):l("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"bg-warning-subtle p-3 rounded d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),l("Your Zoom account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-warning",onClick:A,disabled:a,children:a?l("Connecting...","kivicare-clinic-management-system"):l("Connect Zoom Account","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("p",{className:"mb-1",children:[i.jsx("strong",{children:l("Connection Status:","kivicare-clinic-management-system")})," ",b?.data?.connection_status==="not_connected"?l("Not Connected","kivicare-clinic-management-system"):l("Connected","kivicare-clinic-management-system")]}),i.jsx("p",{className:"mb-0 text-muted",children:b?.data?.is_connected?l("You can now create Zoom meetings directly from appointments","kivicare-clinic-management-system"):l("Connect your Zoom account to enable telemedicine features","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"alert alert-warning",children:[i.jsx(n_,{}),l("Zoom telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")]}):null;return i.jsx("div",{className:"zoom-telemed-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsxs("div",{className:"d-flex align-items-center mb-4",children:[i.jsx(n_,{width:70,className:"me-3"}),i.jsx("h4",{className:"mb-0",children:l("Telemedicine Settings","kivicare-clinic-management-system")})]}),w?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:l("Loading Zoom configuration...","kivicare-clinic-management-system")})]}):k?i.jsxs("div",{className:"bg-danger-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-exclamation-mark fs-4 me-2"}),l("Failed to load Zoom configuration:","kivicare-clinic-management-system")," ",k.message]}):P(),i.jsxs("div",{className:"mt-5",children:[i.jsx("h6",{className:"mb-3",children:l("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-question text-primary fs-4"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/configuration-telemed-addon/doctor-level-configuration/",className:"text-decoration-none",children:l("Zoom integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("Learn how to set up and use Zoom telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-video fs-4 text-primary"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/getting-started-telemed-addon/system-requirements-zoom-account-types/",className:"text-decoration-none",children:l("Zoom meeting requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})})})}const bu={list:(t={})=>ve({endpoint:"push-templates",method:"GET",data:t}),get:t=>ve({endpoint:`push-templates/${t}`,method:"GET"}),save:t=>ve({endpoint:"push-templates",method:"POST",data:t}),setStatus:(t,e)=>ve({endpoint:`push-templates/${t}/status`,method:"POST",data:{enabled:e}}),sendTest:t=>ve({endpoint:"push-templates/test-notification",method:"POST",data:t})},Gc={all:["pushTemplates"],list:()=>[...Gc.all,"list"],detail:t=>[...Gc.all,"detail",t]},vhe=(t={})=>gt({queryKey:Gc.list(),queryFn:async()=>{const e=await bu.list();return e?.data??e??[]},...t}),xhe=(t,e={})=>gt({queryKey:Gc.detail(t),queryFn:async()=>{const n=await bu.get(t);return n?.data??n??null},enabled:!!t,...e}),yhe=(t={})=>{const e=Ke();return He({mutationFn:n=>bu.save(n),onSuccess:()=>{e.invalidateQueries({queryKey:Gc.list()})},...t})},bhe=(t={})=>{const e=Ke();return He({mutationFn:({name:n,enabled:s})=>bu.setStatus(n,s),onSuccess:()=>{e.invalidateQueries({queryKey:Gc.list()})},...t})},whe=(t={})=>He({mutationFn:e=>bu.sendTest(e),...t}),khe=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),a=f.useRef(null),{isAddonActive:r}=mt(),o=r("api"),{data:c}=Cn(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:p}=yn("settings","app-configuration",{},{enabled:o}),h=dn("settings","app-configuration"),{register:g,handleSubmit:v,reset:x,formState:{errors:y,isDirty:b}}=Jt({mode:"onBlur",reValidateMode:"onChange",defaultValues:{serverKey:"",client_emaail:"",privat_key:"",project_id:"",server_client_id:""}}),{mutateAsync:w,isLoading:k}=bhe({onSuccess:()=>{Ee.success(l("Template saved","kivicare-clinic-management-system")),E()},onError:q=>{Ee.error(l("Failed to update template status","kivicare-clinic-management-system"))}});f.useEffect(()=>{if(!o||!m?.status||!m?.data||n)return;const q=Object.fromEntries(Object.entries(m.data).filter(([U,H])=>H!=null&&H!==""));x(q),s(!0)},[m,x,o,n]);const _=[{key:"serverKey",label:l("Firebase Server Key","kivicare-clinic-management-system"),placeholder:l("Firebase Server Key","kivicare-clinic-management-system"),required:!0},{key:"server_client_id",label:l("Firebase Server Client Id","kivicare-clinic-management-system"),placeholder:l("Firebase Server Client Id","kivicare-clinic-management-system"),required:!0},{key:"client_emaail",label:l("Client Email","kivicare-clinic-management-system"),placeholder:l("Client Email","kivicare-clinic-management-system"),required:!0,pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:l("Please enter a valid email address","kivicare-clinic-management-system")}},{key:"privat_key",label:l("Private Key","kivicare-clinic-management-system"),placeholder:l("Private Key","kivicare-clinic-management-system"),required:!0},{key:"project_id",label:l("Project Id","kivicare-clinic-management-system"),placeholder:l("Project Id","kivicare-clinic-management-system"),required:!0}],j=async q=>{e(!0);try{const U=await h.mutateAsync(q);U.status!==!0?Me({title:l("Error","kivicare-clinic-management-system"),text:l(U.message,"kivicare-clinic-management-system")}):tt({title:l("Success","kivicare-clinic-management-system"),text:l(U.message,"kivicare-clinic-management-system")})}catch(U){console.error("Failed to save settings:",U)}finally{e(!1)}},{data:T=[],isLoading:N,refetch:E}=vhe({enabled:o}),A=mn(),L=q=>{A(`/setting/push-template/edit/${q}`)},C=On(),P=async(q,U)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{try{await w({name:q,enabled:U==="on"?"off":"on"})}catch(H){console.error("Failed to toggle template enabled",H)}},500)},R=()=>{A("/setting/push-template/test-notification")},M=[C.accessor(q=>q.title,{id:"title",header:()=>l("Name","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:q.getValue()})})}),C.accessor(q=>q.recipients,{id:"recipients",header:()=>l("Recipients","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:(q.getValue()||[]).join(", ")})})}),C.accessor(q=>q.enabled,{id:"enabled",header:()=>l("Enabled","kivicare-clinic-management-system"),cell:q=>i.jsx(sn,{checked:q.getValue(),onChange:()=>P(q.row.original.name,q.getValue())})}),C.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:q=>i.jsx("button",{className:"btn btn-link p-0",onClick:()=>L(q.row.original.name),children:l("Manage","kivicare-clinic-management-system")})})];if(p){let q;typeof p=="string"?q=p:p?.response?.data?.message?q=p.response.data.message:p?.message?q=p.message:q=l("An unknown error occurred","kivicare-clinic-management-system"),Me({title:l("Error","kivicare-clinic-management-system"),text:l(q,"kivicare-clinic-management-system")})}const O=({title:q,fields:U,errors:H,register:ae})=>i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:q}),i.jsx("div",{className:"row gy-4",children:U.map(V=>i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{htmlFor:V.key,className:"form-label",children:[V.label,V.required&&" *"]}),i.jsx("input",{type:"text",id:V.key,className:`form-control ${H[V.key]?"is-invalid":""}`,placeholder:V.placeholder,disabled:t,...ae(V.key,{required:V.required?l(`${V.label} is required`,"kivicare-clinic-management-system"):!1,pattern:V.pattern})}),H[V.key]&&i.jsx("div",{className:"invalid-feedback",children:H[V.key].message})]})},V.key))})]})});return u?i.jsx(gP,{}):i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:`app-configuration-setting${o?"":" p-4"}`,children:[!o&&i.jsx(ci,{title:l("Available For Kivicare Flutter","kivicare-clinic-management-system"),text:l("This feature is available For Kivicare Flutter App users. Please upgrade to access this feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-flutter-app-clinic-patient-management-system/30970616"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("App Configurations","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#app-config",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),o&&u&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!u&&i.jsxs("form",{onSubmit:v(j),children:[i.jsx(O,{title:l("Firebase Cloud Messaging Configuration","kivicare-clinic-management-system"),fields:_,errors:y,register:g}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||!b,children:t?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):l("Save","kivicare-clinic-management-system")})})]}),o&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Push Notification Templates","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:R,children:l("Send Test Notification","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsx(bn,{data:T,columns:M,isLoading:N,moduleNamePlural:l("Templates","kivicare-clinic-management-system"),bordered:!0,responsive:!0,enableSelection:!1,pagination:null})})]})]})})},i_=()=>{const t=Ke(),{name:e}=Yt(),n=mn(),[s,a]=f.useState(!1),r=!e,[o,c]=f.useState(r?{user:null,recipients:[],title:"",body:"",data:{},enabled:!0}:null),[d,m]=f.useState({}),[u,p]=f.useState([]),[h,g]=f.useState(null),{data:v,isLoading:x,error:y}=xhe(e,{enabled:!!e}),b=yhe({onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Template saved","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Me({title:l("Error","kivicare-clinic-management-system"),text:A?.message||l("Failed to save template","kivicare-clinic-management-system")})}}),{mutateAsync:w}=whe({onSuccess:()=>{tt({title:l("Success","kivicare-clinic-management-system"),text:l("Test notification sent successfully","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Me({title:l("Error","kivicare-clinic-management-system"),text:A?.message||l("Failed to send test notification","kivicare-clinic-management-system")})}});f.useEffect(()=>{if(v){const A=v.template||null;if(A){c({title:A.title||"",body:A.body||"",data:A.data||{},recipients:A.recipients||[],enabled:!!A.enabled});const L=v.dynamic_keys||v.dynamicKeys||[];p(Array.isArray(L)?L.map(C=>C.replace(/[{}]/g,"")):[])}}},[v]),f.useEffect(()=>{if(y){let A=y?.response?.data?.message||y?.message||l("Failed to load template","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:l("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const k=A=>{navigator.clipboard.writeText(`{{${A}}}`),g(A),setTimeout(()=>{g(L=>L===A?null:L)},1500)},_=[{value:"patient",label:l("Patient","kivicare-clinic-management-system")},{value:"doctor",label:l("Doctor","kivicare-clinic-management-system")},{value:"receptionist",label:l("Receptionist","kivicare-clinic-management-system")},{value:"clinic",label:l("Clinic Admin","kivicare-clinic-management-system")}],j=()=>{const A={};return r&&!o?.user?.value&&(A.user=l("Selection is required","kivicare-clinic-management-system")),o?.recipients?.length||(A.recipients=l("Recipients is required","kivicare-clinic-management-system")),o?.title?.trim()||(A.title=l("Title is required","kivicare-clinic-management-system")),o?.body?.trim()||(A.body=l("Body is required","kivicare-clinic-management-system")),m(A),Object.keys(A).length===0},T=async()=>{if(j()){a(!0);try{const A={name:e,title:o.title||"",body:o.body||"",data:o.data||{},recipients:o.recipients||[],enabled:!!o.enabled};await b.mutateAsync(A)}catch(A){console.error("Failed to save push template",A)}finally{a(!1)}}},N=async()=>{if(j()){a(!0);try{await w({userId:o.user?.value,recipients:Array.isArray(o.recipients)?o?.recipients?.[0]:o.recipients,title:o.title,body:o.body,data:o.data||"",enabled:!!o.enabled})}catch(A){console.error("Failed to send test notification",A)}finally{a(!1)}}},E=f.useCallback(async({page:A,per_page:L,search:C,recipient_type:P})=>{if(!P)return{data:[],pagination:{has_more:!1}};let R={page:A,per_page:L,search:C};P==="patient"?(R.dataType="staticData",R.staticDataType="patients"):P==="doctor"?(R.dataType="staticData",R.staticDataType="doctors"):P==="receptionist"?(R.dataType="staticData",R.staticDataType="users",R.role=uc()):P==="clinic"&&(R.dataType="clinicList");try{return await t.fetchQuery({queryKey:ut.list(R),queryFn:()=>Et.getStaticData(R),staleTime:3e5})}catch(M){return console.error("Error loading test users:",M),{data:[],pagination:{has_more:!1}}}},[t]);return x&&!r?i.jsx(of,{}):!o&&!r?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"manage-push-notification-template",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title mb-0",children:r?l("Send Test Notification","kivicare-clinic-management-system"):`${l("Edit Push Template","kivicare-clinic-management-system")} : ${e}`}),i.jsx("div",{className:"d-flex gap-2",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>n(-1),children:l("Back","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[u.length>0&&i.jsxs("div",{className:"form-group mb-3",children:[i.jsx("label",{className:"form-label h6",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Ue,{placement:"top",overlay:L=>i.jsx(it,{...L,children:h===A?l("Copied","kivicare-clinic-management-system"):l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>k(A),children:[A," ",i.jsx("i",{className:"ph ph-copy"})]})},A))})]}),i.jsxs("div",{className:"row gy-3",children:[r&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Recipients","kivicare-clinic-management-system")," *"]}),i.jsx(lt,{options:_,value:_.find(A=>o?.recipients?.[0]===A.value)||null,onChange:A=>c(L=>({...L,recipients:A?[A.value]:[],user:null})),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:A=>({...A,zIndex:9999})}}),d.recipients&&i.jsx("div",{className:"invalid-feedback d-block",children:d.recipients})]}),r&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[(()=>{const A=o?.recipients?.[0];return A==="patient"?l("Select Patient","kivicare-clinic-management-system"):A==="doctor"?l("Select Doctor","kivicare-clinic-management-system"):A==="receptionist"?l("Select Receptionist","kivicare-clinic-management-system"):A==="clinic"?l("Select Clinic","kivicare-clinic-management-system"):l("Select User","kivicare-clinic-management-system")})()," *"]}),i.jsx(Xt,{id:"test-user",loadOptions:E,value:o?.user||null,onChange:A=>c(L=>({...L,user:A})),dependencies:{recipient_type:o?.recipients?.[0]},placeholder:l("Select search result","kivicare-clinic-management-system"),className:`react-select-box ${d.user?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!o?.recipients?.[0]},`test-user-${o?.recipients?.[0]}`),d.user&&i.jsx("div",{className:"invalid-feedback d-block",children:d.user})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Title","kivicare-clinic-management-system")," *"]}),i.jsx("input",{type:"text",className:`form-control ${d.title?"is-invalid":""}`,placeholder:l("Enter notification title","kivicare-clinic-management-system"),value:o?.title||"",onChange:A=>c(L=>({...L,title:A.target.value}))}),d.title&&i.jsx("div",{className:"invalid-feedback d-block",children:d.title})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[l("Body","kivicare-clinic-management-system")," *"]}),i.jsx("textarea",{className:`form-control ${d.body?"is-invalid":""}`,rows:4,placeholder:l("Enter notification body","kivicare-clinic-management-system"),value:o?.body||"",onChange:A=>c(L=>({...L,body:A.target.value}))}),d.body&&i.jsx("div",{className:"invalid-feedback d-block",children:d.body})]})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{className:"btn btn-sm btn-primary",onClick:r?N:T,disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r?l("Sending...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):r?l("Send Notification","kivicare-clinic-management-system"):l("Save Template","kivicare-clinic-management-system")})})]})},jhe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{control:n,handleSubmit:s,watch:a,reset:r,errors:o}=Jt({defaultValues:{only_same_day_book:!1,post_book:"365",pre_book:"0",fileUploadEnabled:!1,emailReminder:!1,emailReminderHours:"24",smsReminder:!1,whatsappReminder:!1,appointmentDescription:!1,showPatientInfo:!1,cancellationBufferEnabled:!1,cancellationBufferHours:"365"}}),[c,d]=f.useState(!1),[m,u]=f.useState(""),p=a("only_same_day_book"),h=a("emailReminder"),g=a("smsReminder"),v=a("whatsappReminder"),x=a("cancellationBufferEnabled"),y=dn("settings","appointment-setting"),{data:b,isLoading:w,error:k}=yn("settings","appointment-setting");f.useEffect(()=>{if(b){const T=L=>!!["true",!0,1,"1","yes","on"].includes(L),N=["only_same_day_book","fileUploadEnabled","emailReminder","smsReminder","whatsappReminder","appointmentDescription","showPatientInfo","cancellationBufferEnabled"],E=b.data||b,A={...E};N.forEach(L=>{A[L]=T(E[L])}),r(L=>({...L,...A}))}},[b,r]);const _=async T=>{const N=parseInt(T.post_book,10),E=parseInt(T.pre_book,10);if(!T.only_same_day_book&&!isNaN(E)&&!isNaN(N)&&E>N){u("Booking Close Before cannot be greater than Booking Open Before."),Me({title:l("Invalid Settings","kivicare-clinic-management-system"),text:l('"Booking Close Before (in Days)" cannot be greater than "Booking Open Before (in Days)".',"kivicare-clinic-management-system")});return}d(!0),u("");try{const L=await y.mutateAsync(T);if(d(!1),!L.status){u(L.message),Me({title:l("Error","kivicare-clinic-management-system"),text:l(L.message,"kivicare-clinic-management-system")});return}tt({title:l("Success","kivicare-clinic-management-system"),text:l(L.message,"kivicare-clinic-management-system")})}catch(L){d(!1),console.error("Failed to save settings:",L),Me({title:l("Error","kivicare-clinic-management-system"),text:l("An unexpected error occurred","kivicare-clinic-management-system")})}};if(k){const T=typeof k=="string"?k:k?.response?.data?.message||k?.message||l("An unknown error occurred","kivicare-clinic-management-system");Me({title:l("Error","kivicare-clinic-management-system"),text:l(T,"kivicare-clinic-management-system")})}const j=({title:T,children:N,className:E=""})=>i.jsx("div",{className:`card ${E}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(T,"kivicare-clinic-management-system")}),N]})});return i.jsx("form",{onSubmit:s(_),className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane active opacity-1",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Restrict Advance Appointment Booking","kivicare-clinic-management-system"),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/appointment-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),w&&i.jsx(jP,{}),!w&&i.jsxs(i.Fragment,{children:[i.jsxs(j,{children:[i.jsx(be,{name:"only_same_day_book",control:n,render:({field:T})=>i.jsx(sn,{label:l("Allow Same Day Booking Only.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.only_same_day_book})}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(be,{name:"post_book",control:n,render:({field:T})=>i.jsx(Ht,{type:"number",label:l("Booking Open Before (in Days)","kivicare-clinic-management-system"),placeholder:l("365","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.post_book,isDisable:p})})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(be,{name:"pre_book",control:n,render:({field:T})=>i.jsx(Ht,{type:"number",label:l("Booking Close Before (in Days)","kivicare-clinic-management-system"),placeholder:l("0","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.pre_book,isDisable:p})})})]}),i.jsxs("span",{className:"font-size-14 mt-2",children:[i.jsxs("span",{className:"text-primary fw-medium",children:[l("Note","kivicare-clinic-management-system"),":"]})," ",l("For example, Booking Open Before: 60 days, Booking Close Before: 7 days, As consideration for the current date, The appointment booking opens 60 days ago and closed 7 days ago.","kivicare-clinic-management-system")]})]}),i.jsx(j,{children:i.jsx(be,{name:"fileUploadEnabled",control:n,render:({field:T})=>i.jsx(sn,{label:l("Appointment File Upload Setting.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.fileUploadEnabled})})}),i.jsxs(j,{title:l("Appointment Reminder","kivicare-clinic-management-system"),children:[i.jsx(be,{name:"emailReminder",control:n,render:({field:T})=>i.jsx(sn,{label:l("Email Reminder.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,className:"mb-2",disabled:c,error:o?.emailReminder})}),e&&i.jsx(be,{name:"smsReminder",control:n,render:({field:T})=>{const N=b?.data?.isTwilioSmsConfigured??b?.isTwilioSmsConfigured;return i.jsx(sn,{label:l("SMS Reminder (Twilio)","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c||!N,error:o?.smsReminder,className:"mb-2"})}}),e&&i.jsx(be,{name:"whatsappReminder",control:n,render:({field:T})=>{const N=b?.data?.isTwilioWhatsAppConfigured??b?.isTwilioWhatsAppConfigured;return i.jsxs("div",{children:[i.jsx(sn,{label:l("WhatsApp Reminder (Twilio)","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c||!N,error:o?.whatsappReminder,className:"mb-2"}),i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:l("Note :","kivicare-clinic-management-system")})," ",l("When you configure your Twilio account for SMS or WhatsApp, you can enable SMS and WhatsApp reminders.","kivicare-clinic-management-system")]})]})}}),(h||g||v)&&i.jsx(be,{name:"emailReminderHours",control:n,render:({field:T})=>i.jsx(Ht,{type:"number",label:l("Select Hours","kivicare-clinic-management-system"),placeholder:l("365","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.emailReminderHours,className:"mb-2"})})]}),i.jsx(j,{title:l("Appointment Setting","kivicare-clinic-management-system"),children:i.jsx(be,{name:"appointmentDescription",control:n,render:({field:T})=>i.jsx(sn,{label:l("Appointment Description","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.appointmentDescription,className:"mb-2"})})}),i.jsxs(j,{title:l("Appointment Cancellation Buffer","kivicare-clinic-management-system"),children:[i.jsx("span",{className:"font-size-14",children:l("To prevent appointments from getting canceled too close to the appointment time by patients, you can set a cancellation buffer.","kivicare-clinic-management-system")}),i.jsx(be,{name:"cancellationBufferEnabled",control:n,render:({field:T})=>i.jsx(sn,{label:l("Enable Cancellation Buffer","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.cancellationBufferEnabled,className:"mt-3"})}),x&&i.jsx(be,{name:"cancellationBufferHours",control:n,render:({field:T})=>i.jsx(Ht,{type:"number",label:l("Select Hours","kivicare-clinic-management-system"),placeholder:l("e.g. 24","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.cancellationBufferHours})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})})})},lb=(t,e=null,n=0)=>{let s=[];return t.forEach(a=>{const r=a.id||`kc-uid-${Math.random().toString(36).slice(2)}`,o=a.type||(a.childrens&&a.childrens.length>0?"parent":"route");s.push({...a,id:r,parentId:e,level:n,type:o,iconClass:a.iconClass||"",routeClass:a.routeClass||`custom_${r}`}),a.childrens&&a.childrens.length>0&&(s=s.concat(lb(a.childrens,r,n+1)))}),s},Nhe=t=>{const e={};t.forEach(s=>{const{isDefault:a,level:r,parentId:o,id:c,...d}=s;e[s.id]={...d,type:s.type,label:s.label,link:s.link||"",iconClass:s.iconClass||"",routeClass:s.routeClass,childrens:[]}});const n=[];return t.forEach(s=>{s.parentId&&e[s.parentId]?e[s.parentId].childrens.push(e[s.id]):n.push(e[s.id])}),n},Che=t=>{const e=[];t.forEach(n=>{for(;e.length>0&&e[e.length-1].level>=n.level;)e.pop();n.parentId=e.length>0?e[e.length-1].id:null,e.push(n)})},rI=({item:t,onChange:e,onDelete:n})=>{const{attributes:s,listeners:a,setNodeRef:r,transform:o,transition:c,isDragging:d}=Hk({id:t.id}),m={transform:Ya.Transform.toString(o),transition:c,opacity:d?0:1,background:"transparent",paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},u=t.type==="group",p=t.isDefault;return i.jsx("div",{ref:r,style:m,...s,children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx("i",{className:"ph ph-hand-grabbing",style:{cursor:"grab"},...a})}),i.jsx("div",{className:"col-md-3",children:i.jsx("input",{type:"text",className:"form-control",value:t.label,onChange:h=>e(t.id,"label",h.target.value),style:{fontWeight:u?"bold":"normal"},disabled:p})}),i.jsx("div",{className:"col-md-4",children:!u&&i.jsx("input",{type:"text",className:"form-control",value:t.link,onChange:h=>e(t.id,"link",h.target.value),disabled:p})}),i.jsx("div",{className:"col-md-3",children:!u&&i.jsx("input",{type:"text",className:"form-control",placeholder:"ph ph-icon-name",value:t.iconClass,onChange:h=>e(t.id,"iconClass",h.target.value)})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:!p&&i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>n(t.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})})},She=({allItems:t,onChange:e,onDelete:n,activeItem:s,activeSubtreeIds:a,placeholderIndex:r,placeholderLevel:o})=>{let c=t;s&&(c=c.filter(m=>m.id!==s.id&&!a.includes(m.id)));const d=c.map(m=>m.id);return i.jsx(qk,{items:d,strategy:XP,children:c.reduce((m,u,p)=>(r===p&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},`placeholder-${p}`)),m.push(i.jsx("div",{style:{marginLeft:u.level*22},children:i.jsx(rI,{item:u,onChange:e,onDelete:n})},u.id)),r===c.length&&p===c.length-1&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},"placeholder-end")),m),[])})},_he=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s}=yn("settings","sidebar-setting",{},{enabled:e}),a=dn("settings","sidebar-setting"),{data:r}=Cn(),o=r?.data?.hideUtilityLinks,[c,d]=f.useState([]),[m,u]=f.useState({}),[p,h]=f.useState({}),[g,v]=f.useState("administrator"),[x,y]=f.useState(!1),[b,w]=f.useState(null),[k,_]=f.useState(null),[j,T]=f.useState([]),[N,E]=f.useState(null),[A,L]=f.useState(null);f.useEffect(()=>{if(!n?.status||!n?.data?.data)return;const oe=Object.keys(n.data.data),ne=oe.map(ge=>({id:ge,label:l(ge.replace("_"," ").replace(/\b\w/g,ee=>ee.toUpperCase()),"kivicare-clinic-management-system"),title:l(ge.replace("_"," ").replace(/\b\w/g,ee=>ee.toUpperCase()),"kivicare-clinic-management-system")}));d(ne);const se={},W={};oe.forEach(ge=>{const ee=n.data.data[ge].current,ie=n.data.data[ge].default,ue=lb(ee),G=lb(ie),le=new Set(G.map(re=>re.routeClass));se[ge]=ue.map(re=>({...re,isDefault:le.has(re.routeClass)})),W[ge]=G.map(re=>({...re,isDefault:!0}))}),u(se),h(W),v(oe[0]||"administrator")},[n]);const C=AP(Gh(zP),Gh(VP),Gh(Ik)),P=(oe,ne,se)=>{u(W=>({...W,[g]:W[g].map(ge=>ge.id===oe?{...ge,[ne]:se}:ge)}))},R=oe=>{u(ne=>{const se=[...ne[g]],W=se.findIndex(ue=>ue.id===oe);if(W===-1||se[W].isDefault)return ne;const ge=se[W].level;let ee=W+1;for(;ee<se.length&&se[ee].level>ge;)ee++;const ie=[...se.slice(0,W),...se.slice(ee)];return{...ne,[g]:ie}})},M=()=>{const oe=`kc-uid-${Math.random().toString(36).slice(2)}`,ne={id:oe,type:"group",label:"New Section",link:"",iconClass:"",routeClass:`custom_group_${oe}`,parentId:null,level:0,isDefault:!1};u(se=>({...se,[g]:[...se[g],ne]}))},O=()=>{const oe=`kc-uid-${Math.random().toString(36).slice(2)}`,ne={id:oe,type:"route",label:"New Item",link:"/",iconClass:"ph ph-question",routeClass:`custom_route_${oe}`,parentId:null,level:0,isDefault:!1};u(se=>({...se,[g]:[...se[g],ne]}))},q=()=>{dt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Are you sure you want to reset to default positions? All customizations will be lost.","kivicare-clinic-management-system")}).then(oe=>{oe.isConfirmed&&(y(!0),a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{reset:!0,type:g}}).then(async ne=>{ne?.status?(u(se=>({...se,[g]:p[g]})),await tt({title:l("Reset successful!","kivicare-clinic-management-system")})):Me({title:l("Failed to reset","kivicare-clinic-management-system"),text:ne?.message||"Unknown error"})}).catch(ne=>{Me({title:l("Failed to reset","kivicare-clinic-management-system"),text:ne.message})}).finally(()=>{y(!1)}))})},U=oe=>{const ne=oe.active.id,se=m[g].findIndex(ie=>ie.id===ne),W=m[g][se];_(W);let ge=[],ee=se+1;for(;ee<m[g].length&&m[g][ee].level>W.level;)ge.push(m[g][ee].id),ee++;T(ge),E(null),L(null)},H=(oe,ne)=>{const{active:se,over:W}=oe;if(!W||se.id===W.id)return null;const ge=ne.findIndex(Q=>Q.id===W.id);if(ge===-1)return null;const ee=oe.active.rect.current.translated,ie=oe.over.rect,ue=ne[ge],G=ee.top>ie.top+ie.height/2;let le=ge+(G?1:0);const re=ee.left-ie.left;let I=ue.level+Math.round(re/22);I=Math.max(0,I);const ce=le>0?ne[le-1]:null,Z=le<ne.length?ne[le]:null;let K=ce?ce.type==="group"?ce.level:ce.level+1:0,B=0;Z&&Z.level>K&&(B=Z.level);let F=Math.max(B,Math.min(I,K));k.type==="group"&&(F=0);let J=null;if(F>0&&ce){let Q=ce;for(;Q&&Q.level>=F;)Q=ne.find(me=>me.id===Q.parentId);Q&&Q.level===F-1?J=Q.id:(F=K,J=ce.parentId)}return{newIndex:le,newDepth:F,newParentId:J}},ae=oe=>{if(!k)return;const ne=m[g].filter(W=>W.id!==k.id&&!j.includes(W.id)),se=H(oe,ne);if(!se){E(null),L(null);return}E(se.newIndex),L(se.newDepth)},V=oe=>{if(!k)return;const ne=m[g].filter(re=>re.id!==k.id&&!j.includes(re.id)),se=H(oe,ne);if(E(null),L(null),_(null),T([]),!se)return;const{newIndex:W,newDepth:ge,newParentId:ee}=se,ie={...k,level:ge,parentId:ee},ue=m[g].filter(re=>j.includes(re.id));let G=[...ne.slice(0,W),ie,...ue,...ne.slice(W)];Che(G),G=G.map(re=>re.isDefault&&re.routeClass!=="patient_encounter_list"&&re.routeClass!=="encounter_template"?{...re,parentId:null,level:0}:re);const le=new Set(G.map(re=>re.parentId).filter(re=>re!==null));G.forEach(re=>{le.has(re.id)?(re.type==="route"||re.type==="href")&&(re.type="parent"):re.type==="parent"&&!re.isDefault&&(re.type="route")}),u(re=>({...re,[g]:G}))},pe=async()=>{y(!0),w(null);try{const oe=Nhe(m[g]),ne=await a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{type:g,data:oe}});if(!ne?.status)throw new Error(ne?.message||"Save failed");await tt({title:l("Settings saved successfully!","kivicare-clinic-management-system")})}catch(oe){w(oe.message),Me({title:l("Failed to save settings","kivicare-clinic-management-system"),text:oe.message})}finally{y(!1)}};return s?i.jsx(CP,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane active opacity-1 position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:`sidebar-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Sidebar Settings","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sidebar-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:c.map(oe=>i.jsx("li",{className:"nav-item",children:i.jsx("button",{className:`nav-link ${g===oe.id?"active":""}`,onClick:()=>v(oe.id),children:oe.label})},oe.id))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-primary me-2",onClick:M,children:l("Add Section","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary me-2",onClick:O,children:l("Add Item","kivicare-clinic-management-system")})]})}),c.map(oe=>i.jsxs("div",{style:{display:g===oe.id?"block":"none"},children:[i.jsxs("div",{className:"sidebar-items bg-gray-900",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1  d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Drag","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Label","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("URL","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Icon","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Action","kivicare-clinic-management-system")})})})]}),i.jsxs($k,{sensors:C,collisionDetection:DP,onDragStart:U,onDragOver:ae,onDragEnd:V,children:[i.jsx(She,{allItems:m[oe.id]||[],onChange:P,onDelete:R,activeItem:k,activeSubtreeIds:j,placeholderIndex:N,placeholderLevel:A}),i.jsx(ZP,{dropAnimation:null,children:k?i.jsx(rI,{item:k,onChange:()=>{},onDelete:()=>{}}):null})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:q,disabled:x,children:l("Reset to Default","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:pe,disabled:x,children:x?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})}),b&&i.jsx("div",{className:"alert alert-danger mt-3",children:b})]},oe.id))]})})})},Ehe=()=>{const{data:t,isLoading:e,refetch:n}=yn("settings","google-calendar-integration"),s=dn("settings","google-calendar-integration/connect"),a=dn("settings","google-calendar-integration/disconnect"),[r,o]=We.useState(!1),c=t?.connected||!1;f.useEffect(()=>{const u=new URLSearchParams(window.location.search),p=window.location.hash;if(u.get("google_calendar_connected")==="1"&&tt({title:l("Success","kivicare-clinic-management-system"),text:l("Google Calendar connected successfully!","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p),n()}),u.get("google_calendar_error")==="1"){const h=u.get("error_code")||"unknown";let g=l("An error occurred during Google Calendar connection","kivicare-clinic-management-system");switch(h){case"oauth_cancelled":g=l("Google Calendar connection was cancelled","kivicare-clinic-management-system");break;case"invalid_callback":g=l("Invalid callback parameters received","kivicare-clinic-management-system");break;case"invalid_state":g=l("Invalid authentication state","kivicare-clinic-management-system");break;case"state_mismatch":g=l("Authentication state verification failed","kivicare-clinic-management-system");break;case"auth_failed":g=l("Failed to obtain Google Calendar authorization","kivicare-clinic-management-system");break;case"processing_error":g=l("Error processing Google Calendar connection","kivicare-clinic-management-system");break;default:g=l("An unknown error occurred during Google Calendar connection","kivicare-clinic-management-system")}Me({title:l("Error","kivicare-clinic-management-system"),text:g}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p)})}},[n]);const d=async()=>{o(!0);try{const u=await s.mutateAsync({});u.url?(sessionStorage.setItem("kc_oauth_in_progress","1"),window.location.href=u.url):Me({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to get authentication URL","kivicare-clinic-management-system")})}catch(u){console.error("Connection error:",u);let p=l("An error occurred during connection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Me({title:l("Error","kivicare-clinic-management-system"),text:p})}finally{o(!1)}},m=async()=>{o(!0);try{await a.mutateAsync({}),tt({title:l("Success","kivicare-clinic-management-system"),text:l("Google Calendar disconnected successfully!","kivicare-clinic-management-system")}),n()}catch(u){console.error("Disconnection error:",u);let p=l("An error occurred during disconnection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Me({title:l("Error","kivicare-clinic-management-system"),text:p})}finally{o(!1)}};return f.useEffect(()=>{sessionStorage.removeItem("kc_oauth_in_progress")},[]),i.jsx("div",{className:"card mt-4 mx-auto",style:{maxWidth:900,borderRadius:8},children:i.jsxs("div",{className:"card-body py-4 px-5",children:[i.jsx("h4",{className:"mb-4",children:l("Google Calendar Integration","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"fs-5",children:c?i.jsxs("span",{className:"text-success",children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("You are connected with the google calender.","kivicare-clinic-management-system")]}):i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-calendar me-2"}),l("Please connect with your Google Account to get appointments in Google Calendar automatically.","kivicare-clinic-management-system")]})}),i.jsx("button",{className:`btn ${c?"btn-outline-danger":"btn-primary"}`,onClick:c?m:d,disabled:r||e,children:r?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Please wait...","kivicare-clinic-management-system")]}):i.jsx(i.Fragment,{children:c?l("Disconnect","kivicare-clinic-management-system"):l("Connect to Google","kivicare-clinic-management-system")})})]})]})})},jx=()=>{const t=Gn(),e=Yt(),n=t.pathname.includes("/add"),s=t.pathname.includes("/edit/");return n?i.jsx(Dm,{}):s?i.jsx(Dm,{sessionId:e.id}):i.jsx(Tk,{})},The=[Yn({path:"/setting",title:"Setting",outlet:aie,meta:{description:"Setting",showInSidebar:!0},skeleton:hie,children:[Ye({path:"general-setting",component:Bie,title:"General Setting",index:!0,meta:{description:"General Setting",breadcrumb:"General Setting"},skeleton:hP}),Ye({path:"holidays",component:ex,title:"Holidays",roles:["administrator","doctor","receptionist","clinic_admin"],index:!0,permissions:["clinic_schedule"],meta:{description:"Holidays",breadcrumb:"Holidays"},skeleton:pie}),Ye({path:"holidays/add",component:ex,title:"Add Holiday",props:{isAdding:!0},permissions:["clinic_schedule_add","clinic_schedule"],meta:{description:"Add a new Holiday",breadcrumb:"Add Holiday"}}),Ye({path:"holidays/edit/:id",component:ex,title:"Edit Holiday",props:{isEditing:!0},permissions:["clinic_schedule_edit","clinic_schedule"],meta:{description:"Edit existing Holidays",breadcrumb:"Edit Holiday"}}),Ye({path:"doctor-session",component:jx,title:"setting/Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_list"],index:!0,meta:{description:"Doctor Session",breadcrumb:"Doctor Session"}}),Ye({path:"doctor-session/add",component:jx,title:"Add Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_add","doctor_session_list"],meta:{description:"Add new doctor session",breadcrumb:"Add Doctor Session"}}),Ye({path:"doctor-session/edit/:id",component:jx,title:"Edit Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_edit","doctor_session_list"],meta:{description:"Edit existing doctor session",breadcrumb:"Edit Doctor Session"}}),Ye({path:"configurations",component:qie,title:"Configuration Setting",roles:["administrator"],index:!0,meta:{description:"Configuration Setting",breadcrumb:"Configuration Setting"},skeleton:pP}),Ye({path:"app-configuration",component:khe,title:"App Configuration Setting",roles:["administrator"],index:!0,meta:{description:"App Configuration Setting",breadcrumb:"App Configuration Setting"},skeleton:gP}),Ye({path:"email-template",component:zae,title:"Email Template Settting",index:!0,meta:{description:"Email Template Settting",breadcrumb:"Email Template Settting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"email-template/edit/:id",component:Wue,title:"Edit Email Template",props:{isEditing:!0},meta:{description:"Edit existing Email",breadcrumb:"Edit Email Template"}}),Ye({path:"email-template/test",component:Kue,title:"Test Email"}),Ye({path:"push-template/test-notification",component:i_,title:"Send Test Notification",meta:{description:"Send test push notification",breadcrumb:"Send Test Notification"}}),Ye({path:"push-template/edit/:name",component:i_,title:"Edit Push Template",props:{isEditing:!0},meta:{description:"Edit existing Push Template",breadcrumb:"Edit Push Template"},skeleton:of}),Ye({path:"sms-whatsapp-template",component:ihe,title:"SMS-WhatsApp Template setting",index:!0,meta:{description:"SMS-WhatsApp Template setting",breadcrumb:"SMS-WhatsApp Template setting"}}),Ye({path:"sms-whatsapp-template/edit/:id",component:she,title:"SMS-WhatsApp Edit Template",index:!0,meta:{description:"SMS-WhatsApp edit Template",breadcrumb:"SMS-WhatsApp edit Template"}}),Yn({path:"webhooks",title:"WebHook setting",outlet:Die,meta:{description:"WebHook setting",breadcrumb:"WebHook setting",hideSettingSidebar:!1},children:[Ye({path:"",element:i.jsx(hg,{to:"./configuration",replace:!0}),index:!0}),Yn({path:"configuration",title:"WebHook configuration",outlet:uie,meta:{description:"WebHook configuration",breadcrumb:"WebHook configuration",noTransitionAnimation:!0},children:[Ye({path:"",component:ahe,title:l("WebHooks","kivicare-clinic-management-system"),meta:{description:l("webhook","kivicare-clinic-management-system"),breadcrumb:l("WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),Ye({path:"add",component:lhe,skeleton:CC,title:l("Add WebHook","kivicare-clinic-management-system"),meta:{description:l("Add new webhook","kivicare-clinic-management-system"),breadcrumb:l("Add WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}}),Ye({path:"edit/:id",component:ohe,skeleton:CC,title:l("Edit WebHook","kivicare-clinic-management-system"),meta:{description:l("Edit existing webhook","kivicare-clinic-management-system"),breadcrumb:l("Edit WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}})]}),Ye({path:"events-log",component:rhe,title:l("Events Log","kivicare-clinic-management-system"),meta:{description:l("Webhook events and logs","kivicare-clinic-management-system"),breadcrumb:l("Events Log","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:5,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),Ye({path:"testing",component:che,title:l("Testing","kivicare-clinic-management-system"),meta:{description:l("Webhook testing tools","kivicare-clinic-management-system"),breadcrumb:l("Testing","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:Mie}),Ye({path:"oauth2/callback",component:dhe,title:l("OAuth2 Callback","kivicare-clinic-management-system"),meta:{description:l("OAuth2 authorization callback","kivicare-clinic-management-system"),breadcrumb:l("OAuth2 Callback","kivicare-clinic-management-system")}})]}),Yn({path:"custom-notification",title:"Custom Notification",outlet:mie,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},children:[Ye({path:"",component:$ae,title:"Custom Notification",index:!0,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),Ye({path:"add",component:WC,skeleton:By,title:"Create Notification Service",meta:{description:"Create new notification service",breadcrumb:"Create Service"}}),Ye({path:"edit/:id",component:WC,skeleton:By,title:"Configure Notification Service",meta:{description:"Configure notification service settings",breadcrumb:"Configure Service"}}),Ye({path:"test/:id",component:qae,title:"Test Notification Service",meta:{description:"Test notification service",breadcrumb:"Test Service"}}),Ye({path:"oauth2/callback",component:Hae,title:"OAuth2 Callback",meta:{description:"OAuth2 authorization callback",breadcrumb:"OAuth2 Callback"}})]}),Yn({path:"custom-form",title:"Custom Form setting",outlet:die,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"},children:[Ye({path:"",component:zie,skeleton:fie,title:"Custom Form setting",index:!0,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"}}),Ye({path:"add",component:UC,skeleton:qy,title:"Add Custom Form",permissions:["custom_form_add","custom_form_list"],meta:{description:"Add new custom form",breadcrumb:"Add Custom Form",hideSettingSidebar:!0}}),Ye({path:"edit/:id",component:UC,skeleton:qy,title:"Edit Custom Form",permissions:["custom_form_edit","custom_form_list"],meta:{description:"Edit existing custom form",breadcrumb:"Edit Custom Form",hideSettingSidebar:!0}})]}),Ye({path:"encounter-body-chart",component:Gue,title:"Encounter Body Chart setting",index:!0,meta:{description:"Encounter Body Chart setting",breadcrumb:"Encounter Body Chart setting"},skeleton:vP}),Ye({path:"patient-setting",component:Jue,title:"patient setting",index:!0,meta:{description:"patient setting",breadcrumb:"patient setting"},skeleton:SP}),Ye({path:"widget-setting",component:phe,title:"Widget setting",index:!0,meta:{description:"Widget setting",breadcrumb:"Widget setting"},skeleton:xP}),Ye({path:"google-event-template",component:Yue,title:"Google Event template setting",index:!0,meta:{description:"Google Event template setting",breadcrumb:"Google Event template setting"},skeleton:yP}),Ye({path:"google-meet",component:Que,title:"Google Meet Setting",roles:["administrator"],index:!0,meta:{description:"Google Meet Setting",breadcrumb:"Google Meet Setting"},skeleton:bP}),Ye({path:"google-meet-configuration",component:Zue,title:"Google Meet Configuration",roles:["doctor"],index:!0,meta:{description:"Google Meet Configuration",breadcrumb:"Google Meet Configuration"}}),Ye({path:"zoom-telemed",component:Pie,title:"Zoom Telemed setting",roles:["administrator"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),Ye({path:"zoom-configuration",component:fhe,title:"Zoom Telemed setting",roles:["doctor"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),Ye({path:"listings",component:wx,title:"listings setting",index:!0,permissions:["static_data_list"],meta:{description:"Listing setting",breadcrumb:"Listing setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"listings/add",component:wx,title:"Add Listing",permissions:["static_data_add","static_data_list"],meta:{description:"Add Listing",breadcrumb:"Add Listing"},skeleton:SC}),Ye({path:"listings/edit/:id",component:wx,title:"Edit Listing",permissions:["static_data_edit","static_data_list"],meta:{description:"Edit Listing",breadcrumb:"Edit Listing"},skeleton:SC}),Ye({path:"custom-field",component:nx,title:"Cusotm Field Setting",index:!0,permissions:["custom_field_list"],meta:{description:"Cusotm Field Setting",breadcrumb:"Cusotm Field Setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"custom-field/add",component:nx,title:"Add Custom Field",permissions:["custom_field_add","custom_field_list"],meta:{description:"Add new custom field",breadcrumb:"Add Custom Field"}}),Ye({path:"custom-field/edit/:id",component:nx,title:"Edit Custom Field",permissions:["custom_field_edit","custom_field_list"],meta:{description:"Edit existing custom field",breadcrumb:"Edit Custom Field"}}),Ye({path:"pro-settings",component:nhe,title:"Pro Setting",index:!0,meta:{description:"Pro Setting",breadcrumb:"Pro Setting"},skeleton:wP}),Ye({path:"payments",component:ehe,title:"Payment Methods",index:!0,meta:{description:"List of all payment methods",breadcrumb:"Payment Methods"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),Ye({path:"payment/:gateway",component:lie,title:"Update Payment Setting",meta:{description:"Update payment method by key",breadcrumb:"Update"}}),Ye({path:"appointment-settings",component:jhe,title:"Appointment settings",index:!0,skeleton:jP,meta:{description:"Appointment settings"}}),Ye({path:"permission",component:the,title:"Permission Setting",index:!0,skeleton:NP,meta:{description:"Permission Setting"}}),Ye({path:"sidebar-settings",component:_he,title:"Sidebar Setting",index:!0,skeleton:CP,meta:{description:"Sidebar Setting"}}),Ye({path:"google-calendar-integration",component:Ehe,title:"Google Calendar Integration",index:!0,meta:{description:"Google Calendar Integration"}})]})],Ahe=()=>{const t=Gn();return i.jsxs("div",{className:"billings-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/billings"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Dhe=()=>{const{getCurrencyDetail:t,isAddonActive:e,hasCapability:n}=mt(),s=e("kiviPro"),a=Jn(),r=Vn(),o=Fi(),{data:c,isLoading:d}=UV({enabled:s}),m=c?.data?.encounters||[],[u,p]=f.useState(""),h=f.useMemo(()=>m.find(F=>String(F.id)===String(u)),[m,u]),[g,v]=f.useState(!1),x=t(),y=x.prefix,b=x.postfix,[w,k]=f.useState({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),[_,j]=f.useState(!1),[T,N]=f.useState(!1),[E,A]=f.useState(null),[L,C]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[P,R]=f.useState(!1),{data:M,isLoading:O}=Mw(E,{enabled:!!E&&T});f.useEffect(()=>{M&&C(M?.data)},[M]);const q=F=>{A(F.id),N(!0)},U=()=>{j(!1),p("")},H=()=>{N(!1),A(null),R(!1)},ae=f.useMemo(()=>Object.fromEntries(Object.entries(w).filter(([F,J])=>J!==""&&J!==null&&J!==void 0)),[w]),{data:V,isLoading:pe,error:oe}=qV(ae,{enabled:s}),ne=GV(),se=V?.data?.billings||[],W=V?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ge=[{value:"Paid",label:l("Paid","kivicare-clinic-management-system")},{value:"Unpaid",label:l("Unpaid","kivicare-clinic-management-system")}],[ee,ie]=f.useState(""),ue=Za(ee,500);f.useEffect(()=>{k(F=>({...F,search:ue,page:1}))},[ue]);const G=F=>{ie(F.target.value)},le=async F=>{try{ft({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const J={format:F,...ae},me=(await ne.mutateAsync(J))?.data?.bills||[];if(!me.length){dt({icon:"ph-info",iconColor:"text-info",bgIconColor:"bg-info",title:l("No data","kivicare-clinic-management-system"),text:l("No billing records found for export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const te=new Date().toISOString().split("T")[0],Y=me.map(Ce=>({id:Ce.id,total_amount:Ce.total_amount,discount:Ce.discount,actual_amount:Ce.actual_amount,encounter_id:Ce.encounter_id,encounter_date:Ce.encounter_date,clinic_id:Ce.clinic_id,doctor_id:Ce.doctor_id,patient_id:Ce.patient_id,appointment_id:Ce.appointment_id,status:Ce.status,doctor_name:Ce.doctor_name,patient_name:Ce.patient_name,clinic_name:Ce.clinic_name,service_name:Ce.service_name}));switch(F){case"csv":gs(Y,`bills-${te}.csv`);break;case"xls":fs(Y,`bills-${te}.xls`);break;case"pdf":vs(Y,`bills-${te}.pdf`,"Billing Records");break;default:throw new Error("Invalid export format")}Yi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(J){console.error("Export error:",J),Me({title:l("Error!","kivicare-clinic-management-system"),text:J.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},re=On(),D=f.useMemo(()=>[re.accessor("invoiceId",{id:"invoiceId",header:()=>l("Bill ID","kivicare-clinic-management-system"),cell:F=>F.getValue()}),re.accessor("encounter_id",{id:"encounter_id",header:()=>l("Encounter ID","kivicare-clinic-management-system"),cell:F=>F.getValue()}),...o?[]:[re.accessor("doctor.name",{id:"doctorName",header:()=>l("Doctor","kivicare-clinic-management-system"),cell:F=>i.jsx(on,{profileUrl:F.row.original.doctor.doctor_image_url,name:F.getValue(),email:F.row.original.doctor.email,fallbackText:F.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})],...!a&&!r?[re.accessor("clinic.name",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:F=>i.jsx(on,{profileUrl:F.row.original.clinic.clinic_image_url,name:F.getValue(),email:F.row.original.clinic.email,fallbackText:F.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})]:[],re.accessor("patient.name",{id:"patientName",header:()=>l("Patient","kivicare-clinic-management-system"),cell:F=>i.jsx(on,{profileUrl:F.row.original.patient.patient_image_url,name:F.getValue(),email:F.row.original.patient.email,fallbackText:F.getValue()?.charAt(0)||"P",variant:"primary",size:"sm"})}),re.accessor("services",{header:()=>l("Services","kivicare-clinic-management-system"),cell:F=>F.getValue()}),re.accessor("total_amount",{header:()=>l("Total","kivicare-clinic-management-system"),cell:F=>y+F.getValue()+b}),re.accessor("discount",{header:()=>l("Discount","kivicare-clinic-management-system"),cell:F=>y+F.getValue()+b}),re.accessor("actual_amount",{header:()=>l("Amount Due","kivicare-clinic-management-system"),cell:F=>y+F.getValue()+b}),re.accessor("date",{header:()=>l("Date","kivicare-clinic-management-system"),cell:F=>F.getValue()}),re.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:F=>{const J=F.getValue(),Q=J==="paid"?"Paid":"Unpaid",me=J==="paid"?"bg-success-subtle text-success":"bg-danger-subtle text-danger";return i.jsx("span",{className:`badge ${me} px-3 py-2`,children:Q})}}),re.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:F})=>{const J=Q=>me=>i.jsx(it,{id:`tooltip-${F.original.id}-${Q}`,...me,children:Q});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n("patient_bill_view")&&i.jsx(Ue,{placement:"top",overlay:J(l("Bill Detail","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/billings/view/${F.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),n("patient_bill_edit")&&F.original.status!=="paid"&&i.jsx(Ue,{placement:"top",overlay:J(l("Edit","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>q(F.original),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),n("patient_encounter_view")&&i.jsx(Ue,{placement:"top",overlay:J(l("Encounter Details","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${F.original.encounter_id}/clinical-details`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-gauge"})})})]})}})],[n]),I=F=>{const J=F[0];k(J?Q=>({...Q,page:1,orderBy:J.id,order:J.desc?"desc":"asc"}):Q=>({...Q,page:1,orderBy:"",order:""}))},ce=()=>{if(!u){Me({title:l("Error","kivicare-clinic-management-system"),text:l("Please select an encounter to add a bill.","kivicare-clinic-management-system")});return}C({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{id:h.clinicId,name:h.clinicName,email:"",clinic_image_url:h.clinic_image_url||""},doctor:{id:h.doctorId,name:h.doctorName,email:"",doctor_image_url:h.doctor_image_url||""},patient:{id:h.patientId,name:h.patientName,email:"",patient_image_url:h.patient_image_url||""},patientEncounter:{id:h.id,appointmentId:h.appointmentId||null},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),j(!1),p(""),N(!0)},Z=[{type:"number",name:"id",label:l("Bill ID","kivicare-clinic-management-system"),placeholder:l("Enter Bill ID","kivicare-clinic-management-system")},{type:"number",name:"encounter_id",label:l("Encounter ID","kivicare-clinic-management-system"),placeholder:l("Enter Encounter ID","kivicare-clinic-management-system")},{type:"text",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...!a&&!r?[{type:"text",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l("Enter Clinic Name","kivicare-clinic-management-system"),min:1}]:[],{type:"text",name:"patientName",label:l("Patient Name","kivicare-clinic-management-system"),placeholder:l("Enter Patient Name","kivicare-clinic-management-system"),min:1},{type:"text",name:"serviceName",label:l("Service Name","kivicare-clinic-management-system"),placeholder:l("Enter Service Name","kivicare-clinic-management-system"),min:1},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),options:ge,placeholder:l("Select status","kivicare-clinic-management-system")}],K=f.useMemo(()=>["search","status","date_from","date_to","id","encounter_id","doctorName","clinicName","patientName","serviceName"].some(J=>{const Q=w[J];return typeof Q=="object"&&Q!==null?Q.value!==void 0&&Q.value!=="":Q!=null&&Q!==""}),[w]),B=f.useRef(null);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4"}),i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("Billing Records","kivicare-clinic-management-system")})}),i.jsxs("div",{className:" d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[n("patient_bill_add")&&i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Bill","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>v(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Wn,{ref:B,onChange:F=>{if(F.length===2){const[J,Q]=F;k(me=>({...me,date_from:J.toISOString().split("T")[0],date_to:Q.toISOString().split("T")[0],page:1}))}},options:{mode:"range",dateFormat:vi(window.kc_frontend.date_format),locale:Kn()},className:"form-control w-auto",placeholder:l("Select date range","kivicare-clinic-management-system")}),w.date_from&&w.date_to&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{k(F=>({...F,date_from:"",date_to:"",page:1})),B.current&&B.current.flatpickr&&B.current.flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx("div",{children:i.jsx(lt,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ge,onChange:F=>k(J=>({...J,status:F?F.value:"",page:1})),isClearable:!0,styles:{menuPortal:F=>({...F,zIndex:9999})}})})]}),i.jsx("div",{className:"table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search...","kivicare-clinic-management-system"),value:ee,onChange:G})]}),n("patient_bill_export")&&s&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>le("csv"),disabled:ne.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>le("xls"),disabled:ne.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ue,{placement:"top",overlay:i.jsx(it,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>le("pdf"),disabled:ne.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})]}),i.jsx(bn,{data:se,columns:D,isLoading:pe,error:oe,currentPage:W.currentPage,perPage:W.perPage,totalItems:W.total,lastPage:W.lastPage,onPageChange:F=>k(J=>({...J,page:F})),onPerPageChange:F=>k(J=>({...J,perPage:F,page:1})),onSortingChange:I,enableSelection:!1,moduleNamePlural:"Billing records"}),i.jsx(Iw,{show:T,onHide:H,editFormData:L,setEditFormData:C,showAddServiceItemForm:P,setShowAddServiceItemForm:R,editBillId:E,handleCloseEditModal:H}),i.jsxs(rt,{show:_,onHide:U,centered:!0,children:[i.jsxs(rt.Header,{children:[i.jsx(rt.Title,{children:l("Add New Bill","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:U,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(rt.Body,{className:"p-0",children:i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-2",children:[i.jsxs("label",{htmlFor:"select_type",className:"form-label",children:[l("Select Encounter ID","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(lt,{id:"select_type",className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Select Encounter","kivicare-clinic-management-system"),isLoading:d,options:m.map(F=>({value:F.id,label:`Encounter #${F.id}`,encounter:F})),value:m.map(F=>({value:F.id,label:`Encounter #${F.id}`,encounter:F})).find(F=>String(F.value)===String(u))||null,onChange:F=>p(F?F.value:""),styles:{menuPortal:F=>({...F,zIndex:9999})},isClearable:!0})]}),h&&i.jsxs(i.Fragment,{children:[i.jsx("h6",{className:"font-size-14",children:l("Encounter Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.encounterDate?new Date(h.encounterDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Patient Name","kivicare-clinic-management-system"),":"]}),i.jsx(on,{profileUrl:h.patient_image_url,name:h.patientName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Doctor Name","kivicare-clinic-management-system"),":"]}),i.jsx(on,{profileUrl:h.doctor_image_url,name:h.doctorName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap",children:[i.jsxs("span",{className:"font-size-14",children:[l("Clinic Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.clinicName||"-"})]})]})]})]})}),i.jsxs(rt.Footer,{className:"gap-3",children:[i.jsx(Zt,{variant:"secondary",onClick:U,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:ce,children:l("Generate","kivicare-clinic-management-system")})]})]}),i.jsx(na,{show:g,onHide:()=>v(!1),queryParams:w,onApplyFilters:F=>{k(J=>({...J,...F,page:1})),v(!1)},onResetFilters:()=>{k({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),v(!1)},title:l("Filters","kivicare-clinic-management-system"),hasAppliedFilters:K,fields:Z}),!s&&i.jsx(ci,{text:l("Bill module is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},Rhe=[Yn({path:"/billings",title:"Billings",outlet:Ahe,permissions:["patient_bill_list"],module:"billing",meta:{description:"Billing management system",icon:"receipt",showInSidebar:!0},children:[Ye({path:"",component:Dhe,title:"All Billings",index:!0,permissions:["patient_bill_list"],module:"billing",meta:{description:"List of all billings",breadcrumb:"All Billings"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"view/:id",component:oP,title:"Billing Details",index:!0,permissions:["patient_bill_view"],module:"billing",meta:{description:"Details of a specific billing",breadcrumb:"Billing Details"},skeleton:lP})]})],Phe=()=>{const t=Gn();return i.jsxs("div",{className:"doctor-session-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/doctor-session"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(xs,{})]})},Mhe=[Yn({path:"/doctor-session",title:"Doctor Sessions",outlet:Phe,permissions:["doctor_session_list"],meta:{description:"Manage doctor sessions",icon:"calendar",showInSidebar:!0,section:"management"},children:[Ye({path:"",component:Tk,title:"Sessions",index:!0,permissions:["doctor_session_list"],meta:{description:"List of all doctor sessions",breadcrumb:"All Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),Ye({path:"add",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create"},permissions:["doctor_session_add"],skeleton:Jp,meta:{description:"Add a new doctor session",breadcrumb:"Add New"}}),Ye({path:"edit/:id",component:Dm,title:"Edit Doctor Session",props:{isEditing:!0,mode:"edit"},permissions:["doctor_session_edit"],skeleton:Jp,meta:{description:"Edit doctor session",breadcrumb:"Edit"}})]})],lI=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx(Co,{items:["50px","80px"]}),i.jsx(S,{width:"120px",height:"1.125rem",className:"mt-2"})]})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs(pt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"200px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs(pt,{children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs(pt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"300px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})})]})})]})]}),tc={getReportInitialData:()=>ve({endpoint:"reports/initial-data",method:"GET"}),getClinicRevenueOverall:(t={})=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall params:",t),ve({endpoint:"reports/clinic-revenue-overall",method:"GET",data:t}).then(e=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall response:",e),e))),getClinicRevenueDetail:(t={})=>ve({endpoint:"reports/clinic-revenue-detail",method:"GET",data:t}),getDoctorRevenue:(t={})=>ve({endpoint:"reports/doctor-revenue",method:"GET",data:t}),getClinicAppointmentCount:(t={})=>ve({endpoint:"reports/clinic-appointment-count",method:"GET",data:t}),getDoctorAppointmentCount:(t={})=>ve({endpoint:"reports/doctor-appointment-count",method:"GET",data:t})};Qm.register(eq,iq,O9,vT,z9,jT,bT);const s_=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"320px",minHeight:"320px"},children:i.jsx("p",{className:"text-muted",children:l("No data available for the selected period.","kivicare-clinic-management-system")})}),Ihe=t=>{const e=t?.data?.datasets;return e?.length?e.some(n=>n.data.some(s=>s>0)):!1},Id=({title:t,chartType:e="bar",queryKey:n,queryFn:s,filters:a,enabled:r=!0,colors:o,selectOptions:c,selectValue:d,onSelectChange:m,initialData:u,showCurrencyInTooltip:p=!0})=>{const{darkMode:h}=mt(),g=f.useRef();f.useEffect(()=>()=>{g.current&&g.current.destroy()},[]);const v=C=>C===0||C===null||C===void 0||C===""?"-":C,x=C=>{if(C===0||C===null||C===void 0)return"-";const P=Number(C).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2});if(!p)return P;const R=u?.clinic_currency?.prefix||"",M=u?.clinic_currency?.postfix||"";return`${R}${P}${M}`},y=C=>{if(!g.current)return;const P=g.current,R=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();if(C==="png"||C==="jpeg"){const M=document.createElement("a");M.download=`${R}.${C}`,M.href=P.toBase64Image(`image/${C}`),M.click()}else if(C==="csv"){const M=P.data;let O;e==="doughnut"?(O=l("Clinic","kivicare-clinic-management-system")+","+l("Revenue","kivicare-clinic-management-system")+`
`,M.labels.forEach((H,ae)=>{const V=M.datasets[0].data[ae];O+=`"${H}",${v(V)}
`})):(O=(a.month==="all"?l("Month","kivicare-clinic-management-system"):l("Day","kivicare-clinic-management-system"))+","+M.datasets.map(ae=>`"${ae.label||"Dataset"}"`).join(",")+`
`,M.labels.forEach((ae,V)=>{O+=`"${ae}",`+M.datasets.map(pe=>v(pe.data[V])).join(",")+`
`}));const q=new Blob([O],{type:"text/csv"}),U=document.createElement("a");U.download=`${R}.csv`,U.href=URL.createObjectURL(q),U.click()}},b=[{value:"png",label:l("PNG","kivicare-clinic-management-system")},{value:"jpeg",label:l("JPEG","kivicare-clinic-management-system")},{value:"csv",label:l("CSV","kivicare-clinic-management-system")}],{data:w,isFetching:k}=gt({queryKey:n,queryFn:()=>s(a),enabled:r,staleTime:300*1e3}),_=f.useMemo(()=>{if(e!=="doughnut")return"";const C=w?.data?.datasets?.[0]?.data?.reduce((O,q)=>O+q,0)||0,P=u?.clinic_currency?.prefix||"",R=u?.clinic_currency?.postfix||"",M=C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${P}${M}${R}`},[w,e,u]),j=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{position:"bottom",labels:{color:h?"#adb5bd":"#6c757d"}},title:{display:!1},tooltip:{callbacks:{title:function(C){const P=C[0]?.label??"",R=a.year||new Date().getFullYear().toString();if(a.month==="all")return`${P}, ${R}`;const M=parseInt(a.month,10);if(isNaN(M)||M<1||M>12)return`${P}, ${R}`;const O=new Date(2e3,M-1,1).toLocaleString("default",{month:"short"});return`${P}, ${O} ${R}`},label:function(C){const P=C.parsed.y,R=x(P);return`${C.dataset.label||""}: ${R}`}}}},scales:{x:{ticks:{color:h?"#adb5bd":"#6c757d"},grid:{color:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}},y:{beginAtZero:!0,ticks:{precision:0,color:h?"#adb5bd":"#6c757d"},grid:{color:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},suggestedMax:5}}}),[h,u,p,a]),T=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:h?"#adb5bd":"#6c757d"}},title:{display:!1},centerText:{display:!0,text:_,label:l("Total","kivicare-clinic-management-system")},tooltip:{callbacks:{label:function(C){const P=C.parsed||C.raw||0,R=x(P);return`${C.label||""}: ${R}`}}}}}),[_,h,u,p]),N=f.useMemo(()=>({id:"doughnutCenterText",beforeDraw:C=>{const{config:P,chartArea:R,ctx:M}=C,{type:O,options:{plugins:{centerText:q}={}}}=P;if(O!=="doughnut"||!q?.display||!q?.text)return;const{top:U,left:H,width:ae,height:V}=R,pe=H+ae/2,oe=U+V/2;M.save(),M.font="0.9rem Inter, sans-serif",M.textAlign="center",M.textBaseline="middle",M.fillStyle=h?"#adb5bd":"#6c757d",M.fillText(q.label,pe,oe-12),M.font="bold 1.1rem Inter, sans-serif",M.fillStyle=h?"#ffffff":"#333333",M.fillText(q.text,pe,oe+10),M.restore()}}),[h]),E=(C,P)=>({labels:C?.data?.labels||[],datasets:(C?.data?.datasets||[]).map((R,M)=>({...R,backgroundColor:P?.[M%P.length]||"#4874dc"}))}),A=f.useMemo(()=>{const C=w?.data?.datasets?.[0]?.data?.length>0;return{labels:C?w.data.labels:[],datasets:[{label:t,data:C?w.data.datasets[0].data:[],backgroundColor:o||[],hoverOffset:4}]}},[w,o,t]),L=()=>{const C=JSON.stringify(n)+(h?"-dark":"-light");return e==="doughnut"?A.datasets[0].data.length?i.jsx(ET,{ref:g,options:T,data:A,plugins:[N]},C):i.jsx(s_,{}):Ihe(w)?i.jsx(mq,{ref:g,options:j,data:E(w,o)},C):i.jsx(s_,{})};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"m-0",children:t}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(lt,{options:b,onChange:C=>y(C.value),placeholder:l("Export","kivicare-clinic-management-system"),styles:{container:C=>({...C,minWidth:"80px"})},className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1}),c&&i.jsx(lt,{options:c,value:c.find(C=>C.value===d),onChange:C=>m(C.value),className:"react-select-box",classNamePrefix:"react-select",styles:{container:C=>({...C,minWidth:"100px"}),menuPortal:C=>({...C,zIndex:9999})}})]})]}),i.jsx("div",{className:"position-relative",children:i.jsx("div",{style:{height:320},children:k?e==="doughnut"?i.jsx("div",{className:"col-lg-12",children:i.jsxs(pt,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"160px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}):i.jsx("div",{className:"col-md-12",children:i.jsxs(pt,{children:[i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"})]})]})}):L()})})]})})},Od=(t,e)=>["reports",t,e],Ohe=()=>{const t=new Date;return{year:t.getFullYear().toString(),monthValue:`${t.getMonth()+1}`.padStart(2,"0"),monthLabel:l(t.toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}};function Lhe(){const{isAddonActive:t,userRole:e}=mt(),n=t("kiviPro"),[s,a]=f.useState(()=>{const{year:j}=Ohe();return{clinic_id:{id:"all",label:l("All Clinics","kivicare-clinic-management-system")},doctor_id:{id:"all",label:l("All Doctors","kivicare-clinic-management-system")},month:{value:"all",label:l("All Months","kivicare-clinic-management-system")},year:{value:j,label:j}}}),[r,o]=f.useState("all"),[c,d]=f.useState("all"),{data:m,isLoading:u}=gt({queryKey:["reports","initialData"],queryFn:tc.getReportInitialData,enabled:n}),{data:p,isLoading:h}=Og({enabled:n}),{data:g,isLoading:v}=qT(s.clinic_id?.id,{enabled:n}),x=f.useMemo(()=>[{id:"all",label:l("All Clinics","kivicare-clinic-management-system")},...p?.data||[]],[p]),y=f.useMemo(()=>[{id:"all",label:l("All Doctors","kivicare-clinic-management-system")},...g?.data||[]],[g]),b=f.useMemo(()=>Array.from({length:new Date().getFullYear()-2019},(j,T)=>{const N=(new Date().getFullYear()-T).toString();return{value:N,label:N}}),[]),w=f.useMemo(()=>[{value:"all",label:l("All Months","kivicare-clinic-management-system")},...Array.from({length:12},(j,T)=>({value:(T+1).toString().padStart(2,"0"),label:l(new Date(0,T).toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}))],[]),k=f.useMemo(()=>[{value:"all",label:ob("All","kivicare-clinic-management-system","kivicare-clinic-management-system")},{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")},{value:"0",label:l("Completed","kivicare-clinic-management-system")},{value:"3",label:l("Check-in","kivicare-clinic-management-system")},{value:"4",label:l("Cancelled","kivicare-clinic-management-system")}],[]),_=f.useCallback((j,T)=>{a(N=>({...N,[j]:T}))},[]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb mb-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(ht,{to:"/",children:l("Home","kivicare-clinic-management-system")})}),i.jsx("li",{className:"breadcrumb-item active",children:l("Reports","kivicare-clinic-management-system")})]})}),i.jsx("h6",{className:"m-0 mt-2",children:l("Reports","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"position-relative",children:[u&&i.jsx(lI,{}),!n&&i.jsx(ci,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),text:l("Reports module is available only in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[e==="administrator"&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(lt,{placeholder:l("Select Clinic","kivicare-clinic-management-system"),options:x,value:s.clinic_id,onChange:j=>_("clinic_id",j),getOptionValue:j=>j.id,isLoading:h,isDisabled:!n,isClearable:!0,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),["administrator","kivicare_clinic_admin"].includes(e)&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(lt,{placeholder:l("Select Doctor","kivicare-clinic-management-system"),options:y,value:s.doctor_id,onChange:j=>_("doctor_id",j),getOptionValue:j=>j.id,isLoading:v,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",isClearable:!0,styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(lt,{options:w,value:s.month,onChange:j=>_("month",j),getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(lt,{options:b,value:s.year,onChange:j=>_("year",j),styles:{container:j=>({...j,minWidth:"100px"}),menuPortal:j=>({...j,zIndex:9999})},getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select"})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-revenue-overall",title:l("Clinic Revenue (Overall)","kivicare-clinic-management-system"),chartType:"doughnut",queryKey:Od("clinicRevenueOverall",j),queryFn:tc.getClinicRevenueOverall,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-8",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-revenue-detail",title:l("Clinic Revenue (Detail)","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("clinicRevenueDetail",j),queryFn:tc.getClinicRevenueDetail,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-12",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"doctor-revenue",title:l("Doctor Revenue","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("doctorRevenue",j),queryFn:tc.getDoctorRevenue,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:r,appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-appointment-count",title:l("Clinic Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("clinicAppointmentCount",j),queryFn:tc.getClinicAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data,showCurrencyInTooltip:!1,selectOptions:k,selectValue:r,onSelectChange:o})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:c};return i.jsx(Id,{id:"doctor-appointment-count",title:l("Doctor Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("doctorAppointmentCount",j),queryFn:tc.getDoctorAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors,initialData:m?.data,showCurrencyInTooltip:!1,selectOptions:k,selectValue:c,onSelectChange:d})})()})]})})]})]})}const Fhe=[Ye({path:"/clinic-revenue-reports",title:l("Reports","kivicare-clinic-management-system"),component:Lhe,roles:["administrator","clinic_admin"],meta:{description:l("Access various clinic and doctor reports and analytics.","kivicare-clinic-management-system"),icon:"ph ph-chart-line",showInSidebar:!0,section:"Financial"},skeleton:lI})],$he=()=>{const t=Gn(),e=mn(),[n,s]=f.useState({text:"",type:""}),a=jI();f.useEffect(()=>{t.state?.message&&s(t.state.message)},[t.state]),f.useEffect(()=>{a.isSuccess&&a.data&&(a.data.data?.nonce&&(window.kc_frontend||(window.kc_frontend={}),window.kc_frontend.nonce=a.data.data.nonce),e("/dashboard",{replace:!0}))},[a.isSuccess,a.data,e]),f.useEffect(()=>{if(a.isError){const u=a.error?.message||l("Login failed. Please try again.","kivicare-clinic-management-system");s({text:u,type:"error"})}},[a.isError,a.error]);const{register:r,handleSubmit:o,formState:{errors:c},reset:d}=Jt(),m=u=>{s({text:"",type:""}),a.mutate(u)};return i.jsx("div",{className:"container",children:i.jsx("div",{className:"row justify-content-center align-items-center min-vh-100",children:i.jsx("div",{className:"col-4",children:i.jsxs("div",{className:"kc-register-login-form",children:[n.text&&i.jsx("div",{className:`alert ${n.type==="success"?"alert-success":"alert-danger"} mb-4`,dangerouslySetInnerHTML:{__html:n.text}}),i.jsx("div",{className:"card p-0 mb-0",children:i.jsxs("div",{className:"card-body auth-card",children:[i.jsx("div",{className:"logo-img text-center mb-4",children:i.jsx("img",{src:window.kc_frontend?.site_logo||(window.kc_frontend?.loader_image?window.kc_frontend.loader_image.replace("loader.gif","logo.png"):""),alt:"KiviCare",height:"45",className:"logo-normal"})}),i.jsxs("form",{className:"kc-login-form",onSubmit:o(m),children:[i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-username",children:l("Username","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"login-username",className:`form-control ${c.username?"is-invalid":""}`,placeholder:"username@example.com",...r("username",{required:l("Username is required","kivicare-clinic-management-system")})}),c.username&&i.jsx("div",{className:"invalid-feedback",children:c.username.message})]}),i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-password",children:l("Password","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",id:"login-password",className:`form-control ${c.password?"is-invalid":""}`,placeholder:"********",...r("password",{required:l("Password is required","kivicare-clinic-management-system")})}),c.password&&i.jsx("div",{className:"invalid-feedback",children:c.password.message})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"remember-me",...r("rememberMe")}),i.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:l("Remember Me","kivicare-clinic-management-system")})]}),i.jsx("a",{href:`${window.kc_frontend?.home_url}/wp-login.php?action=lostpassword`,className:"forgot-pwd fw-semibold fst-italic",children:l("Forgot Password?","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:a.isPending,children:i.jsx("span",{className:"text d-inline-block align-middle text-uppercase",children:a.isPending?l("Loading...","kivicare-clinic-management-system"):l("Login","kivicare-clinic-management-system")})})})]})]})})]})})})})};function oI(){const t=mn(),[e,n]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,a]=f.useState(!1),[r,o]=f.useState({type:"",text:""}),[c,d]=f.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),m=h=>{n({...e,[h.target.name]:h.target.value}),r.text&&o({type:"",text:""})},u=h=>{d({...c,[h]:!c[h]})},p=async()=>{if(!e.currentPassword){o({type:"danger",text:l("Current password is required","kivicare-clinic-management-system")});return}if(!e.newPassword){o({type:"danger",text:l("New password is required","kivicare-clinic-management-system")});return}if(!e.confirmPassword){o({type:"danger",text:l("Confirm password is required","kivicare-clinic-management-system")});return}if(e.newPassword!==e.confirmPassword){o({type:"danger",text:l("New password and confirm password do not match","kivicare-clinic-management-system")});return}if(e.currentPassword===e.newPassword){o({type:"danger",text:l("Old and new password are same","kivicare-clinic-management-system")});return}if(e.newPassword.length<4){o({type:"danger",text:l("New password must be at least 4 characters long","kivicare-clinic-management-system")});return}a(!0),o({type:"",text:""});try{const h=await NI.changePassword(e);h.status?(o({type:"success",text:l("Password changed successfully","kivicare-clinic-management-system")}),n({currentPassword:"",newPassword:"",confirmPassword:""})):h.message&&h.message.includes("current password")?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):h.message&&h.message.includes("400")?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:h.message||l("Failed to change password","kivicare-clinic-management-system")})}catch(h){h.response&&h.response.status===400?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:l("An error occurred while changing password","kivicare-clinic-management-system")})}finally{a(!1)}};return i.jsxs("div",{children:[i.jsx("h6",{className:"mb-4",children:"Change Password"}),r.text&&i.jsx(h3,{variant:r.type,className:"mb-3",children:r.text}),i.jsxs(Pt,{children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx(Pt.Label,{className:"form-label",children:l("Current password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Pt.Control,{type:c.currentPassword?"text":"password",name:"currentPassword",placeholder:l("Enter your old password","kivicare-clinic-management-system"),value:e.currentPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("currentPassword"),children:c.currentPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Pt.Label,{className:"form-label",children:l("New password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Pt.Control,{type:c.newPassword?"text":"password",name:"newPassword",placeholder:l("Enter your new password","kivicare-clinic-management-system"),value:e.newPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("newPassword"),children:c.newPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Pt.Label,{className:"form-label",children:l("Confirm password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Pt.Control,{type:c.confirmPassword?"text":"password",name:"confirmPassword",placeholder:l("Enter your confirm password","kivicare-clinic-management-system"),value:e.confirmPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("confirmPassword"),children:c.confirmPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]})]})})}),i.jsxs("div",{className:"text-end",children:[i.jsx(Zt,{variant:"secondary",onClick:()=>t(-1),className:"btn btn-secondary me-2",disabled:s,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Zt,{variant:"primary",onClick:p,className:"btn btn-primary",disabled:s,children:s?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})]})}const Bhe=[Ye({path:"/login",component:$he,title:"Login",exact:!0,meta:{description:"User login page",requiresAuth:!1,showInSidebar:!1}}),Ye({path:"/change-password",component:oI,title:"Change Password",permissions:["change_password"],meta:{description:"User change password page",breadcrumb:"Change Password",showInSidebar:!1}})],qhe=f.lazy(()=>Fr(()=>Promise.resolve().then(()=>jte),void 0,import.meta.url)),Hhe=f.lazy(()=>Fr(()=>Promise.resolve().then(()=>Yte),void 0,import.meta.url)),zhe=f.lazy(()=>Fr(()=>Promise.resolve().then(()=>Lne),void 0,import.meta.url)),Vhe=f.lazy(()=>Fr(()=>Promise.resolve().then(()=>vte),void 0,import.meta.url)),Uhe=()=>{const{userRole:t,isLoading:e}=mt();switch(t){case"kiviCare_patient":return i.jsx(qhe,{isProfile:!0,isEditing:!0});case"kiviCare_doctor":return i.jsx(Hhe,{isProfile:!0,isEditing:!0});case"kiviCare_receptionist":return i.jsx(zhe,{isProfile:!0,isEditing:!0});case"administrator":case"kiviCare_clinic_admin":return i.jsx(Vhe,{isProfile:!0,isEditing:!0});default:return i.jsx("div",{children:l("Unknown user role","kivicare-clinic-management-system")})}},Whe=()=>{const{userRole:t,hasCapability:e}=mt(),n=t?.includes("patient")?"patient_profile":t?.includes("doctor")?"doctor_profile":t?.includes("receptionist")?"receptionist_profile":t?.includes("clinic_admin")?"clinic_profile":"read";return e(n)||t?.includes("administrator")?i.jsx(Uhe,{}):i.jsx(Xd,{})},Khe=[Ye({path:"/profile",component:Whe,title:"Profile",meta:{description:"User profile page"}}),Ye({path:"/change-password",component:oI,title:"Change Password",meta:{description:"Change password page"}})],Ghe=[{name:"auth",routes:Bhe,description:"Authentication routes",enabled:!0},{name:"dashboard",routes:QZ,description:"Core dashboard routes",enabled:!0},{name:"appointments",routes:qJ,description:"Appointment management routes",enabled:!0},{name:"encounters",routes:pte,description:"Encounter management routes",enabled:!0},{name:"clinics",routes:xte,description:"Clinic management routes",enabled:!0},{name:"patients",routes:Ate,description:"Patient management routes",enabled:!0},{name:"taxes",routes:bne,description:"Tax management routes",enabled:!0},{name:"get-help",routes:Nne,description:"Help and support management routes",enabled:!0},{name:"doctors",routes:cne,description:"Doctor management routes",enabled:!0},{name:"billing",routes:Rhe,description:"Billing management routes",enabled:!0},{name:"patients-reports",routes:Rte,description:"Patient Report routes",enabled:!0},{name:"receptionists",routes:Fne,description:"Receptionist management routes",enabled:!0},{name:"doctor-services",routes:qne,description:"Doctor Service management routes",enabled:!0},{name:"doctor-session",routes:Mhe,description:"Doctor session management routes",enabled:!0},{name:"reports",routes:Fhe,description:"Clinic and Doctor Reports",enabled:!0},{name:"setup",routes:iie,description:"Initial setup wizard routes",enabled:!0},{name:"setting",routes:The,description:"Kivicare Setting routes"},{name:"profile",routes:Khe,description:"User profile management routes",enabled:!0},{name:"errors",routes:Une,description:"Error handling and fallback routes",enabled:!0}],Yhe=()=>Ghe.reduce((t,e)=>[...t,...e.routes],[]),Qhe=Yhe(),ws=new Map,a_=[];function cI(t,e="",n=0,s=-1,a=-1){t.forEach((r,o)=>{let c=r.path;c?.startsWith("/")||(e?c=`${e}/${r.path}`.replace(/\/+/g,"/"):c=`/${r.path}`),c=c.replace(/\/+/g,"/"),r.index&&(c=e||"/");const d=n===0;d&&(a=a_.length,a_.push(c));const m={path:c,index:o,level:n,parentPath:e,topLevelIndex:a,topLevelPath:d?c:ws.get(e)?.topLevelPath||"/"};ws.set(c,m),r.children&&cI(r.children,c,n+1,o,a)})}cI(Qhe);const xs=()=>{const t=Gn(),e=l_(),n=f.useRef(null),[s,a]=f.useState("fade-down"),r=f.useRef(t),o=f.useRef(!0);f.useEffect(()=>{if(o.current){o.current=!1,r.current=t;return}const m=t.pathname,u=r.current.pathname;if(m===u)return;const p=ws.get(m)||d(m),h=ws.get(u)||d(u);let g="fade-down";p&&h&&(p.topLevelPath===h.topLevelPath?p.parentPath===h.parentPath?g=p.index>h.index?"fade-left":"fade-right":g=p.level<h.level?"fade-down":"fade-up":p.level===0&&h.level===0?g=p.index<h.index?"fade-down":"fade-up":p.parentPath===h.path?g="fade-left":h.parentPath===p.path?g="fade-right":g=p.topLevelIndex<h.topLevelIndex?"fade-down":"fade-up"),a(g),r.current=t},[t]);const c=f.useRef(new Map);function d(m){if(c.current.has(m))return c.current.get(m);if(ws.has(m))return ws.get(m);const u=m.replace(/\/+$/,""),p=`${u}/`;if(ws.has(u))return c.current.set(m,ws.get(u)),ws.get(u);if(ws.has(p))return c.current.set(m,ws.get(p)),ws.get(p);const h=ws.get("/")||{path:"/",index:0,level:0,parentPath:"",topLevelIndex:0,topLevelPath:"/"};return c.current.set(m,h),h}return i.jsx("div",{className:"route-container",children:i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:n,timeout:300,classNames:s,unmountOnExit:!0,children:()=>i.jsx("div",{ref:n,className:"w-100",children:e})},t.pathname)})})};export{K5 as $,xg as A,b_ as B,f_ as C,Rn as D,S as E,Yhe as F,tpe as G,epe as H,Y_ as I,M2 as J,iie as K,$he as L,gpe as M,jb as N,Mu as O,FJ as P,tf as Q,fpe as R,Mc as S,xs as T,tX as U,ppe as V,bk as W,od as X,XR as Y,Dg as Z,Ci as _,bj as a,CJ as a0,EJ as a1,vpe as a2,OR as a3,Ga as a4,BJ as a5,Bi as a6,jn as a7,eX as a8,yJ as a9,Wn as aa,Kn as ab,vi as ac,UZ as ad,qa as ae,An as af,$t as ag,ZR as ah,xpe as ai,ype as aj,Nee as ak,Ct as al,ef as am,Pt as an,Qn as ao,_t as ap,rt as aq,Pe as ar,P5 as b,$5 as c,gm as d,wg as e,Nb as f,j3 as g,n3 as h,h_ as i,N3 as j,Dt as k,vt as l,H5 as m,G_ as n,K_ as o,fg as p,Bl as q,La as r,W_ as s,Zt as t,Hs as u,cb as v,mb as w,Tc as x,lt as y,No as z};
