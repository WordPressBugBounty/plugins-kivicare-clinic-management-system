import{s as z,o as M,j as i,r as l,v as G,_ as s}from"./index-Cty4Gm2O.js";import{ah as V}from"./TransitionRoutes-B3VF7Cy-.js";/* empty css                        */z(window.kc_frontend?.locale_data||{},"kivicare-clinic-management-system");function B({clinics:c,settings:a,currentUserRole:n}){const[d,h]=l.useState(c||[]),[u,F]=l.useState(a||{}),[N,P]=l.useState(""),[b,O]=l.useState(""),[g,R]=l.useState(""),[C,w]=l.useState(!1),[x,L]=l.useState(null),[r,T]=l.useState({service:"",specialty:"",search:""}),[m,_]=l.useState(1),j=u.iq_kivicare_clinic_per_page||5,S=d.filter(e=>{const k=e.name.toLowerCase().includes(r.search.toLowerCase()),f=e.email.toLowerCase().includes(r.search.toLowerCase()),t=!r.specialty||e.specialties.some(v=>v.toLowerCase()===r.specialty.toLowerCase()),o=!r.service||e.services.some(v=>v.toLowerCase()===r.service.toLowerCase());return k&&f&&t&&o}),D=[...new Set(d.flatMap(e=>e.specialties))].filter(Boolean),I=[...new Set(d.flatMap(e=>e.services))].filter(Boolean),p=Math.ceil(S.length/j),q=(m-1)*j,J=q+j,K=S.slice(q,J),H=()=>{m>1&&_(m-1)},Q=()=>{m<p&&_(m+1)};G.useEffect(()=>{_(1)},[r.search,r.service,r.specialty]);const U=()=>{T({service:b,specialty:N,search:g}),_(1)},W=e=>{if(n&&["administrator","kivicare_doctor","kivicare_receptionist","kivicare_clinic_admin"].includes(n)){V.fire({title:s("Current user can not view the widget. Please open this page in incognito mode or use another browser","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:s("OK","kivicare-clinic-management-system"),confirmButtonColor:"#3085d6",confirmButtonAriaLabel:s("OK","kivicare-clinic-management-system")});return}L(e),w(!0)},y=()=>{w(!1),L(null),document.body.style.overflow=""};return l.useEffect(()=>{if(C){document.body.style.overflow="hidden";const t=document.getElementById("kivicare-appointment-modal");t&&(t.style.display="block");const o=document.getElementById("kivicare-modal-form-container");if(o&&typeof window.initBookAppointment=="function"){o.innerHTML="";const v=document.createElement("div");v.className="kc-book-appointment-container",x?.id&&v.setAttribute("data-selected-clinic-id",String(x.id)),["data-widget-order","data-is-kivicare-pro","data-payment-gateways","data-user-login","data-current-user-id","data-page-id","data-query-params"].forEach(E=>{const A=o.getAttribute(E);A&&v.setAttribute(E,A)}),o.appendChild(v),window.initBookAppointment()}}else{const t=document.getElementById("kivicare-appointment-modal");t&&(t.style.display="none");const o=document.getElementById("kivicare-modal-form-container");o&&(o.innerHTML="")}const e=t=>{t.key==="Escape"&&y()},k=t=>{t.target.id==="kivicare-appointment-modal"&&y()},f=t=>{t.target.classList.contains("kivicare-modal-close")&&y()};return document.addEventListener("keydown",e),window.addEventListener("click",k),document.addEventListener("click",f),()=>{document.removeEventListener("keydown",e),window.removeEventListener("click",k),document.removeEventListener("click",f)}},[C,x]),d.length===0?i.jsx("div",{className:"kivicare-no-clinics",children:s("No clinics found.","kivicare-clinic-management-system")}):i.jsxs("div",{className:"kivi-widget-container",children:[u.iq_kivicare_clinic_enable_filter==="yes"&&i.jsxs("div",{className:"kivi-filter-container",children:[i.jsx("div",{className:"kivi-filter-item",children:i.jsxs("select",{className:"kivi-select",value:N,onChange:e=>P(e.target.value.toLowerCase()),children:[i.jsx("option",{value:"",children:s("Filter by Speciality","kivicare-clinic-management-system")}),D.map(e=>i.jsx("option",{value:e.toLowerCase(),children:e},e))]})}),i.jsx("div",{className:"kivi-filter-item",children:i.jsxs("select",{className:"kivi-select",value:b,onChange:e=>O(e.target.value.toLowerCase()),children:[i.jsx("option",{value:"",children:s("Filter by Service","kivicare-clinic-management-system")}),I.map(e=>i.jsx("option",{value:e.toLowerCase(),children:e},e))]})}),i.jsx("div",{className:"kivi-filter-item",children:i.jsx("input",{type:"text",placeholder:s("Search clinic by name, email","kivicare-clinic-management-system"),className:"kivi-input",value:g,onChange:e=>R(e.target.value)})}),i.jsx("div",{className:"kivi-filter-item",children:i.jsx("button",{className:"kivi-button kivi-button-primary",onClick:U,children:s("Filter Clinic","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"kivi-clinic-list",children:K.map((e,k)=>i.jsx("div",{"data-index":k,"data-name":e.name.toLowerCase(),"data-email":e.email.toLowerCase(),"data-specialties":e.specialties.join(",").toLowerCase(),"data-services":e.services.join(",").toLowerCase(),children:X(e,u,W)},e.id))}),p>1&&i.jsxs("div",{className:"kivicare-pagination",children:[i.jsx("button",{className:"kivicare-pagination-btn prev",onClick:H,disabled:m===1,children:s("Previous","kivicare-clinic-management-system")}),i.jsxs("span",{className:"kivicare-pagination-info",children:[s("Page","kivicare-clinic-management-system")," ",m," ",s("of","kivicare-clinic-management-system")," ",p]}),i.jsx("button",{className:"kivicare-pagination-btn next",onClick:Q,disabled:m===p,children:s("Next","kivicare-clinic-management-system")})]})]})}function X(c,a,n){return i.jsxs("div",{className:"kivi-clinic kivicare-clinic-card",children:[a.iq_kivicare_clinic_image==="yes"&&i.jsx("div",{className:"kivi-clinic-image",children:i.jsx("img",{src:c.image,alt:c.name,className:"kivicare-clinic-avtar clinic-image"})}),i.jsxs("div",{className:"kivi-clinic-content",children:[a.iq_kivicare_clinic_name==="yes"&&i.jsxs("div",{className:"clinic-name",children:[a.iq_kivicare_clinic_name_label&&i.jsx("h6",{className:"kivicare-clinic-label",children:a.iq_kivicare_clinic_name_label}),i.jsx("h3",{className:"kivicare-clinic-name",children:c.name})]}),a.iq_kivicare_clinic_speciality==="yes"&&c.speciality&&i.jsxs("div",{className:"clinic-speciality",children:[a.iq_kivicare_clinic_speciality_label&&i.jsx("h6",{className:"kivicare-clinic-label",children:a.iq_kivicare_clinic_speciality_label}),i.jsx("p",{className:"kivicare-clinic-speciality",children:c.speciality})]}),i.jsxs("div",{className:"kivi-clinic-information",children:[a.iq_kivicare_clinic_number==="yes"&&c.number&&i.jsxs("div",{className:"kivi-clinic-information-item clinic-number",children:[i.jsx("div",{className:"kivi-clinic-information-title",children:i.jsx("h6",{className:"info-title kivicare-clinic-label",children:a.iq_kivicare_clinic_number_label})}),i.jsx("div",{className:"kivi-clinic-information-content",children:i.jsx("span",{className:"kivicare-clinic-value",children:c.number})})]}),a.iq_kivicare_clinic_email==="yes"&&c.email&&i.jsxs("div",{className:"kivi-clinic-information-item clinic-email",children:[i.jsx("div",{className:"kivi-clinic-information-title",children:i.jsx("h6",{className:"info-title kivicare-clinic-label",children:a.iq_kivicare_clinic_email_label})}),i.jsx("div",{className:"kivi-clinic-information-content",children:i.jsx("span",{className:"kivicare-clinic-value",children:c.email})})]}),a.iq_kivicare_clinic_address==="yes"&&c.address&&i.jsxs("div",{className:"kivi-clinic-information-item clinic-address",children:[i.jsx("div",{className:"kivi-clinic-information-title",children:i.jsx("h6",{className:"info-title kivicare-clinic-label",children:a.iq_kivicare_clinic_address_label})}),i.jsx("div",{className:"kivi-clinic-information-content",children:i.jsx("span",{className:"kivicare-clinic-value",children:c.address})})]})]}),a.iq_kivicare_clinic_administrator==="yes"&&i.jsxs("div",{className:"clinic-administrator",children:[i.jsx("h5",{className:"kivi-administrator-title kivicare-clinic-label",children:a.iq_kivicare_clinic_administrator_label}),i.jsxs("div",{className:"kivi-clinic-information",children:[a.iq_kivicare_clinic_admin_number==="yes"&&c.admin_number&&i.jsxs("div",{className:"kivi-clinic-information-item clinic-admin_number",children:[i.jsx("div",{className:"kivi-clinic-information-title",children:i.jsx("h6",{className:"info-title kivicare-clinic-label",children:a.iq_kivicare_clinic_admin_number_label})}),i.jsx("div",{className:"kivi-clinic-information-content",children:i.jsx("span",{className:"kivicare-clinic-value",children:c.admin_number})})]}),a.iq_kivicare_clinic_admin_email==="yes"&&c.admin_email&&i.jsxs("div",{className:"kivi-clinic-information-item clinic-admin_email",children:[i.jsx("div",{className:"kivi-clinic-information-title",children:i.jsx("h6",{className:"info-title kivicare-clinic-label",children:a.iq_kivicare_clinic_admin_email_label})}),i.jsx("div",{className:"kivi-clinic-information-content",children:i.jsx("span",{className:"kivicare-clinic-value",children:c.admin_email})})]})]})]}),i.jsx("div",{className:"kivi-clinic-bookaction",children:i.jsx("button",{className:"kivi-button kivi-button-primary kivicare-book-appointment-btn",onClick:()=>n(c),children:s("Book Appointment","kivicare-clinic-management-system")})})]})]})}jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/kivicare_clinic_list.default",function(c){const a=c.find(".kivicare-clinic-list-container");if(a.length){const n=JSON.parse(a.attr("data-clinics")||"[]"),d=JSON.parse(a.attr("data-settings")||"{}"),h=a.attr("data-current-user-role")||"";a.find(".kivicare-loading").remove(),M.createRoot(a[0]).render(i.jsx(B,{clinics:n,settings:d,currentUserRole:h}))}})});document.addEventListener("DOMContentLoaded",function(){typeof elementorFrontend<"u"&&elementorFrontend.isEditMode()||document.querySelectorAll(".kivicare-clinic-list-container").forEach(n=>{if(!n.hasAttribute("data-rendered")){const d=JSON.parse(n.getAttribute("data-clinics")||"[]"),h=JSON.parse(n.getAttribute("data-settings")||"{}"),u=n.getAttribute("data-current-user-role")||"";n.querySelector(".kivicare-loading")?.remove(),M.createRoot(n).render(i.jsx(B,{clinics:d,settings:h,currentUserRole:u})),n.setAttribute("data-rendered","true")}})});
