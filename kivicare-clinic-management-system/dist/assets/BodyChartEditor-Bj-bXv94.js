import{at as lu,a8 as cu,aj as uu,h as hu,r as je,j as ee,_ as ye}from"./index-DaLzaML2.js";import{ai as fu,aj as du,ak as gu,al as Xe,t as ri,am as vu,an as ii,ao as hn,ap as fn,aq as gi,ag as vi}from"./TransitionRoutes-CvO8mWuj.js";var dn={exports:{}},gn={exports:{}},vn={exports:{}};var Nr;function pu(){return Nr||(Nr=1,(function(ze,Ze){(function(Zt,L){ze.exports=L()})(window,function(){return(function(Ct){var Zt={};function L(R){if(Zt[R])return Zt[R].exports;var S=Zt[R]={i:R,l:!1,exports:{}};return Ct[R].call(S.exports,S,S.exports,L),S.l=!0,S.exports}return L.m=Ct,L.c=Zt,L.d=function(R,S,y){L.o(R,S)||Object.defineProperty(R,S,{enumerable:!0,get:y})},L.r=function(R){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},L.t=function(R,S){if(S&1&&(R=L(R)),S&8||S&4&&typeof R=="object"&&R&&R.__esModule)return R;var y=Object.create(null);if(L.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:R}),S&2&&typeof R!="string")for(var b in R)L.d(y,b,(function(d){return R[d]}).bind(null,b));return y},L.n=function(R){var S=R&&R.__esModule?function(){return R.default}:function(){return R};return L.d(S,"a",S),S},L.o=function(R,S){return Object.prototype.hasOwnProperty.call(R,S)},L.p="dist",L(L.s=33)})([(function(Ct,Zt,L){function R(S,y){var b=Object.prototype.hasOwnProperty,d,h,T,w;for(T=1,w=arguments.length;T<w;T+=1){d=arguments[T];for(h in d)b.call(d,h)&&(S[h]=d[h])}return S}Ct.exports=R}),(function(Ct,Zt,L){function R(S){return S instanceof Array}Ct.exports=R}),(function(Ct,Zt,L){var R=L(1),S=L(6),y=L(7);function b(d,h,T){R(d)?S(d,h,T):y(d,h,T)}Ct.exports=b}),(function(Ct,Zt,L){function R(S){return S===void 0}Ct.exports=R}),(function(Ct,Zt,L){var R=L(22),S=L(2),y=L(6),b=L(7),d=L(37),h=0,T={getLength:function(w){var O=0;return b(w,function(){O+=1}),O},map:function(w,O,D){var P=[];return S(w,function(){P.push(O.apply(D||null,arguments))}),P},filter:function(w,O,D){var P=[];return y(w,function(g){O.apply(D||null,arguments)&&P.push(g)}),P},generateId:function(){return h+=1,h},isOldBrowser:(function(){return R.msie&&R.version<9})(),sendHostName:function(){d("color-picker","UA-129987462-1")}};Ct.exports=T}),(function(Ct,Zt,L){var R=L(1);function S(y,b,d){var h,T;if(d=d||0,!R(b))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,y,d);for(T=b.length,h=d;d>=0&&h<T;h+=1)if(b[h]===y)return h;return-1}Ct.exports=S}),(function(Ct,Zt,L){function R(S,y,b){var d=0,h=S.length;for(b=b||null;d<h&&y.call(b,S[d],d,S)!==!1;d+=1);}Ct.exports=R}),(function(Ct,Zt,L){function R(S,y,b){var d;b=b||null;for(d in S)if(S.hasOwnProperty(d)&&y.call(b,S[d],d,S)===!1)break}Ct.exports=R}),(function(Ct,Zt,L){var R=L(39),S=L(13),y=L(41),b=L(3),d=L(9),h=L(19),T=L(4);function w(O,D){var P=T.generateId();b(D)&&(D=d.appendHTMLElement("div")),R(D,"tui-view-"+P),this.id=P,this.container=D,this.childs=new h(function(g){return g.id}),this.parent=null}w.prototype.addChild=function(O,D){D&&D.call(O,this),O.parent=this,this.childs.add(O)},w.prototype.removeChild=function(O,D){var P=y(O)?this.childs.items[O]:O;D&&D.call(P,this),this.childs.remove(P.id)},w.prototype.render=function(){this.childs.each(function(O){O.render()})},w.prototype.recursive=function(O,D){S(O)&&(D||O(this),this.childs.each(function(P){P.recursive(O)}))},w.prototype.resize=function(){for(var O=Array.prototype.slice.call(arguments),D=this.parent;D;)S(D._onResize)&&D._onResize.apply(D,O),D=D.parent},w.prototype._beforeDestroy=function(){},w.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},w.prototype.destroy=function(O){this.childs&&(this.childs.each(function(D){D.destroy(!0),D._destroy()}),this.childs.clear()),!O&&this._destroy()},w.prototype.getViewBound=function(){var O=this.container.getBoundingClientRect();return{x:O.left,y:O.top,width:O.right-O.left,height:O.bottom-O.top}},Ct.exports=w}),(function(Ct,Zt,L){var R={appendHTMLElement:function(S,y,b){var d=document.createElement(S);return d.className=b||"",y?y.appendChild(d):document.body.appendChild(d),d}};Ct.exports=R}),(function(Ct,Zt,L){var R=L(0),S=L(20),y=L(11),b=L(21),d=L(1),h=L(13),T=L(2),w=/\s+/g;function O(){this.events=null,this.contexts=null}O.mixin=function(D){R(D.prototype,O.prototype)},O.prototype._getHandlerItem=function(D,P){var g={handler:D};return P&&(g.context=P),g},O.prototype._safeEvent=function(D){var P=this.events,g;return P||(P=this.events={}),D&&(g=P[D],g||(g=[],P[D]=g),P=g),P},O.prototype._safeContext=function(){var D=this.contexts;return D||(D=this.contexts=[]),D},O.prototype._indexOfContext=function(D){for(var P=this._safeContext(),g=0;P[g];){if(D===P[g][0])return g;g+=1}return-1},O.prototype._memorizeContext=function(D){var P,g;S(D)&&(P=this._safeContext(),g=this._indexOfContext(D),g>-1?P[g][1]+=1:P.push([D,1]))},O.prototype._forgetContext=function(D){var P,g;S(D)&&(P=this._safeContext(),g=this._indexOfContext(D),g>-1&&(P[g][1]-=1,P[g][1]<=0&&P.splice(g,1)))},O.prototype._bindEvent=function(D,P,g){var i=this._safeEvent(D);this._memorizeContext(g),i.push(this._getHandlerItem(P,g))},O.prototype.on=function(D,P,g){var i=this;y(D)?(D=D.split(w),T(D,function(f){i._bindEvent(f,P,g)})):b(D)&&(g=P,T(D,function(f,u){i.on(u,f,g)}))},O.prototype.once=function(D,P,g){var i=this;if(b(D)){g=P,T(D,function(u,t){i.once(t,u,g)});return}function f(){P.apply(g,arguments),i.off(D,f,g)}this.on(D,f,g)},O.prototype._spliceMatches=function(D,P){var g=0,i;if(d(D))for(i=D.length;g<i;g+=1)P(D[g])===!0&&(D.splice(g,1),i-=1,g-=1)},O.prototype._matchHandler=function(D){var P=this;return function(g){var i=D===g.handler;return i&&P._forgetContext(g.context),i}},O.prototype._matchContext=function(D){var P=this;return function(g){var i=D===g.context;return i&&P._forgetContext(g.context),i}},O.prototype._matchHandlerAndContext=function(D,P){var g=this;return function(i){var f=D===i.handler,u=P===i.context,t=f&&u;return t&&g._forgetContext(i.context),t}},O.prototype._offByEventName=function(D,P){var g=this,i=h(P),f=g._matchHandler(P);D=D.split(w),T(D,function(u){var t=g._safeEvent(u);i?g._spliceMatches(t,f):(T(t,function(n){g._forgetContext(n.context)}),g.events[u]=[])})},O.prototype._offByHandler=function(D){var P=this,g=this._matchHandler(D);T(this._safeEvent(),function(i){P._spliceMatches(i,g)})},O.prototype._offByObject=function(D,P){var g=this,i;this._indexOfContext(D)<0?T(D,function(f,u){g.off(u,f)}):y(P)?(i=this._matchContext(D),g._spliceMatches(this._safeEvent(P),i)):h(P)?(i=this._matchHandlerAndContext(P,D),T(this._safeEvent(),function(f){g._spliceMatches(f,i)})):(i=this._matchContext(D),T(this._safeEvent(),function(f){g._spliceMatches(f,i)}))},O.prototype.off=function(D,P){y(D)?this._offByEventName(D,P):arguments.length?h(D)?this._offByHandler(D):b(D)&&this._offByObject(D,P):(this.events={},this.contexts=[])},O.prototype.fire=function(D){this.invoke.apply(this,arguments)},O.prototype.invoke=function(D){var P,g,i,f;if(!this.hasListener(D))return!0;for(P=this._safeEvent(D),g=Array.prototype.slice.call(arguments,1),i=0;P[i];){if(f=P[i],f.handler.apply(f.context,g)===!1)return!1;i+=1}return!0},O.prototype.hasListener=function(D){return this.getListenerLength(D)>0},O.prototype.getListenerLength=function(D){var P=this._safeEvent(D);return P.length},Ct.exports=O}),(function(Ct,Zt,L){function R(S){return typeof S=="string"||S instanceof String}Ct.exports=R}),(function(Ct,Zt,L){var R=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,S={leadingZero:function(y,b){var d="",h=0;if((y+"").length>b)return y+"";for(;h<b-1;h+=1)d+="0";return(d+y).slice(b*-1)},isValidRGB:function(y){return R.test(y)},hexToRGB:function(y){var b,d,h;return S.isValidRGB(y)?(y=y.substring(1),b=parseInt(y.substr(0,2),16),d=parseInt(y.substr(2,2),16),h=parseInt(y.substr(4,2),16),[b,d,h]):!1},rgbToHEX:function(y,b,d){var h="#"+S.leadingZero(y.toString(16),2)+S.leadingZero(b.toString(16),2)+S.leadingZero(d.toString(16),2);return S.isValidRGB(h)?h:!1},rgbToHSV:function(y,b,d){var h,T,w,O,D,P;if(y/=255,b/=255,d/=255,h=Math.max(y,b,d),T=Math.min(y,b,d),D=h,P=h-T,O=h===0?0:P/h,h===T)w=0;else{switch(h){case y:w=(b-d)/P+(b<d?6:0);break;case b:w=(d-y)/P+2;break;case d:w=(y-b)/P+4;break}w/=6}return[Math.round(w*360),Math.round(O*100),Math.round(D*100)]},hsvToRGB:function(y,b,d){var h,T,w,O,D,P,g,i;if(y=Math.max(0,Math.min(360,y)),b=Math.max(0,Math.min(100,b)),d=Math.max(0,Math.min(100,d)),b/=100,d/=100,b===0)return h=T=w=d,[Math.round(h*255),Math.round(T*255),Math.round(w*255)];switch(y/=60,O=Math.floor(y),D=y-O,P=d*(1-b),g=d*(1-b*D),i=d*(1-b*(1-D)),O){case 0:h=d,T=i,w=P;break;case 1:h=g,T=d,w=P;break;case 2:h=P,T=d,w=i;break;case 3:h=P,T=g,w=d;break;case 4:h=i,T=P,w=d;break;default:h=d,T=P,w=g;break}return[Math.round(h*255),Math.round(T*255),Math.round(w*255)]}};Ct.exports=S}),(function(Ct,Zt,L){function R(S){return S instanceof Function}Ct.exports=R}),(function(Ct,Zt,L){var R=L(11),S=L(2),y=L(26);function b(T,w,O,D){if(R(w)){S(w.split(/\s+/g),function(P){d(T,P,O,D)});return}S(w,function(P,g){d(T,g,P,O)})}function d(T,w,O,D){function P(g){O.call(D||T,g||window.event)}"addEventListener"in T?T.addEventListener(w,P):"attachEvent"in T&&T.attachEvent("on"+w,P),h(T,w,O,P)}function h(T,w,O,D){var P=y(T,w),g=!1;S(P,function(i){return i.handler===O?(g=!0,!1):!0}),g||P.push({handler:O,wrappedHandler:D})}Ct.exports=b}),(function(Ct,Zt,L){function R(S){if(S.preventDefault){S.preventDefault();return}S.returnValue=!1}Ct.exports=R}),(function(Ct,Zt,L){function R(S){return S.replace(/([A-Z])/g,function(y){return"-"+y.toLowerCase()})}Ct.exports=R}),(function(Ct,Zt,L){var R=L(11),S=L(2),y=L(26);function b(T,w,O){if(R(w)){S(w.split(/\s+/g),function(D){d(T,D,O)});return}S(w,function(D,P){d(T,P,D)})}function d(T,w,O){var D=y(T,w),P;O?(S(D,function(g,i){return O===g.handler?(h(T,w,g.wrappedHandler),P=i,!1):!0}),D.splice(P,1)):(S(D,function(g){h(T,w,g.wrappedHandler)}),D.splice(0,D.length))}function h(T,w,O){"removeEventListener"in T?T.removeEventListener(w,O):"detachEvent"in T&&T.detachEvent("on"+w,O)}Ct.exports=b}),(function(Ct,Zt,L){var R=L(50);function S(y,b){var d=R(b.prototype);d.constructor=y,y.prototype=d}Ct.exports=S}),(function(Ct,Zt,L){var R=L(6),S=L(7),y=L(0),b=L(1),d=L(20),h=L(13),T=L(21),w=L(4),O=Array.prototype.slice;function D(P){this.items={},this.length=0,h(P)&&(this.getItemID=P)}D.and=function(P){var g;return P=O.call(arguments),g=P.length,function(i){for(var f=0;f<g;f+=1)if(!P[f].call(null,i))return!1;return!0}},D.or=function(P){var g;return P=O.call(arguments),g=P.length,function(i){for(var f=1,u=P[0].call(null,i);f<g;f+=1)u=u||P[f].call(null,i);return u}},D.merge=function(P){var g={},i=new D(P.getItemID);return R(arguments,function(f){y(g,f.items)}),i.items=g,i.length=w.getLength(i.items),i},D.prototype.getItemID=function(P){return P._id+""},D.prototype.add=function(P){var g,i;if(arguments.length>1){R(O.call(arguments),function(f){this.add(f)},this);return}g=this.getItemID(P),i=this.items,i[g]||(this.length+=1),i[g]=P},D.prototype.remove=function(P){var g=[],i,f;return this.length?arguments.length>1?(g=w.map(O.call(arguments),function(u){return this.remove(u)},this),g):(i=this.items,T(P)&&(P=this.getItemID(P)),i[P]?(this.length-=1,f=i[P],delete i[P],f):g):g},D.prototype.clear=function(){this.items={},this.length=0},D.prototype.has=function(P){var g,i;return this.length?(g=h(P),i=!1,g?this.each(function(f){return P(f)===!0?(i=!0,!1):!0}):(P=T(P)?this.getItemID(P):P,i=d(this.items[P])),i):!1},D.prototype.doWhenHas=function(P,g,i){var f=this.items[P];d(f)&&g.call(i||this,f)},D.prototype.find=function(P){var g=new D;return this.hasOwnProperty("getItemID")&&(g.getItemID=this.getItemID),this.each(function(i){P(i)===!0&&g.add(i)}),g},D.prototype.groupBy=function(P,g){var i={},f=h(P),u=this.getItemID,t,n;if(b(P)){if(R(P,function(e){i[e+""]=new D(u)}),!g)return i;P=g,f=!0}return this.each(function(e){f?n=P(e):(n=e[P],h(n)&&(n=n.apply(e))),t=i[n],t||(t=i[n]=new D(u)),t.add(e)}),i},D.prototype.single=function(){var P;return this.each(function(g){return P=g,!1},this),P},D.prototype.sort=function(P){var g=[];return this.each(function(i){g.push(i)}),h(P)&&(g=g.sort(P)),g},D.prototype.each=function(P,g){S(this.items,P,g||this)},D.prototype.toArray=function(){return this.length?w.map(this.items,function(P){return P}):[]},Ct.exports=D}),(function(Ct,Zt,L){var R=L(3),S=L(36);function y(b){return!R(b)&&!S(b)}Ct.exports=y}),(function(Ct,Zt,L){function R(S){return S===Object(S)}Ct.exports=R}),(function(Ct,Zt,L){var R={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&S();function S(){var y=window.navigator,b=y.appName.replace(/\s/g,"_"),d=y.userAgent,h=/MSIE\s([0-9]+[.0-9]*)/,T=/Trident.*rv:11\./,w=/Edge\/(\d+)\./,O={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},D,P,g={Microsoft_Internet_Explorer:function(){var f=d.match(h);f?(R.msie=!0,R.version=parseFloat(f[1])):R.others=!0},Netscape:function(){var f=!1;if(T.exec(d))R.msie=!0,R.version=11,f=!0;else if(w.exec(d))R.edge=!0,R.version=d.match(w)[1],f=!0;else for(D in O)if(O.hasOwnProperty(D)&&(P=d.match(O[D]),P&&P.length>1)){R[D]=f=!0,R.version=parseFloat(P[1]||0);break}f||(R.others=!0)}},i=g[b];i&&g[b]()}Ct.exports=R}),(function(Ct,Zt,L){var R=L(3);function S(y){return!y||!y.className?"":R(y.className.baseVal)?y.className:y.className.baseVal}Ct.exports=S}),(function(Ct,Zt,L){(function(R){var S=L(10),y=L(42),b=L(44),d=L(47),h=L(28),T=L(17),w=L(14),O=L(15),D=L(0);function P(g,i){w(i,"mousedown",this._onMouseDown,this),this.options=D({distance:10},g),this.container=i,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}P.prototype.destroy=function(){T(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},P.prototype._toggleDragEvent=function(g){var i=this.container;g?(y(i),w(window,"dragstart",O),w(R.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(b(i),T(window,"dragstart",O),T(R.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},P.prototype._getEventData=function(g){return{target:h(g),originEvent:g}},P.prototype._onMouseDown=function(g){d(g)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(g),this._toggleDragEvent(!0))},P.prototype._onMouseMove=function(g){var i=this.options.distance;if(O(g),this._isMoved=!0,this._distance<i){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(g))},P.prototype._onMouseUp=function(g){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(g));return}this.fire("click",this._getEventData(g))},S.mixin(P),Ct.exports=P}).call(this,L(25))}),(function(Ct,Zt){var L;L=(function(){return this})();try{L=L||new Function("return this")()}catch{typeof window=="object"&&(L=window)}Ct.exports=L}),(function(Ct,Zt,L){var R="_feEventKey";function S(y,b){var d=y[R],h;return d||(d=y[R]={}),h=d[b],h||(h=d[b]=[]),h}Ct.exports=S}),(function(Ct,Zt,L){function R(S){var y=document.documentElement.style,b,d;for(b=0,d=S.length;b<d;b+=1)if(S[b]in y)return S[b];return!1}Ct.exports=R}),(function(Ct,Zt,L){function R(S){return S.target||S.srcElement}Ct.exports=R}),(function(Ct,Zt,L){var R=L(10),S=L(28),y=L(17),b=L(14),d=L(30),h=L(0),T=L(18),w=L(9),O=L(12),D=L(8),P=L(51);function g(i,f){this.options=h({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},i),f=w.appendHTMLElement("div",f,this.options.cssPrefix+"palette-container"),D.call(this,i,f)}T(g,D),g.prototype._onClick=function(i){var f=this.options,u=S(i),t={};if(d(u,f.cssPrefix+"palette-button")){t.color=u.value,this.fire("_selectColor",t);return}d(u,f.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},g.prototype._onChange=function(i){var f=this.options,u=S(i),t={};d(u,f.cssPrefix+"palette-hex")&&(t.color=u.value,this.fire("_selectColor",t))},g.prototype._beforeDestroy=function(){this._toggleEvent(!1)},g.prototype._toggleEvent=function(i){var f=this.options,u=this.container,t=i?b:y,n;t(u,"click",this._onClick,this),n=u.querySelector("."+f.cssPrefix+"palette-hex",u),n&&t(n,"change",this._onChange,this)},g.prototype.render=function(i){var f=this.options,u="";this._toggleEvent(!1),u=P({cssPrefix:f.cssPrefix,preset:f.preset,detailTxt:f.detailTxt,color:i,isValidRGB:O.isValidRGB,getItemClass:function(t){return t?"":" "+f.cssPrefix+"color-transparent"},isSelected:function(t){return t===i?" "+f.cssPrefix+"selected":""}}),this.container.innerHTML=u,this._toggleEvent(!0)},R.mixin(g),Ct.exports=g}),(function(Ct,Zt,L){var R=L(5),S=L(23);function y(b,d){var h;return b.classList?b.classList.contains(d):(h=S(b).split(/\s+/),R(d,h)>-1)}Ct.exports=y}),(function(Ct,Zt,L){var R=L(10),S=L(53),y=L(54),b=L(30),d=L(0),h=L(18),T=L(9),w=L(32),O=L(12),D=L(8),P=L(24),g=L(57),i=-7,f=112,u=-3,t=115,n=359.99;function e(s,v){v=T.appendHTMLElement("div",v,s.cssPrefix+"slider-container"),v.style.display="none",D.call(this,s,v),this.options=d({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},s),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new P({distance:0},v),this.colorSliderPosLimitRange=[i,f],this.huebarPosLimitRange=[u,t],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}h(e,D),e.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},e.prototype.toggle=function(s){this.container.style.display=s?"block":"none"},e.prototype.isVisible=function(){return this.container.style.display==="block"},e.prototype.render=function(s){var v=this.container,o=this.options,m=g.layout,C,I;O.isValidRGB(s)&&(m=m.replace(/{{slider}}/,g.slider),m=m.replace(/{{huebar}}/,g.huebar),m=m.replace(/{{cssPrefix}}/g,o.cssPrefix),m=m.replace(/{{id}}/g,o.id),this.container.innerHTML=m,this.sliderSvgElement=v.querySelector("."+o.cssPrefix+"svg-slider"),this.huebarSvgElement=v.querySelector("."+o.cssPrefix+"svg-huebar"),this.sliderHandleElement=v.querySelector("."+o.cssPrefix+"slider-handle"),this.huebarHandleElement=v.querySelector("."+o.cssPrefix+"huebar-handle"),this.baseColorElement=v.querySelector("."+o.cssPrefix+"slider-basecolor"),C=O.hexToRGB(s),I=O.rgbToHSV.apply(null,C),this.moveHue(I[0],!0),this.moveSaturationAndValue(I[1],I[2],!0))},e.prototype._setColorSliderPosMax=function(){var s=this.sliderSvgElement.getClientRects()[0];s&&(this.colorSliderPosLimitRange[1]=s.height-10)},e.prototype._moveColorSliderHandle=function(s,v,o){var m=this.sliderHandleElement,C;v=Math.max(this.colorSliderPosLimitRange[0],v),v=Math.min(this.colorSliderPosLimitRange[1],v),s=Math.max(this.colorSliderPosLimitRange[0],s),s=Math.min(this.colorSliderPosLimitRange[1],s),w.setTranslateXY(m,s,v),C=v>50?"white":"black",w.setStrokeColor(m,C),o||this.fire("_selectColor",{color:O.rgbToHEX.apply(null,this.getRGB())})},e.prototype.moveSaturationAndValue=function(s,v,o){var m,C,I,M;s=s||0,v=v||0,m=Math.abs(this.colorSliderPosLimitRange[0]),C=this.colorSliderPosLimitRange[1],I=s*C/100-m,M=C-v*C/100-m,this._moveColorSliderHandle(I,M,o)},e.prototype._moveColorSliderByPosition=function(s,v){var o=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(s+o,v+o)},e.prototype.getSaturationAndValue=function(){var s=Math.abs(this.colorSliderPosLimitRange[0]),v=s+this.colorSliderPosLimitRange[1],o=w.getTranslateXY(this.sliderHandleElement),m,C;return m=(o[1]+s)/v*100,C=100-(o[0]+s)/v*100,[m,C]},e.prototype._setHueBarPosMax=function(){var s=this.huebarSvgElement.getClientRects()[0];s&&(this.huebarPosLimitRange[1]=s.height-7)},e.prototype._moveHueHandle=function(s,v){var o=this.huebarHandleElement,m=this.baseColorElement,C,I;s=Math.max(this.huebarPosLimitRange[0],s),s=Math.min(this.huebarPosLimitRange[1],s),w.setTranslateY(o,s),C=O.hsvToRGB(this.getHue(),100,100),I=O.rgbToHEX.apply(null,C),w.setGradientColorStop(m,I),v||this.fire("_selectColor",{color:O.rgbToHEX.apply(null,this.getRGB())})},e.prototype.moveHue=function(s,v){var o=0,m,C;m=Math.abs(this.huebarPosLimitRange[0]),C=m+this.huebarPosLimitRange[1],s=s||0,o=C*s/n-m,this._moveHueHandle(o,v)},e.prototype._moveHueByPosition=function(s){var v=this.huebarPosLimitRange[0];this._moveHueHandle(s+v)},e.prototype.getHue=function(){var s=this.huebarHandleElement,v=w.getTranslateXY(s),o,m;return o=Math.abs(this.huebarPosLimitRange[0]),m=o+this.huebarPosLimitRange[1],(v[0]+o)*n/m},e.prototype.getHSV=function(){var s=this.getSaturationAndValue(),v=this.getHue();return[v].concat(s)},e.prototype.getRGB=function(){return O.hsvToRGB.apply(null,this.getHSV())},e.prototype._prepareColorSliderForMouseEvent=function(s){var v=this.options,o=y(s.target,"."+v.cssPrefix+"slider-part"),m;return m=this._dragDataCache={isColorSlider:b(o,v.cssPrefix+"slider-left"),parentElement:o},m},e.prototype._onClick=function(s){var v=this._prepareColorSliderForMouseEvent(s),o=S(s.originEvent,v.parentElement);v.isColorSlider?this._moveColorSliderByPosition(o[0],o[1]):this._moveHueByPosition(o[1]),this._dragDataCache=null},e.prototype._onDragStart=function(s){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(s)},e.prototype._onDrag=function(s){var v=this._dragDataCache,o=S(s.originEvent,v.parentElement);v.isColorSlider?this._moveColorSliderByPosition(o[0],o[1]):this._moveHueByPosition(o[1])},e.prototype._onDragEnd=function(){this._dragDataCache=null},R.mixin(e),Ct.exports=e}),(function(Ct,Zt,L){var R=L(4).isOldBrowser,S=/[\.\-0-9]+/g,y=-6,b={getTranslateXY:function(d){var h;return R?(h=d.style,[parseFloat(h.top),parseFloat(h.left)]):(h=d.getAttribute("transform"),h?(h=h.match(S),[parseFloat(h[1]),parseFloat(h[0])]):[0,0])},setTranslateXY:function(d,h,T){R?(d.style.left=h+"px",d.style.top=T+"px"):d.setAttribute("transform","translate("+h+","+T+")")},setTranslateY:function(d,h){R?d.style.top=h+"px":d.setAttribute("transform","translate("+y+","+h+")")},setStrokeColor:function(d,h){R?d.strokecolor=h:d.setAttribute("stroke",h)},setGradientColorStop:function(d,h){R?d.color=h:d.setAttribute("stop-color",h)}};Ct.exports=b}),(function(Ct,Zt,L){L(34),Ct.exports=L(35)}),(function(Ct,Zt,L){}),(function(Ct,Zt,L){var R=L(19),S=L(8),y=L(24),b=L(48),d=L(29),h=L(31),T=L(12),w=L(32),O={Collection:R,View:S,Drag:y,create:b,Palette:d,Slider:h,colorutil:T,svgvml:w};Ct.exports=O}),(function(Ct,Zt,L){function R(S){return S===null}Ct.exports=R}),(function(Ct,Zt,L){var R=L(3),S=L(38),y=10080*60*1e3;function b(h){var T=new Date().getTime();return T-h>y}function d(h,T){var w="https://www.google-analytics.com/collect",O=location.hostname,D="event",P="use",g="TOAST UI "+h+" for "+O+": Statistics",i=window.localStorage.getItem(g);!R(window.tui)&&window.tui.usageStatistics===!1||i&&!b(i)||(window.localStorage.setItem(g,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&S(w,{v:1,t:D,tid:T,cid:O,dp:O,dh:h,el:h,ec:P})},1e3))}Ct.exports=d}),(function(Ct,Zt,L){var R=L(7);function S(y,b){var d=document.createElement("img"),h="";return R(b,function(T,w){h+="&"+w+"="+T}),h=h.substring(1),d.src=y+"?"+h,d.style.display="none",document.body.appendChild(d),document.body.removeChild(d),d}Ct.exports=S}),(function(Ct,Zt,L){var R=L(2),S=L(5),y=L(23),b=L(40);function d(h){var T=Array.prototype.slice.call(arguments,1),w=h.classList,O=[],D;if(w){R(T,function(P){h.classList.add(P)});return}D=y(h),D&&(T=[].concat(D.split(/\s+/),T)),R(T,function(P){S(P,O)<0&&O.push(P)}),b(h,O)}Ct.exports=d}),(function(Ct,Zt,L){var R=L(1),S=L(3);function y(b,d){if(d=R(d)?d.join(" "):d,d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),S(b.className.baseVal)){b.className=d;return}b.className.baseVal=d}Ct.exports=y}),(function(Ct,Zt,L){function R(S){return typeof S=="number"||S instanceof Number}Ct.exports=R}),(function(Ct,Zt,L){var R=L(14),S=L(15),y=L(43),b=L(27),d="onselectstart"in document,h="prevUserSelect",T=b(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function w(O){O||(O=document),d?R(O,"selectstart",S):(O=O===document?document.documentElement:O,y(O,h,O.style[T]),O.style[T]="none")}Ct.exports=w}),(function(Ct,Zt,L){var R=L(16);function S(y,b,d){if(y.dataset){y.dataset[b]=d;return}y.setAttribute("data-"+R(b),d)}Ct.exports=S}),(function(Ct,Zt,L){var R=L(17),S=L(15),y=L(45),b=L(46),d=L(27),h="onselectstart"in document,T="prevUserSelect",w=d(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function O(D){D||(D=document),h?R(D,"selectstart",S):(D=D===document?document.documentElement:D,D.style[w]=y(D,T)||"auto",b(D,T))}Ct.exports=O}),(function(Ct,Zt,L){var R=L(16);function S(y,b){return y.dataset?y.dataset[b]:y.getAttribute("data-"+R(b))}Ct.exports=S}),(function(Ct,Zt,L){var R=L(16);function S(y,b){if(y.dataset){delete y.dataset[b];return}y.removeAttribute("data-"+R(b))}Ct.exports=S}),(function(Ct,Zt,L){var R=L(22),S=L(5),y=["0","1","3","5","7"],b=["2","6"],d=["4"];function h(w){return R.msie&&R.version<=8?T(w):w.button}function T(w){var O=String(w.button);return S(O,y)>-1?0:S(O,b)>-1?2:S(O,d)>-1?1:null}Ct.exports=h}),(function(Ct,Zt,L){var R=L(10),S=L(0),y=L(4),b=L(12),d=L(49),h=L(29),T=L(31),w=0;function O(){return w+=1,w}function D(P){var g;if(!(this instanceof D))return new D(P);if(P=this.options=S({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:O(),usageStatistics:!0},P),!P.container)throw new Error("ColorPicker(): need container option.");g=this.layout=new d(P,P.container),this.palette=new h(P,g.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new T(P,g.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),g.addChild(this.palette),g.addChild(this.slider),this.render(P.color),P.usageStatistics&&y.sendHostName()}D.prototype._onSelectColorInPalette=function(P){var g=P.color,i=this.options;if(!b.isValidRGB(g)&&g!==""){this.render();return}this.fire("selectColor",{color:g,origin:"palette"}),i.color!==g&&(i.color=g,this.render(g))},D.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},D.prototype._onSelectColorInSlider=function(P){var g=P.color,i=this.options;this.fire("selectColor",{color:g,origin:"slider"}),i.color!==g&&(i.color=g,this.palette.render(g))},D.prototype.setColor=function(P){if(!b.isValidRGB(P))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=P,this.render(P)},D.prototype.getColor=function(){return this.options.color},D.prototype.toggle=function(P){this.layout.container.style.display=P?"block":"none"},D.prototype.render=function(P){this.layout.render(P||this.options.color)},D.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},R.mixin(D),Ct.exports=D}),(function(Ct,Zt,L){var R=L(0),S=L(18),y=L(9),b=L(8);function d(h,T){this.options=R({cssPrefix:"tui-colorpicker-"},h),T=y.appendHTMLElement("div",T,this.options.cssPrefix+"container"),b.call(this,h,T),this.render()}S(d,b),d.prototype.render=function(h){this.recursive(function(T){T.render(h)},!0)},Ct.exports=d}),(function(Ct,Zt,L){function R(S){function y(){}return y.prototype=S,new y}Ct.exports=R}),(function(Ct,Zt,L){var R=L(52);Ct.exports=function(S){var y=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),b=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",y,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return R(b,S)}}),(function(Ct,Zt,L){var R=L(5),S=L(2),y=L(1),b=L(11),d=L(0),h=/{{\s?|\s?}}/g,T=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,w=/\[\s?|\s?\]/,O=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,D=/\./,P=/^["']\w+["']$/,g=/"|'/g,i=/^-?\d+\.?\d*$/,f=2,u={if:v,each:o,with:m},t="a".split(/a/).length===3,n=(function(){return t?function(F,W){return F.split(W)}:function(F,W){var it=[],V=0,gt,J;for(W.global||(W=new RegExp(W,"g")),gt=W.exec(F);gt!==null;)J=gt.index,it.push(F.slice(V,J)),V=J+gt[0].length,gt=W.exec(F);return it.push(F.slice(V)),it}})();function e(F,W){var it,V=W[F];return F==="true"?V=!0:F==="false"?V=!1:P.test(F)?V=F.replace(g,""):T.test(F)?(it=F.split(w),V=e(it[0],W)[e(it[1],W)]):O.test(F)?(it=F.split(D),V=e(it[0],W)[it[1]]):i.test(F)&&(V=parseFloat(F)),V}function s(F,W){var it=[F],V=[],gt=0,J=0;return S(W,function(mt,B){mt.indexOf("if")===0?gt+=1:mt==="/if"?gt-=1:!gt&&(mt.indexOf("elseif")===0||mt==="else")&&(it.push(mt==="else"?["true"]:mt.split(" ").slice(1)),V.push(W.slice(J,B)),J=B+1)}),V.push(W.slice(J)),{exps:it,sourcesInsideIf:V}}function v(F,W,it){var V=s(F,W),gt=!1,J="";return S(V.exps,function(mt,B){return gt=M(mt,it),gt&&(J=N(V.sourcesInsideIf[B],it)),!gt}),J}function o(F,W,it){var V=M(F,it),gt=y(V)?"@index":"@key",J={},mt="";return S(V,function(B,St){J[gt]=St,J["@this"]=B,d(it,J),mt+=N(W.slice(),it)}),mt}function m(F,W,it){var V=R("as",F),gt=F[V+1],J=M(F.slice(0,V),it),mt={};return mt[gt]=J,N(W,d(it,mt))||""}function C(F,W,it){var V=F.splice(W+1,it-W);return V.pop(),V}function I(F,W,it){for(var V=u[F],gt=1,J=0,mt,B=J+f,St=W[B];gt&&b(St);)St.indexOf(F)===0?gt+=1:St.indexOf("/"+F)===0&&(gt-=1,mt=B),B+=f,St=W[B];if(gt)throw Error(F+" needs {{/"+F+"}} expression.");return W[J]=V(W[J].split(" ").slice(1),C(W,J,mt),it),W}function M(F,W){var it=e(F[0],W);return it instanceof Function?k(it,F.slice(1),W):it}function k(F,W,it){var V=[];return S(W,function(gt){V.push(e(gt,it))}),F.apply(null,V)}function N(F,W){for(var it=1,V=F[it],gt,J,mt;b(V);)gt=V.split(" "),J=gt[0],u[J]?(mt=I(J,F.splice(it,F.length-it),W),F=F.concat(mt)):F[it]=M(gt,W),it+=f,V=F[it];return F.join("")}function H(F,W){return N(n(F,h),W)}Ct.exports=H}),(function(Ct,Zt,L){var R=L(1);function S(y,b){var d=R(y),h=d?y[0]:y.clientX,T=d?y[1]:y.clientY,w;return b?(w=b.getBoundingClientRect(),[h-w.left-b.clientLeft,T-w.top-b.clientTop]):[h,T]}Ct.exports=S}),(function(Ct,Zt,L){var R=L(55);function S(y,b){var d=y.parentNode;if(R(y,b))return y;for(;d&&d!==document;){if(R(d,b))return d;d=d.parentNode}return null}Ct.exports=S}),(function(Ct,Zt,L){var R=L(5),S=L(56),y=Element.prototype,b=y.matches||y.webkitMatchesSelector||y.mozMatchesSelector||y.msMatchesSelector||function(h){var T=this.document||this.ownerDocument;return R(this,S(T.querySelectorAll(h)))>-1};function d(h,T){return b.call(h,T)}Ct.exports=d}),(function(Ct,Zt,L){var R=L(6);function S(y){var b;try{b=Array.prototype.slice.call(y)}catch{b=[],R(y,function(h){b.push(h)})}return b}Ct.exports=S}),(function(Ct,Zt,L){(function(R){var S=L(4).isOldBrowser,y=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),b=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),d=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),h=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),T=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);S&&R.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),Ct.exports={layout:y,slider:S?d:b,huebar:S?T:h}}).call(this,L(25))})])})})(vn)),vn.exports}var Rr;function mu(){return Rr||(Rr=1,(function(ze,Ze){(function(Zt,L){ze.exports=L(pu())})(self,function(Ct){return(function(){var Zt={2777:(function(y,b,d){var h=h||{version:"4.6.0"};if(b.fabric=h,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?h.document=document:h.document=document.implementation.createHTMLDocument(""),h.window=window;else{var T=d(4960),w=new T.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;h.document=w.document,h.jsdomImplForWrapper=d(6759).implForWrapper,h.nodeCanvas=d(6272).Canvas,h.window=w,DOMParser=h.window.DOMParser}h.isTouchSupported="ontouchstart"in h.window||"ontouchstart"in h.document||h.window&&h.window.navigator&&h.window.navigator.maxTouchPoints>0,h.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",h.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],h.DPI=96,h.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",h.commaWsp="(?:\\s+,?\\s*|,\\s*)",h.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,h.reNonWord=/[ \n\.,;!\?\-]/,h.fontPaths={},h.iMatrix=[1,0,0,1,0,0],h.svgNS="http://www.w3.org/2000/svg",h.perfLimitSizeTotal=2097152,h.maxCacheSideLimit=4096,h.minCacheSideLimit=256,h.charWidthsCache={},h.textureSize=2048,h.disableStyleCopyPaste=!1,h.enableGLFiltering=!0,h.devicePixelRatio=h.window.devicePixelRatio||h.window.webkitDevicePixelRatio||h.window.mozDevicePixelRatio||1,h.browserShadowBlurConstant=1,h.arcToSegmentsCache={},h.boundsOfCurveCache={},h.cachesBoundsOfCurve=!0,h.forceGLPutImageData=!1,h.initFilterBackend=function(){if(h.enableGLFiltering&&h.isWebglSupported&&h.isWebglSupported(h.textureSize))return console.log("max texture size: "+h.maxTextureSize),new h.WebglFilterBackend({tileSize:h.textureSize});if(h.Canvas2dFilterBackend)return new h.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=h),(function(){function g(e,s){if(this.__eventListeners[e]){var v=this.__eventListeners[e];s?v[v.indexOf(s)]=!1:h.util.array.fill(v,!1)}}function i(e,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var v in e)this.on(v,e[v]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(s);return this}function f(e,s){var v=(function(){s.apply(this,arguments),this.off(e,v)}).bind(this);this.on(e,v)}function u(e,s){if(arguments.length===1)for(var v in e)f.call(this,v,e[v]);else f.call(this,e,s);return this}function t(e,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(e in this.__eventListeners)g.call(this,e);else if(arguments.length===1&&typeof arguments[0]=="object")for(var v in e)g.call(this,v,e[v]);else g.call(this,e,s);return this}function n(e,s){if(!this.__eventListeners)return this;var v=this.__eventListeners[e];if(!v)return this;for(var o=0,m=v.length;o<m;o++)v[o]&&v[o].call(this,s||{});return this.__eventListeners[e]=v.filter(function(C){return C!==!1}),this}h.Observable={fire:n,on:i,once:u,off:t}})(),h.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,i=arguments.length;g<i;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,i,f){var u=this._objects;return f?u[i]=g:u.splice(i,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,i,f=!1,u=0,t=arguments.length;u<t;u++)i=g.indexOf(arguments[u]),i!==-1&&(f=!0,g.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&f&&this.requestRenderAll(),this},forEachObject:function(g,i){for(var f=this.getObjects(),u=0,t=f.length;u<t;u++)g.call(i,f[u],u,f);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,i){return this._objects.indexOf(g)>-1?!0:i?this._objects.some(function(f){return typeof f.contains=="function"&&f.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,i){return g+=i.complexity?i.complexity():0,g},0)}},h.CommonMethods={_setOptions:function(g){for(var i in g)this.set(i,g[i])},_initGradient:function(g,i){g&&g.colorStops&&!(g instanceof h.Gradient)&&this.set(i,new h.Gradient(g))},_initPattern:function(g,i,f){g&&g.source&&!(g instanceof h.Pattern)?this.set(i,new h.Pattern(g,f)):f&&f()},_setObject:function(g){for(var i in g)this._set(i,g[i])},set:function(g,i){return typeof g=="object"?this._setObject(g):this._set(g,i),this},_set:function(g,i){this[g]=i},toggle:function(g){var i=this.get(g);return typeof i=="boolean"&&this.set(g,!i),this},get:function(g){return this[g]}},(function(g){var i=Math.sqrt,f=Math.atan2,u=Math.pow,t=Math.PI/180,n=Math.PI/2;h.util={cos:function(e){if(e===0)return 1;e<0&&(e=-e);var s=e/n;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(e===0)return 0;var s=e/n,v=1;switch(e<0&&(v=-1),s){case 1:return v;case 2:return 0;case 3:return-v}return Math.sin(e)},removeFromArray:function(e,s){var v=e.indexOf(s);return v!==-1&&e.splice(v,1),e},getRandomInt:function(e,s){return Math.floor(Math.random()*(s-e+1))+e},degreesToRadians:function(e){return e*t},radiansToDegrees:function(e){return e/t},rotatePoint:function(e,s,v){var o=new h.Point(e.x-s.x,e.y-s.y),m=h.util.rotateVector(o,v);return new h.Point(m.x,m.y).addEquals(s)},rotateVector:function(e,s){var v=h.util.sin(s),o=h.util.cos(s),m=e.x*o-e.y*v,C=e.x*v+e.y*o;return{x:m,y:C}},transformPoint:function(e,s,v){return v?new h.Point(s[0]*e.x+s[2]*e.y,s[1]*e.x+s[3]*e.y):new h.Point(s[0]*e.x+s[2]*e.y+s[4],s[1]*e.x+s[3]*e.y+s[5])},makeBoundingBoxFromPoints:function(e,s){if(s)for(var v=0;v<e.length;v++)e[v]=h.util.transformPoint(e[v],s);var o=[e[0].x,e[1].x,e[2].x,e[3].x],m=h.util.array.min(o),C=h.util.array.max(o),I=C-m,M=[e[0].y,e[1].y,e[2].y,e[3].y],k=h.util.array.min(M),N=h.util.array.max(M),H=N-k;return{left:m,top:k,width:I,height:H}},invertTransform:function(e){var s=1/(e[0]*e[3]-e[1]*e[2]),v=[s*e[3],-s*e[1],-s*e[2],s*e[0]],o=h.util.transformPoint({x:e[4],y:e[5]},v,!0);return v[4]=-o.x,v[5]=-o.y,v},toFixed:function(e,s){return parseFloat(Number(e).toFixed(s))},parseUnit:function(e,s){var v=/\D{0,2}$/.exec(e),o=parseFloat(e);switch(s||(s=h.Text.DEFAULT_SVG_FONT_SIZE),v[0]){case"mm":return o*h.DPI/25.4;case"cm":return o*h.DPI/2.54;case"in":return o*h.DPI;case"pt":return o*h.DPI/72;case"pc":return o*h.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(e,s){return e=h.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),h.util.resolveNamespace(s)[e]},getSvgAttributes:function(e){var s=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(e){if(!e)return h;var s=e.split("."),v=s.length,o,m=g||h.window;for(o=0;o<v;++o)m=m[s[o]];return m},loadImage:function(e,s,v,o){if(!e){s&&s.call(v,e);return}var m=h.util.createImage(),C=function(){s&&s.call(v,m,!1),m=m.onload=m.onerror=null};m.onload=C,m.onerror=function(){h.log("Error loading "+m.src),s&&s.call(v,null,!0),m=m.onload=m.onerror=null},e.indexOf("data")!==0&&o!==void 0&&o!==null&&(m.crossOrigin=o),e.substring(0,14)==="data:image/svg"&&(m.onload=null,h.util.loadImageInDom(m,C)),m.src=e},loadImageInDom:function(e,s){var v=h.document.createElement("div");v.style.width=v.style.height="1px",v.style.left=v.style.top="-100%",v.style.position="absolute",v.appendChild(e),h.document.querySelector("body").appendChild(v),e.onload=function(){s(),v.parentNode.removeChild(v),v=null}},enlivenObjects:function(e,s,v,o){e=e||[];var m=[],C=0,I=e.length;function M(){++C===I&&s&&s(m.filter(function(k){return k}))}if(!I){s&&s(m);return}e.forEach(function(k,N){if(!k||!k.type){M();return}var H=h.util.getKlass(k.type,v);H.fromObject(k,function(F,W){W||(m[N]=F),o&&o(k,F,W),M()})})},enlivenPatterns:function(e,s){e=e||[];function v(){++m===C&&s&&s(o)}var o=[],m=0,C=e.length;if(!C){s&&s(o);return}e.forEach(function(I,M){I&&I.source?new h.Pattern(I,function(k){o[M]=k,v()}):(o[M]=I,v())})},groupSVGElements:function(e,s,v){var o;return e&&e.length===1?e[0]:(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new h.Group(e,s),typeof v<"u"&&(o.sourcePath=v),o)},populateWithProperties:function(e,s,v){if(v&&Object.prototype.toString.call(v)==="[object Array]")for(var o=0,m=v.length;o<m;o++)v[o]in e&&(s[v[o]]=e[v[o]])},drawDashedLine:function(e,s,v,o,m,C){var I=o-s,M=m-v,k=i(I*I+M*M),N=f(M,I),H=C.length,F=0,W=!0;for(e.save(),e.translate(s,v),e.moveTo(0,0),e.rotate(N),s=0;k>s;)s+=C[F++%H],s>k&&(s=k),e[W?"lineTo":"moveTo"](s,0),W=!W;e.restore()},createCanvasElement:function(){return h.document.createElement("canvas")},copyCanvasElement:function(e){var s=h.util.createCanvasElement();return s.width=e.width,s.height=e.height,s.getContext("2d").drawImage(e,0,0),s},toDataURL:function(e,s,v){return e.toDataURL("image/"+s,v)},createImage:function(){return h.document.createElement("img")},multiplyTransformMatrices:function(e,s,v){return[e[0]*s[0]+e[2]*s[1],e[1]*s[0]+e[3]*s[1],e[0]*s[2]+e[2]*s[3],e[1]*s[2]+e[3]*s[3],v?0:e[0]*s[4]+e[2]*s[5]+e[4],v?0:e[1]*s[4]+e[3]*s[5]+e[5]]},qrDecompose:function(e){var s=f(e[1],e[0]),v=u(e[0],2)+u(e[1],2),o=i(v),m=(e[0]*e[3]-e[2]*e[1])/o,C=f(e[0]*e[2]+e[1]*e[3],v);return{angle:s/t,scaleX:o,scaleY:m,skewX:C/t,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return h.iMatrix.concat();var s=h.util.degreesToRadians(e.angle),v=h.util.cos(s),o=h.util.sin(s);return[v,o,-o,v,0,0]},calcDimensionsMatrix:function(e){var s=typeof e.scaleX>"u"?1:e.scaleX,v=typeof e.scaleY>"u"?1:e.scaleY,o=[e.flipX?-s:s,0,0,e.flipY?-v:v,0,0],m=h.util.multiplyTransformMatrices,C=h.util.degreesToRadians;return e.skewX&&(o=m(o,[1,0,Math.tan(C(e.skewX)),1],!0)),e.skewY&&(o=m(o,[1,Math.tan(C(e.skewY)),0,1],!0)),o},composeMatrix:function(e){var s=[1,0,0,1,e.translateX||0,e.translateY||0],v=h.util.multiplyTransformMatrices;return e.angle&&(s=v(s,h.util.calcRotateMatrix(e))),(e.scaleX!==1||e.scaleY!==1||e.skewX||e.skewY||e.flipX||e.flipY)&&(s=v(s,h.util.calcDimensionsMatrix(e))),s},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,s,v,o){o>0&&(s>o?s-=o:s=0,v>o?v-=o:v=0);var m=!0,C,I,M=e.getImageData(s,v,o*2||1,o*2||1),k=M.data.length;for(C=3;C<k&&(I=M.data[C],m=I<=0,m!==!1);C+=4);return M=null,m},parsePreserveAspectRatioAttribute:function(e){var s="meet",v="Mid",o="Mid",m=e.split(" "),C;return m&&m.length&&(s=m.pop(),s!=="meet"&&s!=="slice"?(C=s,s="meet"):m.length&&(C=m.pop())),v=C!=="none"?C.slice(1,4):"none",o=C!=="none"?C.slice(5,8):"none",{meetOrSlice:s,alignX:v,alignY:o}},clearFabricFontCache:function(e){e=(e||"").toLowerCase(),e?h.charWidthsCache[e]&&delete h.charWidthsCache[e]:h.charWidthsCache={}},limitDimsByArea:function(e,s){var v=Math.sqrt(s*e),o=Math.floor(s/v);return{x:Math.floor(v),y:o}},capValue:function(e,s,v){return Math.max(e,Math.min(s,v))},findScaleToFit:function(e,s){return Math.min(s.width/e.width,s.height/e.height)},findScaleToCover:function(e,s){return Math.max(s.width/e.width,s.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map(function(s){return h.util.toFixed(s,h.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(e,s){var v=h.util.invertTransform(s),o=h.util.multiplyTransformMatrices(v,e.calcOwnMatrix());h.util.applyTransformToObject(e,o)},addTransformToObject:function(e,s){h.util.applyTransformToObject(e,h.util.multiplyTransformMatrices(s,e.calcOwnMatrix()))},applyTransformToObject:function(e,s){var v=h.util.qrDecompose(s),o=new h.Point(v.translateX,v.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",v.scaleX),e.set("scaleY",v.scaleY),e.skewX=v.skewX,e.skewY=v.skewY,e.angle=v.angle,e.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(e,s,v){var o=e/2,m=s/2,C=[{x:-o,y:-m},{x:o,y:-m},{x:-o,y:m},{x:o,y:m}],I=h.util.calcDimensionsMatrix(v),M=h.util.makeBoundingBoxFromPoints(C,I);return{x:M.width,y:M.height}}}})(b),(function(){var g=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},f={m:"l",M:"L"};function u($,X,at,Y,G,Z,q,pt,ft,It,bt){var Mt=h.util.cos($),ot=h.util.sin($),tt=h.util.cos(X),et=h.util.sin(X),lt=at*G*tt-Y*Z*et+q,ut=Y*G*tt+at*Z*et+pt,yt=It+ft*(-at*G*ot-Y*Z*Mt),At=bt+ft*(-Y*G*ot+at*Z*Mt),Yt=lt+ft*(at*G*et+Y*Z*tt),Ht=ut+ft*(Y*G*et-at*Z*tt);return["C",yt,At,Yt,Ht,lt,ut]}function t($,X,at,Y,G,Z,q){var pt=Math.PI,ft=q*pt/180,It=h.util.sin(ft),bt=h.util.cos(ft),Mt=0,ot=0;at=Math.abs(at),Y=Math.abs(Y);var tt=-bt*$*.5-It*X*.5,et=-bt*X*.5+It*$*.5,lt=at*at,ut=Y*Y,yt=et*et,At=tt*tt,Yt=lt*ut-lt*yt-ut*At,Ht=0;if(Yt<0){var xt=Math.sqrt(1-Yt/(lt*ut));at*=xt,Y*=xt}else Ht=(G===Z?-1:1)*Math.sqrt(Yt/(lt*yt+ut*At));var Xt=Ht*at*et/Y,Jt=-Ht*Y*tt/at,ae=bt*Xt-It*Jt+$*.5,pe=It*Xt+bt*Jt+X*.5,zt=n(1,0,(tt-Xt)/at,(et-Jt)/Y),Gt=n((tt-Xt)/at,(et-Jt)/Y,(-tt-Xt)/at,(-et-Jt)/Y);Z===0&&Gt>0?Gt-=2*pt:Z===1&&Gt<0&&(Gt+=2*pt);for(var Ut=Math.ceil(Math.abs(Gt/pt*2)),qt=[],oe=Gt/Ut,be=8/3*Math.sin(oe/4)*Math.sin(oe/4)/Math.sin(oe/2),Tt=zt+oe,Et=0;Et<Ut;Et++)qt[Et]=u(zt,Tt,bt,It,at,Y,ae,pe,be,Mt,ot),Mt=qt[Et][5],ot=qt[Et][6],zt=Tt,Tt+=oe;return qt}function n($,X,at,Y){var G=Math.atan2(X,$),Z=Math.atan2(Y,at);return Z>=G?Z-G:2*Math.PI-(G-Z)}function e($,X,at,Y,G,Z,q,pt){var ft;if(h.cachesBoundsOfCurve&&(ft=g.call(arguments),h.boundsOfCurveCache[ft]))return h.boundsOfCurveCache[ft];var It=Math.sqrt,bt=Math.min,Mt=Math.max,ot=Math.abs,tt=[],et=[[],[]],lt,ut,yt,At,Yt,Ht,xt,Xt;ut=6*$-12*at+6*G,lt=-3*$+9*at-9*G+3*q,yt=3*at-3*$;for(var Jt=0;Jt<2;++Jt){if(Jt>0&&(ut=6*X-12*Y+6*Z,lt=-3*X+9*Y-9*Z+3*pt,yt=3*Y-3*X),ot(lt)<1e-12){if(ot(ut)<1e-12)continue;At=-yt/ut,0<At&&At<1&&tt.push(At);continue}xt=ut*ut-4*yt*lt,!(xt<0)&&(Xt=It(xt),Yt=(-ut+Xt)/(2*lt),0<Yt&&Yt<1&&tt.push(Yt),Ht=(-ut-Xt)/(2*lt),0<Ht&&Ht<1&&tt.push(Ht))}for(var ae,pe,zt=tt.length,Gt=zt,Ut;zt--;)At=tt[zt],Ut=1-At,ae=Ut*Ut*Ut*$+3*Ut*Ut*At*at+3*Ut*At*At*G+At*At*At*q,et[0][zt]=ae,pe=Ut*Ut*Ut*X+3*Ut*Ut*At*Y+3*Ut*At*At*Z+At*At*At*pt,et[1][zt]=pe;et[0][Gt]=$,et[1][Gt]=X,et[0][Gt+1]=q,et[1][Gt+1]=pt;var qt=[{x:bt.apply(null,et[0]),y:bt.apply(null,et[1])},{x:Mt.apply(null,et[0]),y:Mt.apply(null,et[1])}];return h.cachesBoundsOfCurve&&(h.boundsOfCurveCache[ft]=qt),qt}function s($,X,at){for(var Y=at[1],G=at[2],Z=at[3],q=at[4],pt=at[5],ft=at[6],It=at[7],bt=t(ft-$,It-X,Y,G,q,pt,Z),Mt=0,ot=bt.length;Mt<ot;Mt++)bt[Mt][1]+=$,bt[Mt][2]+=X,bt[Mt][3]+=$,bt[Mt][4]+=X,bt[Mt][5]+=$,bt[Mt][6]+=X;return bt}function v($){var X=0,at=0,Y=$.length,G=0,Z=0,q,pt,ft,It=[],bt,Mt,ot;for(pt=0;pt<Y;++pt){switch(ft=!1,q=$[pt].slice(0),q[0]){case"l":q[0]="L",q[1]+=X,q[2]+=at;case"L":X=q[1],at=q[2];break;case"h":q[1]+=X;case"H":q[0]="L",q[2]=at,X=q[1];break;case"v":q[1]+=at;case"V":q[0]="L",at=q[1],q[1]=X,q[2]=at;break;case"m":q[0]="M",q[1]+=X,q[2]+=at;case"M":X=q[1],at=q[2],G=q[1],Z=q[2];break;case"c":q[0]="C",q[1]+=X,q[2]+=at,q[3]+=X,q[4]+=at,q[5]+=X,q[6]+=at;case"C":Mt=q[3],ot=q[4],X=q[5],at=q[6];break;case"s":q[0]="S",q[1]+=X,q[2]+=at,q[3]+=X,q[4]+=at;case"S":bt==="C"?(Mt=2*X-Mt,ot=2*at-ot):(Mt=X,ot=at),X=q[3],at=q[4],q[0]="C",q[5]=q[3],q[6]=q[4],q[3]=q[1],q[4]=q[2],q[1]=Mt,q[2]=ot,Mt=q[3],ot=q[4];break;case"q":q[0]="Q",q[1]+=X,q[2]+=at,q[3]+=X,q[4]+=at;case"Q":Mt=q[1],ot=q[2],X=q[3],at=q[4];break;case"t":q[0]="T",q[1]+=X,q[2]+=at;case"T":bt==="Q"?(Mt=2*X-Mt,ot=2*at-ot):(Mt=X,ot=at),q[0]="Q",X=q[1],at=q[2],q[1]=Mt,q[2]=ot,q[3]=X,q[4]=at;break;case"a":q[0]="A",q[6]+=X,q[7]+=at;case"A":ft=!0,It=It.concat(s(X,at,q)),X=q[6],at=q[7];break;case"z":case"Z":X=G,at=Z;break}ft||It.push(q),bt=q[0]}return It}function o($,X,at,Y){return Math.sqrt((at-$)*(at-$)+(Y-X)*(Y-X))}function m($){return $*$*$}function C($){return 3*$*$*(1-$)}function I($){return 3*$*(1-$)*(1-$)}function M($){return(1-$)*(1-$)*(1-$)}function k($,X,at,Y,G,Z,q,pt){return function(ft){var It=m(ft),bt=C(ft),Mt=I(ft),ot=M(ft);return{x:q*It+G*bt+at*Mt+$*ot,y:pt*It+Z*bt+Y*Mt+X*ot}}}function N($,X,at,Y,G,Z,q,pt){return function(ft){var It=1-ft,bt=3*It*It*(at-$)+6*It*ft*(G-at)+3*ft*ft*(q-G),Mt=3*It*It*(Y-X)+6*It*ft*(Z-Y)+3*ft*ft*(pt-Z);return Math.atan2(Mt,bt)}}function H($){return $*$}function F($){return 2*$*(1-$)}function W($){return(1-$)*(1-$)}function it($,X,at,Y,G,Z){return function(q){var pt=H(q),ft=F(q),It=W(q);return{x:G*pt+at*ft+$*It,y:Z*pt+Y*ft+X*It}}}function V($,X,at,Y,G,Z){return function(q){var pt=1-q,ft=2*pt*(at-$)+2*q*(G-at),It=2*pt*(Y-X)+2*q*(Z-Y);return Math.atan2(It,ft)}}function gt($,X,at){var Y={x:X,y:at},G,Z=0,q;for(q=1;q<=100;q+=1)G=$(q/100),Z+=o(Y.x,Y.y,G.x,G.y),Y=G;return Z}function J($,X){for(var at=0,Y=0,G=$.iterator,Z={x:$.x,y:$.y},q,pt,ft=.01,It=$.angleFinder,bt;Y<X&&at<=1&&ft>1e-4;)q=G(at),bt=at,pt=o(Z.x,Z.y,q.x,q.y),pt+Y>X?(ft/=2,at-=ft):(Z=q,at+=ft,Y+=pt);return q.angle=It(bt),q}function mt($){for(var X=0,at=$.length,Y,G=0,Z=0,q=0,pt=0,ft=[],It,bt,Mt,ot=0;ot<at;ot++){switch(Y=$[ot],bt={x:G,y:Z,command:Y[0]},Y[0]){case"M":bt.length=0,q=G=Y[1],pt=Z=Y[2];break;case"L":bt.length=o(G,Z,Y[1],Y[2]),G=Y[1],Z=Y[2];break;case"C":It=k(G,Z,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]),Mt=N(G,Z,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]),bt.iterator=It,bt.angleFinder=Mt,bt.length=gt(It,G,Z),G=Y[5],Z=Y[6];break;case"Q":It=it(G,Z,Y[1],Y[2],Y[3],Y[4]),Mt=V(G,Z,Y[1],Y[2],Y[3],Y[4]),bt.iterator=It,bt.angleFinder=Mt,bt.length=gt(It,G,Z),G=Y[3],Z=Y[4];break;case"Z":case"z":bt.destX=q,bt.destY=pt,bt.length=o(G,Z,q,pt),G=q,Z=pt;break}X+=bt.length,ft.push(bt)}return ft.push({length:X,x:G,y:Z}),ft}function B($,X,at){at||(at=mt($));for(var Y=0;X-at[Y].length>0&&Y<at.length-2;)X-=at[Y].length,Y++;var G=at[Y],Z=X/G.length,q=G.command,pt=$[Y],ft;switch(q){case"M":return{x:G.x,y:G.y,angle:0};case"Z":case"z":return ft=new h.Point(G.x,G.y).lerp(new h.Point(G.destX,G.destY),Z),ft.angle=Math.atan2(G.destY-G.y,G.destX-G.x),ft;case"L":return ft=new h.Point(G.x,G.y).lerp(new h.Point(pt[1],pt[2]),Z),ft.angle=Math.atan2(pt[2]-G.y,pt[1]-G.x),ft;case"C":return J(G,X);case"Q":return J(G,X)}}function St($){var X=[],at=[],Y,G,Z=h.rePathCommand,q="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",pt="("+q+")"+h.commaWsp,ft="([01])"+h.commaWsp+"?",It=pt+"?"+pt+"?"+pt+ft+ft+pt+"?("+q+")",bt=new RegExp(It,"g"),Mt,ot,tt;if(!$||!$.match)return X;tt=$.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var et=0,lt,ut=tt.length;et<ut;et++){Y=tt[et],ot=Y.slice(1).trim(),at.length=0;var yt=Y.charAt(0);if(lt=[yt],yt.toLowerCase()==="a")for(var At;At=bt.exec(ot);)for(var Yt=1;Yt<At.length;Yt++)at.push(At[Yt]);else for(;Mt=Z.exec(ot);)at.push(Mt[0]);for(var Yt=0,Ht=at.length;Yt<Ht;Yt++)G=parseFloat(at[Yt]),isNaN(G)||lt.push(G);var xt=i[yt.toLowerCase()],Xt=f[yt]||yt;if(lt.length-1>xt)for(var Jt=1,ae=lt.length;Jt<ae;Jt+=xt)X.push([yt].concat(lt.slice(Jt,Jt+xt))),yt=Xt;else X.push(lt)}return X}function ct($,X){var at=[],Y,G=new h.Point($[0].x,$[0].y),Z=new h.Point($[1].x,$[1].y),q=$.length,pt=1,ft=0,It=q>2;for(X=X||0,It&&(pt=$[2].x<Z.x?-1:$[2].x===Z.x?0:1,ft=$[2].y<Z.y?-1:$[2].y===Z.y?0:1),at.push(["M",G.x-pt*X,G.y-ft*X]),Y=1;Y<q;Y++){if(!G.eq(Z)){var bt=G.midPointFrom(Z);at.push(["Q",G.x,G.y,bt.x,bt.y])}G=$[Y],Y+1<$.length&&(Z=$[Y+1])}return It&&(pt=G.x>$[Y-2].x?1:G.x===$[Y-2].x?0:-1,ft=G.y>$[Y-2].y?1:G.y===$[Y-2].y?0:-1),at.push(["L",G.x+pt*X,G.y+ft*X]),at}function Pt($,X,at){return at&&(X=h.util.multiplyTransformMatrices(X,[1,0,0,1,-at.x,-at.y])),$.map(function(Y){for(var G=Y.slice(0),Z={},q=1;q<Y.length-1;q+=2)Z.x=Y[q],Z.y=Y[q+1],Z=h.util.transformPoint(Z,X),G[q]=Z.x,G[q+1]=Z.y;return G})}function Q($,X,at,Y,G,Z,q,pt,ft){for(var It=0,bt=0,Mt,ot=[],tt=t(pt-$,ft-X,at,Y,Z,q,G),et=0,lt=tt.length;et<lt;et++)Mt=e(It,bt,tt[et][1],tt[et][2],tt[et][3],tt[et][4],tt[et][5],tt[et][6]),ot.push({x:Mt[0].x+$,y:Mt[0].y+X}),ot.push({x:Mt[1].x+$,y:Mt[1].y+X}),It=tt[et][5],bt=tt[et][6];return ot}function rt($,X,at,Y){Y=Y.slice(0).unshift("X");var G=s(X,at,Y);G.forEach(function(Z){$.bezierCurveTo.apply($,Z.slice(1))})}h.util.joinPath=function($){return $.map(function(X){return X.join(" ")}).join(" ")},h.util.parsePath=St,h.util.makePathSimpler=v,h.util.getSmoothPathFromPoints=ct,h.util.getPathSegmentsInfo=mt,h.util.getBoundsOfCurve=e,h.util.getPointOnPath=B,h.util.transformPath=Pt,h.util.fromArcToBeizers=s,h.util.getBoundsOfArc=Q,h.util.drawArc=rt})(),(function(){var g=Array.prototype.slice;function i(e,s){for(var v=g.call(arguments,2),o=[],m=0,C=e.length;m<C;m++)o[m]=v.length?e[m][s].apply(e[m],v):e[m][s].call(e[m]);return o}function f(e,s){return n(e,s,function(v,o){return v>=o})}function u(e,s){return n(e,s,function(v,o){return v<o})}function t(e,s){for(var v=e.length;v--;)e[v]=s;return e}function n(e,s,v){if(!(!e||e.length===0)){var o=e.length-1,m=s?e[o][s]:e[o];if(s)for(;o--;)v(e[o][s],m)&&(m=e[o][s]);else for(;o--;)v(e[o],m)&&(m=e[o]);return m}}h.util.array={fill:t,invoke:i,min:u,max:f}})(),(function(){function g(f,u,t){if(t)if(!h.isLikelyNode&&u instanceof Element)f=u;else if(u instanceof Array){f=[];for(var n=0,e=u.length;n<e;n++)f[n]=g({},u[n],t)}else if(u&&typeof u=="object")for(var s in u)s==="canvas"||s==="group"?f[s]=null:u.hasOwnProperty(s)&&(f[s]=g({},u[s],t));else f=u;else for(var s in u)f[s]=u[s];return f}function i(f,u){return g({},f,u)}h.util.object={extend:g,clone:i},h.util.object.extend(h.util,h.Observable)})(),(function(){function g(n){return n.replace(/-+(.)?/g,function(e,s){return s?s.toUpperCase():""})}function i(n,e){return n.charAt(0).toUpperCase()+(e?n.slice(1):n.slice(1).toLowerCase())}function f(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(n){var e=0,s,v=[];for(e=0,s;e<n.length;e++)(s=t(n,e))!==!1&&v.push(s);return v}function t(n,e){var s=n.charCodeAt(e);if(isNaN(s))return"";if(s<55296||s>57343)return n.charAt(e);if(55296<=s&&s<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";var v=n.charCodeAt(e+1);if(56320>v||v>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";var o=n.charCodeAt(e-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}h.util.string={camelize:g,capitalize:i,escapeXml:f,graphemeSplit:u}})(),(function(){var g=Array.prototype.slice,i=function(){},f=(function(){for(var s in{toString:1})if(s==="toString")return!1;return!0})(),u=function(s,v,o){for(var m in v)m in s.prototype&&typeof s.prototype[m]=="function"&&(v[m]+"").indexOf("callSuper")>-1?s.prototype[m]=(function(C){return function(){var I=this.constructor.superclass;this.constructor.superclass=o;var M=v[C].apply(this,arguments);if(this.constructor.superclass=I,C!=="initialize")return M}})(m):s.prototype[m]=v[m],f&&(v.toString!==Object.prototype.toString&&(s.prototype.toString=v.toString),v.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=v.valueOf))};function t(){}function n(s){for(var v=null,o=this;o.constructor.superclass;){var m=o.constructor.superclass.prototype[s];if(o[s]!==m){v=m;break}o=o.constructor.superclass.prototype}return v?arguments.length>1?v.apply(this,g.call(arguments,1)):v.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function e(){var s=null,v=g.call(arguments,0);typeof v[0]=="function"&&(s=v.shift());function o(){this.initialize.apply(this,arguments)}o.superclass=s,o.subclasses=[],s&&(t.prototype=s.prototype,o.prototype=new t,s.subclasses.push(o));for(var m=0,C=v.length;m<C;m++)u(o,v[m],s);return o.prototype.initialize||(o.prototype.initialize=i),o.prototype.constructor=o,o.prototype.callSuper=n,o}h.util.createClass=e})(),(function(){var g=!!h.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];h.util.addListener=function(u,t,n,e){u&&u.addEventListener(t,n,g?!1:e)},h.util.removeListener=function(u,t,n,e){u&&u.removeEventListener(t,n,g?!1:e)};function f(u){var t=u.changedTouches;return t&&t[0]?t[0]:u}h.util.getPointer=function(u){var t=u.target,n=h.util.getScrollLeftTop(t),e=f(u);return{x:e.clientX+n.left,y:e.clientY+n.top}},h.util.isTouchEvent=function(u){return i.indexOf(u.type)>-1||u.pointerType==="touch"}})(),(function(){function g(e,s){var v=e.style;if(!v)return e;if(typeof s=="string")return e.style.cssText+=";"+s,s.indexOf("opacity")>-1?n(e,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var o in s)if(o==="opacity")n(e,s[o]);else{var m=o==="float"||o==="cssFloat"?typeof v.styleFloat>"u"?"cssFloat":"styleFloat":o;v[m]=s[o]}return e}var i=h.document.createElement("div"),f=typeof i.style.opacity=="string",u=typeof i.style.filter=="string",t=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(e){return e};f?n=function(e,s){return e.style.opacity=s,e}:u&&(n=function(e,s){var v=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(v.zoom=1),t.test(v.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",v.filter=v.filter.replace(t,s)):v.filter+=" alpha(opacity="+s*100+")",e}),h.util.setStyle=g})(),(function(){var g=Array.prototype.slice;function i(M){return typeof M=="string"?h.document.getElementById(M):M}var f,u=function(M){return g.call(M,0)};try{f=u(h.document.childNodes)instanceof Array}catch{}f||(u=function(M){for(var k=new Array(M.length),N=M.length;N--;)k[N]=M[N];return k});function t(M,k){var N=h.document.createElement(M);for(var H in k)H==="class"?N.className=k[H]:H==="for"?N.htmlFor=k[H]:N.setAttribute(H,k[H]);return N}function n(M,k){M&&(" "+M.className+" ").indexOf(" "+k+" ")===-1&&(M.className+=(M.className?" ":"")+k)}function e(M,k,N){return typeof k=="string"&&(k=t(k,N)),M.parentNode&&M.parentNode.replaceChild(k,M),k.appendChild(M),k}function s(M){for(var k=0,N=0,H=h.document.documentElement,F=h.document.body||{scrollLeft:0,scrollTop:0};M&&(M.parentNode||M.host)&&(M=M.parentNode||M.host,M===h.document?(k=F.scrollLeft||H.scrollLeft||0,N=F.scrollTop||H.scrollTop||0):(k+=M.scrollLeft||0,N+=M.scrollTop||0),!(M.nodeType===1&&M.style.position==="fixed")););return{left:k,top:N}}function v(M){var k,N=M&&M.ownerDocument,H={left:0,top:0},F={left:0,top:0},W,it={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!N)return F;for(var V in it)F[it[V]]+=parseInt(o(M,V),10)||0;return k=N.documentElement,typeof M.getBoundingClientRect<"u"&&(H=M.getBoundingClientRect()),W=s(M),{left:H.left+W.left-(k.clientLeft||0)+F.left,top:H.top+W.top-(k.clientTop||0)+F.top}}var o;h.document.defaultView&&h.document.defaultView.getComputedStyle?o=function(M,k){var N=h.document.defaultView.getComputedStyle(M,null);return N?N[k]:void 0}:o=function(M,k){var N=M.style[k];return!N&&M.currentStyle&&(N=M.currentStyle[k]),N},(function(){var M=h.document.documentElement.style,k="userSelect"in M?"userSelect":"MozUserSelect"in M?"MozUserSelect":"WebkitUserSelect"in M?"WebkitUserSelect":"KhtmlUserSelect"in M?"KhtmlUserSelect":"";function N(F){return typeof F.onselectstart<"u"&&(F.onselectstart=h.util.falseFunction),k?F.style[k]="none":typeof F.unselectable=="string"&&(F.unselectable="on"),F}function H(F){return typeof F.onselectstart<"u"&&(F.onselectstart=null),k?F.style[k]="":typeof F.unselectable=="string"&&(F.unselectable=""),F}h.util.makeElementUnselectable=N,h.util.makeElementSelectable=H})();function m(M){var k=h.jsdomImplForWrapper(M);return k._canvas||k._image}function C(M){if(h.isLikelyNode){var k=h.jsdomImplForWrapper(M);k&&(k._image=null,k._canvas=null,k._currentSrc=null,k._attributes=null,k._classList=null)}}function I(M,k){M.imageSmoothingEnabled=M.imageSmoothingEnabled||M.webkitImageSmoothingEnabled||M.mozImageSmoothingEnabled||M.msImageSmoothingEnabled||M.oImageSmoothingEnabled,M.imageSmoothingEnabled=k}h.util.setImageSmoothing=I,h.util.getById=i,h.util.toArray=u,h.util.addClass=n,h.util.makeElement=t,h.util.wrapElement=e,h.util.getScrollLeftTop=s,h.util.getElementOffset=v,h.util.getNodeCanvas=m,h.util.cleanUpJsdomNode=C})(),(function(){function g(u,t){return u+(/\?/.test(u)?"&":"?")+t}function i(){}function f(u,t){t||(t={});var n=t.method?t.method.toUpperCase():"GET",e=t.onComplete||function(){},s=new h.window.XMLHttpRequest,v=t.body||t.parameters;return s.onreadystatechange=function(){s.readyState===4&&(e(s),s.onreadystatechange=i)},n==="GET"&&(v=null,typeof t.parameters=="string"&&(u=g(u,t.parameters))),s.open(n,u,!0),(n==="POST"||n==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(v),s}h.util.request=f})(),h.log=console.log,h.warn=console.warn,(function(){function g(){return!1}function i(s,v,o,m){return-o*Math.cos(s/m*(Math.PI/2))+o+v}function f(s){var v=!1;return n(function(o){s||(s={});var m=o||+new Date,C=s.duration||500,I=m+C,M,k=s.onChange||g,N=s.abort||g,H=s.onComplete||g,F=s.easing||i,W="startValue"in s?s.startValue:0,it="endValue"in s?s.endValue:100,V=s.byValue||it-W;s.onStart&&s.onStart(),(function gt(J){M=J||+new Date;var mt=M>I?C:M-m,B=mt/C,St=F(mt,W,V,C),ct=Math.abs((St-W)/V);if(!v){if(N(St,ct,B)){H(it,1,1);return}if(M>I){k(it,1,1),H(it,1,1);return}else k(St,ct,B),n(gt)}})(m)}),function(){v=!0}}var u=h.window.requestAnimationFrame||h.window.webkitRequestAnimationFrame||h.window.mozRequestAnimationFrame||h.window.oRequestAnimationFrame||h.window.msRequestAnimationFrame||function(s){return h.window.setTimeout(s,1e3/60)},t=h.window.cancelAnimationFrame||h.window.clearTimeout;function n(){return u.apply(h.window,arguments)}function e(){return t.apply(h.window,arguments)}h.util.animate=f,h.util.requestAnimFrame=n,h.util.cancelAnimFrame=e})(),(function(){function g(f,u,t){var n="rgba("+parseInt(f[0]+t*(u[0]-f[0]),10)+","+parseInt(f[1]+t*(u[1]-f[1]),10)+","+parseInt(f[2]+t*(u[2]-f[2]),10);return n+=","+(f&&u?parseFloat(f[3]+t*(u[3]-f[3])):1),n+=")",n}function i(f,u,t,n){var e=new h.Color(f).getSource(),s=new h.Color(u).getSource(),v=n.onComplete,o=n.onChange;return n=n||{},h.util.animate(h.util.object.extend(n,{duration:t||500,startValue:e,endValue:s,byValue:s,easing:function(m,C,I,M){var k=n.colorEasing?n.colorEasing(m,M):1-Math.cos(m/M*(Math.PI/2));return g(C,I,k)},onComplete:function(m,C,I){if(v)return v(g(s,s,0),C,I)},onChange:function(m,C,I){if(o){if(Array.isArray(m))return o(g(m,m,0),C,I);o(m,C,I)}}}))}h.util.animateColor=i})(),(function(){function g(Q,rt,$,X){return Q<Math.abs(rt)?(Q=rt,X=$/4):rt===0&&Q===0?X=$/(2*Math.PI)*Math.asin(1):X=$/(2*Math.PI)*Math.asin(rt/Q),{a:Q,c:rt,p:$,s:X}}function i(Q,rt,$){return Q.a*Math.pow(2,10*(rt-=1))*Math.sin((rt*$-Q.s)*(2*Math.PI)/Q.p)}function f(Q,rt,$,X){return $*((Q=Q/X-1)*Q*Q+1)+rt}function u(Q,rt,$,X){return Q/=X/2,Q<1?$/2*Q*Q*Q+rt:$/2*((Q-=2)*Q*Q+2)+rt}function t(Q,rt,$,X){return $*(Q/=X)*Q*Q*Q+rt}function n(Q,rt,$,X){return-$*((Q=Q/X-1)*Q*Q*Q-1)+rt}function e(Q,rt,$,X){return Q/=X/2,Q<1?$/2*Q*Q*Q*Q+rt:-$/2*((Q-=2)*Q*Q*Q-2)+rt}function s(Q,rt,$,X){return $*(Q/=X)*Q*Q*Q*Q+rt}function v(Q,rt,$,X){return $*((Q=Q/X-1)*Q*Q*Q*Q+1)+rt}function o(Q,rt,$,X){return Q/=X/2,Q<1?$/2*Q*Q*Q*Q*Q+rt:$/2*((Q-=2)*Q*Q*Q*Q+2)+rt}function m(Q,rt,$,X){return-$*Math.cos(Q/X*(Math.PI/2))+$+rt}function C(Q,rt,$,X){return $*Math.sin(Q/X*(Math.PI/2))+rt}function I(Q,rt,$,X){return-$/2*(Math.cos(Math.PI*Q/X)-1)+rt}function M(Q,rt,$,X){return Q===0?rt:$*Math.pow(2,10*(Q/X-1))+rt}function k(Q,rt,$,X){return Q===X?rt+$:$*(-Math.pow(2,-10*Q/X)+1)+rt}function N(Q,rt,$,X){return Q===0?rt:Q===X?rt+$:(Q/=X/2,Q<1?$/2*Math.pow(2,10*(Q-1))+rt:$/2*(-Math.pow(2,-10*--Q)+2)+rt)}function H(Q,rt,$,X){return-$*(Math.sqrt(1-(Q/=X)*Q)-1)+rt}function F(Q,rt,$,X){return $*Math.sqrt(1-(Q=Q/X-1)*Q)+rt}function W(Q,rt,$,X){return Q/=X/2,Q<1?-$/2*(Math.sqrt(1-Q*Q)-1)+rt:$/2*(Math.sqrt(1-(Q-=2)*Q)+1)+rt}function it(Q,rt,$,X){var at=1.70158,Y=0,G=$;if(Q===0)return rt;if(Q/=X,Q===1)return rt+$;Y||(Y=X*.3);var Z=g(G,$,Y,at);return-i(Z,Q,X)+rt}function V(Q,rt,$,X){var at=1.70158,Y=0,G=$;if(Q===0)return rt;if(Q/=X,Q===1)return rt+$;Y||(Y=X*.3);var Z=g(G,$,Y,at);return Z.a*Math.pow(2,-10*Q)*Math.sin((Q*X-Z.s)*(2*Math.PI)/Z.p)+Z.c+rt}function gt(Q,rt,$,X){var at=1.70158,Y=0,G=$;if(Q===0)return rt;if(Q/=X/2,Q===2)return rt+$;Y||(Y=X*.44999999999999996);var Z=g(G,$,Y,at);return Q<1?-.5*i(Z,Q,X)+rt:Z.a*Math.pow(2,-10*(Q-=1))*Math.sin((Q*X-Z.s)*(2*Math.PI)/Z.p)*.5+Z.c+rt}function J(Q,rt,$,X,at){return at===void 0&&(at=1.70158),$*(Q/=X)*Q*((at+1)*Q-at)+rt}function mt(Q,rt,$,X,at){return at===void 0&&(at=1.70158),$*((Q=Q/X-1)*Q*((at+1)*Q+at)+1)+rt}function B(Q,rt,$,X,at){return at===void 0&&(at=1.70158),Q/=X/2,Q<1?$/2*(Q*Q*(((at*=1.525)+1)*Q-at))+rt:$/2*((Q-=2)*Q*(((at*=1.525)+1)*Q+at)+2)+rt}function St(Q,rt,$,X){return $-ct(X-Q,0,$,X)+rt}function ct(Q,rt,$,X){return(Q/=X)<.36363636363636365?$*(7.5625*Q*Q)+rt:Q<.7272727272727273?$*(7.5625*(Q-=.5454545454545454)*Q+.75)+rt:Q<.9090909090909091?$*(7.5625*(Q-=.8181818181818182)*Q+.9375)+rt:$*(7.5625*(Q-=.9545454545454546)*Q+.984375)+rt}function Pt(Q,rt,$,X){return Q<X/2?St(Q*2,0,$,X)*.5+rt:ct(Q*2-X,0,$,X)*.5+$*.5+rt}h.util.ease={easeInQuad:function(Q,rt,$,X){return $*(Q/=X)*Q+rt},easeOutQuad:function(Q,rt,$,X){return-$*(Q/=X)*(Q-2)+rt},easeInOutQuad:function(Q,rt,$,X){return Q/=X/2,Q<1?$/2*Q*Q+rt:-$/2*(--Q*(Q-2)-1)+rt},easeInCubic:function(Q,rt,$,X){return $*(Q/=X)*Q*Q+rt},easeOutCubic:f,easeInOutCubic:u,easeInQuart:t,easeOutQuart:n,easeInOutQuart:e,easeInQuint:s,easeOutQuint:v,easeInOutQuint:o,easeInSine:m,easeOutSine:C,easeInOutSine:I,easeInExpo:M,easeOutExpo:k,easeInOutExpo:N,easeInCirc:H,easeOutCirc:F,easeInOutCirc:W,easeInElastic:it,easeOutElastic:V,easeInOutElastic:gt,easeInBack:J,easeOutBack:mt,easeInOutBack:B,easeInBounce:St,easeOutBounce:ct,easeInOutBounce:Pt}})(),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.util.object.clone,t=i.util.toFixed,n=i.util.parseUnit,e=i.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],v=["symbol","image","marker","pattern","view","svg"],o=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},I={stroke:"strokeOpacity",fill:"fillOpacity"},M="font-size",k="clip-path";i.svgValidTagNamesRegEx=F(s),i.svgViewBoxElementsRegEx=F(v),i.svgInvalidAncestorsRegEx=F(o),i.svgValidParentsRegEx=F(m),i.cssRules={},i.gradientDefs={},i.clipPaths={};function N(Y){return Y in C?C[Y]:Y}function H(Y,G,Z,q){var pt=Object.prototype.toString.call(G)==="[object Array]",ft;if((Y==="fill"||Y==="stroke")&&G==="none")G="";else{if(Y==="strokeUniform")return G==="non-scaling-stroke";if(Y==="strokeDashArray")G==="none"?G=null:G=G.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(Y==="transformMatrix")Z&&Z.transformMatrix?G=e(Z.transformMatrix,i.parseTransformAttribute(G)):G=i.parseTransformAttribute(G);else if(Y==="visible")G=G!=="none"&&G!=="hidden",Z&&Z.visible===!1&&(G=!1);else if(Y==="opacity")G=parseFloat(G),Z&&typeof Z.opacity<"u"&&(G*=Z.opacity);else if(Y==="textAnchor")G=G==="start"?"left":G==="end"?"right":"center";else if(Y==="charSpacing")ft=n(G,q)/q*1e3;else if(Y==="paintFirst"){var It=G.indexOf("fill"),bt=G.indexOf("stroke"),G="fill";(It>-1&&bt>-1&&bt<It||It===-1&&bt>-1)&&(G="stroke")}else{if(Y==="href"||Y==="xlink:href"||Y==="font")return G;if(Y==="imageSmoothing")return G==="optimizeQuality";ft=pt?G.map(n):n(G,q)}}return!pt&&isNaN(ft)?G:ft}function F(Y){return new RegExp("^("+Y.join("|")+")\\b","i")}function W(Y){for(var G in I)if(!(typeof Y[I[G]]>"u"||Y[G]==="")){if(typeof Y[G]>"u"){if(!i.Object.prototype[G])continue;Y[G]=i.Object.prototype[G]}if(Y[G].indexOf("url(")!==0){var Z=new i.Color(Y[G]);Y[G]=Z.setAlpha(t(Z.getAlpha()*Y[I[G]],2)).toRgba()}}return Y}function it(Y,G){var Z,q=[],pt,ft,It;for(ft=0,It=G.length;ft<It;ft++)Z=G[ft],pt=Y.getElementsByTagName(Z),q=q.concat(Array.prototype.slice.call(pt));return q}i.parseTransformAttribute=(function(){function Y(xt,Xt){var Jt=i.util.cos(Xt[0]),ae=i.util.sin(Xt[0]),pe=0,zt=0;Xt.length===3&&(pe=Xt[1],zt=Xt[2]),xt[0]=Jt,xt[1]=ae,xt[2]=-ae,xt[3]=Jt,xt[4]=pe-(Jt*pe-ae*zt),xt[5]=zt-(ae*pe+Jt*zt)}function G(xt,Xt){var Jt=Xt[0],ae=Xt.length===2?Xt[1]:Xt[0];xt[0]=Jt,xt[3]=ae}function Z(xt,Xt,Jt){xt[Jt]=Math.tan(i.util.degreesToRadians(Xt[0]))}function q(xt,Xt){xt[4]=Xt[0],Xt.length===2&&(xt[5]=Xt[1])}var pt=i.iMatrix,ft=i.reNum,It=i.commaWsp,bt="(?:(skewX)\\s*\\(\\s*("+ft+")\\s*\\))",Mt="(?:(skewY)\\s*\\(\\s*("+ft+")\\s*\\))",ot="(?:(rotate)\\s*\\(\\s*("+ft+")(?:"+It+"("+ft+")"+It+"("+ft+"))?\\s*\\))",tt="(?:(scale)\\s*\\(\\s*("+ft+")(?:"+It+"("+ft+"))?\\s*\\))",et="(?:(translate)\\s*\\(\\s*("+ft+")(?:"+It+"("+ft+"))?\\s*\\))",lt="(?:(matrix)\\s*\\(\\s*("+ft+")"+It+"("+ft+")"+It+"("+ft+")"+It+"("+ft+")"+It+"("+ft+")"+It+"("+ft+")\\s*\\))",ut="(?:"+lt+"|"+et+"|"+tt+"|"+ot+"|"+bt+"|"+Mt+")",yt="(?:"+ut+"(?:"+It+"*"+ut+")*)",At="^\\s*(?:"+yt+"?)\\s*$",Yt=new RegExp(At),Ht=new RegExp(ut,"g");return function(xt){var Xt=pt.concat(),Jt=[];if(!xt||xt&&!Yt.test(xt))return Xt;xt.replace(Ht,function(pe){var zt=new RegExp(ut).exec(pe).filter(function(qt){return!!qt}),Gt=zt[1],Ut=zt.slice(2).map(parseFloat);switch(Gt){case"translate":q(Xt,Ut);break;case"rotate":Ut[0]=i.util.degreesToRadians(Ut[0]),Y(Xt,Ut);break;case"scale":G(Xt,Ut);break;case"skewX":Z(Xt,Ut,2);break;case"skewY":Z(Xt,Ut,1);break;case"matrix":Xt=Ut;break}Jt.push(Xt.concat()),Xt=pt.concat()});for(var ae=Jt[0];Jt.length>1;)Jt.shift(),ae=i.util.multiplyTransformMatrices(ae,Jt[0]);return ae}})();function V(Y,G){var Z,q;Y.replace(/;\s*$/,"").split(";").forEach(function(pt){var ft=pt.split(":");Z=ft[0].trim().toLowerCase(),q=ft[1].trim(),G[Z]=q})}function gt(Y,G){var Z,q;for(var pt in Y)typeof Y[pt]>"u"||(Z=pt.toLowerCase(),q=Y[pt],G[Z]=q)}function J(Y,G){var Z={};for(var q in i.cssRules[G])if(mt(Y,q.split(" ")))for(var pt in i.cssRules[G][q])Z[pt]=i.cssRules[G][q][pt];return Z}function mt(Y,G){var Z,q=!0;return Z=St(Y,G.pop()),Z&&G.length&&(q=B(Y,G)),Z&&q&&G.length===0}function B(Y,G){for(var Z,q=!0;Y.parentNode&&Y.parentNode.nodeType===1&&G.length;)q&&(Z=G.pop()),Y=Y.parentNode,q=St(Y,Z);return G.length===0}function St(Y,G){var Z=Y.nodeName,q=Y.getAttribute("class"),pt=Y.getAttribute("id"),ft,It;if(ft=new RegExp("^"+Z,"i"),G=G.replace(ft,""),pt&&G.length&&(ft=new RegExp("#"+pt+"(?![a-zA-Z\\-]+)","i"),G=G.replace(ft,"")),q&&G.length)for(q=q.split(" "),It=q.length;It--;)ft=new RegExp("\\."+q[It]+"(?![a-zA-Z\\-]+)","i"),G=G.replace(ft,"");return G.length===0}function ct(Y,G){var Z;if(Y.getElementById&&(Z=Y.getElementById(G)),Z)return Z;var q,pt,ft,It=Y.getElementsByTagName("*");for(pt=0,ft=It.length;pt<ft;pt++)if(q=It[pt],G===q.getAttribute("id"))return q}function Pt(Y){for(var G=it(Y,["use","svg:use"]),Z=0;G.length&&Z<G.length;){var q=G[Z],pt=q.getAttribute("xlink:href")||q.getAttribute("href");if(pt===null)return;var ft=pt.substr(1),It=q.getAttribute("x")||0,bt=q.getAttribute("y")||0,Mt=ct(Y,ft).cloneNode(!0),ot=(Mt.getAttribute("transform")||"")+" translate("+It+", "+bt+")",tt,et=G.length,lt,ut,yt,At,Yt=i.svgNS;if(rt(Mt),/^svg$/i.test(Mt.nodeName)){var Ht=Mt.ownerDocument.createElementNS(Yt,"g");for(ut=0,yt=Mt.attributes,At=yt.length;ut<At;ut++)lt=yt.item(ut),Ht.setAttributeNS(Yt,lt.nodeName,lt.nodeValue);for(;Mt.firstChild;)Ht.appendChild(Mt.firstChild);Mt=Ht}for(ut=0,yt=q.attributes,At=yt.length;ut<At;ut++)lt=yt.item(ut),!(lt.nodeName==="x"||lt.nodeName==="y"||lt.nodeName==="xlink:href"||lt.nodeName==="href")&&(lt.nodeName==="transform"?ot=lt.nodeValue+" "+ot:Mt.setAttribute(lt.nodeName,lt.nodeValue));Mt.setAttribute("transform",ot),Mt.setAttribute("instantiated_by_use","1"),Mt.removeAttribute("id"),tt=q.parentNode,tt.replaceChild(Mt,q),G.length===et&&Z++}}var Q=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function rt(Y){if(!i.svgViewBoxElementsRegEx.test(Y.nodeName))return{};var G=Y.getAttribute("viewBox"),Z=1,q=1,pt=0,ft=0,It,bt,Mt,ot,tt=Y.getAttribute("width"),et=Y.getAttribute("height"),lt=Y.getAttribute("x")||0,ut=Y.getAttribute("y")||0,yt=Y.getAttribute("preserveAspectRatio")||"",At=!G||!(G=G.match(Q)),Yt=!tt||!et||tt==="100%"||et==="100%",Ht=At&&Yt,xt={},Xt="",Jt=0,ae=0;if(xt.width=0,xt.height=0,xt.toBeParsed=Ht,At&&(lt||ut)&&Y.parentNode&&Y.parentNode.nodeName!=="#document"&&(Xt=" translate("+n(lt)+" "+n(ut)+") ",Mt=(Y.getAttribute("transform")||"")+Xt,Y.setAttribute("transform",Mt),Y.removeAttribute("x"),Y.removeAttribute("y")),Ht)return xt;if(At)return xt.width=n(tt),xt.height=n(et),xt;if(pt=-parseFloat(G[1]),ft=-parseFloat(G[2]),It=parseFloat(G[3]),bt=parseFloat(G[4]),xt.minX=pt,xt.minY=ft,xt.viewBoxWidth=It,xt.viewBoxHeight=bt,Yt?(xt.width=It,xt.height=bt):(xt.width=n(tt),xt.height=n(et),Z=xt.width/It,q=xt.height/bt),yt=i.util.parsePreserveAspectRatioAttribute(yt),yt.alignX!=="none"&&(yt.meetOrSlice==="meet"&&(q=Z=Z>q?q:Z),yt.meetOrSlice==="slice"&&(q=Z=Z>q?Z:q),Jt=xt.width-It*Z,ae=xt.height-bt*Z,yt.alignX==="Mid"&&(Jt/=2),yt.alignY==="Mid"&&(ae/=2),yt.alignX==="Min"&&(Jt=0),yt.alignY==="Min"&&(ae=0)),Z===1&&q===1&&pt===0&&ft===0&&lt===0&&ut===0)return xt;if((lt||ut)&&Y.parentNode.nodeName!=="#document"&&(Xt=" translate("+n(lt)+" "+n(ut)+") "),Mt=Xt+" matrix("+Z+" 0 0 "+q+" "+(pt*Z+Jt)+" "+(ft*q+ae)+") ",Y.nodeName==="svg"){for(ot=Y.ownerDocument.createElementNS(i.svgNS,"g");Y.firstChild;)ot.appendChild(Y.firstChild);Y.appendChild(ot)}else ot=Y,ot.removeAttribute("x"),ot.removeAttribute("y"),Mt=ot.getAttribute("transform")+Mt;return ot.setAttribute("transform",Mt),xt}function $(Y,G){for(;Y&&(Y=Y.parentNode);)if(Y.nodeName&&G.test(Y.nodeName.replace("svg:",""))&&!Y.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(Y,G,Z,q){if(Y){Pt(Y);var pt=i.Object.__uid++,ft,It,bt=rt(Y),Mt=i.util.toArray(Y.getElementsByTagName("*"));if(bt.crossOrigin=q&&q.crossOrigin,bt.svgUid=pt,Mt.length===0&&i.isLikelyNode){Mt=Y.selectNodes('//*[name(.)!="svg"]');var ot=[];for(ft=0,It=Mt.length;ft<It;ft++)ot[ft]=Mt[ft];Mt=ot}var tt=Mt.filter(function(lt){return rt(lt),i.svgValidTagNamesRegEx.test(lt.nodeName.replace("svg:",""))&&!$(lt,i.svgInvalidAncestorsRegEx)});if(!tt||tt&&!tt.length){G&&G([],{});return}var et={};Mt.filter(function(lt){return lt.nodeName.replace("svg:","")==="clipPath"}).forEach(function(lt){var ut=lt.getAttribute("id");et[ut]=i.util.toArray(lt.getElementsByTagName("*")).filter(function(yt){return i.svgValidTagNamesRegEx.test(yt.nodeName.replace("svg:",""))})}),i.gradientDefs[pt]=i.getGradientDefs(Y),i.cssRules[pt]=i.getCSSRules(Y),i.clipPaths[pt]=et,i.parseElements(tt,function(lt,ut){G&&(G(lt,bt,ut,Mt),delete i.gradientDefs[pt],delete i.cssRules[pt],delete i.clipPaths[pt])},u(bt),Z,q)}};function X(Y,G){var Z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],q="xlink:href",pt=G.getAttribute(q).substr(1),ft=ct(Y,pt);if(ft&&ft.getAttribute(q)&&X(Y,ft),Z.forEach(function(bt){ft&&!G.hasAttribute(bt)&&ft.hasAttribute(bt)&&G.setAttribute(bt,ft.getAttribute(bt))}),!G.children.length)for(var It=ft.cloneNode(!0);It.firstChild;)G.appendChild(It.firstChild);G.removeAttribute(q)}var at=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");f(i,{parseFontDeclaration:function(Y,G){var Z=Y.match(at);if(Z){var q=Z[1],pt=Z[3],ft=Z[4],It=Z[5],bt=Z[6];q&&(G.fontStyle=q),pt&&(G.fontWeight=isNaN(parseFloat(pt))?pt:parseFloat(pt)),ft&&(G.fontSize=n(ft)),bt&&(G.fontFamily=bt),It&&(G.lineHeight=It==="normal"?1:It)}},getGradientDefs:function(Y){var G=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Z=it(Y,G),q,pt=0,ft={};for(pt=Z.length;pt--;)q=Z[pt],q.getAttribute("xlink:href")&&X(Y,q),ft[q.getAttribute("id")]=q;return ft},parseAttributes:function(Y,G,Z){if(Y){var q,pt={},ft,It;typeof Z>"u"&&(Z=Y.getAttribute("svgUid")),Y.parentNode&&i.svgValidParentsRegEx.test(Y.parentNode.nodeName)&&(pt=i.parseAttributes(Y.parentNode,G,Z));var bt=G.reduce(function(yt,At){return q=Y.getAttribute(At),q&&(yt[At]=q),yt},{}),Mt=f(J(Y,Z),i.parseStyleAttribute(Y));bt=f(bt,Mt),Mt[k]&&Y.setAttribute(k,Mt[k]),ft=It=pt.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,bt[M]&&(bt[M]=ft=n(bt[M],It));var ot,tt,et={};for(var lt in bt)ot=N(lt),tt=H(ot,bt[lt],pt,ft),et[ot]=tt;et&&et.font&&i.parseFontDeclaration(et.font,et);var ut=f(pt,et);return i.svgValidParentsRegEx.test(Y.nodeName)?ut:W(ut)}},parseElements:function(Y,G,Z,q,pt){new i.ElementsParser(Y,G,Z,q,pt).parse()},parseStyleAttribute:function(Y){var G={},Z=Y.getAttribute("style");return Z&&(typeof Z=="string"?V(Z,G):gt(Z,G)),G},parsePointsAttribute:function(Y){if(!Y)return null;Y=Y.replace(/,/g," ").trim(),Y=Y.split(/\s+/);var G=[],Z,q;for(Z=0,q=Y.length;Z<q;Z+=2)G.push({x:parseFloat(Y[Z]),y:parseFloat(Y[Z+1])});return G},getCSSRules:function(Y){var G=Y.getElementsByTagName("style"),Z,q,pt={},ft;for(Z=0,q=G.length;Z<q;Z++){var It=G[Z].textContent;It=It.replace(/\/\*[\s\S]*?\*\//g,""),It.trim()!==""&&(ft=It.match(/[^{]*\{[\s\S]*?\}/g),ft=ft.map(function(bt){return bt.trim()}),ft.forEach(function(bt){var Mt=bt.match(/([\s\S]*?)\s*\{([^}]*)\}/),ot={},tt=Mt[2].trim(),et=tt.replace(/;$/,"").split(/\s*;\s*/);for(Z=0,q=et.length;Z<q;Z++){var lt=et[Z].split(/\s*:\s*/),ut=lt[0],yt=lt[1];ot[ut]=yt}bt=Mt[1],bt.split(",").forEach(function(At){At=At.replace(/^svg/i,"").trim(),At!==""&&(pt[At]?i.util.object.extend(pt[At],ot):pt[At]=i.util.object.clone(ot))})}))}return pt},loadSVGFromURL:function(Y,G,Z,q){Y=Y.replace(/^\n\s*/,"").trim(),new i.util.request(Y,{method:"get",onComplete:pt});function pt(ft){var It=ft.responseXML;if(!It||!It.documentElement)return G&&G(null),!1;i.parseSVGDocument(It.documentElement,function(bt,Mt,ot,tt){G&&G(bt,Mt,ot,tt)},Z,q)}},loadSVGFromString:function(Y,G,Z,q){var pt=new i.window.DOMParser,ft=pt.parseFromString(Y.trim(),"text/xml");i.parseSVGDocument(ft.documentElement,function(It,bt,Mt,ot){G(It,bt,Mt,ot)},Z,q)}})})(b),h.ElementsParser=function(g,i,f,u,t,n){this.elements=g,this.callback=i,this.options=f,this.reviver=u,this.svgUid=f&&f.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=n},(function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var i=this;this.elements.forEach(function(f,u){f.setAttribute("svgUid",i.svgUid),i.createObject(f,u)})},g.findTag=function(i){return h[h.util.string.capitalize(i.tagName.replace("svg:",""))]},g.createObject=function(i,f){var u=this.findTag(i);if(u&&u.fromElement)try{u.fromElement(i,this.createCallback(f,i),this.options)}catch(t){h.log(t)}else this.checkIfDone()},g.createCallback=function(i,f){var u=this;return function(t){var n;u.resolveGradient(t,f,"fill"),u.resolveGradient(t,f,"stroke"),t instanceof h.Image&&t._originalElement&&(n=t.parsePreserveAspectRatioAttribute(f)),t._removeTransformMatrix(n),u.resolveClipPath(t,f),u.reviver&&u.reviver(f,t),u.instances[i]=t,u.checkIfDone()}},g.extractPropertyDefinition=function(i,f,u){var t=i[f],n=this.regexUrl;if(n.test(t)){n.lastIndex=0;var e=n.exec(t)[1];return n.lastIndex=0,h[u][this.svgUid][e]}},g.resolveGradient=function(i,f,u){var t=this.extractPropertyDefinition(i,u,"gradientDefs");if(t){var n=f.getAttribute(u+"-opacity"),e=h.Gradient.fromElement(t,i,n,this.options);i.set(u,e)}},g.createClipPathCallback=function(i,f){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,f.push(u)}},g.resolveClipPath=function(i,f){var u=this.extractPropertyDefinition(i,"clipPath","clipPaths"),t,n,e,s,v,o;if(u){s=[],e=h.util.invertTransform(i.calcTransformMatrix());for(var m=u[0].parentNode,C=f;C.parentNode&&C.getAttribute("clip-path")!==i.clipPath;)C=C.parentNode;C.parentNode.appendChild(m);for(var I=0;I<u.length;I++)t=u[I],n=this.findTag(t),n.fromElement(t,this.createClipPathCallback(i,s),this.options);s.length===1?u=s[0]:u=new h.Group(s),v=h.util.multiplyTransformMatrices(e,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,C);var o=h.util.qrDecompose(v);u.flipX=!1,u.flipY=!1,u.set("scaleX",o.scaleX),u.set("scaleY",o.scaleY),u.angle=o.angle,u.skewX=o.skewX,u.skewY=0,u.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),i.clipPath=u}else delete i.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}})(h.ElementsParser.prototype),(function(g){var i=g.fabric||(g.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=f;function f(u,t){this.x=u,this.y=t}f.prototype={type:"point",constructor:f,add:function(u){return new f(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new f(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new f(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new f(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new f(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new f(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,t){return typeof t>"u"&&(t=.5),t=Math.max(Math.min(1,t),0),new f(this.x+(u.x-this.x)*t,this.y+(u.y-this.y)*t)},distanceFrom:function(u){var t=this.x-u.x,n=this.y-u.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new f(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new f(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,t){return this.x=u,this.y=t,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var t=this.x,n=this.y;this.x=u.x,this.y=u.y,u.x=t,u.y=n},clone:function(){return new f(this.x,this.y)}}})(b),(function(g){var i=g.fabric||(g.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function f(u){this.status=u,this.points=[]}i.Intersection=f,i.Intersection.prototype={constructor:f,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},i.Intersection.intersectLineLine=function(u,t,n,e){var s,v=(e.x-n.x)*(u.y-n.y)-(e.y-n.y)*(u.x-n.x),o=(t.x-u.x)*(u.y-n.y)-(t.y-u.y)*(u.x-n.x),m=(e.y-n.y)*(t.x-u.x)-(e.x-n.x)*(t.y-u.y);if(m!==0){var C=v/m,I=o/m;0<=C&&C<=1&&0<=I&&I<=1?(s=new f("Intersection"),s.appendPoint(new i.Point(u.x+C*(t.x-u.x),u.y+C*(t.y-u.y)))):s=new f}else v===0||o===0?s=new f("Coincident"):s=new f("Parallel");return s},i.Intersection.intersectLinePolygon=function(u,t,n){var e=new f,s=n.length,v,o,m,C;for(C=0;C<s;C++)v=n[C],o=n[(C+1)%s],m=f.intersectLineLine(u,t,v,o),e.appendPoints(m.points);return e.points.length>0&&(e.status="Intersection"),e},i.Intersection.intersectPolygonPolygon=function(u,t){var n=new f,e=u.length,s;for(s=0;s<e;s++){var v=u[s],o=u[(s+1)%e],m=f.intersectLinePolygon(v,o,t);n.appendPoints(m.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(u,t,n){var e=t.min(n),s=t.max(n),v=new i.Point(s.x,e.y),o=new i.Point(e.x,s.y),m=f.intersectLinePolygon(e,v,u),C=f.intersectLinePolygon(v,s,u),I=f.intersectLinePolygon(s,o,u),M=f.intersectLinePolygon(o,e,u),k=new f;return k.appendPoints(m.points),k.appendPoints(C.points),k.appendPoints(I.points),k.appendPoints(M.points),k.points.length>0&&(k.status="Intersection"),k}})(b),(function(g){var i=g.fabric||(g.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function f(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}i.Color=f,i.Color.prototype={_tryParsingColor:function(t){var n;t in f.colorNameMap&&(t=f.colorNameMap[t]),t==="transparent"&&(n=[255,255,255,0]),n||(n=f.sourceFromHex(t)),n||(n=f.sourceFromRgb(t)),n||(n=f.sourceFromHsl(t)),n||(n=[0,0,0,1]),n&&this.setSource(n)},_rgbToHsl:function(t,n,e){t/=255,n/=255,e/=255;var s,v,o,m=i.util.array.max([t,n,e]),C=i.util.array.min([t,n,e]);if(o=(m+C)/2,m===C)s=v=0;else{var I=m-C;switch(v=o>.5?I/(2-m-C):I/(m+C),m){case t:s=(n-e)/I+(n<e?6:0);break;case n:s=(e-t)/I+2;break;case e:s=(t-n)/I+4;break}s/=6}return[Math.round(s*360),Math.round(v*100),Math.round(o*100)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),n=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+n[0]+","+n[1]+"%,"+n[2]+"%)"},toHsla:function(){var t=this.getSource(),n=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),n,e,s;return n=t[0].toString(16),n=n.length===1?"0"+n:n,e=t[1].toString(16),e=e.length===1?"0"+e:e,s=t[2].toString(16),s=s.length===1?"0"+s:s,n.toUpperCase()+e.toUpperCase()+s.toUpperCase()},toHexa:function(){var t=this.getSource(),n;return n=Math.round(t[3]*255),n=n.toString(16),n=n.length===1?"0"+n:n,this.toHex()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var n=this.getSource();return n[3]=t,this.setSource(n),this},toGrayscale:function(){var t=this.getSource(),n=parseInt((t[0]*.3+t[1]*.59+t[2]*.11).toFixed(0),10),e=t[3];return this.setSource([n,n,n,e]),this},toBlackWhite:function(t){var n=this.getSource(),e=(n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),s=n[3];return t=t||127,e=Number(e)<Number(t)?0:255,this.setSource([e,e,e,s]),this},overlayWith:function(t){t instanceof f||(t=new f(t));var n=[],e=this.getAlpha(),s=.5,v=this.getSource(),o=t.getSource(),m;for(m=0;m<3;m++)n.push(Math.round(v[m]*(1-s)+o[m]*s));return n[3]=e,this.setSource(n),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<.16666666666666666?t+(n-t)*6*e:e<.5?n:e<.6666666666666666?t+(n-t)*(.6666666666666666-e)*6:t}i.Color.fromRgb=function(t){return f.fromSource(f.sourceFromRgb(t))},i.Color.sourceFromRgb=function(t){var n=t.match(f.reRGBa);if(n){var e=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),s=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),v=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(e,10),parseInt(s,10),parseInt(v,10),n[4]?parseFloat(n[4]):1]}},i.Color.fromRgba=f.fromRgb,i.Color.fromHsl=function(t){return f.fromSource(f.sourceFromHsl(t))},i.Color.sourceFromHsl=function(t){var n=t.match(f.reHSLa);if(n){var e=(parseFloat(n[1])%360+360)%360/360,s=parseFloat(n[2])/(/%$/.test(n[2])?100:1),v=parseFloat(n[3])/(/%$/.test(n[3])?100:1),o,m,C;if(s===0)o=m=C=v;else{var I=v<=.5?v*(s+1):v+s-v*s,M=v*2-I;o=u(M,I,e+.3333333333333333),m=u(M,I,e),C=u(M,I,e-.3333333333333333)}return[Math.round(o*255),Math.round(m*255),Math.round(C*255),n[4]?parseFloat(n[4]):1]}},i.Color.fromHsla=f.fromHsl,i.Color.fromHex=function(t){return f.fromSource(f.sourceFromHex(t))},i.Color.sourceFromHex=function(t){if(t.match(f.reHex)){var n=t.slice(t.indexOf("#")+1),e=n.length===3||n.length===4,s=n.length===8||n.length===4,v=e?n.charAt(0)+n.charAt(0):n.substring(0,2),o=e?n.charAt(1)+n.charAt(1):n.substring(2,4),m=e?n.charAt(2)+n.charAt(2):n.substring(4,6),C=s?e?n.charAt(3)+n.charAt(3):n.substring(6,8):"FF";return[parseInt(v,16),parseInt(o,16),parseInt(m,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},i.Color.fromSource=function(t){var n=new f;return n.setSource(t),n}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],t={},n="left",e="top",s="right",v="bottom",o="center",m={top:v,bottom:e,left:s,right:n,center:o},C=i.util.radiansToDegrees,I=Math.sign||function(ot){return(ot>0)-(ot<0)||+ot};function M(ot,tt){var et=ot.angle+C(Math.atan2(tt.y,tt.x))+360;return Math.round(et%360/45)}function k(ot,tt){var et=tt.transform.target,lt=et.canvas,ut=i.util.object.clone(tt);ut.target=et,lt&&lt.fire("object:"+ot,ut),et.fire(ot,tt)}function N(ot,tt){var et=tt.canvas,lt=et.uniScaleKey,ut=ot[lt];return et.uniformScaling&&!ut||!et.uniformScaling&&ut}function H(ot){return ot.originX===o&&ot.originY===o}function F(ot,tt,et){var lt=ot.lockScalingX,ut=ot.lockScalingY;return!!(lt&&ut||!tt&&(lt||ut)&&et||lt&&tt==="x"||ut&&tt==="y")}function W(ot,tt,et){var lt="not-allowed",ut=N(ot,et),yt="";if(tt.x!==0&&tt.y===0?yt="x":tt.x===0&&tt.y!==0&&(yt="y"),F(et,yt,ut))return lt;var At=M(et,tt);return f[At]+"-resize"}function it(ot,tt,et){var lt="not-allowed";if(tt.x!==0&&et.lockSkewingY||tt.y!==0&&et.lockSkewingX)return lt;var ut=M(et,tt)%4;return u[ut]+"-resize"}function V(ot,tt,et){return ot[et.canvas.altActionKey]?t.skewCursorStyleHandler(ot,tt,et):t.scaleCursorStyleHandler(ot,tt,et)}function gt(ot,tt,et){var lt=ot[et.canvas.altActionKey];if(tt.x===0)return lt?"skewX":"scaleY";if(tt.y===0)return lt?"skewY":"scaleX"}function J(ot,tt,et){return et.lockRotation?"not-allowed":tt.cursorStyle}function mt(ot,tt,et,lt){return{e:ot,transform:tt,pointer:{x:et,y:lt}}}function B(ot){return function(tt,et,lt,ut){var yt=et.target,At=yt.getCenterPoint(),Yt=yt.translateToOriginPoint(At,et.originX,et.originY),Ht=ot(tt,et,lt,ut);return yt.setPositionByOrigin(Yt,et.originX,et.originY),Ht}}function St(ot,tt){return function(et,lt,ut,yt){var At=tt(et,lt,ut,yt);return At&&k(ot,mt(et,lt,ut,yt)),At}}function ct(ot,tt,et,lt,ut){var yt=ot.target,At=yt.controls[ot.corner],Yt=yt.canvas.getZoom(),Ht=yt.padding/Yt,xt=yt.toLocalPoint(new i.Point(lt,ut),tt,et);return xt.x>=Ht&&(xt.x-=Ht),xt.x<=-Ht&&(xt.x+=Ht),xt.y>=Ht&&(xt.y-=Ht),xt.y<=Ht&&(xt.y+=Ht),xt.x-=At.offsetX,xt.y-=At.offsetY,xt}function Pt(ot){return ot.flipX!==ot.flipY}function Q(ot,tt,et,lt,ut){if(ot[tt]!==0){var yt=ot._getTransformedDimensions()[lt],At=ut/yt*ot[et];ot.set(et,At)}}function rt(ot,tt,et,lt){var ut=tt.target,yt=ut._getTransformedDimensions(0,ut.skewY),At=ct(tt,tt.originX,tt.originY,et,lt),Yt=Math.abs(At.x*2)-yt.x,Ht=ut.skewX,xt;Yt<2?xt=0:(xt=C(Math.atan2(Yt/ut.scaleX,yt.y/ut.scaleY)),tt.originX===n&&tt.originY===v&&(xt=-xt),tt.originX===s&&tt.originY===e&&(xt=-xt),Pt(ut)&&(xt=-xt));var Xt=Ht!==xt;if(Xt){var Jt=ut._getTransformedDimensions().y;ut.set("skewX",xt),Q(ut,"skewY","scaleY","y",Jt)}return Xt}function $(ot,tt,et,lt){var ut=tt.target,yt=ut._getTransformedDimensions(ut.skewX,0),At=ct(tt,tt.originX,tt.originY,et,lt),Yt=Math.abs(At.y*2)-yt.y,Ht=ut.skewY,xt;Yt<2?xt=0:(xt=C(Math.atan2(Yt/ut.scaleY,yt.x/ut.scaleX)),tt.originX===n&&tt.originY===v&&(xt=-xt),tt.originX===s&&tt.originY===e&&(xt=-xt),Pt(ut)&&(xt=-xt));var Xt=Ht!==xt;if(Xt){var Jt=ut._getTransformedDimensions().x;ut.set("skewY",xt),Q(ut,"skewX","scaleX","x",Jt)}return Xt}function X(ot,tt,et,lt){var ut=tt.target,yt=ut.skewX,At,Yt=tt.originY;if(ut.lockSkewingX)return!1;if(yt===0){var Ht=ct(tt,o,o,et,lt);Ht.x>0?At=n:At=s}else yt>0&&(At=Yt===e?n:s),yt<0&&(At=Yt===e?s:n),Pt(ut)&&(At=At===n?s:n);tt.originX=At;var xt=St("skewing",B(rt));return xt(ot,tt,et,lt)}function at(ot,tt,et,lt){var ut=tt.target,yt=ut.skewY,At,Yt=tt.originX;if(ut.lockSkewingY)return!1;if(yt===0){var Ht=ct(tt,o,o,et,lt);Ht.y>0?At=e:At=v}else yt>0&&(At=Yt===n?e:v),yt<0&&(At=Yt===n?v:e),Pt(ut)&&(At=At===e?v:e);tt.originY=At;var xt=St("skewing",B($));return xt(ot,tt,et,lt)}function Y(ot,tt,et,lt){var ut=tt,yt=ut.target,At=yt.translateToOriginPoint(yt.getCenterPoint(),ut.originX,ut.originY);if(yt.lockRotation)return!1;var Yt=Math.atan2(ut.ey-At.y,ut.ex-At.x),Ht=Math.atan2(lt-At.y,et-At.x),xt=C(Ht-Yt+ut.theta),Xt=!0;if(yt.snapAngle>0){var Jt=yt.snapAngle,ae=yt.snapThreshold||Jt,pe=Math.ceil(xt/Jt)*Jt,zt=Math.floor(xt/Jt)*Jt;Math.abs(xt-zt)<ae?xt=zt:Math.abs(xt-pe)<ae&&(xt=pe)}return xt<0&&(xt=360+xt),xt%=360,Xt=yt.angle!==xt,yt.angle=xt,Xt}function G(ot,tt,et,lt,ut){ut=ut||{};var yt=tt.target,At=yt.lockScalingX,Yt=yt.lockScalingY,Ht=ut.by,xt,Xt,Jt,ae,pe=N(ot,yt),zt=F(yt,Ht,pe),Gt,Ut,qt=tt.gestureScale;if(zt)return!1;if(qt)Xt=tt.scaleX*qt,Jt=tt.scaleY*qt;else{if(xt=ct(tt,tt.originX,tt.originY,et,lt),Gt=Ht!=="y"?I(xt.x):1,Ut=Ht!=="x"?I(xt.y):1,tt.signX||(tt.signX=Gt),tt.signY||(tt.signY=Ut),yt.lockScalingFlip&&(tt.signX!==Gt||tt.signY!==Ut))return!1;if(ae=yt._getTransformedDimensions(),pe&&!Ht){var oe=Math.abs(xt.x)+Math.abs(xt.y),be=tt.original,Tt=Math.abs(ae.x*be.scaleX/yt.scaleX)+Math.abs(ae.y*be.scaleY/yt.scaleY),Et=oe/Tt;Xt=be.scaleX*Et,Jt=be.scaleY*Et}else Xt=Math.abs(xt.x*yt.scaleX/ae.x),Jt=Math.abs(xt.y*yt.scaleY/ae.y);H(tt)&&(Xt*=2,Jt*=2),tt.signX!==Gt&&Ht!=="y"&&(tt.originX=m[tt.originX],Xt*=-1,tt.signX=Gt),tt.signY!==Ut&&Ht!=="x"&&(tt.originY=m[tt.originY],Jt*=-1,tt.signY=Ut)}var Ft=yt.scaleX,Wt=yt.scaleY;return Ht?(Ht==="x"&&yt.set("scaleX",Xt),Ht==="y"&&yt.set("scaleY",Jt)):(!At&&yt.set("scaleX",Xt),!Yt&&yt.set("scaleY",Jt)),Ft!==yt.scaleX||Wt!==yt.scaleY}function Z(ot,tt,et,lt){return G(ot,tt,et,lt)}function q(ot,tt,et,lt){return G(ot,tt,et,lt,{by:"x"})}function pt(ot,tt,et,lt){return G(ot,tt,et,lt,{by:"y"})}function ft(ot,tt,et,lt){return ot[tt.target.canvas.altActionKey]?t.skewHandlerX(ot,tt,et,lt):t.scalingY(ot,tt,et,lt)}function It(ot,tt,et,lt){return ot[tt.target.canvas.altActionKey]?t.skewHandlerY(ot,tt,et,lt):t.scalingX(ot,tt,et,lt)}function bt(ot,tt,et,lt){var ut=tt.target,yt=ct(tt,tt.originX,tt.originY,et,lt),At=ut.strokeWidth/(ut.strokeUniform?ut.scaleX:1),Yt=H(tt)?2:1,Ht=ut.width,xt=Math.abs(yt.x*Yt/ut.scaleX)-At;return ut.set("width",Math.max(xt,0)),Ht!==xt}function Mt(ot,tt,et,lt){var ut=tt.target,yt=et-tt.offsetX,At=lt-tt.offsetY,Yt=!ut.get("lockMovementX")&&ut.left!==yt,Ht=!ut.get("lockMovementY")&&ut.top!==At;return Yt&&ut.set("left",yt),Ht&&ut.set("top",At),(Yt||Ht)&&k("moving",mt(ot,tt,et,lt)),Yt||Ht}t.scaleCursorStyleHandler=W,t.skewCursorStyleHandler=it,t.scaleSkewCursorStyleHandler=V,t.rotationWithSnapping=St("rotating",B(Y)),t.scalingEqually=St("scaling",B(Z)),t.scalingX=St("scaling",B(q)),t.scalingY=St("scaling",B(pt)),t.scalingYOrSkewingX=ft,t.scalingXOrSkewingY=It,t.changeWidth=St("resizing",B(bt)),t.skewHandlerX=X,t.skewHandlerY=at,t.dragHandler=Mt,t.scaleOrSkewActionName=gt,t.rotationStyleHandler=J,t.fireEvent=k,t.wrapWithFixedAnchor=B,t.wrapWithFireEvent=St,t.getLocalPoint=ct,i.controlsUtils=t})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.degreesToRadians,u=i.controlsUtils;function t(e,s,v,o,m){o=o||{};var C=this.sizeX||o.cornerSize||m.cornerSize,I=this.sizeY||o.cornerSize||m.cornerSize,M=typeof o.transparentCorners<"u"?o.transparentCorners:m.transparentCorners,k=M?"stroke":"fill",N=!M&&(o.cornerStrokeColor||m.cornerStrokeColor),H=s,F=v,W;e.save(),e.fillStyle=o.cornerColor||m.cornerColor,e.strokeStyle=o.cornerStrokeColor||m.cornerStrokeColor,C>I?(W=C,e.scale(1,I/C),F=v*C/I):I>C?(W=I,e.scale(C/I,1),H=s*I/C):W=C,e.lineWidth=1,e.beginPath(),e.arc(H,F,W/2,0,2*Math.PI,!1),e[k](),N&&e.stroke(),e.restore()}function n(e,s,v,o,m){o=o||{};var C=this.sizeX||o.cornerSize||m.cornerSize,I=this.sizeY||o.cornerSize||m.cornerSize,M=typeof o.transparentCorners<"u"?o.transparentCorners:m.transparentCorners,k=M?"stroke":"fill",N=!M&&(o.cornerStrokeColor||m.cornerStrokeColor),H=C/2,F=I/2;e.save(),e.fillStyle=o.cornerColor||m.cornerColor,e.strokeStyle=o.cornerStrokeColor||m.cornerStrokeColor,e.lineWidth=1,e.translate(s,v),e.rotate(f(m.angle)),e[k+"Rect"](-H,-F,C,I),N&&e.strokeRect(-H,-F,C,I),e.restore()}u.renderCircleControl=t,u.renderSquareControl=n})(b),(function(g){var i=g.fabric||(g.fabric={});function f(u){for(var t in u)this[t]=u[t]}i.Control=f,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,t){return t.cursorStyle},getActionName:function(u,t){return t.actionName},getVisibility:function(u,t){var n=u._controlsVisibility;return n&&typeof n[t]<"u"?n[t]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,t){var n=i.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},t);return n},calcCornerCoords:function(u,t,n,e,s){var v,o,m,C,I=s?this.touchSizeX:this.sizeX,M=s?this.touchSizeY:this.sizeY;if(I&&M&&I!==M){var k=Math.atan2(M,I),N=Math.sqrt(I*I+M*M)/2,H=k-i.util.degreesToRadians(u),F=Math.PI/2-k-i.util.degreesToRadians(u);v=N*i.util.cos(H),o=N*i.util.sin(H),m=N*i.util.cos(F),C=N*i.util.sin(F)}else{var W=I&&M?I:t;N=W*.7071067812;var H=i.util.degreesToRadians(45-u);v=m=N*i.util.cos(H),o=C=N*i.util.sin(H)}return{tl:{x:n-C,y:e-m},tr:{x:n+v,y:e-o},bl:{x:n-v,y:e+o},br:{x:n+C,y:e+m}}},render:function(u,t,n,e,s){switch(e=e||{},e.cornerStyle||s.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,u,t,n,e,s);break;default:i.controlsUtils.renderSquareControl.call(this,u,t,n,e,s)}}}})(b),(function(){function g(n,e){var s=n.getAttribute("style"),v=n.getAttribute("offset")||0,o,m,C,I;if(v=parseFloat(v)/(/%$/.test(v)?100:1),v=v<0?0:v>1?1:v,s){var M=s.split(/\s*;\s*/);for(M[M.length-1]===""&&M.pop(),I=M.length;I--;){var k=M[I].split(/\s*:\s*/),N=k[0].trim(),H=k[1].trim();N==="stop-color"?o=H:N==="stop-opacity"&&(C=H)}}return o||(o=n.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=n.getAttribute("stop-opacity")),o=new h.Color(o),m=o.getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=m*e,{offset:v,color:o.toRgb(),opacity:C}}function i(n){return{x1:n.getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}}function f(n){return{x1:n.getAttribute("fx")||n.getAttribute("cx")||"50%",y1:n.getAttribute("fy")||n.getAttribute("cy")||"50%",r1:0,x2:n.getAttribute("cx")||"50%",y2:n.getAttribute("cy")||"50%",r2:n.getAttribute("r")||"50%"}}var u=h.util.object.clone;h.Gradient=h.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(n){n||(n={}),n.coords||(n.coords={});var e,s=this;Object.keys(n).forEach(function(v){s[v]=n[v]}),this.id?this.id+="_"+h.Object.__uid++:this.id=h.Object.__uid++,e={x1:n.coords.x1||0,y1:n.coords.y1||0,x2:n.coords.x2||0,y2:n.coords.y2||0},this.type==="radial"&&(e.r1=n.coords.r1||0,e.r2=n.coords.r2||0),this.coords=e,this.colorStops=n.colorStops.slice()},addColorStop:function(n){for(var e in n){var s=new h.Color(n[e]);this.colorStops.push({offset:parseFloat(e),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(n){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return h.util.populateWithProperties(this,e,n),e},toSVG:function(n,m){var s=u(this.coords,!0),v,o,m=m||{},C,I,M=u(this.colorStops,!0),k=s.r1>s.r2,N=this.gradientTransform?this.gradientTransform.concat():h.iMatrix.concat(),H=-this.offsetX,F=-this.offsetY,W=!!m.additionalTransform,it=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(M.sort(function(B,St){return B.offset-St.offset}),it==="objectBoundingBox"?(H/=n.width,F/=n.height):(H+=n.width/2,F+=n.height/2),n.type==="path"&&this.gradientUnits!=="percentage"&&(H-=n.pathOffset.x,F-=n.pathOffset.y),N[4]-=H,N[5]-=F,I='id="SVGID_'+this.id+'" gradientUnits="'+it+'"',I+=' gradientTransform="'+(W?m.additionalTransform+" ":"")+h.util.matrixToSVG(N)+'" ',this.type==="linear"?C=["<linearGradient ",I,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(C=["<radialGradient ",I,' cx="',k?s.x1:s.x2,'" cy="',k?s.y1:s.y2,'" r="',k?s.r1:s.r2,'" fx="',k?s.x2:s.x1,'" fy="',k?s.y2:s.y1,`">
`]),this.type==="radial"){if(k)for(M=M.concat(),M.reverse(),v=0,o=M.length;v<o;v++)M[v].offset=1-M[v].offset;var V=Math.min(s.r1,s.r2);if(V>0){var gt=Math.max(s.r1,s.r2),J=V/gt;for(v=0,o=M.length;v<o;v++)M[v].offset+=J*(1-M[v].offset)}}for(v=0,o=M.length;v<o;v++){var mt=M[v];C.push("<stop ",'offset="',mt.offset*100+"%",'" style="stop-color:',mt.color,typeof mt.opacity<"u"?";stop-opacity: "+mt.opacity:";",`"/>
`)}return C.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),C.join("")},toLive:function(n){var e,s=h.util.object.clone(this.coords),v,o;if(this.type){for(this.type==="linear"?e=n.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(e=n.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),v=0,o=this.colorStops.length;v<o;v++){var m=this.colorStops[v].color,C=this.colorStops[v].opacity,I=this.colorStops[v].offset;typeof C<"u"&&(m=new h.Color(m).setAlpha(C).toRgba()),e.addColorStop(I,m)}return e}}}),h.util.object.extend(h.Gradient,{fromElement:function(n,e,s,v){var o=parseFloat(s)/(/%$/.test(s)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var m=n.getElementsByTagName("stop"),C,I=n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",M=n.getAttribute("gradientTransform")||"",k=[],N,H,F=0,W=0,it;for(n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?(C="linear",N=i(n)):(C="radial",N=f(n)),H=m.length;H--;)k.push(g(m[H],o));it=h.parseTransformAttribute(M),t(e,N,v,I),I==="pixels"&&(F=-e.left,W=-e.top);var V=new h.Gradient({id:n.getAttribute("id"),type:C,coords:N,colorStops:k,gradientUnits:I,gradientTransform:it,offsetX:F,offsetY:W});return V}});function t(n,e,s,v){var o,m;Object.keys(e).forEach(function(C){o=e[C],o==="Infinity"?m=1:o==="-Infinity"?m=0:(m=parseFloat(e[C],10),typeof o=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(m*=.01,v==="pixels"&&((C==="x1"||C==="x2"||C==="r2")&&(m*=s.viewBoxWidth||s.width),(C==="y1"||C==="y2")&&(m*=s.viewBoxHeight||s.height)))),e[C]=m})}})(),(function(){var g=h.util.toFixed;h.Pattern=h.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,f){if(i||(i={}),this.id=h.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){f&&f(this);return}else{var u=this;this.source=h.util.createImage(),h.util.loadImage(i.source,function(t,n){u.source=t,f&&f(u,n)},null,this.crossOrigin)}},toObject:function(i){var f=h.Object.NUM_FRACTION_DIGITS,u,t;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),t={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,f),offsetY:g(this.offsetY,f),patternTransform:this.patternTransform?this.patternTransform.concat():null},h.util.populateWithProperties(this,t,i),t},toSVG:function(i){var f=typeof this.source=="function"?this.source():this.source,u=f.width/i.width,t=f.height/i.height,n=this.offsetX/i.width,e=this.offsetY/i.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(t=1,e&&(t+=Math.abs(e))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,n&&(u+=Math.abs(n))),f.src?s=f.src:f.toDataURL&&(s=f.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+e+'" width="'+u+'" height="'+t+`">
<image x="0" y="0" width="`+f.width+'" height="'+f.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(i){for(var f in i)this[f]=i[f]},toLive:function(i){var f=this.source;return!f||typeof f.src<"u"&&(!f.complete||f.naturalWidth===0||f.naturalHeight===0)?"":i.createPattern(f,this.repeat)}})})(),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var t in u)this[t]=u[t];this.id=i.Object.__uid++},_parseShadow:function(u){var t=u.trim(),n=i.Shadow.reOffsetsAndBlur.exec(t)||[],e=t.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:e.trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var t=40,n=40,e=i.Object.NUM_FRACTION_DIGITS,s=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-u.angle)),v=20,o=new i.Color(this.color);return u.width&&u.height&&(t=f((Math.abs(s.x)+this.blur)/u.width,e)*100+v,n=f((Math.abs(s.y)+this.blur)/u.height,e)*100+v),u.flipX&&(s.x*=-1),u.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+t+'%" width="'+(100+2*t)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+f(this.blur?this.blur/2:0,e)+`"></feGaussianBlur>
	<feOffset dx="`+f(s.x,e)+'" dy="'+f(s.y,e)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+o.toRgb()+'" flood-opacity="'+o.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},t=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(n){this[n]!==t[n]&&(u[n]=this[n])},this),u}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/})(b),(function(){if(h.StaticCanvas){h.warn("fabric.StaticCanvas is already defined.");return}var g=h.util.object.extend,i=h.util.getElementOffset,f=h.util.removeFromArray,u=h.util.toFixed,t=h.util.transformPoint,n=h.util.invertTransform,e=h.util.getNodeCanvas,s=h.util.createCanvasElement,v=new Error("Could not initialize `canvas` element");h.StaticCanvas=h.util.createClass(h.CommonMethods,{initialize:function(o,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:h.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,m){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,C),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,C),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,C),m.overlayColor&&this.setOverlayColor(m.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return h.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?h.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=h.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,m,C){m.setAttribute("width",this.width*o),m.setAttribute("height",this.height*o),C.scale(o,o)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(o,m,C){return this.__setBgOverlayImage("overlayImage",o,m,C)},setBackgroundImage:function(o,m,C){return this.__setBgOverlayImage("backgroundImage",o,m,C)},setOverlayColor:function(o,m){return this.__setBgOverlayColor("overlayColor",o,m)},setBackgroundColor:function(o,m){return this.__setBgOverlayColor("backgroundColor",o,m)},__setBgOverlayImage:function(o,m,C,I){return typeof m=="string"?h.util.loadImage(m,function(M,k){if(M){var N=new h.Image(M,I);this[o]=N,N.canvas=this}C&&C(M,k)},this,I&&I.crossOrigin):(I&&m.setOptions(I),this[o]=m,m&&(m.canvas=this),C&&C(m,!1)),this},__setBgOverlayColor:function(o,m,C){return this[o]=m,this._initGradient(m,o),this._initPattern(m,o,C),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),typeof o.getContext>"u"))throw v;return o},_initOptions:function(o){var m=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){o&&o.getContext?this.lowerCanvasEl=o:this.lowerCanvasEl=h.util.getById(o)||this._createCanvasElement(),h.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,m){return this.setDimensions({width:o},m)},setHeight:function(o,m){return this.setDimensions({height:o},m)},setDimensions:function(o,m){var C;m=m||{};for(var I in o)C=o[I],m.cssOnly||(this._setBackstoreDimension(I,o[I]),C+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(I,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,m){return this.lowerCanvasEl[o]=m,this.upperCanvasEl&&(this.upperCanvasEl[o]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=m),this[o]=m,this},_setCssDimension:function(o,m){return this.lowerCanvasEl.style[o]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=m),this.wrapperEl&&(this.wrapperEl.style[o]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var m=this._activeObject,C=this.backgroundImage,I=this.overlayImage,M,k,N;for(this.viewportTransform=o,k=0,N=this._objects.length;k<N;k++)M=this._objects[k],M.group||M.setCoords(!0);return m&&m.setCoords(),C&&C.setCoords(!0),I&&I.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,m){var C=o,I=this.viewportTransform.slice(0);o=t(o,n(this.viewportTransform)),I[0]=m,I[3]=m;var M=t(o,I);return I[4]+=C.x-M.x,I[5]+=C.y-M.y,this.setViewportTransform(I)},setZoom:function(o){return this.zoomToPoint(new h.Point(0,0),o),this},absolutePan:function(o){var m=this.viewportTransform.slice(0);return m[4]=-o.x,m[5]=-o.y,this.setViewportTransform(m)},relativePan:function(o){return this.absolutePan(new h.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var o=this.contextContainer;return this.renderCanvas(o,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=h.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},m=this.width,C=this.height,I=n(this.viewportTransform);return o.tl=t({x:0,y:0},I),o.br=t({x:m,y:C},I),o.tr=new h.Point(o.br.x,o.tl.y),o.bl=new h.Point(o.tl.x,o.br.y),this.vptCoords=o,o},cancelRequestedRender:function(){this.isRendering&&(h.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,m){var C=this.viewportTransform,I=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),h.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(o,m),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),I&&(I.canvas=this,I.shouldCache(),I._transformDone=!0,I.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var m=this.viewportTransform,C=this.clipPath;o.save(),o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),o.globalCompositeOperation="destination-in",C.transform(o),o.scale(1/C.zoomX,1/C.zoomY),o.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),o.restore()},_renderObjects:function(o,m){var C,I;for(C=0,I=m.length;C<I;++C)m[C]&&m[C].render(o)},_renderBackgroundOrOverlay:function(o,m){var C=this[m+"Color"],I=this[m+"Image"],M=this.viewportTransform,k=this[m+"Vpt"];if(!(!C&&!I)){if(C){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=C.toLive?C.toLive(o,this):C,k&&o.transform(M[0],M[1],M[2],M[3],M[4],M[5]),o.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var N=C.gradientTransform||C.patternTransform;N&&o.transform(N[0],N[1],N[2],N[3],N[4],N[5]),o.fill(),o.restore()}I&&(o.save(),k&&o.transform(M[0],M[1],M[2],M[3],M[4],M[5]),I.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(o){return this._centerObject(o,new h.Point(this.getCenter().left,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new h.Point(o.getCenterPoint().x,this.getCenter().top))},centerObject:function(o){var m=this.getCenter();return this._centerObject(o,new h.Point(m.left,m.top))},viewportCenterObject:function(o){var m=this.getVpCenter();return this._centerObject(o,m)},viewportCenterObjectH:function(o){var m=this.getVpCenter();return this._centerObject(o,new h.Point(m.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var m=this.getVpCenter();return this._centerObject(o,new h.Point(o.getCenterPoint().x,m.y))},getVpCenter:function(){var o=this.getCenter(),m=n(this.viewportTransform);return t({x:o.left,y:o.top},m)},_centerObject:function(o,m){return o.setPositionByOrigin(m,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,m){var C=this.clipPath,I={version:h.version,objects:this._toObjects(o,m)};return C&&!C.excludeFromExport&&(I.clipPath=this._toObject(this.clipPath,o,m)),g(I,this.__serializeBgOverlay(o,m)),h.util.populateWithProperties(this,I,m),I},_toObjects:function(o,m){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,o,m)},this)},_toObject:function(o,m,C){var I;this.includeDefaultValues||(I=o.includeDefaultValues,o.includeDefaultValues=!1);var M=o[m](C);return this.includeDefaultValues||(o.includeDefaultValues=I),M},__serializeBgOverlay:function(o,m){var C={},I=this.backgroundImage,M=this.overlayImage,k=this.backgroundColor,N=this.overlayColor;return k&&k.toObject?k.excludeFromExport||(C.background=k.toObject(m)):k&&(C.background=k),N&&N.toObject?N.excludeFromExport||(C.overlay=N.toObject(m)):N&&(C.overlay=N),I&&!I.excludeFromExport&&(C.backgroundImage=this._toObject(I,o,m)),M&&!M.excludeFromExport&&(C.overlayImage=this._toObject(M,o,m)),C},svgViewportTransformation:!0,toSVG:function(o,m){o||(o={}),o.reviver=m;var C=[];return this._setSVGPreamble(C,o),this._setSVGHeader(C,o),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",m),this._setSVGObjects(C,m),this.clipPath&&C.push(`</g>
`),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",m),C.push("</svg>"),C.join("")},_setSVGPreamble:function(o,m){m.suppressPreamble||o.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(o,m){var C=m.width||this.width,I=m.height||this.height,M,k='viewBox="0 0 '+this.width+" "+this.height+'" ',N=h.Object.NUM_FRACTION_DIGITS;m.viewBox?k='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(M=this.viewportTransform,k='viewBox="'+u(-M[4]/M[0],N)+" "+u(-M[5]/M[3],N)+" "+u(this.width/M[0],N)+" "+u(this.height/M[3],N)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',I,'" ',k,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",h.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(o){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+h.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(o.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var o=this,m=["background","overlay"].map(function(C){var I=o[C+"Color"];if(I&&I.toLive){var M=o[C+"Vpt"],k=o.viewportTransform,N={width:o.width/(M?k[0]:1),height:o.height/(M?k[3]:1)};return I.toSVG(N,{additionalTransform:M?h.util.matrixToSVG(k):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var o="",m={},C,I,M,k,N,H,F,W,it,V=h.fontPaths,gt=[];for(this._objects.forEach(function mt(B){gt.push(B),B._objects&&B._objects.forEach(mt)}),W=0,it=gt.length;W<it;W++)if(C=gt[W],I=C.fontFamily,!(C.type.indexOf("text")===-1||m[I]||!V[I])&&(m[I]=!0,!!C.styles)){M=C.styles;for(N in M){k=M[N];for(F in k)H=k[F],I=H.fontFamily,!m[I]&&V[I]&&(m[I]=!0)}}for(var J in m)o+=[`		@font-face {
`,"			font-family: '",J,`';
`,"			src: url('",V[J],`');
`,`		}
`].join("");return o&&(o=['	<style type="text/css">',`<![CDATA[
`,o,"]]>",`</style>
`].join("")),o},_setSVGObjects:function(o,m){var C,I,M,k=this._objects;for(I=0,M=k.length;I<M;I++)C=k[I],!C.excludeFromExport&&this._setSVGObject(o,C,m)},_setSVGObject:function(o,m,C){o.push(m.toSVG(C))},_setSVGBgOverlayImage:function(o,m,C){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&o.push(this[m].toSVG(C))},_setSVGBgOverlayColor:function(o,m){var C=this[m+"Color"],I=this.viewportTransform,M=this.width,k=this.height;if(C)if(C.toLive){var N=C.repeat,H=h.util.invertTransform(I),F=this[m+"Vpt"],W=F?h.util.matrixToSVG(H):"";o.push('<rect transform="'+W+" translate(",M/2,",",k/2,')"',' x="',C.offsetX-M/2,'" y="',C.offsetY-k/2,'" ','width="',N==="repeat-y"||N==="no-repeat"?C.source.width:M,'" height="',N==="repeat-x"||N==="no-repeat"?C.source.height:k,'" fill="url(#SVGID_'+C.id+')"',`></rect>
`)}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',`></rect>
`)},sendToBack:function(o){if(!o)return this;var m=this._activeObject,C,I,M;if(o===m&&o.type==="activeSelection")for(M=m._objects,C=M.length;C--;)I=M[C],f(this._objects,I),this._objects.unshift(I);else f(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var m=this._activeObject,C,I,M;if(o===m&&o.type==="activeSelection")for(M=m._objects,C=0;C<M.length;C++)I=M[C],f(this._objects,I),this._objects.push(I);else f(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,m){if(!o)return this;var C=this._activeObject,I,M,k,N,H,F=0;if(o===C&&o.type==="activeSelection")for(H=C._objects,I=0;I<H.length;I++)M=H[I],k=this._objects.indexOf(M),k>0+F&&(N=k-1,f(this._objects,M),this._objects.splice(N,0,M)),F++;else k=this._objects.indexOf(o),k!==0&&(N=this._findNewLowerIndex(o,k,m),f(this._objects,o),this._objects.splice(N,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,m,C){var I,M;if(C)for(I=m,M=m-1;M>=0;--M){var k=o.intersectsWithObject(this._objects[M])||o.isContainedWithinObject(this._objects[M])||this._objects[M].isContainedWithinObject(o);if(k){I=M;break}}else I=m-1;return I},bringForward:function(o,m){if(!o)return this;var C=this._activeObject,I,M,k,N,H,F=0;if(o===C&&o.type==="activeSelection")for(H=C._objects,I=H.length;I--;)M=H[I],k=this._objects.indexOf(M),k<this._objects.length-1-F&&(N=k+1,f(this._objects,M),this._objects.splice(N,0,M)),F++;else k=this._objects.indexOf(o),k!==this._objects.length-1&&(N=this._findNewUpperIndex(o,k,m),f(this._objects,o),this._objects.splice(N,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,m,C){var I,M,k;if(C)for(I=m,M=m+1,k=this._objects.length;M<k;++M){var N=o.intersectsWithObject(this._objects[M])||o.isContainedWithinObject(this._objects[M])||this._objects[M].isContainedWithinObject(o);if(N){I=M;break}}else I=m+1;return I},moveTo:function(o,m){return f(this._objects,o),this._objects.splice(m,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(h.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),h.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(h.StaticCanvas.prototype,h.Observable),g(h.StaticCanvas.prototype,h.Collection),g(h.StaticCanvas.prototype,h.DataURLExporter),g(h.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var m=s();if(!m||!m.getContext)return null;var C=m.getContext("2d");if(!C)return null;switch(o){case"setLineDash":return typeof C.setLineDash<"u";default:return null}}}),h.StaticCanvas.prototype.toJSON=h.StaticCanvas.prototype.toObject,h.isLikelyNode&&(h.StaticCanvas.prototype.createPNGStream=function(){var o=e(this.lowerCanvasEl);return o&&o.createPNGStream()},h.StaticCanvas.prototype.createJPEGStream=function(o){var m=e(this.lowerCanvasEl);return m&&m.createJPEGStream(o)})})(),h.BaseBrush=h.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var g=this.canvas.contextTop;g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var i=this.canvas.viewportTransform;g.save(),g.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var g=this.canvas,i=this.shadow,f=g.contextTop,u=g.getZoom();g&&g._isRetinaScaling()&&(u*=h.devicePixelRatio),f.shadowColor=i.color,f.shadowBlur=i.blur*u,f.shadowOffsetX=i.offsetX*u,f.shadowOffsetY=i.offsetY*u}},needsFullRender:function(){var g=new h.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),(function(){h.PencilBrush=h.util.createClass(h.BaseBrush,{decimate:.4,initialize:function(g){this.canvas=g,this._points=[]},_drawSegment:function(g,i,f){var u=i.midPointFrom(f);return g.quadraticCurveTo(i.x,i.y,u.x,u.y),u},onMouseDown:function(g,i){this.canvas._isMainEvent(i.e)&&(this._prepareForDrawing(g),this._captureDrawingPath(g),this._render())},onMouseMove:function(g,i){if(this.canvas._isMainEvent(i.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var f=this._points,u=f.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,f[u-2],f[u-1],!0),t.stroke(),t.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(g){var i=new h.Point(g.x,g.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(g){var i=new h.Point(g.x,g.y);return this._addPoint(i)},_render:function(){var g=this.canvas.contextTop,i,f,u=this._points[0],t=this._points[1];if(this._saveAndTransform(g),g.beginPath(),this._points.length===2&&u.x===t.x&&u.y===t.y){var n=this.width/1e3;u=new h.Point(u.x,u.y),t=new h.Point(t.x,t.y),u.x-=n,t.x+=n}for(g.moveTo(u.x,u.y),i=1,f=this._points.length;i<f;i++)this._drawSegment(g,u,t),u=this._points[i],t=this._points[i+1];g.lineTo(u.x,u.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var i=this.width/1e3;return h.util.getSmoothPathFromPoints(g,i)},_isEmptySVGPath:function(g){var i=h.util.joinPath(g);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var i=new h.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new h.Shadow(this.shadow)),i},decimatePoints:function(g,i){if(g.length<=2)return g;var f=this.canvas.getZoom(),u=Math.pow(i/f,2),t,n=g.length-1,e=g[0],s=[e],v;for(t=1;t<n-1;t++)v=Math.pow(e.x-g[t].x,2)+Math.pow(e.y-g[t].y,2),v>=u&&(e=g[t],s.push(e));return s.push(g[n]),s},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var f=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.requestRenderAll(),f.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:f})}})})(),h.CircleBrush=h.util.createClass(h.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var i=this.addPoint(g),f=this.canvas.contextTop;this._saveAndTransform(f),this.dot(f,i),f.restore()},dot:function(g,i){g.fillStyle=i.fill,g.beginPath(),g.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,i,f,u=this.points;for(this._saveAndTransform(g),i=0,f=u.length;i<f;i++)this.dot(g,u[i]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,i,f;this.canvas.renderOnAddRemove=!1;var u=[];for(i=0,f=this.points.length;i<f;i++){var t=this.points[i],n=new h.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(n.shadow=new h.Shadow(this.shadow)),u.push(n)}var e=new h.Group(u);e.canvas=this.canvas,this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.fire("path:created",{path:e}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var i=new h.Point(g.x,g.y),f=h.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new h.Color(this.color).setAlpha(h.util.getRandomInt(0,100)/100).toRgba();return i.radius=f,i.fill=u,this.points.push(i),i}}),h.SprayBrush=h.util.createClass(h.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],f=0,u=this.sprayChunks.length;f<u;f++)for(var t=this.sprayChunks[f],n=0,e=t.length;n<e;n++){var s=new h.Rect({width:t[n].width,height:t[n].width,left:t[n].x+1,top:t[n].y+1,originX:"center",originY:"center",fill:this.color});i.push(s)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var v=new h.Group(i);this.shadow&&v.set("shadow",new h.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:v}),this.canvas.add(v),this.canvas.fire("path:created",{path:v}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var i={},f,u,t;for(u=0,t=g.length;u<t;u++)f=g[u].left+""+g[u].top,i[f]||(i[f]=g[u]);var n=[];for(f in i)n.push(i[f]);return n},render:function(g){var i=this.canvas.contextTop,f,u;for(i.fillStyle=this.color,this._saveAndTransform(i),f=0,u=g.length;f<u;f++){var t=g[f];typeof t.opacity<"u"&&(i.globalAlpha=t.opacity),i.fillRect(t.x,t.y,t.width,t.width)}i.restore()},_render:function(){var g=this.canvas.contextTop,i,f;for(g.fillStyle=this.color,this._saveAndTransform(g),i=0,f=this.sprayChunks.length;i<f;i++)this.render(this.sprayChunks[i]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var i,f,u,t=this.width/2,n;for(n=0;n<this.density;n++){i=h.util.getRandomInt(g.x-t,g.x+t),f=h.util.getRandomInt(g.y-t,g.y+t),this.dotWidthVariance?u=h.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var e=new h.Point(i,f);e.width=u,this.randomOpacity&&(e.opacity=h.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(e)}this.sprayChunks.push(this.sprayChunkPoints)}}),h.PatternBrush=h.util.createClass(h.PencilBrush,{getPatternSrc:function(){var g=20,i=5,f=h.util.createCanvasElement(),u=f.getContext("2d");return f.width=f.height=g+i,u.fillStyle=this.color,u.beginPath(),u.arc(g/2,g/2,g/2,0,Math.PI*2,!1),u.closePath(),u.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(g){var i=this.callSuper("createPath",g),f=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new h.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y}),i}}),(function(){var g=h.util.getPointer,i=h.util.degreesToRadians,f=h.util.isTouchEvent;h.Canvas=h.util.createClass(h.StaticCanvas,{initialize:function(t,n){n||(n={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,n),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=h.PencilBrush&&new h.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t=this.getActiveObjects(),n,e,s;if(t.length>0&&!this.preserveObjectStacking){e=[],s=[];for(var v=0,o=this._objects.length;v<o;v++)n=this._objects[v],t.indexOf(n)===-1?e.push(n):s.push(n);t.length>1&&(this._activeObject._objects=s),e.push.apply(e,s)}else e=this._objects;return e},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,n){var e=t.calcTransformMatrix(),s=h.util.invertTransform(e),v=this.restorePointerVpt(n);return h.util.transformPoint(v,s)},isTargetTransparent:function(t,n,e){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var s=this._normalizePointer(t,{x:n,y:e}),v=Math.max(t.cacheTranslationX+s.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+s.y*t.zoomY,0),M=h.util.isTransparent(t._cacheContext,Math.round(v),Math.round(o),this.targetFindTolerance);return M}var m=this.contextCache,C=t.selectionBackgroundColor,I=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(I[0],I[1],I[2],I[3],I[4],I[5]),t.render(m),m.restore(),t.selectionBackgroundColor=C;var M=h.util.isTransparent(m,n,e,this.targetFindTolerance);return M},_isSelectionKeyPressed:function(t){var n=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?n=!!this.selectionKey.find(function(e){return t[e]===!0}):n=t[this.selectionKey],n},_shouldClearSelection:function(t,n){var e=this.getActiveObjects(),s=this._activeObject;return!n||n&&s&&e.length>1&&e.indexOf(n)===-1&&s!==n&&!this._isSelectionKeyPressed(t)||n&&!n.evented||n&&!n.selectable&&s&&s!==n},_shouldCenterTransform:function(t,n,e){if(t){var s;return n==="scale"||n==="scaleX"||n==="scaleY"||n==="resizing"?s=this.centeredScaling||t.centeredScaling:n==="rotate"&&(s=this.centeredRotation||t.centeredRotation),s?!e:e}},_getOriginFromCorner:function(t,n){var e={x:t.originX,y:t.originY};return n==="ml"||n==="tl"||n==="bl"?e.x="right":(n==="mr"||n==="tr"||n==="br")&&(e.x="left"),n==="tl"||n==="mt"||n==="tr"?e.y="bottom":(n==="bl"||n==="mb"||n==="br")&&(e.y="top"),e},_getActionFromCorner:function(t,n,e,s){if(!n||!t)return"drag";var v=s.controls[n];return v.getActionName(e,v,s)},_setupCurrentTransform:function(t,n,e){if(n){var s=this.getPointer(t),v=n.__corner,o=n.controls[v],m=e&&v?o.getActionHandler(t,n,o):h.controlsUtils.dragHandler,C=this._getActionFromCorner(e,v,t,n),I=this._getOriginFromCorner(n,v),M=t[this.centeredKey],k={target:n,action:C,actionHandler:m,corner:v,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:s.x-n.left,offsetY:s.y-n.top,originX:I.x,originY:I.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:i(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:M,original:h.util.saveObjectTransform(n)};this._shouldCenterTransform(n,C,M)&&(k.originX="center",k.originY="center"),k.original.originX=I.x,k.original.originY=I.y,this._currentTransform=k,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var n=this._groupSelector,e=new h.Point(n.ex,n.ey),s=h.util.transformPoint(e,this.viewportTransform),v=new h.Point(n.ex+n.left,n.ey+n.top),o=h.util.transformPoint(v,this.viewportTransform),m=Math.min(s.x,o.x),C=Math.min(s.y,o.y),I=Math.max(s.x,o.x),M=Math.max(s.y,o.y),k=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(m,C,I-m,M-C)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,m+=k,C+=k,I-=k,M-=k,h.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(m,C,I-m,M-C))},findTarget:function(t,n){if(!this.skipTargetFind){var e=!0,s=this.getPointer(t,e),v=this._activeObject,o=this.getActiveObjects(),m,C,I=f(t),M=o.length>1&&!n||o.length===1;if(this.targets=[],M&&v._findTargetCorner(s,I)||o.length>1&&!n&&v===this._searchPossibleTargets([v],s))return v;if(o.length===1&&v===this._searchPossibleTargets([v],s))if(this.preserveObjectStacking)m=v,C=this.targets,this.targets=[];else return v;var k=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&k&&m&&k!==m&&(k=m,this.targets=C),k}},_checkTarget:function(t,n,e){if(n&&n.visible&&n.evented&&n.containsPoint(t))if((this.perPixelTargetFind||n.perPixelTargetFind)&&!n.isEditing){var s=this.isTargetTransparent(n,e.x,e.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(t,n){for(var e,s=t.length,v;s--;){var o=t[s],m=o.group?this._normalizePointer(o.group,n):n;if(this._checkTarget(m,o,n)){e=t[s],e.subTargetCheck&&e instanceof h.Group&&(v=this._searchPossibleTargets(e._objects,n),v&&this.targets.push(v));break}}return e},restorePointerVpt:function(t){return h.util.transformPoint(t,h.util.invertTransform(this.viewportTransform))},getPointer:function(t,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var e=g(t),s=this.upperCanvasEl,v=s.getBoundingClientRect(),o=v.width||0,m=v.height||0,C;(!o||!m)&&("top"in v&&"bottom"in v&&(m=Math.abs(v.top-v.bottom)),"right"in v&&"left"in v&&(o=Math.abs(v.right-v.left))),this.calcOffset(),e.x=e.x-this._offset.left,e.y=e.y-this._offset.top,n||(e=this.restorePointerVpt(e));var I=this.getRetinaScaling();return I!==1&&(e.x/=I,e.y/=I),o===0||m===0?C={width:1,height:1}:C={width:s.width/o,height:s.height/m},{x:e.x*C.width,y:e.y*C.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),n=this.lowerCanvasEl,e=this.upperCanvasEl;e?e.className="":(e=this._createCanvasElement(),this.upperCanvasEl=e),h.util.addClass(e,"upper-canvas "+t),this.wrapperEl.appendChild(e),this._copyCanvasStyle(n,e),this._applyCanvasStyle(e),this.contextTop=e.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=h.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),h.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),h.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var n=this.width||t.width,e=this.height||t.height;h.util.setStyle(t,{position:"absolute",width:n+"px",height:e+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=n,t.height=e,h.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,n){n.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?t.type==="activeSelection"&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,n){var e=!1,s=this.getActiveObjects(),v=[],o=[];t.forEach(function(m){s.indexOf(m)===-1&&(e=!0,m.fire("deselected",{e:n,target:m}),o.push(m))}),s.forEach(function(m){t.indexOf(m)===-1&&(e=!0,m.fire("selected",{e:n,target:m}),v.push(m))}),t.length>0&&s.length>0?e&&this.fire("selection:updated",{e:n,selected:v,deselected:o,updated:v[0]||o[0],target:this._activeObject}):s.length>0?this.fire("selection:created",{e:n,selected:v,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e:n,deselected:o})},setActiveObject:function(t,n){var e=this.getActiveObjects();return this._setActiveObject(t,n),this._fireSelectionEvents(e,n),this},_setActiveObject:function(t,n){return this._activeObject===t||!this._discardActiveObject(n,t)||t.onSelect({e:n})?!1:(this._activeObject=t,!0)},_discardActiveObject:function(t,n){var e=this._activeObject;if(e){if(e.onDeselect({e:t,object:n}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var n=this.getActiveObjects(),e=this.getActiveObject();return n.length&&this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(n,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(n){h.util.cleanUpJsdomNode(this[n]),this[n]=void 0}).bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,h.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var n=this._activeObject;n&&n._renderControls(t)},_toObject:function(t,n,e){var s=this._realizeGroupTransformOnObject(t),v=this.callSuper("_toObject",t,n,e);return this._unwindGroupTransformOnObject(t,s),v},_realizeGroupTransformOnObject:function(t){if(t.group&&t.group.type==="activeSelection"&&this._activeObject===t.group){var n=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],e={};return n.forEach(function(s){e[s]=t[s]}),h.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}else return null},_unwindGroupTransformOnObject:function(t,n){n&&t.set(n)},_setSVGObject:function(t,n,e){var s=this._realizeGroupTransformOnObject(n);this.callSuper("_setSVGObject",t,n,e),this._unwindGroupTransformOnObject(n,s)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),h.StaticCanvas.prototype.setViewportTransform.call(this,t)}});for(var u in h.StaticCanvas)u!=="prototype"&&(h.Canvas[u]=h.StaticCanvas[u])})(),(function(){var g=h.util.addListener,i=h.util.removeListener,f=3,u=2,t=1,n={passive:!1};function e(s,v){return s.button&&s.button===v-1}h.util.object.extend(h.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,v){var o=this.upperCanvasEl,m=this._getEventPrefix();s(h.window,"resize",this._onResize),s(o,m+"down",this._onMouseDown),s(o,m+"move",this._onMouseMove,n),s(o,m+"out",this._onMouseOut),s(o,m+"enter",this._onMouseEnter),s(o,"wheel",this._onMouseWheel),s(o,"contextmenu",this._onContextMenu),s(o,"dblclick",this._onDoubleClick),s(o,"dragover",this._onDragOver),s(o,"dragenter",this._onDragEnter),s(o,"dragleave",this._onDragLeave),s(o,"drop",this._onDrop),this.enablePointerEvents||s(o,"touchstart",this._onTouchStart,n),typeof eventjs<"u"&&v in eventjs&&(eventjs[v](o,"gesture",this._onGesture),eventjs[v](o,"drag",this._onDrag),eventjs[v](o,"orientation",this._onOrientationChange),eventjs[v](o,"shake",this._onShake),eventjs[v](o,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var s=this._getEventPrefix();i(h.document,s+"up",this._onMouseUp),i(h.document,"touchend",this._onTouchEnd,n),i(h.document,s+"move",this._onMouseMove,n),i(h.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(s,v){this.__onTransformGesture&&this.__onTransformGesture(s,v)},_onDrag:function(s,v){this.__onDrag&&this.__onDrag(s,v)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var v=this._hoveredTarget;this.fire("mouse:out",{target:v,e:s}),this._hoveredTarget=null,v&&v.fire("mouseout",{e:s});var o=this;this._hoveredTargets.forEach(function(m){o.fire("mouse:out",{target:v,e:s}),m&&v.fire("mouseout",{e:s})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(m){m.isEditing&&m.hiddenTextarea.focus()})},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,v){this.__onOrientationChange&&this.__onOrientationChange(s,v)},_onShake:function(s,v){this.__onShake&&this.__onShake(s,v)},_onLongPress:function(s,v){this.__onLongPress&&this.__onLongPress(s,v)},_onDragOver:function(s){s.preventDefault();var v=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(v,s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var v=s.changedTouches;return v?v[0]&&v[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var v=this.upperCanvasEl,o=this._getEventPrefix();g(h.document,"touchend",this._onTouchEnd,n),g(h.document,"touchmove",this._onMouseMove,n),i(v,o+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var v=this.upperCanvasEl,o=this._getEventPrefix();i(v,o+"move",this._onMouseMove,n),g(h.document,o+"up",this._onMouseUp),g(h.document,o+"move",this._onMouseMove,n)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var v=this._getEventPrefix();i(h.document,"touchend",this._onTouchEnd,n),i(h.document,"touchmove",this._onMouseMove,n);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(o.upperCanvasEl,v+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var v=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(s)&&(i(h.document,o+"up",this._onMouseUp),i(h.document,o+"move",this._onMouseMove,n),g(v,o+"move",this._onMouseMove,n))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var v=this._activeObject;return!!v!=!!s||v&&s&&v!==s?!0:(v&&v.isEditing,!1)},__onMouseUp:function(s){var v,o=this._currentTransform,m=this._groupSelector,C=!1,I=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(s),v=this._target,this._handleEvent(s,"up:before"),e(s,f)){this.fireRightClick&&this._handleEvent(s,"up",f,I);return}if(e(s,u)){this.fireMiddleClick&&this._handleEvent(s,"up",u,I),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(this._isMainEvent(s)){if(o&&(this._finalizeCurrentTransform(s),C=o.actionPerformed),!I){var M=v===this._activeObject;this._maybeGroupObjects(s),C||(C=this._shouldRender(v)||!M&&v===this._activeObject)}if(v){if(v.selectable&&v!==this._activeObject&&v.activeOn==="up")this.setActiveObject(v,s),C=!0;else{var k=v._findTargetCorner(this.getPointer(s,!0),h.util.isTouchEvent(s)),N=v.controls[k],H=N&&N.getMouseUpHandler(s,v,N);if(H){var F=this.getPointer(s);H(s,o,F.x,F.y)}}v.isMoving=!1}this._setCursorFromEvent(s,v),this._handleEvent(s,"up",t,I),this._groupSelector=null,this._currentTransform=null,v&&(v.__corner=0),C?this.requestRenderAll():I||this.renderTop()}},_simpleEventHandler:function(s,v){var o=this.findTarget(v),m=this.targets,C={e:v,target:o,subTargets:m};if(this.fire(s,C),o&&o.fire(s,C),!m)return o;for(var I=0;I<m.length;I++)m[I].fire(s,C);return o},_handleEvent:function(s,v,o,m){var C=this._target,I=this.targets||[],M={e:s,target:C,subTargets:I,button:o||t,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};v==="up"&&(M.currentTarget=this.findTarget(s),M.currentSubTargets=this.targets),this.fire("mouse:"+v,M),C&&C.fire("mouse"+v,M);for(var k=0;k<I.length;k++)I[k].fire("mouse"+v,M)},_finalizeCurrentTransform:function(s){var v=this._currentTransform,o=v.target,m,C={e:s,target:o,transform:v,action:v.action};o._scaling&&(o._scaling=!1),o.setCoords(),(v.actionPerformed||this.stateful&&o.hasStateChanged())&&(v.actionPerformed&&(m=this._addEventOptions(C,v),this._fire(m,C)),this._fire("modified",C))},_addEventOptions:function(s,v){var o,m;switch(v.action){case"scaleX":o="scaled",m="x";break;case"scaleY":o="scaled",m="y";break;case"skewX":o="skewed",m="x";break;case"skewY":o="skewed",m="y";break;case"scale":o="scaled",m="equally";break;case"rotate":o="rotated";break;case"drag":o="moved";break}return s.by=m,o},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var v=this.getPointer(s);this.freeDrawingBrush.onMouseDown(v,{e:s,pointer:v}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var v=this.getPointer(s);this.freeDrawingBrush.onMouseMove(v,{e:s,pointer:v})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var v=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:v}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var v=this._target;if(e(s,f)){this.fireRightClick&&this._handleEvent(s,"down",f);return}if(e(s,u)){this.fireMiddleClick&&this._handleEvent(s,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(this._isMainEvent(s)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var m=this._shouldRender(v),C=this._shouldGroup(s,v);if(this._shouldClearSelection(s,v)?this.discardActiveObject(s):C&&(this._handleGrouping(s,v),v=this._activeObject),this.selection&&(!v||!v.selectable&&!v.isEditing&&v!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),v){var I=v===this._activeObject;v.selectable&&v.activeOn==="down"&&this.setActiveObject(v,s);var M=v._findTargetCorner(this.getPointer(s,!0),h.util.isTouchEvent(s));if(v.__corner=M,v===this._activeObject&&(M||!C)){this._setupCurrentTransform(s,v,I);var k=v.controls[M],o=this.getPointer(s),N=k&&k.getMouseDownHandler(s,v,k);N&&N(s,this._currentTransform,o.x,o.y)}}this._handleEvent(s,"down"),(m||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var v=this._currentTransform;this.stateful&&v.target.saveState(),this.fire("before:transform",{e:s,transform:v})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var v,o;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(this._isMainEvent(s)){var m=this._groupSelector;m?(o=this._absolutePointer,m.left=o.x-m.ex,m.top=o.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(v=this.findTarget(s)||null,this._setCursorFromEvent(s,v),this._fireOverOutEvents(v,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,v){var o=this._hoveredTarget,m=this._hoveredTargets,C=this.targets,I=Math.max(m.length,C.length);this.fireSyntheticInOutEvents(s,v,{oldTarget:o,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var M=0;M<I;M++)this.fireSyntheticInOutEvents(C[M],v,{oldTarget:m[M],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,v){var o=this._draggedoverTarget,m=this._hoveredTargets,C=this.targets,I=Math.max(m.length,C.length);this.fireSyntheticInOutEvents(s,v,{oldTarget:o,evtOut:"dragleave",evtIn:"dragenter"});for(var M=0;M<I;M++)this.fireSyntheticInOutEvents(C[M],v,{oldTarget:m[M],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,v,o){var m,C,I=o.oldTarget,M,k,N=I!==s,H=o.canvasEvtIn,F=o.canvasEvtOut;N&&(m={e:v,target:s,previousTarget:I},C={e:v,target:I,nextTarget:s}),k=s&&N,M=I&&N,M&&(F&&this.fire(F,C),I.fire(o.evtOut,C)),k&&(H&&this.fire(H,m),s.fire(o.evtIn,m))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var v=this.getPointer(s),o=this._currentTransform;o.reset=!1,o.shiftKey=s.shiftKey,o.altKey=s[this.centeredKey],this._performTransformAction(s,o,v),o.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,v,o){var m=o.x,C=o.y,I=v.action,M=!1,k=v.actionHandler;k&&(M=k(s,v,m,C)),I==="drag"&&M&&(v.target.isMoving=!0,this.setCursor(v.target.moveCursor||this.moveCursor)),v.actionPerformed=v.actionPerformed||M},_fire:h.controlsUtils.fireEvent,_setCursorFromEvent:function(s,v){if(!v)return this.setCursor(this.defaultCursor),!1;var o=v.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,C=(!m||!m.contains(v))&&v._findTargetCorner(this.getPointer(s,!0));C?this.setCursor(this.getCornerCursor(C,v,s)):(v.subTargetCheck&&this.targets.concat().reverse().map(function(I){o=I.hoverCursor||o}),this.setCursor(o))},getCornerCursor:function(s,v,o){var m=v.controls[s];return m.cursorStyleHandler(o,m,v)}})})(),(function(){var g=Math.min,i=Math.max;h.util.object.extend(h.Canvas.prototype,{_shouldGroup:function(f,u){var t=this._activeObject;return t&&this._isSelectionKeyPressed(f)&&u&&u.selectable&&this.selection&&(t!==u||t.type==="activeSelection")&&!u.onSelect({e:f})},_handleGrouping:function(f,u){var t=this._activeObject;t.__corner||u===t&&(u=this.findTarget(f,!0),!u||!u.selectable)||(t&&t.type==="activeSelection"?this._updateActiveSelection(u,f):this._createActiveSelection(u,f))},_updateActiveSelection:function(f,u){var t=this._activeObject,n=t._objects.slice(0);t.contains(f)?(t.removeWithUpdate(f),this._hoveredTarget=f,this._hoveredTargets=this.targets.concat(),t.size()===1&&this._setActiveObject(t.item(0),u)):(t.addWithUpdate(f),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,u)},_createActiveSelection:function(f,u){var t=this.getActiveObjects(),n=this._createGroup(f);this._hoveredTarget=n,this._setActiveObject(n,u),this._fireSelectionEvents(t,u)},_createGroup:function(f){var u=this._objects,t=u.indexOf(this._activeObject)<u.indexOf(f),n=t?[this._activeObject,f]:[f,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new h.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(f){var u=this._collectObjects(f),t;u.length===1?this.setActiveObject(u[0],f):u.length>1&&(t=new h.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(t,f))},_collectObjects:function(f){for(var u=[],t,n=this._groupSelector.ex,e=this._groupSelector.ey,s=n+this._groupSelector.left,v=e+this._groupSelector.top,o=new h.Point(g(n,s),g(e,v)),m=new h.Point(i(n,s),i(e,v)),C=!this.selectionFullyContained,I=n===s&&e===v,M=this._objects.length;M--&&(t=this._objects[M],!(!(!t||!t.selectable||!t.visible)&&(C&&t.intersectsWithRect(o,m,!0)||t.isContainedWithinRect(o,m,!0)||C&&t.containsPoint(o,null,!0)||C&&t.containsPoint(m,null,!0))&&(u.push(t),I))););return u.length>1&&(u=u.filter(function(k){return!k.onSelect({e:f})})),u},_maybeGroupObjects:function(f){this.selection&&this._groupSelector&&this._groupSelectedObjects(f),this.setCursor(this.defaultCursor),this._groupSelector=null}})})(),(function(){h.util.object.extend(h.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var i=g.format||"png",f=g.quality||1,u=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(u,g);return h.util.toDataURL(t,i,f)},toCanvasElement:function(g,i){g=g||1,i=i||{};var f=(i.width||this.width)*g,u=(i.height||this.height)*g,t=this.getZoom(),n=this.width,e=this.height,s=t*g,v=this.viewportTransform,o=(v[4]-(i.left||0))*g,m=(v[5]-(i.top||0))*g,C=this.interactive,I=[s,0,0,s,o,m],M=this.enableRetinaScaling,k=h.util.createCanvasElement(),N=this.contextTop;return k.width=f,k.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=I,this.width=f,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(k.getContext("2d"),this._objects),this.viewportTransform=v,this.width=n,this.height=e,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=M,this.contextTop=N,k}})})(),h.util.object.extend(h.StaticCanvas.prototype,{loadFromJSON:function(g,i,f){if(g){var u=typeof g=="string"?JSON.parse(g):h.util.object.clone(g),t=this,n=u.clipPath,e=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(s){t.clear(),t._setBgOverlay(u,function(){n?t._enlivenObjects([n],function(v){t.clipPath=v[0],t.__setupCanvas.call(t,u,s,e,i)}):t.__setupCanvas.call(t,u,s,e,i)})},f),this}},__setupCanvas:function(g,i,f,u){var t=this;i.forEach(function(n,e){t.insertAt(n,e)}),this.renderOnAddRemove=f,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),u&&u()},_setBgOverlay:function(g,i){var f={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){i&&i();return}var u=function(){f.backgroundImage&&f.overlayImage&&f.backgroundColor&&f.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",g.backgroundImage,f,u),this.__setBgOverlay("overlayImage",g.overlayImage,f,u),this.__setBgOverlay("backgroundColor",g.background,f,u),this.__setBgOverlay("overlayColor",g.overlay,f,u)},__setBgOverlay:function(g,i,f,u){var t=this;if(!i){f[g]=!0,u&&u();return}g==="backgroundImage"||g==="overlayImage"?h.util.enlivenObjects([i],function(n){t[g]=n[0],f[g]=!0,u&&u()}):this["set"+h.util.string.capitalize(g,!0)](i,function(){f[g]=!0,u&&u()})},_enlivenObjects:function(g,i,f){if(!g||g.length===0){i&&i([]);return}h.util.enlivenObjects(g,function(u){i&&i(u)},null,f)},_toDataURL:function(g,i){this.clone(function(f){i(f.toDataURL(g))})},_toDataURLWithMultiplier:function(g,i,f){this.clone(function(u){f(u.toDataURLWithMultiplier(g,i))})},clone:function(g,i){var f=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(u){u.loadFromJSON(f,function(){g&&g(u)})})},cloneWithoutData:function(g){var i=h.util.createCanvasElement();i.width=this.width,i.height=this.height;var f=new h.Canvas(i);this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),g&&g(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):g&&g(f)}}),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.util.object.clone,t=i.util.toFixed,n=i.util.string.capitalize,e=i.util.degreesToRadians,s=!i.isLikelyNode,v=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(o){o&&this.setOptions(o)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(o){var m=i.perfLimitSizeTotal,C=o.width,I=o.height,M=i.maxCacheSideLimit,k=i.minCacheSideLimit;if(C<=M&&I<=M&&C*I<=m)return C<k&&(o.width=k),I<k&&(o.height=k),o;var N=C/I,H=i.util.limitDimsByArea(N,m),F=i.util.capValue,W=F(k,H.x,M),it=F(k,H.y,M);return C>W&&(o.zoomX/=C/W,o.width=W,o.capped=!0),I>it&&(o.zoomY/=I/it,o.height=it,o.capped=!0),o},_getCacheCanvasDimensions:function(){var o=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),C=m.x*o.scaleX/this.scaleX,I=m.y*o.scaleY/this.scaleY;return{width:C+v,height:I+v,zoomX:o.scaleX,zoomY:o.scaleY,x:C,y:I}},_updateCacheCanvas:function(){var o=this.canvas;if(this.noScaleCache&&o&&o._currentTransform){var m=o._currentTransform.target,C=o._currentTransform.action;if(this===m&&C.slice&&C.slice(0,5)==="scale")return!1}var I=this._cacheCanvas,M=this._limitCacheSize(this._getCacheCanvasDimensions()),k=i.minCacheSideLimit,N=M.width,H=M.height,F,W,it=M.zoomX,V=M.zoomY,gt=N!==this.cacheWidth||H!==this.cacheHeight,J=this.zoomX!==it||this.zoomY!==V,mt=gt||J,B=0,St=0,ct=!1;if(gt){var Pt=this._cacheCanvas.width,Q=this._cacheCanvas.height,rt=N>Pt||H>Q,$=(N<Pt*.9||H<Q*.9)&&Pt>k&&Q>k;ct=rt||$,rt&&!M.capped&&(N>k||H>k)&&(B=N*.1,St=H*.1)}return this instanceof i.Text&&this.path&&(mt=!0,ct=!0,B+=this.getHeightOfLine(0)*this.zoomX,St+=this.getHeightOfLine(0)*this.zoomY),mt?(ct?(I.width=Math.ceil(N+B),I.height=Math.ceil(H+St)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,I.width,I.height)),F=M.x/2,W=M.y/2,this.cacheTranslationX=Math.round(I.width/2-F)+F,this.cacheTranslationY=Math.round(I.height/2-W)+W,this.cacheWidth=N,this.cacheHeight=H,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(it,V),this.zoomX=it,this.zoomY=V,!0):!1},setOptions:function(o){this._setOptions(o),this._initGradient(o.fill,"fill"),this._initGradient(o.stroke,"stroke"),this._initPattern(o.fill,"fill"),this._initPattern(o.stroke,"stroke")},transform:function(o){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&o===this.canvas.contextTop,C=this.calcTransformMatrix(!m);o.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(o){var m=i.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:t(this.left,m),top:t(this.top,m),width:t(this.width,m),height:t(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,m),scaleX:t(this.scaleX,m),scaleY:t(this.scaleY,m),angle:t(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,m),skewY:t(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(o),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,C,o),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(o){return this.toObject(o)},_removeDefaultValues:function(o){var m=i.util.getKlass(o.type).prototype,C=m.stateProperties;return C.forEach(function(I){if(!(I==="left"||I==="top")){o[I]===m[I]&&delete o[I];var M=Object.prototype.toString.call(o[I])==="[object Array]"&&Object.prototype.toString.call(m[I])==="[object Array]";M&&o[I].length===0&&m[I].length===0&&delete o[I]}}),o},toString:function(){return"#<fabric."+n(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var o=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(o.scaleX),scaleY:Math.abs(o.scaleY)}},getTotalObjectScaling:function(){var o=this.getObjectScaling(),m=o.scaleX,C=o.scaleY;if(this.canvas){var I=this.canvas.getZoom(),M=this.canvas.getRetinaScaling();m*=I*M,C*=I*M}return{scaleX:m,scaleY:C}},getObjectOpacity:function(){var o=this.opacity;return this.group&&(o*=this.group.getObjectOpacity()),o},_set:function(o,m){var C=o==="scaleX"||o==="scaleY",I=this[o]!==m,M=!1;return C&&(m=this._constrainScale(m)),o==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):o==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):o==="shadow"&&m&&!(m instanceof i.Shadow)?m=new i.Shadow(m):o==="dirty"&&this.group&&this.group.set("dirty",m),this[o]=m,I&&(M=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(o)>-1?(this.dirty=!0,M&&this.group.set("dirty",!0)):M&&this.stateProperties.indexOf(o)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(o){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(o.save(),this._setupCompositeOperation(o),this.drawSelectionBackground(o),this.transform(o),this._setOpacity(o),this._setShadow(o,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(o)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(o),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),o.restore())},renderCache:function(o){o=o||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,o.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(o){var m=this.clipPath;if(o.save(),m.inverted?o.globalCompositeOperation="destination-out":o.globalCompositeOperation="destination-in",m.absolutePositioned){var C=i.util.invertTransform(this.calcTransformMatrix());o.transform(C[0],C[1],C[2],C[3],C[4],C[5])}m.transform(o),o.scale(1/m.zoomX,1/m.zoomY),o.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),o.restore()},drawObject:function(o,m){var C=this.fill,I=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(o)):this._renderBackground(o),this._render(o),this._drawClipPath(o),this.fill=C,this.stroke=I},_drawClipPath:function(o){var m=this.clipPath;m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(o))},drawCacheOnCanvas:function(o){o.scale(1/this.zoomX,1/this.zoomY),o.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(o){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!o&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!o){var m=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-C/2,m,C)}return!0}return!1},_renderBackground:function(o){if(this.backgroundColor){var m=this._getNonTransformedDimensions();o.fillStyle=this.backgroundColor,o.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(o)}},_setOpacity:function(o){this.group&&!this.group._transformDone?o.globalAlpha=this.getObjectOpacity():o.globalAlpha*=this.opacity},_setStrokeStyles:function(o,m){var C=m.stroke;C&&(o.lineWidth=m.strokeWidth,o.lineCap=m.strokeLineCap,o.lineDashOffset=m.strokeDashOffset,o.lineJoin=m.strokeLineJoin,o.miterLimit=m.strokeMiterLimit,C.toLive?C.gradientUnits==="percentage"||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(o,C):(o.strokeStyle=C.toLive(o,this),this._applyPatternGradientTransform(o,C)):o.strokeStyle=m.stroke)},_setFillStyles:function(o,m){var C=m.fill;C&&(C.toLive?(o.fillStyle=C.toLive(o,this),this._applyPatternGradientTransform(o,m.fill)):o.fillStyle=C)},_setClippingProperties:function(o){o.globalAlpha=1,o.strokeStyle="transparent",o.fillStyle="#000000"},_setLineDash:function(o,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),o.setLineDash(m))},_renderControls:function(o,m){var C=this.getViewportTransform(),I=this.calcTransformMatrix(),M,k,N;m=m||{},k=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,N=typeof m.hasControls<"u"?m.hasControls:this.hasControls,I=i.util.multiplyTransformMatrices(C,I),M=i.util.qrDecompose(I),o.save(),o.translate(M.translateX,M.translateY),o.lineWidth=1*this.borderScaleFactor,this.group||(o.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),o.rotate(e(M.angle)),m.forActiveSelection||this.group?k&&this.drawBordersInGroup(o,M,m):k&&this.drawBorders(o,m),N&&this.drawControls(o,m),o.restore()},_setShadow:function(o){if(this.shadow){var m=this.shadow,C=this.canvas,I,M=C&&C.viewportTransform[0]||1,k=C&&C.viewportTransform[3]||1;m.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),C&&C._isRetinaScaling()&&(M*=i.devicePixelRatio,k*=i.devicePixelRatio),o.shadowColor=m.color,o.shadowBlur=m.blur*i.browserShadowBlurConstant*(M+k)*(I.scaleX+I.scaleY)/4,o.shadowOffsetX=m.offsetX*M*I.scaleX,o.shadowOffsetY=m.offsetY*k*I.scaleY}},_removeShadow:function(o){this.shadow&&(o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0)},_applyPatternGradientTransform:function(o,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var C=m.gradientTransform||m.patternTransform,I=-this.width/2+m.offsetX||0,M=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?o.transform(this.width,0,0,this.height,I,M):o.transform(1,0,0,1,I,M),C&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:I,offsetY:M}},_renderPaintInOrder:function(o){this.paintFirst==="stroke"?(this._renderStroke(o),this._renderFill(o)):(this._renderFill(o),this._renderStroke(o))},_render:function(){},_renderFill:function(o){this.fill&&(o.save(),this._setFillStyles(o,this),this.fillRule==="evenodd"?o.fill("evenodd"):o.fill(),o.restore())},_renderStroke:function(o){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();o.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&o.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(o,this.strokeDashArray),this._setStrokeStyles(o,this),o.stroke(),o.restore()}},_applyPatternForTransformedGradient:function(o,m){var C=this._limitCacheSize(this._getCacheCanvasDimensions()),I=i.util.createCanvasElement(),M,k=this.canvas.getRetinaScaling(),N=C.x/this.scaleX/k,H=C.y/this.scaleY/k;I.width=N,I.height=H,M=I.getContext("2d"),M.beginPath(),M.moveTo(0,0),M.lineTo(N,0),M.lineTo(N,H),M.lineTo(0,H),M.closePath(),M.translate(N/2,H/2),M.scale(C.zoomX/this.scaleX/k,C.zoomY/this.scaleY/k),this._applyPatternGradientTransform(M,m),M.fillStyle=m.toLive(o),M.fill(),o.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),o.scale(k*this.scaleX/C.zoomX,k*this.scaleY/C.zoomY),o.strokeStyle=M.createPattern(I,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var o=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",o.scaleX),this.set("scaleY",o.scaleY),this.angle=o.angle,this.skewX=o.skewX,this.skewY=0}},_removeTransformMatrix:function(o){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=i.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,o&&(this.scaleX*=o.scaleX,this.scaleY*=o.scaleY,this.cropX=o.cropX,this.cropY=o.cropY,m.x+=o.offsetLeft,m.y+=o.offsetTop,this.width=o.width,this.height=o.height),this.setPositionByOrigin(m,"center","center")},clone:function(o,m){var C=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(C,o):i.Object._fromObject("Object",C,o)},cloneAsImage:function(o,m){var C=this.toCanvasElement(m);return o&&o(new i.Image(C)),this},toCanvasElement:function(o){o||(o={});var m=i.util,C=m.saveObjectTransform(this),I=this.group,M=this.shadow,k=Math.abs,N=(o.multiplier||1)*(o.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,o.withoutTransform&&m.resetObjectTransform(this),o.withoutShadow&&(this.shadow=null);var H=i.util.createCanvasElement(),F=this.getBoundingRect(!0,!0),W=this.shadow,it,V={x:0,y:0},gt,J,mt;W&&(gt=W.blur,W.nonScaling?it={scaleX:1,scaleY:1}:it=this.getObjectScaling(),V.x=2*Math.round(k(W.offsetX)+gt)*k(it.scaleX),V.y=2*Math.round(k(W.offsetY)+gt)*k(it.scaleY)),J=F.width+V.x,mt=F.height+V.y,H.width=Math.ceil(J),H.height=Math.ceil(mt);var B=new i.StaticCanvas(H,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});o.format==="jpeg"&&(B.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(B.width/2,B.height/2),"center","center");var St=this.canvas;B.add(this);var ct=B.toCanvasElement(N||1,o);return this.shadow=M,this.set("canvas",St),I&&(this.group=I),this.set(C).setCoords(),B._objects=[],B.dispose(),B=null,ct},toDataURL:function(o){return o||(o={}),i.util.toDataURL(this.toCanvasElement(o),o.format||"png",o.quality||1)},isType:function(o){return this.type===o},complexity:function(){return 1},toJSON:function(o){return this.toObject(o)},rotate:function(o){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",o),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(o,m){m=m||this.canvas.getPointer(o);var C=new i.Point(m.x,m.y),I=this._getLeftTopCoords();return this.angle&&(C=i.util.rotatePoint(C,I,e(-this.angle))),{x:C.x-I.x,y:C.y-I.y}},_setupCompositeOperation:function(o){this.globalCompositeOperation&&(o.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),f(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(o,m,C,I){var M=i[o];m=u(m,!0),i.util.enlivenPatterns([m.fill,m.stroke],function(k){typeof k[0]<"u"&&(m.fill=k[0]),typeof k[1]<"u"&&(m.stroke=k[1]),i.util.enlivenObjects([m.clipPath],function(N){m.clipPath=N[0];var H=I?new M(m[I],m):new M(m);C&&C(H)})})},i.Object.__uid=0)})(b),(function(){var g=h.util.degreesToRadians,i={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5};h.util.object.extend(h.Object.prototype,{translateToGivenOrigin:function(u,t,n,e,s){var v=u.x,o=u.y,m,C,I;return typeof t=="string"?t=i[t]:t-=.5,typeof e=="string"?e=i[e]:e-=.5,m=e-t,typeof n=="string"?n=f[n]:n-=.5,typeof s=="string"?s=f[s]:s-=.5,C=s-n,(m||C)&&(I=this._getTransformedDimensions(),v=u.x+m*I.x,o=u.y+C*I.y),new h.Point(v,o)},translateToCenterPoint:function(u,t,n){var e=this.translateToGivenOrigin(u,t,n,"center","center");return this.angle?h.util.rotatePoint(e,u,g(this.angle)):e},translateToOriginPoint:function(u,t,n){var e=this.translateToGivenOrigin(u,"center","center",t,n);return this.angle?h.util.rotatePoint(e,u,g(this.angle)):e},getCenterPoint:function(){var u=new h.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,u,t)},toLocalPoint:function(u,t,n){var e=this.getCenterPoint(),s,v;return typeof t<"u"&&typeof n<"u"?s=this.translateToGivenOrigin(e,"center","center",t,n):s=new h.Point(this.left,this.top),v=new h.Point(u.x,u.y),this.angle&&(v=h.util.rotatePoint(v,e,-g(this.angle))),v.subtractEquals(s)},setPositionByOrigin:function(u,t,n){var e=this.translateToCenterPoint(u,t,n),s=this.translateToOriginPoint(e,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(u){var t=g(this.angle),n=this.getScaledWidth(),e=h.util.cos(t)*n,s=h.util.sin(t)*n,v,o;typeof this.originX=="string"?v=i[this.originX]:v=this.originX-.5,typeof u=="string"?o=i[u]:o=u-.5,this.left+=e*(o-v),this.top+=s*(o-v),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})})(),(function(){function g(n){return[new h.Point(n.tl.x,n.tl.y),new h.Point(n.tr.x,n.tr.y),new h.Point(n.br.x,n.br.y),new h.Point(n.bl.x,n.bl.y)]}var i=h.util,f=i.degreesToRadians,u=i.multiplyTransformMatrices,t=i.transformPoint;i.object.extend(h.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(n,e){return e?n?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),n?this.aCoords:this.lineCoords)},getCoords:function(n,e){return g(this._getCoords(n,e))},intersectsWithRect:function(n,e,s,v){var o=this.getCoords(s,v),m=h.Intersection.intersectPolygonRectangle(o,n,e);return m.status==="Intersection"},intersectsWithObject:function(n,e,s){var v=h.Intersection.intersectPolygonPolygon(this.getCoords(e,s),n.getCoords(e,s));return v.status==="Intersection"||n.isContainedWithinObject(this,e,s)||this.isContainedWithinObject(n,e,s)},isContainedWithinObject:function(n,e,s){for(var v=this.getCoords(e,s),o=e?n.aCoords:n.lineCoords,m=0,C=n._getImageLines(o);m<4;m++)if(!n.containsPoint(v[m],C))return!1;return!0},isContainedWithinRect:function(n,e,s,v){var o=this.getBoundingRect(s,v);return o.left>=n.x&&o.left+o.width<=e.x&&o.top>=n.y&&o.top+o.height<=e.y},containsPoint:function(n,m,s,v){var o=this._getCoords(s,v),m=m||this._getImageLines(o),C=this._findCrossPoints(n,m);return C!==0&&C%2===1},isOnScreen:function(n){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,v=this.getCoords(!0,n);return v.some(function(o){return o.x<=s.x&&o.x>=e.x&&o.y<=s.y&&o.y>=e.y})||this.intersectsWithRect(e,s,!0,n)?!0:this._containsCenterOfCanvas(e,s,n)},_containsCenterOfCanvas:function(n,e,s){var v={x:(n.x+e.x)/2,y:(n.y+e.y)/2};return!!this.containsPoint(v,null,!0,s)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,s,!0,n))return!0;var v=this.getCoords(!0,n).every(function(o){return(o.x>=s.x||o.x<=e.x)&&(o.y>=s.y||o.y<=e.y)});return v&&this._containsCenterOfCanvas(e,s,n)},_getImageLines:function(n){var e={topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}};return e},_findCrossPoints:function(n,e){var s,v,o,m,C,I=0,M;for(var k in e)if(M=e[k],!(M.o.y<n.y&&M.d.y<n.y)&&!(M.o.y>=n.y&&M.d.y>=n.y)&&(M.o.x===M.d.x&&M.o.x>=n.x?C=M.o.x:(s=0,v=(M.d.y-M.o.y)/(M.d.x-M.o.x),o=n.y-s*n.x,m=M.o.y-v*M.o.x,C=-(o-m)/(s-v)),C>=n.x&&(I+=1),I===2))break;return I},getBoundingRect:function(n,e){var s=this.getCoords(n,e);return i.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,e){var s=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(n/this.width/s)},scaleToHeight:function(n,e){var s=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(n/this.height/s)},calcCoords:function(n){return n?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var n=this.getViewportTransform(),e=this.padding,s=f(this.angle),v=i.cos(s),o=i.sin(s),m=v*e,C=o*e,I=m+C,M=m-C,k=this.calcACoords(),N={tl:t(k.tl,n),tr:t(k.tr,n),bl:t(k.bl,n),br:t(k.br,n)};return e&&(N.tl.x-=M,N.tl.y-=I,N.tr.x+=I,N.tr.y-=M,N.bl.x-=I,N.bl.y+=M,N.br.x+=M,N.br.y+=I),N},calcOCoords:function(){var n=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),s=this.getViewportTransform(),v=u(s,e),o=u(v,n),o=u(o,[1/s[0],0,0,1/s[3],0,0]),m=this._calculateCurrentDimensions(),C={};return this.forEachControl(function(I,M,k){C[M]=I.positionHandler(m,o,k)}),C},calcACoords:function(){var n=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),s=u(e,n),v=this._getTransformedDimensions(),o=v.x/2,m=v.y/2;return{tl:t({x:-o,y:-m},s),tr:t({x:o,y:-m},s),bl:t({x:-o,y:m},s),br:t({x:o,y:m},s)}},setCoords:function(n){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),n?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var e="_",s="";return!n&&this.group&&(s=this.group.transformMatrixKey(n)+e),s+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){var e=this.calcOwnMatrix();if(n||!this.group)return e;var s=this.transformMatrixKey(n),v=this.matrixCache||(this.matrixCache={});return v.key===s?v.value:(this.group&&(e=u(this.group.calcTransformMatrix(!1),e)),v.key=s,v.value=e,e)},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===n)return e.value;var s=this._calcTranslateMatrix(),v={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=n,e.value=i.composeMatrix(v),e.value},_calcDimensionsTransformMatrix:function(n,e,s){return i.calcDimensionsMatrix({skewX:n,skewY:e,scaleX:this.scaleX*(s&&this.flipX?-1:1),scaleY:this.scaleY*(s&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var n=this.strokeWidth,e=this.width+n,s=this.height+n;return{x:e,y:s}},_getTransformedDimensions:function(n,e){typeof n>"u"&&(n=this.skewX),typeof e>"u"&&(e=this.skewY);var s,v,o,m=n===0&&e===0;if(this.strokeUniform?(v=this.width,o=this.height):(s=this._getNonTransformedDimensions(),v=s.x,o=s.y),m)return this._finalizeDimensions(v*this.scaleX,o*this.scaleY);var C=i.sizeAfterTransform(v,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:e});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(n,e){return this.strokeUniform?{x:n+this.strokeWidth,y:e+this.strokeWidth}:{x:n,y:e}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),e=this._getTransformedDimensions(),s=t(e,n,!0);return s.scalarAdd(2*this.padding)}})})(),h.util.object.extend(h.Object.prototype,{sendToBack:function(){return this.group?h.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?h.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?h.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?h.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?h.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),(function(){function g(f,u){if(u){if(u.toLive)return f+": url(#SVGID_"+u.id+"); ";var t=new h.Color(u),n=f+": "+t.toRgb()+"; ",e=t.getAlpha();return e!==1&&(n+=f+"-opacity: "+e.toString()+"; "),n}else return f+": none; "}var i=h.util.toFixed;h.util.object.extend(h.Object.prototype,{getSvgStyles:function(f){var u=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",e=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",v=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",I=f?"":this.getSvgFilter(),M=g("fill",this.fill),k=g("stroke",this.stroke);return[k,"stroke-width: ",t,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",e,"; ","stroke-linejoin: ",v,"; ","stroke-miterlimit: ",o,"; ",M,"fill-rule: ",u,"; ","opacity: ",m,";",I,C].join("")},getSvgSpanStyles:function(f,u){var t="; ",e=f.fontFamily?"font-family: "+(f.fontFamily.indexOf("'")===-1&&f.fontFamily.indexOf('"')===-1?"'"+f.fontFamily+"'":f.fontFamily)+t:"",n=f.strokeWidth?"stroke-width: "+f.strokeWidth+t:"",e=e,s=f.fontSize?"font-size: "+f.fontSize+"px"+t:"",v=f.fontStyle?"font-style: "+f.fontStyle+t:"",o=f.fontWeight?"font-weight: "+f.fontWeight+t:"",m=f.fill?g("fill",f.fill):"",C=f.stroke?g("stroke",f.stroke):"",I=this.getSvgTextDecoration(f),M=f.deltaY?"baseline-shift: "+-f.deltaY+"; ":"";return I&&(I="text-decoration: "+I+t),[C,n,e,s,v,o,I,m,M,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(f){return["overline","underline","line-through"].filter(function(u){return f[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(f,u){var t=f?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'+h.util.matrixToSVG(t);return n+(u||"")+'" '},_setSVGBg:function(f){if(this.backgroundColor){var u=h.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,u),'" y="',i(-this.height/2,u),'" width="',i(this.width,u),'" height="',i(this.height,u),`"></rect>
`)}},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(f),{reviver:f})},toClipPathSVG:function(f){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(f),{reviver:f})},_createBaseClipPathSVGMarkup:function(f,u){u=u||{};var t=u.reviver,n=u.additionalTransform||"",e=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=f.indexOf("COMMON_PARTS");return f[s]=e,t?t(f.join("")):f.join("")},_createBaseSVGMarkup:function(f,u){u=u||{};var t=u.noStyle,n=u.reviver,e=t?"":'style="'+this.getSvgStyles()+'" ',s=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",v=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=v&&v.absolutePositioned,C=this.stroke,I=this.fill,M=this.shadow,k,N=[],H,F=f.indexOf("COMMON_PARTS"),W=u.additionalTransform;return v&&(v.clipPathId="CLIPPATH_"+h.Object.__uid++,H='<clipPath id="'+v.clipPathId+`" >
`+v.toClipPathSVG(n)+`</clipPath>
`),m&&N.push("<g ",s,this.getSvgCommons(),` >
`),N.push("<g ",this.getSvgTransform(!1),m?"":s+this.getSvgCommons(),` >
`),k=[e,o,t?"":this.addPaintOrder()," ",W?'transform="'+W+'" ':""].join(""),f[F]=k,I&&I.toLive&&N.push(I.toSVG(this)),C&&C.toLive&&N.push(C.toSVG(this)),M&&N.push(M.toSVG(this)),v&&N.push(H),N.push(f.join("")),N.push(`</g>
`),m&&N.push(`</g>
`),n?n(N.join("")):N.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})})(),(function(){var g=h.util.object.extend,i="stateProperties";function f(t,n,e){var s={},v=!0;e.forEach(function(o){s[o]=t[o]}),g(t[n],s,v)}function u(t,n,e){if(t===n)return!0;if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var s=0,v=t.length;s<v;s++)if(!u(t[s],n[s]))return!1;return!0}else if(t&&typeof t=="object"){var o=Object.keys(t),m;if(!n||typeof n!="object"||!e&&o.length!==Object.keys(n).length)return!1;for(var s=0,v=o.length;s<v;s++)if(m=o[s],!(m==="canvas"||m==="group")&&!u(t[m],n[m]))return!1;return!0}}h.util.object.extend(h.Object.prototype,{hasStateChanged:function(t){t=t||i;var n="_"+t;return Object.keys(this[n]).length<this[t].length?!0:!u(this[n],this,!0)},saveState:function(t){var n=t&&t.propertySet||i,e="_"+n;return this[e]?(f(this,e,this[n]),t&&t.stateProperties&&f(this,e,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var n=t.propertySet||i;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})})(),(function(){var g=h.util.degreesToRadians;h.util.object.extend(h.Object.prototype,{_findTargetCorner:function(i,f){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=i.x,t=i.y,n,e,s=Object.keys(this.oCoords),v=s.length-1,o;for(this.__corner=0;v>=0;v--)if(o=s[v],!!this.isControlVisible(o)&&(e=this._getImageLines(f?this.oCoords[o].touchCorner:this.oCoords[o].corner),n=this._findCrossPoints({x:u,y:t},e),n!==0&&n%2===1))return this.__corner=o,o;return!1},forEachControl:function(i){for(var f in this.controls)i(this.controls[f],f,this)},_setCornerCoords:function(){var i=this.oCoords;for(var f in i){var u=this.controls[f];i[f].corner=u.calcCornerCoords(this.angle,this.cornerSize,i[f].x,i[f].y,!1),i[f].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,i[f].x,i[f].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var f=this.getCenterPoint(),u=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return i.translate(f.x,f.y),i.scale(1/t[0],1/t[3]),i.rotate(g(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-u.x/2,-u.y/2,u.x,u.y),i.restore(),this},drawBorders:function(i,f){f=f||{};var u=this._calculateCurrentDimensions(),t=this.borderScaleFactor,n=u.x+t,e=u.y+t,s=typeof f.hasControls<"u"?f.hasControls:this.hasControls,v=!1;return i.save(),i.strokeStyle=f.borderColor||this.borderColor,this._setLineDash(i,f.borderDashArray||this.borderDashArray),i.strokeRect(-n/2,-e/2,n,e),s&&(i.beginPath(),this.forEachControl(function(o,m,C){o.withConnection&&o.getVisibility(C,m)&&(v=!0,i.moveTo(o.x*n,o.y*e),i.lineTo(o.x*n+o.offsetX,o.y*e+o.offsetY))}),v&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,f,u){u=u||{};var t=h.util.sizeAfterTransform(this.width,this.height,f),n=this.strokeWidth,e=this.strokeUniform,s=this.borderScaleFactor,v=t.x+n*(e?this.canvas.getZoom():f.scaleX)+s,o=t.y+n*(e?this.canvas.getZoom():f.scaleY)+s;return i.save(),this._setLineDash(i,u.borderDashArray||this.borderDashArray),i.strokeStyle=u.borderColor||this.borderColor,i.strokeRect(-v/2,-o/2,v,o),i.restore(),this},drawControls:function(i,f){f=f||{},i.save();var u=this.canvas.getRetinaScaling(),t,n;return i.setTransform(u,0,0,u,0,0),i.strokeStyle=i.fillStyle=f.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=f.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,f.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(t=this.group.calcTransformMatrix()),this.forEachControl(function(e,s,v){n=v.oCoords[s],e.getVisibility(v,s)&&(t&&(n=h.util.transformPoint(n,t)),e.render(i,n.x,n.y,f,v))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,f){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=f,this},setControlsVisibility:function(i){i||(i={});for(var f in i)this.setControlVisible(f,i[f]);return this},onDeselect:function(){},onSelect:function(){}})})(),h.util.object.extend(h.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,i){i=i||{};var f=function(){},u=i.onComplete||f,t=i.onChange||f,n=this;return h.util.animate({startValue:g.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){g.set("left",e),n.requestRenderAll(),t()},onComplete:function(){g.setCoords(),u()}}),this},fxCenterObjectV:function(g,i){i=i||{};var f=function(){},u=i.onComplete||f,t=i.onChange||f,n=this;return h.util.animate({startValue:g.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){g.set("top",e),n.requestRenderAll(),t()},onComplete:function(){g.setCoords(),u()}}),this},fxRemove:function(g,i){i=i||{};var f=function(){},u=i.onComplete||f,t=i.onChange||f,n=this;return h.util.animate({startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){g.set("opacity",e),n.requestRenderAll(),t()},onComplete:function(){n.remove(g),u()}}),this}}),h.util.object.extend(h.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],i,f;for(i in arguments[0])g.push(i);for(var u=0,t=g.length;u<t;u++)i=g[u],f=u!==t-1,this._animate(i,arguments[0][i],arguments[1],f)}else this._animate.apply(this,arguments);return this},_animate:function(g,i,f,u){var t=this,n;i=i.toString(),f?f=h.util.object.clone(f):f={},~g.indexOf(".")&&(n=g.split("."));var e=t.colorProperties.indexOf(g)>-1||n&&t.colorProperties.indexOf(n[1])>-1,s=n?this.get(n[0])[n[1]]:this.get(g);"from"in f||(f.from=s),e||(~i.indexOf("=")?i=s+parseFloat(i.replace("=","")):i=parseFloat(i));var v={startValue:f.from,endValue:i,byValue:f.by,easing:f.easing,duration:f.duration,abort:f.abort&&function(o,m,C){return f.abort.call(t,o,m,C)},onChange:function(o,m,C){n?t[n[0]][n[1]]=o:t.set(g,o),!u&&f.onChange&&f.onChange(o,m,C)},onComplete:function(o,m,C){u||(t.setCoords(),f.onComplete&&f.onComplete(o,m,C))}};return e?h.util.animateColor(v.startValue,v.endValue,v.duration,v):h.util.animate(v)}}),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,s){e||(e=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(s)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,s){return this.callSuper("_set",e,s),typeof t[e]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:n({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:n({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var s=this.calcLinePoints();e.moveTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineWidth=this.strokeWidth;var v=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=v},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return f(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,v=e*this.width*.5,o=s*this.height*.5,m=e*this.width*-.5,C=s*this.height*-.5;return{x1:v,x2:m,y1:o,y2:C}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(e,s,v){v=v||{};var o=i.parseAttributes(e,i.Line.ATTRIBUTE_NAMES),m=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];s(new i.Line(m,f(o,v)))},i.Line.fromObject=function(e,s){function v(m){delete m.points,s&&s(m)}var o=u(e,!0);o.points=[e.x1,e.y1,e.x2,e.y2],i.Object._fromObject("Line",o,v,"points")};function n(e,s){var v=e.origin,o=e.axis1,m=e.axis2,C=e.dimension,I=s.nearest,M=s.center,k=s.farthest;return function(){switch(this.get(v)){case I:return Math.min(this.get(o),this.get(m));case M:return Math.min(this.get(o),this.get(m))+.5*this.get(C);case k:return Math.max(this.get(o),this.get(m))}}}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:f*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,n){return this.callSuper("_set",t,n),t==="radius"&&this.setRadius(n),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,n=0,e=0,s=(this.endAngle-this.startAngle)%(2*f);if(s===0)t=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+e+'" ','r="',this.radius,`" />
`];else{var v=i.util.cos(this.startAngle)*this.radius,o=i.util.sin(this.startAngle)*this.radius,m=i.util.cos(this.endAngle)*this.radius,C=i.util.sin(this.endAngle)*this.radius,I=s>f?"1":"0";t=['<path d="M '+v+" "+o," A "+this.radius+" "+this.radius," 0 ",+I+" 1"," "+m+" "+C,'" ',"COMMON_PARTS",` />
`]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",t*2).set("height",t*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){var e=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!u(e))throw new Error("value of `r` attribute is required and can not be negative");e.left=(e.left||0)-e.radius,e.top=(e.top||0)-e.radius,n(new i.Circle(e))};function u(t){return"radius"in t&&t.radius>=0}i.Circle.fromObject=function(t,n){i.Object._fromObject("Circle",t,n)}})(b),(function(g){var i=g.fabric||(g.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(f){var u=this.width/2,t=this.height/2;f.beginPath(),f.moveTo(-u,t),f.lineTo(0,-t),f.lineTo(u,t),f.closePath(),this._renderPaintInOrder(f)},_toSVG:function(){var f=this.width/2,u=this.height/2,t=[-f+" "+u,"0 "+-u,f+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',t,'" />']}}),i.Triangle.fromObject=function(f,u){return i.Object._fromObject("Triangle",f,u)}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,t){switch(this.callSuper("_set",u,t),u){case"rx":this.rx=t,this.set("width",t*2);break;case"ry":this.ry=t,this.set("height",t*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,f,!1),u.restore(),this._renderPaintInOrder(u)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(u,t){var n=i.parseAttributes(u,i.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,t(new i.Ellipse(n))},i.Ellipse.fromObject=function(u,t){i.Object._fromObject("Ellipse",u,t)}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,e=this.width,s=this.height,v=-this.width/2,o=-this.height/2,m=t!==0||n!==0,C=1-.5522847498;u.beginPath(),u.moveTo(v+t,o),u.lineTo(v+e-t,o),m&&u.bezierCurveTo(v+e-C*t,o,v+e,o+C*n,v+e,o+n),u.lineTo(v+e,o+s-n),m&&u.bezierCurveTo(v+e,o+s-C*n,v+e-C*t,o+s,v+e-t,o+s),u.lineTo(v+t,o+s),m&&u.bezierCurveTo(v+C*t,o+s,v,o+s-C*n,v,o+s-n),u.lineTo(v,o+n),m&&u.bezierCurveTo(v,o+C*n,v+C*t,o,v+t,o),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,t=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',t,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(u,t,n){if(!u)return t(null);n=n||{};var e=i.parseAttributes(u,i.Rect.ATTRIBUTE_NAMES);e.left=e.left||0,e.top=e.top||0,e.height=e.height||0,e.width=e.width||0;var s=new i.Rect(f(n?i.util.object.clone(n):{},e));s.visible=s.visible&&s.width>0&&s.height>0,t(s)},i.Rect.fromObject=function(u,t){return i.Object._fromObject("Rect",u,t)}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.util.array.min,t=i.util.array.max,n=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(e,s){s=s||{},this.points=e||[],this.callSuper("initialize",s),this._setPositionDimensions(s)},_setPositionDimensions:function(e){var s=this._calcDimensions(e),v;this.width=s.width,this.height=s.height,e.fromSVG||(v=this.translateToGivenOrigin({x:s.left-this.strokeWidth/2,y:s.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof e.left>"u"&&(this.left=e.fromSVG?s.left:v.x),typeof e.top>"u"&&(this.top=e.fromSVG?s.top:v.y),this.pathOffset={x:s.left+this.width/2,y:s.top+this.height/2}},_calcDimensions:function(){var e=this.points,s=u(e,"x")||0,v=u(e,"y")||0,o=t(e,"x")||0,m=t(e,"y")||0,C=o-s,I=m-v;return{left:s,top:v,width:C,height:I}},toObject:function(e){return f(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],s=this.pathOffset.x,v=this.pathOffset.y,o=i.Object.NUM_FRACTION_DIGITS,m=0,C=this.points.length;m<C;m++)e.push(n(this.points[m].x-s,o),",",n(this.points[m].y-v,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),`" />
`]},commonRender:function(e){var s,v=this.points.length,o=this.pathOffset.x,m=this.pathOffset.y;if(!v||isNaN(this.points[v-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-o,this.points[0].y-m);for(var C=0;C<v;C++)s=this.points[C],e.lineTo(s.x-o,s.y-m);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(e){return function(s,v,o){if(!s)return v(null);o||(o={});var m=i.parsePointsAttribute(s.getAttribute("points")),C=i.parseAttributes(s,i[e].ATTRIBUTE_NAMES);C.fromSVG=!0,v(new i[e](m,f(C,o)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(e,s){return i.Object._fromObject("Polyline",e,s,"points")}})(b),(function(g){var i=g.fabric||(g.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(f,u){i.Object._fromObject("Polygon",f,u,"points")}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.array.min,u=i.util.array.max,t=i.util.object.extend,n=Object.prototype.toString,e=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(s,v){v=v||{},this.callSuper("initialize",v),s||(s=[]);var o=n.call(s)==="[object Array]";this.path=i.util.makePathSimpler(o?s:i.util.parsePath(s)),this.path&&i.Polyline.prototype._setPositionDimensions.call(this,v)},_renderPathCommands:function(s){var v,o=0,m=0,C=0,I=0,M=0,k=0,N=-this.pathOffset.x,H=-this.pathOffset.y;s.beginPath();for(var F=0,W=this.path.length;F<W;++F)switch(v=this.path[F],v[0]){case"L":C=v[1],I=v[2],s.lineTo(C+N,I+H);break;case"M":C=v[1],I=v[2],o=C,m=I,s.moveTo(C+N,I+H);break;case"C":C=v[5],I=v[6],M=v[3],k=v[4],s.bezierCurveTo(v[1]+N,v[2]+H,M+N,k+H,C+N,I+H);break;case"Q":s.quadraticCurveTo(v[1]+N,v[2]+H,v[3]+N,v[4]+H),C=v[3],I=v[4],M=v[1],k=v[2];break;case"z":case"Z":C=o,I=m,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return t(this.callSuper("toObject",s),{path:this.path.map(function(v){return v.slice()})})},toDatalessObject:function(s){var v=this.toObject(["sourcePath"].concat(s));return v.sourcePath&&delete v.path,v},_toSVG:function(){var s=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=i.Object.NUM_FRACTION_DIGITS;return" translate("+e(-this.pathOffset.x,s)+", "+e(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var v=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:v})},toSVG:function(s){var v=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:v})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],v=[],o,m=0,C=0,I=0,M=0,k,N=0,H=this.path.length;N<H;++N){switch(o=this.path[N],o[0]){case"L":I=o[1],M=o[2],k=[];break;case"M":I=o[1],M=o[2],m=I,C=M,k=[];break;case"C":k=i.util.getBoundsOfCurve(I,M,o[1],o[2],o[3],o[4],o[5],o[6]),I=o[5],M=o[6];break;case"Q":k=i.util.getBoundsOfCurve(I,M,o[1],o[2],o[1],o[2],o[3],o[4]),I=o[3],M=o[4];break;case"z":case"Z":I=m,M=C;break}k.forEach(function(mt){s.push(mt.x),v.push(mt.y)}),s.push(I),v.push(M)}var F=f(s)||0,W=f(v)||0,it=u(s)||0,V=u(v)||0,gt=it-F,J=V-W;return{left:F,top:W,width:gt,height:J}}}),i.Path.fromObject=function(s,v){if(typeof s.sourcePath=="string"){var o=s.sourcePath;i.loadSVGFromURL(o,function(m){var C=m[0];C.setOptions(s),v&&v(C)})}else i.Object._fromObject("Path",s,v,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(s,v,o){var m=i.parseAttributes(s,i.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,v(new i.Path(m.d,t(m,o)))}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.array.min,u=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,n,e){n=n||{},this._objects=[],e&&this.callSuper("initialize",n),this._objects=t||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(e)this._updateObjectsACoords();else{var v=n&&n.centerPoint;n.originX!==void 0&&(this.originX=n.originX),n.originY!==void 0&&(this.originY=n.originY),v||this._calcBounds(),this._updateObjectsCoords(v),delete n.centerPoint,this.callSuper("initialize",n)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,n=this._objects.length;n--;)this._objects[n].setCoords(t)},_updateObjectsCoords:function(n){for(var n=n||this.getCenterPoint(),e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],n)},_updateObjectCoords:function(t,n){var e=t.left,s=t.top,v=!0;t.set({left:e-n.x,top:s-n.y}),t.group=this,t.setCoords(v)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),t&&(n&&i.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var e=this._objects.length;if(this.useSetOnGroup)for(;e--;)this._objects[e].setOnGroup(t,n);if(t==="canvas")for(;e--;)this._objects[e]._set(t,n);i.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,e=this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){var o=v.includeDefaultValues;v.includeDefaultValues=n;var m=v.toObject(t);return v.includeDefaultValues=o,m}),s=i.Object.prototype.toObject.call(this,t);return s.objects=e,s},toDatalessObject:function(t){var n,e=this.sourcePath;if(e)n=e;else{var s=this.includeDefaultValues;n=this._objects.map(function(o){var m=o.includeDefaultValues;o.includeDefaultValues=s;var C=o.toDatalessObject(t);return o.includeDefaultValues=m,C})}var v=i.Object.prototype.toDatalessObject.call(this,t);return v.objects=n,v},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=i.Object.prototype.shouldCache.call(this);if(t){for(var n=0,e=this._objects.length;n<e;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return t},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var n=0,e=this._objects.length;n<e;n++)this._objects[n].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var n=0,e=this._objects.length;n<e;n++)if(this._objects[n].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-v/2,s,v)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(n){i.util.addTransformToObject(n,t),delete n.group,n.setCoords()}),this},realizeTransform:function(t,n){return i.util.addTransformToObject(t,n),t},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var e=this.toObject();delete e.objects;var s=new i.ActiveSelection([]);return s.set(e),s.type="activeSelection",n.remove(this),t.forEach(function(v){v.group=s,v.dirty=!0,n.add(v)}),s.canvas=n,s._objects=t,n._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject(function(n){n.setCoords(t)}),this},_calcBounds:function(t){for(var n=[],e=[],s,v,o,m=["tr","br","bl","tl"],C=0,I=this._objects.length,M,k=m.length;C<I;++C){for(s=this._objects[C],o=s.calcACoords(),M=0;M<k;M++)v=m[M],n.push(o[v].x),e.push(o[v].y);s.aCoords=o}this._getBounds(n,e,t)},_getBounds:function(t,n,e){var s=new i.Point(f(t),f(n)),v=new i.Point(u(t),u(n)),o=s.y||0,m=s.x||0,C=v.x-s.x||0,I=v.y-s.y||0;this.width=C,this.height=I,e||this.setPositionByOrigin({x:m,y:o},"left","top")},_toSVG:function(t){for(var n=["<g ","COMMON_PARTS",` >
`],e=0,s=this._objects.length;e<s;e++)n.push("		",this._objects[e].toSVG(t));return n.push(`</g>
`),n},getSvgStyles:function(){var t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",n=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),n].join("")},toClipPathSVG:function(t){for(var n=[],e=0,s=this._objects.length;e<s;e++)n.push("	",this._objects[e].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(n,{reviver:t})}}),i.Group.fromObject=function(t,n){var e=t.objects,s=i.util.object.clone(t,!0);if(delete s.objects,typeof e=="string"){i.loadSVGFromURL(e,function(v){var o=i.util.groupSVGElements(v,t,e);o.set(s),n&&n(o)});return}i.util.enlivenObjects(e,function(v){i.util.enlivenObjects([t.clipPath],function(o){var m=i.util.object.clone(t,!0);m.clipPath=o[0],delete m.objects,n&&n(new i.Group(v,m,!0))})})})})(b),(function(g){var i=g.fabric||(g.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(f,u){u=u||{},this._objects=f||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var f=this._objects.concat();this._objects=[];var u=i.Object.prototype.toObject.call(this),t=new i.Group([]);if(delete u.type,t.set(u),f.forEach(function(e){e.canvas.remove(e),e.group=t}),t._objects=f,!this.canvas)return t;var n=this.canvas;return n.add(t),n._activeObject=t,t.setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(f,u,t){f.save(),f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",f,u),t=t||{},typeof t.hasControls>"u"&&(t.hasControls=!1),t.forActiveSelection=!0;for(var n=0,e=this._objects.length;n<e;n++)this._objects[n]._renderControls(f,t);f.restore()}}),i.ActiveSelection.fromObject=function(f,u){i.util.enlivenObjects(f.objects,function(t){delete f.objects,u&&u(new i.ActiveSelection(t,f,!0))})})})(b),(function(g){var i=h.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){h.warn("fabric.Image is already defined.");return}h.Image=h.util.createClass(h.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:h.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:h.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(f,u){u||(u={}),this.filters=[],this.cacheKey="texture"+h.Object.__uid++,this.callSuper("initialize",u),this._initElement(f,u)},getElement:function(){return this._element||{}},setElement:function(f,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=f,this._originalElement=f,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(f){var u=h.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(f)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(f){h.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var f=this.getElement();return{width:f.naturalWidth||f.width,height:f.naturalHeight||f.height}},_stroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,t=this.height/2;f.beginPath(),f.moveTo(-u,-t),f.lineTo(u,-t),f.lineTo(u,t),f.lineTo(-u,t),f.lineTo(-u,-t),f.closePath()}},toObject:function(f){var u=[];this.filters.forEach(function(n){n&&u.push(n.toObject())});var t=i(this.callSuper("toObject",["cropX","cropY"].concat(f)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var f=[],u=[],t,n=this._element,e=-this.width/2,s=-this.height/2,v="",o="";if(!n)return[];if(this.hasCrop()){var m=h.Object.__uid++;f.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+e+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),v=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',e-this.cropX,'" y="',s-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,o,'"',v,`></image>
`),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,t=["	<rect ",'x="',e,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=C}return this.paintFirst!=="fill"?f=f.concat(t,u):f=f.concat(u,t),f},getSrc:function(f){var u=f?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(f,u,t){return h.util.loadImage(f,function(n,e){this.setElement(n,t),this._setWidthHeight(),u&&u(this,e)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var f=this.resizeFilter,u=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),n=t.scaleX,e=t.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!f||n>u&&e>u){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,this._lastScaleY=e;return}h.filterBackend||(h.filterBackend=h.initFilterBackend());var v=h.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=s.width,C=s.height;v.width=m,v.height=C,this._element=v,this._lastScaleX=f.scaleX=n,this._lastScaleY=f.scaleY=e,h.filterBackend.applyFilters([f],s,m,C,this._element,o),this._filterScalingX=v.width/this._originalElement.width,this._filterScalingY=v.height/this._originalElement.height},applyFilters:function(f){if(f=f||this.filters||[],f=f.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),f.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,t=u.naturalWidth||u.width,n=u.naturalHeight||u.height;if(this._element===this._originalElement){var e=h.util.createCanvasElement();e.width=t,e.height=n,this._element=e,this._filteredEl=e}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,n),this._lastScaleX=1,this._lastScaleY=1;return h.filterBackend||(h.filterBackend=h.initFilterBackend()),h.filterBackend.applyFilters(f,this._originalElement,t,n,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(f){h.util.setImageSmoothing(f,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(f),this._renderPaintInOrder(f)},drawCacheOnCanvas:function(f){h.util.setImageSmoothing(f,this.imageSmoothing),h.Object.prototype.drawCacheOnCanvas.call(this,f)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(f){var u=this._element;if(u){var t=this._filterScalingX,n=this._filterScalingY,e=this.width,s=this.height,v=Math.min,o=Math.max,m=o(this.cropX,0),C=o(this.cropY,0),I=u.naturalWidth||u.width,M=u.naturalHeight||u.height,k=m*t,N=C*n,H=v(e*t,I-k),F=v(s*n,M-N),W=-e/2,it=-s/2,V=v(e,I/t-m),gt=v(s,M/n-C);u&&f.drawImage(u,k,N,H,F,W,it,V,gt)}},_needsResize:function(){var f=this.getTotalObjectScaling();return f.scaleX!==this._lastScaleX||f.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(f,u){this.setElement(h.util.getById(f),u),h.util.addClass(this.getElement(),h.Image.CSS_CANVAS)},_initConfig:function(f){f||(f={}),this.setOptions(f),this._setWidthHeight(f)},_initFilters:function(f,u){f&&f.length?h.util.enlivenObjects(f,function(t){u&&u(t)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(f){f||(f={});var u=this.getElement();this.width=f.width||u.naturalWidth||u.width||0,this.height=f.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var f=h.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,t=this._element.height,n=1,e=1,s=0,v=0,o=0,m=0,C,I=this.width,M=this.height,k={width:I,height:M};return f&&(f.alignX!=="none"||f.alignY!=="none")?(f.meetOrSlice==="meet"&&(n=e=h.util.findScaleToFit(this._element,k),C=(I-u*n)/2,f.alignX==="Min"&&(s=-C),f.alignX==="Max"&&(s=C),C=(M-t*e)/2,f.alignY==="Min"&&(v=-C),f.alignY==="Max"&&(v=C)),f.meetOrSlice==="slice"&&(n=e=h.util.findScaleToCover(this._element,k),C=u-I/n,f.alignX==="Mid"&&(o=C/2),f.alignX==="Max"&&(o=C),C=t-M/e,f.alignY==="Mid"&&(m=C/2),f.alignY==="Max"&&(m=C),u=I/n,t=M/e)):(n=I/u,e=M/t),{width:u,height:t,scaleX:n,scaleY:e,offsetLeft:s,offsetTop:v,cropX:o,cropY:m}}}),h.Image.CSS_CANVAS="canvas-img",h.Image.prototype.getSvgSrc=h.Image.prototype.getSrc,h.Image.fromObject=function(f,u){var t=h.util.object.clone(f);h.util.loadImage(t.src,function(n,e){if(e){u&&u(null,!0);return}h.Image.prototype._initFilters.call(t,t.filters,function(s){t.filters=s||[],h.Image.prototype._initFilters.call(t,[t.resizeFilter],function(v){t.resizeFilter=v[0],h.util.enlivenObjects([t.clipPath],function(o){t.clipPath=o[0];var m=new h.Image(n,t);u(m,!1)})})})},null,t.crossOrigin)},h.Image.fromURL=function(f,u,t){h.util.loadImage(f,function(n,e){u&&u(new h.Image(n,t),e)},null,t&&t.crossOrigin)},h.Image.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),h.Image.fromElement=function(f,u,t){var n=h.parseAttributes(f,h.Image.ATTRIBUTE_NAMES);h.Image.fromURL(n["xlink:href"],u,i(t?h.util.object.clone(t):{},n))}})(b),h.util.object.extend(h.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(g){g=g||{};var i=function(){},f=g.onComplete||i,u=g.onChange||i,t=this;return h.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(n){t.rotate(n),u()},onComplete:function(){t.setCoords(),f()}}),this}}),h.util.object.extend(h.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound}),this}}),(function(){function g(f,u){var t="precision "+u+` float;
void main(){}`,n=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,t),f.compileShader(n),!!f.getShaderParameter(n,f.COMPILE_STATUS)}h.isWebglSupported=function(f){if(h.isLikelyNode)return!1;f=f||h.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),t=u.getContext("webgl")||u.getContext("experimental-webgl"),n=!1;if(t){h.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),n=h.maxTextureSize>=f;for(var e=["highp","mediump","lowp"],s=0;s<3;s++)if(g(t,e[s])){h.webGlPrecision=e[s];break}}return this.isSupported=n,n},h.WebglFilterBackend=i;function i(f){f&&f.tileSize&&(this.tileSize=f.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(f,u){this.dispose(),this.createWebGLCanvas(f,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(f,u)},chooseFastestCopyGLTo2DMethod:function(f,u){var t=typeof window.performance<"u",n;try{new ImageData(1,1),n=!0}catch{n=!1}var e=typeof ArrayBuffer<"u",s=typeof Uint8ClampedArray<"u";if(t&&n&&e&&s){var v=h.util.createCanvasElement(),o=new ArrayBuffer(f*u*4);if(h.forceGLPutImageData){this.imageBuffer=o,this.copyGLTo2D=P;return}var m={imageBuffer:o,destinationWidth:f,destinationHeight:u,targetCanvas:v},C,I,M;v.width=f,v.height=u,C=window.performance.now(),D.call(m,this.gl,m),I=window.performance.now()-C,C=window.performance.now(),P.call(m,this.gl,m),M=window.performance.now()-C,I>M?(this.imageBuffer=o,this.copyGLTo2D=P):this.copyGLTo2D=D}},createWebGLCanvas:function(f,u){var t=h.util.createCanvasElement();t.width=f,t.height=u;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=t.getContext("webgl",n);e||(e=t.getContext("experimental-webgl",n)),e&&(e.clearColor(0,0,0,0),this.canvas=t,this.gl=e)},applyFilters:function(f,u,t,n,e,s){var v=this.gl,o;s&&(o=this.getCachedTexture(s,u));var m={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:t,sourceHeight:n,destinationWidth:t,destinationHeight:n,context:v,sourceTexture:this.createTexture(v,t,n,!o&&u),targetTexture:this.createTexture(v,t,n),originalTexture:o||this.createTexture(v,t,n,!o&&u),passes:f.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},C=v.createFramebuffer();return v.bindFramebuffer(v.FRAMEBUFFER,C),f.forEach(function(I){I&&I.applyTo(m)}),O(m),this.copyGLTo2D(v,m),v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(m.sourceTexture),v.deleteTexture(m.targetTexture),v.deleteFramebuffer(C),e.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(f,u,t,n){var e=f.createTexture();return f.bindTexture(f.TEXTURE_2D,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),n?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,n):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,u,t,0,f.RGBA,f.UNSIGNED_BYTE,null),e},getCachedTexture:function(f,u){if(this.textureCache[f])return this.textureCache[f];var t=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[f]=t,t},evictCachesForKey:function(f){this.textureCache[f]&&(this.gl.deleteTexture(this.textureCache[f]),delete this.textureCache[f])},copyGLTo2D:D,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var f=this.gl,u={renderer:"",vendor:""};if(!f)return u;var t=f.getExtension("WEBGL_debug_renderer_info");if(t){var n=f.getParameter(t.UNMASKED_RENDERER_WEBGL),e=f.getParameter(t.UNMASKED_VENDOR_WEBGL);n&&(u.renderer=n.toLowerCase()),e&&(u.vendor=e.toLowerCase())}return this.gpuInfo=u,u}}})();function O(g){var i=g.targetCanvas,f=i.width,u=i.height,t=g.destinationWidth,n=g.destinationHeight;(f!==t||u!==n)&&(i.width=t,i.height=n)}function D(g,i){var f=g.canvas,u=i.targetCanvas,t=u.getContext("2d");t.translate(0,u.height),t.scale(1,-1);var n=f.height-u.height;t.drawImage(f,0,n,u.width,u.height,0,0,u.width,u.height)}function P(g,i){var f=i.targetCanvas,u=f.getContext("2d"),t=i.destinationWidth,n=i.destinationHeight,e=t*n*4,s=new Uint8Array(this.imageBuffer,0,e),v=new Uint8ClampedArray(this.imageBuffer,0,e);g.readPixels(0,0,t,n,g.RGBA,g.UNSIGNED_BYTE,s);var o=new ImageData(v,t,n);u.putImageData(o,0,0)}(function(){var g=function(){};h.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(f,u,t,n,e){var s=e.getContext("2d");s.drawImage(u,0,0,t,n);var v=s.getImageData(0,0,t,n),o=s.getImageData(0,0,t,n),m={sourceWidth:t,sourceHeight:n,imageData:v,originalEl:u,originalImageData:o,canvasEl:e,ctx:s,filterBackend:this};return f.forEach(function(C){C.applyTo(m)}),(m.imageData.width!==t||m.imageData.height!==n)&&(e.width=m.imageData.width,e.height=m.imageData.height),s.putImageData(m.imageData,0,0),m}}})(),h.Image=h.Image||{},h.Image.filters=h.Image.filters||{},h.Image.filters.BaseFilter=h.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var i in g)this[i]=g[i]},createProgram:function(g,i,f){i=i||this.fragmentSource,f=f||this.vertexSource,h.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+h.webGlPrecision+" float"));var u=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(u,f),g.compileShader(u),!g.getShaderParameter(u,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(u));var t=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(t,i),g.compileShader(t),!g.getShaderParameter(t,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(t));var n=g.createProgram();if(g.attachShader(n,u),g.attachShader(n,t),g.linkProgram(n),!g.getProgramParameter(n,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(n));var e=this.getAttributeLocations(g,n),s=this.getUniformLocations(g,n)||{};return s.uStepW=g.getUniformLocation(n,"uStepW"),s.uStepH=g.getUniformLocation(n,"uStepH"),{program:n,attributeLocations:e,uniformLocations:s}},getAttributeLocations:function(g,i){return{aPosition:g.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,i,f){var u=i.aPosition,t=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,t),g.enableVertexAttribArray(u),g.vertexAttribPointer(u,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,f,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var i=g.context,f,u;g.passes>1?(f=g.destinationWidth,u=g.destinationHeight,(g.sourceWidth!==f||g.sourceHeight!==u)&&(i.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(i,f,u)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,g.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(g){g.passes--,g.pass++;var i=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=i},isNeutralState:function(){var g=this.mainParameter,i=h.Image.filters[this.type].prototype;if(g)if(Array.isArray(i[g])){for(var f=i[g].length;f--;)if(this[g][f]!==i[g][f])return!1;return!0}else return i[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var i=g.context,f=this.retrieveShader(g);g.pass===0&&g.originalTexture?i.bindTexture(i.TEXTURE_2D,g.originalTexture):i.bindTexture(i.TEXTURE_2D,g.sourceTexture),i.useProgram(f.program),this.sendAttributeData(i,f.attributeLocations,g.aPosition),i.uniform1f(f.uniformLocations.uStepW,1/g.sourceWidth),i.uniform1f(f.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(i,f.uniformLocations),i.viewport(0,0,g.destinationWidth,g.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,i,f){g.activeTexture(f),g.bindTexture(g.TEXTURE_2D,i),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,i){g.activeTexture(i),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var i=document.createElement("canvas");i.width=g.sourceWidth,i.height=g.sourceHeight,g.helpLayer=i}},toObject:function(){var g={type:this.type},i=this.mainParameter;return i&&(g[i]=this[i]),g},toJSON:function(){return this.toObject()}}),h.Image.filters.BaseFilter.fromObject=function(g,i){var f=new h.Image.filters[g.type](g);return i&&i(f),f},(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.ColorMatrix=u(f.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var n=t.imageData,e=n.data,s=e.length,v=this.matrix,o,m,C,I,M,k=this.colorsOnly;for(M=0;M<s;M+=4)o=e[M],m=e[M+1],C=e[M+2],k?(e[M]=o*v[0]+m*v[1]+C*v[2]+v[4]*255,e[M+1]=o*v[5]+m*v[6]+C*v[7]+v[9]*255,e[M+2]=o*v[10]+m*v[11]+C*v[12]+v[14]*255):(I=e[M+3],e[M]=o*v[0]+m*v[1]+C*v[2]+I*v[3]+v[4]*255,e[M+1]=o*v[5]+m*v[6]+C*v[7]+I*v[8]+v[9]*255,e[M+2]=o*v[10]+m*v[11]+C*v[12]+I*v[13]+v[14]*255,e[M+3]=o*v[15]+m*v[16]+C*v[17]+I*v[18]+v[19]*255)},getUniformLocations:function(t,n){return{uColorMatrix:t.getUniformLocation(n,"uColorMatrix"),uConstants:t.getUniformLocation(n,"uConstants")}},sendUniformData:function(t,n){var e=this.matrix,s=[e[0],e[1],e[2],e[3],e[5],e[6],e[7],e[8],e[10],e[11],e[12],e[13],e[15],e[16],e[17],e[18]],v=[e[4],e[9],e[14],e[19]];t.uniformMatrix4fv(n.uColorMatrix,!1,s),t.uniform4fv(n.uConstants,v)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Brightness=u(f.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(this.brightness!==0){var n=t.imageData,e=n.data,s,v=e.length,o=Math.round(this.brightness*255);for(s=0;s<v;s+=4)e[s]=e[s]+o,e[s+1]=e[s+1]+o,e[s+2]=e[s+2]+o}},getUniformLocations:function(t,n){return{uBrightness:t.getUniformLocation(n,"uBrightness")}},sendUniformData:function(t,n){t.uniform1f(n.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.Image.filters,t=i.util.createClass;u.Convolute=t(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(n){var e=Math.sqrt(this.matrix.length),s=this.type+"_"+e+"_"+(this.opaque?1:0),v=this.fragmentSource[s];return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,v)),n.programCache[s]},applyTo2d:function(n){var e=n.imageData,s=e.data,v=this.matrix,o=Math.round(Math.sqrt(v.length)),m=Math.floor(o/2),C=e.width,I=e.height,M=n.ctx.createImageData(C,I),k=M.data,N=this.opaque?1:0,H,F,W,it,V,gt,J,mt,B,St,ct,Pt,Q;for(ct=0;ct<I;ct++)for(St=0;St<C;St++){for(V=(ct*C+St)*4,H=0,F=0,W=0,it=0,Q=0;Q<o;Q++)for(Pt=0;Pt<o;Pt++)J=ct+Q-m,gt=St+Pt-m,!(J<0||J>=I||gt<0||gt>=C)&&(mt=(J*C+gt)*4,B=v[Q*o+Pt],H+=s[mt]*B,F+=s[mt+1]*B,W+=s[mt+2]*B,N||(it+=s[mt+3]*B));k[V]=H,k[V+1]=F,k[V+2]=W,N?k[V+3]=s[V+3]:k[V+3]=it}n.imageData=M},getUniformLocations:function(n,e){return{uMatrix:n.getUniformLocation(e,"uMatrix"),uOpaque:n.getUniformLocation(e,"uOpaque"),uHalfSize:n.getUniformLocation(e,"uHalfSize"),uSize:n.getUniformLocation(e,"uSize")}},sendUniformData:function(n,e){n.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Grayscale=u(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(t){var n=t.imageData,e=n.data,s,v=e.length,o,m=this.mode;for(s=0;s<v;s+=4)m==="average"?o=(e[s]+e[s+1]+e[s+2])/3:m==="lightness"?o=(Math.min(e[s],e[s+1],e[s+2])+Math.max(e[s],e[s+1],e[s+2]))/2:m==="luminosity"&&(o=.21*e[s]+.72*e[s+1]+.07*e[s+2]),e[s]=o,e[s+1]=o,e[s+2]=o},retrieveShader:function(t){var n=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(n)){var e=this.fragmentSource[this.mode];t.programCache[n]=this.createProgram(t.context,e)}return t.programCache[n]},getUniformLocations:function(t,n){return{uMode:t.getUniformLocation(n,"uMode")}},sendUniformData:function(t,n){var e=1;t.uniform1i(n.uMode,e)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Invert=u(f.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(t){var n=t.imageData,e=n.data,s,v=e.length;for(s=0;s<v;s+=4)e[s]=255-e[s],e[s+1]=255-e[s+1],e[s+2]=255-e[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,n){return{uInvert:t.getUniformLocation(n,"uInvert")}},sendUniformData:function(t,n){t.uniform1i(n.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.Image.filters,t=i.util.createClass;u.Noise=t(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(n){if(this.noise!==0){var e=n.imageData,s=e.data,v,o=s.length,m=this.noise,C;for(v=0,o=s.length;v<o;v+=4)C=(.5-Math.random())*m,s[v]+=C,s[v+1]+=C,s[v+2]+=C}},getUniformLocations:function(n,e){return{uNoise:n.getUniformLocation(e,"uNoise"),uSeed:n.getUniformLocation(e,"uSeed")}},sendUniformData:function(n,e){n.uniform1f(e.uNoise,this.noise/255),n.uniform1f(e.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Pixelate=u(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(t){var n=t.imageData,e=n.data,s=n.height,v=n.width,o,m,C,I,M,k,N,H,F,W,it;for(m=0;m<s;m+=this.blocksize)for(C=0;C<v;C+=this.blocksize)for(o=m*4*v+C*4,I=e[o],M=e[o+1],k=e[o+2],N=e[o+3],W=Math.min(m+this.blocksize,s),it=Math.min(C+this.blocksize,v),H=m;H<W;H++)for(F=C;F<it;F++)o=H*4*v+F*4,e[o]=I,e[o+1]=M,e[o+2]=k,e[o+3]=N},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(t,n){return{uBlocksize:t.getUniformLocation(n,"uBlocksize"),uStepW:t.getUniformLocation(n,"uStepW"),uStepH:t.getUniformLocation(n,"uStepH")}},sendUniformData:function(t,n){t.uniform1f(n.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.extend,u=i.Image.filters,t=i.util.createClass;u.RemoveColor=t(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(n){var e=n.imageData,s=e.data,v,o=this.distance*255,m,C,I,M=new i.Color(this.color).getSource(),k=[M[0]-o,M[1]-o,M[2]-o],N=[M[0]+o,M[1]+o,M[2]+o];for(v=0;v<s.length;v+=4)m=s[v],C=s[v+1],I=s[v+2],m>k[0]&&C>k[1]&&I>k[2]&&m<N[0]&&C<N[1]&&I<N[2]&&(s[v+3]=0)},getUniformLocations:function(n,e){return{uLow:n.getUniformLocation(e,"uLow"),uHigh:n.getUniformLocation(e,"uHigh")}},sendUniformData:function(n,e){var s=new i.Color(this.color).getSource(),v=parseFloat(this.distance),o=[0+s[0]/255-v,0+s[1]/255-v,0+s[2]/255-v,1],m=[s[0]/255+v,s[1]/255+v,s[2]/255+v,1];n.uniform4fv(e.uLow,o),n.uniform4fv(e.uHigh,m)},toObject:function(){return f(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var n in t)f[n]=u(f.ColorMatrix,{type:n,matrix:t[n],mainParameter:!1,colorsOnly:!0}),i.Image.filters[n].fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric,f=i.Image.filters,u=i.util.createClass;f.BlendColor=u(f.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(t){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[t]+`}
}`},retrieveShader:function(t){var n=this.type+"_"+this.mode,e;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n=t.imageData,e=n.data,s=e.length,v,o,m,C,I,M,k,N=1-this.alpha;k=new i.Color(this.color).getSource(),v=k[0]*this.alpha,o=k[1]*this.alpha,m=k[2]*this.alpha;for(var H=0;H<s;H+=4)switch(C=e[H],I=e[H+1],M=e[H+2],this.mode){case"multiply":e[H]=C*v/255,e[H+1]=I*o/255,e[H+2]=M*m/255;break;case"screen":e[H]=255-(255-C)*(255-v)/255,e[H+1]=255-(255-I)*(255-o)/255,e[H+2]=255-(255-M)*(255-m)/255;break;case"add":e[H]=C+v,e[H+1]=I+o,e[H+2]=M+m;break;case"diff":case"difference":e[H]=Math.abs(C-v),e[H+1]=Math.abs(I-o),e[H+2]=Math.abs(M-m);break;case"subtract":e[H]=C-v,e[H+1]=I-o,e[H+2]=M-m;break;case"darken":e[H]=Math.min(C,v),e[H+1]=Math.min(I,o),e[H+2]=Math.min(M,m);break;case"lighten":e[H]=Math.max(C,v),e[H+1]=Math.max(I,o),e[H+2]=Math.max(M,m);break;case"overlay":e[H]=v<128?2*C*v/255:255-2*(255-C)*(255-v)/255,e[H+1]=o<128?2*I*o/255:255-2*(255-I)*(255-o)/255,e[H+2]=m<128?2*M*m/255:255-2*(255-M)*(255-m)/255;break;case"exclusion":e[H]=v+C-2*v*C/255,e[H+1]=o+I-2*o*I/255,e[H+2]=m+M-2*m*M/255;break;case"tint":e[H]=v+C*N,e[H+1]=o+I*N,e[H+2]=m+M*N}},getUniformLocations:function(t,n){return{uColor:t.getUniformLocation(n,"uColor")}},sendUniformData:function(t,n){var e=new i.Color(this.color).getSource();e[0]=this.alpha*e[0]/255,e[1]=this.alpha*e[1]/255,e[2]=this.alpha*e[2]/255,e[3]=this.alpha,t.uniform4fv(n.uColor,e)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric,f=i.Image.filters,u=i.util.createClass;f.BlendImage=u(f.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(t){var n=this.type+"_"+this.mode,e=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyToWebGL:function(t){var n=t.context,e=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(n,e,n.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(n,n.TEXTURE1)},createTexture:function(t,n){return t.getCachedTexture(n.cacheKey,n._element)},calculateMatrix:function(){var t=this.image,n=t._element.width,e=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/n,-t.top/e,1]},applyTo2d:function(t){var n=t.imageData,e=t.filterBackend.resources,s=n.data,v=s.length,o=n.width,m=n.height,C,I,M,k,N,H,F,W,it,V,gt=this.image,J;e.blendImage||(e.blendImage=i.util.createCanvasElement()),it=e.blendImage,V=it.getContext("2d"),it.width!==o||it.height!==m?(it.width=o,it.height=m):V.clearRect(0,0,o,m),V.setTransform(gt.scaleX,0,0,gt.scaleY,gt.left,gt.top),V.drawImage(gt._element,0,0,o,m),J=V.getImageData(0,0,o,m).data;for(var mt=0;mt<v;mt+=4)switch(N=s[mt],H=s[mt+1],F=s[mt+2],W=s[mt+3],C=J[mt],I=J[mt+1],M=J[mt+2],k=J[mt+3],this.mode){case"multiply":s[mt]=N*C/255,s[mt+1]=H*I/255,s[mt+2]=F*M/255,s[mt+3]=W*k/255;break;case"mask":s[mt+3]=k;break}},getUniformLocations:function(t,n){return{uTransformMatrix:t.getUniformLocation(n,"uTransformMatrix"),uImage:t.getUniformLocation(n,"uImage")}},sendUniformData:function(t,n){var e=this.calculateMatrix();t.uniform1i(n.uImage,1),t.uniformMatrix3fv(n.uTransformMatrix,!1,e)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(t,n){i.Image.fromObject(t.image,function(e){var s=i.util.object.clone(t);s.image=e,n(new i.Image.filters.BlendImage(s))})}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=Math.pow,u=Math.floor,t=Math.sqrt,n=Math.abs,e=Math.round,s=Math.sin,v=Math.ceil,o=i.Image.filters,m=i.util.createClass;o.Resize=m(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,I){return{uDelta:C.getUniformLocation(I,"uDelta"),uTaps:C.getUniformLocation(I,"uTaps")}},sendUniformData:function(C,I){C.uniform2fv(I.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(I.uTaps,this.taps)},retrieveShader:function(C){var I=this.getFilterWindow(),M=this.type+"_"+I;if(!C.programCache.hasOwnProperty(M)){var k=this.generateShader(I);C.programCache[M]=this.createProgram(C.context,k)}return C.programCache[M]},getFilterWindow:function(){var C=this.tempScale;return Math.ceil(this.lanczosLobes/C)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),I=this.tempScale,M=this.getFilterWindow(),k=new Array(M),N=1;N<=M;N++)k[N-1]=C(N*I);return k},generateShader:function(k){for(var I=new Array(k),M=this.fragmentSourceTOP,k,N=1;N<=k;N++)I[N-1]=N+".0 * uDelta";return M+="uniform float uTaps["+k+`];
`,M+=`void main() {
`,M+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,M+=`  float sum = 1.0;
`,I.forEach(function(H,F){M+="  color += texture2D(uTexture, vTexCoord + "+H+") * uTaps["+F+`];
`,M+="  color += texture2D(uTexture, vTexCoord - "+H+") * uTaps["+F+`];
`,M+="  sum += 2.0 * uTaps["+F+`];
`}),M+=`  gl_FragColor = color / sum;
`,M+="}",M},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(C){return function(I){if(I>=C||I<=-C)return 0;if(I<11920929e-14&&I>-11920929e-14)return 1;I*=Math.PI;var M=I/C;return s(I)/I*s(M)/M}},applyTo2d:function(C){var I=C.imageData,M=this.scaleX,k=this.scaleY;this.rcpScaleX=1/M,this.rcpScaleY=1/k;var N=I.width,H=I.height,F=e(N*M),W=e(H*k),it;this.resizeType==="sliceHack"?it=this.sliceByTwo(C,N,H,F,W):this.resizeType==="hermite"?it=this.hermiteFastResize(C,N,H,F,W):this.resizeType==="bilinear"?it=this.bilinearFiltering(C,N,H,F,W):this.resizeType==="lanczos"&&(it=this.lanczosResize(C,N,H,F,W)),C.imageData=it},sliceByTwo:function(C,I,M,k,N){var H=C.imageData,F=.5,W=!1,it=!1,V=I*F,gt=M*F,J=i.filterBackend.resources,mt,B,St=0,ct=0,Pt=I,Q=0;for(J.sliceByTwo||(J.sliceByTwo=document.createElement("canvas")),mt=J.sliceByTwo,(mt.width<I*1.5||mt.height<M)&&(mt.width=I*1.5,mt.height=M),B=mt.getContext("2d"),B.clearRect(0,0,I*1.5,M),B.putImageData(H,0,0),k=u(k),N=u(N);!W||!it;)I=V,M=gt,k<u(V*F)?V=u(V*F):(V=k,W=!0),N<u(gt*F)?gt=u(gt*F):(gt=N,it=!0),B.drawImage(mt,St,ct,I,M,Pt,Q,V,gt),St=Pt,ct=Q,Q+=gt;return B.getImageData(St,ct,k,N)},lanczosResize:function(C,I,M,k,N){function H($){var X,at,Y,G,Z,q,pt,ft,It,bt,Mt;for(Q.x=($+.5)*gt,rt.x=u(Q.x),X=0;X<N;X++){for(Q.y=(X+.5)*J,rt.y=u(Q.y),Z=0,q=0,pt=0,ft=0,It=0,at=rt.x-St;at<=rt.x+St;at++)if(!(at<0||at>=I)){bt=u(1e3*n(at-Q.x)),Pt[bt]||(Pt[bt]={});for(var ot=rt.y-ct;ot<=rt.y+ct;ot++)ot<0||ot>=M||(Mt=u(1e3*n(ot-Q.y)),Pt[bt][Mt]||(Pt[bt][Mt]=V(t(f(bt*mt,2)+f(Mt*B,2))/1e3)),Y=Pt[bt][Mt],Y>0&&(G=(ot*I+at)*4,Z+=Y,q+=Y*F[G],pt+=Y*F[G+1],ft+=Y*F[G+2],It+=Y*F[G+3]))}G=(X*k+$)*4,it[G]=q/Z,it[G+1]=pt/Z,it[G+2]=ft/Z,it[G+3]=It/Z}return++$<k?H($):W}var F=C.imageData.data,W=C.ctx.createImageData(k,N),it=W.data,V=this.lanczosCreate(this.lanczosLobes),gt=this.rcpScaleX,J=this.rcpScaleY,mt=2/this.rcpScaleX,B=2/this.rcpScaleY,St=v(gt*this.lanczosLobes/2),ct=v(J*this.lanczosLobes/2),Pt={},Q={},rt={};return H(0)},bilinearFiltering:function(C,I,M,k,N){var H,F,W,it,V,gt,J,mt,B,St,ct,Pt,Q=0,rt,$=this.rcpScaleX,X=this.rcpScaleY,at=4*(I-1),Y=C.imageData,G=Y.data,Z=C.ctx.createImageData(k,N),q=Z.data;for(J=0;J<N;J++)for(mt=0;mt<k;mt++)for(V=u($*mt),gt=u(X*J),B=$*mt-V,St=X*J-gt,rt=4*(gt*I+V),ct=0;ct<4;ct++)H=G[rt+ct],F=G[rt+4+ct],W=G[rt+at+ct],it=G[rt+at+4+ct],Pt=H*(1-B)*(1-St)+F*B*(1-St)+W*St*(1-B)+it*B*St,q[Q++]=Pt;return Z},hermiteFastResize:function(C,I,M,k,N){for(var H=this.rcpScaleX,F=this.rcpScaleY,W=v(H/2),it=v(F/2),V=C.imageData,gt=V.data,J=C.ctx.createImageData(k,N),mt=J.data,B=0;B<N;B++)for(var St=0;St<k;St++){for(var ct=(St+B*k)*4,Pt=0,Q=0,rt=0,$=0,X=0,at=0,Y=0,G=(B+.5)*F,Z=u(B*F);Z<(B+1)*F;Z++)for(var q=n(G-(Z+.5))/it,pt=(St+.5)*H,ft=q*q,It=u(St*H);It<(St+1)*H;It++){var bt=n(pt-(It+.5))/W,Mt=t(ft+bt*bt);Mt>1&&Mt<-1||(Pt=2*Mt*Mt*Mt-3*Mt*Mt+1,Pt>0&&(bt=4*(It+Z*I),Y+=Pt*gt[bt+3],rt+=Pt,gt[bt+3]<255&&(Pt=Pt*gt[bt+3]/250),$+=Pt*gt[bt],X+=Pt*gt[bt+1],at+=Pt*gt[bt+2],Q+=Pt))}mt[ct]=$/Q,mt[ct+1]=X/Q,mt[ct+2]=at/Q,mt[ct+3]=Y/rt}return J},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Contrast=u(f.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(this.contrast!==0){var n=t.imageData,e,v,s=n.data,v=s.length,o=Math.floor(this.contrast*255),m=259*(o+255)/(255*(259-o));for(e=0;e<v;e+=4)s[e]=m*(s[e]-128)+128,s[e+1]=m*(s[e+1]-128)+128,s[e+2]=m*(s[e+2]-128)+128}},getUniformLocations:function(t,n){return{uContrast:t.getUniformLocation(n,"uContrast")}},sendUniformData:function(t,n){t.uniform1f(n.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Saturation=u(f.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(this.saturation!==0){var n=t.imageData,e=n.data,s=e.length,v=-this.saturation,o,m;for(o=0;o<s;o+=4)m=Math.max(e[o],e[o+1],e[o+2]),e[o]+=m!==e[o]?(m-e[o])*v:0,e[o+1]+=m!==e[o+1]?(m-e[o+1])*v:0,e[o+2]+=m!==e[o+2]?(m-e[o+2])*v:0}},getUniformLocations:function(t,n){return{uSaturation:t.getUniformLocation(n,"uSaturation")}},sendUniformData:function(t,n){t.uniform1f(n.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Vibrance=u(f.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(this.vibrance!==0){var n=t.imageData,e=n.data,s=e.length,v=-this.vibrance,o,m,C,I;for(o=0;o<s;o+=4)m=Math.max(e[o],e[o+1],e[o+2]),C=(e[o]+e[o+1]+e[o+2])/3,I=Math.abs(m-C)*2/255*v,e[o]+=m!==e[o]?(m-e[o])*I:0,e[o+1]+=m!==e[o+1]?(m-e[o+1])*I:0,e[o+2]+=m!==e[o+2]?(m-e[o+2])*I:0}},getUniformLocations:function(t,n){return{uVibrance:t.getUniformLocation(n,"uVibrance")}},sendUniformData:function(t,n){t.uniform1f(n.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Blur=u(f.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n=t.filterBackend.resources,e,s,v=t.imageData.width,o=t.imageData.height;n.blurLayer1||(n.blurLayer1=i.util.createCanvasElement(),n.blurLayer2=i.util.createCanvasElement()),e=n.blurLayer1,s=n.blurLayer2,(e.width!==v||e.height!==o)&&(s.width=e.width=v,s.height=e.height=o);var m=e.getContext("2d"),C=s.getContext("2d"),I=15,M,k,N,H,F=this.blur*.06*.5;for(m.putImageData(t.imageData,0,0),C.clearRect(0,0,v,o),H=-I;H<=I;H++)M=(Math.random()-.5)/4,k=H/I,N=F*k*v+M,C.globalAlpha=1-Math.abs(k),C.drawImage(e,N,M),m.drawImage(s,0,0),C.globalAlpha=1,C.clearRect(0,0,s.width,s.height);for(H=-I;H<=I;H++)M=(Math.random()-.5)/4,k=H/I,N=F*k*o+M,C.globalAlpha=1-Math.abs(k),C.drawImage(e,M,N),m.drawImage(s,0,0),C.globalAlpha=1,C.clearRect(0,0,s.width,s.height);t.ctx.drawImage(e,0,0);var W=t.ctx.getImageData(0,0,e.width,e.height);return m.globalAlpha=1,m.clearRect(0,0,e.width,e.height),W},getUniformLocations:function(t,n){return{delta:t.getUniformLocation(n,"uDelta")}},sendUniformData:function(t,n){var e=this.chooseRightDelta();t.uniform2fv(n.delta,e)},chooseRightDelta:function(){var t=1,n=[0,0],e;return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?n[0]=e:n[1]=e,n}}),f.Blur.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Gamma=u(f.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],f.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var n=t.imageData,e=n.data,s=this.gamma,v=e.length,o=1/s[0],m=1/s[1],C=1/s[2],I;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),I=0,v=256;I<v;I++)this.rVals[I]=Math.pow(I/255,o)*255,this.gVals[I]=Math.pow(I/255,m)*255,this.bVals[I]=Math.pow(I/255,C)*255;for(I=0,v=e.length;I<v;I+=4)e[I]=this.rVals[e[I]],e[I+1]=this.gVals[e[I+1]],e[I+2]=this.bVals[e[I+2]]},getUniformLocations:function(t,n){return{uGamma:t.getUniformLocation(n,"uGamma")}},sendUniformData:function(t,n){t.uniform3fv(n.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.Composed=u(f.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(n){n.applyTo(t)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(t,n){var e=t.subFilters||[],s=e.map(function(o){return new i.Image.filters[o.type](o)}),v=new i.Image.filters.Composed({subFilters:s});return n&&n(v),v}})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.Image.filters,u=i.util.createClass;f.HueRotation=u(f.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=i.util.cos(t),e=i.util.sin(t),s=1/3,v=Math.sqrt(s)*e,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=s*o-v,this.matrix[2]=s*o+v,this.matrix[5]=s*o+v,this.matrix[6]=n+s*o,this.matrix[7]=s*o-v,this.matrix[10]=s*o-v,this.matrix[11]=s*o+v,this.matrix[12]=n+s*o},isNeutralState:function(t){return this.calculateMatrix(),f.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),f.BaseFilter.prototype.applyTo.call(this,t)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject})(b),(function(g){var i=g.fabric||(g.fabric={}),f=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(u),cacheProperties:i.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,n){this.styles=n?n.styles||{}:{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",n),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=i.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,n,e,s,v,o,m,C=0,I=this._textLines.length;C<I;C++)if(!(this.textAlign!=="justify"&&(C===I-1||this.isEndOfWrapping(C)))&&(s=0,v=this._textLines[C],n=this.getLineWidth(C),n<this.width&&(m=this.textLines[C].match(this._reSpacesAndTabs)))){e=m.length,t=(this.width-n)/e;for(var M=0,k=v.length;M<=k;M++)o=this.__charBounds[C][M],this._reSpaceAndTab.test(v[M])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return t.width+=n*t.zoomX,t.height+=n*t.zoomY,t},_render:function(t){var n=this.path;n&&!n.isNotVisible()&&n._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,n,e){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(n,e)},calcTextWidth:function(){for(var t=this.getLineWidth(0),n=1,e=this._textLines.length;n<e;n++){var s=this.getLineWidth(n);s>t&&(t=s)}return t},_renderTextLine:function(t,n,e,s,v,o){this._renderChars(t,n,e,s,v,o)},_renderTextLinesBackground:function(t){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n,e,s=t.fillStyle,v,o,m=this._getLeftOffset(),C=this._getTopOffset(),I=0,M=0,k,N,H=this.path,F,W=0,it=this._textLines.length;W<it;W++){if(n=this.getHeightOfLine(W),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",W)){C+=n;continue}v=this._textLines[W],e=this._getLineLeftOffset(W),M=0,I=0,o=this.getValueOfPropertyAt(W,0,"textBackgroundColor");for(var V=0,gt=v.length;V<gt;V++)k=this.__charBounds[W][V],N=this.getValueOfPropertyAt(W,V,"textBackgroundColor"),H?(t.save(),t.translate(k.renderLeft,k.renderTop),t.rotate(k.angle),t.fillStyle=N,N&&t.fillRect(-k.width/2,-n/this.lineHeight*(1-this._fontSizeFraction),k.width,n/this.lineHeight),t.restore()):N!==o?(F=m+e+I,this.direction==="rtl"&&(F=this.width-F-M),t.fillStyle=o,o&&t.fillRect(F,C,M,n/this.lineHeight),I=k.left,M=k.width,o=N):M+=k.kernedWidth;N&&!H&&(F=m+e+I,this.direction==="rtl"&&(F=this.width-F-M),t.fillStyle=N,t.fillRect(F,C,M,n/this.lineHeight)),C+=n}t.fillStyle=s,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();i.charWidthsCache[n]||(i.charWidthsCache[n]={});var e=i.charWidthsCache[n],s=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return e[s]||(e[s]={}),e[s]},_measureChar:function(t,n,e,s){var v=this.getFontCache(n),o=this._getFontDeclaration(n),m=this._getFontDeclaration(s),C=e+t,I=o===m,M,k,N,H=n.fontSize/this.CACHE_FONT_SIZE,F;if(e&&v[e]!==void 0&&(N=v[e]),v[t]!==void 0&&(F=M=v[t]),I&&v[C]!==void 0&&(k=v[C],F=k-N),M===void 0||N===void 0||k===void 0){var W=this.getMeasuringContext();this._setTextStyles(W,n,!0)}return M===void 0&&(F=M=W.measureText(t).width,v[t]=M),N===void 0&&I&&e&&(N=W.measureText(e).width,v[e]=N),I&&k===void 0&&(k=W.measureText(C).width,v[C]=k,F=k-N),{width:M*H,kernedWidth:F*H}},getHeightOfChar:function(t,n){return this.getValueOfPropertyAt(t,n,"fontSize")},measureLine:function(t){var n=this._measureLine(t);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(t){var n=0,e,s,v=this._textLines[t],o,m,C=0,I=new Array(v.length),M=0,k,N,H=this.path,F=this.pathSide==="right";for(this.__charBounds[t]=I,e=0;e<v.length;e++)s=v[e],m=this._getGraphemeBox(s,t,e,o),I[e]=m,n+=m.kernedWidth,o=s;if(I[e]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},H){switch(N=H.segmentsInfo[H.segmentsInfo.length-1].length,k=i.util.getPointOnPath(H.path,0,H.segmentsInfo),k.x+=H.pathOffset.x,k.y+=H.pathOffset.y,this.textAlign){case"left":M=F?N-n:0;break;case"center":M=(N-n)/2;break;case"right":M=F?0:N-n;break}for(M+=this.pathStartOffset*(F?-1:1),e=F?v.length-1:0;F?e>=0:e<v.length;F?e--:e++)m=I[e],M>N?M%=N:M<0&&(M+=N),this._setGraphemeOnPath(M,m,k),M+=m.kernedWidth}return{width:n,numOfSpaces:C}},_setGraphemeOnPath:function(t,n,e){var s=t+n.kernedWidth/2,v=this.path,o=i.util.getPointOnPath(v.path,s,v.segmentsInfo);n.renderLeft=o.x-e.x,n.renderTop=o.y-e.y,n.angle=o.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(t,n,e,s,v){var o=this.getCompleteStyleDeclaration(n,e),m=s?this.getCompleteStyleDeclaration(n,e-1):{},C=this._measureChar(t,o,s,m),I=C.kernedWidth,M=C.width,k;this.charSpacing!==0&&(k=this._getWidthOfCharSpacing(),M+=k,I+=k);var N={width:M,left:0,height:o.fontSize,kernedWidth:I,deltaY:o.deltaY};if(e>0&&!v){var H=this.__charBounds[n][e-1];N.left=H.left+H.width+C.kernedWidth-C.width}return N},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var n=this._textLines[t],e=this.getHeightOfChar(t,0),s=1,v=n.length;s<v;s++)e=Math.max(this.getHeightOfChar(t,s),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,n=0,e=0,s=this._textLines.length;e<s;e++)t=this.getHeightOfLine(e),n+=e===s-1?t/this.lineHeight:t;return n},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,n){t.save();for(var e=0,s=this._getLeftOffset(),v=this._getTopOffset(),o=0,m=this._textLines.length;o<m;o++){var C=this.getHeightOfLine(o),I=C/this.lineHeight,M=this._getLineLeftOffset(o);this._renderTextLine(n,t,this._textLines[o],s+M,v+e+I,o),e+=C}t.restore()},_renderTextFill:function(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,n,e,s,v,o){var m=this.getHeightOfLine(o),C=this.textAlign.indexOf("justify")!==-1,I,M,k="",N,H=0,F,W=this.path,it=!C&&this.charSpacing===0&&this.isEmptyStyles(o)&&!W,V=this.direction==="ltr",gt=this.direction==="ltr"?1:-1,J;if(n.save(),v-=m*this._fontSizeFraction/this.lineHeight,it){n.canvas.setAttribute("dir",V?"ltr":"rtl"),n.direction=V?"ltr":"rtl",n.textAlign=V?"left":"right",this._renderChar(t,n,o,0,e.join(""),s,v,m),n.restore();return}for(var mt=0,B=e.length-1;mt<=B;mt++)F=mt===B||this.charSpacing||W,k+=e[mt],N=this.__charBounds[o][mt],H===0?(s+=gt*(N.kernedWidth-N.width),H+=N.width):H+=N.kernedWidth,C&&!F&&this._reSpaceAndTab.test(e[mt])&&(F=!0),F||(I=I||this.getCompleteStyleDeclaration(o,mt),M=this.getCompleteStyleDeclaration(o,mt+1),F=this._hasStyleChanged(I,M)),F&&(W?(n.save(),n.translate(N.renderLeft,N.renderTop),n.rotate(N.angle),this._renderChar(t,n,o,mt,k,-H/2,0,m),n.restore()):(J=s,n.canvas.setAttribute("dir",V?"ltr":"rtl"),n.direction=V?"ltr":"rtl",n.textAlign=V?"left":"right",this._renderChar(t,n,o,mt,k,J,v,m)),k="",I=M,s+=gt*H,H=0);n.restore()},_applyPatternGradientTransformText:function(t){var n=i.util.createCanvasElement(),e,s=this.width+this.strokeWidth,v=this.height+this.strokeWidth;return n.width=s,n.height=v,e=n.getContext("2d"),e.beginPath(),e.moveTo(0,0),e.lineTo(s,0),e.lineTo(s,v),e.lineTo(0,v),e.closePath(),e.translate(s/2,v/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(n,"no-repeat")},handleFiller:function(t,n,e){var s,v;return e.toLive?e.gradientUnits==="percentage"||e.gradientTransform||e.patternTransform?(s=-this.width/2,v=-this.height/2,t.translate(s,v),t[n]=this._applyPatternGradientTransformText(e),{offsetX:s,offsetY:v}):(t[n]=e.toLive(t,this),this._applyPatternGradientTransform(t,e)):(t[n]=e,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,n){return t.lineWidth=n.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n.stroke)},_setFillStyles:function(t,n){return this.handleFiller(t,"fillStyle",n.fill)},_renderChar:function(t,n,e,s,v,o,m){var C=this._getStyleDeclaration(e,s),I=this.getCompleteStyleDeclaration(e,s),M=t==="fillText"&&I.fill,k=t==="strokeText"&&I.stroke&&I.strokeWidth,N,H;!k&&!M||(n.save(),M&&(N=this._setFillStyles(n,I)),k&&(H=this._setStrokeStyles(n,I)),n.font=this._getFontDeclaration(I),C&&C.textBackgroundColor&&this._removeShadow(n),C&&C.deltaY&&(m+=C.deltaY),M&&n.fillText(v,o-N.offsetX,m-N.offsetY),k&&n.strokeText(v,o-H.offsetX,m-H.offsetY),n.restore())},setSuperscript:function(t,n){return this._setScript(t,n,this.superscript)},setSubscript:function(t,n){return this._setScript(t,n,this.subscript)},_setScript:function(t,n,e){var s=this.get2DCursorLocation(t,!0),v=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),m={fontSize:v*e.size,deltaY:o+v*e.baseline};return this.setSelectionStyles(m,t,n),this},_hasStyleChanged:function(t,n){return t.fill!==n.fill||t.stroke!==n.stroke||t.strokeWidth!==n.strokeWidth||t.fontSize!==n.fontSize||t.fontFamily!==n.fontFamily||t.fontWeight!==n.fontWeight||t.fontStyle!==n.fontStyle||t.deltaY!==n.deltaY},_hasStyleChangedForSvg:function(t,n){return this._hasStyleChanged(t,n)||t.overline!==n.overline||t.underline!==n.underline||t.linethrough!==n.linethrough},_getLineLeftOffset:function(t){var n=this.getLineWidth(t),e=this.width-n,s=this.textAlign,v=this.direction,m,o=0,m=this.isEndOfWrapping(t);return s==="justify"||s==="justify-center"&&!m||s==="justify-right"&&!m||s==="justify-left"&&!m?0:(s==="center"&&(o=e/2),s==="right"&&(o=e),s==="justify-center"&&(o=e/2),s==="justify-right"&&(o=e),v==="rtl"&&(o-=e),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var n,e=this._textLines[t],s;return e===""?n=0:(s=this.measureLine(t),n=s.width),this.__lineWidths[t]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,n,e){var s=this._getStyleDeclaration(t,n);return s&&typeof s[e]<"u"?s[e]:this[e]},_renderTextDecoration:function(t,n){if(!(!this[n]&&!this.styleHas(n))){for(var e,s,v,o,m,C,I,M,k=this._getLeftOffset(),N=this._getTopOffset(),H,F,W,it,V,gt,J,mt,B=this.path,St=this._getWidthOfCharSpacing(),ct=this.offsets[n],Pt=0,Q=this._textLines.length;Pt<Q;Pt++){if(e=this.getHeightOfLine(Pt),!this[n]&&!this.styleHas(n,Pt)){N+=e;continue}I=this._textLines[Pt],gt=e/this.lineHeight,o=this._getLineLeftOffset(Pt),F=0,W=0,M=this.getValueOfPropertyAt(Pt,0,n),mt=this.getValueOfPropertyAt(Pt,0,"fill"),H=N+gt*(1-this._fontSizeFraction),s=this.getHeightOfChar(Pt,0),m=this.getValueOfPropertyAt(Pt,0,"deltaY");for(var rt=0,$=I.length;rt<$;rt++)if(it=this.__charBounds[Pt][rt],V=this.getValueOfPropertyAt(Pt,rt,n),J=this.getValueOfPropertyAt(Pt,rt,"fill"),v=this.getHeightOfChar(Pt,rt),C=this.getValueOfPropertyAt(Pt,rt,"deltaY"),B&&V&&J)t.save(),t.fillStyle=mt,t.translate(it.renderLeft,it.renderTop),t.rotate(it.angle),t.fillRect(-it.kernedWidth/2,ct*v+C,it.kernedWidth,this.fontSize/15),t.restore();else if((V!==M||J!==mt||v!==s||C!==m)&&W>0){var X=k+o+F;this.direction==="rtl"&&(X=this.width-X-W),M&&mt&&(t.fillStyle=mt,t.fillRect(X,H+ct*s+m,W,this.fontSize/15)),F=it.left,W=it.width,M=V,mt=J,s=v,m=C}else W+=it.kernedWidth;var X=k+o+F;this.direction==="rtl"&&(X=this.width-X-W),t.fillStyle=J,V&&J&&t.fillRect(X,H+ct*s+m,W-St,this.fontSize/15),N+=e}this._removeShadow(t)}},_getFontDeclaration:function(t,n){var e=t||this,s=this.fontFamily,v=i.Text.genericFonts.indexOf(s.toLowerCase())>-1,o=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||v?e.fontFamily:'"'+e.fontFamily+'"';return[i.isLikelyNode?e.fontWeight:e.fontStyle,i.isLikelyNode?e.fontStyle:e.fontWeight,n?this.CACHE_FONT_SIZE+"px":e.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),e=new Array(n.length),s=[`
`],v=[],o=0;o<n.length;o++)e[o]=i.util.string.graphemeSplit(n[o]),v=v.concat(e[o],s);return v.pop(),{_unwrappedLines:e,lines:n,graphemeText:v,graphemeLines:e}},toObject:function(t){var n=u.concat(t),e=this.callSuper("toObject",n);return e.styles=f(this.styles,!0),e.path&&(e.path=this.path.toObject()),e},set:function(t,n){this.callSuper("set",t,n);var e=!1,s=!1;if(typeof t=="object")for(var v in t)v==="path"&&this.setPathInfo(),e=e||this._dimensionAffectingProps.indexOf(v)!==-1,s=s||v==="path";else e=this._dimensionAffectingProps.indexOf(t)!==-1,s=t==="path";return s&&this.setPathInfo(),e&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(t,n,e){if(!t)return n(null);var s=i.parseAttributes(t,i.Text.ATTRIBUTE_NAMES),v=s.textAnchor||"left";if(e=i.util.object.extend(e?f(e):{},s),e.top=e.top||0,e.left=e.left||0,s.textDecoration){var o=s.textDecoration;o.indexOf("underline")!==-1&&(e.underline=!0),o.indexOf("overline")!==-1&&(e.overline=!0),o.indexOf("line-through")!==-1&&(e.linethrough=!0),delete e.textDecoration}"dx"in s&&(e.left+=s.dx),"dy"in s&&(e.top+=s.dy),"fontSize"in e||(e.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in t?m=t.textContent:"firstChild"in t&&t.firstChild!==null&&"data"in t.firstChild&&t.firstChild.data!==null&&(m=t.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=e.strokeWidth;e.strokeWidth=0;var I=new i.Text(m,e),M=I.getScaledHeight()/I.height,k=(I.height+I.strokeWidth)*I.lineHeight-I.height,N=k*M,H=I.getScaledHeight()+N,F=0;v==="center"&&(F=I.getScaledWidth()/2),v==="right"&&(F=I.getScaledWidth()),I.set({left:I.left-F,top:I.top-(H-I.fontSize*(.07+I._fontSizeFraction))/I.lineHeight,strokeWidth:typeof C<"u"?C:1}),n(I)},i.Text.fromObject=function(t,n){var e=f(t),s=t.path;return delete e.path,i.Object._fromObject("Text",e,function(v){s?i.Object._fromObject("Path",s,function(o){v.set("path",o),n(v)},"path"):n(v)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)})(b),(function(){h.util.object.extend(h.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var i=typeof g>"u"?this.styles:{line:this.styles[g]};for(var f in i)for(var u in i[f])for(var t in i[f][u])return!1;return!0},styleHas:function(g,i){if(!this.styles||!g||g===""||typeof i<"u"&&!this.styles[i])return!1;var f=typeof i>"u"?this.styles:{0:this.styles[i]};for(var u in f)for(var t in f[u])if(typeof f[u][t][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var i=this.styles,f=0,u,t,n=!0,e=0,s;for(var v in i){u=0;for(var o in i[v]){var s=i[v][o],m=s.hasOwnProperty(g);f++,m?(t?s[g]!==t&&(n=!1):t=s[g],s[g]===this[g]&&delete s[g]):n=!1,Object.keys(s).length!==0?u++:delete i[v][o]}u===0&&delete i[v]}for(var C=0;C<this._textLines.length;C++)e+=this._textLines[C].length;n&&f===e&&(this[g]=t,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var i=this.styles,f,u,t;for(u in i){f=i[u];for(t in f)delete f[t][g],Object.keys(f[t]).length===0&&delete f[t];Object.keys(f).length===0&&delete i[u]}}},_extendStyles:function(g,i){var f=this.get2DCursorLocation(g);this._getLineStyle(f.lineIndex)||this._setLineStyle(f.lineIndex),this._getStyleDeclaration(f.lineIndex,f.charIndex)||this._setStyleDeclaration(f.lineIndex,f.charIndex,{}),h.util.object.extend(this._getStyleDeclaration(f.lineIndex,f.charIndex),i)},get2DCursorLocation:function(g,i){typeof g>"u"&&(g=this.selectionStart);for(var f=i?this._unwrappedTextLines:this._textLines,u=f.length,t=0;t<u;t++){if(g<=f[t].length)return{lineIndex:t,charIndex:g};g-=f[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:f[t-1].length<g?f[t-1].length:g}},getSelectionStyles:function(g,i,f){typeof g>"u"&&(g=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||g);for(var u=[],t=g;t<i;t++)u.push(this.getStyleAtPosition(t,f));return u},getStyleAtPosition:function(g,i){var f=this.get2DCursorLocation(g),u=i?this.getCompleteStyleDeclaration(f.lineIndex,f.charIndex):this._getStyleDeclaration(f.lineIndex,f.charIndex);return u||{}},setSelectionStyles:function(g,i,f){typeof i>"u"&&(i=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||i);for(var u=i;u<f;u++)this._extendStyles(u,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,i){var f=this.styles&&this.styles[g];return f?f[i]:null},getCompleteStyleDeclaration:function(g,i){for(var f=this._getStyleDeclaration(g,i)||{},u={},t,n=0;n<this._styleProperties.length;n++)t=this._styleProperties[n],u[t]=typeof f[t]>"u"?this[t]:f[t];return u},_setStyleDeclaration:function(g,i,f){this.styles[g][i]=f},_deleteStyleDeclaration:function(g,i){delete this.styles[g][i]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})})(),(function(){function g(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}h.IText=h.util.createClass(h.Text,h.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,f){this.callSuper("initialize",i,f),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,f){this[i]!==f&&(this._fireSelectionChanged(),this[i]=f),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this.canvas.contextTop,u=this.canvas.viewportTransform;f.save(),f.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(f),this._clearTextArea(f),i||f.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),f=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,f):this.renderSelection(i,f),f.restore()}},_clearTextArea:function(i){var f=this.width+4,u=this.height+4;i.clearRect(-f/2,-u/2,f,u)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var f=this._getLeftOffset(),u=this._getTopOffset(),t=this._getCursorBoundariesOffsets(i);return{left:f,top:u,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var f,u,t,n=0,e=0,s,v=this.get2DCursorLocation(i);t=v.charIndex,u=v.lineIndex;for(var o=0;o<u;o++)n+=this.getHeightOfLine(o);f=this._getLineLeftOffset(u);var m=this.__charBounds[u][t];return m&&(e=m.left),this.charSpacing!==0&&t===this._textLines[u].length&&(e-=this._getWidthOfCharSpacing()),s={top:n,left:f+(e>0?e:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(i,f){var u=this.get2DCursorLocation(),t=u.lineIndex,n=u.charIndex>0?u.charIndex-1:0,e=this.getValueOfPropertyAt(t,n,"fontSize"),s=this.scaleX*this.canvas.getZoom(),v=this.cursorWidth/s,o=i.topOffset,m=this.getValueOfPropertyAt(t,n,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-e*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,f),f.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,n,"fill"),f.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,f.fillRect(i.left+i.leftOffset-v/2,o+i.top+m,v,e)},renderSelection:function(i,f){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=this.textAlign.indexOf("justify")!==-1,e=this.get2DCursorLocation(u),s=this.get2DCursorLocation(t),v=e.lineIndex,o=s.lineIndex,m=e.charIndex<0?0:e.charIndex,C=s.charIndex<0?0:s.charIndex,I=v;I<=o;I++){var M=this._getLineLeftOffset(I)||0,k=this.getHeightOfLine(I),N=0,H=0,F=0;if(I===v&&(H=this.__charBounds[v][m].left),I>=v&&I<o)F=n&&!this.isEndOfWrapping(I)?this.width:this.getLineWidth(I)||5;else if(I===o)if(C===0)F=this.__charBounds[o][C].left;else{var W=this._getWidthOfCharSpacing();F=this.__charBounds[o][C-1].left+this.__charBounds[o][C-1].width-W}N=k,(this.lineHeight<1||I===o&&this.lineHeight>1)&&(k/=this.lineHeight);var it=i.left+M+H,V=F-H,gt=k,J=0;this.inCompositionMode?(f.fillStyle=this.compositionColor||"black",gt=1,J=k):f.fillStyle=this.selectionColor,this.direction==="rtl"&&(it=this.width-it-V),f.fillRect(it,i.top+i.topOffset+J,V,gt),i.topOffset+=N}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),f=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:f}}}),h.IText.fromObject=function(i,f){if(g(i),i.styles)for(var u in i.styles)for(var t in i.styles[u])g(i.styles[u][t]);h.Object._fromObject("IText",i,f,"text")}})(),(function(){var g=h.util.object.clone;h.util.object.extend(h.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var f=i.canvas;f&&(f._hasITextHandlers||(f._hasITextHandlers=!0,i._initCanvasHandlers(f)),f._iTextInstances=f._iTextInstances||[],f._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var f=i.canvas;f&&(f._iTextInstances=f._iTextInstances||[],h.util.removeFromArray(f._iTextInstances,i),f._iTextInstances.length===0&&(f._hasITextHandlers=!1,i._removeCanvasHandlers(f)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(f){f.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,f,u,t){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",f,{duration:u,onComplete:function(){n.isAborted||i[t]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var f=this,u=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){f._tick()},u)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,f=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&f&&f.clearContext(f.contextTop||f.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var f=0,u=i-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)f++,u--;for(;/\S/.test(this._text[u])&&u>-1;)f++,u--;return i-f},findWordBoundaryRight:function(i){var f=0,u=i;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)f++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)f++,u++;return i+f},findLineBoundaryLeft:function(i){for(var f=0,u=i-1;!/\n/.test(this._text[u])&&u>-1;)f++,u--;return i-f},findLineBoundaryRight:function(i){for(var f=0,u=i;!/\n/.test(this._text[u])&&u<this._text.length;)f++,u++;return i+f},searchWordBoundary:function(i,f){for(var u=this._text,t=this._reSpace.test(u[i])?i-1:i,n=u[t],e=h.reNonWord;!e.test(n)&&t>0&&t<u.length;)t+=f,n=u[t];return e.test(n)&&(t+=f===1?0:1),t},selectWord:function(i){i=i||this.selectionStart;var f=this.searchWordBoundary(i,-1),u=this.searchWordBoundary(i,1);this.selectionStart=f,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var f=this.findLineBoundaryLeft(i),u=this.findLineBoundaryRight(i);return this.selectionStart=f,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(f){f.selected=!1,f.isEditing&&f.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var f=this.getSelectionStartFromPointer(i.e),u=this.selectionStart,t=this.selectionEnd;(f!==this.__selectionStartOnMouseDown||u===t)&&(u===f||t===f)||(f>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=f):(this.selectionStart=f,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==t)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,f,u){var t=u.slice(0,i),n=h.util.string.graphemeSplit(t).length;if(i===f)return{selectionStart:n,selectionEnd:n};var e=u.slice(i,f),s=h.util.string.graphemeSplit(e).length;return{selectionStart:n,selectionEnd:n+s}},fromGraphemeToStringSelection:function(i,f,u){var t=u.slice(0,i),n=t.join("").length;if(i===f)return{selectionStart:n,selectionEnd:n};var e=u.slice(i,f),s=e.join("").length;return{selectionStart:n,selectionEnd:n+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,f=this._getCursorBoundaries(i),u=this.get2DCursorLocation(i),t=u.lineIndex,n=u.charIndex,e=this.getValueOfPropertyAt(t,n,"fontSize")*this.lineHeight,s=f.leftOffset,v=this.calcTransformMatrix(),o={x:f.left+s,y:f.top+f.topOffset+e},m=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,I=C.width/m,M=C.height/m,k=I-e,N=M-e,H=C.clientWidth/I,F=C.clientHeight/M;return o=h.util.transformPoint(o,v),o=h.util.transformPoint(o,this.canvas.viewportTransform),o.x*=H,o.y*=F,o.x<0&&(o.x=0),o.x>k&&(o.x=k),o.y<0&&(o.y=0),o.y>N&&(o.y=N),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:e+"px",charHeight:e}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,f=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,f&&(f.blur&&f.blur(),f.parentNode&&f.parentNode.removeChild(f)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,f){var u=this.get2DCursorLocation(i,!0),t=this.get2DCursorLocation(f,!0),n=u.lineIndex,e=u.charIndex,s=t.lineIndex,v=t.charIndex,o,m;if(n!==s){if(this.styles[n])for(o=e;o<this._unwrappedTextLines[n].length;o++)delete this.styles[n][o];if(this.styles[s])for(o=v;o<this._unwrappedTextLines[s].length;o++)m=this.styles[s][o],m&&(this.styles[n]||(this.styles[n]={}),this.styles[n][e+o-v]=m);for(o=n+1;o<=s;o++)delete this.styles[o];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){m=this.styles[n];var C=v-e,I,M;for(o=e;o<v;o++)delete m[o];for(M in this.styles[n])I=parseInt(M,10),I>=v&&(m[I-C]=m[M],delete m[M])}},shiftLineStyles:function(i,f){var u=g(this.styles);for(var t in this.styles){var n=parseInt(t,10);n>i&&(this.styles[n+f]=u[n],u[n-f]||delete this.styles[n])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,f,u,t){var n,e={},s=!1,v=this._unwrappedTextLines[i].length===f;u||(u=1),this.shiftLineStyles(i,u),this.styles[i]&&(n=this.styles[i][f===0?f:f-1]);for(var o in this.styles[i]){var m=parseInt(o,10);m>=f&&(s=!0,e[m-f]=this.styles[i][o],v&&f===0||delete this.styles[i][o])}var C=!1;for(s&&!v&&(this.styles[i+u]=e,C=!0),C&&u--;u>0;)t&&t[u-1]?this.styles[i+u]={0:g(t[u-1])}:n?this.styles[i+u]={0:g(n)}:delete this.styles[i+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(i,f,u,t){this.styles||(this.styles={});var n=this.styles[i],e=n?g(n):{};u||(u=1);for(var s in e){var v=parseInt(s,10);v>=f&&(n[v+u]=e[v],e[v-u]||delete n[v])}if(this._forceClearCache=!0,t){for(;u--;)Object.keys(t[u]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][f+u]=g(t[u]));return}if(n)for(var o=n[f?f-1:1];o&&u--;)this.styles[i][f+u]=g(o)},insertNewStyleBlock:function(i,f,u){for(var t=this.get2DCursorLocation(f,!0),n=[0],e=0,s=0;s<i.length;s++)i[s]===`
`?(e++,n[e]=0):n[e]++;n[0]>0&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,n[0],u),u=u&&u.slice(n[0]+1)),e&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+n[0],e);for(var s=1;s<e;s++)n[s]>0?this.insertCharStyleObject(t.lineIndex+s,0,n[s],u):u&&(this.styles[t.lineIndex+s][0]=u[0]),u=u&&u.slice(n[s]+1);n[s]>0&&this.insertCharStyleObject(t.lineIndex+s,0,n[s],u)},setSelectionStartEndWithShift:function(i,f,u){u<=i?(f===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=u):u>i&&u<f?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(f===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=f),this.selectionEnd=u)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})})(),h.util.object.extend(h.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(this.canvas){this.__newClickTime=+new Date;var i=g.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var i=this.getSelectionStartFromPointer(g),f=this.selectionStart,u=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(f,u,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var i=this.getLocalPointer(g),f=0,u=0,t=0,n=0,e=0,s,v,o=0,m=this._textLines.length;o<m&&t<=i.y;o++)t+=this.getHeightOfLine(o)*this.scaleY,e=o,o>0&&(n+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));s=this._getLineLeftOffset(e),u=s*this.scaleX,v=this._textLines[e],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+u);for(var C=0,I=v.length;C<I&&(f=u,u+=this.__charBounds[e][C].kernedWidth*this.scaleX,u<=i.x);C++)n++;return this._getNewSelectionStartFromOffset(i,f,u,n,I)},_getNewSelectionStartFromOffset:function(g,i,f,u,t){var n=g.x-i,e=f-g.x,s=e>n||e<0?0:1,v=u+s;return this.flipX&&(v=t-v),v>this._text.length&&(v=this._text.length),v}}),h.util.object.extend(h.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=h.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):h.document.body.appendChild(this.hiddenTextarea),h.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),h.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),h.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),h.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),h.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),h.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),h.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),h.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),h.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(h.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in i)this[i[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var i=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var f=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,t=f.length,n,e,s=t-u,v=this.selectionStart,o=this.selectionEnd,m=v!==o,C,I,M;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var k=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),N=v>k.selectionStart;m?(n=this._text.slice(v,o),s+=o-v):t<u&&(N?n=this._text.slice(o+s,o):n=this._text.slice(v,v-s)),e=f.slice(k.selectionEnd-s,k.selectionEnd),n&&n.length&&(e.length&&(C=this.getSelectionStyles(v,v+1,!1),C=e.map(function(){return C[0]})),m?(I=v,M=o):N?(I=o-n.length,M=o):(I=o,M=o+n.length),this.removeStyleFromTo(I,M)),e.length&&(i&&e.join("")===h.copiedText&&!h.disableStyleCopyPaste&&(C=h.copiedTextStyle),this.insertNewStyleBlock(e,v,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(h.copiedText=this.getSelectedText(),h.disableStyleCopyPaste?h.copiedTextStyle=null:h.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||h.window.clipboardData},_getWidthBeforeCursor:function(g,i){var f=this._getLineLeftOffset(g),u;return i>0&&(u=this.__charBounds[g][i-1],f+=u.left+u.width),f},getDownCursorOffset:function(g,i){var f=this._getSelectionForOffset(g,i),u=this.get2DCursorLocation(f),t=u.lineIndex;if(t===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-f;var n=u.charIndex,e=this._getWidthBeforeCursor(t,n),s=this._getIndexOnLine(t+1,e),v=this._textLines[t].slice(n);return v.length+s+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(g,i){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,i){var f=this._getSelectionForOffset(g,i),u=this.get2DCursorLocation(f),t=u.lineIndex;if(t===0||g.metaKey||g.keyCode===33)return-f;var n=u.charIndex,e=this._getWidthBeforeCursor(t,n),s=this._getIndexOnLine(t-1,e),v=this._textLines[t].slice(0,n),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+s-v.length+(1-o)},_getIndexOnLine:function(g,i){for(var f=this._textLines[g],u=this._getLineLeftOffset(g),t=u,n=0,e,s,v=0,o=f.length;v<o;v++)if(e=this.__charBounds[g][v].width,t+=e,t>i){s=!0;var m=t-e,C=t,I=Math.abs(m-i),M=Math.abs(C-i);n=M<I?v:v-1;break}return s||(n=f.length-1),n},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,i){var f="get"+g+"CursorOffset",u=this[f](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var i=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,i,f){var u;if(g.altKey)u=this["findWordBoundary"+f](this[i]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)u=this["findLineBoundary"+f](this[i]);else return this[i]+=f==="Left"?-1:1,!0;if(typeof u!==void 0&&this[i]!==u)return this[i]=u,!0},_moveLeft:function(g,i){return this._move(g,i,"Left")},_moveRight:function(g,i){return this._move(g,i,"Right")},moveCursorLeftWithoutShift:function(g){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,i){var f="moveCursor"+g+"With";this._currentCursorOpacity=1,i.shiftKey?f+="Shift":f+="outShift",this[f](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(g,i){typeof i>"u"&&(i=g+1),this.removeStyleFromTo(g,i),this._text.splice(g,i-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,i,f,u){typeof u>"u"&&(u=f),u>f&&this.removeStyleFromTo(f,u);var t=h.util.string.graphemeSplit(g);this.insertNewStyleBlock(t,f,i),this._text=[].concat(this._text.slice(0,f),t,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),(function(){var g=h.util.toFixed,i=/  +/g;h.util.object.extend(h.Text.prototype,{_toSVG:function(){var f=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(f.textTop,f.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(),{reviver:f,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(f){var u=!0,t=this.getSvgTextDecoration(this);return[f.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",f.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(f,u){var t=[],n=[],e=f,s;this._setSVGBg(n);for(var v=0,o=this._textLines.length;v<o;v++)s=this._getLineLeftOffset(v),(this.textBackgroundColor||this.styleHas("textBackgroundColor",v))&&this._setSVGTextLineBg(n,v,u+s,e),this._setSVGTextLineText(t,v,u+s,e),e+=this.getHeightOfLine(v);return{textSpans:t,textBgRects:n}},_createTextCharSpan:function(f,u,t,n){var e=f!==f.trim()||f.match(i),s=this.getSvgSpanStyles(u,e),v=s?'style="'+s+'"':"",o=u.deltaY,m="",C=h.Object.NUM_FRACTION_DIGITS;return o&&(m=' dy="'+g(o,C)+'" '),['<tspan x="',g(t,C),'" y="',g(n,C),'" ',m,v,">",h.util.string.escapeXml(f),"</tspan>"].join("")},_setSVGTextLineText:function(f,u,t,n){var e=this.getHeightOfLine(u),s=this.textAlign.indexOf("justify")!==-1,v,o,m="",C,I,M=0,k=this._textLines[u],N;n+=e*(1-this._fontSizeFraction)/this.lineHeight;for(var H=0,F=k.length-1;H<=F;H++)N=H===F||this.charSpacing,m+=k[H],C=this.__charBounds[u][H],M===0?(t+=C.kernedWidth-C.width,M+=C.width):M+=C.kernedWidth,s&&!N&&this._reSpaceAndTab.test(k[H])&&(N=!0),N||(v=v||this.getCompleteStyleDeclaration(u,H),o=this.getCompleteStyleDeclaration(u,H+1),N=this._hasStyleChangedForSvg(v,o)),N&&(I=this._getStyleDeclaration(u,H)||{},f.push(this._createTextCharSpan(m,I,t,n)),m="",v=o,t+=M,M=0)},_pushTextBgRect:function(f,u,t,n,e,s){var v=h.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(u),' x="',g(t,v),'" y="',g(n,v),'" width="',g(e,v),'" height="',g(s,v),`"></rect>
`)},_setSVGTextLineBg:function(f,u,t,n){for(var e=this._textLines[u],s=this.getHeightOfLine(u)/this.lineHeight,v=0,o=0,m,C,I=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),M=0,k=e.length;M<k;M++)m=this.__charBounds[u][M],C=this.getValueOfPropertyAt(u,M,"textBackgroundColor"),C!==I?(I&&this._pushTextBgRect(f,I,t+o,n,v,s),o=m.left,v=m.width,I=C):v+=m.kernedWidth;C&&this._pushTextBgRect(f,C,t+o,n,v,s)},_getFillAttributes:function(f){var u=f&&typeof f=="string"?new h.Color(f):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+f+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(f){for(var u=0,t=0,n=0;n<f;n++)u+=this.getHeightOfLine(n);return t=this.getHeightOfLine(n),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(f){var u=h.Object.prototype.getSvgStyles.call(this,f);return u+" white-space: pre;"}})})(),(function(g){var i=g.fabric||(g.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(f){for(var u=0,t=0,n=0,e={},s=0;s<f.graphemeLines.length;s++)f.graphemeText[n]===`
`&&s>0?(t=0,n++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(f.graphemeText[n])&&s>0&&(t++,n++),e[s]={line:u,offset:t},n+=f.graphemeLines[s].length,t+=f.graphemeLines[s].length;return e},styleHas:function(f,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[u];t&&(u=t.line)}return i.Text.prototype.styleHas.call(this,f,u)},isEmptyStyles:function(f){if(!this.styles)return!0;var u=0,t=f+1,n,e,s=!1,v=this._styleMap[f],o=this._styleMap[f+1];v&&(f=v.line,u=v.offset),o&&(t=o.line,s=t===f,n=o.offset),e=typeof f>"u"?this.styles:{line:this.styles[f]};for(var m in e)for(var C in e[m])if(C>=u&&(!s||C<n))for(var I in e[m][C])return!1;return!0},_getStyleDeclaration:function(f,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[f];if(!t)return null;f=t.line,u=t.offset+u}return this.callSuper("_getStyleDeclaration",f,u)},_setStyleDeclaration:function(f,u,t){var n=this._styleMap[f];f=n.line,u=n.offset+u,this.styles[f][u]=t},_deleteStyleDeclaration:function(f,u){var t=this._styleMap[f];f=t.line,u=t.offset+u,delete this.styles[f][u]},_getLineStyle:function(f){var u=this._styleMap[f];return!!this.styles[u.line]},_setLineStyle:function(f){var u=this._styleMap[f];this.styles[u.line]={}},_wrapText:function(f,u){var t=[],n;for(this.isWrapping=!0,n=0;n<f.length;n++)t=t.concat(this._wrapLine(f[n],n,u));return this.isWrapping=!1,t},_measureWord:function(f,u,t){var n=0,e,s=!0;t=t||0;for(var v=0,o=f.length;v<o;v++){var m=this._getGraphemeBox(f[v],u,v+t,e,s);n+=m.kernedWidth,e=f[v]}return n},_wrapLine:function(f,u,t,it){var e=0,s=this.splitByGrapheme,v=[],o=[],m=s?i.util.string.graphemeSplit(f):f.split(this._wordJoiners),C="",I=0,M=s?"":" ",k=0,N=0,H=0,F=!0,W=this._getWidthOfCharSpacing(),it=it||0;m.length===0&&m.push([]),t-=it;for(var V=0;V<m.length;V++)C=s?m[V]:i.util.string.graphemeSplit(m[V]),k=this._measureWord(C,u,I),I+=C.length,e+=N+k-W,e>t&&!F?(v.push(o),o=[],e=k,F=!0):e+=W,!F&&!s&&o.push(M),o=o.concat(C),N=s?0:this._measureWord([M],u,I),I++,F=!1,k>H&&(H=k);return V&&v.push(o),H+it>this.dynamicMinWidth&&(this.dynamicMinWidth=H-W+it),v},isEndOfWrapping:function(f){return!this._styleMap[f+1]||this._styleMap[f+1].line!==this._styleMap[f].line},missingNewlineOffset:function(f){return this.splitByGrapheme?this.isEndOfWrapping(f)?1:0:1},_splitTextIntoLines:function(f){for(var u=i.Text.prototype._splitTextIntoLines.call(this,f),t=this._wrapText(u.lines,this.width),n=new Array(t.length),e=0;e<t.length;e++)n[e]=t[e].join("");return u.lines=n,u.graphemeLines=t,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var f={};for(var u in this._styleMap)this._textLines[u]&&(f[this._styleMap[u].line]=1);for(var u in this.styles)f[u]||delete this.styles[u]},toObject:function(f){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(f))}}),i.Textbox.fromObject=function(f,u){return i.Object._fromObject("Textbox",f,u,"text")}})(b),(function(){var g=h.controlsUtils,i=g.scaleSkewCursorStyleHandler,f=g.scaleCursorStyleHandler,u=g.scalingEqually,t=g.scalingYOrSkewingX,n=g.scalingXOrSkewingY,e=g.scaleOrSkewActionName,s=h.Object.prototype.controls;if(s.ml=new h.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:e}),s.mr=new h.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:n,getActionName:e}),s.mb=new h.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:t,getActionName:e}),s.mt=new h.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:t,getActionName:e}),s.tl=new h.Control({x:-.5,y:-.5,cursorStyleHandler:f,actionHandler:u}),s.tr=new h.Control({x:.5,y:-.5,cursorStyleHandler:f,actionHandler:u}),s.bl=new h.Control({x:-.5,y:.5,cursorStyleHandler:f,actionHandler:u}),s.br=new h.Control({x:.5,y:.5,cursorStyleHandler:f,actionHandler:u}),s.mtr=new h.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),h.Textbox){var v=h.Textbox.prototype.controls={};v.mtr=s.mtr,v.tr=s.tr,v.br=s.br,v.tl=s.tl,v.bl=s.bl,v.mt=s.mt,v.mb=s.mb,v.mr=new h.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),v.ml=new h.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}})()}),3053:(function(y,b,d){var h=d(602);function T(w,O,D){var P,g;if(D=D||0,!h(O))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(O,w,D);for(g=O.length,P=D;D>=0&&P<g;P+=1)if(O[P]===w)return P;return-1}y.exports=T}),8592:(function(y,b,d){var h=d(602),T=d(6092),w=d(5573);function O(D,P,g){h(D)?T(D,P,g):w(D,P,g)}y.exports=O}),6092:(function(y){function b(d,h,T){var w=0,O=d.length;for(T=T||null;w<O&&h.call(T,d[w],w,d)!==!1;w+=1);}y.exports=b}),5573:(function(y){function b(d,h,T){var w;T=T||null;for(w in d)if(d.hasOwnProperty(w)&&h.call(T,d[w],w,d)===!1)break}y.exports=b}),9052:(function(y,b,d){var h=d(961),T=d(9886),w=d(2560),O=d(5393),D=d(602),P=d(5183),g=d(8592),i=/\s+/g;function f(){this.events=null,this.contexts=null}f.mixin=function(u){h(u.prototype,f.prototype)},f.prototype._getHandlerItem=function(u,t){var n={handler:u};return t&&(n.context=t),n},f.prototype._safeEvent=function(u){var t=this.events,n;return t||(t=this.events={}),u&&(n=t[u],n||(n=[],t[u]=n),t=n),t},f.prototype._safeContext=function(){var u=this.contexts;return u||(u=this.contexts=[]),u},f.prototype._indexOfContext=function(u){for(var t=this._safeContext(),n=0;t[n];){if(u===t[n][0])return n;n+=1}return-1},f.prototype._memorizeContext=function(u){var t,n;T(u)&&(t=this._safeContext(),n=this._indexOfContext(u),n>-1?t[n][1]+=1:t.push([u,1]))},f.prototype._forgetContext=function(u){var t,n;T(u)&&(t=this._safeContext(),n=this._indexOfContext(u),n>-1&&(t[n][1]-=1,t[n][1]<=0&&t.splice(n,1)))},f.prototype._bindEvent=function(u,t,n){var e=this._safeEvent(u);this._memorizeContext(n),e.push(this._getHandlerItem(t,n))},f.prototype.on=function(u,t,n){var e=this;w(u)?(u=u.split(i),g(u,function(s){e._bindEvent(s,t,n)})):O(u)&&(n=t,g(u,function(s,v){e.on(v,s,n)}))},f.prototype.once=function(u,t,n){var e=this;if(O(u)){n=t,g(u,function(v,o){e.once(o,v,n)});return}function s(){t.apply(n,arguments),e.off(u,s,n)}this.on(u,s,n)},f.prototype._spliceMatches=function(u,t){var n=0,e;if(D(u))for(e=u.length;n<e;n+=1)t(u[n])===!0&&(u.splice(n,1),e-=1,n-=1)},f.prototype._matchHandler=function(u){var t=this;return function(n){var e=u===n.handler;return e&&t._forgetContext(n.context),e}},f.prototype._matchContext=function(u){var t=this;return function(n){var e=u===n.context;return e&&t._forgetContext(n.context),e}},f.prototype._matchHandlerAndContext=function(u,t){var n=this;return function(e){var s=u===e.handler,v=t===e.context,o=s&&v;return o&&n._forgetContext(e.context),o}},f.prototype._offByEventName=function(u,t){var n=this,e=P(t),s=n._matchHandler(t);u=u.split(i),g(u,function(v){var o=n._safeEvent(v);e?n._spliceMatches(o,s):(g(o,function(m){n._forgetContext(m.context)}),n.events[v]=[])})},f.prototype._offByHandler=function(u){var t=this,n=this._matchHandler(u);g(this._safeEvent(),function(e){t._spliceMatches(e,n)})},f.prototype._offByObject=function(u,t){var n=this,e;this._indexOfContext(u)<0?g(u,function(s,v){n.off(v,s)}):w(t)?(e=this._matchContext(u),n._spliceMatches(this._safeEvent(t),e)):P(t)?(e=this._matchHandlerAndContext(t,u),g(this._safeEvent(),function(s){n._spliceMatches(s,e)})):(e=this._matchContext(u),g(this._safeEvent(),function(s){n._spliceMatches(s,e)}))},f.prototype.off=function(u,t){w(u)?this._offByEventName(u,t):arguments.length?P(u)?this._offByHandler(u):O(u)&&this._offByObject(u,t):(this.events={},this.contexts=[])},f.prototype.fire=function(u){this.invoke.apply(this,arguments)},f.prototype.invoke=function(u){var t,n,e,s;if(!this.hasListener(u))return!0;for(t=this._safeEvent(u),n=Array.prototype.slice.call(arguments,1),e=0;t[e];){if(s=t[e],s.handler.apply(s.context,n)===!1)return!1;e+=1}return!0},f.prototype.hasListener=function(u){return this.getListenerLength(u)>0},f.prototype.getListenerLength=function(u){var t=this._safeEvent(u);return t.length},y.exports=f}),961:(function(y){function b(d,h){var T=Object.prototype.hasOwnProperty,w,O,D,P;for(D=1,P=arguments.length;D<P;D+=1){w=arguments[D];for(O in w)T.call(w,O)&&(d[O]=w[O])}return d}y.exports=b}),1610:(function(y,b,d){var h=d(5695),T=d(3778);function w(O,D){for(var P=arguments,g=P[0],i=1,f=P.length;i<f;i+=1){if(h(g)||T(g))return;g=g[P[i]]}return g}y.exports=w}),4564:(function(y,b,d){var h=d(5573);function T(w,O){var D=document.createElement("img"),P="";return h(O,function(g,i){P+="&"+i+"="+g}),P=P.substring(1),D.src=w+"?"+P,D.style.display="none",document.body.appendChild(D),document.body.removeChild(D),D}y.exports=T}),4729:(function(y,b,d){var h=d(5695),T=d(4564),w=10080*60*1e3;function O(P){var g=new Date().getTime();return g-P>w}function D(P,g){var i="https://www.google-analytics.com/collect",f=location.hostname,u="event",t="use",n="TOAST UI "+P+" for "+f+": Statistics",e=window.localStorage.getItem(n);!h(window.tui)&&window.tui.usageStatistics===!1||e&&!O(e)||(window.localStorage.setItem(n,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&T(i,{v:1,t:u,tid:g,cid:f,dp:f,dh:P,el:P,ec:t})},1e3))}y.exports=D}),602:(function(y){function b(d){return d instanceof Array}y.exports=b}),9886:(function(y,b,d){var h=d(5695),T=d(3778);function w(O){return!h(O)&&!T(O)}y.exports=w}),5183:(function(y){function b(d){return d instanceof Function}y.exports=b}),3778:(function(y){function b(d){return d===null}y.exports=b}),5393:(function(y){function b(d){return d===Object(d)}y.exports=b}),2560:(function(y){function b(d){return typeof d=="string"||d instanceof String}y.exports=b}),5695:(function(y){function b(d){return d===void 0}y.exports=b}),4426:(function(y,b,d){y.exports=d(4486)}),9406:(function(y,b,d){y.exports=d(4877)}),789:(function(y,b,d){y.exports=d(7178)}),381:(function(y,b,d){y.exports=d(5603)}),7636:(function(y,b,d){y.exports=d(1206)}),1899:(function(y,b,d){y.exports=d(6174)}),899:(function(y,b,d){y.exports=d(57)}),8005:(function(y,b,d){y.exports=d(4741)}),6562:(function(y,b,d){y.exports=d(8368)}),9131:(function(y,b,d){y.exports=d(3739)}),4383:(function(y,b,d){y.exports=d(172)}),6065:(function(y,b,d){y.exports=d(4963)}),1734:(function(y,b,d){y.exports=d(7820)}),2461:(function(y,b,d){y.exports=d(5636)}),5214:(function(y,b,d){y.exports=d(5059)}),6397:(function(y,b,d){y.exports=d(3969)}),8189:(function(y,b,d){y.exports=d(6618)}),9146:(function(y,b,d){y.exports=d(5279)}),4496:(function(y,b,d){y.exports=d(9562)}),3972:(function(y,b,d){y.exports=d(652)}),7172:(function(y,b,d){y.exports=d(2813)}),1845:(function(y,b,d){y.exports=d(8664)}),662:(function(y,b,d){y.exports=d(1457)}),711:(function(y,b,d){y.exports=d(2937)}),6623:(function(y,b,d){y.exports=d(9297)}),7077:(function(y,b,d){y.exports=d(8026)}),9856:(function(y,b,d){y.exports=d(2044)}),4230:(function(y,b,d){y.exports=d(2214)}),184:(function(y,b,d){y.exports=d(9256)}),3742:(function(y,b,d){y.exports=d(5659)}),1801:(function(y){var b={rect:1,circle:2,triangle:1},d={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function h(i){var f=i.originX,u=i.originY,t=f.substring(0,1)+u.substring(0,1);i.startPoint=i.origins[t]}function T(i,f,u){var t=i.x,n=i.y,e=f.x,s=f.y,v=u*Math.PI/180,o=(e-t)*Math.cos(v)-(s-n)*Math.sin(v)+t,m=(e-t)*Math.sin(v)+(s-n)*Math.cos(v)+n;return{originX:t>o?"right":"left",originY:n>m?"bottom":"top"}}function w(i){return i.originX==="center"&&i.originY==="center"}function O(i,f){var u=f.getPointByOrigin("center","center"),t=-f.angle,n=T(u,i,t),e=n.originX,s=n.originY,v=f.getPointByOrigin(e,s),o=f.left-(u.x-v.x),m=f.top-(u.y-v.y);f.set({originX:e,originY:s,left:o,top:m}),f.setCoords()}function D(i,f){var u=f.startPoint,t=-f.angle,n=T(u,i,t),e=n.originX,s=n.originY;f.setPositionByOrigin(u,e,s),f.setCoords()}function P(i){var f=i.type,u=i.scaleX,t=i.scaleY,n=d[f],e=i[n.w]*u,s=i[n.h]*t;if(i.isRegular){var v=Math.max(u,t);e=i[n.w]*v,s=i[n.h]*v}var o={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};o[n.w]=e,o[n.h]=s,i.set(o)}function g(i,f){var u=f.type,t=f.strokeWidth,n=f.startPoint,e=b[u],s=d[u],v=f.type==="triangle",o={},m=Math.abs(n.x-i.x)/e,C=Math.abs(n.y-i.y)/e;m>t&&(m-=t/e),C>t&&(C-=t/e),f.isRegular&&(m=C=Math.max(m,C),v&&(C=Math.sqrt(3)/2*m)),o[s.w]=m,o[s.h]=C,f.set(o)}y.exports={setOrigins:function(f){var u=f.getPointByOrigin("left","top"),t=f.getPointByOrigin("right","top"),n=f.getPointByOrigin("right","bottom"),e=f.getPointByOrigin("left","bottom");f.origins={lt:u,rt:t,rb:n,lb:e}},resize:function(f,u,t){w(f)&&(O(u,f),h(f)),t?P(f):g(u,f),D(u,f)},adjustOriginToCenter:function(f){var u=f.getPointByOrigin("center","center"),t=f.originX,n=f.originY,e=f.getPointByOrigin(t,n),s=f.left+(u.x-e.x),v=f.top+(u.y-e.y);f.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:s,top:v}),f.setCoords()}}}),2221:(function(y,b,d){d(5454),d(9173);var h=d(7545);y.exports=h.Array.from}),5078:(function(y,b,d){d(8118);var h=d(7545);y.exports=h.Array.isArray}),6135:(function(y,b,d){d(9106);var h=d(5607);y.exports=h("Array").concat}),9510:(function(y,b,d){d(1710);var h=d(5607);y.exports=h("Array").fill}),3971:(function(y,b,d){d(3436);var h=d(5607);y.exports=h("Array").filter}),98:(function(y,b,d){d(9823);var h=d(5607);y.exports=h("Array").forEach}),2089:(function(y,b,d){d(2276);var h=d(5607);y.exports=h("Array").indexOf}),6209:(function(y,b,d){d(3838);var h=d(5607);y.exports=h("Array").map}),2671:(function(y,b,d){d(5818);var h=d(5607);y.exports=h("Array").slice}),1375:(function(y,b,d){d(2178);var h=d(5607);y.exports=h("Array").splice}),3528:(function(y,b,d){d(665);var h=d(5607);y.exports=h("Function").bind}),5739:(function(y,b,d){d(8939),d(5454);var h=d(8703);y.exports=h}),278:(function(y,b,d){var h=d(3528),T=Function.prototype;y.exports=function(w){var O=w.bind;return w===T||w instanceof Function&&O===T.bind?h:O}}),1484:(function(y,b,d){var h=d(6135),T=Array.prototype;y.exports=function(w){var O=w.concat;return w===T||w instanceof Array&&O===T.concat?h:O}}),7731:(function(y,b,d){var h=d(9510),T=Array.prototype;y.exports=function(w){var O=w.fill;return w===T||w instanceof Array&&O===T.fill?h:O}}),3669:(function(y,b,d){var h=d(3971),T=Array.prototype;y.exports=function(w){var O=w.filter;return w===T||w instanceof Array&&O===T.filter?h:O}}),2604:(function(y,b,d){var h=d(2089),T=Array.prototype;y.exports=function(w){var O=w.indexOf;return w===T||w instanceof Array&&O===T.indexOf?h:O}}),263:(function(y,b,d){var h=d(6209),T=Array.prototype;y.exports=function(w){var O=w.map;return w===T||w instanceof Array&&O===T.map?h:O}}),7663:(function(y,b,d){var h=d(2671),T=Array.prototype;y.exports=function(w){var O=w.slice;return w===T||w instanceof Array&&O===T.slice?h:O}}),5063:(function(y,b,d){var h=d(1375),T=Array.prototype;y.exports=function(w){var O=w.splice;return w===T||w instanceof Array&&O===T.splice?h:O}}),6813:(function(y,b,d){var h=d(3842),T=String.prototype;y.exports=function(w){var O=w.trim;return typeof w=="string"||w===T||w instanceof String&&O===T.trim?h:O}}),6285:(function(y,b,d){d(2666);var h=d(7545);y.exports=h.Number.parseInt}),3213:(function(y,b,d){d(3113);var h=d(7545),T=h.Object;y.exports=function(O,D){return T.create(O,D)}}),3512:(function(y,b,d){d(297);var h=d(7545),T=h.Object,w=y.exports=function(D,P,g){return T.defineProperty(D,P,g)};T.defineProperty.sham&&(w.sham=!0)}),8168:(function(y,b,d){d(9234);var h=d(7545);y.exports=h.Object.getPrototypeOf}),8651:(function(y,b,d){d(2647);var h=d(7545);y.exports=h.Object.keys}),3083:(function(y,b,d){d(3222);var h=d(7545);y.exports=h.Object.setPrototypeOf}),2987:(function(y,b,d){d(4859);var h=d(7545);y.exports=h.parseFloat}),2239:(function(y,b,d){d(5706);var h=d(7545);y.exports=h.parseInt}),3154:(function(y,b,d){d(4242),d(8939),d(6663),d(9021),d(7884),d(8885),d(1868),d(5454);var h=d(7545);y.exports=h.Promise}),6577:(function(y,b,d){d(5397);var h=d(7545);y.exports=h.Reflect.construct}),3842:(function(y,b,d){d(957);var h=d(5607);y.exports=h("String").trim}),5008:(function(y,b,d){d(9106),d(6663),d(6187),d(9781),d(492),d(6681),d(9594),d(3665),d(9017),d(1250),d(9786),d(503),d(6565),d(9322),d(3610),d(6886),d(3514),d(8671),d(8556),d(1367);var h=d(7545);y.exports=h.Symbol}),994:(function(y,b,d){d(8939),d(6663),d(5454),d(3665);var h=d(9207);y.exports=h.f("iterator")}),2813:(function(y,b,d){var h=d(3822);y.exports=h}),8664:(function(y,b,d){var h=d(1434);y.exports=h}),1457:(function(y,b,d){var h=d(7710);y.exports=h}),2937:(function(y,b,d){var h=d(4741);y.exports=h}),9297:(function(y,b,d){var h=d(4963);y.exports=h}),8026:(function(y,b,d){var h=d(7820);y.exports=h}),2044:(function(y,b,d){var h=d(8980);y.exports=h}),2214:(function(y,b,d){var h=d(6672);y.exports=h}),9256:(function(y,b,d){var h=d(2285);d(177),d(9031),d(6658),d(1875),d(8658),d(4592),d(6680),y.exports=h}),5659:(function(y,b,d){var h=d(8535);y.exports=h}),6235:(function(y,b,d){var h=d(6447),T=d(9288);y.exports=function(w){if(h(w))return w;throw TypeError(T(w)+" is not a function")}}),1404:(function(y,b,d){var h=d(2091),T=d(9288);y.exports=function(w){if(h(w))return w;throw TypeError(T(w)+" is not a constructor")}}),7757:(function(y,b,d){var h=d(6447);y.exports=function(T){if(typeof T=="object"||h(T))return T;throw TypeError("Can't set "+String(T)+" as a prototype")}}),7423:(function(y){y.exports=function(){}}),6961:(function(y){y.exports=function(b,d,h){if(b instanceof d)return b;throw TypeError("Incorrect "+(h?h+" ":"")+"invocation")}}),1138:(function(y,b,d){var h=d(5744);y.exports=function(T){if(h(T))return T;throw TypeError(String(T)+" is not an object")}}),2724:(function(y,b,d){var h=d(1795),T=d(7739),w=d(4104);y.exports=function(D){for(var P=h(this),g=w(P),i=arguments.length,f=T(i>1?arguments[1]:void 0,g),u=i>2?arguments[2]:void 0,t=u===void 0?g:T(u,g);t>f;)P[f++]=D;return P}}),7397:(function(y,b,d){var h=d(454).forEach,T=d(424),w=T("forEach");y.exports=w?[].forEach:function(D){return h(this,D,arguments.length>1?arguments[1]:void 0)}}),841:(function(y,b,d){var h=d(8043),T=d(1795),w=d(1635),O=d(6109),D=d(2091),P=d(4104),g=d(9361),i=d(1669),f=d(8703);y.exports=function(t){var n=T(t),e=D(this),s=arguments.length,v=s>1?arguments[1]:void 0,o=v!==void 0;o&&(v=h(v,s>2?arguments[2]:void 0,2));var m=f(n),C=0,I,M,k,N,H,F;if(m&&!(this==Array&&O(m)))for(N=i(n,m),H=N.next,M=e?new this:[];!(k=H.call(N)).done;C++)F=o?w(N,v,[k.value,C],!0):k.value,g(M,C,F);else for(I=P(n),M=e?new this(I):Array(I);I>C;C++)F=o?v(n[C],C):n[C],g(M,C,F);return M.length=C,M}}),8180:(function(y,b,d){var h=d(101),T=d(7739),w=d(4104),O=function(D){return function(P,g,i){var f=h(P),u=w(f),t=T(i,u),n;if(D&&g!=g){for(;u>t;)if(n=f[t++],n!=n)return!0}else for(;u>t;t++)if((D||t in f)&&f[t]===g)return D||t||0;return!D&&-1}};y.exports={includes:O(!0),indexOf:O(!1)}}),454:(function(y,b,d){var h=d(8043),T=d(2202),w=d(1795),O=d(4104),D=d(1321),P=[].push,g=function(i){var f=i==1,u=i==2,t=i==3,n=i==4,e=i==6,s=i==7,v=i==5||e;return function(o,m,C,I){for(var M=w(o),k=T(M),N=h(m,C,3),H=O(k),F=0,W=I||D,it=f?W(o,H):u||s?W(o,0):void 0,V,gt;H>F;F++)if((v||F in k)&&(V=k[F],gt=N(V,F,M),i))if(f)it[F]=gt;else if(gt)switch(i){case 3:return!0;case 5:return V;case 6:return F;case 2:P.call(it,V)}else switch(i){case 4:return!1;case 7:P.call(it,V)}return e?-1:t||n?n:it}};y.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6),filterReject:g(7)}}),242:(function(y,b,d){var h=d(6192),T=d(8182),w=d(4218),O=T("species");y.exports=function(D){return w>=51||!h(function(){var P=[],g=P.constructor={};return g[O]=function(){return{foo:1}},P[D](Boolean).foo!==1})}}),424:(function(y,b,d){var h=d(6192);y.exports=function(T,w){var O=[][T];return!!O&&h(function(){O.call(null,w||function(){throw 1},1)})}}),3712:(function(y,b,d){var h=d(4770),T=d(2091),w=d(5744),O=d(8182),D=O("species");y.exports=function(P){var g;return h(P)&&(g=P.constructor,T(g)&&(g===Array||h(g.prototype))?g=void 0:w(g)&&(g=g[D],g===null&&(g=void 0))),g===void 0?Array:g}}),1321:(function(y,b,d){var h=d(3712);y.exports=function(T,w){return new(h(T))(w===0?0:w)}}),1635:(function(y,b,d){var h=d(1138),T=d(6639);y.exports=function(w,O,D,P){try{return P?O(h(D)[0],D[1]):O(D)}catch(g){T(w,"throw",g)}}}),9770:(function(y,b,d){var h=d(8182),T=h("iterator"),w=!1;try{var O=0,D={next:function(){return{done:!!O++}},return:function(){w=!0}};D[T]=function(){return this},Array.from(D,function(){throw 2})}catch{}y.exports=function(P,g){if(!g&&!w)return!1;var i=!1;try{var f={};f[T]=function(){return{next:function(){return{done:i=!0}}}},P(f)}catch{}return i}}),9272:(function(y){var b={}.toString;y.exports=function(d){return b.call(d).slice(8,-1)}}),4696:(function(y,b,d){var h=d(3471),T=d(6447),w=d(9272),O=d(8182),D=O("toStringTag"),P=w((function(){return arguments})())=="Arguments",g=function(i,f){try{return i[f]}catch{}};y.exports=h?w:function(i){var f,u,t;return i===void 0?"Undefined":i===null?"Null":typeof(u=g(f=Object(i),D))=="string"?u:P?w(f):(t=w(f))=="Object"&&T(f.callee)?"Arguments":t}}),4635:(function(y,b,d){var h=d(6192);y.exports=!h(function(){function T(){}return T.prototype.constructor=null,Object.getPrototypeOf(new T)!==T.prototype})}),5148:(function(y,b,d){var h=d(4413).IteratorPrototype,T=d(2853),w=d(774),O=d(1284),D=d(7771),P=function(){return this};y.exports=function(g,i,f){var u=i+" Iterator";return g.prototype=T(h,{next:w(1,f)}),O(g,u,!1,!0),D[u]=P,g}}),8711:(function(y,b,d){var h=d(69),T=d(2760),w=d(774);y.exports=h?function(O,D,P){return T.f(O,D,w(1,P))}:function(O,D,P){return O[D]=P,O}}),774:(function(y){y.exports=function(b,d){return{enumerable:!(b&1),configurable:!(b&2),writable:!(b&4),value:d}}}),9361:(function(y,b,d){var h=d(77),T=d(2760),w=d(774);y.exports=function(O,D,P){var g=h(D);g in O?T.f(O,g,w(0,P)):O[g]=P}}),7218:(function(y,b,d){var h=d(3085),T=d(5546),w=d(2282),O=d(6447),D=d(5148),P=d(9341),g=d(4469),i=d(1284),f=d(8711),u=d(9482),t=d(8182),n=d(7771),e=d(4413),s=w.PROPER,v=w.CONFIGURABLE,o=e.IteratorPrototype,m=e.BUGGY_SAFARI_ITERATORS,C=t("iterator"),I="keys",M="values",k="entries",N=function(){return this};y.exports=function(H,F,W,it,V,gt,J){D(W,F,it);var mt=function(Y){if(Y===V&&Q)return Q;if(!m&&Y in ct)return ct[Y];switch(Y){case I:return function(){return new W(this,Y)};case M:return function(){return new W(this,Y)};case k:return function(){return new W(this,Y)}}return function(){return new W(this)}},B=F+" Iterator",St=!1,ct=H.prototype,Pt=ct[C]||ct["@@iterator"]||V&&ct[V],Q=!m&&Pt||mt(V),rt=F=="Array"&&ct.entries||Pt,$,X,at;if(rt&&($=P(rt.call(new H)),$!==Object.prototype&&$.next&&(!T&&P($)!==o&&(g?g($,o):O($[C])||u($,C,N)),i($,B,!0,!0),T&&(n[B]=N))),s&&V==M&&Pt&&Pt.name!==M&&(!T&&v?f(ct,"name",M):(St=!0,Q=function(){return Pt.call(this)})),V)if(X={values:mt(M),keys:gt?Q:mt(I),entries:mt(k)},J)for(at in X)(m||St||!(at in ct))&&u(ct,at,X[at]);else h({target:F,proto:!0,forced:m||St},X);return(!T||J)&&ct[C]!==Q&&u(ct,C,Q,{name:V}),n[F]=Q,X}}),1488:(function(y,b,d){var h=d(7545),T=d(4500),w=d(9207),O=d(2760).f;y.exports=function(D){var P=h.Symbol||(h.Symbol={});T(P,D)||O(P,D,{value:w.f(D)})}}),69:(function(y,b,d){var h=d(6192);y.exports=!h(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),7449:(function(y,b,d){var h=d(8576),T=d(5744),w=h.document,O=T(w)&&T(w.createElement);y.exports=function(D){return O?w.createElement(D):{}}}),7365:(function(y){y.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),2957:(function(y){y.exports=typeof window=="object"}),9347:(function(y,b,d){var h=d(8989),T=d(8576);y.exports=/ipad|iphone|ipod/i.test(h)&&T.Pebble!==void 0}),9536:(function(y,b,d){var h=d(8989);y.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(h)}),224:(function(y,b,d){var h=d(9272),T=d(8576);y.exports=h(T.process)=="process"}),5914:(function(y,b,d){var h=d(8989);y.exports=/web0s(?!.*chrome)/i.test(h)}),8989:(function(y,b,d){var h=d(150);y.exports=h("navigator","userAgent")||""}),4218:(function(y,b,d){var h=d(8576),T=d(8989),w=h.process,O=h.Deno,D=w&&w.versions||O&&O.version,P=D&&D.v8,g,i;P?(g=P.split("."),i=g[0]<4?1:g[0]+g[1]):T&&(g=T.match(/Edge\/(\d+)/),(!g||g[1]>=74)&&(g=T.match(/Chrome\/(\d+)/),g&&(i=g[1]))),y.exports=i&&+i}),5607:(function(y,b,d){var h=d(7545);y.exports=function(T){return h[T+"Prototype"]}}),2952:(function(y){y.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),3085:(function(y,b,d){var h=d(8576),T=d(6447),w=d(5141).f,O=d(9245),D=d(7545),P=d(8043),g=d(8711),i=d(4500),f=function(u){var t=function(n,e,s){if(this instanceof u){switch(arguments.length){case 0:return new u;case 1:return new u(n);case 2:return new u(n,e)}return new u(n,e,s)}return u.apply(this,arguments)};return t.prototype=u.prototype,t};y.exports=function(u,t){var n=u.target,e=u.global,s=u.stat,v=u.proto,o=e?h:s?h[n]:(h[n]||{}).prototype,m=e?D:D[n]||g(D,n,{})[n],C=m.prototype,I,M,k,N,H,F,W,it,V;for(N in t)I=O(e?N:n+(s?".":"#")+N,u.forced),M=!I&&o&&i(o,N),F=m[N],M&&(u.noTargetGet?(V=w(o,N),W=V&&V.value):W=o[N]),H=M&&W?W:t[N],!(M&&typeof F==typeof H)&&(u.bind&&M?it=P(H,h):u.wrap&&M?it=f(H):v&&T(H)?it=P(Function.call,H):it=H,(u.sham||H&&H.sham||F&&F.sham)&&g(it,"sham",!0),g(m,N,it),v&&(k=n+"Prototype",i(D,k)||g(D,k,{}),g(D[k],N,H),u.real&&C&&!C[N]&&g(C,N,H)))}}),6192:(function(y){y.exports=function(b){try{return!!b()}catch{return!0}}}),8043:(function(y,b,d){var h=d(6235);y.exports=function(T,w,O){if(h(T),w===void 0)return T;switch(O){case 0:return function(){return T.call(w)};case 1:return function(D){return T.call(w,D)};case 2:return function(D,P){return T.call(w,D,P)};case 3:return function(D,P,g){return T.call(w,D,P,g)}}return function(){return T.apply(w,arguments)}}}),6782:(function(y,b,d){var h=d(6235),T=d(5744),w=[].slice,O={},D=function(P,g,i){if(!(g in O)){for(var f=[],u=0;u<g;u++)f[u]="a["+u+"]";O[g]=Function("C,a","return new C("+f.join(",")+")")}return O[g](P,i)};y.exports=Function.bind||function(g){var i=h(this),f=w.call(arguments,1),u=function(){var n=f.concat(w.call(arguments));return this instanceof u?D(i,n.length,n):i.apply(g,n)};return T(i.prototype)&&(u.prototype=i.prototype),u}}),2282:(function(y,b,d){var h=d(69),T=d(4500),w=Function.prototype,O=h&&Object.getOwnPropertyDescriptor,D=T(w,"name"),P=D&&(function(){}).name==="something",g=D&&(!h||h&&O(w,"name").configurable);y.exports={EXISTS:D,PROPER:P,CONFIGURABLE:g}}),150:(function(y,b,d){var h=d(7545),T=d(8576),w=d(6447),O=function(D){return w(D)?D:void 0};y.exports=function(D,P){return arguments.length<2?O(h[D])||O(T[D]):h[D]&&h[D][P]||T[D]&&T[D][P]}}),8703:(function(y,b,d){var h=d(4696),T=d(5037),w=d(7771),O=d(8182),D=O("iterator");y.exports=function(P){if(P!=null)return T(P,D)||T(P,"@@iterator")||w[h(P)]}}),1669:(function(y,b,d){var h=d(6235),T=d(1138),w=d(8703);y.exports=function(O,D){var P=arguments.length<2?w(O):D;if(h(P))return T(P.call(O));throw TypeError(String(O)+" is not iterable")}}),5037:(function(y,b,d){var h=d(6235);y.exports=function(T,w){var O=T[w];return O==null?void 0:h(O)}}),8576:(function(y,b,d){var h=function(T){return T&&T.Math==Math&&T};y.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof d.g=="object"&&d.g)||(function(){return this})()||Function("return this")()}),4500:(function(y,b,d){var h=d(1795),T={}.hasOwnProperty;y.exports=Object.hasOwn||function(O,D){return T.call(h(O),D)}}),4535:(function(y){y.exports={}}),3681:(function(y,b,d){var h=d(8576);y.exports=function(T,w){var O=h.console;O&&O.error&&(arguments.length===1?O.error(T):O.error(T,w))}}),7403:(function(y,b,d){var h=d(150);y.exports=h("document","documentElement")}),188:(function(y,b,d){var h=d(69),T=d(6192),w=d(7449);y.exports=!h&&!T(function(){return Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a!=7})}),2202:(function(y,b,d){var h=d(6192),T=d(9272),w="".split;y.exports=h(function(){return!Object("z").propertyIsEnumerable(0)})?function(O){return T(O)=="String"?w.call(O,""):Object(O)}:Object}),9516:(function(y,b,d){var h=d(6447),T=d(6434),w=Function.toString;h(T.inspectSource)||(T.inspectSource=function(O){return w.call(O)}),y.exports=T.inspectSource}),273:(function(y,b,d){var h=d(5744),T=d(8711);y.exports=function(w,O){h(O)&&"cause"in O&&T(w,"cause",w.cause)}}),3326:(function(y,b,d){var h=d(8921),T=d(8576),w=d(5744),O=d(8711),D=d(4500),P=d(6434),g=d(9766),i=d(4535),f="Object already initialized",u=T.WeakMap,t,n,e,s=function(k){return e(k)?n(k):t(k,{})},v=function(k){return function(N){var H;if(!w(N)||(H=n(N)).type!==k)throw TypeError("Incompatible receiver, "+k+" required");return H}};if(h||P.state){var o=P.state||(P.state=new u),m=o.get,C=o.has,I=o.set;t=function(k,N){if(C.call(o,k))throw new TypeError(f);return N.facade=k,I.call(o,k,N),N},n=function(k){return m.call(o,k)||{}},e=function(k){return C.call(o,k)}}else{var M=g("state");i[M]=!0,t=function(k,N){if(D(k,M))throw new TypeError(f);return N.facade=k,O(k,M,N),N},n=function(k){return D(k,M)?k[M]:{}},e=function(k){return D(k,M)}}y.exports={set:t,get:n,has:e,enforce:s,getterFor:v}}),6109:(function(y,b,d){var h=d(8182),T=d(7771),w=h("iterator"),O=Array.prototype;y.exports=function(D){return D!==void 0&&(T.Array===D||O[w]===D)}}),4770:(function(y,b,d){var h=d(9272);y.exports=Array.isArray||function(w){return h(w)=="Array"}}),6447:(function(y){y.exports=function(b){return typeof b=="function"}}),2091:(function(y,b,d){var h=d(6192),T=d(6447),w=d(4696),O=d(150),D=d(9516),P=[],g=O("Reflect","construct"),i=/^\s*(?:class|function)\b/,f=i.exec,u=!i.exec(function(){}),t=function(e){if(!T(e))return!1;try{return g(Object,P,e),!0}catch{return!1}},n=function(e){if(!T(e))return!1;switch(w(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return u||!!f.call(i,D(e))};y.exports=!g||h(function(){var e;return t(t.call)||!t(Object)||!t(function(){e=!0})||e})?n:t}),9245:(function(y,b,d){var h=d(6192),T=d(6447),w=/#|\.prototype\./,O=function(f,u){var t=P[D(f)];return t==i?!0:t==g?!1:T(u)?h(u):!!u},D=O.normalize=function(f){return String(f).replace(w,".").toLowerCase()},P=O.data={},g=O.NATIVE="N",i=O.POLYFILL="P";y.exports=O}),5744:(function(y,b,d){var h=d(6447);y.exports=function(T){return typeof T=="object"?T!==null:h(T)}}),5546:(function(y){y.exports=!0}),3236:(function(y,b,d){var h=d(6447),T=d(150),w=d(615);y.exports=w?function(O){return typeof O=="symbol"}:function(O){var D=T("Symbol");return h(D)&&Object(O)instanceof D}}),3442:(function(y,b,d){var h=d(1138),T=d(6109),w=d(4104),O=d(8043),D=d(1669),P=d(8703),g=d(6639),i=function(f,u){this.stopped=f,this.result=u};y.exports=function(f,u,t){var n=t&&t.that,e=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_ITERATOR),v=!!(t&&t.INTERRUPTED),o=O(u,n,1+e+v),m,C,I,M,k,N,H,F=function(it){return m&&g(m,"normal",it),new i(!0,it)},W=function(it){return e?(h(it),v?o(it[0],it[1],F):o(it[0],it[1])):v?o(it,F):o(it)};if(s)m=f;else{if(C=P(f),!C)throw TypeError(String(f)+" is not iterable");if(T(C)){for(I=0,M=w(f);M>I;I++)if(k=W(f[I]),k&&k instanceof i)return k;return new i(!1)}m=D(f,C)}for(N=m.next;!(H=N.call(m)).done;){try{k=W(H.value)}catch(it){g(m,"throw",it)}if(typeof k=="object"&&k&&k instanceof i)return k}return new i(!1)}}),6639:(function(y,b,d){var h=d(1138),T=d(5037);y.exports=function(w,O,D){var P,g;h(w);try{if(P=T(w,"return"),!P){if(O==="throw")throw D;return D}P=P.call(w)}catch(i){g=!0,P=i}if(O==="throw")throw D;if(g)throw P;return h(P),D}}),4413:(function(y,b,d){var h=d(6192),T=d(6447),w=d(2853),O=d(9341),D=d(9482),P=d(8182),g=d(5546),i=P("iterator"),f=!1,u,t,n;[].keys&&(n=[].keys(),"next"in n?(t=O(O(n)),t!==Object.prototype&&(u=t)):f=!0);var e=u==null||h(function(){var s={};return u[i].call(s)!==s});e?u={}:g&&(u=w(u)),T(u[i])||D(u,i,function(){return this}),y.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:f}}),7771:(function(y){y.exports={}}),4104:(function(y,b,d){var h=d(8445);y.exports=function(T){return h(T.length)}}),2950:(function(y,b,d){var h=d(8576),T=d(5141).f,w=d(7160).set,O=d(9536),D=d(9347),P=d(5914),g=d(224),i=h.MutationObserver||h.WebKitMutationObserver,f=h.document,u=h.process,t=h.Promise,n=T(h,"queueMicrotask"),e=n&&n.value,s,v,o,m,C,I,M,k;e||(s=function(){var N,H;for(g&&(N=u.domain)&&N.exit();v;){H=v.fn,v=v.next;try{H()}catch(F){throw v?m():o=void 0,F}}o=void 0,N&&N.enter()},!O&&!g&&!P&&i&&f?(C=!0,I=f.createTextNode(""),new i(s).observe(I,{characterData:!0}),m=function(){I.data=C=!C}):!D&&t&&t.resolve?(M=t.resolve(void 0),M.constructor=t,k=M.then,m=function(){k.call(M,s)}):g?m=function(){u.nextTick(s)}:m=function(){w.call(h,s)}),y.exports=e||function(N){var H={fn:N,next:void 0};o&&(o.next=H),v||(v=H,m()),o=H}}),4471:(function(y,b,d){var h=d(8576);y.exports=h.Promise}),3045:(function(y,b,d){var h=d(4218),T=d(6192);y.exports=!!Object.getOwnPropertySymbols&&!T(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&h&&h<41})}),4551:(function(y,b,d){var h=d(6192),T=d(8182),w=d(5546),O=T("iterator");y.exports=!h(function(){var D=new URL("b?a=1&b=2&c=3","http://a"),P=D.searchParams,g="";return D.pathname="c%20d",P.forEach(function(i,f){P.delete("b"),g+=f+i}),w&&!D.toJSON||!P.sort||D.href!=="http://a/c%20d?a=1&c=3"||P.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!P[O]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||g!=="a1c3"||new URL("http://x",void 0).host!=="x"})}),8921:(function(y,b,d){var h=d(8576),T=d(6447),w=d(9516),O=h.WeakMap;y.exports=T(O)&&/native code/.test(w(O))}),9438:(function(y,b,d){var h=d(6235),T=function(w){var O,D;this.promise=new w(function(P,g){if(O!==void 0||D!==void 0)throw TypeError("Bad Promise constructor");O=P,D=g}),this.resolve=h(O),this.reject=h(D)};y.exports.f=function(w){return new T(w)}}),15:(function(y,b,d){var h=d(8576),T=d(6192),w=d(4845),O=d(4277).trim,D=d(1450),P=h.parseFloat,g=h.Symbol,i=g&&g.iterator,f=1/P(D+"-0")!==-1/0||i&&!T(function(){P(Object(i))});y.exports=f?function(t){var n=O(w(t)),e=P(n);return e===0&&n.charAt(0)=="-"?-0:e}:P}),2558:(function(y,b,d){var h=d(8576),T=d(6192),w=d(4845),O=d(4277).trim,D=d(1450),P=h.parseInt,g=h.Symbol,i=g&&g.iterator,f=/^[+-]?0[Xx]/,u=P(D+"08")!==8||P(D+"0x16")!==22||i&&!T(function(){P(Object(i))});y.exports=u?function(n,e){var s=O(w(n));return P(s,e>>>0||(f.test(s)?16:10))}:P}),2503:(function(y,b,d){var h=d(69),T=d(6192),w=d(7653),O=d(4750),D=d(6007),P=d(1795),g=d(2202),i=Object.assign,f=Object.defineProperty;y.exports=!i||T(function(){if(h&&i({b:1},i(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var u={},t={},n=Symbol(),e="abcdefghijklmnopqrst";return u[n]=7,e.split("").forEach(function(s){t[s]=s}),i({},u)[n]!=7||w(i({},t)).join("")!=e})?function(t,n){for(var e=P(t),s=arguments.length,v=1,o=O.f,m=D.f;s>v;)for(var C=g(arguments[v++]),I=o?w(C).concat(o(C)):w(C),M=I.length,k=0,N;M>k;)N=I[k++],(!h||m.call(C,N))&&(e[N]=C[N]);return e}:i}),2853:(function(y,b,d){var h=d(1138),T=d(1187),w=d(2952),O=d(4535),D=d(7403),P=d(7449),g=d(9766),i=">",f="<",u="prototype",t="script",n=g("IE_PROTO"),e=function(){},s=function(I){return f+t+i+I+f+"/"+t+i},v=function(I){I.write(s("")),I.close();var M=I.parentWindow.Object;return I=null,M},o=function(){var I=P("iframe"),M="java"+t+":",k;return I.style.display="none",D.appendChild(I),I.src=String(M),k=I.contentWindow.document,k.open(),k.write(s("document.F=Object")),k.close(),k.F},m,C=function(){try{m=new ActiveXObject("htmlfile")}catch{}C=typeof document<"u"?document.domain&&m?v(m):o():v(m);for(var I=w.length;I--;)delete C[u][w[I]];return C()};O[n]=!0,y.exports=Object.create||function(M,k){var N;return M!==null?(e[u]=h(M),N=new e,e[u]=null,N[n]=M):N=C(),k===void 0?N:T(N,k)}}),1187:(function(y,b,d){var h=d(69),T=d(2760),w=d(1138),O=d(7653);y.exports=h?Object.defineProperties:function(P,g){w(P);for(var i=O(g),f=i.length,u=0,t;f>u;)T.f(P,t=i[u++],g[t]);return P}}),2760:(function(y,b,d){var h=d(69),T=d(188),w=d(1138),O=d(77),D=Object.defineProperty;b.f=h?D:function(g,i,f){if(w(g),i=O(i),w(f),T)try{return D(g,i,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(g[i]=f.value),g}}),5141:(function(y,b,d){var h=d(69),T=d(6007),w=d(774),O=d(101),D=d(77),P=d(4500),g=d(188),i=Object.getOwnPropertyDescriptor;b.f=h?i:function(u,t){if(u=O(u),t=D(t),g)try{return i(u,t)}catch{}if(P(u,t))return w(!T.f.call(u,t),u[t])}}),4052:(function(y,b,d){var h=d(101),T=d(2092).f,w={}.toString,O=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],D=function(P){try{return T(P)}catch{return O.slice()}};y.exports.f=function(g){return O&&w.call(g)=="[object Window]"?D(g):T(h(g))}}),2092:(function(y,b,d){var h=d(7934),T=d(2952),w=T.concat("length","prototype");b.f=Object.getOwnPropertyNames||function(D){return h(D,w)}}),4750:(function(y,b){b.f=Object.getOwnPropertySymbols}),9341:(function(y,b,d){var h=d(4500),T=d(6447),w=d(1795),O=d(9766),D=d(4635),P=O("IE_PROTO"),g=Object.prototype;y.exports=D?Object.getPrototypeOf:function(i){var f=w(i);if(h(f,P))return f[P];var u=f.constructor;return T(u)&&f instanceof u?u.prototype:f instanceof Object?g:null}}),7934:(function(y,b,d){var h=d(4500),T=d(101),w=d(8180).indexOf,O=d(4535);y.exports=function(D,P){var g=T(D),i=0,f=[],u;for(u in g)!h(O,u)&&h(g,u)&&f.push(u);for(;P.length>i;)h(g,u=P[i++])&&(~w(f,u)||f.push(u));return f}}),7653:(function(y,b,d){var h=d(7934),T=d(2952);y.exports=Object.keys||function(O){return h(O,T)}}),6007:(function(y,b){var d={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,T=h&&!d.call({1:2},1);b.f=T?function(O){var D=h(this,O);return!!D&&D.enumerable}:d}),4469:(function(y,b,d){var h=d(1138),T=d(7757);y.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var w=!1,O={},D;try{D=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,D.call(O,[]),w=O instanceof Array}catch{}return function(g,i){return h(g),T(i),w?D.call(g,i):g.__proto__=i,g}})():void 0)}),158:(function(y,b,d){var h=d(3471),T=d(4696);y.exports=h?{}.toString:function(){return"[object "+T(this)+"]"}}),380:(function(y,b,d){var h=d(6447),T=d(5744);y.exports=function(w,O){var D,P;if(O==="string"&&h(D=w.toString)&&!T(P=D.call(w))||h(D=w.valueOf)&&!T(P=D.call(w))||O!=="string"&&h(D=w.toString)&&!T(P=D.call(w)))return P;throw TypeError("Can't convert object to primitive value")}}),7545:(function(y){y.exports={}}),892:(function(y){y.exports=function(b){try{return{error:!1,value:b()}}catch(d){return{error:!0,value:d}}}}),9126:(function(y,b,d){var h=d(1138),T=d(5744),w=d(9438);y.exports=function(O,D){if(h(O),T(D)&&D.constructor===O)return D;var P=w.f(O),g=P.resolve;return g(D),P.promise}}),533:(function(y,b,d){var h=d(9482);y.exports=function(T,w,O){for(var D in w)O&&O.unsafe&&T[D]?T[D]=w[D]:h(T,D,w[D],O);return T}}),9482:(function(y,b,d){var h=d(8711);y.exports=function(T,w,O,D){D&&D.enumerable?T[w]=O:h(T,w,O)}}),3209:(function(y){y.exports=function(b){if(b==null)throw TypeError("Can't call method on "+b);return b}}),7613:(function(y,b,d){var h=d(8576);y.exports=function(T,w){try{Object.defineProperty(h,T,{value:w,configurable:!0,writable:!0})}catch{h[T]=w}return w}}),3656:(function(y,b,d){var h=d(150),T=d(2760),w=d(8182),O=d(69),D=w("species");y.exports=function(P){var g=h(P),i=T.f;O&&g&&!g[D]&&i(g,D,{configurable:!0,get:function(){return this}})}}),1284:(function(y,b,d){var h=d(3471),T=d(2760).f,w=d(8711),O=d(4500),D=d(158),P=d(8182),g=P("toStringTag");y.exports=function(i,f,u,t){if(i){var n=u?i:i.prototype;O(n,g)||T(n,g,{configurable:!0,value:f}),t&&!h&&w(n,"toString",D)}}}),9766:(function(y,b,d){var h=d(8717),T=d(2759),w=h("keys");y.exports=function(O){return w[O]||(w[O]=T(O))}}),6434:(function(y,b,d){var h=d(8576),T=d(7613),w="__core-js_shared__",O=h[w]||T(w,{});y.exports=O}),8717:(function(y,b,d){var h=d(5546),T=d(6434);(y.exports=function(w,O){return T[w]||(T[w]=O!==void 0?O:{})})("versions",[]).push({version:"3.18.2",mode:h?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})}),4743:(function(y,b,d){var h=d(1138),T=d(1404),w=d(8182),O=w("species");y.exports=function(D,P){var g=h(D).constructor,i;return g===void 0||(i=h(g)[O])==null?P:T(i)}}),863:(function(y,b,d){var h=d(1941),T=d(4845),w=d(3209),O=function(D){return function(P,g){var i=T(w(P)),f=h(g),u=i.length,t,n;return f<0||f>=u?D?"":void 0:(t=i.charCodeAt(f),t<55296||t>56319||f+1===u||(n=i.charCodeAt(f+1))<56320||n>57343?D?i.charAt(f):t:D?i.slice(f,f+2):(t-55296<<10)+(n-56320)+65536)}};y.exports={codeAt:O(!1),charAt:O(!0)}}),7977:(function(y){var b=2147483647,d=36,h=1,T=26,w=38,O=700,D=72,P=128,g="-",i=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",t=d-h,n=Math.floor,e=String.fromCharCode,s=function(C){for(var I=[],M=0,k=C.length;M<k;){var N=C.charCodeAt(M++);if(N>=55296&&N<=56319&&M<k){var H=C.charCodeAt(M++);(H&64512)==56320?I.push(((N&1023)<<10)+(H&1023)+65536):(I.push(N),M--)}else I.push(N)}return I},v=function(C){return C+22+75*(C<26)},o=function(C,I,M){var k=0;for(C=M?n(C/O):C>>1,C+=n(C/I);C>t*T>>1;k+=d)C=n(C/t);return n(k+(t+1)*C/(C+w))},m=function(C){var I=[];C=s(C);var M=C.length,k=P,N=0,H=D,F,W;for(F=0;F<C.length;F++)W=C[F],W<128&&I.push(e(W));var it=I.length,V=it;for(it&&I.push(g);V<M;){var gt=b;for(F=0;F<C.length;F++)W=C[F],W>=k&&W<gt&&(gt=W);var J=V+1;if(gt-k>n((b-N)/J))throw RangeError(u);for(N+=(gt-k)*J,k=gt,F=0;F<C.length;F++){if(W=C[F],W<k&&++N>b)throw RangeError(u);if(W==k){for(var mt=N,B=d;;B+=d){var St=B<=H?h:B>=H+T?T:B-H;if(mt<St)break;var ct=mt-St,Pt=d-St;I.push(e(v(St+ct%Pt))),mt=n(ct/Pt)}I.push(e(v(mt))),H=o(N,J,V==it),N=0,++V}}++N,++k}return I.join("")};y.exports=function(C){var I=[],M=C.toLowerCase().replace(f,".").split("."),k,N;for(k=0;k<M.length;k++)N=M[k],I.push(i.test(N)?"xn--"+m(N):N);return I.join(".")}}),6815:(function(y,b,d){var h=d(2282).PROPER,T=d(6192),w=d(1450),O="";y.exports=function(D){return T(function(){return!!w[D]()||O[D]()!==O||h&&w[D].name!==D})}}),4277:(function(y,b,d){var h=d(3209),T=d(4845),w=d(1450),O="["+w+"]",D=RegExp("^"+O+O+"*"),P=RegExp(O+O+"*$"),g=function(i){return function(f){var u=T(h(f));return i&1&&(u=u.replace(D,"")),i&2&&(u=u.replace(P,"")),u}};y.exports={start:g(1),end:g(2),trim:g(3)}}),7160:(function(y,b,d){var h=d(8576),T=d(6447),w=d(6192),O=d(8043),D=d(7403),P=d(7449),g=d(9536),i=d(224),f=h.setImmediate,u=h.clearImmediate,t=h.process,n=h.MessageChannel,e=h.Dispatch,s=0,v={},o="onreadystatechange",m,C,I,M;try{m=h.location}catch{}var k=function(W){if(v.hasOwnProperty(W)){var it=v[W];delete v[W],it()}},N=function(W){return function(){k(W)}},H=function(W){k(W.data)},F=function(W){h.postMessage(String(W),m.protocol+"//"+m.host)};(!f||!u)&&(f=function(it){for(var V=[],gt=arguments.length,J=1;gt>J;)V.push(arguments[J++]);return v[++s]=function(){(T(it)?it:Function(it)).apply(void 0,V)},C(s),s},u=function(it){delete v[it]},i?C=function(W){t.nextTick(N(W))}:e&&e.now?C=function(W){e.now(N(W))}:n&&!g?(I=new n,M=I.port2,I.port1.onmessage=H,C=O(M.postMessage,M,1)):h.addEventListener&&T(h.postMessage)&&!h.importScripts&&m&&m.protocol!=="file:"&&!w(F)?(C=F,h.addEventListener("message",H,!1)):o in P("script")?C=function(W){D.appendChild(P("script"))[o]=function(){D.removeChild(this),k(W)}}:C=function(W){setTimeout(N(W),0)}),y.exports={set:f,clear:u}}),7739:(function(y,b,d){var h=d(1941),T=Math.max,w=Math.min;y.exports=function(O,D){var P=h(O);return P<0?T(P+D,0):w(P,D)}}),101:(function(y,b,d){var h=d(2202),T=d(3209);y.exports=function(w){return h(T(w))}}),1941:(function(y){var b=Math.ceil,d=Math.floor;y.exports=function(h){var T=+h;return T!==T||T===0?0:(T>0?d:b)(T)}}),8445:(function(y,b,d){var h=d(1941),T=Math.min;y.exports=function(w){return w>0?T(h(w),9007199254740991):0}}),1795:(function(y,b,d){var h=d(3209);y.exports=function(T){return Object(h(T))}}),7888:(function(y,b,d){var h=d(5744),T=d(3236),w=d(5037),O=d(380),D=d(8182),P=D("toPrimitive");y.exports=function(g,i){if(!h(g)||T(g))return g;var f=w(g,P),u;if(f){if(i===void 0&&(i="default"),u=f.call(g,i),!h(u)||T(u))return u;throw TypeError("Can't convert object to primitive value")}return i===void 0&&(i="number"),O(g,i)}}),77:(function(y,b,d){var h=d(7888),T=d(3236);y.exports=function(w){var O=h(w,"string");return T(O)?O:String(O)}}),3471:(function(y,b,d){var h=d(8182),T=h("toStringTag"),w={};w[T]="z",y.exports=String(w)==="[object z]"}),4845:(function(y,b,d){var h=d(4696);y.exports=function(T){if(h(T)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(T)}}),9288:(function(y){y.exports=function(b){try{return String(b)}catch{return"Object"}}}),2759:(function(y){var b=0,d=Math.random();y.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++b+d).toString(36)}}),615:(function(y,b,d){var h=d(3045);y.exports=h&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),9207:(function(y,b,d){var h=d(8182);b.f=h}),8182:(function(y,b,d){var h=d(8576),T=d(8717),w=d(4500),O=d(2759),D=d(3045),P=d(615),g=T("wks"),i=h.Symbol,f=P?i:i&&i.withoutSetter||O;y.exports=function(u){return(!w(g,u)||!(D||typeof g[u]=="string"))&&(D&&w(i,u)?g[u]=i[u]:g[u]=f("Symbol."+u)),g[u]}}),1450:(function(y){y.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),4242:(function(y,b,d){var h=d(3085),T=d(9341),w=d(4469),O=d(2853),D=d(8711),P=d(774),g=d(273),i=d(3442),f=d(4845),u=function(n,e){var s=this,v=arguments.length>2?arguments[2]:void 0;if(!(s instanceof u))return new u(n,e,v);w&&(s=w(new Error(void 0),T(s))),e!==void 0&&D(s,"message",f(e)),g(s,v);var o=[];return i(n,o.push,{that:o}),D(s,"errors",o),s};u.prototype=O(Error.prototype,{constructor:P(5,u),message:P(5,""),name:P(5,"AggregateError")}),h({global:!0},{AggregateError:u})}),9106:(function(y,b,d){var h=d(3085),T=d(6192),w=d(4770),O=d(5744),D=d(1795),P=d(4104),g=d(9361),i=d(1321),f=d(242),u=d(8182),t=d(4218),n=u("isConcatSpreadable"),e=9007199254740991,s="Maximum allowed index exceeded",v=t>=51||!T(function(){var I=[];return I[n]=!1,I.concat()[0]!==I}),o=f("concat"),m=function(I){if(!O(I))return!1;var M=I[n];return M!==void 0?!!M:w(I)},C=!v||!o;h({target:"Array",proto:!0,forced:C},{concat:function(M){var k=D(this),N=i(k,0),H=0,F,W,it,V,gt;for(F=-1,it=arguments.length;F<it;F++)if(gt=F===-1?k:arguments[F],m(gt)){if(V=P(gt),H+V>e)throw TypeError(s);for(W=0;W<V;W++,H++)W in gt&&g(N,H,gt[W])}else{if(H>=e)throw TypeError(s);g(N,H++,gt)}return N.length=H,N}})}),1710:(function(y,b,d){var h=d(3085),T=d(2724),w=d(7423);h({target:"Array",proto:!0},{fill:T}),w("fill")}),3436:(function(y,b,d){var h=d(3085),T=d(454).filter,w=d(242),O=w("filter");h({target:"Array",proto:!0,forced:!O},{filter:function(P){return T(this,P,arguments.length>1?arguments[1]:void 0)}})}),9823:(function(y,b,d){var h=d(3085),T=d(7397);h({target:"Array",proto:!0,forced:[].forEach!=T},{forEach:T})}),9173:(function(y,b,d){var h=d(3085),T=d(841),w=d(9770),O=!w(function(D){Array.from(D)});h({target:"Array",stat:!0,forced:O},{from:T})}),2276:(function(y,b,d){var h=d(3085),T=d(8180).indexOf,w=d(424),O=[].indexOf,D=!!O&&1/[1].indexOf(1,-0)<0,P=w("indexOf");h({target:"Array",proto:!0,forced:D||!P},{indexOf:function(i){return D?O.apply(this,arguments)||0:T(this,i,arguments.length>1?arguments[1]:void 0)}})}),8118:(function(y,b,d){var h=d(3085),T=d(4770);h({target:"Array",stat:!0},{isArray:T})}),8939:(function(y,b,d){var h=d(101),T=d(7423),w=d(7771),O=d(3326),D=d(7218),P="Array Iterator",g=O.set,i=O.getterFor(P);y.exports=D(Array,"Array",function(f,u){g(this,{type:P,target:h(f),index:0,kind:u})},function(){var f=i(this),u=f.target,t=f.kind,n=f.index++;return!u||n>=u.length?(f.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:n,done:!1}:t=="values"?{value:u[n],done:!1}:{value:[n,u[n]],done:!1}},"values"),w.Arguments=w.Array,T("keys"),T("values"),T("entries")}),3838:(function(y,b,d){var h=d(3085),T=d(454).map,w=d(242),O=w("map");h({target:"Array",proto:!0,forced:!O},{map:function(P){return T(this,P,arguments.length>1?arguments[1]:void 0)}})}),5818:(function(y,b,d){var h=d(3085),T=d(4770),w=d(2091),O=d(5744),D=d(7739),P=d(4104),g=d(101),i=d(9361),f=d(8182),u=d(242),t=u("slice"),n=f("species"),e=[].slice,s=Math.max;h({target:"Array",proto:!0,forced:!t},{slice:function(o,m){var C=g(this),I=P(C),M=D(o,I),k=D(m===void 0?I:m,I),N,H,F;if(T(C)&&(N=C.constructor,w(N)&&(N===Array||T(N.prototype))?N=void 0:O(N)&&(N=N[n],N===null&&(N=void 0)),N===Array||N===void 0))return e.call(C,M,k);for(H=new(N===void 0?Array:N)(s(k-M,0)),F=0;M<k;M++,F++)M in C&&i(H,F,C[M]);return H.length=F,H}})}),2178:(function(y,b,d){var h=d(3085),T=d(7739),w=d(1941),O=d(4104),D=d(1795),P=d(1321),g=d(9361),i=d(242),f=i("splice"),u=Math.max,t=Math.min,n=9007199254740991,e="Maximum allowed length exceeded";h({target:"Array",proto:!0,forced:!f},{splice:function(v,o){var m=D(this),C=O(m),I=T(v,C),M=arguments.length,k,N,H,F,W,it;if(M===0?k=N=0:M===1?(k=0,N=C-I):(k=M-2,N=t(u(w(o),0),C-I)),C+k-N>n)throw TypeError(e);for(H=P(m,N),F=0;F<N;F++)W=I+F,W in m&&g(H,F,m[W]);if(H.length=N,k<N){for(F=I;F<C-N;F++)W=F+N,it=F+k,W in m?m[it]=m[W]:delete m[it];for(F=C;F>C-N+k;F--)delete m[F-1]}else if(k>N)for(F=C-N;F>I;F--)W=F+N-1,it=F+k-1,W in m?m[it]=m[W]:delete m[it];for(F=0;F<k;F++)m[F+I]=arguments[F+2];return m.length=C-N+k,H}})}),665:(function(y,b,d){var h=d(3085),T=d(6782);h({target:"Function",proto:!0},{bind:T})}),8671:(function(y,b,d){var h=d(8576),T=d(1284);T(h.JSON,"JSON",!0)}),8556:(function(){}),2666:(function(y,b,d){var h=d(3085),T=d(2558);h({target:"Number",stat:!0,forced:Number.parseInt!=T},{parseInt:T})}),3113:(function(y,b,d){var h=d(3085),T=d(69),w=d(2853);h({target:"Object",stat:!0,sham:!T},{create:w})}),297:(function(y,b,d){var h=d(3085),T=d(69),w=d(2760);h({target:"Object",stat:!0,forced:!T,sham:!T},{defineProperty:w.f})}),9234:(function(y,b,d){var h=d(3085),T=d(6192),w=d(1795),O=d(9341),D=d(4635),P=T(function(){O(1)});h({target:"Object",stat:!0,forced:P,sham:!D},{getPrototypeOf:function(i){return O(w(i))}})}),2647:(function(y,b,d){var h=d(3085),T=d(1795),w=d(7653),O=d(6192),D=O(function(){w(1)});h({target:"Object",stat:!0,forced:D},{keys:function(g){return w(T(g))}})}),3222:(function(y,b,d){var h=d(3085),T=d(4469);h({target:"Object",stat:!0},{setPrototypeOf:T})}),6663:(function(){}),4859:(function(y,b,d){var h=d(3085),T=d(15);h({global:!0,forced:parseFloat!=T},{parseFloat:T})}),5706:(function(y,b,d){var h=d(3085),T=d(2558);h({global:!0,forced:parseInt!=T},{parseInt:T})}),7884:(function(y,b,d){var h=d(3085),T=d(6235),w=d(9438),O=d(892),D=d(3442);h({target:"Promise",stat:!0},{allSettled:function(g){var i=this,f=w.f(i),u=f.resolve,t=f.reject,n=O(function(){var e=T(i.resolve),s=[],v=0,o=1;D(g,function(m){var C=v++,I=!1;s.push(void 0),o++,e.call(i,m).then(function(M){I||(I=!0,s[C]={status:"fulfilled",value:M},--o||u(s))},function(M){I||(I=!0,s[C]={status:"rejected",reason:M},--o||u(s))})}),--o||u(s)});return n.error&&t(n.value),f.promise}})}),8885:(function(y,b,d){var h=d(3085),T=d(6235),w=d(150),O=d(9438),D=d(892),P=d(3442),g="No one promise resolved";h({target:"Promise",stat:!0},{any:function(f){var u=this,t=O.f(u),n=t.resolve,e=t.reject,s=D(function(){var v=T(u.resolve),o=[],m=0,C=1,I=!1;P(f,function(M){var k=m++,N=!1;o.push(void 0),C++,v.call(u,M).then(function(H){N||I||(I=!0,n(H))},function(H){N||I||(N=!0,o[k]=H,--C||e(new(w("AggregateError"))(o,g)))})}),--C||e(new(w("AggregateError"))(o,g))});return s.error&&e(s.value),t.promise}})}),1868:(function(y,b,d){var h=d(3085),T=d(5546),w=d(4471),O=d(6192),D=d(150),P=d(6447),g=d(4743),i=d(9126),f=d(9482),u=!!w&&O(function(){w.prototype.finally.call({then:function(){}},function(){})});if(h({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(n){var e=g(this,D("Promise")),s=P(n);return this.then(s?function(v){return i(e,n()).then(function(){return v})}:n,s?function(v){return i(e,n()).then(function(){throw v})}:n)}}),!T&&P(w)){var t=D("Promise").prototype.finally;w.prototype.finally!==t&&f(w.prototype,"finally",t,{unsafe:!0})}}),9021:(function(y,b,d){var h=d(3085),T=d(5546),w=d(8576),O=d(150),D=d(4471),P=d(9482),g=d(533),i=d(4469),f=d(1284),u=d(3656),t=d(6235),n=d(6447),e=d(5744),s=d(6961),v=d(9516),o=d(3442),m=d(9770),C=d(4743),I=d(7160).set,M=d(2950),k=d(9126),N=d(3681),H=d(9438),F=d(892),W=d(3326),it=d(9245),V=d(8182),gt=d(2957),J=d(224),mt=d(4218),B=V("species"),St="Promise",ct=W.get,Pt=W.set,Q=W.getterFor(St),rt=D&&D.prototype,$=D,X=rt,at=w.TypeError,Y=w.document,G=w.process,Z=H.f,q=Z,pt=!!(Y&&Y.createEvent&&w.dispatchEvent),ft=n(w.PromiseRejectionEvent),It="unhandledrejection",bt="rejectionhandled",Mt=0,ot=1,tt=2,et=1,lt=2,ut=!1,yt,At,Yt,Ht,xt=it(St,function(){var Tt=v($),Et=Tt!==String($);if(!Et&&mt===66||T&&!X.finally)return!0;if(mt>=51&&/native code/.test(Tt))return!1;var Ft=new $(function(jt){jt(1)}),Wt=function(jt){jt(function(){},function(){})},Qt=Ft.constructor={};return Qt[B]=Wt,ut=Ft.then(function(){})instanceof Wt,ut?!Et&&gt&&!ft:!0}),Xt=xt||!m(function(Tt){$.all(Tt).catch(function(){})}),Jt=function(Tt){var Et;return e(Tt)&&n(Et=Tt.then)?Et:!1},ae=function(Tt,Et){if(!Tt.notified){Tt.notified=!0;var Ft=Tt.reactions;M(function(){for(var Wt=Tt.value,Qt=Tt.state==ot,jt=0;Ft.length>jt;){var Se=Ft[jt++],Me=Qt?Se.ok:Se.fail,Vt=Se.resolve,_t=Se.reject,me=Se.domain,se,ue,Ae;try{Me?(Qt||(Tt.rejection===lt&&Ut(Tt),Tt.rejection=et),Me===!0?se=Wt:(me&&me.enter(),se=Me(Wt),me&&(me.exit(),Ae=!0)),se===Se.promise?_t(at("Promise-chain cycle")):(ue=Jt(se))?ue.call(se,Vt,_t):Vt(se)):_t(Wt)}catch(De){me&&!Ae&&me.exit(),_t(De)}}Tt.reactions=[],Tt.notified=!1,Et&&!Tt.rejection&&zt(Tt)})}},pe=function(Tt,Et,Ft){var Wt,Qt;pt?(Wt=Y.createEvent("Event"),Wt.promise=Et,Wt.reason=Ft,Wt.initEvent(Tt,!1,!0),w.dispatchEvent(Wt)):Wt={promise:Et,reason:Ft},!ft&&(Qt=w["on"+Tt])?Qt(Wt):Tt===It&&N("Unhandled promise rejection",Ft)},zt=function(Tt){I.call(w,function(){var Et=Tt.facade,Ft=Tt.value,Wt=Gt(Tt),Qt;if(Wt&&(Qt=F(function(){J?G.emit("unhandledRejection",Ft,Et):pe(It,Et,Ft)}),Tt.rejection=J||Gt(Tt)?lt:et,Qt.error))throw Qt.value})},Gt=function(Tt){return Tt.rejection!==et&&!Tt.parent},Ut=function(Tt){I.call(w,function(){var Et=Tt.facade;J?G.emit("rejectionHandled",Et):pe(bt,Et,Tt.value)})},qt=function(Tt,Et,Ft){return function(Wt){Tt(Et,Wt,Ft)}},oe=function(Tt,Et,Ft){Tt.done||(Tt.done=!0,Ft&&(Tt=Ft),Tt.value=Et,Tt.state=tt,ae(Tt,!0))},be=function(Tt,Et,Ft){if(!Tt.done){Tt.done=!0,Ft&&(Tt=Ft);try{if(Tt.facade===Et)throw at("Promise can't be resolved itself");var Wt=Jt(Et);Wt?M(function(){var Qt={done:!1};try{Wt.call(Et,qt(be,Qt,Tt),qt(oe,Qt,Tt))}catch(jt){oe(Qt,jt,Tt)}}):(Tt.value=Et,Tt.state=ot,ae(Tt,!1))}catch(Qt){oe({done:!1},Qt,Tt)}}};if(xt&&($=function(Et){s(this,$,St),t(Et),yt.call(this);var Ft=ct(this);try{Et(qt(be,Ft),qt(oe,Ft))}catch(Wt){oe(Ft,Wt)}},X=$.prototype,yt=function(Et){Pt(this,{type:St,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Mt,value:void 0})},yt.prototype=g(X,{then:function(Et,Ft){var Wt=Q(this),Qt=Z(C(this,$));return Qt.ok=n(Et)?Et:!0,Qt.fail=n(Ft)&&Ft,Qt.domain=J?G.domain:void 0,Wt.parent=!0,Wt.reactions.push(Qt),Wt.state!=Mt&&ae(Wt,!1),Qt.promise},catch:function(Tt){return this.then(void 0,Tt)}}),At=function(){var Tt=new yt,Et=ct(Tt);this.promise=Tt,this.resolve=qt(be,Et),this.reject=qt(oe,Et)},H.f=Z=function(Tt){return Tt===$||Tt===Yt?new At(Tt):q(Tt)},!T&&n(D)&&rt!==Object.prototype)){Ht=rt.then,ut||(P(rt,"then",function(Et,Ft){var Wt=this;return new $(function(Qt,jt){Ht.call(Wt,Qt,jt)}).then(Et,Ft)},{unsafe:!0}),P(rt,"catch",X.catch,{unsafe:!0}));try{delete rt.constructor}catch{}i&&i(rt,X)}h({global:!0,wrap:!0,forced:xt},{Promise:$}),f($,St,!1,!0),u(St),Yt=O(St),h({target:St,stat:!0,forced:xt},{reject:function(Et){var Ft=Z(this);return Ft.reject.call(void 0,Et),Ft.promise}}),h({target:St,stat:!0,forced:T||xt},{resolve:function(Et){return k(T&&this===Yt?$:this,Et)}}),h({target:St,stat:!0,forced:Xt},{all:function(Et){var Ft=this,Wt=Z(Ft),Qt=Wt.resolve,jt=Wt.reject,Se=F(function(){var Me=t(Ft.resolve),Vt=[],_t=0,me=1;o(Et,function(se){var ue=_t++,Ae=!1;Vt.push(void 0),me++,Me.call(Ft,se).then(function(De){Ae||(Ae=!0,Vt[ue]=De,--me||Qt(Vt))},jt)}),--me||Qt(Vt)});return Se.error&&jt(Se.value),Wt.promise},race:function(Et){var Ft=this,Wt=Z(Ft),Qt=Wt.reject,jt=F(function(){var Se=t(Ft.resolve);o(Et,function(Me){Se.call(Ft,Me).then(Wt.resolve,Qt)})});return jt.error&&Qt(jt.value),Wt.promise}})}),5397:(function(y,b,d){var h=d(3085),T=d(150),w=d(1404),O=d(1138),D=d(5744),P=d(2853),g=d(6782),i=d(6192),f=T("Reflect","construct"),u=i(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),t=!i(function(){f(function(){})}),n=u||t;h({target:"Reflect",stat:!0,forced:n,sham:n},{construct:function(s,v){w(s),O(v);var o=arguments.length<3?s:w(arguments[2]);if(t&&!u)return f(s,v,o);if(s==o){switch(v.length){case 0:return new s;case 1:return new s(v[0]);case 2:return new s(v[0],v[1]);case 3:return new s(v[0],v[1],v[2]);case 4:return new s(v[0],v[1],v[2],v[3])}var m=[null];return m.push.apply(m,v),new(g.apply(s,m))}var C=o.prototype,I=P(D(C)?C:Object.prototype),M=Function.apply.call(s,I,v);return D(M)?M:I}})}),1367:(function(){}),5454:(function(y,b,d){var h=d(863).charAt,T=d(4845),w=d(3326),O=d(7218),D="String Iterator",P=w.set,g=w.getterFor(D);O(String,"String",function(i){P(this,{type:D,string:T(i),index:0})},function(){var f=g(this),u=f.string,t=f.index,n;return t>=u.length?{value:void 0,done:!0}:(n=h(u,t),f.index+=n.length,{value:n,done:!1})})}),957:(function(y,b,d){var h=d(3085),T=d(4277).trim,w=d(6815);h({target:"String",proto:!0,forced:w("trim")},{trim:function(){return T(this)}})}),9781:(function(y,b,d){var h=d(1488);h("asyncIterator")}),492:(function(){}),6681:(function(y,b,d){var h=d(1488);h("hasInstance")}),9594:(function(y,b,d){var h=d(1488);h("isConcatSpreadable")}),3665:(function(y,b,d){var h=d(1488);h("iterator")}),6187:(function(y,b,d){var h=d(3085),T=d(8576),w=d(150),O=d(5546),D=d(69),P=d(3045),g=d(6192),i=d(4500),f=d(4770),u=d(6447),t=d(5744),n=d(3236),e=d(1138),s=d(1795),v=d(101),o=d(77),m=d(4845),C=d(774),I=d(2853),M=d(7653),k=d(2092),N=d(4052),H=d(4750),F=d(5141),W=d(2760),it=d(6007),V=d(9482),gt=d(8717),J=d(9766),mt=d(4535),B=d(2759),St=d(8182),ct=d(9207),Pt=d(1488),Q=d(1284),rt=d(3326),$=d(454).forEach,X=J("hidden"),at="Symbol",Y="prototype",G=St("toPrimitive"),Z=rt.set,q=rt.getterFor(at),pt=Object[Y],ft=T.Symbol,It=w("JSON","stringify"),bt=F.f,Mt=W.f,ot=N.f,tt=it.f,et=gt("symbols"),lt=gt("op-symbols"),ut=gt("string-to-symbol-registry"),yt=gt("symbol-to-string-registry"),At=gt("wks"),Yt=T.QObject,Ht=!Yt||!Yt[Y]||!Yt[Y].findChild,xt=D&&g(function(){return I(Mt({},"a",{get:function(){return Mt(this,"a",{value:7}).a}})).a!=7})?function(Tt,Et,Ft){var Wt=bt(pt,Et);Wt&&delete pt[Et],Mt(Tt,Et,Ft),Wt&&Tt!==pt&&Mt(pt,Et,Wt)}:Mt,Xt=function(Tt,Et){var Ft=et[Tt]=I(ft[Y]);return Z(Ft,{type:at,tag:Tt,description:Et}),D||(Ft.description=Et),Ft},Jt=function(Et,Ft,Wt){Et===pt&&Jt(lt,Ft,Wt),e(Et);var Qt=o(Ft);return e(Wt),i(et,Qt)?(Wt.enumerable?(i(Et,X)&&Et[X][Qt]&&(Et[X][Qt]=!1),Wt=I(Wt,{enumerable:C(0,!1)})):(i(Et,X)||Mt(Et,X,C(1,{})),Et[X][Qt]=!0),xt(Et,Qt,Wt)):Mt(Et,Qt,Wt)},ae=function(Et,Ft){e(Et);var Wt=v(Ft),Qt=M(Wt).concat(qt(Wt));return $(Qt,function(jt){(!D||zt.call(Wt,jt))&&Jt(Et,jt,Wt[jt])}),Et},pe=function(Et,Ft){return Ft===void 0?I(Et):ae(I(Et),Ft)},zt=function(Et){var Ft=o(Et),Wt=tt.call(this,Ft);return this===pt&&i(et,Ft)&&!i(lt,Ft)?!1:Wt||!i(this,Ft)||!i(et,Ft)||i(this,X)&&this[X][Ft]?Wt:!0},Gt=function(Et,Ft){var Wt=v(Et),Qt=o(Ft);if(!(Wt===pt&&i(et,Qt)&&!i(lt,Qt))){var jt=bt(Wt,Qt);return jt&&i(et,Qt)&&!(i(Wt,X)&&Wt[X][Qt])&&(jt.enumerable=!0),jt}},Ut=function(Et){var Ft=ot(v(Et)),Wt=[];return $(Ft,function(Qt){!i(et,Qt)&&!i(mt,Qt)&&Wt.push(Qt)}),Wt},qt=function(Et){var Ft=Et===pt,Wt=ot(Ft?lt:v(Et)),Qt=[];return $(Wt,function(jt){i(et,jt)&&(!Ft||i(pt,jt))&&Qt.push(et[jt])}),Qt};if(P||(ft=function(){if(this instanceof ft)throw TypeError("Symbol is not a constructor");var Et=!arguments.length||arguments[0]===void 0?void 0:m(arguments[0]),Ft=B(Et),Wt=function(Qt){this===pt&&Wt.call(lt,Qt),i(this,X)&&i(this[X],Ft)&&(this[X][Ft]=!1),xt(this,Ft,C(1,Qt))};return D&&Ht&&xt(pt,Ft,{configurable:!0,set:Wt}),Xt(Ft,Et)},V(ft[Y],"toString",function(){return q(this).tag}),V(ft,"withoutSetter",function(Tt){return Xt(B(Tt),Tt)}),it.f=zt,W.f=Jt,F.f=Gt,k.f=N.f=Ut,H.f=qt,ct.f=function(Tt){return Xt(St(Tt),Tt)},D&&(Mt(ft[Y],"description",{configurable:!0,get:function(){return q(this).description}}),O||V(pt,"propertyIsEnumerable",zt,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!P,sham:!P},{Symbol:ft}),$(M(At),function(Tt){Pt(Tt)}),h({target:at,stat:!0,forced:!P},{for:function(Tt){var Et=m(Tt);if(i(ut,Et))return ut[Et];var Ft=ft(Et);return ut[Et]=Ft,yt[Ft]=Et,Ft},keyFor:function(Et){if(!n(Et))throw TypeError(Et+" is not a symbol");if(i(yt,Et))return yt[Et]},useSetter:function(){Ht=!0},useSimple:function(){Ht=!1}}),h({target:"Object",stat:!0,forced:!P,sham:!D},{create:pe,defineProperty:Jt,defineProperties:ae,getOwnPropertyDescriptor:Gt}),h({target:"Object",stat:!0,forced:!P},{getOwnPropertyNames:Ut,getOwnPropertySymbols:qt}),h({target:"Object",stat:!0,forced:g(function(){H.f(1)})},{getOwnPropertySymbols:function(Et){return H.f(s(Et))}}),It){var oe=!P||g(function(){var Tt=ft();return It([Tt])!="[null]"||It({a:Tt})!="{}"||It(Object(Tt))!="{}"});h({target:"JSON",stat:!0,forced:oe},{stringify:function(Et,Ft,Wt){for(var Qt=[Et],jt=1,Se;arguments.length>jt;)Qt.push(arguments[jt++]);if(Se=Ft,!(!t(Ft)&&Et===void 0||n(Et)))return f(Ft)||(Ft=function(Me,Vt){if(u(Se)&&(Vt=Se.call(this,Me,Vt)),!n(Vt))return Vt}),Qt[1]=Ft,It.apply(null,Qt)}})}if(!ft[Y][G]){var be=ft[Y].valueOf;V(ft[Y],G,function(){return be.apply(this,arguments)})}Q(ft,at),mt[X]=!0}),1250:(function(y,b,d){var h=d(1488);h("matchAll")}),9017:(function(y,b,d){var h=d(1488);h("match")}),9786:(function(y,b,d){var h=d(1488);h("replace")}),503:(function(y,b,d){var h=d(1488);h("search")}),6565:(function(y,b,d){var h=d(1488);h("species")}),9322:(function(y,b,d){var h=d(1488);h("split")}),3610:(function(y,b,d){var h=d(1488);h("toPrimitive")}),6886:(function(y,b,d){var h=d(1488);h("toStringTag")}),3514:(function(y,b,d){var h=d(1488);h("unscopables")}),177:(function(y,b,d){var h=d(1488);h("asyncDispose")}),9031:(function(y,b,d){var h=d(1488);h("dispose")}),6658:(function(y,b,d){var h=d(1488);h("matcher")}),1875:(function(y,b,d){var h=d(1488);h("metadata")}),8658:(function(y,b,d){var h=d(1488);h("observable")}),4592:(function(y,b,d){var h=d(1488);h("patternMatch")}),6680:(function(y,b,d){var h=d(1488);h("replaceAll")}),162:(function(y,b,d){d(8939);var h=d(7365),T=d(8576),w=d(4696),O=d(8711),D=d(7771),P=d(8182),g=P("toStringTag");for(var i in h){var f=T[i],u=f&&f.prototype;u&&w(u)!==g&&O(u,g,i),D[i]=D.Array}}),2906:(function(y,b,d){var h=d(3085),T=d(8576),w=d(6447),O=d(8989),D=[].slice,P=/MSIE .\./.test(O),g=function(i){return function(f,u){var t=arguments.length>2,n=t?D.call(arguments,2):void 0;return i(t?function(){(w(f)?f:Function(f)).apply(this,n)}:f,u)}};h({global:!0,bind:!0,forced:P},{setTimeout:g(T.setTimeout),setInterval:g(T.setInterval)})}),9336:(function(y,b,d){d(8939);var h=d(3085),T=d(150),w=d(4551),O=d(9482),D=d(533),P=d(1284),g=d(5148),i=d(3326),f=d(6961),u=d(6447),t=d(4500),n=d(8043),e=d(4696),s=d(1138),v=d(5744),o=d(4845),m=d(2853),C=d(774),I=d(1669),M=d(8703),k=d(8182),N=T("fetch"),H=T("Request"),F=H&&H.prototype,W=T("Headers"),it=k("iterator"),V="URLSearchParams",gt=V+"Iterator",J=i.set,mt=i.getterFor(V),B=i.getterFor(gt),St=/\+/g,ct=Array(4),Pt=function(ot){return ct[ot-1]||(ct[ot-1]=RegExp("((?:%[\\da-f]{2}){"+ot+"})","gi"))},Q=function(ot){try{return decodeURIComponent(ot)}catch{return ot}},rt=function(ot){var tt=ot.replace(St," "),et=4;try{return decodeURIComponent(tt)}catch{for(;et;)tt=tt.replace(Pt(et--),Q);return tt}},$=/[!'()~]|%20/g,X={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},at=function(ot){return X[ot]},Y=function(ot){return encodeURIComponent(ot).replace($,at)},G=function(ot,tt){if(tt)for(var et=tt.split("&"),lt=0,ut,yt;lt<et.length;)ut=et[lt++],ut.length&&(yt=ut.split("="),ot.push({key:rt(yt.shift()),value:rt(yt.join("="))}))},Z=function(ot){this.entries.length=0,G(this.entries,ot)},q=function(ot,tt){if(ot<tt)throw TypeError("Not enough arguments")},pt=g(function(tt,et){J(this,{type:gt,iterator:I(mt(tt).entries),kind:et})},"Iterator",function(){var tt=B(this),et=tt.kind,lt=tt.iterator.next(),ut=lt.value;return lt.done||(lt.value=et==="keys"?ut.key:et==="values"?ut.value:[ut.key,ut.value]),lt}),ft=function(){f(this,ft,V);var tt=arguments.length>0?arguments[0]:void 0,et=this,lt=[],ut,yt,At,Yt,Ht,xt,Xt,Jt,ae;if(J(et,{type:V,entries:lt,updateURL:function(){},updateSearchParams:Z}),tt!==void 0)if(v(tt))if(ut=M(tt),ut)for(yt=I(tt,ut),At=yt.next;!(Yt=At.call(yt)).done;){if(Ht=I(s(Yt.value)),xt=Ht.next,(Xt=xt.call(Ht)).done||(Jt=xt.call(Ht)).done||!xt.call(Ht).done)throw TypeError("Expected sequence with length 2");lt.push({key:o(Xt.value),value:o(Jt.value)})}else for(ae in tt)t(tt,ae)&&lt.push({key:ae,value:o(tt[ae])});else G(lt,typeof tt=="string"?tt.charAt(0)==="?"?tt.slice(1):tt:o(tt))},It=ft.prototype;if(D(It,{append:function(tt,et){q(arguments.length,2);var lt=mt(this);lt.entries.push({key:o(tt),value:o(et)}),lt.updateURL()},delete:function(ot){q(arguments.length,1);for(var tt=mt(this),et=tt.entries,lt=o(ot),ut=0;ut<et.length;)et[ut].key===lt?et.splice(ut,1):ut++;tt.updateURL()},get:function(tt){q(arguments.length,1);for(var et=mt(this).entries,lt=o(tt),ut=0;ut<et.length;ut++)if(et[ut].key===lt)return et[ut].value;return null},getAll:function(tt){q(arguments.length,1);for(var et=mt(this).entries,lt=o(tt),ut=[],yt=0;yt<et.length;yt++)et[yt].key===lt&&ut.push(et[yt].value);return ut},has:function(tt){q(arguments.length,1);for(var et=mt(this).entries,lt=o(tt),ut=0;ut<et.length;)if(et[ut++].key===lt)return!0;return!1},set:function(tt,et){q(arguments.length,1);for(var lt=mt(this),ut=lt.entries,yt=!1,At=o(tt),Yt=o(et),Ht=0,xt;Ht<ut.length;Ht++)xt=ut[Ht],xt.key===At&&(yt?ut.splice(Ht--,1):(yt=!0,xt.value=Yt));yt||ut.push({key:At,value:Yt}),lt.updateURL()},sort:function(){var tt=mt(this),et=tt.entries,lt=et.slice(),ut,yt,At;for(et.length=0,At=0;At<lt.length;At++){for(ut=lt[At],yt=0;yt<At;yt++)if(et[yt].key>ut.key){et.splice(yt,0,ut);break}yt===At&&et.push(ut)}tt.updateURL()},forEach:function(tt){for(var et=mt(this).entries,lt=n(tt,arguments.length>1?arguments[1]:void 0,3),ut=0,yt;ut<et.length;)yt=et[ut++],lt(yt.value,yt.key,this)},keys:function(){return new pt(this,"keys")},values:function(){return new pt(this,"values")},entries:function(){return new pt(this,"entries")}},{enumerable:!0}),O(It,it,It.entries,{name:"entries"}),O(It,"toString",function(){for(var tt=mt(this).entries,et=[],lt=0,ut;lt<tt.length;)ut=tt[lt++],et.push(Y(ut.key)+"="+Y(ut.value));return et.join("&")},{enumerable:!0}),P(ft,V),h({global:!0,forced:!w},{URLSearchParams:ft}),!w&&u(W)){var bt=function(ot){if(v(ot)){var tt=ot.body,et;if(e(tt)===V)return et=ot.headers?new W(ot.headers):new W,et.has("content-type")||et.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),m(ot,{body:C(0,String(tt)),headers:C(0,et)})}return ot};if(u(N)&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(tt){return N(tt,arguments.length>1?bt(arguments[1]):{})}}),u(H)){var Mt=function(tt){return f(this,Mt,"Request"),new H(tt,arguments.length>1?bt(arguments[1]):{})};F.constructor=Mt,Mt.prototype=F,h({global:!0,forced:!0},{Request:Mt})}}y.exports={URLSearchParams:ft,getState:mt}}),4948:(function(y,b,d){d(5454);var h=d(3085),T=d(69),w=d(4551),O=d(8576),D=d(1187),P=d(9482),g=d(6961),i=d(4500),f=d(2503),u=d(841),t=d(863).codeAt,n=d(7977),e=d(4845),s=d(1284),v=d(9336),o=d(3326),m=O.URL,C=v.URLSearchParams,I=v.getState,M=o.set,k=o.getterFor("URL"),N=Math.floor,H=Math.pow,F="Invalid authority",W="Invalid scheme",it="Invalid host",V="Invalid port",gt=/[A-Za-z]/,J=/[\d+-.A-Za-z]/,mt=/\d/,B=/^0x/i,St=/^[0-7]+$/,ct=/^\d+$/,Pt=/^[\dA-Fa-f]+$/,Q=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,$=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,X=/[\t\n\r]/g,at,Y=function(K,Ot){var wt,Lt,Rt;if(Ot.charAt(0)=="["){if(Ot.charAt(Ot.length-1)!="]"||(wt=Z(Ot.slice(1,-1)),!wt))return it;K.host=wt}else if(et(K)){if(Ot=n(Ot),Q.test(Ot)||(wt=G(Ot),wt===null))return it;K.host=wt}else{if(rt.test(Ot))return it;for(wt="",Lt=u(Ot),Rt=0;Rt<Lt.length;Rt++)wt+=ot(Lt[Rt],ft);K.host=wt}},G=function(K){var Ot=K.split("."),wt,Lt,Rt,ne,Kt,de,le;if(Ot.length&&Ot[Ot.length-1]==""&&Ot.pop(),wt=Ot.length,wt>4)return K;for(Lt=[],Rt=0;Rt<wt;Rt++){if(ne=Ot[Rt],ne=="")return K;if(Kt=10,ne.length>1&&ne.charAt(0)=="0"&&(Kt=B.test(ne)?16:8,ne=ne.slice(Kt==8?1:2)),ne==="")de=0;else{if(!(Kt==10?ct:Kt==8?St:Pt).test(ne))return K;de=parseInt(ne,Kt)}Lt.push(de)}for(Rt=0;Rt<wt;Rt++)if(de=Lt[Rt],Rt==wt-1){if(de>=H(256,5-wt))return null}else if(de>255)return null;for(le=Lt.pop(),Rt=0;Rt<Lt.length;Rt++)le+=Lt[Rt]*H(256,3-Rt);return le},Z=function(K){var Ot=[0,0,0,0,0,0,0,0],wt=0,Lt=null,Rt=0,ne,Kt,de,le,Ie,Ee,Nt,Te=function(){return K.charAt(Rt)};if(Te()==":"){if(K.charAt(1)!=":")return;Rt+=2,wt++,Lt=wt}for(;Te();){if(wt==8)return;if(Te()==":"){if(Lt!==null)return;Rt++,wt++,Lt=wt;continue}for(ne=Kt=0;Kt<4&&Pt.test(Te());)ne=ne*16+parseInt(Te(),16),Rt++,Kt++;if(Te()=="."){if(Kt==0||(Rt-=Kt,wt>6))return;for(de=0;Te();){if(le=null,de>0)if(Te()=="."&&de<4)Rt++;else return;if(!mt.test(Te()))return;for(;mt.test(Te());){if(Ie=parseInt(Te(),10),le===null)le=Ie;else{if(le==0)return;le=le*10+Ie}if(le>255)return;Rt++}Ot[wt]=Ot[wt]*256+le,de++,(de==2||de==4)&&wt++}if(de!=4)return;break}else if(Te()==":"){if(Rt++,!Te())return}else if(Te())return;Ot[wt++]=ne}if(Lt!==null)for(Ee=wt-Lt,wt=7;wt!=0&&Ee>0;)Nt=Ot[wt],Ot[wt--]=Ot[Lt+Ee-1],Ot[Lt+--Ee]=Nt;else if(wt!=8)return;return Ot},q=function(K){for(var Ot=null,wt=1,Lt=null,Rt=0,ne=0;ne<8;ne++)K[ne]!==0?(Rt>wt&&(Ot=Lt,wt=Rt),Lt=null,Rt=0):(Lt===null&&(Lt=ne),++Rt);return Rt>wt&&(Ot=Lt,wt=Rt),Ot},pt=function(K){var Ot,wt,Lt,Rt;if(typeof K=="number"){for(Ot=[],wt=0;wt<4;wt++)Ot.unshift(K%256),K=N(K/256);return Ot.join(".")}else if(typeof K=="object"){for(Ot="",Lt=q(K),wt=0;wt<8;wt++)Rt&&K[wt]===0||(Rt&&(Rt=!1),Lt===wt?(Ot+=wt?":":"::",Rt=!0):(Ot+=K[wt].toString(16),wt<7&&(Ot+=":")));return"["+Ot+"]"}return K},ft={},It=f({},ft,{" ":1,'"':1,"<":1,">":1,"`":1}),bt=f({},It,{"#":1,"?":1,"{":1,"}":1}),Mt=f({},bt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ot=function(K,Ot){var wt=t(K,0);return wt>32&&wt<127&&!i(Ot,K)?K:encodeURIComponent(K)},tt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},et=function(K){return i(tt,K.scheme)},lt=function(K){return K.username!=""||K.password!=""},ut=function(K){return!K.host||K.cannotBeABaseURL||K.scheme=="file"},yt=function(K,Ot){var wt;return K.length==2&&gt.test(K.charAt(0))&&((wt=K.charAt(1))==":"||!Ot&&wt=="|")},At=function(K){var Ot;return K.length>1&&yt(K.slice(0,2))&&(K.length==2||(Ot=K.charAt(2))==="/"||Ot==="\\"||Ot==="?"||Ot==="#")},Yt=function(K){var Ot=K.path,wt=Ot.length;wt&&(K.scheme!="file"||wt!=1||!yt(Ot[0],!0))&&Ot.pop()},Ht=function(K){return K==="."||K.toLowerCase()==="%2e"},xt=function(K){return K=K.toLowerCase(),K===".."||K==="%2e."||K===".%2e"||K==="%2e%2e"},Xt={},Jt={},ae={},pe={},zt={},Gt={},Ut={},qt={},oe={},be={},Tt={},Et={},Ft={},Wt={},Qt={},jt={},Se={},Me={},Vt={},_t={},me={},se=function(K,Ot,wt,Lt){var Rt=wt||Xt,ne=0,Kt="",de=!1,le=!1,Ie=!1,Ee,Nt,Te,Be;for(wt||(K.scheme="",K.username="",K.password="",K.host=null,K.port=null,K.path=[],K.query=null,K.fragment=null,K.cannotBeABaseURL=!1,Ot=Ot.replace($,"")),Ot=Ot.replace(X,""),Ee=u(Ot);ne<=Ee.length;){switch(Nt=Ee[ne],Rt){case Xt:if(Nt&&gt.test(Nt))Kt+=Nt.toLowerCase(),Rt=Jt;else{if(wt)return W;Rt=ae;continue}break;case Jt:if(Nt&&(J.test(Nt)||Nt=="+"||Nt=="-"||Nt=="."))Kt+=Nt.toLowerCase();else if(Nt==":"){if(wt&&(et(K)!=i(tt,Kt)||Kt=="file"&&(lt(K)||K.port!==null)||K.scheme=="file"&&!K.host))return;if(K.scheme=Kt,wt){et(K)&&tt[K.scheme]==K.port&&(K.port=null);return}Kt="",K.scheme=="file"?Rt=Wt:et(K)&&Lt&&Lt.scheme==K.scheme?Rt=pe:et(K)?Rt=qt:Ee[ne+1]=="/"?(Rt=zt,ne++):(K.cannotBeABaseURL=!0,K.path.push(""),Rt=Vt)}else{if(wt)return W;Kt="",Rt=ae,ne=0;continue}break;case ae:if(!Lt||Lt.cannotBeABaseURL&&Nt!="#")return W;if(Lt.cannotBeABaseURL&&Nt=="#"){K.scheme=Lt.scheme,K.path=Lt.path.slice(),K.query=Lt.query,K.fragment="",K.cannotBeABaseURL=!0,Rt=me;break}Rt=Lt.scheme=="file"?Wt:Gt;continue;case pe:if(Nt=="/"&&Ee[ne+1]=="/")Rt=oe,ne++;else{Rt=Gt;continue}break;case zt:if(Nt=="/"){Rt=be;break}else{Rt=Me;continue}case Gt:if(K.scheme=Lt.scheme,Nt==at)K.username=Lt.username,K.password=Lt.password,K.host=Lt.host,K.port=Lt.port,K.path=Lt.path.slice(),K.query=Lt.query;else if(Nt=="/"||Nt=="\\"&&et(K))Rt=Ut;else if(Nt=="?")K.username=Lt.username,K.password=Lt.password,K.host=Lt.host,K.port=Lt.port,K.path=Lt.path.slice(),K.query="",Rt=_t;else if(Nt=="#")K.username=Lt.username,K.password=Lt.password,K.host=Lt.host,K.port=Lt.port,K.path=Lt.path.slice(),K.query=Lt.query,K.fragment="",Rt=me;else{K.username=Lt.username,K.password=Lt.password,K.host=Lt.host,K.port=Lt.port,K.path=Lt.path.slice(),K.path.pop(),Rt=Me;continue}break;case Ut:if(et(K)&&(Nt=="/"||Nt=="\\"))Rt=oe;else if(Nt=="/")Rt=be;else{K.username=Lt.username,K.password=Lt.password,K.host=Lt.host,K.port=Lt.port,Rt=Me;continue}break;case qt:if(Rt=oe,Nt!="/"||Kt.charAt(ne+1)!="/")continue;ne++;break;case oe:if(Nt!="/"&&Nt!="\\"){Rt=be;continue}break;case be:if(Nt=="@"){de&&(Kt="%40"+Kt),de=!0,Te=u(Kt);for(var si=0;si<Te.length;si++){var Si=Te[si];if(Si==":"&&!Ie){Ie=!0;continue}var bi=ot(Si,Mt);Ie?K.password+=bi:K.username+=bi}Kt=""}else if(Nt==at||Nt=="/"||Nt=="?"||Nt=="#"||Nt=="\\"&&et(K)){if(de&&Kt=="")return F;ne-=u(Kt).length+1,Kt="",Rt=Tt}else Kt+=Nt;break;case Tt:case Et:if(wt&&K.scheme=="file"){Rt=jt;continue}else if(Nt==":"&&!le){if(Kt=="")return it;if(Be=Y(K,Kt),Be)return Be;if(Kt="",Rt=Ft,wt==Et)return}else if(Nt==at||Nt=="/"||Nt=="?"||Nt=="#"||Nt=="\\"&&et(K)){if(et(K)&&Kt=="")return it;if(wt&&Kt==""&&(lt(K)||K.port!==null))return;if(Be=Y(K,Kt),Be)return Be;if(Kt="",Rt=Se,wt)return;continue}else Nt=="["?le=!0:Nt=="]"&&(le=!1),Kt+=Nt;break;case Ft:if(mt.test(Nt))Kt+=Nt;else if(Nt==at||Nt=="/"||Nt=="?"||Nt=="#"||Nt=="\\"&&et(K)||wt){if(Kt!=""){var Oe=parseInt(Kt,10);if(Oe>65535)return V;K.port=et(K)&&Oe===tt[K.scheme]?null:Oe,Kt=""}if(wt)return;Rt=Se;continue}else return V;break;case Wt:if(K.scheme="file",Nt=="/"||Nt=="\\")Rt=Qt;else if(Lt&&Lt.scheme=="file")if(Nt==at)K.host=Lt.host,K.path=Lt.path.slice(),K.query=Lt.query;else if(Nt=="?")K.host=Lt.host,K.path=Lt.path.slice(),K.query="",Rt=_t;else if(Nt=="#")K.host=Lt.host,K.path=Lt.path.slice(),K.query=Lt.query,K.fragment="",Rt=me;else{At(Ee.slice(ne).join(""))||(K.host=Lt.host,K.path=Lt.path.slice(),Yt(K)),Rt=Me;continue}else{Rt=Me;continue}break;case Qt:if(Nt=="/"||Nt=="\\"){Rt=jt;break}Lt&&Lt.scheme=="file"&&!At(Ee.slice(ne).join(""))&&(yt(Lt.path[0],!0)?K.path.push(Lt.path[0]):K.host=Lt.host),Rt=Me;continue;case jt:if(Nt==at||Nt=="/"||Nt=="\\"||Nt=="?"||Nt=="#"){if(!wt&&yt(Kt))Rt=Me;else if(Kt==""){if(K.host="",wt)return;Rt=Se}else{if(Be=Y(K,Kt),Be)return Be;if(K.host=="localhost"&&(K.host=""),wt)return;Kt="",Rt=Se}continue}else Kt+=Nt;break;case Se:if(et(K)){if(Rt=Me,Nt!="/"&&Nt!="\\")continue}else if(!wt&&Nt=="?")K.query="",Rt=_t;else if(!wt&&Nt=="#")K.fragment="",Rt=me;else if(Nt!=at&&(Rt=Me,Nt!="/"))continue;break;case Me:if(Nt==at||Nt=="/"||Nt=="\\"&&et(K)||!wt&&(Nt=="?"||Nt=="#")){if(xt(Kt)?(Yt(K),Nt!="/"&&!(Nt=="\\"&&et(K))&&K.path.push("")):Ht(Kt)?Nt!="/"&&!(Nt=="\\"&&et(K))&&K.path.push(""):(K.scheme=="file"&&!K.path.length&&yt(Kt)&&(K.host&&(K.host=""),Kt=Kt.charAt(0)+":"),K.path.push(Kt)),Kt="",K.scheme=="file"&&(Nt==at||Nt=="?"||Nt=="#"))for(;K.path.length>1&&K.path[0]==="";)K.path.shift();Nt=="?"?(K.query="",Rt=_t):Nt=="#"&&(K.fragment="",Rt=me)}else Kt+=ot(Nt,bt);break;case Vt:Nt=="?"?(K.query="",Rt=_t):Nt=="#"?(K.fragment="",Rt=me):Nt!=at&&(K.path[0]+=ot(Nt,ft));break;case _t:!wt&&Nt=="#"?(K.fragment="",Rt=me):Nt!=at&&(Nt=="'"&&et(K)?K.query+="%27":Nt=="#"?K.query+="%23":K.query+=ot(Nt,ft));break;case me:Nt!=at&&(K.fragment+=ot(Nt,It));break}ne++}},ue=function(Ot){var wt=g(this,ue,"URL"),Lt=arguments.length>1?arguments[1]:void 0,Rt=e(Ot),ne=M(wt,{type:"URL"}),Kt,de;if(Lt!==void 0){if(Lt instanceof ue)Kt=k(Lt);else if(de=se(Kt={},e(Lt)),de)throw TypeError(de)}if(de=se(ne,Rt,null,Kt),de)throw TypeError(de);var le=ne.searchParams=new C,Ie=I(le);Ie.updateSearchParams(ne.query),Ie.updateURL=function(){ne.query=String(le)||null},T||(wt.href=De.call(wt),wt.origin=Ce.call(wt),wt.protocol=Fe.call(wt),wt.username=fe.call(wt),wt.password=pi.call(wt),wt.host=mi.call(wt),wt.hostname=yi.call(wt),wt.port=ai.call(wt),wt.pathname=Ci.call(wt),wt.search=Ye.call(wt),wt.searchParams=ti.call(wt),wt.hash=Ve.call(wt))},Ae=ue.prototype,De=function(){var K=k(this),Ot=K.scheme,wt=K.username,Lt=K.password,Rt=K.host,ne=K.port,Kt=K.path,de=K.query,le=K.fragment,Ie=Ot+":";return Rt!==null?(Ie+="//",lt(K)&&(Ie+=wt+(Lt?":"+Lt:"")+"@"),Ie+=pt(Rt),ne!==null&&(Ie+=":"+ne)):Ot=="file"&&(Ie+="//"),Ie+=K.cannotBeABaseURL?Kt[0]:Kt.length?"/"+Kt.join("/"):"",de!==null&&(Ie+="?"+de),le!==null&&(Ie+="#"+le),Ie},Ce=function(){var K=k(this),Ot=K.scheme,wt=K.port;if(Ot=="blob")try{return new ue(Ot.path[0]).origin}catch{return"null"}return Ot=="file"||!et(K)?"null":Ot+"://"+pt(K.host)+(wt!==null?":"+wt:"")},Fe=function(){return k(this).scheme+":"},fe=function(){return k(this).username},pi=function(){return k(this).password},mi=function(){var K=k(this),Ot=K.host,wt=K.port;return Ot===null?"":wt===null?pt(Ot):pt(Ot)+":"+wt},yi=function(){var K=k(this).host;return K===null?"":pt(K)},ai=function(){var K=k(this).port;return K===null?"":String(K)},Ci=function(){var K=k(this),Ot=K.path;return K.cannotBeABaseURL?Ot[0]:Ot.length?"/"+Ot.join("/"):""},Ye=function(){var K=k(this).query;return K?"?"+K:""},ti=function(){return k(this).searchParams},Ve=function(){var K=k(this).fragment;return K?"#"+K:""},ke=function(K,Ot){return{get:K,set:Ot,configurable:!0,enumerable:!0}};if(T&&D(Ae,{href:ke(De,function(K){var Ot=k(this),wt=e(K),Lt=se(Ot,wt);if(Lt)throw TypeError(Lt);I(Ot.searchParams).updateSearchParams(Ot.query)}),origin:ke(Ce),protocol:ke(Fe,function(K){var Ot=k(this);se(Ot,e(K)+":",Xt)}),username:ke(fe,function(K){var Ot=k(this),wt=u(e(K));if(!ut(Ot)){Ot.username="";for(var Lt=0;Lt<wt.length;Lt++)Ot.username+=ot(wt[Lt],Mt)}}),password:ke(pi,function(K){var Ot=k(this),wt=u(e(K));if(!ut(Ot)){Ot.password="";for(var Lt=0;Lt<wt.length;Lt++)Ot.password+=ot(wt[Lt],Mt)}}),host:ke(mi,function(K){var Ot=k(this);Ot.cannotBeABaseURL||se(Ot,e(K),Tt)}),hostname:ke(yi,function(K){var Ot=k(this);Ot.cannotBeABaseURL||se(Ot,e(K),Et)}),port:ke(ai,function(K){var Ot=k(this);ut(Ot)||(K=e(K),K==""?Ot.port=null:se(Ot,K,Ft))}),pathname:ke(Ci,function(K){var Ot=k(this);Ot.cannotBeABaseURL||(Ot.path=[],se(Ot,e(K),Se))}),search:ke(Ye,function(K){var Ot=k(this);K=e(K),K==""?Ot.query=null:(K.charAt(0)=="?"&&(K=K.slice(1)),Ot.query="",se(Ot,K,_t)),I(Ot.searchParams).updateSearchParams(Ot.query)}),searchParams:ke(ti),hash:ke(Ve,function(K){var Ot=k(this);if(K=e(K),K==""){Ot.fragment=null;return}K.charAt(0)=="#"&&(K=K.slice(1)),Ot.fragment="",se(Ot,K,me)})}),P(Ae,"toJSON",function(){return De.call(this)},{enumerable:!0}),P(Ae,"toString",function(){return De.call(this)},{enumerable:!0}),m){var oi=m.createObjectURL,xi=m.revokeObjectURL;oi&&P(ue,"createObjectURL",function(Ot){return oi.apply(m,arguments)}),xi&&P(ue,"revokeObjectURL",function(Ot){return xi.apply(m,arguments)})}s(ue,"URL"),h({global:!0,forced:!w,sham:!T},{URL:ue})}),9801:(function(){}),3822:(function(y,b,d){var h=d(2221);y.exports=h}),1434:(function(y,b,d){var h=d(5078);y.exports=h}),6899:(function(y,b,d){var h=d(98);y.exports=h}),7710:(function(y,b,d){var h=d(5739);d(162),y.exports=h}),4486:(function(y,b,d){var h=d(278);y.exports=h}),4877:(function(y,b,d){var h=d(1484);y.exports=h}),7178:(function(y,b,d){var h=d(7731);y.exports=h}),5603:(function(y,b,d){var h=d(3669);y.exports=h}),1206:(function(y,b,d){d(162);var h=d(6899),T=d(4696),w=Array.prototype,O={DOMTokenList:!0,NodeList:!0};y.exports=function(D){var P=D.forEach;return D===w||D instanceof Array&&P===w.forEach||O.hasOwnProperty(T(D))?h:P}}),6174:(function(y,b,d){var h=d(2604);y.exports=h}),57:(function(y,b,d){var h=d(263);y.exports=h}),4741:(function(y,b,d){var h=d(7663);y.exports=h}),8368:(function(y,b,d){var h=d(5063);y.exports=h}),3739:(function(y,b,d){var h=d(6813);y.exports=h}),172:(function(y,b,d){var h=d(6285);y.exports=h}),4963:(function(y,b,d){var h=d(3213);y.exports=h}),7820:(function(y,b,d){var h=d(3512);y.exports=h}),8980:(function(y,b,d){var h=d(8168);y.exports=h}),5636:(function(y,b,d){var h=d(8651);y.exports=h}),6672:(function(y,b,d){var h=d(3083);y.exports=h}),5059:(function(y,b,d){var h=d(2987);y.exports=h}),3969:(function(y,b,d){var h=d(2239);y.exports=h}),6618:(function(y,b,d){var h=d(3154);d(162),y.exports=h}),5279:(function(y,b,d){var h=d(6577);y.exports=h}),9562:(function(y,b,d){d(2906);var h=d(7545);y.exports=h.setTimeout}),2285:(function(y,b,d){var h=d(5008);d(162),y.exports=h}),8535:(function(y,b,d){var h=d(994);d(162),y.exports=h}),652:(function(y,b,d){var h=d(5668);y.exports=h}),5668:(function(y,b,d){d(4948),d(9801),d(9336);var h=d(7545);y.exports=h.URL}),2534:(function(y){y.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="}),4858:(function(y){y.exports=Ct}),4960:(function(){}),6759:(function(){}),6272:(function(){})},L={};function R(y){var b=L[y];if(b!==void 0)return b.exports;var d=L[y]={exports:{}};return Zt[y](d,d.exports,R),d.exports}(function(){R.n=function(y){var b=y&&y.__esModule?function(){return y.default}:function(){return y};return R.d(b,{a:b}),b}})(),(function(){R.d=function(y,b){for(var d in b)R.o(b,d)&&!R.o(y,d)&&Object.defineProperty(y,d,{enumerable:!0,get:b[d]})}})(),(function(){R.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})()})(),(function(){R.o=function(y,b){return Object.prototype.hasOwnProperty.call(y,b)}})();var S={};return(function(){R.d(S,{default:function(){return su}});var y=R(9131),b=R.n(y),d=R(1899),h=R.n(d),T=R(6562),w=R.n(T),O=R(1734),D=R.n(O),P=R(8005),g=R.n(P),i=R(6065),f=R.n(i),u=R(4496),t=R.n(u);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(E){var p=this;do{if(Element.prototype.matches.call(p,E))return p;p=p.parentElement||p.parentNode}while(p!==null&&p.nodeType===1);return null});"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&(function(E){if("Element"in E){var p="classList",a="prototype",l=E.Element[a],r=Object,c=b()(String[a])||function(){return this.replace(/^\s+|\s+$/g,"")},x=h()(Array[a])||function(st){for(var dt=0,ht=this.length;dt<ht;dt++)if(dt in this&&this[dt]===st)return dt;return-1},_=function(dt,ht){this.name=dt,this.code=DOMException[dt],this.message=ht},j=function(dt,ht){if(ht==="")throw new _("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(ht))throw new _("INVALID_CHARACTER_ERR","The token must not contain space characters.");return x.call(dt,ht)},A=function(dt){for(var ht=c.call(dt.getAttribute("class")||""),vt=ht?ht.split(/\s+/):[],kt=0,$t=vt.length;kt<$t;kt++)this.push(vt[kt]);this._updateClassName=function(){dt.setAttribute("class",this.toString())}},z=A[a]=[],U=function(){return new A(this)};if(_[a]=Error[a],z.item=function(st){return this[st]||null},z.contains=function(st){return~j(this,st+"")},z.add=function(){var st=arguments,dt=0,ht=st.length,vt,kt=!1;do vt=st[dt]+"",~j(this,vt)||(this.push(vt),kt=!0);while(++dt<ht);kt&&this._updateClassName()},z.remove=function(){var st=arguments,dt=0,ht=st.length,vt,kt=!1,$t;do for(vt=st[dt]+"",$t=j(this,vt);~$t;){var ie;w()(ie=this).call(ie,$t,1),kt=!0,$t=j(this,vt)}while(++dt<ht);kt&&this._updateClassName()},z.toggle=function(st,dt){var ht=this.contains(st),vt=ht?dt!==!0&&"remove":dt!==!1&&"add";return vt&&this[vt](st),dt===!0||dt===!1?dt:!ht},z.replace=function(st,dt){var ht=j(st+"");if(~ht){var vt;w()(vt=this).call(vt,ht,1,dt),this._updateClassName()}},z.toString=function(){return this.join(" ")},D()){var nt={get:U,enumerable:!0,configurable:!0};try{D()(l,p,nt)}catch(st){(st.number===void 0||st.number===-2146823252)&&(nt.enumerable=!1,D()(l,p,nt))}}else r[a].__defineGetter__&&l.__defineGetter__(p,U)}})(self),(function(){var E=document.createElement("_");if(E.classList.add("c1","c2"),!E.classList.contains("c2")){var p=function(r){var c=DOMTokenList.prototype[r];DOMTokenList.prototype[r]=function(x){var _,j=arguments.length;for(_=0;_<j;_++)x=arguments[_],c.call(this,x)}};p("add"),p("remove")}if(E.classList.toggle("c3",!1),E.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,r){return 1 in arguments&&!this.contains(l)==!r?r:a.call(this,l)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(l,r){var c=this.toString().split(" "),x=h()(c).call(c,l+"");~x&&(c=g()(c).call(c,x),this.remove.apply(this,c),this.add(r),this.add.apply(this,g()(c).call(c,1)))}),E=null})());(function(){if(typeof window<"u"&&window.addEventListener){var E=f()(null),p,a,l=function(){clearTimeout(a),a=t()(p,100)},r=function(){},c=function(){var z;window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1),window.MutationObserver?(z=new MutationObserver(l),z.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),r=function(){try{z.disconnect(),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",l,!1),r=function(){document.documentElement.removeEventListener("DOMSubtreeModified",l,!1),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)})},x=function(z){function U(ht){var vt;return ht.protocol!==void 0?vt=ht:(vt=document.createElement("a"),vt.href=ht),vt.protocol.replace(/:/g,"")+vt.host}var nt,st,dt;return window.XMLHttpRequest&&(nt=new XMLHttpRequest,st=U(location),dt=U(z),nt.withCredentials===void 0&&dt!==""&&dt!==st?nt=XDomainRequest||void 0:nt=XMLHttpRequest),nt},_="http://www.w3.org/1999/xlink";p=function(){var z,U,nt,st,dt,ht=0,vt,kt,$t,ie,re;function Bt(){ht-=1,ht===0&&(r(),c())}function he(_e){return function(){E[_e.base]!==!0&&(_e.useEl.setAttributeNS(_,"xlink:href","#"+_e.hash),_e.useEl.hasAttribute("href")&&_e.useEl.setAttribute("href","#"+_e.hash))}}function we(_e){return function(){var He=document.body,qe=document.createElement("x"),Le;_e.onload=null,qe.innerHTML=_e.responseText,Le=qe.getElementsByTagName("svg")[0],Le&&(Le.setAttribute("aria-hidden","true"),Le.style.position="absolute",Le.style.width=0,Le.style.height=0,Le.style.overflow="hidden",He.insertBefore(Le,He.firstChild)),Bt()}}function Pe(_e){return function(){_e.onerror=null,_e.ontimeout=null,Bt()}}for(r(),ie=document.getElementsByTagName("use"),dt=0;dt<ie.length;dt+=1){try{U=ie[dt].getBoundingClientRect()}catch{U=!1}st=ie[dt].getAttribute("href")||ie[dt].getAttributeNS(_,"href")||ie[dt].getAttribute("xlink:href"),st&&st.split?$t=st.split("#"):$t=["",""],z=$t[0],nt=$t[1],vt=U&&U.left===0&&U.right===0&&U.top===0&&U.bottom===0,U&&U.width===0&&U.height===0&&!vt?(ie[dt].hasAttribute("href")&&ie[dt].setAttributeNS(_,"xlink:href",st),z.length&&(re=E[z],re!==!0&&t()(he({useEl:ie[dt],base:z,hash:nt}),0),re===void 0&&(kt=x(z),kt!==void 0&&(re=new kt,E[z]=re,re.onload=we(re),re.onerror=Pe(re),re.ontimeout=Pe(re),re.open("GET",z),re.send(),ht+=1)))):vt?z.length&&E[z]&&t()(he({useEl:ie[dt],base:z,hash:nt}),0):E[z]===void 0?E[z]=!0:E[z].onload&&(E[z].abort(),delete E[z].onload,E[z]=!0)}ie="",ht+=1,Bt()};var j;j=function(){window.removeEventListener("load",j,!1),a=t()(p,0)},document.readyState!=="complete"?window.addEventListener("load",j,!1):j()}})();var n=R(1845);function e(E,p){(p==null||p>E.length)&&(p=E.length);for(var a=0,l=new Array(p);a<p;a++)l[a]=E[a];return l}function s(E){if(n(E))return e(E)}var v=R(184),o=R(662),m=R(7172);function C(E){if(typeof v<"u"&&o(E)!=null||E["@@iterator"]!=null)return m(E)}var I=R(711);function M(E,p){var a;if(E){if(typeof E=="string")return e(E,p);var l=I(a=Object.prototype.toString.call(E)).call(a,8,-1);if(l==="Object"&&E.constructor&&(l=E.constructor.name),l==="Map"||l==="Set")return m(E);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return e(E,p)}}function k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(E){return s(E)||C(E)||M(E)||k()}var H=R(7077);function F(E,p,a){return p in E?H(E,p,{value:a,enumerable:!0,configurable:!0,writable:!0}):E[p]=a,E}function W(E,p){if(!(E instanceof p))throw new TypeError("Cannot call a class as a function")}function it(E,p){for(var a=0;a<p.length;a++){var l=p[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),H(E,l.key,l)}}function V(E,p,a){return p&&it(E.prototype,p),a&&it(E,a),E}var gt=R(4426),J=R.n(gt),mt=R(9406),B=R.n(mt),St=R(8189),ct=R.n(St),Pt=R(3972),Q=R.n(Pt),rt=R(2777),$=R(961),X=R.n($),at=R(5695),Y=R.n(at),G=R(8592),Z=R.n(G),q=R(9052),pt=R.n(q),ft=R(2560),It=R.n(ft),bt=R(2461),Mt=R.n(bt);function ot(E){if(n(E))return E}function tt(E,p){var a=E==null?null:typeof v<"u"&&o(E)||E["@@iterator"];if(a!=null){var l=[],r=!0,c=!1,x,_;try{for(a=a.call(E);!(r=(x=a.next()).done)&&(l.push(x.value),!(p&&l.length===p));r=!0);}catch(j){c=!0,_=j}finally{try{!r&&a.return!=null&&a.return()}finally{if(c)throw _}}return l}}function et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lt(E,p){return ot(E)||tt(E,p)||M(E,p)||et()}var ut=R(6397),yt=R.n(ut),At=R(7636),Yt=R.n(At),Ht=R(789),xt=R.n(Ht),Xt=R(4729),Jt=R.n(Xt),ae=R(1610),pe=R.n(ae),zt=R(3053),Gt=R.n(zt),Ut,qt=["zoomIn","zoomOut","hand"],oe=["history","undo","redo","reset"],be=["delete","deleteAll"],Tt=B()(Ut=[]).call(Ut,qt,oe,be),Et={FILTER:"filter",COLOR:"color"},Ft=["rect","circle","triangle"],Wt={CROPZONE:"cropzone"},Qt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},jt=Kt("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),Se={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Me={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Vt={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},_t={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur"},me={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},se={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},ue=Kt("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Ae={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},De={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},Ce={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Fe={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},fe={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},pi={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},mi={realTimeEvent:!0,min:-360,max:360,value:0},yi={min:5,max:30,value:12},ai={realTimeEvent:!0,min:2,max:300,value:3},Ci={realTimeEvent:!0,min:10,max:100,value:50},Ye={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},ti={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Ve={realTimeEvent:!0,min:32,max:4088,value:800},ke=2,oi="tui-image-editor-",xi=Math.min,K=Math.max,Ot=!1,wt=0;function Lt(E){return E.__fe_id||(wt+=1,E.__fe_id=wt),E.__fe_id}function Rt(E){return typeof E=="function"}function ne(E,p,a){if(p>a){var l=[a,p];p=l[0],a=l[1]}return K(p,xi(E,a))}function Kt(){for(var E={},p=arguments.length,a=new Array(p),l=0;l<p;l++)a[l]=arguments[l];return Z()(a,function(r){E[r]=r}),E}function de(E,p){var a={},l=p.length,r=0,c;for(r=0;r<l;r+=1)c=p[r],a[c]=E[c];return a}function le(E){return yt()(E,10)}function Ie(E){return E.replace(/-([a-z])/g,function(p,a){return a.toUpperCase()})}function Ee(){return!!(window.File&&window.FileList&&window.FileReader)}function Nt(E,p){var a,l,r;if(E.length===4){var c;E=B()(c="".concat(E)).call(c,g()(E).call(E,1,4))}var x=yt()(g()(E).call(E,1,3),16),_=yt()(g()(E).call(E,3,5),16),j=yt()(g()(E).call(E,5,7),16),A=p;return B()(a=B()(l=B()(r="rgba(".concat(x,", ")).call(r,_,", ")).call(l,j,", ")).call(a,A,")")}function Te(){Ot||(Ot=!0,Jt()("image-editor","UA-129999381-1"))}function Be(E,p){var a=document.getElementsByTagName("head"),l=lt(a,1),r=l[0],c=document.createElement("link"),x=encodeURIComponent(E);c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href","data:text/css;charset=UTF-8,".concat(x)),r.appendChild(c)}function si(E){return function(p){return E.querySelector(p)}}function Si(E){var p=/data:(image\/.+);base64,/,a="",l,r,c;l=E.replace(p,function(_,j){return a=j,""}),l=atob(l);var x=l.length;for(r=new Uint8Array(x),c=0;c<x;c+=1)r[c]=l.charCodeAt(c);return new Blob([r],{type:a})}function bi(E){return Number(E.toFixed(ke))}function Oe(E){Z()(E,function(p,a){E[a]=null})}function Ii(){var E,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(p.charAt(0)==="."){var l;return B()(l=".".concat(oi).concat(a)).call(l,g()(p).call(p,1))}return B()(E="".concat(oi).concat(a)).call(E,p)}function Fr(E,p){var a=p.originX,l=p.originY,r=E.getPointByOrigin(a,l),c=r.x,x=r.y;E.set({left:c,top:x,originX:a,originY:l}),E.setCoords()}function Br(E){var p,a={};return Yt()(p=Mt()(E)).call(p,function(l){a[E[l]]=l}),a}function Ki(E,p){E.customProps=E.customProps||{},X()(E.customProps,p)}function li(E,p){var a={};return It()(p)&&(p=[p]),Z()(p,function(l){a[l]=E.customProps[l]}),a}function Hr(E){return E.charAt(0).toUpperCase()+g()(E).call(E,1)}function Mi(E,p){return h()(E).call(E,p)>=0}function pn(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return pe()(E,"type")||Et.COLOR}function $i(E){var p=xt()(E),a=p===void 0?{}:p;return a.source?Et.FILTER:Et.COLOR}function mn(E){return Gt()(E.get("type"),Ft)>=0}function qi(E){if(Mi(Ft,E))return"Shape";switch(E){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return yn(E)}}function Ur(E){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=p.useAlpha,l=a===void 0?!0:a,r=p.mode,c=Qt.VINTAGE,x=Qt.REMOVE_COLOR,_=Qt.BLEND_COLOR,j=Qt.SEPIA2,A=Qt.COLOR_FILTER,z=Qt.REMOVE_WHITE,U=Qt.BLEND,nt;switch(E){case c:nt=j;break;case x:nt=l?A:z;break;case _:nt=r==="add"?U:r;break;default:nt=E}return yn(nt)}function Yr(E){var p=Vt.LOAD_IMAGE;return typeof E=="string"?p===E:p===E.name}function Wr(E){var p,a,l=Vt.FLIP_IMAGE,r=Vt.ROTATE_IMAGE,c=Vt.ADD_TEXT,x=Vt.APPLY_FILTER,_=Vt.REMOVE_FILTER,j=Vt.CHANGE_SHAPE,A=Vt.CHANGE_ICON_COLOR,z=Vt.CHANGE_TEXT_STYLE,U=Vt.CLEAR_OBJECTS,nt=Vt.ADD_IMAGE_OBJECT,st=Vt.REMOVE_OBJECT,dt=Vt.RESIZE_IMAGE,ht=E.name,vt=E.args,kt;switch(ht){case l:kt={name:ht,detail:vt[1]==="reset"?vt[1]:g()(p=vt[1]).call(p,4)};break;case r:kt={name:ht,detail:vt[2]};break;case x:kt={name:se.APPLY_FILTER,detail:Ur(vt[1],vt[2])};break;case _:kt={name:se.REMOVE_FILTER,detail:"Remove"};break;case j:kt={name:se.CHANGE_SHAPE,detail:"Change"};break;case A:kt={name:se.CHANGE_ICON_COLOR,detail:"Change"};break;case z:kt={name:se.CHANGE_TEXT_STYLE,detail:"Change"};break;case st:kt={name:se.REMOVE_OBJECT,detail:vt[2]};break;case U:kt={name:se.CLEAR_OBJECTS,detail:"All"};break;case nt:kt={name:se.ADD_IMAGE_OBJECT,detail:"Add"};break;case c:kt={name:se.ADD_TEXT};break;case dt:kt={name:se.RESIZE,detail:B()(a="".concat(~~vt[1].width,"x")).call(a,~~vt[1].height)};break;default:kt={name:ht};break}return vt[1]==="mask"&&(kt={name:se.LOAD_MASK_IMAGE,detail:"Apply"}),kt}function Gr(E){return E==="top"?"bottom":E==="left"?"right":E==="right"?"left":"top"}function yn(E){return E.replace(/[a-z]/,function(p){return p.toUpperCase()})}function Xr(E){var p=E.left,a=E.top,l=E.width,r=E.height,c=ti.LEFT,x=ti.TOP,_=ti.WIDTH,j=ti.HEIGHT;return p===c&&a===x&&l===_&&r===j}var Zr=Kt("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Cn={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},Vr={UN_IMPLEMENTATION:function(p){return Cn.UN_IMPLEMENTATION+p},NO_COMPONENT_NAME:function(){return Cn.NO_COMPONENT_NAME}},_i={types:X()({},Zr),create:function(p){p=p.toLowerCase();for(var a=Vr[p],l=arguments.length,r=new Array(l>1?l-1:0),c=1;c<l;c++)r[c-1]=arguments[c];return a.apply(void 0,r)}},xn=_i.create,Sn=_i.types,Jr=(function(){function E(p,a){W(this,E),this.name=p.name,this.args=a,this.execute=p.execute,this.undo=p.undo,this.executeCallback=p.executeCallback||null,this.undoCallback=p.undoCallback||null,this.undoData={}}return V(E,[{key:"execute",value:function(){throw new Error(xn(Sn.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(xn(Sn.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return Mt()(this.undoData).length>0}},{key:"setUndoData",value:function(a,l,r){return l&&(a=l),r?l||(l=a):(X()(this.undoData,a),l=null),l}},{key:"setExecuteCallback",value:function(a){return this.executeCallback=a,this}},{key:"setUndoCallback",value:function(a){return this.undoCallback=a,this}}]),E})(),Qr=Jr,bn={};function Kr(E){var p=bn[E];if(p){for(var a=arguments.length,l=new Array(a>1?a-1:0),r=1;r<a;r++)l[r-1]=arguments[r];return new Qr(p,l)}return null}function $r(E){bn[E.name]=E}var xe={create:Kr,register:$r},In=(function(){function E(){W(this,E),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return V(E,[{key:"_invokeExecution",value:function(a){var l=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var c=a.args;return c||(c=[]),a.execute.apply(a,N(c)).then(function(x){return l._isSilent||(l.pushUndoStack(a),l.fire(r?_t.AFTER_REDO:_t.EXECUTE_COMMAND,a)),l.unlock(),Rt(a.executeCallback)&&a.executeCallback(x),x}).catch(function(x){return l.unlock(),ct().reject(x)})}},{key:"_invokeUndo",value:function(a){var l=this;this.lock();var r=a.args;return r||(r=[]),a.undo.apply(a,N(r)).then(function(c){return l.pushRedoStack(a),l.fire(_t.AFTER_UNDO,a),l.unlock(),Rt(a.undoCallback)&&a.undoCallback(c),c}).catch(function(c){return l.unlock(),ct().reject(c)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(_t.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(_t.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var a=this;this._isSilent=!0;for(var l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];return this.execute.apply(this,B()(r).call(r,[this._isSilent])).then(function(){a._isSilent=!1})}},{key:"execute",value:function(){var a=this;if(this._isLocked)return ct().reject(fe.isLock);for(var l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];var x=r[0];return It()(x)&&(x=xe.create.apply(xe,r)),this._invokeExecution(x).then(function(_){return a.clearRedoStack(),_})}},{key:"undo",value:function(){var a=this._undoStack.pop(),l,r="";if(a&&this._isLocked&&(this.pushUndoStack(a,!0),a=null),a)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),l=this._invokeUndo(a);else{if(r=fe.undo,this._isLocked){var c;r=B()(c="".concat(r," Because ")).call(c,fe.isLock)}l=ct().reject(r)}return l}},{key:"redo",value:function(){var a=this._redoStack.pop(),l,r="";if(a&&this._isLocked&&(this.pushRedoStack(a,!0),a=null),a)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),l=this._invokeExecution(a,!0);else{if(r=fe.redo,this._isLocked){var c;r=B()(c="".concat(r," Because ")).call(c,fe.isLock)}l=ct().reject(r)}return l}},{key:"pushUndoStack",value:function(a,l){this._undoStack.push(a),l||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(a,l){this._redoStack.push(a),l||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),E})();pt().mixin(In);var qr=In,ta=R(5214),Qe=R.n(ta),ea=(function(E){var p,a,l,r,c,x,_,j=E.locale,A=E.biImage,z=E.commonStyle,U=E.headerStyle,nt=E.loadButtonStyle,st=E.downloadButtonStyle,dt=E.submenuStyle;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=`
    <div class="tui-image-editor-main-container" style="`.concat(z,`">
        <div class="tui-image-editor-header" style="`)).call(_,U,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(x,A,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(c,nt,`">
                    `)).call(r,j.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(l,st,`">
                    `)).call(a,j.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(p,dt,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)}),ia=(function(E){var p,a,l,r,c,x=E.locale,_=E.biImage,j=E.loadButtonStyle,A=E.downloadButtonStyle,z=E.menuBarPosition;return B()(p=B()(a=B()(l=B()(r=B()(c=`
    <ul class="tui-image-editor-help-menu `.concat(Gr(z),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(c,_,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(r,j,`">
                `)).call(l,x.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(a,A,`">
                `)).call(p,x.localize("Download"),`
            </button>
        </div>
    </div>
`)}),na=R(899),We=R.n(na),ra=(function(E){var p,a,l,r,c,x,_,j,A,z,U,nt,st,dt,ht,vt,kt,$t,ie,re,Bt,he,we,Pe,_e,He,qe,Le,di,Pi=E.subMenuLabelActive,Li=E.subMenuLabelNormal,ji=E.subMenuRangeTitle,Ni=E.submenuPartitionVertical,Ri=E.submenuPartitionHorizontal,zi=E.submenuCheckbox,Fi=E.submenuRangePointer,Bi=E.submenuRangeValue,Hi=E.submenuColorpickerTitle,Ui=E.submenuColorpickerButton,Yi=E.submenuRangeBar,Wi=E.submenuRangeSubbar,Gi=E.submenuDisabledRangePointer,Xi=E.submenuDisabledRangeBar,Zi=E.submenuDisabledRangeSubbar,Vi=E.submenuIconSize,Ji=E.menuIconSize,Qi=E.biSize,Ue=E.menuIconStyle,ei=E.submenuIconStyle;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z=B()(U=B()(nt=B()(st=B()(dt=B()(ht=B()(vt=B()(kt=B()($t=B()(ie=B()(re=B()(Bt=B()(he=B()(we=B()(Pe=B()(_e=B()(He=B()(qe=B()(Le=B()(di=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(Pi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(di,Li,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(Le,ji,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(qe,Ni,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(He,Ri,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(_e,zi,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Pe,Fi,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(we,Yi,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(he,Wi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Bt,Gi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(re,Zi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(ie,Xi,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call($t,Bi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(kt,Hi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(vt,Ui,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(ht,Ji,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(dt,Vi,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(st,Qi,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(nt,Ue.normal.color,`;
        stroke: `)).call(U,Ue.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(z,Ue.active.color,`;
        stroke: `)).call(A,Ue.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(j,Ue.hover.color,`;
        stroke: `)).call(_,Ue.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(x,Ue.disabled.color,`;
        stroke: `)).call(c,Ue.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(r,ei.normal.color,`;
        stroke: `)).call(l,ei.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(a,ei.active.color,`;
        stroke: `)).call(p,ei.active.color,`;
    }
`)}),aa={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},oa=R(2534),sa=(function(){function E(p){W(this,E),this.styles=this._changeToObject(X()({},aa,p)),Be(this._styleMaker()),this._loadDefaultSvgIcon()}return V(E,[{key:"getStyle",value:function(a){var l=null,r=a.replace(/\..+$/,""),c=this.styles[a];switch(a){case"common.bi":l=this.styles[a].image;break;case"menu.icon":l={active:this.styles["".concat(r,".activeIcon")],normal:this.styles["".concat(r,".normalIcon")],hover:this.styles["".concat(r,".hoverIcon")],disabled:this.styles["".concat(r,".disabledIcon")]};break;case"submenu.icon":l={active:this.styles["".concat(r,".activeIcon")],normal:this.styles["".concat(r,".normalIcon")]};break;case"submenu.label":l={active:this._makeCssText(this.styles["".concat(r,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(r,".normalLabel")])};break;case"submenu.partition":l={vertical:this._makeCssText(X()({},c,{borderLeft:"1px solid ".concat(c.color)})),horizontal:this._makeCssText(X()({},c,{borderBottom:"1px solid ".concat(c.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":c.backgroundColor=c.color,l=this._makeCssText(c);break;default:l=this._makeCssText(c);break}return l}},{key:"_styleMaker",value:function(){var a=this.getStyle("submenu.label"),l=this.getStyle("submenu.partition");return ra({subMenuLabelActive:a.active,subMenuLabelNormal:a.normal,submenuPartitionVertical:l.vertical,submenuPartitionHorizontal:l.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(a){var l={};return Z()(a,function(r,c){var x=c.match(/^(.+)\.([a-z]+)$/i),_=lt(x,3),j=_[1],A=_[2];l[j]||(l[j]={}),l[j][A]=r}),l}},{key:"_makeCssText",value:function(a){var l=this,r=[];return Z()(a,function(c,x){var _,j;h()(_=["backgroundImage"]).call(_,x)>-1&&c!=="none"&&(c="url(".concat(c,")")),r.push(B()(j="".concat(l._toUnderScore(x),": ")).call(j,c))}),r.join(";")}},{key:"_toUnderScore",value:function(a){return a.replace(/([A-Z])/g,function(l,r){return"-".concat(r.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var a=new DOMParser,l=oa.replace(/data:image\/svg\+xml;base64,/,""),r=a.parseFromString(atob(l),"text/xml");document.body.appendChild(r.documentElement)}}},{key:"_makeIconClassName",value:function(a,l){var r=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),c=r[a],x=c.path,_=c.name;return x&&_?a:"".concat(a," use-default")}},{key:"_makeSvgIconPrefix",value:function(a,l){var r,c=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),x=c[a],_=x.path,j=x.name;return _&&j?B()(r="".concat(_,"#")).call(r,j,"-"):"#"}},{key:"_makeSvgItem",value:function(a,l,r){var c=this;return We()(a).call(a,function(x){var _,j,A=c._makeSvgIconPrefix(x,r),z=c._toUnderScore(l),U=c._makeIconClassName(x,r);return B()(_=B()(j='<use xlink:href="'.concat(A,"ic-")).call(j,z,'" class="')).call(_,U,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(a,l){var r,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return B()(r='<svg class="svg_ic-'.concat(c?"submenu":"menu",'">')).call(r,this._makeSvgItem(a,l,c),"</svg>")}}]),E})(),la=sa,ca=R(9146),Dt=R.n(ca),ua=R(6623),Mn=R(4230);function tn(E,p){return tn=Mn||function(l,r){return l.__proto__=r,l},tn(E,p)}function ge(E,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=ua(p&&p.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),p&&tn(E,p)}var ha=R(3742);function Ti(E){"@babel/helpers - typeof";return typeof v=="function"&&typeof ha=="symbol"?Ti=function(a){return typeof a}:Ti=function(a){return a&&typeof v=="function"&&a.constructor===v&&a!==v.prototype?"symbol":typeof a},Ti(E)}function ce(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function ve(E,p){if(p&&(Ti(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(E)}var _n=R(9856);function te(E){return te=Mn?_n:function(a){return a.__proto__||_n(a)},te(E)}var fa=R(6092),ci=R.n(fa),da=R(4858),ga=R.n(da),va=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Tn=(function(){function E(p,a){var l=a.defaultColor,r=l===void 0?"#7e7e7e":l,c=a.toggleDirection,x=c===void 0?"up":c,_=a.usageStatistics;W(this,E),this.colorpickerElement=p,this.usageStatistics=_,this._show=!1,this._colorpickerElement=p,this._toggleDirection=x,this._makePickerButtonElement(r),this._makePickerLayerElement(p,p.getAttribute("title")),this._color=r,this.picker=ga().create({container:this.pickerElement,preset:va,color:r,usageStatistics:this.usageStatistics}),this._addEvent()}return V(E,[{key:"destroy",value:function(){var a=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",Z()(this,function(l,r){a[r]=null})}},{key:"color",get:function(){return this._color},set:function(a){this._color=a,this._changeColorElement(a)}},{key:"_changeColorElement",value:function(a){a?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=a):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(a){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",a?this.colorElement.style.backgroundColor=a:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(a,l){var r=document.createElement("label"),c=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",r.innerHTML=l,c.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(c),a.appendChild(this.pickerControl),a.appendChild(this.colorElement),a.appendChild(r)}},{key:"_addEvent",value:function(){var a=this,l;this.picker.on("selectColor",function(r){a._changeColorElement(r.color),a._color=r.color,a.fire("change",r.color)}),this.eventHandler={pickerToggle:J()(l=this._pickerToggleEventHandler).call(l,this),pickerHide:function(){return a.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(a){var l=a.target,r=l&&this._isElementInColorPickerControl(l);(!r||r&&this._isPaletteButton(l))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),a.stopPropagation()}},{key:"_isPaletteButton",value:function(a){return a.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(a){for(var l=a;l!==document.body&&l;){if(l===this.pickerControl)return!0;l=l.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var a=this.pickerControl.style,l=this._colorpickerElement.clientWidth/2+2,r=this.pickerControl.offsetWidth/2-l,c=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(c=30),a.top="".concat(c,"px"),a.left="-".concat(r,"px")}}]),E})();pt().mixin(Tn);var Ke=Tn,pa=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,En=(function(){function E(p){var a,l,r,c,x,_,j,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};W(this,E),this._value=A.value||0,this.rangeElement=p.slider,this.rangeInputElement=p.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=A.min||0,this._max=A.max||100,this._useDecimal=A.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=A.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:J()(a=this._startChangingSlide).call(a,this),stopChangingSlide:J()(l=this._stopChangingSlide).call(l,this),changeSlide:J()(r=this._changeSlide).call(r,this),changeSlideFinally:J()(c=this._changeSlideFinally).call(c,this),changeInput:J()(x=this._changeInput).call(x,this),changeInputFinally:J()(_=this._changeValueWithInput).call(_,this,!0),changeInputWithArrow:J()(j=this._changeValueWithInputKeyEvent).call(j,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=A.value,this.trigger("change")}return V(E,[{key:"destroy",value:function(){var a=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",Z()(this,function(l,r){a[r]=null})}},{key:"max",get:function(){return this._max},set:function(a){this._max=a,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(a){this._min=a,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(a){a=this._useDecimal?a:le(a);var l=a-this._min,r=l*this.rangeWidth/this._absMax;this.rangeWidth<r&&(r=this.rangeWidth),this.pointer.style.left="".concat(r,"px"),this.subbar.style.right="".concat(this.rangeWidth-r,"px"),this._value=a,this.rangeInputElement&&(this.rangeInputElement.value=a)}},{key:"trigger",value:function(a){this.fire(a,this._value)}},{key:"_getRangeWidth",value:function(){var a=function(r){return le(window.getComputedStyle(r,null).width)};return a(this.rangeElement)-a(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(a){var l,r=a.keyCode,c=a.target;if(!(h()(l=[Ce.ARROW_UP,Ce.ARROW_DOWN]).call(l,r)<0)){var x=Number(c.value);x=this._valueUpDownForKeyEvent(x,r);var _=x<this._min||x>this._max;if(!_){var j=ne(x,this._min,this.max);this.value=j,this.fire("change",j,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(a,l){var r=this._useDecimal?.1:1;return l===Ce.ARROW_UP?a+=r:l===Ce.ARROW_DOWN&&(a-=r),a}},{key:"_changeInput",value:function(a){var l=this;clearTimeout(this._userInputTimer);var r=a.keyCode;if(r<Ce.DIGIT_0||r>Ce.DIGIT_9){a.preventDefault();return}this._userInputTimer=t()(function(){l._inputSetValue(a.target.value)},350)}},{key:"_inputSetValue",value:function(a){var l=this._useDecimal?Number(a):le(a);l=ne(l,this._min,this.max),this.value=l,this.fire("change",l,!0)}},{key:"_changeValueWithInput",value:function(a,l){var r,c=l.keyCode,x=l.target;if(!(h()(r=[Ce.ARROW_UP,Ce.ARROW_DOWN]).call(r,c)>=0)){var _=this._filterForInputText(x.value),j=!_||isNaN(_);x.value=_,j||this._inputSetValue(_)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(a){var l=a.screenX,r=l-this.firstPosition,c=this.firstLeft+r;c=c>this.rangeWidth?this.rangeWidth:c,c=c<0?0:c,this.pointer.style.left="".concat(c,"px"),this.subbar.style.right="".concat(this.rangeWidth-c,"px");var x=c/this.rangeWidth,_=this._absMax*x+this._min,j=this._useDecimal?_:le(_),A=this.value!==j;A&&(this.value=j,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(a){if(a.stopPropagation(),a.target.className==="tui-image-editor-range"){var l=a.offsetX,r=l/this.rangeWidth,c=this._absMax*r+this._min;this.pointer.style.left="".concat(r*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-r)*this.rangeWidth,"px"),this.value=c,this.fire("change",c,!0)}}},{key:"_startChangingSlide",value:function(a){this.firstPosition=a.screenX,this.firstLeft=le(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(a){return a.replace(pa,"$1$2$3")}}]),E})();pt().mixin(En);var Ne=En,wn=(function(){function E(p,a){var l=a.locale,r=a.name,c=a.makeSvgIcon,x=a.menuBarPosition,_=a.templateHtml,j=a.usageStatistics;W(this,E),this.subMenuElement=p,this.menuBarPosition=x,this.toggleDirection=x==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=j,this.eventHandler={},this._makeSubMenuElement({locale:l,name:r,makeSvgIcon:c,templateHtml:_})}return V(E,[{key:"selector",value:function(a){return this.subMenuElement.querySelector(a)}},{key:"colorPickerChangeShow",value:function(a){var l;Yt()(l=this.colorPickerControls).call(l,function(r){a!==r&&r.hide()})}},{key:"getButtonType",value:function(a,l){return a.className.match(RegExp("(".concat(l.join("|"),")")))[0]}},{key:"changeClass",value:function(a,l,r){a.classList.remove(l),a.classList.add(r)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(a){var l=a.locale,r=a.name,c=a.iconStyle,x=a.makeSvgIcon,_=a.templateHtml,j=document.createElement("div");j.className="tui-image-editor-menu-".concat(r),j.innerHTML=_({locale:l,iconStyle:c,makeSvgIcon:x}),this.subMenuElement.appendChild(j)}},{key:"_onStartEditingInputBox",value:function(){this.fire(_t.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(_t.INPUT_BOX_EDITING_STOPPED)}}]),E})();pt().mixin(wn);var Ge=wn,ma=(function(E){var p,a,l,r,c,x,_,j,A=E.locale,z=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(z(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(j,A.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(_,z(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(x,A.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(c,z(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(r,A.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(l,A.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(a,A.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(p,A.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)});function ya(E){var p=Ca();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Ca(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var xa={stroke:"#ffbb3b",fill:"",strokeWidth:3},Sa=(function(E){ge(a,E);var p=ya(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"shape",makeSvgIcon:_,menuBarPosition:j,templateHtml:ma,usageStatistics:A}),c.type=null,c.options=xa,c._els={shapeSelectButton:c.selector(".tie-shape-button"),shapeColorButton:c.selector(".tie-shape-color-button"),strokeRange:new Ne({slider:c.selector(".tie-stroke-range"),input:c.selector(".tie-stroke-range-value")},ai),fillColorpicker:new Ke(c.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),strokeColorpicker:new Ke(c.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics})},c.colorPickerControls.push(c._els.fillColorpicker),c.colorPickerControls.push(c._els.strokeColorpicker),c.colorPickerInputBoxes=[],c.colorPickerInputBoxes.push(c._els.fillColorpicker.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX)),c.colorPickerInputBoxes.push(c._els.strokeColorpicker.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX)),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j,A,z,U=this;this.eventHandler.shapeTypeSelected=J()(c=this._changeShapeHandler).call(c,this),this.actions=r,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",J()(x=this._changeStrokeRangeHandler).call(x,this)),this._els.fillColorpicker.on("change",J()(_=this._changeFillColorHandler).call(_,this)),this._els.strokeColorpicker.on("change",J()(j=this._changeStrokeColorHandler).call(j,this)),this._els.fillColorpicker.on("changeShow",J()(A=this.colorPickerChangeShow).call(A,this)),this._els.strokeColorpicker.on("changeShow",J()(z=this.colorPickerChangeShow).call(z,this)),ci()(this.colorPickerInputBoxes,function(nt){var st,dt;nt.addEventListener(_t.FOCUS,J()(st=U._onStartEditingInputBox).call(st,U)),nt.addEventListener(_t.BLUR,J()(dt=U._onStopEditingInputBox).call(dt,U))},this)}},{key:"_removeEvent",value:function(){var r=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),ci()(this.colorPickerInputBoxes,function(c){var x,_;c.removeEventListener(_t.FOCUS,J()(x=r._onStartEditingInputBox).call(x,r)),c.removeEventListener(_t.BLUR,J()(_=r._onStopEditingInputBox).call(_,r))},this)}},{key:"setShapeStatus",value:function(r){var c=r.strokeWidth,x=r.strokeColor,_=r.fillColor;this._els.strokeRange.value=c,this._els.strokeColorpicker.color=x,this._els.fillColorpicker.color=_,this.options.stroke=x,this.options.fill=_,this.options.strokeWidth=c,this.actions.setDrawingShape(this.type,{strokeWidth:c})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(r){var c=r;c<=0&&(c=ai.max),this._els.strokeRange.max=c}},{key:"setStrokeValue",value:function(r){this._els.strokeRange.value=r,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(r){var c=r.target.closest(".tui-image-editor-button");if(c){this.actions.stopDrawingMode(),this.actions.discardSelection();var x=this.getButtonType(c,["circle","triangle","rect"]);if(this.type===x){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=x,r.currentTarget.classList.add(x),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(r,c){this.options.strokeWidth=le(r),this.actions.changeShape({strokeWidth:r},!c),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(r){r=r||"transparent",this.options.fill=r,this.actions.changeShape({fill:r})}},{key:"_changeStrokeColorHandler",value:function(r){r=r||"transparent",this.options.stroke=r,this.actions.changeShape({stroke:r})}}]),a})(Ge),ba=Sa,Ia=(function(E){var p,a,l,r,c,x,_,j,A,z,U,nt,st,dt,ht,vt,kt,$t=E.locale,ie=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z=B()(U=B()(nt=B()(st=B()(dt=B()(ht=B()(vt=B()(kt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(ie(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(kt,$t.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(vt,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ht,$t.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(dt,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(st,$t.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(nt,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(U,$t.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(z,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(A,$t.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(j,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(_,$t.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(x,ie(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(c,$t.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(r,ie(["normal","active"],"apply"),`
                <label>
                    `)).call(l,$t.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,ie(["normal","active"],"cancel"),`
                <label>
                    `)).call(p,$t.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)});function Ma(E){var p=_a();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function _a(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Ta=(function(E){ge(a,E);var p=Ma(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"crop",makeSvgIcon:_,menuBarPosition:j,templateHtml:Ia,usageStatistics:A}),c.status="active",c._els={apply:c.selector(".tie-crop-button .apply"),cancel:c.selector(".tie-crop-button .cancel"),preset:c.selector(".tie-crop-preset-button")},c.defaultPresetButton=c._els.preset.querySelector(".preset-none"),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j=J()(c=this._applyEventHandler).call(c,this),A=J()(x=this._cancelEventHandler).call(x,this),z=J()(_=this._cropzonePresetEventHandler).call(_,this);this.eventHandler={apply:j,cancel:A,cropzonePreset:z},this.actions=r,this._els.apply.addEventListener("click",j),this._els.cancel.addEventListener("click",A),this._els.preset.addEventListener("click",z)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(r){var c=r.target.closest(".tui-image-editor-button.preset");if(c){var x=c.className.match(/preset-[^\s]+/),_=lt(x,1),j=_[0];this._setPresetButtonActive(c),this.actions.preset(j)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(r){r?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;Z()(this._els.preset.querySelectorAll(".preset"),function(c){c.classList.remove("active")}),r&&r.classList.add("active")}}]),a})(Ge),Ea=Ta,wa=(function(E){var p,a,l,r,c,x,_=E.locale,j=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(_.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(x,_.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(c,_.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(r,j(["normal","active"],"apply"),`
                <label>
                    `)).call(l,_.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,j(["normal","active"],"cancel"),`
                <label>
                    `)).call(p,_.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)});function Da(E){var p=Oa();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Oa(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Aa=(function(E){ge(a,E);var p=Da(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"resize",makeSvgIcon:_,menuBarPosition:j,templateHtml:wa,usageStatistics:A}),c.status="active",c._lockState=!1,c._originalDimensions=null,c._els={widthRange:new Ne({slider:c.selector(".tie-width-range"),input:c.selector(".tie-width-range-value")},Ve),heightRange:new Ne({slider:c.selector(".tie-height-range"),input:c.selector(".tie-height-range-value")},Ve),lockAspectRatio:c.selector(".tie-lock-aspect-ratio"),apply:c.selector(".tie-resize-button .apply"),cancel:c.selector(".tie-resize-button .cancel")},c}return V(a,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var r=this.actions.getCurrentDimensions();this._originalDimensions=r,this.setWidthValue(r.width),this.setHeightValue(r.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(r){this._els.widthRange.min=this.calcMinValue(r.minWidth),this._els.heightRange.min=this.calcMinValue(r.minHeight),this._els.widthRange.max=this.calcMaxValue(r.maxWidth),this._els.heightRange.max=this.calcMaxValue(r.maxHeight)}},{key:"calcMaxValue",value:function(r){return r<=0&&(r=Ve.max),r}},{key:"calcMinValue",value:function(r){return r<=0&&(r=Ve.min),r}},{key:"setWidthValue",value:function(r){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=r,c&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(r){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=r,c&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j,A;this._els.widthRange.on("change",J()(c=this._changeWidthRangeHandler).call(c,this)),this._els.heightRange.on("change",J()(x=this._changeHeightRangeHandler).call(x,this)),this._els.lockAspectRatio.addEventListener("change",J()(_=this._changeLockAspectRatio).call(_,this));var z=J()(j=this._applyEventHandler).call(j,this),U=J()(A=this._cancelEventHandler).call(A,this);this.eventHandler={apply:z,cancel:U},this.actions=r,this._els.apply.addEventListener("click",z),this._els.cancel.addEventListener("click",U)}},{key:"_changeWidthRangeHandler",value:function(r){this.actions.preview("width",le(r),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(r){this.actions.preview("height",le(r),this._lockState)}},{key:"_changeLockAspectRatio",value:function(r){this._lockState=r.target.checked,this.actions.lockAspectRatio(this._lockState,Ve.min,Ve.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(r){r?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),a})(Ge),ka=Aa,Pa=(function(E){var p,a,l,r,c,x=E.locale,_=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(_(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(c,x.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(r,_(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(l,x.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(a,_(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(p,x.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)});function La(E){var p=ja();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function ja(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Na=(function(E){ge(a,E);var p=La(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"flip",makeSvgIcon:_,menuBarPosition:j,templateHtml:Pa,usageStatistics:A}),c.flipStatus=!1,c._els={flipButton:c.selector(".tie-flip-button")},c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),Oe(this)}},{key:"addEvent",value:function(r){var c;this.eventHandler.changeFlip=J()(c=this._changeFlip).call(c,this),this._actions=r,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(r){var c=this,x=r.target.closest(".tui-image-editor-button");if(x){var _=this.getButtonType(x,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&_==="resetFlip")return;this._actions.flip(_).then(function(j){var A=c._els.flipButton.classList;c.flipStatus=!1,A.remove("resetFlip"),Z()(["flipX","flipY"],function(z){A.remove(z),j[z]&&(A.add(z),A.add("resetFlip"),c.flipStatus=!0)})})}}}]),a})(Ge),Ra=Na,za=(function(E){var p,a,l=E.locale,r=E.makeSvgIcon;return B()(p=B()(a=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(r(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(a,r(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(p,l.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)});function Fa(E){var p=Ba();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Ba(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Ha=30,Ua=-30,Ya=(function(E){ge(a,E);var p=Fa(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"rotate",makeSvgIcon:_,menuBarPosition:j,templateHtml:za,usageStatistics:A}),c._value=0,c._els={rotateButton:c.selector(".tie-rotate-button"),rotateRange:new Ne({slider:c.selector(".tie-rotate-range"),input:c.selector(".tie-rotate-range-value")},mi)},c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),Oe(this)}},{key:"setRangeBarAngle",value:function(r,c){var x=c;r==="rotate"&&(x=yt()(this._els.rotateRange.value,10)+c),this._setRangeBarRatio(x)}},{key:"_setRangeBarRatio",value:function(r){this._els.rotateRange.value=r}},{key:"addEvent",value:function(r){var c,x;this.eventHandler.rotationAngleChanged=J()(c=this._changeRotateForButton).call(c,this),this.actions=r,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",J()(x=this._changeRotateForRange).call(x,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(r,c){var x=le(r);this.actions.setAngle(x,!c),this._value=x}},{key:"_changeRotateForButton",value:function(r){var c=r.target.closest(".tui-image-editor-button"),x=this._els.rotateRange.value;if(c){var _=this.getButtonType(c,["counterclockwise","clockwise"]),j={clockwise:Ha,counterclockwise:Ua}[_],A=yt()(x,10)+j,z=A>=-360&&A<=360;z&&this.actions.rotate(j)}}}]),a})(Ge),Wa=Ya,Ga=(function(E){var p,a,l,r,c,x,_,j,A,z,U,nt,st,dt=E.locale,ht=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z=B()(U=B()(nt=B()(st=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(ht(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(st,dt.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(nt,ht(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(U,dt.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(z,ht(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(A,dt.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(j,ht(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(_,dt.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(x,ht(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(c,dt.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(r,ht(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(l,dt.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(a,dt.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(p,dt.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)});function Xa(E){var p=Za();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Za(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Va=(function(E){ge(a,E);var p=Xa(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"text",makeSvgIcon:_,menuBarPosition:j,templateHtml:Ga,usageStatistics:A}),c.effect={bold:!1,italic:!1,underline:!1},c.align="tie-text-align-left",c._els={textEffectButton:c.selector(".tie-text-effect-button"),textAlignButton:c.selector(".tie-text-align-button"),textColorpicker:new Ke(c.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),textRange:new Ne({slider:c.selector(".tie-text-range"),input:c.selector(".tie-text-range-value")},Ci)},c.colorPickerInputBox=c._els.textColorpicker.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j,A,z,U=J()(c=this._setTextEffectHandler).call(c,this),nt=J()(x=this._setTextAlignHandler).call(x,this);this.eventHandler={setTextEffect:U,setTextAlign:nt},this.actions=r,this._els.textEffectButton.addEventListener("click",U),this._els.textAlignButton.addEventListener("click",nt),this._els.textRange.on("change",J()(_=this._changeTextRnageHandler).call(_,this)),this._els.textColorpicker.on("change",J()(j=this._changeColorHandler).call(j,this)),this.colorPickerInputBox.addEventListener(_t.FOCUS,J()(A=this._onStartEditingInputBox).call(A,this)),this.colorPickerInputBox.addEventListener(_t.BLUR,J()(z=this._onStopEditingInputBox).call(z,this))}},{key:"_removeEvent",value:function(){var r,c,x=this.eventHandler,_=x.setTextEffect,j=x.setTextAlign;this._els.textEffectButton.removeEventListener("click",_),this._els.textAlignButton.removeEventListener("click",j),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(_t.FOCUS,J()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(_t.BLUR,J()(c=this._onStopEditingInputBox).call(c,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(r){this._els.textColorpicker.color=r}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(r){this._els.textRange.value=r}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=xt()(r),x=r.fontSize,_=r.fontStyle,j=r.fontWeight,A=r.textDecoration,z=r.textAlign;this.textColor=c,this.fontSize=x,this.setEffectState("italic",_),this.setEffectState("bold",j),this.setEffectState("underline",A),this.setAlignState("tie-text-align-".concat(z))}},{key:"setEffectState",value:function(r,c){var x=c==="italic"||c==="bold"||c==="underline",_=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(r));this.effect[r]=x,_.classList[x?"add":"remove"]("active")}},{key:"setAlignState",value:function(r){var c=this._els.textAlignButton;c.classList.remove(this.align),c.classList.add(r),this.align=r}},{key:"_setTextEffectHandler",value:function(r){var c=r.target.closest(".tui-image-editor-button");if(c){var x=c.className.match(/(bold|italic|underline)/),_=lt(x,1),j=_[0],A={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[j];this.effect[j]=!this.effect[j],c.classList.toggle("active"),this.actions.changeTextStyle(A)}}},{key:"_setTextAlignHandler",value:function(r){var c=r.target.closest(".tui-image-editor-button");if(c){var x=this.getButtonType(c,["left","center","right"]),_="tie-text-align-".concat(x);r.currentTarget.classList.remove(this.align),this.align!==_&&r.currentTarget.classList.add(_),this.actions.changeTextStyle({textAlign:x}),this.align=_}}},{key:"_changeTextRnageHandler",value:function(r,c){this.actions.changeTextStyle({fontSize:r},!c)}},{key:"_changeColorHandler",value:function(r){r=r||"transparent",this.actions.changeTextStyle({fill:r})}}]),a})(Ge),Ja=Va,Qa=(function(E){var p,a,l,r=E.locale,c=E.makeSvgIcon;return B()(p=B()(a=B()(l=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(c(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(l,r.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(a,c(["normal","active"],"apply"),`
                <label>
                    `)).call(p,r.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)});function Ka(E){var p=$a();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function $a(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var qa=(function(E){ge(a,E);var p=Ka(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"mask",makeSvgIcon:_,menuBarPosition:j,templateHtml:Qa,usageStatistics:A}),c._els={applyButton:c.selector(".tie-mask-apply"),maskImageButton:c.selector(".tie-mask-image-file")},c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_=J()(c=this._loadMaskFile).call(c,this),j=J()(x=this._applyMask).call(x,this);this.eventHandler={loadMaskFile:_,applyMask:j},this.actions=r,this._els.maskImageButton.addEventListener("change",_),this._els.applyButton.addEventListener("click",j)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(r){var c;Ee()||alert("This browser does not support file-api");var x=lt(r.target.files,1),_=x[0];_&&(c=Q().createObjectURL(_),this.actions.loadImageFromURL(c,_),this._els.applyButton.classList.add("active"))}}]),a})(Ge),to=qa,eo=(function(E){var p,a,l,r,c,x,_,j,A,z,U,nt,st,dt,ht,vt,kt,$t,ie,re,Bt=E.locale,he=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z=B()(U=B()(nt=B()(st=B()(dt=B()(ht=B()(vt=B()(kt=B()($t=B()(ie=B()(re=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(he(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(re,Bt.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(ie,he(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call($t,Bt.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(kt,he(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(vt,Bt.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(ht,he(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(dt,Bt.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(st,he(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(nt,Bt.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(U,he(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(z,Bt.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(A,he(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(j,Bt.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(_,he(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(x,Bt.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(c,he(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(r,Bt.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(l,he(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(a,Bt.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(p,Bt.localize("Color"),`"></div>
        </li>
    </ul>
`)});function io(E){var p=no();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function no(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var ro=(function(E){ge(a,E);var p=io(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"icon",makeSvgIcon:_,menuBarPosition:j,templateHtml:eo,usageStatistics:A}),c.iconType=null,c._iconMap={},c._els={registerIconButton:c.selector(".tie-icon-image-file"),addIconButton:c.selector(".tie-icon-add-button"),iconColorpicker:new Ke(c.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics})},c.colorPickerInputBox=c._els.iconColorpicker.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j,A,z=J()(c=this._registerIconHandler).call(c,this),U=J()(x=this._addIconHandler).call(x,this);this.eventHandler={registerIcon:z,addIcon:U},this.actions=r,this._els.iconColorpicker.on("change",J()(_=this._changeColorHandler).call(_,this)),this._els.registerIconButton.addEventListener("change",z),this._els.addIconButton.addEventListener("click",U),this.colorPickerInputBox.addEventListener(_t.FOCUS,J()(j=this._onStartEditingInputBox).call(j,this)),this.colorPickerInputBox.addEventListener(_t.BLUR,J()(A=this._onStopEditingInputBox).call(A,this))}},{key:"_removeEvent",value:function(){var r,c;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(_t.FOCUS,J()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(_t.BLUR,J()(c=this._onStopEditingInputBox).call(c,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var r=this;Z()(pi,function(c,x){r.actions.registerDefaultIcons(x,c)})}},{key:"setIconPickerColor",value:function(r){this._els.iconColorpicker.color=r}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(r){r=r||"transparent",this.actions.changeColor(r)}},{key:"_addIconHandler",value:function(r){var c=r.target.closest(".tui-image-editor-button");if(c){var x=c.getAttribute("data-icontype"),_=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(x),this.iconType===x?this.changeStandbyMode():(this.actions.addIcon(x,_),this.iconType=x)}}},{key:"_registerIconHandler",value:function(r){var c;Ee||alert("This browser does not support file-api");var x=lt(r.target.files,1),_=x[0];_&&(c=Q().createObjectURL(_),this.actions.registerCustomIcon(c,_))}}]),a})(Ge),ao=ro,oo=(function(E){var p,a,l,r,c,x=E.locale,_=E.makeSvgIcon;return B()(p=B()(a=B()(l=B()(r=B()(c=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(_(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(c,x.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(r,_(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(l,x.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(a,x.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(p,x.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)});function so(E){var p=lo();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function lo(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var co=.7,uo=(function(E){ge(a,E);var p=so(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon,j=r.menuBarPosition,A=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"draw",makeSvgIcon:_,menuBarPosition:j,templateHtml:oo,usageStatistics:A}),c._els={lineSelectButton:c.selector(".tie-draw-line-select-button"),drawColorPicker:new Ke(c.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:c.toggleDirection,usageStatistics:c.usageStatistics}),drawRange:new Ne({slider:c.selector(".tie-draw-range"),input:c.selector(".tie-draw-range-value")},yi)},c.type=null,c.color=c._els.drawColorPicker.color,c.width=c._els.drawRange.value,c.colorPickerInputBox=c._els.drawColorPicker.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),Oe(this)}},{key:"addEvent",value:function(r){var c,x,_,j,A;this.eventHandler.changeDrawType=J()(c=this._changeDrawType).call(c,this),this.actions=r,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",J()(x=this._changeDrawColor).call(x,this)),this._els.drawRange.on("change",J()(_=this._changeDrawRange).call(_,this)),this.colorPickerInputBox.addEventListener(_t.FOCUS,J()(j=this._onStartEditingInputBox).call(j,this)),this.colorPickerInputBox.addEventListener(_t.BLUR,J()(A=this._onStopEditingInputBox).call(A,this))}},{key:"_removeEvent",value:function(){var r,c;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(_t.FOCUS,J()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(_t.BLUR,J()(c=this._onStopEditingInputBox).call(c,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:Nt(this.color,co)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(r){var c=r.target.closest(".tui-image-editor-button");if(c){var x=this.getButtonType(c,["free","line"]);if(this.actions.discardSelection(),this.type===x){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=x,this._els.lineSelectButton.classList.add(x),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(r){this.color=r||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(r){this.width=r,this.type?this.setDrawMode():this.changeStartMode()}}]),a})(Ge),ho=uo,fo=R(9886),Dn=R.n(fo),go=(function(E){var p,a,l,r,c,x,_,j,A,z,U,nt,st,dt,ht,vt,kt=E.locale;return B()(p=B()(a=B()(l=B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z=B()(U=B()(nt=B()(st=B()(dt=B()(ht=B()(vt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(kt.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(vt,kt.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(ht,kt.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(dt,kt.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(st,kt.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(nt,kt.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(U,kt.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(z,kt.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(A,kt.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(j,kt.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(_,kt.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(x,kt.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(c,kt.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(r,kt.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(l,kt.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(a,kt.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(p,kt.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)});function vo(E){var p=po();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function po(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var On="130px",mo=["add","diff","subtract","multiply","screen","lighten","darken"],An=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],yo={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},kn=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],Pn=["filterBlendColor","filterMultiplyColor","filterTintColor"],Co=(function(E){ge(a,E);var p=vo(a);function a(l,r){var c,x=r.locale,_=r.menuBarPosition,j=r.usageStatistics;return W(this,a),c=p.call(this,l,{locale:x,name:"filter",menuBarPosition:_,templateHtml:go,usageStatistics:j}),c.selectBoxShow=!1,c.checkedMap={},c._makeControlElement(),c}return V(a,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),Oe(this)}},{key:"_removeEvent",value:function(){var r=this,c;Z()(An,function(x){var _=r.selector(".tie-".concat(x)),j=Ie(x);_.removeEventListener("change",r.eventHandler[j])}),Z()(B()(c=[]).call(c,kn,Pn),function(x){r._els[x].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),ci()(this.colorPickerInputBoxes,function(x){var _,j;x.removeEventListener(_t.FOCUS,J()(_=r._onStartEditingInputBox).call(_,r)),x.removeEventListener(_t.BLUR,J()(j=r._onStopEditingInputBox).call(j,r))},this)}},{key:"_destroyToolInstance",value:function(){var r,c=this;Z()(B()(r=[]).call(r,kn,Pn),function(x){c._els[x].destroy()})}},{key:"addEvent",value:function(r){var c=this,x,_,j,A=r.applyFilter,z=function(st){var dt;return J()(dt=c._changeFilterState).call(dt,c,A,st)},U=function(st){return function(dt,ht){return c._changeFilterState(A,st,ht)}};this.eventHandler={changeBlendFilter:z("blend"),blandTypeClick:function(st){return st.stopPropagation()}},Z()(An,function(nt){var st=c.selector(".tie-".concat(nt)),dt=Ie(nt);c.checkedMap[dt]=st,c.eventHandler[dt]=z(dt),st.addEventListener("change",c.eventHandler[dt])}),this._els.removewhiteDistanceRange.on("change",U("removeWhite")),this._els.colorfilterThresholdRange.on("change",U("colorFilter")),this._els.pixelateRange.on("change",U("pixelate")),this._els.noiseRange.on("change",U("noise")),this._els.brightnessRange.on("change",U("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",z("multiply")),this._els.filterTintColor.on("change",z("tint")),this._els.tintOpacity.on("change",U("tint")),this._els.filterMultiplyColor.on("changeShow",J()(x=this.colorPickerChangeShow).call(x,this)),this._els.filterTintColor.on("changeShow",J()(_=this.colorPickerChangeShow).call(_,this)),this._els.filterBlendColor.on("changeShow",J()(j=this.colorPickerChangeShow).call(j,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),ci()(this.colorPickerInputBoxes,function(nt){var st,dt;nt.addEventListener(_t.FOCUS,J()(st=c._onStartEditingInputBox).call(st,c)),nt.addEventListener(_t.BLUR,J()(dt=c._onStopEditingInputBox).call(dt,c))},this)}},{key:"setFilterState",value:function(r){var c=r.type,x=r.options,_=r.action,j=this._getFilterNameFromOptions(c,x),A=_==="remove";A||this._setFilterState(j,x),this.checkedMap[j].checked=!A}},{key:"initFilterCheckBoxState",value:function(){Z()(this.checkedMap,function(r){r.checked=!1},this)}},{key:"_setFilterState",value:function(r,c){r==="colorFilter"?this._els.colorfilterThresholdRange.value=c.distance:r==="removeWhite"?this._els.removewhiteDistanceRange.value=c.distance:r==="pixelate"?this._els.pixelateRange.value=c.blocksize:r==="brightness"?this._els.brightnessRange.value=c.brightness:r==="noise"?this._els.noiseRange.value=c.noise:r==="tint"?(this._els.tintOpacity.value=c.alpha,this._els.filterTintColor.color=c.color):r==="blend"?this._els.filterBlendColor.color=c.color:r==="multiply"&&(this._els.filterMultiplyColor.color=c.color)}},{key:"_getFilterNameFromOptions",value:function(r,c){var x=r;return r==="removeColor"?x=Dn()(c.useAlpha)?"removeWhite":"colorFilter":r==="blendColor"&&(x={add:"blend",multiply:"multiply",tint:"tint"}[c.mode]),x}},{key:"_changeFilterState",value:function(r,c){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=this.checkedMap[c].checked,j=yo[c],A=this.checkedMap[c].closest(".tui-image-editor-checkbox-group");A&&(_?A.classList.remove("tui-image-editor-disabled"):A.classList.add("tui-image-editor-disabled")),r(_,j,this._getFilterOption(c),!x)}},{key:"_getFilterOption",value:function(r){var c={};switch(r){case"removeWhite":c.color="#FFFFFF",c.useAlpha=!1,c.distance=Qe()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":c.color="#FFFFFF",c.distance=Qe()(this._els.colorfilterThresholdRange.value);break;case"pixelate":c.blocksize=le(this._els.pixelateRange.value);break;case"noise":c.noise=le(this._els.noiseRange.value);break;case"brightness":c.brightness=Qe()(this._els.brightnessRange.value);break;case"blend":c.mode="add",c.color=this._els.filterBlendColor.color,c.mode=this._els.blendType.value;break;case"multiply":c.mode="multiply",c.color=this._els.filterMultiplyColor.color;break;case"tint":c.mode="tint",c.color=this._els.filterTintColor.color,c.alpha=this._els.tintOpacity.value;break;case"blur":c.blur=this._els.blurRange.value;break}return c}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new Ne({slider:this.selector(".tie-removewhite-distance-range")},Ye.removewhiteDistanceRange),brightnessRange:new Ne({slider:this.selector(".tie-brightness-range")},Ye.brightnessRange),noiseRange:new Ne({slider:this.selector(".tie-noise-range")},Ye.noiseRange),pixelateRange:new Ne({slider:this.selector(".tie-pixelate-range")},Ye.pixelateRange),colorfilterThresholdRange:new Ne({slider:this.selector(".tie-colorfilter-threshold-range")},Ye.colorfilterThresholdRange),filterTintColor:new Ke(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Ke(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Ke(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Ye.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(me.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(r){var c=document.createElement("div"),x=document.createElement("label"),_=document.createElement("div");return _.id="tie-filter-tint-opacity",x.innerHTML="Opacity",c.appendChild(x),c.appendChild(_),r.appendChild(c),r.style.height=On,new Ne({slider:_},Ye.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(r){var c=document.createElement("div"),x=document.createElement("select"),_=document.createElement("ul");return c.className="tui-image-editor-selectlist-wrap",_.className="tui-image-editor-selectlist",c.appendChild(x),c.appendChild(_),this._makeSelectOptionList(x),r.appendChild(c),r.style.height=On,this._drawSelectOptionList(x,_),this._pickerWithSelectboxForAddEvent(x,_),x}},{key:"_drawSelectOptionList",value:function(r,c){var x=r.querySelectorAll("option");Z()(x,function(_){var j=document.createElement("li");j.innerHTML=_.innerHTML,j.setAttribute("data-item",_.value),c.appendChild(j)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(r,c){var x=this;c.addEventListener("click",function(_){var j=_.target.getAttribute("data-item"),A=document.createEvent("HTMLEvents");r.querySelector('[value="'.concat(j,'"]')).selected=!0,A.initEvent("change",!0,!0),r.dispatchEvent(A),x.selectBoxShow=!1,c.style.display="none"}),r.addEventListener("mousedown",function(_){_.preventDefault(),x.selectBoxShow=!x.selectBoxShow,c.style.display=x.selectBoxShow?"block":"none",c.setAttribute("data-selectitem",r.value),c.querySelector("[data-item='".concat(r.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(r){Z()(mo,function(c){var x=document.createElement("option");x.setAttribute("value",c),x.innerHTML=c.replace(/^[a-z]/,function(_){return _.toUpperCase()}),r.appendChild(x)})}}]),a})(Ge),xo=Co,So=R(4383),bo=R.n(So),Io=(function(){function E(p,a){var l=a.name;W(this,E),this.name=l,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),p.appendChild(this.panelElement)}return V(E,[{key:"_makePanelElement",value:function(){var a=document.createElement("div");return a.className="tie-panel-".concat(this.name),a}},{key:"_makeListElement",value:function(){var a=document.createElement("ol");return a.className="".concat(this.name,"-list"),a}},{key:"makeListItemElement",value:function(a){var l=document.createElement("li");return l.innerHTML=a,l.className="".concat(this.name,"-item"),l.setAttribute("data-index",this.items.length),l}},{key:"pushListItemElement",value:function(a){this.listElement.appendChild(a),this.listElement.scrollTop+=a.offsetHeight,this.items.push(a)}},{key:"deleteListItemElement",value:function(a,l){for(var r=this.items,c=a;c<l;c+=1)this.listElement.removeChild(r[c]);w()(r).call(r,a,l-a+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(a,l){this.items[a]&&this.items[a].classList.add(l)}},{key:"removeClass",value:function(a,l){this.items[a]&&this.items[a].classList.remove(l)}},{key:"toggleClass",value:function(a,l){this.items[a]&&this.items[a].classList.toggle(l)}}]),E})(),Mo=Io,_o=(function(E){var p,a,l,r=E.locale,c=E.makeSvgIcon,x=E.name,_=E.detail;return B()(p=B()(a=B()(l=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(c(["normal","active"],"history-".concat(x.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(l,r.localize(x),`
            `)).call(a,_?"(".concat(r.localize(_),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(p,c(["normal"],"history-check",!0),`
        </div>
    </div>
`)});function To(E){var p=Eo();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Eo(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var wo="history-item",Ln="selected-item",jn="disabled-item",Do=(function(E){ge(a,E);var p=To(a);function a(l,r){var c,x=r.locale,_=r.makeSvgIcon;return W(this,a),c=p.call(this,l,{name:"history"}),l.classList.add("enabled"),c.locale=x,c.makeSvgIcon=_,c._eventHandler={},c._historyIndex=c.getListLength(),c}return V(a,[{key:"add",value:function(r){var c=r.name,x=r.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var _=_o({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:c,detail:x}),j=this.makeListItemElement(_);this.pushListItemElement(j),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var r=this;this._eventHandler.history=function(c){return r._clickHistoryItem(c)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(r){var c=r.target,x=c.closest(".".concat(wo));if(x){var _=bo()(x.getAttribute("data-index"),10);if(_!==this._historyIndex){var j=Math.abs(_-this._historyIndex);_<this._historyIndex?this._actions.undo(j):this._actions.redo(j)}}}},{key:"_selectItem",value:function(r){for(var c=0;c<this.getListLength();c+=1)this.removeClass(c,Ln),this.removeClass(c,jn),c>r&&this.addClass(c,jn);this.addClass(r,Ln)}},{key:"destroy",value:function(){this.removeEvent(),Oe(this)}},{key:"addEvent",value:function(r){this._actions=r,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),a})(Mo),Oo=Do,Ao=(function(){function E(p){W(this,E),this._locale=p}return V(E,[{key:"localize",value:function(a){return this._locale[a]||a}}]),E})(),ko=Ao,Po={Shape:ba,Crop:Ea,Resize:ka,Flip:Ra,Rotate:Wa,Text:Ja,Mask:to,Icon:ao,Draw:ho,Filter:xo},Lo="1300",Nn="history",jo="tie-panel-history",ui="on",hi={ZOOM_IN:"zoomIn",HAND:"hand"},Rn=(function(){function E(p,a,l){W(this,E),this.options=this._initializeOption(a),this._actions=l,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new ko(this.options.locale),this.theme=new la(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(p),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return V(E,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",Oe(this)}},{key:"setUiDefaultSelectionStyle",value:function(a){return X()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},a)}},{key:"resizeEditor",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=a.uiSize,r=a.imageSize,c=r===void 0?this.imageSize:r;c!==this.imageSize&&(this.imageSize=c),l&&this._setUiSize(l);var x=this._getCanvasMaxDimension(),_=x.width,j=x.height,A=this._editorElement.style,z=this.options.menuBarPosition;A.height="".concat(j,"px"),A.width="".concat(_,"px"),this._setEditorPosition(z),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var U=this._selectedElement.classList;z==="top"&&this._selectedElement.offsetWidth<Lo?U.add("tui-image-editor-top-optimization"):U.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(a){var l=this._buttonElements[a].classList;l.toggle(ui),a===hi.ZOOM_IN?this._buttonElements[hi.HAND].classList.remove(ui):this._buttonElements[hi.ZOOM_IN].classList.remove(ui)}},{key:"offZoomInButtonStatus",value:function(){var a=this._buttonElements[hi.ZOOM_IN].classList;a.remove(ui)}},{key:"changeHandButtonStatus",value:function(a){var l=this._buttonElements[hi.HAND].classList;l[a?"add":"remove"](ui)}},{key:"changeHelpButtonEnabled",value:function(a,l){var r=this._buttonElements[a].classList;r[l?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(a){return X()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},a)}},{key:"_setUiSize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,l=this._selectedElement.style;l.width=a.width,l.height=a.height}},{key:"_makeSubMenu",value:function(){var a=this;Z()(this.options.menu,function(l){var r,c=Po[l.replace(/^[a-z]/,function(x){return x.toUpperCase()})];a._makeMenuElement(l),a._buttonElements[l]=a._menuBarElement.querySelector(".tie-btn-".concat(l)),a[l]=new c(a._subMenuElement,{locale:a._locale,makeSvgIcon:J()(r=a.theme.makeMenSvgIconSet).call(r,a.theme),menuBarPosition:a.options.menuBarPosition,usageStatistics:a.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var a,l,r;this.on(_t.EXECUTE_COMMAND,J()(a=this._addHistory).call(a,this)),this.on(_t.AFTER_UNDO,J()(l=this._selectPrevHistory).call(l,this)),this.on(_t.AFTER_REDO,J()(r=this._selectNextHistory).call(r,this))}},{key:"_attachZoomEvent",value:function(){var a=this;this.on(_t.HAND_STARTED,function(){a.offZoomInButtonStatus(),a.changeHandButtonStatus(!0)}),this.on(_t.HAND_STOPPED,function(){return a.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(a){var l,r;a.nodeType?r=a:r=document.querySelector(a);var c=si(r);r.classList.add("tui-image-editor-container"),r.innerHTML=ia({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+ea({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=r,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=c(".tui-image-editor-main"),this._editorElementWrap=c(".tui-image-editor-wrap"),this._editorElement=c(".tui-image-editor"),this._helpMenuBarElement=c(".tui-image-editor-help-menu"),this._menuBarElement=c(".tui-image-editor-menu"),this._subMenuElement=c(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new Oo(this._buttonElements[Nn],{locale:this._locale,makeSvgIcon:J()(l=this.theme.makeMenSvgIconSet).call(l,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var a=this;Z()(qt,function(l){a.changeHelpButtonEnabled(l,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var a;return B()(a=[]).call(a,N(qt),[""],N(oe),[""],N(be))}},{key:"_addHelpMenus",value:function(){var a=this,l=this._makeHelpMenuWithPartition();Z()(l,function(r){r?(a._makeMenuElement(r,["normal","disabled","hover"],"help"),a._buttonElements[r]=a._helpMenuBarElement.querySelector(".tie-btn-".concat(r))):a._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var a=document.createElement("li"),l=document.createElement("div");a.className=Ii("item"),l.className=Ii("icpartition"),a.appendChild(l),this._helpMenuBarElement.appendChild(a)}},{key:"_makeMenuElement",value:function(a){var l,r,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",_=document.createElement("li"),j=this.theme.makeMenSvgIconSet(c,a);this._addTooltipAttribute(_,a),_.className=B()(l=B()(r="tie-btn-".concat(a," ")).call(r,Ii("item")," ")).call(l,x),_.innerHTML=j,x==="normal"?this._menuBarElement.appendChild(_):this._helpMenuBarElement.appendChild(_)}},{key:"_addHelpActionEvent",value:function(){var a=this;Z()(Tt,function(l){a.eventHandler[l]=function(r){return a._actions.main[l](r)},a._buttonElements[l].addEventListener("click",a.eventHandler[l])})}},{key:"_removeHelpActionEvent",value:function(){var a=this;Z()(Tt,function(l){a._buttonElements[l].removeEventListener("click",a.eventHandler[l])})}},{key:"_addHistory",value:function(a){if(!Yr(a)){var l=typeof a=="string"?{name:a}:Wr(a);this._historyMenu.add(l)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(a){var l=a.target,r=l.closest(".".concat(jo));if(!r){var c=this._buttonElements[Nn].classList;c.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(a,l){a.setAttribute("tooltip-content",this._locale.localize(l.replace(/^[a-z]/g,function(r){return r.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var a=this;this.eventHandler.download=function(){return a._actions.main.download()},Z()(this._buttonElements.download,function(l){l.addEventListener("click",a.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var a=this;Z()(this._buttonElements.download,function(l){l.removeEventListener("click",a.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var a=this;this.eventHandler.loadImage=function(l){return a._actions.main.load(l.target.files[0])},Z()(this._buttonElements.load,function(l){l.addEventListener("change",a.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var a=this;Z()(this._buttonElements.load,function(l){l.removeEventListener("change",a.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(a){var l=this;this.eventHandler[a]=function(){return l.changeMenu(a)},this._buttonElements[a].addEventListener("click",this.eventHandler[a])}},{key:"_addSubMenuEvent",value:function(a){var l=this;this[a].addEvent(this._actions[a]),this[a].on(_t.INPUT_BOX_EDITING_STARTED,function(){return l.fire(_t.INPUT_BOX_EDITING_STARTED)}),this[a].on(_t.INPUT_BOX_EDITING_STOPPED,function(){return l.fire(_t.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var a=this;Z()(this.options.menu,function(l){a._addMainMenuEvent(l),a._addSubMenuEvent(l)})}},{key:"_removeMainMenuEvent",value:function(){var a=this;Z()(this.options.menu,function(l){a._buttonElements[l].removeEventListener("click",a.eventHandler[l]),a[l].off(_t.INPUT_BOX_EDITING_STARTED),a[l].off(_t.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var a=this;Z()(this.options.menu,function(l){a[l].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var a=this,l=this._getLoadImage();l.path&&this._actions.main.initLoadImage(l.path,l.name).then(function(){a.activeMenuEvent()}),this._addLoadEvent();var r=document.createElement("div");r.className=Ii("grid-visual");var c=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;r.innerHTML=c,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(r)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(a,l,r),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(a,l,r){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),r&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===a&&l?this.submenu=null:(this._buttonElements[a].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(a)),this.submenu=a,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(a)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var a=this._editorContainerElement.style,l=a.maxWidth,r=a.maxHeight,c=Qe()(l),x=Qe()(r);return{width:c,height:x}}},{key:"_setEditorPosition",value:function(a){var l=this._getCanvasMaxDimension(),r=l.width,c=l.height,x=this._editorElement.style,_=0,j=0;this.submenu&&(a==="bottom"?c>this._editorElementWrap.scrollHeight-150?_=(c-this._editorElementWrap.scrollHeight)/2:_=150/2*-1:a==="top"?c>this._editorElementWrap.offsetHeight-150?_=150/2-(c-(this._editorElementWrap.offsetHeight-150))/2:_=150/2:a==="left"?r>this._editorElementWrap.offsetWidth-248?j=248/2-(r-(this._editorElementWrap.offsetWidth-248))/2:j=248/2:a==="right"&&(r>this._editorElementWrap.scrollWidth-248?j=(r-this._editorElementWrap.scrollWidth)/2:j=248/2*-1)),x.top="".concat(_,"px"),x.left="".concat(j,"px")}}]),E})();pt().mixin(Rn);var No=Rn,Ro=R(381),ni=R.n(Ro),zn=(function(){function E(){W(this,E),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return V(E,[{key:"imageToSVG",value:function(a,l,r){var c=this;r=this.checkoptions(r),this.loadImage(a,function(x){l(c.imagedataToSVG(c.getImgdata(x),r))},r)}},{key:"imagedataToSVG",value:function(a,l){l=this.checkoptions(l);var r=this.imagedataToTracedata(a,l);return this.getsvgstring(r,l)}},{key:"imageToTracedata",value:function(a,l,r){var c=this;r=this.checkoptions(r),this.loadImage(a,function(x){l(c.imagedataToTracedata(c.getImgdata(x),r))},r)}},{key:"imagedataToTracedata",value:function(a,l){l=this.checkoptions(l);var r=this.colorquantization(a,l),c;if(l.layering===0){c={layers:[],palette:r.palette,width:r.array[0].length-2,height:r.array.length-2};for(var x=0;x<r.palette.length;x+=1){var _=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(r,x),l.pathomit),l),l.ltres,l.qtres);c.layers.push(_)}}else{var j=this.layering(r);l.layercontainerid&&this.drawLayers(j,this.specpalette,l.scale,l.layercontainerid);var A=this.batchpathscan(j,l.pathomit),z=this.batchinternodes(A,l);c={layers:this.batchtracelayers(z,l.ltres,l.qtres),palette:r.palette,width:a.width,height:a.height}}return c}},{key:"checkoptions",value:function(a){a=a||{},typeof a=="string"&&(a=a.toLowerCase(),this.optionpresets[a]?a=this.optionpresets[a]:a={});for(var l=Mt()(this.optionpresets.default),r=0;r<l.length;r+=1)a.hasOwnProperty(l[r])||(a[l[r]]=this.optionpresets.default[l[r]]);return a}},{key:"colorquantization",value:function(a,l){var r=[],c=0,x,_,j,A=[],z=a.width*a.height,U,nt,st,dt,ht;for(nt=0;nt<a.height+2;nt+=1)for(r[nt]=[],U=0;U<a.width+2;U+=1)r[nt][U]=-1;for(l.pal?ht=l.pal:l.colorsampling===0?ht=this.generatepalette(l.numberofcolors):l.colorsampling===1?ht=this.samplepalette(l.numberofcolors,a):ht=this.samplepalette2(l.numberofcolors,a),l.blurradius>0&&(a=this.blur(a,l.blurradius,l.blurdelta)),dt=0;dt<l.colorquantcycles;dt+=1){if(dt>0)for(st=0;st<ht.length;st+=1)A[st].n>0&&(ht[st]={r:Math.floor(A[st].r/A[st].n),g:Math.floor(A[st].g/A[st].n),b:Math.floor(A[st].b/A[st].n),a:Math.floor(A[st].a/A[st].n)}),A[st].n/z<l.mincolorratio&&dt<l.colorquantcycles-1&&(ht[st]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(U=0;U<ht.length;U+=1)A[U]={r:0,g:0,b:0,a:0,n:0};for(nt=0;nt<a.height;nt+=1)for(U=0;U<a.width;U+=1){for(c=(nt*a.width+U)*4,j=0,_=1024,st=0;st<ht.length;st+=1)x=Math.abs(ht[st].r-a.data[c])+Math.abs(ht[st].g-a.data[c+1])+Math.abs(ht[st].b-a.data[c+2])+Math.abs(ht[st].a-a.data[c+3]),x<_&&(_=x,j=st);A[j].r+=a.data[c],A[j].g+=a.data[c+1],A[j].b+=a.data[c+2],A[j].a+=a.data[c+3],A[j].n+=1,r[nt+1][U+1]=j}}return{array:r,palette:ht}}},{key:"samplepalette",value:function(a,l){for(var r,c=[],x=0;x<a;x+=1)r=Math.floor(Math.random()*l.data.length/4)*4,c.push({r:l.data[r],g:l.data[r+1],b:l.data[r+2],a:l.data[r+3]});return c}},{key:"samplepalette2",value:function(a,l){for(var r,c=[],x=Math.ceil(Math.sqrt(a)),_=Math.ceil(a/x),j=l.width/(x+1),A=l.height/(_+1),z=0;z<_;z+=1)for(var U=0;U<x&&c.length!==a;U+=1)r=Math.floor((z+1)*A*l.width+(U+1)*j)*4,c.push({r:l.data[r],g:l.data[r+1],b:l.data[r+2],a:l.data[r+3]});return c}},{key:"generatepalette",value:function(a){var l=[],r,c,x;if(a<8)for(var _=Math.floor(255/(a-1)),j=0;j<a;j+=1)l.push({r:j*_,g:j*_,b:j*_,a:255});else{var A=Math.floor(Math.pow(a,.3333333333333333)),z=Math.floor(255/(A-1)),U=a-A*A*A;for(r=0;r<A;r+=1)for(c=0;c<A;c+=1)for(x=0;x<A;x+=1)l.push({r:r*z,g:c*z,b:x*z,a:255});for(r=0;r<U;r+=1)l.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return l}},{key:"layering",value:function(a){var l=[],r=0,c=a.array.length,x=a.array[0].length,_,j,A,z,U,nt,st,dt,ht,vt,kt;for(kt=0;kt<a.palette.length;kt+=1)for(l[kt]=[],vt=0;vt<c;vt+=1)for(l[kt][vt]=[],ht=0;ht<x;ht+=1)l[kt][vt][ht]=0;for(vt=1;vt<c-1;vt+=1)for(ht=1;ht<x-1;ht+=1)r=a.array[vt][ht],_=a.array[vt-1][ht-1]===r?1:0,j=a.array[vt-1][ht]===r?1:0,A=a.array[vt-1][ht+1]===r?1:0,z=a.array[vt][ht-1]===r?1:0,U=a.array[vt][ht+1]===r?1:0,nt=a.array[vt+1][ht-1]===r?1:0,st=a.array[vt+1][ht]===r?1:0,dt=a.array[vt+1][ht+1]===r?1:0,l[r][vt+1][ht+1]=1+U*2+dt*4+st*8,z||(l[r][vt+1][ht]=2+st*4+nt*8),j||(l[r][vt][ht+1]=0+A*2+U*4+8),_||(l[r][vt][ht]=0+j*2+4+z*8);return l}},{key:"layeringstep",value:function(a,l){var r=[],c=a.array.length,x=a.array[0].length,_,j;for(j=0;j<c;j+=1)for(r[j]=[],_=0;_<x;_+=1)r[j][_]=0;for(j=1;j<c;j+=1)for(_=1;_<x;_+=1)r[j][_]=(a.array[j-1][_-1]===l?1:0)+(a.array[j-1][_]===l?2:0)+(a.array[j][_-1]===l?8:0)+(a.array[j][_]===l?4:0);return r}},{key:"pathscan",value:function(a,l){for(var r=[],c=0,x=0,_=0,j=0,A=a[0].length,z=a.length,U=0,nt=!0,st=!1,dt,ht=0;ht<z;ht+=1)for(var vt=0;vt<A;vt+=1)if(a[ht][vt]===4||a[ht][vt]===11)for(_=vt,j=ht,r[c]={},r[c].points=[],r[c].boundingbox=[_,j,_,j],r[c].holechildren=[],nt=!1,x=0,st=a[ht][vt]===11,U=1;!nt;){if(r[c].points[x]={},r[c].points[x].x=_-1,r[c].points[x].y=j-1,r[c].points[x].t=a[j][_],_-1<r[c].boundingbox[0]&&(r[c].boundingbox[0]=_-1),_-1>r[c].boundingbox[2]&&(r[c].boundingbox[2]=_-1),j-1<r[c].boundingbox[1]&&(r[c].boundingbox[1]=j-1),j-1>r[c].boundingbox[3]&&(r[c].boundingbox[3]=j-1),dt=this.pathscan_combined_lookup[a[j][_]][U],a[j][_]=dt[0],U=dt[1],_+=dt[2],j+=dt[3],_-1===r[c].points[0].x&&j-1===r[c].points[0].y)if(nt=!0,r[c].points.length<l)r.pop();else{if(r[c].isholepath=!!st,st){for(var kt=0,$t=[-1,-1,A+1,z+1],ie=0;ie<c;ie++)!r[ie].isholepath&&this.boundingboxincludes(r[ie].boundingbox,r[c].boundingbox)&&this.boundingboxincludes($t,r[ie].boundingbox)&&(kt=ie,$t=r[ie].boundingbox);r[kt].holechildren.push(c)}c+=1}x+=1}return r}},{key:"boundingboxincludes",value:function(a,l){return a[0]<l[0]&&a[1]<l[1]&&a[2]>l[2]&&a[3]>l[3]}},{key:"batchpathscan",value:function(a,l){var r=[];for(var c in a)a.hasOwnProperty(c)&&(r[c]=this.pathscan(a[c],l));return r}},{key:"internodes",value:function(a,l){var r=[],c=0,x=0,_=0,j=0,A=0,z,U;for(z=0;z<a.length;z+=1)for(r[z]={},r[z].points=[],r[z].boundingbox=a[z].boundingbox,r[z].holechildren=a[z].holechildren,r[z].isholepath=a[z].isholepath,c=a[z].points.length,U=0;U<c;U+=1)x=(U+1)%c,_=(U+2)%c,j=(U-1+c)%c,A=(U-2+c)%c,l.rightangleenhance&&this.testrightangle(a[z],A,j,U,x,_)&&(r[z].points.length>0&&(r[z].points[r[z].points.length-1].linesegment=this.getdirection(r[z].points[r[z].points.length-1].x,r[z].points[r[z].points.length-1].y,a[z].points[U].x,a[z].points[U].y)),r[z].points.push({x:a[z].points[U].x,y:a[z].points[U].y,linesegment:this.getdirection(a[z].points[U].x,a[z].points[U].y,(a[z].points[U].x+a[z].points[x].x)/2,(a[z].points[U].y+a[z].points[x].y)/2)})),r[z].points.push({x:(a[z].points[U].x+a[z].points[x].x)/2,y:(a[z].points[U].y+a[z].points[x].y)/2,linesegment:this.getdirection((a[z].points[U].x+a[z].points[x].x)/2,(a[z].points[U].y+a[z].points[x].y)/2,(a[z].points[x].x+a[z].points[_].x)/2,(a[z].points[x].y+a[z].points[_].y)/2)});return r}},{key:"testrightangle",value:function(a,l,r,c,x,_){return a.points[c].x===a.points[l].x&&a.points[c].x===a.points[r].x&&a.points[c].y===a.points[x].y&&a.points[c].y===a.points[_].y||a.points[c].y===a.points[l].y&&a.points[c].y===a.points[r].y&&a.points[c].x===a.points[x].x&&a.points[c].x===a.points[_].x}},{key:"getdirection",value:function(a,l,r,c){var x=8;return a<r?l<c?x=1:l>c?x=7:x=0:a>r?l<c?x=3:l>c?x=5:x=4:l<c?x=2:l>c?x=6:x=8,x}},{key:"batchinternodes",value:function(a,l){var r=[];for(var c in a)a.hasOwnProperty(c)&&(r[c]=this.internodes(a[c],l));return r}},{key:"tracepath",value:function(a,l,r){var c=0,x,_,j,A={};for(A.segments=[],A.boundingbox=a.boundingbox,A.holechildren=a.holechildren,A.isholepath=a.isholepath;c<a.points.length;){var z;for(x=a.points[c].linesegment,_=-1,j=c+1;(a.points[j].linesegment===x||a.points[j].linesegment===_||_===-1)&&j<a.points.length-1;)a.points[j].linesegment!==x&&_===-1&&(_=a.points[j].linesegment),j+=1;j===a.points.length-1&&(j=0),A.segments=B()(z=A.segments).call(z,this.fitseq(a,l,r,c,j)),j>0?c=j:c=a.points.length}return A}},{key:"fitseq",value:function(a,l,r,c,x){var _;if(x>a.points.length||x<0)return[];var j=c,A=0,z=!0,U,nt,st,dt=x-c;dt<0&&(dt+=a.points.length);for(var ht=(a.points[x].x-a.points[c].x)/dt,vt=(a.points[x].y-a.points[c].y)/dt,kt=(c+1)%a.points.length,$t;kt!=x;)$t=kt-c,$t<0&&($t+=a.points.length),U=a.points[c].x+ht*$t,nt=a.points[c].y+vt*$t,st=(a.points[kt].x-U)*(a.points[kt].x-U)+(a.points[kt].y-nt)*(a.points[kt].y-nt),st>l&&(z=!1),st>A&&(j=kt,A=st),kt=(kt+1)%a.points.length;if(z)return[{type:"L",x1:a.points[c].x,y1:a.points[c].y,x2:a.points[x].x,y2:a.points[x].y}];var ie=j;z=!0,A=0;var re=(ie-c)/dt,Bt=(1-re)*(1-re),he=2*(1-re)*re,we=re*re,Pe=(Bt*a.points[c].x+we*a.points[x].x-a.points[ie].x)/-he,_e=(Bt*a.points[c].y+we*a.points[x].y-a.points[ie].y)/-he;for(kt=c+1;kt!=x;)re=(kt-c)/dt,Bt=(1-re)*(1-re),he=2*(1-re)*re,we=re*re,U=Bt*a.points[c].x+he*Pe+we*a.points[x].x,nt=Bt*a.points[c].y+he*_e+we*a.points[x].y,st=(a.points[kt].x-U)*(a.points[kt].x-U)+(a.points[kt].y-nt)*(a.points[kt].y-nt),st>r&&(z=!1),st>A&&(j=kt,A=st),kt=(kt+1)%a.points.length;if(z)return[{type:"Q",x1:a.points[c].x,y1:a.points[c].y,x2:Pe,y2:_e,x3:a.points[x].x,y3:a.points[x].y}];var He=ie;return B()(_=this.fitseq(a,l,r,c,He)).call(_,this.fitseq(a,l,r,He,x))}},{key:"batchtracepaths",value:function(a,l,r){var c=[];for(var x in a)a.hasOwnProperty(x)&&c.push(this.tracepath(a[x],l,r));return c}},{key:"batchtracelayers",value:function(a,l,r){var c=[];for(var x in a)a.hasOwnProperty(x)&&(c[x]=this.batchtracepaths(a[x],l,r));return c}},{key:"roundtodec",value:function(a,l){return Number(a.toFixed(l))}},{key:"svgpathstring",value:function(a,l,r,c){var x,_,j=a.layers[l],A=j[r],z="",U;if(c.linefilter&&A.segments.length<3)return z;if(z=B()(x="<path ".concat(c.desc?B()(_='desc="l '.concat(l," p ")).call(_,r,'" '):"")).call(x,this.tosvgcolorstr(a.palette[l],c),'d="'),c.roundcoords===-1){var nt;for(z+=B()(nt="M ".concat(A.segments[0].x1*c.scale," ")).call(nt,A.segments[0].y1*c.scale," "),U=0;U<A.segments.length;U++){var st,dt;if(z+=B()(st=B()(dt="".concat(A.segments[U].type," ")).call(dt,A.segments[U].x2*c.scale," ")).call(st,A.segments[U].y2*c.scale," "),A.segments[U].hasOwnProperty("x3")){var ht;z+=B()(ht="".concat(A.segments[U].x3*c.scale," ")).call(ht,A.segments[U].y3*c.scale," ")}}z+="Z "}else{var vt;for(z+=B()(vt="M ".concat(this.roundtodec(A.segments[0].x1*c.scale,c.roundcoords)," ")).call(vt,this.roundtodec(A.segments[0].y1*c.scale,c.roundcoords)," "),U=0;U<A.segments.length;U++){var kt,$t;if(z+=B()(kt=B()($t="".concat(A.segments[U].type," ")).call($t,this.roundtodec(A.segments[U].x2*c.scale,c.roundcoords)," ")).call(kt,this.roundtodec(A.segments[U].y2*c.scale,c.roundcoords)," "),A.segments[U].hasOwnProperty("x3")){var ie;z+=B()(ie="".concat(this.roundtodec(A.segments[U].x3*c.scale,c.roundcoords)," ")).call(ie,this.roundtodec(A.segments[U].y3*c.scale,c.roundcoords)," ")}}z+="Z "}for(var re=0;re<A.holechildren.length;re++){var Bt=j[A.holechildren[re]];if(c.roundcoords===-1){if(Bt.segments[Bt.segments.length-1].hasOwnProperty("x3")){var he;z+=B()(he="M ".concat(Bt.segments[Bt.segments.length-1].x3*c.scale," ")).call(he,Bt.segments[Bt.segments.length-1].y3*c.scale," ")}else{var we;z+=B()(we="M ".concat(Bt.segments[Bt.segments.length-1].x2*c.scale," ")).call(we,Bt.segments[Bt.segments.length-1].y2*c.scale," ")}for(U=Bt.segments.length-1;U>=0;U--){var Pe;if(z+="".concat(Bt.segments[U].type," "),Bt.segments[U].hasOwnProperty("x3")){var _e;z+=B()(_e="".concat(Bt.segments[U].x2*c.scale," ")).call(_e,Bt.segments[U].y2*c.scale," ")}z+=B()(Pe="".concat(Bt.segments[U].x1*c.scale," ")).call(Pe,Bt.segments[U].y1*c.scale," ")}}else{if(Bt.segments[Bt.segments.length-1].hasOwnProperty("x3")){var He;z+=B()(He="M ".concat(this.roundtodec(Bt.segments[Bt.segments.length-1].x3*c.scale)," ")).call(He,this.roundtodec(Bt.segments[Bt.segments.length-1].y3*c.scale)," ")}else{var qe;z+=B()(qe="M ".concat(this.roundtodec(Bt.segments[Bt.segments.length-1].x2*c.scale)," ")).call(qe,this.roundtodec(Bt.segments[Bt.segments.length-1].y2*c.scale)," ")}for(U=Bt.segments.length-1;U>=0;U--){var Le;if(z+="".concat(Bt.segments[U].type," "),Bt.segments[U].hasOwnProperty("x3")){var di;z+=B()(di="".concat(this.roundtodec(Bt.segments[U].x2*c.scale)," ")).call(di,this.roundtodec(Bt.segments[U].y2*c.scale)," ")}z+=B()(Le="".concat(this.roundtodec(Bt.segments[U].x1*c.scale)," ")).call(Le,this.roundtodec(Bt.segments[U].y1*c.scale)," ")}}z+="Z "}if(z+='" />',c.lcpr||c.qcpr){for(U=0;U<A.segments.length;U++){if(A.segments[U].hasOwnProperty("x3")&&c.qcpr){var Pi,Li,ji,Ni,Ri,zi,Fi,Bi,Hi,Ui,Yi,Wi,Gi,Xi;z+=B()(Pi=B()(Li=B()(ji='<circle cx="'.concat(A.segments[U].x2*c.scale,'" cy="')).call(ji,A.segments[U].y2*c.scale,'" r="')).call(Li,c.qcpr,'" fill="cyan" stroke-width="')).call(Pi,c.qcpr*.2,'" stroke="black" />'),z+=B()(Ni=B()(Ri=B()(zi='<circle cx="'.concat(A.segments[U].x3*c.scale,'" cy="')).call(zi,A.segments[U].y3*c.scale,'" r="')).call(Ri,c.qcpr,'" fill="white" stroke-width="')).call(Ni,c.qcpr*.2,'" stroke="black" />'),z+=B()(Fi=B()(Bi=B()(Hi=B()(Ui='<line x1="'.concat(A.segments[U].x1*c.scale,'" y1="')).call(Ui,A.segments[U].y1*c.scale,'" x2="')).call(Hi,A.segments[U].x2*c.scale,'" y2="')).call(Bi,A.segments[U].y2*c.scale,'" stroke-width="')).call(Fi,c.qcpr*.2,'" stroke="cyan" />'),z+=B()(Yi=B()(Wi=B()(Gi=B()(Xi='<line x1="'.concat(A.segments[U].x2*c.scale,'" y1="')).call(Xi,A.segments[U].y2*c.scale,'" x2="')).call(Gi,A.segments[U].x3*c.scale,'" y2="')).call(Wi,A.segments[U].y3*c.scale,'" stroke-width="')).call(Yi,c.qcpr*.2,'" stroke="cyan" />')}if(!A.segments[U].hasOwnProperty("x3")&&c.lcpr){var Zi,Vi,Ji;z+=B()(Zi=B()(Vi=B()(Ji='<circle cx="'.concat(A.segments[U].x2*c.scale,'" cy="')).call(Ji,A.segments[U].y2*c.scale,'" r="')).call(Vi,c.lcpr,'" fill="white" stroke-width="')).call(Zi,c.lcpr*.2,'" stroke="black" />')}}for(var re=0;re<A.holechildren.length;re++){var Bt=j[A.holechildren[re]];for(U=0;U<Bt.segments.length;U++){if(Bt.segments[U].hasOwnProperty("x3")&&c.qcpr){var Qi,Ue,ei,br,Ir,Mr,_r,Tr,Er,wr,Dr,Or,Ar,kr;z+=B()(Qi=B()(Ue=B()(ei='<circle cx="'.concat(Bt.segments[U].x2*c.scale,'" cy="')).call(ei,Bt.segments[U].y2*c.scale,'" r="')).call(Ue,c.qcpr,'" fill="cyan" stroke-width="')).call(Qi,c.qcpr*.2,'" stroke="black" />'),z+=B()(br=B()(Ir=B()(Mr='<circle cx="'.concat(Bt.segments[U].x3*c.scale,'" cy="')).call(Mr,Bt.segments[U].y3*c.scale,'" r="')).call(Ir,c.qcpr,'" fill="white" stroke-width="')).call(br,c.qcpr*.2,'" stroke="black" />'),z+=B()(_r=B()(Tr=B()(Er=B()(wr='<line x1="'.concat(Bt.segments[U].x1*c.scale,'" y1="')).call(wr,Bt.segments[U].y1*c.scale,'" x2="')).call(Er,Bt.segments[U].x2*c.scale,'" y2="')).call(Tr,Bt.segments[U].y2*c.scale,'" stroke-width="')).call(_r,c.qcpr*.2,'" stroke="cyan" />'),z+=B()(Dr=B()(Or=B()(Ar=B()(kr='<line x1="'.concat(Bt.segments[U].x2*c.scale,'" y1="')).call(kr,Bt.segments[U].y2*c.scale,'" x2="')).call(Ar,Bt.segments[U].x3*c.scale,'" y2="')).call(Or,Bt.segments[U].y3*c.scale,'" stroke-width="')).call(Dr,c.qcpr*.2,'" stroke="cyan" />')}if(!Bt.segments[U].hasOwnProperty("x3")&&c.lcpr){var Pr,Lr,jr;z+=B()(Pr=B()(Lr=B()(jr='<circle cx="'.concat(Bt.segments[U].x2*c.scale,'" cy="')).call(jr,Bt.segments[U].y2*c.scale,'" r="')).call(Lr,c.lcpr,'" fill="white" stroke-width="')).call(Pr,c.lcpr*.2,'" stroke="black" />')}}}}return z}},{key:"getsvgstring",value:function(a,l){var r,c,x;l=this.checkoptions(l);for(var _=a.width*l.scale,j=a.height*l.scale,A=B()(r="<svg ".concat(l.viewbox?B()(c='viewBox="0 0 '.concat(_," ")).call(c,j,'" '):B()(x='width="'.concat(_,'" height="')).call(x,j,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(r,this.versionnumber,'" >'),z=0;z<a.layers.length;z+=1)for(var U=0;U<a.layers[z].length;U+=1)a.layers[z][U].isholepath||(A+=this.svgpathstring(a,z,U,l));return A+="</svg>",A}},{key:"compareNumbers",value:function(a,l){return a-l}},{key:"torgbastr",value:function(a){var l,r,c;return B()(l=B()(r=B()(c="rgba(".concat(a.r,",")).call(c,a.g,",")).call(r,a.b,",")).call(l,a.a,")")}},{key:"tosvgcolorstr",value:function(a,l){var r,c,x,_,j,A,z;return B()(r=B()(c=B()(x=B()(_=B()(j=B()(A=B()(z='fill="rgb('.concat(a.r,",")).call(z,a.g,",")).call(A,a.b,')" stroke="rgb(')).call(j,a.r,",")).call(_,a.g,",")).call(x,a.b,')" stroke-width="')).call(c,l.strokewidth,'" opacity="')).call(r,a.a/255,'" ')}},{key:"appendSVGString",value:function(a,l){var r;l?(r=document.getElementById(l),r||(r=document.createElement("div"),r.id=l,document.body.appendChild(r))):(r=document.createElement("div"),document.body.appendChild(r)),r.innerHTML+=a}},{key:"blur",value:function(a,l,r){var c,x,_,j,A,z,U,nt,st,dt,ht={width:a.width,height:a.height,data:[]};if(l=Math.floor(l),l<1)return a;l>5&&(l=5),r=Math.abs(r),r>1024&&(r=1024);var vt=this.gks[l-1];for(x=0;x<a.height;x++)for(c=0;c<a.width;c++){for(z=0,U=0,nt=0,st=0,dt=0,_=-l;_<l+1;_++)c+_>0&&c+_<a.width&&(A=(x*a.width+c+_)*4,z+=a.data[A]*vt[_+l],U+=a.data[A+1]*vt[_+l],nt+=a.data[A+2]*vt[_+l],st+=a.data[A+3]*vt[_+l],dt+=vt[_+l]);A=(x*a.width+c)*4,ht.data[A]=Math.floor(z/dt),ht.data[A+1]=Math.floor(U/dt),ht.data[A+2]=Math.floor(nt/dt),ht.data[A+3]=Math.floor(st/dt)}var kt=new Uint8ClampedArray(ht.data);for(x=0;x<a.height;x++)for(c=0;c<a.width;c++){for(z=0,U=0,nt=0,st=0,dt=0,_=-l;_<l+1;_++)x+_>0&&x+_<a.height&&(A=((x+_)*a.width+c)*4,z+=kt[A]*vt[_+l],U+=kt[A+1]*vt[_+l],nt+=kt[A+2]*vt[_+l],st+=kt[A+3]*vt[_+l],dt+=vt[_+l]);A=(x*a.width+c)*4,ht.data[A]=Math.floor(z/dt),ht.data[A+1]=Math.floor(U/dt),ht.data[A+2]=Math.floor(nt/dt),ht.data[A+3]=Math.floor(st/dt)}for(x=0;x<a.height;x++)for(c=0;c<a.width;c++)A=(x*a.width+c)*4,j=Math.abs(ht.data[A]-a.data[A])+Math.abs(ht.data[A+1]-a.data[A+1])+Math.abs(ht.data[A+2]-a.data[A+2])+Math.abs(ht.data[A+3]-a.data[A+3]),j>r&&(ht.data[A]=a.data[A],ht.data[A+1]=a.data[A+1],ht.data[A+2]=a.data[A+2],ht.data[A+3]=a.data[A+3]);return ht}},{key:"loadImage",value:function(a,l,r){var c=new Image;r&&r.corsenabled&&(c.crossOrigin="Anonymous"),c.src=a,c.onload=function(){var x=document.createElement("canvas");x.width=c.width,x.height=c.height;var _=x.getContext("2d");_.drawImage(c,0,0),l(x)}}},{key:"getImgdata",value:function(a){var l=a.getContext("2d");return l.getImageData(0,0,a.width,a.height)}},{key:"drawLayers",value:function(a,l,r,c){r=r||1;var x,_,j,A,z,U;c?(U=document.getElementById(c),U||(U=document.createElement("div"),U.id=c,document.body.appendChild(U))):(U=document.createElement("div"),document.body.appendChild(U));for(z in a)if(a.hasOwnProperty(z)){x=a[z][0].length,_=a[z].length;var nt=document.createElement("canvas");nt.width=x*r,nt.height=_*r;var st=nt.getContext("2d");for(A=0;A<_;A+=1)for(j=0;j<x;j+=1)st.fillStyle=this.torgbastr(l[a[z][A][j]%l.length]),st.fillRect(j*r,A*r,r,r);U.appendChild(nt)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),E})(),zo={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var p=this,a=function(){p.ui.submenu==="crop"&&(p.stopDrawingMode(),p.ui.changeMenu("crop"))},l=function(z){p.ui.submenu==="rotate"&&p.ui.rotate.setRangeBarAngle("setAngle",z)},r=function(z){p.ui.submenu==="filter"&&ni()(p.ui).setFilterState(z)},c=function(z){return l(z),r(z),z},x=function(){var z=p._graphics.getZoomMode();p.stopDrawingMode(),z!==De.ZOOM?(p.startDrawingMode(ue.ZOOM),p._graphics.startZoomInMode()):p._graphics.endZoomInMode()},_=function(){var z=p._graphics.getZoomMode();p.stopDrawingMode(),z!==De.HAND?(p.startDrawingMode(ue.ZOOM),p._graphics.startHandMode()):p._graphics.endHandMode()},j=function(){ni()(p.ui)&&ni()(p.ui).initFilterCheckBoxState()};return X()({initLoadImage:function(z,U){return p.loadImageFromURL(z,U).then(function(nt){a(),p.ui.initializeImgUrl=z,p.ui.resizeEditor({imageSize:nt}),p.clearUndoStack(),p._invoker.fire(_t.EXECUTE_COMMAND,se.LOAD_IMAGE)})},undo:function(){p.isEmptyUndoStack()||(a(),p.deactivateAll(),p.undo().then(c))},redo:function(){p.isEmptyRedoStack()||(a(),p.deactivateAll(),p.redo().then(c))},reset:function(){a(),p.loadImageFromURL(p.ui.initializeImgUrl,"resetImage").then(function(z){a(),j(),p.ui.resizeEditor({imageSize:z}),p.clearUndoStack(),p._initHistory()})},delete:function(){p.ui.changeHelpButtonEnabled("delete",!1),a(),p.removeActiveObject(),p.activeObjectId=null},deleteAll:function(){a(),p.clearObjects(),p.ui.changeHelpButtonEnabled("delete",!1),p.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(z){Ee()||alert("This browser does not support file-api"),p.ui.initializeImgUrl=Q().createObjectURL(z),p.loadImageFromFile(z).then(function(U){a(),j(),p.clearUndoStack(),p.ui.activeMenuEvent(),p.ui.resizeEditor({imageSize:U}),p._clearHistory(),p._invoker.fire(_t.EXECUTE_COMMAND,se.LOAD_IMAGE)}).catch(function(U){return ct().reject(U)})},download:function(){var z=p.toDataURL(),U=p.getImageName(),nt,st,dt;Ee()&&window.saveAs?(nt=Si(z),st=nt.type.split("/")[1],U.split(".").pop()!==st&&(U+=".".concat(st)),saveAs(nt,U)):(dt=window.open(),dt.document.body.innerHTML="<img src='".concat(z,"'>"))},history:function(z){p.ui.toggleHistoryMenu(z)},zoomIn:function(){p.ui.toggleZoomButtonStatus("zoomIn"),p.deactivateAll(),x()},zoomOut:function(){p._graphics.zoomOut()},hand:function(){p.ui.offZoomInButtonStatus(),p.ui.toggleZoomButtonStatus("hand"),p.deactivateAll(),_()}},this._commonAction())},_iconAction:function(){var p=this;return X()({changeColor:function(l){p.activeObjectId&&p.changeIconColor(p.activeObjectId,l)},addIcon:function(l,r){p.startDrawingMode("ICON"),p.setDrawingIcon(l,r)},cancelAddIcon:function(){p.ui.icon.clearIconType(),p.changeSelectableAll(!0),p.changeCursor("default"),p.stopDrawingMode()},registerDefaultIcons:function(l,r){var c={};c[l]=r,p.registerIcons(c)},registerCustomIcon:function(l,r){var c=new zn;c.imageToSVG(l,function(x){var _=x.match(/path[^>]*d="([^"]*)"/),j=lt(_,2),A=j[1],z={};z[r.name]=A,p.registerIcons(z),p.addIcon(r.name,{left:100,top:100})},zn.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var p=this;return X()({setDrawMode:function(l,r){p.stopDrawingMode(),l==="free"?p.startDrawingMode("FREE_DRAWING",r):p.startDrawingMode("LINE_DRAWING",r)},setColor:function(l){p.setBrush({color:l})}},this._commonAction())},_maskAction:function(){var p=this;return X()({loadImageFromURL:function(l,r){return p.loadImageFromURL(p.toDataURL(),"FilterImage").then(function(){p.addImageObject(l).then(function(){Q().revokeObjectURL(r)}),p._invoker.fire(_t.EXECUTE_COMMAND,se.LOAD_MASK_IMAGE)})},applyFilter:function(){p.applyFilter("mask",{maskObjId:p.activeObjectId})}},this._commonAction())},_textAction:function(){var p=this;return X()({changeTextStyle:function(l,r){p.activeObjectId&&p.changeTextStyle(p.activeObjectId,l,r)}},this._commonAction())},_rotateAction:function(){var p=this;return X()({rotate:function(l,r){p.rotate(l,r),p.ui.resizeEditor(),p.ui.rotate.setRangeBarAngle("rotate",l)},setAngle:function(l,r){p.setAngle(l,r),p.ui.resizeEditor(),p.ui.rotate.setRangeBarAngle("setAngle",l)}},this._commonAction())},_shapeAction:function(){var p=this;return X()({changeShape:function(l,r){p.activeObjectId&&p.changeShape(p.activeObjectId,l,r)},setDrawingShape:function(l){p.setDrawingShape(l)}},this._commonAction())},_cropAction:function(){var p=this;return X()({crop:function(){var l=p.getCropzoneRect();l&&!Xr(l)&&p.crop(l).then(function(){p.stopDrawingMode(),p.ui.resizeEditor(),p.ui.changeMenu("crop"),p._invoker.fire(_t.EXECUTE_COMMAND,se.CROP)}).catch(function(r){return ct().reject(r)})},cancel:function(){p.stopDrawingMode(),p.ui.changeMenu("crop")},preset:function(l){switch(l){case"preset-square":p.setCropzoneRect(1/1);break;case"preset-3-2":p.setCropzoneRect(3/2);break;case"preset-4-3":p.setCropzoneRect(4/3);break;case"preset-5-4":p.setCropzoneRect(5/4);break;case"preset-7-5":p.setCropzoneRect(7/5);break;case"preset-16-9":p.setCropzoneRect(16/9);break;default:p.setCropzoneRect(),p.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var p=this;return X()({getCurrentDimensions:function(){return p._graphics.getCurrentDimensions()},preview:function(l,r,c){var x=p._graphics.getCurrentDimensions(),_=function(){return x.width/x.height},j={};switch(l){case"width":j.width=r,c?j.height=r/_():j.height=x.height;break;case"height":j.height=r,c?j.width=r*_():j.width=x.width;break;default:j=x}p._graphics.resize(j).then(function(){p.ui.resizeEditor()}),c&&(p.ui.resize.setWidthValue(j.width),p.ui.resize.setHeightValue(j.height))},lockAspectRatio:function(l,r,c){var x=p._graphics.getCurrentDimensions(),_=x.width,j=x.height,A=_/j;if(l)if(_>j){var z=c/A,U=r*A;p.ui.resize.setLimit({minWidth:U>r?U:r,minHeight:r,maxWidth:c,maxHeight:z<c?z:c})}else{var nt=c*A,st=r/A;p.ui.resize.setLimit({minWidth:r,minHeight:st>r?st:r,maxWidth:nt<c?nt:c,maxHeight:c})}else p.ui.resize.setLimit({minWidth:r,minHeight:r,maxWidth:c,maxHeight:c})},resize:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l||(l=p._graphics.getCurrentDimensions()),p.resize(l).then(function(){p._graphics.setOriginalDimensions(l),p.stopDrawingMode(),p.ui.resizeEditor(),p.ui.changeMenu("resize")}).catch(function(r){return ct().reject(r)})},reset:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=p._graphics.getOriginalDimensions();p.ui.resize.setWidthValue(r.width,!0),p.ui.resize.setHeightValue(r.height,!0),p._graphics.resize(r).then(function(){l||(p.stopDrawingMode(),p.ui.resizeEditor(),p.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var p=this;return X()({flip:function(l){return p[l]()}},this._commonAction())},_filterAction:function(){var p=this;return X()({applyFilter:function(l,r,c,x){l?p.applyFilter(r,c,x):p.hasFilter(r)&&p.removeFilter(r)}},this._commonAction())},setReAction:function(){var p=this;this.on({undoStackChanged:function(l){l?(p.ui.changeHelpButtonEnabled("undo",!0),p.ui.changeHelpButtonEnabled("reset",!0)):(p.ui.changeHelpButtonEnabled("undo",!1),p.ui.changeHelpButtonEnabled("reset",!1)),p.ui.resizeEditor()},redoStackChanged:function(l){l?p.ui.changeHelpButtonEnabled("redo",!0):p.ui.changeHelpButtonEnabled("redo",!1),p.ui.resizeEditor()},objectActivated:function(l){var r,c;p.activeObjectId=l.id,p.ui.changeHelpButtonEnabled("delete",!0),p.ui.changeHelpButtonEnabled("deleteAll",!0),l.type==="cropzone"?p.ui.crop.changeApplyButtonStatus(!0):h()(r=["rect","circle","triangle"]).call(r,l.type)>-1?(p.stopDrawingMode(),p.ui.submenu!=="shape"&&p.ui.changeMenu("shape",!1,!1),p.ui.shape.setShapeStatus({strokeColor:l.stroke,strokeWidth:l.strokeWidth,fillColor:xt()(l)}),p.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height))):l.type==="path"||l.type==="line"?p.ui.submenu!=="draw"&&(p.ui.changeMenu("draw",!1,!1),p.ui.draw.changeStandbyMode()):h()(c=["i-text","text"]).call(c,l.type)>-1?(p.ui.submenu!=="text"&&p.ui.changeMenu("text",!1,!1),p.ui.text.setTextStyleStateOnAction(l)):l.type==="icon"&&(p.stopDrawingMode(),p.ui.submenu!=="icon"&&p.ui.changeMenu("icon",!1,!1),p.ui.icon.setIconPickerColor(xt()(l)))},addText:function(l){var r=p.ui.text,c=r.textColor,x=r.fontSize,_=r.fontStyle,j=r.fontWeight,A=r.underline,z="Noto Sans";p.addText("Double Click",{position:l.originPosition,styles:{fill:c,fontSize:x,fontFamily:z,fontStyle:_,fontWeight:j,underline:A}}).then(function(){p.changeCursor("default")})},addObjectAfter:function(l){var r;l.type==="icon"?p.ui.icon.changeStandbyMode():h()(r=["rect","circle","triangle"]).call(r,l.type)>-1&&(p.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height)),p.ui.shape.changeStandbyMode())},objectScaled:function(l){var r,c;if(h()(r=["i-text","text"]).call(r,l.type)>-1)p.ui.text.fontSize=le(l.fontSize);else if(h()(c=["rect","circle","triangle"]).call(c,l.type)>=0){var x=l.width,_=l.height,j=p.ui.shape.getStrokeValue();x<j&&p.ui.shape.setStrokeValue(x),_<j&&p.ui.shape.setStrokeValue(_)}},selectionCleared:function(){p.activeObjectId=null,p.ui.submenu==="text"?p.changeCursor("text"):Mi(["draw","crop","resize"],p.ui.submenu)||p.stopDrawingMode()}})},_historyAction:function(){var p=this;return{undo:function(l){return p.undo(l)},redo:function(l){return p.redo(l)}}},_commonAction:function(){var p=this,a,l,r,c,x=ue.TEXT,_=ue.CROPPER,j=ue.SHAPE,A=ue.ZOOM,z=ue.RESIZE;return{modeChange:function(nt){switch(nt){case Ae.TEXT:p._changeActivateMode(x);break;case Ae.CROP:p.startDrawingMode(_);break;case Ae.SHAPE:p._changeActivateMode(j),p.setDrawingShape(p.ui.shape.type,p.ui.shape.options);break;case Ae.ZOOM:p.startDrawingMode(A);break;case Ae.RESIZE:p.startDrawingMode(z);break}},deactivateAll:J()(a=this.deactivateAll).call(a,this),changeSelectableAll:J()(l=this.changeSelectableAll).call(l,this),discardSelection:J()(r=this.discardSelection).call(r,this),stopDrawingMode:J()(c=this.stopDrawingMode).call(c,this)}},mixin:function(p){X()(p.prototype,this)}},Fo=R(602),Fn=R.n(Fo),Bo=R(5573),Ei=R.n(Bo),Ho=(function(){function E(p,a){W(this,E),this.name=p,this.graphics=a}return V(E,[{key:"fire",value:function(){for(var a=this.graphics,l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];return this.graphics.fire.apply(a,r)}},{key:"setCanvasImage",value:function(a,l){this.graphics.setCanvasImage(a,l)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(a,l){this.graphics.setImageProperties(a,l)}},{key:"setCanvasCssDimension",value:function(a){this.graphics.setCanvasCssDimension(a)}},{key:"setCanvasBackstoreDimension",value:function(a){this.graphics.setCanvasBackstoreDimension(a)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),E})(),Re=Ho;function Uo(E){var p=Yo();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Yo(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Wo={padding:0,crossOrigin:"Anonymous"},Go=(function(E){ge(a,E);var p=Uo(a);function a(l){return W(this,a),p.call(this,jt.IMAGE_LOADER,l)}return V(a,[{key:"load",value:function(r,c){var x=this,_;if(!r&&!c){var j=this.getCanvas();j.backgroundImage=null,j.renderAll(),_=new(ct())(function(A){x.setCanvasImage("",null),A()})}else _=this._setBackgroundImage(c).then(function(A){return x.setCanvasImage(r,A),x.adjustCanvasDimension(),A});return _}},{key:"_setBackgroundImage",value:function(r){var c=this;return r?new(ct())(function(x,_){var j=c.getCanvas();j.setBackgroundImage(r,function(){var A=j.backgroundImage;A&&A.getElement()?x(A):_(fe.loadingImageFailed)},Wo)}):ct().reject(fe.loadImage)}}]),a})(Re),Xo=Go,Zo="tl",Vo="tr",Jo="mt",Qo="ml",Ko="mr",$o="mb",qo="bl",ts="br",Bn=[Zo,Vo,Jo,Qo,Ko,$o,qo,ts],en=function(){};function es(E){return h()(Bn).call(Bn,E)>=0}function wi(E,p){return E>p?"width":"height"}var is=rt.fabric.util.createClass(rt.fabric.Rect,{initialize:function(p,a,l){a=X()(a,l),a.type="cropzone",this.callSuper("initialize",a),this._addEventHandler(),this.canvas=p,this.options=a},canvasEventDelegation:function(p){var a,l="unregistered",r=this.canvasEventTrigger[p]!==en;return r?l="registered":h()(a=[_t.OBJECT_MOVED,_t.OBJECT_SCALED]).call(a,p)<0&&(l="none"),l},canvasEventRegister:function(p,a){this.canvasEventTrigger[p]=a},_addEventHandler:function(){var p,a,l,r,c;this.canvasEventTrigger=(p={},F(p,_t.OBJECT_MOVED,en),F(p,_t.OBJECT_SCALED,en),p),this.on({moving:J()(a=this._onMoving).call(a,this),scaling:J()(l=this._onScaling).call(l,this)}),rt.fabric.util.addListener(document,"keydown",J()(r=this._onKeyDown).call(r,this)),rt.fabric.util.addListener(document,"keyup",J()(c=this._onKeyUp).call(c,this))},_renderCropzone:function(p){var a=7,l=7,r=this.flipX?-1:1,c=this.flipY?-1:1,x=r/this.scaleX,_=c/this.scaleY;p.scale(x,_),this._fillOuterRect(p,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(p),this._strokeBorder(p,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(p,"rgb(0, 0, 0)",{lineDashWidth:a}),this._strokeBorder(p,"rgb(255, 255, 255)",{lineDashWidth:a,lineDashOffset:l})),p.scale(1/x,1/_)},_render:function(p){this.callSuper("_render",p),this._renderCropzone(p)},_fillOuterRect:function(p,a){var l=this._getCoordinates(),r=l.x,c=l.y;p.save(),p.fillStyle=a,p.beginPath(),p.moveTo(r[0]-1,c[0]-1),p.lineTo(r[3]+1,c[0]-1),p.lineTo(r[3]+1,c[3]+1),p.lineTo(r[0]-1,c[3]+1),p.lineTo(r[0]-1,c[0]-1),p.closePath(),p.moveTo(r[1],c[1]),p.lineTo(r[1],c[2]),p.lineTo(r[2],c[2]),p.lineTo(r[2],c[1]),p.lineTo(r[1],c[1]),p.closePath(),xt()(p).call(p),p.restore()},_fillInnerRect:function(p){var a=this._getCoordinates(),l=a.x,r=a.y,c=this._caculateInnerPosition(l,(l[2]-l[1])/3),x=this._caculateInnerPosition(r,(r[2]-r[1])/3);p.save(),p.strokeStyle="rgba(255, 255, 255, 0.7)",p.lineWidth=this.options.lineWidth,p.beginPath(),p.moveTo(c[0],x[1]),p.lineTo(c[3],x[1]),p.moveTo(c[0],x[2]),p.lineTo(c[3],x[2]),p.moveTo(c[1],x[0]),p.lineTo(c[1],x[3]),p.moveTo(c[2],x[0]),p.lineTo(c[2],x[3]),p.stroke(),p.closePath(),p.restore()},_caculateInnerPosition:function(p,a){var l=[];return l[0]=p[1],l[1]=p[1]+a,l[2]=p[1]+a*2,l[3]=p[2],l},_getCoordinates:function(){var p,a,l=this.canvas,r=this.width,c=this.height,x=this.left,_=this.top,j=r/2,A=c/2,z=l.getHeight(),U=l.getWidth();return{x:We()(p=[-(j+x),-j,j,j+(U-x-r)]).call(p,Math.ceil),y:We()(a=[-(A+_),-A,A,A+(z-_-c)]).call(a,Math.ceil)}},_strokeBorder:function(p,a,l){var r=l.lineDashWidth,c=l.lineDashOffset,x=l.lineWidth,_=this.width/2,j=this.height/2;p.save(),p.strokeStyle=a,p.setLineDash&&p.setLineDash([r,r]),c&&(p.lineDashOffset=c),x&&(p.lineWidth=x),p.beginPath(),p.moveTo(-_,-j),p.lineTo(_,-j),p.lineTo(_,j),p.lineTo(-_,j),p.lineTo(-_,-j),p.stroke(),p.restore()},_onMoving:function(){var p=this.height,a=this.width,l=this.left,r=this.top,c=this.canvas.getWidth()-a,x=this.canvas.getHeight()-p;this.left=ne(l,0,c),this.top=ne(r,0,x),this.canvasEventTrigger[_t.OBJECT_MOVED](this)},_onScaling:function(p){var a=p.transform.corner,l=this.canvas.getPointer(p.e),r=this._calcScalingSizeFromPointer(l,a);this.scale(1).set(r),this.canvasEventTrigger[_t.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(p,a){var l=es(a);return l&&this._resizeCropZone(p,a)},adjustRatioCropzoneSize:function(p){var a=p.width,l=p.height,r=p.leftMaker,c=p.topMaker,x=p.maxWidth,_=p.maxHeight,j=p.scaleTo;if(a=x?ne(a,1,x):a,l=_?ne(l,1,_):l,!this.presetRatio)return this._withShiftKey&&(a>l?l=a:l>a&&(a=l)),{width:a,height:l,left:r(a),top:c(l)};j==="width"?l=a/this.presetRatio:a=l*this.presetRatio;var A=Math.min(x/a,_/l);if(A<=1){var z,U=We()(z=[a,l]).call(z,function(st){return st*A}),nt=lt(U,2);a=nt[0],l=nt[1]}return{width:a,height:l,left:r(a),top:c(l)}},_getCropzoneRectInfo:function(){var p=this.canvas,a=p.width,l=p.height,r=this.getBoundingRect(!1,!0),c=r.top,x=r.left,_=r.width,j=r.height;return{rectTop:c,rectLeft:x,rectWidth:_,rectHeight:j,rectRight:x+_,rectBottom:c+j,canvasWidth:a,canvasHeight:l}},_resizeCropZone:function(p,a){var l=p.x,r=p.y,c=this._getCropzoneRectInfo(),x=c.rectWidth,_=c.rectHeight,j=c.rectTop,A=c.rectLeft,z=c.rectBottom,U=c.rectRight,nt=c.canvasWidth,st=c.canvasHeight,dt={tl:{width:U-l,height:z-r,leftMaker:function(vt){return U-vt},topMaker:function(vt){return z-vt},maxWidth:U,maxHeight:z,scaleTo:wi(A-l,j-r)},tr:{width:l-A,height:z-r,leftMaker:function(){return A},topMaker:function(vt){return z-vt},maxWidth:nt-A,maxHeight:z,scaleTo:wi(l-U,j-r)},mt:{width:x,height:z-r,leftMaker:function(){return A},topMaker:function(vt){return z-vt},maxWidth:nt-A,maxHeight:z,scaleTo:"height"},ml:{width:U-l,height:_,leftMaker:function(vt){return U-vt},topMaker:function(){return j},maxWidth:U,maxHeight:st-j,scaleTo:"width"},mr:{width:l-A,height:_,leftMaker:function(){return A},topMaker:function(){return j},maxWidth:nt-A,maxHeight:st-j,scaleTo:"width"},mb:{width:x,height:r-j,leftMaker:function(){return A},topMaker:function(){return j},maxWidth:nt-A,maxHeight:st-j,scaleTo:"height"},bl:{width:U-l,height:r-j,leftMaker:function(vt){return U-vt},topMaker:function(){return j},maxWidth:U,maxHeight:st-j,scaleTo:wi(A-l,r-z)},br:{width:l-A,height:r-j,leftMaker:function(){return A},topMaker:function(){return j},maxWidth:nt-A,maxHeight:st-j,scaleTo:wi(l-U,r-z)}};return this.adjustRatioCropzoneSize(dt[a])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(p){var a=p.keyCode;a===Ce.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(p){var a=p.keyCode;a===Ce.SHIFT&&(this._withShiftKey=!1)}}),ns=is;function rs(E){var p=as();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function as(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var os=10,ss={presetRatio:null,top:-10,left:-10,height:1,width:1},ls=(function(E){ge(a,E);var p=rs(a);function a(l){var r,c,x,_,j,A;return W(this,a),A=p.call(this,jt.CROPPER,l),A._cropzone=null,A._startX=null,A._startY=null,A._withShiftKey=!1,A._listeners={keydown:J()(r=A._onKeyDown).call(r,ce(A)),keyup:J()(c=A._onKeyUp).call(c,ce(A)),mousedown:J()(x=A._onFabricMouseDown).call(x,ce(A)),mousemove:J()(_=A._onFabricMouseMove).call(_,ce(A)),mouseup:J()(j=A._onFabricMouseUp).call(j,ce(A))},A}return V(a,[{key:"start",value:function(){if(!this._cropzone){var r=this.getCanvas();r.forEachObject(function(c){c.evented=!1}),this._cropzone=new ns(r,X()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Me,this.graphics.cropSelectionStyle)),r.discardActiveObject(),r.add(this._cropzone),r.on("mouse:down",this._listeners.mousedown),r.selection=!1,r.defaultCursor="crosshair",rt.fabric.util.addListener(document,"keydown",this._listeners.keydown),rt.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var r=this.getCanvas(),c=this._cropzone;c&&(r.remove(c),r.selection=!0,r.defaultCursor="default",r.off("mouse:down",this._listeners.mousedown),r.forEachObject(function(x){x.evented=!0}),this._cropzone=null,rt.fabric.util.removeListener(document,"keydown",this._listeners.keydown),rt.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(r){this._cropzone&&this._cropzone.set({visible:r})}},{key:"_onFabricMouseDown",value:function(r){var c=this.getCanvas();if(!r.target){c.selection=!1;var x=c.getPointer(r.e);this._startX=x.x,this._startY=x.y,c.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(r){var c=this.getCanvas(),x=c.getPointer(r.e),_=x.x,j=x.y,A=this._cropzone;Math.abs(_-this._startX)+Math.abs(j-this._startY)>os&&(c.remove(A),A.set(this._calcRectDimensionFromPoint(_,j,A.presetRatio)),c.add(A),c.setActiveObject(A))}},{key:"_calcRectDimensionFromPoint",value:function(r,c){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=this.getCanvas(),j=_.getWidth(),A=_.getHeight(),z=this._startX,U=this._startY,nt=ne(r,0,z),st=ne(c,0,U),dt=ne(r,z,j)-nt,ht=ne(c,U,A)-st;return this._withShiftKey&&!x?(dt>ht?ht=dt:ht>dt&&(dt=ht),z>=r&&(nt=z-dt),U>=c&&(st=U-ht)):x&&(ht=dt/x,z>=r&&(nt=ne(z-dt,0,j)),U>=c&&(st=ne(U-ht,0,A)),st+ht>A&&(ht=A-st,dt=ht*x,z>=r&&(nt=ne(z-dt,0,j)),U>=c&&(st=ne(U-ht,0,A)))),{left:nt,top:st,width:dt,height:ht}}},{key:"_onFabricMouseUp",value:function(){var r=this._cropzone,c=this._listeners,x=this.getCanvas();x.setActiveObject(r),x.off({"mouse:move":c.mousemove,"mouse:up":c.mouseup})}},{key:"getCroppedImageData",value:function(r){var c=this.getCanvas(),x=c.contains(this._cropzone);if(!r)return null;x&&c.remove(this._cropzone);var _={imageName:this.getImageName(),url:c.toDataURL(r)};return x&&c.add(this._cropzone),_}},{key:"getCropzoneRect",value:function(){var r=this._cropzone;return r.isValid()?{left:r.left,top:r.top,width:r.width,height:r.height}:null}},{key:"setCropzoneRect",value:function(r){var c=this.getCanvas(),x=this._cropzone;c.discardActiveObject(),c.selection=!1,c.remove(x),x.set(r?this._getPresetPropertiesForCropSize(r):ss),c.add(x),c.selection=!0,r&&c.setActiveObject(x)}},{key:"_getPresetPropertiesForCropSize",value:function(r){var c,x,_=this.getCanvas(),j=_.getWidth(),A=_.getHeight(),z=j>=A?j:A,U=function(Bt,he){return Bt>he?he/Bt:1},nt=z*r,st=z,dt=U(nt,j),ht=We()(c=[nt,st]).call(c,function(re){return re*dt}),vt=lt(ht,2);nt=vt[0],st=vt[1];var kt=U(st,A),$t=We()(x=[nt,st]).call(x,function(re){return bi(re*kt)}),ie=lt($t,2);return nt=ie[0],st=ie[1],{presetRatio:r,top:(A-st)/2,left:(j-nt)/2,width:nt,height:st}}},{key:"_onKeyDown",value:function(r){r.keyCode===Ce.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(r){r.keyCode===Ce.SHIFT&&(this._withShiftKey=!1)}}]),a})(Re),cs=ls;function us(E){var p=hs();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function hs(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var fs=(function(E){ge(a,E);var p=us(a);function a(l){return W(this,a),p.call(this,jt.FLIP,l)}return V(a,[{key:"getCurrentSetting",value:function(){var r=this.getCanvasImage();return{flipX:r.flipX,flipY:r.flipY}}},{key:"set",value:function(r){var c=this.getCurrentSetting(),x=c.flipX!==r.flipX,_=c.flipY!==r.flipY;return!x&&!_?ct().reject(fe.flip):(X()(c,r),this.setImageProperties(c,!0),this._invertAngle(x,_),this._flipObjects(x,_),ct().resolve({flipX:c.flipX,flipY:c.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(r,c){var x=this.getCanvasImage(),_=x.angle;r&&(_*=-1),c&&(_*=-1),x.rotate(Qe()(_)).setCoords()}},{key:"_flipObjects",value:function(r,c){var x=this.getCanvas();r&&x.forEachObject(function(_){_.set({angle:Qe()(_.angle*-1),flipX:!_.flipX,left:x.width-_.left}).setCoords()}),c&&x.forEachObject(function(_){_.set({angle:Qe()(_.angle*-1),flipY:!_.flipY,top:x.height-_.top}).setCoords()}),x.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var r=this.getCurrentSetting();return this.set({flipX:!r.flipX,flipY:r.flipY})}},{key:"flipY",value:function(){var r=this.getCurrentSetting();return this.set({flipX:r.flipX,flipY:!r.flipY})}}]),a})(Re),ds=fs;function gs(E){var p=vs();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function vs(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var ps=(function(E){ge(a,E);var p=gs(a);function a(l){return W(this,a),p.call(this,jt.ROTATION,l)}return V(a,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(r){var c=this.getCurrentAngle()%360;r%=360;var x=this.getCanvasImage(),_=x.getCenterPoint();x.set({angle:r}).setCoords(),this.adjustCanvasDimension();var j=x.getCenterPoint();return this._rotateForEachObject(_,j,r-c),ct().resolve(r)}},{key:"_rotateForEachObject",value:function(r,c,x){var _=this.getCanvas(),j={x:r.x-c.x,y:r.y-c.y};_.forEachObject(function(A){var z=A.getCenterPoint(),U=rt.fabric.util.degreesToRadians(x),nt=rt.fabric.util.rotatePoint(z,r,U);A.set({left:nt.x-j.x,top:nt.y-j.y,angle:(A.angle+x)%360}),A.setCoords()}),_.renderAll()}},{key:"rotate",value:function(r){var c=this.getCurrentAngle();return this.setAngle(c+r)}}]),a})(Re),ms=ps;function ys(E){var p=Cs();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Cs(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var xs=(function(E){ge(a,E);var p=ys(a);function a(l){var r;return W(this,a),r=p.call(this,jt.FREE_DRAWING,l),r.width=12,r.oColor=new rt.fabric.Color("rgba(0, 0, 0, 0.5)"),r}return V(a,[{key:"start",value:function(r){var c=this.getCanvas();c.isDrawingMode=!0,this.setBrush(r)}},{key:"setBrush",value:function(r){var c=this.getCanvas().freeDrawingBrush;r=r||{},this.width=r.width||this.width,r.color&&(this.oColor=new rt.fabric.Color(r.color)),c.width=this.width,c.color=this.oColor.toRgba()}},{key:"end",value:function(){var r=this.getCanvas();r.isDrawingMode=!1}}]),a})(Re),Ss=xs,Hn=30,bs=2.7,Is=1.7,Un=180,Ms=rt.fabric.util.createClass(rt.fabric.Line,{type:"line",initialize:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",p,a),this.arrowType=a.arrowType},_render:function(p){var a=this.calcLinePoints(),l=a.x1,r=a.y1,c=a.x2,x=a.y2,_={fromX:l,fromY:r,toX:c,toY:x};this.ctx=p,p.lineWidth=this.strokeWidth,this._renderBasicLinePath(_),this._drawDecoratorPath(_),this._renderStroke(p)},_renderBasicLinePath:function(p){var a=p.fromX,l=p.fromY,r=p.toX,c=p.toY;this.ctx.beginPath(),this.ctx.moveTo(a,l),this.ctx.lineTo(r,c)},_drawDecoratorPath:function(p){this._drawDecoratorPathType("head",p),this._drawDecoratorPathType("tail",p)},_drawDecoratorPathType:function(p,a){switch(this.arrowType[p]){case"triangle":this._drawTrianglePath(p,a);break;case"chevron":this._drawChevronPath(p,a);break}},_drawTrianglePath:function(p,a){var l=this.ctx.lineWidth*Is;this._drawChevronPath(p,a,l),this.ctx.closePath()},_drawChevronPath:function(p,a,l){var r=this,c=a.fromX,x=a.fromY,_=a.toX,j=a.toY,A=this.ctx;l||(l=this.ctx.lineWidth*bs);var z=p==="head"?[c,x]:[_,j],U=lt(z,2),nt=U[0],st=U[1],dt=p==="head"?[_,j]:[c,x],ht=lt(dt,2),vt=ht[0],kt=ht[1],$t=Math.atan2(kt-st,vt-nt)*Un/Math.PI,ie=function(Bt){return r.getRotatePosition(l,Bt,{x:nt,y:st})};A.moveTo.apply(A,N(ie($t+Hn))),A.lineTo(nt,st),A.lineTo.apply(A,N(ie($t-Hn)))},getRotatePosition:function(p,a,l){var r=a*Math.PI/Un,c=l.x,x=l.y;return[p*Math.cos(r)+c,p*Math.sin(r)+x]}}),_s=Ms;function Ts(E){var p=Es();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Es(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var ws=(function(E){ge(a,E);var p=Ts(a);function a(l){var r,c,x,_;return W(this,a),_=p.call(this,jt.LINE,l),_._width=12,_._oColor=new rt.fabric.Color("rgba(0, 0, 0, 0.5)"),_._listeners={mousedown:J()(r=_._onFabricMouseDown).call(r,ce(_)),mousemove:J()(c=_._onFabricMouseMove).call(c,ce(_)),mouseup:J()(x=_._onFabricMouseUp).call(x,ce(_))},_}return V(a,[{key:"setHeadOption",value:function(r){var c=r.arrowType,x=c===void 0?{head:null,tail:null}:c;this._arrowType=x}},{key:"start",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=this.getCanvas();c.defaultCursor="crosshair",c.selection=!1,this.setHeadOption(r),this.setBrush(r),c.forEachObject(function(x){x.set({evented:!1})}),c.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(r){var c=this.getCanvas().freeDrawingBrush;r=r||{},this._width=r.width||this._width,r.color&&(this._oColor=new rt.fabric.Color(r.color)),c.width=this._width,c.color=this._oColor.toRgba()}},{key:"end",value:function(){var r=this.getCanvas();r.defaultCursor="default",r.selection=!0,r.forEachObject(function(c){c.set({evented:!0})}),r.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(r){var c=this.getCanvas(),x=c.getPointer(r.e),_=x.x,j=x.y,A=[_,j,_,j];this._line=new _s(A,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Fe.SELECTION_STYLE),c.add(this._line),c.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(_t.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(r){var c=this.getCanvas(),x=c.getPointer(r.e);this._line.set({x2:x.x,y2:x.y}),this._line.setCoords(),c.renderAll()}},{key:"_onFabricMouseUp",value:function(){var r=this.getCanvas();this.fire(_t.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,r.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var r=this.graphics.createObjectProperties(this._line),c=this._line,x=c.x1,_=c.x2,j=c.y1,A=c.y2;return X()({},r,{startPosition:{x,y:j},endPosition:{x:_,y:A}})}}]),a})(Re),Ds=ws;function Os(E){var p=As();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function As(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var ks={fill:"#000000",left:0,top:0},Ps={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Ls=500,js=(function(E){ge(a,E);var p=Os(a);function a(l){var r,c,x,_,j,A;return W(this,a),A=p.call(this,jt.TEXT,l),A._defaultStyles=ks,A._isSelected=!1,A._selectedObj={},A._editingObj={},A._listeners={mousedown:J()(r=A._onFabricMouseDown).call(r,ce(A)),select:J()(c=A._onFabricSelect).call(c,ce(A)),selectClear:J()(x=A._onFabricSelectClear).call(x,ce(A)),scaling:J()(_=A._onFabricScaling).call(_,ce(A)),textChanged:J()(j=A._onFabricTextChanged).call(j,ce(A))},A._textarea=null,A._ratio=1,A._lastClickTime=new Date().getTime(),A._editingObjInfos={},A.isPrevEditing=!1,A}return V(a,[{key:"start",value:function(){var r=this,c=this.getCanvas();c.selection=!1,c.defaultCursor="text",c.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),c.forEachObject(function(x){x.type==="i-text"&&r.adjustOriginPosition(x,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var r=this,c=this.getCanvas();c.selection=!0,c.defaultCursor="default",c.forEachObject(function(x){x.type==="i-text"&&(x.text===""?c.remove(x):r.adjustOriginPosition(x,"end"))}),c.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(r,c){var x="center",_="center";c==="start"&&(x="left",_="top");var j=r.getPointByOrigin(x,_),A=j.x,z=j.y;r.set({left:A,top:z,originX:x,originY:_}),r.setCoords()}},{key:"add",value:function(r,c){var x=this;return new(ct())(function(_){var j,A=x.getCanvas(),z=null,U=Fe.SELECTION_STYLE,nt=x._defaultStyles;x._setInitPos(c.position),c.styles&&(nt=X()(nt,c.styles)),Dn()(c.autofocus)||(c.autofocus=!0),z=new rt.fabric.IText(r,nt),U=X()({},U,{originX:"left",originY:"top"}),z.set(U),z.on({mouseup:J()(j=x._onFabricMouseUp).call(j,x)}),A.add(z),c.autofocus&&(z.enterEditing(),z.selectAll()),A.getActiveObject()||A.setActiveObject(z),x.isPrevEditing=!0,_(x.graphics.createObjectProperties(z))})}},{key:"change",value:function(r,c){var x=this;return new(ct())(function(_){r.set("text",c),x.getCanvas().renderAll(),_()})}},{key:"setStyle",value:function(r,c){var x=this;return new(ct())(function(_){Z()(c,function(j,A){r[A]===j&&A!=="fontSize"&&(c[A]=Ps[A]||"")},x),"textDecoration"in c&&X()(c,x._getTextDecorationAdaptObject(c.textDecoration)),r.set(c),x.getCanvas().renderAll(),_()})}},{key:"getText",value:function(r){return r.text}},{key:"setSelectedInfo",value:function(r,c){this._selectedObj=r,this._isSelected=c}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var r=this.getCanvasElement(),c=yt()(r.style.maxWidth,10),x=r.width;this._ratio=x/c}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(r){return{underline:r==="underline",linethrough:r==="line-through",overline:r==="overline"}}},{key:"_setInitPos",value:function(r){r=r||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=r.x,this._defaultStyles.top=r.y}},{key:"_onInput",value:function(){var r=this.getCanvasRatio(),c=this._editingObj,x=this._textarea.style;x.width="".concat(Math.ceil(c.width/r),"px"),x.height="".concat(Math.ceil(c.height/r),"px")}},{key:"_onKeyDown",value:function(){var r=this,c=this.getCanvasRatio(),x=this._editingObj,_=this._textarea.style;t()(function(){x.text(r._textarea.value),_.width="".concat(Math.ceil(x.width/c),"px"),_.height="".concat(Math.ceil(x.height/c),"px")},0)}},{key:"_onBlur",value:function(){var r=this.getCanvasRatio(),c=this._editingObj,x=this._editingObjInfos,_=this._textarea.value,j=c.width/r-x.width/r,A=c.height/r-x.height/r;if(r===1&&(j/=2,A/=2),this._textarea.style.display="none",c.set({left:x.left+j,top:x.top+A}),_.length){this.getCanvas().add(c);var z={id:Lt(c),type:c.type,text:_};this.fire(_t.TEXT_CHANGED,z)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(r){var c=r.target;c.fontSize=c.fontSize*c.scaleY,c.scaleX=1,c.scaleY=1}},{key:"_onFabricTextChanged",value:function(r){this.fire(_t.TEXT_CHANGED,r.target)}},{key:"_onFabricSelectClear",value:function(r){var c=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(r.target,!1),c&&c.text===""&&this.getCanvas().remove(c)}},{key:"_onFabricSelect",value:function(r){this.isPrevEditing=!0,this.setSelectedInfo(r.target,!0)}},{key:"_onFabricMouseDown",value:function(r){var c=r.target;if(!(c&&!c.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(r)}}},{key:"_fireAddText",value:function(r){var c=r.target,x=r.e||{},_=this.getCanvas().getPointer(x);c||this.fire(_t.ADD_TEXT,{originPosition:{x:_.x,y:_.y},clientPosition:{x:x.clientX||0,y:x.clientY||0}})}},{key:"_onFabricMouseUp",value:function(r){var c=r.target,x=new Date().getTime();this._isDoubleClick(x)&&!c.isEditing&&c.enterEditing(),c.isEditing&&this.fire(_t.TEXT_EDITING),this._lastClickTime=x}},{key:"_isDoubleClick",value:function(r){return r-this._lastClickTime<Ls}}]),a})(Re),Ns=js;function Rs(E){var p=zs();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function zs(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Fs={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Bs=(function(E){ge(a,E);var p=Rs(a);function a(l){var r,c,x,_;return W(this,a),_=p.call(this,jt.ICON,l),_._oColor="#000000",_._pathMap=Fs,_._type=null,_._iconColor=null,_._handlers={mousedown:J()(r=_._onFabricMouseDown).call(r,ce(_)),mousemove:J()(c=_._onFabricMouseMove).call(c,ce(_)),mouseup:J()(x=_._onFabricMouseUp).call(x,ce(_))},_}return V(a,[{key:"setStates",value:function(r,c){this._type=r,this._iconColor=c}},{key:"start",value:function(){var r=this.getCanvas();r.selection=!1,r.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var r=this.getCanvas();r.selection=!0,r.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(r,c){var x=this;return new(ct())(function(_,j){var A=x.getCanvas(),z=x._pathMap[r],U=Fe.SELECTION_STYLE,nt=z?x._createIcon(z):null;x._icon=nt,nt||j(fe.invalidParameters),nt.set(X()({type:"icon",fill:x._oColor},U,c,x.graphics.controlStyle)),A.add(nt).setActiveObject(nt),_(x.graphics.createObjectProperties(nt))})}},{key:"registerPaths",value:function(r){var c=this;Z()(r,function(x,_){c._pathMap[_]=x},this)}},{key:"setColor",value:function(r,c){this._oColor=r,c&&c.get("type")==="icon"&&(c.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(r){return xt()(r)}},{key:"_createIcon",value:function(r){return new rt.fabric.Path(r)}},{key:"_onFabricMouseDown",value:function(r){var c=this,x=this.getCanvas();this._startPoint=x.getPointer(r.e);var _=this._startPoint,j=_.x,A=_.y;this.add(this._type,{left:j,top:A,fill:this._iconColor}).then(function(){c.fire(_t.ADD_OBJECT,c.graphics.createObjectProperties(c._icon)),x.on("mouse:move",c._handlers.mousemove),x.on("mouse:up",c._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(r){var c=this.getCanvas();if(this._icon){var x=c.getPointer(r.e),_=(x.x-this._startPoint.x)/this._icon.width,j=(x.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(_*2),scaleY:Math.abs(j*2)}),this._icon.setCoords(),c.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var r=this.getCanvas();this.fire(_t.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,r.off("mouse:down",this._handlers.mousedown),r.off("mouse:move",this._handlers.mousemove),r.off("mouse:up",this._handlers.mouseup)}}]),a})(Re),Hs=Bs,Us=rt.fabric.util.createClass(rt.fabric.Image.filters.BlendImage,{applyTo:function(p){if(this.mask){var a=p.canvasEl,l=a.width,r=a.height,c=this._createCanvasOfMask(l,r),x=a.getContext("2d"),_=c.getContext("2d"),j=x.getImageData(0,0,l,r);this._drawMask(_,a,x),this._mapData(_,j,l,r),p.imageData=j}},_createCanvasOfMask:function(p,a){var l=rt.fabric.util.createCanvasElement();return l.width=p,l.height=a,l},_drawMask:function(p){var a=this.mask,l=a.getElement(),r=a.angle,c=a.left,x=a.scaleX,_=a.scaleY,j=a.top;p.save(),p.translate(c,j),p.rotate(r*Math.PI/180),p.scale(x,_),p.drawImage(l,-l.width/2,-l.height/2),p.restore()},_mapData:function(p,a,l,r){for(var c=a.data,x=a.height,_=a.width,j=c,A=_*x*4,z=p.getImageData(0,0,l,r).data,U=0;U<A;U+=4)j[U+3]=z[U]}}),Ys=Us,Ws=rt.fabric.util.createClass(rt.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Gs=Ws,Xs=rt.fabric.util.createClass(rt.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Zs=Xs,Vs=rt.fabric.util.createClass(rt.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(p){p||(p={}),this.color=p.color||"#FFFFFF",this.threshold=p.threshold||45,this.x=p.x||null,this.y=p.y||null},applyTo:function(p){var a=p.canvasEl,l=a.getContext("2d"),r=l.getImageData(0,0,a.width,a.height),c=r.data,x=this.threshold,_=rt.fabric.Color.sourceFromHex(this.color),j,A;for(this.x&&this.y&&(_=this._getColor(r,this.x,this.y)),j=0,A=c.length;j<A;j+=4)this._isOutsideThreshold(c[j],_[0],x)||this._isOutsideThreshold(c[j+1],_[1],x)||this._isOutsideThreshold(c[j+2],_[2],x)||(c[j]=c[j+1]=c[j+2]=c[j+3]=0);l.putImageData(r,0,0)},_isOutsideThreshold:function(p,a,l){var r=p-a;return Math.abs(r)>l},_getColor:function(p,a,l){var r=[0,0,0,0],c=p.data,x=p.width,_=4,j=(x*l+a)*_;return r[0]=c[j],r[1]=c[j+1],r[2]=c[j+2],r[3]=c[j+3],r}}),Js=Vs;function Qs(E){var p=Ks();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Ks(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Di=rt.fabric.Image.filters;Di.Mask=Ys,Di.Sharpen=Gs,Di.Emboss=Zs,Di.ColorFilter=Js;var $s=(function(E){ge(a,E);var p=Qs(a);function a(l){return W(this,a),p.call(this,jt.FILTER,l)}return V(a,[{key:"add",value:function(r,c){var x=this;return new(ct())(function(_,j){var A=x._getSourceImage(),z=x.getCanvas(),U=x._getFilter(A,r);U||(U=x._createFilter(A,r,c)),U||j(fe.invalidParameters),x._changeFilterValues(U,c),x._apply(A,function(){z.renderAll(),_({type:r,action:"add",options:c})})})}},{key:"remove",value:function(r){var c=this;return new(ct())(function(x,_){var j=c._getSourceImage(),A=c.getCanvas(),z=c.getOptions(r);j.filters.length||_(fe.unsupportedOperation),c._removeFilter(j,r),c._apply(j,function(){A.renderAll(),x({type:r,action:"remove",options:z})})})}},{key:"hasFilter",value:function(r){return!!this._getFilter(this._getSourceImage(),r)}},{key:"getOptions",value:function(r){var c=this._getSourceImage(),x=this._getFilter(c,r);return x?X()({},x.options):null}},{key:"_changeFilterValues",value:function(r,c){Z()(c,function(x,_){Y()(r[_])||(r[_]=x)}),Z()(r.options,function(x,_){Y()(c[_])||(r.options[_]=c[_])})}},{key:"_apply",value:function(r,c){r.filters.push();var x=r.applyFilters();x&&c()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(r,c,x){var _,j=this._getFabricFilterType(c),A=rt.fabric.Image.filters[j];return A&&(_=new A(x),_.options=x,r.filters.push(_)),_}},{key:"_getFilter",value:function(r,c){var x=null;if(r){var _=this._getFabricFilterType(c),j=r.filters.length,A,z;for(z=0;z<j;z+=1)if(A=r.filters[z],A.type===_){x=A;break}}return x}},{key:"_removeFilter",value:function(r,c){var x,_=this._getFabricFilterType(c);r.filters=ni()(x=r.filters).call(x,function(j){return j.type!==_})}},{key:"_getFabricFilterType",value:function(r){return r.charAt(0).toUpperCase()+g()(r).call(r,1)}}]),a})(Re),qs=$s,tl=R(1801),Je=R.n(tl),Yn={pixelate:"blocksize",blur:"blur"},nn={x:"width",y:"height"},el=Br(Yn),fi=null;function Oi(E){var p=li(E,"patternSourceCanvas"),a=p.patternSourceCanvas,l=a.getObjects(),r=lt(l,1),c=r[0];return c}function il(E){var p=E.angle,a=E.flipX,l=E.flipY,r=Oi(E),c=gl(E),x=c.right,_=c.bottom,j=c.width,A=c.height,z=(j-E.width)/2,U=(A-E.height)/2,nt=E.left-E.width/2-z,st=E.top-E.height/2-U,dt=j/2-z,ht=A/2-U,vt=Math.max(j,A)+Math.max(z,U),kt=nl({shapeObj:E,left:dt,top:ht,width:j,height:A,cropX:nt,cropY:st,flipX:a,flipY:l,right:x,bottom:_}),$t=lt(kt,4);dt=$t[0],ht=$t[1],j=$t[2],A=$t[3],r.set({angle:a===l?-p:p,left:dt,top:ht,width:j,height:A,cropX:nt,cropY:st,flipX:a,flipY:l}),Ki(r,{fillImageMaxSize:vt})}function rn(E){var p;return We()(p=E.filters).call(p,function(a){var l=Mt()(a),r=lt(l,1),c=r[0];return F({},el[c],a[c])})}function nl(E){var p=E.shapeObj,a=E.left,l=E.top,r=E.width,c=E.height,x=E.cropX,_=E.cropY,j=E.flipX,A=E.flipY,z=E.right,U=E.bottom,nt=function(re,Bt,he,we){return ll({type:re,outDistance:Bt,shapeObj:p,flipX:j,flipY:A,left:he,top:we})},st=r,dt=c,ht=al(nt,{left:a,top:l,width:r,height:c,cropX:x,cropY:_}),vt=lt(ht,4);a=vt[0],l=vt[1],r=vt[2],c=vt[3];var kt=rl(nt,{left:a,top:l,insideCanvasRealImageWidth:r,insideCanvasRealImageHeight:c,right:z,bottom:U,cropX:x,cropY:_,originalWidth:st,originalHeight:dt}),$t=lt(kt,4);return a=$t[0],l=$t[1],r=$t[2],c=$t[3],[a,l,r,c]}function rl(E,p){var a=p.left,l=p.top,r=p.insideCanvasRealImageWidth,c=p.insideCanvasRealImageHeight,x=p.right,_=p.bottom,j=p.cropX,A=p.cropY,z=p.originalWidth,U=p.originalHeight,nt=r,st=c,dt=fi,ht=dt.width,vt=dt.height;x>ht&&j>0&&(nt=z-Math.abs(x-ht)),_>vt&&A>0&&(st=U-Math.abs(_-vt));var kt={x:(r-nt)/2,y:(c-st)/2};return Z()(["x","y"],function($t){var ie=kt[$t];if(ie>0){var re=E($t,ie,a,l),Bt=lt(re,2);a=Bt[0],l=Bt[1]}}),[a,l,nt,st]}function al(E,p){var a=p.left,l=p.top,r=p.width,c=p.height,x=p.cropX,_=p.cropY,j={width:r,height:c};return Z()(["x","y"],function(A){var z=A==="x"?x:_,U=j[nn[A]],nt=fi[nn[A]];if(U>nt){var st=(U-nt)/2;j[nn[A]]=nt;var dt=E(A,st,a,l),ht=lt(dt,2);a=ht[0],l=ht[1]}if(z<0){var vt=E(A,z,a,l),kt=lt(vt,2);a=kt[0],l=kt[1]}}),[a,l,j.width,j.height]}function Wn(E,p,a){var l=Gn(E),r=Zn(l,E.angle,p);a.add(r);var c={fill:new rt.fabric.Pattern({source:a.getElement(),repeat:"no-repeat"})};return Ki(c,{patternSourceCanvas:a}),c}function ol(E){var p=E.getObjects(),a=lt(p,1),l=a[0],r=li(l,"fillImageMaxSize"),c=r.fillImageMaxSize;c=Math.max(1,c),E.setDimensions({width:c,height:c}),E.renderAll()}function sl(E,p){var a=li(E,"patternSourceCanvas"),l=a.patternSourceCanvas,r=l.getObjects(),c=lt(r,1),x=c[0],_=rn(x);l.remove(x);var j=Gn(p,!0),A=Zn(j,p.angle,_);l.add(A)}function Gn(E){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!fi||p)&&(fi=E.toCanvasElement()),fi}function ll(E){var p=E.type,a=E.shapeObj,l=E.outDistance,r=E.left,c=E.top,x=E.flipX,_=E.flipY,j=Xn(a),A=[[1,2],[0,3],[0,3],[1,2]],z=ul(p,j,A),U=hl(p,j,z),nt=z.startPointIndex,st=cl({outDistance:l,startPointIndex:nt,flipX:x,flipY:_,reatAngles:U});return[r+st.left,c+st.top]}function cl(E){var p=E.outDistance,a=E.startPointIndex,l=E.flipX,r=E.flipY,c=E.reatAngles,x=p*Math.cos(c[0]*Math.PI/180),_=p*Math.cos(c[1]*Math.PI/180),j=a===2||a===3,A={top:j?x:_,left:j?_:x};return fl(a,l,r)&&(A.left=A.left*-1),dl(a,l,r)&&(A.top=A.top*-1),A}function ul(E,p,a){var l=0,r=0;Z()(p,function(j,A){j[E]<l&&(l=j[E],r=A)});var c=lt(a[r],2),x=c[0],_=c[1];return{startPointIndex:r,endPointIndex1:x,endPointIndex2:_}}function hl(E,p,a){var l,r=a.startPointIndex,c=a.endPointIndex1,x=a.endPointIndex2,_=E==="x"?180:270;return We()(l=[c,x]).call(l,function(j){var A=p[r],z=p[j],U=A.y-z.y,nt=A.x-z.x;return Math.atan2(U,nt)*180/Math.PI-_})}function fl(E,p,a){return(!p&&a||!p&&!a)&&E===0||(p&&a||p&&!a)&&E===1||(!p&&!a||!p&&a)&&E===2||(p&&!a||p&&a)&&E===3}function dl(E,p,a){return(p&&!a||!p&&!a)&&E===0||(!p&&!a||p&&!a)&&E===1||(p&&a||!p&&a)&&E===2||(!p&&a||p&&a)&&E===3}function Xn(E){return[E.getPointByOrigin("left","top"),E.getPointByOrigin("right","top"),E.getPointByOrigin("left","bottom"),E.getPointByOrigin("right","bottom")]}function gl(E){var p=Xn(E),a=lt(p,4),l=a[0],r=l.x,c=l.y,x=a[1],_=x.x,j=x.y,A=a[2],z=A.x,U=A.y,nt=a[3],st=nt.x,dt=nt.y,ht=Math.min(r,_,z,st),vt=Math.min(c,j,U,dt),kt=Math.max(r,_,z,st),$t=Math.max(c,j,U,dt);return{left:ht,top:vt,right:kt,bottom:$t,width:kt-ht,height:$t-vt}}function Zn(E,p,a){var l,r=new rt.fabric.Image(E);return Z()(X().apply(void 0,B()(l=[{}]).call(l,N(a))),function(c,x){var _=Hr(x),j=new rt.fabric.Image.filters[_](F({},Yn[x],c));r.filters.push(j)}),r.applyFilters(),Ki(r,{originalAngle:p,fillImageMaxSize:Math.max(r.width,r.height)}),Je().adjustOriginToCenter(r),r}function vl(E){var p=pl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function pl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Vn=X()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},Se),ml="rect",yl=20,Cl=20;function Jn(E,p,a){var l=xt()(E),r=pn(xt()(E)),c=l;l.color&&(c=l.color);var x=null;if(r==="filter"){var _=a();x=Wn(p,ni()(l),_)}else x={fill:c};return X()({},E,x)}var xl=(function(E){ge(a,E);var p=vl(a);function a(l){var r,c,x,_,j,A;return W(this,a),A=p.call(this,jt.SHAPE,l),A._shapeObj=null,A._type=ml,A._options=X()({},Vn),A._isSelected=!1,A._startPoint={},A._withShiftKey=!1,A._handlers={mousedown:J()(r=A._onFabricMouseDown).call(r,ce(A)),mousemove:J()(c=A._onFabricMouseMove).call(c,ce(A)),mouseup:J()(x=A._onFabricMouseUp).call(x,ce(A)),keydown:J()(_=A._onKeyDown).call(_,ce(A)),keyup:J()(j=A._onKeyUp).call(j,ce(A))},A}return V(a,[{key:"start",value:function(){var r=this.getCanvas();this._isSelected=!1,r.defaultCursor="crosshair",r.selection=!1,r.uniformScaling=!0,r.on({"mouse:down":this._handlers.mousedown}),rt.fabric.util.addListener(document,"keydown",this._handlers.keydown),rt.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var r=this.getCanvas();this._isSelected=!1,r.defaultCursor="default",r.selection=!0,r.uniformScaling=!1,r.off({"mouse:down":this._handlers.mousedown}),rt.fabric.util.removeListener(document,"keydown",this._handlers.keydown),rt.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(r,c){this._type=r,c&&(this._options=X()(this._options,c))}},{key:"add",value:function(r,c){var x=this;return new(ct())(function(_){var j=x.getCanvas(),A=x._extendOptions(c),z=x._createInstance(r,A),U=x.graphics.createObjectProperties(z);x._bindEventOnShape(z),j.add(z).setActiveObject(z),x._resetPositionFillFilter(z),_(U)})}},{key:"change",value:function(r,c){var x=this;return new(ct())(function(_,j){mn(r)||j(fe.unsupportedType);var A=pn(xt()(c))==="filter",z=x.graphics,U=z.canvasImage,nt=z.createStaticCanvas;r.set(A?Jn(c,U,nt):c),A&&x._resetPositionFillFilter(r),x.getCanvas().renderAll(),_()})}},{key:"makeFillPropertyForUserEvent",value:function(r){var c=$i(r),x={};if(c===Et.FILTER){var _=Oi(r),j=rn(_);x.type=c,x.filter=j}else x.type=Et.COLOR,x.color=xt()(r)||"transparent";return x}},{key:"processForCopiedObject",value:function(r,c){if(this._bindEventOnShape(r),$i(r)==="filter"){var x=Oi(c),_=rn(x),j=this.graphics.createStaticCanvas();r.set(Wn(this.graphics.canvasImage,_,j)),this._resetPositionFillFilter(r)}}},{key:"_createInstance",value:function(r,c){var x;switch(r){case"rect":x=new rt.fabric.Rect(c);break;case"circle":x=new rt.fabric.Ellipse(X()({type:"circle"},c));break;case"triangle":x=new rt.fabric.Triangle(c);break;default:x={}}return x}},{key:"_extendOptions",value:function(r){var c=Fe.SELECTION_STYLE,x=this.graphics,_=x.canvasImage,j=x.createStaticCanvas;return r=X()({},Vn,this._options,c,r),Jn(r,_,j)}},{key:"_bindEventOnShape",value:function(r){var c=this,x=this.getCanvas();r.on({added:function(){c._shapeObj=this,Je().setOrigins(c._shapeObj)},selected:function(){c._isSelected=!0,c._shapeObj=this,x.uniformScaling=!0,x.defaultCursor="default",Je().setOrigins(c._shapeObj)},deselected:function(){c._isSelected=!1,c._shapeObj=null,x.defaultCursor="crosshair",x.uniformScaling=!1},modified:function(){var j=c._shapeObj;Je().adjustOriginToCenter(j),Je().setOrigins(j)},modifiedInGroup:function(j){c._fillFilterRePositionInGroupSelection(r,j)},moving:function(){c._resetPositionFillFilter(this)},rotating:function(){c._resetPositionFillFilter(this)},scaling:function(j){var A=x.getPointer(j.e),z=c._shapeObj;x.setCursor("crosshair"),Je().resize(z,A,!0),c._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(r){if(r.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var c=this.getCanvas();this._startPoint=c.getPointer(r.e),c.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(r){var c=this,x=this.getCanvas(),_=x.getPointer(r.e),j=this._startPoint.x,A=this._startPoint.y,z=j-_.x,U=A-_.y,nt=this._shapeObj;nt?(this._shapeObj.set({isRegular:this._withShiftKey}),Je().resize(nt,_),x.renderAll(),this._resetPositionFillFilter(nt)):this.add(this._type,{left:j,top:A,width:z,height:U}).then(function(st){c.fire(_t.ADD_OBJECT,st)})}},{key:"_onFabricMouseUp",value:function(){var r=this,c=this.getCanvas(),x=this._startPoint.x,_=this._startPoint.y,j=this._shapeObj;j?j&&(Je().adjustOriginToCenter(j),this.fire(_t.OBJECT_ADDED,this.graphics.createObjectProperties(j))):this.add(this._type,{left:x,top:_,width:yl,height:Cl}).then(function(A){r.fire(_t.ADD_OBJECT,A)}),c.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(r){r.keyCode===Ce.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(r){r.keyCode===Ce.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(r){if($i(r)==="filter"){var c=li(r,"patternSourceCanvas"),x=c.patternSourceCanvas,_=Oi(r),j=li(_,"originalAngle"),A=j.originalAngle;this.graphics.canvasImage.angle!==A&&sl(r,this.graphics.canvasImage);var z=r.originX,U=r.originY;Je().adjustOriginToCenter(r),r.width*=r.scaleX,r.height*=r.scaleY,r.rx*=r.scaleX,r.ry*=r.scaleY,r.scaleX=1,r.scaleY=1,il(r),Fr(r,{originX:z,originY:U}),ol(x)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(r,c){(c.scaleX!==1||c.scaleY!==1)&&c.addWithUpdate();var x=r.angle,_=r.left,j=r.top;rt.fabric.util.addTransformToObject(r,c.calcTransformMatrix()),this._resetPositionFillFilter(r),r.set({angle:x,left:_,top:j})}}]),a})(Re);function Sl(E){var p=bl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function bl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var an=10,Qn={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},on={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},sn={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},Ai=1,Kn=_t.ZOOM_CHANGED,Il=_t.ADD_TEXT,Ml=_t.TEXT_EDITING,_l=_t.OBJECT_MODIFIED,$n=_t.KEY_DOWN,qn=_t.KEY_UP,Tl=_t.HAND_STARTED,El=_t.HAND_STOPPED,wl=(function(E){ge(a,E);var p=Sl(a);function a(l){var r,c,x,_,j,A,z,U,nt,st,dt,ht,vt;W(this,a),vt=p.call(this,jt.ZOOM,l),vt.zoomArea=null,vt._startPoint=null,vt._centerPoints=[],vt.zoomLevel=Ai,vt.zoomMode=De.DEFAULT,vt._listeners={startZoom:J()(r=vt._onMouseDownWithZoomMode).call(r,ce(vt)),moveZoom:J()(c=vt._onMouseMoveWithZoomMode).call(c,ce(vt)),stopZoom:J()(x=vt._onMouseUpWithZoomMode).call(x,ce(vt)),startHand:J()(_=vt._onMouseDownWithHandMode).call(_,ce(vt)),moveHand:J()(j=vt._onMouseMoveWithHandMode).call(j,ce(vt)),stopHand:J()(A=vt._onMouseUpWithHandMode).call(A,ce(vt)),zoomChanged:J()(z=vt._changeScrollState).call(z,ce(vt)),keydown:J()(U=vt._startHandModeWithSpaceBar).call(U,ce(vt)),keyup:J()(nt=vt._endHandModeWithSpaceBar).call(nt,ce(vt))};var kt=vt.getCanvas();return vt.aspectRatio=kt.width/kt.height,vt._verticalScroll=new rt.fabric.Rect(Qn),vt._horizontalScroll=new rt.fabric.Rect(Qn),kt.on(Kn,vt._listeners.zoomChanged),vt.graphics.on(Il,J()(st=vt._startTextEditingHandler).call(st,ce(vt))),vt.graphics.on(Ml,J()(dt=vt._startTextEditingHandler).call(dt,ce(vt))),vt.graphics.on(_l,J()(ht=vt._stopTextEditingHandler).call(ht,ce(vt))),vt}return V(a,[{key:"attachKeyboardZoomEvents",value:function(){rt.fabric.util.addListener(document,$n,this._listeners.keydown),rt.fabric.util.addListener(document,qn,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){rt.fabric.util.removeListener(document,$n,this._listeners.keydown),rt.fabric.util.removeListener(document,qn,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(r){this.withSpace||this.isTextEditing||r.keyCode===Ce.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(r){r.keyCode===Ce.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=De.ZOOM;var r=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new rt.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),r.discardActiveObject(),r.add(this.zoomArea),r.on("mouse:down",this._listeners.startZoom),r.selection=!1,r.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=De.DEFAULT;var r=this.getCanvas(),c=this._listeners,x=c.startZoom,_=c.moveZoom,j=c.stopZoom;r.selection=!0,r.defaultCursor="auto",r.off({"mouse:down":x,"mouse:move":_,"mouse:up":j}),this._changeObjectsEventedState(!0),r.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=De.HAND;var r=this.getCanvas();this._changeObjectsEventedState(!1),r.discardActiveObject(),r.off("mouse:down",this._listeners.startHand),r.on("mouse:down",this._listeners.startHand),r.selection=!1,r.defaultCursor="grab",r.fire(Tl)}},{key:"endHandMode",value:function(){this.zoomMode=De.DEFAULT;var r=this.getCanvas();this._changeObjectsEventedState(!0),r.off("mouse:down",this._listeners.startHand),r.selection=!0,r.defaultCursor="auto",this._startHandPoint=null,r.fire(El)}},{key:"_onMouseDownWithZoomMode",value:function(r){var c=r.target,x=r.e;if(!c){var _=this.getCanvas();_.selection=!1,this._startPoint=_.getPointer(x),this.zoomArea.set({width:0,height:0});var j=this._listeners,A=j.moveZoom,z=j.stopZoom;_.on({"mouse:move":A,"mouse:up":z})}}},{key:"_onMouseMoveWithZoomMode",value:function(r){var c=r.e,x=this.getCanvas(),_=x.getPointer(c),j=_.x,A=_.y,z=this.zoomArea,U=this._startPoint,nt=Math.abs(j-U.x),st=Math.abs(A-U.y);nt+st>an&&(x.remove(z),z.set(this._calcRectDimensionFromPoint(j,A)),x.add(z))}},{key:"_calcRectDimensionFromPoint",value:function(r,c){var x=this.getCanvas(),_=x.getWidth(),j=x.getHeight(),A=this._startPoint,z=A.x,U=A.y,nt=Math.min,st=nt(z,r),dt=nt(U,c),ht=ne(r,z,_)-st,vt=ne(c,U,j)-dt;return{left:st,top:dt,width:ht,height:vt}}},{key:"_onMouseUpWithZoomMode",value:function(){var r=this.zoomLevel,c=this.zoomArea,x=this._listeners,_=x.moveZoom,j=x.stopZoom,A=this.getCanvas(),z=this._getCenterPoint(),U=z.x,nt=z.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:U,y:nt,prevZoomLevel:r,zoomLevel:r+1}),r+=1,A.zoomToPoint({x:U,y:nt},r),this._fireZoomChanged(A,r),this.zoomLevel=r),A.off({"mouse:move":_,"mouse:up":j}),A.remove(c),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var r=this.zoomArea,c=r.left,x=r.top,_=r.width,j=r.height,A=this._startPoint,z=A.x,U=A.y,nt=this.aspectRatio;return _<an&&j<an?{x:z,y:U}:_>j?{x:c+nt*j/2,y:x+j/2}:{x:c+_/2,y:x+_/nt/2}}},{key:"zoom",value:function(r){for(var c=r.x,x=r.y,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,j=this.getCanvas(),A=this._centerPoints,z=A.length-1;z>=0&&!(A[z].zoomLevel<_);z-=1){var U=A.pop(),nt=U.x,st=U.y,dt=U.prevZoomLevel;j.zoomToPoint({x:nt,y:st},dt),this.zoomLevel=dt}j.zoomToPoint({x:c,y:x},_),this._isDefaultZoomLevel(_)||this._centerPoints.push({x:c,y:x,zoomLevel:_,prevZoomLevel:this.zoomLevel}),this.zoomLevel=_,this._fireZoomChanged(j,_)}},{key:"zoomOut",value:function(){var r=this._centerPoints;if(r.length){var c=this.getCanvas(),x=r.pop(),_=x.x,j=x.y,A=x.prevZoomLevel;this._isDefaultZoomLevel(A)?c.setViewportTransform([1,0,0,1,0,0]):c.zoomToPoint({x:_,y:j},A),this.zoomLevel=A,this._fireZoomChanged(c,this.zoomLevel)}}},{key:"resetZoom",value:function(){var r=this.getCanvas();r.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=Ai,this._centerPoints=[],this._fireZoomChanged(r,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(r){var c=r.x,x=r.y,_=this._centerPoints;if(_.length){var j=this.getCanvas(),A=this.zoomLevel,z=_.pop(),U=z.x,nt=z.y,st=z.prevZoomLevel,dt=U-c,ht=nt-x;j.zoomToPoint({x:U,y:nt},st),j.zoomToPoint({x:dt,y:ht},A),_.push({x:dt,y:ht,prevZoomLevel:st,zoomLevel:A}),this._fireZoomChanged(j,A)}}},{key:"_onMouseDownWithHandMode",value:function(r){var c=r.target,x=r.e;if(!c){var _=this.getCanvas();if(!(this.zoomLevel<=Ai)){_.selection=!1,this._startHandPoint=_.getPointer(x);var j=this._listeners,A=j.moveHand,z=j.stopHand;_.on({"mouse:move":A,"mouse:up":z})}}}},{key:"_onMouseMoveWithHandMode",value:function(r){var c=r.e,x=this.getCanvas(),_=x.getPointer(c),j=_.x,A=_.y,z=j-this._startHandPoint.x,U=A-this._startHandPoint.y;this._movePointOfZoom({x:z,y:U})}},{key:"_onMouseUpWithHandMode",value:function(){var r=this.getCanvas(),c=this._listeners,x=c.moveHand,_=c.stopHand;r.off({"mouse:move":x,"mouse:up":_}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(r){var c=r.viewport,x=r.zoomLevel,_=this.getCanvas();if(_.remove(this._verticalScroll),_.remove(this._horizontalScroll),!this._isDefaultZoomLevel(x)){var j=_.width,A=_.height,z=c.tl,U=c.tr,nt=c.bl,st=U.x-z.x,dt=nt.y-z.y,ht=st*st/j,vt=dt*sn.SIZE,kt=ne(z.x+z.x/j*st,z.x,U.x-ht),$t=dt*sn.MARGIN,ie=dt*sn.BORDER_RADIUS;this._horizontalScroll.set({left:kt,top:nt.y-vt-$t,width:ht,height:vt,rx:ie,ry:ie});var re=st*on.SIZE,Bt=dt*dt/A,he=ne(z.y+z.y/A*dt,U.y,nt.y-Bt),we=st*on.MARGIN,Pe=st*on.BORDER_RADIUS;this._verticalScroll.set({left:U.x-re-we,top:he,width:re,height:Bt,rx:Pe,ry:Pe}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,c=this.getCanvas();c.forEachObject(function(x){x.evented=r})}},{key:"_addScrollBar",value:function(){var r=this,c=this.getCanvas();c.add(this._horizontalScroll),c.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=t()(function(){c.remove(r._horizontalScroll),c.remove(r._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(r){return r===Ai}},{key:"_fireZoomChanged",value:function(r,c){r.fire(Kn,{viewport:r.calcViewportBoundaries(),zoomLevel:c})}},{key:"mode",get:function(){return this.zoomMode}}]),a})(Re),Dl=wl,tr=_i.create,er=_i.types,Ol=(function(){function E(p){W(this,E),this.name=p}return V(E,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(tr(er.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(tr(er.UN_IMPLEMENTATION,"stop"))}}]),E})(),$e=Ol;function Al(E){var p=kl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function kl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Pl=(function(E){ge(a,E);var p=Al(a);function a(){return W(this,a),p.call(this,ue.CROPPER)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.CROPPER);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.CROPPER);c.end()}}]),a})($e),Ll=Pl;function jl(E){var p=Nl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Nl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Rl=(function(E){ge(a,E);var p=jl(a);function a(){return W(this,a),p.call(this,ue.FREE_DRAWING)}return V(a,[{key:"start",value:function(r,c){var x=r.getComponent(jt.FREE_DRAWING);x.start(c)}},{key:"end",value:function(r){var c=r.getComponent(jt.FREE_DRAWING);c.end()}}]),a})($e),zl=Rl;function Fl(E){var p=Bl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Bl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Hl=(function(E){ge(a,E);var p=Fl(a);function a(){return W(this,a),p.call(this,ue.LINE_DRAWING)}return V(a,[{key:"start",value:function(r,c){var x=r.getComponent(jt.LINE);x.start(c)}},{key:"end",value:function(r){var c=r.getComponent(jt.LINE);c.end()}}]),a})($e),Ul=Hl;function Yl(E){var p=Wl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Wl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Gl=(function(E){ge(a,E);var p=Yl(a);function a(){return W(this,a),p.call(this,ue.SHAPE)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.SHAPE);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.SHAPE);c.end()}}]),a})($e),Xl=Gl;function Zl(E){var p=Vl();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function Vl(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var Jl=(function(E){ge(a,E);var p=Zl(a);function a(){return W(this,a),p.call(this,ue.TEXT)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.TEXT);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.TEXT);c.end()}}]),a})($e),Ql=Jl;function Kl(E){var p=$l();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function $l(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var ql=(function(E){ge(a,E);var p=Kl(a);function a(){return W(this,a),p.call(this,ue.ICON)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.ICON);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.ICON);c.end()}}]),a})($e),tc=ql;function ec(E){var p=ic();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function ic(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var nc=(function(E){ge(a,E);var p=ec(a);function a(){return W(this,a),p.call(this,ue.ZOOM)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.ZOOM);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.ZOOM);c.end()}}]),a})($e),rc=nc,ir=null;function nr(E){ir=E}function ac(){return ir}function ln(E,p){var a;if(E.type==="activeSelection"){var l;a=We()(l=E.getObjects()).call(l,function(r){var c=r.angle,x=r.left,_=r.top,j=r.scaleX,A=r.scaleY,z=r.width,U=r.height;rt.fabric.util.addTransformToObject(r,E.calcTransformMatrix());var nt=p(r);return r.set({angle:c,left:x,top:_,width:z,height:U,scaleX:j,scaleY:A}),nt})}else a=[p(E)];return a}function cn(E,p,a){return a?{id:E,width:p.width,height:p.height,top:p.top,left:p.left,angle:p.angle,scaleX:p.scaleX,scaleY:p.scaleY}:X()({id:E},p)}function oc(E){var p=sc();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function sc(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var lc=(function(E){ge(a,E);var p=oc(a);function a(l){var r;return W(this,a),r=p.call(this,jt.RESIZE,l),r._dimensions=null,r._originalDimensions=null,r}return V(a,[{key:"getCurrentDimensions",value:function(){var r=this.getCanvasImage();if(!this._dimensions&&r){var c=r.width,x=r.height;this._dimensions={width:c,height:x}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(r){this._originalDimensions=r}},{key:"resize",value:function(r){var c=this.getCanvasImage(),x=c.width,_=c.height,j=c.scaleX,A=c.scaleY,z=r.width,U=r.height,nt={scaleX:z?z/x:j,scaleY:U?U/_:A};return(j!==nt.scaleX||A!==nt.scaleY)&&(c.set(nt).setCoords(),this._dimensions={width:c.width*c.scaleX,height:c.height*c.scaleY}),this.adjustCanvasDimensionBase(),ct().resolve()}},{key:"start",value:function(){var r=this.getCurrentDimensions();this.setOriginalDimensions(r)}},{key:"end",value:function(){}}]),a})(Re),cc=lc;function uc(E){var p=hc();return function(){var l=te(E),r;if(p){var c=te(this).constructor;r=Dt()(l,arguments,c)}else r=l.apply(this,arguments);return ve(this,r)}}function hc(){if(typeof Reflect>"u"||!Dt()||Dt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Dt()(Boolean,[],function(){})),!0}catch{return!1}}var fc=(function(E){ge(a,E);var p=uc(a);function a(){return W(this,a),p.call(this,ue.RESIZE)}return V(a,[{key:"start",value:function(r){var c=r.getComponent(jt.RESIZE);c.start()}},{key:"end",value:function(r){var c=r.getComponent(jt.RESIZE);c.end()}}]),a})($e),dc=fc,gc=1e3,vc=800,ki=10,pc={cssOnly:!0},mc={backstoreOnly:!0},rr=(function(){function E(p){var a,l,r,c,x,_,j,A,z,U,nt,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=st.cssMaxWidth,ht=st.cssMaxHeight;W(this,E),this.canvasImage=null,this.cssMaxWidth=dt||gc,this.cssMaxHeight=ht||vc,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=ue.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:J()(a=this._onMouseDown).call(a,this),onObjectAdded:J()(l=this._onObjectAdded).call(l,this),onObjectRemoved:J()(r=this._onObjectRemoved).call(r,this),onObjectMoved:J()(c=this._onObjectMoved).call(c,this),onObjectScaled:J()(x=this._onObjectScaled).call(x,this),onObjectModified:J()(_=this._onObjectModified).call(_,this),onObjectRotated:J()(j=this._onObjectRotated).call(j,this),onObjectSelected:J()(A=this._onObjectSelected).call(A,this),onPathCreated:J()(z=this._onPathCreated).call(z,this),onSelectionCleared:J()(U=this._onSelectionCleared).call(U,this),onSelectionCreated:J()(nt=this._onSelectionCreated).call(nt,this)},this._setObjectCachingToFalse(),this._setCanvasElement(p),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return V(E,[{key:"destroy",value:function(){var a=this._canvas.wrapperEl;this._canvas.clear(),a.parentNode.removeChild(a),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var a=this.getComponent(jt.ZOOM);a.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var a=this.getComponent(jt.ZOOM);a.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(a){var l,r=[];Fn()(a)?r=a:r.push(a),(l=this._canvas).add.apply(l,N(r))}},{key:"contains",value:function(a){return this._canvas.contains(a)}},{key:"getObjects",value:function(){var a;return g()(a=this._canvas.getObjects()).call(a)}},{key:"getObject",value:function(a){return this._objects[a]}},{key:"remove",value:function(a){this._canvas.remove(a)}},{key:"removeAll",value:function(a){var l,r=this._canvas,c=g()(l=r.getObjects()).call(l);return r.remove.apply(r,N(this._canvas.getObjects())),a&&r.clear(),c}},{key:"removeObjectById",value:function(a){var l=[],r=this._canvas,c=this.getObject(a),x=c&&c.isType("group")&&!c.isEmpty();return x?(r.discardActiveObject(),c.forEachObject(function(_){l.push(_),r.remove(_)})):r.contains(c)&&(l.push(c),r.remove(c)),l}},{key:"getObjectId",value:function(a){var l=null;for(l in this._objects)if(this._objects.hasOwnProperty(l)&&a===this._objects[l])return l;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var a=this.getActiveObject(),l=a.type,r=a.left,c=a.top,x=l==="activeSelection";if(x){var _=new rt.fabric.Group(N(a.getObjects()),{left:r,top:c});return this._addFabricObject(_)}return this.getObjectId(a)}},{key:"isReadyRemoveObject",value:function(){var a=this.getActiveObject();return a&&!a.isEditing}},{key:"getActiveObjects",value:function(){var a=this._canvas._activeObject;return a&&a.type==="activeSelection"?a:null}},{key:"getActiveSelectionFromObjects",value:function(a){var l=this.getCanvas();return new rt.fabric.ActiveSelection(a,{canvas:l})}},{key:"setActiveObject",value:function(a){this._canvas.setActiveObject(a)}},{key:"setCropSelectionStyle",value:function(a){this.cropSelectionStyle=a}},{key:"getComponent",value:function(a){return this._componentMap[a]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(a,l){if(this._isSameDrawingMode(a))return!0;this.stopDrawingMode();var r=this._getDrawingModeInstance(a);return r&&r.start&&(r.start(this,l),this._drawingMode=a),!!r}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(ue.NORMAL)){var a=this._getDrawingModeInstance(this.getDrawingMode());a&&a.end&&a.end(this),this._drawingMode=ue.NORMAL}}},{key:"zoom",value:function(a,l){var r=a.x,c=a.y,x=this.getComponent(jt.ZOOM);x.zoom({x:r,y:c},l)}},{key:"getZoomMode",value:function(){var a=this.getComponent(jt.ZOOM);return a.mode}},{key:"startZoomInMode",value:function(){var a=this.getComponent(jt.ZOOM);a.startZoomInMode()}},{key:"endZoomInMode",value:function(){var a=this.getComponent(jt.ZOOM);a.endZoomInMode()}},{key:"zoomOut",value:function(){var a=this.getComponent(jt.ZOOM);a.zoomOut()}},{key:"startHandMode",value:function(){var a=this.getComponent(jt.ZOOM);a.startHandMode()}},{key:"endHandMode",value:function(){var a=this.getComponent(jt.ZOOM);a.endHandMode()}},{key:"resetZoom",value:function(){var a=this.getComponent(jt.ZOOM);a.resetZoom()}},{key:"toDataURL",value:function(a){var l=this.getComponent(jt.CROPPER);l.changeVisibility(!1);var r=this._canvas&&this._canvas.toDataURL(a);return l.changeVisibility(!0),r}},{key:"setCanvasImage",value:function(a,l){l&&Lt(l),this.imageName=a,this.canvasImage=l}},{key:"setCssMaxDimension",value:function(a){this.cssMaxWidth=a.width||this.cssMaxWidth,this.cssMaxHeight=a.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;a||(a=this.canvasImage);var l=a.getBoundingRect(),r=l.width,c=l.height,x=this._calcMaxDimension(r,c);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(x.width,"px"),"max-height":"".concat(x.height,"px")}),this.setCanvasBackstoreDimension({width:r,height:c}),this._canvas.centerObject(a)}},{key:"setCanvasCssDimension",value:function(a){this._canvas.setDimensions(a,pc)}},{key:"setCanvasBackstoreDimension",value:function(a){this._canvas.setDimensions(a,mc)}},{key:"setImageProperties",value:function(a,l){var r=this.canvasImage;r&&(r.set(a).setCoords(),l&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(a){var l,r=this,c=J()(l=this._callbackAfterLoadingImageObject).call(l,this);return new(ct())(function(x){rt.fabric.Image.fromURL(a,function(_){c(_),x(r.createObjectProperties(_))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(jt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this.getComponent(jt.CROPPER).setCropzoneRect(a)}},{key:"getCroppedImageData",value:function(a){return this.getComponent(jt.CROPPER).getCroppedImageData(a)}},{key:"setBrush",value:function(a){var l=this._drawingMode,r=jt.FREE_DRAWING;l===ue.LINE_DRAWING&&(r=jt.LINE),this.getComponent(r).setBrush(a)}},{key:"setDrawingShape",value:function(a,l){this.getComponent(jt.SHAPE).setStates(a,l)}},{key:"setIconStyle",value:function(a,l){this.getComponent(jt.ICON).setStates(a,l)}},{key:"registerPaths",value:function(a){this.getComponent(jt.ICON).registerPaths(a)}},{key:"changeCursor",value:function(a){var l=this.getCanvas();l.defaultCursor=a,l.renderAll()}},{key:"hasFilter",value:function(a){return this.getComponent(jt.FILTER).hasFilter(a)}},{key:"setSelectionStyle",value:function(a){X()(Fe.SELECTION_STYLE,a)}},{key:"setObjectProperties",value:function(a,l){var r=this.getObject(a),c=X()({},l);return r.set(c),r.setCoords(),this.getCanvas().renderAll(),c}},{key:"getObjectProperties",value:function(a,l){var r=this.getObject(a),c={};return It()(l)?c[l]=r[l]:Fn()(l)?ci()(l,function(x){c[x]=r[x]}):Ei()(l,function(x,_){c[_]=r[_]}),c}},{key:"getObjectPosition",value:function(a,l,r){var c=this.getObject(a);return c?c.getPointByOrigin(l,r):null}},{key:"setObjectPosition",value:function(a,l){var r=this.getObject(a),c=l.x,x=l.y,_=l.originX,j=l.originY;if(!r)return!1;var A=r.getPointByOrigin(_,j),z=r.getPointByOrigin("center","center"),U=z.x-A.x,nt=z.y-A.y;return r.set({left:c+U,top:x+nt}),r.setCoords(),!0}},{key:"getCanvasSize",value:function(){var a=this.getCanvasImage();return{width:a?a.width:0,height:a?a.height:0}}},{key:"createStaticCanvas",value:function(){var a=new rt.fabric.StaticCanvas;return a.set({enableRetinaScaling:!1}),a}},{key:"_getDrawingModeInstance",value:function(a){return this._drawingModeMap[a]}},{key:"_setObjectCachingToFalse",value:function(){rt.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(a){var l,r;a.nodeType?l=a:l=document.querySelector(a),l.nodeName.toUpperCase()!=="CANVAS"&&(r=document.createElement("canvas"),l.appendChild(r)),this._canvas=new rt.fabric.Canvas(r,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new Ll),this._register(this._drawingModeMap,new zl),this._register(this._drawingModeMap,new Ul),this._register(this._drawingModeMap,new Xl),this._register(this._drawingModeMap,new Ql),this._register(this._drawingModeMap,new tc),this._register(this._drawingModeMap,new rc),this._register(this._drawingModeMap,new dc)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new Xo(this)),this._register(this._componentMap,new cs(this)),this._register(this._componentMap,new ds(this)),this._register(this._componentMap,new ms(this)),this._register(this._componentMap,new Ss(this)),this._register(this._componentMap,new Ds(this)),this._register(this._componentMap,new Ns(this)),this._register(this._componentMap,new Hs(this)),this._register(this._componentMap,new qs(this)),this._register(this._componentMap,new xl(this)),this._register(this._componentMap,new Dl(this)),this._register(this._componentMap,new cc(this))}},{key:"_register",value:function(a,l){a[l.getName()]=l}},{key:"_isSameDrawingMode",value:function(a){return this.getDrawingMode()===a}},{key:"_calcMaxDimension",value:function(a,l){var r=this.cssMaxWidth/a,c=this.cssMaxHeight/l,x=Math.min(a,this.cssMaxWidth),_=Math.min(l,this.cssMaxHeight);return r<1&&r<c?(x=a*r,_=l*r):c<1&&c<r&&(x=a*c,_=l*c),{width:Math.floor(x),height:Math.floor(_)}}},{key:"_callbackAfterLoadingImageObject",value:function(a){var l=this.getCanvasImage().getCenterPoint();a.set(Fe.SELECTION_STYLE),a.set({left:l.x,top:l.y,crossOrigin:"Anonymous"}),this.getCanvas().add(a).setActiveObject(a)}},{key:"_attachCanvasEvents",value:function(){var a=this._canvas,l=this._handler;a.on({"mouse:down":l.onMouseDown,"object:added":l.onObjectAdded,"object:removed":l.onObjectRemoved,"object:moving":l.onObjectMoved,"object:scaling":l.onObjectScaled,"object:modified":l.onObjectModified,"object:rotating":l.onObjectRotated,"path:created":l.onPathCreated,"selection:cleared":l.onSelectionCleared,"selection:created":l.onSelectionCreated,"selection:updated":l.onObjectSelected})}},{key:"_onMouseDown",value:function(a){var l=this,r=a.e,c=a.target,x=this._canvas.getPointer(r);if(c){var _=c.type,j=ln(c,function(A){return cn(l.getObjectId(A),A,_==="activeSelection")});nr(j)}this.fire(_t.MOUSE_DOWN,r,x)}},{key:"_onObjectAdded",value:function(a){var l=a.target;l.isType("cropzone")||this._addFabricObject(l)}},{key:"_onObjectRemoved",value:function(a){var l=a.target;this._removeFabricObject(Lt(l))}},{key:"_onObjectMoved",value:function(a){var l=this;this._lazyFire(_t.OBJECT_MOVED,function(r){return l.createObjectProperties(r)},a.target)}},{key:"_onObjectScaled",value:function(a){var l=this;this._lazyFire(_t.OBJECT_SCALED,function(r){return l.createObjectProperties(r)},a.target)}},{key:"_onObjectModified",value:function(a){var l=a.target;if(l.type==="activeSelection"){var r=l.getObjects();Yt()(r).call(r,function(c){return c.fire("modifiedInGroup",l)})}this.fire(_t.OBJECT_MODIFIED,l,this.getObjectId(l))}},{key:"_onObjectRotated",value:function(a){var l=this;this._lazyFire(_t.OBJECT_ROTATED,function(r){return l.createObjectProperties(r)},a.target)}},{key:"_lazyFire",value:function(a,l,r){var c=this,x=r&&r.canvasEventDelegation,_=x?r.canvasEventDelegation(a):"none";_==="unregistered"&&r.canvasEventRegister(a,function(j){c.fire(a,l(j))}),_==="none"&&this.fire(a,l(r))}},{key:"_onObjectSelected",value:function(a){var l=a.target,r=this.createObjectProperties(l);this.fire(_t.OBJECT_ACTIVATED,r)}},{key:"_onPathCreated",value:function(a){var l=a.path.getCenterPoint(),r=l.x,c=l.y;a.path.set(X()({left:r,top:c},Fe.SELECTION_STYLE));var x=this.createObjectProperties(a.path);this.fire(_t.ADD_OBJECT,x)}},{key:"_onSelectionCleared",value:function(){this.fire(_t.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(a){var l=a.target,r=this.createObjectProperties(l);this.fire(_t.OBJECT_ACTIVATED,r),this.fire(_t.SELECTION_CREATED,a.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(a){this._canvas.forEachObject(function(l){l.selectable=a,l.hoverCursor=a?"move":"crosshair"})}},{key:"createObjectProperties",value:function(a){var l=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],r={id:Lt(a),type:a.type};if(X()(r,de(a,l)),Mi(["i-text","text"],a.type))X()(r,this._createTextProperties(a,r));else if(Mi(["rect","triangle","circle"],a.type)){var c=this.getComponent(jt.SHAPE);X()(r,{fill:c.makeFillPropertyForUserEvent(a)})}return r}},{key:"_createTextProperties",value:function(a){var l=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],r={};return X()(r,de(a,l)),r}},{key:"_addFabricObject",value:function(a){var l=Lt(a);return this._objects[l]=a,l}},{key:"_removeFabricObject",value:function(a){delete this._objects[a]}},{key:"resetTargetObjectForCopyPaste",value:function(){var a=this.getActiveObject();a&&(this.targetObjectForCopyPaste=a)}},{key:"pasteObject",value:function(){var a=this;if(!this.targetObjectForCopyPaste)return ct().resolve([]);var l=this.targetObjectForCopyPaste,r=l.type==="activeSelection",c=r?l.getObjects():[l],x=null;return this.discardSelection(),this._cloneObject(c).then(function(_){if(_.length>1)x=a.getActiveSelectionFromObjects(_);else{var j=lt(_,1);x=j[0]}a.targetObjectForCopyPaste=x,a.setActiveObject(x)})}},{key:"_cloneObject",value:function(a){var l=this,r=We()(a).call(a,function(c){return l._cloneObjectItem(c)});return ct().all(r)}},{key:"_cloneObjectItem",value:function(a){var l=this;return this._copyFabricObjectForPaste(a).then(function(r){var c=l.createObjectProperties(r);return l.add(r),l.fire(_t.ADD_OBJECT,c),r})}},{key:"_copyFabricObjectForPaste",value:function(a){var l=this,r=function(x,_){return _?x-ki:x+ki};return this._copyFabricObject(a).then(function(c){var x=c.left,_=c.top,j=c.width,A=c.height,z=l.getCanvasSize(),U=z.width,nt=z.height,st=x+j/2,dt=_+A/2;return c.set(X()({left:r(x,st+ki>U),top:r(_,dt+ki>nt)},Fe.SELECTION_STYLE)),c})}},{key:"_copyFabricObject",value:function(a){var l=this;return new(ct())(function(r){a.clone(function(c){var x=l.getComponent(jt.SHAPE);mn(c)&&x.processForCopiedObject(c,a),r(c)})})}},{key:"getCurrentDimensions",value:function(){var a=this.getComponent(jt.RESIZE);return a.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var a=this.getComponent(jt.RESIZE);return a.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(a){var l=this.getComponent(jt.RESIZE);l.setOriginalDimensions(a)}},{key:"resize",value:function(a){var l=this.getComponent(jt.RESIZE);return l.resize(a)}}]),E})();pt().mixin(rr);var yc=rr,Cc=_t.MOUSE_DOWN,xc=_t.OBJECT_MOVED,Sc=_t.OBJECT_SCALED,bc=_t.OBJECT_ACTIVATED,Ic=_t.OBJECT_ROTATED,ar=_t.OBJECT_ADDED,Mc=_t.OBJECT_MODIFIED,_c=_t.ADD_TEXT,Tc=_t.ADD_OBJECT,Ec=_t.TEXT_EDITING,wc=_t.TEXT_CHANGED,Dc=_t.ICON_CREATE_RESIZE,Oc=_t.ICON_CREATE_END,or=_t.SELECTION_CLEARED,sr=_t.SELECTION_CREATED,Ac=_t.ADD_OBJECT_AFTER,un=(function(){function E(p,a){var l,r,c,x,_,j,A,z,U,nt,st,dt,ht,vt,kt,$t;if(W(this,E),a=X()({includeUI:!1,usageStatistics:!0},a),this.mode=null,this.activeObjectId=null,a.includeUI){var ie=a.includeUI;ie.usageStatistics=a.usageStatistics,this.ui=new No(p,ie,this.getActions()),a=this.ui.setUiDefaultSelectionStyle(a)}this._invoker=new qr,this._graphics=new yc(this.ui?this.ui.getEditorArea():p,{cssMaxWidth:a.cssMaxWidth,cssMaxHeight:a.cssMaxHeight}),this._handlers={keydown:J()(l=this._onKeyDown).call(l,this),mousedown:J()(r=this._onMouseDown).call(r,this),objectActivated:J()(c=this._onObjectActivated).call(c,this),objectMoved:J()(x=this._onObjectMoved).call(x,this),objectScaled:J()(_=this._onObjectScaled).call(_,this),objectRotated:J()(j=this._onObjectRotated).call(j,this),objectAdded:J()(A=this._onObjectAdded).call(A,this),objectModified:J()(z=this._onObjectModified).call(z,this),createdPath:this._onCreatedPath,addText:J()(U=this._onAddText).call(U,this),addObject:J()(nt=this._onAddObject).call(nt,this),textEditing:J()(st=this._onTextEditing).call(st,this),textChanged:J()(dt=this._onTextChanged).call(dt,this),iconCreateResize:J()(ht=this._onIconCreateResize).call(ht,this),iconCreateEnd:J()(vt=this._onIconCreateEnd).call(vt,this),selectionCleared:J()(kt=this._selectionCleared).call(kt,this),selectionCreated:J()($t=this._selectionCreated).call($t,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(a.selectionStyle,{applyCropSelectionStyle:a.applyCropSelectionStyle,applyGroupSelectionStyle:a.applyGroupSelectionStyle}),a.usageStatistics&&Te(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),rt.fabric.enableGLFiltering=!1}return V(E,[{key:"_attachColorPickerInputBoxEvents",value:function(){var a=this;this.ui.on(_t.INPUT_BOX_EDITING_STARTED,function(){a.isColorPickerInputBoxEditing=!0}),this.ui.on(_t.INPUT_BOX_EDITING_STOPPED,function(){a.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(_t.INPUT_BOX_EDITING_STARTED),this.ui.off(_t.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(a,l){var r=l.applyCropSelectionStyle,c=l.applyGroupSelectionStyle;a&&this._graphics.setSelectionStyle(a),r&&this._graphics.setCropSelectionStyle(a),c&&this.on("selectionCreated",function(x){x.type==="activeSelection"&&x.set(a)})}},{key:"_attachInvokerEvents",value:function(){var a,l,r=this,c=_t.UNDO_STACK_CHANGED,x=_t.REDO_STACK_CHANGED,_=_t.EXECUTE_COMMAND,j=_t.AFTER_UNDO,A=_t.AFTER_REDO,z=_t.HAND_STARTED,U=_t.HAND_STOPPED;if(this._invoker.on(c,J()(a=this.fire).call(a,this,c)),this._invoker.on(x,J()(l=this.fire).call(l,this,x)),this.ui){var nt=this._graphics.getCanvas();this._invoker.on(_,function(st){return r.ui.fire(_,st)}),this._invoker.on(j,function(st){return r.ui.fire(j,st)}),this._invoker.on(A,function(st){return r.ui.fire(A,st)}),nt.on(z,function(){return r.ui.fire(z)}),nt.on(U,function(){return r.ui.fire(U)})}}},{key:"_attachGraphicsEvents",value:function(){var a;this._graphics.on((a={},F(a,Cc,this._handlers.mousedown),F(a,xc,this._handlers.objectMoved),F(a,Sc,this._handlers.objectScaled),F(a,Ic,this._handlers.objectRotated),F(a,bc,this._handlers.objectActivated),F(a,ar,this._handlers.objectAdded),F(a,Mc,this._handlers.objectModified),F(a,_c,this._handlers.addText),F(a,Tc,this._handlers.addObject),F(a,Ec,this._handlers.textEditing),F(a,wc,this._handlers.textChanged),F(a,Dc,this._handlers.iconCreateResize),F(a,Oc,this._handlers.iconCreateEnd),F(a,or,this._handlers.selectionCleared),F(a,sr,this._handlers.selectionCreated),a))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(a){var l=a.ctrlKey,r=a.keyCode,c=a.metaKey,x=l||c;x&&(r===Ce.C?this._graphics.resetTargetObjectForCopyPaste():r===Ce.V?(this._graphics.pasteObject(),this.clearRedoStack()):r===Ce.Z?this.undo().catch(function(){}):r===Ce.Y&&this.redo().catch(function(){}));var _=r===Ce.BACKSPACE||r===Ce.DEL,j=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&j&&_&&(a.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var a=this._graphics.getActiveObjectIdForRemove();this.removeObject(a)}},{key:"_onMouseDown",value:function(a,l){this.fire(_t.MOUSE_DOWN,a,l)}},{key:"_pushAddObjectCommand",value:function(a){var l=xe.create(Vt.ADD_OBJECT,this._graphics,a);this._invoker.pushUndoStack(l)}},{key:"_pushModifyObjectCommand",value:function(a){var l=this,r=a.type,c=ln(a,function(_){return cn(l._graphics.getObjectId(_),_,r==="activeSelection")}),x=xe.create(Vt.CHANGE_SELECTION,this._graphics,c);x.execute(this._graphics,c),this._invoker.pushUndoStack(x)}},{key:"_onObjectActivated",value:function(a){this.fire(_t.OBJECT_ACTIVATED,a)}},{key:"_onObjectMoved",value:function(a){this.fire(_t.OBJECT_MOVED,a)}},{key:"_onObjectScaled",value:function(a){this.fire(_t.OBJECT_SCALED,a)}},{key:"_onObjectRotated",value:function(a){this.fire(_t.OBJECT_ROTATED,a)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Vt.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(a){this._graphics.changeSelectableAll(a)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(a){for(var l,r,c,x=arguments.length,_=new Array(x>1?x-1:0),j=1;j<x;j++)_[j-1]=arguments[j];var A=B()(l=[this._graphics]).call(l,_);return(r=this._invoker).execute.apply(r,B()(c=[a]).call(c,N(A)))}},{key:"executeSilent",value:function(a){for(var l,r,c,x=arguments.length,_=new Array(x>1?x-1:0),j=1;j<x;j++)_[j-1]=arguments[j];var A=B()(l=[this._graphics]).call(l,_);return(r=this._invoker).executeSilent.apply(r,B()(c=[a]).call(c,N(A)))}},{key:"undo",value:function(){for(var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=ct().resolve(),c=0;c<l;c+=1)r=r.then(function(){return a._invoker.undo()});return r}},{key:"redo",value:function(){for(var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=ct().resolve(),c=0;c<l;c+=1)r=r.then(function(){return a._invoker.redo()});return r}},{key:"zoom",value:function(a){var l=a.x,r=a.y,c=a.zoomLevel;this._graphics.zoom({x:l,y:r},c)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(a,l){if(!a)return ct().reject(fe.invalidParameters);var r=Q().createObjectURL(a);return l=l||a.name,this.loadImageFromURL(r,l).then(function(c){return Q().revokeObjectURL(a),c})}},{key:"loadImageFromURL",value:function(a,l){return!l||!a?ct().reject(fe.invalidParameters):this.execute(Vt.LOAD_IMAGE,l,a)}},{key:"addImageObject",value:function(a){return a?this.execute(Vt.ADD_IMAGE_OBJECT,a):ct().reject(fe.invalidParameters)}},{key:"startDrawingMode",value:function(a,l){return this._graphics.startDrawingMode(a,l)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(a){var l=this._graphics.getCroppedImageData(a);return l?this.loadImageFromURL(l.url,l.imageName):ct().reject(fe.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this._graphics.setCropzoneRect(a)}},{key:"_flip",value:function(a){return this.execute(Vt.FLIP_IMAGE,a)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(a,l,r){var c=null;return r?c=this.executeSilent(Vt.ROTATE_IMAGE,a,l):c=this.execute(Vt.ROTATE_IMAGE,a,l),c}},{key:"rotate",value:function(a,l){return this._rotate("rotate",a,l)}},{key:"setAngle",value:function(a,l){return this._rotate("setAngle",a,l)}},{key:"setBrush",value:function(a){this._graphics.setBrush(a)}},{key:"setDrawingShape",value:function(a,l){this._graphics.setDrawingShape(a,l)}},{key:"setDrawingIcon",value:function(a,l){this._graphics.setIconStyle(a,l)}},{key:"addShape",value:function(a,l){return l=l||{},this._setPositions(l),this.execute(Vt.ADD_SHAPE,a,l)}},{key:"changeShape",value:function(a,l,r){var c=r?"executeSilent":"execute";return this[c](Vt.CHANGE_SHAPE,a,l)}},{key:"addText",value:function(a,l){return a=a||"",l=l||{},this.execute(Vt.ADD_TEXT,a,l)}},{key:"changeText",value:function(a,l){return l=l||"",this.execute(Vt.CHANGE_TEXT,a,l)}},{key:"changeTextStyle",value:function(a,l,r){var c=r?"executeSilent":"execute";return this[c](Vt.CHANGE_TEXT_STYLE,a,l)}},{key:"_changeActivateMode",value:function(a){a!=="ICON"&&this.getDrawingMode()!==a&&this.startDrawingMode(a)}},{key:"_onTextChanged",value:function(a){this.fire(_t.TEXT_CHANGED,a)}},{key:"_onIconCreateResize",value:function(a){this.fire(_t.ICON_CREATE_RESIZE,a)}},{key:"_onIconCreateEnd",value:function(a){this.fire(_t.ICON_CREATE_END,a)}},{key:"_onTextEditing",value:function(){this.fire(_t.TEXT_EDITING)}},{key:"_onAddText",value:function(a){this.fire(_t.ADD_TEXT,{originPosition:a.originPosition,clientPosition:a.clientPosition})}},{key:"_onAddObject",value:function(a){var l=this._graphics.getObject(a.id);this._invoker.fire(_t.EXECUTE_COMMAND,qi(l.type)),this._pushAddObjectCommand(l)}},{key:"_onObjectAdded",value:function(a){this.fire(ar,a),this.fire(Ac,a)}},{key:"_onObjectModified",value:function(a){a.type!==Wt.CROPZONE&&(this._invoker.fire(_t.EXECUTE_COMMAND,qi(a.type)),this._pushModifyObjectCommand(a))}},{key:"_selectionCleared",value:function(){this.fire(or)}},{key:"_selectionCreated",value:function(a){this.fire(sr,a)}},{key:"registerIcons",value:function(a){this._graphics.registerPaths(a)}},{key:"changeCursor",value:function(a){this._graphics.changeCursor(a)}},{key:"addIcon",value:function(a,l){return l=l||{},this._setPositions(l),this.execute(Vt.ADD_ICON,a,l)}},{key:"changeIconColor",value:function(a,l){return this.execute(Vt.CHANGE_ICON_COLOR,a,l)}},{key:"removeObject",value:function(a){var l=this._graphics.getObject(a),r=l.type;return this.execute(Vt.REMOVE_OBJECT,a,qi(r))}},{key:"hasFilter",value:function(a){return this._graphics.hasFilter(a)}},{key:"removeFilter",value:function(a){return this.execute(Vt.REMOVE_FILTER,a)}},{key:"applyFilter",value:function(a,l,r){var c=r?"executeSilent":"execute";return this[c](Vt.APPLY_FILTER,a,l)}},{key:"toDataURL",value:function(a){return this._graphics.toDataURL(a)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(a){return a?this.execute(Vt.RESIZE_CANVAS_DIMENSION,a):ct().reject(fe.invalidParameters)}},{key:"destroy",value:function(){var a=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),Z()(this,function(l,r){a[r]=null},this)}},{key:"_setPositions",value:function(a){var l=this._graphics.getCenter();Y()(a.left)&&(a.left=l.left),Y()(a.top)&&(a.top=l.top)}},{key:"setObjectProperties",value:function(a,l){return this.execute(Vt.SET_OBJECT_PROPERTIES,a,l)}},{key:"setObjectPropertiesQuietly",value:function(a,l){this._graphics.setObjectProperties(a,l)}},{key:"getObjectProperties",value:function(a,l){var r=this._graphics.getObject(a);return r?this._graphics.getObjectProperties(a,l):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(a,l,r){return this._graphics.getObjectPosition(a,l,r)}},{key:"setObjectPosition",value:function(a,l){return this.execute(Vt.SET_OBJECT_POSITION,a,l)}},{key:"resize",value:function(a){return this.execute(Vt.RESIZE_IMAGE,a)}}]),E})();zo.mixin(un),pt().mixin(un);var kc=un,Pc=jt.ICON,Lc={name:Vt.ADD_ICON,execute:function(p,a,l){var r=this,c=p.getComponent(Pc);return c.add(a,l).then(function(x){return r.undoData.object=p.getObject(x.id),x})},undo:function(p){return p.remove(this.undoData.object),ct().resolve()}};xe.register(Lc);var jc={name:Vt.ADD_IMAGE_OBJECT,execute:function(p,a){var l=this;return p.addImageObject(a).then(function(r){return l.undoData.object=p.getObject(r.id),r})},undo:function(p){return p.remove(this.undoData.object),ct().resolve()}};xe.register(jc);var Nc={name:Vt.ADD_OBJECT,execute:function(p,a){return new(ct())(function(l,r){p.contains(a)?r(fe.addedObject):(p.add(a),l(a))})},undo:function(p,a){return new(ct())(function(l,r){p.contains(a)?(p.remove(a),l(a)):r(fe.noObject)})}};xe.register(Nc);var Rc=jt.SHAPE,zc={name:Vt.ADD_SHAPE,execute:function(p,a,l){var r=this,c=p.getComponent(Rc);return c.add(a,l).then(function(x){var _=x.id;return r.undoData.object=p.getObject(_),x})},undo:function(p){return p.remove(this.undoData.object),ct().resolve()}};xe.register(zc);var Fc=jt.TEXT,Bc={name:Vt.ADD_TEXT,execute:function(p,a,l){var r=this,c=p.getComponent(Fc);if(this.undoData.object){var x=this.undoData.object;return new(ct())(function(_,j){p.contains(x)?j(fe.redo):(p.add(x),_(x))})}return c.add(a,l).then(function(_){var j=_.id,A=p.getObject(j);return r.undoData.object=A,nr(ln(A,function(){return cn(j,A,!1)})),_})},undo:function(p){return p.remove(this.undoData.object),ct().resolve()}};xe.register(Bc);var lr=jt.FILTER,cr=null;function Hc(E,p,a){var l={};return E==="mask"&&(l.object=a.mask),l.options=p,l}var Uc={name:Vt.APPLY_FILTER,execute:function(p,a,l,r){var c=p.getComponent(lr);if(a==="mask"){var x=p.getObject(l.maskObjId);if(!(x&&x.isType("image")))return ct().reject(fe.invalidParameters);X()(l,{mask:x}),p.remove(l.mask)}if(!this.isRedo){var _=c.getOptions(a),j=Hc(a,_,l);cr=this.setUndoData(j,cr,r)}return c.add(a,l)},undo:function(p,a){var l=p.getComponent(lr);if(a==="mask"){var r=this.undoData.object;return p.add(r),p.setActiveObject(r),l.remove(a)}return this.undoData.options?l.add(a,this.undoData.options):l.remove(a)}};xe.register(Uc);var ur=jt.ICON,Yc={name:Vt.CHANGE_ICON_COLOR,execute:function(p,a,l){var r=this;return new(ct())(function(c,x){var _=p.getComponent(ur),j=p.getObject(a);j||x(fe.noObject),r.undoData.object=j,r.undoData.color=_.getColor(j),_.setColor(l,j),c()})},undo:function(p){var a=p.getComponent(ur),l=this.undoData,r=l.object,c=l.color;return a.setColor(c,r),ct().resolve()}};xe.register(Yc);var hr=jt.SHAPE,fr=null;function Wc(E,p){var a={object:p,options:{}};return Ei()(E,function(l,r){a.options[r]=p[r]}),a}var Gc={name:Vt.CHANGE_SHAPE,execute:function(p,a,l,r){var c=p.getComponent(hr),x=p.getObject(a);if(!x)return ct().reject(fe.noObject);if(!this.isRedo){var _=Wc(l,x);fr=this.setUndoData(_,fr,r)}return c.change(x,l)},undo:function(p){var a=p.getComponent(hr),l=this.undoData,r=l.object,c=l.options;return a.change(r,c)}};xe.register(Gc);var dr=jt.TEXT,Xc={name:Vt.CHANGE_TEXT,execute:function(p,a,l){var r=p.getComponent(dr),c=p.getObject(a);return c?(this.undoData.object=c,this.undoData.text=r.getText(c),r.change(c,l)):ct().reject(fe.noObject)},undo:function(p){var a=p.getComponent(dr),l=this.undoData,r=l.object,c=l.text;return a.change(r,c)}};xe.register(Xc);var gr=jt.TEXT,vr=null;function Zc(E,p){var a={object:p,styles:{}};return Ei()(E,function(l,r){var c=p[r];a.styles[r]=c}),a}var Vc={name:Vt.CHANGE_TEXT_STYLE,execute:function(p,a,l,r){var c=p.getComponent(gr),x=p.getObject(a);if(!x)return ct().reject(fe.noObject);if(!this.isRedo){var _=Zc(l,x);vr=this.setUndoData(_,vr,r)}return c.setStyle(x,l)},undo:function(p){var a=p.getComponent(gr),l=this.undoData,r=l.object,c=l.styles;return a.setStyle(r,c)}};xe.register(Vc);var Jc={name:Vt.CLEAR_OBJECTS,execute:function(p){var a=this;return new(ct())(function(l){a.undoData.objects=p.removeAll(),l()})},undo:function(p){return p.add(this.undoData.objects),ct().resolve()}};xe.register(Jc);var pr=jt.FLIP,Qc={name:Vt.FLIP_IMAGE,execute:function(p,a){var l=p.getComponent(pr);return this.undoData.setting=l.getCurrentSetting(),l[a]()},undo:function(p){var a=p.getComponent(pr);return a.set(this.undoData.setting)}};xe.register(Qc);var mr=jt.IMAGE_LOADER,Kc={name:Vt.LOAD_IMAGE,execute:function(p,a,l){var r,c=p.getComponent(mr),x=c.getCanvasImage(),_=x?x.width:0,j=x?x.height:0,A=ni()(r=p.removeAll(!0)).call(r,function(z){return z.type!=="cropzone"});return Yt()(A).call(A,function(z){z.evented=!0}),this.undoData={name:c.getImageName(),image:x,objects:A},c.load(a,l).then(function(z){return{oldWidth:_,oldHeight:j,newWidth:z.width,newHeight:z.height}})},undo:function(p){var a=p.getComponent(mr),l=this.undoData,r=l.objects,c=l.name,x=l.image;return p.removeAll(!0),p.add(r),a.load(c,x)}};xe.register(Kc);var yr=jt.FILTER,$c={name:Vt.REMOVE_FILTER,execute:function(p,a){var l=p.getComponent(yr);return this.undoData.options=l.getOptions(a),l.remove(a)},undo:function(p,a){var l=p.getComponent(yr),r=this.undoData.options;return l.add(a,r)}};xe.register($c);var qc={name:Vt.REMOVE_OBJECT,execute:function(p,a){var l=this;return new(ct())(function(r,c){l.undoData.objects=p.removeObjectById(a),l.undoData.objects.length?r():c(fe.noObject)})},undo:function(p){return p.add(this.undoData.objects),ct().resolve()}};xe.register(qc);var tu={name:Vt.RESIZE_CANVAS_DIMENSION,execute:function(p,a){var l=this;return new(ct())(function(r){l.undoData.size={width:p.cssMaxWidth,height:p.cssMaxHeight},p.setCssMaxDimension(a),p.adjustCanvasDimension(),r()})},undo:function(p){return p.setCssMaxDimension(this.undoData.size),p.adjustCanvasDimension(),ct().resolve()}};xe.register(tu);var Cr=jt.ROTATION,xr=null;function eu(E){return{angle:E.getCurrentAngle()}}var iu={name:Vt.ROTATE_IMAGE,execute:function(p,a,l,r){var c=p.getComponent(Cr);if(!this.isRedo){var x=eu(c);xr=this.setUndoData(x,xr,r)}return c[a](l)},undo:function(p){var a=p.getComponent(Cr),l=lt(this.args,3),r=l[1],c=l[2];return r==="setAngle"?a[r](this.undoData.angle):a.rotate(-c)}};xe.register(iu);var nu={name:Vt.SET_OBJECT_PROPERTIES,execute:function(p,a,l){var r=this,c=p.getObject(a);return c?(this.undoData.props={},Ei()(l,function(x,_){r.undoData.props[_]=c[_]}),p.setObjectProperties(a,l),ct().resolve()):ct().reject(fe.noObject)},undo:function(p,a){var l=this.undoData.props;return p.setObjectProperties(a,l),ct().resolve()}};xe.register(nu);var ru={name:Vt.SET_OBJECT_POSITION,execute:function(p,a,l){var r=p.getObject(a);return r?(this.undoData.objectId=a,this.undoData.props=p.getObjectProperties(a,["left","top"]),p.setObjectPosition(a,l),p.renderAll(),ct().resolve()):ct().reject(fe.noObject)},undo:function(p){var a=this.undoData,l=a.objectId,r=a.props;return p.setObjectProperties(l,r),p.renderAll(),ct().resolve()}};xe.register(ru);var au={name:Vt.CHANGE_SELECTION,execute:function(p,a){return this.isRedo?Yt()(a).call(a,function(l){p.setObjectProperties(l.id,l)}):this.undoData=ac(),ct().resolve()},undo:function(p){var a;return Yt()(a=this.undoData).call(a,function(l){p.setObjectProperties(l.id,l)}),ct().resolve()}};xe.register(au);var Sr=jt.RESIZE,ou={name:Vt.RESIZE_IMAGE,execute:function(p,a){var l=p.getComponent(Sr),r=l.getOriginalDimensions();return r||(r=l.getCurrentDimensions()),this.undoData.dimensions=r,l.resize(a)},undo:function(p){var a=p.getComponent(Sr);return a.resize(this.undoData.dimensions)}};xe.register(ou);var su=kc})(),S=S.default,S})()})})(gn)),gn.exports}var zr;function yu(){return zr||(zr=1,(function(){var ze={9406:function(L,R,S){L.exports=S(4877)},381:function(L,R,S){L.exports=S(5603)},8005:function(L,R,S){L.exports=S(4741)},7870:function(L,R,S){L.exports=S(4194)},7601:function(L,R,S){L.exports=S(2854)},651:function(L,R,S){L.exports=S(2)},2461:function(L,R,S){L.exports=S(5636)},9146:function(L,R,S){L.exports=S(5279)},6623:function(L,R,S){L.exports=S(9297)},7077:function(L,R,S){L.exports=S(8026)},9856:function(L,R,S){L.exports=S(2044)},4230:function(L,R,S){L.exports=S(2214)},184:function(L,R,S){L.exports=S(9256)},3742:function(L,R,S){L.exports=S(5659)},6135:function(L,R,S){S(9106);var y=S(5607);L.exports=y("Array").concat},3971:function(L,R,S){S(3436);var y=S(5607);L.exports=y("Array").filter},2671:function(L,R,S){S(5818);var y=S(5607);L.exports=y("Array").slice},1484:function(L,R,S){var y=S(6135),b=Array.prototype;L.exports=function(d){var h=d.concat;return d===b||d instanceof Array&&h===b.concat?y:h}},3669:function(L,R,S){var y=S(3971),b=Array.prototype;L.exports=function(d){var h=d.filter;return d===b||d instanceof Array&&h===b.filter?y:h}},7663:function(L,R,S){var y=S(2671),b=Array.prototype;L.exports=function(d){var h=d.slice;return d===b||d instanceof Array&&h===b.slice?y:h}},3213:function(L,R,S){S(3113);var y=S(7545).Object;L.exports=function(b,d){return y.create(b,d)}},3512:function(L,R,S){S(297);var y=S(7545).Object,b=L.exports=function(d,h,T){return y.defineProperty(d,h,T)};y.defineProperty.sham&&(b.sham=!0)},632:function(L,R,S){S(9189);var y=S(7545).Object,b=L.exports=function(d,h){return y.getOwnPropertyDescriptor(d,h)};y.getOwnPropertyDescriptor.sham&&(b.sham=!0)},1056:function(L,R,S){S(2509);var y=S(7545);L.exports=y.Object.getOwnPropertyDescriptors},2921:function(L,R,S){S(6187);var y=S(7545);L.exports=y.Object.getOwnPropertySymbols},8168:function(L,R,S){S(9234);var y=S(7545);L.exports=y.Object.getPrototypeOf},8651:function(L,R,S){S(2647);var y=S(7545);L.exports=y.Object.keys},3083:function(L,R,S){S(3222);var y=S(7545);L.exports=y.Object.setPrototypeOf},6577:function(L,R,S){S(5397);var y=S(7545);L.exports=y.Reflect.construct},5008:function(L,R,S){S(9106),S(6663),S(6187),S(9781),S(492),S(6681),S(9594),S(3665),S(9017),S(1250),S(9786),S(503),S(6565),S(9322),S(3610),S(6886),S(3514),S(8671),S(8556),S(1367);var y=S(7545);L.exports=y.Symbol},994:function(L,R,S){S(8939),S(6663),S(5454),S(3665);var y=S(9207);L.exports=y.f("iterator")},9297:function(L,R,S){var y=S(4963);L.exports=y},8026:function(L,R,S){var y=S(7820);L.exports=y},2044:function(L,R,S){var y=S(8980);L.exports=y},2214:function(L,R,S){var y=S(6672);L.exports=y},9256:function(L,R,S){var y=S(2285);S(177),S(9031),S(6658),S(1875),S(8658),S(4592),S(6680),L.exports=y},5659:function(L,R,S){var y=S(8535);L.exports=y},6235:function(L,R,S){var y=S(6447),b=S(9288);L.exports=function(d){if(y(d))return d;throw TypeError(b(d)+" is not a function")}},1404:function(L,R,S){var y=S(2091),b=S(9288);L.exports=function(d){if(y(d))return d;throw TypeError(b(d)+" is not a constructor")}},7757:function(L,R,S){var y=S(6447);L.exports=function(b){if(typeof b=="object"||y(b))return b;throw TypeError("Can't set "+String(b)+" as a prototype")}},7423:function(L){L.exports=function(){}},1138:function(L,R,S){var y=S(5744);L.exports=function(b){if(y(b))return b;throw TypeError(String(b)+" is not an object")}},8180:function(L,R,S){var y=S(101),b=S(7739),d=S(4104),h=function(T){return function(w,O,D){var P,g=y(w),i=d(g),f=b(D,i);if(T&&O!=O){for(;i>f;)if((P=g[f++])!=P)return!0}else for(;i>f;f++)if((T||f in g)&&g[f]===O)return T||f||0;return!T&&-1}};L.exports={includes:h(!0),indexOf:h(!1)}},454:function(L,R,S){var y=S(8043),b=S(2202),d=S(1795),h=S(4104),T=S(1321),w=[].push,O=function(D){var P=D==1,g=D==2,i=D==3,f=D==4,u=D==6,t=D==7,n=D==5||u;return function(e,s,v,o){for(var m,C,I=d(e),M=b(I),k=y(s,v,3),N=h(M),H=0,F=o||T,W=P?F(e,N):g||t?F(e,0):void 0;N>H;H++)if((n||H in M)&&(C=k(m=M[H],H,I),D))if(P)W[H]=C;else if(C)switch(D){case 3:return!0;case 5:return m;case 6:return H;case 2:w.call(W,m)}else switch(D){case 4:return!1;case 7:w.call(W,m)}return u?-1:i||f?f:W}};L.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},242:function(L,R,S){var y=S(6192),b=S(8182),d=S(4218),h=b("species");L.exports=function(T){return d>=51||!y((function(){var w=[];return(w.constructor={})[h]=function(){return{foo:1}},w[T](Boolean).foo!==1}))}},3712:function(L,R,S){var y=S(4770),b=S(2091),d=S(5744),h=S(8182)("species");L.exports=function(T){var w;return y(T)&&(w=T.constructor,(b(w)&&(w===Array||y(w.prototype))||d(w)&&(w=w[h])===null)&&(w=void 0)),w===void 0?Array:w}},1321:function(L,R,S){var y=S(3712);L.exports=function(b,d){return new(y(b))(d===0?0:d)}},9272:function(L){var R={}.toString;L.exports=function(S){return R.call(S).slice(8,-1)}},4696:function(L,R,S){var y=S(3471),b=S(6447),d=S(9272),h=S(8182)("toStringTag"),T=d((function(){return arguments})())=="Arguments";L.exports=y?d:function(w){var O,D,P;return w===void 0?"Undefined":w===null?"Null":typeof(D=(function(g,i){try{return g[i]}catch{}})(O=Object(w),h))=="string"?D:T?d(O):(P=d(O))=="Object"&&b(O.callee)?"Arguments":P}},4635:function(L,R,S){var y=S(6192);L.exports=!y((function(){function b(){}return b.prototype.constructor=null,Object.getPrototypeOf(new b)!==b.prototype}))},5148:function(L,R,S){var y=S(4413).IteratorPrototype,b=S(2853),d=S(774),h=S(1284),T=S(7771),w=function(){return this};L.exports=function(O,D,P){var g=D+" Iterator";return O.prototype=b(y,{next:d(1,P)}),h(O,g,!1,!0),T[g]=w,O}},8711:function(L,R,S){var y=S(69),b=S(2760),d=S(774);L.exports=y?function(h,T,w){return b.f(h,T,d(1,w))}:function(h,T,w){return h[T]=w,h}},774:function(L){L.exports=function(R,S){return{enumerable:!(1&R),configurable:!(2&R),writable:!(4&R),value:S}}},9361:function(L,R,S){var y=S(77),b=S(2760),d=S(774);L.exports=function(h,T,w){var O=y(T);O in h?b.f(h,O,d(0,w)):h[O]=w}},7218:function(L,R,S){var y=S(3085),b=S(5546),d=S(2282),h=S(6447),T=S(5148),w=S(9341),O=S(4469),D=S(1284),P=S(8711),g=S(9482),i=S(8182),f=S(7771),u=S(4413),t=d.PROPER,n=d.CONFIGURABLE,e=u.IteratorPrototype,s=u.BUGGY_SAFARI_ITERATORS,v=i("iterator"),o="keys",m="values",C="entries",I=function(){return this};L.exports=function(M,k,N,H,F,W,it){T(N,k,H);var V,gt,J,mt=function($){if($===F&&Q)return Q;if(!s&&$ in ct)return ct[$];switch($){case o:case m:case C:return function(){return new N(this,$)}}return function(){return new N(this)}},B=k+" Iterator",St=!1,ct=M.prototype,Pt=ct[v]||ct["@@iterator"]||F&&ct[F],Q=!s&&Pt||mt(F),rt=k=="Array"&&ct.entries||Pt;if(rt&&(V=w(rt.call(new M)))!==Object.prototype&&V.next&&(b||w(V)===e||(O?O(V,e):h(V[v])||g(V,v,I)),D(V,B,!0,!0),b&&(f[B]=I)),t&&F==m&&Pt&&Pt.name!==m&&(!b&&n?P(ct,"name",m):(St=!0,Q=function(){return Pt.call(this)})),F)if(gt={values:mt(m),keys:W?Q:mt(o),entries:mt(C)},it)for(J in gt)(s||St||!(J in ct))&&g(ct,J,gt[J]);else y({target:k,proto:!0,forced:s||St},gt);return b&&!it||ct[v]===Q||g(ct,v,Q,{name:F}),f[k]=Q,gt}},1488:function(L,R,S){var y=S(7545),b=S(4500),d=S(9207),h=S(2760).f;L.exports=function(T){var w=y.Symbol||(y.Symbol={});b(w,T)||h(w,T,{value:d.f(T)})}},69:function(L,R,S){var y=S(6192);L.exports=!y((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}))},7449:function(L,R,S){var y=S(8576),b=S(5744),d=y.document,h=b(d)&&b(d.createElement);L.exports=function(T){return h?d.createElement(T):{}}},7365:function(L){L.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8989:function(L,R,S){var y=S(150);L.exports=y("navigator","userAgent")||""},4218:function(L,R,S){var y,b,d=S(8576),h=S(8989),T=d.process,w=d.Deno,O=T&&T.versions||w&&w.version,D=O&&O.v8;D?b=(y=D.split("."))[0]<4?1:y[0]+y[1]:h&&(!(y=h.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=h.match(/Chrome\/(\d+)/))&&(b=y[1]),L.exports=b&&+b},5607:function(L,R,S){var y=S(7545);L.exports=function(b){return y[b+"Prototype"]}},2952:function(L){L.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(L,R,S){var y=S(8576),b=S(6447),d=S(5141).f,h=S(9245),T=S(7545),w=S(8043),O=S(8711),D=S(4500),P=function(g){var i=function(f,u,t){if(this instanceof g){switch(arguments.length){case 0:return new g;case 1:return new g(f);case 2:return new g(f,u)}return new g(f,u,t)}return g.apply(this,arguments)};return i.prototype=g.prototype,i};L.exports=function(g,i){var f,u,t,n,e,s,v,o,m=g.target,C=g.global,I=g.stat,M=g.proto,k=C?y:I?y[m]:(y[m]||{}).prototype,N=C?T:T[m]||O(T,m,{})[m],H=N.prototype;for(t in i)f=!h(C?t:m+(I?".":"#")+t,g.forced)&&k&&D(k,t),e=N[t],f&&(s=g.noTargetGet?(o=d(k,t))&&o.value:k[t]),n=f&&s?s:i[t],f&&typeof e==typeof n||(v=g.bind&&f?w(n,y):g.wrap&&f?P(n):M&&b(n)?w(Function.call,n):n,(g.sham||n&&n.sham||e&&e.sham)&&O(v,"sham",!0),O(N,t,v),M&&(D(T,u=m+"Prototype")||O(T,u,{}),O(T[u],t,n),g.real&&H&&!H[t]&&O(H,t,n)))}},6192:function(L){L.exports=function(R){try{return!!R()}catch{return!0}}},8043:function(L,R,S){var y=S(6235);L.exports=function(b,d,h){if(y(b),d===void 0)return b;switch(h){case 0:return function(){return b.call(d)};case 1:return function(T){return b.call(d,T)};case 2:return function(T,w){return b.call(d,T,w)};case 3:return function(T,w,O){return b.call(d,T,w,O)}}return function(){return b.apply(d,arguments)}}},6782:function(L,R,S){var y=S(6235),b=S(5744),d=[].slice,h={},T=function(w,O,D){if(!(O in h)){for(var P=[],g=0;g<O;g++)P[g]="a["+g+"]";h[O]=Function("C,a","return new C("+P.join(",")+")")}return h[O](w,D)};L.exports=Function.bind||function(w){var O=y(this),D=d.call(arguments,1),P=function(){var g=D.concat(d.call(arguments));return this instanceof P?T(O,g.length,g):O.apply(w,g)};return b(O.prototype)&&(P.prototype=O.prototype),P}},2282:function(L,R,S){var y=S(69),b=S(4500),d=Function.prototype,h=y&&Object.getOwnPropertyDescriptor,T=b(d,"name"),w=T&&(function(){}).name==="something",O=T&&(!y||y&&h(d,"name").configurable);L.exports={EXISTS:T,PROPER:w,CONFIGURABLE:O}},150:function(L,R,S){var y=S(7545),b=S(8576),d=S(6447),h=function(T){return d(T)?T:void 0};L.exports=function(T,w){return arguments.length<2?h(y[T])||h(b[T]):y[T]&&y[T][w]||b[T]&&b[T][w]}},5037:function(L,R,S){var y=S(6235);L.exports=function(b,d){var h=b[d];return h==null?void 0:y(h)}},8576:function(L,R,S){var y=function(b){return b&&b.Math==Math&&b};L.exports=y(typeof globalThis=="object"&&globalThis)||y(typeof window=="object"&&window)||y(typeof self=="object"&&self)||y(typeof S.g=="object"&&S.g)||(function(){return this})()||Function("return this")()},4500:function(L,R,S){var y=S(1795),b={}.hasOwnProperty;L.exports=Object.hasOwn||function(d,h){return b.call(y(d),h)}},4535:function(L){L.exports={}},7403:function(L,R,S){var y=S(150);L.exports=y("document","documentElement")},188:function(L,R,S){var y=S(69),b=S(6192),d=S(7449);L.exports=!y&&!b((function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}))},2202:function(L,R,S){var y=S(6192),b=S(9272),d="".split;L.exports=y((function(){return!Object("z").propertyIsEnumerable(0)}))?function(h){return b(h)=="String"?d.call(h,""):Object(h)}:Object},9516:function(L,R,S){var y=S(6447),b=S(6434),d=Function.toString;y(b.inspectSource)||(b.inspectSource=function(h){return d.call(h)}),L.exports=b.inspectSource},3326:function(L,R,S){var y,b,d,h=S(8921),T=S(8576),w=S(5744),O=S(8711),D=S(4500),P=S(6434),g=S(9766),i=S(4535),f="Object already initialized",u=T.WeakMap;if(h||P.state){var t=P.state||(P.state=new u),n=t.get,e=t.has,s=t.set;y=function(o,m){if(e.call(t,o))throw new TypeError(f);return m.facade=o,s.call(t,o,m),m},b=function(o){return n.call(t,o)||{}},d=function(o){return e.call(t,o)}}else{var v=g("state");i[v]=!0,y=function(o,m){if(D(o,v))throw new TypeError(f);return m.facade=o,O(o,v,m),m},b=function(o){return D(o,v)?o[v]:{}},d=function(o){return D(o,v)}}L.exports={set:y,get:b,has:d,enforce:function(o){return d(o)?b(o):y(o,{})},getterFor:function(o){return function(m){var C;if(!w(m)||(C=b(m)).type!==o)throw TypeError("Incompatible receiver, "+o+" required");return C}}}},4770:function(L,R,S){var y=S(9272);L.exports=Array.isArray||function(b){return y(b)=="Array"}},6447:function(L){L.exports=function(R){return typeof R=="function"}},2091:function(L,R,S){var y=S(6192),b=S(6447),d=S(4696),h=S(150),T=S(9516),w=[],O=h("Reflect","construct"),D=/^\s*(?:class|function)\b/,P=D.exec,g=!D.exec((function(){})),i=function(f){if(!b(f))return!1;try{return O(Object,w,f),!0}catch{return!1}};L.exports=!O||y((function(){var f;return i(i.call)||!i(Object)||!i((function(){f=!0}))||f}))?function(f){if(!b(f))return!1;switch(d(f)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return g||!!P.call(D,T(f))}:i},9245:function(L,R,S){var y=S(6192),b=S(6447),d=/#|\.prototype\./,h=function(P,g){var i=w[T(P)];return i==D||i!=O&&(b(g)?y(g):!!g)},T=h.normalize=function(P){return String(P).replace(d,".").toLowerCase()},w=h.data={},O=h.NATIVE="N",D=h.POLYFILL="P";L.exports=h},5744:function(L,R,S){var y=S(6447);L.exports=function(b){return typeof b=="object"?b!==null:y(b)}},5546:function(L){L.exports=!0},3236:function(L,R,S){var y=S(6447),b=S(150),d=S(615);L.exports=d?function(h){return typeof h=="symbol"}:function(h){var T=b("Symbol");return y(T)&&Object(h)instanceof T}},4413:function(L,R,S){var y,b,d,h=S(6192),T=S(6447),w=S(2853),O=S(9341),D=S(9482),P=S(8182),g=S(5546),i=P("iterator"),f=!1;[].keys&&("next"in(d=[].keys())?(b=O(O(d)))!==Object.prototype&&(y=b):f=!0),y==null||h((function(){var u={};return y[i].call(u)!==u}))?y={}:g&&(y=w(y)),T(y[i])||D(y,i,(function(){return this})),L.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:f}},7771:function(L){L.exports={}},4104:function(L,R,S){var y=S(8445);L.exports=function(b){return y(b.length)}},3045:function(L,R,S){var y=S(4218),b=S(6192);L.exports=!!Object.getOwnPropertySymbols&&!b((function(){var d=Symbol();return!String(d)||!(Object(d)instanceof Symbol)||!Symbol.sham&&y&&y<41}))},8921:function(L,R,S){var y=S(8576),b=S(6447),d=S(9516),h=y.WeakMap;L.exports=b(h)&&/native code/.test(d(h))},2853:function(L,R,S){var y,b=S(1138),d=S(1187),h=S(2952),T=S(4535),w=S(7403),O=S(7449),D=S(9766)("IE_PROTO"),P=function(){},g=function(u){return"<script>"+u+"<\/script>"},i=function(u){u.write(g("")),u.close();var t=u.parentWindow.Object;return u=null,t},f=function(){try{y=new ActiveXObject("htmlfile")}catch{}var u,t;f=typeof document<"u"?document.domain&&y?i(y):((t=O("iframe")).style.display="none",w.appendChild(t),t.src="javascript:",(u=t.contentWindow.document).open(),u.write(g("document.F=Object")),u.close(),u.F):i(y);for(var n=h.length;n--;)delete f.prototype[h[n]];return f()};T[D]=!0,L.exports=Object.create||function(u,t){var n;return u!==null?(P.prototype=b(u),n=new P,P.prototype=null,n[D]=u):n=f(),t===void 0?n:d(n,t)}},1187:function(L,R,S){var y=S(69),b=S(2760),d=S(1138),h=S(7653);L.exports=y?Object.defineProperties:function(T,w){d(T);for(var O,D=h(w),P=D.length,g=0;P>g;)b.f(T,O=D[g++],w[O]);return T}},2760:function(L,R,S){var y=S(69),b=S(188),d=S(1138),h=S(77),T=Object.defineProperty;R.f=y?T:function(w,O,D){if(d(w),O=h(O),d(D),b)try{return T(w,O,D)}catch{}if("get"in D||"set"in D)throw TypeError("Accessors not supported");return"value"in D&&(w[O]=D.value),w}},5141:function(L,R,S){var y=S(69),b=S(6007),d=S(774),h=S(101),T=S(77),w=S(4500),O=S(188),D=Object.getOwnPropertyDescriptor;R.f=y?D:function(P,g){if(P=h(P),g=T(g),O)try{return D(P,g)}catch{}if(w(P,g))return d(!b.f.call(P,g),P[g])}},4052:function(L,R,S){var y=S(101),b=S(2092).f,d={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];L.exports.f=function(T){return h&&d.call(T)=="[object Window]"?(function(w){try{return b(w)}catch{return h.slice()}})(T):b(y(T))}},2092:function(L,R,S){var y=S(7934),b=S(2952).concat("length","prototype");R.f=Object.getOwnPropertyNames||function(d){return y(d,b)}},4750:function(L,R){R.f=Object.getOwnPropertySymbols},9341:function(L,R,S){var y=S(4500),b=S(6447),d=S(1795),h=S(9766),T=S(4635),w=h("IE_PROTO"),O=Object.prototype;L.exports=T?Object.getPrototypeOf:function(D){var P=d(D);if(y(P,w))return P[w];var g=P.constructor;return b(g)&&P instanceof g?g.prototype:P instanceof Object?O:null}},7934:function(L,R,S){var y=S(4500),b=S(101),d=S(8180).indexOf,h=S(4535);L.exports=function(T,w){var O,D=b(T),P=0,g=[];for(O in D)!y(h,O)&&y(D,O)&&g.push(O);for(;w.length>P;)y(D,O=w[P++])&&(~d(g,O)||g.push(O));return g}},7653:function(L,R,S){var y=S(7934),b=S(2952);L.exports=Object.keys||function(d){return y(d,b)}},6007:function(L,R){var S={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b=y&&!S.call({1:2},1);R.f=b?function(d){var h=y(this,d);return!!h&&h.enumerable}:S},4469:function(L,R,S){var y=S(1138),b=S(7757);L.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var d,h=!1,T={};try{(d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(T,[]),h=T instanceof Array}catch{}return function(w,O){return y(w),b(O),h?d.call(w,O):w.__proto__=O,w}})():void 0)},158:function(L,R,S){var y=S(3471),b=S(4696);L.exports=y?{}.toString:function(){return"[object "+b(this)+"]"}},380:function(L,R,S){var y=S(6447),b=S(5744);L.exports=function(d,h){var T,w;if(h==="string"&&y(T=d.toString)&&!b(w=T.call(d))||y(T=d.valueOf)&&!b(w=T.call(d))||h!=="string"&&y(T=d.toString)&&!b(w=T.call(d)))return w;throw TypeError("Can't convert object to primitive value")}},3011:function(L,R,S){var y=S(150),b=S(2092),d=S(4750),h=S(1138);L.exports=y("Reflect","ownKeys")||function(T){var w=b.f(h(T)),O=d.f;return O?w.concat(O(T)):w}},7545:function(L){L.exports={}},9482:function(L,R,S){var y=S(8711);L.exports=function(b,d,h,T){T&&T.enumerable?b[d]=h:y(b,d,h)}},3209:function(L){L.exports=function(R){if(R==null)throw TypeError("Can't call method on "+R);return R}},7613:function(L,R,S){var y=S(8576);L.exports=function(b,d){try{Object.defineProperty(y,b,{value:d,configurable:!0,writable:!0})}catch{y[b]=d}return d}},1284:function(L,R,S){var y=S(3471),b=S(2760).f,d=S(8711),h=S(4500),T=S(158),w=S(8182)("toStringTag");L.exports=function(O,D,P,g){if(O){var i=P?O:O.prototype;h(i,w)||b(i,w,{configurable:!0,value:D}),g&&!y&&d(i,"toString",T)}}},9766:function(L,R,S){var y=S(8717),b=S(2759),d=y("keys");L.exports=function(h){return d[h]||(d[h]=b(h))}},6434:function(L,R,S){var y=S(8576),b=S(7613),d="__core-js_shared__",h=y[d]||b(d,{});L.exports=h},8717:function(L,R,S){var y=S(5546),b=S(6434);(L.exports=function(d,h){return b[d]||(b[d]=h!==void 0?h:{})})("versions",[]).push({version:"3.18.2",mode:y?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},863:function(L,R,S){var y=S(1941),b=S(4845),d=S(3209),h=function(T){return function(w,O){var D,P,g=b(d(w)),i=y(O),f=g.length;return i<0||i>=f?T?"":void 0:(D=g.charCodeAt(i))<55296||D>56319||i+1===f||(P=g.charCodeAt(i+1))<56320||P>57343?T?g.charAt(i):D:T?g.slice(i,i+2):P-56320+(D-55296<<10)+65536}};L.exports={codeAt:h(!1),charAt:h(!0)}},7739:function(L,R,S){var y=S(1941),b=Math.max,d=Math.min;L.exports=function(h,T){var w=y(h);return w<0?b(w+T,0):d(w,T)}},101:function(L,R,S){var y=S(2202),b=S(3209);L.exports=function(d){return y(b(d))}},1941:function(L){var R=Math.ceil,S=Math.floor;L.exports=function(y){var b=+y;return b!=b||b===0?0:(b>0?S:R)(b)}},8445:function(L,R,S){var y=S(1941),b=Math.min;L.exports=function(d){return d>0?b(y(d),9007199254740991):0}},1795:function(L,R,S){var y=S(3209);L.exports=function(b){return Object(y(b))}},7888:function(L,R,S){var y=S(5744),b=S(3236),d=S(5037),h=S(380),T=S(8182)("toPrimitive");L.exports=function(w,O){if(!y(w)||b(w))return w;var D,P=d(w,T);if(P){if(O===void 0&&(O="default"),D=P.call(w,O),!y(D)||b(D))return D;throw TypeError("Can't convert object to primitive value")}return O===void 0&&(O="number"),h(w,O)}},77:function(L,R,S){var y=S(7888),b=S(3236);L.exports=function(d){var h=y(d,"string");return b(h)?h:String(h)}},3471:function(L,R,S){var y={};y[S(8182)("toStringTag")]="z",L.exports=String(y)==="[object z]"},4845:function(L,R,S){var y=S(4696);L.exports=function(b){if(y(b)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(b)}},9288:function(L){L.exports=function(R){try{return String(R)}catch{return"Object"}}},2759:function(L){var R=0,S=Math.random();L.exports=function(y){return"Symbol("+String(y===void 0?"":y)+")_"+(++R+S).toString(36)}},615:function(L,R,S){var y=S(3045);L.exports=y&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(L,R,S){var y=S(8182);R.f=y},8182:function(L,R,S){var y=S(8576),b=S(8717),d=S(4500),h=S(2759),T=S(3045),w=S(615),O=b("wks"),D=y.Symbol,P=w?D:D&&D.withoutSetter||h;L.exports=function(g){return d(O,g)&&(T||typeof O[g]=="string")||(T&&d(D,g)?O[g]=D[g]:O[g]=P("Symbol."+g)),O[g]}},9106:function(L,R,S){var y=S(3085),b=S(6192),d=S(4770),h=S(5744),T=S(1795),w=S(4104),O=S(9361),D=S(1321),P=S(242),g=S(8182),i=S(4218),f=g("isConcatSpreadable"),u=9007199254740991,t="Maximum allowed index exceeded",n=i>=51||!b((function(){var v=[];return v[f]=!1,v.concat()[0]!==v})),e=P("concat"),s=function(v){if(!h(v))return!1;var o=v[f];return o!==void 0?!!o:d(v)};y({target:"Array",proto:!0,forced:!n||!e},{concat:function(v){var o,m,C,I,M,k=T(this),N=D(k,0),H=0;for(o=-1,C=arguments.length;o<C;o++)if(s(M=o===-1?k:arguments[o])){if(H+(I=w(M))>u)throw TypeError(t);for(m=0;m<I;m++,H++)m in M&&O(N,H,M[m])}else{if(H>=u)throw TypeError(t);O(N,H++,M)}return N.length=H,N}})},3436:function(L,R,S){var y=S(3085),b=S(454).filter;y({target:"Array",proto:!0,forced:!S(242)("filter")},{filter:function(d){return b(this,d,arguments.length>1?arguments[1]:void 0)}})},8939:function(L,R,S){var y=S(101),b=S(7423),d=S(7771),h=S(3326),T=S(7218),w="Array Iterator",O=h.set,D=h.getterFor(w);L.exports=T(Array,"Array",(function(P,g){O(this,{type:w,target:y(P),index:0,kind:g})}),(function(){var P=D(this),g=P.target,i=P.kind,f=P.index++;return!g||f>=g.length?(P.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:f,done:!1}:i=="values"?{value:g[f],done:!1}:{value:[f,g[f]],done:!1}}),"values"),d.Arguments=d.Array,b("keys"),b("values"),b("entries")},5818:function(L,R,S){var y=S(3085),b=S(4770),d=S(2091),h=S(5744),T=S(7739),w=S(4104),O=S(101),D=S(9361),P=S(8182),g=S(242)("slice"),i=P("species"),f=[].slice,u=Math.max;y({target:"Array",proto:!0,forced:!g},{slice:function(t,n){var e,s,v,o=O(this),m=w(o),C=T(t,m),I=T(n===void 0?m:n,m);if(b(o)&&(e=o.constructor,(d(e)&&(e===Array||b(e.prototype))||h(e)&&(e=e[i])===null)&&(e=void 0),e===Array||e===void 0))return f.call(o,C,I);for(s=new(e===void 0?Array:e)(u(I-C,0)),v=0;C<I;C++,v++)C in o&&D(s,v,o[C]);return s.length=v,s}})},8671:function(L,R,S){var y=S(8576);S(1284)(y.JSON,"JSON",!0)},8556:function(){},3113:function(L,R,S){S(3085)({target:"Object",stat:!0,sham:!S(69)},{create:S(2853)})},297:function(L,R,S){var y=S(3085),b=S(69);y({target:"Object",stat:!0,forced:!b,sham:!b},{defineProperty:S(2760).f})},9189:function(L,R,S){var y=S(3085),b=S(6192),d=S(101),h=S(5141).f,T=S(69),w=b((function(){h(1)}));y({target:"Object",stat:!0,forced:!T||w,sham:!T},{getOwnPropertyDescriptor:function(O,D){return h(d(O),D)}})},2509:function(L,R,S){var y=S(3085),b=S(69),d=S(3011),h=S(101),T=S(5141),w=S(9361);y({target:"Object",stat:!0,sham:!b},{getOwnPropertyDescriptors:function(O){for(var D,P,g=h(O),i=T.f,f=d(g),u={},t=0;f.length>t;)(P=i(g,D=f[t++]))!==void 0&&w(u,D,P);return u}})},9234:function(L,R,S){var y=S(3085),b=S(6192),d=S(1795),h=S(9341),T=S(4635);y({target:"Object",stat:!0,forced:b((function(){h(1)})),sham:!T},{getPrototypeOf:function(w){return h(d(w))}})},2647:function(L,R,S){var y=S(3085),b=S(1795),d=S(7653);y({target:"Object",stat:!0,forced:S(6192)((function(){d(1)}))},{keys:function(h){return d(b(h))}})},3222:function(L,R,S){S(3085)({target:"Object",stat:!0},{setPrototypeOf:S(4469)})},6663:function(){},5397:function(L,R,S){var y=S(3085),b=S(150),d=S(1404),h=S(1138),T=S(5744),w=S(2853),O=S(6782),D=S(6192),P=b("Reflect","construct"),g=D((function(){function u(){}return!(P((function(){}),[],u)instanceof u)})),i=!D((function(){P((function(){}))})),f=g||i;y({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(u,t){d(u),h(t);var n=arguments.length<3?u:d(arguments[2]);if(i&&!g)return P(u,t,n);if(u==n){switch(t.length){case 0:return new u;case 1:return new u(t[0]);case 2:return new u(t[0],t[1]);case 3:return new u(t[0],t[1],t[2]);case 4:return new u(t[0],t[1],t[2],t[3])}var e=[null];return e.push.apply(e,t),new(O.apply(u,e))}var s=n.prototype,v=w(T(s)?s:Object.prototype),o=Function.apply.call(u,v,t);return T(o)?o:v}})},1367:function(){},5454:function(L,R,S){var y=S(863).charAt,b=S(4845),d=S(3326),h=S(7218),T="String Iterator",w=d.set,O=d.getterFor(T);h(String,"String",(function(D){w(this,{type:T,string:b(D),index:0})}),(function(){var D,P=O(this),g=P.string,i=P.index;return i>=g.length?{value:void 0,done:!0}:(D=y(g,i),P.index+=D.length,{value:D,done:!1})}))},9781:function(L,R,S){S(1488)("asyncIterator")},492:function(){},6681:function(L,R,S){S(1488)("hasInstance")},9594:function(L,R,S){S(1488)("isConcatSpreadable")},3665:function(L,R,S){S(1488)("iterator")},6187:function(L,R,S){var y=S(3085),b=S(8576),d=S(150),h=S(5546),T=S(69),w=S(3045),O=S(6192),D=S(4500),P=S(4770),g=S(6447),i=S(5744),f=S(3236),u=S(1138),t=S(1795),n=S(101),e=S(77),s=S(4845),v=S(774),o=S(2853),m=S(7653),C=S(2092),I=S(4052),M=S(4750),k=S(5141),N=S(2760),H=S(6007),F=S(9482),W=S(8717),it=S(9766),V=S(4535),gt=S(2759),J=S(8182),mt=S(9207),B=S(1488),St=S(1284),ct=S(3326),Pt=S(454).forEach,Q=it("hidden"),rt="Symbol",$=J("toPrimitive"),X=ct.set,at=ct.getterFor(rt),Y=Object.prototype,G=b.Symbol,Z=d("JSON","stringify"),q=k.f,pt=N.f,ft=I.f,It=H.f,bt=W("symbols"),Mt=W("op-symbols"),ot=W("string-to-symbol-registry"),tt=W("symbol-to-string-registry"),et=W("wks"),lt=b.QObject,ut=!lt||!lt.prototype||!lt.prototype.findChild,yt=T&&O((function(){return o(pt({},"a",{get:function(){return pt(this,"a",{value:7}).a}})).a!=7}))?function(zt,Gt,Ut){var qt=q(Y,Gt);qt&&delete Y[Gt],pt(zt,Gt,Ut),qt&&zt!==Y&&pt(Y,Gt,qt)}:pt,At=function(zt,Gt){var Ut=bt[zt]=o(G.prototype);return X(Ut,{type:rt,tag:zt,description:Gt}),T||(Ut.description=Gt),Ut},Yt=function(zt,Gt,Ut){zt===Y&&Yt(Mt,Gt,Ut),u(zt);var qt=e(Gt);return u(Ut),D(bt,qt)?(Ut.enumerable?(D(zt,Q)&&zt[Q][qt]&&(zt[Q][qt]=!1),Ut=o(Ut,{enumerable:v(0,!1)})):(D(zt,Q)||pt(zt,Q,v(1,{})),zt[Q][qt]=!0),yt(zt,qt,Ut)):pt(zt,qt,Ut)},Ht=function(zt,Gt){u(zt);var Ut=n(Gt),qt=m(Ut).concat(ae(Ut));return Pt(qt,(function(oe){T&&!xt.call(Ut,oe)||Yt(zt,oe,Ut[oe])})),zt},xt=function(zt){var Gt=e(zt),Ut=It.call(this,Gt);return!(this===Y&&D(bt,Gt)&&!D(Mt,Gt))&&(!(Ut||!D(this,Gt)||!D(bt,Gt)||D(this,Q)&&this[Q][Gt])||Ut)},Xt=function(zt,Gt){var Ut=n(zt),qt=e(Gt);if(Ut!==Y||!D(bt,qt)||D(Mt,qt)){var oe=q(Ut,qt);return!oe||!D(bt,qt)||D(Ut,Q)&&Ut[Q][qt]||(oe.enumerable=!0),oe}},Jt=function(zt){var Gt=ft(n(zt)),Ut=[];return Pt(Gt,(function(qt){D(bt,qt)||D(V,qt)||Ut.push(qt)})),Ut},ae=function(zt){var Gt=zt===Y,Ut=ft(Gt?Mt:n(zt)),qt=[];return Pt(Ut,(function(oe){!D(bt,oe)||Gt&&!D(Y,oe)||qt.push(bt[oe])})),qt};if(w||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var zt=arguments.length&&arguments[0]!==void 0?s(arguments[0]):void 0,Gt=gt(zt),Ut=function(qt){this===Y&&Ut.call(Mt,qt),D(this,Q)&&D(this[Q],Gt)&&(this[Q][Gt]=!1),yt(this,Gt,v(1,qt))};return T&&ut&&yt(Y,Gt,{configurable:!0,set:Ut}),At(Gt,zt)},F(G.prototype,"toString",(function(){return at(this).tag})),F(G,"withoutSetter",(function(zt){return At(gt(zt),zt)})),H.f=xt,N.f=Yt,k.f=Xt,C.f=I.f=Jt,M.f=ae,mt.f=function(zt){return At(J(zt),zt)},T&&(pt(G.prototype,"description",{configurable:!0,get:function(){return at(this).description}}),h||F(Y,"propertyIsEnumerable",xt,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:G}),Pt(m(et),(function(zt){B(zt)})),y({target:rt,stat:!0,forced:!w},{for:function(zt){var Gt=s(zt);if(D(ot,Gt))return ot[Gt];var Ut=G(Gt);return ot[Gt]=Ut,tt[Ut]=Gt,Ut},keyFor:function(zt){if(!f(zt))throw TypeError(zt+" is not a symbol");if(D(tt,zt))return tt[zt]},useSetter:function(){ut=!0},useSimple:function(){ut=!1}}),y({target:"Object",stat:!0,forced:!w,sham:!T},{create:function(zt,Gt){return Gt===void 0?o(zt):Ht(o(zt),Gt)},defineProperty:Yt,defineProperties:Ht,getOwnPropertyDescriptor:Xt}),y({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:Jt,getOwnPropertySymbols:ae}),y({target:"Object",stat:!0,forced:O((function(){M.f(1)}))},{getOwnPropertySymbols:function(zt){return M.f(t(zt))}}),Z&&y({target:"JSON",stat:!0,forced:!w||O((function(){var zt=G();return Z([zt])!="[null]"||Z({a:zt})!="{}"||Z(Object(zt))!="{}"}))},{stringify:function(zt,Gt,Ut){for(var qt,oe=[zt],be=1;arguments.length>be;)oe.push(arguments[be++]);if(qt=Gt,(i(Gt)||zt!==void 0)&&!f(zt))return P(Gt)||(Gt=function(Tt,Et){if(g(qt)&&(Et=qt.call(this,Tt,Et)),!f(Et))return Et}),oe[1]=Gt,Z.apply(null,oe)}}),!G.prototype[$]){var pe=G.prototype.valueOf;F(G.prototype,$,(function(){return pe.apply(this,arguments)}))}St(G,rt),V[Q]=!0},1250:function(L,R,S){S(1488)("matchAll")},9017:function(L,R,S){S(1488)("match")},9786:function(L,R,S){S(1488)("replace")},503:function(L,R,S){S(1488)("search")},6565:function(L,R,S){S(1488)("species")},9322:function(L,R,S){S(1488)("split")},3610:function(L,R,S){S(1488)("toPrimitive")},6886:function(L,R,S){S(1488)("toStringTag")},3514:function(L,R,S){S(1488)("unscopables")},177:function(L,R,S){S(1488)("asyncDispose")},9031:function(L,R,S){S(1488)("dispose")},6658:function(L,R,S){S(1488)("matcher")},1875:function(L,R,S){S(1488)("metadata")},8658:function(L,R,S){S(1488)("observable")},4592:function(L,R,S){S(1488)("patternMatch")},6680:function(L,R,S){S(1488)("replaceAll")},162:function(L,R,S){S(8939);var y=S(7365),b=S(8576),d=S(4696),h=S(8711),T=S(7771),w=S(8182)("toStringTag");for(var O in y){var D=b[O],P=D&&D.prototype;P&&d(P)!==w&&h(P,w,O),T[O]=T.Array}},4877:function(L,R,S){var y=S(1484);L.exports=y},5603:function(L,R,S){var y=S(3669);L.exports=y},4741:function(L,R,S){var y=S(7663);L.exports=y},4963:function(L,R,S){var y=S(3213);L.exports=y},7820:function(L,R,S){var y=S(3512);L.exports=y},4194:function(L,R,S){var y=S(632);L.exports=y},2854:function(L,R,S){var y=S(1056);L.exports=y},2:function(L,R,S){var y=S(2921);L.exports=y},8980:function(L,R,S){var y=S(8168);L.exports=y},5636:function(L,R,S){var y=S(8651);L.exports=y},6672:function(L,R,S){var y=S(3083);L.exports=y},5279:function(L,R,S){var y=S(6577);L.exports=y},2285:function(L,R,S){var y=S(5008);S(162),L.exports=y},8535:function(L,R,S){var y=S(994);S(162),L.exports=y}},Ze={};function Ct(L){var R=Ze[L];if(R!==void 0)return R.exports;var S=Ze[L]={exports:{}};return ze[L](S,S.exports,Ct),S.exports}Ct.n=function(L){var R=L&&L.__esModule?function(){return L.default}:function(){return L};return Ct.d(R,{a:R}),R},Ct.d=function(L,R){for(var S in R)Ct.o(R,S)&&!Ct.o(L,S)&&Object.defineProperty(L,S,{enumerable:!0,get:R[S]})},Ct.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),Ct.o=function(L,R){return Object.prototype.hasOwnProperty.call(L,R)},Ct.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var Zt={};(function(){Ct.r(Zt),Ct.d(Zt,{default:function(){return mt}});var L=Ct(9146),R=Ct.n(L),S=Ct(651),y=Ct.n(S),b=Ct(7870),d=Ct.n(b),h=Ct(7601),T=Ct.n(h);function w(B,St){if(!(B instanceof St))throw new TypeError("Cannot call a class as a function")}var O=Ct(7077);function D(B,St){for(var ct=0;ct<St.length;ct++){var Pt=St[ct];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),O(B,Pt.key,Pt)}}function P(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}var g=Ct(6623),i=Ct(4230);function f(B,St){return f=i||function(ct,Pt){return ct.__proto__=Pt,ct},f(B,St)}var u=Ct(184),t=Ct(3742);function n(B){return n=typeof u=="function"&&typeof t=="symbol"?function(St){return typeof St}:function(St){return St&&typeof u=="function"&&St.constructor===u&&St!==u.prototype?"symbol":typeof St},n(B)}function e(B,St){if(St&&(n(St)==="object"||typeof St=="function"))return St;if(St!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(B)}var s=Ct(9856);function v(B){return v=i?s:function(St){return St.__proto__||s(St)},v(B)}function o(B,St,ct){return St in B?O(B,St,{value:ct,enumerable:!0,configurable:!0,writable:!0}):B[St]=ct,B}var m=Ct(9406),C=Ct.n(m),I=Ct(381),M=Ct.n(I),k=Ct(2461),N=Ct.n(k),H=Ct(8005),F=Ct.n(H),W=lu(),it=Ct.n(W),V=mu(),gt=Ct.n(V);function J(B,St){var ct=N()(B);if(y()){var Pt=y()(B);St&&(Pt=M()(Pt).call(Pt,(function(Q){return d()(B,Q).enumerable}))),ct.push.apply(ct,Pt)}return ct}var mt=(function(B){(function(X,at){if(typeof at!="function"&&at!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=g(at&&at.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),at&&f(X,at)})($,B);var St,ct,Pt,Q,rt=(Pt=$,Q=(function(){if(typeof Reflect>"u"||!R()||R().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(R()(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var X,at=v(Pt);if(Q){var Y=v(this).constructor;X=R()(at,arguments,Y)}else X=at.apply(this,arguments);return e(this,X)});function $(){var X,at;w(this,$);for(var Y=arguments.length,G=new Array(Y),Z=0;Z<Y;Z++)G[Z]=arguments[Z];return o(P(at=rt.call.apply(rt,C()(X=[this]).call(X,G))),"rootEl",it().createRef()),o(P(at),"imageEditorInst",null),at}return St=$,ct=[{key:"componentDidMount",value:function(){this.imageEditorInst=new(gt())(this.rootEl.current,(function(X){for(var at=1;at<arguments.length;at++){var Y=arguments[at]!=null?arguments[at]:{};at%2?J(Object(Y),!0).forEach((function(G){o(X,G,Y[G])})):T()?Object.defineProperties(X,T()(Y)):J(Object(Y)).forEach((function(G){Object.defineProperty(X,G,d()(Y,G))}))}return X})({},this.props)),this.bindEventHandlers(this.props)}},{key:"componentWillUnmount",value:function(){this.unbindEventHandlers(),this.imageEditorInst.destroy(),this.imageEditorInst=null}},{key:"shouldComponentUpdate",value:function(X){return this.bindEventHandlers(this.props,X),!1}},{key:"getInstance",value:function(){return this.imageEditorInst}},{key:"getRootElement",value:function(){return this.rootEl.current}},{key:"bindEventHandlers",value:function(X,at){var Y,G=this;M()(Y=N()(X)).call(Y,this.isEventHandlerKeys).forEach((function(Z){var q=Z[2].toLowerCase()+F()(Z).call(Z,3);at&&at[Z]!==X[Z]&&G.imageEditorInst.off(q),G.imageEditorInst.on(q,X[Z])}))}},{key:"unbindEventHandlers",value:function(){var X,at=this;M()(X=N()(this.props)).call(X,this.isEventHandlerKeys).forEach((function(Y){var G=Y[2].toLowerCase()+F()(Y).call(Y,3);at.imageEditorInst.off(G)}))}},{key:"isEventHandlerKeys",value:function(X){return/on[A-Z][a-zA-Z]+/.test(X)}},{key:"render",value:function(){return it().createElement("div",{ref:this.rootEl})}}],ct&&D(St.prototype,ct),$})(it().Component)})(),dn.exports=Zt})()),dn.exports}var Cu=yu();const xu=cu(Cu),Su={"common.bi.image":"","common.bisize.height":"21px","common.backgroundColor":"#F5F6FA","header.backgroundImage":"none","header.backgroundColor":"#fff","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#434343","menu.activeIcon.color":"#434343","menu.activeIcon.backgroundColor":"#434343","menu.disabledIcon.color":"#e9e9e9","menu.hoverIcon.color":"#fff","menu.iconSize.width":"32px","menu.iconSize.height":"32px","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#555555","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"transparent","submenu.partition.color":"#e5e5e5","submenu.normalLabel.color":"#434343","submenu.normalLabel.fontWeight":"normal","submenu.activeLabel.color":"#000","submenu.activeLabel.fontWeight":"normal","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#333","range.bar.color":"#ccc","range.subbar.color":"#606060","range.disabledPointer.color":"#d3d3d3","range.disabledBar.color":"rgba(85,85,85,0.06)","range.disabledSubbar.color":"rgba(51,51,51,0.2)","range.value.color":"#000","range.value.fontWeight":"normal","range.value.fontSize":"11px","range.value.border":"0","range.value.backgroundColor":"#f5f5f5","range.title.color":"#000","range.title.fontWeight":"lighter","colorpicker.button.border":"0px","colorpicker.title.color":"#000"},bu={"common.bi.image":"","common.bisize.height":"21px","common.backgroundColor":"#1e1e1e","header.backgroundImage":"none","header.backgroundColor":"#1e1e1e","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#FFF","menu.activeIcon.color":"#434343","menu.activeIcon.backgroundColor":"#fff","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#fff","menu.iconSize.width":"32px","menu.iconSize.height":"32px","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#eee","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"normal","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"normal","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"normal","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},_u=({mode:ze="create"})=>{const{id:Ze,chartId:Ct}=uu(),Zt=hu(),[L,R]=je.useState(""),[S,y]=je.useState(""),[b,d]=je.useState(""),[h,T]=je.useState(!1),[w,O]=je.useState(!1),[D,P]=je.useState([]),[g,i]=je.useState(["shape","filter"]),[f,u]=je.useState("whiteTheme"),[t,n]=je.useState("left"),e=je.useRef(null),s=je.useRef(null),{data:v,isLoading:o}=fu({chartId:Ct??-1,encounterId:Ze??-1});je.useEffect(()=>{if(!o&&v){const V=v.data.body_chart_data;V&&(y(V.name||""),d(V.description||""));const gt=v.data.settings;if(gt?.defaultImageData&&Array.isArray(gt.defaultImageData)){const St=gt.defaultImageData.map((ct,Pt)=>({id:ct.imageId||Pt+1,name:ct.name||`Template ${Pt+1}`,image:ct.url,category:"Body Chart Template",imageId:ct.imageId}));console.log("Setting templates:",St),P(St)}gt?.menu&&Array.isArray(gt.menu)&&i(gt.menu),gt?.theme&&u(gt.theme),gt?.menuBarPosition&&n(gt.menuBarPosition);const J=v.data.image_data;let mt="",B="";if(J&&J.url)console.log("Setting image from image_data:",J.url),mt=J.url;else if(gt?.defaultImageData&&gt.defaultImage){const St=gt.defaultImageData.find(ct=>ct.imageId===gt.defaultImage);St&&(console.log("Setting default template image:",St.url),mt=St.url,V?.name||(B=St.name))}mt&&R(mt),B&&y(B)}},[o,v]),je.useEffect(()=>{if(!L)return;let V=0;const gt=6,J=250,mt=()=>{V+=1;try{const Pt=s.current?.getInstance?.()?.getRootElement?.()||document,Q=Pt.querySelector?Pt.querySelector(".tui-image-editor-help-menu.right"):document.querySelector(".tui-image-editor-help-menu.right");if(Q){Q.classList.remove("right"),Q.classList.add("bottom");return}}catch(ct){console.error("Failed to reposition ImageEditor help menu",ct)}V<gt&&setTimeout(mt,J)},St=setTimeout(mt,100);return()=>clearTimeout(St)},[L]);const m=du({onSuccess:V=>{if(V.status===!1){vi.fire({title:ye("Error","kivicare-clinic-management-system"),text:V.message||ye("Failed to save body chart","kivicare-clinic-management-system"),icon:"error"}),T(!1);return}vi.fire({title:ye("Success","kivicare-clinic-management-system"),text:ye("Body chart saved successfully","kivicare-clinic-management-system"),icon:"success",timer:2e3}).then(()=>{Zt(`/encounter/dashboard/${Ze}/body-chart`)})},onError:V=>{vi.fire({title:ye("Error","kivicare-clinic-management-system"),text:V.message||ye("Failed to save body chart","kivicare-clinic-management-system"),icon:"error"}),T(!1)}}),C=()=>{O(!0)},I=()=>{if(e.current){const V=e.current.querySelector(".kc-image-upload-label");if(V){const gt=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});V.dispatchEvent(gt)}}},M=V=>{const gt=V.split(";base64,"),J=gt[0].split(":")[1],mt=atob(gt[1]),B=new Array(mt.length);for(let ct=0;ct<mt.length;ct++)B[ct]=mt.charCodeAt(ct);const St=new Uint8Array(B);return new Blob([St],{type:J})},k=async()=>{try{const V=s.current?.getInstance?.(),gt=V&&typeof V.getImageName=="function"?V.getImageName():"body-chart.png",J=V&&typeof V.toDataURL=="function"?V.toDataURL():null;if(J){const mt=M(J),B=URL.createObjectURL(mt);window.open(B,"_blank"),setTimeout(()=>URL.revokeObjectURL(B),100)}else s.current?.invoke("downloadImage",gt||"body-chart.png")}catch(V){console.error("Error downloading image",V),s.current?.invoke("downloadImage","body-chart.png")}},N=(V,gt)=>{V?.url&&R(V.url)},H=V=>{R(V.image),S.trim()||y(V.name),O(!1)},F=()=>{O(!1)},W=async V=>{if(V.preventDefault(),!S.trim()){vi.fire({title:ye("Validation Error","kivicare-clinic-management-system"),text:ye("Please enter a chart name","kivicare-clinic-management-system"),icon:"warning"});return}if(!L){vi.fire({title:ye("Validation Error","kivicare-clinic-management-system"),text:ye("Please upload an image","kivicare-clinic-management-system"),icon:"warning"});return}T(!0);try{const J=s.current.getInstance().toDataURL();let mt="image/png",B="png";const St=J.match(/^data:([^;]+);base64,/);St&&(mt=St[1],B=mt.split("/")[1]||"png");const ct={encounter_id:Ze,title:S.trim(),description:b.trim(),image_path:J,mime:mt,extension:B};ze==="edit"&&Ct?await m.mutateAsync({...ct,body_chart_id:Ct}):await m.mutateAsync(ct)}catch(gt){console.error("Error saving body chart:",gt),T(!1)}},it=()=>{h||Zt(`/encounter/dashboard/${Ze}/body-chart`)};return o?ee.jsx(gu,{}):ee.jsx(ee.Fragment,{children:ee.jsxs("div",{className:"body-chart-editor-page",children:[ee.jsxs(Xe,{children:[ee.jsx(Xe.Header,{className:"mb-2",children:ee.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[ee.jsx("h6",{className:"mb-0",children:ze==="edit"?ye("Edit Body Chart","kivicare-clinic-management-system"):ye("Add Body Chart","kivicare-clinic-management-system")}),ee.jsxs("div",{className:"d-flex align-items-center gap-2",children:[ee.jsx(ri,{variant:"secondary",onClick:it,disabled:h,children:ye("Cancel","kivicare-clinic-management-system")}),ee.jsx(ri,{type:"submit",form:"body-chart-form",variant:"primary",disabled:h||!S.trim()||!L,children:h?ee.jsxs(ee.Fragment,{children:[ee.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),ze==="edit"?ye("Updating...","kivicare-clinic-management-system"):ye("Creating...","kivicare-clinic-management-system")]}):ee.jsxs(ee.Fragment,{children:[ee.jsx("i",{className:`ph ${ze==="edit"?"ph-floppy-disk":"ph-plus"} me-2`}),ze==="edit"?ye("Update Chart","kivicare-clinic-management-system"):ye("Create Chart","kivicare-clinic-management-system")]})})]})]})}),ee.jsx("div",{style:{display:"none"},children:ee.jsx("div",{ref:e,children:ee.jsx(vu,{id:"body-chart-image-uploader",name:"bodyChartImage",onChange:N,accept:"image/*",disabled:!1,label:""})})}),ee.jsx(Xe.Body,{children:ee.jsxs(ii,{id:"body-chart-form",onSubmit:W,children:[ee.jsx(hn,{children:ee.jsxs(fn,{md:12,children:[ee.jsxs(ii.Group,{className:"mb-3",children:[ee.jsxs(ii.Label,{children:[ye("Chart Name","kivicare-clinic-management-system")," ",ee.jsx("span",{className:"text-danger",children:"*"})]}),ee.jsx(ii.Control,{type:"text",value:S,onChange:V=>y(V.target.value),placeholder:ye("Enter chart name","kivicare-clinic-management-system"),disabled:h,required:!0})]}),ee.jsxs(ii.Group,{className:"mb-3",children:[ee.jsx(ii.Label,{children:ye("Description","kivicare-clinic-management-system")}),ee.jsx(ii.Control,{as:"textarea",rows:4,value:b,onChange:V=>d(V.target.value),placeholder:ye("Enter description (optional)","kivicare-clinic-management-system"),disabled:h})]})]})}),L&&ee.jsx(ee.Fragment,{children:ee.jsx(hn,{className:"mt-4",children:ee.jsx(fn,{xs:12,children:ee.jsx(Xe,{className:"bg-body",children:ee.jsx(Xe.Body,{children:ee.jsxs("div",{style:{position:"relative"},children:[ee.jsxs("div",{className:"tui-image-editor-overlay d-flex align-items-center justify-content-end gap-2",children:[ee.jsx(ri,{size:"sm",variant:"light",disabled:h||!L,onClick:k,children:ee.jsx("i",{className:"ph ph-download"})}),ee.jsx(ri,{size:"sm",variant:"primary",disabled:h,onClick:C,children:ye("Select Template","kivicare-clinic-management-system")}),ee.jsx(ri,{size:"sm",variant:"light",disabled:h,onClick:I,children:ye("Upload Images","kivicare-clinic-management-system")})]}),ee.jsx(xu,{ref:s,includeUI:{loadImage:{path:L,name:"SampleImage"},menuBarPosition:t,header:!1,theme:f==="blackTheme"?bu:Su,menu:g,initMenu:g.length>0?g[0]:"",uiSize:{width:"1000px",height:"700px"}},cssMaxWidth:700,cssMaxHeight:500},`tui-image-${L||"none"}`)]})})})})})})]})})]}),ee.jsxs(gi,{show:w,onHide:F,size:"xl",centered:!0,children:[ee.jsx(gi.Header,{closeButton:!0,children:ee.jsx(gi.Title,{children:ye("Select Body Chart Template","kivicare-clinic-management-system")})}),ee.jsx(gi.Body,{children:D.length>0?ee.jsx(hn,{className:"g-3",children:D.map(V=>ee.jsx(fn,{md:4,sm:6,children:ee.jsxs(Xe,{className:"h-100 template-card",style:{cursor:"pointer"},onClick:()=>H(V),children:[ee.jsx("div",{className:"position-relative",children:ee.jsx(Xe.Img,{variant:"top",src:V.image,style:{height:"200px",objectFit:"cover"},alt:V.name})}),ee.jsxs(Xe.Body,{children:[ee.jsx(Xe.Title,{className:"h6 mb-1",children:V.name}),ee.jsx(Xe.Text,{className:"small text-muted mb-0",children:V.category})]})]})},V.id))}):ee.jsxs("div",{className:"text-center py-5",children:[ee.jsx("div",{className:"mb-3",children:ee.jsx("i",{className:"ph ph-image-square text-muted",style:{fontSize:"3rem"}})}),ee.jsx("h6",{className:"text-muted",children:ye("No templates available","kivicare-clinic-management-system")}),ee.jsx("p",{className:"text-muted mb-0",children:ye("Please configure body chart templates in the settings first.","kivicare-clinic-management-system")})]})}),ee.jsx(gi.Footer,{children:ee.jsx(ri,{variant:"secondary",onClick:F,children:ye("Cancel","kivicare-clinic-management-system")})})]})]})})};export{_u as default};
