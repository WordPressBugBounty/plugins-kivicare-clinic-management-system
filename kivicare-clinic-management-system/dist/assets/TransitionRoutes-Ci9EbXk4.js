const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-lCWIDpmK.css","./_payment-gateway-model-BiLTufOy.css","./BodyChartEditor-UXLNUaJU.css"])))=>i.map(i=>d[i]);
import{a7 as cI,a8 as ma,r as f,v as He,j as i,a9 as cj,aa as dI,_ as l,L as gt,u as ht,ab as Bm,N as gg,l as Kn,i as ls,k as zi,n as mi,m as vr,I as pe,J as ft,ac as Le,C as ze,ad as mI,ae as uI,af as hI,ag as pI,ah as gI,ai as fI,z as Xt,H as je,aj as Wt,D as Vl,h as dn,o as vI,e as Hn,c as Cn,ak as lc,w as Vc,U as Jl,O as Uc,al as xI,am as mr,an as ur,y as lb,F as a_,E as oc,ao as r_,ap as jx,G as Wd,aq as yI,ar as dj,g as zr,B as bI,as as wI}from"./index-C8ThEdOa.js";var Sa=cI();const $l=ma(Sa),kI=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),jI=function(t,e){return new URL(t,e).href},mj={},_r=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let m=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(n.map(u=>{if(u=jI(u,s),u in mj)return;mj[u]=!0;const p=u.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(s)for(let x=o.length-1;x>=0;x--){const v=o[x];if(v.href===u&&(!p||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":kI,p||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),p)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};var NI=/%(((\d+)\$)|(\(([$_a-zA-Z][$_a-zA-Z0-9]*)\)))?[ +0#-]*\d*(\.(\d+|\*))?(ll|[lhqL])?([cduxXefgsp%])/g;function CI(t,...e){var n=0;return Array.isArray(e[0])&&(e=e[0]),t.replace(NI,function(){var s,a,r,o,c;return s=arguments[3],a=arguments[5],r=arguments[7],o=arguments[9],o==="%"?"%":(r==="*"&&(r=e[n],n++),a===void 0?(s===void 0&&(s=n+1),n++,c=e[s-1]):e[0]&&typeof e[0]=="object"&&e[0].hasOwnProperty(a)&&(c=e[0][a]),o==="f"?c=parseFloat(c)||0:o==="d"&&(c=parseInt(c)||0),r!==void 0&&(o==="f"?c=c.toFixed(r):o==="s"&&(c=c.substr(0,r))),c??"")})}function Ti(t,...e){return CI(t,...e)}var Ff={exports:{}};var uj;function SI(){return uj||(uj=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(r=a(r,s(c)))}return r}function s(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var c in r)e.call(r,c)&&r[c]&&(o=a(o,c));return o}function a(r,o){return o?r?r+" "+o:r+o:r}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Ff)),Ff.exports}var _I=SI();const xt=ma(_I);function Pt(){return Pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pt.apply(null,arguments)}function fg(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function hj(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function EI(t){var e=TI(t,"string");return typeof e=="symbol"?e:String(e)}function TI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function l_(t,e,n){var s=f.useRef(t!==void 0),a=f.useState(e),r=a[0],o=a[1],c=t!==void 0,d=s.current;return s.current=c,!c&&d&&r!==e&&o(e),[c?t:r,f.useCallback(function(m){for(var u=arguments.length,p=new Array(u>1?u-1:0),h=1;h<u;h++)p[h-1]=arguments[h];n&&n.apply(void 0,[m].concat(p)),o(m)},[n])]}function ob(t,e){return Object.keys(e).reduce(function(n,s){var a,r=n,o=r[hj(s)],c=r[s],d=fg(r,[hj(s),s].map(EI)),m=e[s],u=l_(c,o,t[m]),p=u[0],h=u[1];return Pt({},d,(a={},a[s]=p,a[m]=h,a))},t)}function Jh(t,e){return Jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jh(t,e)}function cb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Jh(t,e)}const AI=["xxl","xl","lg","md","sm","xs"],DI="xs",qm=f.createContext({prefixes:{},breakpoints:AI,minBreakpoint:DI}),{Consumer:Qhe,Provider:Zhe}=qm;function Tt(t,e){const{prefixes:n}=f.useContext(qm);return t||n[e]||e}function o_(){const{breakpoints:t}=f.useContext(qm);return t}function c_(){const{minBreakpoint:t}=f.useContext(qm);return t}function db(){const{dir:t}=f.useContext(qm);return t==="rtl"}function Wc(t){return t&&t.ownerDocument||document}function RI(t){var e=Wc(t);return e&&e.defaultView||window}function PI(t,e){return RI(t).getComputedStyle(t,e)}var MI=/([A-Z])/g;function II(t){return t.replace(MI,"-$1").toLowerCase()}var OI=/^ms-/;function Du(t){return II(t).replace(OI,"-ms-")}var LI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function FI(t){return!!(t&&LI.test(t))}function hr(t,e){var n="",s="";if(typeof e=="string")return t.style.getPropertyValue(Du(e))||PI(t).getPropertyValue(Du(e));Object.keys(e).forEach(function(a){var r=e[a];!r&&r!==0?t.style.removeProperty(Du(a)):FI(a)?s+=a+"("+r+") ":n+=Du(a)+": "+r+";"}),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}var $f={exports:{}},Bf,pj;function $I(){if(pj)return Bf;pj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bf=t,Bf}var qf,gj;function BI(){if(gj)return qf;gj=1;var t=$I();function e(){}function n(){}return n.resetWarningCache=e,qf=function(){function s(o,c,d,m,u,p){if(p!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}s.isRequired=s;function a(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return r.PropTypes=r,r},qf}var fj;function qI(){return fj||(fj=1,$f.exports=BI()()),$f.exports}var HI=qI();const De=ma(HI),vj={disabled:!1},mb=He.createContext(null);var d_=function(e){return e.scrollTop},Od="unmounted",Br="exited",Ai="entering",fs="entered",eo="exiting",$a=(function(t){cb(e,t);function e(s,a){var r;r=t.call(this,s,a)||this;var o=a,c=o&&!o.isMounting?s.enter:s.appear,d;return r.appearStatus=null,s.in?c?(d=Br,r.appearStatus=Ai):d=fs:s.unmountOnExit||s.mountOnEnter?d=Od:d=Br,r.state={status:d},r.nextCallback=null,r}e.getDerivedStateFromProps=function(a,r){var o=a.in;return o&&r.status===Od?{status:Br}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var r=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==Ai&&o!==fs&&(r=Ai):(o===Ai||o===fs)&&(r=eo)}this.updateStatus(!1,r)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,r,o,c;return r=o=c=a,a!=null&&typeof a!="number"&&(r=a.exit,o=a.enter,c=a.appear!==void 0?a.appear:o),{exit:r,enter:o,appear:c}},n.updateStatus=function(a,r){if(a===void 0&&(a=!1),r!==null)if(this.cancelNextCallback(),r===Ai){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:$l.findDOMNode(this);o&&d_(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Br&&this.setState({status:Od})},n.performEnter=function(a){var r=this,o=this.props.enter,c=this.context?this.context.isMounting:a,d=this.props.nodeRef?[c]:[$l.findDOMNode(this),c],m=d[0],u=d[1],p=this.getTimeouts(),h=c?p.appear:p.enter;if(!a&&!o||vj.disabled){this.safeSetState({status:fs},function(){r.props.onEntered(m)});return}this.props.onEnter(m,u),this.safeSetState({status:Ai},function(){r.props.onEntering(m,u),r.onTransitionEnd(h,function(){r.safeSetState({status:fs},function(){r.props.onEntered(m,u)})})})},n.performExit=function(){var a=this,r=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:$l.findDOMNode(this);if(!r||vj.disabled){this.safeSetState({status:Br},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:eo},function(){a.props.onExiting(c),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:Br},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,r){r=this.setNextCallback(r),this.setState(a,r)},n.setNextCallback=function(a){var r=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,r.nextCallback=null,a(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:$l.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=d[0],u=d[1];this.props.addEndListener(m,u)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Od)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var c=fg(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return He.createElement(mb.Provider,{value:null},typeof o=="function"?o(a,c):He.cloneElement(He.Children.only(o),c))},e})(He.Component);$a.contextType=mb;$a.propTypes={};function Vo(){}$a.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vo,onEntering:Vo,onEntered:Vo,onExit:Vo,onExiting:Vo,onExited:Vo};$a.UNMOUNTED=Od;$a.EXITED=Br;$a.ENTERING=Ai;$a.ENTERED=fs;$a.EXITING=eo;function m_(t){return t.code==="Escape"||t.keyCode===27}function zI(){const t=f.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function vo(t){if(!t||typeof t=="function")return null;const{major:e}=zI();return e>=19?t.props.ref:t.ref}const Kc=!!(typeof window<"u"&&window.document&&window.document.createElement);var Nx=!1,Cx=!1;try{var Hf={get passive(){return Nx=!0},get once(){return Cx=Nx=!0}};Kc&&(window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,!0))}catch{}function u_(t,e,n,s){if(s&&typeof s!="boolean"&&!Cx){var a=s.once,r=s.capture,o=n;!Cx&&a&&(o=n.__once||function c(d){this.removeEventListener(e,c,r),n.call(this,d)},n.__once=o),t.addEventListener(e,o,Nx?s:r)}t.addEventListener(e,n,s)}function Sx(t,e,n,s){var a=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(e,n,a),n.__once&&t.removeEventListener(e,n.__once,a)}function sr(t,e,n,s){return u_(t,e,n,s),function(){Sx(t,e,n,s)}}function VI(t,e,n,s){if(s===void 0&&(s=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(e,n,s),t.dispatchEvent(a)}}function UI(t){var e=hr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function WI(t,e,n){n===void 0&&(n=5);var s=!1,a=setTimeout(function(){s||VI(t,"transitionend",!0)},e+n),r=sr(t,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(a),r()}}function h_(t,e,n,s){n==null&&(n=UI(t)||0);var a=WI(t,n,s),r=sr(t,"transitionend",e);return function(){a(),r()}}function xj(t,e){const n=hr(t,e)||"",s=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*s}function ub(t,e){const n=xj(t,"transitionDuration"),s=xj(t,"transitionDelay"),a=h_(t,r=>{r.target===t&&(a(),e(r))},n+s)}function yd(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...a){e.apply(this,a),n.apply(this,a)}},null)}function p_(t){t.offsetHeight}const yj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function KI(t,e){const n=yj(t),s=yj(e);return a=>{n&&n(a),s&&s(a)}}function vg(t,e){return f.useMemo(()=>KI(t,e),[t,e])}function ep(t){return t&&"setState"in t?$l.findDOMNode(t):t??null}const xg=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,onExited:r,addEndListener:o,children:c,childRef:d,...m},u)=>{const p=f.useRef(null),h=vg(p,d),g=_=>{h(ep(_))},x=_=>w=>{_&&p.current&&_(p.current,w)},v=f.useCallback(x(t),[t]),y=f.useCallback(x(e),[e]),b=f.useCallback(x(n),[n]),j=f.useCallback(x(s),[s]),k=f.useCallback(x(a),[a]),S=f.useCallback(x(r),[r]),N=f.useCallback(x(o),[o]);return i.jsx($a,{ref:u,...m,onEnter:v,onEntered:b,onEntering:y,onExit:j,onExited:S,onExiting:k,addEndListener:N,nodeRef:p,children:typeof c=="function"?(_,w)=>c(_,{...w,ref:g}):He.cloneElement(c,{ref:g})})});xg.displayName="TransitionWrapper";const GI={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function YI(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],a=GI[t];return s+parseInt(hr(e,a[0]),10)+parseInt(hr(e,a[1]),10)}const QI={[Br]:"collapse",[eo]:"collapsing",[Ai]:"collapsing",[fs]:"collapse show"},g_=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,className:r,children:o,dimension:c="height",in:d=!1,timeout:m=300,mountOnEnter:u=!1,unmountOnExit:p=!1,appear:h=!1,getDimensionValue:g=YI,...x},v)=>{const y=typeof c=="function"?c():c,b=f.useMemo(()=>yd(_=>{_.style[y]="0"},t),[y,t]),j=f.useMemo(()=>yd(_=>{const w=`scroll${y[0].toUpperCase()}${y.slice(1)}`;_.style[y]=`${_[w]}px`},e),[y,e]),k=f.useMemo(()=>yd(_=>{_.style[y]=null},n),[y,n]),S=f.useMemo(()=>yd(_=>{_.style[y]=`${g(y,_)}px`,p_(_)},s),[s,g,y]),N=f.useMemo(()=>yd(_=>{_.style[y]=null},a),[y,a]);return i.jsx(xg,{ref:v,addEndListener:ub,...x,"aria-expanded":x.role?d:null,onEnter:b,onEntering:j,onEntered:k,onExit:S,onExiting:N,childRef:vo(o),in:d,timeout:m,mountOnEnter:u,unmountOnExit:p,appear:h,children:(_,w)=>He.cloneElement(o,{...w,className:xt(r,o.props.className,QI[_],y==="width"&&"collapse-horizontal")})})});g_.displayName="Collapse";function ZI(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Cc(t){const e=ZI(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Hm=(t=>f.forwardRef((e,n)=>i.jsx("div",{...e,ref:n,className:xt(e.className,t)}))),f_=Hm("h4");f_.displayName="DivStyledAsH4";const v_=f.forwardRef(({className:t,bsPrefix:e,as:n=f_,...s},a)=>(e=Tt(e,"alert-heading"),i.jsx(n,{ref:a,className:xt(t,e),...s})));v_.displayName="AlertHeading";function bj(){return f.useState(null)}function XI(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Is(t){const e=XI(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function x_(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function JI(t){const e=f.useRef(null);return f.useEffect(()=>{e.current=t}),e.current}const e3=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",t3=typeof document<"u",wj=t3||e3?f.useLayoutEffect:f.useEffect,n3=["as","disabled"];function i3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function s3(t){return!t||t.trim()==="#"}function hb({tagName:t,disabled:e,href:n,target:s,rel:a,role:r,onClick:o,tabIndex:c=0,type:d}){t||(n!=null||s!=null||a!=null?t="a":t="button");const m={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},m];const u=h=>{if((e||t==="a"&&s3(n))&&h.preventDefault(),e){h.stopPropagation();return}o?.(h)},p=h=>{h.key===" "&&(h.preventDefault(),u(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:r??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?s:void 0,"aria-disabled":e||void 0,rel:t==="a"?a:void 0,onClick:u,onKeyDown:p},m]}const y_=f.forwardRef((t,e)=>{let{as:n,disabled:s}=t,a=i3(t,n3);const[r,{tagName:o}]=hb(Object.assign({tagName:n,disabled:s},a));return i.jsx(o,Object.assign({},a,r,{ref:e}))});y_.displayName="Button";const a3=["onKeyDown"];function r3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function l3(t){return!t||t.trim()==="#"}const yg=f.forwardRef((t,e)=>{let{onKeyDown:n}=t,s=r3(t,a3);const[a]=hb(Object.assign({tagName:"a"},s)),r=Is(o=>{a.onKeyDown(o),n?.(o)});return l3(s.href)||s.role==="button"?i.jsx("a",Object.assign({ref:e},s,a,{onKeyDown:r})):i.jsx("a",Object.assign({ref:e},s,{onKeyDown:n}))});yg.displayName="Anchor";const b_=f.forwardRef(({className:t,bsPrefix:e,as:n=yg,...s},a)=>(e=Tt(e,"alert-link"),i.jsx(n,{ref:a,className:xt(t,e),...s})));b_.displayName="AlertLink";const o3={[Ai]:"show",[fs]:"show"},Da=f.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:s,...a},r)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=f.useCallback((d,m)=>{p_(d),s?.(d,m)},[s]);return i.jsx(xg,{ref:r,addEndListener:ub,...o,onEnter:c,childRef:vo(e),children:(d,m)=>f.cloneElement(e,{...m,className:xt("fade",t,e.props.className,o3[d],n[d])})})});Da.displayName="Fade";const c3={"aria-label":De.string,onClick:De.func,variant:De.oneOf(["white"])},bg=f.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},a)=>i.jsx("button",{ref:a,type:"button",className:xt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));bg.displayName="CloseButton";bg.propTypes=c3;const w_=f.forwardRef((t,e)=>{const{bsPrefix:n,show:s=!0,closeLabel:a="Close alert",closeVariant:r,className:o,children:c,variant:d="primary",onClose:m,dismissible:u,transition:p=Da,...h}=ob(t,{show:"onClose"}),g=Tt(n,"alert"),x=Cc(b=>{m&&m(!1,b)}),v=p===!0?Da:p,y=i.jsxs("div",{role:"alert",...v?void 0:h,ref:e,className:xt(o,g,d&&`${g}-${d}`,u&&`${g}-dismissible`),children:[u&&i.jsx(bg,{onClick:x,"aria-label":a,variant:r}),c]});return v?i.jsx(v,{unmountOnExit:!0,...h,ref:void 0,in:s,children:y}):s?y:null});w_.displayName="Alert";const d3=Object.assign(w_,{Link:b_,Heading:v_}),ta=f.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:s,className:a,as:r="span",...o},c)=>{const d=Tt(t,"badge");return i.jsx(r,{ref:c,...o,className:xt(a,d,n&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});ta.displayName="Badge";const Yt=f.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:s,active:a=!1,disabled:r=!1,className:o,...c},d)=>{const m=Tt(e,"btn"),[u,{tagName:p}]=hb({tagName:t,disabled:r,...c}),h=p;return i.jsx(h,{...u,...c,ref:d,disabled:r,className:xt(o,m,a&&"active",n&&`${m}-${n}`,s&&`${m}-${s}`,c.href&&r&&"disabled")})});Yt.displayName="Button";const Ra=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"card-body"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Ra.displayName="CardBody";const k_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"card-footer"),i.jsx(n,{ref:a,className:xt(t,e),...s})));k_.displayName="CardFooter";const pb=f.createContext(null);pb.displayName="CardHeaderContext";const j_=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const r=Tt(t,"card-header"),o=f.useMemo(()=>({cardHeaderBsPrefix:r}),[r]);return i.jsx(pb.Provider,{value:o,children:i.jsx(n,{ref:a,...s,className:xt(e,r)})})});j_.displayName="CardHeader";const N_=f.forwardRef(({bsPrefix:t,className:e,variant:n,as:s="img",...a},r)=>{const o=Tt(t,"card-img");return i.jsx(s,{ref:r,className:xt(n?`${o}-${n}`:o,e),...a})});N_.displayName="CardImg";const C_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"card-img-overlay"),i.jsx(n,{ref:a,className:xt(t,e),...s})));C_.displayName="CardImgOverlay";const S_=f.forwardRef(({className:t,bsPrefix:e,as:n="a",...s},a)=>(e=Tt(e,"card-link"),i.jsx(n,{ref:a,className:xt(t,e),...s})));S_.displayName="CardLink";const m3=Hm("h6"),__=f.forwardRef(({className:t,bsPrefix:e,as:n=m3,...s},a)=>(e=Tt(e,"card-subtitle"),i.jsx(n,{ref:a,className:xt(t,e),...s})));__.displayName="CardSubtitle";const E_=f.forwardRef(({className:t,bsPrefix:e,as:n="p",...s},a)=>(e=Tt(e,"card-text"),i.jsx(n,{ref:a,className:xt(t,e),...s})));E_.displayName="CardText";const u3=Hm("h5"),T_=f.forwardRef(({className:t,bsPrefix:e,as:n=u3,...s},a)=>(e=Tt(e,"card-title"),i.jsx(n,{ref:a,className:xt(t,e),...s})));T_.displayName="CardTitle";const A_=f.forwardRef(({bsPrefix:t,className:e,bg:n,text:s,border:a,body:r=!1,children:o,as:c="div",...d},m)=>{const u=Tt(t,"card");return i.jsx(c,{ref:m,...d,className:xt(e,u,n&&`bg-${n}`,s&&`text-${s}`,a&&`border-${a}`),children:r?i.jsx(Ra,{children:o}):o})});A_.displayName="Card";const mt=Object.assign(A_,{Img:N_,Title:T_,Subtitle:__,Body:Ra,Link:S_,Text:E_,Header:j_,Footer:k_,ImgOverlay:C_});function h3(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function p3(t){const e=f.useRef(t);return e.current=t,e}function D_(t){const e=p3(t);f.useEffect(()=>()=>e.current(),[])}const _x=2**31-1;function R_(t,e,n){const s=n-Date.now();t.current=s<=_x?setTimeout(e,s):setTimeout(()=>R_(t,e,n),_x)}function g3(){const t=h3(),e=f.useRef();return D_(()=>clearTimeout(e.current)),f.useMemo(()=>{const n=()=>clearTimeout(e.current);function s(a,r=0){t()&&(n(),r<=_x?e.current=setTimeout(a,r):R_(e,a,Date.now()+r))}return{set:s,clear:n,handleRef:e}},[])}function kj(t,e){let n=0;return f.Children.map(t,s=>f.isValidElement(s)?e(s,n++):s)}function f3(t,e){let n=0;f.Children.forEach(t,s=>{f.isValidElement(s)&&e(s,n++)})}function v3(t,e){return f.Children.toArray(t).some(n=>f.isValidElement(n)&&n.type===e)}function x3({as:t,bsPrefix:e,className:n,...s}){e=Tt(e,"col");const a=o_(),r=c_(),o=[],c=[];return a.forEach(d=>{const m=s[d];delete s[d];let u,p,h;typeof m=="object"&&m!=null?{span:u,offset:p,order:h}=m:u=m;const g=d!==r?`-${d}`:"";u&&o.push(u===!0?`${e}${g}`:`${e}${g}-${u}`),h!=null&&c.push(`order${g}-${h}`),p!=null&&c.push(`offset${g}-${p}`)}),[{...s,className:xt(n,...o,...c)},{as:t,bsPrefix:e,spans:o}]}const Ct=f.forwardRef((t,e)=>{const[{className:n,...s},{as:a="div",bsPrefix:r,spans:o}]=x3(t);return i.jsx(a,{...s,ref:e,className:xt(n,!o.length&&r)})});Ct.displayName="Col";const xo=f.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:s,...a},r)=>{const o=Tt(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return i.jsx(n,{ref:r,...a,className:xt(s,e?`${o}${c}`:o)})});xo.displayName="Container";var y3=Function.prototype.bind.call(Function.prototype.call,[].slice);function Pl(t,e){return y3(t.querySelectorAll(e))}function b3(t,e,n){const s=f.useRef(t!==void 0),[a,r]=f.useState(e),o=t!==void 0,c=s.current;return s.current=o,!o&&c&&a!==e&&r(e),[o?t:a,f.useCallback((...d)=>{const[m,...u]=d;let p=n?.(m,...u);return r(m),p},[n])]}function w3(){const[,t]=f.useReducer(e=>e+1,0);return t}var jj=Object.prototype.hasOwnProperty;function Nj(t,e,n){for(n of t.keys())if(Kd(n,e))return n}function Kd(t,e){var n,s,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Kd(t[s],e[s]););return s===-1}if(n===Set){if(t.size!==e.size)return!1;for(s of t)if(a=s,a&&typeof a=="object"&&(a=Nj(e,a),!a)||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(s of t)if(a=s[0],a&&typeof a=="object"&&(a=Nj(e,a),!a)||!Kd(s[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(jj.call(t,n)&&++s&&!jj.call(e,n)||!(n in e)||!Kd(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function k3(t){const e=x_();return[t[0],f.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var ss="top",zs="bottom",Vs="right",as="left",gb="auto",zm=[ss,zs,Vs,as],Sc="start",um="end",j3="clippingParents",P_="viewport",bd="popper",N3="reference",Cj=zm.reduce(function(t,e){return t.concat([e+"-"+Sc,e+"-"+um])},[]),M_=[].concat(zm,[gb]).reduce(function(t,e){return t.concat([e,e+"-"+Sc,e+"-"+um])},[]),C3="beforeRead",S3="read",_3="afterRead",E3="beforeMain",T3="main",A3="afterMain",D3="beforeWrite",R3="write",P3="afterWrite",M3=[C3,S3,_3,E3,T3,A3,D3,R3,P3];function _a(t){return t.split("-")[0]}function bs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function to(t){var e=bs(t).Element;return t instanceof e||t instanceof Element}function Ea(t){var e=bs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fb(t){if(typeof ShadowRoot>"u")return!1;var e=bs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Ul=Math.max,tp=Math.min,_c=Math.round;function Ex(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function I_(){return!/^((?!chrome|android).)*safari/i.test(Ex())}function Ec(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),a=1,r=1;e&&Ea(t)&&(a=t.offsetWidth>0&&_c(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&_c(s.height)/t.offsetHeight||1);var o=to(t)?bs(t):window,c=o.visualViewport,d=!I_()&&n,m=(s.left+(d&&c?c.offsetLeft:0))/a,u=(s.top+(d&&c?c.offsetTop:0))/r,p=s.width/a,h=s.height/r;return{width:p,height:h,top:u,right:m+p,bottom:u+h,left:m,x:m,y:u}}function vb(t){var e=Ec(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function O_(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fb(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ol(t){return t?(t.nodeName||"").toLowerCase():null}function xr(t){return bs(t).getComputedStyle(t)}function I3(t){return["table","td","th"].indexOf(ol(t))>=0}function gl(t){return((to(t)?t.ownerDocument:t.document)||window.document).documentElement}function wg(t){return ol(t)==="html"?t:t.assignedSlot||t.parentNode||(fb(t)?t.host:null)||gl(t)}function Sj(t){return!Ea(t)||xr(t).position==="fixed"?null:t.offsetParent}function O3(t){var e=/firefox/i.test(Ex()),n=/Trident/i.test(Ex());if(n&&Ea(t)){var s=xr(t);if(s.position==="fixed")return null}var a=wg(t);for(fb(a)&&(a=a.host);Ea(a)&&["html","body"].indexOf(ol(a))<0;){var r=xr(a);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return a;a=a.parentNode}return null}function Vm(t){for(var e=bs(t),n=Sj(t);n&&I3(n)&&xr(n).position==="static";)n=Sj(n);return n&&(ol(n)==="html"||ol(n)==="body"&&xr(n).position==="static")?e:n||O3(t)||e}function xb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Gd(t,e,n){return Ul(t,tp(e,n))}function L3(t,e,n){var s=Gd(t,e,n);return s>n?n:s}function L_(){return{top:0,right:0,bottom:0,left:0}}function F_(t){return Object.assign({},L_(),t)}function $_(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var F3=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,F_(typeof e!="number"?e:$_(e,zm))};function $3(t){var e,n=t.state,s=t.name,a=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,c=_a(n.placement),d=xb(c),m=[as,Vs].indexOf(c)>=0,u=m?"height":"width";if(!(!r||!o)){var p=F3(a.padding,n),h=vb(r),g=d==="y"?ss:as,x=d==="y"?zs:Vs,v=n.rects.reference[u]+n.rects.reference[d]-o[d]-n.rects.popper[u],y=o[d]-n.rects.reference[d],b=Vm(r),j=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0,k=v/2-y/2,S=p[g],N=j-h[u]-p[x],_=j/2-h[u]/2+k,w=Gd(S,_,N),T=d;n.modifiersData[s]=(e={},e[T]=w,e.centerOffset=w-_,e)}}function B3(t){var e=t.state,n=t.options,s=n.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||O_(e.elements.popper,a)&&(e.elements.arrow=a))}const q3={name:"arrow",enabled:!0,phase:"main",fn:$3,effect:B3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tc(t){return t.split("-")[1]}var H3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function z3(t,e){var n=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:_c(n*a)/a||0,y:_c(s*a)/a||0}}function _j(t){var e,n=t.popper,s=t.popperRect,a=t.placement,r=t.variation,o=t.offsets,c=t.position,d=t.gpuAcceleration,m=t.adaptive,u=t.roundOffsets,p=t.isFixed,h=o.x,g=h===void 0?0:h,x=o.y,v=x===void 0?0:x,y=typeof u=="function"?u({x:g,y:v}):{x:g,y:v};g=y.x,v=y.y;var b=o.hasOwnProperty("x"),j=o.hasOwnProperty("y"),k=as,S=ss,N=window;if(m){var _=Vm(n),w="clientHeight",T="clientWidth";if(_===bs(n)&&(_=gl(n),xr(_).position!=="static"&&c==="absolute"&&(w="scrollHeight",T="scrollWidth")),_=_,a===ss||(a===as||a===Vs)&&r===um){S=zs;var A=p&&_===N&&N.visualViewport?N.visualViewport.height:_[w];v-=A-s.height,v*=d?1:-1}if(a===as||(a===ss||a===zs)&&r===um){k=Vs;var M=p&&_===N&&N.visualViewport?N.visualViewport.width:_[T];g-=M-s.width,g*=d?1:-1}}var E=Object.assign({position:c},m&&H3),P=u===!0?z3({x:g,y:v},bs(n)):{x:g,y:v};if(g=P.x,v=P.y,d){var D;return Object.assign({},E,(D={},D[S]=j?"0":"",D[k]=b?"0":"",D.transform=(N.devicePixelRatio||1)<=1?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",D))}return Object.assign({},E,(e={},e[S]=j?v+"px":"",e[k]=b?g+"px":"",e.transform="",e))}function V3(t){var e=t.state,n=t.options,s=n.gpuAcceleration,a=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,c=n.roundOffsets,d=c===void 0?!0:c,m={placement:_a(e.placement),variation:Tc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,_j(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,_j(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const U3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:V3,data:{}};var Ru={passive:!0};function W3(t){var e=t.state,n=t.instance,s=t.options,a=s.scroll,r=a===void 0?!0:a,o=s.resize,c=o===void 0?!0:o,d=bs(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&m.forEach(function(u){u.addEventListener("scroll",n.update,Ru)}),c&&d.addEventListener("resize",n.update,Ru),function(){r&&m.forEach(function(u){u.removeEventListener("scroll",n.update,Ru)}),c&&d.removeEventListener("resize",n.update,Ru)}}const K3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:W3,data:{}};var G3={left:"right",right:"left",bottom:"top",top:"bottom"};function Th(t){return t.replace(/left|right|bottom|top/g,function(e){return G3[e]})}var Y3={start:"end",end:"start"};function Ej(t){return t.replace(/start|end/g,function(e){return Y3[e]})}function yb(t){var e=bs(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function bb(t){return Ec(gl(t)).left+yb(t).scrollLeft}function Q3(t,e){var n=bs(t),s=gl(t),a=n.visualViewport,r=s.clientWidth,o=s.clientHeight,c=0,d=0;if(a){r=a.width,o=a.height;var m=I_();(m||!m&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:r,height:o,x:c+bb(t),y:d}}function Z3(t){var e,n=gl(t),s=yb(t),a=(e=t.ownerDocument)==null?void 0:e.body,r=Ul(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Ul(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-s.scrollLeft+bb(t),d=-s.scrollTop;return xr(a||n).direction==="rtl"&&(c+=Ul(n.clientWidth,a?a.clientWidth:0)-r),{width:r,height:o,x:c,y:d}}function wb(t){var e=xr(t),n=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+s)}function B_(t){return["html","body","#document"].indexOf(ol(t))>=0?t.ownerDocument.body:Ea(t)&&wb(t)?t:B_(wg(t))}function Yd(t,e){var n;e===void 0&&(e=[]);var s=B_(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),r=bs(s),o=a?[r].concat(r.visualViewport||[],wb(s)?s:[]):s,c=e.concat(o);return a?c:c.concat(Yd(wg(o)))}function Tx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function X3(t,e){var n=Ec(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Tj(t,e,n){return e===P_?Tx(Q3(t,n)):to(e)?X3(e,n):Tx(Z3(gl(t)))}function J3(t){var e=Yd(wg(t)),n=["absolute","fixed"].indexOf(xr(t).position)>=0,s=n&&Ea(t)?Vm(t):t;return to(s)?e.filter(function(a){return to(a)&&O_(a,s)&&ol(a)!=="body"}):[]}function eO(t,e,n,s){var a=e==="clippingParents"?J3(t):[].concat(e),r=[].concat(a,[n]),o=r[0],c=r.reduce(function(d,m){var u=Tj(t,m,s);return d.top=Ul(u.top,d.top),d.right=tp(u.right,d.right),d.bottom=tp(u.bottom,d.bottom),d.left=Ul(u.left,d.left),d},Tj(t,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function q_(t){var e=t.reference,n=t.element,s=t.placement,a=s?_a(s):null,r=s?Tc(s):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,d;switch(a){case ss:d={x:o,y:e.y-n.height};break;case zs:d={x:o,y:e.y+e.height};break;case Vs:d={x:e.x+e.width,y:c};break;case as:d={x:e.x-n.width,y:c};break;default:d={x:e.x,y:e.y}}var m=a?xb(a):null;if(m!=null){var u=m==="y"?"height":"width";switch(r){case Sc:d[m]=d[m]-(e[u]/2-n[u]/2);break;case um:d[m]=d[m]+(e[u]/2-n[u]/2);break}}return d}function hm(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=s===void 0?t.placement:s,r=n.strategy,o=r===void 0?t.strategy:r,c=n.boundary,d=c===void 0?j3:c,m=n.rootBoundary,u=m===void 0?P_:m,p=n.elementContext,h=p===void 0?bd:p,g=n.altBoundary,x=g===void 0?!1:g,v=n.padding,y=v===void 0?0:v,b=F_(typeof y!="number"?y:$_(y,zm)),j=h===bd?N3:bd,k=t.rects.popper,S=t.elements[x?j:h],N=eO(to(S)?S:S.contextElement||gl(t.elements.popper),d,u,o),_=Ec(t.elements.reference),w=q_({reference:_,element:k,placement:a}),T=Tx(Object.assign({},k,w)),A=h===bd?T:_,M={top:N.top-A.top+b.top,bottom:A.bottom-N.bottom+b.bottom,left:N.left-A.left+b.left,right:A.right-N.right+b.right},E=t.modifiersData.offset;if(h===bd&&E){var P=E[a];Object.keys(M).forEach(function(D){var O=[Vs,zs].indexOf(D)>=0?1:-1,F=[ss,zs].indexOf(D)>=0?"y":"x";M[D]+=P[F]*O})}return M}function tO(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=n.boundary,r=n.rootBoundary,o=n.padding,c=n.flipVariations,d=n.allowedAutoPlacements,m=d===void 0?M_:d,u=Tc(s),p=u?c?Cj:Cj.filter(function(x){return Tc(x)===u}):zm,h=p.filter(function(x){return m.indexOf(x)>=0});h.length===0&&(h=p);var g=h.reduce(function(x,v){return x[v]=hm(t,{placement:v,boundary:a,rootBoundary:r,padding:o})[_a(v)],x},{});return Object.keys(g).sort(function(x,v){return g[x]-g[v]})}function nO(t){if(_a(t)===gb)return[];var e=Th(t);return[Ej(t),e,Ej(e)]}function iO(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=n.mainAxis,r=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!0:o,d=n.fallbackPlacements,m=n.padding,u=n.boundary,p=n.rootBoundary,h=n.altBoundary,g=n.flipVariations,x=g===void 0?!0:g,v=n.allowedAutoPlacements,y=e.options.placement,b=_a(y),j=b===y,k=d||(j||!x?[Th(y)]:nO(y)),S=[y].concat(k).reduce(function(z,ie){return z.concat(_a(ie)===gb?tO(e,{placement:ie,boundary:u,rootBoundary:p,padding:m,flipVariations:x,allowedAutoPlacements:v}):ie)},[]),N=e.rects.reference,_=e.rects.popper,w=new Map,T=!0,A=S[0],M=0;M<S.length;M++){var E=S[M],P=_a(E),D=Tc(E)===Sc,O=[ss,zs].indexOf(P)>=0,F=O?"width":"height",q=hm(e,{placement:E,boundary:u,rootBoundary:p,altBoundary:h,padding:m}),U=O?D?Vs:as:D?zs:ss;N[F]>_[F]&&(U=Th(U));var K=Th(U),ne=[];if(r&&ne.push(q[P]<=0),c&&ne.push(q[U]<=0,q[K]<=0),ne.every(function(z){return z})){A=E,T=!1;break}w.set(E,ne)}if(T)for(var Y=x?3:1,fe=function(ie){var re=S.find(function(de){var L=w.get(de);if(L)return L.slice(0,ie).every(function(Q){return Q})});if(re)return A=re,"break"},le=Y;le>0;le--){var W=fe(le);if(W==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const sO={name:"flip",enabled:!0,phase:"main",fn:iO,requiresIfExists:["offset"],data:{_skip:!1}};function Aj(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Dj(t){return[ss,Vs,zs,as].some(function(e){return t[e]>=0})}function aO(t){var e=t.state,n=t.name,s=e.rects.reference,a=e.rects.popper,r=e.modifiersData.preventOverflow,o=hm(e,{elementContext:"reference"}),c=hm(e,{altBoundary:!0}),d=Aj(o,s),m=Aj(c,a,r),u=Dj(d),p=Dj(m);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const rO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aO};function lO(t,e,n){var s=_a(t),a=[as,ss].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],c=r[1];return o=o||0,c=(c||0)*a,[as,Vs].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function oO(t){var e=t.state,n=t.options,s=t.name,a=n.offset,r=a===void 0?[0,0]:a,o=M_.reduce(function(u,p){return u[p]=lO(p,e.rects,r),u},{}),c=o[e.placement],d=c.x,m=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=m),e.modifiersData[s]=o}const cO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:oO};function dO(t){var e=t.state,n=t.name;e.modifiersData[n]=q_({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const mO={name:"popperOffsets",enabled:!0,phase:"read",fn:dO,data:{}};function uO(t){return t==="x"?"y":"x"}function hO(t){var e=t.state,n=t.options,s=t.name,a=n.mainAxis,r=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!1:o,d=n.boundary,m=n.rootBoundary,u=n.altBoundary,p=n.padding,h=n.tether,g=h===void 0?!0:h,x=n.tetherOffset,v=x===void 0?0:x,y=hm(e,{boundary:d,rootBoundary:m,padding:p,altBoundary:u}),b=_a(e.placement),j=Tc(e.placement),k=!j,S=xb(b),N=uO(S),_=e.modifiersData.popperOffsets,w=e.rects.reference,T=e.rects.popper,A=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,M=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(_){if(r){var D,O=S==="y"?ss:as,F=S==="y"?zs:Vs,q=S==="y"?"height":"width",U=_[S],K=U+y[O],ne=U-y[F],Y=g?-T[q]/2:0,fe=j===Sc?w[q]:T[q],le=j===Sc?-T[q]:-w[q],W=e.elements.arrow,z=g&&W?vb(W):{width:0,height:0},ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:L_(),re=ie[O],de=ie[F],L=Gd(0,w[q],z[q]),Q=k?w[q]/2-Y-L-re-M.mainAxis:fe-L-re-M.mainAxis,V=k?-w[q]/2+Y+L+de+M.mainAxis:le+L+de+M.mainAxis,Z=e.elements.arrow&&Vm(e.elements.arrow),X=Z?S==="y"?Z.clientTop||0:Z.clientLeft||0:0,R=(D=E?.[S])!=null?D:0,G=U+Q-R-X,ee=U+V-R,ae=Gd(g?tp(K,G):K,U,g?Ul(ne,ee):ne);_[S]=ae,P[S]=ae-U}if(c){var I,H=S==="x"?ss:as,B=S==="x"?zs:Vs,te=_[N],oe=N==="y"?"height":"width",ye=te+y[H],me=te-y[B],xe=[ss,as].indexOf(b)!==-1,Ce=(I=E?.[N])!=null?I:0,he=xe?ye:te-w[oe]-T[oe]-Ce+M.altAxis,_e=xe?te+w[oe]+T[oe]-Ce-M.altAxis:me,Ke=g&&xe?L3(he,te,_e):Gd(g?he:ye,te,g?_e:me);_[N]=Ke,P[N]=Ke-te}e.modifiersData[s]=P}}const pO={name:"preventOverflow",enabled:!0,phase:"main",fn:hO,requiresIfExists:["offset"]};function gO(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function fO(t){return t===bs(t)||!Ea(t)?yb(t):gO(t)}function vO(t){var e=t.getBoundingClientRect(),n=_c(e.width)/t.offsetWidth||1,s=_c(e.height)/t.offsetHeight||1;return n!==1||s!==1}function xO(t,e,n){n===void 0&&(n=!1);var s=Ea(e),a=Ea(e)&&vO(e),r=gl(e),o=Ec(t,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((ol(e)!=="body"||wb(r))&&(c=fO(e)),Ea(e)?(d=Ec(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):r&&(d.x=bb(r))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function yO(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function a(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var d=e.get(c);d&&a(d)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||a(r)}),s}function bO(t){var e=yO(t);return M3.reduce(function(n,s){return n.concat(e.filter(function(a){return a.phase===s}))},[])}function wO(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function kO(t){var e=t.reduce(function(n,s){var a=n[s.name];return n[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var Rj={placement:"bottom",modifiers:[],strategy:"absolute"};function Pj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function jO(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,a=e.defaultOptions,r=a===void 0?Rj:a;return function(c,d,m){m===void 0&&(m=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rj,r),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},p=[],h=!1,g={state:u,setOptions:function(b){var j=typeof b=="function"?b(u.options):b;v(),u.options=Object.assign({},r,u.options,j),u.scrollParents={reference:to(c)?Yd(c):c.contextElement?Yd(c.contextElement):[],popper:Yd(d)};var k=bO(kO([].concat(s,u.options.modifiers)));return u.orderedModifiers=k.filter(function(S){return S.enabled}),x(),g.update()},forceUpdate:function(){if(!h){var b=u.elements,j=b.reference,k=b.popper;if(Pj(j,k)){u.rects={reference:xO(j,Vm(k),u.options.strategy==="fixed"),popper:vb(k)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var N=u.orderedModifiers[S],_=N.fn,w=N.options,T=w===void 0?{}:w,A=N.name;typeof _=="function"&&(u=_({state:u,options:T,name:A,instance:g})||u)}}}},update:wO(function(){return new Promise(function(y){g.forceUpdate(),y(u)})}),destroy:function(){v(),h=!0}};if(!Pj(c,d))return g;g.setOptions(m).then(function(y){!h&&m.onFirstUpdate&&m.onFirstUpdate(y)});function x(){u.orderedModifiers.forEach(function(y){var b=y.name,j=y.options,k=j===void 0?{}:j,S=y.effect;if(typeof S=="function"){var N=S({state:u,name:b,instance:g,options:k}),_=function(){};p.push(N||_)}})}function v(){p.forEach(function(y){return y()}),p=[]}return g}}const NO=jO({defaultModifiers:[rO,mO,U3,K3,cO,sO,pO,q3]}),CO=["enabled","placement","strategy","modifiers"];function SO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const _O={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},EO={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==n.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:s}=t.elements,a=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&a==="tooltip"&&"setAttribute"in s){const r=s.getAttribute("aria-describedby");if(r&&r.split(",").indexOf(n.id)!==-1)return;s.setAttribute("aria-describedby",r?`${r},${n.id}`:n.id)}}},TO=[];function AO(t,e,n={}){let{enabled:s=!0,placement:a="bottom",strategy:r="absolute",modifiers:o=TO}=n,c=SO(n,CO);const d=f.useRef(o),m=f.useRef(),u=f.useCallback(()=>{var y;(y=m.current)==null||y.update()},[]),p=f.useCallback(()=>{var y;(y=m.current)==null||y.forceUpdate()},[]),[h,g]=k3(f.useState({placement:a,update:u,forceUpdate:p,attributes:{},styles:{popper:{},arrow:{}}})),x=f.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:y})=>{const b={},j={};Object.keys(y.elements).forEach(k=>{b[k]=y.styles[k],j[k]=y.attributes[k]}),g({state:y,styles:b,attributes:j,update:u,forceUpdate:p,placement:y.placement})}}),[u,p,g]),v=f.useMemo(()=>(Kd(d.current,o)||(d.current=o),d.current),[o]);return f.useEffect(()=>{!m.current||!s||m.current.setOptions({placement:a,strategy:r,modifiers:[...v,x,_O]})},[r,a,x,s,v]),f.useEffect(()=>{if(!(!s||t==null||e==null))return m.current=NO(t,e,Object.assign({},c,{placement:a,strategy:r,modifiers:[...v,EO,x]})),()=>{m.current!=null&&(m.current.destroy(),m.current=void 0,g(y=>Object.assign({},y,{attributes:{},styles:{popper:{}}})))}},[s,t,e]),h}function pm(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var zf,Mj;function DO(){if(Mj)return zf;Mj=1;var t=function(){};return zf=t,zf}var RO=DO();const PO=ma(RO),Ij=()=>{};function MO(t){return t.button===0}function IO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Ah=t=>t&&("current"in t?t.current:t),Oj={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function OO(t,e=Ij,{disabled:n,clickTrigger:s="click"}={}){const a=f.useRef(!1),r=f.useRef(!1),o=f.useCallback(m=>{const u=Ah(t);PO(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!u||IO(m)||!MO(m)||!!pm(u,m.target)||r.current,r.current=!1},[t]),c=Is(m=>{const u=Ah(t);u&&pm(u,m.target)?r.current=!0:r.current=!1}),d=Is(m=>{a.current||e(m)});f.useEffect(()=>{var m,u;if(n||t==null)return;const p=Wc(Ah(t)),h=p.defaultView||window;let g=(m=h.event)!=null?m:(u=h.parent)==null?void 0:u.event,x=null;Oj[s]&&(x=sr(p,Oj[s],c,!0));const v=sr(p,s,o,!0),y=sr(p,s,j=>{if(j===g){g=void 0;return}d(j)});let b=[];return"ontouchstart"in p.documentElement&&(b=[].slice.call(p.body.children).map(j=>sr(j,"mousemove",Ij))),()=>{x?.(),v(),y(),b.forEach(j=>j())}},[t,n,s,o,c,d])}function LO(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function FO(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function $O({enabled:t,enableEvents:e,placement:n,flip:s,offset:a,fixed:r,containerPadding:o,arrowElement:c,popperConfig:d={}}){var m,u,p,h,g;const x=LO(d.modifiers);return Object.assign({},d,{placement:n,enabled:t,strategy:r?"fixed":d.strategy,modifiers:FO(Object.assign({},x,{eventListeners:{enabled:e,options:(m=x.eventListeners)==null?void 0:m.options},preventOverflow:Object.assign({},x.preventOverflow,{options:o?Object.assign({padding:o},(u=x.preventOverflow)==null?void 0:u.options):(p=x.preventOverflow)==null?void 0:p.options}),offset:{options:Object.assign({offset:a},(h=x.offset)==null?void 0:h.options)},arrow:Object.assign({},x.arrow,{enabled:!!c,options:Object.assign({},(g=x.arrow)==null?void 0:g.options,{element:c})}),flip:Object.assign({enabled:!!s},x.flip)}))})}const H_={prefix:String(Math.round(Math.random()*1e10)),current:0},z_=He.createContext(H_),BO=He.createContext(!1);let Vf=new WeakMap;function qO(t=!1){let e=f.useContext(z_),n=f.useRef(null);if(n.current===null&&!t){var s,a;let r=(a=He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(s=a.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(r){let o=Vf.get(r);o==null?Vf.set(r,{id:e.current,state:r.memoizedState}):r.memoizedState!==o.state&&(e.current=o.id,Vf.delete(r))}n.current=++e.current}return n.current}function HO(t){let e=f.useContext(z_),n=qO(!!t),s=`react-aria${e.prefix}`;return t||`${s}-${n}`}function zO(t){let e=He.useId(),[n]=f.useState(GO()),s=n?"react-aria":`react-aria${H_.prefix}`;return t||`${s}-${e}`}const VO=typeof He.useId=="function"?zO:HO;function UO(){return!1}function WO(){return!0}function KO(t){return()=>{}}function GO(){return typeof He.useSyncExternalStore=="function"?He.useSyncExternalStore(KO,UO,WO):f.useContext(BO)}const Ac=f.createContext(null),gm=(t,e=null)=>t!=null?String(t):e||null,kb=f.createContext(null);kb.displayName="NavContext";const YO="data-rr-ui-",QO="rrUi";function kg(t){return`${YO}${t}`}function ZO(t){return`${QO}${t}`}const V_=f.createContext(Kc?window:void 0);V_.Provider;function jb(){return f.useContext(V_)}const XO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",JO=typeof document<"u",U_=JO||XO?f.useLayoutEffect:f.useEffect,W_=f.createContext(null);W_.displayName="InputGroupContext";const K_=f.createContext(null);K_.displayName="NavbarContext";De.string,De.bool,De.bool,De.bool,De.bool;const G_=f.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:s=!1,roundedCircle:a=!1,thumbnail:r=!1,...o},c)=>(t=Tt(t,"img"),i.jsx("img",{ref:c,...o,className:xt(e,n&&`${t}-fluid`,s&&"rounded",a&&"rounded-circle",r&&`${t}-thumbnail`)})));G_.displayName="Image";const e5={type:De.string,tooltip:De.bool,as:De.elementType},jg=f.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:s=!1,...a},r)=>i.jsx(t,{...a,ref:r,className:xt(e,`${n}-${s?"tooltip":"feedback"}`)}));jg.displayName="Feedback";jg.propTypes=e5;const yr=f.createContext({}),Um=f.forwardRef(({id:t,bsPrefix:e,className:n,type:s="checkbox",isValid:a=!1,isInvalid:r=!1,as:o="input",...c},d)=>{const{controlId:m}=f.useContext(yr);return e=Tt(e,"form-check-input"),i.jsx(o,{...c,ref:d,type:s,id:t||m,className:xt(n,e,a&&"is-valid",r&&"is-invalid")})});Um.displayName="FormCheckInput";const np=f.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...s},a)=>{const{controlId:r}=f.useContext(yr);return t=Tt(t,"form-check-label"),i.jsx("label",{...s,ref:a,htmlFor:n||r,className:xt(e,t)})});np.displayName="FormCheckLabel";const Y_=f.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:s=!1,reverse:a=!1,disabled:r=!1,isValid:o=!1,isInvalid:c=!1,feedbackTooltip:d=!1,feedback:m,feedbackType:u,className:p,style:h,title:g="",type:x="checkbox",label:v,children:y,as:b="input",...j},k)=>{e=Tt(e,"form-check"),n=Tt(n,"form-switch");const{controlId:S}=f.useContext(yr),N=f.useMemo(()=>({controlId:t||S}),[S,t]),_=!y&&v!=null&&v!==!1||v3(y,np),w=i.jsx(Um,{...j,type:x==="switch"?"checkbox":x,ref:k,isValid:o,isInvalid:c,disabled:r,as:b});return i.jsx(yr.Provider,{value:N,children:i.jsx("div",{style:h,className:xt(p,_&&e,s&&`${e}-inline`,a&&`${e}-reverse`,x==="switch"&&n),children:y||i.jsxs(i.Fragment,{children:[w,_&&i.jsx(np,{title:g,children:v}),m&&i.jsx(jg,{type:u,tooltip:d,children:m})]})})})});Y_.displayName="FormCheck";const ip=Object.assign(Y_,{Input:Um,Label:np}),Q_=f.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:s,id:a,className:r,isValid:o=!1,isInvalid:c=!1,plaintext:d,readOnly:m,as:u="input",...p},h)=>{const{controlId:g}=f.useContext(yr);return t=Tt(t,"form-control"),i.jsx(u,{...p,type:e,size:s,ref:h,readOnly:m,id:a||g,className:xt(r,d?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",c&&"is-invalid")})});Q_.displayName="FormControl";const t5=Object.assign(Q_,{Feedback:jg}),Z_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"form-floating"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Z_.displayName="FormFloating";const Nb=f.forwardRef(({controlId:t,as:e="div",...n},s)=>{const a=f.useMemo(()=>({controlId:t}),[t]);return i.jsx(yr.Provider,{value:a,children:i.jsx(e,{...n,ref:s})})});Nb.displayName="FormGroup";const X_=f.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:s=!1,className:a,htmlFor:r,...o},c)=>{const{controlId:d}=f.useContext(yr);e=Tt(e,"form-label");let m="col-form-label";typeof n=="string"&&(m=`${m} ${m}-${n}`);const u=xt(a,e,s&&"visually-hidden",n&&m);return r=r||d,n?i.jsx(Ct,{ref:c,as:"label",className:u,htmlFor:r,...o}):i.jsx(t,{ref:c,className:u,htmlFor:r,...o})});X_.displayName="FormLabel";const J_=f.forwardRef(({bsPrefix:t,className:e,id:n,...s},a)=>{const{controlId:r}=f.useContext(yr);return t=Tt(t,"form-range"),i.jsx("input",{...s,type:"range",ref:a,className:xt(e,t),id:n||r})});J_.displayName="FormRange";const eE=f.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:s,isValid:a=!1,isInvalid:r=!1,id:o,...c},d)=>{const{controlId:m}=f.useContext(yr);return t=Tt(t,"form-select"),i.jsx("select",{...c,size:n,ref:d,className:xt(s,t,e&&`${t}-${e}`,a&&"is-valid",r&&"is-invalid"),id:o||m})});eE.displayName="FormSelect";const tE=f.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:s,...a},r)=>(t=Tt(t,"form-text"),i.jsx(n,{...a,ref:r,className:xt(e,t,s&&"text-muted")})));tE.displayName="FormText";const nE=f.forwardRef((t,e)=>i.jsx(ip,{...t,ref:e,type:"switch"}));nE.displayName="Switch";const n5=Object.assign(nE,{Input:ip.Input,Label:ip.Label}),iE=f.forwardRef(({bsPrefix:t,className:e,children:n,controlId:s,label:a,...r},o)=>(t=Tt(t,"form-floating"),i.jsxs(Nb,{ref:o,className:xt(e,t),controlId:s,...r,children:[n,i.jsx("label",{htmlFor:s,children:a})]})));iE.displayName="FloatingLabel";const i5={_ref:De.any,validated:De.bool,as:De.elementType},Cb=f.forwardRef(({className:t,validated:e,as:n="form",...s},a)=>i.jsx(n,{...s,ref:a,className:xt(t,e&&"was-validated")}));Cb.displayName="Form";Cb.propTypes=i5;const Mt=Object.assign(Cb,{Group:Nb,Control:t5,Floating:Z_,Check:ip,Switch:n5,Label:X_,Text:tE,Range:J_,Select:eE,FloatingLabel:iE}),Ng=f.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},a)=>(e=Tt(e,"input-group-text"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Ng.displayName="InputGroupText";const s5=t=>i.jsx(Ng,{children:i.jsx(Um,{type:"checkbox",...t})}),a5=t=>i.jsx(Ng,{children:i.jsx(Um,{type:"radio",...t})}),sE=f.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:s,as:a="div",...r},o)=>{t=Tt(t,"input-group");const c=f.useMemo(()=>({}),[]);return i.jsx(W_.Provider,{value:c,children:i.jsx(a,{ref:o,...r,className:xt(s,t,e&&`${t}-${e}`,n&&"has-validation")})})});sE.displayName="InputGroup";const Qd=Object.assign(sE,{Text:Ng,Radio:a5,Checkbox:s5}),Lj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function r5(t,e){const n=Lj(t),s=Lj(e);return a=>{n&&n(a),s&&s(a)}}function Wm(t,e){return f.useMemo(()=>r5(t,e),[t,e])}const Gc=f.createContext(null),l5=["as","active","eventKey"];function o5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function aE({key:t,onClick:e,active:n,id:s,role:a,disabled:r}){const o=f.useContext(Ac),c=f.useContext(kb),d=f.useContext(Gc);let m=n;const u={role:a};if(c){!a&&c.role==="tablist"&&(u.role="tab");const p=c.getControllerId(t??null),h=c.getControlledId(t??null);u[kg("event-key")]=t,u.id=p||s,m=n==null&&t!=null?c.activeKey===t:n,(m||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=m,m||(u.tabIndex=-1),r&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Is(p=>{r||(e?.(p),t!=null&&o&&!p.isPropagationStopped()&&o(t,p))}),[u,{isActive:m}]}const rE=f.forwardRef((t,e)=>{let{as:n=y_,active:s,eventKey:a}=t,r=o5(t,l5);const[o,c]=aE(Object.assign({key:gm(a,r.href),active:s},r));return o[kg("active")]=c.isActive,i.jsx(n,Object.assign({},r,o,{ref:e}))});rE.displayName="NavItem";const c5=["as","onSelect","activeKey","role","onKeyDown"];function d5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const Fj=()=>{},$j=kg("event-key"),lE=f.forwardRef((t,e)=>{let{as:n="div",onSelect:s,activeKey:a,role:r,onKeyDown:o}=t,c=d5(t,c5);const d=w3(),m=f.useRef(!1),u=f.useContext(Ac),p=f.useContext(Gc);let h,g;p&&(r=r||"tablist",a=p.activeKey,h=p.getControlledId,g=p.getControllerId);const x=f.useRef(null),v=k=>{const S=x.current;if(!S)return null;const N=Pl(S,`[${$j}]:not([aria-disabled=true])`),_=S.querySelector("[aria-selected=true]");if(!_||_!==document.activeElement)return null;const w=N.indexOf(_);if(w===-1)return null;let T=w+k;return T>=N.length&&(T=0),T<0&&(T=N.length-1),N[T]},y=(k,S)=>{k!=null&&(s?.(k,S),u?.(k,S))},b=k=>{if(o?.(k),!p)return;let S;switch(k.key){case"ArrowLeft":case"ArrowUp":S=v(-1);break;case"ArrowRight":case"ArrowDown":S=v(1);break;default:return}S&&(k.preventDefault(),y(S.dataset[ZO("EventKey")]||null,k),m.current=!0,d())};f.useEffect(()=>{if(x.current&&m.current){const k=x.current.querySelector(`[${$j}][aria-selected=true]`);k?.focus()}m.current=!1});const j=Wm(e,x);return i.jsx(Ac.Provider,{value:y,children:i.jsx(kb.Provider,{value:{role:r,activeKey:gm(a),getControlledId:h||Fj,getControllerId:g||Fj},children:i.jsx(n,Object.assign({},c,{onKeyDown:b,ref:j,role:r}))})})});lE.displayName="Nav";const m5=Object.assign(lE,{Item:rE});var Pu;function Bj(t){if((!Pu&&Pu!==0||t)&&Kc){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Pu=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Pu}function u5(){return f.useState(null)}function Uf(t){t===void 0&&(t=Wc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function h5(t){const e=f.useRef(t);return e.current=t,e}function p5(t){const e=h5(t);f.useEffect(()=>()=>e.current(),[])}function g5(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const qj=kg("modal-open");class Sb{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return g5(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[s]:a.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(hr(a,s)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(qj,""),hr(a,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(qj),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Wf=(t,e)=>Kc?t==null?(e||Wc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Ax(t,e){const n=jb(),[s,a]=f.useState(()=>Wf(t,n?.document));if(!s){const r=Wf(t);r&&a(r)}return f.useEffect(()=>{},[e,s]),f.useEffect(()=>{const r=Wf(t);r!==s&&a(r)},[t,s]),s}function _b({children:t,in:e,onExited:n,mountOnEnter:s,unmountOnExit:a}){const r=f.useRef(null),o=f.useRef(e),c=Is(n);f.useEffect(()=>{e?o.current=!0:c(r.current)},[e,c]);const d=Wm(r,vo(t)),m=f.cloneElement(t,{ref:d});return e?m:a||!o.current&&s?null:m}const f5=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function v5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function x5(t){let{onEnter:e,onEntering:n,onEntered:s,onExit:a,onExiting:r,onExited:o,addEndListener:c,children:d}=t,m=v5(t,f5);const u=f.useRef(null),p=Wm(u,vo(d)),h=S=>N=>{S&&u.current&&S(u.current,N)},g=f.useCallback(h(e),[e]),x=f.useCallback(h(n),[n]),v=f.useCallback(h(s),[s]),y=f.useCallback(h(a),[a]),b=f.useCallback(h(r),[r]),j=f.useCallback(h(o),[o]),k=f.useCallback(h(c),[c]);return Object.assign({},m,{nodeRef:u},e&&{onEnter:g},n&&{onEntering:x},s&&{onEntered:v},a&&{onExit:y},r&&{onExiting:b},o&&{onExited:j},c&&{addEndListener:k},{children:typeof d=="function"?(S,N)=>d(S,Object.assign({},N,{ref:p})):f.cloneElement(d,{ref:p})})}const y5=["component"];function b5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const w5=f.forwardRef((t,e)=>{let{component:n}=t,s=b5(t,y5);const a=x5(s);return i.jsx(n,Object.assign({ref:e},a))});function k5({in:t,onTransition:e}){const n=f.useRef(null),s=f.useRef(!0),a=Is(e);return wj(()=>{if(!n.current)return;let r=!1;return a({in:t,element:n.current,initial:s.current,isStale:()=>r}),()=>{r=!0}},[t,a]),wj(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function j5({children:t,in:e,onExited:n,onEntered:s,transition:a}){const[r,o]=f.useState(!e);e&&r&&o(!1);const c=k5({in:!!e,onTransition:m=>{const u=()=>{m.isStale()||(m.in?s?.(m.element,m.initial):(o(!0),n?.(m.element)))};Promise.resolve(a(m)).then(u,p=>{throw m.in||o(!0),p})}}),d=Wm(c,vo(t));return r&&!e?null:f.cloneElement(t,{ref:d})}function Dx(t,e,n){return t?i.jsx(w5,Object.assign({},n,{component:t})):e?i.jsx(j5,Object.assign({},n,{transition:e})):i.jsx(_b,Object.assign({},n))}const N5=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function C5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}let Kf;function S5(t){return Kf||(Kf=new Sb({ownerDocument:t?.document})),Kf}function _5(t){const e=jb(),n=t||S5(e),s=f.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:f.useCallback(a=>{s.current.dialog=a},[]),setBackdropRef:f.useCallback(a=>{s.current.backdrop=a},[])})}const oE=f.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:a,style:r,children:o,backdrop:c=!0,keyboard:d=!0,onBackdropClick:m,onEscapeKeyDown:u,transition:p,runTransition:h,backdropTransition:g,runBackdropTransition:x,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:j,renderDialog:k,renderBackdrop:S=ee=>i.jsx("div",Object.assign({},ee)),manager:N,container:_,onShow:w,onHide:T=()=>{},onExit:A,onExited:M,onExiting:E,onEnter:P,onEntering:D,onEntered:O}=t,F=C5(t,N5);const q=jb(),U=Ax(_),K=_5(N),ne=x_(),Y=JI(n),[fe,le]=f.useState(!n),W=f.useRef(null);f.useImperativeHandle(e,()=>K,[K]),Kc&&!Y&&n&&(W.current=Uf(q?.document)),n&&fe&&le(!1);const z=Is(()=>{if(K.add(),V.current=sr(document,"keydown",L),Q.current=sr(document,"focus",()=>setTimeout(re),!0),w&&w(),v){var ee,ae;const I=Uf((ee=(ae=K.dialog)==null?void 0:ae.ownerDocument)!=null?ee:q?.document);K.dialog&&I&&!pm(K.dialog,I)&&(W.current=I,K.dialog.focus())}}),ie=Is(()=>{if(K.remove(),V.current==null||V.current(),Q.current==null||Q.current(),b){var ee;(ee=W.current)==null||ee.focus==null||ee.focus(j),W.current=null}});f.useEffect(()=>{!n||!U||z()},[n,U,z]),f.useEffect(()=>{fe&&ie()},[fe,ie]),p5(()=>{ie()});const re=Is(()=>{if(!y||!ne()||!K.isTopModal())return;const ee=Uf(q?.document);K.dialog&&ee&&!pm(K.dialog,ee)&&K.dialog.focus()}),de=Is(ee=>{ee.target===ee.currentTarget&&(m?.(ee),c===!0&&T())}),L=Is(ee=>{d&&m_(ee)&&K.isTopModal()&&(u?.(ee),ee.defaultPrevented||T())}),Q=f.useRef(),V=f.useRef(),Z=(...ee)=>{le(!0),M?.(...ee)};if(!U)return null;const X=Object.assign({role:s,ref:K.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},F,{style:r,className:a,tabIndex:-1});let R=k?k(X):i.jsx("div",Object.assign({},X,{children:f.cloneElement(o,{role:"document"})}));R=Dx(p,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:A,onExiting:E,onExited:Z,onEnter:P,onEntering:D,onEntered:O,children:R});let G=null;return c&&(G=S({ref:K.setBackdropRef,onClick:de}),G=Dx(g,x,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:G})),i.jsx(i.Fragment,{children:$l.createPortal(i.jsxs(i.Fragment,{children:[G,R]}),U)})});oE.displayName="Modal";const cE=Object.assign(oE,{Manager:Sb});function Rx(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function dE(t,e){t.classList?t.classList.add(e):Rx(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Hj(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function mE(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Hj(t.className,e):t.setAttribute("class",Hj(t.className&&t.className.baseVal||"",e))}const Uo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class uE extends Sb{adjustAndStore(e,n,s){const a=n.style[e];n.dataset[e]=a,hr(n,{[e]:`${parseFloat(hr(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],hr(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(dE(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Pl(n,Uo.FIXED_CONTENT).forEach(r=>this.adjustAndStore(s,r,e.scrollBarWidth)),Pl(n,Uo.STICKY_CONTENT).forEach(r=>this.adjustAndStore(a,r,-e.scrollBarWidth)),Pl(n,Uo.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(a,r,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();mE(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Pl(n,Uo.FIXED_CONTENT).forEach(r=>this.restore(s,r)),Pl(n,Uo.STICKY_CONTENT).forEach(r=>this.restore(a,r)),Pl(n,Uo.NAVBAR_TOGGLER).forEach(r=>this.restore(a,r))}}let Gf;function hE(t){return Gf||(Gf=new uE(t)),Gf}const pE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"modal-body"),i.jsx(n,{ref:a,className:xt(t,e),...s})));pE.displayName="ModalBody";const Eb=f.createContext({onHide(){}}),Tb=f.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:a,fullscreen:r,children:o,scrollable:c,...d},m)=>{t=Tt(t,"modal");const u=`${t}-dialog`,p=typeof r=="string"?`${t}-fullscreen-${r}`:`${t}-fullscreen`;return i.jsx("div",{...d,ref:m,className:xt(u,e,a&&`${t}-${a}`,s&&`${u}-centered`,c&&`${u}-scrollable`,r&&p),children:i.jsx("div",{className:xt(`${t}-content`,n),children:o})})});Tb.displayName="ModalDialog";const gE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"modal-footer"),i.jsx(n,{ref:a,className:xt(t,e),...s})));gE.displayName="ModalFooter";const Ab=f.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:a,...r},o)=>{const c=f.useContext(Eb),d=Cc(()=>{c?.onHide(),s?.()});return i.jsxs("div",{ref:o,...r,children:[a,n&&i.jsx(bg,{"aria-label":t,variant:e,onClick:d})]})});Ab.displayName="AbstractModalHeader";const fE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},r)=>(t=Tt(t,"modal-header"),i.jsx(Ab,{ref:r,...a,className:xt(e,t),closeLabel:n,closeButton:s})));fE.displayName="ModalHeader";const E5=Hm("h4"),vE=f.forwardRef(({className:t,bsPrefix:e,as:n=E5,...s},a)=>(e=Tt(e,"modal-title"),i.jsx(n,{ref:a,className:xt(t,e),...s})));vE.displayName="ModalTitle";function T5(t){return i.jsx(Da,{...t,timeout:null})}function A5(t){return i.jsx(Da,{...t,timeout:null})}const xE=f.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:a,children:r,dialogAs:o=Tb,"data-bs-theme":c,"aria-labelledby":d,"aria-describedby":m,"aria-label":u,show:p=!1,animation:h=!0,backdrop:g=!0,keyboard:x=!0,onEscapeKeyDown:v,onShow:y,onHide:b,container:j,autoFocus:k=!0,enforceFocus:S=!0,restoreFocus:N=!0,restoreFocusOptions:_,onEntered:w,onExit:T,onExiting:A,onEnter:M,onEntering:E,onExited:P,backdropClassName:D,manager:O,...F},q)=>{const[U,K]=f.useState({}),[ne,Y]=f.useState(!1),fe=f.useRef(!1),le=f.useRef(!1),W=f.useRef(null),[z,ie]=u5(),re=vg(q,ie),de=Cc(b),L=db();t=Tt(t,"modal");const Q=f.useMemo(()=>({onHide:de}),[de]);function V(){return O||hE({isRTL:L})}function Z(he){if(!Kc)return;const _e=V().getScrollbarWidth()>0,Ke=he.scrollHeight>Wc(he).documentElement.clientHeight;K({paddingRight:_e&&!Ke?Bj():void 0,paddingLeft:!_e&&Ke?Bj():void 0})}const X=Cc(()=>{z&&Z(z.dialog)});D_(()=>{Sx(window,"resize",X),W.current==null||W.current()});const R=()=>{fe.current=!0},G=he=>{fe.current&&z&&he.target===z.dialog&&(le.current=!0),fe.current=!1},ee=()=>{Y(!0),W.current=h_(z.dialog,()=>{Y(!1)})},ae=he=>{he.target===he.currentTarget&&ee()},I=he=>{if(g==="static"){ae(he);return}if(le.current||he.target!==he.currentTarget){le.current=!1;return}b?.()},H=he=>{x?v?.(he):(he.preventDefault(),g==="static"&&ee())},B=(he,_e)=>{he&&Z(he),M?.(he,_e)},te=he=>{W.current==null||W.current(),T?.(he)},oe=(he,_e)=>{E?.(he,_e),u_(window,"resize",X)},ye=he=>{he&&(he.style.display=""),P?.(he),Sx(window,"resize",X)},me=f.useCallback(he=>i.jsx("div",{...he,className:xt(`${t}-backdrop`,D,!h&&"show")}),[h,D,t]),xe={...n,...U};xe.display="block";const Ce=he=>i.jsx("div",{role:"dialog",...he,style:xe,className:xt(e,t,ne&&`${t}-static`,!h&&"show"),onClick:g?I:void 0,onMouseUp:G,"data-bs-theme":c,"aria-label":u,"aria-labelledby":d,"aria-describedby":m,children:i.jsx(o,{...F,onMouseDown:R,className:s,contentClassName:a,children:r})});return i.jsx(Eb.Provider,{value:Q,children:i.jsx(cE,{show:p,ref:re,backdrop:g,container:j,keyboard:!0,autoFocus:k,enforceFocus:S,restoreFocus:N,restoreFocusOptions:_,onEscapeKeyDown:H,onShow:y,onHide:b,onEnter:B,onEntering:oe,onEntered:w,onExit:te,onExiting:A,onExited:ye,manager:V(),transition:h?T5:void 0,backdropTransition:h?A5:void 0,renderBackdrop:me,renderDialog:Ce})})});xE.displayName="Modal";const st=Object.assign(xE,{Body:pE,Header:fE,Title:vE,Footer:gE,Dialog:Tb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Db=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"nav-item"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Db.displayName="NavItem";const Rb=f.forwardRef(({bsPrefix:t,className:e,as:n=yg,active:s,eventKey:a,disabled:r=!1,...o},c)=>{t=Tt(t,"nav-link");const[d,m]=aE({key:gm(a,o.href),active:s,disabled:r,...o});return i.jsx(n,{...o,...d,ref:c,disabled:r,className:xt(e,t,r&&"disabled",m.isActive&&"active")})});Rb.displayName="NavLink";const yE=f.forwardRef((t,e)=>{const{as:n="div",bsPrefix:s,variant:a,fill:r=!1,justify:o=!1,navbar:c,navbarScroll:d,className:m,activeKey:u,...p}=ob(t,{activeKey:"onSelect"}),h=Tt(s,"nav");let g,x,v=!1;const y=f.useContext(K_),b=f.useContext(pb);return y?(g=y.bsPrefix,v=c??!0):b&&({cardHeaderBsPrefix:x}=b),i.jsx(m5,{as:n,ref:e,activeKey:u,className:xt(m,{[h]:!v,[`${g}-nav`]:v,[`${g}-nav-scroll`]:v&&d,[`${x}-${a}`]:!!x,[`${h}-${a}`]:!!a,[`${h}-fill`]:r,[`${h}-justified`]:o}),...p})});yE.displayName="Nav";const Dn=Object.assign(yE,{Item:Db,Link:Rb}),Px=new WeakMap,zj=(t,e)=>{if(!t||!e)return;const n=Px.get(e)||new Map;Px.set(e,n);let s=n.get(t);return s||(s=e.matchMedia(t),s.refCount=0,n.set(s.media,s)),s};function D5(t,e=typeof window>"u"?void 0:window){const n=zj(t,e),[s,a]=f.useState(()=>n?n.matches:!1);return U_(()=>{let r=zj(t,e);if(!r)return a(!1);let o=Px.get(e);const c=()=>{a(r.matches)};return r.refCount++,r.addListener(c),c(),()=>{r.removeListener(c),r.refCount--,r.refCount<=0&&o?.delete(r.media),r=void 0}},[t]),s}function R5(t){const e=Object.keys(t);function n(c,d){return c===d?d:c?`${c} and ${d}`:d}function s(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function a(c){const d=s(c);let m=t[d];return typeof m=="number"?m=`${m-.2}px`:m=`calc(${m} - 0.2px)`,`(max-width: ${m})`}function r(c){let d=t[c];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function o(c,d,m){let u;typeof c=="object"?(u=c,m=d,d=!0):(d=d||!0,u={[c]:d});let p=f.useMemo(()=>Object.entries(u).reduce((h,[g,x])=>((x==="up"||x===!0)&&(h=n(h,r(g))),(x==="down"||x===!0)&&(h=n(h,a(g))),h),""),[JSON.stringify(u)]);return D5(p,m)}return o}const P5=R5({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),bE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"offcanvas-body"),i.jsx(n,{ref:a,className:xt(t,e),...s})));bE.displayName="OffcanvasBody";const M5={[Ai]:"show",[fs]:"show"},wE=f.forwardRef(({bsPrefix:t,className:e,children:n,in:s=!1,mountOnEnter:a=!1,unmountOnExit:r=!1,appear:o=!1,...c},d)=>(t=Tt(t,"offcanvas"),i.jsx(xg,{ref:d,addEndListener:ub,in:s,mountOnEnter:a,unmountOnExit:r,appear:o,...c,childRef:vo(n),children:(m,u)=>f.cloneElement(n,{...u,className:xt(e,n.props.className,(m===Ai||m===eo)&&`${t}-toggling`,M5[m])})})));wE.displayName="OffcanvasToggling";const kE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},r)=>(t=Tt(t,"offcanvas-header"),i.jsx(Ab,{ref:r,...a,className:xt(e,t),closeLabel:n,closeButton:s})));kE.displayName="OffcanvasHeader";const I5=Hm("h5"),jE=f.forwardRef(({className:t,bsPrefix:e,as:n=I5,...s},a)=>(e=Tt(e,"offcanvas-title"),i.jsx(n,{ref:a,className:xt(t,e),...s})));jE.displayName="OffcanvasTitle";function O5(t){return i.jsx(wE,{...t})}function L5(t){return i.jsx(Da,{...t})}const NE=f.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":s,placement:a="start",responsive:r,show:o=!1,backdrop:c=!0,keyboard:d=!0,scroll:m=!1,onEscapeKeyDown:u,onShow:p,onHide:h,container:g,autoFocus:x=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:b,onEntered:j,onExit:k,onExiting:S,onEnter:N,onEntering:_,onExited:w,backdropClassName:T,manager:A,renderStaticNode:M=!1,...E},P)=>{const D=f.useRef();t=Tt(t,"offcanvas");const[O,F]=f.useState(!1),q=Cc(h),U=P5(r||"xs","up");f.useEffect(()=>{F(r?o&&!U:o)},[o,r,U]);const K=f.useMemo(()=>({onHide:q}),[q]);function ne(){return A||(m?(D.current||(D.current=new uE({handleContainerOverflow:!1})),D.current):hE())}const Y=(z,...ie)=>{z&&(z.style.visibility="visible"),N?.(z,...ie)},fe=(z,...ie)=>{z&&(z.style.visibility=""),w?.(...ie)},le=f.useCallback(z=>i.jsx("div",{...z,className:xt(`${t}-backdrop`,T)}),[T,t]),W=z=>i.jsx("div",{...z,...E,className:xt(e,r?`${t}-${r}`:t,`${t}-${a}`),"aria-labelledby":s,children:n});return i.jsxs(i.Fragment,{children:[!O&&(r||M)&&W({}),i.jsx(Eb.Provider,{value:K,children:i.jsx(cE,{show:O,ref:P,backdrop:c,container:g,keyboard:d,autoFocus:x,enforceFocus:v&&!m,restoreFocus:y,restoreFocusOptions:b,onEscapeKeyDown:u,onShow:p,onHide:q,onEnter:Y,onEntering:_,onEntered:j,onExit:k,onExiting:S,onExited:fe,manager:ne(),transition:O5,backdropTransition:L5,renderBackdrop:le,renderDialog:W})})]})});NE.displayName="Offcanvas";const Mu=Object.assign(NE,{Body:bE,Header:kE,Title:jE}),F5=()=>{};function $5(t,e,{disabled:n,clickTrigger:s}={}){const a=e||F5;OO(t,a,{disabled:n,clickTrigger:s});const r=Is(o=>{m_(o)&&a(o)});f.useEffect(()=>{if(n||t==null)return;const o=Wc(Ah(t));let c=(o.defaultView||window).event;const d=sr(o,"keyup",m=>{if(m===c){c=void 0;return}r(m)});return()=>{d()}},[t,n,r])}const CE=f.forwardRef((t,e)=>{const{flip:n,offset:s,placement:a,containerPadding:r,popperConfig:o={},transition:c,runTransition:d}=t,[m,u]=bj(),[p,h]=bj(),g=Wm(u,e),x=Ax(t.container),v=Ax(t.target),[y,b]=f.useState(!t.show),j=AO(v,m,$O({placement:a,enableEvents:!!t.show,containerPadding:r||5,flip:n,offset:s,arrowElement:p,popperConfig:o}));t.show&&y&&b(!1);const k=(...E)=>{b(!0),t.onExited&&t.onExited(...E)},S=t.show||!y;if($5(m,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!S)return null;const{onExit:N,onExiting:_,onEnter:w,onEntering:T,onEntered:A}=t;let M=t.children(Object.assign({},j.attributes.popper,{style:j.styles.popper,ref:g}),{popper:j,placement:a,show:!!t.show,arrowProps:Object.assign({},j.attributes.arrow,{style:j.styles.arrow,ref:h})});return M=Dx(c,d,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:M,onExit:N,onExiting:_,onExited:k,onEnter:w,onEntering:T,onEntered:A}),x?$l.createPortal(M,x):null});CE.displayName="Overlay";const SE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"popover-header"),i.jsx(n,{ref:a,className:xt(t,e),...s})));SE.displayName="PopoverHeader";const Pb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"popover-body"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Pb.displayName="PopoverBody";function _E(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function EE(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const TE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,body:r,arrowProps:o,hasDoneInitialMeasure:c,popper:d,show:m,...u},p)=>{const h=Tt(t,"popover"),g=db(),[x]=e?.split("-")||[],v=_E(x,g);let y=s;return m&&!c&&(y={...s,...EE(d?.strategy)}),i.jsxs("div",{ref:p,role:"tooltip",style:y,"x-placement":x,className:xt(n,h,x&&`bs-popover-${v}`),...u,children:[i.jsx("div",{className:"popover-arrow",...o}),r?i.jsx(Pb,{children:a}):a]})});TE.displayName="Popover";const Mx=Object.assign(TE,{Header:SE,Body:Pb,POPPER_OFFSET:[0,8]}),AE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,arrowProps:r,hasDoneInitialMeasure:o,popper:c,show:d,...m},u)=>{t=Tt(t,"tooltip");const p=db(),[h]=e?.split("-")||[],g=_E(h,p);let x=s;return d&&!o&&(x={...s,...EE(c?.strategy)}),i.jsxs("div",{ref:u,style:x,role:"tooltip","x-placement":h,className:xt(n,t,`bs-tooltip-${g}`),...m,children:[i.jsx("div",{className:"tooltip-arrow",...r}),i.jsx("div",{className:`${t}-inner`,children:a})]})});AE.displayName="Tooltip";const ut=Object.assign(AE,{TOOLTIP_OFFSET:[0,6]});function B5(t){const e=f.useRef(null),n=Tt(void 0,"popover"),s=Tt(void 0,"tooltip"),a=f.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(Rx(e.current,n))return Mx.POPPER_OFFSET;if(Rx(e.current,s))return ut.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,s]);return[e,[a]]}function q5(t,e){const{ref:n}=t,{ref:s}=e;t.ref=n.__wrapped||(n.__wrapped=a=>n(ep(a))),e.ref=s.__wrapped||(s.__wrapped=a=>s(ep(a)))}const DE=f.forwardRef(({children:t,transition:e=Da,popperConfig:n={},rootClose:s=!1,placement:a="top",show:r=!1,...o},c)=>{const d=f.useRef({}),[m,u]=f.useState(null),[p,h]=B5(o.offset),g=vg(c,p),x=e===!0?Da:e||void 0,v=Cc(y=>{u(y),n==null||n.onFirstUpdate==null||n.onFirstUpdate(y)});return U_(()=>{m&&o.target&&(d.current.scheduleUpdate==null||d.current.scheduleUpdate())},[m,o.target]),f.useEffect(()=>{r||u(null)},[r]),i.jsx(CE,{...o,ref:g,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:v},transition:x,rootClose:s,placement:a,show:r,children:(y,{arrowProps:b,popper:j,show:k})=>{var S;q5(y,b);const N=j?.placement,_=Object.assign(d.current,{state:j?.state,scheduleUpdate:j?.update,placement:N,outOfBoundaries:(j==null||(S=j.state)==null||(S=S.modifiersData.hide)==null?void 0:S.isReferenceHidden)||!1,strategy:n.strategy}),w=!!m;return typeof t=="function"?t({...y,placement:N,show:k,...!e&&k&&{className:"show"},popper:_,arrowProps:b,hasDoneInitialMeasure:w}):f.cloneElement(t,{...y,placement:N,arrowProps:b,popper:_,hasDoneInitialMeasure:w,className:xt(t.props.className,!e&&k&&"show"),style:{...t.props.style,...y.style}})}})});DE.displayName="Overlay";function H5(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function Vj(t,e,n){const[s]=e,a=s.currentTarget,r=s.relatedTarget||s.nativeEvent[n];(!r||r!==a)&&!pm(a,r)&&t(...e)}De.oneOf(["click","hover","focus"]);const Qe=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:s={},show:a,defaultShow:r=!1,onToggle:o,delay:c,placement:d,flip:m=d&&d.indexOf("auto")!==-1,...u})=>{const p=f.useRef(null),h=vg(p,vo(n)),g=g3(),x=f.useRef(""),[v,y]=l_(a,r,o),b=H5(c),{onFocus:j,onBlur:k,onClick:S}=typeof n!="function"?f.Children.only(n).props:{},N=F=>{h(ep(F))},_=f.useCallback(()=>{if(g.clear(),x.current="show",!b.show){y(!0);return}g.set(()=>{x.current==="show"&&y(!0)},b.show)},[b.show,y,g]),w=f.useCallback(()=>{if(g.clear(),x.current="hide",!b.hide){y(!1);return}g.set(()=>{x.current==="hide"&&y(!1)},b.hide)},[b.hide,y,g]),T=f.useCallback((...F)=>{_(),j?.(...F)},[_,j]),A=f.useCallback((...F)=>{w(),k?.(...F)},[w,k]),M=f.useCallback((...F)=>{y(!v),S?.(...F)},[S,y,v]),E=f.useCallback((...F)=>{Vj(_,F,"fromElement")},[_]),P=f.useCallback((...F)=>{Vj(w,F,"toElement")},[w]),D=t==null?[]:[].concat(t),O={ref:N};return D.indexOf("click")!==-1&&(O.onClick=M),D.indexOf("focus")!==-1&&(O.onFocus=T,O.onBlur=A),D.indexOf("hover")!==-1&&(O.onMouseOver=E,O.onMouseOut=P),i.jsxs(i.Fragment,{children:[typeof n=="function"?n(O):f.cloneElement(n,O),i.jsx(DE,{...u,show:v,onHide:w,flip:m,placement:d,popperConfig:s,target:p.current,children:e})]})},Mb=f.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:s,activeLabel:a="(current)",children:r,linkStyle:o,linkClassName:c,as:d=yg,...m},u)=>{const p=t||e?"span":d;return i.jsx("li",{ref:u,style:s,className:xt(n,"page-item",{active:t,disabled:e}),children:i.jsxs(p,{className:xt("page-link",c),style:o,...m,children:[r,t&&a&&i.jsx("span",{className:"visually-hidden",children:a})]})})});Mb.displayName="PageItem";function Km(t,e,n=t){const s=f.forwardRef(({children:a,...r},o)=>i.jsxs(Mb,{...r,ref:o,children:[i.jsx("span",{"aria-hidden":"true",children:a||e}),i.jsx("span",{className:"visually-hidden",children:n})]}));return s.displayName=t,s}const z5=Km("First",""),V5=Km("Prev","","Previous"),U5=Km("Ellipsis","","More"),W5=Km("Next",""),K5=Km("Last",""),RE=f.forwardRef(({bsPrefix:t,className:e,size:n,...s},a)=>{const r=Tt(t,"pagination");return i.jsx("ul",{ref:a,...s,className:xt(e,r,n&&`${r}-${n}`)})});RE.displayName="Pagination";const El=Object.assign(RE,{First:z5,Prev:V5,Ellipsis:U5,Item:Mb,Next:W5,Last:K5}),Un=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const r=Tt(t,"row"),o=o_(),c=c_(),d=`${r}-cols`,m=[];return o.forEach(u=>{const p=s[u];delete s[u];let h;p!=null&&typeof p=="object"?{cols:h}=p:h=p;const g=u!==c?`-${u}`:"";h!=null&&m.push(`${d}${g}-${h}`)}),i.jsx(n,{ref:a,...s,className:xt(e,r,...m)})});Un.displayName="Row";const Cg=f.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:s,as:a="div",className:r,...o},c)=>{t=Tt(t,"spinner");const d=`${t}-${n}`;return i.jsx(a,{ref:c,...o,className:xt(r,d,s&&`${d}-${s}`,e&&`text-${e}`)})});Cg.displayName="Spinner";const G5=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Y5=["activeKey","getControlledId","getControllerId"],Q5=["as"];function Ix(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function PE(t){let{active:e,eventKey:n,mountOnEnter:s,transition:a,unmountOnExit:r,role:o="tabpanel",onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}=t,g=Ix(t,G5);const x=f.useContext(Gc);if(!x)return[Object.assign({},g,{role:o}),{eventKey:n,isActive:e,mountOnEnter:s,transition:a,unmountOnExit:r,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}];const{activeKey:v,getControlledId:y,getControllerId:b}=x,j=Ix(x,Y5),k=gm(n);return[Object.assign({},g,{role:o,id:y(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:e==null&&k!=null?gm(v)===k:e,transition:a||j.transition,mountOnEnter:s??j.mountOnEnter,unmountOnExit:r??j.unmountOnExit,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}]}const ME=f.forwardRef((t,e)=>{let{as:n="div"}=t,s=Ix(t,Q5);const[a,{isActive:r,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,transition:x=_b}]=PE(s);return i.jsx(Gc.Provider,{value:null,children:i.jsx(Ac.Provider,{value:null,children:i.jsx(x,{in:r,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,children:i.jsx(n,Object.assign({},a,{ref:e,hidden:!r,"aria-hidden":!r}))})})})});ME.displayName="TabPanel";const Ib=t=>{const{id:e,generateChildId:n,onSelect:s,activeKey:a,defaultActiveKey:r,transition:o,mountOnEnter:c,unmountOnExit:d,children:m}=t,[u,p]=b3(a,r,s),h=VO(e),g=f.useMemo(()=>n||((v,y)=>h?`${h}-${y}-${v}`:null),[h,n]),x=f.useMemo(()=>({onSelect:p,activeKey:u,transition:o,mountOnEnter:c||!1,unmountOnExit:d||!1,getControlledId:v=>g(v,"tabpane"),getControllerId:v=>g(v,"tab")}),[p,u,o,c,d,g]);return i.jsx(Gc.Provider,{value:x,children:i.jsx(Ac.Provider,{value:p||null,children:m})})};Ib.Panel=ME;function Ob(t){return typeof t=="boolean"?t?Da:_b:t}const IE=({transition:t,...e})=>i.jsx(Ib,{...e,transition:Ob(t)});IE.displayName="TabContainer";const Lb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Tt(e,"tab-content"),i.jsx(n,{ref:a,className:xt(t,e),...s})));Lb.displayName="TabContent";const Fb=f.forwardRef(({bsPrefix:t,transition:e,...n},s)=>{const[{className:a,as:r="div",...o},{isActive:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:x,unmountOnExit:v,transition:y=Da}]=PE({...n,transition:Ob(e)}),b=Tt(t,"tab-pane");return i.jsx(Gc.Provider,{value:null,children:i.jsx(Ac.Provider,{value:null,children:i.jsx(y,{in:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:x,unmountOnExit:v,children:i.jsx(r,{...o,ref:s,className:xt(a,b,c&&"active")})})})})});Fb.displayName="TabPane";const Z5={eventKey:De.oneOfType([De.string,De.number]),title:De.node.isRequired,disabled:De.bool,tabClassName:De.string,tabAttrs:De.object},OE=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};OE.propTypes=Z5;const Sg=Object.assign(OE,{Container:IE,Content:Lb,Pane:Fb}),Ox=f.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:s,borderless:a,hover:r,size:o,variant:c,responsive:d,...m},u)=>{const p=Tt(t,"table"),h=xt(e,p,c&&`${p}-${c}`,o&&`${p}-${o}`,n&&`${p}-${typeof n=="string"?`striped-${n}`:"striped"}`,s&&`${p}-bordered`,a&&`${p}-borderless`,r&&`${p}-hover`),g=i.jsx("table",{...m,className:h,ref:u});if(d){let x=`${p}-responsive`;return typeof d=="string"&&(x=`${x}-${d}`),i.jsx("div",{className:x,children:g})}return g});Ox.displayName="Table";function X5(t){let e;return f3(t,n=>{e==null&&(e=n.props.eventKey)}),e}function J5(t){const{title:e,eventKey:n,disabled:s,tabClassName:a,tabAttrs:r,id:o}=t.props;return e==null?null:i.jsx(Db,{as:"li",role:"presentation",children:i.jsx(Rb,{as:"button",type:"button",eventKey:n,disabled:s,id:o,className:a,...r,children:e})})}const $b=t=>{const{id:e,onSelect:n,transition:s,mountOnEnter:a=!1,unmountOnExit:r=!1,variant:o="tabs",children:c,activeKey:d=X5(c),...m}=ob(t,{activeKey:"onSelect"});return i.jsxs(Ib,{id:e,activeKey:d,onSelect:n,transition:Ob(s),mountOnEnter:a,unmountOnExit:r,children:[i.jsx(Dn,{id:e,...m,role:"tablist",as:"ul",variant:o,children:kj(c,J5)}),i.jsx(Lb,{children:kj(c,u=>{const p={...u.props};return delete p.title,delete p.disabled,delete p.tabClassName,delete p.tabAttrs,i.jsx(Fb,{...p})})})]})};$b.displayName="Tabs";function no(t){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(t)}function e4(t,e){if(no(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(no(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LE(t){var e=e4(t,"string");return no(e)=="symbol"?e:e+""}function Ld(t,e,n){return(e=LE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(n),!0).forEach(function(s){Ld(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function t4(t){if(Array.isArray(t))return t}function n4(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,a,r,o,c=[],d=!0,m=!1;try{if(r=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(s=r.call(n)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(u){m=!0,a=u}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}function Lx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function FE(t,e){if(t){if(typeof t=="string")return Lx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lx(t,e):void 0}}function i4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pr(t,e){return t4(t)||n4(t,e)||FE(t,e)||i4()}function ua(t,e){if(t==null)return{};var n,s,a=fg(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)n=r[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function $E(t){var e=t.defaultInputValue,n=e===void 0?"":e,s=t.defaultMenuIsOpen,a=s===void 0?!1:s,r=t.defaultValue,o=r===void 0?null:r,c=t.inputValue,d=t.menuIsOpen,m=t.onChange,u=t.onInputChange,p=t.onMenuClose,h=t.onMenuOpen,g=t.value,x=ua(t,s4),v=f.useState(c!==void 0?c:n),y=pr(v,2),b=y[0],j=y[1],k=f.useState(d!==void 0?d:a),S=pr(k,2),N=S[0],_=S[1],w=f.useState(g!==void 0?g:o),T=pr(w,2),A=T[0],M=T[1],E=f.useCallback(function(K,ne){typeof m=="function"&&m(K,ne),M(K)},[m]),P=f.useCallback(function(K,ne){var Y;typeof u=="function"&&(Y=u(K,ne)),j(Y!==void 0?Y:K)},[u]),D=f.useCallback(function(){typeof h=="function"&&h(),_(!0)},[h]),O=f.useCallback(function(){typeof p=="function"&&p(),_(!1)},[p]),F=c!==void 0?c:b,q=d!==void 0?d:N,U=g!==void 0?g:A;return It(It({},x),{},{inputValue:F,menuIsOpen:q,onChange:E,onInputChange:P,onMenuClose:O,onMenuOpen:D,value:U})}function BE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wj(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,LE(s.key),s)}}function qE(t,e,n){return e&&Wj(t.prototype,e),n&&Wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jh(t,e)}function sp(t){return sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sp(t)}function zE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zE=function(){return!!t})()}function a4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r4(t,e){if(e&&(no(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4(t)}function VE(t){var e=zE();return function(){var n,s=sp(t);if(e){var a=sp(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return r4(this,n)}}function l4(t){if(Array.isArray(t))return Lx(t)}function o4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cc(t){return l4(t)||o4(t)||FE(t)||c4()}function d4(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function m4(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var u4=(function(){function t(n){var s=this;this._insertTag=function(a){var r;s.tags.length===0?s.insertionPoint?r=s.insertionPoint.nextSibling:s.prepend?r=s.container.firstChild:r=s.before:r=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(a,r),s.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(m4(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var r=d4(a);try{r.insertRule(s,r.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){var a;return(a=s.parentNode)==null?void 0:a.removeChild(s)}),this.tags=[],this.ctr=0},t})(),Si="-ms-",ap="-moz-",mn="-webkit-",UE="comm",Bb="rule",qb="decl",h4="@import",WE="@keyframes",p4="@layer",g4=Math.abs,_g=String.fromCharCode,f4=Object.assign;function v4(t,e){return fi(t,0)^45?(((e<<2^fi(t,0))<<2^fi(t,1))<<2^fi(t,2))<<2^fi(t,3):0}function KE(t){return t.trim()}function x4(t,e){return(t=e.exec(t))?t[0]:t}function hn(t,e,n){return t.replace(e,n)}function Fx(t,e){return t.indexOf(e)}function fi(t,e){return t.charCodeAt(e)|0}function fm(t,e,n){return t.slice(e,n)}function ja(t){return t.length}function Hb(t){return t.length}function Iu(t,e){return e.push(t),t}function y4(t,e){return t.map(e).join("")}var Eg=1,Dc=1,GE=0,os=0,ti=0,Yc="";function Tg(t,e,n,s,a,r,o){return{value:t,root:e,parent:n,type:s,props:a,children:r,line:Eg,column:Dc,length:o,return:""}}function wd(t,e){return f4(Tg("",null,null,"",null,null,0),t,{length:-t.length},e)}function b4(){return ti}function w4(){return ti=os>0?fi(Yc,--os):0,Dc--,ti===10&&(Dc=1,Eg--),ti}function vs(){return ti=os<GE?fi(Yc,os++):0,Dc++,ti===10&&(Dc=1,Eg++),ti}function Ta(){return fi(Yc,os)}function Dh(){return os}function Gm(t,e){return fm(Yc,t,e)}function vm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YE(t){return Eg=Dc=1,GE=ja(Yc=t),os=0,[]}function QE(t){return Yc="",t}function Rh(t){return KE(Gm(os-1,$x(t===91?t+2:t===40?t+1:t)))}function k4(t){for(;(ti=Ta())&&ti<33;)vs();return vm(t)>2||vm(ti)>3?"":" "}function j4(t,e){for(;--e&&vs()&&!(ti<48||ti>102||ti>57&&ti<65||ti>70&&ti<97););return Gm(t,Dh()+(e<6&&Ta()==32&&vs()==32))}function $x(t){for(;vs();)switch(ti){case t:return os;case 34:case 39:t!==34&&t!==39&&$x(ti);break;case 40:t===41&&$x(t);break;case 92:vs();break}return os}function N4(t,e){for(;vs()&&t+ti!==57;)if(t+ti===84&&Ta()===47)break;return"/*"+Gm(e,os-1)+"*"+_g(t===47?t:vs())}function C4(t){for(;!vm(Ta());)vs();return Gm(t,os)}function S4(t){return QE(Ph("",null,null,null,[""],t=YE(t),0,[0],t))}function Ph(t,e,n,s,a,r,o,c,d){for(var m=0,u=0,p=o,h=0,g=0,x=0,v=1,y=1,b=1,j=0,k="",S=a,N=r,_=s,w=k;y;)switch(x=j,j=vs()){case 40:if(x!=108&&fi(w,p-1)==58){Fx(w+=hn(Rh(j),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:w+=Rh(j);break;case 9:case 10:case 13:case 32:w+=k4(x);break;case 92:w+=j4(Dh()-1,7);continue;case 47:switch(Ta()){case 42:case 47:Iu(_4(N4(vs(),Dh()),e,n),d);break;default:w+="/"}break;case 123*v:c[m++]=ja(w)*b;case 125*v:case 59:case 0:switch(j){case 0:case 125:y=0;case 59+u:b==-1&&(w=hn(w,/\f/g,"")),g>0&&ja(w)-p&&Iu(g>32?Gj(w+";",s,n,p-1):Gj(hn(w," ","")+";",s,n,p-2),d);break;case 59:w+=";";default:if(Iu(_=Kj(w,e,n,m,u,a,c,k,S=[],N=[],p),r),j===123)if(u===0)Ph(w,e,_,_,S,r,p,c,N);else switch(h===99&&fi(w,3)===110?100:h){case 100:case 108:case 109:case 115:Ph(t,_,_,s&&Iu(Kj(t,_,_,0,0,a,c,k,a,S=[],p),N),a,N,p,c,s?S:N);break;default:Ph(w,_,_,_,[""],N,0,c,N)}}m=u=g=0,v=b=1,k=w="",p=o;break;case 58:p=1+ja(w),g=x;default:if(v<1){if(j==123)--v;else if(j==125&&v++==0&&w4()==125)continue}switch(w+=_g(j),j*v){case 38:b=u>0?1:(w+="\f",-1);break;case 44:c[m++]=(ja(w)-1)*b,b=1;break;case 64:Ta()===45&&(w+=Rh(vs())),h=Ta(),u=p=ja(k=w+=C4(Dh())),j++;break;case 45:x===45&&ja(w)==2&&(v=0)}}return r}function Kj(t,e,n,s,a,r,o,c,d,m,u){for(var p=a-1,h=a===0?r:[""],g=Hb(h),x=0,v=0,y=0;x<s;++x)for(var b=0,j=fm(t,p+1,p=g4(v=o[x])),k=t;b<g;++b)(k=KE(v>0?h[b]+" "+j:hn(j,/&\f/g,h[b])))&&(d[y++]=k);return Tg(t,e,n,a===0?Bb:c,d,m,u)}function _4(t,e,n){return Tg(t,e,n,UE,_g(b4()),fm(t,2,-2),0)}function Gj(t,e,n,s){return Tg(t,e,n,qb,fm(t,0,s),fm(t,s+1,-1),s)}function dc(t,e){for(var n="",s=Hb(t),a=0;a<s;a++)n+=e(t[a],a,t,e)||"";return n}function E4(t,e,n,s){switch(t.type){case p4:if(t.children.length)break;case h4:case qb:return t.return=t.return||t.value;case UE:return"";case WE:return t.return=t.value+"{"+dc(t.children,s)+"}";case Bb:t.value=t.props.join(",")}return ja(n=dc(t.children,s))?t.return=t.value+"{"+n+"}":""}function T4(t){var e=Hb(t);return function(n,s,a,r){for(var o="",c=0;c<e;c++)o+=t[c](n,s,a,r)||"";return o}}function A4(t){return function(e){e.root||(e=e.return)&&t(e)}}function D4(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var R4=function(e,n,s){for(var a=0,r=0;a=r,r=Ta(),a===38&&r===12&&(n[s]=1),!vm(r);)vs();return Gm(e,os)},P4=function(e,n){var s=-1,a=44;do switch(vm(a)){case 0:a===38&&Ta()===12&&(n[s]=1),e[s]+=R4(os-1,n,s);break;case 2:e[s]+=Rh(a);break;case 4:if(a===44){e[++s]=Ta()===58?"&\f":"",n[s]=e[s].length;break}default:e[s]+=_g(a)}while(a=vs());return e},M4=function(e,n){return QE(P4(YE(e),n))},Yj=new WeakMap,I4=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,s=e.parent,a=e.column===s.column&&e.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Yj.get(s))&&!a){Yj.set(e,!0);for(var r=[],o=M4(n,r),c=s.props,d=0,m=0;d<o.length;d++)for(var u=0;u<c.length;u++,m++)e.props[m]=r[d]?o[d].replace(/&\f/g,c[u]):c[u]+" "+o[d]}}},O4=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ZE(t,e){switch(v4(t,e)){case 5103:return mn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return mn+t+ap+t+Si+t+t;case 6828:case 4268:return mn+t+Si+t+t;case 6165:return mn+t+Si+"flex-"+t+t;case 5187:return mn+t+hn(t,/(\w+).+(:[^]+)/,mn+"box-$1$2"+Si+"flex-$1$2")+t;case 5443:return mn+t+Si+"flex-item-"+hn(t,/flex-|-self/,"")+t;case 4675:return mn+t+Si+"flex-line-pack"+hn(t,/align-content|flex-|-self/,"")+t;case 5548:return mn+t+Si+hn(t,"shrink","negative")+t;case 5292:return mn+t+Si+hn(t,"basis","preferred-size")+t;case 6060:return mn+"box-"+hn(t,"-grow","")+mn+t+Si+hn(t,"grow","positive")+t;case 4554:return mn+hn(t,/([^-])(transform)/g,"$1"+mn+"$2")+t;case 6187:return hn(hn(hn(t,/(zoom-|grab)/,mn+"$1"),/(image-set)/,mn+"$1"),t,"")+t;case 5495:case 3959:return hn(t,/(image-set\([^]*)/,mn+"$1$`$1");case 4968:return hn(hn(t,/(.+:)(flex-)?(.*)/,mn+"box-pack:$3"+Si+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mn+t+t;case 4095:case 3583:case 4068:case 2532:return hn(t,/(.+)-inline(.+)/,mn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ja(t)-1-e>6)switch(fi(t,e+1)){case 109:if(fi(t,e+4)!==45)break;case 102:return hn(t,/(.+:)(.+)-([^]+)/,"$1"+mn+"$2-$3$1"+ap+(fi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Fx(t,"stretch")?ZE(hn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(fi(t,e+1)!==115)break;case 6444:switch(fi(t,ja(t)-3-(~Fx(t,"!important")&&10))){case 107:return hn(t,":",":"+mn)+t;case 101:return hn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mn+(fi(t,14)===45?"inline-":"")+"box$3$1"+mn+"$2$3$1"+Si+"$2box$3")+t}break;case 5936:switch(fi(t,e+11)){case 114:return mn+t+Si+hn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return mn+t+Si+hn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return mn+t+Si+hn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return mn+t+Si+t+t}return t}var L4=function(e,n,s,a){if(e.length>-1&&!e.return)switch(e.type){case qb:e.return=ZE(e.value,e.length);break;case WE:return dc([wd(e,{value:hn(e.value,"@","@"+mn)})],a);case Bb:if(e.length)return y4(e.props,function(r){switch(x4(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return dc([wd(e,{props:[hn(r,/:(read-\w+)/,":"+ap+"$1")]})],a);case"::placeholder":return dc([wd(e,{props:[hn(r,/:(plac\w+)/,":"+mn+"input-$1")]}),wd(e,{props:[hn(r,/:(plac\w+)/,":"+ap+"$1")]}),wd(e,{props:[hn(r,/:(plac\w+)/,Si+"input-$1")]})],a)}return""})}},F4=[L4],$4=function(e){var n=e.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var a=e.stylisPlugins||F4,r={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)r[y[b]]=!0;c.push(v)});var d,m=[I4,O4];{var u,p=[E4,A4(function(v){u.insert(v)})],h=T4(m.concat(a,p)),g=function(y){return dc(S4(y),h)};d=function(y,b,j,k){u=j,g(y?y+"{"+b.styles+"}":b.styles),k&&(x.inserted[b.name]=!0)}}var x={key:n,sheet:new u4({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:r,registered:{},insert:d};return x.sheet.hydrate(c),x},Yf={exports:{}},vn={};var Qj;function B4(){if(Qj)return vn;Qj=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,r=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,j=t?Symbol.for("react.scope"):60119;function k(N){if(typeof N=="object"&&N!==null){var _=N.$$typeof;switch(_){case e:switch(N=N.type,N){case d:case m:case s:case r:case a:case p:return N;default:switch(N=N&&N.$$typeof,N){case c:case u:case x:case g:case o:return N;default:return _}}case n:return _}}}function S(N){return k(N)===m}return vn.AsyncMode=d,vn.ConcurrentMode=m,vn.ContextConsumer=c,vn.ContextProvider=o,vn.Element=e,vn.ForwardRef=u,vn.Fragment=s,vn.Lazy=x,vn.Memo=g,vn.Portal=n,vn.Profiler=r,vn.StrictMode=a,vn.Suspense=p,vn.isAsyncMode=function(N){return S(N)||k(N)===d},vn.isConcurrentMode=S,vn.isContextConsumer=function(N){return k(N)===c},vn.isContextProvider=function(N){return k(N)===o},vn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},vn.isForwardRef=function(N){return k(N)===u},vn.isFragment=function(N){return k(N)===s},vn.isLazy=function(N){return k(N)===x},vn.isMemo=function(N){return k(N)===g},vn.isPortal=function(N){return k(N)===n},vn.isProfiler=function(N){return k(N)===r},vn.isStrictMode=function(N){return k(N)===a},vn.isSuspense=function(N){return k(N)===p},vn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===s||N===m||N===r||N===a||N===p||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===x||N.$$typeof===g||N.$$typeof===o||N.$$typeof===c||N.$$typeof===u||N.$$typeof===y||N.$$typeof===b||N.$$typeof===j||N.$$typeof===v)},vn.typeOf=k,vn}var Zj;function q4(){return Zj||(Zj=1,Yf.exports=B4()),Yf.exports}var Qf,Xj;function H4(){if(Xj)return Qf;Xj=1;var t=q4(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r={};r[t.ForwardRef]=s,r[t.Memo]=a;function o(x){return t.isMemo(x)?a:r[x.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;function g(x,v,y){if(typeof v!="string"){if(h){var b=p(v);b&&b!==h&&g(x,b,y)}var j=d(v);m&&(j=j.concat(m(v)));for(var k=o(x),S=o(v),N=0;N<j.length;++N){var _=j[N];if(!n[_]&&!(y&&y[_])&&!(S&&S[_])&&!(k&&k[_])){var w=u(v,_);try{c(x,_,w)}catch{}}}}return x}return Qf=g,Qf}H4();var z4=!0;function V4(t,e,n){var s="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(s+=a+" ")}),s}var XE=function(e,n,s){var a=e.key+"-"+n.name;(s===!1||z4===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},U4=function(e,n,s){XE(e,n,s);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var r=n;do e.insert(n===r?"."+a:"",r,e.sheet,!0),r=r.next;while(r!==void 0)}};function W4(t){for(var e=0,n,s=0,a=t.length;a>=4;++s,a-=4)n=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(s+2)&255)<<16;case 2:e^=(t.charCodeAt(s+1)&255)<<8;case 1:e^=t.charCodeAt(s)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var K4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},G4=/[A-Z]|^ms/g,Y4=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JE=function(e){return e.charCodeAt(1)===45},Jj=function(e){return e!=null&&typeof e!="boolean"},Zf=D4(function(t){return JE(t)?t:t.replace(G4,"-$&").toLowerCase()}),e0=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Y4,function(s,a,r){return Na={name:a,styles:r,next:Na},a})}return K4[e]!==1&&!JE(e)&&typeof n=="number"&&n!==0?n+"px":n};function xm(t,e,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return Na={name:a.name,styles:a.styles,next:Na},a.name;var r=n;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Na={name:o.name,styles:o.styles,next:Na},o=o.next;var c=r.styles+";";return c}return Q4(t,e,n)}case"function":{if(t!==void 0){var d=Na,m=n(t);return Na=d,xm(t,e,m)}break}}var u=n;return u}function Q4(t,e,n){var s="";if(Array.isArray(n))for(var a=0;a<n.length;a++)s+=xm(t,e,n[a])+";";else for(var r in n){var o=n[r];if(typeof o!="object"){var c=o;Jj(c)&&(s+=Zf(r)+":"+e0(r,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var d=0;d<o.length;d++)Jj(o[d])&&(s+=Zf(r)+":"+e0(r,o[d])+";");else{var m=xm(t,e,o);switch(r){case"animation":case"animationName":{s+=Zf(r)+":"+m+";";break}default:s+=r+"{"+m+"}"}}}return s}var t0=/label:\s*([^\s;{]+)\s*(;|$)/g,Na;function e2(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";Na=void 0;var r=t[0];if(r==null||r.raw===void 0)s=!1,a+=xm(n,e,r);else{var o=r;a+=o[0]}for(var c=1;c<t.length;c++)if(a+=xm(n,e,t[c]),s){var d=r;a+=d[c]}t0.lastIndex=0;for(var m="",u;(u=t0.exec(a))!==null;)m+="-"+u[1];var p=W4(a)+m;return{name:p,styles:a,next:Na}}var Z4=function(e){return e()},X4=cj.useInsertionEffect?cj.useInsertionEffect:!1,J4=X4||Z4,t2=f.createContext(typeof HTMLElement<"u"?$4({key:"css"}):null);t2.Provider;var eL=function(e){return f.forwardRef(function(n,s){var a=f.useContext(t2);return e(n,a,s)})},tL=f.createContext({}),zb={}.hasOwnProperty,Bx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nL=function(e,n){var s={};for(var a in n)zb.call(n,a)&&(s[a]=n[a]);return s[Bx]=e,s},iL=function(e){var n=e.cache,s=e.serialized,a=e.isStringTag;return XE(n,s,a),J4(function(){return U4(n,s,a)}),null},sL=eL(function(t,e,n){var s=t.css;typeof s=="string"&&e.registered[s]!==void 0&&(s=e.registered[s]);var a=t[Bx],r=[s],o="";typeof t.className=="string"?o=V4(e.registered,r,t.className):t.className!=null&&(o=t.className+" ");var c=e2(r,void 0,f.useContext(tL));o+=e.key+"-"+c.name;var d={};for(var m in t)zb.call(t,m)&&m!=="css"&&m!==Bx&&(d[m]=t[m]);return d.className=o,n&&(d.ref=n),f.createElement(f.Fragment,null,f.createElement(iL,{cache:e,serialized:c,isStringTag:typeof a=="string"}),f.createElement(a,d))}),aL=sL,Rt=function(e,n){var s=arguments;if(n==null||!zb.call(n,"css"))return f.createElement.apply(void 0,s);var a=s.length,r=new Array(a);r[0]=aL,r[1]=nL(e,n);for(var o=2;o<a;o++)r[o]=s[o];return f.createElement.apply(null,r)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Rt||(Rt={}));function Vb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e2(e)}function rL(){var t=Vb.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function lL(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const oL=Math.min,cL=Math.max,rp=Math.round,Ou=Math.floor,lp=t=>({x:t,y:t});function dL(t){const{x:e,y:n,width:s,height:a}=t;return{width:s,height:a,top:n,left:e,right:e+s,bottom:n+a,x:e,y:n}}function Ag(){return typeof window<"u"}function n2(t){return s2(t)?(t.nodeName||"").toLowerCase():"#document"}function br(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function i2(t){var e;return(e=(s2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function s2(t){return Ag()?t instanceof Node||t instanceof br(t).Node:!1}function mL(t){return Ag()?t instanceof Element||t instanceof br(t).Element:!1}function Ub(t){return Ag()?t instanceof HTMLElement||t instanceof br(t).HTMLElement:!1}function n0(t){return!Ag()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof br(t).ShadowRoot}const uL=new Set(["inline","contents"]);function a2(t){const{overflow:e,overflowX:n,overflowY:s,display:a}=Wb(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!uL.has(a)}function hL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pL=new Set(["html","body","#document"]);function gL(t){return pL.has(n2(t))}function Wb(t){return br(t).getComputedStyle(t)}function fL(t){if(n2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n0(t)&&t.host||i2(t);return n0(e)?e.host:e}function r2(t){const e=fL(t);return gL(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ub(e)&&a2(e)?e:r2(e)}function op(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=r2(t),r=a===((s=t.ownerDocument)==null?void 0:s.body),o=br(a);if(r){const c=qx(o);return e.concat(o,o.visualViewport||[],a2(a)?a:[],c&&n?op(c):[])}return e.concat(a,op(a,[],n))}function qx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vL(t){const e=Wb(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=Ub(t),r=a?t.offsetWidth:n,o=a?t.offsetHeight:s,c=rp(n)!==r||rp(s)!==o;return c&&(n=r,s=o),{width:n,height:s,$:c}}function Kb(t){return mL(t)?t:t.contextElement}function i0(t){const e=Kb(t);if(!Ub(e))return lp(1);const n=e.getBoundingClientRect(),{width:s,height:a,$:r}=vL(e);let o=(r?rp(n.width):n.width)/s,c=(r?rp(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const xL=lp(0);function yL(t){const e=br(t);return!hL()||!e.visualViewport?xL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bL(t,e,n){return!1}function s0(t,e,n,s){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),r=Kb(t);let o=lp(1);e&&(o=i0(t));const c=bL()?yL(r):lp(0);let d=(a.left+c.x)/o.x,m=(a.top+c.y)/o.y,u=a.width/o.x,p=a.height/o.y;if(r){const h=br(r),g=s;let x=h,v=qx(x);for(;v&&s&&g!==x;){const y=i0(v),b=v.getBoundingClientRect(),j=Wb(v),k=b.left+(v.clientLeft+parseFloat(j.paddingLeft))*y.x,S=b.top+(v.clientTop+parseFloat(j.paddingTop))*y.y;d*=y.x,m*=y.y,u*=y.x,p*=y.y,d+=k,m+=S,x=br(v),v=qx(x)}}return dL({width:u,height:p,x:d,y:m})}function l2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wL(t,e){let n=null,s;const a=i2(t);function r(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),r();const m=t.getBoundingClientRect(),{left:u,top:p,width:h,height:g}=m;if(c||e(),!h||!g)return;const x=Ou(p),v=Ou(a.clientWidth-(u+h)),y=Ou(a.clientHeight-(p+g)),b=Ou(u),k={rootMargin:-x+"px "+-v+"px "+-y+"px "+-b+"px",threshold:cL(0,oL(1,d))||1};let S=!0;function N(_){const w=_[0].intersectionRatio;if(w!==d){if(!S)return o();w?o(!1,w):s=setTimeout(()=>{o(!1,1e-7)},1e3)}w===1&&!l2(m,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(N,{...k,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,k)}n.observe(t)}return o(!0),r}function kL(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,m=Kb(t),u=a||r?[...m?op(m):[],...op(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",n,{passive:!0}),r&&b.addEventListener("resize",n)});const p=m&&c?wL(m,n):null;let h=-1,g=null;o&&(g=new ResizeObserver(b=>{let[j]=b;j&&j.target===m&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(e)})),n()}),m&&!d&&g.observe(m),g.observe(e));let x,v=d?s0(t):null;d&&y();function y(){const b=s0(t);v&&!l2(v,b)&&n(),v=b,x=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(j=>{a&&j.removeEventListener("scroll",n),r&&j.removeEventListener("resize",n)}),p?.(),(b=g)==null||b.disconnect(),g=null,d&&cancelAnimationFrame(x)}}var cp=f.useLayoutEffect,jL=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],dp=function(){};function NL(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function CL(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];var r=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&r.push("".concat(NL(t,o)));return r.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var mp=function(e){return ML(e)?e.filter(Boolean):no(e)==="object"&&e!==null?[e]:[]},o2=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=ua(e,jL);return It({},n)},Wn=function(e,n,s){var a=e.cx,r=e.getStyles,o=e.getClassNames,c=e.className;return{css:r(n,e),className:a(s??{},o(n,e),c)}};function Dg(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function SL(t){return Dg(t)?window.innerHeight:t.clientHeight}function c2(t){return Dg(t)?window.pageYOffset:t.scrollTop}function up(t,e){if(Dg(t)){window.scrollTo(0,e);return}t.scrollTop=e}function _L(t){var e=getComputedStyle(t),n=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(n&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function EL(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e}function Lu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:dp,a=c2(t),r=e-a,o=10,c=0;function d(){c+=o;var m=EL(c,a,r,n);up(t,m),c<n?window.requestAnimationFrame(d):s(t)}d()}function a0(t,e){var n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=e.offsetHeight/3;s.bottom+a>n.bottom?up(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):s.top-a<n.top&&up(t,Math.max(e.offsetTop-a,0))}function TL(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function r0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function AL(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var d2=!1,DL={get passive(){return d2=!0}},Fu=typeof window<"u"?window:{};Fu.addEventListener&&Fu.removeEventListener&&(Fu.addEventListener("p",dp,DL),Fu.removeEventListener("p",dp,!1));var RL=d2;function PL(t){return t!=null}function ML(t){return Array.isArray(t)}function Fd(t,e,n){return t?e:n}var IL=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var r=Object.entries(e).filter(function(o){var c=pr(o,1),d=c[0];return!s.includes(d)});return r.reduce(function(o,c){var d=pr(c,2),m=d[0],u=d[1];return o[m]=u,o},{})},OL=["children","innerProps"],LL=["children","innerProps"];function FL(t){var e=t.maxHeight,n=t.menuEl,s=t.minHeight,a=t.placement,r=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,d=_L(n),m={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return m;var u=d.getBoundingClientRect(),p=u.height,h=n.getBoundingClientRect(),g=h.bottom,x=h.height,v=h.top,y=n.offsetParent.getBoundingClientRect(),b=y.top,j=o?window.innerHeight:SL(d),k=c2(d),S=parseInt(getComputedStyle(n).marginBottom,10),N=parseInt(getComputedStyle(n).marginTop,10),_=b-N,w=j-v,T=_+k,A=p-k-v,M=g-j+k+S,E=k+v-N,P=160;switch(a){case"auto":case"bottom":if(w>=x)return{placement:"bottom",maxHeight:e};if(A>=x&&!o)return r&&Lu(d,M,P),{placement:"bottom",maxHeight:e};if(!o&&A>=s||o&&w>=s){r&&Lu(d,M,P);var D=o?w-S:A-S;return{placement:"bottom",maxHeight:D}}if(a==="auto"||o){var O=e,F=o?_:T;return F>=s&&(O=Math.min(F-S-c,e)),{placement:"top",maxHeight:O}}if(a==="bottom")return r&&up(d,M),{placement:"bottom",maxHeight:e};break;case"top":if(_>=x)return{placement:"top",maxHeight:e};if(T>=x&&!o)return r&&Lu(d,E,P),{placement:"top",maxHeight:e};if(!o&&T>=s||o&&_>=s){var q=e;return(!o&&T>=s||o&&_>=s)&&(q=o?_-N:T-N),r&&Lu(d,E,P),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return m}function $L(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var m2=function(e){return e==="auto"?"bottom":e},BL=function(e,n){var s,a=e.placement,r=e.theme,o=r.borderRadius,c=r.spacing,d=r.colors;return It((s={label:"menu"},Ld(s,$L(a),"100%"),Ld(s,"position","absolute"),Ld(s,"width","100%"),Ld(s,"zIndex",1),s),n?{}:{backgroundColor:d.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},u2=f.createContext(null),qL=function(e){var n=e.children,s=e.minMenuHeight,a=e.maxMenuHeight,r=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,m=f.useContext(u2)||{},u=m.setPortalPlacement,p=f.useRef(null),h=f.useState(a),g=pr(h,2),x=g[0],v=g[1],y=f.useState(null),b=pr(y,2),j=b[0],k=b[1],S=d.spacing.controlHeight;return cp(function(){var N=p.current;if(N){var _=o==="fixed",w=c&&!_,T=FL({maxHeight:a,menuEl:N,minHeight:s,placement:r,shouldScroll:w,isFixedPosition:_,controlHeight:S});v(T.maxHeight),k(T.placement),u?.(T.placement)}},[a,r,o,c,s,u,S]),n({ref:p,placerProps:It(It({},e),{},{placement:j||m2(r),maxHeight:x})})},HL=function(e){var n=e.children,s=e.innerRef,a=e.innerProps;return Rt("div",Pt({},Wn(e,"menu",{menu:!0}),{ref:s},a),n)},zL=HL,VL=function(e,n){var s=e.maxHeight,a=e.theme.spacing.baseUnit;return It({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},UL=function(e){var n=e.children,s=e.innerProps,a=e.innerRef,r=e.isMulti;return Rt("div",Pt({},Wn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":r}),{ref:a},s),n)},h2=function(e,n){var s=e.theme,a=s.spacing.baseUnit,r=s.colors;return It({textAlign:"center"},n?{}:{color:r.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},WL=h2,KL=h2,GL=function(e){var n=e.children,s=n===void 0?"No options":n,a=e.innerProps,r=ua(e,OL);return Rt("div",Pt({},Wn(It(It({},r),{},{children:s,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),s)},YL=function(e){var n=e.children,s=n===void 0?"Loading...":n,a=e.innerProps,r=ua(e,LL);return Rt("div",Pt({},Wn(It(It({},r),{},{children:s,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),s)},QL=function(e){var n=e.rect,s=e.offset,a=e.position;return{left:n.left,position:a,top:s,width:n.width,zIndex:1}},ZL=function(e){var n=e.appendTo,s=e.children,a=e.controlElement,r=e.innerProps,o=e.menuPlacement,c=e.menuPosition,d=f.useRef(null),m=f.useRef(null),u=f.useState(m2(o)),p=pr(u,2),h=p[0],g=p[1],x=f.useMemo(function(){return{setPortalPlacement:g}},[]),v=f.useState(null),y=pr(v,2),b=y[0],j=y[1],k=f.useCallback(function(){if(a){var w=TL(a),T=c==="fixed"?0:window.pageYOffset,A=w[h]+T;(A!==b?.offset||w.left!==b?.rect.left||w.width!==b?.rect.width)&&j({offset:A,rect:w})}},[a,c,h,b?.offset,b?.rect.left,b?.rect.width]);cp(function(){k()},[k]);var S=f.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),a&&d.current&&(m.current=kL(a,d.current,k,{elementResize:"ResizeObserver"in window}))},[a,k]);cp(function(){S()},[S]);var N=f.useCallback(function(w){d.current=w,S()},[S]);if(!n&&c!=="fixed"||!b)return null;var _=Rt("div",Pt({ref:N},Wn(It(It({},e),{},{offset:b.offset,position:c,rect:b.rect}),"menuPortal",{"menu-portal":!0}),r),s);return Rt(u2.Provider,{value:x},n?Sa.createPortal(_,n):_)},XL=function(e){var n=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},JL=function(e){var n=e.children,s=e.innerProps,a=e.isDisabled,r=e.isRtl;return Rt("div",Pt({},Wn(e,"container",{"--is-disabled":a,"--is-rtl":r}),s),n)},eF=function(e,n){var s=e.theme.spacing,a=e.isMulti,r=e.hasValue,o=e.selectProps.controlShouldRenderValue;return It({alignItems:"center",display:a&&r&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},tF=function(e){var n=e.children,s=e.innerProps,a=e.isMulti,r=e.hasValue;return Rt("div",Pt({},Wn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":r}),s),n)},nF=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},iF=function(e){var n=e.children,s=e.innerProps;return Rt("div",Pt({},Wn(e,"indicatorsContainer",{indicators:!0}),s),n)},l0,sF=["size"],aF=["innerProps","isRtl","size"],rF={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},p2=function(e){var n=e.size,s=ua(e,sF);return Rt("svg",Pt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rF},s))},Gb=function(e){return Rt(p2,Pt({size:20},e),Rt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},g2=function(e){return Rt(p2,Pt({size:20},e),Rt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},f2=function(e,n){var s=e.isFocused,a=e.theme,r=a.spacing.baseUnit,o=a.colors;return It({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:s?o.neutral60:o.neutral20,padding:r*2,":hover":{color:s?o.neutral80:o.neutral40}})},lF=f2,oF=function(e){var n=e.children,s=e.innerProps;return Rt("div",Pt({},Wn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),n||Rt(g2,null))},cF=f2,dF=function(e){var n=e.children,s=e.innerProps;return Rt("div",Pt({},Wn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),n||Rt(Gb,null))},mF=function(e,n){var s=e.isDisabled,a=e.theme,r=a.spacing.baseUnit,o=a.colors;return It({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:r*2,marginTop:r*2})},uF=function(e){var n=e.innerProps;return Rt("span",Pt({},n,Wn(e,"indicatorSeparator",{"indicator-separator":!0})))},hF=rL(l0||(l0=lL([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),pF=function(e,n){var s=e.isFocused,a=e.size,r=e.theme,o=r.colors,c=r.spacing.baseUnit;return It({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:s?o.neutral60:o.neutral20,padding:c*2})},Xf=function(e){var n=e.delay,s=e.offset;return Rt("span",{css:Vb({animation:"".concat(hF," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},gF=function(e){var n=e.innerProps,s=e.isRtl,a=e.size,r=a===void 0?4:a,o=ua(e,aF);return Rt("div",Pt({},Wn(It(It({},o),{},{innerProps:n,isRtl:s,size:r}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Rt(Xf,{delay:0,offset:s}),Rt(Xf,{delay:160,offset:!0}),Rt(Xf,{delay:320,offset:!s}))},fF=function(e,n){var s=e.isDisabled,a=e.isFocused,r=e.theme,o=r.colors,c=r.borderRadius,d=r.spacing;return It({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:a?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},vF=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,r=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return Rt("div",Pt({ref:r},Wn(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":a,"control--menu-is-open":c}),o,{"aria-disabled":s||void 0}),n)},xF=vF,yF=["data"],bF=function(e,n){var s=e.theme.spacing;return n?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},wF=function(e){var n=e.children,s=e.cx,a=e.getStyles,r=e.getClassNames,o=e.Heading,c=e.headingProps,d=e.innerProps,m=e.label,u=e.theme,p=e.selectProps;return Rt("div",Pt({},Wn(e,"group",{group:!0}),d),Rt(o,Pt({},c,{selectProps:p,theme:u,getStyles:a,getClassNames:r,cx:s}),m),Rt("div",null,n))},kF=function(e,n){var s=e.theme,a=s.colors,r=s.spacing;return It({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:r.baseUnit*3,paddingRight:r.baseUnit*3,textTransform:"uppercase"})},jF=function(e){var n=o2(e);n.data;var s=ua(n,yF);return Rt("div",Pt({},Wn(e,"groupHeading",{"group-heading":!0}),s))},NF=wF,CF=["innerRef","isDisabled","isHidden","inputClassName"],SF=function(e,n){var s=e.isDisabled,a=e.value,r=e.theme,o=r.spacing,c=r.colors;return It(It({visibility:s?"hidden":"visible",transform:a?"translateZ(0)":""},_F),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},v2={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},_F={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":It({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},v2)},EF=function(e){return It({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},v2)},TF=function(e){var n=e.cx,s=e.value,a=o2(e),r=a.innerRef,o=a.isDisabled,c=a.isHidden,d=a.inputClassName,m=ua(a,CF);return Rt("div",Pt({},Wn(e,"input",{"input-container":!0}),{"data-value":s||""}),Rt("input",Pt({className:n({input:!0},d),ref:r,style:EF(c),disabled:o},m)))},AF=TF,DF=function(e,n){var s=e.theme,a=s.spacing,r=s.borderRadius,o=s.colors;return It({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:r/2,margin:a.baseUnit/2})},RF=function(e,n){var s=e.theme,a=s.borderRadius,r=s.colors,o=e.cropWithEllipsis;return It({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:r.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},PF=function(e,n){var s=e.theme,a=s.spacing,r=s.borderRadius,o=s.colors,c=e.isFocused;return It({alignItems:"center",display:"flex"},n?{}:{borderRadius:r/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},x2=function(e){var n=e.children,s=e.innerProps;return Rt("div",s,n)},MF=x2,IF=x2;function OF(t){var e=t.children,n=t.innerProps;return Rt("div",Pt({role:"button"},n),e||Rt(Gb,{size:14}))}var LF=function(e){var n=e.children,s=e.components,a=e.data,r=e.innerProps,o=e.isDisabled,c=e.removeProps,d=e.selectProps,m=s.Container,u=s.Label,p=s.Remove;return Rt(m,{data:a,innerProps:It(It({},Wn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),r),selectProps:d},Rt(u,{data:a,innerProps:It({},Wn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},n),Rt(p,{data:a,innerProps:It(It({},Wn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},c),selectProps:d}))},FF=LF,$F=function(e,n){var s=e.isDisabled,a=e.isFocused,r=e.isSelected,o=e.theme,c=o.spacing,d=o.colors;return It({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:r?d.primary:a?d.primary25:"transparent",color:s?d.neutral20:r?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:r?d.primary:d.primary50}})},BF=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,r=e.isSelected,o=e.innerRef,c=e.innerProps;return Rt("div",Pt({},Wn(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":a,"option--is-selected":r}),{ref:o,"aria-disabled":s},c),n)},qF=BF,HF=function(e,n){var s=e.theme,a=s.spacing,r=s.colors;return It({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:r.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},zF=function(e){var n=e.children,s=e.innerProps;return Rt("div",Pt({},Wn(e,"placeholder",{placeholder:!0}),s),n)},VF=zF,UF=function(e,n){var s=e.isDisabled,a=e.theme,r=a.spacing,o=a.colors;return It({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:s?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},WF=function(e){var n=e.children,s=e.isDisabled,a=e.innerProps;return Rt("div",Pt({},Wn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),a),n)},KF=WF,y2={ClearIndicator:dF,Control:xF,DropdownIndicator:oF,DownChevron:g2,CrossIcon:Gb,Group:NF,GroupHeading:jF,IndicatorsContainer:iF,IndicatorSeparator:uF,Input:AF,LoadingIndicator:gF,Menu:zL,MenuList:UL,MenuPortal:ZL,LoadingMessage:YL,NoOptionsMessage:GL,MultiValue:FF,MultiValueContainer:MF,MultiValueLabel:IF,MultiValueRemove:OF,Option:qF,Placeholder:VF,SelectContainer:JL,SingleValue:KF,ValueContainer:tF},GF=function(e){return It(It({},y2),e.components)},o0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function YF(t,e){return!!(t===e||o0(t)&&o0(e))}function QF(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!YF(t[n],e[n]))return!1;return!0}function ZF(t,e){e===void 0&&(e=QF);var n=null;function s(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){n=null},s}var XF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},JF=function(e){return Rt("span",Pt({css:XF},e))},c0=JF,e6={guidance:function(e){var n=e.isSearchable,s=e.isMulti,a=e.tabSelectsValue,r=e.context,o=e.isInitialFocus;switch(r){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,s=e.label,a=s===void 0?"":s,r=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(r.length>1?"s":""," ").concat(r.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var n=e.context,s=e.focused,a=e.options,r=e.label,o=r===void 0?"":r,c=e.selectValue,d=e.isDisabled,m=e.isSelected,u=e.isAppleDevice,p=function(v,y){return v&&v.length?"".concat(v.indexOf(y)+1," of ").concat(v.length):""};if(n==="value"&&c)return"value ".concat(o," focused, ").concat(p(c,s),".");if(n==="menu"&&u){var h=d?" disabled":"",g="".concat(m?" selected":"").concat(h);return"".concat(o).concat(g,", ").concat(p(a,s),".")}return""},onFilter:function(e){var n=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(n?" for search term "+n:"",".")}},t6=function(e){var n=e.ariaSelection,s=e.focusedOption,a=e.focusedValue,r=e.focusableOptions,o=e.isFocused,c=e.selectValue,d=e.selectProps,m=e.id,u=e.isAppleDevice,p=d.ariaLiveMessages,h=d.getOptionLabel,g=d.inputValue,x=d.isMulti,v=d.isOptionDisabled,y=d.isSearchable,b=d.menuIsOpen,j=d.options,k=d.screenReaderStatus,S=d.tabSelectsValue,N=d.isLoading,_=d["aria-label"],w=d["aria-live"],T=f.useMemo(function(){return It(It({},e6),p||{})},[p]),A=f.useMemo(function(){var F="";if(n&&T.onChange){var q=n.option,U=n.options,K=n.removedValue,ne=n.removedValues,Y=n.value,fe=function(L){return Array.isArray(L)?null:L},le=K||q||fe(Y),W=le?h(le):"",z=U||ne||void 0,ie=z?z.map(h):[],re=It({isDisabled:le&&v(le,c),label:W,labels:ie},n);F=T.onChange(re)}return F},[n,T,v,c,h]),M=f.useMemo(function(){var F="",q=s||a,U=!!(s&&c&&c.includes(s));if(q&&T.onFocus){var K={focused:q,label:h(q),isDisabled:v(q,c),isSelected:U,options:r,context:q===s?"menu":"value",selectValue:c,isAppleDevice:u};F=T.onFocus(K)}return F},[s,a,h,v,T,r,c,u]),E=f.useMemo(function(){var F="";if(b&&j.length&&!N&&T.onFilter){var q=k({count:r.length});F=T.onFilter({inputValue:g,resultsMessage:q})}return F},[r,g,b,T,j,k,N]),P=n?.action==="initial-input-focus",D=f.useMemo(function(){var F="";if(T.guidance){var q=a?"value":b?"menu":"input";F=T.guidance({"aria-label":_,context:q,isDisabled:s&&v(s,c),isMulti:x,isSearchable:y,tabSelectsValue:S,isInitialFocus:P})}return F},[_,s,a,x,v,y,b,T,c,S,P]),O=Rt(f.Fragment,null,Rt("span",{id:"aria-selection"},A),Rt("span",{id:"aria-focused"},M),Rt("span",{id:"aria-results"},E),Rt("span",{id:"aria-guidance"},D));return Rt(f.Fragment,null,Rt(c0,{id:m},P&&O),Rt(c0,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!P&&O))},n6=t6,Hx=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],i6=new RegExp("["+Hx.map(function(t){return t.letters}).join("")+"]","g"),b2={};for(var Jf=0;Jf<Hx.length;Jf++)for(var ev=Hx[Jf],tv=0;tv<ev.letters.length;tv++)b2[ev.letters[tv]]=ev.base;var w2=function(e){return e.replace(i6,function(n){return b2[n]})},s6=ZF(w2),d0=function(e){return e.replace(/^\s+|\s+$/g,"")},a6=function(e){return"".concat(e.label," ").concat(e.value)},r6=function(e){return function(n,s){if(n.data.__isNew__)return!0;var a=It({ignoreCase:!0,ignoreAccents:!0,stringify:a6,trim:!0,matchFrom:"any"},e),r=a.ignoreCase,o=a.ignoreAccents,c=a.stringify,d=a.trim,m=a.matchFrom,u=d?d0(s):s,p=d?d0(c(n)):c(n);return r&&(u=u.toLowerCase(),p=p.toLowerCase()),o&&(u=s6(u),p=w2(p)),m==="start"?p.substr(0,u.length)===u:p.indexOf(u)>-1}},l6=["innerRef"];function o6(t){var e=t.innerRef,n=ua(t,l6),s=IL(n,"onExited","in","enter","exit","appear");return Rt("input",Pt({ref:e},s,{css:Vb({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var c6=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function d6(t){var e=t.isEnabled,n=t.onBottomArrive,s=t.onBottomLeave,a=t.onTopArrive,r=t.onTopLeave,o=f.useRef(!1),c=f.useRef(!1),d=f.useRef(0),m=f.useRef(null),u=f.useCallback(function(y,b){if(m.current!==null){var j=m.current,k=j.scrollTop,S=j.scrollHeight,N=j.clientHeight,_=m.current,w=b>0,T=S-N-k,A=!1;T>b&&o.current&&(s&&s(y),o.current=!1),w&&c.current&&(r&&r(y),c.current=!1),w&&b>T?(n&&!o.current&&n(y),_.scrollTop=S,A=!0,o.current=!0):!w&&-b>k&&(a&&!c.current&&a(y),_.scrollTop=0,A=!0,c.current=!0),A&&c6(y)}},[n,s,a,r]),p=f.useCallback(function(y){u(y,y.deltaY)},[u]),h=f.useCallback(function(y){d.current=y.changedTouches[0].clientY},[]),g=f.useCallback(function(y){var b=d.current-y.changedTouches[0].clientY;u(y,b)},[u]),x=f.useCallback(function(y){if(y){var b=RL?{passive:!1}:!1;y.addEventListener("wheel",p,b),y.addEventListener("touchstart",h,b),y.addEventListener("touchmove",g,b)}},[g,h,p]),v=f.useCallback(function(y){y&&(y.removeEventListener("wheel",p,!1),y.removeEventListener("touchstart",h,!1),y.removeEventListener("touchmove",g,!1))},[g,h,p]);return f.useEffect(function(){if(e){var y=m.current;return x(y),function(){v(y)}}},[e,x,v]),function(y){m.current=y}}var m0=["boxSizing","height","overflow","paddingRight","position"],u0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function h0(t){t.cancelable&&t.preventDefault()}function p0(t){t.stopPropagation()}function g0(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function f0(){return"ontouchstart"in window||navigator.maxTouchPoints}var v0=!!(typeof window<"u"&&window.document&&window.document.createElement),kd=0,Wo={capture:!1,passive:!1};function m6(t){var e=t.isEnabled,n=t.accountForScrollbars,s=n===void 0?!0:n,a=f.useRef({}),r=f.useRef(null),o=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;if(s&&m0.forEach(function(x){var v=u&&u[x];a.current[x]=v}),s&&kd<1){var p=parseInt(a.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,g=window.innerWidth-h+p||0;Object.keys(u0).forEach(function(x){var v=u0[x];u&&(u[x]=v)}),u&&(u.paddingRight="".concat(g,"px"))}m&&f0()&&(m.addEventListener("touchmove",h0,Wo),d&&(d.addEventListener("touchstart",g0,Wo),d.addEventListener("touchmove",p0,Wo))),kd+=1}},[s]),c=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;kd=Math.max(kd-1,0),s&&kd<1&&m0.forEach(function(p){var h=a.current[p];u&&(u[p]=h)}),m&&f0()&&(m.removeEventListener("touchmove",h0,Wo),d&&(d.removeEventListener("touchstart",g0,Wo),d.removeEventListener("touchmove",p0,Wo)))}},[s]);return f.useEffect(function(){if(e){var d=r.current;return o(d),function(){c(d)}}},[e,o,c]),function(d){r.current=d}}var u6=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},h6={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function p6(t){var e=t.children,n=t.lockEnabled,s=t.captureEnabled,a=s===void 0?!0:s,r=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,m=d6({isEnabled:a,onBottomArrive:r,onBottomLeave:o,onTopArrive:c,onTopLeave:d}),u=m6({isEnabled:n}),p=function(g){m(g),u(g)};return Rt(f.Fragment,null,n&&Rt("div",{onClick:u6,css:h6}),e(p))}var g6={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},f6=function(e){var n=e.name,s=e.onFocus;return Rt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:g6,value:"",onChange:function(){}})},v6=f6;function Yb(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function x6(){return Yb(/^iPhone/i)}function k2(){return Yb(/^Mac/i)}function y6(){return Yb(/^iPad/i)||k2()&&navigator.maxTouchPoints>1}function b6(){return x6()||y6()}function w6(){return k2()||b6()}var k6=function(e){return e.label},j2=function(e){return e.label},N2=function(e){return e.value},j6=function(e){return!!e.isDisabled},N6={clearIndicator:cF,container:XL,control:fF,dropdownIndicator:lF,group:bF,groupHeading:kF,indicatorsContainer:nF,indicatorSeparator:mF,input:SF,loadingIndicator:pF,loadingMessage:KL,menu:BL,menuList:VL,menuPortal:QL,multiValue:DF,multiValueLabel:RF,multiValueRemove:PF,noOptionsMessage:WL,option:$F,placeholder:HF,singleValue:UF,valueContainer:eF},C6={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},S6=4,C2=4,_6=38,E6=C2*2,T6={baseUnit:C2,controlHeight:_6,menuGutter:E6},nv={borderRadius:S6,colors:C6,spacing:T6},A6={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:r0(),captureMenuScroll:!r0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:r6(),formatGroupLabel:k6,getOptionLabel:j2,getOptionValue:N2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:j6,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!AL(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function x0(t,e,n,s){var a=E2(t,e,n),r=T2(t,e,n),o=_2(t,e),c=hp(t,e);return{type:"option",data:e,isDisabled:a,isSelected:r,label:o,value:c,index:s}}function Mh(t,e){return t.options.map(function(n,s){if("options"in n){var a=n.options.map(function(o,c){return x0(t,o,e,c)}).filter(function(o){return b0(t,o)});return a.length>0?{type:"group",data:n,options:a,index:s}:void 0}var r=x0(t,n,e,s);return b0(t,r)?r:void 0}).filter(PL)}function S2(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,cc(n.options.map(function(s){return s.data}))):e.push(n.data),e},[])}function y0(t,e){return t.reduce(function(n,s){return s.type==="group"?n.push.apply(n,cc(s.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(s.index,"-").concat(a.index)}}))):n.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),n},[])}function D6(t,e){return S2(Mh(t,e))}function b0(t,e){var n=t.inputValue,s=n===void 0?"":n,a=e.data,r=e.isSelected,o=e.label,c=e.value;return(!D2(t)||!r)&&A2(t,{label:o,value:c,data:a},s)}function R6(t,e){var n=t.focusedValue,s=t.selectValue,a=s.indexOf(n);if(a>-1){var r=e.indexOf(n);if(r>-1)return n;if(a<e.length)return e[a]}return null}function P6(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var iv=function(e,n){var s,a=(s=e.find(function(r){return r.data===n}))===null||s===void 0?void 0:s.id;return a||null},_2=function(e,n){return e.getOptionLabel(n)},hp=function(e,n){return e.getOptionValue(n)};function E2(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function T2(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var s=hp(t,e);return n.some(function(a){return hp(t,a)===s})}function A2(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var D2=function(e){var n=e.hideSelectedOptions,s=e.isMulti;return n===void 0?s:n},M6=1,Qb=(function(t){HE(n,t);var e=VE(n);function n(s){var a;if(BE(this,n),a=e.call(this,s),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,m){var u=a.props,p=u.onChange,h=u.name;m.name=h,a.ariaOnChange(d,m),p(d,m)},a.setValue=function(d,m,u){var p=a.props,h=p.closeMenuOnSelect,g=p.isMulti,x=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:x}),h&&(a.setState({inputIsHiddenAfterUpdate:!g}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:m,option:u})},a.selectOption=function(d){var m=a.props,u=m.blurInputOnSelect,p=m.isMulti,h=m.name,g=a.state.selectValue,x=p&&a.isOptionSelected(d,g),v=a.isOptionDisabled(d,g);if(x){var y=a.getOptionValue(d);a.setValue(g.filter(function(b){return a.getOptionValue(b)!==y}),"deselect-option",d)}else if(!v)p?a.setValue([].concat(cc(g),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:h});return}u&&a.blurInput()},a.removeValue=function(d){var m=a.props.isMulti,u=a.state.selectValue,p=a.getOptionValue(d),h=u.filter(function(x){return a.getOptionValue(x)!==p}),g=Fd(m,h,h[0]||null);a.onChange(g,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange(Fd(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,m=a.state.selectValue,u=m[m.length-1],p=m.slice(0,m.length-1),h=Fd(d,p,p[0]||null);u&&a.onChange(h,{action:"pop-value",removedValue:u})},a.getFocusedOptionId=function(d){return iv(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return y0(Mh(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,m=new Array(d),u=0;u<d;u++)m[u]=arguments[u];return CL.apply(void 0,[a.props.classNamePrefix].concat(m))},a.getOptionLabel=function(d){return _2(a.props,d)},a.getOptionValue=function(d){return hp(a.props,d)},a.getStyles=function(d,m){var u=a.props.unstyled,p=N6[d](m,u);p.boxSizing="border-box";var h=a.props.styles[d];return h?h(p,m):p},a.getClassNames=function(d,m){var u,p;return(u=(p=a.props.classNames)[d])===null||u===void 0?void 0:u.call(p,m)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return GF(a.props)},a.buildCategorizedOptions=function(){return Mh(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return S2(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,m){a.setState({ariaSelection:It({value:d},m)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var m=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():m&&a.openMenu("first"):(m&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var m=a.props,u=m.isMulti,p=m.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!u}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&Dg(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var m=d.touches,u=m&&m.item(0);u&&(a.initialTouchX=u.clientX,a.initialTouchY=u.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var m=d.touches,u=m&&m.item(0);if(u){var p=Math.abs(u.clientX-a.initialTouchX),h=Math.abs(u.clientY-a.initialTouchY),g=5;a.userIsDragging=p>g||h>g}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var m=a.props.inputValue,u=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(u,{action:"input-change",prevInputValue:m}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var m=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:m}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var m=a.getFocusableOptions(),u=m.indexOf(d);a.setState({focusedOption:d,focusedOptionId:u>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return D2(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var m=a.props,u=m.isMulti,p=m.backspaceRemovesValue,h=m.escapeClearsValue,g=m.inputValue,x=m.isClearable,v=m.isDisabled,y=m.menuIsOpen,b=m.onKeyDown,j=m.tabSelectsValue,k=m.openMenuOnFocus,S=a.state,N=S.focusedOption,_=S.focusedValue,w=S.selectValue;if(!v&&!(typeof b=="function"&&(b(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!u||g)return;a.focusValue("previous");break;case"ArrowRight":if(!u||g)return;a.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(_)a.removeValue(_);else{if(!p)return;u?a.popValue():x&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!y||!j||!N||k&&a.isOptionSelected(N,w))return;a.selectOption(N);break;case"Enter":if(d.keyCode===229)break;if(y){if(!N||a.isComposing)return;a.selectOption(N);break}return;case"Escape":y?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:g}),a.onMenuClose()):x&&h&&a.clearValue();break;case" ":if(g)return;if(!y){a.openMenu("first");break}if(!N)return;a.selectOption(N);break;case"ArrowUp":y?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":y?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!y)return;a.focusOption("pageup");break;case"PageDown":if(!y)return;a.focusOption("pagedown");break;case"Home":if(!y)return;a.focusOption("first");break;case"End":if(!y)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++M6),a.state.selectValue=mp(s.value),s.menuIsOpen&&a.state.selectValue.length){var r=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),c=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=r,a.state.focusedOption=o[c],a.state.focusedOptionId=iv(r,o[c])}return a}return qE(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&a0(this.menuListRef,this.focusedOptionRef),w6()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var r=this.props,o=r.isDisabled,c=r.menuIsOpen,d=this.state.isFocused;(d&&!o&&a.isDisabled||d&&c&&!a.menuIsOpen)&&this.focusInput(),d&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(a0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,r){this.props.onInputChange(a,r)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var r=this,o=this.state,c=o.selectValue,d=o.isFocused,m=this.buildFocusableOptions(),u=a==="first"?0:m.length-1;if(!this.props.isMulti){var p=m.indexOf(c[0]);p>-1&&(u=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[u],focusedOptionId:this.getFocusedOptionId(m[u])},function(){return r.onMenuOpen()})}},{key:"focusValue",value:function(a){var r=this.state,o=r.selectValue,c=r.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=o.indexOf(c);c||(d=-1);var m=o.length-1,u=-1;if(o.length){switch(a){case"previous":d===0?u=0:d===-1?u=m:u=d-1;break;case"next":d>-1&&d<m&&(u=d+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",r=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,m=c.indexOf(o);o||(m=-1),a==="up"?d=m>0?m-1:c.length-1:a==="down"?d=(m+1)%c.length:a==="pageup"?(d=m-r,d<0&&(d=0)):a==="pagedown"?(d=m+r,d>c.length-1&&(d=c.length-1)):a==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nv):It(It({},nv),this.props.theme):nv})},{key:"getCommonProps",value:function(){var a=this.clearValue,r=this.cx,o=this.getStyles,c=this.getClassNames,d=this.getValue,m=this.selectOption,u=this.setValue,p=this.props,h=p.isMulti,g=p.isRtl,x=p.options,v=this.hasValue();return{clearValue:a,cx:r,getStyles:o,getClassNames:c,getValue:d,hasValue:v,isMulti:h,isRtl:g,options:x,selectOption:m,selectProps:p,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,r=a.isClearable,o=a.isMulti;return r===void 0?o:r}},{key:"isOptionDisabled",value:function(a,r){return E2(this.props,a,r)}},{key:"isOptionSelected",value:function(a,r){return T2(this.props,a,r)}},{key:"filterOption",value:function(a,r){return A2(this.props,a,r)}},{key:"formatOptionLabel",value:function(a,r){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(a,{context:r,inputValue:o,selectValue:c})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var a=this.props,r=a.isDisabled,o=a.isSearchable,c=a.inputId,d=a.inputValue,m=a.tabIndex,u=a.form,p=a.menuIsOpen,h=a.required,g=this.getComponents(),x=g.Input,v=this.state,y=v.inputIsHidden,b=v.ariaSelection,j=this.commonProps,k=c||this.getElementId("input"),S=It(It(It({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?b?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?f.createElement(x,Pt({},j,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:r,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:u,type:"text",value:d},S)):f.createElement(o6,Pt({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:dp,onFocus:this.onInputFocus,disabled:r,tabIndex:m,inputMode:"none",form:u,value:""},S))})},{key:"renderPlaceholderOrValue",value:function(){var a=this,r=this.getComponents(),o=r.MultiValue,c=r.MultiValueContainer,d=r.MultiValueLabel,m=r.MultiValueRemove,u=r.SingleValue,p=r.Placeholder,h=this.commonProps,g=this.props,x=g.controlShouldRenderValue,v=g.isDisabled,y=g.isMulti,b=g.inputValue,j=g.placeholder,k=this.state,S=k.selectValue,N=k.focusedValue,_=k.isFocused;if(!this.hasValue()||!x)return b?null:f.createElement(p,Pt({},h,{key:"placeholder",isDisabled:v,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),j);if(y)return S.map(function(T,A){var M=T===N,E="".concat(a.getOptionLabel(T),"-").concat(a.getOptionValue(T));return f.createElement(o,Pt({},h,{components:{Container:c,Label:d,Remove:m},isFocused:M,isDisabled:v,key:E,index:A,removeProps:{onClick:function(){return a.removeValue(T)},onTouchEnd:function(){return a.removeValue(T)},onMouseDown:function(D){D.preventDefault()}},data:T}),a.formatOptionLabel(T,"value"))});if(b)return null;var w=S[0];return f.createElement(u,Pt({},h,{data:w,isDisabled:v}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),r=a.ClearIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!this.isClearable()||!r||d||!this.hasValue()||m)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(r,Pt({},o,{innerProps:p,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),r=a.LoadingIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!r||!m)return null;var p={"aria-hidden":"true"};return f.createElement(r,Pt({},o,{innerProps:p,isDisabled:d,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),r=a.DropdownIndicator,o=a.IndicatorSeparator;if(!r||!o)return null;var c=this.commonProps,d=this.props.isDisabled,m=this.state.isFocused;return f.createElement(o,Pt({},c,{isDisabled:d,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),r=a.DropdownIndicator;if(!r)return null;var o=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(r,Pt({},o,{innerProps:m,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,r=this.getComponents(),o=r.Group,c=r.GroupHeading,d=r.Menu,m=r.MenuList,u=r.MenuPortal,p=r.LoadingMessage,h=r.NoOptionsMessage,g=r.Option,x=this.commonProps,v=this.state.focusedOption,y=this.props,b=y.captureMenuScroll,j=y.inputValue,k=y.isLoading,S=y.loadingMessage,N=y.minMenuHeight,_=y.maxMenuHeight,w=y.menuIsOpen,T=y.menuPlacement,A=y.menuPosition,M=y.menuPortalTarget,E=y.menuShouldBlockScroll,P=y.menuShouldScrollIntoView,D=y.noOptionsMessage,O=y.onMenuScrollToTop,F=y.onMenuScrollToBottom;if(!w)return null;var q=function(W,z){var ie=W.type,re=W.data,de=W.isDisabled,L=W.isSelected,Q=W.label,V=W.value,Z=v===re,X=de?void 0:function(){return a.onOptionHover(re)},R=de?void 0:function(){return a.selectOption(re)},G="".concat(a.getElementId("option"),"-").concat(z),ee={id:G,onClick:R,onMouseMove:X,onMouseOver:X,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:L};return f.createElement(g,Pt({},x,{innerProps:ee,data:re,isDisabled:de,isSelected:L,key:G,label:Q,type:ie,value:V,isFocused:Z,innerRef:Z?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(W.data,"menu"))},U;if(this.hasOptions())U=this.getCategorizedOptions().map(function(le){if(le.type==="group"){var W=le.data,z=le.options,ie=le.index,re="".concat(a.getElementId("group"),"-").concat(ie),de="".concat(re,"-heading");return f.createElement(o,Pt({},x,{key:re,data:W,options:z,Heading:c,headingProps:{id:de,data:le.data},label:a.formatGroupLabel(le.data)}),le.options.map(function(L){return q(L,"".concat(ie,"-").concat(L.index))}))}else if(le.type==="option")return q(le,"".concat(le.index))});else if(k){var K=S({inputValue:j});if(K===null)return null;U=f.createElement(p,x,K)}else{var ne=D({inputValue:j});if(ne===null)return null;U=f.createElement(h,x,ne)}var Y={minMenuHeight:N,maxMenuHeight:_,menuPlacement:T,menuPosition:A,menuShouldScrollIntoView:P},fe=f.createElement(qL,Pt({},x,Y),function(le){var W=le.ref,z=le.placerProps,ie=z.placement,re=z.maxHeight;return f.createElement(d,Pt({},x,Y,{innerRef:W,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:k,placement:ie}),f.createElement(p6,{captureEnabled:b,onTopArrive:O,onBottomArrive:F,lockEnabled:E},function(de){return f.createElement(m,Pt({},x,{innerRef:function(Q){a.getMenuListRef(Q),de(Q)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:a.getElementId("listbox")},isLoading:k,maxHeight:re,focusedOption:v}),U)}))});return M||A==="fixed"?f.createElement(u,Pt({},x,{appendTo:M,controlElement:this.controlRef,menuPlacement:T,menuPosition:A}),fe):fe}},{key:"renderFormField",value:function(){var a=this,r=this.props,o=r.delimiter,c=r.isDisabled,d=r.isMulti,m=r.name,u=r.required,p=this.state.selectValue;if(u&&!this.hasValue()&&!c)return f.createElement(v6,{name:m,onFocus:this.onValueInputFocus});if(!(!m||c))if(d)if(o){var h=p.map(function(v){return a.getOptionValue(v)}).join(o);return f.createElement("input",{name:m,type:"hidden",value:h})}else{var g=p.length>0?p.map(function(v,y){return f.createElement("input",{key:"i-".concat(y),name:m,type:"hidden",value:a.getOptionValue(v)})}):f.createElement("input",{name:m,type:"hidden",value:""});return f.createElement("div",null,g)}else{var x=p[0]?this.getOptionValue(p[0]):"";return f.createElement("input",{name:m,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,r=this.state,o=r.ariaSelection,c=r.focusedOption,d=r.focusedValue,m=r.isFocused,u=r.selectValue,p=this.getFocusableOptions();return f.createElement(n6,Pt({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:d,isFocused:m,selectValue:u,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),r=a.Control,o=a.IndicatorsContainer,c=a.SelectContainer,d=a.ValueContainer,m=this.props,u=m.className,p=m.id,h=m.isDisabled,g=m.menuIsOpen,x=this.state.isFocused,v=this.commonProps=this.getCommonProps();return f.createElement(c,Pt({},v,{className:u,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:x}),this.renderLiveRegion(),f.createElement(r,Pt({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:x,menuIsOpen:g}),f.createElement(d,Pt({},v,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(o,Pt({},v,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,r){var o=r.prevProps,c=r.clearFocusValueOnUpdate,d=r.inputIsHiddenAfterUpdate,m=r.ariaSelection,u=r.isFocused,p=r.prevWasFocused,h=r.instancePrefix,g=a.options,x=a.value,v=a.menuIsOpen,y=a.inputValue,b=a.isMulti,j=mp(x),k={};if(o&&(x!==o.value||g!==o.options||v!==o.menuIsOpen||y!==o.inputValue)){var S=v?D6(a,j):[],N=v?y0(Mh(a,j),"".concat(h,"-option")):[],_=c?R6(r,j):null,w=P6(r,S),T=iv(N,w);k={selectValue:j,focusedOption:w,focusedOptionId:T,focusableOptionsWithIds:N,focusedValue:_,clearFocusValueOnUpdate:!1}}var A=d!=null&&a!==o?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},M=m,E=u&&p;return u&&!E&&(M={value:Fd(b,j,j[0]||null),options:j,action:"initial-input-focus"},E=!p),m?.action==="initial-input-focus"&&(M=null),It(It(It({},k),A),{},{prevProps:a,ariaSelection:M,prevWasFocused:E})}}]),n})(f.Component);Qb.defaultProps=A6;var I6=f.forwardRef(function(t,e){var n=$E(t);return f.createElement(Qb,Pt({ref:e},n))}),ot=I6;const C=({width:t="100%",height:e="1rem",className:n="",style:s={}})=>i.jsx("div",{className:`skeleton-element ${n}`,style:{width:t,height:e,...s},role:"status","aria-label":"Loading content"}),yo=({items:t=["50px","100px","120px"]})=>i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:t.map((e,n)=>i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:e,height:"1rem"})},n))})}),fl=({titleWidth:t="180px",buttonWidth:e=null})=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(C,{width:t,height:"1.5rem"}),e&&i.jsx(C,{width:e,height:"38px",style:{borderRadius:"4px"}})]}),Se=({labelWidth:t="120px",inputHeight:e="38px",hasAction:n=!1})=>i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:`${n?"d-flex justify-content-between":""} mb-2`,children:[i.jsx(C,{width:t,height:"1rem"}),n&&i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx(C,{width:"100%",height:e,style:{borderRadius:"4px"}})]}),Hs=({avatarSize:t="50px",nameWidth:e="120px",detailWidth:n="100px"})=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:t,height:t,style:{borderRadius:"50%"},className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(C,{width:e,height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:n,height:"0.75rem"})]})]}),w0=({labelWidth:t="100px",valueWidth:e="140px"})=>i.jsxs("div",{children:[i.jsx(C,{width:t,height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:e,height:"0.875rem"})]}),nt=({width:t="80px",height:e="38px",className:n={}})=>i.jsx(C,{width:t,height:e,style:{borderRadius:"4px"},className:n}),pt=({children:t})=>i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:t})}),Zd=({count:t,colClass:e="col-md-6",children:n})=>i.jsx("div",{className:"row gy-3",children:Array.from({length:t}).map((s,a)=>i.jsx("div",{className:e,children:typeof n=="function"?n(a):n},a))}),R2=({count:t=28})=>i.jsxs("div",{className:"p-3 bg-body rounded slot-scrolling",children:[i.jsx(C,{width:"100px",height:"1.1rem",className:"mx-auto my-3 d-block"}),i.jsx("div",{className:"d-flex align-items-center gap-3 flex-wrap appointments-slot-select",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"form-check slot-select",children:i.jsx(C,{width:"80px",height:"36px",style:{borderRadius:"4px"}})},n))})]});var O6=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return dE(e,s)})},sv=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return mE(e,s)})},wi=(function(t){cb(e,t);function e(){for(var s,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=t.call.apply(t,[this].concat(r))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1];s.removeClasses(u,"exit"),s.addClass(u,p?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(c,d)},s.onEntering=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.addClass(u,h,"active"),s.props.onEntering&&s.props.onEntering(c,d)},s.onEntered=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.removeClasses(u,h),s.addClass(u,h,"done"),s.props.onEntered&&s.props.onEntered(c,d)},s.onExit=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"appear"),s.removeClasses(m,"enter"),s.addClass(m,"exit","base"),s.props.onExit&&s.props.onExit(c)},s.onExiting=function(c){var d=s.resolveArguments(c),m=d[0];s.addClass(m,"exit","active"),s.props.onExiting&&s.props.onExiting(c)},s.onExited=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"exit"),s.addClass(m,"exit","done"),s.props.onExited&&s.props.onExited(c)},s.resolveArguments=function(c,d){return s.props.nodeRef?[s.props.nodeRef.current,c]:[c,d]},s.getClassNames=function(c){var d=s.props.classNames,m=typeof d=="string",u=m&&d?d+"-":"",p=m?""+u+c:d[c],h=m?p+"-active":d[c+"Active"],g=m?p+"-done":d[c+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:g}},s}var n=e.prototype;return n.addClass=function(a,r,o){var c=this.getClassNames(r)[o+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;r==="appear"&&o==="done"&&m&&(c+=" "+m),o==="active"&&a&&d_(a),c&&(this.appliedClasses[r][o]=c,O6(a,c))},n.removeClasses=function(a,r){var o=this.appliedClasses[r],c=o.base,d=o.active,m=o.done;this.appliedClasses[r]={},c&&sv(a,c),d&&sv(a,d),m&&sv(a,m)},n.render=function(){var a=this.props;a.classNames;var r=fg(a,["classNames"]);return He.createElement($a,Pt({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(He.Component);wi.defaultProps={classNames:""};wi.propTypes={};var $u,Bu;function L6(t,e){return!(t===e||He.isValidElement(t)&&He.isValidElement(e)&&t.key!=null&&t.key===e.key)}var Rc={out:"out-in",in:"in-out"},pp=function(e,n,s){return function(){var a;e.props[n]&&(a=e.props)[n].apply(a,arguments),s()}},F6=($u={},$u[Rc.out]=function(t){var e=t.current,n=t.changeState;return He.cloneElement(e,{in:!1,onExited:pp(e,"onExited",function(){n(Ai,null)})})},$u[Rc.in]=function(t){var e=t.current,n=t.changeState,s=t.children;return[e,He.cloneElement(s,{in:!0,onEntered:pp(s,"onEntered",function(){n(Ai)})})]},$u),$6=(Bu={},Bu[Rc.out]=function(t){var e=t.children,n=t.changeState;return He.cloneElement(e,{in:!0,onEntered:pp(e,"onEntered",function(){n(fs,He.cloneElement(e,{in:!0}))})})},Bu[Rc.in]=function(t){var e=t.current,n=t.children,s=t.changeState;return[He.cloneElement(e,{in:!1,onExited:pp(e,"onExited",function(){s(fs,He.cloneElement(n,{in:!0}))})}),He.cloneElement(n,{in:!0})]},Bu),Rg=(function(t){cb(e,t);function e(){for(var s,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=t.call.apply(t,[this].concat(r))||this,s.state={status:fs,current:null},s.appeared=!1,s.changeState=function(c,d){d===void 0&&(d=s.state.current),s.setState({status:c,current:d})},s}var n=e.prototype;return n.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(a,r){return a.children==null?{current:null}:r.status===Ai&&a.mode===Rc.in?{status:Ai}:r.current&&L6(r.current,a.children)?{status:eo}:{current:He.cloneElement(a.children,{in:!0})}},n.render=function(){var a=this.props,r=a.children,o=a.mode,c=this.state,d=c.status,m=c.current,u={children:r,current:m,changeState:this.changeState,status:d},p;switch(d){case Ai:p=$6[o](u);break;case eo:p=F6[o](u);break;case fs:p=m}return He.createElement(mb.Provider,{value:{isMounting:!this.appeared}},p)},e})(He.Component);Rg.propTypes={};Rg.defaultProps={mode:Rc.out};const P2=({children:t})=>{const e=dI();return e?i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("Oops!","kivicare")}),i.jsx("p",{className:"fs-3",children:l("Something went wrong.","kivicare")}),i.jsx("p",{className:"lead",children:e?.message||l("An unexpected error occurred.","kivicare")}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:l("Refresh Page","kivicare")})]})}):t},Xd=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("403","kivicare")}),i.jsx("p",{className:"fs-3",children:l("Access Forbidden","kivicare")}),i.jsx("p",{className:"lead",children:l("You don't have permission to access this resource.","kivicare")}),i.jsx(gt,{to:"/",className:"btn btn-primary",children:l("Go Home","kivicare")})]})}),zx=()=>i.jsx("div",{className:"container-fluid py-4",children:i.jsxs(pt,{children:[i.jsx(C,{width:"40%",height:"1.5rem",className:"mb-3"}),i.jsx(C,{width:"60%",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"80%",height:"1rem"})]})}),B6=(t,e)=>{if(!t||t.length===0)return!0;const n={administrator:vr,clinic_admin:mi,doctor:zi,patient:ls,receptionist:Kn};return t.some(s=>{const a=n[s];return a?a(e):!1})},Vx=({component:t,props:e={},permissions:n=[],addons:s=[],roles:a=[],module:r=null,meta:o={},...c})=>{const{hasCapability:d,isAddonActive:m,userRole:u,module_config:p,loading:h}=ht(),v=Bm().at?.(-1)?.handle?.skeleton,y=v?typeof v=="function"?v:()=>He.createElement(v):zx;return h?i.jsx(y,{}):r&&(p[r]??"1")==="0"?i.jsx(gg,{to:"/dashboard",replace:!0}):s.length>0&&!s.every(j=>m(j))?i.jsx(Xd,{message:"Required addons are not active"}):B6(a,u)?n.length>0&&!n.every(j=>d(j))?i.jsx(Xd,{message:"You don't have required permissions"}):i.jsx(P2,{children:i.jsx(t,{...e})}):i.jsx(Xd,{message:"You don't have role access to this page"})},Xhe=t=>i.jsx(P2,{children:t}),Jhe=t=>t.map(e=>{const n=({route:a})=>{const{permissions:r=[],addons:o=[],roles:c=[],module:d=null,meta:m={},skeleton:u=null}=a;return i.jsx(Vx,{component:()=>a.element,permissions:r,addons:o,roles:c,module:d,meta:m,skeleton:u})};if(e.element)return{...e,element:i.jsx(n,{route:e}),children:e.children?mc(e.children):void 0};if(e.component){const a={path:e.path,element:i.jsx(Vx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.exact!==void 0&&{exact:e.exact},...e.index!==void 0&&{index:e.index},handle:e.handle,meta:e.meta};return e.children&&(a.children=mc(e.children)),a}const s={...e};return e.children&&(s.children=mc(e.children)),s}),mc=t=>t.map(e=>{if(e.element){const s={...e,handle:e.handle};return e.children&&(s.children=mc(e.children)),s}if(e.component){const s={path:e.path,element:i.jsx(Vx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.index!==void 0&&{index:e.index},...e.exact!==void 0&&{exact:e.exact},handle:e.handle};return e.children&&(s.children=mc(e.children)),s}const n={...e};return e.children&&(n.children=mc(e.children)),n}),We=({path:t,component:e,title:n,props:s={},exact:a,index:r,children:o,permissions:c=[],addons:d=[],roles:m=[],meta:u={},element:p,module:h=null,skeleton:g=null})=>({path:t,title:n,...p&&{element:p},...e&&{component:e},...s&&Object.keys(s).length>0&&{props:s},...a!==void 0&&{exact:a},...r!==void 0&&{index:r},...o&&{children:o},...c.length>0&&{permissions:c},...d.length>0&&{addons:d},...m.length>0&&{roles:m},...h&&{module:h},skeleton:g,handle:{title:n,meta:u,permissions:c,addons:d,roles:m,skeleton:g,...u}}),Vn=({path:t,title:e,roles:n=[],outlet:s,children:a,permissions:r=[],addons:o=[],meta:c={},module:d=null,skeleton:m=null})=>({path:t,title:e,roles:n,element:i.jsx(s,{}),children:a,permissions:r,addons:o,meta:c,module:d,skeleton:m,handle:{title:e,meta:c,permissions:r,addons:o,roles:n,skeleton:m,...c}}),k0=({showBreadcrumb:t=!0,showInsights:e=!0,showPaymentHistory:n=!0})=>{const s=window.kc_frontend.dashboard_type,a=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),r=["administrator","kiviCare_clinic_admin","kiviCare_receptionist"].includes(s),o=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),c=["administrator","kiviCare_clinic_admin"].includes(s),d=["kiviCare_patient","kiviCare_receptionist","kiviCare_doctor"].includes(s),m=s==="kiviCare_patient",u=["administrator","kiviCare_clinic_admin"].includes(s),p=["kiviCare_doctor","kiviCare_receptionist"].includes(s)?"right":"top",h=s==="kiviCare_doctor"?4:["kiviCare_receptionist","kiviCare_clinic_admin"].includes(s)?5:6;return i.jsxs("div",{className:"container-fluid pb-0",children:[t&&i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"120px",height:"1.75rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[!m&&i.jsx(C,{width:"250px",height:"2.5rem"}),!m&&i.jsx(C,{width:"120px",height:"2.5rem",className:"rounded"})]})]}),e&&!m&&i.jsx("div",{className:`insights-container dashboard-insights-container stash-cards ${"grid-count-"+h} mb-4`,children:Array.from({length:h}).map((g,x)=>i.jsx("div",{className:"card card-block card-stretch card-height",children:i.jsx("div",{className:"card-body",children:p==="right"?i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"text-start",children:[i.jsx(C,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"140px",height:"1rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})})]}):i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle mb-3",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})}),i.jsx(C,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"140px",height:"1rem"})]})})},`insight-${x}`))}),u&&i.jsxs("div",{className:"row my-0 gx-4 mb-4",children:[a&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(C,{width:"180px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,x)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsx(Hs,{avatarSize:"2.5rem",nameWidth:"140px",detailWidth:"100px"})},`appointment-${x}`))})]})}),r&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,x)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[i.jsx("div",{className:"flex-grow-1",children:i.jsx(Hs,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"90px"})}),i.jsx(C,{width:"80px",height:"1rem"})]})},`kiviCare_doctor-${x}`))})]})}),o&&i.jsx("div",{className:"col-xl-4 col-lg-12 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"140px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx(C,{width:"200px",height:"200px",className:"rounded-circle"})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((g,x)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"10px",height:"10px",className:"rounded-circle"}),i.jsx(C,{width:"80px",height:"1rem"})]},`legend-${x}`))})]})]})})]}),n&&c&&i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx(C,{width:"150px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:9}).map((g,x)=>i.jsx("th",{className:"py-3",children:i.jsx(C,{width:"90%",height:"1rem"})},`th-${x}`))})}),i.jsx("tbody",{children:Array.from({length:3}).map((g,x)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3",children:i.jsx(Hs,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"})}),Array.from({length:6}).map((v,y)=>i.jsx("td",{className:"py-3",children:i.jsx(C,{width:"90%",height:"1rem"})},`cell-${x}-${y}`)),i.jsx("td",{className:"py-3",children:i.jsx(C,{width:"60px",height:"1.5rem",className:"rounded"})}),i.jsx("td",{className:"py-3",children:i.jsx("div",{className:"d-flex gap-1",children:i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"})})})]},`row-${x}`))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsx(C,{width:"150px",height:"1rem"})]})]}),d&&i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((g,x)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(C,{width:"60px",height:"1rem"})},`day-${x}`))}),Array.from({length:5}).map((g,x)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((v,y)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(C,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(C,{width:"100%",height:"6px",className:"rounded"}),i.jsx(C,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${x}-${y}`))},`week-${x}`))]})]})})})]})};var av=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],uc={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ym={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Zi=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},As=function(t){return t===!0?1:0};function j0(t,e){var n;return function(){var s=this,a=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(s,a)},e)}}var rv=function(t){return t instanceof Array?t:[t]};function Oi(t,e,n){if(n===!0)return t.classList.add(e);t.classList.remove(e)}function un(t,e,n){var s=window.document.createElement(t);return e=e||"",n=n||"",s.className=e,n!==void 0&&(s.textContent=n),s}function qu(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function M2(t,e){if(e(t))return t;if(t.parentNode)return M2(t.parentNode,e)}function Hu(t,e){var n=un("div","numInputWrapper"),s=un("input","numInput "+t),a=un("span","arrowUp"),r=un("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),e!==void 0)for(var o in e)s.setAttribute(o,e[o]);return n.appendChild(s),n.appendChild(a),n.appendChild(r),n}function us(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var lv=function(){},gp=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},q6={D:lv,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*As(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,n){var s=parseInt(e),a=new Date(t.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:lv,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:lv,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Ll={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Jd={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[Jd.w(t,e,n)]},F:function(t,e,n){return gp(Jd.n(t,e,n)-1,!1,e)},G:function(t,e,n){return Zi(Jd.h(t,e,n))},H:function(t){return Zi(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[As(t.getHours()>11)]},M:function(t,e){return gp(t.getMonth(),!0,e)},S:function(t){return Zi(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return Zi(t.getFullYear(),4)},d:function(t){return Zi(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return Zi(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return Zi(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},I2=function(t){var e=t.config,n=e===void 0?uc:e,s=t.l10n,a=s===void 0?ym:s,r=t.isMobile,o=r===void 0?!1:r;return function(c,d,m){var u=m||a;return n.formatDate!==void 0&&!o?n.formatDate(c,d,u):d.split("").map(function(p,h,g){return Jd[p]&&g[h-1]!=="\\"?Jd[p](c,u,n):p!=="\\"?p:""}).join("")}},Ux=function(t){var e=t.config,n=e===void 0?uc:e,s=t.l10n,a=s===void 0?ym:s;return function(r,o,c,d){if(!(r!==0&&!r)){var m=d||a,u,p=r;if(r instanceof Date)u=new Date(r.getTime());else if(typeof r!="string"&&r.toFixed!==void 0)u=new Date(r);else if(typeof r=="string"){var h=o||(n||uc).dateFormat,g=String(r).trim();if(g==="today")u=new Date,c=!0;else if(n&&n.parseDate)u=n.parseDate(r,h);else if(/Z$/.test(g)||/GMT$/.test(g))u=new Date(r);else{for(var x=void 0,v=[],y=0,b=0,j="";y<h.length;y++){var k=h[y],S=k==="\\",N=h[y-1]==="\\"||S;if(Ll[k]&&!N){j+=Ll[k];var _=new RegExp(j).exec(r);_&&(x=!0)&&v[k!=="Y"?"push":"unshift"]({fn:q6[k],val:_[++b]})}else S||(j+=".")}u=!n||!n.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),v.forEach(function(w){var T=w.fn,A=w.val;return u=T(u,A,m)||u}),u=x?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){n.errorHandler(new Error("Invalid date provided: "+p));return}return c===!0&&u.setHours(0,0,0,0),u}}};function hs(t,e,n){return n===void 0&&(n=!0),n!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var H6=function(t,e,n){return t>Math.min(e,n)&&t<Math.max(e,n)},ov=function(t,e,n){return t*3600+e*60+n},z6=function(t){var e=Math.floor(t/3600),n=(t-e*3600)/60;return[e,n,t-e*3600-n*60]},V6={DAY:864e5};function cv(t){var e=t.defaultHour,n=t.defaultMinute,s=t.defaultSeconds;if(t.minDate!==void 0){var a=t.minDate.getHours(),r=t.minDate.getMinutes(),o=t.minDate.getSeconds();e<a&&(e=a),e===a&&n<r&&(n=r),e===a&&n===r&&s<o&&(s=t.minDate.getSeconds())}if(t.maxDate!==void 0){var c=t.maxDate.getHours(),d=t.maxDate.getMinutes();e=Math.min(e,c),e===c&&(n=Math.min(d,n)),e===c&&n===d&&(s=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var s=function(c){c&&Object.keys(c).forEach(function(d){return t[d]=c[d]})},a=0,r=e;a<r.length;a++){var o=r[a];s(o)}return t});var Ei=function(){return Ei=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ei.apply(this,arguments)},N0=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var r=arguments[e],o=0,c=r.length;o<c;o++,a++)s[a]=r[o];return s},U6=300;function W6(t,e){var n={config:Ei(Ei({},uc),Zn.defaultConfig),l10n:ym};n.parseDate=Ux({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=v,n._setHoursFromDate=h,n._positionCalendar=B,n.changeMonth=fe,n.changeYear=de,n.clear=le,n.close=W,n.onMouseOver=X,n._createElement=un,n.createDay=_,n.destroy=z,n.isEnabled=L,n.jumpToDate=j,n.updateValue=Ot,n.open=G,n.redraw=ye,n.set=he,n.setDate=Ke,n.toggle=ge;function s(){n.utils={getDaysInMonth:function(J,se){return J===void 0&&(J=n.currentMonth),se===void 0&&(se=n.currentYear),J===1&&(se%4===0&&se%100!==0||se%400===0)?29:n.l10n.daysInMonth[J]}}}function a(){n.element=n.input=t,n.isOpen=!1,ae(),H(),Je(),$e(),s(),n.isMobile||N(),b(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&h(n.config.noCalendar?n.latestSelectedDateObj:void 0),Ot(!1)),c();var J=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&J&&B(),Ne("onReady")}function r(){var J;return((J=n.calendarContainer)===null||J===void 0?void 0:J.getRootNode()).activeElement||document.activeElement}function o(J){return J.bind(n)}function c(){var J=n.config;J.weekNumbers===!1&&J.showMonths===1||J.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){var se=(n.days.offsetWidth+1)*J.showMonths;n.daysContainer.style.width=se+"px",n.calendarContainer.style.width=se+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function d(J){if(n.selectedDates.length===0){var se=n.config.minDate===void 0||hs(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),ke=cv(n.config);se.setHours(ke.hours,ke.minutes,ke.seconds,se.getMilliseconds()),n.selectedDates=[se],n.latestSelectedDateObj=se}J!==void 0&&J.type!=="blur"&&Fe(J);var Pe=n._input.value;p(),Ot(),n._input.value!==Pe&&n._debouncedChange()}function m(J,se){return J%12+12*As(se===n.l10n.amPM[1])}function u(J){switch(J%24){case 0:case 12:return 12;default:return J%12}}function p(){if(!(n.hourElement===void 0||n.minuteElement===void 0)){var J=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,se=(parseInt(n.minuteElement.value,10)||0)%60,ke=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(J=m(J,n.amPM.textContent));var Pe=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&hs(n.latestSelectedDateObj,n.config.minDate,!0)===0,Xe=n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&hs(n.latestSelectedDateObj,n.config.maxDate,!0)===0;if(n.config.maxTime!==void 0&&n.config.minTime!==void 0&&n.config.minTime>n.config.maxTime){var it=ov(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),lt=ov(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),dt=ov(J,se,ke);if(dt>lt&&dt<it){var _t=z6(it);J=_t[0],se=_t[1],ke=_t[2]}}else{if(Xe){var ct=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;J=Math.min(J,ct.getHours()),J===ct.getHours()&&(se=Math.min(se,ct.getMinutes())),se===ct.getMinutes()&&(ke=Math.min(ke,ct.getSeconds()))}if(Pe){var kt=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;J=Math.max(J,kt.getHours()),J===kt.getHours()&&se<kt.getMinutes()&&(se=kt.getMinutes()),se===kt.getMinutes()&&(ke=Math.max(ke,kt.getSeconds()))}}g(J,se,ke)}}function h(J){var se=J||n.latestSelectedDateObj;se&&se instanceof Date&&g(se.getHours(),se.getMinutes(),se.getSeconds())}function g(J,se,ke){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(J%24,se,ke||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=Zi(n.config.time_24hr?J:(12+J)%12+12*As(J%12===0)),n.minuteElement.value=Zi(se),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[As(J>=12)]),n.secondElement!==void 0&&(n.secondElement.value=Zi(ke)))}function x(J){var se=us(J),ke=parseInt(se.value)+(J.delta||0);(ke/1e3>1||J.key==="Enter"&&!/[^\d]/.test(ke.toString()))&&de(ke)}function v(J,se,ke,Pe){if(se instanceof Array)return se.forEach(function(Xe){return v(J,Xe,ke,Pe)});if(J instanceof Array)return J.forEach(function(Xe){return v(Xe,se,ke,Pe)});J.addEventListener(se,ke,Pe),n._handlers.push({remove:function(){return J.removeEventListener(se,ke,Pe)}})}function y(){Ne("onChange")}function b(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(function(ke){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+ke+"]"),function(Pe){return v(Pe,"click",n[ke])})}),n.isMobile){Me();return}var J=j0(R,50);if(n._debouncedChange=j0(y,U6),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&v(n.daysContainer,"mouseover",function(ke){n.config.mode==="range"&&X(us(ke))}),v(n._input,"keydown",Z),n.calendarContainer!==void 0&&v(n.calendarContainer,"keydown",Z),!n.config.inline&&!n.config.static&&v(window,"resize",J),window.ontouchstart!==void 0?v(window.document,"touchstart",re):v(window.document,"mousedown",re),v(window.document,"focus",re,{capture:!0}),n.config.clickOpens===!0&&(v(n._input,"focus",n.open),v(n._input,"click",n.open)),n.daysContainer!==void 0&&(v(n.monthNav,"click",Te),v(n.monthNav,["keyup","increment"],x),v(n.daysContainer,"click",xe)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){var se=function(ke){return us(ke).select()};v(n.timeContainer,["increment"],d),v(n.timeContainer,"blur",d,{capture:!0}),v(n.timeContainer,"click",k),v([n.hourElement,n.minuteElement],["focus","click"],se),n.secondElement!==void 0&&v(n.secondElement,"focus",function(){return n.secondElement&&n.secondElement.select()}),n.amPM!==void 0&&v(n.amPM,"click",function(ke){d(ke)})}n.config.allowInput&&v(n._input,"blur",V)}function j(J,se){var ke=J!==void 0?n.parseDate(J):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),Pe=n.currentYear,Xe=n.currentMonth;try{ke!==void 0&&(n.currentYear=ke.getFullYear(),n.currentMonth=ke.getMonth())}catch(it){it.message="Invalid date supplied: "+ke,n.config.errorHandler(it)}se&&n.currentYear!==Pe&&(Ne("onYearChange"),D()),se&&(n.currentYear!==Pe||n.currentMonth!==Xe)&&Ne("onMonthChange"),n.redraw()}function k(J){var se=us(J);~se.className.indexOf("arrow")&&S(J,se.classList.contains("arrowUp")?1:-1)}function S(J,se,ke){var Pe=J&&us(J),Xe=ke||Pe&&Pe.parentNode&&Pe.parentNode.firstChild,it=qe("increment");it.delta=se,Xe&&Xe.dispatchEvent(it)}function N(){var J=window.document.createDocumentFragment();if(n.calendarContainer=un("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(J.appendChild(q()),n.innerContainer=un("div","flatpickr-innerContainer"),n.config.weekNumbers){var se=Y(),ke=se.weekWrapper,Pe=se.weekNumbers;n.innerContainer.appendChild(ke),n.weekNumbers=Pe,n.weekWrapper=ke}n.rContainer=un("div","flatpickr-rContainer"),n.rContainer.appendChild(K()),n.daysContainer||(n.daysContainer=un("div","flatpickr-days"),n.daysContainer.tabIndex=-1),P(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),J.appendChild(n.innerContainer)}n.config.enableTime&&J.appendChild(U()),Oi(n.calendarContainer,"rangeMode",n.config.mode==="range"),Oi(n.calendarContainer,"animate",n.config.animate===!0),Oi(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(J);var Xe=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!Xe&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var it=un("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(it,n.element),it.appendChild(n.element),n.altInput&&it.appendChild(n.altInput),it.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function _(J,se,ke,Pe){var Xe=L(se,!0),it=un("span",J,se.getDate().toString());return it.dateObj=se,it.$i=Pe,it.setAttribute("aria-label",n.formatDate(se,n.config.ariaDateFormat)),J.indexOf("hidden")===-1&&hs(se,n.now)===0&&(n.todayDateElem=it,it.classList.add("today"),it.setAttribute("aria-current","date")),Xe?(it.tabIndex=-1,at(se)&&(it.classList.add("selected"),n.selectedDateElem=it,n.config.mode==="range"&&(Oi(it,"startRange",n.selectedDates[0]&&hs(se,n.selectedDates[0],!0)===0),Oi(it,"endRange",n.selectedDates[1]&&hs(se,n.selectedDates[1],!0)===0),J==="nextMonthDay"&&it.classList.add("inRange")))):it.classList.add("flatpickr-disabled"),n.config.mode==="range"&&Kt(se)&&!at(se)&&it.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&J!=="prevMonthDay"&&Pe%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(se)+"</span>"),Ne("onDayCreate",it),it}function w(J){J.focus(),n.config.mode==="range"&&X(J)}function T(J){for(var se=J>0?0:n.config.showMonths-1,ke=J>0?n.config.showMonths:-1,Pe=se;Pe!=ke;Pe+=J)for(var Xe=n.daysContainer.children[Pe],it=J>0?0:Xe.children.length-1,lt=J>0?Xe.children.length:-1,dt=it;dt!=lt;dt+=J){var _t=Xe.children[dt];if(_t.className.indexOf("hidden")===-1&&L(_t.dateObj))return _t}}function A(J,se){for(var ke=J.className.indexOf("Month")===-1?J.dateObj.getMonth():n.currentMonth,Pe=se>0?n.config.showMonths:-1,Xe=se>0?1:-1,it=ke-n.currentMonth;it!=Pe;it+=Xe)for(var lt=n.daysContainer.children[it],dt=ke-n.currentMonth===it?J.$i+se:se<0?lt.children.length-1:0,_t=lt.children.length,ct=dt;ct>=0&&ct<_t&&ct!=(se>0?_t:-1);ct+=Xe){var kt=lt.children[ct];if(kt.className.indexOf("hidden")===-1&&L(kt.dateObj)&&Math.abs(J.$i-ct)>=Math.abs(se))return w(kt)}n.changeMonth(Xe),M(T(Xe),0)}function M(J,se){var ke=r(),Pe=Q(ke||document.body),Xe=J!==void 0?J:Pe?ke:n.selectedDateElem!==void 0&&Q(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&Q(n.todayDateElem)?n.todayDateElem:T(se>0?1:-1);Xe===void 0?n._input.focus():Pe?A(Xe,se):w(Xe)}function E(J,se){for(var ke=(new Date(J,se,1).getDay()-n.l10n.firstDayOfWeek+7)%7,Pe=n.utils.getDaysInMonth((se-1+12)%12,J),Xe=n.utils.getDaysInMonth(se,J),it=window.document.createDocumentFragment(),lt=n.config.showMonths>1,dt=lt?"prevMonthDay hidden":"prevMonthDay",_t=lt?"nextMonthDay hidden":"nextMonthDay",ct=Pe+1-ke,kt=0;ct<=Pe;ct++,kt++)it.appendChild(_("flatpickr-day "+dt,new Date(J,se-1,ct),ct,kt));for(ct=1;ct<=Xe;ct++,kt++)it.appendChild(_("flatpickr-day",new Date(J,se,ct),ct,kt));for(var zt=Xe+1;zt<=42-ke&&(n.config.showMonths===1||kt%7!==0);zt++,kt++)it.appendChild(_("flatpickr-day "+_t,new Date(J,se+1,zt%Xe),zt,kt));var ve=un("div","dayContainer");return ve.appendChild(it),ve}function P(){if(n.daysContainer!==void 0){qu(n.daysContainer),n.weekNumbers&&qu(n.weekNumbers);for(var J=document.createDocumentFragment(),se=0;se<n.config.showMonths;se++){var ke=new Date(n.currentYear,n.currentMonth,1);ke.setMonth(n.currentMonth+se),J.appendChild(E(ke.getFullYear(),ke.getMonth()))}n.daysContainer.appendChild(J),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&X()}}function D(){if(!(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")){var J=function(Pe){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&Pe<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&Pe>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var se=0;se<12;se++)if(J(se)){var ke=un("option","flatpickr-monthDropdown-month");ke.value=new Date(n.currentYear,se).getMonth().toString(),ke.textContent=gp(se,n.config.shorthandCurrentMonth,n.l10n),ke.tabIndex=-1,n.currentMonth===se&&(ke.selected=!0),n.monthsDropdownContainer.appendChild(ke)}}}function O(){var J=un("div","flatpickr-month"),se=window.document.createDocumentFragment(),ke;n.config.showMonths>1||n.config.monthSelectorType==="static"?ke=un("span","cur-month"):(n.monthsDropdownContainer=un("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),v(n.monthsDropdownContainer,"change",function(lt){var dt=us(lt),_t=parseInt(dt.value,10);n.changeMonth(_t-n.currentMonth),Ne("onMonthChange")}),D(),ke=n.monthsDropdownContainer);var Pe=Hu("cur-year",{tabindex:"-1"}),Xe=Pe.getElementsByTagName("input")[0];Xe.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&Xe.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(Xe.setAttribute("max",n.config.maxDate.getFullYear().toString()),Xe.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var it=un("div","flatpickr-current-month");return it.appendChild(ke),it.appendChild(Pe),se.appendChild(it),J.appendChild(se),{container:J,yearElement:Xe,monthElement:ke}}function F(){qu(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var J=n.config.showMonths;J--;){var se=O();n.yearElements.push(se.yearElement),n.monthElements.push(se.monthElement),n.monthNav.appendChild(se.container)}n.monthNav.appendChild(n.nextMonthNav)}function q(){return n.monthNav=un("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=un("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=un("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,F(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(J){n.__hidePrevMonthArrow!==J&&(Oi(n.prevMonthNav,"flatpickr-disabled",J),n.__hidePrevMonthArrow=J)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(J){n.__hideNextMonthArrow!==J&&(Oi(n.nextMonthNav,"flatpickr-disabled",J),n.__hideNextMonthArrow=J)}}),n.currentYearElement=n.yearElements[0],Gt(),n.monthNav}function U(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var J=cv(n.config);n.timeContainer=un("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var se=un("span","flatpickr-time-separator",":"),ke=Hu("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=ke.getElementsByTagName("input")[0];var Pe=Hu("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=Pe.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=Zi(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?J.hours:u(J.hours)),n.minuteElement.value=Zi(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():J.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(ke),n.timeContainer.appendChild(se),n.timeContainer.appendChild(Pe),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var Xe=Hu("flatpickr-second");n.secondElement=Xe.getElementsByTagName("input")[0],n.secondElement.value=Zi(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():J.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(un("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(Xe)}return n.config.time_24hr||(n.amPM=un("span","flatpickr-am-pm",n.l10n.amPM[As((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function K(){n.weekdayContainer?qu(n.weekdayContainer):n.weekdayContainer=un("div","flatpickr-weekdays");for(var J=n.config.showMonths;J--;){var se=un("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(se)}return ne(),n.weekdayContainer}function ne(){if(n.weekdayContainer){var J=n.l10n.firstDayOfWeek,se=N0(n.l10n.weekdays.shorthand);J>0&&J<se.length&&(se=N0(se.splice(J,se.length),se.splice(0,J)));for(var ke=n.config.showMonths;ke--;)n.weekdayContainer.children[ke].innerHTML=`
      <span class='flatpickr-weekday'>
        `+se.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Y(){n.calendarContainer.classList.add("hasWeeks");var J=un("div","flatpickr-weekwrapper");J.appendChild(un("span","flatpickr-weekday",n.l10n.weekAbbreviation));var se=un("div","flatpickr-weeks");return J.appendChild(se),{weekWrapper:J,weekNumbers:se}}function fe(J,se){se===void 0&&(se=!0);var ke=se?J:J-n.currentMonth;ke<0&&n._hidePrevMonthArrow===!0||ke>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=ke,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,Ne("onYearChange"),D()),P(),Ne("onMonthChange"),Gt())}function le(J,se){if(J===void 0&&(J=!0),se===void 0&&(se=!0),n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,se===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){var ke=cv(n.config),Pe=ke.hours,Xe=ke.minutes,it=ke.seconds;g(Pe,Xe,it)}n.redraw(),J&&Ne("onChange")}function W(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),Ne("onClose")}function z(){n.config!==void 0&&Ne("onDestroy");for(var J=n._handlers.length;J--;)n._handlers[J].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var se=n.calendarContainer.parentNode;if(se.lastChild&&se.removeChild(se.lastChild),se.parentNode){for(;se.firstChild;)se.parentNode.insertBefore(se.firstChild,se);se.parentNode.removeChild(se)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ke){try{delete n[ke]}catch{}})}function ie(J){return n.calendarContainer.contains(J)}function re(J){if(n.isOpen&&!n.config.inline){var se=us(J),ke=ie(se),Pe=se===n.input||se===n.altInput||n.element.contains(se)||J.path&&J.path.indexOf&&(~J.path.indexOf(n.input)||~J.path.indexOf(n.altInput)),Xe=!Pe&&!ke&&!ie(J.relatedTarget),it=!n.config.ignoredFocusElements.some(function(lt){return lt.contains(se)});Xe&&it&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&d(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&n.clear(!1))}}function de(J){if(!(!J||n.config.minDate&&J<n.config.minDate.getFullYear()||n.config.maxDate&&J>n.config.maxDate.getFullYear())){var se=J,ke=n.currentYear!==se;n.currentYear=se||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),ke&&(n.redraw(),Ne("onYearChange"),D())}}function L(J,se){var ke;se===void 0&&(se=!0);var Pe=n.parseDate(J,void 0,se);if(n.config.minDate&&Pe&&hs(Pe,n.config.minDate,se!==void 0?se:!n.minDateHasTime)<0||n.config.maxDate&&Pe&&hs(Pe,n.config.maxDate,se!==void 0?se:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(Pe===void 0)return!1;for(var Xe=!!n.config.enable,it=(ke=n.config.enable)!==null&&ke!==void 0?ke:n.config.disable,lt=0,dt=void 0;lt<it.length;lt++){if(dt=it[lt],typeof dt=="function"&&dt(Pe))return Xe;if(dt instanceof Date&&Pe!==void 0&&dt.getTime()===Pe.getTime())return Xe;if(typeof dt=="string"){var _t=n.parseDate(dt,void 0,!0);return _t&&_t.getTime()===Pe.getTime()?Xe:!Xe}else if(typeof dt=="object"&&Pe!==void 0&&dt.from&&dt.to&&Pe.getTime()>=dt.from.getTime()&&Pe.getTime()<=dt.to.getTime())return Xe}return!Xe}function Q(J){return n.daysContainer!==void 0?J.className.indexOf("hidden")===-1&&J.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(J):!1}function V(J){var se=J.target===n._input,ke=n._input.value.trimEnd()!==tn();se&&ke&&!(J.relatedTarget&&ie(J.relatedTarget))&&n.setDate(n._input.value,!0,J.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function Z(J){var se=us(J),ke=n.config.wrap?t.contains(se):se===n._input,Pe=n.config.allowInput,Xe=n.isOpen&&(!Pe||!ke),it=n.config.inline&&ke&&!Pe;if(J.keyCode===13&&ke){if(Pe)return n.setDate(n._input.value,!0,se===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),se.blur();n.open()}else if(ie(se)||Xe||it){var lt=!!n.timeContainer&&n.timeContainer.contains(se);switch(J.keyCode){case 13:lt?(J.preventDefault(),d(),me()):xe(J);break;case 27:J.preventDefault(),me();break;case 8:case 46:ke&&!n.config.allowInput&&(J.preventDefault(),n.clear());break;case 37:case 39:if(!lt&&!ke){J.preventDefault();var dt=r();if(n.daysContainer!==void 0&&(Pe===!1||dt&&Q(dt))){var _t=J.keyCode===39?1:-1;J.ctrlKey?(J.stopPropagation(),fe(_t),M(T(1),0)):M(void 0,_t)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:J.preventDefault();var ct=J.keyCode===40?1:-1;n.daysContainer&&se.$i!==void 0||se===n.input||se===n.altInput?J.ctrlKey?(J.stopPropagation(),de(n.currentYear-ct),M(T(1),0)):lt||M(void 0,ct*7):se===n.currentYearElement?de(n.currentYear-ct):n.config.enableTime&&(!lt&&n.hourElement&&n.hourElement.focus(),d(J),n._debouncedChange());break;case 9:if(lt){var kt=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(function(ue){return ue}),zt=kt.indexOf(se);if(zt!==-1){var ve=kt[zt+(J.shiftKey?-1:1)];J.preventDefault(),(ve||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(se)&&J.shiftKey&&(J.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&se===n.amPM)switch(J.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],p(),Ot();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],p(),Ot();break}(ke||ie(se))&&Ne("onKeyDown",J)}function X(J,se){if(se===void 0&&(se="flatpickr-day"),!(n.selectedDates.length!==1||J&&(!J.classList.contains(se)||J.classList.contains("flatpickr-disabled")))){for(var ke=J?J.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),Pe=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),Xe=Math.min(ke,n.selectedDates[0].getTime()),it=Math.max(ke,n.selectedDates[0].getTime()),lt=!1,dt=0,_t=0,ct=Xe;ct<it;ct+=V6.DAY)L(new Date(ct),!0)||(lt=lt||ct>Xe&&ct<it,ct<Pe&&(!dt||ct>dt)?dt=ct:ct>Pe&&(!_t||ct<_t)&&(_t=ct));var kt=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+se));kt.forEach(function(zt){var ve=zt.dateObj,ue=ve.getTime(),Re=dt>0&&ue<dt||_t>0&&ue>_t;if(Re){zt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Be){zt.classList.remove(Be)});return}else if(lt&&!Re)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Be){zt.classList.remove(Be)}),J!==void 0&&(J.classList.add(ke<=n.selectedDates[0].getTime()?"startRange":"endRange"),Pe<ke&&ue===Pe?zt.classList.add("startRange"):Pe>ke&&ue===Pe&&zt.classList.add("endRange"),ue>=dt&&(_t===0||ue<=_t)&&H6(ue,Pe,ke)&&zt.classList.add("inRange"))})}}function R(){n.isOpen&&!n.config.static&&!n.config.inline&&B()}function G(J,se){if(se===void 0&&(se=n._positionElement),n.isMobile===!0){if(J){J.preventDefault();var ke=us(J);ke&&ke.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),Ne("onOpen");return}else if(n._input.disabled||n.config.inline)return;var Pe=n.isOpen;n.isOpen=!0,Pe||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),Ne("onOpen"),B(se)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(J===void 0||!n.timeContainer.contains(J.relatedTarget))&&setTimeout(function(){return n.hourElement.select()},50)}function ee(J){return function(se){var ke=n.config["_"+J+"Date"]=n.parseDate(se,n.config.dateFormat),Pe=n.config["_"+(J==="min"?"max":"min")+"Date"];ke!==void 0&&(n[J==="min"?"minDateHasTime":"maxDateHasTime"]=ke.getHours()>0||ke.getMinutes()>0||ke.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(function(Xe){return L(Xe)}),!n.selectedDates.length&&J==="min"&&h(ke),Ot()),n.daysContainer&&(ye(),ke!==void 0?n.currentYearElement[J]=ke.getFullYear().toString():n.currentYearElement.removeAttribute(J),n.currentYearElement.disabled=!!Pe&&ke!==void 0&&Pe.getFullYear()===ke.getFullYear())}}function ae(){var J=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],se=Ei(Ei({},JSON.parse(JSON.stringify(t.dataset||{}))),e),ke={};n.config.parseDate=se.parseDate,n.config.formatDate=se.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(kt){n.config._enable=Ae(kt)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(kt){n.config._disable=Ae(kt)}});var Pe=se.mode==="time";if(!se.dateFormat&&(se.enableTime||Pe)){var Xe=Zn.defaultConfig.dateFormat||uc.dateFormat;ke.dateFormat=se.noCalendar||Pe?"H:i"+(se.enableSeconds?":S":""):Xe+" H:i"+(se.enableSeconds?":S":"")}if(se.altInput&&(se.enableTime||Pe)&&!se.altFormat){var it=Zn.defaultConfig.altFormat||uc.altFormat;ke.altFormat=se.noCalendar||Pe?"h:i"+(se.enableSeconds?":S K":" K"):it+(" h:i"+(se.enableSeconds?":S":"")+" K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:ee("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:ee("max")});var lt=function(kt){return function(zt){n.config[kt==="min"?"_minTime":"_maxTime"]=n.parseDate(zt,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:lt("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:lt("max")}),se.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,ke,se);for(var dt=0;dt<J.length;dt++)n.config[J[dt]]=n.config[J[dt]]===!0||n.config[J[dt]]==="true";av.filter(function(kt){return n.config[kt]!==void 0}).forEach(function(kt){n.config[kt]=rv(n.config[kt]||[]).map(o)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var dt=0;dt<n.config.plugins.length;dt++){var _t=n.config.plugins[dt](n)||{};for(var ct in _t)av.indexOf(ct)>-1?n.config[ct]=rv(_t[ct]).map(o).concat(n.config[ct]):typeof se[ct]>"u"&&(n.config[ct]=_t[ct])}se.altInputClass||(n.config.altInputClass=I().className+" "+n.config.altInputClass),Ne("onParseConfig")}function I(){return n.config.wrap?t.querySelector("[data-input]"):t}function H(){typeof n.config.locale!="object"&&typeof Zn.l10ns[n.config.locale]>"u"&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Ei(Ei({},Zn.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?Zn.l10ns[n.config.locale]:void 0),Ll.D="("+n.l10n.weekdays.shorthand.join("|")+")",Ll.l="("+n.l10n.weekdays.longhand.join("|")+")",Ll.M="("+n.l10n.months.shorthand.join("|")+")",Ll.F="("+n.l10n.months.longhand.join("|")+")",Ll.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var J=Ei(Ei({},e),JSON.parse(JSON.stringify(t.dataset||{})));J.time_24hr===void 0&&Zn.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=I2(n),n.parseDate=Ux({config:n.config,l10n:n.l10n})}function B(J){if(typeof n.config.position=="function")return void n.config.position(n,J);if(n.calendarContainer!==void 0){Ne("onPreCalendarPosition");var se=J||n._positionElement,ke=Array.prototype.reduce.call(n.calendarContainer.children,(function(gn,Ka){return gn+Ka.offsetHeight}),0),Pe=n.calendarContainer.offsetWidth,Xe=n.config.position.split(" "),it=Xe[0],lt=Xe.length>1?Xe[1]:null,dt=se.getBoundingClientRect(),_t=window.innerHeight-dt.bottom,ct=it==="above"||it!=="below"&&_t<ke&&dt.top>ke,kt=window.pageYOffset+dt.top+(ct?-ke-2:se.offsetHeight+2);if(Oi(n.calendarContainer,"arrowTop",!ct),Oi(n.calendarContainer,"arrowBottom",ct),!n.config.inline){var zt=window.pageXOffset+dt.left,ve=!1,ue=!1;lt==="center"?(zt-=(Pe-dt.width)/2,ve=!0):lt==="right"&&(zt-=Pe-dt.width,ue=!0),Oi(n.calendarContainer,"arrowLeft",!ve&&!ue),Oi(n.calendarContainer,"arrowCenter",ve),Oi(n.calendarContainer,"arrowRight",ue);var Re=window.document.body.offsetWidth-(window.pageXOffset+dt.right),Be=zt+Pe>window.document.body.offsetWidth,Ue=Re+Pe>window.document.body.offsetWidth;if(Oi(n.calendarContainer,"rightMost",Be),!n.config.static)if(n.calendarContainer.style.top=kt+"px",!Be)n.calendarContainer.style.left=zt+"px",n.calendarContainer.style.right="auto";else if(!Ue)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=Re+"px";else{var Ye=te();if(Ye===void 0)return;var tt=window.document.body.offsetWidth,Dt=Math.max(0,tt/2-Pe/2),Jt=".flatpickr-calendar.centerMost:before",Yn=".flatpickr-calendar.centerMost:after",_s=Ye.cssRules.length,Wa="{left:"+dt.left+"px;right:auto;}";Oi(n.calendarContainer,"rightMost",!1),Oi(n.calendarContainer,"centerMost",!0),Ye.insertRule(Jt+","+Yn+Wa,_s),n.calendarContainer.style.left=Dt+"px",n.calendarContainer.style.right="auto"}}}}function te(){for(var J=null,se=0;se<document.styleSheets.length;se++){var ke=document.styleSheets[se];if(ke.cssRules){try{ke.cssRules}catch{continue}J=ke;break}}return J??oe()}function oe(){var J=document.createElement("style");return document.head.appendChild(J),J.sheet}function ye(){n.config.noCalendar||n.isMobile||(D(),Gt(),P())}function me(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function xe(J){J.preventDefault(),J.stopPropagation();var se=function(kt){return kt.classList&&kt.classList.contains("flatpickr-day")&&!kt.classList.contains("flatpickr-disabled")&&!kt.classList.contains("notAllowed")},ke=M2(us(J),se);if(ke!==void 0){var Pe=ke,Xe=n.latestSelectedDateObj=new Date(Pe.dateObj.getTime()),it=(Xe.getMonth()<n.currentMonth||Xe.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=Pe,n.config.mode==="single")n.selectedDates=[Xe];else if(n.config.mode==="multiple"){var lt=at(Xe);lt?n.selectedDates.splice(parseInt(lt),1):n.selectedDates.push(Xe)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=Xe,n.selectedDates.push(Xe),hs(Xe,n.selectedDates[0],!0)!==0&&n.selectedDates.sort(function(kt,zt){return kt.getTime()-zt.getTime()}));if(p(),it){var dt=n.currentYear!==Xe.getFullYear();n.currentYear=Xe.getFullYear(),n.currentMonth=Xe.getMonth(),dt&&(Ne("onYearChange"),D()),Ne("onMonthChange")}if(Gt(),P(),Ot(),!it&&n.config.mode!=="range"&&n.config.showMonths===1?w(Pe):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){var _t=n.config.mode==="single"&&!n.config.enableTime,ct=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(_t||ct)&&me()}y()}}var Ce={locale:[H,ne],showMonths:[F,c,K],minDate:[j],maxDate:[j],positionElement:[et],clickOpens:[function(){n.config.clickOpens===!0?(v(n._input,"focus",n.open),v(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function he(J,se){if(J!==null&&typeof J=="object"){Object.assign(n.config,J);for(var ke in J)Ce[ke]!==void 0&&Ce[ke].forEach(function(Pe){return Pe()})}else n.config[J]=se,Ce[J]!==void 0?Ce[J].forEach(function(Pe){return Pe()}):av.indexOf(J)>-1&&(n.config[J]=rv(se));n.redraw(),Ot(!0)}function _e(J,se){var ke=[];if(J instanceof Array)ke=J.map(function(Pe){return n.parseDate(Pe,se)});else if(J instanceof Date||typeof J=="number")ke=[n.parseDate(J,se)];else if(typeof J=="string")switch(n.config.mode){case"single":case"time":ke=[n.parseDate(J,se)];break;case"multiple":ke=J.split(n.config.conjunction).map(function(Pe){return n.parseDate(Pe,se)});break;case"range":ke=J.split(n.l10n.rangeSeparator).map(function(Pe){return n.parseDate(Pe,se)});break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(J)));n.selectedDates=n.config.allowInvalidPreload?ke:ke.filter(function(Pe){return Pe instanceof Date&&L(Pe,!1)}),n.config.mode==="range"&&n.selectedDates.sort(function(Pe,Xe){return Pe.getTime()-Xe.getTime()})}function Ke(J,se,ke){if(se===void 0&&(se=!1),ke===void 0&&(ke=n.config.dateFormat),J!==0&&!J||J instanceof Array&&J.length===0)return n.clear(se);_e(J,ke),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),j(void 0,se),h(),n.selectedDates.length===0&&n.clear(!1),Ot(se),se&&Ne("onChange")}function Ae(J){return J.slice().map(function(se){return typeof se=="string"||typeof se=="number"||se instanceof Date?n.parseDate(se,void 0,!0):se&&typeof se=="object"&&se.from&&se.to?{from:n.parseDate(se.from,void 0),to:n.parseDate(se.to,void 0)}:se}).filter(function(se){return se})}function $e(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var J=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);J&&_e(J,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function Je(){if(n.input=I(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=un(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),et()}function et(){n._positionElement=n.config.positionElement||n._input}function Me(){var J=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=un("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=J,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=J==="datetime-local"?"Y-m-d\\TH:i:S":J==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}v(n.mobileInput,"change",function(se){n.setDate(us(se).value,!1,n.mobileFormatStr),Ne("onChange"),Ne("onClose")})}function ge(J){if(n.isOpen===!0)return n.close();n.open(J)}function Ne(J,se){if(n.config!==void 0){var ke=n.config[J];if(ke!==void 0&&ke.length>0)for(var Pe=0;ke[Pe]&&Pe<ke.length;Pe++)ke[Pe](n.selectedDates,n.input.value,n,se);J==="onChange"&&(n.input.dispatchEvent(qe("change")),n.input.dispatchEvent(qe("input")))}}function qe(J){var se=document.createEvent("Event");return se.initEvent(J,!0,!0),se}function at(J){for(var se=0;se<n.selectedDates.length;se++){var ke=n.selectedDates[se];if(ke instanceof Date&&hs(ke,J)===0)return""+se}return!1}function Kt(J){return n.config.mode!=="range"||n.selectedDates.length<2?!1:hs(J,n.selectedDates[0])>=0&&hs(J,n.selectedDates[1])<=0}function Gt(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(function(J,se){var ke=new Date(n.currentYear,n.currentMonth,1);ke.setMonth(n.currentMonth+se),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[se].textContent=gp(ke.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=ke.getMonth().toString(),J.value=ke.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function tn(J){var se=J||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map(function(ke){return n.formatDate(ke,se)}).filter(function(ke,Pe,Xe){return n.config.mode!=="range"||n.config.enableTime||Xe.indexOf(ke)===Pe}).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function Ot(J){J===void 0&&(J=!0),n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=tn(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=tn(n.config.altFormat)),J!==!1&&Ne("onValueUpdate")}function Te(J){var se=us(J),ke=n.prevMonthNav.contains(se),Pe=n.nextMonthNav.contains(se);ke||Pe?fe(ke?-1:1):n.yearElements.indexOf(se)>=0?se.select():se.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):se.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Fe(J){J.preventDefault();var se=J.type==="keydown",ke=us(J),Pe=ke;n.amPM!==void 0&&ke===n.amPM&&(n.amPM.textContent=n.l10n.amPM[As(n.amPM.textContent===n.l10n.amPM[0])]);var Xe=parseFloat(Pe.getAttribute("min")),it=parseFloat(Pe.getAttribute("max")),lt=parseFloat(Pe.getAttribute("step")),dt=parseInt(Pe.value,10),_t=J.delta||(se?J.which===38?1:-1:0),ct=dt+lt*_t;if(typeof Pe.value<"u"&&Pe.value.length===2){var kt=Pe===n.hourElement,zt=Pe===n.minuteElement;ct<Xe?(ct=it+ct+As(!kt)+(As(kt)&&As(!n.amPM)),zt&&S(void 0,-1,n.hourElement)):ct>it&&(ct=Pe===n.hourElement?ct-it-As(!n.amPM):Xe,zt&&S(void 0,1,n.hourElement)),n.amPM&&kt&&(lt===1?ct+dt===23:Math.abs(ct-dt)>lt)&&(n.amPM.textContent=n.l10n.amPM[As(n.amPM.textContent===n.l10n.amPM[0])]),Pe.value=Zi(ct)}}return a(),n}function hc(t,e){for(var n=Array.prototype.slice.call(t).filter(function(o){return o instanceof HTMLElement}),s=[],a=0;a<n.length;a++){var r=n[a];try{if(r.getAttribute("data-fp-omit")!==null)continue;r._flatpickr!==void 0&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=W6(r,e||{}),s.push(r._flatpickr)}catch(o){console.error(o)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return hc(this,t)},HTMLElement.prototype.flatpickr=function(t){return hc([this],t)});var Zn=function(t,e){return typeof t=="string"?hc(window.document.querySelectorAll(t),e):t instanceof Node?hc([t],e):hc(t,e)};Zn.defaultConfig={};Zn.l10ns={en:Ei({},ym),default:Ei({},ym)};Zn.localize=function(t){Zn.l10ns.default=Ei(Ei({},Zn.l10ns.default),t)};Zn.setDefaults=function(t){Zn.defaultConfig=Ei(Ei({},Zn.defaultConfig),t)};Zn.parseDate=Ux({});Zn.formatDate=I2({});Zn.compareDates=hs;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return hc(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=Zn);const K6=["onCreate","onDestroy"],Wx=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],G6=(t,e)=>(Wx.forEach(n=>{const s=e[n],a=t[n];if(s){a&&!Array.isArray(a)?t[n]=[t[n]]:t[n]||(t[n]=[]);const r=Array.isArray(s)?s:[s];t[n].length===0?t[n]=r:t[n].push(...r)}}),Wx.forEach(n=>{delete e[n]}),K6.forEach(n=>{delete e[n]}),t),si=t=>{const e=f.useMemo(()=>({...t}),[t]),{defaultValue:n,options:s={},value:a,children:r,render:o,onCreate:c,onDestroy:d}=e,m=f.useMemo(()=>G6(s,e),[s,e]),u=f.useRef(null),p=f.useRef(void 0);f.useImperativeHandle(t.ref,()=>({get flatpickr(){return p.current}}),[]),f.useEffect(()=>{const x=()=>{var y;m.onClose=m.onClose||(()=>{var b;(b=u.current)!=null&&b.blur&&u.current.blur()}),p.current=(((y=Zn)==null?void 0:y.default)||Zn)(u.current,m),c?.(p.current)},v=()=>{d?.(p.current),p.current&&p.current.destroy(),p.current=void 0};return x(),()=>{v()}},[m,c,d]),f.useEffect(()=>{var x;if(p.current){const v=Object.getOwnPropertyNames(m);for(let y=v.length-1;y>=0;y--){const b=v[y];let j=m[b];j?.toString()!==((x=p.current.config[b])==null?void 0:x.toString())&&(Wx.includes(b)&&!Array.isArray(j)&&(j=[j]),p.current.set(b,j))}a!==void 0&&a!==p.current.input.value&&p.current.setDate(a,!1)}},[m,a]);const h=f.useCallback(x=>{u.current=x},[]);if(o)return o({...e,defaultValue:n,value:a},h);const g=f.useCallback(x=>{var v,y;t&&t.onChange&&(Array.isArray(t?.onChange)?(v=t?.onChange)==null||v.forEach(()=>[new Date(x.target.value)],a?.toString()||""):typeof t.onChange=="function"&&((y=t?.onChange)==null||y.call(t,[new Date(x.target.value)],a?.toString()||"",p.current)))},[t,a]);return s.wrap?i.jsx("div",{className:"flatpickr",ref:h,children:r}):i.jsx("input",{onChange:g,...e,value:a?.toString(),defaultValue:n,ref:h})},ki=()=>{const t=Bm(),e=f.useMemo(()=>{const s=t.map(c=>{const{handle:d,params:m,data:u}=c,p=d?.meta||{};let h=p.breadcrumb||d?.breadcrumb||d?.title||p.title,g="";if(typeof h=="function")try{g=h(m,u,c)}catch(x){console.warn("[Breadcrumb] Resolver failed:",x),g=""}else g=h;return{key:c.id,path:c.pathname,label:g,isHome:c.pathname==="/"||c.pathname==="/dashboard"}}).filter(c=>c.label),a=[],r=new Set;return s.forEach(c=>{r.has(c.path)||(r.add(c.path),a.push(c))}),a.length>0&&a[0].path==="/"||a.unshift({key:"root-home",path:"/",label:l("Home","kivicare-clinic-management-system"),isHome:!0}),a.map(c=>({...c,label:l(c.label,"kivicare-clinic-management-system")}))},[t]);return e.length<=1?null:i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:e.map((n,s)=>{const a=s===e.length-1;return i.jsx("li",{className:`breadcrumb-item ${a?"active":""}`,...a?{"aria-current":"page"}:{},children:a?i.jsx("span",{className:"breadcrumb-text",children:n.label}):i.jsx(gt,{to:n.path,className:"breadcrumb-link",children:n.label})},n.key)})})})},bo={getUpcomingAppointment:(t=null)=>{let e="dashboard/upcoming-appointments";if(t&&t.start_date&&t.end_date){const n=new URLSearchParams;n.append("start_date",t.start_date),n.append("end_date",t.end_date),e=`${e}?${n.toString()}`}return pe({endpoint:e,method:"GET"})},getStatsCount:(t,e=null)=>{let n=`dashboard/statistics/${t}`;if(e&&e.start_date&&e.end_date){const s=new URLSearchParams;s.append("start_date",e.start_date),s.append("end_date",e.end_date),n=`${n}?${s.toString()}`}return pe({endpoint:n,method:"GET"})},getTopDoctors:(t={})=>{const{limit:e=5,start_date:n,end_date:s}=t,a=new URLSearchParams;e&&a.append("limit",e),n&&a.append("start_date",n),s&&a.append("end_date",s);const r=a.toString(),o=`dashboard/top-doctors${r?"?"+r:""}`;return pe({endpoint:o,method:"GET"})},getRecentPayments:(t={})=>{const{limit:e=3,clinic_id:n,start_date:s,end_date:a}=t,r=new URLSearchParams;e&&r.append("limit",e),n&&r.append("clinic_id",n),s&&r.append("start_date",s),a&&r.append("end_date",a);const o=r.toString(),c=`dashboard/recent-payments${o?"?"+o:""}`;return pe({endpoint:c,method:"GET"})},getCalendarAppointments:(t={})=>{const e=new URLSearchParams;t.start_date&&e.append("date_from",t.start_date),t.end_date&&e.append("date_to",t.end_date),t.doctor_id&&e.append("doctor_id",t.doctor_id),t.patient_id&&e.append("patient_id",t.patient_id),t.clinic_id&&e.append("clinic_id",t.clinic_id),e.append("perPage","all");const n=e.toString(),s=`appointments${n?"?"+n:""}`;return pe({endpoint:s,method:"GET"})}},Rs={all:["dashboard"],settings:(t={})=>[...Rs.all,"settings",t?.start_date,t?.end_date],stats:(t,e={})=>[...Rs.all,"stats",t,e?.start_date,e?.end_date],topDoctors:(t={},e={})=>[...Rs.all,"topDoctors",JSON.stringify(t),e?.start_date,e?.end_date],recentPayments:(t={})=>[...Rs.all,"recentPayments",JSON.stringify(t),t?.start_date,t?.end_date],calendarAppointments:t=>[...Rs.all,"calendarAppointments",JSON.stringify(t)],bookingStatus:(t={})=>[...Rs.all,"bookingStatus",t?.start_date,t?.end_date]},Y6=(t={})=>{const{params:e,...n}=t;return ft({queryKey:t.queryKey||Rs.settings(e),queryFn:()=>bo.getUpcomingAppointment(e),staleTime:300*1e3,cacheTime:1800*1e3,...n})},Q6=(t,e={})=>{const{params:n,...s}=e;return ft({queryKey:e.queryKey||Rs.stats(t,n),queryFn:()=>bo.getStatsCount(t,n),enabled:!!t,staleTime:300*1e3,cacheTime:1800*1e3,...s})},C0=async(t,e,n=null)=>{let s=null,a=null;typeof e=="function"?(s=e,a=n):e&&typeof e=="object"&&(a=e,s=n);try{const r=await bo.getStatsCount(t,a);return s&&typeof s=="function"&&s(r),r}catch(r){throw console.error(`Error fetching stats for ${t}:`,r),s&&typeof s=="function"&&s(null,r),r}},Z6=(t={},e={})=>{const{start_date:n,end_date:s,...a}=t,r=n&&s?{start_date:n,end_date:s}:{};return ft({queryKey:Rs.topDoctors(a,r),queryFn:()=>bo.getTopDoctors({...a,...r}),staleTime:300*1e3,cacheTime:1800*1e3,...e})},X6=(t={},e={})=>ft({queryKey:Rs.recentPayments(t),queryFn:()=>bo.getRecentPayments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),J6=(t={},e={})=>ft({queryKey:Rs.calendarAppointments(t),queryFn:()=>bo.getCalendarAppointments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),e$=(t={},e={})=>ft({queryKey:Rs.bookingStatus(t),queryFn:()=>bo.getStatsCount("booking-status",t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),t$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:30,viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M0.549316 24.1039C0.549574 24.814 0.836051 25.4949 1.34578 25.997C1.85551 26.4991 2.54678 26.7813 3.26764 26.7815H9.24796V21.9297C8.05264 21.7971 6.94867 21.2358 6.14653 20.3528C5.3444 19.4698 4.90021 18.327 4.89865 17.1421V14.4645C4.89991 14.0388 5.07215 13.6309 5.37775 13.3298C5.68335 13.0288 6.09746 12.8592 6.52964 12.8579H7.0733C7.1447 12.8579 7.2154 12.8718 7.28136 12.8987C7.34732 12.9256 7.40725 12.965 7.45773 13.0148C7.50822 13.0645 7.54826 13.1235 7.57558 13.1885C7.60291 13.2535 7.61697 13.3231 7.61697 13.3934C7.61697 13.4638 7.60291 13.5334 7.57558 13.5984C7.54826 13.6634 7.50822 13.7224 7.45773 13.7721C7.40725 13.8218 7.34732 13.8613 7.28136 13.8882C7.2154 13.9151 7.1447 13.929 7.0733 13.929H6.52964C6.38558 13.9294 6.24755 13.9859 6.14568 14.0863C6.04381 14.1866 5.9864 14.3226 5.98598 14.4645V17.1421C6.17796 22.1095 13.4071 22.1061 13.5973 17.1421V14.4645C13.5969 14.3226 13.5395 14.1866 13.4376 14.0863C13.3357 13.9859 13.1977 13.9294 13.0536 13.929H12.51C12.3672 13.9268 12.2311 13.8694 12.1309 13.7692C12.0308 13.669 11.9747 13.5341 11.9747 13.3934C11.9747 13.2528 12.0308 13.1179 12.1309 13.0177C12.2311 12.9175 12.3672 12.8601 12.51 12.8579H13.0536C13.4858 12.8592 13.8999 13.0288 14.2055 13.3298C14.5111 13.6309 14.6833 14.0388 14.6846 14.4645V17.1421C14.683 18.327 14.2388 19.4698 13.4367 20.3528C12.6346 21.2358 11.5306 21.7971 10.3353 21.9297C10.3332 22.1578 10.3368 26.7538 10.3353 26.7815C10.4885 27.6708 10.9531 28.479 11.6483 29.066C12.3435 29.6529 13.2255 29.9815 14.141 29.9946L16.3156 29.9946C17.2301 29.9941 18.1138 29.669 18.8048 29.0789C19.4957 28.4888 19.9476 27.6732 20.0777 26.7815H28.2762C28.9971 26.7813 29.6884 26.4991 30.1981 25.997C30.7078 25.4949 30.9943 24.814 30.9946 24.1039V9.10925H0.549316V24.1039ZM17.9466 19.2842C17.9468 18.5741 18.2333 17.8932 18.7431 17.3911C19.2528 16.889 19.9441 16.6068 20.6649 16.6066H21.2629C21.3883 16.0018 21.7219 15.4582 22.2074 15.0679C22.6928 14.6776 23.3003 14.4644 23.9269 14.4645C27.5184 14.5754 27.5207 19.7087 23.9269 19.8197C23.3002 19.8198 22.6928 19.6066 22.2074 19.2163C21.7219 18.8259 21.3883 18.2824 21.2629 17.6776H20.6649C20.2328 17.6789 19.8186 17.8485 19.513 18.1496C19.2074 18.4506 19.0352 18.8585 19.0339 19.2842V26.246C19.0323 26.9557 18.7454 27.6358 18.236 28.1376C17.7266 28.6394 17.0361 28.922 16.3156 28.9236H14.141C13.5143 28.9237 12.9069 28.7105 12.4214 28.3202C11.936 27.9298 11.6024 27.3863 11.477 26.7815H17.9466L17.9466 19.2842Z",fill:"currentColor"}),f.createElement("path",{d:"M23.9269 18.7487C24.3563 18.7438 24.7664 18.5724 25.0682 18.2717C25.3701 17.9709 25.5394 17.565 25.5394 17.1421C25.5394 16.7191 25.3701 16.3132 25.0682 16.0125C24.7663 15.7117 24.3562 15.5403 23.9269 15.5355C23.4975 15.5404 23.0874 15.7117 22.7856 16.0125C22.4837 16.3133 22.3144 16.7192 22.3144 17.1421C22.3144 17.5651 22.4837 17.9709 22.7856 18.2717C22.0875 18.5725 23.4976 18.7438 23.9269 18.7487ZM23.9269 16.6066C24.0697 16.6087 24.2059 16.666 24.3062 16.7662C24.4064 16.8664 24.4626 17.0014 24.4626 17.1421C24.4626 17.2828 24.4064 17.4178 24.3061 17.518C24.2059 17.6182 24.0697 17.6755 23.9269 17.6776C23.7841 17.6755 23.6479 17.6182 23.5476 17.518C23.4474 17.4178 23.3912 17.2827 23.3912 17.1421C23.3913 17.0014 23.4474 16.8664 23.5477 16.7662C23.6479 16.666 23.7841 16.6086 23.9269 16.6066Z",fill:"currentColor"}),f.createElement("path",{d:"M28.2762 2.68297H26.6452V1.61195C26.6403 1.18907 26.4662 0.785175 26.1609 0.48787C25.8556 0.190565 25.4436 0.0238284 25.0142 0.0238284C24.5849 0.0238284 24.1729 0.190565 23.8675 0.48787C23.5622 0.785175 23.3882 1.18907 23.3832 1.61195V5.36056C23.3813 5.50131 23.3231 5.63564 23.2214 5.73448C23.1196 5.83333 22.9825 5.88875 22.8396 5.88875C22.6967 5.88875 22.5595 5.83333 22.4578 5.73448C22.356 5.63564 22.2979 5.50131 22.2959 5.36056V2.68297H8.16061V1.61195C8.15652 1.1885 7.98288 0.783761 7.67745 0.485753C7.37202 0.187744 6.9595 0.0205639 6.52959 0.0205688C6.09969 0.0205738 5.68717 0.187763 5.38174 0.485779C5.07632 0.783795 4.90269 1.18854 4.89862 1.61198V5.36061C4.89632 5.50114 4.83803 5.63515 4.73632 5.73373C4.63461 5.83231 4.49764 5.88756 4.35495 5.88756C4.21227 5.88756 4.0753 5.83231 3.97359 5.73373C3.87188 5.63515 3.81359 5.50114 3.81129 5.36061V2.68302H3.26763C2.6666 2.68031 2.08185 2.87536 1.60615 3.23722C1.13045 3.59908 0.791025 4.10703 0.641715 4.68051C0.452452 5.13787 0.589135 7.52339 0.549259 8.03826H30.9946V5.36058C30.9943 4.65051 30.7078 3.96959 30.1981 3.46749C29.6884 2.9654 28.9971 2.68321 28.2762 2.68297ZM7.0733 2.68297H5.98595V1.61195C5.98595 1.46992 6.04323 1.3337 6.14519 1.23327C6.24714 1.13284 6.38543 1.07642 6.52962 1.07642C6.6738 1.07642 6.81209 1.13284 6.91404 1.23327C7.016 1.3337 7.07328 1.46992 7.07328 1.61195L7.0733 2.68297ZM25.5579 2.68297H24.4706V1.61195C24.4706 1.46992 24.5278 1.3337 24.6298 1.23327C24.7318 1.13284 24.87 1.07642 25.0142 1.07642C25.1584 1.07642 25.2967 1.13284 25.3987 1.23327C25.5006 1.3337 25.5579 1.46992 25.5579 1.61195L25.5579 2.68297Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:31,height:30,fill:"white"})))),n$=f.forwardRef(t$),i$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:38,height:30,viewBox:"0 0 38 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M12.9992 14.9391C16.7634 14.9391 19.8148 11.8876 19.8148 8.12343C19.8148 4.35926 16.7634 1.3078 12.9992 1.3078C9.23505 1.3078 6.18359 4.35926 6.18359 8.12343C6.18359 11.8876 9.23505 14.9391 12.9992 14.9391Z",fill:"currentColor"}),f.createElement("path",{d:"M36.3828 0.859375H28.8281C27.9609 0.859375 27.2656 1.5625 27.2656 2.42187V11.2266C27.2656 13.0547 28.2656 14.7422 29.8672 15.6172L31.8273 16.6812V23.2305C31.8273 25.6281 29.8766 27.5781 27.4797 27.5781H25.9469C25.9414 27.5781 25.9359 27.5812 25.9305 27.5812C25.8508 24.1313 24.4336 21.0031 22.1562 18.7266C20.7031 17.2812 18.9062 16.1719 16.8984 15.5391C15.7344 16.1562 14.4062 16.5 13 16.5C11.5938 16.5 10.2656 16.1562 9.10156 15.5391C3.85938 17.1875 0.0546875 22.0938 0.0546875 27.8828V29.1406H25.9453H25.9469H27.4797C30.7391 29.1406 33.3898 26.4891 33.3898 23.2305V16.6742L35.3359 15.618C36.9453 14.743 37.9453 13.0555 37.9453 11.2273V2.42187C37.9453 1.5625 37.2422 0.859375 36.3828 0.859375ZM35.2656 8.96094H33.3828V10.8438C33.3828 11.2812 33.0391 11.625 32.6016 11.625C32.1719 11.625 31.8203 11.2812 31.8203 10.8438V8.96094H29.9375C29.5078 8.96094 29.1562 8.61719 29.1562 8.17969C29.1562 7.75 29.5078 7.39844 29.9375 7.39844H31.8203V5.51563C31.8203 5.08594 32.1719 4.73438 32.6016 4.73438C33.0391 4.73438 33.3828 5.08594 33.3828 5.51563V7.39844H35.2656C35.7031 7.39844 36.0469 7.75 36.0469 8.17969C36.0469 8.61719 35.7031 8.96094 35.2656 8.96094Z",fill:"currentColor"})),s$=f.forwardRef(i$),a$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:25,height:31,viewBox:"0 0 25 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M18.8486 11V14C18.8486 14.1326 18.796 14.2598 18.7022 14.3536C18.6084 14.4473 18.4812 14.5 18.3486 14.5H14.8486V18C14.8486 18.1326 14.796 18.2598 14.7022 18.3536C14.6084 18.4473 14.4812 18.5 14.3486 18.5H11.3486C11.216 18.5 11.0888 18.4473 10.9951 18.3536C10.9013 18.2598 10.8486 18.1326 10.8486 18V14.5H7.34863C7.21602 14.5 7.08885 14.4473 6.99508 14.3536C6.90131 14.2598 6.84863 14.1326 6.84863 14V11C6.84863 10.8674 6.90131 10.7402 6.99508 10.6464C7.08885 10.5527 7.21602 10.5 7.34863 10.5H10.8486V7C10.8486 6.86739 10.9013 6.74021 10.9951 6.64645C11.0888 6.55268 11.216 6.5 11.3486 6.5H14.3486C14.4812 6.5 14.6084 6.55268 14.7022 6.64645C14.796 6.74021 14.8486 6.86739 14.8486 7V10.5H18.3486C18.4812 10.5 18.6084 10.5527 18.7022 10.6464C18.796 10.7402 18.8486 10.8674 18.8486 11ZM24.8486 12.5C24.8486 21.647 13.6238 30.0488 13.1458 30.4021C13.0597 30.4657 12.9556 30.5 12.8486 30.5C12.7417 30.5 12.6375 30.4657 12.5515 30.4021C12.0735 30.0488 0.848633 21.647 0.848633 12.5C0.848633 9.3174 2.11291 6.26515 4.36335 4.01472C6.61379 1.76428 9.66603 0.5 12.8486 0.5C16.0312 0.5 19.0835 1.76428 21.3339 4.01472C23.5844 6.26515 24.8486 9.3174 24.8486 12.5ZM21.8486 12.5C21.8486 10.72 21.3208 8.97991 20.3319 7.49987C19.3429 6.01983 17.9373 4.86627 16.2928 4.18508C14.6482 3.5039 12.8386 3.32567 11.0928 3.67293C9.34699 4.0202 7.74334 4.87737 6.48467 6.13604C5.226 7.39471 4.36883 8.99836 4.02157 10.7442C3.6743 12.49 3.85253 14.2996 4.53372 15.9442C5.21491 17.5887 6.36846 18.9943 7.8485 19.9832C9.32854 20.9722 11.0686 21.5 12.8486 21.5C15.2347 21.4973 17.5224 20.5482 19.2096 18.861C20.8968 17.1737 21.8459 14.8861 21.8486 12.5Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:24,height:30,fill:"white",transform:"translate(0.848633 0.5)"})))),r$=f.forwardRef(a$),l$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:27,height:31,viewBox:"0 0 27 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M21.9935 17.4026C22.2786 18.0609 22.4445 18.8663 22.4812 19.7977C23.4435 20.0182 24.1637 20.879 24.1637 21.9069C24.1637 23.1008 23.1924 24.0721 21.9985 24.0721C20.8046 24.0721 19.8333 23.1008 19.8333 21.9069C19.8333 20.8906 20.5378 20.0389 21.4832 19.806C21.4415 18.881 21.2204 17.4736 20.315 16.7787C19.8529 16.6591 19.3779 16.5725 18.8906 16.5279C18.8546 18.1485 13.4982 22.1478 13.4982 22.1478C13.4982 22.1478 8.14018 18.1491 8.10387 16.5286C7.56257 16.5779 7.03593 16.6768 6.52727 16.8194C5.86672 17.3423 5.52495 18.3167 5.50729 19.7331C5.7015 19.8447 5.85839 20.0189 5.95466 20.2297C6.66618 20.5658 7.29475 21.2727 7.7761 22.279C7.85671 22.4482 7.86737 22.6394 7.80807 22.814C8.09655 23.5565 8.26143 24.3679 8.26143 25.0495C8.26143 26.0045 8.26143 26.9076 7.22047 27.1394C7.10788 27.233 6.96664 27.2846 6.81841 27.2846H6.12288C5.77411 27.2846 5.49031 27.0002 5.49031 26.6524L5.49097 26.6277C5.5043 26.2913 5.78577 26.0198 6.12288 26.0198H6.81841C6.88969 26.0198 6.95931 26.0318 7.0266 26.0551C7.06857 26.0435 7.0819 26.0338 7.08223 26.0335C7.15951 25.8962 7.15951 25.3246 7.15951 25.0501C7.15951 24.4965 7.02094 23.828 6.7781 23.2067C6.65219 23.1351 6.55026 23.0268 6.48763 22.8959C6.06592 22.0129 5.4923 21.4426 5.02662 21.4426C4.55027 21.4426 3.94801 22.0595 3.52796 22.9762C3.45934 23.1258 3.33909 23.2474 3.19119 23.3203C2.97167 23.9146 2.85109 24.5265 2.85109 25.0498C2.85109 25.2803 2.85109 25.8919 2.93903 26.0358C2.94003 26.0358 2.95968 26.0478 3.01498 26.0615C3.08693 26.0338 3.16421 26.0195 3.24149 26.0195H3.93835C4.26313 26.0195 4.53462 26.2667 4.56726 26.5881L4.57059 26.6271C4.57059 27.0005 4.28678 27.285 3.93835 27.285H3.24149C3.10325 27.285 2.96967 27.2387 2.85975 27.1547C2.46168 27.0798 2.18121 26.9042 2.00366 26.6184C1.78847 26.273 1.74916 25.8193 1.74916 25.0498C1.74916 24.3749 1.90506 23.5975 2.1882 22.855C2.14656 22.6961 2.16055 22.5302 2.22984 22.3806C2.52464 21.7357 2.89972 21.1834 3.31411 20.784C3.54195 20.5645 3.78679 20.388 4.04295 20.259C4.13888 20.0345 4.30544 19.8503 4.50897 19.7341C4.51963 18.8463 4.6562 18.0798 4.9087 17.4479C2.01798 18.9143 0.0369873 21.9133 0.0369873 25.3766C0.0369873 29.8023 3.27047 30.0188 7.50328 30.0188C7.9653 30.0188 8.43831 30.0161 8.92165 30.0161H18.0711C18.5538 30.0161 19.0268 30.0188 19.4889 30.0188C23.7223 30.0188 26.9571 29.8023 26.9571 25.3766C26.9568 21.8766 24.9335 18.8513 21.9935 17.4026Z",fill:"currentColor"}),f.createElement("path",{d:"M13.4996 17.691C17.5915 17.691 20.9082 11.5382 20.9082 7.44661C20.9082 3.3557 17.5915 0.0389404 13.4996 0.0389404C9.40831 0.0389404 6.09155 3.3557 6.09155 7.44661C6.09155 11.5382 9.40831 17.691 13.4996 17.691Z",fill:"currentColor"}),f.createElement("path",{d:"M21.9981 22.9062C22.55 22.9062 22.9974 22.4588 22.9974 21.9069C22.9974 21.355 22.55 20.9076 21.9981 20.9076C21.4462 20.9076 20.9988 21.355 20.9988 21.9069C20.9988 22.4588 21.4462 22.9062 21.9981 22.9062Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:27,height:30.0578,fill:"white"})))),o$=f.forwardRef(l$),c$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:31,viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M15.1456 8.172C11.1049 8.172 7.8176 11.4593 7.8176 15.5C7.8176 19.5407 11.1049 22.8281 15.1456 22.8281C19.1863 22.8281 22.4737 19.5407 22.4737 15.5C22.4737 11.4593 19.1863 8.172 15.1456 8.172ZM14.1122 18.917L11.2788 16.0836L12.5217 14.8406L14.1123 16.4311L17.8389 12.7046L19.0818 13.9475L14.1122 18.917Z",fill:"currentColor"}),f.createElement("path",{d:"M30.1456 17.9258V13.0742L27.1493 12.2039C26.8752 11.2063 26.4774 10.249 25.9619 9.34689L27.4674 6.60869L24.0369 3.17814L21.2987 4.68371C20.3966 4.16826 19.4394 3.77047 18.4416 3.49631L17.5714 0.5H12.7198L11.8495 3.49631C10.8518 3.77041 9.89452 4.16826 8.99241 4.68371L6.25426 3.17814L2.82372 6.60869L4.32922 9.34689C3.81377 10.249 3.41592 11.2063 3.14182 12.2039L0.14563 13.0742V17.9258L3.14194 18.7961C3.41604 19.7937 3.81389 20.751 4.32934 21.6531L2.82383 24.3913L6.25438 27.8219L8.99252 26.3163C9.89463 26.8317 10.8519 27.2295 11.8496 27.5037L12.7199 30.5H17.5714L18.4418 27.5037C19.4394 27.2296 20.3967 26.8317 21.2989 26.3163L24.037 27.8219L27.4675 24.3913L25.962 21.6531C26.4775 20.751 26.8753 19.7937 27.1494 18.7961L30.1456 17.9258ZM15.1456 24.5858C10.1357 24.5858 6.05979 20.5099 6.05979 15.5C6.05979 10.4901 10.1357 6.41416 15.1456 6.41416C20.1556 6.41416 24.2315 10.4901 24.2315 15.5C24.2315 20.5099 20.1556 24.5858 15.1456 24.5858Z",fill:"currentColor"})),d$=f.forwardRef(c$),m$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:23,height:30,viewBox:"0 0 23 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M6.37115 5.625H16.5872L18.792 3.895C19.5427 3.3075 19.8231 2.35375 19.5057 1.46375C19.1884 0.57375 18.3638 0 17.4054 0H5.55295C4.59455 0 3.76998 0.575 3.45264 1.46375C3.1353 2.3525 3.41568 3.3075 4.16506 3.89375L6.37115 5.625Z",fill:"currentColor"}),f.createElement("path",{d:"M16.7618 7.5H6.19653C2.71598 10.8512 0.0090332 16.7312 0.0090332 21.5625C0.0090332 25.7612 2.27502 30 7.33717 30H15.9398C20.264 30 22.9493 26.7663 22.9493 21.5625C22.9493 16.7312 20.2423 10.8512 16.7618 7.5ZM10.9949 17.8125H11.9635C13.4533 17.8125 14.6653 19.0013 14.6653 20.4625C14.6653 21.7763 13.6993 22.8575 12.435 23.0775V24.0613C12.435 24.5788 12.0068 24.9988 11.4792 24.9988C10.9515 24.9988 10.5233 24.5788 10.5233 24.0613V23.125H9.24886C8.72123 23.125 8.29302 22.705 8.29302 22.1875C8.29302 21.67 8.72123 21.25 9.24886 21.25H11.9635C12.3993 21.25 12.7536 20.9025 12.7536 20.475C12.7536 20.035 12.3993 19.6875 11.9635 19.6875H10.9949C9.50503 19.6875 8.29302 18.4987 8.29302 17.0375C8.29302 15.7238 9.25906 14.6425 10.5233 14.4225V13.4375C10.5233 12.92 10.9515 12.5 11.4792 12.5C12.0068 12.5 12.435 12.92 12.435 13.4375V14.375H13.7095C14.2371 14.375 14.6653 14.795 14.6653 15.3125C14.6653 15.83 14.2371 16.25 13.7095 16.25H10.9949C10.559 16.25 10.2047 16.5975 10.2047 17.025C10.2047 17.465 10.559 17.8125 10.9949 17.8125Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:23,height:30,fill:"white"})))),u$=f.forwardRef(m$),h$=({component:t,title:e,iconKey:n,color:s="primary",useHook:a=!0,onDataLoaded:r=null,dateFilter:o=null,isFiltering:c=!1,isCurrency:d=!1,capability:m,linkTo:u=null,iconPosition:p="top",...h})=>{const{hasCapability:g}=ht();if(m&&!g(m))return null;const[x,v]=f.useState("--"),[y,b]=f.useState("--"),[j,k]=f.useState(!1),[S,N]=f.useState(null),_=He.useMemo(()=>{const K=["stats",t];return o?.start_date&&o?.end_date&&K.push(o.start_date,o.end_date),K},[t,o]),{data:w,isLoading:T,error:A,refetch:M}=Q6(t,{enabled:a&&!!t,params:o,queryKey:_}),E=K=>{let ne=0,Y=null;K?.json?.data?.count!==void 0?ne=K.json.data.count:K?.data?.count!==void 0?ne=K.data.count:K?.count!==void 0&&(ne=K.count),K?.json?.data?.formatted_count!==void 0?Y=K.json.data.formatted_count:K?.data?.formatted_count!==void 0?Y=K.data.formatted_count:K?.formatted_count!==void 0&&(Y=K.formatted_count);const fe=Y||(isNaN(ne)?ne:Number(ne).toLocaleString());let le=fe;if(d&&!isNaN(ne)&&Number(ne)>1e3){const W=Number(ne);let z;W>=1e6?z=(W/1e6).toFixed(1)+"M":z=(W/1e3).toFixed(1)+"k",z=z.replace(".0",""),Y?le=Y.replace(/[\d,.]+/,z):le=z}return{displayCount:le,fullDisplay:fe}};f.useEffect(()=>{if(w&&a)try{const{displayCount:K,fullDisplay:ne}=E(w);v(K),b(ne),r&&typeof r=="function"&&r(w,null,t)}catch(K){N(K)}},[w,t,a,r,d]),f.useEffect(()=>{A&&a&&(N(A),r&&typeof r=="function"&&r(null,A,t))},[A,t,a,r]),f.useEffect(()=>{!a&&t&&(k(!0),N(null),C0(t,(K,ne)=>{if(k(!1),ne)N(ne),v("--"),b("--");else{const{displayCount:Y,fullDisplay:fe}=E(K);v(Y),b(fe)}r&&typeof r=="function"&&r(K,ne,t)},o))},[t,a,r,o]);const P=a?T:j,D=a?A:S,O={appointment:n$,patient:s$,clinic:r$,doctor:o$,service:d$,revenue:u$},F=()=>{const K=O[n];return K?i.jsx(K,{className:"icon-svg",style:{width:"30px",height:"30px"},"aria-label":`${e} icon`}):i.jsx("div",{className:`text-center rounded-circle p-3 bg-${s}-subtle mb-3`,children:i.jsx("i",{className:`${n} fs-4 align-middle`})})},q=()=>i.jsx("div",{className:p==="right"?"text-start":"text-center",children:P?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"skeleton-element mb-2 mb-md-3 mx-auto",style:{width:"80px",height:"2rem"}}),i.jsx("div",{className:"skeleton-element mx-auto",style:{width:"140px",height:"1rem"}})]}):D?i.jsxs("div",{className:"text-danger mb-3",children:[l("Error","kivicare-clinic-management-system"),i.jsx("button",{className:"btn btn-link btn-sm text-decoration-none ms-2",onClick:()=>{a?M():t&&(k(!0),N(null),C0(t,(K,ne)=>{if(k(!1),ne)N(ne),v("--"),b("--");else{const{displayCount:Y,fullDisplay:fe}=E(K);v(Y),b(fe)}r&&r(K,ne,t)}))},children:l("Retry","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[d&&x!==y?i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:`tooltip-${t}`,children:y}),children:i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-2 mb-md-3 fw-bold",children:x})}):i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-0 fw-bold",children:x}),i.jsx("p",{className:"text-body line-clamp-1 fw-medium mb-0",children:e})]})}),U=i.jsx("div",{className:`card-body  ${p==="right"?"p-4":""}`,children:i.jsxs("div",{className:`d-flex ${p==="right"?"align-items-center justify-content-between gap-lg-3 gap-2":"align-items-center justify-content-center flex-column"}`,children:[p==="right"&&q(),i.jsx("div",{className:`card-icon ${p==="right"?"mb-0":""}`,children:F()}),p!=="right"&&q()]})});return i.jsx("div",{className:`card card-block card-stretch card-height overflow-hidden ${u?"cursor-pointer":""}`,children:u?i.jsx(gt,{to:u,className:"text-decoration-none text-reset",children:U}):U})},S0=({title:t,items:e=[],renderItem:n,viewAllLink:s="appointments",loading:a=!1,emptyMessage:r=l("No items to display","kivicare-clinic-management-system")})=>i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx("h6",{className:"card-title mb-0",children:t}),s==="appointments"&&i.jsx(gt,{to:"/appointments",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")}),s==="doctors"&&i.jsx(gt,{to:"/doctor",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"card-body pt-0",children:i.jsx("div",{className:"upcoming-appointments","data-scrollbar":"true",children:i.jsx("div",{className:"scroll-content",children:a?i.jsx("ul",{className:"list-inline p-0 m-0",children:Array.from({length:3}).map((o,c)=>i.jsx("li",{className:"items-list",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"2.5rem",height:"2.5rem"}}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"skeleton-element mb-2",style:{width:"140px",height:"1rem"}}),i.jsx("div",{className:"skeleton-element",style:{width:"100px",height:"0.875rem"}})]})]})})},`skeleton-${c}`))}):e.length>0?i.jsx("ul",{id:"upcoming-appointments",className:"list-inline p-0 m-0",children:e.map((o,c)=>i.jsx("li",{className:"items-list",children:n(o)},c))}):i.jsx("div",{className:"d-flex align-items-center justify-content-center p-3",style:{minHeight:"19rem"},children:i.jsx("p",{className:"text-muted mb-0",children:r})})})})})]});function Ym(t){return t+.5|0}const Vr=(t,e,n)=>Math.max(Math.min(t,n),e);function $d(t){return Vr(Ym(t*2.55),0,255)}function nl(t){return Vr(Ym(t*255),0,255)}function ir(t){return Vr(Ym(t/2.55)/100,0,1)}function _0(t){return Vr(Ym(t*100),0,100)}const Ts={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Kx=[..."0123456789ABCDEF"],p$=t=>Kx[t&15],g$=t=>Kx[(t&240)>>4]+Kx[t&15],zu=t=>(t&240)>>4===(t&15),f$=t=>zu(t.r)&&zu(t.g)&&zu(t.b)&&zu(t.a);function v$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ts[t[1]]*17,g:255&Ts[t[2]]*17,b:255&Ts[t[3]]*17,a:e===5?Ts[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ts[t[1]]<<4|Ts[t[2]],g:Ts[t[3]]<<4|Ts[t[4]],b:Ts[t[5]]<<4|Ts[t[6]],a:e===9?Ts[t[7]]<<4|Ts[t[8]]:255})),n}const x$=(t,e)=>t<255?e(t):"";function y$(t){var e=f$(t)?p$:g$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+x$(t.a,e):void 0}const b$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function O2(t,e,n){const s=e*Math.min(n,1-n),a=(r,o=(r+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function w$(t,e,n){const s=(a,r=(a+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function k$(t,e,n){const s=O2(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function j$(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function Zb(t){const n=t.r/255,s=t.g/255,a=t.b/255,r=Math.max(n,s,a),o=Math.min(n,s,a),c=(r+o)/2;let d,m,u;return r!==o&&(u=r-o,m=c>.5?u/(2-r-o):u/(r+o),d=j$(n,s,a,u,r),d=d*60+.5),[d|0,m||0,c]}function Xb(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(nl)}function Jb(t,e,n){return Xb(O2,t,e,n)}function N$(t,e,n){return Xb(k$,t,e,n)}function C$(t,e,n){return Xb(w$,t,e,n)}function L2(t){return(t%360+360)%360}function S$(t){const e=b$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?$d(+e[5]):nl(+e[5]));const a=L2(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=N$(a,r,o):e[1]==="hsv"?s=C$(a,r,o):s=Jb(a,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function _$(t,e){var n=Zb(t);n[0]=L2(n[0]+e),n=Jb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function E$(t){if(!t)return;const e=Zb(t),n=e[0],s=_0(e[1]),a=_0(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${ir(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const E0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function T$(){const t={},e=Object.keys(T0),n=Object.keys(E0);let s,a,r,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],a=0;a<n.length;a++)r=n[a],c=c.replace(r,E0[r]);r=parseInt(T0[o],16),t[c]=[r>>16&255,r>>8&255,r&255]}return t}let Vu;function A$(t){Vu||(Vu=T$(),Vu.transparent=[0,0,0,0]);const e=Vu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const D$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R$(t){const e=D$.exec(t);let n=255,s,a,r;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?$d(o):Vr(o*255,0,255)}return s=+e[1],a=+e[3],r=+e[5],s=255&(e[2]?$d(s):Vr(s,0,255)),a=255&(e[4]?$d(a):Vr(a,0,255)),r=255&(e[6]?$d(r):Vr(r,0,255)),{r:s,g:a,b:r,a:n}}}function P$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ir(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const dv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ko=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function M$(t,e,n){const s=Ko(ir(t.r)),a=Ko(ir(t.g)),r=Ko(ir(t.b));return{r:nl(dv(s+n*(Ko(ir(e.r))-s))),g:nl(dv(a+n*(Ko(ir(e.g))-a))),b:nl(dv(r+n*(Ko(ir(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Uu(t,e,n){if(t){let s=Zb(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Jb(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function F2(t,e){return t&&Object.assign(e||{},t)}function A0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=nl(t[3]))):(e=F2(t,{r:0,g:0,b:0,a:1}),e.a=nl(e.a)),e}function I$(t){return t.charAt(0)==="r"?R$(t):S$(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let s;n==="object"?s=A0(e):n==="string"&&(s=v$(e)||A$(e)||I$(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=F2(this._rgb);return e&&(e.a=ir(e.a)),e}set rgb(e){this._rgb=A0(e)}rgbString(){return this._valid?P$(this._rgb):void 0}hexString(){return this._valid?y$(this._rgb):void 0}hslString(){return this._valid?E$(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let r;const o=n===r?.5:n,c=2*o-1,d=s.a-a.a,m=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;r=1-m,s.r=255&m*s.r+r*a.r+.5,s.g=255&m*s.g+r*a.g+.5,s.b=255&m*s.b+r*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=M$(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=nl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ym(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uu(this._rgb,2,e),this}darken(e){return Uu(this._rgb,2,-e),this}saturate(e){return Uu(this._rgb,1,e),this}desaturate(e){return Uu(this._rgb,1,-e),this}rotate(e){return _$(this._rgb,e),this}}function Za(){}const O$=(()=>{let t=0;return()=>t++})();function _n(t){return t==null}function ci(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function an(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Us(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function xa(t,e){return Us(t)?t:e}function sn(t,e){return typeof t>"u"?e:t}const L$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,$2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ln(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function jn(t,e,n,s){let a,r,o;if(ci(t))for(r=t.length,a=0;a<r;a++)e.call(n,t[a],a);else if(an(t))for(o=Object.keys(t),r=o.length,a=0;a<r;a++)e.call(n,t[o[a]],o[a])}function fp(t,e){let n,s,a,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],r=e[n],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function vp(t){if(ci(t))return t.map(vp);if(an(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=vp(t[n[a]]);return e}return t}function B2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function F$(t,e,n,s){if(!B2(t))return;const a=e[t],r=n[t];an(a)&&an(r)?wm(a,r,s):e[t]=vp(r)}function wm(t,e,n){const s=ci(e)?e:[e],a=s.length;if(!an(t))return t;n=n||{};const r=n.merger||F$;let o;for(let c=0;c<a;++c){if(o=s[c],!an(o))continue;const d=Object.keys(o);for(let m=0,u=d.length;m<u;++m)r(d[m],t,o,n)}return t}function em(t,e){return wm(t,e,{merger:$$})}function $$(t,e,n){if(!B2(t))return;const s=e[t],a=n[t];an(s)&&an(a)?em(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=vp(a))}const D0={"":t=>t,x:t=>t.x,y:t=>t.y};function B$(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function q$(t){const e=B$(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function io(t,e){return(D0[e]||(D0[e]=q$(e)))(t)}function ew(t){return t.charAt(0).toUpperCase()+t.slice(1)}const km=t=>typeof t<"u",cl=t=>typeof t=="function",R0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function H$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Sn=Math.PI,ni=2*Sn,xp=Number.POSITIVE_INFINITY,z$=Sn/180,di=Sn/2,Tl=Sn/4,P0=Sn*2/3,q2=Math.log10,il=Math.sign;function Ih(t,e,n){return Math.abs(t-e)<n}function M0(t){const e=Math.round(t);t=Ih(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(q2(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function V$(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,r)=>a-r).pop(),e}function U$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function yp(t){return!U$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function W$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function K$(t,e,n){let s,a,r;for(s=0,a=t.length;s<a;s++)r=t[s][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function ar(t){return t*(Sn/180)}function G$(t){return t*(180/Sn)}function I0(t){if(!Us(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function H2(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Sn&&(r+=ni),{angle:r,distance:a}}function Y$(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wa(t){return(t%ni+ni)%ni}function bp(t,e,n,s){const a=wa(t),r=wa(e),o=wa(n),c=wa(r-a),d=wa(o-a),m=wa(a-r),u=wa(a-o);return a===r||a===o||s&&r===o||c>d&&m<u}function es(t,e,n){return Math.max(e,Math.min(n,t))}function Q$(t){return es(t,-32768,32767)}function Bl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function tw(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,a=0,r;for(;s-a>1;)r=a+s>>1,n(r)?a=r:s=r;return{lo:a,hi:s}}const Gx=(t,e,n,s)=>tw(t,n,s?a=>{const r=t[a][e];return r<n||r===n&&t[a+1][e]===n}:a=>t[a][e]<n),Z$=(t,e,n)=>tw(t,n,s=>t[s][e]>=n);function X$(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const z2=["push","pop","shift","splice","unshift"];function J$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),z2.forEach(n=>{const s="_onData"+ew(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=a.apply(this,r);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...r)}),o}})})}function O0(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(z2.forEach(r=>{delete t[r]}),delete t._chartjs)}function V2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const U2=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function W2(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,U2.call(window,()=>{s=!1,t.apply(e,n)}))}}function eB(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const nw=t=>t==="start"?"left":t==="end"?"right":"center",_i=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,tB=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Wu=t=>t===0||t===1,L0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ni/n)),F0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ni/n)+1,tm={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*di)+1,easeOutSine:t=>Math.sin(t*di),easeInOutSine:t=>-.5*(Math.cos(Sn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Wu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Wu(t)?t:L0(t,.075,.3),easeOutElastic:t=>Wu(t)?t:F0(t,.075,.3),easeInOutElastic(t){return Wu(t)?t:t<.5?.5*L0(t*2,.1125,.45):.5+.5*F0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tm.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tm.easeInBounce(t*2)*.5:tm.easeOutBounce(t*2-1)*.5+.5};function K2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $0(t){return K2(t)?t:new bm(t)}function mv(t){return K2(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const nB=["x","y","borderWidth","radius","tension"],iB=["color","borderColor","backgroundColor"];function sB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iB},numbers:{type:"number",properties:nB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function aB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const B0=new Map;function rB(t,e){e=e||{};const n=t+JSON.stringify(e);let s=B0.get(n);return s||(s=new Intl.NumberFormat(t,e),B0.set(n,s)),s}function iw(t,e,n){return rB(e,n).format(t)}const lB={values(t){return ci(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,r=t;if(n.length>1){const m=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),r=oB(t,n)}const o=q2(Math.abs(r)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),iw(t,s,d)}};function oB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var G2={formatters:lB};function cB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:G2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const so=Object.create(null),Yx=Object.create(null);function nm(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const r=n[s];t=t[r]||(t[r]=Object.create(null))}return t}function uv(t,e,n){return typeof e=="string"?wm(nm(t,e),n):wm(nm(t,""),e)}class dB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>mv(a.backgroundColor),this.hoverBorderColor=(s,a)=>mv(a.borderColor),this.hoverColor=(s,a)=>mv(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return uv(this,e,n)}get(e){return nm(this,e)}describe(e,n){return uv(Yx,e,n)}override(e,n){return uv(so,e,n)}route(e,n,s,a){const r=nm(this,e),o=nm(this,s),c="_"+n;Object.defineProperties(r,{[c]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[c],m=o[a];return an(d)?Object.assign({},m,d):sn(d,m)},set(d){this[c]=d}}})}apply(e){e.forEach(n=>n(this))}}var Xn=new dB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sB,aB,cB]);function mB(t){return!t||_n(t.size)||_n(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function q0(t,e,n,s,a){let r=e[a];return r||(r=e[a]=t.measureText(a).width,n.push(a)),r>s&&(s=r),s}function Al(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function H0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function z0(t,e,n,s){Y2(t,e,n,s,null)}function Y2(t,e,n,s,a){let r,o,c,d,m,u,p,h;const g=e.pointStyle,x=e.rotation,v=e.radius;let y=(x||0)*z$;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:a?t.ellipse(n,s,a/2,v,0,0,ni):t.arc(n,s,v,0,ni),t.closePath();break;case"triangle":u=a?a/2:v,t.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*v),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*v),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*v),t.closePath();break;case"rectRounded":m=v*.516,d=v-m,o=Math.cos(y+Tl)*d,p=Math.cos(y+Tl)*(a?a/2-m:d),c=Math.sin(y+Tl)*d,h=Math.sin(y+Tl)*(a?a/2-m:d),t.arc(n-p,s-c,m,y-Sn,y-di),t.arc(n+h,s-o,m,y-di,y),t.arc(n+p,s+c,m,y,y+di),t.arc(n-h,s+o,m,y+di,y+Sn),t.closePath();break;case"rect":if(!x){d=Math.SQRT1_2*v,u=a?a/2:d,t.rect(n-u,s-d,2*u,2*d);break}y+=Tl;case"rectRot":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+h,s-o),t.lineTo(n+p,s+c),t.lineTo(n-h,s+o),t.closePath();break;case"crossRot":y+=Tl;case"cross":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"star":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o),y+=Tl,p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"line":o=a?a/2:Math.cos(y)*v,c=Math.sin(y)*v,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(a?a/2:v),s+Math.sin(y)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Q2(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function sw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function aw(t){t.restore()}function uB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_n(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function hB(t,e,n,s,a){if(a.strikethrough||a.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,c=e+r.actualBoundingBoxRight,d=n-r.actualBoundingBoxAscent,m=n+r.actualBoundingBoxDescent,u=a.strikethrough?(d+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,u),t.lineTo(c,u),t.stroke()}}function pB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jm(t,e,n,s,a,r={}){const o=ci(e)?e:[e],c=r.strokeWidth>0&&r.strokeColor!=="";let d,m;for(t.save(),t.font=a.string,uB(t,r),d=0;d<o.length;++d)m=o[d],r.backdrop&&pB(t,r.backdrop),c&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),_n(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(m,n,s,r.maxWidth)),t.fillText(m,n,s,r.maxWidth),hB(t,n,s,m,r),s+=Number(a.lineHeight);t.restore()}function wp(t,e){const{x:n,y:s,w:a,h:r,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Sn,Sn,!0),t.lineTo(n,s+r-o.bottomLeft),t.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Sn,di,!0),t.lineTo(n+a-o.bottomRight,s+r),t.arc(n+a-o.bottomRight,s+r-o.bottomRight,o.bottomRight,di,0,!0),t.lineTo(n+a,s+o.topRight),t.arc(n+a-o.topRight,s+o.topRight,o.topRight,0,-di,!0),t.lineTo(n+o.topLeft,s)}const gB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vB(t,e){const n=(""+t).match(gB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const xB=t=>+t||0;function rw(t,e){const n={},s=an(e),a=s?Object.keys(e):e,r=an(t)?s?o=>sn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)n[o]=xB(r(o));return n}function Z2(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pc(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ws(t){const e=Z2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Pi(t,e){t=t||{},e=e||Xn.font;let n=sn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=sn(t.style,e.style);s&&!(""+s).match(fB)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:sn(t.family,e.family),lineHeight:vB(sn(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:sn(t.weight,e.weight),string:""};return a.string=mB(a),a}function Ku(t,e,n,s){let a,r,o;for(a=0,r=t.length;a<r;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function yB(t,e,n){const{min:s,max:a}=t,r=$2(e,(a-s)/2),o=(c,d)=>n&&c===0?0:c+d;return{min:o(s,-Math.abs(r)),max:o(a,r)}}function Qc(t,e){return Object.assign(Object.create(t),e)}function lw(t,e=[""],n,s,a=()=>t[0]){const r=n||t;typeof s>"u"&&(s=tT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:a,override:c=>lw([c,...t],e,r,s)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete t[0][d],!0},get(c,d){return J2(c,d,()=>_B(d,e,t,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,d){return U0(c).includes(d)},ownKeys(c){return U0(c)},set(c,d,m){const u=c._storage||(c._storage=a());return c[d]=u[d]=m,delete c._keys,!0}})}function Pc(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:X2(t,s),setContext:r=>Pc(t,r,n,s),override:r=>Pc(t.override(r),e,n,s)};return new Proxy(a,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,c){return J2(r,o,()=>wB(r,o,c))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,c){return t[o]=c,delete r[o],!0}})}function X2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:cl(n)?n:()=>n,isIndexable:cl(s)?s:()=>s}}const bB=(t,e)=>t?t+ew(e):e,ow=(t,e)=>an(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function J2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function wB(t,e,n){const{_proxy:s,_context:a,_subProxy:r,_descriptors:o}=t;let c=s[e];return cl(c)&&o.isScriptable(e)&&(c=kB(e,c,t,n)),ci(c)&&c.length&&(c=jB(e,c,t,o.isIndexable)),ow(e,c)&&(c=Pc(c,a,r&&r[e],o)),c}function kB(t,e,n,s){const{_proxy:a,_context:r,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let d=e(r,o||s);return c.delete(t),ow(t,d)&&(d=cw(a._scopes,a,t,d)),d}function jB(t,e,n,s){const{_proxy:a,_context:r,_subProxy:o,_descriptors:c}=n;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(an(e[0])){const d=e,m=a._scopes.filter(u=>u!==d);e=[];for(const u of d){const p=cw(m,a,t,u);e.push(Pc(p,r,o&&o[t],c))}}return e}function eT(t,e,n){return cl(t)?t(e,n):t}const NB=(t,e)=>t===!0?e:typeof t=="string"?io(e,t):void 0;function CB(t,e,n,s,a){for(const r of e){const o=NB(n,r);if(o){t.add(o);const c=eT(o._fallback,n,a);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function cw(t,e,n,s){const a=e._rootScopes,r=eT(e._fallback,n,s),o=[...t,...a],c=new Set;c.add(s);let d=V0(c,o,n,r||n,s);return d===null||typeof r<"u"&&r!==n&&(d=V0(c,o,r,d,s),d===null)?!1:lw(Array.from(c),[""],a,r,()=>SB(e,n,s))}function V0(t,e,n,s,a){for(;n;)n=CB(t,e,n,s,a);return n}function SB(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return ci(a)&&an(n)?n:a||{}}function _B(t,e,n,s){let a;for(const r of e)if(a=tT(bB(r,t),n),typeof a<"u")return ow(t,a)?cw(n,s,t,a):a}function tT(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function U0(t){let e=t._keys;return e||(e=t._keys=EB(t._scopes)),e}function EB(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function dw(){return typeof window<"u"&&typeof document<"u"}function mw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kp(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Pg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function TB(t,e){return Pg(t).getPropertyValue(e)}const AB=["top","right","bottom","left"];function Wl(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const r=AB[a];s[r]=parseFloat(t[e+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const DB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function RB(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:r}=s;let o=!1,c,d;if(DB(a,r,t.target))c=a,d=r;else{const m=e.getBoundingClientRect();c=s.clientX-m.left,d=s.clientY-m.top,o=!0}return{x:c,y:d,box:o}}function Ml(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Pg(n),r=a.boxSizing==="border-box",o=Wl(a,"padding"),c=Wl(a,"border","width"),{x:d,y:m,box:u}=RB(t,n),p=o.left+(u&&c.left),h=o.top+(u&&c.top);let{width:g,height:x}=e;return r&&(g-=o.width+c.width,x-=o.height+c.height),{x:Math.round((d-p)/g*n.width/s),y:Math.round((m-h)/x*n.height/s)}}function PB(t,e,n){let s,a;if(e===void 0||n===void 0){const r=t&&mw(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),c=Pg(r),d=Wl(c,"border","width"),m=Wl(c,"padding");e=o.width-m.width-d.width,n=o.height-m.height-d.height,s=kp(c.maxWidth,r,"clientWidth"),a=kp(c.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:s||xp,maxHeight:a||xp}}const Ur=t=>Math.round(t*10)/10;function MB(t,e,n,s){const a=Pg(t),r=Wl(a,"margin"),o=kp(a.maxWidth,t,"clientWidth")||xp,c=kp(a.maxHeight,t,"clientHeight")||xp,d=PB(t,e,n);let{width:m,height:u}=d;if(a.boxSizing==="content-box"){const h=Wl(a,"border","width"),g=Wl(a,"padding");m-=g.width+h.width,u-=g.height+h.height}return m=Math.max(0,m-r.width),u=Math.max(0,s?m/s:u-r.height),m=Ur(Math.min(m,o,d.maxWidth)),u=Ur(Math.min(u,c,d.maxHeight)),m&&!u&&(u=Ur(m/2)),(e!==void 0||n!==void 0)&&s&&d.height&&u>d.height&&(u=d.height,m=Ur(Math.floor(u*s))),{width:m,height:u}}function W0(t,e,n){const s=e||1,a=Ur(t.height*s),r=Ur(t.width*s);t.height=Ur(t.height),t.width=Ur(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==a||o.width!==r?(t.currentDevicePixelRatio=s,o.height=a,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const IB=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function K0(t,e){const n=TB(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const OB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},LB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function gc(t,e,n){return t?OB(e,n):LB()}function nT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function iT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Gu(t,e,n){return t.options.clip?t[n]:e[n]}function FB(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Gu(n,e,"left"),right:Gu(n,e,"right"),top:Gu(s,e,"top"),bottom:Gu(s,e,"bottom")}:e}function $B(t,e){const n=e._clip;if(n.disabled)return!1;const s=FB(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class BB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const r=n.listeners[a],o=n.duration;r.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=U2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,c=!1,d;for(;o>=0;--o)d=r[o],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),c=!0):(r[o]=r[r.length-1],r.pop());c&&(a.draw(),this._notify(a,s,e,"progress")),r.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var er=new BB;const G0="transparent",qB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=$0(t||G0),a=s.valid&&$0(e||G0);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class HB{constructor(e,n,s,a){const r=n[s];a=Ku([e.to,a,r,e.from]);const o=Ku([e.from,r,a]);this._active=!0,this._fn=e.fn||qB[e.type||typeof o],this._easing=tm[e.easing]||tm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ku([e.to,n,a,e.from]),this._from=Ku([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,r=this._from,o=this._loop,c=this._to;let d;if(this._active=r!==c&&(o||n<s),!this._active){this._target[a]=c,this._notify(!0);return}if(n<0){this._target[a]=r;return}d=n/s%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(r,c,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class sT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!an(e))return;const n=Object.keys(Xn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const r=e[a];if(!an(r))return;const o={};for(const c of n)o[c]=r[c];(ci(r.properties)&&r.properties||[a]).forEach(c=>{(c===a||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,a=VB(e,s);if(!a)return[];const r=this._createAnimations(a,s);return s.$shared&&zB(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,n){const s=this._properties,a=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const m=o[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(e,n));continue}const u=n[m];let p=r[m];const h=s.get(m);if(p)if(h&&p.active()){p.update(h,u,c);continue}else p.cancel();if(!h||!h.duration){e[m]=u;continue}r[m]=p=new HB(h,e,m,u),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return er.add(this._chart,s),!0}}function zB(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const r=t[s[a]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function VB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Y0(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:s?r:a,end:s?a:r}}function UB(t,e,n){if(n===!1)return!1;const s=Y0(t,n),a=Y0(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function WB(t){let e,n,s,a;return an(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function aT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,r;for(a=0,r=s.length;a<r;++a)n.push(s[a].index);return n}function Q0(t,e,n,s={}){const a=t.keys,r=s.mode==="single";let o,c,d,m;if(e===null)return;let u=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===n){if(u=!0,s.all)continue;break}m=t.values[d],Us(m)&&(r||e===0||il(e)===il(m))&&(e+=m)}return!u&&!s.all?0:e}function KB(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let d,m,u;for(d=0,m=o.length;d<m;++d)u=o[d],c[d]={[a]:u,[r]:t[u]};return c}function hv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function GB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function YB(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function QB(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Z0(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const r=t[a.index];if(n&&r>0||!n&&r<0)return a.index}return null}function X0(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:c}=s,d=r.axis,m=o.axis,u=GB(r,o,s),p=e.length;let h;for(let g=0;g<p;++g){const x=e[g],{[d]:v,[m]:y}=x,b=x._stacks||(x._stacks={});h=b[m]=QB(a,u,v),h[c]=y,h._top=Z0(h,o,!0,s.type),h._bottom=Z0(h,o,!1,s.type);const j=h._visualValues||(h._visualValues={});j[c]=y}}function pv(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function ZB(t,e){return Qc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function XB(t,e,n){return Qc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function jd(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const r=a._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const gv=t=>t==="reset"||t==="none",J0=(t,e)=>e?t:Object.assign({},t),JB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:aT(n,!0),values:null};class uw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&jd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(p,h,g,x)=>p==="x"?h:p==="r"?x:g,r=n.xAxisID=sn(s.xAxisID,pv(e,"x")),o=n.yAxisID=sn(s.yAxisID,pv(e,"y")),c=n.rAxisID=sn(s.rAxisID,pv(e,"r")),d=n.indexAxis,m=n.iAxisID=a(d,r,o,c),u=n.vAxisID=a(d,o,r,c);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(m),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&O0(this._data,this),e._stacked&&jd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(an(n)){const a=this._cachedMeta;this._data=KB(n,a)}else if(s!==n){if(s){O0(s,this);const a=this._cachedMeta;jd(a),a._parsed=[]}n&&Object.isExtensible(n)&&J$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const r=n._stacked;n._stacked=hv(n.vScale,n),n.stack!==s.stack&&(a=!0,jd(n),n.stack=s.stack),this._resyncElements(e),(a||r!==n._stacked)&&(X0(this,n._parsed),n._stacked=hv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:r,_stacked:o}=s,c=r.axis;let d=e===0&&n===a.length?!0:s._sorted,m=e>0&&s._parsed[e-1],u,p,h;if(this._parsing===!1)s._parsed=a,s._sorted=!0,h=a;else{ci(a[e])?h=this.parseArrayData(s,a,e,n):an(a[e])?h=this.parseObjectData(s,a,e,n):h=this.parsePrimitiveData(s,a,e,n);const g=()=>p[c]===null||m&&p[c]<m[c];for(u=0;u<n;++u)s._parsed[u+e]=p=h[u],d&&(g()&&(d=!1),m=p);s._sorted=d}o&&X0(this,h)}parsePrimitiveData(e,n,s,a){const{iScale:r,vScale:o}=e,c=r.axis,d=o.axis,m=r.getLabels(),u=r===o,p=new Array(a);let h,g,x;for(h=0,g=a;h<g;++h)x=h+s,p[h]={[c]:u||r.parse(m[x],x),[d]:o.parse(n[x],x)};return p}parseArrayData(e,n,s,a){const{xScale:r,yScale:o}=e,c=new Array(a);let d,m,u,p;for(d=0,m=a;d<m;++d)u=d+s,p=n[u],c[d]={x:r.parse(p[0],u),y:o.parse(p[1],u)};return c}parseObjectData(e,n,s,a){const{xScale:r,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let u,p,h,g;for(u=0,p=a;u<p;++u)h=u+s,g=n[h],m[u]={x:r.parse(io(g,c),h),y:o.parse(io(g,d),h)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,r=this._cachedMeta,o=n[e.axis],c={keys:aT(a,!0),values:n._stacks[e.axis]._visualValues};return Q0(c,o,r.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const r=s[n.axis];let o=r===null?NaN:r;const c=a&&s._stacks[n.axis];a&&c&&(a.values=c,o=Q0(a,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,r=s._sorted&&e===s.iScale,o=a.length,c=this._getOtherScale(e),d=JB(n,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:p}=YB(c);let h,g;function x(){g=a[h];const v=g[c.axis];return!Us(g[e.axis])||u>v||p<v}for(h=0;h<o&&!(!x()&&(this.updateRangeFromParsed(m,e,g,d),r));++h);if(r){for(h=o-1;h>=0;--h)if(!x()){this.updateRangeFromParsed(m,e,g,d);break}}return m}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,r,o;for(a=0,r=n.length;a<r;++a)o=n[a][e.axis],Us(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:a?""+a.getLabelForValue(r[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=WB(sn(this.options.clip,UB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],r=n.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,m=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,c,d),u=c;u<c+d;++u){const p=a[u];p.hidden||(p.active&&m?o.push(p):p.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=XB(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=ZB(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",r=this._cachedDataOpts,o=e+"-"+n,c=r[o],d=this.enableOptionSharing&&km(s);if(c)return J0(c,d);const m=this.chart.config,u=m.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],h=m.getOptionScopes(this.getDataset(),u),g=Object.keys(Xn.elements[e]),x=()=>this.getContext(s,a,n),v=m.resolveNamedOptions(h,g,x,p);return v.$shared&&(v.$shared=d,r[o]=Object.freeze(J0(v,d))),v}_resolveAnimations(e,n,s){const a=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,c=r[o];if(c)return c;let d;if(a.options.animation!==!1){const u=this.chart.config,p=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),p);d=u.createResolver(h,this.getContext(e,s,n))}const m=new sT(a,d&&d.animations);return d&&d._cacheable&&(r[o]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||gv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==a;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(e,n,s,a){gv(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!gv(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const r=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,d,m]of this._syncList)this[c](d,m);this._syncList=[];const a=s.length,r=n.length,o=Math.min(r,a);o&&this.parse(0,o),r>a?this._insertElements(a,r-a,e):r<a&&this._removeElements(r,a-r)}_insertElements(e,n,s=!0){const a=this._cachedMeta,r=a.data,o=e+n;let c;const d=m=>{for(m.length+=n,c=m.length-1;c>=o;c--)m[c]=m[c-n]};for(d(r),c=e;c<o;++c)r[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&jd(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function e8(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,r=n.length;a<r;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=V2(s.sort((a,r)=>a-r))}return t._cache.$bar}function t8(t){const e=t.iScale,n=e8(e,t.type);let s=e._length,a,r,o,c;const d=()=>{o===32767||o===-32768||(km(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(a=0,r=n.length;a<r;++a)o=e.getPixelForValue(n[a]),d();for(c=void 0,a=0,r=e.ticks.length;a<r;++a)o=e.getPixelForTick(a),d();return s}function n8(t,e,n,s){const a=n.barThickness;let r,o;return _n(a)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=a*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function i8(t,e,n,s){const a=e.pixels,r=a[t];let o=t>0?a[t-1]:null,c=t<a.length-1?a[t+1]:null;const d=n.categoryPercentage;o===null&&(o=r-(c===null?e.end-e.start:c-r)),c===null&&(c=r+r-o);const m=r-(r-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/s,ratio:n.barPercentage,start:m}}function s8(t,e,n,s){const a=n.parse(t[0],s),r=n.parse(t[1],s),o=Math.min(a,r),c=Math.max(a,r);let d=o,m=c;Math.abs(o)>Math.abs(c)&&(d=c,m=o),e[n.axis]=m,e._custom={barStart:d,barEnd:m,start:a,end:r,min:o,max:c}}function rT(t,e,n,s){return ci(t)?s8(t,e,n,s):e[n.axis]=n.parse(t,s),e}function eN(t,e,n,s){const a=t.iScale,r=t.vScale,o=a.getLabels(),c=a===r,d=[];let m,u,p,h;for(m=n,u=n+s;m<u;++m)h=e[m],p={},p[a.axis]=c||a.parse(o[m],m),d.push(rT(h,p,r,m));return d}function fv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function a8(t,e,n){return t!==0?il(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function r8(t){let e,n,s,a,r;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",r="start"):(a="start",r="end"),{start:n,end:s,reverse:e,top:a,bottom:r}}function l8(t,e,n,s){let a=e.borderSkipped;const r={};if(!a){t.borderSkipped=r;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:d,top:m,bottom:u}=r8(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=m:(n._bottom||0)===s?a=u:(r[tN(u,o,c,d)]=!0,a=m)),r[tN(a,o,c,d)]=!0,t.borderSkipped=r}function tN(t,e,n,s){return s?(t=o8(t,e,n),t=nN(t,n,e)):t=nN(t,e,n),t}function o8(t,e,n){return t===e?n:t===n?e:t}function nN(t,e,n){return t==="start"?e:t==="end"?n:t}function c8(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class d8 extends uw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return eN(e,n,s,a)}parseArrayData(e,n,s,a){return eN(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:r,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=r.axis==="x"?c:d,u=o.axis==="x"?c:d,p=[];let h,g,x,v;for(h=s,g=s+a;h<g;++h)v=n[h],x={},x[r.axis]=r.parse(io(v,m),h),p.push(rT(io(v,u),x,o,h));return p}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const r=s._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,r=this.getParsed(e),o=r._custom,c=fv(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(r[a.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const r=a==="reset",{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),m=c.isHorizontal(),u=this._getRuler(),{sharedOptions:p,includeOptions:h}=this._getSharedOptions(n,a);for(let g=n;g<n+s;g++){const x=this.getParsed(g),v=r||_n(x[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),b=(x._stacks||{})[c.axis],j={horizontal:m,base:v.base,enableBorderRadius:!b||fv(x._custom)||o===b._top||o===b._bottom,x:m?v.head:y.center,y:m?y.center:v.head,height:m?y.size:Math.abs(v.size),width:m?Math.abs(v.size):y.size};h&&(j.options=p||this.resolveDataElementOptions(g,e[g].active?"active":a));const k=j.options||e[g].options;l8(j,k,b,o),c8(j,k,u.ratio),this.updateElement(e[g],g,j,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),d=c&&c[s.axis],m=u=>{const p=u._parsed.find(g=>g[s.axis]===d),h=p&&p[u.vScale.axis];if(_n(h)||isNaN(h))return!0};for(const u of a)if(!(n!==void 0&&m(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[sn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),r=n!==void 0?a.indexOf(n):-1;return r===-1?a.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let r,o;for(r=0,o=n.data.length;r<o;++r)a.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const c=e.barThickness;return{min:c||t8(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:r,minBarLength:o}}=this,c=r||0,d=this.getParsed(e),m=d._custom,u=fv(m);let p=d[n.axis],h=0,g=s?this.applyStack(n,d,s):p,x,v;g!==p&&(h=g-p,g=p),u&&(p=m.barStart,g=m.barEnd-m.barStart,p!==0&&il(p)!==il(m.barEnd)&&(h=0),h+=p);const y=!_n(r)&&!u?r:h;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(h+g):x=b,v=x-b,Math.abs(v)<o){v=a8(v,n,c)*o,p===c&&(b-=v/2);const j=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),S=Math.min(j,k),N=Math.max(j,k);b=Math.max(Math.min(b,N),S),x=b+v,s&&!u&&(d._stacks[n.axis]._visualValues[a]=n.getValueForPixel(x)-n.getValueForPixel(b))}if(b===n.getPixelForValue(c)){const j=il(v)*n.getLineWidthForValue(c)/2;b+=j,v-=j}return{size:v,base:b,head:x,center:x+v/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,r=a.skipNull,o=sn(a.maxBarThickness,1/0);let c,d;const m=this._getAxisCount();if(n.grouped){const u=r?this._getStackCount(e):n.stackCount,p=a.barThickness==="flex"?i8(e,n,a,u*m):n8(e,n,a,u*m),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(sn(h,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+g;c=p.start+p.chunk*x+p.chunk/2,d=Math.min(o,p.chunk*p.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(o,n.min*n.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let r=0;for(;r<a;++r)this.getParsed(r)[n.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}function m8(t,e,n){let s=1,a=1,r=0,o=0;if(e<ni){const c=t,d=c+e,m=Math.cos(c),u=Math.sin(c),p=Math.cos(d),h=Math.sin(d),g=(k,S,N)=>bp(k,c,d,!0)?1:Math.max(S,S*n,N,N*n),x=(k,S,N)=>bp(k,c,d,!0)?-1:Math.min(S,S*n,N,N*n),v=g(0,m,p),y=g(di,u,h),b=x(Sn,m,p),j=x(Sn+di,u,h);s=(v-b)/2,a=(y-j)/2,r=-(v+b)/2,o=-(y+j)/2}return{ratioX:s,ratioY:a,offsetX:r,offsetY:o}}class u8 extends uw{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:r,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((d,m)=>{const p=e.getDatasetMeta(0).controller.getStyle(m);return{text:d,fillStyle:p.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(m),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:a,pointStyle:s,borderRadius:o&&(c||p.borderRadius),index:m}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let r=d=>+s[d];if(an(s[e])){const{key:d="value"}=this._parsing;r=m=>+io(s[m],d)}let o,c;for(o=e,c=e+n;o<c;++o)a._parsed[o]=r(o)}}_getRotation(){return ar(this.options.rotation-90)}_getCircumference(){return ar(this.options.circumference)}_getRotationExtents(){let e=ni,n=-ni;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,r=a._getRotation(),o=a._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,r=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),d=Math.min(L$(this.options.cutout,c),1),m=this._getRingWeight(this.index),{circumference:u,rotation:p}=this._getRotationExtents(),{ratioX:h,ratioY:g,offsetX:x,offsetY:v}=m8(p,u,d),y=(s.width-o)/h,b=(s.height-o)/g,j=Math.max(Math.min(y,b)/2,0),k=$2(this.options.radius,j),S=Math.max(k*d,0),N=(k-S)/this._getVisibleDatasetWeightTotal();this.offsetX=x*k,this.offsetY=v*k,a.total=this.calculateTotal(),this.outerRadius=k-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*m,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*r/ni)}updateElements(e,n,s,a){const r=a==="reset",o=this.chart,c=o.chartArea,m=o.options.animation,u=(c.left+c.right)/2,p=(c.top+c.bottom)/2,h=r&&m.animateScale,g=h?0:this.innerRadius,x=h?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(n,a);let b=this._getRotation(),j;for(j=0;j<n;++j)b+=this._circumference(j,r);for(j=n;j<n+s;++j){const k=this._circumference(j,r),S=e[j],N={x:u+this.offsetX,y:p+this.offsetY,startAngle:b,endAngle:b+k,circumference:k,outerRadius:x,innerRadius:g};y&&(N.options=v||this.resolveDataElementOptions(j,S.active?"active":a)),b+=k,this.updateElement(S,j,N,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const r=e._parsed[a];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ni*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],r=iw(n._parsed[e],s.options.locale);return{label:a[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,r,o,c,d;if(!e){for(a=0,r=s.data.datasets.length;a<r;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,c=o.controller;break}}if(!e)return 0;for(a=0,r=e.length;a<r;++a)d=c.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(sn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hw{static override(e){Object.assign(hw.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Dl()}parse(){return Dl()}format(){return Dl()}add(){return Dl()}diff(){return Dl()}startOf(){return Dl()}endOf(){return Dl()}}var h8={_date:hw};function p8(t,e,n,s){const{controller:a,data:r,_sorted:o}=t,c=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&r.length){const m=c._reversePixels?Z$:Gx;if(s){if(a._sharedOptions){const u=r[0],p=typeof u.getRange=="function"&&u.getRange(e);if(p){const h=m(r,e,n-p),g=m(r,e,n+p);return{lo:h.lo,hi:g.hi}}}}else{const u=m(r,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:h}=t,g=h.slice(0,u.lo+1).reverse().findIndex(v=>!_n(v[p.axis]));u.lo-=Math.max(0,g);const x=h.slice(u.hi).findIndex(v=>!_n(v[p.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:r.length-1}}function Mg(t,e,n,s,a){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,d=r.length;c<d;++c){const{index:m,data:u}=r[c],{lo:p,hi:h}=p8(r[c],e,o,a);for(let g=p;g<=h;++g){const x=u[g];x.skip||s(x,m,g)}}}function g8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const r=e?Math.abs(s.x-a.x):0,o=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function vv(t,e,n,s,a){const r=[];return!a&&!t.isPointInArea(e)||Mg(t,n,e,function(c,d,m){!a&&!Q2(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&r.push({element:c,datasetIndex:d,index:m})},!0),r}function f8(t,e,n,s){let a=[];function r(o,c,d){const{startAngle:m,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:p}=H2(o,{x:e.x,y:e.y});bp(p,m,u)&&a.push({element:o,datasetIndex:c,index:d})}return Mg(t,n,e,r),a}function v8(t,e,n,s,a,r){let o=[];const c=g8(n);let d=Number.POSITIVE_INFINITY;function m(u,p,h){const g=u.inRange(e.x,e.y,a);if(s&&!g)return;const x=u.getCenterPoint(a);if(!(!!r||t.isPointInArea(x))&&!g)return;const y=c(e,x);y<d?(o=[{element:u,datasetIndex:p,index:h}],d=y):y===d&&o.push({element:u,datasetIndex:p,index:h})}return Mg(t,n,e,m),o}function xv(t,e,n,s,a,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!s?f8(t,e,n,a):v8(t,e,n,s,a,r)}function iN(t,e,n,s,a){const r=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Mg(t,n,e,(d,m,u)=>{d[o]&&d[o](e[n],a)&&(r.push({element:d,datasetIndex:m,index:u}),c=c||d.inRange(e.x,e.y,a))}),s&&!c?[]:r}var x8={modes:{index(t,e,n,s){const a=Ml(e,t),r=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?vv(t,a,r,s,o):xv(t,a,r,!1,s,o),d=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const u=c[0].index,p=m.data[u];p&&!p.skip&&d.push({element:p,datasetIndex:m.index,index:u})}),d):[]},dataset(t,e,n,s){const a=Ml(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?vv(t,a,r,s,o):xv(t,a,r,!1,s,o);if(c.length>0){const d=c[0].datasetIndex,m=t.getDatasetMeta(d).data;c=[];for(let u=0;u<m.length;++u)c.push({element:m[u],datasetIndex:d,index:u})}return c},point(t,e,n,s){const a=Ml(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return vv(t,a,r,s,o)},nearest(t,e,n,s){const a=Ml(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return xv(t,a,r,n.intersect,s,o)},x(t,e,n,s){const a=Ml(e,t);return iN(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Ml(e,t);return iN(t,a,"y",n.intersect,s)}}};const lT=["left","top","right","bottom"];function Nd(t,e){return t.filter(n=>n.pos===e)}function sN(t,e){return t.filter(n=>lT.indexOf(n.pos)===-1&&n.box.axis===e)}function Cd(t,e){return t.sort((n,s)=>{const a=e?s:n,r=e?n:s;return a.weight===r.weight?a.index-r.index:a.weight-r.weight})}function y8(t){const e=[];let n,s,a,r,o,c;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:r,options:{stack:o,stackWeight:c=1}}=a,e.push({index:n,box:a,pos:r,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&r+o,stackWeight:c});return e}function b8(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:r}=n;if(!s||!lT.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function w8(t,e){const n=b8(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let r,o,c;for(r=0,o=t.length;r<o;++r){c=t[r];const{fullSize:d}=c.box,m=n[c.stack],u=m&&c.stackWeight/m.weight;c.horizontal?(c.width=u?u*s:d&&e.availableWidth,c.height=a):(c.width=s,c.height=u?u*a:d&&e.availableHeight)}return n}function k8(t){const e=y8(t),n=Cd(e.filter(m=>m.box.fullSize),!0),s=Cd(Nd(e,"left"),!0),a=Cd(Nd(e,"right")),r=Cd(Nd(e,"top"),!0),o=Cd(Nd(e,"bottom")),c=sN(e,"x"),d=sN(e,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:Nd(e,"chartArea"),vertical:s.concat(a).concat(d),horizontal:r.concat(o).concat(c)}}function aN(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function oT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function j8(t,e,n,s){const{pos:a,box:r}=n,o=t.maxPadding;if(!an(a)){n.size&&(t[a]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?r.height:r.width),n.size=p.size/p.count,t[a]+=n.size}r.getPadding&&oT(o,r.getPadding());const c=Math.max(0,e.outerWidth-aN(o,t,"left","right")),d=Math.max(0,e.outerHeight-aN(o,t,"top","bottom")),m=c!==t.w,u=d!==t.h;return t.w=c,t.h=d,n.horizontal?{same:m,other:u}:{same:u,other:m}}function N8(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function C8(t,e){const n=e.maxPadding;function s(a){const r={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return s(t?["left","right"]:["top","bottom"])}function Bd(t,e,n,s){const a=[];let r,o,c,d,m,u;for(r=0,o=t.length,m=0;r<o;++r){c=t[r],d=c.box,d.update(c.width||e.w,c.height||e.h,C8(c.horizontal,e));const{same:p,other:h}=j8(e,n,c,s);m|=p&&a.length,u=u||h,d.fullSize||a.push(c)}return m&&Bd(a,e,n,s)||u}function Yu(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function rN(t,e,n,s){const a=n.padding;let{x:r,y:o}=e;for(const c of t){const d=c.box,m=s[c.stack]||{placed:0,weight:1},u=c.stackWeight/m.weight||1;if(c.horizontal){const p=e.w*u,h=m.size||d.height;km(m.start)&&(o=m.start),d.fullSize?Yu(d,a.left,o,n.outerWidth-a.right-a.left,h):Yu(d,e.left+m.placed,o,p,h),m.start=o,m.placed+=p,o=d.bottom}else{const p=e.h*u,h=m.size||d.width;km(m.start)&&(r=m.start),d.fullSize?Yu(d,r,a.top,h,n.outerHeight-a.bottom-a.top):Yu(d,r,e.top+m.placed,h,p),m.start=r,m.placed+=p,r=d.right}}e.x=r,e.y=o}var Ls={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=Ws(t.options.layout.padding),r=Math.max(e-a.width,0),o=Math.max(n-a.height,0),c=k8(t.boxes),d=c.vertical,m=c.horizontal;jn(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=d.reduce((v,y)=>y.box.options&&y.box.options.display===!1?v:v+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},a);oT(h,Ws(s));const g=Object.assign({maxPadding:h,w:r,h:o,x:a.left,y:a.top},a),x=w8(d.concat(m),p);Bd(c.fullSize,g,p,x),Bd(d,g,p,x),Bd(m,g,p,x)&&Bd(d,g,p,x),N8(g),rN(c.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,rN(c.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},jn(c.chartArea,v=>{const y=v.box;Object.assign(y,t.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class cT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class S8 extends cT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Oh="$chartjs",_8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lN=t=>t===null||t==="";function E8(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[Oh]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",lN(a)){const r=K0(t,"width");r!==void 0&&(t.width=r)}if(lN(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=K0(t,"height");r!==void 0&&(t.height=r)}return t}const dT=IB?{passive:!0}:!1;function T8(t,e,n){t&&t.addEventListener(e,n,dT)}function A8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,dT)}function D8(t,e){const n=_8[t.type]||t.type,{x:s,y:a}=Ml(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function jp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function R8(t,e,n){const s=t.canvas,a=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||jp(c.addedNodes,s),o=o&&!jp(c.removedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function P8(t,e,n){const s=t.canvas,a=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||jp(c.removedNodes,s),o=o&&!jp(c.addedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const Nm=new Map;let oN=0;function mT(){const t=window.devicePixelRatio;t!==oN&&(oN=t,Nm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function M8(t,e){Nm.size||window.addEventListener("resize",mT),Nm.set(t,e)}function I8(t){Nm.delete(t),Nm.size||window.removeEventListener("resize",mT)}function O8(t,e,n){const s=t.canvas,a=s&&mw(s);if(!a)return;const r=W2((c,d)=>{const m=a.clientWidth;n(c,d),m<a.clientWidth&&n()},window),o=new ResizeObserver(c=>{const d=c[0],m=d.contentRect.width,u=d.contentRect.height;m===0&&u===0||r(m,u)});return o.observe(a),M8(t,r),o}function yv(t,e,n){n&&n.disconnect(),e==="resize"&&I8(t)}function L8(t,e,n){const s=t.canvas,a=W2(r=>{t.ctx!==null&&n(D8(r,t))},t);return T8(s,e,a),a}class F8 extends cT{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(E8(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Oh])return!1;const s=n[Oh].initial;["height","width"].forEach(r=>{const o=s[r];_n(o)?n.removeAttribute(r):n.setAttribute(r,o)});const a=s.style||{};return Object.keys(a).forEach(r=>{n.style[r]=a[r]}),n.width=n.width,delete n[Oh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),o={attach:R8,detach:P8,resize:O8}[n]||L8;a[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:yv,detach:yv,resize:yv}[n]||A8)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return MB(e,n,s,a)}isAttached(e){const n=e&&mw(e);return!!(n&&n.isConnected)}}function $8(t){return!dw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?S8:F8}let wo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return yp(this.x)&&yp(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(r=>{a[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),a}};function B8(t,e){const n=t.options.ticks,s=q8(t),a=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?z8(e):[],o=r.length,c=r[0],d=r[o-1],m=[];if(o>a)return V8(e,m,r,o/a),m;const u=H8(r,e,a);if(o>0){let p,h;const g=o>1?Math.round((d-c)/(o-1)):null;for(Qu(e,m,u,_n(g)?0:c-g,c),p=0,h=o-1;p<h;p++)Qu(e,m,u,r[p],r[p+1]);return Qu(e,m,u,d,_n(g)?e.length:d+g),m}return Qu(e,m,u),m}function q8(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function H8(t,e,n){const s=U8(t),a=e.length/n;if(!s)return Math.max(a,1);const r=V$(s);for(let o=0,c=r.length-1;o<c;o++){const d=r[o];if(d>a)return d}return Math.max(a,1)}function z8(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function V8(t,e,n,s){let a=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),a++,r=n[a*s])}function Qu(t,e,n,s,a){const r=sn(s,0),o=Math.min(sn(a,t.length),t.length);let c=0,d,m,u;for(n=Math.ceil(n),a&&(d=a-s,n=d/Math.floor(d/n)),u=r;u<0;)c++,u=Math.round(r+c*n);for(m=Math.max(r,0);m<o;m++)m===u&&(e.push(t[m]),c++,u=Math.round(r+c*n))}function U8(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const W8=t=>t==="left"?"right":t==="right"?"left":t,cN=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,dN=(t,e)=>Math.min(e||t,t);function mN(t,e){const n=[],s=t.length/e,a=t.length;let r=0;for(;r<a;r+=s)n.push(t[Math.floor(r)]);return n}function K8(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,c=1e-6;let d=t.getPixelForTick(a),m;if(!(n&&(s===1?m=Math.max(d-r,o-d):e===0?m=(t.getPixelForTick(1)-d)/2:m=(d-t.getPixelForTick(a-1))/2,d+=a<e?m:-m,d<r-c||d>o+c)))return d}function G8(t,e){jn(t,n=>{const s=n.gc,a=s.length/2;let r;if(a>e){for(r=0;r<a;++r)delete n.data[s[r]];s.splice(0,a)}})}function Sd(t){return t.drawTicks?t.tickLength:0}function uN(t,e){if(!t.display)return 0;const n=Pi(t.font,e),s=Ws(t.padding);return(ci(t.text)?t.text.length:1)*n.lineHeight+s.height}function Y8(t,e){return Qc(t,{scale:e,type:"scale"})}function Q8(t,e,n){return Qc(t,{tick:n,index:e,type:"tick"})}function Z8(t,e,n){let s=nw(t);return(n&&e!=="right"||!n&&e==="right")&&(s=W8(s)),s}function X8(t,e,n,s){const{top:a,left:r,bottom:o,right:c,chart:d}=t,{chartArea:m,scales:u}=d;let p=0,h,g,x;const v=o-a,y=c-r;if(t.isHorizontal()){if(g=_i(s,r,c),an(n)){const b=Object.keys(n)[0],j=n[b];x=u[b].getPixelForValue(j)+v-e}else n==="center"?x=(m.bottom+m.top)/2+v-e:x=cN(t,n,e);h=c-r}else{if(an(n)){const b=Object.keys(n)[0],j=n[b];g=u[b].getPixelForValue(j)-y+e}else n==="center"?g=(m.left+m.right)/2-y+e:g=cN(t,n,e);x=_i(s,o,a),p=n==="left"?-di:di}return{titleX:g,titleY:x,maxWidth:h,rotation:p}}class Zc extends wo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=xa(e,Number.POSITIVE_INFINITY),n=xa(n,Number.NEGATIVE_INFINITY),s=xa(s,Number.POSITIVE_INFINITY),a=xa(a,Number.NEGATIVE_INFINITY),{min:xa(e,s),max:xa(n,a),minDefined:Us(e),maxDefined:Us(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:r}=this.getUserBounds(),o;if(a&&r)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let d=0,m=c.length;d<m;++d)o=c[d].controller.getMinMax(this,e),a||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=a&&n>s?n:s,{min:xa(n,xa(s,n)),max:xa(s,xa(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ln(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:r,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yB(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?mN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=B8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ln(this.options.afterUpdate,[this])}beforeSetDimensions(){Ln(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ln(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ln(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ln(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,r;for(s=0,a=e.length;s<a;s++)r=e[s],r.label=Ln(n.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Ln(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ln(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=dN(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,r=n.maxRotation;let o=a,c,d,m;if(!this._isVisible()||!n.display||a>=r||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),p=u.widest.width,h=u.highest.height,g=es(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/s:g/(s-1),p+6>c&&(c=g/(s-(e.offset?.5:1)),d=this.maxHeight-Sd(e.grid)-n.padding-uN(e.title,this.chart.options.font),m=Math.sqrt(p*p+h*h),o=G$(Math.min(Math.asin(es((u.highest.height+6)/c,-1,1)),Math.asin(es(d/m,-1,1))-Math.asin(es(h/m,-1,1)))),o=Math.max(a,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ln(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ln(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:r}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=uN(a,n.options.font);if(c?(e.width=this.maxWidth,e.height=Sd(r)+d):(e.height=this.maxHeight,e.width=Sd(r)+d),s.display&&this.ticks.length){const{first:m,last:u,widest:p,highest:h}=this._getLabelSizes(),g=s.padding*2,x=ar(this.labelRotation),v=Math.cos(x),y=Math.sin(x);if(c){const b=s.mirror?0:y*p.width+v*h.height;e.height=Math.min(this.maxHeight,e.height+b+g)}else{const b=s.mirror?0:v*p.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+b+g)}this._calculatePadding(m,u,y,v)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:r,padding:o},position:c}=this.options,d=this.labelRotation!==0,m=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,g=0;d?m?(h=a*e.width,g=s*n.height):(h=s*e.height,g=a*n.width):r==="start"?g=n.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,g=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let u=n.height/2,p=e.height/2;r==="start"?(u=0,p=e.height):r==="end"&&(u=n.height,p=0),this.paddingTop=u+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ln(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)_n(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=mN(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:r}=this,o=[],c=[],d=Math.floor(n/dN(n,s));let m=0,u=0,p,h,g,x,v,y,b,j,k,S,N;for(p=0;p<n;p+=d){if(x=e[p].label,v=this._resolveTickFontOptions(p),a.font=y=v.string,b=r[y]=r[y]||{data:{},gc:[]},j=v.lineHeight,k=S=0,!_n(x)&&!ci(x))k=q0(a,b.data,b.gc,k,x),S=j;else if(ci(x))for(h=0,g=x.length;h<g;++h)N=x[h],!_n(N)&&!ci(N)&&(k=q0(a,b.data,b.gc,k,N),S+=j);o.push(k),c.push(S),m=Math.max(k,m),u=Math.max(S,u)}G8(r,n);const _=o.indexOf(m),w=c.indexOf(u),T=A=>({width:o[A]||0,height:c[A]||0});return{first:T(0),last:T(n-1),widest:T(_),highest:T(w),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Q$(this._alignToPixels?Al(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=Q8(this.getContext(),e,s))}return this.$context||(this.$context=Y8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ar(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,c=r?r.widest.width+o:0,d=r?r.highest.height+o:0;return this.isHorizontal()?d*s>c*a?c/s:d/a:d*a<c*s?d/s:c/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:r,position:o,border:c}=a,d=r.offset,m=this.isHorizontal(),p=this.ticks.length+(d?1:0),h=Sd(r),g=[],x=c.setContext(this.getContext()),v=x.display?x.width:0,y=v/2,b=function(q){return Al(s,q,v)};let j,k,S,N,_,w,T,A,M,E,P,D;if(o==="top")j=b(this.bottom),w=this.bottom-h,A=j-y,E=b(e.top)+y,D=e.bottom;else if(o==="bottom")j=b(this.top),E=e.top,D=b(e.bottom)-y,w=j+y,A=this.top+h;else if(o==="left")j=b(this.right),_=this.right-h,T=j-y,M=b(e.left)+y,P=e.right;else if(o==="right")j=b(this.left),M=e.left,P=b(e.right)-y,_=j+y,T=this.left+h;else if(n==="x"){if(o==="center")j=b((e.top+e.bottom)/2+.5);else if(an(o)){const q=Object.keys(o)[0],U=o[q];j=b(this.chart.scales[q].getPixelForValue(U))}E=e.top,D=e.bottom,w=j+y,A=w+h}else if(n==="y"){if(o==="center")j=b((e.left+e.right)/2);else if(an(o)){const q=Object.keys(o)[0],U=o[q];j=b(this.chart.scales[q].getPixelForValue(U))}_=j-y,T=_-h,M=e.left,P=e.right}const O=sn(a.ticks.maxTicksLimit,p),F=Math.max(1,Math.ceil(p/O));for(k=0;k<p;k+=F){const q=this.getContext(k),U=r.setContext(q),K=c.setContext(q),ne=U.lineWidth,Y=U.color,fe=K.dash||[],le=K.dashOffset,W=U.tickWidth,z=U.tickColor,ie=U.tickBorderDash||[],re=U.tickBorderDashOffset;S=K8(this,k,d),S!==void 0&&(N=Al(s,S,ne),m?_=T=M=P=N:w=A=E=D=N,g.push({tx1:_,ty1:w,tx2:T,ty2:A,x1:M,y1:E,x2:P,y2:D,width:ne,color:Y,borderDash:fe,borderDashOffset:le,tickWidth:W,tickColor:z,tickBorderDash:ie,tickBorderDashOffset:re}))}return this._ticksLength=p,this._borderValue=j,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:r}=s,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:m,padding:u,mirror:p}=r,h=Sd(s.grid),g=h+u,x=p?-u:g,v=-ar(this.labelRotation),y=[];let b,j,k,S,N,_,w,T,A,M,E,P,D="middle";if(a==="top")_=this.bottom-x,w=this._getXAxisLabelAlignment();else if(a==="bottom")_=this.top+x,w=this._getXAxisLabelAlignment();else if(a==="left"){const F=this._getYAxisLabelAlignment(h);w=F.textAlign,N=F.x}else if(a==="right"){const F=this._getYAxisLabelAlignment(h);w=F.textAlign,N=F.x}else if(n==="x"){if(a==="center")_=(e.top+e.bottom)/2+g;else if(an(a)){const F=Object.keys(a)[0],q=a[F];_=this.chart.scales[F].getPixelForValue(q)+g}w=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")N=(e.left+e.right)/2-g;else if(an(a)){const F=Object.keys(a)[0],q=a[F];N=this.chart.scales[F].getPixelForValue(q)}w=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(d==="start"?D="top":d==="end"&&(D="bottom"));const O=this._getLabelSizes();for(b=0,j=c.length;b<j;++b){k=c[b],S=k.label;const F=r.setContext(this.getContext(b));T=this.getPixelForTick(b)+r.labelOffset,A=this._resolveTickFontOptions(b),M=A.lineHeight,E=ci(S)?S.length:1;const q=E/2,U=F.color,K=F.textStrokeColor,ne=F.textStrokeWidth;let Y=w;o?(N=T,w==="inner"&&(b===j-1?Y=this.options.reverse?"left":"right":b===0?Y=this.options.reverse?"right":"left":Y="center"),a==="top"?m==="near"||v!==0?P=-E*M+M/2:m==="center"?P=-O.highest.height/2-q*M+M:P=-O.highest.height+M/2:m==="near"||v!==0?P=M/2:m==="center"?P=O.highest.height/2-q*M:P=O.highest.height-E*M,p&&(P*=-1),v!==0&&!F.showLabelBackdrop&&(N+=M/2*Math.sin(v))):(_=T,P=(1-E)*M/2);let fe;if(F.showLabelBackdrop){const le=Ws(F.backdropPadding),W=O.heights[b],z=O.widths[b];let ie=P-le.top,re=0-le.left;switch(D){case"middle":ie-=W/2;break;case"bottom":ie-=W;break}switch(w){case"center":re-=z/2;break;case"right":re-=z;break;case"inner":b===j-1?re-=z:b>0&&(re-=z/2);break}fe={left:re,top:ie,width:z+le.width,height:W+le.height,color:F.backdropColor}}y.push({label:S,font:A,textOffset:P,options:{rotation:v,color:U,strokeColor:K,strokeWidth:ne,textAlign:Y,textBaseline:D,translation:[N,_],backdrop:fe}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ar(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:r}}=this.options,o=this._getLabelSizes(),c=e+r,d=o.widest.width;let m,u;return n==="left"?a?(u=this.right+r,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u+=d)):(u=this.right-c,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u=this.left)):n==="right"?a?(u=this.left+r,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u-=d)):(u=this.left+c,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u=this.right)):m="right",{textAlign:m,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(r=>r.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const c=(d,m,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=a.length;r<o;++r){const d=a[r];n.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,u,p,h;this.isHorizontal()?(m=Al(e,this.left,o)-o/2,u=Al(e,this.right,c)+c/2,p=h=d):(p=Al(e,this.top,o)-o/2,h=Al(e,this.bottom,c)+c/2,m=u=d),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(m,p),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&sw(s,a);const r=this.getLabelItems(e);for(const o of r){const c=o.options,d=o.font,m=o.label,u=o.textOffset;jm(s,m,0,u,d,c)}a&&aw(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const r=Pi(s.font),o=Ws(s.padding),c=s.align;let d=r.lineHeight/2;n==="bottom"||n==="center"||an(n)?(d+=o.bottom,ci(s.text)&&(d+=r.lineHeight*(s.text.length-1))):d+=o.top;const{titleX:m,titleY:u,maxWidth:p,rotation:h}=X8(this,d,n,c);jm(e,s.text,0,0,r,{color:s.color,maxWidth:p,rotation:h,textAlign:Z8(c,n,a),textBaseline:"middle",translation:[m,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=sn(e.grid&&e.grid.z,-1),a=sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zc.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let r,o;for(r=0,o=n.length;r<o;++r){const c=n[r];c[s]===this.id&&(!e||c.type===e)&&a.push(c)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Pi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;t9(n)&&(s=this.register(n));const a=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in a||(a[r]=e,J8(e,o,s),this.override&&Xn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in Xn[a]&&(delete Xn[a][s],this.override&&delete so[s])}}function J8(t,e,n){const s=wm(Object.create(null),[n?Xn.get(n):{},Xn.get(e),t.defaults]);Xn.set(e,s),t.defaultRoutes&&e9(e,t.defaultRoutes),t.descriptors&&Xn.describe(e,t.descriptors)}function e9(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),r=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),d=o.join(".");Xn.route(r,a,d,c)})}function t9(t){return"id"in t&&"defaults"in t}let n9=class{constructor(){this.controllers=new Zu(uw,"datasets",!0),this.elements=new Zu(wo,"elements"),this.plugins=new Zu(Object,"plugins"),this.scales=new Zu(Zc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const r=s||this._getRegistryForType(a);s||r.isForType(a)||r===this.plugins&&a.id?this._exec(e,r,a):jn(a,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const a=ew(e);Ln(s["before"+a],[],s),n[e](s),Ln(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}};var ba=new n9;class i9{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(r,e,n,s);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,a){a=a||{};for(const r of e){const o=r.plugin,c=o[s],d=[n,a,r.options];if(Ln(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){_n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=sn(s.options&&s.options.plugins,{}),r=s9(s);return a===!1&&!n?[]:r9(e,r,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(r,o)=>r.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function s9(t){const e={},n=[],s=Object.keys(ba.plugins.items);for(let r=0;r<s.length;r++)n.push(ba.getPlugin(s[r]));const a=t.plugins||[];for(let r=0;r<a.length;r++){const o=a[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function a9(t,e){return!e&&t===!1?null:t===!0?{}:t}function r9(t,{plugins:e,localIds:n},s,a){const r=[],o=t.getContext();for(const c of e){const d=c.id,m=a9(s[d],a);m!==null&&r.push({plugin:c,options:l9(t.config,{plugin:c,local:n[d]},m,o)})}return r}function l9(t,{plugin:e,local:n},s,a){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qx(t,e){const n=Xn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function o9(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function c9(t,e){return t===e?"_index_":"_value_"}function hN(t){if(t==="x"||t==="y"||t==="r")return t}function d9(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Zx(t,...e){if(hN(t))return t;for(const n of e){const s=n.axis||d9(n.position)||t.length>1&&hN(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function pN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function m9(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return pN(t,"x",n[0])||pN(t,"y",n[0])}return{}}function u9(t,e){const n=so[t.type]||{scales:{}},s=e.scales||{},a=Qx(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!an(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Zx(o,c,m9(o,t),Xn.scales[c.type]),m=c9(d,a),u=n.scales||{};r[o]=em(Object.create(null),[{axis:d},c,u[d],u[m]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,d=o.indexAxis||Qx(c,e),u=(so[c]||{}).scales||{};Object.keys(u).forEach(p=>{const h=o9(p,d),g=o[h+"AxisID"]||h;r[g]=r[g]||Object.create(null),em(r[g],[{axis:h},s[g],u[p]])})}),Object.keys(r).forEach(o=>{const c=r[o];em(c,[Xn.scales[c.type],Xn.scale])}),r}function uT(t){const e=t.options||(t.options={});e.plugins=sn(e.plugins,{}),e.scales=u9(t,e)}function hT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function h9(t){return t=t||{},t.data=hT(t.data),uT(t),t}const gN=new Map,pT=new Set;function Xu(t,e){let n=gN.get(t);return n||(n=e(),gN.set(t,n),pT.add(n)),n}const _d=(t,e,n)=>{const s=io(e,n);s!==void 0&&t.add(s)};class p9{constructor(e){this._config=h9(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),uT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Xu(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:r}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const d=new Set;n.forEach(u=>{e&&(d.add(e),u.forEach(p=>_d(d,e,p))),u.forEach(p=>_d(d,a,p)),u.forEach(p=>_d(d,so[r]||{},p)),u.forEach(p=>_d(d,Xn,p)),u.forEach(p=>_d(d,Yx,p))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),pT.has(n)&&o.set(n,m),m}chartOptionScopes(){const{options:e,type:n}=this;return[e,so[n]||{},Xn.datasets[n]||{},{type:n},Xn,Yx]}resolveNamedOptions(e,n,s,a=[""]){const r={$shared:!0},{resolver:o,subPrefixes:c}=fN(this._resolverCache,e,a);let d=o;if(f9(o,n)){r.$shared=!1,s=cl(s)?s():s;const m=this.createResolver(e,s,c);d=Pc(o,s,m)}for(const m of n)r[m]=d[m];return r}createResolver(e,n,s=[""],a){const{resolver:r}=fN(this._resolverCache,e,s);return an(n)?Pc(r,n,void 0,a):r}}function fN(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let r=s.get(a);return r||(r={resolver:lw(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(a,r)),r}const g9=t=>an(t)&&Object.getOwnPropertyNames(t).some(e=>cl(t[e]));function f9(t,e){const{isScriptable:n,isIndexable:s}=X2(t);for(const a of e){const r=n(a),o=s(a),c=(o||r)&&t[a];if(r&&(cl(c)||g9(c))||o&&ci(c))return!0}return!1}var v9="4.5.1";const x9=["top","bottom","left","right","chartArea"];function vN(t,e){return t==="top"||t==="bottom"||x9.indexOf(t)===-1&&e==="x"}function xN(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function yN(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ln(n&&n.onComplete,[t],e)}function y9(t){const e=t.chart,n=e.options.animation;Ln(n&&n.onProgress,[t],e)}function gT(t){return dw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Lh={},bN=t=>{const e=gT(t);return Object.values(Lh).filter(n=>n.canvas===e).pop()};function b9(t,e,n){const s=Object.keys(t);for(const a of s){const r=+a;if(r>=e){const o=t[a];delete t[a],(n>0||r>e)&&(t[r+n]=o)}}}function w9(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let Qm=class{static defaults=Xn;static instances=Lh;static overrides=so;static registry=ba;static version=v9;static getChart=bN;static register(...e){ba.add(...e),wN()}static unregister(...e){ba.remove(...e),wN()}constructor(e,n){const s=this.config=new p9(n),a=gT(e),r=bN(a);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||$8(a)),this.platform.updateConfig(s);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,m=d&&d.height,u=d&&d.width;if(this.id=O$(),this.ctx=c,this.canvas=d,this.width=u,this.height=m,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new i9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=eB(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Lh[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}er.listen(this,"complete",yN),er.listen(this,"progress",y9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:r}=this;return _n(e)?n&&r?r:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ba}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H0(this.canvas,this.ctx),this}stop(){return er.stop(this),this}resize(e,n){er.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,n,r),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,W0(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Ln(s.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};jn(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const c=n[o],d=Zx(o,c),m=d==="r",u=d==="x";return{options:c,dposition:m?"chartArea":u?"bottom":"left",dtype:m?"radialLinear":u?"category":"linear"}}))),jn(r,o=>{const c=o.options,d=c.id,m=Zx(d,c),u=sn(c.type,o.dtype);(c.position===void 0||vN(c.position,m)!==vN(o.dposition))&&(c.position=o.dposition),a[d]=!0;let p=null;if(d in s&&s[d].type===u)p=s[d];else{const h=ba.getScale(u);p=new h({id:d,type:u,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(c,e)}),jn(a,(o,c)=>{o||delete s[c]}),jn(s,o=>{Ls.configure(this,o,o.options),Ls.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,r)=>a.index-r.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(xN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const r=n[s];let o=this.getDatasetMeta(s);const c=r.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=r.indexAxis||Qx(c,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const d=ba.getController(c),{datasetElementType:m,dataElementType:u}=Xn.datasets[c];Object.assign(d,{dataElementType:ba.getElement(u),datasetElementType:m&&ba.getElement(m)}),o.controller=new d(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){jn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let m=0,u=this.data.datasets.length;m<u;m++){const{controller:p}=this.getDatasetMeta(m),h=!a&&r.indexOf(p)===-1;p.buildOrUpdateElements(h),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),a||jn(r,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xN("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){jn(this.scales,e=>{Ls.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!R0(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:r}of n){const o=s==="_removeElements"?-r:r;b9(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,c)=>c+","+o.splice(1).join(","))),a=s(0);for(let r=1;r<n;r++)if(!R0(a,s(r)))return;return Array.from(a).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ls.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],jn(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,r)=>{a._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,cl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(er.has(this)?this.attached&&!er.running(this)&&er.start(this):(this.draw(),yN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,r;for(a=0,r=n.length;a<r;++a){const o=n[a];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=$B(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&sw(n,a),e.controller.draw(),a&&aw(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Q2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const r=x8.modes[n];return typeof r=="function"?r(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(r=>r&&r._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Qc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,a);km(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(c=>c.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),er.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Lh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},a=(r,o,c)=>{r.offsetX=o,r.offsetY=c,this._eventHandler(r)};jn(this.options.events,r=>s(r,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(d,m)=>{n.addEventListener(this,d,m),e[d]=m},a=(d,m)=>{e[d]&&(n.removeEventListener(this,d,m),delete e[d])},r=(d,m)=>{this.canvas&&this.resize(d,m)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){jn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},jn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let r,o,c,d;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const m=o&&this.getDatasetMeta(o.datasetIndex).controller;m&&m[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[o],index:o}});!fp(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,r=(d,m)=>d.filter(u=>!m.some(p=>u.datasetIndex===p.datasetIndex&&u.index===p.index)),o=r(n,e),c=s?e:r(e,n);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const r=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(r||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:r}=this,o=n,c=this._getActiveElements(e,a,s,o),d=H$(e),m=w9(e,this._lastEvent,s,d);s&&(this._lastEvent=null,Ln(r.onHover,[e,c,this],this),d&&Ln(r.onClick,[e,c,this],this));const u=!fp(c,a);return(u||n)&&(this._active=c,this._updateHoverStyles(c,a,n)),this._lastEvent=m,u}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,a)}};function wN(){return jn(Qm.instances,t=>t._plugins.invalidate())}function k9(t,e,n){const{startAngle:s,x:a,y:r,outerRadius:o,innerRadius:c,options:d}=e,{borderWidth:m,borderJoinStyle:u}=d,p=Math.min(m/o,wa(s-n));if(t.beginPath(),t.arc(a,r,o-m/2,s+p/2,n-p/2),c>0){const h=Math.min(m/c,wa(s-n));t.arc(a,r,c+m/2,n-h/2,s+h/2,!0)}else{const h=Math.min(m/2,o*wa(s-n));if(u==="round")t.arc(a,r,h,n-Sn/2,s+Sn/2,!0);else if(u==="bevel"){const g=2*h*h,x=-g*Math.cos(n+Sn/2)+a,v=-g*Math.sin(n+Sn/2)+r,y=g*Math.cos(s+Sn/2)+a,b=g*Math.sin(s+Sn/2)+r;t.lineTo(x,v),t.lineTo(y,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function j9(t,e,n){const{startAngle:s,pixelMargin:a,x:r,y:o,outerRadius:c,innerRadius:d}=e;let m=a/c;t.beginPath(),t.arc(r,o,c,s-m,n+m),d>a?(m=a/d,t.arc(r,o,d,n+m,s-m,!0)):t.arc(r,o,a,n+di,s-di),t.closePath(),t.clip()}function N9(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function C9(t,e,n,s){const a=N9(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,s*e/2),c=d=>{const m=(n-Math.min(r,d))*s/2;return es(d,0,Math.min(r,m))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:es(a.innerStart,0,o),innerEnd:es(a.innerEnd,0,o)}}function Go(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function Np(t,e,n,s,a,r){const{x:o,y:c,startAngle:d,pixelMargin:m,innerRadius:u}=e,p=Math.max(e.outerRadius+s+n-m,0),h=u>0?u+s+n+m:0;let g=0;const x=a-d;if(s){const F=u>0?u-s:0,q=p>0?p-s:0,U=(F+q)/2,K=U!==0?x*U/(U+s):x;g=(x-K)/2}const v=Math.max(.001,x*p-n/Sn)/p,y=(x-v)/2,b=d+y+g,j=a-y-g,{outerStart:k,outerEnd:S,innerStart:N,innerEnd:_}=C9(e,h,p,j-b),w=p-k,T=p-S,A=b+k/w,M=j-S/T,E=h+N,P=h+_,D=b+N/E,O=j-_/P;if(t.beginPath(),r){const F=(A+M)/2;if(t.arc(o,c,p,A,F),t.arc(o,c,p,F,M),S>0){const ne=Go(T,M,o,c);t.arc(ne.x,ne.y,S,M,j+di)}const q=Go(P,j,o,c);if(t.lineTo(q.x,q.y),_>0){const ne=Go(P,O,o,c);t.arc(ne.x,ne.y,_,j+di,O+Math.PI)}const U=(j-_/h+(b+N/h))/2;if(t.arc(o,c,h,j-_/h,U,!0),t.arc(o,c,h,U,b+N/h,!0),N>0){const ne=Go(E,D,o,c);t.arc(ne.x,ne.y,N,D+Math.PI,b-di)}const K=Go(w,b,o,c);if(t.lineTo(K.x,K.y),k>0){const ne=Go(w,A,o,c);t.arc(ne.x,ne.y,k,b-di,A)}}else{t.moveTo(o,c);const F=Math.cos(A)*p+o,q=Math.sin(A)*p+c;t.lineTo(F,q);const U=Math.cos(M)*p+o,K=Math.sin(M)*p+c;t.lineTo(U,K)}t.closePath()}function S9(t,e,n,s,a){const{fullCircles:r,startAngle:o,circumference:c}=e;let d=e.endAngle;if(r){Np(t,e,n,s,d,a);for(let m=0;m<r;++m)t.fill();isNaN(c)||(d=o+(c%ni||ni))}return Np(t,e,n,s,d,a),t.fill(),d}function _9(t,e,n,s,a){const{fullCircles:r,startAngle:o,circumference:c,options:d}=e,{borderWidth:m,borderJoinStyle:u,borderDash:p,borderDashOffset:h,borderRadius:g}=d,x=d.borderAlign==="inner";if(!m)return;t.setLineDash(p||[]),t.lineDashOffset=h,x?(t.lineWidth=m*2,t.lineJoin=u||"round"):(t.lineWidth=m,t.lineJoin=u||"bevel");let v=e.endAngle;if(r){Np(t,e,n,s,v,a);for(let y=0;y<r;++y)t.stroke();isNaN(c)||(v=o+(c%ni||ni))}x&&j9(t,e,v),d.selfJoin&&v-o>=Sn&&g===0&&u!=="miter"&&k9(t,e,v),r||(Np(t,e,n,s,v,a),t.stroke())}class fT extends wo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:r,distance:o}=H2(a,{x:e,y:n}),{startAngle:c,endAngle:d,innerRadius:m,outerRadius:u,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,g=sn(p,d-c),x=bp(r,c,d)&&c!==d,v=g>=ni||x,y=Bl(o,m+h,u+h);return v&&y}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:r,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:m}=this.options,u=(a+r)/2,p=(o+c+m+d)/2;return{x:n+Math.cos(u)*p,y:s+Math.sin(u)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ni?Math.floor(s/ni):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a);const d=1-Math.sin(Math.min(Sn,s||0)),m=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,S9(e,this,m,r,o),_9(e,this,m,r,o),e.restore()}}function vT(t,e){const{x:n,y:s,base:a,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let c,d,m,u,p;return t.horizontal?(p=o/2,c=Math.min(n,a),d=Math.max(n,a),m=s-p,u=s+p):(p=r/2,c=n-p,d=n+p,m=Math.min(s,a),u=Math.max(s,a)),{left:c,top:m,right:d,bottom:u}}function Wr(t,e,n,s){return t?0:es(e,n,s)}function E9(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,r=Z2(s);return{t:Wr(a.top,r.top,0,n),r:Wr(a.right,r.right,0,e),b:Wr(a.bottom,r.bottom,0,n),l:Wr(a.left,r.left,0,e)}}function T9(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,r=pc(a),o=Math.min(e,n),c=t.borderSkipped,d=s||an(a);return{topLeft:Wr(!d||c.top||c.left,r.topLeft,0,o),topRight:Wr(!d||c.top||c.right,r.topRight,0,o),bottomLeft:Wr(!d||c.bottom||c.left,r.bottomLeft,0,o),bottomRight:Wr(!d||c.bottom||c.right,r.bottomRight,0,o)}}function A9(t){const e=vT(t),n=e.right-e.left,s=e.bottom-e.top,a=E9(t,n/2,s/2),r=T9(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:r},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function bv(t,e,n,s){const a=e===null,r=n===null,c=t&&!(a&&r)&&vT(t,s);return c&&(a||Bl(e,c.left,c.right))&&(r||Bl(n,c.top,c.bottom))}function D9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function R9(t,e){t.rect(e.x,e.y,e.w,e.h)}function wv(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+r,h:t.h+o,radius:t.radius}}class P9 extends wo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:r,outer:o}=A9(this),c=D9(o.radius)?wp:R9;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),c(e,wv(o,n,r)),e.clip(),c(e,wv(r,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,wv(r,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return bv(this,e,n,s)}inXRange(e,n){return bv(this,e,null,n)}inYRange(e,n){return bv(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+a)/2:n,y:r?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const kN=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},M9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jN extends wo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ln(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Pi(s.font),r=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=kN(s,r);let m,u;n.font=a.string,this.isHorizontal()?(m=this.maxWidth,u=this._fitRows(o,r,c,d)+10):(u=this.maxHeight,m=this._fitCols(o,a,c,d)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:r,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],u=a+c;let p=e;r.textAlign="left",r.textBaseline="middle";let h=-1,g=-u;return this.legendItems.forEach((x,v)=>{const y=s+n/2+r.measureText(x.text).width;(v===0||m[m.length-1]+y+2*c>o)&&(p+=u,m[m.length-(v>0?0:1)]=0,g+=u,h++),d[v]={left:0,top:g,row:h,width:y,height:a},m[m.length-1]+=y+c}),p}_fitCols(e,n,s,a){const{ctx:r,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],u=o-e;let p=c,h=0,g=0,x=0,v=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:j,itemHeight:k}=I9(s,n,r,y,a);b>0&&g+k+2*c>u&&(p+=h+c,m.push({width:h,height:g}),x+=h+c,v++,h=g=0),d[b]={left:x,top:g,col:v,width:j,height:k},h=Math.max(h,j),g+=k+c}),p+=h,m.push({width:h,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:r}}=this,o=gc(r,this.left,this.width);if(this.isHorizontal()){let c=0,d=_i(s,this.left+a,this.right-this.lineWidths[c]);for(const m of n)c!==m.row&&(c=m.row,d=_i(s,this.left+a,this.right-this.lineWidths[c])),m.top+=this.top+e+a,m.left=o.leftForLtr(o.x(d),m.width),d+=m.width+a}else{let c=0,d=_i(s,this.top+e+a,this.bottom-this.columnSizes[c].height);for(const m of n)m.col!==c&&(c=m.col,d=_i(s,this.top+e+a,this.bottom-this.columnSizes[c].height)),m.top=d,m.left+=this.left+a,m.left=o.leftForLtr(o.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sw(e,this),this._draw(),aw(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:r,labels:o}=e,c=Xn.color,d=gc(e.rtl,this.left,this.width),m=Pi(o.font),{padding:u}=o,p=m.size,h=p/2;let g;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:x,boxHeight:v,itemHeight:y}=kN(o,p),b=function(_,w,T){if(isNaN(x)||x<=0||isNaN(v)||v<0)return;a.save();const A=sn(T.lineWidth,1);if(a.fillStyle=sn(T.fillStyle,c),a.lineCap=sn(T.lineCap,"butt"),a.lineDashOffset=sn(T.lineDashOffset,0),a.lineJoin=sn(T.lineJoin,"miter"),a.lineWidth=A,a.strokeStyle=sn(T.strokeStyle,c),a.setLineDash(sn(T.lineDash,[])),o.usePointStyle){const M={radius:v*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},E=d.xPlus(_,x/2),P=w+h;Y2(a,M,E,P,o.pointStyleWidth&&x)}else{const M=w+Math.max((p-v)/2,0),E=d.leftForLtr(_,x),P=pc(T.borderRadius);a.beginPath(),Object.values(P).some(D=>D!==0)?wp(a,{x:E,y:M,w:x,h:v,radius:P}):a.rect(E,M,x,v),a.fill(),A!==0&&a.stroke()}a.restore()},j=function(_,w,T){jm(a,T.text,_,w+y/2,m,{strikethrough:T.hidden,textAlign:d.textAlign(T.textAlign)})},k=this.isHorizontal(),S=this._computeTitleHeight();k?g={x:_i(r,this.left+u,this.right-s[0]),y:this.top+u+S,line:0}:g={x:this.left+u,y:_i(r,this.top+S+u,this.bottom-n[0].height),line:0},nT(this.ctx,e.textDirection);const N=y+u;this.legendItems.forEach((_,w)=>{a.strokeStyle=_.fontColor,a.fillStyle=_.fontColor;const T=a.measureText(_.text).width,A=d.textAlign(_.textAlign||(_.textAlign=o.textAlign)),M=x+h+T;let E=g.x,P=g.y;d.setWidth(this.width),k?w>0&&E+M+u>this.right&&(P=g.y+=N,g.line++,E=g.x=_i(r,this.left+u,this.right-s[g.line])):w>0&&P+N>this.bottom&&(E=g.x=E+n[g.line].width+u,g.line++,P=g.y=_i(r,this.top+S+u,this.bottom-n[g.line].height));const D=d.x(E);if(b(D,P,_),E=tB(A,E+x+h,k?E+M:this.right,e.rtl),j(d.x(E),P,_),k)g.x+=M+u;else if(typeof _.text!="string"){const O=m.lineHeight;g.y+=xT(_,O)+u}else g.y+=N}),iT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Pi(n.font),a=Ws(n.padding);if(!n.display)return;const r=gc(e.rtl,this.left,this.width),o=this.ctx,c=n.position,d=s.size/2,m=a.top+d;let u,p=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+m,p=_i(e.align,p,this.right-h);else{const x=this.columnSizes.reduce((v,y)=>Math.max(v,y.height),0);u=m+_i(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=_i(c,p,p+h);o.textAlign=r.textAlign(nw(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,jm(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=Pi(e.font),s=Ws(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,r;if(Bl(e,this.left,this.right)&&Bl(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(a=r[s],Bl(e,a.left,a.left+a.width)&&Bl(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!F9(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,r=M9(a,s);a&&!r&&Ln(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!r&&Ln(n.onHover,[e,s,this],this)}else s&&Ln(n.onClick,[e,s,this],this)}}function I9(t,e,n,s,a){const r=O9(s,t,e,n),o=L9(a,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function O9(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+s.measureText(a).width}function L9(t,e,n){let s=t;return typeof e.text!="string"&&(s=xT(e,n)),s}function xT(t,e){const n=t.text?t.text.length:0;return e*n}function F9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var yT={id:"legend",_element:jN,start(t,e,n){const s=t.legend=new jN({ctx:t.ctx,options:n,chart:t});Ls.configure(t,s,n),Ls.addBox(t,s)},stop(t){Ls.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Ls.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:r,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(n?0:void 0),u=Ws(m.borderWidth);return{text:e[d.index].label,fillStyle:m.backgroundColor,fontColor:r,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:o&&(c||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bT extends wo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=ci(s.text)?s.text.length:1;this._padding=Ws(s.padding);const r=a*Pi(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:r,options:o}=this,c=o.align;let d=0,m,u,p;return this.isHorizontal()?(u=_i(c,s,r),p=n+e,m=r-s):(o.position==="left"?(u=s+e,p=_i(c,a,n),d=Sn*-.5):(u=r-e,p=_i(c,n,a),d=Sn*.5),m=a-n),{titleX:u,titleY:p,maxWidth:m,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Pi(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:m}=this._drawArgs(r);jm(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:m,textAlign:nw(n.align),textBaseline:"middle",translation:[o,c]})}}function $9(t,e){const n=new bT({ctx:t.ctx,options:e,chart:t});Ls.configure(t,n,e),Ls.addBox(t,n),t.titleBlock=n}var B9={id:"title",_element:bT,start(t,e,n){$9(t,n)},stop(t){const e=t.titleBlock;Ls.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Ls.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qd={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,r=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const d=c.tooltipPosition();s.add(d.x),a+=d.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((c,d)=>c+d)/s.size,y:a/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,r,o,c;for(r=0,o=t.length;r<o;++r){const d=t[r].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),u=Y$(e,m);u<a&&(a=u,c=d)}}if(c){const d=c.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function ya(t,e){return e&&(ci(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function tr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function q9(t,e){const{element:n,datasetIndex:s,index:a}=e,r=t.getDatasetMeta(s).controller,{label:o,value:c}=r.getLabelAndValue(a);return{chart:t,label:o,parsed:r.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:c,dataset:r.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function NN(t,e){const n=t.chart.ctx,{body:s,footer:a,title:r}=t,{boxWidth:o,boxHeight:c}=e,d=Pi(e.bodyFont),m=Pi(e.titleFont),u=Pi(e.footerFont),p=r.length,h=a.length,g=s.length,x=Ws(e.padding);let v=x.height,y=0,b=s.reduce((S,N)=>S+N.before.length+N.lines.length+N.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,p&&(v+=p*m.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),b){const S=e.displayColors?Math.max(c,d.lineHeight):d.lineHeight;v+=g*S+(b-g)*d.lineHeight+(b-1)*e.bodySpacing}h&&(v+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let j=0;const k=function(S){y=Math.max(y,n.measureText(S).width+j)};return n.save(),n.font=m.string,jn(t.title,k),n.font=d.string,jn(t.beforeBody.concat(t.afterBody),k),j=e.displayColors?o+2+e.boxPadding:0,jn(s,S=>{jn(S.before,k),jn(S.lines,k),jn(S.after,k)}),j=0,n.font=u.string,jn(t.footer,k),n.restore(),y+=x.width,{width:y,height:v}}function H9(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function z9(t,e,n,s){const{x:a,width:r}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&a+r+o>e.width||t==="right"&&a-r-o<0)return!0}function V9(t,e,n,s){const{x:a,width:r}=n,{width:o,chartArea:{left:c,right:d}}=t;let m="center";return s==="center"?m=a<=(c+d)/2?"left":"right":a<=r/2?m="left":a>=o-r/2&&(m="right"),z9(m,t,e,n)&&(m="center"),m}function CN(t,e,n){const s=n.yAlign||e.yAlign||H9(t,n);return{xAlign:n.xAlign||e.xAlign||V9(t,e,n,s),yAlign:s}}function U9(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function W9(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function SN(t,e,n,s){const{caretSize:a,caretPadding:r,cornerRadius:o}=t,{xAlign:c,yAlign:d}=n,m=a+r,{topLeft:u,topRight:p,bottomLeft:h,bottomRight:g}=pc(o);let x=U9(e,c);const v=W9(e,d,m);return d==="center"?c==="left"?x+=m:c==="right"&&(x-=m):c==="left"?x-=Math.max(u,h)+a:c==="right"&&(x+=Math.max(p,g)+a),{x:es(x,0,s.width-e.width),y:es(v,0,s.height-e.height)}}function Ju(t,e,n){const s=Ws(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function _N(t){return ya([],tr(t))}function K9(t,e,n){return Qc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function EN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const wT={beforeTitle:Za,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Za,beforeBody:Za,beforeLabel:Za,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _n(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Za,afterBody:Za,beforeFooter:Za,footer:Za,afterFooter:Za};function Qi(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?wT[e].call(n,s):a}let TN=class extends wo{static positioners=qd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,r=new sT(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=K9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=Qi(s,"beforeTitle",this,e),r=Qi(s,"title",this,e),o=Qi(s,"afterTitle",this,e);let c=[];return c=ya(c,tr(a)),c=ya(c,tr(r)),c=ya(c,tr(o)),c}getBeforeBody(e,n){return _N(Qi(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return jn(e,r=>{const o={before:[],lines:[],after:[]},c=EN(s,r);ya(o.before,tr(Qi(c,"beforeLabel",this,r))),ya(o.lines,Qi(c,"label",this,r)),ya(o.after,tr(Qi(c,"afterLabel",this,r))),a.push(o)}),a}getAfterBody(e,n){return _N(Qi(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=Qi(s,"beforeFooter",this,e),r=Qi(s,"footer",this,e),o=Qi(s,"afterFooter",this,e);let c=[];return c=ya(c,tr(a)),c=ya(c,tr(r)),c=ya(c,tr(o)),c}_createItems(e){const n=this._active,s=this.chart.data,a=[],r=[],o=[];let c=[],d,m;for(d=0,m=n.length;d<m;++d)c.push(q9(this.chart,n[d]));return e.filter&&(c=c.filter((u,p,h)=>e.filter(u,p,h,s))),e.itemSort&&(c=c.sort((u,p)=>e.itemSort(u,p,s))),jn(c,u=>{const p=EN(e.callbacks,u);a.push(Qi(p,"labelColor",this,u)),r.push(Qi(p,"labelPointStyle",this,u)),o.push(Qi(p,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let r,o=[];if(!a.length)this.opacity!==0&&(r={opacity:0});else{const c=qd[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const d=this._size=NN(this,s),m=Object.assign({},c,d),u=CN(this.chart,s,m),p=SN(s,m,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const r=this.getCaretPosition(e,s,a);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:r}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:d,topRight:m,bottomLeft:u,bottomRight:p}=pc(c),{x:h,y:g}=e,{width:x,height:v}=n;let y,b,j,k,S,N;return r==="center"?(S=g+v/2,a==="left"?(y=h,b=y-o,k=S+o,N=S-o):(y=h+x,b=y+o,k=S-o,N=S+o),j=y):(a==="left"?b=h+Math.max(d,u)+o:a==="right"?b=h+x-Math.max(m,p)-o:b=this.caretX,r==="top"?(k=g,S=k-o,y=b-o,j=b+o):(k=g+v,S=k+o,y=b+o,j=b-o),N=k),{x1:y,x2:b,x3:j,y1:k,y2:S,y3:N}}drawTitle(e,n,s){const a=this.title,r=a.length;let o,c,d;if(r){const m=gc(s.rtl,this.x,this.width);for(e.x=Ju(this,s.titleAlign,s),n.textAlign=m.textAlign(s.titleAlign),n.textBaseline="middle",o=Pi(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,d=0;d<r;++d)n.fillText(a[d],m.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===r&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,a,r){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:d,boxWidth:m}=r,u=Pi(r.bodyFont),p=Ju(this,"left",r),h=a.x(p),g=d<u.lineHeight?(u.lineHeight-d)/2:0,x=n.y+g;if(r.usePointStyle){const v={radius:Math.min(m,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(h,m)+m/2,b=x+d/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,z0(e,v,y,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,z0(e,v,y,b)}else{e.lineWidth=an(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=a.leftForLtr(h,m),y=a.leftForLtr(a.xPlus(h,1),m-2),b=pc(o.borderRadius);Object.values(b).some(j=>j!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,wp(e,{x:v,y:x,w:m,h:d,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wp(e,{x:y,y:x+1,w:m-2,h:d-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(v,x,m,d),e.strokeRect(v,x,m,d),e.fillStyle=o.backgroundColor,e.fillRect(y,x+1,m-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:r,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:m,boxPadding:u}=s,p=Pi(s.bodyFont);let h=p.lineHeight,g=0;const x=gc(s.rtl,this.x,this.width),v=function(T){n.fillText(T,x.x(e.x+g),e.y+h/2),e.y+=h+r},y=x.textAlign(o);let b,j,k,S,N,_,w;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Ju(this,y,s),n.fillStyle=s.bodyColor,jn(this.beforeBody,v),g=c&&y!=="right"?o==="center"?m/2+u:m+2+u:0,S=0,_=a.length;S<_;++S){for(b=a[S],j=this.labelTextColors[S],n.fillStyle=j,jn(b.before,v),k=b.lines,c&&k.length&&(this._drawColorBox(n,e,S,x,s),h=Math.max(p.lineHeight,d)),N=0,w=k.length;N<w;++N)v(k[N]),h=p.lineHeight;jn(b.after,v)}g=0,h=p.lineHeight,jn(this.afterBody,v),e.y-=r}drawFooter(e,n,s){const a=this.footer,r=a.length;let o,c;if(r){const d=gc(s.rtl,this.x,this.width);for(e.x=Ju(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",o=Pi(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<r;++c)n.fillText(a[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:r,yAlign:o}=this,{x:c,y:d}=e,{width:m,height:u}=s,{topLeft:p,topRight:h,bottomLeft:g,bottomRight:x}=pc(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(c+p,d),o==="top"&&this.drawCaret(e,n,s,a),n.lineTo(c+m-h,d),n.quadraticCurveTo(c+m,d,c+m,d+h),o==="center"&&r==="right"&&this.drawCaret(e,n,s,a),n.lineTo(c+m,d+u-x),n.quadraticCurveTo(c+m,d+u,c+m-x,d+u),o==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(c+g,d+u),n.quadraticCurveTo(c,d+u,c,d+u-g),o==="center"&&r==="left"&&this.drawCaret(e,n,s,a),n.lineTo(c,d+p),n.quadraticCurveTo(c,d,c+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,r=s&&s.y;if(a||r){const o=qd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=NN(this,e),d=Object.assign({},o,this._size),m=CN(n,e,d),u=SN(e,d,m,n);(a._to!==u.x||r._to!==u.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ws(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,a,n),nT(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),iT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:c,index:d})=>{const m=this.chart.getDatasetMeta(c);if(!m)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:m.data[d],index:d}}),r=!fp(s,a),o=this._positionChanged(a,n);(r||o)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,s),c=this._positionChanged(o,e),d=n||!fp(o,r)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,s,a){const r=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:a,options:r}=this,o=qd[r.position].call(this,e,n);return o!==!1&&(s!==o.x||a!==o.y)}};var kT={id:"tooltip",_element:TN,positioners:qd,afterInit(t,e,n){n&&(t.tooltip=new TN({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const G9=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Y9(t,e,n,s){const a=t.indexOf(e);if(a===-1)return G9(t,e,n,s);const r=t.lastIndexOf(e);return a!==r?n:a}const Q9=(t,e)=>t===null?null:es(Math.round(t),0,e);function AN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Z9 extends Zc{static id="category";static defaults={ticks:{callback:AN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:r}of n)s[a]===r&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_n(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Y9(s,e,sn(n,e),this._addedLabels),Q9(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)a.push({value:o});return a}getLabelForValue(e){return AN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function X9(t,e){const n=[],{bounds:a,step:r,min:o,max:c,precision:d,count:m,maxTicks:u,maxDigits:p,includeBounds:h}=t,g=r||1,x=u-1,{min:v,max:y}=e,b=!_n(o),j=!_n(c),k=!_n(m),S=(y-v)/(p+1);let N=M0((y-v)/x/g)*g,_,w,T,A;if(N<1e-14&&!b&&!j)return[{value:v},{value:y}];A=Math.ceil(y/N)-Math.floor(v/N),A>x&&(N=M0(A*N/x/g)*g),_n(d)||(_=Math.pow(10,d),N=Math.ceil(N*_)/_),a==="ticks"?(w=Math.floor(v/N)*N,T=Math.ceil(y/N)*N):(w=v,T=y),b&&j&&r&&W$((c-o)/r,N/1e3)?(A=Math.round(Math.min((c-o)/N,u)),N=(c-o)/A,w=o,T=c):k?(w=b?o:w,T=j?c:T,A=m-1,N=(T-w)/A):(A=(T-w)/N,Ih(A,Math.round(A),N/1e3)?A=Math.round(A):A=Math.ceil(A));const M=Math.max(I0(N),I0(w));_=Math.pow(10,_n(d)?M:d),w=Math.round(w*_)/_,T=Math.round(T*_)/_;let E=0;for(b&&(h&&w!==o?(n.push({value:o}),w<o&&E++,Ih(Math.round((w+E*N)*_)/_,o,DN(o,S,t))&&E++):w<o&&E++);E<A;++E){const P=Math.round((w+E*N)*_)/_;if(j&&P>c)break;n.push({value:P})}return j&&h&&T!==c?n.length&&Ih(n[n.length-1].value,c,DN(c,S,t))?n[n.length-1].value=c:n.push({value:c}):(!j||T===c)&&n.push({value:T}),n}function DN(t,e,{horizontal:n,minRotation:s}){const a=ar(s),r=(n?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class J9 extends Zc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _n(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:r}=this;const o=d=>a=n?a:d,c=d=>r=s?r:d;if(e){const d=il(a),m=il(r);d<0&&m<0?c(0):d>0&&m>0&&o(0)}if(a===r){let d=r===0?1:Math.abs(r*.05);c(r+d),e||o(a-d)}this.min=a,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=X9(a,r);return e.bounds==="ticks"&&K$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return iw(e,this.chart.options.locale,this.options.ticks.format)}}class eq extends J9{static id="linear";static defaults={ticks:{callback:G2.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Us(e)?e:0,this.max=Us(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=ar(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ig={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ji=Object.keys(Ig);function RN(t,e){return t-e}function PN(t,e){if(_n(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Us(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(a&&(o=a==="week"&&(yp(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,a)),+o)}function MN(t,e,n,s){const a=Ji.length;for(let r=Ji.indexOf(t);r<a-1;++r){const o=Ig[Ji[r]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return Ji[r]}return Ji[a-1]}function tq(t,e,n,s,a){for(let r=Ji.length-1;r>=Ji.indexOf(n);r--){const o=Ji[r];if(Ig[o].common&&t._adapter.diff(a,s,o)>=e-1)return o}return Ji[n?Ji.indexOf(n):0]}function nq(t){for(let e=Ji.indexOf(t)+1,n=Ji.length;e<n;++e)if(Ig[Ji[e]].common)return Ji[e]}function IN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=tw(n,e),r=n[s]>=e?n[s]:n[a];t[r]=!0}}function iq(t,e,n,s){const a=t._adapter,r=+a.startOf(e[0].value,s),o=e[e.length-1].value;let c,d;for(c=r;c<=o;c=+a.add(c,1,s))d=n[c],d>=0&&(e[d].major=!0);return e}function ON(t,e,n){const s=[],a={},r=e.length;let o,c;for(o=0;o<r;++o)c=e[o],a[c]=o,s.push({value:c,major:!1});return r===0||!n?s:iq(t,s,a,n)}class LN extends Zc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new h8._date(e.adapters.date);a.init(n),em(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:PN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:r,minDefined:o,maxDefined:c}=this.getUserBounds();function d(m){!o&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!c&&!isNaN(m.max)&&(r=Math.max(r,m.max))}(!o||!c)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Us(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),r=Us(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const r=this.min,o=this.max,c=X$(a,r,o);return this._unit=n.unit||(s.autoSkip?MN(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):tq(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:nq(this._unit),this.initOffsets(a),e.reverse&&c.reverse(),ON(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,r;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=es(n,0,o),s=es(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,r=a.time,o=r.unit||MN(r.minUnit,n,s,this._getLabelCapacity(n)),c=sn(a.ticks.stepSize,1),d=o==="week"?r.isoWeekday:!1,m=yp(d)||d===!0,u={};let p=n,h,g;if(m&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,m?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(h=p,g=0;h<s;h=+e.add(h,c,o),g++)IN(u,h,x);return(h===s||a.bounds==="ticks"||g===1)&&IN(u,h,x),Object.keys(u).sort(RN).map(v=>+v)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,r=this._unit,o=n||a[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,a){const r=this.options,o=r.ticks.callback;if(o)return Ln(o,[e,n,s],this);const c=r.time.displayFormats,d=this._unit,m=this._majorUnit,u=d&&c[d],p=m&&c[m],h=s[n],g=m&&p&&h&&h.major;return this._adapter.format(e,a||(g?p:u))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=ar(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:s*r+c*o,h:s*o+c*r}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,ON(this,[e],this._majorUnit),a),o=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(PN(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return V2(e.sort(RN))}}function eh(t,e,n){let s=0,a=t.length-1,r,o,c,d;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Gx(t,"pos",e)),{pos:r,time:c}=t[s],{pos:o,time:d}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Gx(t,"time",e)),{time:r,pos:c}=t[s],{time:o,pos:d}=t[a]);const m=o-r;return m?c+(d-c)*(e-r)/m:c}class spe extends LN{static id="timeseries";static defaults=LN.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=eh(n,this.min),this._tableRange=eh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],r=[];let o,c,d,m,u;for(o=0,c=e.length;o<c;++o)m=e[o],m>=n&&m<=s&&a.push(m);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=a.length;o<c;++o)u=a[o+1],d=a[o-1],m=a[o],Math.round((u+d)/2)!==m&&r.push({time:m,pos:o/(c-1)});return r}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,r)=>a-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(eh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return eh(this._table,s*this._tableRange+this._minPos,!0)}}const jT="label";function FN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function sq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function NT(t,e){t.labels=e}function CT(t,e,n=jT){const s=[];t.datasets=e.map(a=>{const r=t.datasets.find(o=>o[n]===a[n]);return!r||!a.data||s.includes(r)?{...a}:(s.push(r),Object.assign(r,a),r)})}function aq(t,e=jT){const n={labels:[],datasets:[]};return NT(n,t.labels),CT(n,t.datasets,e),n}function rq(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:r,type:o,data:c,options:d,plugins:m=[],fallbackContent:u,updateMode:p,...h}=t,g=f.useRef(null),x=f.useRef(null),v=()=>{g.current&&(x.current=new Qm(g.current,{type:o,data:aq(c,r),options:d&&{...d},plugins:m}),FN(e,x.current))},y=()=>{FN(e,null),x.current&&(x.current.destroy(),x.current=null)};return f.useEffect(()=>{!a&&x.current&&d&&sq(x.current,d)},[a,d]),f.useEffect(()=>{!a&&x.current&&NT(x.current.config.data,c.labels)},[a,c.labels]),f.useEffect(()=>{!a&&x.current&&c.datasets&&CT(x.current.config.data,c.datasets,r)},[a,c.datasets]),f.useEffect(()=>{x.current&&(a?(y(),setTimeout(v)):x.current.update(p))},[a,d,c.labels,c.datasets,p]),f.useEffect(()=>{x.current&&(y(),setTimeout(v))},[o]),f.useEffect(()=>(v(),()=>y()),[]),i.jsx("canvas",{ref:g,role:"img",height:n,width:s,...h,children:u})}const lq=f.forwardRef(rq);function ST(t,e){return Qm.register(e),f.forwardRef((n,s)=>i.jsx(lq,{...n,ref:s,type:t}))}const oq=ST("bar",d8),_T=ST("doughnut",u8);Qm.register(fT,kT,yT);const cq=({clinicId:t,dateRange:e})=>{const n=f.useMemo(()=>{const u={clinic_id:t};if(e&&e.length===2){const p=h=>{if(!h)return"";const g=new Date(h),x=g.getFullYear(),v=String(g.getMonth()+1).padStart(2,"0"),y=String(g.getDate()).padStart(2,"0");return`${x}-${v}-${y}`};u.start_date=p(e[0]),u.end_date=p(e[1])}return u},[t,e]),{data:s,isLoading:a}=e$(n),r={booked:{color:"#00C853",label:l("Booked","kivicare-clinic-management-system")},check_in:{color:"#2962FF",label:l("Check-in","kivicare-clinic-management-system")},check_out:{color:"#82B1FF",label:l("Check-out","kivicare-clinic-management-system")},pending:{color:"#FF8A80",label:l("Pending","kivicare-clinic-management-system")},cancelled:{color:"#FF5252",label:l("Cancelled","kivicare-clinic-management-system")}},o=f.useMemo(()=>{if(!s?.data?.status_breakdown)return null;const u=s.data.status_breakdown;return{labels:Object.keys(r).map(p=>r[p].label),datasets:[{data:[u.booked||0,u.check_in||0,u.check_out||0,u.pending||0,u.cancelled||0],backgroundColor:[r.booked.color,r.check_in.color,r.check_out.color,r.pending.color,r.cancelled.color],borderWidth:0,hoverOffset:4}]}},[s]),c=s?.data?.count||0,d=f.useMemo(()=>({id:"centerText",beforeDraw:function(u){const{width:p}=u,{height:h}=u,{ctx:g}=u;g.restore();const x=(h/8).toFixed(2);g.font=`bold ${x}px sans-serif`,g.textBaseline="middle",g.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--bs-heading-color")||"#333";const v=c.toLocaleString(),y=Math.round((p-g.measureText(v).width)/2),b=h/2;g.fillText(v,y,b-10);const j=(h/16).toFixed(2);g.font=`${j}px sans-serif`,g.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--bs-secondary-color")||"#6c757d";const k=l("Total Bookings","kivicare-clinic-management-system"),S=Math.round((p-g.measureText(k).width)/2);g.fillText(k,S,b+25),g.save()}}),[c]),m={cutout:"65%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(u){const p=u.label||"",h=u.raw||0,g=c>0?Math.round(h/c*100):0;return`${p}: ${h} (${g}%)`}}}},maintainAspectRatio:!1};return a?i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"200px",height:"200px"}})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"10px",height:"10px"}}),i.jsx("div",{className:"skeleton-element",style:{width:"80px",height:"1rem"}})]},`legend-skeleton-${p}`))})]})]}):i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4",style:{height:"220px"},children:o&&i.jsx(_T,{data:o,options:m,plugins:[d]})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Object.entries(r).map(([u,p])=>{const h=s?.data?.status_breakdown?.[u]||0,g=c>0?Math.round(h/c*100):0;return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{className:"rounded-circle",style:{width:"10px",height:"10px",backgroundColor:p.color}}),i.jsx("span",{className:"fw-medium text-dark",children:p.label}),i.jsxs("span",{className:"text-muted",children:[h," (",g,"%)"]})]},u)})})]})]})};function In(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Kr(t,e){return typeof t=="function"?t(e):t}function ws(t,e){return n=>{e.setState(s=>({...s,[t]:Kr(n,s[t])}))}}function Og(t){return t instanceof Function}function dq(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function mq(t,e){const n=[],s=a=>{a.forEach(r=>{n.push(r);const o=e(r);o!=null&&o.length&&s(o)})};return s(t),n}function qt(t,e,n){let s=[],a;return r=>{let o;n.key&&n.debug&&(o=Date.now());const c=t(r);if(!(c.length!==s.length||c.some((u,p)=>s[p]!==u)))return a;s=c;let m;if(n.key&&n.debug&&(m=Date.now()),a=e(...c),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,p=Math.round((Date.now()-m)*100)/100,h=p/16,g=(x,v)=>{for(x=String(x);x.length<v;)x=" "+x;return x};console.info(`%c ${g(p,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n?.key)}return a}}function Ht(t,e,n,s){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:s}}function uq(t,e,n,s){const a=()=>{var o;return(o=r.getValue())!=null?o:t.options.renderFallbackValue},r={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(s),renderValue:a,getContext:qt(()=>[t,n,e,r],(o,c,d,m)=>({table:o,column:c,row:d,cell:m,getValue:m.getValue,renderValue:m.renderValue}),Ht(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(r,n,e,t)},{}),r}function hq(t,e,n,s){var a,r;const c={...t._getDefaultColumnDef(),...e},d=c.accessorKey;let m=(a=(r=c.id)!=null?r:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:d&&(d.includes(".")?u=h=>{let g=h;for(const v of d.split(".")){var x;g=(x=g)==null?void 0:x[v]}return g}:u=h=>h[c.accessorKey]),!m)throw new Error;let p={id:`${String(m)}`,accessorFn:u,parent:s,depth:n,columnDef:c,columns:[],getFlatColumns:qt(()=>[!0],()=>{var h;return[p,...(h=p.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},Ht(t.options,"debugColumns")),getLeafColumns:qt(()=>[t._getOrderColumnsFn()],h=>{var g;if((g=p.columns)!=null&&g.length){let x=p.columns.flatMap(v=>v.getLeafColumns());return h(x)}return[p]},Ht(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(p,t);return p}const Ci="debugHeaders";function $N(t,e,n){var s;let r={id:(s=n.id)!=null?s:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],c=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(c),o.push(d)};return c(r),o},getContext:()=>({table:t,header:r,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(r,t)}),r}const pq={createTable:t=>{t.getHeaderGroups=qt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>{var r,o;const c=(r=s?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?r:[],d=(o=a?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?o:[],m=n.filter(p=>!(s!=null&&s.includes(p.id))&&!(a!=null&&a.includes(p.id)));return th(e,[...c,...m,...d],t)},Ht(t.options,Ci)),t.getCenterHeaderGroups=qt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>(n=n.filter(r=>!(s!=null&&s.includes(r.id))&&!(a!=null&&a.includes(r.id))),th(e,n,t,"center")),Ht(t.options,Ci)),t.getLeftHeaderGroups=qt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,s)=>{var a;const r=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return th(e,r,t,"left")},Ht(t.options,Ci)),t.getRightHeaderGroups=qt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,s)=>{var a;const r=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return th(e,r,t,"right")},Ht(t.options,Ci)),t.getFooterGroups=qt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ht(t.options,Ci)),t.getLeftFooterGroups=qt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ht(t.options,Ci)),t.getCenterFooterGroups=qt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ht(t.options,Ci)),t.getRightFooterGroups=qt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ht(t.options,Ci)),t.getFlatHeaders=qt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ht(t.options,Ci)),t.getLeftFlatHeaders=qt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ht(t.options,Ci)),t.getCenterFlatHeaders=qt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ht(t.options,Ci)),t.getRightFlatHeaders=qt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ht(t.options,Ci)),t.getCenterLeafHeaders=qt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(t.options,Ci)),t.getLeftLeafHeaders=qt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(t.options,Ci)),t.getRightLeafHeaders=qt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(t.options,Ci)),t.getLeafHeaders=qt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,s)=>{var a,r,o,c,d,m;return[...(a=(r=e[0])==null?void 0:r.headers)!=null?a:[],...(o=(c=n[0])==null?void 0:c.headers)!=null?o:[],...(d=(m=s[0])==null?void 0:m.headers)!=null?d:[]].map(u=>u.getLeafHeaders()).flat()},Ht(t.options,Ci))}};function th(t,e,n,s){var a,r;let o=0;const c=function(h,g){g===void 0&&(g=1),o=Math.max(o,g),h.filter(x=>x.getIsVisible()).forEach(x=>{var v;(v=x.columns)!=null&&v.length&&c(x.columns,g+1)},0)};c(t);let d=[];const m=(h,g)=>{const x={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},v=[];h.forEach(y=>{const b=[...v].reverse()[0],j=y.column.depth===x.depth;let k,S=!1;if(j&&y.column.parent?k=y.column.parent:(k=y.column,S=!0),b&&b?.column===k)b.subHeaders.push(y);else{const N=$N(n,k,{id:[s,g,k.id,y?.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${v.filter(_=>_.column===k).length}`:void 0,depth:g,index:v.length});N.subHeaders.push(y),v.push(N)}x.headers.push(y),y.headerGroup=x}),d.push(x),g>0&&m(v,g-1)},u=e.map((h,g)=>$N(n,h,{depth:o,index:g}));m(u,o-1),d.reverse();const p=h=>h.filter(x=>x.column.getIsVisible()).map(x=>{let v=0,y=0,b=[0];x.subHeaders&&x.subHeaders.length?(b=[],p(x.subHeaders).forEach(k=>{let{colSpan:S,rowSpan:N}=k;v+=S,b.push(N)})):v=1;const j=Math.min(...b);return y=y+j,x.colSpan=v,x.rowSpan=y,{colSpan:v,rowSpan:y}});return p((a=(r=d[0])==null?void 0:r.headers)!=null?a:[]),d}const pw=(t,e,n,s,a,r,o)=>{let c={id:e,index:s,original:n,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(c._valuesCache.hasOwnProperty(d))return c._valuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return c._valuesCache[d]=m.accessorFn(c.original,s),c._valuesCache[d]},getUniqueValues:d=>{if(c._uniqueValuesCache.hasOwnProperty(d))return c._uniqueValuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(c._uniqueValuesCache[d]=m.columnDef.getUniqueValues(c.original,s),c._uniqueValuesCache[d]):(c._uniqueValuesCache[d]=[c.getValue(d)],c._uniqueValuesCache[d])},renderValue:d=>{var m;return(m=c.getValue(d))!=null?m:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>mq(c.subRows,d=>d.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let d=[],m=c;for(;;){const u=m.getParentRow();if(!u)break;d.push(u),m=u}return d.reverse()},getAllCells:qt(()=>[t.getAllLeafColumns()],d=>d.map(m=>uq(t,c,m,m.id)),Ht(t.options,"debugRows")),_getAllCellsByColumnId:qt(()=>[c.getAllCells()],d=>d.reduce((m,u)=>(m[u.column.id]=u,m),{}),Ht(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const m=t._features[d];m==null||m.createRow==null||m.createRow(c,t)}return c},gq={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},ET=(t,e,n)=>{var s,a;const r=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(r))};ET.autoRemove=t=>aa(t);const TT=(t,e,n)=>{var s;return!!(!((s=t.getValue(e))==null||(s=s.toString())==null)&&s.includes(n))};TT.autoRemove=t=>aa(t);const AT=(t,e,n)=>{var s;return((s=t.getValue(e))==null||(s=s.toString())==null?void 0:s.toLowerCase())===n?.toLowerCase()};AT.autoRemove=t=>aa(t);const DT=(t,e,n)=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(n)};DT.autoRemove=t=>aa(t);const RT=(t,e,n)=>!n.some(s=>{var a;return!((a=t.getValue(e))!=null&&a.includes(s))});RT.autoRemove=t=>aa(t)||!(t!=null&&t.length);const PT=(t,e,n)=>n.some(s=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(s)});PT.autoRemove=t=>aa(t)||!(t!=null&&t.length);const MT=(t,e,n)=>t.getValue(e)===n;MT.autoRemove=t=>aa(t);const IT=(t,e,n)=>t.getValue(e)==n;IT.autoRemove=t=>aa(t);const gw=(t,e,n)=>{let[s,a]=n;const r=t.getValue(e);return r>=s&&r<=a};gw.resolveFilterValue=t=>{let[e,n]=t,s=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,r=e===null||Number.isNaN(s)?-1/0:s,o=n===null||Number.isNaN(a)?1/0:a;if(r>o){const c=r;r=o,o=c}return[r,o]};gw.autoRemove=t=>aa(t)||aa(t[0])&&aa(t[1]);const nr={includesString:ET,includesStringSensitive:TT,equalsString:AT,arrIncludes:DT,arrIncludesAll:RT,arrIncludesSome:PT,equals:MT,weakEquals:IT,inNumberRange:gw};function aa(t){return t==null||t===""}const fq={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:ws("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);return typeof s=="string"?nr.includesString:typeof s=="number"?nr.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?nr.equals:Array.isArray(s)?nr.arrIncludes:nr.weakEquals},t.getFilterFn=()=>{var n,s;return Og(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(s=e.options.filterFns)==null?void 0:s[t.columnDef.filterFn])!=null?n:nr[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,s,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((s=e.options.enableColumnFilters)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(s=>s.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,s;return(n=(s=e.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(s=>{const a=t.getFilterFn(),r=s?.find(u=>u.id===t.id),o=Kr(n,r?r.value:void 0);if(BN(a,o,t)){var c;return(c=s?.filter(u=>u.id!==t.id))!=null?c:[]}const d={id:t.id,value:o};if(r){var m;return(m=s?.map(u=>u.id===t.id?d:u))!=null?m:[]}return s!=null&&s.length?[...s,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),s=a=>{var r;return(r=Kr(e,a))==null?void 0:r.filter(o=>{const c=n.find(d=>d.id===o.id);if(c){const d=c.getFilterFn();if(BN(d,o.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(s)},t.resetColumnFilters=e=>{var n,s;t.setColumnFilters(e?[]:(n=(s=t.initialState)==null?void 0:s.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function BN(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const vq=(t,e,n)=>n.reduce((s,a)=>{const r=a.getValue(t);return s+(typeof r=="number"?r:0)},0),xq=(t,e,n)=>{let s;return n.forEach(a=>{const r=a.getValue(t);r!=null&&(s>r||s===void 0&&r>=r)&&(s=r)}),s},yq=(t,e,n)=>{let s;return n.forEach(a=>{const r=a.getValue(t);r!=null&&(s<r||s===void 0&&r>=r)&&(s=r)}),s},bq=(t,e,n)=>{let s,a;return n.forEach(r=>{const o=r.getValue(t);o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)))}),[s,a]},wq=(t,e)=>{let n=0,s=0;if(e.forEach(a=>{let r=a.getValue(t);r!=null&&(r=+r)>=r&&(++n,s+=r)}),n)return s/n},kq=(t,e)=>{if(!e.length)return;const n=e.map(r=>r.getValue(t));if(!dq(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((r,o)=>r-o);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},jq=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),Nq=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Cq=(t,e)=>e.length,kv={sum:vq,min:xq,max:yq,extent:bq,mean:wq,median:kq,unique:jq,uniqueCount:Nq,count:Cq},Sq={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:ws("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(s=>s!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,s;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((s=e.options.enableGrouping)!=null?s:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);if(typeof s=="number")return kv.sum;if(Object.prototype.toString.call(s)==="[object Date]")return kv.extent},t.getAggregationFn=()=>{var n,s;if(!t)throw new Error;return Og(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(s=e.options.aggregationFns)==null?void 0:s[t.columnDef.aggregationFn])!=null?n:kv[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,s;t.setGrouping(e?[]:(n=(s=t.initialState)==null?void 0:s.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const s=e.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(t._groupingValuesCache[n]=s.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,s)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function _q(t,e,n){if(!(e!=null&&e.length)||!n)return t;const s=t.filter(r=>!e.includes(r.id));return n==="remove"?s:[...e.map(r=>t.find(o=>o.id===r)).filter(Boolean),...s]}const Eq={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:ws("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=qt(n=>[im(e,n)],n=>n.findIndex(s=>s.id===t.id),Ht(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var s;return((s=im(e,n)[0])==null?void 0:s.id)===t.id},t.getIsLastColumn=n=>{var s;const a=im(e,n);return((s=a[a.length-1])==null?void 0:s.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=qt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,s)=>a=>{let r=[];if(!(e!=null&&e.length))r=a;else{const o=[...e],c=[...a];for(;c.length&&o.length;){const d=o.shift(),m=c.findIndex(u=>u.id===d);m>-1&&r.push(c.splice(m,1)[0])}r=[...r,...c]}return _q(r,n,s)},Ht(t.options,"debugTable"))}},jv=()=>({left:[],right:[]}),Tq={getInitialState:t=>({columnPinning:jv(),...t}),getDefaultOptions:t=>({onColumnPinningChange:ws("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const s=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var r,o;if(n==="right"){var c,d;return{left:((c=a?.left)!=null?c:[]).filter(p=>!(s!=null&&s.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(s!=null&&s.includes(p))),...s]}}if(n==="left"){var m,u;return{left:[...((m=a?.left)!=null?m:[]).filter(p=>!(s!=null&&s.includes(p))),...s],right:((u=a?.right)!=null?u:[]).filter(p=>!(s!=null&&s.includes(p)))}}return{left:((r=a?.left)!=null?r:[]).filter(p=>!(s!=null&&s.includes(p))),right:((o=a?.right)!=null?o:[]).filter(p=>!(s!=null&&s.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(s=>{var a,r,o;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((r=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?r:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:s,right:a}=e.getState().columnPinning,r=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return r?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();return a?(n=(s=e.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=qt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,s,a)=>{const r=[...s??[],...a??[]];return n.filter(o=>!r.includes(o.column.id))},Ht(e.options,"debugRows")),t.getLeftVisibleCells=qt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,s)=>(s??[]).map(r=>n.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),Ht(e.options,"debugRows")),t.getRightVisibleCells=qt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,s)=>(s??[]).map(r=>n.find(o=>o.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),Ht(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,s;return t.setColumnPinning(e?jv():(n=(s=t.initialState)==null?void 0:s.columnPinning)!=null?n:jv())},t.getIsSomeColumnsPinned=e=>{var n;const s=t.getState().columnPinning;if(!e){var a,r;return!!((a=s.left)!=null&&a.length||(r=s.right)!=null&&r.length)}return!!((n=s[e])!=null&&n.length)},t.getLeftLeafColumns=qt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Ht(t.options,"debugColumns")),t.getRightLeafColumns=qt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Ht(t.options,"debugColumns")),t.getCenterLeafColumns=qt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s)=>{const a=[...n??[],...s??[]];return e.filter(r=>!a.includes(r.id))},Ht(t.options,"debugColumns"))}};function Aq(t){return t||(typeof document<"u"?document:null)}const nh={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nv=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Dq={getDefaultColumnDef:()=>nh,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nv(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ws("columnSizing",t),onColumnSizingInfoChange:ws("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,s,a;const r=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:nh.minSize,(s=r??t.columnDef.size)!=null?s:nh.size),(a=t.columnDef.maxSize)!=null?a:nh.maxSize)},t.getStart=qt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(0,t.getIndex(n)).reduce((a,r)=>a+r.getSize(),0),Ht(e.options,"debugColumns")),t.getAfter=qt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(t.getIndex(n)+1).reduce((a,r)=>a+r.getSize(),0),Ht(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:s,...a}=n;return a})},t.getCanResize=()=>{var n,s;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((s=e.options.enableColumnResizing)!=null?s:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var r;n+=(r=a.column.getSize())!=null?r:0}};return s(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const s=e.getColumn(t.column.id),a=s?.getCanResize();return r=>{if(!s||!a||(r.persist==null||r.persist(),Cv(r)&&r.touches&&r.touches.length>1))return;const o=t.getSize(),c=t?t.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[s.id,s.getSize()]],d=Cv(r)?Math.round(r.touches[0].clientX):r.clientX,m={},u=(b,j)=>{typeof j=="number"&&(e.setColumnSizingInfo(k=>{var S,N;const _=e.options.columnResizeDirection==="rtl"?-1:1,w=(j-((S=k?.startOffset)!=null?S:0))*_,T=Math.max(w/((N=k?.startSize)!=null?N:0),-.999999);return k.columnSizingStart.forEach(A=>{let[M,E]=A;m[M]=Math.round(Math.max(E+E*T,0)*100)/100}),{...k,deltaOffset:w,deltaPercentage:T}}),(e.options.columnResizeMode==="onChange"||b==="end")&&e.setColumnSizing(k=>({...k,...m})))},p=b=>u("move",b),h=b=>{u("end",b),e.setColumnSizingInfo(j=>({...j,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=Aq(n),x={moveHandler:b=>p(b.clientX),upHandler:b=>{g?.removeEventListener("mousemove",x.moveHandler),g?.removeEventListener("mouseup",x.upHandler),h(b.clientX)}},v={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),p(b.touches[0].clientX),!1),upHandler:b=>{var j;g?.removeEventListener("touchmove",v.moveHandler),g?.removeEventListener("touchend",v.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),h((j=b.touches[0])==null?void 0:j.clientX)}},y=Rq()?{passive:!1}:!1;Cv(r)?(g?.addEventListener("touchmove",v.moveHandler,y),g?.addEventListener("touchend",v.upHandler,y)):(g?.addEventListener("mousemove",x.moveHandler,y),g?.addEventListener("mouseup",x.upHandler,y)),e.setColumnSizingInfo(b=>({...b,startOffset:d,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:s.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nv():(n=t.initialState.columnSizingInfo)!=null?n:Nv())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0}}};let ih=null;function Rq(){if(typeof ih=="boolean")return ih;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ih=t,ih}function Cv(t){return t.type==="touchstart"}const Pq={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:ws("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(s=>({...s,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,s;const a=t.columns;return(n=a.length?a.some(r=>r.getIsVisible()):(s=e.getState().columnVisibility)==null?void 0:s[t.id])!=null?n:!0},t.getCanHide=()=>{var n,s;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((s=e.options.enableHiding)!=null?s:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=qt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Ht(e.options,"debugRows")),t.getVisibleCells=qt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],Ht(e.options,"debugRows"))},createTable:t=>{const e=(n,s)=>qt(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),Ht(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var s;t.setColumnVisibility(n?{}:(s=t.initialState.columnVisibility)!=null?s:{})},t.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,r)=>({...a,[r.id]:n||!(r.getCanHide!=null&&r.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;t.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function im(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Mq={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Iq={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:ws("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const s=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,s,a,r;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableGlobalFilter)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((r=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?r:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>nr.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:s}=t.options;return Og(s)?s:s==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[s])!=null?e:nr[s]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},Oq={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:ws("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?s:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=s=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(s),t.toggleAllRowsExpanded=s=>{s??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=s=>{var a,r;t.setExpanded(s?{}:(a=(r=t.initialState)==null?void 0:r.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const s=t.getState().expanded;return s===!0||Object.values(s).some(Boolean)},t.getIsAllRowsExpanded=()=>{const s=t.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let s=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(r=>{const o=r.split(".");s=Math.max(s,o.length)}),s},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(s=>{var a;const r=s===!0?!0:!!(s!=null&&s[t.id]);let o={};if(s===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{o[c]=!0}):o=s,n=(a=n)!=null?a:!r,!r&&n)return{...o,[t.id]:!0};if(r&&!n){const{[t.id]:c,...d}=o;return d}return s})},t.getIsExpanded=()=>{var n;const s=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:s===!0||s?.[t.id])},t.getCanExpand=()=>{var n,s,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((s=e.options.enableExpanding)!=null?s:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,s=t;for(;n&&s.parentId;)s=e.getRow(s.parentId,!0),n=s.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Xx=0,Jx=10,Sv=()=>({pageIndex:Xx,pageSize:Jx}),Lq={getInitialState:t=>({...t,pagination:{...Sv(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:ws("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?s:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=s=>{const a=r=>Kr(s,r);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=s=>{var a;t.setPagination(s?Sv():(a=t.initialState.pagination)!=null?a:Sv())},t.setPageIndex=s=>{t.setPagination(a=>{let r=Kr(s,a.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return r=Math.max(0,Math.min(r,o)),{...a,pageIndex:r}})},t.resetPageIndex=s=>{var a,r;t.setPageIndex(s?Xx:(a=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?a:Xx)},t.resetPageSize=s=>{var a,r;t.setPageSize(s?Jx:(a=(r=t.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?a:Jx)},t.setPageSize=s=>{t.setPagination(a=>{const r=Math.max(1,Kr(s,a.pageSize)),o=a.pageSize*a.pageIndex,c=Math.floor(o/r);return{...a,pageIndex:c,pageSize:r}})},t.setPageCount=s=>t.setPagination(a=>{var r;let o=Kr(s,(r=t.options.pageCount)!=null?r:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=qt(()=>[t.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((r,o)=>o)),a},Ht(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:s}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:s<a-1},t.previousPage=()=>t.setPageIndex(s=>s-1),t.nextPage=()=>t.setPageIndex(s=>s+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var s;return(s=t.options.pageCount)!=null?s:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var s;return(s=t.options.rowCount)!=null?s:t.getPrePaginationRowModel().rows.length}}},_v=()=>({top:[],bottom:[]}),Fq={getInitialState:t=>({rowPinning:_v(),...t}),getDefaultOptions:t=>({onRowPinningChange:ws("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,s,a)=>{const r=s?t.getLeafRows().map(d=>{let{id:m}=d;return m}):[],o=a?t.getParentRows().map(d=>{let{id:m}=d;return m}):[],c=new Set([...o,t.id,...r]);e.setRowPinning(d=>{var m,u;if(n==="bottom"){var p,h;return{top:((p=d?.top)!=null?p:[]).filter(v=>!(c!=null&&c.has(v))),bottom:[...((h=d?.bottom)!=null?h:[]).filter(v=>!(c!=null&&c.has(v))),...Array.from(c)]}}if(n==="top"){var g,x;return{top:[...((g=d?.top)!=null?g:[]).filter(v=>!(c!=null&&c.has(v))),...Array.from(c)],bottom:((x=d?.bottom)!=null?x:[]).filter(v=>!(c!=null&&c.has(v)))}}return{top:((m=d?.top)!=null?m:[]).filter(v=>!(c!=null&&c.has(v))),bottom:((u=d?.bottom)!=null?u:[]).filter(v=>!(c!=null&&c.has(v)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=e.options;return typeof s=="function"?s(t):(n=s??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:s,bottom:a}=e.getState().rowPinning,r=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return r?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();if(!a)return-1;const r=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:c}=o;return c});return(s=r?.indexOf(t.id))!=null?s:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,s;return t.setRowPinning(e?_v():(n=(s=t.initialState)==null?void 0:s.rowPinning)!=null?n:_v())},t.getIsSomeRowsPinned=e=>{var n;const s=t.getState().rowPinning;if(!e){var a,r;return!!((a=s.top)!=null&&a.length||(r=s.bottom)!=null&&r.length)}return!!((n=s[e])!=null&&n.length)},t._getPinnedRows=(e,n,s)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(o=>{const c=t.getRow(o,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(o=>e.find(c=>c.id===o))).filter(Boolean).map(o=>({...o,position:s}))},t.getTopRows=qt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Ht(t.options,"debugRows")),t.getBottomRows=qt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Ht(t.options,"debugRows")),t.getCenterRows=qt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,s)=>{const a=new Set([...n??[],...s??[]]);return e.filter(r=>!a.has(r.id))},Ht(t.options,"debugRows"))}},$q={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:ws("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const s={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(r=>{r.getCanSelect()&&(s[r.id]=!0)}):a.forEach(r=>{delete s[r.id]}),s})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const s=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(r=>{ey(a,r.id,s,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=qt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ht(t.options,"debugTable")),t.getFilteredSelectedRowModel=qt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ht(t.options,"debugTable")),t.getGroupedSelectedRowModel=qt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ht(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let s=!!(e.length&&Object.keys(n).length);return s&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let s=!!e.length;return s&&e.some(a=>!n[a.id])&&(s=!1),s},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,s)=>{const a=t.getIsSelected();e.setRowSelection(r=>{var o;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return r;const c={...r};return ey(c,t.id,n,(o=s?.selectChildren)!=null?o:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return fw(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return ty(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return ty(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return s=>{var a;n&&t.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},ey=(t,e,n,s,a)=>{var r;const o=a.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),o.getCanSelect()&&(t[e]=!0)):delete t[e],s&&(r=o.subRows)!=null&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(c=>ey(t,c.id,n,s,a))};function Ev(t,e){const n=t.getState().rowSelection,s=[],a={},r=function(o,c){return o.map(d=>{var m;const u=fw(d,n);if(u&&(s.push(d),a[d.id]=d),(m=d.subRows)!=null&&m.length&&(d={...d,subRows:r(d.subRows)}),u)return d}).filter(Boolean)};return{rows:r(e.rows),flatRows:s,rowsById:a}}function fw(t,e){var n;return(n=e[t.id])!=null?n:!1}function ty(t,e,n){var s;if(!((s=t.subRows)!=null&&s.length))return!1;let a=!0,r=!1;return t.subRows.forEach(o=>{if(!(r&&!a)&&(o.getCanSelect()&&(fw(o,e)?r=!0:a=!1),o.subRows&&o.subRows.length)){const c=ty(o,e);c==="all"?r=!0:(c==="some"&&(r=!0),a=!1)}}),a?"all":r?"some":!1}const ny=/([0-9]+)/gm,Bq=(t,e,n)=>OT(dl(t.getValue(n)).toLowerCase(),dl(e.getValue(n)).toLowerCase()),qq=(t,e,n)=>OT(dl(t.getValue(n)),dl(e.getValue(n))),Hq=(t,e,n)=>vw(dl(t.getValue(n)).toLowerCase(),dl(e.getValue(n)).toLowerCase()),zq=(t,e,n)=>vw(dl(t.getValue(n)),dl(e.getValue(n))),Vq=(t,e,n)=>{const s=t.getValue(n),a=e.getValue(n);return s>a?1:s<a?-1:0},Uq=(t,e,n)=>vw(t.getValue(n),e.getValue(n));function vw(t,e){return t===e?0:t>e?1:-1}function dl(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function OT(t,e){const n=t.split(ny).filter(Boolean),s=e.split(ny).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),r=s.shift(),o=parseInt(a,10),c=parseInt(r,10),d=[o,c].sort();if(isNaN(d[0])){if(a>r)return 1;if(r>a)return-1;continue}if(isNaN(d[1]))return isNaN(o)?-1:1;if(o>c)return 1;if(c>o)return-1}return n.length-s.length}const Ed={alphanumeric:Bq,alphanumericCaseSensitive:qq,text:Hq,textCaseSensitive:zq,datetime:Vq,basic:Uq},Wq={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:ws("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const r=a?.getValue(t.id);if(Object.prototype.toString.call(r)==="[object Date]")return Ed.datetime;if(typeof r=="string"&&(s=!0,r.split(ny).length>1))return Ed.alphanumeric}return s?Ed.text:Ed.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,s;if(!t)throw new Error;return Og(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(s=e.options.sortingFns)==null?void 0:s[t.columnDef.sortingFn])!=null?n:Ed[t.columnDef.sortingFn]},t.toggleSorting=(n,s)=>{const a=t.getNextSortingOrder(),r=typeof n<"u"&&n!==null;e.setSorting(o=>{const c=o?.find(g=>g.id===t.id),d=o?.findIndex(g=>g.id===t.id);let m=[],u,p=r?n:a==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&s?c?u="toggle":u="add":o!=null&&o.length&&d!==o.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(r||a||(u="remove")),u==="add"){var h;m=[...o,{id:t.id,desc:p}],m.splice(0,m.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?m=o.map(g=>g.id===t.id?{...g,desc:p}:g):u==="remove"?m=o.filter(g=>g.id!==t.id):m=[{id:t.id,desc:p}];return m})},t.getFirstSortDir=()=>{var n,s;return((n=(s=t.columnDef.sortDescFirst)!=null?s:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var s,a;const r=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==r&&((s=e.options.enableSortingRemoval)==null||s)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":r},t.getCanSort=()=>{var n,s;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((s=e.options.enableSorting)!=null?s:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,s;return(n=(s=t.columnDef.enableMultiSort)!=null?s:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const s=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return s?s.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,s;return(n=(s=e.getState().sorting)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return s=>{n&&(s.persist==null||s.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(s):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,s;t.setSorting(e?[]:(n=(s=t.initialState)==null?void 0:s.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Kq=[pq,Pq,Eq,Tq,gq,fq,Mq,Iq,Wq,Sq,Oq,Lq,Fq,$q,Dq];function Gq(t){var e,n;const s=[...Kq,...(e=t._features)!=null?e:[]];let a={_features:s};const r=a._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),o=h=>a.options.mergeOptions?a.options.mergeOptions(r,h):{...r,...h};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(h=>{var g;d=(g=h.getInitialState==null?void 0:h.getInitialState(d))!=null?g:d});const m=[];let u=!1;const p={_features:s,options:{...r,...t},initialState:d,_queue:h=>{m.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:h=>{const g=Kr(h,a.options);a.options=o(g)},getState:()=>a.options.state,setState:h=>{a.options.onStateChange==null||a.options.onStateChange(h)},_getRowId:(h,g,x)=>{var v;return(v=a.options.getRowId==null?void 0:a.options.getRowId(h,g,x))!=null?v:`${x?[x.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(h,g)=>{let x=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[h];if(!x&&(x=a.getCoreRowModel().rowsById[h],!x))throw new Error;return x},_getDefaultColumnDef:qt(()=>[a.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:x=>{const v=x.header.column.columnDef;return v.accessorKey?v.accessorKey:v.accessorFn?v.id:null},cell:x=>{var v,y;return(v=(y=x.renderValue())==null||y.toString==null?void 0:y.toString())!=null?v:null},...a._features.reduce((x,v)=>Object.assign(x,v.getDefaultColumnDef==null?void 0:v.getDefaultColumnDef()),{}),...h}},Ht(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:qt(()=>[a._getColumnDefs()],h=>{const g=function(x,v,y){return y===void 0&&(y=0),x.map(b=>{const j=hq(a,b,y,v),k=b;return j.columns=k.columns?g(k.columns,j,y+1):[],j})};return g(h)},Ht(t,"debugColumns")),getAllFlatColumns:qt(()=>[a.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),Ht(t,"debugColumns")),_getAllFlatColumnsById:qt(()=>[a.getAllFlatColumns()],h=>h.reduce((g,x)=>(g[x.id]=x,g),{}),Ht(t,"debugColumns")),getAllLeafColumns:qt(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(h,g)=>{let x=h.flatMap(v=>v.getLeafColumns());return g(x)},Ht(t,"debugColumns")),getColumn:h=>a._getAllFlatColumnsById()[h]};Object.assign(a,p);for(let h=0;h<a._features.length;h++){const g=a._features[h];g==null||g.createTable==null||g.createTable(a)}return a}function LT(){return t=>qt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,r,o){r===void 0&&(r=0);const c=[];for(let m=0;m<a.length;m++){const u=pw(t,t._getRowId(a[m],m,o),a[m],m,r,void 0,o?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),t.options.getSubRows){var d;u.originalSubRows=t.options.getSubRows(a[m],m),(d=u.originalSubRows)!=null&&d.length&&(u.subRows=s(u.originalSubRows,r+1,u))}}return c};return n.rows=s(e),n},Ht(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Yq(t,e,n){return n.options.filterFromLeafRows?Qq(t,e,n):Zq(t,e,n)}function Qq(t,e,n){var s;const a=[],r={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){var p;let g=d[h];const x=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(x.columnFilters=g.columnFilters,(p=g.subRows)!=null&&p.length&&m<o){if(x.subRows=c(g.subRows,m+1),g=x,e(g)&&!x.subRows.length){u.push(g),r[g.id]=g,a.push(g);continue}if(e(g)||x.subRows.length){u.push(g),r[g.id]=g,a.push(g);continue}}else g=x,e(g)&&(u.push(g),r[g.id]=g,a.push(g))}return u};return{rows:c(t),flatRows:a,rowsById:r}}function Zq(t,e,n){var s;const a=[],r={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){let g=d[h];if(e(g)){var p;if((p=g.subRows)!=null&&p.length&&m<o){const v=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);v.subRows=c(g.subRows,m+1),g=v}u.push(g),a.push(g),r[g.id]=g}}return u};return{rows:c(t),flatRows:a,rowsById:r}}function Xq(){return t=>qt(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,s)=>{if(!e.rows.length||!(n!=null&&n.length)&&!s){for(let h=0;h<e.flatRows.length;h++)e.flatRows[h].columnFilters={},e.flatRows[h].columnFiltersMeta={};return e}const a=[],r=[];(n??[]).forEach(h=>{var g;const x=t.getColumn(h.id);if(!x)return;const v=x.getFilterFn();v&&a.push({id:h.id,filterFn:v,resolvedValue:(g=v.resolveFilterValue==null?void 0:v.resolveFilterValue(h.value))!=null?g:h.value})});const o=(n??[]).map(h=>h.id),c=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());s&&c&&d.length&&(o.push("__global__"),d.forEach(h=>{var g;r.push({id:h.id,filterFn:c,resolvedValue:(g=c.resolveFilterValue==null?void 0:c.resolveFilterValue(s))!=null?g:s})}));let m,u;for(let h=0;h<e.flatRows.length;h++){const g=e.flatRows[h];if(g.columnFilters={},a.length)for(let x=0;x<a.length;x++){m=a[x];const v=m.id;g.columnFilters[v]=m.filterFn(g,v,m.resolvedValue,y=>{g.columnFiltersMeta[v]=y})}if(r.length){for(let x=0;x<r.length;x++){u=r[x];const v=u.id;if(u.filterFn(g,v,u.resolvedValue,y=>{g.columnFiltersMeta[v]=y})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const p=h=>{for(let g=0;g<o.length;g++)if(h.columnFilters[o[g]]===!1)return!1;return!0};return Yq(e.rows,p,t)},Ht(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function Jq(){return t=>qt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const s=t.getState().sorting,a=[],r=s.filter(d=>{var m;return(m=t.getColumn(d.id))==null?void 0:m.getCanSort()}),o={};r.forEach(d=>{const m=t.getColumn(d.id);m&&(o[d.id]={sortUndefined:m.columnDef.sortUndefined,invertSorting:m.columnDef.invertSorting,sortingFn:m.getSortingFn()})});const c=d=>{const m=d.map(u=>({...u}));return m.sort((u,p)=>{for(let g=0;g<r.length;g+=1){var h;const x=r[g],v=o[x.id],y=v.sortUndefined,b=(h=x?.desc)!=null?h:!1;let j=0;if(y){const k=u.getValue(x.id),S=p.getValue(x.id),N=k===void 0,_=S===void 0;if(N||_){if(y==="first")return N?-1:1;if(y==="last")return N?1:-1;j=N&&_?0:N?y:-y}}if(j===0&&(j=v.sortingFn(u,p,x.id)),j!==0)return b&&(j*=-1),v.invertSorting&&(j*=-1),j}return u.index-p.index}),m.forEach(u=>{var p;a.push(u),(p=u.subRows)!=null&&p.length&&(u.subRows=c(u.subRows))}),m};return{rows:c(n.rows),flatRows:a,rowsById:n.rowsById}},Ht(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function Cp(t,e){return t?e7(t)?f.createElement(t,e):t:null}function e7(t){return t7(t)||typeof t=="function"||n7(t)}function t7(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function n7(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function FT(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=f.useState(()=>({current:Gq(e)})),[s,a]=f.useState(()=>n.current.initialState);return n.current.setOptions(r=>({...r,...t,state:{...s,...t.state},onStateChange:o=>{a(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}const Nn=({columns:t=5,rows:e=5,showHeader:n=!0,showActions:s=!0,showPagination:a=!0,showBreadcrumb:r=!1,showPageHeader:o=!1,showFilterBar:c=!1})=>{const d=s?t+1:t;return i.jsxs(i.Fragment,{children:[r&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"100px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"120px",height:"1rem"})]}),i.jsx(C,{width:"80px",height:"2.5rem",className:"rounded"})]}),o&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"200px",height:"1.75rem"})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx(C,{width:"140px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"100px",height:"2.5rem",className:"rounded"})]})]}),c&&i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 px-0 pt-4",children:[i.jsxs("div",{className:"d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(C,{width:"180px",height:"2.5rem"}),i.jsx(C,{width:"120px",height:"2.5rem"})]}),i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx(C,{width:"200px",height:"2.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table",children:[n&&i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:d}).map((m,u)=>i.jsx("th",{className:"py-3",children:i.jsx(C,{width:"80%",height:"1rem"})},`th-${u}`))})}),i.jsx("tbody",{children:Array.from({length:e}).map((m,u)=>i.jsx("tr",{children:Array.from({length:d}).map((p,h)=>i.jsx("td",{className:"py-3",children:h===0?i.jsx(C,{width:"1rem",height:"1rem",className:"rounded"}):h===1?i.jsx(C,{width:"30px",height:"1rem"}):h>=2&&h<=d-2?i.jsx(Hs,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"}):h===d-1&&s?i.jsxs("div",{className:"d-flex gap-1",children:[i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"})]}):i.jsx(C,{width:"90%",height:"1rem"})},`cell-${u}-${h}`))},`row-${u}`))})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 flex-wrap gap-2 pb-3 px-4",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((m,u)=>i.jsx(C,{width:"2.5rem",height:"2.5rem",className:"rounded"},`page-${u}`))})]})]})})]})},wn=({data:t=[],columns:e=[],pagination:n=null,isLoading:s=!1,error:a=null,bordered:r=!0,responsive:o=!0,onPageChange:c=()=>{},onPerPageChange:d=()=>{},onSortingChange:m=()=>{},currentPage:u=1,perPage:p=10,totalItems:h=0,lastPage:g=1,enableSelection:x=!0,manualPagination:v=!0,manualFiltering:y=!0,manualSorting:b=!1,moduleNamePlural:j="",renderEmptyState:k=null,bulkActionsButtonText:S="",bulkActions:N=[],isBulkActionShow:_=()=>{},skeletonColumns:w=null,skeletonRows:T=null,rowIdField:A="id",enableHighlightNewItems:M=!0})=>{const E=In(),P=f.useRef(null),[D,O]=f.useState({sorting:[],page:u,perPage:p}),[F,q]=f.useState(""),[U,K]=f.useState(new Set),ne=f.useRef([]);f.useEffect(()=>{if(M&&t?.length>ne.current?.length){const Z=new Set(ne.current.map(R=>R[A]||R.id)),X=t.filter(R=>!Z.has(R[A]||R.id)).map(R=>R[A]||R.id);if(X.length>0){K(G=>{const ee=new Set(G);return X.forEach(ae=>ee.add(ae)),ee});const R=setTimeout(()=>{K(G=>{const ee=new Set(G);return X.forEach(ae=>ee.delete(ae)),ee})},3e3);return()=>clearTimeout(R)}}ne.current=t},[t,M,A]),f.useEffect(()=>{O(Z=>({...Z,page:u,perPage:p})),z(p==="all"||p===h)},[u,p,h]);const Y=f.useMemo(()=>{let Z=[...e];return x&&Z.unshift(E.display({id:"selection",header:({table:X})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:X.getIsAllRowsSelected(),onChange:X.getToggleAllRowsSelectedHandler()}),cell:({row:X})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:X.getIsSelected(),onChange:X.getToggleSelectedHandler()})})),Z},[e,x,E]),fe=(Z,X)=>{O(R=>({...R,[Z]:X}))},le=Z=>{fe("page",Z),c(Z)},[W,z]=f.useState(!1),ie=Z=>{if(Z==="all")z(!0),fe("perPage","all"),d("all");else{z(!1);const X=Number(Z);fe("perPage",X),d(X)}},re=FT({data:t,columns:Y,state:{sorting:Array.isArray(D.sorting)?D.sorting:[]},onSortingChange:Z=>{const X=typeof Z=="function"?Z(Array.isArray(D.sorting)?D.sorting:[]):Array.isArray(Z)?Z:[];fe("sorting",X),m(X)},getCoreRowModel:LT(),getFilteredRowModel:Xq(),getSortedRowModel:b?void 0:Jq(),enableRowSelection:x,enableSorting:!0,manualPagination:v,manualFiltering:y,manualSorting:b}),de=re.getSelectedRowModel().rows;f.useEffect(()=>{_(de.length>0&&N?.length>0)},[de]);const L=()=>{if(!F)return;const Z=(N||[]).find(X=>X.label===F);Z&&typeof Z.action=="function"&&Z.action(de.map(X=>X.original),()=>re.resetRowSelection())},Q=f.useMemo(()=>{const X=D.page-1,R=D.page+1,G=[],ee=[];let ae;for(let I=1;I<=g;I++)(I===1||I===g||I>=X&&I<=R)&&G.push(I);for(let I of G)ae&&(I-ae===2?ee.push(ae+1):I-ae!==1&&ee.push("...")),ee.push(I),ae=I;return ee},[D.page,g]),V=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:Y.length,className:"text-center py-5 border-start border-end",children:i.jsx("h6",{className:"text-secondary fw-normal mb-0",children:l(`No ${j||"items"} found`,"kivicare-clinic-management-system")})})});return i.jsxs(i.Fragment,{children:[a&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:typeof a=="string"?a:a.message||l("An error occurred while loading data.","kivicare-clinic-management-system")}),s?i.jsx(Nn,{columns:w||Y.length,rows:T||(p==="all"?10:Math.min(p,10)),showActions:x}):i.jsxs(i.Fragment,{children:[i.jsx(wi,{in:de.length>0&&N?.length>0,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,appear:!0,nodeRef:P,children:i.jsx("div",{ref:P,className:"position-absolute top-0 rounded w-100 card",style:{zIndex:10},children:i.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center py-2 px-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{children:[de.length," ",de.length===1?l("row selected","kivicare-clinic-management-system"):l("rows selected","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link ",onClick:()=>re.resetRowSelection(),children:l("Clear","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ot,{value:F?{value:F,label:F}:null,onChange:Z=>q(Z?Z.value:""),options:N.map(Z=>({value:Z.label,label:Z.label})),placeholder:S||l("Bulk Actions","kivicare-clinic-management-system"),className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Z=>({...Z,zIndex:9999})}}),i.jsx("button",{className:"btn btn-primary btn-sm px-3",onClick:L,disabled:!F||de.length===0,children:l("Apply","kivicare-clinic-management-system")})]})]})})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:o?"table-responsive":"",children:i.jsxs("table",{className:"table table-bordered  rounded",children:[i.jsx("thead",{children:re.getHeaderGroups().map(Z=>i.jsx("tr",{children:Z.headers.map(X=>i.jsx("th",{colSpan:X.colSpan,className:`align-middle ${X.column.columnDef.headerClassName||""}`,children:X.isPlaceholder?null:i.jsxs("div",{className:X.column.getCanSort()?"cursor-pointer user-select-none d-flex align-items-center justify-content-between":"",onClick:X.column.getToggleSortingHandler(),children:[Cp(X.column.columnDef.header,X.getContext()),X.column.getCanSort()&&i.jsx("span",{className:"ms-2",children:(()=>{const R=X.column.getIsSorted();return R==="asc"?i.jsx("i",{className:"ph ph-arrow-up"}):R==="desc"?i.jsx("i",{className:"ph ph-arrow-down"}):i.jsx("i",{className:"ph ph-arrows-vertical opacity-50"})})()})]})},X.id))},Z.id))}),i.jsx("tbody",{children:re.getRowModel().rows.length>0?re.getRowModel().rows.map(Z=>{const X=Z.original[A]||Z.original.id,R=U.has(X);return i.jsx("tr",{className:`align-middle ${Z.getIsSelected()?"table-row-selected":""} ${R?"new-row-highlight":""}`,children:Z.getVisibleCells().map(G=>i.jsx("td",{children:Cp(G.column.columnDef.cell,G.getContext())},G.id))},Z.id)}):k?k():V()})]})}),(n||h>0)&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-around justify-content-md-between align-items-center gap-3 mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{children:l("Show","kivicare-clinic-management-system")}),i.jsxs("select",{className:"form-select form-select-sm w-auto",value:W?"all":D.perPage,onChange:Z=>ie(Z.target.value),children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"25",children:"25"}),i.jsx("option",{value:"50",children:"50"}),i.jsx("option",{value:"100",children:"100"}),i.jsx("option",{value:"all",children:l("All","kivicare-clinic-management-system")})]}),i.jsx("span",{children:l("entries","kivicare-clinic-management-system")})]}),i.jsx("div",{children:W?Ti(l("Showing all entries","kivicare-clinic-management-system")):Ti(l("Showing %1$d to %2$d of %3$d entries","kivicare-clinic-management-system"),Math.min((D.page-1)*D.perPage+1,h),Math.min(D.page*D.perPage,h),h)}),(n||h>0)&&!W&&i.jsx("nav",{"aria-label":"Page navigation",children:h>0&&i.jsxs("ul",{className:"pagination pagination-sm",children:[i.jsx("li",{className:`page-item ${D.page===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>le(Math.max(D.page-1,1)),disabled:D.page===1,children:l("Previous","kivicare-clinic-management-system")})}),Q.map((Z,X)=>i.jsx("li",{className:`page-item ${D.page===Z?"active":""} ${Z==="..."?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>typeof Z=="number"&&le(Z),disabled:Z==="...",children:Z})},X)),i.jsx("li",{className:`page-item ${D.page===g?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>le(Math.min(D.page+1,g)),disabled:D.page===g,children:l("Next","kivicare-clinic-management-system")})})]})})]})]})]})]})};wn.propTypes={data:De.array.isRequired,columns:De.array.isRequired,pagination:De.object,isLoading:De.bool,error:De.oneOfType([De.string,De.object]),bulkActionsButtonText:De.string,bulkActions:De.arrayOf(De.shape({label:De.string.isRequired,action:De.func.isRequired})),striped:De.bool,bordered:De.bool,hover:De.bool,responsive:De.bool,onPageChange:De.func,onPerPageChange:De.func,onSortingChange:De.func,onRowSelect:De.func,currentPage:De.number,perPage:De.number,totalItems:De.number,lastPage:De.number,enableSelection:De.bool,manualPagination:De.bool,manualFiltering:De.bool,manualSorting:De.bool,moduleBaseUrl:De.string,moduleNameSingular:De.string,moduleNamePlural:De.string,renderCustomActions:De.func,renderEmptyState:De.func,beforeTable:De.node,afterTable:De.node,customBulkActions:De.arrayOf(De.shape({label:De.string.isRequired,action:De.func.isRequired})),isBulkActionShow:De.func,rowIdField:De.string,enableHighlightNewItems:De.bool};function Mc({src:t,variant:e="primary",size:n="md",alt:s="Avatar",text:a="",badge:r=null,className:o="",onClick:c=null}){const d={xs:"avatar-40",sm:"avatar-40",md:"avatar-50",lg:"avatar-40",xl:"avatar-40"},m=typeof n=="string"?d[n]||d.md:`${n}px`,u=r?{position:"absolute",bottom:"0",right:"0",transform:"translate(20%, 20%)",border:"1px solid white",borderRadius:"50%",width:`calc(${m} * 0.4)`,height:`calc(${m} * 0.4)`,backgroundColor:`var(--bs-${r.variant||"danger"})`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:`calc(${m} * 0.2)`,color:"white"}:{},p=()=>a?a.substring(0,2).toUpperCase():s.substring(0,2).toUpperCase();return i.jsxs("div",{onClick:c,role:c?"button":void 0,children:[t?i.jsx(G_,{src:t,alt:s,className:`avatar  ${o} ${m}`}):i.jsx("div",{className:`avatar  ${o} ${m}`,children:i.jsx("span",{children:p()})}),r&&i.jsx("div",{style:u,children:r.text})]})}Mc.propTypes={src:De.string,variant:De.string,size:De.oneOfType([De.string,De.number]),alt:De.string,text:De.string,badge:De.shape({variant:De.string,text:De.oneOfType([De.string,De.number])}),className:De.string,onClick:De.func};const Zt=({profileUrl:t=null,name:e="",email:n="",gender:s="",phone:a="",address:r="",dob:o="",clinicName:c="",fallbackText:d=null,variant:m="primary",size:u="md",nameLabel:p=l("User Name","kivicare-clinic-management-system"),className:h="",onClick:g=null,rounded:x=!0})=>{const y=t?"":(k=>{if(!k)return"U";const S=k.trim().split(" ");return S.length===1?S[0].charAt(0).toUpperCase():(S[0].charAt(0)+S[1].charAt(0)).toUpperCase()})(e),b=typeof g=="function",j=i.jsxs("div",{className:`d-flex align-items-center gap-3 ${h} ${b?"cursor-pointer":""}`,children:[i.jsx(Mc,{src:t,alt:e||p,text:y,variant:m,size:u,className:`flex-shrink-0 bg-primary-subtle  ${x?"rounded-circle":"rounded"} `}),i.jsxs("div",{className:"user-data",children:[i.jsx("h6",{className:"font-size-14 mb-0",children:e||p}),c&&i.jsx("p",{className:"font-size-12 text-muted mb-1",children:c}),i.jsxs("div",{className:"d-flex align-items-center column-gap-5 row-gap-1 flex-wrap",children:[n&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsxs("span",{className:"text-muted line-anywhere",children:[" ",n]})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{className:"font-size-14 line-anywhere",children:a})]}),s&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-gender-"+s}),i.jsx("span",{className:"font-size-14",children:s})]}),o&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-cake"}),i.jsx("span",{className:"font-size-14",children:o})]}),r&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{className:"font-size-14",children:r})]})]})]})]});return b?i.jsx("div",{onClick:g,role:"button",tabIndex:0,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),g())},style:{cursor:"pointer"},children:j}):j};var i7=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],qN=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),r=String(s.getOptionValue(n)).toLowerCase(),o=String(s.getOptionLabel(n)).toLowerCase();return r===a||o===a},Tv={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,s,a){return!(!e||n.some(function(r){return qN(e,r,a)})||s.some(function(r){return qN(e,r,a)}))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};function s7(t){var e=t.allowCreateWhileLoading,n=e===void 0?!1:e,s=t.createOptionPosition,a=s===void 0?"last":s,r=t.formatCreateLabel,o=r===void 0?Tv.formatCreateLabel:r,c=t.isValidNewOption,d=c===void 0?Tv.isValidNewOption:c,m=t.getNewOptionData,u=m===void 0?Tv.getNewOptionData:m,p=t.onCreateOption,h=t.options,g=h===void 0?[]:h,x=t.onChange,v=ua(t,i7),y=v.getOptionValue,b=y===void 0?N2:y,j=v.getOptionLabel,k=j===void 0?j2:j,S=v.inputValue,N=v.isLoading,_=v.isMulti,w=v.value,T=v.name,A=f.useMemo(function(){return d(S,mp(w),g,{getOptionValue:b,getOptionLabel:k})?u(S,o(S)):void 0},[o,u,k,b,S,d,g,w]),M=f.useMemo(function(){return(n||!N)&&A?a==="first"?[A].concat(cc(g)):[].concat(cc(g),[A]):g},[n,a,N,A,g]),E=f.useCallback(function(P,D){if(D.action!=="select-option")return x(P,D);var O=Array.isArray(P)?P:[P];if(O[O.length-1]===A){if(p)p(S);else{var F=u(S,S),q={action:"create-option",name:T,option:F};x(Fd(_,[].concat(cc(mp(w)),[F]),F),q)}return}x(P,D)},[u,S,_,T,A,p,x,w]);return It(It({},v),{},{options:M,onChange:E})}var a7=f.forwardRef(function(t,e){var n=$E(t),s=s7(n);return f.createElement(Qb,Pt({ref:e},s))}),ko=a7;function $T(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function r7(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HN(t,e){return t.get($T(t,e))}function l7(t,e,n){r7(t,e),e.set(t,n)}function o7(t,e,n){return t.set($T(t,e),n),n}const c7=100,Lt={},d7=()=>{Lt.previousActiveElement instanceof HTMLElement?(Lt.previousActiveElement.focus(),Lt.previousActiveElement=null):document.body&&document.body.focus()},m7=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;Lt.restoreFocusTimeout=setTimeout(()=>{d7(),e()},c7),window.scrollTo(n,s)}),BT="swal2-",u7=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Oe=u7.reduce((t,e)=>(t[e]=BT+e,t),{}),h7=["success","warning","info","question","error"],Sp=h7.reduce((t,e)=>(t[e]=BT+e,t),{}),qT="SweetAlert2:",xw=t=>t.charAt(0).toUpperCase()+t.slice(1),Vi=t=>{console.warn(`${qT} ${typeof t=="object"?t.join(" "):t}`)},jo=t=>{console.error(`${qT} ${t}`)},zN=[],p7=t=>{zN.includes(t)||(zN.push(t),Vi(t))},HT=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;p7(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Lg=t=>typeof t=="function"?t():t,yw=t=>t&&typeof t.toPromise=="function",Zm=t=>yw(t)?t.toPromise():Promise.resolve(t),bw=t=>t&&Promise.resolve(t)===t,Ui=()=>document.body.querySelector(`.${Oe.container}`),Xm=t=>{const e=Ui();return e?e.querySelector(t):null},js=t=>Xm(`.${t}`),on=()=>js(Oe.popup),Xc=()=>js(Oe.icon),g7=()=>js(Oe["icon-content"]),zT=()=>js(Oe.title),ww=()=>js(Oe["html-container"]),VT=()=>js(Oe.image),kw=()=>js(Oe["progress-steps"]),Fg=()=>js(Oe["validation-message"]),Pa=()=>Xm(`.${Oe.actions} .${Oe.confirm}`),Jc=()=>Xm(`.${Oe.actions} .${Oe.cancel}`),No=()=>Xm(`.${Oe.actions} .${Oe.deny}`),f7=()=>js(Oe["input-label"]),ed=()=>Xm(`.${Oe.loader}`),Jm=()=>js(Oe.actions),UT=()=>js(Oe.footer),$g=()=>js(Oe["timer-progress-bar"]),jw=()=>js(Oe.close),v7=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Nw=()=>{const t=on();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((r,o)=>{const c=parseInt(r.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return c>d?1:c<d?-1:0}),s=t.querySelectorAll(v7),a=Array.from(s).filter(r=>r.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(r=>rs(r))},Cw=()=>gr(document.body,Oe.shown)&&!gr(document.body,Oe["toast-shown"])&&!gr(document.body,Oe["no-backdrop"]),Bg=()=>{const t=on();return t?gr(t,Oe.toast):!1},x7=()=>{const t=on();return t?t.hasAttribute("data-loading"):!1},Ns=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{t.appendChild(o)});const r=s.querySelector("body");r&&Array.from(r.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?t.appendChild(o.cloneNode(!0)):t.appendChild(o)})}},gr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},y7=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(Oe).includes(n)&&!Object.values(Sp).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},ks=(t,e,n)=>{if(y7(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){Vi(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}en(t,s)}},qg=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${Oe.popup} > .${Oe[e]}`);case"checkbox":return t.querySelector(`.${Oe.popup} > .${Oe.checkbox} input`);case"radio":return t.querySelector(`.${Oe.popup} > .${Oe.radio} input:checked`)||t.querySelector(`.${Oe.popup} > .${Oe.radio} input:first-child`);case"range":return t.querySelector(`.${Oe.popup} > .${Oe.range} input`);default:return t.querySelector(`.${Oe.popup} > .${Oe.input}`)}},WT=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},KT=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(s):a.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},en=(t,e)=>{KT(t,e,!0)},Ks=(t,e)=>{KT(t,e,!1)},Gr=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const a=n[s];if(a instanceof HTMLElement&&gr(a,e))return a}},Kl=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},pi=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},Mi=t=>{t&&(t.style.display="none")},Sw=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{eu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},VN=(t,e,n,s)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,s)},eu=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?pi(t,n):Mi(t)},rs=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),b7=()=>!rs(Pa())&&!rs(No())&&!rs(Jc()),UN=t=>t.scrollHeight>t.clientHeight,GT=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},_w=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=$g();n&&rs(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},w7=()=>{const t=$g();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},k7=()=>typeof window>"u"||typeof document>"u",j7=`
 <div aria-labelledby="${Oe.title}" aria-describedby="${Oe["html-container"]}" class="${Oe.popup}" tabindex="-1">
   <button type="button" class="${Oe.close}"></button>
   <ul class="${Oe["progress-steps"]}"></ul>
   <div class="${Oe.icon}"></div>
   <img class="${Oe.image}" />
   <h2 class="${Oe.title}" id="${Oe.title}"></h2>
   <div class="${Oe["html-container"]}" id="${Oe["html-container"]}"></div>
   <input class="${Oe.input}" id="${Oe.input}" />
   <input type="file" class="${Oe.file}" />
   <div class="${Oe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Oe.select}" id="${Oe.select}"></select>
   <div class="${Oe.radio}"></div>
   <label class="${Oe.checkbox}">
     <input type="checkbox" id="${Oe.checkbox}" />
     <span class="${Oe.label}"></span>
   </label>
   <textarea class="${Oe.textarea}" id="${Oe.textarea}"></textarea>
   <div class="${Oe["validation-message"]}" id="${Oe["validation-message"]}"></div>
   <div class="${Oe.actions}">
     <div class="${Oe.loader}"></div>
     <button type="button" class="${Oe.confirm}"></button>
     <button type="button" class="${Oe.deny}"></button>
     <button type="button" class="${Oe.cancel}"></button>
   </div>
   <div class="${Oe.footer}"></div>
   <div class="${Oe["timer-progress-bar-container"]}">
     <div class="${Oe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),N7=()=>{const t=Ui();return t?(t.remove(),Ks([document.documentElement,document.body],[Oe["no-backdrop"],Oe["toast-shown"],Oe["has-column"]]),!0):!1},Rl=()=>{Lt.currentInstance.resetValidationMessage()},C7=()=>{const t=on(),e=Gr(t,Oe.input),n=Gr(t,Oe.file),s=t.querySelector(`.${Oe.range} input`),a=t.querySelector(`.${Oe.range} output`),r=Gr(t,Oe.select),o=t.querySelector(`.${Oe.checkbox} input`),c=Gr(t,Oe.textarea);e.oninput=Rl,n.onchange=Rl,r.onchange=Rl,o.onchange=Rl,c.oninput=Rl,s.oninput=()=>{Rl(),a.value=s.value},s.onchange=()=>{Rl(),a.value=s.value}},S7=t=>typeof t=="string"?document.querySelector(t):t,_7=t=>{const e=on();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},E7=t=>{window.getComputedStyle(t).direction==="rtl"&&en(Ui(),Oe.rtl)},T7=t=>{const e=N7();if(k7()){jo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=Oe.container,e&&en(n,Oe["no-transition"]),Ns(n,j7),n.dataset.swal2Theme=t.theme;const s=S7(t.target);s.appendChild(n),_7(t),E7(s),C7()},Ew=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?A7(t,e):t&&Ns(e,t)},A7=(t,e)=>{t.jquery?D7(e,t):Ns(e,t.toString())},D7=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},R7=(t,e)=>{const n=Jm(),s=ed();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Mi(n):pi(n),ks(n,e,"actions"),P7(n,s,e),Ns(s,e.loaderHtml||""),ks(s,e,"loader"))};function P7(t,e,n){const s=Pa(),a=No(),r=Jc();!s||!a||!r||(Av(s,"confirm",n),Av(a,"deny",n),Av(r,"cancel",n),M7(s,a,r,n),n.reverseButtons&&(n.toast?(t.insertBefore(r,s),t.insertBefore(a,s)):(t.insertBefore(r,e),t.insertBefore(a,e),t.insertBefore(s,e))))}function M7(t,e,n,s){if(!s.buttonsStyling){Ks([t,e,n],Oe.styled);return}en([t,e,n],Oe.styled),s.confirmButtonColor&&(t.style.backgroundColor=s.confirmButtonColor,en(t,Oe["default-outline"])),s.denyButtonColor&&(e.style.backgroundColor=s.denyButtonColor,en(e,Oe["default-outline"])),s.cancelButtonColor&&(n.style.backgroundColor=s.cancelButtonColor,en(n,Oe["default-outline"]))}function Av(t,e,n){const s=xw(e);eu(t,n[`show${s}Button`],"inline-block"),Ns(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=Oe[e],ks(t,n,`${e}Button`)}const I7=(t,e)=>{const n=jw();n&&(Ns(n,e.closeButtonHtml||""),ks(n,e,"closeButton"),eu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},O7=(t,e)=>{const n=Ui();n&&(L7(n,e.backdrop),F7(n,e.position),$7(n,e.grow),ks(n,e,"container"))};function L7(t,e){typeof e=="string"?t.style.background=e:e||en([document.documentElement,document.body],Oe["no-backdrop"])}function F7(t,e){e&&(e in Oe?en(t,Oe[e]):(Vi('The "position" parameter is not valid, defaulting to "center"'),en(t,Oe.center)))}function $7(t,e){e&&en(t,Oe[`grow-${e}`])}var Mn={innerParams:new WeakMap,domCache:new WeakMap};const B7=["input","file","range","select","radio","checkbox","textarea"],q7=(t,e)=>{const n=on();if(!n)return;const s=Mn.innerParams.get(t),a=!s||e.input!==s.input;B7.forEach(r=>{const o=Gr(n,Oe[r]);o&&(V7(r,e.inputAttributes),o.className=Oe[r],a&&Mi(o))}),e.input&&(a&&H7(e),U7(e))},H7=t=>{if(!t.input)return;if(!Qn[t.input]){jo(`Unexpected type of input! Expected ${Object.keys(Qn).join(" | ")}, got "${t.input}"`);return}const e=YT(t.input);if(!e)return;const n=Qn[t.input](e,t);pi(e),t.inputAutoFocus&&setTimeout(()=>{WT(n)})},z7=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},V7=(t,e)=>{const n=on();if(!n)return;const s=qg(n,t);if(s){z7(s);for(const a in e)s.setAttribute(a,e[a])}},U7=t=>{if(!t.input)return;const e=YT(t.input);e&&ks(e,t,"input")},Tw=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},tu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),a=Oe["input-label"];s.setAttribute("for",t.id),s.className=a,typeof n.customClass=="object"&&en(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},YT=t=>{const e=on();if(e)return Gr(e,Oe[t]||Oe.input)},_p=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:bw(e)||Vi(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Qn={};Qn.text=Qn.email=Qn.password=Qn.number=Qn.tel=Qn.url=Qn.search=Qn.date=Qn["datetime-local"]=Qn.time=Qn.week=Qn.month=(t,e)=>(_p(t,e.inputValue),tu(t,t,e),Tw(t,e),t.type=e.input,t);Qn.file=(t,e)=>(tu(t,t,e),Tw(t,e),t);Qn.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return _p(n,e.inputValue),n.type=e.input,_p(s,e.inputValue),tu(n,t,e),t};Qn.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");Ns(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return tu(t,t,e),t};Qn.radio=t=>(t.textContent="",t);Qn.checkbox=(t,e)=>{const n=qg(on(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return Ns(s,e.inputPlaceholder||e.inputLabel),n};Qn.textarea=(t,e)=>{_p(t,e.inputValue),Tw(t,e),tu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(on()).width),a=()=>{if(!document.body.contains(t))return;const r=t.offsetWidth+n(t);r>s?on().style.width=`${r}px`:Kl(on(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const W7=(t,e)=>{const n=ww();n&&(Sw(n),ks(n,e,"htmlContainer"),e.html?(Ew(e.html,n),pi(n,"block")):e.text?(n.textContent=e.text,pi(n,"block")):Mi(n),q7(t,e))},K7=(t,e)=>{const n=UT();n&&(Sw(n),eu(n,e.footer,"block"),e.footer&&Ew(e.footer,n),ks(n,e,"footer"))},G7=(t,e)=>{const n=Mn.innerParams.get(t),s=Xc();if(!s)return;if(n&&e.icon===n.icon){KN(s,e),WN(s,e);return}if(!e.icon&&!e.iconHtml){Mi(s);return}if(e.icon&&Object.keys(Sp).indexOf(e.icon)===-1){jo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Mi(s);return}pi(s),KN(s,e),WN(s,e),en(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",QT)},WN=(t,e)=>{for(const[n,s]of Object.entries(Sp))e.icon!==n&&Ks(t,s);en(t,e.icon&&Sp[e.icon]),Z7(t,e),QT(),ks(t,e,"icon")},QT=()=>{const t=on();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},Y7=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Q7=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,KN=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=GN(e.iconHtml):e.icon==="success"?(s=Y7,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=Q7:e.icon&&(s=GN({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&Ns(t,s)},Z7=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])VN(t,n,"background-color",e.iconColor);VN(t,".swal2-success-ring","border-color",e.iconColor)}},GN=t=>`<div class="${Oe["icon-content"]}">${t}</div>`,X7=(t,e)=>{const n=VT();if(n){if(!e.imageUrl){Mi(n);return}pi(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Kl(n,"width",e.imageWidth),Kl(n,"height",e.imageHeight),n.className=Oe.image,ks(n,e,"image")}};let Aw=!1,ZT=0,XT=0,JT=0,eA=0;const J7=t=>{t.addEventListener("mousedown",Ep),document.body.addEventListener("mousemove",Tp),t.addEventListener("mouseup",Ap),t.addEventListener("touchstart",Ep),document.body.addEventListener("touchmove",Tp),t.addEventListener("touchend",Ap)},eH=t=>{t.removeEventListener("mousedown",Ep),document.body.removeEventListener("mousemove",Tp),t.removeEventListener("mouseup",Ap),t.removeEventListener("touchstart",Ep),document.body.removeEventListener("touchmove",Tp),t.removeEventListener("touchend",Ap)},Ep=t=>{const e=on();if(t.target===e||Xc().contains(t.target)){Aw=!0;const n=tA(t);ZT=n.clientX,XT=n.clientY,JT=parseInt(e.style.insetInlineStart)||0,eA=parseInt(e.style.insetBlockStart)||0,en(e,"swal2-dragging")}},Tp=t=>{const e=on();if(Aw){let{clientX:n,clientY:s}=tA(t);e.style.insetInlineStart=`${JT+(n-ZT)}px`,e.style.insetBlockStart=`${eA+(s-XT)}px`}},Ap=()=>{const t=on();Aw=!1,Ks(t,"swal2-dragging")},tA=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},tH=(t,e)=>{const n=Ui(),s=on();if(!(!n||!s)){if(e.toast){Kl(n,"width",e.width),s.style.width="100%";const a=ed();a&&s.insertBefore(a,Xc())}else Kl(s,"width",e.width);Kl(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),Mi(Fg()),nH(s,e),e.draggable&&!e.toast?(en(s,Oe.draggable),J7(s)):(Ks(s,Oe.draggable),eH(s))}},nH=(t,e)=>{const n=e.showClass||{};t.className=`${Oe.popup} ${rs(t)?n.popup:""}`,e.toast?(en([document.documentElement,document.body],Oe["toast-shown"]),en(t,Oe.toast)):en(t,Oe.modal),ks(t,e,"popup"),typeof e.customClass=="string"&&en(t,e.customClass),e.icon&&en(t,Oe[`icon-${e.icon}`])},iH=(t,e)=>{const n=kw();if(!n)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){Mi(n);return}pi(n),n.textContent="",a>=s.length&&Vi("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((r,o)=>{const c=sH(r);if(n.appendChild(c),o===a&&en(c,Oe["active-progress-step"]),o!==s.length-1){const d=aH(e);n.appendChild(d)}})},sH=t=>{const e=document.createElement("li");return en(e,Oe["progress-step"]),Ns(e,t),e},aH=t=>{const e=document.createElement("li");return en(e,Oe["progress-step-line"]),t.progressStepsDistance&&Kl(e,"width",t.progressStepsDistance),e},rH=(t,e)=>{const n=zT();n&&(Sw(n),eu(n,e.title||e.titleText,"block"),e.title&&Ew(e.title,n),e.titleText&&(n.innerText=e.titleText),ks(n,e,"title"))},nA=(t,e)=>{tH(t,e),O7(t,e),iH(t,e),G7(t,e),X7(t,e),rH(t,e),I7(t,e),W7(t,e),R7(t,e),K7(t,e);const n=on();typeof e.didRender=="function"&&n&&e.didRender(n),Lt.eventEmitter.emit("didRender",n)},lH=()=>rs(on()),iA=()=>{var t;return(t=Pa())===null||t===void 0?void 0:t.click()},oH=()=>{var t;return(t=No())===null||t===void 0?void 0:t.click()},cH=()=>{var t;return(t=Jc())===null||t===void 0?void 0:t.click()},td=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),sA=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},dH=(t,e,n)=>{sA(t),e.toast||(t.keydownHandler=s=>uH(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:on(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},iy=(t,e)=>{var n;const s=Nw();if(s.length){t=t+e,t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=on())===null||n===void 0||n.focus()},aA=["ArrowRight","ArrowDown"],mH=["ArrowLeft","ArrowUp"],uH=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?hH(e,t):e.key==="Tab"?pH(e):[...aA,...mH].includes(e.key)?gH(e.key):e.key==="Escape"&&fH(e,t,n)))},hH=(t,e)=>{if(!Lg(e.allowEnterKey))return;const n=qg(on(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;iA(),t.preventDefault()}},pH=t=>{const e=t.target,n=Nw();let s=-1;for(let a=0;a<n.length;a++)if(e===n[a]){s=a;break}t.shiftKey?iy(s,-1):iy(s,1),t.stopPropagation(),t.preventDefault()},gH=t=>{const e=Jm(),n=Pa(),s=No(),a=Jc();if(!e||!n||!s||!a)return;const r=[n,s,a];if(document.activeElement instanceof HTMLElement&&!r.includes(document.activeElement))return;const o=aA.includes(t)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let d=0;d<e.children.length;d++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&rs(c))break}c instanceof HTMLButtonElement&&c.focus()}},fH=(t,e,n)=>{Lg(e.allowEscapeKey)&&(t.preventDefault(),n(td.esc))};var Ic={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const vH=()=>{const t=Ui();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},rA=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},lA=typeof window<"u"&&!!window.GestureEvent,xH=()=>{if(lA&&!gr(document.body,Oe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,en(document.body,Oe.iosfix),yH()}},yH=()=>{const t=Ui();if(!t)return;let e;t.ontouchstart=n=>{e=bH(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},bH=t=>{const e=t.target,n=Ui(),s=ww();return!n||!s||wH(t)||kH(t)?!1:e===n||!UN(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(UN(s)&&s.contains(e))},wH=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",kH=t=>t.touches&&t.touches.length>1,jH=()=>{if(gr(document.body,Oe.iosfix)){const t=parseInt(document.body.style.top,10);Ks(document.body,Oe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},NH=()=>{const t=document.createElement("div");t.className=Oe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let fc=null;const CH=t=>{fc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(fc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${fc+NH()}px`)},SH=()=>{fc!==null&&(document.body.style.paddingRight=`${fc}px`,fc=null)};function oA(t,e,n,s){Bg()?YN(t,s):(m7(n).then(()=>YN(t,s)),sA(Lt)),lA?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Cw()&&(SH(),jH(),rA()),_H()}function _H(){Ks([document.documentElement,document.body],[Oe.shown,Oe["height-auto"],Oe["no-backdrop"],Oe["toast-shown"]])}function Yr(t){t=TH(t);const e=Ic.swalPromiseResolve.get(this),n=EH(this);this.isAwaitingPromise?t.isDismissed||(nu(this),e(t)):n&&e(t)}const EH=t=>{const e=on();if(!e)return!1;const n=Mn.innerParams.get(t);if(!n||gr(e,n.hideClass.popup))return!1;Ks(e,n.showClass.popup),en(e,n.hideClass.popup);const s=Ui();return Ks(s,n.showClass.backdrop),en(s,n.hideClass.backdrop),AH(t,e,n),!0};function cA(t){const e=Ic.swalPromiseReject.get(this);nu(this),e&&e(t)}const nu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Mn.innerParams.get(t)||t._destroy())},TH=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),AH=(t,e,n)=>{var s;const a=Ui(),r=GT(e);typeof n.willClose=="function"&&n.willClose(e),(s=Lt.eventEmitter)===null||s===void 0||s.emit("willClose",e),r?DH(t,e,a,n.returnFocus,n.didClose):oA(t,a,n.returnFocus,n.didClose)},DH=(t,e,n,s,a)=>{Lt.swalCloseEventFinishedCallback=oA.bind(null,t,n,s,a);const r=function(o){if(o.target===e){var c;(c=Lt.swalCloseEventFinishedCallback)===null||c===void 0||c.call(Lt),delete Lt.swalCloseEventFinishedCallback,e.removeEventListener("animationend",r),e.removeEventListener("transitionend",r)}};e.addEventListener("animationend",r),e.addEventListener("transitionend",r)},YN=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Lt.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Oc=t=>{let e=on();if(e||new Et,e=on(),!e)return;const n=ed();Bg()?Mi(Xc()):RH(e,t),pi(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},RH=(t,e)=>{const n=Jm(),s=ed();!n||!s||(!e&&rs(Pa())&&(e=Pa()),pi(n),e&&(Mi(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),en([t,n],Oe.loading))},PH=(t,e)=>{e.input==="select"||e.input==="radio"?FH(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(yw(e.inputValue)||bw(e.inputValue))&&(Oc(Pa()),$H(t,e))},MH=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return IH(n);case"radio":return OH(n);case"file":return LH(n);default:return e.inputAutoTrim?n.value.trim():n.value}},IH=t=>t.checked?1:0,OH=t=>t.checked?t.value:null,LH=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,FH=(t,e)=>{const n=on();if(!n)return;const s=a=>{e.input==="select"?BH(n,Dp(a),e):e.input==="radio"&&qH(n,Dp(a),e)};yw(e.inputOptions)||bw(e.inputOptions)?(Oc(Pa()),Zm(e.inputOptions).then(a=>{t.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):jo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},$H=(t,e)=>{const n=t.getInput();n&&(Mi(n),Zm(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,pi(n),n.focus(),t.hideLoading()}).catch(s=>{jo(`Error in inputValue promise: ${s}`),n.value="",pi(n),n.focus(),t.hideLoading()}))};function BH(t,e,n){const s=Gr(t,Oe.select);if(!s)return;const a=(r,o,c)=>{const d=document.createElement("option");d.value=c,Ns(d,o),d.selected=dA(c,n.inputValue),r.appendChild(d)};e.forEach(r=>{const o=r[0],c=r[1];if(Array.isArray(c)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,s.appendChild(d),c.forEach(m=>a(d,m[1],m[0]))}else a(s,c,o)}),s.focus()}function qH(t,e,n){const s=Gr(t,Oe.radio);if(!s)return;e.forEach(r=>{const o=r[0],c=r[1],d=document.createElement("input"),m=document.createElement("label");d.type="radio",d.name=Oe.radio,d.value=o,dA(o,n.inputValue)&&(d.checked=!0);const u=document.createElement("span");Ns(u,c),u.className=Oe.label,m.appendChild(d),m.appendChild(u),s.appendChild(m)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const Dp=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let a=n;typeof a=="object"&&(a=Dp(a)),e.push([s,a])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Dp(s)),e.push([n,s])}),e},dA=(t,e)=>!!e&&e.toString()===t.toString(),HH=t=>{const e=Mn.innerParams.get(t);t.disableButtons(),e.input?mA(t,"confirm"):Rw(t,!0)},zH=t=>{const e=Mn.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?mA(t,"deny"):Dw(t,!1)},VH=(t,e)=>{t.disableButtons(),e(td.cancel)},mA=(t,e)=>{const n=Mn.innerParams.get(t);if(!n.input){jo(`The "input" parameter is needed to be set when using returnInputValueOn${xw(e)}`);return}const s=t.getInput(),a=MH(t,n);n.inputValidator?UH(t,a,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?Dw(t,a):Rw(t,a)},UH=(t,e,n)=>{const s=Mn.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Zm(s.inputValidator(e,s.validationMessage))).then(r=>{t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):n==="deny"?Dw(t,e):Rw(t,e)})},Dw=(t,e)=>{const n=Mn.innerParams.get(t||void 0);n.showLoaderOnDeny&&Oc(No()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),nu(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>uA(t||void 0,a))):t.close({isDenied:!0,value:e})},QN=(t,e)=>{t.close({isConfirmed:!0,value:e})},uA=(t,e)=>{t.rejectPromise(e)},Rw=(t,e)=>{const n=Mn.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Oc(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preConfirm(e,n.validationMessage))).then(a=>{rs(Fg())||a===!1?(t.hideLoading(),nu(t)):QN(t,typeof a>"u"?e:a)}).catch(a=>uA(t||void 0,a))):QN(t,e)};function Rp(){const t=Mn.innerParams.get(this);if(!t)return;const e=Mn.domCache.get(this);Mi(e.loader),Bg()?t.icon&&pi(Xc()):WH(e),Ks([e.popup,e.actions],Oe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const WH=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?pi(e[0],"inline-block"):b7()&&Mi(t.actions)};function hA(){const t=Mn.innerParams.get(this),e=Mn.domCache.get(this);return e?qg(e.popup,t.input):null}function pA(t,e,n){const s=Mn.domCache.get(t);e.forEach(a=>{s[a].disabled=n})}function gA(t,e){const n=on();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${Oe.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else t.disabled=e}function fA(){pA(this,["confirmButton","denyButton","cancelButton"],!1)}function vA(){pA(this,["confirmButton","denyButton","cancelButton"],!0)}function xA(){gA(this.getInput(),!1)}function yA(){gA(this.getInput(),!0)}function bA(t){const e=Mn.domCache.get(this),n=Mn.innerParams.get(this);Ns(e.validationMessage,t),e.validationMessage.className=Oe["validation-message"],n.customClass&&n.customClass.validationMessage&&en(e.validationMessage,n.customClass.validationMessage),pi(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",Oe["validation-message"]),WT(s),en(s,Oe.inputerror))}function wA(){const t=Mn.domCache.get(this);t.validationMessage&&Mi(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Ks(e,Oe.inputerror))}const vc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},KH=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],GH={allowEnterKey:void 0},YH=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],kA=t=>Object.prototype.hasOwnProperty.call(vc,t),jA=t=>KH.indexOf(t)!==-1,NA=t=>GH[t],QH=t=>{kA(t)||Vi(`Unknown parameter "${t}"`)},ZH=t=>{YH.includes(t)&&Vi(`The parameter "${t}" is incompatible with toasts`)},XH=t=>{const e=NA(t);e&&HT(t,e)},CA=t=>{t.backdrop===!1&&t.allowOutsideClick&&Vi('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(t.theme)&&Vi(`Invalid theme "${t.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(const e in t)QH(e),t.toast&&ZH(e),XH(e)};function SA(t){const e=Ui(),n=on(),s=Mn.innerParams.get(this);if(!n||gr(n,s.hideClass.popup)){Vi("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=JH(t),r=Object.assign({},s,a);CA(r),e.dataset.swal2Theme=r.theme,nA(this,r),Mn.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const JH=t=>{const e={};return Object.keys(t).forEach(n=>{jA(n)?e[n]=t[n]:Vi(`Invalid parameter to update: ${n}`)}),e};function _A(){const t=Mn.domCache.get(this),e=Mn.innerParams.get(this);if(!e){EA(this);return}t.popup&&Lt.swalCloseEventFinishedCallback&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Lt.eventEmitter.emit("didDestroy"),ez(this)}const ez=t=>{EA(t),delete t.params,delete Lt.keydownHandler,delete Lt.keydownTarget,delete Lt.currentInstance},EA=t=>{t.isAwaitingPromise?(Dv(Mn,t),t.isAwaitingPromise=!0):(Dv(Ic,t),Dv(Mn,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Dv=(t,e)=>{for(const n in t)t[n].delete(e)};var tz=Object.freeze({__proto__:null,_destroy:_A,close:Yr,closeModal:Yr,closePopup:Yr,closeToast:Yr,disableButtons:vA,disableInput:yA,disableLoading:Rp,enableButtons:fA,enableInput:xA,getInput:hA,handleAwaitingPromise:nu,hideLoading:Rp,rejectPromise:cA,resetValidationMessage:wA,showValidationMessage:bA,update:SA});const nz=(t,e,n)=>{t.toast?iz(t,e,n):(az(e),rz(e),lz(t,e,n))},iz=(t,e,n)=>{e.popup.onclick=()=>{t&&(sz(t)||t.timer||t.input)||n(td.close)}},sz=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Pp=!1;const az=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Pp=!0)}}},rz=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Pp=!0)}}},lz=(t,e,n)=>{e.container.onclick=s=>{if(Pp){Pp=!1;return}s.target===e.container&&Lg(t.allowOutsideClick)&&n(td.backdrop)}},oz=t=>typeof t=="object"&&t.jquery,ZN=t=>t instanceof Element||oz(t),cz=t=>{const e={};return typeof t[0]=="object"&&!ZN(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const a=t[s];typeof a=="string"||ZN(a)?e[n]=a:a!==void 0&&jo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function dz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function mz(t){class e extends this{_main(s,a){return super._main(s,Object.assign({},t,a))}}return e}const uz=()=>Lt.timeout&&Lt.timeout.getTimerLeft(),TA=()=>{if(Lt.timeout)return w7(),Lt.timeout.stop()},AA=()=>{if(Lt.timeout){const t=Lt.timeout.start();return _w(t),t}},hz=()=>{const t=Lt.timeout;return t&&(t.running?TA():AA())},pz=t=>{if(Lt.timeout){const e=Lt.timeout.increase(t);return _w(e,!0),e}},gz=()=>!!(Lt.timeout&&Lt.timeout.isRunning());let XN=!1;const sy={};function fz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";sy[t]=this,XN||(document.body.addEventListener("click",vz),XN=!0)}const vz=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in sy){const s=e.getAttribute(n);if(s){sy[n].fire({template:s});return}}};let xz=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){var s=this;const a=function(){s.removeListener(e,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];n.apply(s,o)};this.on(e,a)}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),a=s.indexOf(n);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};Lt.eventEmitter=new xz;const yz=(t,e)=>{Lt.eventEmitter.on(t,e)},bz=(t,e)=>{Lt.eventEmitter.once(t,e)},wz=(t,e)=>{if(!t){Lt.eventEmitter.reset();return}e?Lt.eventEmitter.removeListener(t,e):Lt.eventEmitter.removeAllListeners(t)};var kz=Object.freeze({__proto__:null,argsToParams:cz,bindClickHandler:fz,clickCancel:cH,clickConfirm:iA,clickDeny:oH,enableLoading:Oc,fire:dz,getActions:Jm,getCancelButton:Jc,getCloseButton:jw,getConfirmButton:Pa,getContainer:Ui,getDenyButton:No,getFocusableElements:Nw,getFooter:UT,getHtmlContainer:ww,getIcon:Xc,getIconContent:g7,getImage:VT,getInputLabel:f7,getLoader:ed,getPopup:on,getProgressSteps:kw,getTimerLeft:uz,getTimerProgressBar:$g,getTitle:zT,getValidationMessage:Fg,increaseTimer:pz,isDeprecatedParameter:NA,isLoading:x7,isTimerRunning:gz,isUpdatableParameter:jA,isValidParameter:kA,isVisible:lH,mixin:mz,off:wz,on:yz,once:bz,resumeTimer:AA,showLoading:Oc,stopTimer:TA,toggleTimer:hz});class jz{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const DA=["swal-title","swal-html","swal-footer"],Nz=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return Rz(n),Object.assign(Cz(n),Sz(n),_z(n),Ez(n),Tz(n),Az(n),Dz(n,DA))},Cz=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{ao(s,["name","value"]);const a=s.getAttribute("name"),r=s.getAttribute("value");!a||!r||(typeof vc[a]=="boolean"?e[a]=r!=="false":typeof vc[a]=="object"?e[a]=JSON.parse(r):e[a]=r)}),e},Sz=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),r=s.getAttribute("value");!a||!r||(e[a]=new Function(`return ${r}`)())}),e},_z=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{ao(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${xw(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},Ez=t=>{const e={},n=t.querySelector("swal-image");return n&&(ao(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},Tz=t=>{const e={},n=t.querySelector("swal-icon");return n&&(ao(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Az=t=>{const e={},n=t.querySelector("swal-input");n&&(ao(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{ao(a,["value"]);const r=a.getAttribute("value");if(!r)return;const o=a.innerHTML;e.inputOptions[r]=o})),e},Dz=(t,e)=>{const n={};for(const s in e){const a=e[s],r=t.querySelector(a);r&&(ao(r,[]),n[a.replace(/^swal-/,"")]=r.innerHTML.trim())}return n},Rz=t=>{const e=DA.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||Vi(`Unrecognized element <${s}>`)})},ao=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Vi([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},RA=10,Pz=t=>{const e=Ui(),n=on();typeof t.willOpen=="function"&&t.willOpen(n),Lt.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;Oz(e,n,t),setTimeout(()=>{Mz(e,n)},RA),Cw()&&(Iz(e,t.scrollbarPadding,a),vH()),!Bg()&&!Lt.previousActiveElement&&(Lt.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Lt.eventEmitter.emit("didOpen",n),Ks(e,Oe["no-transition"])},Mp=t=>{const e=on();if(t.target!==e)return;const n=Ui();e.removeEventListener("animationend",Mp),e.removeEventListener("transitionend",Mp),n.style.overflowY="auto"},Mz=(t,e)=>{GT(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Mp),e.addEventListener("transitionend",Mp)):t.style.overflowY="auto"},Iz=(t,e,n)=>{xH(),e&&n!=="hidden"&&CH(n),setTimeout(()=>{t.scrollTop=0})},Oz=(t,e,n)=>{en(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),pi(e,"grid"),setTimeout(()=>{en(e,n.showClass.popup),e.style.removeProperty("opacity")},RA)):pi(e,"grid"),en([document.documentElement,document.body],Oe.shown),n.heightAuto&&n.backdrop&&!n.toast&&en([document.documentElement,document.body],Oe["height-auto"])};var JN={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function Lz(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=JN.email),t.input==="url"&&(t.inputValidator=JN.url))}function Fz(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Vi('Target parameter is not valid, defaulting to "body"'),t.target="body")}function $z(t){Lz(t),t.showLoaderOnConfirm&&!t.preConfirm&&Vi(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Fz(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),T7(t)}let ka;var sh=new WeakMap;class Jn{constructor(){if(l7(this,sh,void 0),typeof window>"u")return;ka=this;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,o7(sh,this,this._main(ka.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(CA(Object.assign({},n,e)),Lt.currentInstance){const r=Ic.swalPromiseResolve.get(Lt.currentInstance),{isAwaitingPromise:o}=Lt.currentInstance;Lt.currentInstance._destroy(),o||r({isDismissed:!0}),Cw()&&rA()}Lt.currentInstance=ka;const s=qz(e,n);$z(s),Object.freeze(s),Lt.timeout&&(Lt.timeout.stop(),delete Lt.timeout),clearTimeout(Lt.restoreFocusTimeout);const a=Hz(ka);return nA(ka,s),Mn.innerParams.set(ka,s),Bz(ka,a,s)}then(e){return HN(sh,this).then(e)}finally(e){return HN(sh,this).finally(e)}}const Bz=(t,e,n)=>new Promise((s,a)=>{const r=o=>{t.close({isDismissed:!0,dismiss:o})};Ic.swalPromiseResolve.set(t,s),Ic.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{HH(t)},e.denyButton.onclick=()=>{zH(t)},e.cancelButton.onclick=()=>{VH(t,r)},e.closeButton.onclick=()=>{r(td.close)},nz(n,e,r),dH(Lt,n,r),PH(t,n),Pz(n),zz(Lt,n,r),Vz(e,n),setTimeout(()=>{e.container.scrollTop=0})}),qz=(t,e)=>{const n=Nz(t),s=Object.assign({},vc,e,n,t);return s.showClass=Object.assign({},vc.showClass,s.showClass),s.hideClass=Object.assign({},vc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},Hz=t=>{const e={popup:on(),container:Ui(),actions:Jm(),confirmButton:Pa(),denyButton:No(),cancelButton:Jc(),loader:ed(),closeButton:jw(),validationMessage:Fg(),progressSteps:kw()};return Mn.domCache.set(t,e),e},zz=(t,e,n)=>{const s=$g();Mi(s),e.timer&&(t.timeout=new jz(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(pi(s),ks(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&_w(e.timer)})))},Vz=(t,e)=>{if(!e.toast){if(!Lg(e.allowEnterKey)){HT("allowEnterKey"),Kz();return}Uz(t)||Wz(t,e)||iy(-1,1)}},Uz=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&rs(n))return n.focus(),!0;return!1},Wz=(t,e)=>e.focusDeny&&rs(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&rs(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&rs(t.confirmButton)?(t.confirmButton.focus(),!0):!1,Kz=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Jn.prototype.disableButtons=vA;Jn.prototype.enableButtons=fA;Jn.prototype.getInput=hA;Jn.prototype.disableInput=yA;Jn.prototype.enableInput=xA;Jn.prototype.hideLoading=Rp;Jn.prototype.disableLoading=Rp;Jn.prototype.showValidationMessage=bA;Jn.prototype.resetValidationMessage=wA;Jn.prototype.close=Yr;Jn.prototype.closePopup=Yr;Jn.prototype.closeModal=Yr;Jn.prototype.closeToast=Yr;Jn.prototype.rejectPromise=cA;Jn.prototype.update=SA;Jn.prototype._destroy=_A;Object.assign(Jn,kz);Object.keys(tz).forEach(t=>{Jn[t]=function(){return ka&&ka[t]?ka[t](...arguments):null}});Jn.DismissReason=td;Jn.version="11.18.0";const Et=Jn;Et.default=Et;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-hover-transform: none}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const Gs={getBills:(t={})=>pe({endpoint:"bills",method:"GET",data:t}),getBill:t=>pe({endpoint:`bills/${t}`,method:"GET"}),createBill:t=>pe({endpoint:"bills",method:"POST",data:t}),updateBill:(t,e)=>pe({endpoint:`bills/${t}`,method:"PUT",data:e}),calculateTaxForService:({service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:r})=>pe({endpoint:"bills/calculate-tax",method:"POST",data:{service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:r}}),getEncountersWithoutBill:()=>pe({endpoint:"bills/encounters-without-bill",method:"GET"}),getBillByEncounterId:t=>pe({endpoint:`bills/by-encounter/${t}`,method:"GET"}),deleteBillItem:t=>pe({endpoint:`bills/item/${t}`,method:"DELETE"}),updateBillItem:(t,e)=>pe({endpoint:`bills/item/${t}`,method:"PUT",data:e}),exportBills:(t={})=>pe({endpoint:"bills/export",method:"GET",data:t}),printBill:t=>pe({endpoint:`bills/${t}/print`,method:"GET",responseType:"blob"}),emailBill:t=>pe({endpoint:`bills/${t}/email`,method:"POST"})},rr={all:["bills"],lists:()=>[...rr.all,"list"],list:t=>[...rr.lists(),{filters:t}],details:()=>[...rr.all,"detail"],detail:t=>[...rr.details(),t]},Gz=(t={},e={})=>ft({queryKey:rr.list(t),queryFn:()=>Gs.getBills(t),...e}),Pw=(t,e={})=>ft({queryKey:rr.detail(t),queryFn:()=>Gs.getBill(t),enabled:!!t,...e}),Yz=()=>{const t=ze();return Le({mutationFn:e=>Gs.createBill(e),onSuccess:()=>{t.invalidateQueries({queryKey:rr.lists()})}})},Qz=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Gs.updateBill(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:rr.detail(n.id)}),t.invalidateQueries({queryKey:rr.lists()})}})},Zz=()=>Le({mutationFn:t=>Gs.calculateTaxForService(t)}),Xz=(t={})=>ft({queryKey:["encountersWithoutBill"],queryFn:()=>Gs.getEncountersWithoutBill(),...t}),PA=(t,e={})=>ft({queryKey:["billByEncounterId",t],queryFn:()=>Gs.getBillByEncounterId(t),enabled:!!t,...e}),Jz=()=>Le({mutationFn:t=>Gs.deleteBillItem(t)}),eV=()=>Le({mutationFn:({itemId:t,...e})=>Gs.updateBillItem(t,e)}),tV=()=>Le({mutationFn:t=>Gs.exportBills(t)}),nV=()=>Le({mutationFn:t=>Gs.printBill(t)}),iV=()=>Le({mutationFn:t=>Gs.emailBill(t)}),Co={getDoctorServices:(t={})=>pe({endpoint:"doctor-services",method:"GET",data:t}),getDoctorService:t=>pe({endpoint:`doctor-services/${t}`,method:"GET"}),createDoctorService:t=>pe({endpoint:"doctor-services",method:"POST",data:t}),updateDoctorService:(t,e)=>pe({endpoint:`doctor-services/${t}`,method:"PUT",data:e}),resendCredentials:t=>pe({endpoint:`doctor-services/${t}/resend-credentials`,method:"POST"}),deleteDoctorService:t=>pe({endpoint:`doctor-services/${t}`,method:"DELETE"}),bulkDeleteDoctorServices:t=>pe({endpoint:"doctor-services/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorServiceStatus:(t,e)=>pe({endpoint:"doctor-services/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportServices:(t={})=>pe({endpoint:"doctor-services/export",method:"GET",data:t})};class sV{async getStaticData(e={}){const{dataType:n="staticData",staticDataType:s,...a}=e,r=new URLSearchParams({dataType:n,...s&&{staticDataType:s},...a});return pe({endpoint:`static-data?${r}`,method:"GET"})}async getClinics(e={}){return this.getStaticData({dataType:"clinicList",...e})}async getStaticDataByType(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticData",type:e})}async getStaticDataWithLabel(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataWithLabel",type:e})}async getStaticDataTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataTypes"})}async getDoctors(e=null){const n={dataType:"staticData",staticDataType:"doctors"};return e&&(n.clinic_ids=e),this.getStaticData(n)}async getClinicDoctors(e,n={}){const s={};return e&&typeof e=="object"&&e!==null?e.length>0&&(s.clinic_ids=e.join(",")):e&&(s.clinic_id=e),this.getStaticData({dataType:"staticData",staticDataType:"clinicDoctors",...s,...n})}async getDefaultClinic(){return this.getStaticData({dataType:"staticData",staticDataType:"defaultClinic"})}async getServicesWithPrice(e=null,n=null){const s={dataType:"staticData",staticDataType:"servicesWithPrice"};return e&&(s.clinic_id=e),n&&(Array.isArray(n)?s.doctor_ids=n.join(","):s.doctor_id=n),this.getStaticData(s)}async getPatientClinics(e){return this.getStaticData({dataType:"staticData",staticDataType:"patientClinic",patient_id:e})}async getPrescriptions(){return this.getStaticData({dataType:"staticData",staticDataType:"prescriptions"})}async getEmailTemplateTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateType"})}async getEmailTemplateKeys(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateKey"})}async getUsersByClinic(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"getUsersByClinic",clinic_id:e,...n})}async getUsersByRole(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"users",role:e,...n})}async createSpecialty(e,n="specialization"){try{const s=await pe({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:n}});return console.log("StaticDataService.createSpecialty response:",s),s}catch(s){throw console.error("StaticDataService.createSpecialty error:",s),s}}async createProblem(e){try{return await pe({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_problems"}})}catch(n){throw console.error("StaticDataService.createProblem error:",n),n}}async createObservation(e){try{return await pe({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_observations"}})}catch(n){throw console.error("StaticDataService.createObservation error:",n),n}}}const Bt=new sV,vl=()=>typeof window<"u"&&window.kc_frontend&&window.kc_frontend.prefix?window.kc_frontend.prefix:"kiviCare_";vl();const vt={all:["staticData"],lists:()=>[...vt.all,"list"],list:t=>[...vt.lists(),{params:t}],types:()=>[...vt.all,"types"],type:t=>[...vt.types(),t],clinics:()=>[...vt.all,"clinics"],doctors:()=>[...vt.all,"doctors"],doctorsByClinic:t=>[...vt.doctors(),"clinic",t],services:()=>[...vt.all,"services"],servicesWithPrice:t=>[...vt.services(),"withPrice",t],users:()=>[...vt.all,"users"],usersByRole:t=>[...vt.users(),"role",t],usersByClinic:t=>[...vt.users(),"clinic",t],prescriptions:()=>[...vt.all,"prescriptions"],emailTemplates:()=>[...vt.all,"emailTemplates"],patientClinics:t=>[...vt.all,"patientClinics",t]},Ip=(t={},e={})=>ft({queryKey:vt.list(t),queryFn:()=>Bt.getStaticData(t),staleTime:300*1e3,...e}),iu=(t={},e)=>ft({queryKey:vt.clinics(),queryFn:()=>Bt.getClinics(e),staleTime:600*1e3,...t}),Ma=(t,e={})=>ft({queryKey:[...vt.type(t),"withLabel"],queryFn:()=>Bt.getStaticDataWithLabel(t),enabled:!!t,staleTime:900*1e3,...e}),MA=(t=null,e={})=>{const n=t?vt.doctorsByClinic(t):vt.doctors();return ft({queryKey:n,queryFn:()=>Bt.getDoctors(t),staleTime:300*1e3,...e})},IA=(t,e={},n={})=>ft({queryKey:[...vt.doctorsByClinic(t),"detailed",e],queryFn:()=>Bt.getClinicDoctors(t,e),enabled:!!t,staleTime:300*1e3,...n}),aV=(t={})=>ft({queryKey:[...vt.clinics(),"default"],queryFn:()=>Bt.getDefaultClinic(),staleTime:1800*1e3,...t}),rV=(t={},e={})=>{const{clinicId:n,doctorId:s}=t;return ft({queryKey:vt.servicesWithPrice({clinicId:n,doctorId:s}),queryFn:()=>Bt.getServicesWithPrice(n,s),staleTime:300*1e3,...e})},lV=()=>{const t=ze();return{prefetchClinics:()=>{t.prefetchQuery({queryKey:vt.clinics(),queryFn:()=>Bt.getClinics(),staleTime:600*1e3})},prefetchDoctors:(a=null)=>{const r=a?vt.doctorsByClinic(a):vt.doctors();t.prefetchQuery({queryKey:r,queryFn:()=>Bt.getDoctors(a),staleTime:300*1e3})},prefetchStaticDataTypes:()=>{t.prefetchQuery({queryKey:vt.types(),queryFn:()=>Bt.getStaticDataTypes(),staleTime:1800*1e3})}}},Hg=({specialty_type:t="specialization"}={})=>{const e=ze();return Le({mutationFn:n=>Bt.createSpecialty(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:[...vt.type(t),"withLabel"]})}})},oV=()=>{const t=ze();return Le({mutationFn:e=>Bt.createProblem(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...vt.type("clinical_problems"),"withLabel"]})}})},cV=()=>{const t=ze();return Le({mutationFn:e=>Bt.createObservation(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...vt.type("clinical_observations"),"withLabel"]})}})},dV=()=>{const t=ze();return Le({mutationFn:e=>Bt.createSpecialty(e,"prescription_medicine"),onSuccess:()=>{t.invalidateQueries({queryKey:[...vt.type("prescription_medicine"),"withLabel"]})}})},mV=()=>{const t=vl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},uV=()=>{const t=vl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},hV=()=>["administrator",`${vl()}clinic_admin`],pV=()=>["administrator",`${vl()}clinic_admin`],gV=()=>{const t=vl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},fV=()=>{const t=vl();return["administrator",`${t}clinic_admin`,`${t}receptionist`]},vV=()=>{const t=vl();return[`${t}doctor`,`${t}receptionist`]},Fs={all:["doctorServices"],lists:()=>[...Fs.all,"list"],list:t=>[...Fs.lists(),{filters:t}],details:()=>[...Fs.all,"detail"],detail:t=>[...Fs.details(),t]},OA=(t={},e={})=>ft({queryKey:Fs.list(t),queryFn:()=>Co.getDoctorServices(t),...e}),xV=(t,e={})=>ft({queryKey:Fs.detail(t),queryFn:()=>Co.getDoctorService(t),enabled:!!t,...e}),yV=()=>{const t=ze();return Le({mutationFn:e=>Co.createDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Fs.lists()}),t.invalidateQueries({queryKey:vt.services()}),t.invalidateQueries({queryKey:["stats","service"]})}})},bV=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Co.updateDoctorService(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Fs.detail(n.id)}),t.invalidateQueries({queryKey:Fs.lists()})}})},wV=()=>{const t=ze();return Le({mutationFn:e=>Co.deleteDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Fs.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},kV=()=>{const t=ze();return Le({mutationFn:e=>Co.bulkDeleteDoctorServices(e),onSuccess:()=>{t.invalidateQueries({queryKey:Fs.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},jV=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Co.bulkUpdateDoctorServiceStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Fs.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},Mw=({show:t,onHide:e,editFormData:n,setEditFormData:s,showAddServiceItemForm:a,setShowAddServiceItemForm:r,editBillId:o,handleCloseEditModal:c,onBillSaved:d,appointmentId:m})=>{const{getCurrencyDetail:u}=ht(),p=u(),h=p.prefix,g=p.postfix,x=Qz(),[v,y]=f.useState([]),[b,j]=f.useState([]),k=Zz(),[S,N]=f.useState(!1),_=Yz(),[w,T]=f.useState(!0),A=Jz(),M=eV(),[E,P]=f.useState({service_name:"",price:"",quantity:"",total:""}),[D,O]=f.useState({clinic_id:"",doctor_id:""}),{data:F,isLoadingDoctorService:q,errorDoctorServiceFetch:U}=OA(D,{enabled:!!D.clinic_id&&!!D.doctor_id});f.useEffect(()=>{n?.clinic?.id&&n?.doctor?.id&&O({clinic_id:n.clinic.id,doctor_id:n.doctor.id})},[n?.clinic?.id,n?.doctor?.id]),f.useEffect(()=>{t&&n?.serviceItems?.length>0&&(!n?.taxItems||n.taxItems.length===0)&&k.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:n.serviceItems},{onSuccess:Ce=>{s(he=>({...he,taxItems:Ce?.data?.calculated_taxes||[]}))}})},[t,o]);const[K,ne]=f.useState(!1);f.useEffect(()=>{if(!K&&n?.serviceItems?.length>0){const he=n.serviceItems.every(_e=>_e.isPaid===!0)?"paid":"unpaid";n.status!==he&&s(_e=>({..._e,status:he})),ne(!0)}t||ne(!1)},[n?.serviceItems,t,K]);const Y=f.useMemo(()=>[...(F?.data?.doctorServices||[]).map(Ce=>({value:Ce.serviceId,label:Ce.serviceName,charges:Ce.charges,isCustom:!1})),...v],[F,v]),fe=Ce=>{const{name:he,value:_e}=Ce.target;s(Ke=>({...Ke,[he]:_e}))},[le,W]=f.useState(""),z=Ce=>{const he=Ce.target.value;W(""),he===""||he===null?W(l("Discount value is required","kivicare-clinic-management-system")):Number(he)<0?W(l("Discount value cannot be negative","kivicare-clinic-management-system")):Number(he)>re+oe&&W(l("Discount value cannot be greater than subtotal + tax","kivicare-clinic-management-system")),s(_e=>({..._e,discount:he}))},ie=(Ce=!1)=>{if(!n)return;if(!n?.serviceItems||n.serviceItems.length===0){Et.fire(l("Error!","kivicare-clinic-management-system"),l("Please add at least one bill item before saving.","kivicare-clinic-management-system"),"error");return}if(le){Et.fire(l("Error!","kivicare-clinic-management-system"),le,"error");return}const he=n.serviceItems.map(Ke=>({...Ke,name:Ke.service_name||Ke.name,isPaid:Ke.isPaid??!1})),_e={...n,serviceItems:he};o?x.mutate({id:o,..._e,checkout:Ce},{onSuccess:()=>{Et.fire(l("Updated!","kivicare-clinic-management-system"),l("The bill has been updated.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{Et.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to update bill.","kivicare-clinic-management-system"),"error")}}):_.mutate({..._e,checkout:Ce},{onSuccess:()=>{Et.fire(l("Created!","kivicare-clinic-management-system"),l("The bill has been created.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{Et.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to create bill.","kivicare-clinic-management-system"),"error")}})},re=f.useMemo(()=>(n?.serviceItems||[]).reduce((Ce,he)=>Ce+Number(he.total||0),0),[n?.serviceItems]),de=Ce=>{P(Ce?he=>({...he,serviceId:Ce.value,service_name:Ce.label,price:Ce.charges,quantity:1,total:Ce.charges}):{service_name:"",price:"",quantity:"",total:""})},[L,Q]=f.useState(""),V=Ce=>{const he=Ce.target.value;he<0?Q(l("Price cannot be negative","kivicare-clinic-management-system")):Q(""),P(_e=>({..._e,price:he,total:he&&_e.quantity?Number(he)*Number(_e.quantity):""}))},Z=Ce=>{const he=Ce.target.value;P(_e=>({..._e,quantity:he,total:_e.price&&he?Number(_e.price)*Number(he):""}))},X=Ce=>{const he={value:`custom-${Date.now()}`,label:Ce,charges:0,isCustom:!0};y(_e=>[..._e,he]),P(_e=>({..._e,serviceId:he.value,service_name:he.label,price:he.charges,quantity:1,total:he.charges}))},R=He.useRef(n);f.useEffect(()=>{R.current=n},[n]);const G=async Ce=>{const _e=(R.current?.serviceItems||[])[Ce];let Ke=_e.serviceId||_e.value||"";if(typeof Ke=="string"&&Ke.startsWith("custom-")){const Ae=_e.service_name||_e.name;if(!v.find(Je=>Je.value===Ke)&&Ae){const Je={value:Ke,label:Ae,charges:_e.price,isCustom:!0};y(et=>[...et,Je])}}else Ke&&(Ke=parseInt(Ke));P({serviceId:Ke,service_name:_e.service_name||_e.name,price:_e.price,quantity:_e.quantity,total:_e.total,editIndex:Ce}),r(!0)},ee=Ce=>{const he=R.current?.serviceItems[Ce];if(he.id)Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This will delete the service item from the bill.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(_e=>{_e.isConfirmed&&A.mutate(he.id,{onSuccess:()=>{const Ke=R.current?.serviceItems.filter((Ae,$e)=>$e!==Ce);s(Ae=>({...Ae,serviceItems:Ke})),k.mutate({clinic_id:R.current?.clinic?.id,doctor_id:R.current?.doctor?.id,serviceItems:Ke},{onSuccess:Ae=>{s($e=>({...$e,taxItems:Ae?.data?.calculated_taxes||[]}))}}),Et.fire(l("Deleted!","kivicare-clinic-management-system"),l("Service item deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{Et.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to delete service item.","kivicare-clinic-management-system"),"error")}})});else{const _e=R.current?.serviceItems.filter((Ke,Ae)=>Ae!==Ce);s(Ke=>({...Ke,serviceItems:_e})),k.mutate({clinic_id:R.current?.clinic?.id,doctor_id:R.current?.doctor?.id,serviceItems:_e},{onSuccess:Ke=>{s(Ae=>({...Ae,taxItems:Ke?.data?.calculated_taxes||[]}))}})}},ae=async()=>{if(!E.quantity)return;if(E.price===""||E.price===null||E.price===void 0){Q(l("Price is required","kivicare-clinic-management-system"));return}if(Number(E.price)<0){Q(l("Price cannot be negative","kivicare-clinic-management-system"));return}const Ce=E.serviceId||E.value;if(!Ce){Et.fire(l("Error!","kivicare-clinic-management-system"),l("Service ID missing.","kivicare-clinic-management-system"),"error");return}if(typeof E.editIndex=="number"&&n.serviceItems[E.editIndex]?.id){const _e=n.serviceItems[E.editIndex].id;M.mutate({itemId:_e,serviceId:Ce,quantity:E.quantity,price:E.price},{onSuccess:()=>{const Ke=n.serviceItems.map((Ae,$e)=>$e===E.editIndex?{...Ae,serviceId:Ce,service_name:E.service_name,price:E.price,quantity:E.quantity,total:E.total}:Ae);s(Ae=>({...Ae,serviceItems:Ke})),k.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:Ke},{onSuccess:Ae=>{s($e=>({...$e,taxItems:Ae?.data?.calculated_taxes||[]}))}}),P({service_name:"",price:"",quantity:"",total:""}),r(!1),Et.fire(l("Updated!","kivicare-clinic-management-system"),l("Service item updated.","kivicare-clinic-management-system"),"success")},onError:()=>{Et.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to update service item.","kivicare-clinic-management-system"),"error")}});return}let he;typeof E.editIndex=="number"?he=n.serviceItems.map((_e,Ke)=>Ke===E.editIndex?{...E,serviceId:Ce,editIndex:void 0,isPaid:_e.isPaid??!1}:_e):he=[...n.serviceItems,{...E,serviceId:Ce,isPaid:!1}],s(_e=>({..._e,serviceItems:he,status:typeof E.editIndex!="number"?"unpaid":_e.status})),k.mutate({quantity:E.quantity,clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,amount:E.price,service_id:Ce,serviceItems:he},{onSuccess:_e=>{s(Ke=>({...Ke,taxItems:_e?.data?.calculated_taxes||[]}))}}),P({service_name:"",price:"",quantity:"",total:""}),r(!1)},I=In(),H=f.useMemo(()=>[I.accessor("sr",{id:"sr",header:()=>l("Sr. No","kivicare-clinic-management-system"),cell:Ce=>Ce.row.index+1,enableSorting:!1}),I.accessor("service_name",{id:"service_name",header:()=>l("Services","kivicare-clinic-management-system"),cell:Ce=>Ce.getValue(),enableSorting:!1}),I.accessor("quantity",{id:"quantity",header:()=>l("Quantity","kivicare-clinic-management-system"),cell:Ce=>Ce.getValue(),enableSorting:!1}),I.accessor("price",{id:"price",header:()=>l("Price","kivicare-clinic-management-system"),cell:Ce=>h+Ce.getValue()+g,enableSorting:!1}),I.accessor("total",{id:"total",header:()=>l("Total Amount","kivicare-clinic-management-system"),cell:Ce=>h+Ce.getValue()+g,enableSorting:!1}),I.accessor("payment_status",{id:"payment_status",header:()=>l("Payment Status","kivicare-clinic-management-system"),cell:Ce=>Ce.row.original.isPaid?i.jsx("span",{className:"badge bg-success-subtle text-success px-2 py-1",children:l("Paid","kivicare-clinic-management-system")}):i.jsx("span",{className:"badge bg-warning-subtle text-warning px-2 py-1",children:l("Unpaid","kivicare-clinic-management-system")}),enableSorting:!1}),I.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:Ce=>Ce.row.original.isPaid?i.jsx("span",{className:"text-muted font-size-12",children:l("-","kivicare-clinic-management-system")}):i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary",title:l("Edit","kivicare-clinic-management-system"),onClick:()=>G(Ce.row.index),children:i.jsx("i",{className:"ph ph-pencil"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:l("Delete","kivicare-clinic-management-system"),onClick:()=>ee(Ce.row.index),children:i.jsx("i",{className:"ph ph-trash"})})]}),enableSorting:!1})],[h,g]),B=()=>{P({service_name:"",price:"",quantity:"",total:"",serviceId:""})},te=Ce=>{Ce||B(),r(Ce)},oe=f.useMemo(()=>(n?.taxItems||[]).reduce((Ce,he)=>Ce+Number(he.tax_amount||0),0),[n?.taxItems]),ye=Number(n?.discountEnabled&&n?.discount||0),me=re-ye+oe,xe=f.useMemo(()=>{const Ce={};return(n?.taxItems||[]).forEach(he=>{he.tax_name&&(Ce[he.tax_name]?(Ce[he.tax_name].count+=1,Ce[he.tax_name].totalAmount+=Number(he.tax_amount)):Ce[he.tax_name]={...he,count:1,totalAmount:Number(he.tax_amount)})}),Object.values(Ce)},[n?.taxItems]);return f.useEffect(()=>{s(Ce=>({...Ce,service_total:re,taxTotal:oe,discountValue:ye,total_amount:me}))},[re,oe,ye,me,s]),f.useEffect(()=>{n?.discountEnabled||W("")},[n?.discountEnabled]),i.jsx(st,{show:t,backdrop:"static",onHide:e,centered:!0,size:"xl",dialogClassName:"edit-bill-model",children:n&&i.jsxs(i.Fragment,{children:[i.jsxs(st.Header,{children:[i.jsx(st.Title,{id:"closeEncounterModalLabel",children:o?l("Edit Bill","kivicare-clinic-management-system"):l("Generate Invoice","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(st.Body,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:l("Add items in billing","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-secondary d-flex align-items-center gap-2",onClick:()=>te(!a),children:a?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-minus-circle"}),i.jsx("span",{children:l("Close","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add New","kivicare-clinic-management-system")})]})})]}),a&&i.jsxs("div",{className:"encounter-box mb-5",children:[i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ko,{options:Y,value:Y.find(Ce=>Ce.value===E.serviceId)||null,onChange:de,formatCreateLabel:Ce=>l("Create service","kivicare-clinic-management-system")+`: "${Ce}"`,onCreateOption:X,placeholder:l("Select or create service","kivicare-clinic-management-system"),isClearable:!0})]}),i.jsxs("p",{className:"mt-3 mb-0 text-primary font-size-12 fw-semibold",children:[l("Note: Type and press enter to create new service","kivicare-clinic-management-system")," "]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Price","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-field-reuquired",children:"*"}),i.jsx("input",{className:`form-control ${L?"is-invalid":""}`,type:"number",name:"price",value:E.price,onChange:V,placeholder:l("eg $12","kivicare-clinic-management-system"),required:!0}),L&&i.jsx("div",{className:"invalid-feedback",children:L})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Quantity","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"quantity",value:E.quantity,onChange:Z,min:1,placeholder:l("eg 1","kivicare-clinic-management-system"),disabled:!E.serviceId})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Total","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"total",value:E.total,readOnly:!0,disabled:!0,placeholder:l("eg $12","kivicare-clinic-management-system")})]})})]})})}),i.jsx("button",{type:"button",className:"btn m-2 btn-secondary",onClick:()=>r(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn m-2 btn-primary",onClick:ae,disabled:!E.serviceId||!E.quantity,children:l("Add","kivicare-clinic-management-system")})]}),i.jsx(wn,{data:n.serviceItems,columns:H,isLoading:!1,error:null,enableSelection:!1,renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:H.length,className:"text-center py-4 border-start border-end",children:l("No service data found","kivicare-clinic-management-system")})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap form-check form-switch p-0 mb-2",children:[i.jsx("label",{htmlFor:"switchCheckDiscount",className:"form-label m-0",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",name:"discountEnabled",id:"switchCheckDiscount",checked:n.discountEnabled||!1,onChange:Ce=>s(he=>({...he,discountEnabled:Ce.target.checked,discount:Ce.target.checked?he.discount:0}))})]}),i.jsx("div",{className:"encounter-box mb-5",children:n.discountEnabled&&i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"",className:"form-label",children:[l("Discount Value","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${le?"is-invalid":""}`,type:"number",placeholder:l("eg $12","kivicare-clinic-management-system"),value:n.discount,onChange:z,name:"discount",required:!0}),le&&i.jsx("div",{className:"invalid-feedback",children:le})]})})})})})}),i.jsxs("div",{children:[i.jsx("h6",{children:l("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+re+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>T(Ce=>!Ce),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${w?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsxs("span",{className:"text-danger h6 m-0 ms-1",children:[h,oe.toFixed(2),g]})]})]}),w&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),xe.length===0&&i.jsx("div",{className:"text-muted",children:l("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:xe.map((Ce,he)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[Ce.tax_name,Ce.count>1?` x${Ce.count}`:"",Ce.rate?` (${Ce.rate}%)`:""]}),i.jsxs("h6",{className:"font-size-14 m-0 text-danger",children:[h,Ce.totalAmount.toFixed(2),g]})]},he))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx("span",{className:"font-size-14",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+ye+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")}),me>=0?i.jsx("h5",{className:"m-0 text-primary",children:h+me.toFixed(2)+g}):i.jsx("h5",{className:"m-0 text-primary",children:h+0+g})]})]})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"row gy-5",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"",className:"form-label",children:l("Payment Status","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap column-gap-5 row-gap-1",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"pending",value:"unpaid",checked:n.status==="unpaid",onChange:fe}),i.jsx("label",{className:"form-check-label",htmlFor:"pending",children:l("Pending","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"paid",value:"paid",checked:n.status==="paid",onChange:fe}),i.jsx("label",{className:"form-check-label",htmlFor:"paid",children:l("Paid","kivicare-clinic-management-system")})]})]})]})})}),i.jsx("p",{className:"mt-3 mb-0 text-danger font-size-12 fw-semibold",children:l("Note: To close encounter, invoice payment is mandatory","kivicare-clinic-management-system")})]})]}),i.jsxs(st.Footer,{className:"gap-3",children:[i.jsx(Yt,{variant:"secondary",onClick:c,children:l("Cancel","kivicare-clinic-management-system")}),n.status==="paid"?i.jsxs(i.Fragment,{children:[i.jsx(Yt,{variant:"primary",onClick:()=>ie(!1),disabled:_?.isLoading||x?.isLoading,children:l("Close encounter","kivicare-clinic-management-system")}),Number(m)>0&&i.jsx(Yt,{variant:"primary",onClick:()=>ie(!0),disabled:_?.isLoading||x?.isLoading,children:l("Close and checkout","kivicare-clinic-management-system")})]}):i.jsx(Yt,{variant:"primary",onClick:()=>ie(!1),disabled:_?.isLoading||x?.isLoading,children:l("Save","kivicare-clinic-management-system")})]})]})})};var Fh={exports:{}},NV=Fh.exports,e1;function CV(){return e1||(e1=1,(function(t,e){(function(n,s){t.exports=s()})(NV,(function(){var n=1e3,s=6e4,a=36e5,r="millisecond",o="second",c="minute",d="hour",m="day",u="week",p="month",h="quarter",g="year",x="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var F=["th","st","nd","rd"],q=O%100;return"["+O+(F[(q-20)%10]||F[q]||F[0])+"]"}},k=function(O,F,q){var U=String(O);return!U||U.length>=F?O:""+Array(F+1-U.length).join(q)+O},S={s:k,z:function(O){var F=-O.utcOffset(),q=Math.abs(F),U=Math.floor(q/60),K=q%60;return(F<=0?"+":"-")+k(U,2,"0")+":"+k(K,2,"0")},m:function O(F,q){if(F.date()<q.date())return-O(q,F);var U=12*(q.year()-F.year())+(q.month()-F.month()),K=F.clone().add(U,p),ne=q-K<0,Y=F.clone().add(U+(ne?-1:1),p);return+(-(U+(q-K)/(ne?K-Y:Y-K))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:p,y:g,w:u,d:m,D:x,h:d,m:c,s:o,ms:r,Q:h}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",_={};_[N]=j;var w="$isDayjsObject",T=function(O){return O instanceof P||!(!O||!O[w])},A=function O(F,q,U){var K;if(!F)return N;if(typeof F=="string"){var ne=F.toLowerCase();_[ne]&&(K=ne),q&&(_[ne]=q,K=ne);var Y=F.split("-");if(!K&&Y.length>1)return O(Y[0])}else{var fe=F.name;_[fe]=F,K=fe}return!U&&K&&(N=K),K||!U&&N},M=function(O,F){if(T(O))return O.clone();var q=typeof F=="object"?F:{};return q.date=O,q.args=arguments,new P(q)},E=S;E.l=A,E.i=T,E.w=function(O,F){return M(O,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var P=(function(){function O(q){this.$L=A(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[w]=!0}var F=O.prototype;return F.parse=function(q){this.$d=(function(U){var K=U.date,ne=U.utc;if(K===null)return new Date(NaN);if(E.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var Y=K.match(y);if(Y){var fe=Y[2]-1||0,le=(Y[7]||"0").substring(0,3);return ne?new Date(Date.UTC(Y[1],fe,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,le)):new Date(Y[1],fe,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,le)}}return new Date(K)})(q),this.init()},F.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},F.$utils=function(){return E},F.isValid=function(){return this.$d.toString()!==v},F.isSame=function(q,U){var K=M(q);return this.startOf(U)<=K&&K<=this.endOf(U)},F.isAfter=function(q,U){return M(q)<this.startOf(U)},F.isBefore=function(q,U){return this.endOf(U)<M(q)},F.$g=function(q,U,K){return E.u(q)?this[U]:this.set(K,q)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(q,U){var K=this,ne=!!E.u(U)||U,Y=E.p(q),fe=function(Q,V){var Z=E.w(K.$u?Date.UTC(K.$y,V,Q):new Date(K.$y,V,Q),K);return ne?Z:Z.endOf(m)},le=function(Q,V){return E.w(K.toDate()[Q].apply(K.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(V)),K)},W=this.$W,z=this.$M,ie=this.$D,re="set"+(this.$u?"UTC":"");switch(Y){case g:return ne?fe(1,0):fe(31,11);case p:return ne?fe(1,z):fe(0,z+1);case u:var de=this.$locale().weekStart||0,L=(W<de?W+7:W)-de;return fe(ne?ie-L:ie+(6-L),z);case m:case x:return le(re+"Hours",0);case d:return le(re+"Minutes",1);case c:return le(re+"Seconds",2);case o:return le(re+"Milliseconds",3);default:return this.clone()}},F.endOf=function(q){return this.startOf(q,!1)},F.$set=function(q,U){var K,ne=E.p(q),Y="set"+(this.$u?"UTC":""),fe=(K={},K[m]=Y+"Date",K[x]=Y+"Date",K[p]=Y+"Month",K[g]=Y+"FullYear",K[d]=Y+"Hours",K[c]=Y+"Minutes",K[o]=Y+"Seconds",K[r]=Y+"Milliseconds",K)[ne],le=ne===m?this.$D+(U-this.$W):U;if(ne===p||ne===g){var W=this.clone().set(x,1);W.$d[fe](le),W.init(),this.$d=W.set(x,Math.min(this.$D,W.daysInMonth())).$d}else fe&&this.$d[fe](le);return this.init(),this},F.set=function(q,U){return this.clone().$set(q,U)},F.get=function(q){return this[E.p(q)]()},F.add=function(q,U){var K,ne=this;q=Number(q);var Y=E.p(U),fe=function(z){var ie=M(ne);return E.w(ie.date(ie.date()+Math.round(z*q)),ne)};if(Y===p)return this.set(p,this.$M+q);if(Y===g)return this.set(g,this.$y+q);if(Y===m)return fe(1);if(Y===u)return fe(7);var le=(K={},K[c]=s,K[d]=a,K[o]=n,K)[Y]||1,W=this.$d.getTime()+q*le;return E.w(W,this)},F.subtract=function(q,U){return this.add(-1*q,U)},F.format=function(q){var U=this,K=this.$locale();if(!this.isValid())return K.invalidDate||v;var ne=q||"YYYY-MM-DDTHH:mm:ssZ",Y=E.z(this),fe=this.$H,le=this.$m,W=this.$M,z=K.weekdays,ie=K.months,re=K.meridiem,de=function(V,Z,X,R){return V&&(V[Z]||V(U,ne))||X[Z].slice(0,R)},L=function(V){return E.s(fe%12||12,V,"0")},Q=re||function(V,Z,X){var R=V<12?"AM":"PM";return X?R.toLowerCase():R};return ne.replace(b,(function(V,Z){return Z||(function(X){switch(X){case"YY":return String(U.$y).slice(-2);case"YYYY":return E.s(U.$y,4,"0");case"M":return W+1;case"MM":return E.s(W+1,2,"0");case"MMM":return de(K.monthsShort,W,ie,3);case"MMMM":return de(ie,W);case"D":return U.$D;case"DD":return E.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return de(K.weekdaysMin,U.$W,z,2);case"ddd":return de(K.weekdaysShort,U.$W,z,3);case"dddd":return z[U.$W];case"H":return String(fe);case"HH":return E.s(fe,2,"0");case"h":return L(1);case"hh":return L(2);case"a":return Q(fe,le,!0);case"A":return Q(fe,le,!1);case"m":return String(le);case"mm":return E.s(le,2,"0");case"s":return String(U.$s);case"ss":return E.s(U.$s,2,"0");case"SSS":return E.s(U.$ms,3,"0");case"Z":return Y}return null})(V)||Y.replace(":","")}))},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(q,U,K){var ne,Y=this,fe=E.p(U),le=M(q),W=(le.utcOffset()-this.utcOffset())*s,z=this-le,ie=function(){return E.m(Y,le)};switch(fe){case g:ne=ie()/12;break;case p:ne=ie();break;case h:ne=ie()/3;break;case u:ne=(z-W)/6048e5;break;case m:ne=(z-W)/864e5;break;case d:ne=z/a;break;case c:ne=z/s;break;case o:ne=z/n;break;default:ne=z}return K?ne:E.a(ne)},F.daysInMonth=function(){return this.endOf(p).$D},F.$locale=function(){return _[this.$L]},F.locale=function(q,U){if(!q)return this.$L;var K=this.clone(),ne=A(q,U,!0);return ne&&(K.$L=ne),K},F.clone=function(){return E.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},O})(),D=P.prototype;return M.prototype=D,[["$ms",r],["$s",o],["$m",c],["$H",d],["$W",m],["$M",p],["$y",g],["$D",x]].forEach((function(O){D[O[1]]=function(F){return this.$g(F,O[0],O[1])}})),M.extend=function(O,F){return O.$i||(O(F,P,M),O.$i=!0),M},M.locale=A,M.isDayjs=T,M.unix=function(O){return M(1e3*O)},M.en=_[N],M.Ls=_,M.p={},M}))})(Fh)),Fh.exports}var SV=CV();const sl=ma(SV),_V=({limit:t=3})=>{const e=In(),{user:n,isAddonActive:s,getPriceFormat:a,global_date_format:r}=ht(),[o,c]=f.useState(!1),[d,m]=f.useState(null),[u,p]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[h,g]=f.useState(!1),{data:x,isLoading:v}=Pw(d,{enabled:!!d&&o});f.useEffect(()=>{x&&p(x?.data)},[x]);const y=M=>{m(M.id),c(!0)},b=()=>{c(!1),m(null),g(!1)},j=n?.clinic_id||0,{data:k,isLoading:S,error:N}=X6({limit:t,clinic_id:j>0?j:void 0}),_=f.useMemo(()=>k?k.data&&Array.isArray(k.data.data)?k.data.data:Array.isArray(k.data)?k.data:Array.isArray(k)?k:[]:[],[k]),w=s("kiviPro"),T=f.useMemo(()=>[e.accessor("patient",{enableSorting:!1,header:()=>l("Patient","kivicare-clinic-management-system"),cell:({getValue:M})=>{const E=M();return E?i.jsx(Zt,{profileUrl:E.avatar,name:E.name,email:E.email,fallbackText:E.name?.charAt(0)||"P",variant:"primary",size:"sm"}):"-"}}),e.accessor("dateTime",{enableSorting:!1,header:()=>l("Date and time","kivicare-clinic-management-system"),cell:({getValue:M})=>{const E=M();if(!E)return"-";const P=sl(E);if(!P.isValid())return E;const D={Y:"YYYY",y:"YY",F:"MMMM",M:"MMM",m:"MM",n:"M",d:"DD",j:"D",l:"dddd",D:"ddd"},F=(r||"Y-m-d").split("").map(U=>D[U]||U).join("");return`${P.format(F)} ${P.format("h:mm A")}`}}),e.accessor("doctor",{enableSorting:!1,header:()=>l("Doctor","kivicare-clinic-management-system")}),...w?[e.accessor("clinic",{enableSorting:!1,header:()=>l("Clinic","kivicare-clinic-management-system"),cell:({getValue:M})=>M()||"-"})]:[],e.accessor("service",{enableSorting:!1,header:()=>l("Services","kivicare-clinic-management-system")}),e.accessor("charges",{enableSorting:!1,header:()=>l("Charges","kivicare-clinic-management-system"),cell:({getValue:M})=>a(parseFloat(String(M()||0).replace(/[^0-9.]/g,"")||"0"))}),e.accessor("paymentMode",{enableSorting:!1,header:()=>l("Payment Mode","kivicare-clinic-management-system")}),e.accessor("paymentStatus",{enableSorting:!1,header:()=>l("Status","kivicare-clinic-management-system"),cell:({getValue:M})=>{const E=M(),D=String(E||"").toLowerCase()==="paid";return i.jsx("span",{className:`badge ${D?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:D?l("Paid","kivicare-clinic-management-system"):l("Unpaid","kivicare-clinic-management-system")})}}),e.display({enableSorting:!1,id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:({row:M})=>{const E=M.original,D=String(E.paymentStatus||"").toLowerCase()==="paid";return i.jsxs("div",{className:"d-flex align-items-center gap-2 fs-5",children:[i.jsx(gt,{to:`/billings/view/${E.id}`,className:"text-secondary",title:l("View Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye"})}),!D&&i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>y(E),title:l("Edit Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})]})}})],[w,e]);if(N)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l("Error loading payment data:","kivicare-clinic-management-system")," ",N.message||l("Unknown error","kivicare-clinic-management-system")]});const A={currentPage:1,perPage:t,totalItems:_.length,lastPage:1};return i.jsxs(i.Fragment,{children:[i.jsx(wn,{data:_,columns:T,isLoading:S,currentPage:A.currentPage,perPage:A.perPage,totalItems:A.totalItems,lastPage:A.lastPage,bordered:!0,striped:!0,hover:!0,enableSelection:!1,manualPagination:!1,moduleNamePlural:"payments",renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"text-center py-4 border-start border-end",children:l("No payment records found","kivicare-clinic-management-system")})})}),i.jsx(Mw,{show:o,onHide:b,editFormData:u,setEditFormData:p,showAddServiceItemForm:h,setShowAddServiceItemForm:g,editBillId:d,handleCloseEditModal:b})]})};var zg,Ft,LA,FA,Lc,Fl,t1,$A,BA,Op={},qA=[],EV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Qr(t,e){for(var n in e)t[n]=e[n];return t}function HA(t){var e=t.parentNode;e&&e.removeChild(t)}function be(t,e,n){var s,a,r,o={};for(r in e)r=="key"?s=e[r]:r=="ref"?a=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?zg.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)o[r]===void 0&&(o[r]=t.defaultProps[r]);return $h(t,o,s,a,null)}function $h(t,e,n,s,a){var r={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++LA};return a==null&&Ft.vnode!=null&&Ft.vnode(r),r}function $i(){return{current:null}}function Rn(t){return t.children}function TV(t,e,n,s,a){var r;for(r in n)r==="children"||r==="key"||r in e||Lp(t,r,null,n[r],s);for(r in e)a&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===e[r]||Lp(t,r,e[r],n[r],s)}function n1(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||EV.test(e)?n:n+"px"}function Lp(t,e,n,s,a){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)n&&e in n||n1(t.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||n1(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?s||t.addEventListener(e,r?s1:i1,r):t.removeEventListener(e,r?s1:i1,r);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function i1(t){Lc=!0;try{return this.l[t.type+!1](Ft.event?Ft.event(t):t)}finally{Lc=!1}}function s1(t){Lc=!0;try{return this.l[t.type+!0](Ft.event?Ft.event(t):t)}finally{Lc=!1}}function xs(t,e){this.props=t,this.context=e}function Cm(t,e){if(e==null)return t.__?Cm(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Cm(t):null}function zA(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return zA(t)}}function AV(t){Lc?setTimeout(t):$A(t)}function ay(t){(!t.__d&&(t.__d=!0)&&Fl.push(t)&&!Fp.__r++||t1!==Ft.debounceRendering)&&((t1=Ft.debounceRendering)||AV)(Fp)}function Fp(){var t,e,n,s,a,r,o,c;for(Fl.sort(function(d,m){return d.__v.__b-m.__v.__b});t=Fl.shift();)t.__d&&(e=Fl.length,s=void 0,a=void 0,o=(r=(n=t).__v).__e,(c=n.__P)&&(s=[],(a=Qr({},r)).__v=r.__v+1,Iw(c,r,a,n.__n,c.ownerSVGElement!==void 0,r.__h!=null?[o]:null,s,o??Cm(r),r.__h),GA(s,r),r.__e!=o&&zA(r)),Fl.length>e&&Fl.sort(function(d,m){return d.__v.__b-m.__v.__b}));Fp.__r=0}function VA(t,e,n,s,a,r,o,c,d,m){var u,p,h,g,x,v,y,b=s&&s.__k||qA,j=b.length;for(n.__k=[],u=0;u<e.length;u++)if((g=n.__k[u]=(g=e[u])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?$h(null,g,null,null,g):Array.isArray(g)?$h(Rn,{children:g},null,null,null):g.__b>0?$h(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(h=b[u])===null||h&&g.key==h.key&&g.type===h.type)b[u]=void 0;else for(p=0;p<j;p++){if((h=b[p])&&g.key==h.key&&g.type===h.type){b[p]=void 0;break}h=null}Iw(t,g,h=h||Op,a,r,o,c,d,m),x=g.__e,(p=g.ref)&&h.ref!=p&&(y||(y=[]),h.ref&&y.push(h.ref,null,g),y.push(p,g.__c||x,g)),x!=null?(v==null&&(v=x),typeof g.type=="function"&&g.__k===h.__k?g.__d=d=UA(g,d,t):d=WA(t,g,h,b,x,d),typeof n.type=="function"&&(n.__d=d)):d&&h.__e==d&&d.parentNode!=t&&(d=Cm(h))}for(n.__e=v,u=j;u--;)b[u]!=null&&(typeof n.type=="function"&&b[u].__e!=null&&b[u].__e==n.__d&&(n.__d=KA(s).nextSibling),QA(b[u],b[u]));if(y)for(u=0;u<y.length;u++)YA(y[u],y[++u],y[++u])}function UA(t,e,n){for(var s,a=t.__k,r=0;a&&r<a.length;r++)(s=a[r])&&(s.__=t,e=typeof s.type=="function"?UA(s,e,n):WA(n,s,s,a,s.__e,e));return e}function $p(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){$p(n,e)}):e.push(t)),e}function WA(t,e,n,s,a,r){var o,c,d;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||a!=r||a.parentNode==null)e:if(r==null||r.parentNode!==t)t.appendChild(a),o=null;else{for(c=r,d=0;(c=c.nextSibling)&&d<s.length;d+=1)if(c==a)break e;t.insertBefore(a,r),o=r}return o!==void 0?o:a.nextSibling}function KA(t){var e,n,s;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(s=KA(n)))return s}return null}function Iw(t,e,n,s,a,r,o,c,d){var m,u,p,h,g,x,v,y,b,j,k,S,N,_,w,T=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,r=[c]),(m=Ft.__b)&&m(e);try{e:if(typeof T=="function"){if(y=e.props,b=(m=T.contextType)&&s[m.__c],j=m?b?b.props.value:m.__:s,n.__c?v=(u=e.__c=n.__c).__=u.__E:("prototype"in T&&T.prototype.render?e.__c=u=new T(y,j):(e.__c=u=new xs(y,j),u.constructor=T,u.render=RV),b&&b.sub(u),u.props=y,u.state||(u.state={}),u.context=j,u.__n=s,p=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),T.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Qr({},u.__s)),Qr(u.__s,T.getDerivedStateFromProps(y,u.__s))),h=u.props,g=u.state,u.__v=e,p)T.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(T.getDerivedStateFromProps==null&&y!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,j),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,j)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(A){A&&(A.__=e)}),k=0;k<u._sb.length;k++)u.__h.push(u._sb[k]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,j),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,g,x)})}if(u.context=j,u.props=y,u.__P=t,S=Ft.__r,N=0,"prototype"in T&&T.prototype.render){for(u.state=u.__s,u.__d=!1,S&&S(e),m=u.render(u.props,u.state,u.context),_=0;_<u._sb.length;_++)u.__h.push(u._sb[_]);u._sb=[]}else do u.__d=!1,S&&S(e),m=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++N<25);u.state=u.__s,u.getChildContext!=null&&(s=Qr(Qr({},s),u.getChildContext())),p||u.getSnapshotBeforeUpdate==null||(x=u.getSnapshotBeforeUpdate(h,g)),w=m!=null&&m.type===Rn&&m.key==null?m.props.children:m,VA(t,Array.isArray(w)?w:[w],e,n,s,a,r,o,c,d),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),v&&(u.__E=u.__=null),u.__e=!1}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=DV(n.__e,e,n,s,a,r,o,d);(m=Ft.diffed)&&m(e)}catch(A){e.__v=null,(d||r!=null)&&(e.__e=c,e.__h=!!d,r[r.indexOf(c)]=null),Ft.__e(A,e,n)}}function GA(t,e){Ft.__c&&Ft.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(s){s.call(n)})}catch(s){Ft.__e(s,n.__v)}})}function DV(t,e,n,s,a,r,o,c){var d,m,u,p=n.props,h=e.props,g=e.type,x=0;if(g==="svg"&&(a=!0),r!=null){for(;x<r.length;x++)if((d=r[x])&&"setAttribute"in d==!!g&&(g?d.localName===g:d.nodeType===3)){t=d,r[x]=null;break}}if(t==null){if(g===null)return document.createTextNode(h);t=a?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,h.is&&h),r=null,c=!1}if(g===null)p===h||c&&t.data===h||(t.data=h);else{if(r=r&&zg.call(t.childNodes),m=(p=n.props||Op).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!c){if(r!=null)for(p={},x=0;x<t.attributes.length;x++)p[t.attributes[x].name]=t.attributes[x].value;(u||m)&&(u&&(m&&u.__html==m.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(TV(t,h,p,a,c),u)e.__k=[];else if(x=e.props.children,VA(t,Array.isArray(x)?x:[x],e,n,s,a&&g!=="foreignObject",r,o,r?r[0]:n.__k&&Cm(n,0),c),r!=null)for(x=r.length;x--;)r[x]!=null&&HA(r[x]);c||("value"in h&&(x=h.value)!==void 0&&(x!==t.value||g==="progress"&&!x||g==="option"&&x!==p.value)&&Lp(t,"value",x,p.value,!1),"checked"in h&&(x=h.checked)!==void 0&&x!==t.checked&&Lp(t,"checked",x,p.checked,!1))}return t}function YA(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(s){Ft.__e(s,n)}}function QA(t,e,n){var s,a;if(Ft.unmount&&Ft.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||YA(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(r){Ft.__e(r,e)}s.base=s.__P=null,t.__c=void 0}if(s=t.__k)for(a=0;a<s.length;a++)s[a]&&QA(s[a],e,n||typeof t.type!="function");n||t.__e==null||HA(t.__e),t.__=t.__e=t.__d=void 0}function RV(t,e,n){return this.constructor(t,n)}function Sm(t,e,n){var s,a,r;Ft.__&&Ft.__(t,e),a=(s=!1)?null:e.__k,r=[],Iw(e,t=e.__k=be(Rn,null,[t]),a||Op,Op,e.ownerSVGElement!==void 0,a?null:e.firstChild?zg.call(e.childNodes):null,r,a?a.__e:e.firstChild,s),GA(r,t)}function PV(t,e){var n={__c:e="__cC"+BA++,__:t,Consumer:function(s,a){return s.children(a)},Provider:function(s){var a,r;return this.getChildContext||(a=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(c){c.__e=!0,ay(c)})},this.sub=function(o){a.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),c&&c.call(o)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}zg=qA.slice,Ft={__e:function(t,e,n,s){for(var a,r,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((r=a.constructor)&&r.getDerivedStateFromError!=null&&(a.setState(r.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,s||{}),o=a.__d),o)return a.__E=a}catch(c){t=c}throw t}},LA=0,FA=function(t){return t!=null&&t.constructor===void 0},Lc=!1,xs.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qr({},this.state),typeof t=="function"&&(t=t(Qr({},n),this.props)),t&&Qr(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ay(this))},xs.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ay(this))},xs.prototype.render=Rn,Fl=[],$A=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fp.__r=0,BA=0;var Ca,Rv,a1,ZA=[],Pv=[],r1=Ft.__b,l1=Ft.__r,o1=Ft.diffed,c1=Ft.__c,d1=Ft.unmount;function MV(){for(var t;t=ZA.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Bh),t.__H.__h.forEach(ry),t.__H.__h=[]}catch(e){t.__H.__h=[],Ft.__e(e,t.__v)}}Ft.__b=function(t){Ca=null,r1&&r1(t)},Ft.__r=function(t){l1&&l1(t);var e=(Ca=t.__c).__H;e&&(Rv===Ca?(e.__h=[],Ca.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Pv,n.__N=n.i=void 0})):(e.__h.forEach(Bh),e.__h.forEach(ry),e.__h=[])),Rv=Ca},Ft.diffed=function(t){o1&&o1(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ZA.push(e)!==1&&a1===Ft.requestAnimationFrame||((a1=Ft.requestAnimationFrame)||IV)(MV)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Pv&&(n.__=n.__V),n.i=void 0,n.__V=Pv})),Rv=Ca=null},Ft.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Bh),n.__h=n.__h.filter(function(s){return!s.__||ry(s)})}catch(s){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Ft.__e(s,n.__v)}}),c1&&c1(t,e)},Ft.unmount=function(t){d1&&d1(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{Bh(s)}catch(a){e=a}}),n.__H=void 0,e&&Ft.__e(e,n.__v))};var m1=typeof requestAnimationFrame=="function";function IV(t){var e,n=function(){clearTimeout(s),m1&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(n,100);m1&&(e=requestAnimationFrame(n))}function Bh(t){var e=Ca,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Ca=e}function ry(t){var e=Ca;t.__c=t.__(),Ca=e}function OV(t,e){for(var n in e)t[n]=e[n];return t}function u1(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&t[s]!==e[s])return!0;return!1}function h1(t){this.props=t}(h1.prototype=new xs).isPureReactComponent=!0,h1.prototype.shouldComponentUpdate=function(t,e){return u1(this.props,t)||u1(this.state,e)};var p1=Ft.__b;Ft.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),p1&&p1(t)};var LV=Ft.__e;Ft.__e=function(t,e,n,s){if(t.then){for(var a,r=e;r=r.__;)if((a=r.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(t,e)}LV(t,e,n,s)};var g1=Ft.unmount;function XA(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),t.__c.__H=null),(t=OV({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(s){return XA(s,e,n)})),t}function JA(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(s){return JA(s,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Mv(){this.__u=0,this.t=null,this.__b=null}function eD(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ah(){this.u=null,this.o=null}Ft.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),g1&&g1(t)},(Mv.prototype=new xs).__c=function(t,e){var n=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(n);var a=eD(s.__v),r=!1,o=function(){r||(r=!0,n.__R=null,a?a(c):c())};n.__R=o;var c=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=JA(m,m.__c.__P,m.__c.__O)}var u;for(s.setState({__a:s.__b=null});u=s.t.pop();)u.forceUpdate()}},d=e.__h===!0;s.__u++||d||s.setState({__a:s.__b=s.__v.__k[0]}),t.then(o,o)},Mv.prototype.componentWillUnmount=function(){this.t=[]},Mv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=XA(this.__b,n,s.__O=s.__P)}this.__b=null}var a=e.__a&&be(Rn,null,t.fallback);return a&&(a.__h=null),[be(Rn,null,e.__a?null:t.children),a]};var f1=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function FV(t){return this.getChildContext=function(){return t.context},t.children}function $V(t){var e=this,n=t.i;e.componentWillUnmount=function(){Sm(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,a){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),Sm(be(FV,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function BV(t,e){var n=be($V,{__v:t,i:e});return n.containerInfo=e,n}(ah.prototype=new xs).__a=function(t){var e=this,n=eD(e.__v),s=e.o.get(t);return s[0]++,function(a){var r=function(){e.props.revealOrder?(s.push(a),f1(e,t,s)):a()};n?n(r):r()}},ah.prototype.render=function(t){this.u=null,this.o=new Map;var e=$p(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ah.prototype.componentDidUpdate=ah.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){f1(t,n,e)})};var qV=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,HV=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zV=typeof document<"u",VV=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};xs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(xs.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var v1=Ft.event;function UV(){}function WV(){return this.cancelBubble}function KV(){return this.defaultPrevented}Ft.event=function(t){return v1&&(t=v1(t)),t.persist=UV,t.isPropagationStopped=WV,t.isDefaultPrevented=KV,t.nativeEvent=t};var x1={configurable:!0,get:function(){return this.class}},y1=Ft.vnode;Ft.vnode=function(t){var e=t.type,n=t.props,s=n;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var r in s={},n){var o=n[r];zV&&r==="children"&&e==="noscript"||r==="value"&&"defaultValue"in n&&o==null||(r==="defaultValue"&&"value"in n&&n.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!VV(n.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():a&&HV.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),s[r]&&(r="oninputCapture")),s[r]=o)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=$p(n.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=$p(n.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),t.props=s,n.class!=n.className&&(x1.enumerable="className"in n,n.className!=null&&(s.class=n.className),Object.defineProperty(s,"className",x1))}t.$$typeof=qV,y1&&y1(t)};var b1=Ft.__r;Ft.__r=function(t){b1&&b1(t),t.__c};const tD=[],ly=new Map;function Ow(t){tD.push(t),ly.forEach(e=>{iD(e,t)})}function GV(t){t.isConnected&&t.getRootNode&&nD(t.getRootNode())}function nD(t){let e=ly.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=QV();n&&(e.nonce=n);const s=t===document?document.head:t,a=t===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,a)}ly.set(t,e),YV(e)}}function YV(t){for(const e of tD)iD(t,e)}function iD(t,e){const{sheet:n}=t,s=n.cssRules.length;e.split("}").forEach((a,r)=>{a=a.trim(),a&&n.insertRule(a+"}",s+r)})}let Iv;function QV(){return Iv===void 0&&(Iv=ZV()),Iv}function ZV(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&nD(document);var XV=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Ow(XV);class Lw{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:s}=this;e in s&&(n?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Fw(t){t.parentNode&&t.parentNode.removeChild(t)}function Di(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(JV(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function JV(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function eU(t,e){let n=t instanceof HTMLElement?[t]:t,s=[];for(let a=0;a<n.length;a+=1){let r=n[a].querySelectorAll(e);for(let o=0;o<r.length;o+=1)s.push(r[o])}return s}const tU=/(top|left|right|bottom|width|height)$/i;function sm(t,e){for(let n in e)sD(t,n,e[n])}function sD(t,e,n){n==null?t.style[e]="":typeof n=="number"&&tU.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function aD(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let w1=0;function Vg(){return w1+=1,"fc-dom-"+w1}function Ug(t){t.preventDefault()}function nU(t,e){return n=>{let s=Di(n.target,t);s&&e.call(s,n,s)}}function rD(t,e,n,s){let a=nU(n,s);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function iU(t,e,n,s){let a;return rD(t,"mouseover",e,(r,o)=>{if(o!==a){a=o,n(r,o);let c=d=>{a=null,s(d,o),o.removeEventListener("mouseleave",c)};o.addEventListener("mouseleave",c)}})}const k1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function sU(t,e){let n=s=>{e(s),k1.forEach(a=>{t.removeEventListener(a,n)})};k1.forEach(s=>{t.addEventListener(s,n)})}function lD(t){return Object.assign({onClick:t},oD(t))}function oD(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let j1=0;function So(){return j1+=1,String(j1)}function $w(){document.body.classList.add("fc-not-allowed")}function Bw(){document.body.classList.remove("fc-not-allowed")}function aU(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Ug)}function rU(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Ug)}function lU(t){t.addEventListener("contextmenu",Ug)}function oU(t){t.removeEventListener("contextmenu",Ug)}function cU(t){let e=[],n=[],s,a;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),s=0;s<n.length;s+=1)a=n[s],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function dU(t,e,n){let s,a;for(s=0;s<n.length;s+=1)if(a=mU(t,e,n[s]),a)return a;return 0}function mU(t,e,n){return n.func?n.func(t,e):uU(t[n.field],e[n.field])*(n.order||1)}function uU(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function xc(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function am(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((s,a,r)=>s.replace("$"+r,a||""),t):n}function hU(t,e){return t-e}function qh(t){return t%1===0}function pU(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const N1=["years","months","days","milliseconds"],gU=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Qt(t,e){return typeof t=="string"?fU(t):typeof t=="object"&&t?C1(t):typeof t=="number"?C1({[e||"milliseconds"]:t}):null}function fU(t){let e=gU.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function C1(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function vU(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function oy(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function xU(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function yU(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function bU(t){return yc(t)/365}function wU(t){return yc(t)/30}function yc(t){return ia(t)/864e5}function ia(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function qw(t,e){let n=null;for(let s=0;s<N1.length;s+=1){let a=N1[s];if(e[a]){let r=t[a]/e[a];if(!qh(r)||n!==null&&n!==r)return null;n=r}else if(t[a])return null}return n}function cy(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function ml(t,e,n){if(t===e)return!0;let s=t.length,a;if(s!==e.length)return!1;for(a=0;a<s;a+=1)if(!(n?n(t[a],e[a]):t[a]===e[a]))return!1;return!0}const kU=["sun","mon","tue","wed","thu","fri","sat"];function S1(t,e){let n=Zr(t);return n[2]+=e*7,ts(n)}function hi(t,e){let n=Zr(t);return n[2]+=e,ts(n)}function ul(t,e){let n=Zr(t);return n[6]+=e,ts(n)}function jU(t,e){return _o(t,e)/7}function _o(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function NU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function CU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function SU(t,e){return(e.valueOf()-t.valueOf())/1e3}function _U(t,e){let n=Pn(t),s=Pn(e);return{years:0,months:0,days:Math.round(_o(n,s)),milliseconds:e.valueOf()-s.valueOf()-(t.valueOf()-n.valueOf())}}function EU(t,e){let n=Bp(t,e);return n!==null&&n%7===0?n/7:null}function Bp(t,e){return Xr(t)===Xr(e)?Math.round(_o(t,e)):null}function Pn(t){return ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function TU(t){return ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function AU(t){return ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function DU(t){return ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function RU(t,e,n){let s=t.getUTCFullYear(),a=Ov(t,s,e,n);if(a<1)return Ov(t,s-1,e,n);let r=Ov(t,s+1,e,n);return r>=1?Math.min(a,r):a}function Ov(t,e,n,s){let a=ts([e,0,1+PU(e,n,s)]),r=Pn(t),o=Math.round(_o(a,r));return Math.floor(o/7)+1}function PU(t,e,n){let s=7+e-n;return-((7+ts([t,0,s]).getUTCDay()-e)%7)+s-1}function _1(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function E1(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Zr(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function ts(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function cD(t){return!isNaN(t.valueOf())}function Xr(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function dD(t,e,n=!1){let s=t.toISOString();return s=s.replace(".000",""),n&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",zw(e,!0)))),s}function Hw(t){return t.toISOString().replace(/T.*$/,"")}function MU(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function IU(t){return xc(t.getUTCHours(),2)+":"+xc(t.getUTCMinutes(),2)+":"+xc(t.getUTCSeconds(),2)}function zw(t,e=!1){let n=t<0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),r=Math.round(s%60);return e?`${n+xc(a,2)}:${xc(r,2)}`:`GMT${n}${a}${r?`:${xc(r,2)}`:""}`}function $t(t,e,n){let s,a;return function(...r){if(!s)a=t.apply(this,r);else if(!ml(s,r)){let o=t.apply(this,r);(!e||!e(o,a))&&(a=o)}return s=r,a}}function Hh(t,e,n){let s,a;return r=>(s?la(s,r)||(a=t.call(this,r)):a=t.call(this,r),s=r,a)}const Lv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},qp={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},rh=/\s*([ap])\.?m\.?/i,OU=/,/g,LU=/\s+/g,FU=/\u200e/g,$U=/UTC|GMT/;class BU{constructor(e){let n={},s={},a=9;for(let r in e)r in Lv?(s[r]=e[r],Lv[r]<9&&(a=Math.min(Lv[r],a))):(n[r]=e[r],r in qp&&(a=Math.min(qp[r],a)));this.standardDateProps=n,this.extendedSettings=s,this.smallestUnitNum=a,this.buildFormattingFunc=$t(T1)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,s,a){let{standardDateProps:r,extendedSettings:o}=this,c=WU(e.marker,n.marker,s.calendarSystem);if(!c)return this.format(e,s);let d=c;d>1&&(r.year==="numeric"||r.year==="2-digit")&&(r.month==="numeric"||r.month==="2-digit")&&(r.day==="numeric"||r.day==="2-digit")&&(d=1);let m=this.format(e,s),u=this.format(n,s);if(m===u)return m;let p=KU(r,d),h=T1(p,o,s),g=h(e),x=h(n),v=GU(m,g,u,x),y=o.separator||a||s.defaultSeparator||"";return v?v.before+g+y+x+v.after:m+y+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function T1(t,e,n){let s=Object.keys(t).length;return s===1&&t.timeZoneName==="short"?a=>zw(a.timeZoneOffset):s===0&&e.week?a=>UU(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,e.week):qU(t,e,n)}function qU(t,e,n){t=Object.assign({},t),e=Object.assign({},e),HU(t,e),t.timeZone="UTC";let s=new Intl.DateTimeFormat(n.locale.codes,t),a;if(e.omitZeroMinute){let r=Object.assign({},t);delete r.minute,a=new Intl.DateTimeFormat(n.locale.codes,r)}return r=>{let{marker:o}=r,c;a&&!o.getUTCMinutes()?c=a:c=s;let d=c.format(o);return zU(d,r,t,e,n)}}function HU(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function zU(t,e,n,s,a){return t=t.replace(FU,""),n.timeZoneName==="short"&&(t=VU(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":zw(e.timeZoneOffset))),s.omitCommas&&(t=t.replace(OU,"").trim()),s.omitZeroMinute&&(t=t.replace(":00","")),s.meridiem===!1?t=t.replace(rh,"").trim():s.meridiem==="narrow"?t=t.replace(rh,(r,o)=>o.toLocaleLowerCase()):s.meridiem==="short"?t=t.replace(rh,(r,o)=>`${o.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(t=t.replace(rh,r=>r.toLocaleLowerCase())),t=t.replace(LU," "),t=t.trim(),t}function VU(t,e){let n=!1;return t=t.replace($U,()=>(n=!0,e)),n||(t+=` ${e}`),t}function UU(t,e,n,s,a){let r=[];return a==="long"?r.push(n):(a==="short"||a==="narrow")&&r.push(e),(a==="long"||a==="short")&&r.push(" "),r.push(s.simpleNumberFormat.format(t)),s.options.direction==="rtl"&&r.reverse(),r.join("")}function WU(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:Xr(t)!==Xr(e)?1:0}function KU(t,e){let n={};for(let s in t)(!(s in qp)||qp[s]<=e)&&(n[s]=t[s]);return n}function GU(t,e,n,s){let a=0;for(;a<t.length;){let r=t.indexOf(e,a);if(r===-1)break;let o=t.substr(0,r);a=r+e.length;let c=t.substr(a),d=0;for(;d<n.length;){let m=n.indexOf(s,d);if(m===-1)break;let u=n.substr(0,m);d=m+s.length;let p=n.substr(d);if(o===u&&c===p)return{before:o,after:c}}}return null}function A1(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Hp(t,e,n,s){let a=A1(t,n.calendarSystem),r=e?A1(e,n.calendarSystem):null;return{date:a,start:a,end:r,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:s||n.defaultSeparator}}class YU{constructor(e){this.cmdStr=e}format(e,n,s){return n.cmdFormatter(this.cmdStr,Hp(e,null,n,s))}formatRange(e,n,s,a){return s.cmdFormatter(this.cmdStr,Hp(e,n,s,a))}}class QU{constructor(e){this.func=e}format(e,n,s){return this.func(Hp(e,null,n,s))}formatRange(e,n,s,a){return this.func(Hp(e,n,s,a))}}function qn(t){return typeof t=="object"&&t?new BU(t):typeof t=="string"?new YU(t):typeof t=="function"?new QU(t):null}const D1={navLinkDayClick:Ie,navLinkWeekClick:Ie,duration:Qt,bootstrapFontAwesome:Ie,buttonIcons:Ie,customButtons:Ie,defaultAllDayEventDuration:Qt,defaultTimedEventDuration:Qt,nextDayThreshold:Qt,scrollTime:Qt,scrollTimeReset:Boolean,slotMinTime:Qt,slotMaxTime:Qt,dayPopoverFormat:qn,slotDuration:Qt,snapDuration:Qt,headerToolbar:Ie,footerToolbar:Ie,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:qn,dayHeaderClassNames:Ie,dayHeaderContent:Ie,dayHeaderDidMount:Ie,dayHeaderWillUnmount:Ie,dayCellClassNames:Ie,dayCellContent:Ie,dayCellDidMount:Ie,dayCellWillUnmount:Ie,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ie,weekNumbers:Boolean,weekNumberClassNames:Ie,weekNumberContent:Ie,weekNumberDidMount:Ie,weekNumberWillUnmount:Ie,editable:Boolean,viewClassNames:Ie,viewDidMount:Ie,viewWillUnmount:Ie,nowIndicator:Boolean,nowIndicatorSnap:Ie,nowIndicatorClassNames:Ie,nowIndicatorContent:Ie,nowIndicatorDidMount:Ie,nowIndicatorWillUnmount:Ie,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ie,locale:Ie,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ie,eventOrder:cU,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ie,contentHeight:Ie,direction:String,weekNumberFormat:qn,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ie,initialDate:Ie,now:Ie,eventDataTransform:Ie,stickyHeaderDates:Ie,stickyFooterScrollbar:Ie,viewHeight:Ie,defaultAllDay:Boolean,eventSourceFailure:Ie,eventSourceSuccess:Ie,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ie,eventConstraint:Ie,eventAllow:Ie,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ie,eventContent:Ie,eventDidMount:Ie,eventWillUnmount:Ie,selectConstraint:Ie,selectOverlap:Ie,selectAllow:Ie,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ie,slotLaneClassNames:Ie,slotLaneContent:Ie,slotLaneDidMount:Ie,slotLaneWillUnmount:Ie,slotLabelClassNames:Ie,slotLabelContent:Ie,slotLabelDidMount:Ie,slotLabelWillUnmount:Ie,dayMaxEvents:Ie,dayMaxEventRows:Ie,dayMinWidth:Number,slotLabelInterval:Qt,allDayText:String,allDayClassNames:Ie,allDayContent:Ie,allDayDidMount:Ie,allDayWillUnmount:Ie,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:qn,rerenderDelay:Number,moreLinkText:Ie,moreLinkHint:Ie,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ie,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Qt,hiddenDays:Ie,fixedWeekCount:Boolean,validRange:Ie,visibleRange:Ie,titleFormat:Ie,eventInteractive:Boolean,noEventsText:String,viewHint:Ie,navLinkHint:Ie,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ie,moreLinkClassNames:Ie,moreLinkContent:Ie,moreLinkDidMount:Ie,moreLinkWillUnmount:Ie,monthStartFormat:qn,handleCustomRendering:Ie,customRenderingMetaMap:Ie,customRenderingReplaces:Boolean},rm={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},R1={datesSet:Ie,eventsSet:Ie,eventAdd:Ie,eventChange:Ie,eventRemove:Ie,windowResize:Ie,eventClick:Ie,eventMouseEnter:Ie,eventMouseLeave:Ie,select:Ie,unselect:Ie,loading:Ie,_unmount:Ie,_beforeprint:Ie,_afterprint:Ie,_noEventDrop:Ie,_noEventResize:Ie,_resize:Ie,_scrollRequest:Ie},P1={buttonText:Ie,buttonHints:Ie,views:Ie,plugins:Ie,initialEvents:Ie,events:Ie,eventSources:Ie},Il={headerToolbar:Ol,footerToolbar:Ol,buttonText:Ol,buttonHints:Ol,buttonIcons:Ol,dateIncrement:Ol,plugins:lh,events:lh,eventSources:lh,resources:lh};function Ol(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?la(t,e):t===e}function lh(t,e){return Array.isArray(t)&&Array.isArray(e)?ml(t,e):t===e}const ZU={type:String,component:Ie,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ie,usesMinMaxTime:Boolean,classNames:Ie,content:Ie,didMount:Ie,willUnmount:Ie};function Fv(t){return Uw(t,Il)}function Vw(t,e){let n={},s={};for(let a in e)a in t&&(n[a]=e[a](t[a]));for(let a in t)a in e||(s[a]=t[a]);return{refined:n,extra:s}}function Ie(t){return t}const{hasOwnProperty:zp}=Object.prototype;function Uw(t,e){let n={};if(e){for(let s in e)if(e[s]===Ol){let a=[];for(let r=t.length-1;r>=0;r-=1){let o=t[r][s];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){n[s]=o;break}}a.length&&(n[s]=Uw(a))}}for(let s=t.length-1;s>=0;s-=1){let a=t[s];for(let r in a)r in n||(n[r]=a[r])}return n}function ro(t,e){let n={};for(let s in t)e(t[s],s)&&(n[s]=t[s]);return n}function wr(t,e){let n={};for(let s in t)n[s]=e(t[s],s);return n}function mD(t){let e={};for(let n of t)e[n]=!0;return e}function Ww(t){let e=[];for(let n in t)e.push(t[n]);return e}function la(t,e){if(t===e)return!0;for(let n in t)if(zp.call(t,n)&&!(n in e))return!1;for(let n in e)if(zp.call(e,n)&&t[n]!==e[n])return!1;return!0}const XU=/^on[A-Z]/;function JU(t,e){const n=eW(t,e);for(let s of n)if(!XU.test(s))return!1;return!0}function eW(t,e){let n=[];for(let s in t)zp.call(t,s)&&(s in e||n.push(s));for(let s in e)zp.call(e,s)&&t[s]!==e[s]&&n.push(s);return n}function $v(t,e,n={}){if(t===e)return!0;for(let s in e)if(!(s in t&&tW(t[s],e[s],n[s])))return!1;for(let s in t)if(!(s in e))return!1;return!0}function tW(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function nW(t,e=0,n,s=1){let a=[];n==null&&(n=Object.keys(t).length);for(let r=e;r<n;r+=s){let o=t[r];o!==void 0&&a.push(o)}return a}let uD={};function iW(t,e){uD[t]=e}function sW(t){return new uD[t]}class aW{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return ts(e)}markerToArray(e){return Zr(e)}}iW("gregory",aW);const rW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function lW(t){let e=rW.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(cD(n)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class oW{constructor(e){let n=this.timeZone=e.timeZone,s=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=sW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):ts(_1(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=ts(e)),n===null||!cD(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=lW(e);if(n===null)return null;let{marker:s}=n,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:s,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n.years,s[1]+=n.months,s[2]+=n.days,s[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]-=n.years,s[1]-=n.months,s[2]-=n.days,s[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n,this.calendarSystem.arrayToMarker(s)}addMonths(e,n){let s=this.calendarSystem.markerToArray(e);return s[1]+=n,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,n){let{calendarSystem:s}=this;return Xr(e)===Xr(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)&&s.getMarkerMonth(e)===s.getMarkerMonth(n)?s.getMarkerYear(n)-s.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:s}=this;return Xr(e)===Xr(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)?s.getMarkerMonth(n)-s.getMarkerMonth(e)+(s.getMarkerYear(n)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let s=this.diffWholeYears(e,n);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,n),s!==null?{unit:"month",value:s}:(s=EU(e,n),s!==null?{unit:"week",value:s}:(s=Bp(e,n),s!==null?{unit:"day",value:s}:(s=NU(e,n),qh(s)?{unit:"hour",value:s}:(s=CU(e,n),qh(s)?{unit:"minute",value:s}:(s=SU(e,n),qh(s)?{unit:"second",value:s}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,s){let a;return s.years&&(a=this.diffWholeYears(e,n),a!==null)?a/bU(s):s.months&&(a=this.diffWholeMonths(e,n),a!==null)?a/wU(s):s.days&&(a=Bp(e,n),a!==null)?a/yc(s):(n.valueOf()-e.valueOf())/ia(s)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?Pn(e):n==="hour"?TU(e):n==="minute"?AU(e):n==="second"?DU(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):RU(e,this.weekDow,this.weekDoy)}format(e,n,s={}){return n.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,s,a={}){return a.isEndExclusive&&(n=ul(n,-1)),s.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)}formatIso(e,n={}){let s=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?s=n.forcedTzo:s=this.offsetForMarker(e)),dD(e,s,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?ts(_1(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):ts(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-E1(Zr(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Zr(e)):null}toDate(e,n){return this.timeZone==="local"?E1(Zr(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Zr(e))*1e3*60):new Date(e.valueOf()-(n||0))}}let su=class{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,s;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(s in e)n[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let s;return n&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}};su.prototype.classes={};su.prototype.iconClasses={};su.prototype.baseIconClass="";su.prototype.iconOverridePrefix="";function Vp(t){t();let e=Ft.debounceRendering,n=[];function s(a){n.push(a)}for(Ft.debounceRendering=s,Sm(be(cW,{}),document.createElement("div"));n.length;)n.shift()();Ft.debounceRendering=e}class cW extends xs{render(){return be("div",{})}componentDidMount(){this.setState({})}}function hD(t){let e=PV(t),n=e.Provider;return e.Provider=function(){let s=!this.getChildContext,a=n.apply(this,arguments);if(s){let r=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&r.forEach(c=>{c.context=o.value,c.forceUpdate()})},this.sub=o=>{r.push(o);let c=o.componentWillUnmount;o.componentWillUnmount=()=>{r.splice(r.indexOf(o),1),c&&c.call(o)}}}return a},e}class dW{constructor(e,n,s,a){this.execFunc=e,this.emitter=n,this.scrollTime=s,this.scrollTimeReset=a,this.handleScrollRequest=r=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},r),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Er=hD({});function mW(t,e,n,s,a,r,o,c,d,m,u,p,h,g){return{dateEnv:a,nowManager:r,options:n,pluginHooks:c,emitter:u,dispatch:d,getCurrentData:m,calendarApi:p,viewSpec:t,viewApi:e,dateProfileGenerator:s,theme:o,isRtl:n.direction==="rtl",addResizeHandler(x){u.on("_resize",x)},removeResizeHandler(x){u.off("_resize",x)},createScrollResponder(x){return new dW(x,u,Qt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:g}}class Eo extends xs{shouldComponentUpdate(e,n){return!$v(this.props,e,this.propEquality)||!$v(this.state,n,this.stateEquality)}safeSetState(e){$v(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Eo.addPropsEquality=uW;Eo.addStateEquality=hW;Eo.contextType=Er;Eo.prototype.propEquality={};Eo.prototype.stateEquality={};class kn extends Eo{}kn.contextType=Er;function uW(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function hW(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Ia(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class Kw extends kn{constructor(){super(...arguments),this.id=So(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:s}=this.props;(!n.customRenderingReplaces||!dy(s,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Ia(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:s}=n,{customGenerator:a,defaultGenerator:r,renderProps:o}=e,c=pD(e,[],this.handleEl);let d=!1,m,u=[],p;if(a!=null){const h=typeof a=="function"?a(o,be):a;if(h===!0)d=!0;else{const g=h&&typeof h=="object";g&&"html"in h?c.dangerouslySetInnerHTML={__html:h.html}:g&&"domNodes"in h?u=Array.prototype.slice.call(h.domNodes):(g?FA(h):typeof h!="function")?m=h:p=h}}else d=!dy(e.generatorName,s);return d&&r&&(m=r(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=p,be(e.elTag,c,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:s,context:a}=this,{handleCustomRendering:r,customRenderingMetaMap:o}=a.options;if(r){const c=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o?.[s.generatorName];c&&r(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},s),{elClasses:(s.elClasses||[]).filter(pW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,s=this.base;if(!ml(e,n)){n.forEach(Fw);for(let a of e)s.appendChild(a);this.currentDomNodes=e}}}Kw.addPropsEquality({elClasses:ml,elStyle:la,elAttrs:JU,renderProps:la});function dy(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function pD(t,e,n){const s=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(s.className=(t.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),t.elStyle&&(s.style=t.elStyle),s}function pW(t){return!!t}const gD=hD(0);class Cs extends xs{constructor(){super(...arguments),this.InnerContent=gW.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Ia(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=fW(e.classNameGenerator,e.renderProps);if(e.children){const s=pD(e,n,this.handleEl),a=e.children(this.InnerContent,e.renderProps,s);return e.elTag?be(e.elTag,s,a):a}else return be(Kw,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Cs.contextType=gD;function gW(t,e){const n=t.props;return be(Kw,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function fW(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Up extends kn{render(){let{props:e,context:n}=this,{options:s}=n,a={view:n.viewApi};return be(Cs,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...fD(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function fD(t){return[`fc-${t.type}-view`,"fc-view"]}function vW(t,e){let n=null,s=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(s=e.createMarker(t.end)),!n&&!s||n&&s&&s<n?null:{start:n,end:s}}function M1(t,e){let n=[],{start:s}=e,a,r;for(t.sort(xW),a=0;a<t.length;a+=1)r=t[a],r.start>s&&n.push({start:s,end:r.start}),r.end>s&&(s=r.end);return s<e.end&&n.push({start:s,end:e.end}),n}function xW(t,e){return t.start.valueOf()-e.start.valueOf()}function lo(t,e){let{start:n,end:s}=t,a=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(n===null||s===null||n<s)&&(a={start:n,end:s}),a}function yW(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Gw(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Wg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function fr(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function bW(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function vD(t){let e=Math.floor(_o(t.start,t.end))||1,n=Pn(t.start),s=hi(n,e);return{start:n,end:s}}function xD(t,e=Qt(0)){let n=null,s=null;if(t.end){s=Pn(t.end);let a=t.end.valueOf()-s.valueOf();a&&a>=ia(e)&&(s=hi(s,1))}return t.start&&(n=Pn(t.start),s&&s<=n&&(s=hi(n,1))),{start:n,end:s}}function ac(t,e,n,s){return s==="year"?Qt(n.diffWholeYears(t,e),"year"):s==="month"?Qt(n.diffWholeMonths(t,e),"month"):_U(t,e)}class yD{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,s){let{dateEnv:a}=this.props,r=a.subtract(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(r,-1,s)}buildNext(e,n,s){let{dateEnv:a}=this.props,r=a.add(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(r,1,s)}build(e,n,s=!0){let{props:a}=this,r,o,c,d,m,u;return r=this.buildValidRange(),r=this.trimHiddenDays(r),s&&(e=bW(e,r)),o=this.buildCurrentRangeInfo(e,n),c=/^(year|month|week|day)$/.test(o.unit),d=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,c),d=this.trimHiddenDays(d),m=d,a.showNonCurrentDates||(m=lo(m,o.range)),m=this.adjustActiveRange(m),m=lo(m,r),u=Gw(o.range,r),fr(d,e)||(e=d.start),{currentDate:e,validRange:r,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:c,activeRange:m,renderRange:d,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:s}=this,a=null,r=null,o=null,c;return s.duration?(a=s.duration,r=s.durationUnit,o=this.buildRangeFromDuration(e,n,a,r)):(c=this.props.dayCount)?(r="day",o=this.buildRangeFromDayCount(e,n,c)):(o=this.buildCustomVisibleRange(e))?r=s.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),r=cy(a).unit,o=this.buildRangeFromDuration(e,n,a,r)),{duration:a,unit:r,range:o}}getFallbackDuration(){return Qt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:s,slotMinTime:a,slotMaxTime:r}=this.props,{start:o,end:c}=e;return s&&(yc(a)<0&&(o=Pn(o),o=n.add(o,a)),yc(r)>1&&(c=Pn(c),c=hi(c,-1),c=n.add(c,r))),{start:o,end:c}}buildRangeFromDuration(e,n,s,a){let{dateEnv:r,dateAlignment:o}=this.props,c,d,m;if(!o){let{dateIncrement:p}=this.props;p&&ia(p)<ia(s)?o=cy(p).unit:o=a}yc(s)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,n),c=Pn(c));function u(){c=r.startOf(e,o),d=r.add(c,s),m={start:c,end:d}}return u(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,n),u()),m}buildRangeFromDayCount(e,n,s){let{dateEnv:a,dateAlignment:r}=this.props,o=0,c=e,d;r&&(c=a.startOf(c,r)),c=Pn(c),c=this.skipHiddenDays(c,n),d=c;do d=hi(d,1),this.isHiddenDay(d)||(o+=1);while(o<s);return{start:c,end:d}}buildCustomVisibleRange(e){let{props:n}=this,s=n.visibleRangeInput,a=typeof s=="function"?s.call(n.calendarApi,n.dateEnv.toDate(e)):s,r=this.refineRange(a);return r&&(r.start==null||r.end==null)?null:r}buildRenderRange(e,n,s){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,s;return n||((s=this.props.dateAlignment)?Qt(1,s):e||Qt({days:1}))}refineRange(e){if(e){let n=vW(e,this.props.dateEnv);return n&&(n=xD(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],s=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(n[a]=e.indexOf(a)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:s}=e;return n&&(n=this.skipHiddenDays(n)),s&&(s=this.skipHiddenDays(s,-1,!0)),n==null||s==null||n<s?{start:n,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?n:0)+7)%7];)e=hi(e,n);return e}}function Yw(t,e,n,s){return{instanceId:So(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:s??null}}function wW(t,e,n,s){for(let a=0;a<s.length;a+=1){let r=s[a].parse(t,n);if(r){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=r.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:r.duration,typeData:r.typeData,typeId:a}}}return null}function oo(t,e,n){let{dateEnv:s,pluginHooks:a,options:r}=n,{defs:o,instances:c}=t;c=ro(c,d=>!o[d.defId].recurringDef);for(let d in o){let m=o[d];if(m.recurringDef){let{duration:u}=m.recurringDef;u||(u=m.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);let p=kW(m,u,e,s,a.recurringTypes);for(let h of p){let g=Yw(d,{start:h,end:s.add(h,u)});c[g.instanceId]=g}}}return{defs:o,instances:c}}function kW(t,e,n,s,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:s.subtract(n.start,e),end:n.end},s);return t.allDay&&(o=o.map(Pn)),o}const zh={id:String,groupId:String,title:String,url:String,interactive:Boolean},bD={start:Ie,end:Ie,date:Ie,allDay:Boolean},jW=Object.assign(Object.assign(Object.assign({},zh),bD),{extendedProps:Ie});function wD(t,e,n,s,a=Qw(n),r,o){let{refined:c,extra:d}=kD(t,n,a),m=CW(e,n),u=wW(c,m,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let h=my(c,d,e?e.sourceId:"",u.allDay,!!u.duration,n,r);return h.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:h,instance:null}}let p=NW(c,m,n,s);if(p){let h=my(c,d,e?e.sourceId:"",p.allDay,p.hasEnd,n,r),g=Yw(h.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return o&&h.publicId&&o[h.publicId]&&(g.instanceId=o[h.publicId]),{def:h,instance:g}}return null}function kD(t,e,n=Qw(e)){return Vw(t,n)}function Qw(t){return Object.assign(Object.assign(Object.assign({},Wp),jW),t.pluginHooks.eventRefiners)}function my(t,e,n,s,a,r,o){let c={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||So(),sourceId:n,allDay:s,hasEnd:a,interactive:t.interactive,ui:Kp(t,r),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let d of r.pluginHooks.eventDefMemberAdders)Object.assign(c,d(t));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function NW(t,e,n,s){let{allDay:a}=t,r,o=null,c=!1,d,m=null,u=t.start!=null?t.start:t.date;if(r=n.dateEnv.createMarkerMeta(u),r)o=r.marker;else if(!s)return null;return t.end!=null&&(d=n.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!r||r.isTimeUnspecified)&&(!d||d.isTimeUnspecified)),a&&o&&(o=Pn(o)),d&&(m=d.marker,a&&(m=Pn(m)),o&&m<=o&&(m=null)),m?c=!0:s||(c=n.options.forceEventDuration||!1,m=n.dateEnv.add(o,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:c,range:{start:o,end:m},forcedStartTzo:r?r.forcedTzo:null,forcedEndTzo:d?d.forcedTzo:null}}function CW(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function _m(t,e,n,s,a,r){let o=ys(),c=Qw(n);for(let d of t){let m=wD(d,e,n,s,c,a,r);m&&uy(m,o)}return o}function uy(t,e=ys()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function Zw(t,e){let n=t.instances[e];if(n){let s=t.defs[n.defId],a=Kg(t,r=>SW(s,r));return a.defs[s.defId]=s,a.instances[n.instanceId]=n,a}return ys()}function SW(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function ys(){return{defs:{},instances:{}}}function Xw(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Kg(t,e){let n=ro(t.defs,e),s=ro(t.instances,a=>n[a.defId]);return{defs:n,instances:s}}function _W(t,e){let{defs:n,instances:s}=t,a={},r={};for(let o in n)e.defs[o]||(a[o]=n[o]);for(let o in s)!e.instances[o]&&a[s[o].defId]&&(r[o]=s[o]);return{defs:a,instances:r}}function EW(t,e){return Array.isArray(t)?_m(t,null,e,!0):typeof t=="object"&&t?_m([t],null,e,!0):t!=null?String(t):null}function I1(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Wp={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ie,overlap:Ie,allow:Ie,className:I1,classNames:I1,color:String,backgroundColor:String,borderColor:String,textColor:String},TW={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Kp(t,e){let n=EW(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function jD(t){return t.reduce(AW,TW)}function AW(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const DW={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ie,eventDataTransform:Ie,success:Ie,failure:Ie};function ND(t,e,n=CD(e)){let s;if(typeof t=="string"?s={url:t}:typeof t=="function"||Array.isArray(t)?s={events:t}:typeof t=="object"&&t&&(s=t),s){let{refined:a,extra:r}=Vw(s,n),o=RW(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:So(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Kp(a,e),extendedProps:r}}return null}function CD(t){return Object.assign(Object.assign(Object.assign({},Wp),DW),t.pluginHooks.eventSourceRefiners)}function RW(t,e){let n=e.pluginHooks.eventSourceDefs;for(let s=n.length-1;s>=0;s-=1){let r=n[s].parseMeta(t);if(r)return{sourceDefId:s,meta:r}}return null}function PW(t,e,n,s,a){switch(e.type){case"RECEIVE_EVENTS":return MW(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return IW(t,n[e.sourceId],e.rawEvents,s.activeRange,a);case"ADD_EVENTS":return OW(t,e.eventStore,s?s.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Xw(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?oo(t,s.activeRange,a):t;case"REMOVE_EVENTS":return _W(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return _D(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kg(t,r=>!r.sourceId);case"REMOVE_ALL_EVENTS":return ys();default:return t}}function MW(t,e,n,s,a,r){if(e&&n===e.latestFetchId){let o=_m(SD(a,e,r),e,r);return s&&(o=oo(o,s,r)),Xw(_D(t,e.sourceId),o)}return t}function IW(t,e,n,s,a){const{defIdMap:r,instanceIdMap:o}=FW(t);let c=_m(SD(n,e,a),e,a,!1,r,o);return oo(c,s,a)}function SD(t,e,n){let s=n.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=O1(t,a)),s&&(t=O1(t,s)),t}function O1(t,e){let n;if(!e)n=t;else{n=[];for(let s of t){let a=e(s);a?n.push(a):a==null&&n.push(s)}}return n}function OW(t,e,n,s){return n&&(e=oo(e,n,s)),Xw(t,e)}function L1(t,e,n){let{defs:s}=t,a=wr(t.instances,r=>s[r.defId].allDay?r:Object.assign(Object.assign({},r),{range:{start:n.createMarker(e.toDate(r.range.start,r.forcedStartTzo)),end:n.createMarker(e.toDate(r.range.end,r.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:r.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:r.forcedEndTzo}));return{defs:s,instances:a}}function _D(t,e){return Kg(t,n=>n.sourceId!==e)}function LW(t,e){return{defs:t.defs,instances:ro(t.instances,n=>!e[n.instanceId])}}function FW(t){const{defs:e,instances:n}=t,s={},a={};for(let r in e){const o=e[r],{publicId:c}=o;c&&(s[c]=r)}for(let r in n){const o=n[r],c=e[o.defId],{publicId:d}=c;d&&(a[d]=r)}return{defIdMap:s,instanceIdMap:a}}let Gg=class{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){$W(this.handlers,e,n)}off(e,n){BW(this.handlers,e,n)}trigger(e,...n){let s=this.handlers[e]||[],a=this.options&&this.options[e],r=[].concat(a||[],s);for(let o of r)o.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}};function $W(t,e,n){(t[e]||(t[e]=[])).push(n)}function BW(t,e,n){n?t[e]&&(t[e]=t[e].filter(s=>s!==n)):delete t[e]}const qW={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function HW(t,e){return _m(zW(t),null,e)}function zW(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},qW),n)),e}function ED(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},Jw(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function VW(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Jw(t,e){let n={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(n,s(t,e));return Object.assign(n,sK(t,e.dateEnv)),n}function F1(t,e,n){let{dateEnv:s,options:a}=n,r=e;return t?(r=Pn(r),r=s.add(r,a.defaultAllDayEventDuration)):r=s.add(r,a.defaultTimedEventDuration),r}function ek(t,e,n,s){let a=Gp(t.defs,e),r=ys();for(let o in t.defs){let c=t.defs[o];r.defs[o]=UW(c,a[o],n,s)}for(let o in t.instances){let c=t.instances[o],d=r.defs[c.defId];r.instances[o]=WW(c,d,a[c.defId],n,s)}return r}function UW(t,e,n,s){let a=n.standardProps||{};a.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);let r=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});n.extendedProps&&(r.extendedProps=Object.assign(Object.assign({},r.extendedProps),n.extendedProps));for(let o of s.pluginHooks.eventDefMutationAppliers)o(r,n,s);return!r.hasEnd&&s.options.forceEventDuration&&(r.hasEnd=!0),r}function WW(t,e,n,s,a){let{dateEnv:r}=a,o=s.standardProps&&s.standardProps.allDay===!0,c=s.standardProps&&s.standardProps.hasEnd===!1,d=Object.assign({},t);return o&&(d.range=vD(d.range)),s.datesDelta&&n.startEditable&&(d.range={start:r.add(d.range.start,s.datesDelta),end:r.add(d.range.end,s.datesDelta)}),s.startDelta&&n.durationEditable&&(d.range={start:r.add(d.range.start,s.startDelta),end:d.range.end}),s.endDelta&&n.durationEditable&&(d.range={start:d.range.start,end:r.add(d.range.end,s.endDelta)}),c&&(d.range={start:d.range.start,end:F1(e.allDay,d.range.start,a)}),e.allDay&&(d.range={start:Pn(d.range.start),end:Pn(d.range.end)}),d.range.end<d.range.start&&(d.range.end=F1(e.allDay,d.range.start,a)),d}class Jo{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Bn{constructor(e,n,s){this._context=e,this._def=n,this._instance=s||null}setProp(e,n){if(e in bD)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=zh[e](n),this.mutate({standardProps:{publicId:n}});else if(e in zh)n=zh[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Wp){let s=Wp[e](n);e==="color"?s={backgroundColor:n,borderColor:n}:e==="editable"?s={startEditable:n,durationEditable:n}:s={[e]:n},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:s}=this._context,a=s.createMarker(e);if(a&&this._instance){let r=this._instance.range,o=ac(r.start,a,s,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,n={}){let{dateEnv:s}=this._context,a;if(!(e!=null&&(a=s.createMarker(e),!a))&&this._instance)if(a){let r=ac(this._instance.range.end,a,s,n.granularity);this.mutate({endDelta:r})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,s={}){let{dateEnv:a}=this._context,r={allDay:s.allDay},o=a.createMarker(e),c;if(o&&!(n!=null&&(c=a.createMarker(n),!c))&&this._instance){let d=this._instance.range;s.allDay===!0&&(d=vD(d));let m=ac(d.start,o,a,s.granularity);if(c){let u=ac(d.end,c,a,s.granularity);vU(m,u)?this.mutate({datesDelta:m,standardProps:r}):this.mutate({startDelta:m,endDelta:u,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:m,standardProps:r})}}moveStart(e){let n=Qt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Qt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Qt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let s={allDay:e},{maintainDuration:a}=n;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=a),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:n}=this._context,s=this._instance,a=qn(e);return this._def.hasEnd?n.formatRange(s.range.start,s.range.end,a,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):n.format(s.range.start,a,{forcedTzo:s.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let s=this._def,a=this._context,{eventStore:r}=a.getCurrentData(),o=Zw(r,n.instanceId);o=ek(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let d=new Bn(a,s,n);this._def=o.defs[s.defId],this._instance=o.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:d,event:this,relatedEvents:Gl(o,a,n),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:r})}})}}remove(){let e=this._context,n=TD(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Jo(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:s}=n,{startStr:a,endStr:r}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),a&&(o.start=a),r&&(o.end=r),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),s.display&&s.display!=="auto"&&(o.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?o.color=s.backgroundColor:(s.backgroundColor&&(o.backgroundColor=s.backgroundColor),s.borderColor&&(o.borderColor=s.borderColor)),s.textColor&&(o.textColor=s.textColor),s.classNames.length&&(o.classNames=s.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function TD(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Gl(t,e,n){let{defs:s,instances:a}=t,r=[],o=n?n.instanceId:"";for(let c in a){let d=a[c],m=s[d.defId];d.instanceId!==o&&r.push(new Bn(e,m,d))}return r}function $1(t,e,n,s){let a={},r={},o={},c=[],d=[],m=Gp(t.defs,e);for(let u in t.defs){let p=t.defs[u];m[p.defId].display==="inverse-background"&&(p.groupId?(a[p.groupId]=[],o[p.groupId]||(o[p.groupId]=p)):r[u]=[])}for(let u in t.instances){let p=t.instances[u],h=t.defs[p.defId],g=m[h.defId],x=p.range,v=!h.allDay&&s?xD(x,s):x,y=lo(v,n);y&&(g.display==="inverse-background"?h.groupId?a[h.groupId].push(y):r[p.defId].push(y):g.display!=="none"&&(g.display==="background"?c:d).push({def:h,ui:g,instance:p,range:y,isStart:v.start&&v.start.valueOf()===y.start.valueOf(),isEnd:v.end&&v.end.valueOf()===y.end.valueOf()}))}for(let u in a){let p=a[u],h=M1(p,n);for(let g of h){let x=o[u],v=m[x.defId];c.push({def:x,ui:v,instance:null,range:g,isStart:!1,isEnd:!1})}}for(let u in r){let p=r[u],h=M1(p,n);for(let g of h)c.push({def:t.defs[u],ui:m[u],instance:null,range:g,isStart:!1,isEnd:!1})}return{bg:c,fg:d}}function KW(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function B1(t,e){t.fcSeg=e}function Fc(t){return t.fcSeg||t.parentNode.fcSeg||null}function Gp(t,e){return wr(t,n=>AD(n,e))}function AD(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),jD(n)}function DD(t,e){let n=t.map(GW);return n.sort((s,a)=>dU(s,a,e)),n.map(s=>s._seg)}function GW(t){let{eventRange:e}=t,n=e.def,s=e.instance?e.instance.range:e.range,a=s.start?s.start.valueOf():0,r=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:a,end:r,duration:r-a,allDay:Number(n.allDay),_seg:t})}function YW(t,e){let{pluginHooks:n}=e,s=n.isDraggableTransformers,{def:a,ui:r}=t.eventRange,o=r.startEditable;for(let c of s)o=c(o,a,r,e);return o}function QW(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function ZW(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function RD(t,e,n,s,a,r,o){let{dateEnv:c,options:d}=n,{displayEventTime:m,displayEventEnd:u}=d,p=t.eventRange.def,h=t.eventRange.instance;m==null&&(m=s!==!1),u==null&&(u=a!==!1);let g=h.range.start,x=h.range.end,v=t.start||t.eventRange.range.start,y=t.end||t.eventRange.range.end,b=Pn(g).valueOf()===Pn(v).valueOf(),j=Pn(ul(x,-1)).valueOf()===Pn(ul(y,-1)).valueOf();return m&&!p.allDay&&(b||j)?(v=b?g:v,y=j?x:y,u&&p.hasEnd?c.formatRange(v,y,e,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):c.format(v,e,{forcedTzo:h.forcedStartTzo})):""}function al(t,e,n){let s=t.eventRange.range;return{isPast:s.end<=(n||e.start),isFuture:s.start>=(n||e.end),isToday:e&&fr(e,s.start)}}function XW(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function PD(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function MD(t,e){let{def:n,instance:s}=t.eventRange,{url:a}=n;if(a)return{href:a};let{emitter:r,options:o}=e,{eventInteractive:c}=o;return c==null&&(c=n.interactive,c==null&&(c=!!r.hasHandlers("eventClick"))),c?oD(d=>{r.trigger("eventClick",{el:d.target,event:new Bn(e,n,s),jsEvent:d,view:e.viewApi})}):{}}const JW={start:Ie,end:Ie,allDay:Boolean};function eK(t,e,n){let s=tK(t,e),{range:a}=s;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=e.add(a.start,n)}return s}function tK(t,e){let{refined:n,extra:s}=Vw(t,JW),a=n.start?e.createMarkerMeta(n.start):null,r=n.end?e.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=a&&a.isTimeUnspecified&&(!r||r.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:r?r.marker:null},allDay:o},s)}function nK(t,e){return yW(t.range,e.range)&&t.allDay===e.allDay&&iK(t,e)}function iK(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function sK(t,e){return Object.assign(Object.assign({},OD(t.range,e,t.allDay)),{allDay:t.allDay})}function ID(t,e,n){return Object.assign(Object.assign({},OD(t,e,n)),{timeZone:e.timeZone})}function OD(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function aK(t,e,n){let s=kD({editable:!1},n),a=my(s.refined,s.extra,"",t.allDay,!0,n);return{def:a,ui:AD(a,e),instance:Yw(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function rK(t,e,n){let s=!1,a=function(c){s||(s=!0,e(c))},r=function(c){s||(s=!0,n(c))},o=t(a,r);o&&typeof o.then=="function"&&o.then(a,r)}class q1 extends Error{constructor(e,n){super(e),this.response=n}}function lK(t,e,n){t=t.toUpperCase();const s={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(s.body=new URLSearchParams(n),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(a=>{if(a.ok)return a.json().then(r=>[r,a],()=>{throw new q1("Failure parsing JSON",a)});throw new q1("Request failed",a)})}let Bv;function LD(){return Bv==null&&(Bv=oK()),Bv}function oK(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class cK extends kn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Vp(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Vp(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:s}=this.state,a=s||n.height==="auto"||n.contentHeight==="auto",r=!a&&n.height!=null?n.height:"",o=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return LD()||o.push("fc-liquid-hack"),e.children(o,r,a,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class nd{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function dK(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function tk(t){return{[t.component.uid]:t}}const hy={};class id extends xs{constructor(e,n){super(e,n),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,s=n.nowManager.getDateMarker(),{nowIndicatorSnap:a}=n.options;a==="auto"&&(a=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let r,o;return a?(r=n.dateEnv.startOf(s,e.unit),o=n.dateEnv.add(r,Qt(1,e.unit)).valueOf()-s.valueOf()):(r=s,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:r,todayRange:mK(r)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}id.contextType=Er;function mK(t){let e=Pn(t),n=hi(e,1);return{start:e,end:n}}class uK{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let s=this.getCurrentData(),a;n=n||"day",a=s.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:s}=this.getCurrentData(),a=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),r,o;for(let c in n)a.push(c);for(r=0;r<a.length;r+=1)if(o=n[a[r]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),s=Qt(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),qn(n))}formatRange(e,n,s){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(n),qn(s),s)}formatIso(e,n){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:n})}select(e,n){let s;n==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:n};let a=this.getCurrentData(),r=eK(s,a.dateEnv,Qt({days:1}));r&&(this.dispatch({type:"SELECT_DATES",selection:r}),ED(r,null,a))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),VW(e,n))}addEvent(e,n){if(e instanceof Bn){let o=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:uy({def:o,instance:c})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),a;if(n instanceof Jo)a=n.internalEventSource;else if(typeof n=="boolean")n&&([a]=Ww(s.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;a=o.internalEventSource}let r=wD(e,a,s,!1);if(r){let o=new Bn(s,r.def,r.def.recurringDef?null:r.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:uy(r)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:TD(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:s,instances:a}=n.eventStore;e=String(e);for(let r in s){let o=s[r];if(o.publicId===e){if(o.recurringDef)return new Bn(n,o,null);for(let c in a){let d=a[c];if(d.defId===o.defId)return new Bn(n,o,d)}}}return null}getEvents(){let e=this.getCurrentData();return Gl(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,s=[];for(let a in n)s.push(new Jo(e,n[a]));return s}getEventSourceById(e){let n=this.getCurrentData(),s=n.eventSources;e=String(e);for(let a in s)if(s[a].publicId===e)return new Jo(n,s[a]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Jo)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=ND(e,n);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Jo(n,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Qt(e);n&&this.trigger("_scrollRequest",{time:n})}}function hK(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function FD(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function pK(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function gK(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function fK(t,e){return{left:t.left-e.left,top:t.top-e.top}}const qv=ys();class vK{constructor(){this.getKeysForEventDefs=$t(this._getKeysForEventDefs),this.splitDateSelection=$t(this._splitDateSpan),this.splitEventStore=$t(this._splitEventStore),this.splitIndividualUi=$t(this._splitIndividualUi),this.splitEventDrag=$t(this._splitInteraction),this.splitEventResize=$t(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),s=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),r=this.splitIndividualUi(e.eventUiBases,s),o=this.splitEventStore(e.eventStore,s),c=this.splitEventDrag(e.eventDrag),d=this.splitEventResize(e.eventResize),m={};this.eventUiBuilders=wr(n,(u,p)=>this.eventUiBuilders[p]||$t(xK));for(let u in n){let p=n[u],h=o[u]||qv,g=this.eventUiBuilders[u];m[u]={businessHours:p.businessHours||e.businessHours,dateSelection:a[u]||null,eventStore:h,eventUiBases:g(e.eventUiBases[""],p.ui,r[u]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:c[u]||null,eventResize:d[u]||null}}return m}_splitDateSpan(e){let n={};if(e){let s=this.getKeysForDateSpan(e);for(let a of s)n[a]=e}return n}_getKeysForEventDefs(e){return wr(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:s,instances:a}=e,r={};for(let o in s)for(let c of n[o])r[c]||(r[c]=ys()),r[c].defs[o]=s[o];for(let o in a){let c=a[o];for(let d of n[c.defId])r[d]&&(r[d].instances[o]=c)}return r}_splitIndividualUi(e,n){let s={};for(let a in e)if(a)for(let r of n[a])s[r]||(s[r]={}),s[r][a]=e[a];return s}_splitInteraction(e){let n={};if(e){let s=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),r=this._splitEventStore(e.mutatedEvents,a),o=c=>{n[c]||(n[c]={affectedEvents:s[c]||qv,mutatedEvents:r[c]||qv,isEvent:e.isEvent})};for(let c in s)o(c);for(let c in r)o(c)}return n}}function xK(t,e,n){let s=[];t&&s.push(t),e&&s.push(e);let a={"":jD(s)};return n&&Object.assign(a,n),a}function $D(t,e,n,s){return{dow:t.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!fr(s.activeRange,t))),isOther:!!(s&&!fr(s.currentRange,t)),isToday:!!(e&&fr(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function nk(t,e){let n=["fc-day",`fc-day-${kU[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const yK=qn({year:"numeric",month:"long",day:"numeric"}),bK=qn({week:"long"});function Yp(t,e,n="day",s=!0){const{dateEnv:a,options:r,calendarApi:o}=t;let c=a.format(e,n==="week"?bK:yK);if(r.navLinks){let d=a.toDate(e);const m=u=>{let p=n==="day"?r.navLinkDayClick:n==="week"?r.navLinkWeekClick:null;typeof p=="function"?p.call(o,a.toDate(e),u):(typeof p=="string"&&(n=p),o.zoomTo(e,n))};return Object.assign({title:am(r.navLinkHint,[c,d],c),"data-navlink":""},s?lD(m):{onClick:m})}return{"aria-label":c}}let Hv=null;function wK(){return Hv===null&&(Hv=kK()),Hv}function kK(){let t=document.createElement("div");sm(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return Fw(t),n}let zv;function jK(){return zv||(zv=NK()),zv}function NK(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=BD(t);return document.body.removeChild(t),e}function BD(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function CK(t,e=!1){let n=window.getComputedStyle(t),s=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,r=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,c=BD(t),d=c.y-s-a,m=c.x-r-o,u={borderLeft:s,borderRight:a,borderTop:r,borderBottom:o,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return wK()&&n.direction==="rtl"?u.scrollbarLeft=d:u.scrollbarRight=d,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function SK(t,e=!1,n){let s=ik(t),a=CK(t,e),r={left:s.left+a.borderLeft+a.scrollbarLeft,right:s.right-a.borderRight-a.scrollbarRight,top:s.top+a.borderTop,bottom:s.bottom-a.borderBottom-a.scrollbarBottom};return e&&(r.left+=a.paddingLeft,r.right-=a.paddingRight,r.top+=a.paddingTop,r.bottom-=a.paddingBottom),r}function ik(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function _K(t){let e=qD(t),n=t.getBoundingClientRect();for(let s of e){let a=FD(n,s.getBoundingClientRect());if(a)n=a;else return null}return n}function qD(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class $c{constructor(e,n,s,a){this.els=n;let r=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(r.left),a&&this.buildElVerticals(r.top)}buildElHorizontals(e){let n=[],s=[];for(let a of this.els){let r=a.getBoundingClientRect();n.push(r.left-e),s.push(r.right-e)}this.lefts=n,this.rights=s}buildElVerticals(e){let n=[],s=[];for(let a of this.els){let r=a.getBoundingClientRect();n.push(r.top-e),s.push(r.bottom-e)}this.tops=n,this.bottoms=s}leftToIndex(e){let{lefts:n,rights:s}=this,a=n.length,r;for(r=0;r<a;r+=1)if(e>=n[r]&&e<s[r])return r}topToIndex(e){let{tops:n,bottoms:s}=this,a=n.length,r;for(r=0;r<a;r+=1)if(e>=n[r]&&e<s[r])return r}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return oh(this.tops||[],e.tops||[])&&oh(this.bottoms||[],e.bottoms||[])&&oh(this.lefts||[],e.lefts||[])&&oh(this.rights||[],e.rights||[])}}function oh(t,e){const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(Math.round(t[s])!==Math.round(e[s]))return!1;return!0}class sk{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class EK extends sk{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class TK extends sk{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Ba extends kn{constructor(){super(...arguments),this.uid=So()}prepareHits(){}queryHit(e,n,s,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Di(e,".fc-event-mirror")}isValidDateDownEl(e){return!Di(e,".fc-event:not(.fc-bg-event)")&&!Di(e,".fc-more-link")&&!Di(e,"a[data-navlink]")&&!Di(e,".fc-popover")}}class HD{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let s of e)this.insertEntry(s,n);return n}insertEntry(e,n){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,s){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},n),{span:ak(n.span,e.touchingEntry.span)});s.push(a),this.splitEntry(n,e.touchingEntry,s)}else s.push(n)}splitEntry(e,n,s){let a=e.span,r=n.span;a.start<r.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:r.start}},s),a.end>r.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.end,end:a.end}},s)}insertEntryAt(e,n){let{entriesByLevel:s,levelCoords:a}=this;n.lateral===-1?(Vv(a,n.level,n.levelCoord),Vv(s,n.level,[e])):Vv(s[n.level],n.lateral,e),this.stackCnts[Yl(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:s,strictOrder:a,stackCnts:r}=this,o=n.length,c=0,d=-1,m=-1,u=null,p=0;for(let x=0;x<o;x+=1){const v=n[x];if(!a&&v>=c+this.getEntryThickness(e))break;let y=s[x],b,j=gy(y,e.span.start,py),k=j[0]+j[1];for(;(b=y[k])&&b.span.start<e.span.end;){let S=v+this.getEntryThickness(b);S>c&&(c=S,u=b,d=x,m=k),S===c&&(p=Math.max(p,r[Yl(b)]+1)),k+=1}}let h=0;if(u)for(h=d+1;h<o&&n[h]<c;)h+=1;let g=-1;return h<o&&n[h]===c&&(g=gy(s[h],e.span.end,py)[0]),{touchingLevel:d,touchingLateral:m,touchingEntry:u,stackCnt:p,levelCoord:c,level:h,lateral:g}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,s=e.length,a=[];for(let r=0;r<s;r+=1){let o=e[r],c=n[r];for(let d of o)a.push(Object.assign(Object.assign({},d),{thickness:this.getEntryThickness(d),levelCoord:c}))}return a}}function py(t){return t.span.end}function Yl(t){return t.index+":"+t.span.start}function AK(t){let e=[];for(let n of t){let s=[],a={span:n.span,entries:[n]};for(let r of e)ak(r.span,a.span)?a={entries:r.entries.concat(a.entries),span:DK(r.span,a.span)}:s.push(r);s.push(a),e=s}return e}function DK(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function ak(t,e){let n=Math.max(t.start,e.start),s=Math.min(t.end,e.end);return n<s?{start:n,end:s}:null}function Vv(t,e,n){t.splice(e,0,n)}function gy(t,e,n){let s=0,a=t.length;if(!a||e<n(t[s]))return[0,0];if(e>n(t[a-1]))return[a,0];for(;s<a;){let r=Math.floor(s+(a-s)/2),o=n(t[r]);if(e<o)a=r;else if(e>o)s=r+1;else return[r,1]}return[s,0]}class RK{constructor(e,n){this.emitter=new Gg}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const rk={};function PK(t,e){return!t||e>10?qn({weekday:"short"}):e>1?qn({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):qn({weekday:"long"})}const zD="fc-col-header-cell";function VD(t){return t.text}class MK extends kn{render(){let{dateEnv:e,options:n,theme:s,viewApi:a}=this.context,{props:r}=this,{date:o,dateProfile:c}=r,d=$D(o,r.todayRange,null,c),m=[zD].concat(nk(d,s)),u=e.format(o,r.dayHeaderFormat),p=!d.isDisabled&&r.colCnt>1?Yp(this.context,o):{},h=e.toDate(o);e.namedTimeZoneImpl&&(h=ul(h,36e5));let g=Object.assign(Object.assign(Object.assign({date:h,view:a},r.extraRenderProps),{text:u}),d);return be(Cs,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:r.colSpan,"data-date":d.isDisabled?void 0:Hw(o)},r.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:VD,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},x=>be("div",{className:"fc-scrollgrid-sync-inner"},!d.isDisabled&&be(x,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",r.isSticky&&"fc-sticky"]})))}}const IK=qn({weekday:"long"});class OK extends kn{render(){let{props:e}=this,{dateEnv:n,theme:s,viewApi:a,options:r}=this.context,o=hi(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},d=n.format(o,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:o},c),{view:a}),e.extraRenderProps),{text:d});return be(Cs,{elTag:"th",elClasses:[zD,...nk(c,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:VD,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},u=>be("div",{className:"fc-scrollgrid-sync-inner"},be(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,IK)}})))}}class UD extends kn{constructor(){super(...arguments),this.createDayHeaderFormatter=$t(LK)}render(){let{context:e}=this,{dates:n,dateProfile:s,datesRepDistinctDays:a,renderIntro:r}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,n.length);return be(id,{unit:"day"},(c,d)=>be("tr",{role:"row"},r&&r("day"),n.map(m=>a?be(MK,{key:m.toISOString(),date:m,dateProfile:s,todayRange:d,colCnt:n.length,dayHeaderFormat:o}):be(OK,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:o}))))}}function LK(t,e,n){return t||PK(e,n)}class WD{constructor(e,n){let s=e.start,{end:a}=e,r=[],o=[],c=-1;for(;s<a;)n.isHiddenDay(s)?r.push(c+.5):(c+=1,r.push(c),o.push(s)),s=hi(s,1);this.dates=o,this.indices=r,this.cnt=o.length}sliceRange(e){let n=this.getDateDayIndex(e.start),s=this.getDateDayIndex(hi(e.end,-1)),a=Math.max(0,n),r=Math.min(this.cnt-1,s);return a=Math.ceil(a),r=Math.floor(r),a<=r?{firstIndex:a,lastIndex:r,isStart:n===a,isEnd:s===r}:null}getDateDayIndex(e){let{indices:n}=this,s=Math.floor(_o(this.dates[0],e));return s<0?n[0]-1:s>=n.length?n[n.length-1]+1:n[s]}}class KD{constructor(e,n){let{dates:s}=e,a,r,o;if(n){for(r=s[0].getUTCDay(),a=1;a<s.length&&s[a].getUTCDay()!==r;a+=1);o=Math.ceil(s.length/a)}else o=1,a=s.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let s=[];for(let a=0;a<this.colCnt;a+=1)s.push(this.buildCell(n,a));e.push(s)}return e}buildCell(e,n){let s=this.daySeries.dates[e*this.colCnt+n];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,s=this.daySeries.sliceRange(e),a=[];if(s){let{firstIndex:r,lastIndex:o}=s,c=r;for(;c<=o;){let d=Math.floor(c/n),m=Math.min((d+1)*n,o+1);a.push({row:d,firstCol:c%n,lastCol:(m-1)%n,isStart:s.isStart&&c===r,isEnd:s.isEnd&&m-1===o}),c=m}}return a}}class GD{constructor(){this.sliceBusinessHours=$t(this._sliceBusinessHours),this.sliceDateSelection=$t(this._sliceDateSpan),this.sliceEventStore=$t(this._sliceEventStore),this.sliceEventDrag=$t(this._sliceInteraction),this.sliceEventResize=$t(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,s,a,...r){let{eventUiBases:o}=e,c=this.sliceEventStore(e.eventStore,o,n,s,...r);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,s,o,a,...r),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,s,a,...r),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,n,s,...r),eventResize:this.sliceEventResize(e.eventResize,o,n,s,...r),eventSelection:e.eventSelection}}sliceNowDate(e,n,s,a,...r){return this._sliceDateSpan({range:{start:e,end:ul(e,1)},allDay:!1},n,s,{},a,...r)}_sliceBusinessHours(e,n,s,a,...r){return e?this._sliceEventStore(oo(e,ch(n,!!s),a),{},n,s,...r).bg:[]}_sliceEventStore(e,n,s,a,...r){if(e){let o=$1(e,n,ch(s,!!a),a);return{bg:this.sliceEventRanges(o.bg,r),fg:this.sliceEventRanges(o.fg,r)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,s,a,...r){if(!e)return null;let o=$1(e.mutatedEvents,n,ch(s,!!a),a);return{segs:this.sliceEventRanges(o.fg,r),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,s,a,r,...o){if(!e)return[];let c=ch(n,!!s),d=lo(e.range,c);if(d){e=Object.assign(Object.assign({},e),{range:d});let m=aK(e,a,r),u=this.sliceRange(e.range,...o);for(let p of u)p.eventRange=m;return u}return[]}sliceEventRanges(e,n){let s=[];for(let a of e)s.push(...this.sliceEventRange(a,n));return s}sliceEventRange(e,n){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:hi(s.start,1)});let a=this.sliceRange(s,...n);for(let r of a)r.eventRange=e,r.isStart=e.isStart&&r.isStart,r.isEnd=e.isEnd&&r.isEnd;return a}}function ch(t,e){let n=t.activeRange;return e?n:{start:ul(n.start,t.slotMinTime.milliseconds),end:ul(n.end,t.slotMaxTime.milliseconds-864e5)}}function YD(t,e,n){let{instances:s}=t.mutatedEvents;for(let a in s)if(!Wg(e.validRange,s[a].range))return!1;return QD({eventDrag:t},n)}function FK(t,e,n){return Wg(e.validRange,t.range)?QD({dateSelection:t},n):!1}function QD(t,e){let n=e.getCurrentData(),s=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||$K)(s,e)}function $K(t,e,n={},s){return!(t.eventDrag&&!BK(t,e,n,s)||t.dateSelection&&!qK(t,e,n,s))}function BK(t,e,n,s){let a=e.getCurrentData(),r=t.eventDrag,o=r.mutatedEvents,c=o.defs,d=o.instances,m=Gp(c,r.isEvent?t.eventUiBases:{"":a.selectionConfig});s&&(m=wr(m,s));let u=LW(t.eventStore,r.affectedEvents.instances),p=u.defs,h=u.instances,g=Gp(p,t.eventUiBases);for(let x in d){let v=d[x],y=v.range,b=m[v.defId],j=c[v.defId];if(!ZD(b.constraints,y,u,t.businessHours,e))return!1;let{eventOverlap:k}=e.options,S=typeof k=="function"?k:null;for(let _ in h){let w=h[_];if(Gw(y,w.range)&&(g[w.defId].overlap===!1&&r.isEvent||b.overlap===!1||S&&!S(new Bn(e,p[w.defId],w),new Bn(e,j,v))))return!1}let N=a.eventStore;for(let _ of b.allows){let w=Object.assign(Object.assign({},n),{range:v.range,allDay:j.allDay}),T=N.defs[j.defId],A=N.instances[x],M;if(T?M=new Bn(e,T,A):M=new Bn(e,j),!_(Jw(w,e),M))return!1}}return!0}function qK(t,e,n,s){let a=t.eventStore,r=a.defs,o=a.instances,c=t.dateSelection,d=c.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!ZD(m.constraints,d,a,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,p=typeof u=="function"?u:null;for(let h in o){let g=o[h];if(Gw(d,g.range)&&(m.overlap===!1||p&&!p(new Bn(e,r[g.defId],g),null)))return!1}for(let h of m.allows){let g=Object.assign(Object.assign({},n),c);if(!h(Jw(g,e),null))return!1}return!0}function ZD(t,e,n,s,a){for(let r of t)if(!zK(HK(r,e,n,s,a),e))return!1;return!0}function HK(t,e,n,s,a){return t==="businessHours"?Uv(oo(s,e,a)):typeof t=="string"?Uv(Kg(n,r=>r.groupId===t)):typeof t=="object"&&t?Uv(oo(t,e,a)):[]}function Uv(t){let{instances:e}=t,n=[];for(let s in e)n.push(e[s].range);return n}function zK(t,e){for(let n of t)if(Wg(n,e))return!0;return!1}const dh=/^(visible|hidden)$/;class VK extends kn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Ia(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:s}=e,a=n&&s,r=["fc-scroller"];return n&&(s?r.push("fc-scroller-liquid-absolute"):r.push("fc-scroller-liquid")),be("div",{ref:this.handleEl,className:r.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(dh.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(dh.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return dh.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return dh.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class lr{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,s)=>{let{depths:a,currentMap:r}=this,o=!1,c=!1;n!==null?(o=s in r,r[s]=n,a[s]=(a[s]||0)+1,c=!0):(a[s]-=1,a[s]||(delete r[s],delete this.callbackMap[s],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(s)),c&&this.masterCallback(n,String(s)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),n}collect(e,n,s){return nW(this.currentMap,e,n,s)}getAll(){return Ww(this.currentMap)}}function UK(t){let e=eU(t,".fc-scrollgrid-shrink"),n=0;for(let s of e)n=Math.max(n,pU(s));return Math.ceil(n)}function XD(t,e){return t.liquid&&e.liquid}function WK(t,e){return e.maxHeight!=null||XD(t,e)}function KK(t,e,n,s){let{expandRows:a}=n;return typeof e.content=="function"?e.content(n):be("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,be(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function GK(t,e){return ml(t,e,la)}function YK(t,e){let n=[];for(let s of t){let a=s.span||1;for(let r=0;r<a;r+=1)n.push(be("col",{style:{width:s.width==="shrink"?QK(e):s.width||"",minWidth:s.minWidth||""}}))}return be("colgroup",{},...n)}function QK(t){return t??4}function ZK(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function XK(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function JK(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function fy(t){return be("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Qp(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function JD(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class lk extends kn{constructor(){super(...arguments),this.processCols=$t(e=>e,GK),this.renderMicroColGroup=$t(YK),this.scrollerRefs=new lr,this.scrollerElRefs=new lr(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:s}=this,a=e.sections||[],r=this.processCols(e.cols),o=this.renderMicroColGroup(r,n.shrinkWidth),c=XK(e.liquid,s);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let d=a.length,m=0,u,p=[],h=[],g=[];for(;m<d&&(u=a[m]).type==="header";)p.push(this.renderSection(u,o,!0)),m+=1;for(;m<d&&(u=a[m]).type==="body";)h.push(this.renderSection(u,o,!1)),m+=1;for(;m<d&&(u=a[m]).type==="footer";)g.push(this.renderSection(u,o,!0)),m+=1;let x=!LD();const v={role:"rowgroup"};return be("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!x&&p.length)&&be("thead",v,...p),!!(!x&&h.length)&&be("tbody",v,...h),!!(!x&&g.length)&&be("tfoot",v,...g),x&&be("tbody",v,...p,...h,...g))}renderSection(e,n,s){return"outerContent"in e?be(Rn,{key:e.key},e.outerContent):be("tr",{key:e.key,role:"presentation",className:JK(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,s))}renderChunkTd(e,n,s,a){if("outerContent"in s)return s.outerContent;let{props:r}=this,{forceYScrollbars:o,scrollerClientWidths:c,scrollerClientHeights:d}=this.state,m=WK(r,e),u=XD(r,e),p=r.liquid?o?"scroll":m?"auto":"hidden":"visible",h=e.key,g=KK(e,s,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!r.collapsibleWidth&&c[h]!==void 0?c[h]:null,clientHeight:d[h]!==void 0?d[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return be(a?"th":"td",{ref:s.elRef,role:"presentation"},be("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},be(VK,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:p,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},g)))}_handleScrollerEl(e,n){let s=eG(this.props.sections,n);s&&Ia(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return ZK(this.props.cols)?UK(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=jK(),{scrollerRefs:n,scrollerElRefs:s}=this,a=!1,r={},o={};for(let c in n.currentMap){let d=n.currentMap[c];if(d&&d.needsYScrolling()){a=!0;break}}for(let c of this.props.sections){let d=c.key,m=s.currentMap[d];if(m){let u=m.parentNode;r[d]=Math.floor(u.getBoundingClientRect().width-(a?e.y:0)),o[d]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:r,scrollerClientHeights:o}}}lk.addStateEquality({scrollerClientWidths:la,scrollerClientHeights:la});function eG(t,e){for(let n of t)if(n.key===e)return n;return null}class ok extends kn{constructor(){super(...arguments),this.buildPublicEvent=$t((e,n,s)=>new Bn(e,n,s)),this.handleEl=e=>{this.el=e,Ia(this.props.elRef,e),e&&B1(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{eventRange:r}=a,{ui:o}=r,c={event:this.buildPublicEvent(n,r.def,r.instance),view:n.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&YW(a,n),isStartResizable:!e.disableResizing&&QW(a,n),isEndResizable:!e.disableResizing&&ZW(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return be(Cs,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...XW(c),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&B1(this.el,this.props.seg)}}class ck extends kn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{ui:r}=a.eventRange,o=s.eventTimeFormat||e.defaultTimeFormat,c=RD(a,o,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return be(ok,Object.assign({},e,{elTag:"a",elStyle:{borderColor:r.borderColor,backgroundColor:r.backgroundColor},elAttrs:MD(a,n),defaultGenerator:tG,timeText:c}),(d,m)=>be(Rn,null,be(d,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&be("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&be("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}ck.addPropsEquality({seg:la});function tG(t){return be("div",{className:"fc-event-main-frame"},t.timeText&&be("div",{className:"fc-event-time"},t.timeText),be("div",{className:"fc-event-title-container"},be("div",{className:"fc-event-title fc-sticky"},t.event.title||be(Rn,null,""))))}const dk=t=>be(Er.Consumer,null,e=>{let{options:n}=e,s={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return be(Cs,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:s,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),nG=qn({day:"numeric"});class mk extends kn{constructor(){super(...arguments),this.refineRenderProps=Hh(iG)}render(){let{props:e,context:n}=this,{options:s}=n,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:s.monthStartFormat});return be(Cs,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":Hw(e.date)}),elClasses:[...nk(a,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function uk(t){return!!(t.dayCellContent||dy("dayCellContent",t))}function iG(t){let{date:e,dateEnv:n,dateProfile:s,isMonthStart:a}=t,r=$D(e,t.todayRange,null,s),o=t.showDayNumber?n.format(e,a?t.monthStartFormat:nG):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},r),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class eR extends kn{render(){let{props:e}=this,{seg:n}=e;return be(ok,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:sG,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function sG(t){let{title:e}=t.event;return e&&be("div",{className:"fc-event-title"},t.event.title)}function tR(t){return be("div",{className:`fc-${t}`})}const nR=t=>be(Er.Consumer,null,e=>{let{dateEnv:n,options:s}=e,{date:a}=t,r=s.weekNumberFormat||t.defaultFormat,o=n.computeWeekNumber(a),c=n.format(a,r),d={num:o,text:c,date:a};return be(Cs,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:d,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:aG,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},t.children)});function aG(t){return t.text}const Wv=10;class rG extends kn{constructor(){super(...arguments),this.state={titleId:Vg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Ia(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=aD(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:s,state:a}=this,r=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return BV(be("div",Object.assign({},s.extraAttrs,{id:s.id,className:r.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),be("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},be("span",{className:"fc-popover-title",id:a.titleId},s.title),be("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),be("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:s}=this.props,{rootEl:a}=this,r=_K(n);if(r){let o=a.getBoundingClientRect(),c=s?Di(n,".fc-scrollgrid").getBoundingClientRect().top:r.top,d=e?r.right-o.width:r.left;c=Math.max(c,Wv),d=Math.min(d,document.documentElement.clientWidth-Wv-o.width),d=Math.max(d,Wv);let m=a.offsetParent.getBoundingClientRect();sm(a,{top:c-m.top,left:d-m.left})}}}class lG extends Ba{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:s}=this,{startDate:a,todayRange:r,dateProfile:o}=s,c=n.format(a,e.dayPopoverFormat);return be(mk,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:r},(d,m,u)=>be(rG,{elRef:u.ref,id:s.id,title:c,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},uk(e)&&be(d,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,n,s,a){let{rootEl:r,props:o}=this;return e>=0&&e<s&&n>=0&&n<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:r,rect:{left:0,top:0,right:s,bottom:a},layer:1}:null}}class iR extends kn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Vg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Ia(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:s}=this,{moreLinkClick:a}=s.options,r=H1(n).start;function o(c){let{def:d,instance:m,range:u}=c.eventRange;return{event:new Bn(s,d,m),start:s.dateEnv.toDate(u.start),end:s.dateEnv.toDate(u.end),isStart:c.isStart,isEnd:c.isEnd}}typeof a=="function"&&(a=a({date:r,allDay:!!n.allDayDate,allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:e,view:s.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&s.calendarApi.zoomTo(r,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return be(Er.Consumer,null,s=>{let{viewApi:a,options:r,calendarApi:o}=s,{moreLinkText:c}=r,{moreCnt:d}=e,m=H1(e),u=typeof c=="function"?c.call(o,d):`+${d} ${c}`,p=am(r.moreLinkHint,[d],u),h={num:d,shortText:`+${d}`,text:u,view:a};return be(Rn,null,!!e.moreCnt&&be(Cs,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),lD(this.handleClick)),{title:p,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:r.moreLinkContent,defaultGenerator:e.defaultGenerator||oG,classNameGenerator:r.moreLinkClassNames,didMount:r.moreLinkDidMount,willUnmount:r.moreLinkWillUnmount},e.children),n.isPopoverOpen&&be(lG,{id:n.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Di(this.linkEl,".fc-view-harness"))}}function oG(t){return t.text}function H1(t){if(t.allDayDate)return{start:t.allDayDate,end:hi(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:sR(e),end:dG(e)}}function sR(t){return t.reduce(cG).eventRange.range.start}function cG(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function dG(t){return t.reduce(mG).eventRange.range.end}function mG(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class uG{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class hG extends uG{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let s=!1;e.isActive?(n.set(e.id,e),s=!0):n.has(e.id)&&(n.delete(e.id),s=!0),s&&this.set(n)}}const pG=[],aR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},rR=Object.assign(Object.assign({},aR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function gG(t){let e=t.length>0?t[0].code:"en",n=pG.concat(t),s={en:rR};for(let a of n)s[a.code]=a;return{map:s,defaultCode:e}}function lR(t,e){return typeof t=="object"&&!Array.isArray(t)?oR(t.code,[t.code],t):fG(t,e)}function fG(t,e){let n=[].concat(t||[]),s=vG(n,e)||rR;return oR(t,n,s)}function vG(t,e){for(let n=0;n<t.length;n+=1){let s=t[n].toLocaleLowerCase().split("-");for(let a=s.length;a>0;a-=1){let r=s.slice(0,a).join("-");if(e[r])return e[r]}}return null}function oR(t,e,n){let s=Uw([aR,n],["buttonText"]);delete s.code;let{week:a}=s;return delete s.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:s}}function Tr(t){return{id:So(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function xG(t,e){let n={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(r){for(let o of r){const c=o.name,d=n[c];d===void 0?(n[c]=o.id,a(o.deps),s=bG(s,o)):d!==o.id&&console.warn(`Duplicate plugin '${c}'`)}}return t&&a(t),a(e),s}function yG(){let t=[],e=[],n;return(s,a)=>((!n||!ml(s,t)||!ml(a,e))&&(n=xG(s,a)),t=s,e=a,n)}function bG(t,e){return{premiumReleaseDate:wG(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function wG(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class xl extends su{}xl.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};xl.prototype.baseIconClass="fc-icon";xl.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};xl.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};xl.prototype.iconOverrideOption="buttonIcons";xl.prototype.iconOverrideCustomButtonOption="icon";xl.prototype.iconOverridePrefix="fc-icon-";function kG(t,e){let n={},s;for(s in t)vy(s,n,t,e);for(s in e)vy(s,n,t,e);return n}function vy(t,e,n,s){if(e[t])return e[t];let a=jG(t,e,n,s);return a&&(e[t]=a),a}function jG(t,e,n,s){let a=n[t],r=s[t],o=u=>a&&a[u]!==null?a[u]:r&&r[u]!==null?r[u]:null,c=o("component"),d=o("superType"),m=null;if(d){if(d===t)throw new Error("Can't have a custom view type that references itself");m=vy(d,e,n,s)}return!c&&m&&(c=m.component),c?{type:t,component:c,defaults:Object.assign(Object.assign({},m?m.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),r?r.rawOptions:{})}:null}function z1(t){return wr(t,NG)}function NG(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=V1(e):n&&!(n.prototype instanceof kn)&&(n=V1(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function V1(t){return e=>be(Er.Consumer,null,n=>be(Cs,{elTag:"div",elClasses:fD(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function CG(t,e,n,s){let a=z1(t),r=z1(e.views),o=kG(a,r);return wr(o,c=>SG(c,r,e,n,s))}function SG(t,e,n,s,a){let r=t.overrides.duration||t.defaults.duration||s.duration||n.duration,o=null,c="",d="",m={};if(r&&(o=_G(r),o)){let h=cy(o);c=h.unit,h.value===1&&(d=c,m=e[c]?e[c].rawOptions:{})}let u=h=>{let g=h.buttonText||{},x=t.defaults.buttonTextKey;return x!=null&&g[x]!=null?g[x]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null},p=h=>{let g=h.buttonHints||{},x=t.defaults.buttonTextKey;return x!=null&&g[x]!=null?g[x]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null};return{type:t.type,component:t.component,duration:o,durationUnit:c,singleUnit:d,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},m),t.overrides),buttonTextOverride:u(s)||u(n)||t.overrides.buttonText,buttonTextDefault:u(a)||t.defaults.buttonText||u(rm)||t.type,buttonTitleOverride:p(s)||p(n)||t.overrides.buttonHint,buttonTitleDefault:p(a)||t.defaults.buttonHint||p(rm)}}let U1={};function _G(t){let e=JSON.stringify(t),n=U1[e];return n===void 0&&(n=Qt(t),U1[e]=n),n}function EG(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function TG(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function AG(t,e,n){let s=t.initialDate;return s!=null?e.createMarker(s):n.getDateMarker()}function DG(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function RG(t,e,n,s){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||n);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(a=s.buildPrev(t,n),a.isValid)return a;break;case"NEXT":if(a=s.buildNext(t,n),a.isValid)return a;break}return t}function PG(t,e,n){let s=e?e.activeRange:null;return dR({},BG(t,n),s,n)}function MG(t,e,n,s){let a=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return dR(t,e.sources,a,s);case"REMOVE_EVENT_SOURCE":return OG(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?mR(t,a,s):t;case"FETCH_EVENT_SOURCES":return hk(t,e.sourceIds?mD(e.sourceIds):uR(t,s),a,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return $G(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function IG(t,e,n){let s=e?e.activeRange:null;return hk(t,uR(t,n),s,!0,n)}function cR(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function dR(t,e,n,s){let a={};for(let r of e)a[r.sourceId]=r;return n&&(a=mR(a,n,s)),Object.assign(Object.assign({},t),a)}function OG(t,e){return ro(t,n=>n.sourceId!==e)}function mR(t,e,n){return hk(t,ro(t,s=>LG(s,e,n)),e,!1,n)}function LG(t,e,n){return hR(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function hk(t,e,n,s,a){let r={};for(let o in t){let c=t[o];e[o]?r[o]=FG(c,n,s,a):r[o]=c}return r}function FG(t,e,n,s){let{options:a,calendarApi:r}=s,o=s.pluginHooks.eventSourceDefs[t.sourceDefId],c=So();return o.fetch({eventSource:t,range:e,isRefetch:n,context:s},d=>{let{rawEvents:m}=d;a.eventSourceSuccess&&(m=a.eventSourceSuccess.call(r,m,d.response)||m),t.success&&(m=t.success.call(r,m,d.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:c,fetchRange:e,rawEvents:m})},d=>{let m=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(r,d),m=!0),t.failure&&(t.failure(d),m=!0),m||console.warn(d.message,d),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:c,fetchRange:e,error:d})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:c})}function $G(t,e,n,s){let a=t[e];return a&&n===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:s})}):t}function uR(t,e){return ro(t,n=>hR(n,e))}function BG(t,e){let n=CD(e),s=[].concat(t.eventSources||[]),a=[];t.initialEvents&&s.unshift(t.initialEvents),t.events&&s.unshift(t.events);for(let r of s){let o=ND(r,e,n);o&&a.push(o)}return a}function hR(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function qG(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function HG(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function zG(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function VG(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function UG(t,e,n,s,a){let r=t.headerToolbar?W1(t.headerToolbar,t,e,n,s,a):null,o=t.footerToolbar?W1(t.footerToolbar,t,e,n,s,a):null;return{header:r,footer:o}}function W1(t,e,n,s,a,r){let o={},c=[],d=!1;for(let m in t){let u=t[m],p=WG(u,e,n,s,a,r);o[m]=p.widgets,c.push(...p.viewsWithButtons),d=d||p.hasTitle}return{sectionWidgets:o,viewsWithButtons:c,hasTitle:d}}function WG(t,e,n,s,a,r){let o=e.direction==="rtl",c=e.customButtons||{},d=n.buttonText||{},m=e.buttonText||{},u=n.buttonHints||{},p=e.buttonHints||{},h=t?t.split(" "):[],g=[],x=!1;return{widgets:h.map(y=>y.split(",").map(b=>{if(b==="title")return x=!0,{buttonName:b};let j,k,S,N,_,w;if(j=c[b])S=T=>{j.click&&j.click.call(T.target,T,T.target)},(N=s.getCustomButtonIconClass(j))||(N=s.getIconClass(b,o))||(_=j.text),w=j.hint||j.text;else if(k=a[b]){g.push(b),S=()=>{r.changeView(b)},(_=k.buttonTextOverride)||(N=s.getIconClass(b,o))||(_=k.buttonTextDefault);let T=k.buttonTextOverride||k.buttonTextDefault;w=am(k.buttonTitleOverride||k.buttonTitleDefault||e.viewHint,[T,b],T)}else if(r[b])if(S=()=>{r[b]()},(_=d[b])||(N=s.getIconClass(b,o))||(_=m[b]),b==="prevYear"||b==="nextYear"){let T=b==="prevYear"?"prev":"next";w=am(u[T]||p[T],[m.year||"year","year"],m[b])}else w=T=>am(u[b]||p[b],[m[T]||T,T],m[b]);return{buttonName:b,buttonClick:S,buttonIcon:N,buttonText:_,buttonHint:w}})),viewsWithButtons:g,hasTitle:x}}class KG{constructor(e,n,s){this.type=e,this.getCurrentData=n,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let GG={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const YG=Tr({name:"array-event-source",eventSourceDefs:[GG]});let QG={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:s}=t.context,a=t.eventSource.meta;rK(a.bind(null,ID(t.range,s)),r=>e({rawEvents:r}),n)}};const ZG=Tr({name:"func-event-source",eventSourceDefs:[QG]}),XG={method:String,extraParams:Ie,startParam:String,endParam:String,timeZoneParam:String};let JG={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:s}=t.eventSource,a=tY(s,t.range,t.context);lK(s.method,s.url,a).then(([r,o])=>{e({rawEvents:r,response:o})},n)}};const eY=Tr({name:"json-event-source",eventSourceRefiners:XG,eventSourceDefs:[JG]});function tY(t,e,n){let{dateEnv:s,options:a}=n,r,o,c,d,m={};return r=t.startParam,r==null&&(r=a.startParam),o=t.endParam,o==null&&(o=a.endParam),c=t.timeZoneParam,c==null&&(c=a.timeZoneParam),typeof t.extraParams=="function"?d=t.extraParams():d=t.extraParams||{},Object.assign(m,d),m[r]=s.formatIso(e.start),m[o]=s.formatIso(e.end),s.timeZone!=="local"&&(m[c]=s.timeZone),m}const nY={daysOfWeek:Ie,startTime:Qt,endTime:Qt,duration:Qt,startRecur:Ie,endRecur:Ie};let iY={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},s;return t.duration&&(s=t.duration),!s&&t.startTime&&t.endTime&&(s=xU(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:s,typeData:n}}return null},expand(t,e,n){let s=lo(e,{start:t.startRecur,end:t.endRecur});return s?aY(t.daysOfWeek,t.startTime,t.dateEnv,n,s):[]}};const sY=Tr({name:"simple-recurring-event",recurringTypes:[iY],eventRefiners:nY});function aY(t,e,n,s,a){let r=t?mD(t):null,o=Pn(a.start),c=a.end,d=[];for(e&&(e.milliseconds<0?c=hi(c,1):e.milliseconds>=1e3*60*60*24&&(o=hi(o,-1)));o<c;){let m;(!r||r[o.getUTCDay()])&&(e?m=s.add(o,e):m=o,d.push(s.createMarker(n.toDate(m)))),o=hi(o,1)}return d}const rY=Tr({name:"change-handler",optionChangeHandlers:{events(t,e){K1([t],e)},eventSources:K1}});function K1(t,e){let n=Ww(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let s=[];for(let a of t){let r=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===a){n.splice(o,1),r=!0;break}r||s.push(a)}for(let a of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of s)e.calendarApi.addEventSource(a)}function lY(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},ID(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function oY(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Gl(t,e))}const cY=[YG,ZG,eY,sY,rY,Tr({name:"misc",isLoadingFuncs:[t=>cR(t.eventSources)],propSetHandlers:{dateProfile:lY,eventStore:oY}})];class dY{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new Lw(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],s;for(;s=e.shift();)this.runTask(s),n.push(s);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function mY(t,e,n){let s;return/^(year|month)$/.test(t.currentRangeUnit)?s=t.currentRange:s=t.activeRange,n.formatRange(s.start,s.end,qn(e.titleFormat||uY(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function uY(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Bp(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class G1{constructor(){this.resetListeners=new Set}handleInput(e,n){const s=this.dateEnv;if(e!==s&&(typeof n=="function"?this.nowFn=n:s||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class hY{constructor(e){this.computeCurrentViewData=$t(this._computeCurrentViewData),this.organizeRawLocales=$t(gG),this.buildLocale=$t(lR),this.buildPluginHooks=yG(),this.buildDateEnv=$t(pY),this.buildTheme=$t(gY),this.parseToolbars=$t(UG),this.buildViewSpecs=$t(CG),this.buildDateProfileGenerator=Hh(fY),this.buildViewApi=$t(vY),this.buildViewUiProps=Hh(bY),this.buildEventUiBySource=$t(xY,la),this.buildEventUiBases=$t(yY),this.parseContextBusinessHours=Hh(wY),this.buildTitle=$t(mY),this.nowManager=new G1,this.emitter=new Gg,this.actionRunner=new dY(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause(),this.nowManager=new G1;let n={},s=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),a=s.calendarOptions.initialView||s.pluginHooks.initialView,r=this.computeCurrentViewData(a,s,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(r.options);let o={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=AG(s.calendarOptions,s.dateEnv,this.nowManager),d=r.dateProfileGenerator.build(c);fr(d.activeRange,c)||(c=d.currentRange.start);for(let h of s.pluginHooks.contextInit)h(o);let m=PG(s.calendarOptions,d,o),u={dynamicOptionOverrides:n,currentViewType:a,currentDate:c,dateProfile:d,businessHours:this.parseContextBusinessHours(o),eventSources:m,eventUiBases:{},eventStore:ys(),renderableEventStore:ys(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},p=Object.assign(Object.assign({},o),u);for(let h of s.pluginHooks.reducers)Object.assign(u,h(null,null,p));Kv(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:s}=this;n===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:s,emitter:a}=this,r=DG(s.dynamicOptionOverrides,e),o=this.computeOptionsData(n.optionOverrides,r,n.calendarApi),c=EG(s.currentViewType,e),d=this.computeCurrentViewData(c,o,n.optionOverrides,r);n.calendarApi.currentDataManager=this,a.setThisContext(n.calendarApi),a.setOptions(d.options);let m={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:p}=s;this.data&&this.data.dateProfileGenerator!==d.dateProfileGenerator&&(p=d.dateProfileGenerator.build(u)),u=TG(u,e),p=RG(p,e,u,d.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!fr(p.currentRange,u))&&(u=p.currentRange.start);let h=MG(s.eventSources,e,p,m),g=PW(s.eventStore,e,h,p,m),v=cR(h)&&!d.options.progressiveEventRendering&&s.renderableEventStore||g,{eventUiSingleBase:y,selectionConfig:b}=this.buildViewUiProps(m),j=this.buildEventUiBySource(h),k=this.buildEventUiBases(v.defs,y,j),S={dynamicOptionOverrides:r,currentViewType:c,currentDate:u,dateProfile:p,eventSources:h,eventStore:g,renderableEventStore:v,selectionConfig:b,eventUiBases:k,businessHours:this.parseContextBusinessHours(m),dateSelection:qG(s.dateSelection,e),eventSelection:HG(s.eventSelection,e),eventDrag:zG(s.eventDrag,e),eventResize:VG(s.eventResize,e)},N=Object.assign(Object.assign({},m),S);for(let T of o.pluginHooks.reducers)Object.assign(S,T(s,e,N));let _=Kv(s,m),w=Kv(S,m);!_&&w?a.trigger("loading",!0):_&&!w&&a.trigger("loading",!1),this.state=S,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,s=this.data,a=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),r=this.computeCurrentViewData(n.currentViewType,a,e.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,r.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),r),n),c=a.pluginHooks.optionChangeHandlers,d=s&&s.calendarOptions,m=a.calendarOptions;if(d&&d!==m){d.timeZone!==m.timeZone&&(n.eventSources=o.eventSources=IG(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=L1(o.eventStore,s.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=L1(o.renderableEventStore,s.dateEnv,o.dateEnv));for(let u in c)(this.optionsForHandling.indexOf(u)!==-1||d[u]!==m[u])&&c[u](m[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,n,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:r,localeDefaults:o,availableLocaleData:c,extra:d}=this.processRawCalendarOptions(e,n);Y1(d);let m=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,r,c,a.defaultRangeSeparator),u=this.buildViewSpecs(r.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),p=this.buildTheme(a,r),h=this.parseToolbars(a,this.stableOptionOverrides,p,u,s);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:r,dateEnv:m,viewSpecs:u,theme:p,toolbarConfig:h,localeDefaults:o,availableRawLocales:c.map}}processRawCalendarOptions(e,n){let{locales:s,locale:a}=Fv([rm,e,n]),r=this.organizeRawLocales(s),o=r.map,c=this.buildLocale(a||r.defaultCode,o).options,d=this.buildPluginHooks(e.plugins||[],cY),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},D1),R1),P1),d.listenerRefiners),d.optionRefiners),u={},p=Fv([rm,c,e,n]),h={},g=this.currentCalendarOptionsInput,x=this.currentCalendarOptionsRefined,v=!1;for(let y in p)this.optionsForRefining.indexOf(y)===-1&&(p[y]===g[y]||Il[y]&&y in g&&Il[y](g[y],p[y]))?h[y]=x[y]:m[y]?(h[y]=m[y](p[y]),v=!0):u[y]=g[y];return v&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:d,availableLocaleData:r,localeDefaults:c,extra:u}}_computeCurrentViewData(e,n,s,a){let r=n.viewSpecs[e];if(!r)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:c}=this.processRawViewOptions(r,n.pluginHooks,n.localeDefaults,s,a);Y1(c),this.nowManager.handleInput(n.dateEnv,o.now);let d=this.buildDateProfileGenerator({dateProfileGeneratorClass:r.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:r.duration,durationUnit:r.durationUnit,usesMinMaxTime:r.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:r,options:o,dateProfileGenerator:d,viewApi:m}}processRawViewOptions(e,n,s,a,r){let o=Fv([rm,e.optionDefaults,s,a,e.optionOverrides,r]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},D1),R1),P1),ZU),n.listenerRefiners),n.optionRefiners),d={},m=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,p=!1,h={};for(let g in o)o[g]===m[g]||Il[g]&&Il[g](o[g],m[g])?d[g]=u[g]:(o[g]===this.currentCalendarOptionsInput[g]||Il[g]&&Il[g](o[g],this.currentCalendarOptionsInput[g])?g in this.currentCalendarOptionsRefined&&(d[g]=this.currentCalendarOptionsRefined[g]):c[g]?d[g]=c[g](o[g]):h[g]=o[g],p=!0);return p&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=d),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function pY(t,e,n,s,a,r,o,c){let d=lR(e||o.defaultCode,o.map);return new oW({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:d,weekNumberCalculation:n,firstDay:s,weekText:a,cmdFormatter:r.cmdFormatter,defaultSeparator:c})}function gY(t,e){let n=e.themeClasses[t.themeSystem]||xl;return new n(t)}function fY(t){let e=t.dateProfileGeneratorClass||yD;return new e(t)}function vY(t,e,n){return new KG(t,e,n)}function xY(t){return wr(t,e=>e.ui)}function yY(t,e,n){let s={"":e};for(let a in t){let r=t[a];r.sourceId&&n[r.sourceId]&&(s[a]=n[r.sourceId])}return s}function bY(t){let{options:e}=t;return{eventUiSingleBase:Kp({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Kp({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Kv(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function wY(t){return HW(t.options.businessHours,t)}function Y1(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class kY extends kn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return be("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:s}=this.context,a=[],r=!0;for(let o of e){let{buttonName:c,buttonClick:d,buttonText:m,buttonIcon:u,buttonHint:p}=o;if(c==="title")r=!1,a.push(be("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=c===n.activeButton,g=!n.isTodayEnabled&&c==="today"||!n.isPrevEnabled&&c==="prev"||!n.isNextEnabled&&c==="next",x=[`fc-${c}-button`,s.getClass("button")];h&&x.push(s.getClass("buttonActive")),a.push(be("button",{type:"button",title:typeof p=="function"?p(n.navUnit):p,disabled:g,"aria-pressed":h,className:x.join(" "),onClick:d},m||(u?be("span",{className:u,role:"img"}):"")))}}if(a.length>1){let o=r&&s.getClass("buttonGroup")||"";return be("div",{className:o},...a)}return a[0]}}let Q1=class extends kn{render(){let{model:e,extraClassName:n}=this.props,s=!1,a,r,o=e.sectionWidgets,c=o.center;return o.left?(s=!0,a=o.left):a=o.start,o.right?(s=!0,r=o.right):r=o.end,be("div",{className:[n||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",c||[]),this.renderSection("end",r||[]))}renderSection(e,n){let{props:s}=this;return be(kY,{key:e,widgetGroups:n,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}};class jY extends kn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Ia(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:s}=e,a=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],r="",o="";return s?n.availableWidth!==null?r=n.availableWidth/s:o=`${1/s*100}%`:r=e.height||"",be("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:r,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class NY extends nd{constructor(e){super(e),this.handleSegClick=(n,s)=>{let{component:a}=this,{context:r}=a,o=Fc(s);if(o&&a.isValidSegDownEl(n.target)){let c=Di(n.target,".fc-event-forced-url"),d=c?c.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:s,event:new Bn(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:r.viewApi}),d&&!n.defaultPrevented&&(window.location.href=d)}},this.destroy=rD(e.el,"click",".fc-event",this.handleSegClick)}}class CY extends nd{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,s)=>{Fc(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",n,s))},this.handleSegLeave=(n,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,s))},this.removeHoverListeners=iU(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,s){let{component:a}=this,{context:r}=a,o=Fc(s);(!n||a.isValidSegDownEl(n.target))&&r.emitter.trigger(e,{el:s,event:new Bn(r,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:r.viewApi})}}class SY extends Eo{constructor(){super(...arguments),this.buildViewContext=$t(mW),this.buildViewPropTransformers=$t(EY),this.buildToolbarProps=$t(_Y),this.headerRef=$i(),this.footerRef=$i(),this.interactionsStore={},this.state={viewLabelId:Vg()},this.registerInteractiveComponent=(e,n)=>{let s=dK(e,n),o=[NY,CY].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(s));this.interactionsStore[e.uid]=o,hy[e.uid]=s},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let s of n)s.destroy();delete this.interactionsStore[e.uid]}delete hy[e.uid]},this.resizeRunner=new Lw(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:s}=e,a=!1,r="",o;e.isHeightAuto||e.forPrint?r="":s.height!=null?a=!0:s.contentHeight!=null?r=s.contentHeight:o=Math.max(s.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),d=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return be(Er.Provider,{value:c},be(id,{unit:"day"},m=>{let u=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return be(Rn,null,n.header&&be(Q1,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:d},u)),be(jY,{liquid:a,height:r,aspectRatio:o,labeledById:d},this.renderView(e),this.buildAppendContent()),n.footer&&be(Q1,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},u)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let s in n)n[s](e[s],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:s}=n.pluginHooks;for(let a in s)n[a]!==e[a]&&s[a](n[a],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(s=>s(e));return be(Rn,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:s}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},r=this.buildViewPropTransformers(n.viewPropsTransformers);for(let c of r)Object.assign(a,c.transform(a,e));let o=s.component;return be(o,Object.assign({},a))}}function _Y(t,e,n,s,a,r){let o=n.build(a,void 0,!1),c=n.buildPrev(e,s,!1),d=n.buildNext(e,s,!1);return{title:r,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!fr(e.currentRange,a),isPrevEnabled:c.isValid,isNextEnabled:d.isValid}}function EY(t){return t.map(e=>new e)}class TY extends uK{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;Vp(()=>{Sm(be(cK,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(a,r,o,c)=>(this.setClassNames(a),this.setHeight(r),be(gD.Provider,{value:this.customContentRenderId},be(SY,Object.assign({isHeightAuto:o,forPrint:c},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Sm(null,this.el),this.setClassNames([]),this.setHeight(""))},GV(e),this.el=e,this.renderRunner=new Lw(this.handleRenderRequest),new hY({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Vp(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!ml(e,this.currentClassNames)){let{classList:n}=this.el;for(let s of this.currentClassNames)n.remove(s);for(let s of e)n.add(s);this.currentClassNames=e}}setHeight(e){sD(this.el,"height",e)}}const AY=parseInt(String(He.version).split(".")[0]),DY=AY<18;class pR extends f.Component{constructor(){super(...arguments),this.elRef=f.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(He.createElement(RY,{key:n.id,customRendering:n}));return He.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new hG;this.handleCustomRendering=e.handle.bind(e),this.calendar=new TY(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Sa.flushSync(()=>{})});let n;e.subscribe(s=>{const a=Date.now(),r=!n;(DY||r||this.isUpdating||this.isUnmounting||a-n<100?gR:Sa.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{n=a,r?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}pR.act=gR;class RY extends f.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,s=typeof n=="function"?n(e.renderProps):n;return Sa.createPortal(s,e.containerEl)}}function gR(t){t()}class PY extends Ba{constructor(){super(...arguments),this.headerElRef=$i()}renderSimpleLayout(e,n){let{props:s,context:a}=this,r=[],o=Qp(a.options);return e&&r.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),be(Up,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},be(lk,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:r}))}renderHScrollLayout(e,n,s,a){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:o,context:c}=this,d=!o.forPrint&&Qp(c.options),m=!o.forPrint&&JD(c.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:d,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),m&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:fy}]}),be(Up,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},be(r,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:s,minWidth:a}]}],sections:u}))}}function Vh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.row].push(s);return n}function mh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.firstCol].push(s);return n}function Z1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}const fR=qn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function vR(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class xR extends kn{render(){let{props:e}=this;return be(ck,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:fR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class yR extends kn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,r=s.eventTimeFormat||fR,o=RD(a,r,n,!0,e.defaultDisplayEventEnd);return be(ok,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:MD(e.seg,n),defaultGenerator:MY,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function MY(t){return be(Rn,null,be("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&be("div",{className:"fc-event-time"},t.timeText),be("div",{className:"fc-event-title"},t.event.title||be(Rn,null,"")))}class IY extends kn{constructor(){super(...arguments),this.compileSegs=$t(OY)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return be(iR,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return be(Rn,null,n.map(r=>{let o=r.eventRange.instance.instanceId;return be("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},vR(r)?be(yR,Object.assign({seg:r,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},al(r,e.todayRange))):be(xR,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},al(r,e.todayRange))))}))}})}}function OY(t){let e=[],n=[];for(let s of t)e.push(s.seg),s.isVisible||n.push(s.seg);return{allSegs:e,invisibleSegs:n}}const LY=qn({week:"narrow"});let FY=class extends Ba{constructor(){super(...arguments),this.rootElRef=$i(),this.state={dayNumberId:Vg()},this.handleRootEl=e=>{Ia(this.rootElRef,e),Ia(this.props.elRef,e)}}render(){let{context:e,props:n,state:s,rootElRef:a}=this,{options:r,dateEnv:o}=e,{date:c,dateProfile:d}=n;const m=n.showDayNumber&&BY(c,d.currentRange,o);return be(mk,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:$Y,date:c,dateProfile:d,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:m,extraRenderProps:n.extraRenderProps},(u,p)=>be("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&be(nR,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Yp(e,c,"week"),date:c,defaultFormat:LY}),!p.isDisabled&&(n.showDayNumber||uk(r)||n.forceDayTop)?be("div",{className:"fc-daygrid-day-top"},be(u,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Yp(e,c)),{id:s.dayNumberId})})):n.showDayNumber?be("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},be("a",{className:"fc-daygrid-day-number"},"")):void 0,be("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,be("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},be(IY,{allDayDate:c,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:a,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),be("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}};function $Y(t){return t.dayNumberText||be(Rn,null,"")}function BY(t,e,n){const{start:s,end:a}=e,r=ul(a,-1),o=n.getYear(s),c=n.getMonth(s),d=n.getYear(r),m=n.getMonth(r);return!(o===d&&c===m)&&(t.valueOf()===s.valueOf()||n.getDay(t)===1&&t.valueOf()<a.valueOf())}function bR(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function wR(t){return bR(t)+":"+t.lastCol}function qY(t,e,n,s,a,r,o){let c=new VY(b=>{let j=t[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return a[j]||1});c.allowReslicing=!0,c.strictOrder=s,e===!0||n===!0?(c.maxCoord=r,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof n=="number"&&(c.maxStackCnt=n,c.hiddenConsumes=!0);let d=[],m=[];for(let b=0;b<t.length;b+=1){let j=t[b],k=wR(j);a[k]!=null?d.push({index:b,span:{start:j.firstCol,end:j.lastCol+1}}):m.push(j)}let u=c.addSegs(d),p=c.toRects(),{singleColPlacements:h,multiColPlacements:g,leftoverMargins:x}=HY(p,t,o),v=[],y=[];for(let b of m){g[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let j=b.firstCol;j<=b.lastCol;j+=1)h[j].push({seg:bc(b,j,j+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)v.push(0);for(let b of u){let j=t[b.index],k=b.span;g[k.start].push({seg:bc(j,k.start,k.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let S=k.start;S<k.end;S+=1)v[S]+=1,h[S].push({seg:bc(j,S,S+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)y.push(x[b]);return{singleColPlacements:h,multiColPlacements:g,moreCnts:v,moreMarginTops:y}}function HY(t,e,n){let s=zY(t,n.length),a=[],r=[],o=[];for(let c=0;c<n.length;c+=1){let d=s[c],m=[],u=0,p=0;for(let g of d){let x=e[g.index];m.push({seg:bc(x,c,c+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-u}),u=g.levelCoord+g.thickness}let h=[];u=0,p=0;for(let g of d){let x=e[g.index],v=g.span.end-g.span.start>1,y=g.span.start===c;p+=g.levelCoord-u,u=g.levelCoord+g.thickness,v?(p+=g.thickness,y&&h.push({seg:bc(x,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):y&&(h.push({seg:bc(x,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:p}),p=0)}a.push(m),r.push(h),o.push(p)}return{singleColPlacements:a,multiColPlacements:r,leftoverMargins:o}}function zY(t,e){let n=[];for(let s=0;s<e;s+=1)n.push([]);for(let s of t)for(let a=s.span.start;a<s.span.end;a+=1)n[a].push(s);return n}function bc(t,e,n,s){if(t.firstCol===e&&t.lastCol===n-1)return t;let a=t.eventRange,r=a.range,o=lo(r,{start:s[e].date,end:hi(s[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===r.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===r.end.valueOf()})}class VY extends HD{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:s}=this,a=r=>!this.forceHidden[Yl(r)];for(let r=0;r<s.length;r+=1)s[r]=s[r].filter(a);return n}handleInvalidInsertion(e,n,s){const{entriesByLevel:a,forceHidden:r}=this,{touchingEntry:o,touchingLevel:c,touchingLateral:d}=e;if(this.hiddenConsumes&&o){const m=Yl(o);if(!r[m])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:ak(o.span,n.span)}),p=Yl(u);r[p]=!0,a[c][d]=u,s.push(u),this.splitEntry(o,n,s)}else r[m]=!0,s.push(o)}super.handleInvalidInsertion(e,n,s)}}let kR=class extends Ba{constructor(){super(...arguments),this.cellElRefs=new lr,this.frameElRefs=new lr,this.fgElRefs=new lr,this.segHarnessRefs=new lr,this.rootElRef=$i(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:s}=this,{options:a}=s,r=e.cells.length,o=mh(e.businessHourSegs,r),c=mh(e.bgEventSegs,r),d=mh(this.getHighlightSegs(),r),m=mh(this.getMirrorSegs(),r),{singleColPlacements:u,multiColPlacements:p,moreCnts:h,moreMarginTops:g}=qY(DD(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),x=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return be("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((v,y)=>{let b=this.renderFgSegs(y,e.forPrint?u[y]:p[y],e.todayRange,x),j=this.renderFgSegs(y,UY(m[y],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return be(FY,{key:v.key,elRef:this.cellElRefs.createRef(v.key),innerElRef:this.frameElRefs.createRef(v.key),dateProfile:e.dateProfile,date:v.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:v.extraRenderProps,extraDataAttrs:v.extraDataAttrs,extraClassNames:v.extraClassNames,extraDateSpan:v.extraDateSpan,moreCnt:h[y],moreMarginTop:g[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(v.key),fgContent:be(Rn,null,be(Rn,null,b),be(Rn,null,j)),bgContent:be(Rn,null,this.renderFillSegs(d[y],"highlight"),this.renderFillSegs(o[y],"non-business"),this.renderFillSegs(c[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let s=this.props;this.updateSizing(!la(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,s,a,r,o,c){let{context:d}=this,{eventSelection:m}=this.props,{framePositions:u}=this.state,p=this.props.cells.length===1,h=r||o||c,g=[];if(u)for(let x of n){let{seg:v}=x,{instanceId:y}=v.eventRange.instance,b=x.isVisible&&!a[y],j=x.isAbsolute,k="",S="";j&&(d.isRtl?(S=0,k=u.lefts[v.lastCol]-u.lefts[v.firstCol]):(k=0,S=u.rights[v.firstCol]-u.rights[v.lastCol])),g.push(be("div",{className:"fc-daygrid-event-harness"+(j?" fc-daygrid-event-harness-abs":""),key:bR(v),ref:h?null:this.segHarnessRefs.createRef(wR(v)),style:{visibility:b?"":"hidden",marginTop:j?"":x.marginTop,top:j?x.absoluteTop:"",left:k,right:S}},vR(v)?be(yR,Object.assign({seg:v,isDragging:r,isSelected:y===m,defaultDisplayEventEnd:p},al(v,s))):be(xR,Object.assign({seg:v,isDragging:r,isResizing:o,isDateSelecting:c,isSelected:y===m,defaultDisplayEventEnd:p},al(v,s)))))}return g}renderFillSegs(e,n){let{isRtl:s}=this.context,{todayRange:a}=this.props,{framePositions:r}=this.state,o=[];if(r)for(let c of e){let d=s?{right:0,left:r.lefts[c.lastCol]-r.lefts[c.firstCol]}:{left:0,right:r.rights[c.firstCol]-r.rights[c.lastCol]};o.push(be("div",{key:PD(c.eventRange),className:"fc-daygrid-bg-harness",style:d},n==="bg-event"?be(eR,Object.assign({seg:c},al(c,a))):tR(n)))}return be(Rn,{},...o)}updateSizing(e){let{props:n,state:s,frameElRefs:a}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let d=n.cells.map(m=>a.currentMap[m.key]);if(d.length){let m=this.rootElRef.current,u=new $c(m,d,!0,!1);(!s.framePositions||!s.framePositions.similarTo(u))&&this.setState({framePositions:new $c(m,d,!0,!1)})}}const r=this.state.segHeights,o=this.querySegHeights(),c=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},r),o),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let s in e){let a=Math.round(e[s].getBoundingClientRect().height);n[s]=Math.max(n[s]||0,a)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}};kR.addStateEquality({segHeights:la});function UY(t,e){if(!t.length)return[];let n=WY(e);return t.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:n[s.eventRange.instance.instanceId],marginTop:0}))}function WY(t){let e={};for(let n of t)for(let s of n)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class KY extends Ba{constructor(){super(...arguments),this.splitBusinessHourSegs=$t(Vh),this.splitBgEventSegs=$t(GY),this.splitFgEventSegs=$t(Vh),this.splitDateSelectionSegs=$t(Vh),this.splitEventDrag=$t(Z1),this.splitEventResize=$t(Z1),this.rowRefs=new lr}render(){let{props:e,context:n}=this,s=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,s),r=this.splitBgEventSegs(e.bgEventSegs,s),o=this.splitFgEventSegs(e.fgEventSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),u=s>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return be(id,{unit:"day"},(p,h)=>be(Rn,null,e.cells.map((g,x)=>be(kR,{ref:this.rowRefs.createRef(x),key:g.length?g[0].date.toISOString():x,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:a[x],eventSelection:e.eventSelection,bgEventSegs:r[x],fgEventSegs:o[x],dateSelectionSegs:c[x],eventDrag:d[x],eventResize:m[x],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new $c(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new $c(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:s,rowPositions:a}=this,r=s.leftToIndex(e),o=a.topToIndex(n);if(o!=null&&r!=null){let c=this.props.cells[o][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,r),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(o,r),rect:{left:s.lefts[r],right:s.rights[r],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let s=this.props.cells[e][n].date,a=hi(s,1);return{start:s,end:a}}}function GY(t,e){return Vh(t.filter(YY),e)}function YY(t){return t.eventRange.def.allDay}let QY=class extends Ba{constructor(){super(...arguments),this.elRef=$i(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:s,expandRows:a}=e,r=s===!0||n===!0;r&&!a&&(r=!1,n=null,s=null);let o=["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return be("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},be("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,be("tbody",{role:"presentation"},be(KY,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=ZY(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),s=n.closest(".fc-scroller"),a=e.getBoundingClientRect().top-n.getBoundingClientRect().top;s.scrollTop=a?a+1:0}this.needsScrollReset=!1}}};function ZY(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${MU(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Hw(e.currentDate)}"]`)),n}class XY extends GD{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class jR extends Ba{constructor(){super(...arguments),this.slicer=new XY,this.tableRef=$i()}render(){let{props:e,context:n}=this;return be(QY,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class JY extends PY{constructor(){super(...arguments),this.buildDayTableModel=$t(eQ),this.headerRef=$i(),this.tableRef=$i()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:s}=this,a=this.buildDayTableModel(s.dateProfile,n),r=e.dayHeaders&&be(UD,{ref:this.headerRef,dateProfile:s.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=c=>be(jR,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:a,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(r,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(r,o)}}function eQ(t,e){let n=new WD(t.renderRange,e);return new KD(n,/year|month|week/.test(t.currentRangeUnit))}class tQ extends yD{buildRenderRange(e,n,s){let a=super.buildRenderRange(e,n,s),{props:r}=this;return nQ({currentRange:a,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}function nQ(t){let{dateEnv:e,currentRange:n}=t,{start:s,end:a}=n,r;if(t.snapToWeek&&(s=e.startOfWeek(s),r=e.startOfWeek(a),r.valueOf()!==a.valueOf()&&(a=S1(r,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(hi(n.end,-1))),c=Math.ceil(jU(o,a));a=S1(a,6-c)}return{start:s,end:a}}var iQ=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Ow(iQ);var sQ=Tr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:JY,dateProfileGeneratorClass:tQ},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class aQ extends vK{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?KW(e)?["timed","allDay"]:["allDay"]:["timed"]}}const rQ=qn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function NR(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return be(Er.Consumer,null,n=>{if(!t.isLabeled)return be("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:s,options:a,viewApi:r}=n,o=a.slotLabelFormat==null?rQ:Array.isArray(a.slotLabelFormat)?qn(a.slotLabelFormat[0]):qn(a.slotLabelFormat),c={level:0,time:t.time,date:s.toDate(t.date),view:r,text:s.format(t.date,o)};return be(Cs,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:c,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:lQ,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},d=>be("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},be(d,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function lQ(t){return t.text}class oQ extends kn{render(){return this.props.slatMetas.map(e=>be("tr",{key:e.key},be(NR,Object.assign({},e))))}}const cQ=qn({week:"short"}),dQ=5;class mQ extends Ba{constructor(){super(...arguments),this.allDaySplitter=new aQ,this.headerElRef=$i(),this.rootElRef=$i(),this.scrollerElRef=$i(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:s}=this.context,{dateProfile:a}=this.props,r=a.renderRange,c=_o(r.start,r.end)===1?Yp(this.context,r.start,"week"):{};return s.weekNumbers&&e==="day"?be(nR,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:r.start,defaultFormat:cQ},d=>be("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},be(d,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:c}))):be("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},be("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:s}=this.context,a={text:n.allDayText,view:s};return be(Cs,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:uQ,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},r=>be("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},be(r,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,s){let{context:a,props:r}=this,o=[],c=Qp(a.options);return e&&o.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(o.push({type:"body",key:"all-day",chunk:{content:n}}),o.push({type:"body",key:"all-day-divider",outerContent:be("tr",{role:"presentation",className:"fc-scrollgrid-section"},be("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),be(Up,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},be(lk,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,n,s,a,r,o,c){let d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");let{context:m,props:u}=this,p=!u.forPrint&&Qp(m.options),h=!u.forPrint&&JD(m.options),g=[];e&&g.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:v=>be("tr",{role:"presentation"},this.renderHeadAxis("day",v.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(g.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:v=>be("tr",{role:"presentation"},this.renderTableRowAxis(v.rowSyncHeights[0]))},{key:"cols",content:n}]}),g.push({key:"all-day-divider",type:"body",outerContent:be("tr",{role:"presentation",className:"fc-scrollgrid-section"},be("td",{colSpan:2,className:"fc-timegrid-divider "+m.theme.getClass("tableCellShaded")}))}));let x=m.options.nowIndicator;return g.push({type:"body",key:"body",liquid:!0,expandRows:!!m.options.expandRows,chunks:[{key:"axis",content:v=>be("div",{className:"fc-timegrid-axis-chunk"},be("table",{"aria-hidden":!0,style:{height:v.expandRows?v.clientHeight:""}},v.tableColGroupNode,be("tbody",null,be(oQ,{slatMetas:o}))),be("div",{className:"fc-timegrid-now-indicator-container"},be(id,{unit:x?"minute":"day"},y=>{let b=x&&c&&c.safeComputeTop(y);return typeof b=="number"?be(dk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:b},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),h&&g.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:fy},{key:"cols",content:fy}]}),be(Up,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:m.viewSpec},be(d,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:r}]}],sections:g}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=dQ),{dayMaxEvents:e,dayMaxEventRows:n}}}function uQ(t){return t.text}class hQ{constructor(e,n,s){this.positions=e,this.dateProfile=n,this.slotDuration=s}safeComputeTop(e){let{dateProfile:n}=this;if(fr(n.currentRange,e)){let s=Pn(e),a=e.valueOf()-s.valueOf();if(a>=ia(n.slotMinTime)&&a<ia(n.slotMaxTime))return this.computeTimeTop(Qt(a))}return null}computeDateTop(e,n){return n||(n=Pn(e)),this.computeTimeTop(Qt(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:s}=this,a=n.els.length,r=(e.milliseconds-ia(s.slotMinTime))/ia(this.slotDuration),o,c;return r=Math.max(0,r),r=Math.min(a,r),o=Math.floor(r),o=Math.min(o,a-1),c=r-o,n.tops[o]+n.getHeight(o)*c}}class pQ extends kn{render(){let{props:e,context:n}=this,{options:s}=n,{slatElRefs:a}=e;return be("tbody",null,e.slatMetas.map((r,o)=>{let c={time:r.time,date:n.dateEnv.toDate(r.date),view:n.viewApi};return be("tr",{key:r.key,ref:a.createRef(r.key)},e.axis&&be(NR,Object.assign({},r)),be(Cs,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!r.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":r.isoTimeStr},renderProps:c,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class gQ extends kn{constructor(){super(...arguments),this.rootElRef=$i(),this.slatElRefs=new lr}render(){let{props:e,context:n}=this;return be("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},be("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,be(pQ,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new hQ(new $c(this.rootElRef.current,fQ(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function fQ(t,e){return e.map(n=>t[n.key])}function Td(t,e){let n=[],s;for(s=0;s<e;s+=1)n.push([]);if(t)for(s=0;s<t.length;s+=1)n[t[s].col].push(t[s]);return n}function X1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.col].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}class vQ extends kn{render(){let{props:e}=this;return be(iR,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>SR(e.hiddenSegs,e),defaultGenerator:xQ,forceTimed:!0},n=>be(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function xQ(t){return t.shortText}function yQ(t,e,n){let s=new HD;e!=null&&(s.strictOrder=e),n!=null&&(s.maxStackCnt=n);let a=s.addSegs(t),r=AK(a),o=bQ(s);return o=NQ(o,1),{segRects:CQ(o),hiddenGroups:r}}function bQ(t){const{entriesByLevel:e}=t,n=pk((s,a)=>s+":"+a,(s,a)=>{let r=jQ(t,s,a),o=J1(r,n),c=e[s][a];return[Object.assign(Object.assign({},c),{nextLevelNodes:o[0]}),c.thickness+o[1]]});return J1(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function J1(t,e){if(!t)return[[],0];let{level:n,lateralStart:s,lateralEnd:a}=t,r=s,o=[];for(;r<a;)o.push(e(n,r)),r+=1;return o.sort(wQ),[o.map(kQ),o[0][1]]}function wQ(t,e){return e[1]-t[1]}function kQ(t){return t[0]}function jQ(t,e,n){let{levelCoords:s,entriesByLevel:a}=t,r=a[e][n],o=s[e]+r.thickness,c=s.length,d=e;for(;d<c&&s[d]<o;d+=1);for(;d<c;d+=1){let m=a[d],u,p=gy(m,r.span.start,py),h=p[0]+p[1],g=h;for(;(u=m[g])&&u.span.start<r.span.end;)g+=1;if(h<g)return{level:d,lateralStart:h,lateralEnd:g}}return null}function NQ(t,e){const n=pk((s,a,r)=>Yl(s),(s,a,r)=>{let{nextLevelNodes:o,thickness:c}=s,d=c+r,m=c/d,u,p=[];if(!o.length)u=e;else for(let g of o)if(u===void 0){let x=n(g,a,d);u=x[0],p.push(x[1])}else{let x=n(g,u,0);p.push(x[1])}let h=(u-a)*m;return[u-h,Object.assign(Object.assign({},s),{thickness:h,nextLevelNodes:p})]});return t.map(s=>n(s,0,0)[1])}function CQ(t){let e=[];const n=pk((a,r,o)=>Yl(a),(a,r,o)=>{let c=Object.assign(Object.assign({},a),{levelCoord:r,stackDepth:o,stackForward:0});return e.push(c),c.stackForward=s(a.nextLevelNodes,r+a.thickness,o+1)+1});function s(a,r,o){let c=0;for(let d of a)c=Math.max(n(d,r,o),c);return c}return s(t,0,0),e}function pk(t,e){const n={};return(...s)=>{let a=t(...s);return a in n?n[a]:n[a]=e(...s)}}function eC(t,e,n=null,s=0){let a=[];if(n)for(let r=0;r<t.length;r+=1){let o=t[r],c=n.computeDateTop(o.start,e),d=Math.max(c+(s||0),n.computeDateTop(o.end,e));a.push({start:Math.round(c),end:Math.round(d)})}return a}function SQ(t,e,n,s){let a=[],r=[];for(let m=0;m<t.length;m+=1){let u=e[m];u?a.push({index:m,thickness:1,span:u}):r.push(t[m])}let{segRects:o,hiddenGroups:c}=yQ(a,n,s),d=[];for(let m of o)d.push({seg:t[m.index],rect:m});for(let m of r)d.push({seg:m,rect:null});return{segPlacements:d,hiddenGroups:c}}const _Q=qn({hour:"numeric",minute:"2-digit",meridiem:!1});class CR extends kn{render(){return be(ck,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:_Q}))}}class EQ extends kn{constructor(){super(...arguments),this.sortEventSegs=$t(DD)}render(){let{props:e,context:n}=this,{options:s}=n,a=s.selectMirror,r=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},c=this.sortEventSegs(e.fgEventSegs,s.eventOrder);return be(mk,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},d=>be("div",{className:"fc-timegrid-col-frame"},be("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),be("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(c,o,!1,!1,!1)),be("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(r,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),be("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),uk(s)&&be(d,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,s,a,r,o){let{props:c}=this;return c.forPrint?SR(e,c):this.renderPositionedFgSegs(e,n,s,a,r,o)}renderPositionedFgSegs(e,n,s,a,r,o){let{eventMaxStack:c,eventShortHeight:d,eventOrderStrict:m,eventMinHeight:u}=this.context.options,{date:p,slatCoords:h,eventSelection:g,todayRange:x,nowDate:v}=this.props,y=s||a||r,b=eC(e,p,h,u),{segPlacements:j,hiddenGroups:k}=SQ(e,b,m,c);return be(Rn,null,this.renderHiddenGroups(k,e),j.map(S=>{let{seg:N,rect:_}=S,w=N.eventRange.instance.instanceId,T=y||!!(!n[w]&&_),A=Gv(_&&_.span),M=!y&&_?this.computeSegHStyle(_):{left:0,right:0},E=!!_&&_.stackForward>0,P=!!_&&_.span.end-_.span.start<d;return be("div",{className:"fc-timegrid-event-harness"+(E?" fc-timegrid-event-harness-inset":""),key:o||w,style:Object.assign(Object.assign({visibility:T?"":"hidden"},A),M)},be(CR,Object.assign({seg:N,isDragging:s,isResizing:a,isDateSelecting:r,isSelected:w===g,isShort:P},al(N,x,v))))}))}renderHiddenGroups(e,n){let{extraDateSpan:s,dateProfile:a,todayRange:r,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m}=this.props;return be(Rn,null,e.map(u=>{let p=Gv(u.span),h=TQ(u.entries,n);return be(vQ,{key:dD(sR(h)),hiddenSegs:h,top:p.top,bottom:p.bottom,extraDateSpan:s,dateProfile:a,todayRange:r,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m})}))}renderFillSegs(e,n){let{props:s,context:a}=this,o=eC(e,s.date,s.slatCoords,a.options.eventMinHeight).map((c,d)=>{let m=e[d];return be("div",{key:PD(m.eventRange),className:"fc-timegrid-bg-harness",style:Gv(c)},n==="bg-event"?be(eR,Object.assign({seg:m},al(m,s.todayRange,s.nowDate))):tR(n))});return be(Rn,null,o)}renderNowIndicator(e){let{slatCoords:n,date:s}=this.props;return n?e.map((a,r)=>be(dk,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(a.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(e){let{isRtl:n,options:s}=this.context,a=s.slotEventOverlap,r=e.levelCoord,o=e.levelCoord+e.thickness,c,d;a&&(o=Math.min(1,r+(o-r)*2)),n?(c=1-o,d=r):(c=r,d=1-o);let m={zIndex:e.stackDepth+1,left:c*100+"%",right:d*100+"%"};return a&&!e.stackForward&&(m[n?"marginLeft":"marginRight"]=20),m}}function SR(t,{todayRange:e,nowDate:n,eventSelection:s,eventDrag:a,eventResize:r}){let o=(a?a.affectedInstances:null)||(r?r.affectedInstances:null)||{};return be(Rn,null,t.map(c=>{let d=c.eventRange.instance.instanceId;return be("div",{key:d,style:{visibility:o[d]?"hidden":""}},be(CR,Object.assign({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===s,isShort:!1},al(c,e,n))))}))}function Gv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function TQ(t,e){return t.map(n=>e[n.index])}class AQ extends kn{constructor(){super(...arguments),this.splitFgEventSegs=$t(Td),this.splitBgEventSegs=$t(Td),this.splitBusinessHourSegs=$t(Td),this.splitNowIndicatorSegs=$t(Td),this.splitDateSelectionSegs=$t(Td),this.splitEventDrag=$t(X1),this.splitEventResize=$t(X1),this.rootElRef=$i(),this.cellElRefs=new lr}render(){let{props:e,context:n}=this,s=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,r=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitBgEventSegs(e.bgEventSegs,a),c=this.splitBusinessHourSegs(e.businessHourSegs,a),d=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),m=this.splitDateSelectionSegs(e.dateSelectionSegs,a),u=this.splitEventDrag(e.eventDrag,a),p=this.splitEventResize(e.eventResize,a);return be("div",{className:"fc-timegrid-cols",ref:this.rootElRef},be("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,be("tbody",{role:"presentation"},be("tr",{role:"row"},e.axis&&be("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},be("div",{className:"fc-timegrid-col-frame"},be("div",{className:"fc-timegrid-now-indicator-container"},typeof s=="number"&&be(dk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:e.nowDate})))),e.cells.map((h,g)=>be(EQ,{key:h.key,elRef:this.cellElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,fgEventSegs:r[g],bgEventSegs:o[g],businessHourSegs:c[g],nowIndicatorSegs:d[g],dateSelectionSegs:m[g],eventDrag:u[g],eventResize:p[g],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new $c(this.rootElRef.current,DQ(this.cellElRefs.currentMap,e.cells),!0,!1))}}function DQ(t,e){return e.map(n=>t[n.key])}class RQ extends Ba{constructor(){super(...arguments),this.processSlotOptions=$t(PQ),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:s}=this.state;if(n&&s){if(e.time){let a=s.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),n(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return be("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},be(gQ,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),be(AQ,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:s,options:a}=this.context,{colCoords:r}=this,{dateProfile:o}=this.props,{slatCoords:c}=this.state,{snapDuration:d,snapsPerSlot:m}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),u=r.leftToIndex(e),p=c.positions.topToIndex(n);if(u!=null&&p!=null){let h=this.props.cells[u],g=c.positions.tops[p],x=c.positions.getHeight(p),v=(n-g)/x,y=Math.floor(v*m),b=p*m+y,j=this.props.cells[u].date,k=oy(o.slotMinTime,yU(d,b)),S=s.add(j,k),N=s.add(S,d);return{dateProfile:o,dateSpan:Object.assign({range:{start:S,end:N},allDay:!1},h.extraDateSpan),dayEl:r.els[u],rect:{left:r.lefts[u],right:r.rights[u],top:g,bottom:g+x},layer:0}}return null}}function PQ(t,e){let n=e||t,s=qw(t,n);return s===null&&(n=t,s=1),{snapDuration:n,snapsPerSlot:s}}class MQ extends GD{sliceRange(e,n){let s=[];for(let a=0;a<n.length;a+=1){let r=lo(e,n[a]);r&&s.push({start:r.start,end:r.end,isStart:r.start.valueOf()===e.start.valueOf(),isEnd:r.end.valueOf()===e.end.valueOf(),col:a})}return s}}class IQ extends Ba{constructor(){super(...arguments),this.buildDayRanges=$t(OQ),this.slicer=new MQ,this.timeColsRef=$i()}render(){let{props:e,context:n}=this,{dateProfile:s,dayTableModel:a}=e,{nowIndicator:r,nextDayThreshold:o}=n.options,c=this.buildDayRanges(a,s,n.dateEnv);return be(id,{unit:r?"minute":"day"},(d,m)=>be(RQ,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,s,null,n,c),{forPrint:e.forPrint,axis:e.axis,dateProfile:s,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:d,nowIndicatorSegs:r&&this.slicer.sliceNowDate(d,s,o,n,c),todayRange:m,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function OQ(t,e,n){let s=[];for(let a of t.headerDates)s.push({start:n.add(a,e.slotMinTime),end:n.add(a,e.slotMaxTime)});return s}const tC=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function LQ(t,e,n,s,a){let r=new Date(0),o=t,c=Qt(0),d=n||FQ(s),m=[];for(;ia(o)<ia(e);){let u=a.add(r,o),p=qw(c,d)!==null;m.push({date:u,time:o,key:u.toISOString(),isoTimeStr:IU(u),isLabeled:p}),o=oy(o,s),c=oy(c,s)}return m}function FQ(t){let e,n,s;for(e=tC.length-1;e>=0;e-=1)if(n=Qt(tC[e]),s=qw(n,t),s!==null&&s>1)return n;return t}class $Q extends mQ{constructor(){super(...arguments),this.buildTimeColsModel=$t(BQ),this.buildSlatMetas=$t(LQ)}render(){let{options:e,dateEnv:n,dateProfileGenerator:s}=this.context,{props:a}=this,{dateProfile:r}=a,o=this.buildTimeColsModel(r,s),c=this.allDaySplitter.splitProps(a),d=this.buildSlatMetas(r.slotMinTime,r.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:m}=e,u=!m,p=m,h=e.dayHeaders&&be(UD,{dates:o.headerDates,dateProfile:r,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),g=e.allDaySlot!==!1&&(v=>be(jR,Object.assign({},c.allDay,{dateProfile:r,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:v.tableMinWidth,colGroupNode:v.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:v.clientWidth,clientHeight:v.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),x=v=>be(IQ,Object.assign({},c.timed,{dayTableModel:o,dateProfile:r,axis:u,slotDuration:e.slotDuration,slatMetas:d,forPrint:a.forPrint,tableColGroupNode:v.tableColGroupNode,tableMinWidth:v.tableMinWidth,clientWidth:v.clientWidth,clientHeight:v.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:v.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(h,g,x,o.colCnt,m,d,this.state.slatCoords):this.renderSimpleLayout(h,g,x)}}function BQ(t,e){let n=new WD(t.renderRange,e);return new KD(n,!1)}var qQ='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Ow(qQ);const HQ={allDaySlot:Boolean};var zQ=Tr({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:HQ,views:{timeGrid:{component:$Q,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});rk.touchMouseIgnoreWait=500;let xy=0,Zp=0,yy=!1;class _R{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&VQ(n)&&this.tryStart(n)){let s=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let s=this.createEventFromMouse(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let s=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let a=n.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let s=this.createEventFromTouch(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=n=>{if(this.isDragging){let s=n.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,UQ()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:a,deltaX:s-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new Gg,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),WQ()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),KQ()}tryStart(e){let n=this.querySubjectEl(e),s=e.target;return n&&(!this.handleSelector||Di(s,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){yy=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Di(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return xy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(yy=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let s=0,a=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:a}}createEventFromTouch(e,n){let s=e.touches,a,r,o=0,c=0;return s&&s.length?(a=s[0].pageX,r=s[0].pageY):(a=e.pageX,r=e.pageY),n?(this.origPageX=a,this.origPageY=r):(o=a-this.origPageX,c=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:r,deltaX:o,deltaY:c}}}function VQ(t){return t.button===0&&!t.ctrlKey}function UQ(){xy+=1,setTimeout(()=>{xy-=1},rk.touchMouseIgnoreWait)}function WQ(){Zp+=1,Zp===1&&window.addEventListener("touchmove",ER,{passive:!1})}function KQ(){Zp-=1,Zp||window.removeEventListener("touchmove",ER,{passive:!1})}function ER(t){yy&&t.preventDefault()}class GQ{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let s=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,n){let s=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();s.style.transition="top "+n+"ms,left "+n+"ms",sm(s,{left:a.left,top:a.top}),sU(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&(Fw(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&sm(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),sm(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class TR extends sk{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class AR extends TR{constructor(e,n){super(new EK(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return SK(this.scrollController.el)}}class YQ extends TR{constructor(e){super(new TK,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const nC=typeof performance=="function"?performance.now:Date.now;class QQ{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=nC();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let s=e-window.scrollX,a=n-window.scrollY,r=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:s-this.pointerScreenX;r<0?this.everMovedUp=!0:r>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(nC()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:s}=e,{edgeThreshold:a}=this,r=a-e.distance,o=r*r/(a*a)*this.maxVelocity*n,c=1;switch(e.name){case"left":c=-1;case"right":s.setScrollLeft(s.getScrollLeft()+o*c);break;case"top":c=-1;case"bottom":s.setScrollTop(s.getScrollTop()+o*c);break}}computeBestEdge(e,n){let{edgeThreshold:s}=this,a=null,r=this.scrollCaches||[];for(let o of r){let c=o.clientRect,d=e-c.left,m=c.right-e,u=n-c.top,p=c.bottom-n;d>=0&&m>=0&&u>=0&&p>=0&&(u<=s&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"top",distance:u}),p<=s&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>p)&&(a={scrollCache:o,name:"bottom",distance:p}),d<=s&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"left",distance:d}),m<=s&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>m)&&(a={scrollCache:o,name:"right",distance:m}))}return a}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new YQ(!1):new AR(n,!1))}queryScrollEls(e){let n=[];for(let s of this.scrollQuery)typeof s=="object"?n.push(s):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return n}}class au extends RK{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,aU(document.body),lU(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let r=this.minDistance,o,{deltaX:c,deltaY:d}=a;o=c*c+d*d,o>=r*r&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,rU(document.body),oU(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new _R(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),n&&(s.selector=n),this.mirror=new GQ,this.autoScroller=new QQ}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class ZQ{constructor(e){this.el=e,this.origRect=ik(e),this.scrollCaches=qD(e).map(n=>new AR(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let s={left:e,top:n};for(let a of this.scrollCaches)if(!XQ(a.getEventTarget())&&!hK(s,a.clientRect))return!1;return!0}}function XQ(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Yg{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):a.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Gg}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},s=n,a=e.subjectEl,r;a instanceof HTMLElement&&(r=ik(a),s=pK(s,r));let o=this.initialHit=this.queryHitForOffset(s.left,s.top);if(o){if(this.useSubjectCenter&&r){let c=FD(r,o.rect);c&&(s=gK(c))}this.coordAdjust=fK(s,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!Qg(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=wr(this.droppableStore,e=>(e.component.prepareHits(),new ZQ(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:s,offsetTrackers:a}=this,r=null;for(let o in s){let c=s[o].component,d=a[o];if(d&&d.isWithinClipping(e,n)){let m=d.computeLeft(),u=d.computeTop(),p=e-m,h=n-u,{origRect:g}=d,x=g.right-g.left,v=g.bottom-g.top;if(p>=0&&p<x&&h>=0&&h<v){let y=c.queryHit(p,h,x,v);y&&Wg(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||d.el.contains(d.el.getRootNode().elementFromPoint(p+m-window.scrollX,h+u-window.scrollY)))&&(!r||y.layer>r.layer)&&(y.componentId=o,y.context=c.context,y.rect.left+=m,y.rect.right+=m,y.rect.top+=u,y.rect.bottom+=u,r=y)}}}return r}}function Qg(t,e){return!t&&!e?!0:!!t!=!!e?!1:nK(t.dateSpan,e.dateSpan)}function DR(t,e){let n={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(n,s(t,e));return Object.assign(n,JQ(t,e.dateEnv)),n}function JQ(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class eZ extends nd{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:a}=this,r=s.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(r))},this.handleDragEnd=s=>{let{component:a}=this,{pointer:r}=this.dragging;if(!r.wasTouchScroll){let{initialHit:o,finalHit:c}=this.hitDragging;if(o&&c&&Qg(o,c)){let{context:d}=a,m=Object.assign(Object.assign({},DR(o.dateSpan,d)),{dayEl:o.dayEl,jsEvent:s.origEvent,view:d.viewApi||d.calendarApi.view});d.emitter.trigger("dateClick",m)}}},this.dragging=new au(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Yg(this.dragging,tk(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class tZ extends nd{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:c,dragging:d}=this,{options:m}=c.context,u=m.selectable&&c.isValidDateDownEl(o.origEvent.target);d.setIgnoreMove(!u),d.delay=o.isTouch?nZ(c):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,c)=>{let{context:d}=this.component,m=null,u=!1;if(o){let p=this.hitDragging.initialHit;o.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,o)||(m=iZ(p,o,d.pluginHooks.dateSelectionTransformers)),(!m||!FK(m,o.dateProfile,d))&&(u=!0,m=null)}m?d.dispatch({type:"SELECT_DATES",selection:m}):c||d.dispatch({type:"UNSELECT_DATES"}),u?$w():Bw(),c||(this.dragSelection=m)},this.handlePointerUp=o=>{this.dragSelection&&(ED(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:s}=n.context,a=this.dragging=new au(e.el);a.touchScrollAllowed=!1,a.minDistance=s.selectMinDistance||0,a.autoScroller.isEnabled=s.dragScroll;let r=this.hitDragging=new Yg(this.dragging,tk(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function nZ(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function iZ(t,e,n){let s=t.dateSpan,a=e.dateSpan,r=[s.range.start,s.range.end,a.range.start,a.range.end];r.sort(hU);let o={};for(let c of n){let d=c(t,e);if(d===!1)return null;d&&Object.assign(o,d)}return o.range={start:r[0],end:r[3]},o.allDay=s.allDay,o}class ru extends nd{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let c=o.origEvent.target,{component:d,dragging:m}=this,{mirror:u}=m,{options:p}=d.context,h=d.context;this.subjectEl=o.subjectEl;let g=this.subjectSeg=Fc(o.subjectEl),v=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=Zw(h.getCurrentData().eventStore,v),m.minDistance=o.isTouch?0:p.eventDragMinDistance,m.delay=o.isTouch&&v!==d.props.eventSelection?aZ(d):null,p.fixedMirrorParent?u.parentNode=p.fixedMirrorParent:u.parentNode=Di(c,".fc"),u.revertDuration=p.dragRevertDuration;let y=d.isValidSegDownEl(c)&&!Di(c,".fc-event-resizer");m.setIgnoreMove(!y),this.isDragging=y&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let c=this.component.context,d=this.eventRange,m=d.instance.instanceId;o.isTouch?m!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(o),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Bn(c,d.def,d.instance),jsEvent:o.origEvent,view:c.viewApi}))},this.handleHitUpdate=(o,c)=>{if(!this.isDragging)return;let d=this.relevantEvents,m=this.hitDragging.initialHit,u=this.component.context,p=null,h=null,g=null,x=!1,v={affectedEvents:d,mutatedEvents:ys(),isEvent:!0};if(o){p=o.context;let y=p.options;u===p||y.editable&&y.droppable?(h=sZ(m,o,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(g=ek(d,p.getCurrentData().eventUiBases,h,p),v.mutatedEvents=g,YD(v,o.dateProfile,p)||(x=!0,h=null,g=null,v.mutatedEvents=ys()))):p=null}this.displayDrag(p,v),x?$w():Bw(),c||(u===p&&Qg(m,o)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=h,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let c=this.component.context,d=c.viewApi,{receivingContext:m,validMutation:u}=this,p=this.eventRange.def,h=this.eventRange.instance,g=new Bn(c,p,h),x=this.relevantEvents,v=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:o.origEvent,view:d}),u){if(m===c){let b=new Bn(c,v.defs[p.defId],h?v.instances[h.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:v});let j={oldEvent:g,event:b,relatedEvents:Gl(v,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:x})}},k={};for(let S of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(k,S(u,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},j),k),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:d})),c.emitter.trigger("eventChange",j)}else if(m){let b={event:g,relatedEvents:Gl(x,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:x})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:o.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:x}),c.emitter.trigger("eventRemove",b);let j=v.defs[p.defId],k=v.instances[h.instanceId],S=new Bn(m,j,k);m.dispatch({type:"MERGE_EVENTS",eventStore:v});let N={event:S,relatedEvents:Gl(v,m,k),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:v})}};m.emitter.trigger("eventAdd",N),o.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},DR(y.dateSpan,m)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:y.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},N),{draggedEl:o.subjectEl,view:y.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:s}=n.context,a=this.dragging=new au(e.el);a.pointer.selector=ru.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=s.dragScroll;let r=this.hitDragging=new Yg(this.dragging,hy);r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let s=this.component.context,a=this.receivingContext;a&&a!==e&&(a===s?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:ys(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}ru.SELECTOR=".fc-event-draggable, .fc-event-resizable";function sZ(t,e,n,s){let a=t.dateSpan,r=e.dateSpan,o=a.range.start,c=r.range.start,d={};a.allDay!==r.allDay&&(d.allDay=r.allDay,d.hasEnd=e.context.options.allDayMaintainDuration,r.allDay?o=Pn(n):o=n);let m=ac(o,c,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);m.milliseconds&&(d.allDay=!1);let u={datesDelta:m,standardProps:d};for(let p of s)p(u,t,e);return u}function aZ(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class rZ extends nd{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=r=>{let{component:o}=this,c=this.querySegEl(r),d=Fc(c),m=this.eventRange=d.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(r.origEvent.target)||r.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=r=>{let{context:o}=this.component,c=this.eventRange;this.relevantEvents=Zw(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let d=this.querySegEl(r);this.draggingSegEl=d,this.draggingSeg=Fc(d),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:d,event:new Bn(o,c.def,c.instance),jsEvent:r.origEvent,view:o.viewApi})},this.handleHitUpdate=(r,o,c)=>{let{context:d}=this.component,m=this.relevantEvents,u=this.hitDragging.initialHit,p=this.eventRange.instance,h=null,g=null,x=!1,v={affectedEvents:m,mutatedEvents:ys(),isEvent:!0};r&&(r.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,r)||(h=lZ(u,r,c.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),h&&(g=ek(m,d.getCurrentData().eventUiBases,h,d),v.mutatedEvents=g,YD(v,r.dateProfile,d)||(x=!0,h=null,g=null,v.mutatedEvents=null)),g?d.dispatch({type:"SET_EVENT_RESIZE",state:v}):d.dispatch({type:"UNSET_EVENT_RESIZE"}),x?$w():Bw(),o||(h&&Qg(u,r)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=g)},this.handleDragEnd=r=>{let{context:o}=this.component,c=this.eventRange.def,d=this.eventRange.instance,m=new Bn(o,c,d),u=this.relevantEvents,p=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:r.origEvent,view:o.viewApi}),this.validMutation){let h=new Bn(o,p.defs[c.defId],d?p.instances[d.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:p});let g={oldEvent:m,event:h,relatedEvents:Gl(p,o,d),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Qt(0),endDelta:this.validMutation.endDelta||Qt(0),jsEvent:r.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",g)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,s=this.dragging=new au(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.context.options.dragScroll;let a=this.hitDragging=new Yg(this.dragging,tk(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Di(e.subjectEl,".fc-event")}}function lZ(t,e,n,s){let a=t.context.dateEnv,r=t.dateSpan.range.start,o=e.dateSpan.range.start,c=ac(r,o,a,t.largeUnit);if(n){if(a.add(s.start,c)<s.end)return{startDelta:c}}else if(a.add(s.end,c)>s.start)return{endDelta:c};return null}class oZ{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let a=this.context.options.unselectCancel,r=aD(s.origEvent);this.matchesCancel=!!Di(r,a),this.matchesEvent=!!Di(r,ru.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:a}=this,{documentPointer:r}=this,o=a.getCurrentData();if(!r.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let c=a.options.unselectAuto;c&&(!c||!this.matchesCancel)&&a.calendarApi.unselect(s)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new _R(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const cZ={fixedMirrorParent:Ie},dZ={dateClick:Ie,eventDragStart:Ie,eventDragStop:Ie,eventDrop:Ie,eventResizeStart:Ie,eventResizeStop:Ie,eventResize:Ie,drop:Ie,eventReceive:Ie,eventLeave:Ie};rk.dataAttrPrefix="";var mZ=Tr({name:"@fullcalendar/interaction",componentInteractions:[eZ,tZ,ru,rZ],calendarInteractions:[oZ],elementDraggingImpl:au,optionRefiners:cZ,listenerRefiners:dZ});const uZ=()=>i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((t,e)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(C,{width:"60px",height:"1rem"})},`day-${e}`))}),Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((n,s)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(C,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(C,{width:"100%",height:"6px",className:"rounded"}),i.jsx(C,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${e}-${s}`))},`week-${e}`))]})]})})}),hZ=()=>(window.kiviCareData?.locale||window.wp?.i18n?.getLocaleData?.()?.[""]?.lang||"en").replace("_","-").toLowerCase(),pZ=t=>{switch(String(t)){case"0":return"#f5365c";case"1":return"#23a359";case"2":return"#efc51c";case"3":return"#78c0fb";case"4":return"#4874dc";default:return"#007bff"}},gZ=({events:t=[],onEventClick:e,onViewChange:n,loading:s=!1,eventContent:a})=>{const[r,o]=f.useState("dayGridMonth"),[c,d]=f.useState(!1);f.useEffect(()=>{!s&&!c&&d(!0)},[s,c]);const m=f.useCallback(h=>{e&&typeof e=="function"&&e(h)},[e]),u=f.useCallback(h=>{const g=h.view?.type||"dayGridMonth";o(g),n&&typeof n=="function"&&n(h)},[n]),p=He.useMemo(()=>t.map(h=>{const g=h.color||pZ(h.status);return{id:parseInt(h.id,10),title:h.title||`${h.doctorName} - ${h.patientName||l("Patient","kivicare-clinic-management-system")}`,start:h.start||h.appointmentStartDateWF,end:h.end||h.appointmentEndDateWF,backgroundColor:g,borderColor:g,textColor:"#ffffff",allDay:!1,extendedProps:{...h}}}),[t]);return s&&!c?i.jsx(uZ,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"calendar-container",style:{position:"relative"},children:i.jsx(pR,{plugins:[sQ,zQ,mZ],initialView:r,locale:hZ(),headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:l("Today","kivicare-clinic-management-system"),month:l("Month","kivicare-clinic-management-system"),week:l("Week","kivicare-clinic-management-system"),day:l("Day","kivicare-clinic-management-system")},events:p,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!0},dayMaxEvents:3,navLinks:!0,selectable:!0,editable:!1,eventClick:m,datesSet:u,eventContent:a,height:"auto",contentHeight:"auto",windowResize:()=>{}})})})})},gk={getSystemNotices:()=>pe({endpoint:"system/notices",method:"GET"}),sendTestEmail:(t={})=>pe({endpoint:"system/notices/test-email",method:"POST",data:t}),runMigrations:()=>pe({endpoint:"system/notices/run-migrations",method:"POST"})},fZ=(t={})=>ft({queryKey:["system","notices"],queryFn:()=>gk.getSystemNotices(),staleTime:300*1e3,...t}),vZ=()=>Le({mutationFn:t=>gk.sendTestEmail(t)}),xZ=()=>Le({mutationFn:()=>gk.runMigrations()}),bt=({title:t,text:e,icon:n="ph-warning",iconColor:s="text-warning",bgIconColor:a="bg-warning",confirmButtonText:r=l("Yes","kivicare-clinic-management-system"),cancelButtonText:o=l("No","kivicare-clinic-management-system"),confirmButtonClass:c="btn-danger",cancelButtonClass:d="btn-light",...m})=>Et.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle ${a} bg-opacity-25 avatar-70"
            >
              <i class="ph ${n} ${s} fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!0,focusConfirm:!1,reverseButtons:!0,confirmButtonText:r,cancelButtonText:o,customClass:{popup:"rounded-4 p-4",confirmButton:`btn ${c} px-4`,cancelButton:`btn ${d} px-4`,actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...m}),yt=({title:t=l("Loading...","kivicare-clinic-management-system"),text:e=l("Please wait...","kivicare-clinic-management-system"),...n}={})=>Et.fire({allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,background:"transparent",customClass:{popup:"border-0 shadow-none"},html:`
            <div class="bg-white rounded-4 shadow-lg px-5 py-5 text-center">
                <!-- Spinner -->
                <div class="mb-4 d-flex justify-content-center">
                    <div class="spinner-grow text-primary me-1"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.1s"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.2s"></div>
                </div>
                <!-- Title -->
                <h4 class="fw-semibold mb-2">
                    ${t||l("Deleting...","kivicare-clinic-management-system")}
                </h4>

                <!-- Description -->
                <p class="text-muted mb-1">
                    ${e||l("Please wait.","kivicare-clinic-management-system")}
                </p>

                <p class="text-muted small mb-0">
                    ${l("This wont take long.","kivicare-clinic-management-system")}
                </p>
            </div>
          `,...n}),St=({title:t=l("Success","kivicare-clinic-management-system"),text:e,confirmButtonText:n=l("OK","kivicare-clinic-management-system"),...s})=>Et.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-25 avatar-70"
            >
              <i class="ph ph-check text-success fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),rt=({title:t=l("Error","kivicare-clinic-management-system"),text:e,confirmButtonText:n=l("OK","kivicare-clinic-management-system"),...s})=>Et.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-danger bg-opacity-25 avatar-70"
            >
              <i class="ph ph-x text-danger fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-danger px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),Bi=()=>{Et.close()},yZ=()=>{const[t,e]=f.useState([]),{data:n,isLoading:s,refetch:a}=fZ(),{mutate:r,isLoading:o}=vZ(),{mutate:c,isLoading:d}=xZ();if(f.useEffect(()=>{n?.data&&e(n.data)},[n]),t.length===0||s)return null;const m=async()=>{const p=window.kiviCareData?.admin_email||"",h=await bt({html:`
            <div class="pt-3 pb-4 text-start">
                <h4 class="fs-5 mb-0">
                    Add New Bill
                </h4>
            </div>
                <form id="test-email-form">
                    <div class="mb-3 text-start">
                        <label for="swal-email" class="form-label">
                            ${l("Email Address","kivicare-clinic-management-system")}
                        </label>
                        <input 
                            type="email" 
                            class="form-control" 
                            id="swal-email" 
                            value="${p}"
                            placeholder="${l("Enter email address","kivicare-clinic-management-system")}"
                            required
                        />
                        <div class="form-text text-start mt-2">
                            ${l("Test email will be sent to this address","kivicare-clinic-management-system")}
                        </div>
                    </div>
                </form>
            `,showCancelButton:!0,confirmButtonText:l("Send Email","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",focusConfirm:!1,allowOutsideClick:!1,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",cancelButton:"btn btn-secondary px-4",actions:"justify-content-end gap-2 mt-4 mx-0 px-3"},reverseButtons:!0,didOpen:()=>{const g=document.getElementById("swal-email");g&&g.focus()},preConfirm:()=>{const g=document.getElementById("swal-email").value;return g?{email:g}:(rt({text:l("Please enter an email address","kivicare-clinic-management-system")}),!1)}});if(h.isConfirmed&&h.value){const{email:g}=h.value;yt({title:l("Sending Email...","kivicare-clinic-management-system"),text:l("Please wait while we send the test email.","kivicare-clinic-management-system"),didOpen:()=>{r({email:g},{onSuccess:x=>{if(x.status===500){rt({title:l("Email Failed","kivicare-clinic-management-system"),text:x.data?.message||x.message||l("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")});return}St({title:l("Email Sent!","kivicare-clinic-management-system"),text:l("Test email has been sent successfully. Please check your inbox.","kivicare-clinic-management-system")}),e(v=>v.filter(y=>y.type!=="smtp"))},onError:x=>{console.error("Email sending error:",x),rt({title:l("Email Failed","kivicare-clinic-management-system"),text:x.response?.data?.message||x.message||l("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")})}})}})}},u=async p=>{const h=p.details?.pending_count||0,g=p.details?.plugin_count||1,x=p.details?.migrations_by_plugin||{},v=p.details?.migrations||[];let y="";Object.keys(x).length>1?y=Object.entries(x).map(([j,k])=>`
                <div class="mb-2">
                    <strong class="text-primary">${j}:</strong>
                    <div class="ms-3">
                        ${k.map(S=>`
                            <div class="small text-muted py-1"> ${S}</div>
                        `).join("")}
                    </div>
                </div>
            `).join(""):y=v.map(j=>`
                <div class="small text-muted py-1"> ${j}</div>
            `).join(""),(await bt({title:l("Run Database Migrations","kivicare-clinic-management-system"),html:`
                <div class="text-start">
                    <div class="mb-4 text-center">
                        <span class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-25 avatar-70">
                            <i class="ph ph-database fs-1"></i>
                        </span>
                    </div>
                    
                    <p class="mb-3">
                        ${g>1?Ti(l("This will run database migrations from %1$d plugins:","kivicare-clinic-management-system"),g):l("This will run the following database migrations:","kivicare-clinic-management-system")}
                    </p>
                    <div class="mb-3">
                        <strong>
                            ${Ti(l("Total Pending Migrations: %1$d","kivicare-clinic-management-system"),h)}
                            ${g>1?Ti(l(" (from %1$d plugins)","kivicare-clinic-management-system"),g):""}
                        </strong>
                    </div>
                    ${v.length>0?`
                        <div class="mb-3">
                            <div class="border rounded p-3 bg-body" style="max-height: 300px; overflow-y: auto;">
                                ${y}
                            </div>
                        </div>
                    `:""}
                    <div class="alert alert-warning bg-warning-subtle small">
                        <i class="ph ph-warning-circle me-2"></i>
                        ${l("It is recommended to backup your database before running migrations.","kivicare-clinic-management-system")}
                    </div>
                    ${g>1?`
                        <div class="alert alert-info bg-info-subtle small">
                            <i class="ph ph-info me-2"></i>
                            ${l("Migrations from all plugins will be executed in the correct order.","kivicare-clinic-management-system")}
                        </div>
                    `:""}
                </div>
            `,icon:"ph-question",iconColor:"text-primary",bgIconColor:"bg-primary",showCancelButton:!0,confirmButtonText:l("Run Migrations","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",allowOutsideClick:!1,focusCancel:!0,width:"600px"})).isConfirmed&&yt({title:l("Running Migrations...","kivicare-clinic-management-system"),text:l("Please wait while we update your database. This may take a few moments.","kivicare-clinic-management-system"),didOpen:()=>{c({},{onSuccess:j=>{const k=j.data?.migrations_run||0;St({title:l("Migrations Completed!","kivicare-clinic-management-system"),text:k>0?Ti(l("%1$d migrations have been executed successfully.","kivicare-clinic-management-system"),k):l("No migrations were needed.","kivicare-clinic-management-system")}),e(S=>S.filter(N=>N.type!=="migration")),setTimeout(()=>{a()},1e3)},onError:j=>{console.error("Migration error:",j),rt({title:l("Migration Failed","kivicare-clinic-management-system"),text:j.response?.data?.message||j.message||l("Failed to run migrations. Please try again or contact support.","kivicare-clinic-management-system")})}})}})};return i.jsx(i.Fragment,{children:t.map((p,h)=>{if(p.type==="version")return i.jsx("div",{className:"desktop-warning px-5 my-1 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("h6",{className:"setting-title mb-0",children:p.message})})},"version");if(p.type==="smtp")return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("h6",{className:"setting-title mb-0",children:p.message}),i.jsx("a",{href:"https://kivicare.io/docs/email-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:l("Learn more about SMTP configuration","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:m,disabled:o,children:l("Send Test Email","kivicare-clinic-management-system")})})]},"smtp");if(p.type==="migration"){const g=p.details?.pending_count||0,x=p.details?.plugin_count||1;return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-database text-danger fs-5 me-1"}),i.jsxs("div",{children:[i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message}),g>0&&i.jsx("small",{className:"text-muted",children:x>1?Ti(l("%1$d pending migrations from %2$d plugins","kivicare-clinic-management-system"),g,x):Ti(l("%1$d pending migrations found","kivicare-clinic-management-system"),g)})]}),i.jsx("a",{href:"https://kivicare.io/docs/database-migrations/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:l("Learn more about database migrations","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>u(p),disabled:d,children:[i.jsx("i",{className:"ph ph-play me-1"}),d?l("Running...","kivicare-clinic-management-system"):l("Run Migrations","kivicare-clinic-management-system")]})})]},"migration")}return p.type==="error"?i.jsx("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-warning-circle text-danger fs-5 me-1"}),i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message})]})},"error"):null})})},Ql=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${s}`},fk=(t,e)=>e?Array.isArray(e)?t.filter(n=>e.includes(n.value)||e.includes(String(n.value))):t.find(n=>n.value===e||n.value===String(e))||null:null,RR=t=>{if(!t)return"";const e=document.createElement("div");e.innerHTML=t;const n=["script","style","iframe","object","embed","form","input","button","link","meta"],s=["onload","onerror","onclick","onmouseover","onmouseout","onkeydown","onkeyup","onkeypress","javascript:"];return n.forEach(r=>{e.querySelectorAll(r).forEach(c=>c.remove())}),e.querySelectorAll("*").forEach(r=>{Array.from(r.attributes).forEach(o=>{s.some(c=>o.name.toLowerCase().includes(c)||o.value.toLowerCase().includes("javascript:"))&&r.removeAttribute(o.name)})}),e.innerHTML},PR=(t,e,n)=>{function s(o){return o.toString(16)}function a(o){return parseInt(o,16)}n=typeof n<"u"?n:50;let r="#";for(let o=0;o<=5;o+=2){const c=a(t.substr(o,2)),d=a(e.substr(o,2));let m=s(Math.floor(d+(c-d)*(n/100)));for(;m.length<2;)m="0"+m;r+=m}return r},bZ=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return PR("FFFFFF",n,e)},uh=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return PR("000000",n,e)},wZ=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null},iC=t=>{let e=document.getElementById("kivicare-dashboard-colors-style"),n=`[data-bs-theme="light"],:root {
`,s={};return Object.entries(t).forEach(([r,o])=>{const c=`--bs-${r}`;s[c]=o,s[`${c}-rgb`]=wZ(o),s[`${c}-bg-subtle`]=bZ(o,80),s[`${c}-border-subtle`]=`var(${c}-bg-subtle)`,s["--bs-link-color-rgb"]=`var(${c}-rgb)`,s[`${c}-hover-bg`]=uh(o,20),s[`${c}-hover-border`]=uh(o,30),s[`${c}-active-bg`]=uh(o,20),s[`${c}-active-border`]=uh(o,30)}),Object.entries(s).forEach(([r,o])=>{n+=`
                ${r}: ${o};`}),n+=`
}`,e||(e=document.createElement("style"),e.setAttribute("id","kivicare-dashboard-colors-style"),document.head.appendChild(e)),e.innerHTML=n,document.querySelectorAll("style.custom-color").forEach(r=>r.remove()),s},ai=()=>({weekdays:{shorthand:[l("Sun","kivicare-clinic-management-system"),l("Mon","kivicare-clinic-management-system"),l("Tue","kivicare-clinic-management-system"),l("Wed","kivicare-clinic-management-system"),l("Thu","kivicare-clinic-management-system"),l("Fri","kivicare-clinic-management-system"),l("Sat","kivicare-clinic-management-system")],longhand:[l("Sunday","kivicare-clinic-management-system"),l("Monday","kivicare-clinic-management-system"),l("Tuesday","kivicare-clinic-management-system"),l("Wednesday","kivicare-clinic-management-system"),l("Thursday","kivicare-clinic-management-system"),l("Friday","kivicare-clinic-management-system"),l("Saturday","kivicare-clinic-management-system")]},months:{shorthand:[l("Jan","kivicare-clinic-management-system"),l("Feb","kivicare-clinic-management-system"),l("Mar","kivicare-clinic-management-system"),l("Apr","kivicare-clinic-management-system"),l("May","kivicare-clinic-management-system"),l("Jun","kivicare-clinic-management-system"),l("Jul","kivicare-clinic-management-system"),l("Aug","kivicare-clinic-management-system"),l("Sep","kivicare-clinic-management-system"),l("Oct","kivicare-clinic-management-system"),l("Nov","kivicare-clinic-management-system"),l("Dec","kivicare-clinic-management-system")],longhand:[l("January","kivicare-clinic-management-system"),l("February","kivicare-clinic-management-system"),l("March","kivicare-clinic-management-system"),l("April","kivicare-clinic-management-system"),l("May","kivicare-clinic-management-system"),l("June","kivicare-clinic-management-system"),l("July","kivicare-clinic-management-system"),l("August","kivicare-clinic-management-system"),l("September","kivicare-clinic-management-system"),l("October","kivicare-clinic-management-system"),l("November","kivicare-clinic-management-system"),l("December","kivicare-clinic-management-system")]}}),kZ=t=>{let e=document.documentElement.lang||"en-US";try{return new Intl.NumberFormat(e).format(t)}catch{return new Intl.NumberFormat("en-US").format(t)}},bi=t=>{if(!t)return"Y-m-d";const e={d:"d",D:"D",j:"j",l:"l",N:"N",S:"S",w:"w",z:"z",W:"W",F:"F",m:"m",M:"M",n:"n",t:"K",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"h",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",v:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"U"};let n="",s=!1;for(let a=0;a<t.length;a++){const r=t[a];s?(n+=r,s=!1):r==="\\"?(s=!0,n+="\\"):n+=e[r]!==void 0?e[r]:r}return n},ii=t=>{if(!t)return null;const[e,n,s]=t.split("-").map(Number);return new Date(e,n-1,s)},Yo=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${a}`},sC=t=>{if(!t)return"";const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),s=e.toLocaleString("default",{month:"short"}),a=e.getFullYear();return`${n} ${s} ${a}`},aC=()=>{const t=ze(),e=f.useRef(null),[n,s]=f.useState([]),[a,r]=f.useState(null),[o,c]=f.useState(!1),[d,m]=f.useState({start:new Date(new Date().setDate(1)),end:new Date(new Date().getDate()+30)}),[u,p]=f.useState(!1),[h,g]=f.useState(null),{hasCapability:x,userRole:v,user:y,module_config:b}=ht(),j=mI(v||"patient"),k=uI(),S=hI(),N=pI(),_=gI(),w=ls()||Kn()||zi(),T=ls(),A=zi(),M=Kn(),E=f.useMemo(()=>!a||a.length!==2?{}:{start_date:Yo(a[0]),end_date:Yo(a[1])},[a]),{data:P,isLoading:D}=Z6({limit:3,...E},{enabled:k}),O=He.useMemo(()=>P?.data?P.data.map(ee=>({id:ee.id,name:ee.name||ee.doctor_name,clinic:ee.clinic||"",appointments:ee.appointments||`${ee.appointment_count}+`,image:ee.image||ee.doctor_image_url||null,speciality:ee.speciality||""})):[],[P]),{isAddonActive:F,defaultClinicId:q}=ht(),U=F("kiviPro"),K=f.useMemo(()=>[{title:l("Total Appointments","kivicare-clinic-management-system"),component:"appointment",iconKey:"appointment",color:"primary",key:"total_appointments",roles:mV(),capability:"dashboard_total_appointment",linkTo:"/appointments"},{title:l("Total Patients","kivicare-clinic-management-system"),component:"patient",iconKey:"patient",color:"success",key:"total_patients",roles:uV(),capability:"dashboard_total_patient",linkTo:"/patient"},...U?[{title:l("Total Clinics","kivicare-clinic-management-system"),component:"clinic",iconKey:"clinic",color:"info",key:"total_clinics",roles:hV(),capability:"dashboard_total_clinic",linkTo:"/clinic"}]:[],{title:l("Total Doctors","kivicare-clinic-management-system"),component:"doctor",iconKey:"doctor",color:"warning",key:"total_doctors",roles:pV(),capability:"dashboard_total_doctor",linkTo:"/doctor"},{title:l("Active Services","kivicare-clinic-management-system"),component:"service",iconKey:"service",color:"secondary",key:"active_services",roles:gV(),capability:"dashboard_total_service",linkTo:"/service"},...(b.billing??"1")==="1"?[{title:l("Total Revenue","kivicare-clinic-management-system"),component:"revenue",iconKey:"revenue",color:"success",key:"total_revenue",roles:fV(),capability:"dashboard_total_revenue"}]:[],{title:l("Today's Appointments","kivicare-clinic-management-system"),component:"today-appointment",iconKey:"appointment",color:"primary",key:"today_appointments",roles:vV(),capability:"dashboard_total_today_appointment",linkTo:"/appointments"}],[]),ne=f.useMemo(()=>fI(K,j),[K,j]),Y=f.useMemo(()=>{const ee=ne.length;if(ee===0)return"";let ae="insights-container dashboard-insights-container stash-cards";return ae+=` grid-count-${ee}`,ae},[ne.length]),{data:fe,isLoading:le}=Y6({params:E,queryKey:["upcomingAppointments",E?.start_date,E?.end_date],enabled:_}),W=fe?.data||[],z=ee=>i.jsx(gt,{to:`/appointments/view/${ee.id}`,className:"kc-link-wrapper",children:i.jsxs("div",{className:"bg-body p-3 rounded-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-2",children:[i.jsx(Zt,{profileUrl:ee.patient_image_url||null,name:ee.patientName,linkTo:`/patient/edit/${ee.patientId}`,variant:"primary",size:"md",className:"flex-grow-1",fallbackText:"PT"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 text-nowrap",children:[i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:ee.appointmentStartDate}),i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:ee.appointmentStartTime})]})]}),i.jsx("div",{className:"mb-2",children:i.jsx("span",{className:"font-size-14",children:ee.clinicName})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("div",{className:"font-siz-14",children:[ee.serviceListName," ",l("By ","kivicare-clinic-management-system"),i.jsx("span",{className:"font-size-14 text-heading fw-semibold",children:i.jsx(gt,{to:`/doctor/edit/${ee.doctorId}`,className:"text-heading fw-semibold",children:ee.doctorName})})]}),ee.video_consultation&&i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-video text-success align-middle"}),i.jsx("span",{className:"font-size-12 text-heading fw-semibold",children:l("Telemed","kivicare-clinic-management-system")})]})]})]})}),ie=ee=>i.jsx(gt,{to:`/doctor/edit/${ee.id}`,className:"kc-link-wrapper",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between flex-wrap",children:[i.jsx(Zt,{profileUrl:ee.image,name:ee.name,clinicName:ee.clinic,variant:"primary",size:"md",className:"flex-grow-1"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-size-14 fw-bold text-secondary",children:ee.appointments}),i.jsxs("span",{className:"font-size-14 fw-medium",children:[" ",l("Appointments","kivicare-clinic-management-system")]})]})]})})}),{data:re,isLoading:de}=J6({start_date:d.start.toISOString().split("T")[0],end_date:d.end.toISOString().split("T")[0],doctor_id:j==="kivicare_doctor"?y?.id:void 0,patient_id:j==="kivicare_patient"?y?.id:void 0,clinic_id:y?.clinic_id||void 0},{enabled:w}),L=re?.data?.appointments||[],Q=f.useCallback(ee=>{const ae=ee.event.extendedProps;g(ae),p(!0)},[]),V=ee=>{const ae=!!ee.event.extendedProps.zoom_data?.startUrl;return i.jsxs("div",{className:"d-flex align-items-center gap-1 overflow-hidden",children:[ae&&i.jsx("i",{className:"ph ph-video"}),i.jsx("span",{className:"text-truncate",children:ee.event.title})]})},Z=f.useCallback(ee=>{const ae=ee.view.activeStart,I=ee.view.activeEnd;m({start:ae,end:I})},[]),X=ee=>{switch(String(ee)){case"0":return l("Cancelled","kivicare-clinic-management-system");case"1":return l("Booked","kivicare-clinic-management-system");case"2":return l("Pending","kivicare-clinic-management-system");case"3":return l("Completed","kivicare-clinic-management-system");case"4":return l("Check-In","kivicare-clinic-management-system");default:return l("Unknown","kivicare-clinic-management-system")}},R=ee=>{switch(String(ee)){case"0":return"bg-danger";case"1":return"bg-success";case"2":return"bg-warning";case"3":return"bg-success";case"4":return"bg-primary";default:return"bg-secondary"}},G=f.useMemo(()=>({mode:"range",dateFormat:"d M Y",clickOpens:!0,allowInput:!0,disableMobile:!0,locale:ai()}),[]);return i.jsxs(i.Fragment,{children:[vr()&&i.jsx(yZ,{}),i.jsx(ki,{}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("h5",{className:"mb-0",children:l("Insights","kivicare-clinic-management-system")}),a&&i.jsx("div",{className:"d-flex align-items-center",children:i.jsxs("span",{className:"badge bg-body text-secondary",children:[sC(a[0])," -"," ",sC(a[1]),i.jsx("button",{className:"btn btn-link btn-sm p-0 ms-2 text-danger",onClick:()=>{r(null),s([]),e.current&&e.current.flatpickr&&e.current.flatpickr.clear()},"aria-label":l("Clear filter","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})})]}),i.jsx("form",{className:"d-flex align-items-center gap-2 flex-end flex-wrap",onSubmit:ee=>{ee.preventDefault(),n&&n.length===2&&(c(!0),r(n),console.log("Invalidating patient age distribution query with new date range",n),t.invalidateQueries({queryKey:["dashboard","bookingStatus"]}),setTimeout(()=>c(!1),500))},children:!T&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"form-group my-0 flex-grow-1",children:i.jsx(si,{ref:e,options:{...G,dateFormat:bi(window.kc_frontend.date_format)},className:"form-control dashboard-date-range",onChange:ee=>s(ee),placeholder:l("24 May 2023 to 25 June 2023","kivicare-clinic-management-system")})}),i.jsxs("button",{type:"submit",className:"btn btn-secondary",disabled:o,children:[o?i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):null,l("Apply Filter","kivicare-clinic-management-system")]})]})})]}),ne.length>0&&i.jsx("div",{className:`${Y}`,children:ne.map((ee,ae)=>i.jsx(h$,{component:ee.component,title:ee.title,iconKey:ee.iconKey,color:ee.color||"primary",useHook:!0,dateFilter:E,isFiltering:o,isCurrency:ee.component==="revenue"||ee.key==="total_revenue",capability:ee.capability,linkTo:ee.linkTo,iconPosition:A||M?"right":"top",onDataLoaded:(I,H)=>{}},`stats-card-${ee.key}`))}),j!=="kivicare_patient"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-0 gx-4",children:[_&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:l("Upcoming Appointments","kivicare-clinic-management-system"),items:W,renderItem:z,viewAllLink:"appointments",loading:le||o,emptyMessage:l("No upcoming appointments","kivicare-clinic-management-system"),dateFilter:a?`${Yo(a[0])} to ${Yo(a[1])}`:null})}),k&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:l("Top Doctors","kivicare-clinic-management-system"),items:O,renderItem:ie,viewAllLink:"doctors",loading:D||o,emptyMessage:l("No doctor data available","kivicare-clinic-management-system"),dateFilter:a?`${Yo(a[0])} to ${Yo(a[1])}`:null})}),S&&i.jsx("div",{className:"col-xl-4 col-lg-12",children:i.jsx(cq,{clinicId:y?.clinic_id,dateRange:a})})]}),N&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx("h6",{className:"mb-0",children:l("Payment History","kivicare-clinic-management-system")}),i.jsx(gt,{to:"/billings",className:"btn btn-link",children:l("View All","kivicare-clinic-management-system")})]}),i.jsx(_V,{limit:3})]})})]}),w&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-4",children:i.jsx(gZ,{events:L,loading:de,onEventClick:Q,onViewChange:Z,eventContent:V})}),i.jsxs(st,{show:u,onHide:()=>p(!1),centered:!0,size:"lg",children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:l("Appointment Details","kivicare-clinic-management-system")})}),i.jsx(st.Body,{children:h?i.jsxs("div",{className:"appointment-details",children:[i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Patient","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.patientName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Doctor","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.doctorName})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Date","kivicare-clinic-management-system")}),i.jsx("p",{children:h.appointmentStartDate})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Time","kivicare-clinic-management-system")}),i.jsx("p",{children:`${h.appointmentStartTime||""} - ${h.appointmentEndTime||""}`})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Clinic","kivicare-clinic-management-system")}),i.jsx("p",{children:h.clinicName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Status","kivicare-clinic-management-system")}),i.jsx("p",{children:i.jsx("span",{className:`badge text-white ${h.color?"":R(h.status)}`,style:h.color?{backgroundColor:h.color,color:"var(--bs-white)"}:{},children:h.status_text||X(h.status)})})]})]}),h.services&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Services","kivicare-clinic-management-system")}),i.jsx("p",{children:h.services})]})}),h.description&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Description","kivicare-clinic-management-system")}),i.jsx("p",{children:h.description})]})})]}):i.jsx("div",{className:"text-center",children:i.jsx("p",{children:l("Loading appointment details...","kivicare-clinic-management-system")})})}),i.jsxs(st.Footer,{className:"gap-3",children:[j!=="kivicare_patient"&&h&&(String(h.status)==="1"||String(h.status)==="2")&&i.jsxs(gt,{to:`/appointments/edit/${h.id}`,className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-pencil-simple me-1"}),l("Edit Appointment","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:l("Close","kivicare-clinic-management-system")})]})]})]})]})},jZ=[We({path:"/dashboard",component:aC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}}),We({path:"/",component:aC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}})],NZ=()=>i.jsx("div",{className:"appointments-container",children:i.jsx(Gi,{})}),vk=()=>i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"80px",height:"1rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("div",{className:"d-flex align-items-center gap-1",children:i.jsx(C,{width:"60px",height:"1rem"})})]}),i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"})]})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx(C,{width:"100px",height:"1.25rem"}),i.jsx(C,{width:"120px",height:"1.5rem"})]})]}),by=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["50px","100px","120px"]}),i.jsx(nt,{width:"80px",height:"32px"})]}),i.jsx(fl,{titleWidth:"180px"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-lg-8",children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(R2,{count:6})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"form-group",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"140px",height:"1rem"}),i.jsx(nt,{width:"120px",height:"32px"})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"80px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"140px"})]})]}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"position-sticky top-0",children:i.jsx(pt,{children:i.jsx(vk,{})})})})]})]}),MR=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["50px","100px","140px"]}),i.jsx(nt,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsx(fl,{titleWidth:"160px",buttonWidth:"140px"}),i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"40px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsx(Zd,{count:4,colClass:"col-xl-3 col-lg-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"140px"})})}),i.jsx(Zd,{count:3,colClass:"col-lg-4",children:t=>i.jsxs(i.Fragment,{children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"mt-2",children:i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx(C,{width:"120px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"custom-form-container bg-body p-3 rounded",children:i.jsx(Zd,{count:4,colClass:"col-md-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"80px"})})})]})]})]}),i.jsx("div",{className:"col-xl-4",children:i.jsx(vk,{})})]})})})}),Wi={getAppointments:(t={})=>pe({endpoint:"appointments",method:"GET",data:t}),getAppointment:t=>pe({endpoint:`appointments/${t}`,method:"GET"}),createAppointment:t=>pe({endpoint:"appointments",method:"POST",data:t}),updateAppointment:(t,e)=>pe({endpoint:`appointments/${t}`,method:"PUT",data:e}),updateAppointmentStatus:(t,e)=>pe({endpoint:`appointments/${t}/status`,method:"PUT",data:{status:e}}),regenerateVideoConferenceLink:t=>pe({endpoint:`appointments/${t}/regenerate-video-conference`,method:"GET"}),deleteAppointment:t=>pe({endpoint:`appointments/${t}`,method:"DELETE"}),getAppointmentDetails:t=>pe({endpoint:`appointments/${t}/view`,method:"GET"}),getAppointmentInvoiceHTML:t=>pe({endpoint:`appointments/${t}/invoice-html`,method:"GET"}),printInvoice:t=>pe({endpoint:`appointments/${t}/print-invoice`,method:"GET",responseType:"blob"}),getAvailableSlots:(t={})=>pe({endpoint:"appointments/slots",method:"GET",data:t}),getAppointmentSummary:(t={})=>pe({endpoint:"appointments/summary",method:"GET",data:t}),onPaymentSuccess:t=>{const{method:e,...n}=t;return pe({endpoint:"appointments/payment-success",method:e||"GET",data:n})},verifyPayment:t=>pe({endpoint:"appointments/payment-verify",method:"POST",data:t}),exportAppointments:(t={})=>pe({endpoint:"appointments/export",method:"GET",data:t}),bulkDeleteAppointments:t=>pe({endpoint:"appointments/bulk/delete",method:"POST",data:{ids:t}})},An={all:["appointments"],lists:()=>[...An.all,"list"],list:t=>[...An.lists(),{filters:t}],details:()=>[...An.all,"detail"],detail:t=>[...An.details(),t],slots:()=>[...An.all,"slots"],availableSlots:t=>[...An.slots(),t],summaries:()=>[...An.all,"summary"],summary:t=>[...An.summaries(),t]},CZ=(t={},e={})=>ft({queryKey:An.list(t),queryFn:()=>Wi.getAppointments(t),...e}),SZ=(t,e={})=>ft({queryKey:An.detail(t),queryFn:()=>Wi.getAppointment(t),enabled:!!t,...e}),_Z=(t,e={})=>{const n=Kn(),s=mi(),a=zi();let r=!1;return t?.date&&(a?r=!0:r=!!t?.doctor_id),ft({queryKey:An.availableSlots(t),queryFn:()=>Wi.getAvailableSlots(t),enabled:r,...e})},EZ=()=>{const t=ze();return Le({mutationFn:e=>Wi.createAppointment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:An.lists()}),n.doctor_id&&t.invalidateQueries({queryKey:An.availableSlots({doctor_id:n.doctor_id})})}})},TZ=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Wi.updateAppointment(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:An.detail(n.id)}),t.invalidateQueries({queryKey:An.lists()}),n.doctor_id&&t.invalidateQueries({queryKey:An.availableSlots({doctor_id:n.doctor_id})})}})},AZ=()=>{const t=ze();return Le({mutationFn:({id:e,status:n})=>Wi.updateAppointmentStatus(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:An.detail(n.id)}),t.invalidateQueries({queryKey:An.lists()})}})},DZ=()=>{const t=ze();return Le({mutationFn:e=>Wi.regenerateVideoConferenceLink(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:An.detail(n.id)}),t.invalidateQueries({queryKey:An.lists()})}})},RZ=()=>{const t=ze();return Le({mutationFn:e=>Wi.deleteAppointment(e),onSuccess:()=>{t.invalidateQueries({queryKey:An.lists()})}})},PZ=(t,e={})=>ft({queryKey:An.detail(t),queryFn:()=>Wi.getAppointmentDetails(t),enabled:!!t,...e}),MZ=(t,e={})=>ft({queryKey:An.summary(t),queryFn:()=>Wi.getAppointmentSummary(t),...e}),IR=()=>Le({mutationFn:t=>Wi.printInvoice(t)}),OR=()=>Le({mutationFn:t=>Wi.onPaymentSuccess(t)}),upe=()=>{const t=ze();return Le({mutationFn:e=>Wi.verifyPayment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:An.lists()}),n.appointment_id&&t.invalidateQueries({queryKey:An.detail(n.appointment_id)})}})},IZ=()=>Le({mutationFn:t=>Wi.exportAppointments(t)}),OZ=()=>{const t=ze();return Le({mutationFn:e=>Wi.bulkDeleteAppointments(e),onSuccess:()=>{t.invalidateQueries({queryKey:An.lists()})}})};function LR(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=LR(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Zl(){for(var t,e,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=LR(t))&&(s&&(s+=" "),s+=e);return s}function LZ(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}LZ(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var lu=t=>typeof t=="number"&&!isNaN(t),co=t=>typeof t=="string",kr=t=>typeof t=="function",FZ=t=>co(t)||lu(t),wy=t=>co(t)||kr(t)?t:null,$Z=(t,e)=>t===!1||lu(t)&&t>0?t:e,ky=t=>f.isValidElement(t)||co(t)||kr(t)||lu(t);function BZ(t,e,n=300){let{scrollHeight:s,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,n)})})}function qZ({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:r,position:o,preventExitTransition:c,done:d,nodeRef:m,isIn:u,playToast:p}){let h=n?`${t}--${o}`:t,g=n?`${e}--${o}`:e,x=f.useRef(0);return f.useLayoutEffect(()=>{let v=m.current,y=h.split(" "),b=j=>{j.target===m.current&&(p(),v.removeEventListener("animationend",b),v.removeEventListener("animationcancel",b),x.current===0&&j.type!=="animationcancel"&&v.classList.remove(...y))};v.classList.add(...y),v.addEventListener("animationend",b),v.addEventListener("animationcancel",b)},[]),f.useEffect(()=>{let v=m.current,y=()=>{v.removeEventListener("animationend",y),s?BZ(v,d,a):d()};u||(c?y():(x.current=1,v.className+=` ${g}`,v.addEventListener("animationend",y)))},[u]),He.createElement(He.Fragment,null,r)}}function rC(t,e){return{content:FR(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function FR(t,e,n=!1){return f.isValidElement(t)&&!co(t.type)?f.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):kr(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function HZ({closeToast:t,theme:e,ariaLabel:n="close"}){return He.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},He.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},He.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function zZ({delay:t,isRunning:e,closeToast:n,type:s="default",hide:a,className:r,controlledProgress:o,progress:c,rtl:d,isIn:m,theme:u}){let p=a||o&&c===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(h.transform=`scaleX(${c})`);let g=Zl("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),x=kr(r)?r({rtl:d,type:s,defaultClassName:g}):Zl(g,r),v={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{m&&n()}};return He.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},He.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),He.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:h,...v}))}var VZ=1,$R=()=>`${VZ++}`;function UZ(t,e,n){let s=1,a=0,r=[],o=[],c=e,d=new Map,m=new Set,u=j=>(m.add(j),()=>m.delete(j)),p=()=>{o=Array.from(d.values()),m.forEach(j=>j())},h=({containerId:j,toastId:k,updateId:S})=>{let N=j?j!==t:t!==1,_=d.has(k)&&S==null;return N||_},g=(j,k)=>{d.forEach(S=>{var N;(k==null||k===S.props.toastId)&&((N=S.toggle)==null||N.call(S,j))})},x=j=>{var k,S;(S=(k=j.props)==null?void 0:k.onClose)==null||S.call(k,j.removalReason),j.isActive=!1},v=j=>{if(j==null)d.forEach(x);else{let k=d.get(j);k&&x(k)}p()},y=()=>{a-=r.length,r=[]},b=j=>{var k,S;let{toastId:N,updateId:_}=j.props,w=_==null;j.staleId&&d.delete(j.staleId),j.isActive=!0,d.set(N,j),p(),n(rC(j,w?"added":"updated")),w&&((S=(k=j.props).onOpen)==null||S.call(k))};return{id:t,props:c,observe:u,toggle:g,removeToast:v,toasts:d,clearQueue:y,buildToast:(j,k)=>{if(h(k))return;let{toastId:S,updateId:N,data:_,staleId:w,delay:T}=k,A=N==null;A&&a++;let M={...c,style:c.toastStyle,key:s++,...Object.fromEntries(Object.entries(k).filter(([P,D])=>D!=null)),toastId:S,updateId:N,data:_,isIn:!1,className:wy(k.className||c.toastClassName),progressClassName:wy(k.progressClassName||c.progressClassName),autoClose:k.isLoading?!1:$Z(k.autoClose,c.autoClose),closeToast(P){d.get(S).removalReason=P,v(S)},deleteToast(){let P=d.get(S);if(P!=null){if(n(rC(P,"removed")),d.delete(S),a--,a<0&&(a=0),r.length>0){b(r.shift());return}p()}}};M.closeButton=c.closeButton,k.closeButton===!1||ky(k.closeButton)?M.closeButton=k.closeButton:k.closeButton===!0&&(M.closeButton=ky(c.closeButton)?c.closeButton:!0);let E={content:j,props:M,staleId:w};c.limit&&c.limit>0&&a>c.limit&&A?r.push(E):lu(T)?setTimeout(()=>{b(E)},T):b(E)},setProps(j){c=j},setToggle:(j,k)=>{let S=d.get(j);S&&(S.toggle=k)},isToastActive:j=>{var k;return(k=d.get(j))==null?void 0:k.isActive},getSnapshot:()=>o}}var Fi=new Map,Em=[],jy=new Set,WZ=t=>jy.forEach(e=>e(t)),BR=()=>Fi.size>0;function KZ(){Em.forEach(t=>HR(t.content,t.options)),Em=[]}var GZ=(t,{containerId:e})=>{var n;return(n=Fi.get(e||1))==null?void 0:n.toasts.get(t)};function qR(t,e){var n;if(e)return!!((n=Fi.get(e))!=null&&n.isToastActive(t));let s=!1;return Fi.forEach(a=>{a.isToastActive(t)&&(s=!0)}),s}function YZ(t){if(!BR()){Em=Em.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||FZ(t))Fi.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Fi.get(t.containerId);e?e.removeToast(t.id):Fi.forEach(n=>{n.removeToast(t.id)})}}var QZ=(t={})=>{Fi.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function HR(t,e){ky(t)&&(BR()||Em.push({content:t,options:e}),Fi.forEach(n=>{n.buildToast(t,e)}))}function ZZ(t){var e;(e=Fi.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function zR(t,e){Fi.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function XZ(t){let e=t.containerId||1;return{subscribe(n){let s=UZ(e,t,WZ);Fi.set(e,s);let a=s.observe(n);return KZ(),()=>{a(),Fi.delete(e)}},setProps(n){var s;(s=Fi.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=Fi.get(e))==null?void 0:n.getSnapshot()}}}function JZ(t){return jy.add(t),()=>{jy.delete(t)}}function eX(t){return t&&(co(t.toastId)||lu(t.toastId))?t.toastId:$R()}function ou(t,e){return HR(t,e),e.toastId}function Zg(t,e){return{...e,type:e&&e.type||t,toastId:eX(e)}}function Xg(t){return(e,n)=>ou(e,Zg(t,n))}function Ee(t,e){return ou(t,Zg("default",e))}Ee.loading=(t,e)=>ou(t,Zg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function tX(t,{pending:e,error:n,success:s},a){let r;e&&(r=co(e)?Ee.loading(e,a):Ee.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,u,p)=>{if(u==null){Ee.dismiss(r);return}let h={type:m,...o,...a,data:p},g=co(u)?{render:u}:u;return r?Ee.update(r,{...h,...g}):Ee(g.render,{...h,...g}),p},d=kr(t)?t():t;return d.then(m=>c("success",s,m)).catch(m=>c("error",n,m)),d}Ee.promise=tX;Ee.success=Xg("success");Ee.info=Xg("info");Ee.error=Xg("error");Ee.warning=Xg("warning");Ee.warn=Ee.warning;Ee.dark=(t,e)=>ou(t,Zg("default",{theme:"dark",...e}));function nX(t){YZ(t)}Ee.dismiss=nX;Ee.clearWaitingQueue=QZ;Ee.isActive=qR;Ee.update=(t,e={})=>{let n=GZ(t,e);if(n){let{props:s,content:a}=n,r={delay:100,...s,...e,toastId:e.toastId||t,updateId:$R()};r.toastId!==t&&(r.staleId=t);let o=r.render||a;delete r.render,ou(o,r)}};Ee.done=t=>{Ee.update(t,{progress:1})};Ee.onChange=JZ;Ee.play=t=>zR(!0,t);Ee.pause=t=>zR(!1,t);function iX(t){var e;let{subscribe:n,getSnapshot:s,setProps:a}=f.useRef(XZ(t)).current;a(t);let r=(e=f.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function o(c){if(!r)return[];let d=new Map;return t.newestOnTop&&r.reverse(),r.forEach(m=>{let{position:u}=m.props;d.has(u)||d.set(u,[]),d.get(u).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:o,isToastActive:qR,count:r?.length}}function sX(t){let[e,n]=f.useState(!1),[s,a]=f.useState(!1),r=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:u,closeOnClick:p}=t;ZZ({id:t.toastId,containerId:t.containerId,fn:n}),f.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{g()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)}function g(){window.removeEventListener("focus",y),window.removeEventListener("blur",b)}function x(w){if(t.draggable===!0||t.draggable===w.pointerType){j();let T=r.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",t.draggableDirection==="x"?(o.start=w.clientX,o.removalDistance=T.offsetWidth*(t.draggablePercent/100)):(o.start=w.clientY,o.removalDistance=T.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function v(w){let{top:T,bottom:A,left:M,right:E}=r.current.getBoundingClientRect();w.nativeEvent.type!=="touchend"&&t.pauseOnHover&&w.clientX>=M&&w.clientX<=E&&w.clientY>=T&&w.clientY<=A?b():y()}function y(){n(!0)}function b(){n(!1)}function j(){o.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",N)}function k(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",N)}function S(w){let T=r.current;if(o.canDrag&&T){o.didMove=!0,e&&b(),t.draggableDirection==="x"?o.delta=w.clientX-o.start:o.delta=w.clientY-o.start,o.start!==w.clientX&&(o.canCloseOnClick=!1);let A=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${A},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function N(){k();let w=r.current;if(o.canDrag&&o.didMove&&w){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){a(!0),t.closeToast(!0),t.collapseAll();return}w.style.transition="transform 0.2s, opacity 0.2s",w.style.removeProperty("transform"),w.style.removeProperty("opacity")}}let _={onPointerDown:x,onPointerUp:v};return c&&d&&(_.onMouseEnter=b,t.stacked||(_.onMouseLeave=y)),p&&(_.onClick=w=>{u&&u(w),o.canCloseOnClick&&m(!0)}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:s,toastRef:r,eventHandlers:_}}var aX=typeof window<"u"?f.useLayoutEffect:f.useEffect,Jg=({theme:t,type:e,isLoading:n,...s})=>He.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function rX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function lX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function oX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function cX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function dX(){return He.createElement("div",{className:"Toastify__spinner"})}var Ny={info:lX,warning:rX,success:oX,error:cX,spinner:dX},mX=t=>t in Ny;function uX({theme:t,type:e,isLoading:n,icon:s}){let a=null,r={theme:t,type:e};return s===!1||(kr(s)?a=s({...r,isLoading:n}):f.isValidElement(s)?a=f.cloneElement(s,r):n?a=Ny.spinner():mX(e)&&(a=Ny[e](r))),a}var hX=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:a,playToast:r}=sX(t),{closeButton:o,children:c,autoClose:d,onClick:m,type:u,hideProgressBar:p,closeToast:h,transition:g,position:x,className:v,style:y,progressClassName:b,updateId:j,role:k,progress:S,rtl:N,toastId:_,deleteToast:w,isIn:T,isLoading:A,closeOnClick:M,theme:E,ariaLabel:P}=t,D=Zl("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":M}),O=kr(v)?v({rtl:N,position:x,type:u,defaultClassName:D}):Zl(D,v),F=uX(t),q=!!S||!d,U={closeToast:h,type:u,theme:E},K=null;return o===!1||(kr(o)?K=o(U):f.isValidElement(o)?K=f.cloneElement(o,U):K=HZ(U)),He.createElement(g,{isIn:T,done:w,position:x,preventExitTransition:n,nodeRef:s,playToast:r},He.createElement("div",{id:_,tabIndex:0,onClick:m,"data-in":T,className:O,...a,style:y,ref:s,...T&&{role:k,"aria-label":P}},F!=null&&He.createElement("div",{className:Zl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},F),FR(c,t,!e),K,!t.customProgressBar&&He.createElement(zZ,{...j&&!q?{key:`p-${j}`}:{},rtl:N,theme:E,delay:d,isRunning:e,isIn:T,closeToast:h,hide:p,type:u,className:b,controlledProgress:q,progress:S||0})))},pX=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),gX=qZ(pX("bounce",!0)),fX={position:"top-right",transition:gX,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function hpe(t){let e={...fX,...t},n=t.stacked,[s,a]=f.useState(!0),r=f.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=iX(e),{className:m,style:u,rtl:p,containerId:h,hotKeys:g}=e;function x(y){let b=Zl("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":p});return kr(m)?m({position:y,rtl:p,defaultClassName:b}):Zl(b,wy(m))}function v(){n&&(a(!0),Ee.play())}return aX(()=>{var y;if(n){let b=r.current.querySelectorAll('[data-in="true"]'),j=12,k=(y=e.position)==null?void 0:y.includes("top"),S=0,N=0;Array.from(b).reverse().forEach((_,w)=>{let T=_;T.classList.add("Toastify__toast--stacked"),w>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=k?"top":"bot");let A=S*(s?.2:1)+(s?0:j*w);T.style.setProperty("--y",`${k?A:A*-1}px`),T.style.setProperty("--g",`${j}`),T.style.setProperty("--s",`${1-(s?N:0)}`),S+=T.offsetHeight,N+=.025})}},[s,d,n]),f.useEffect(()=>{function y(b){var j;let k=r.current;g(b)&&((j=k.querySelector('[tabIndex="0"]'))==null||j.focus(),a(!1),Ee.pause()),b.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(a(!0),Ee.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[g]),He.createElement("section",{ref:r,className:"Toastify",id:h,onMouseEnter:()=>{n&&(a(!1),Ee.pause())},onMouseLeave:v,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,b)=>{let j=b.length?{...u}:{...u,pointerEvents:"none"};return He.createElement("div",{tabIndex:-1,className:x(y),"data-stacked":n,style:j,key:`c-${y}`},b.map(({content:k,props:S})=>He.createElement(hX,{...S,stacked:n,collapseAll:v,isIn:c(S.toastId,S.containerId),key:`t-${S.key}`},k)))}))}const cs=(t,e="export.csv")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=[n.join(","),...t.map(r=>n.map(o=>{const c=r[o]||"",d=String(c);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"});VR(a,e)},ds=(t,e="export.xls")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=`
    <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head>
        <meta charset="utf-8">
        <!--[if gte mso 9]>
        <xml>
          <x:ExcelWorkbook>
            <x:ExcelWorksheets>
              <x:ExcelWorksheet>
                <x:Name>Doctors</x:Name>
                <x:WorksheetOptions>
                  <x:DisplayGridlines/>
                </x:WorksheetOptions>
              </x:ExcelWorksheet>
            </x:ExcelWorksheets>
          </x:ExcelWorkbook>
        </xml>
        <![endif]-->
        <style>
          table { 
            border-collapse: collapse; 
            width: 100%; 
            font-family: Arial, sans-serif;
            font-size: 11px;
          }
          th, td { 
            border: 1px solid #d0d0d0; 
            padding: 8px 10px; 
            text-align: left;
            white-space: nowrap;
          }
          th { 
            background-color: #4472C4; 
            color: white; 
            font-weight: bold;
            text-transform: lowercase;
          }
          tr:nth-child(even) {
            background-color: #f9f9f9;
          }
        </style>
      </head>
      <body>
        <table>
          <thead>
            <tr>
              ${n.map(r=>`<th>${rc(r)}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${t.map(r=>`
              <tr>
                ${n.map(o=>`<td>${rc(String(r[o]||""))}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
    </html>
  `,a=new Blob([s],{type:"application/vnd.ms-excel"});VR(a,e)},ms=(t,e="export.pdf",n="Export Data")=>{if(!t||t.length===0)throw new Error("No data to export");const s=Object.keys(t[0]),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>${rc(n)}</title>
        <style>
          @page { size: A4 landscape; margin: 15mm; }
          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; font-size: 11px; }
          h1 { color: #333; text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 10px; }
          th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; word-wrap: break-word; }
          th { background-color: #4472C4; color: white; font-weight: bold; text-transform: lowercase; }
          tr:nth-child(even) { background-color: #f9f9f9; }
          .footer { margin-top: 20px; text-align: center; font-size: 9px; color: #666; }
        </style>
      </head>
      <body>
        <h1>${rc(n)}</h1>
        <table>
          <thead><tr>${s.map(c=>`<th>${rc(c)}</th>`).join("")}</tr></thead>
          <tbody>${t.map(c=>`<tr>${s.map(d=>`<td>${rc(String(c[d]||""))}</td>`).join("")}</tr>`).join("")}</tbody>
        </table>
        <div class="footer">Generated on ${new Date().toLocaleString()}</div>
        <script>
          window.onload = () => setTimeout(() => window.print(), 500);
        <\/script>
      </body>
    </html>
  `,r=new Blob([a],{type:"text/html"}),o=URL.createObjectURL(r);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),1e3)},VR=(t,e)=>{const n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)},rc=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])};var hh={},lC;function vX(){if(lC)return hh;lC=1,Object.defineProperty(hh,"__esModule",{value:!0});function t(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(a.length===2)return n(a[0],a[1])||null;var o=a.slice(1).reduce(function(c,d){return n(c,d)},a[0]);return o||null}hh.default=t;var e=new WeakMap;function n(a,r){if(a&&r){var o=e.get(a)||new WeakMap;e.set(a,o);var c=o.get(r)||(function(d){s(a,d),s(r,d)});return o.set(r,c),c}return a||r}function s(a,r){typeof a=="function"?a(r):a.current=r}return hh}var xX=vX();const yX=ma(xX);var oC=Symbol("useLazyRef empty value"),bX=t=>{const e=f.useRef(oC);return e.current===oC&&(e.current=t()),e};function wX(){var t=f.useRef(!1);return f.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t}var ph=function(e){var n=He.useRef(e);return cp(function(){n.current=e}),n};function ql(t){return{isOk:()=>!0,isOkAnd:n=>n(t),isErr:()=>!1,isErrAnd:()=>!1,ok:()=>xk(t),err:()=>Xl(),map:n=>ql(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),mapErr:()=>ql(t),expect:()=>t,expectErr:n=>{throw new Error(n)},unwrap:()=>t,unwrapErr:()=>{throw new Error(`${t}`)},unwrapOr:()=>t,unwrapOrElse:()=>t,and:n=>n,andThen:n=>n(t),or:()=>ql(t),orElse:()=>ql(t)}}function Hl(t){return{isOk:()=>!1,isOkAnd:()=>!1,isErr:()=>!0,isErrAnd:n=>n(t),ok:()=>Xl(),err:()=>xk(t),map:()=>Hl(t),mapOr:n=>n,mapOrElse:n=>n(t),mapErr:n=>Hl(n(t)),expect:n=>{throw new Error(n)},expectErr:()=>t,unwrap:()=>{throw new Error(`${t}`)},unwrapErr:()=>t,unwrapOr:n=>n,unwrapOrElse:n=>n(t),and:()=>Hl(t),andThen:()=>Hl(t),or:n=>n,orElse:n=>n(t)}}function Xl(){const t={and:()=>Xl(),andThen:()=>Xl(),expect:e=>{throw new Error(e)},filter:()=>t,isSome:()=>!1,isSomeAnd:()=>!1,isNone:()=>!0,map:()=>Xl(),mapOr:e=>e,mapOrElse:e=>e(),okOr:e=>Hl(e),okOrElse:e=>Hl(e()),or:e=>e,orElse:e=>e(),unwrap:()=>{throw new Error("panic! call `unwrap` on a `None` value")},unwrapOr:e=>e,unwrapOrElse:e=>e(),xor:e=>e.isSome()?e:t};return t}function xk(t){const e={and:n=>n,andThen:n=>n(t),expect:()=>t,filter:n=>n(t)?e:Xl(),isSome:()=>!0,isSomeAnd:n=>n(t),isNone:()=>!1,map:n=>xk(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),okOr:()=>ql(t),okOrElse:()=>ql(t),or:()=>e,orElse:()=>e,unwrap:()=>t,unwrapOr:()=>t,unwrapOrElse:()=>t,xor:n=>n.isNone()?e:Xl()};return e}function kX(t){return t.then(e=>ql(e),e=>Hl(e))}var jX=setTimeout;function NX(t,e){var n=e.useCachedSetTimeout?jX:setTimeout;return new Promise((function(s){n(s,t)}))}function CX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.useCachedSetTimeout,s=NX(t,{useCachedSetTimeout:n});function a(r){return s.then((function(){return r}))}return a.then=function(){return s.then.apply(s,arguments)},a.catch=Promise.resolve().catch,a}var SX=300;function _X(t){function e(n){const{selectProps:s,innerRef:a}=n,{handleScrolledToBottom:r,shouldLoadMore:o}=s,c=f.useRef(null),d=f.useRef(null),m=f.useCallback(()=>{const h=d.current;if(!h)return!1;const{scrollTop:g,scrollHeight:x,clientHeight:v}=h;return o(x,v,g)},[o]),u=f.useCallback(()=>{m()&&r&&r()},[m,r]),p=f.useMemo(()=>{const h=()=>{u(),c.current=setTimeout(h,SX)};return h},[u]);return f.useEffect(()=>(p(),()=>{c.current&&clearTimeout(c.current)}),[]),i.jsx(t,{...n,innerRef:yX(a,d)})}return e}var EX=_X(y2.MenuList),TX=t=>f.useMemo(()=>({MenuList:EX,...t}),[t]),AX=(t,e)=>[...t,...e],DX=10,RX=(t,e,n)=>t-e-DX<n,UR=t=>({isFirstLoad:!0,options:[],hasMore:!0,isLoading:!1,lockedUntil:0,additional:t.additional}),PX=({options:t,defaultOptions:e,additional:n,defaultAdditional:s})=>{const a=e===!0?null:Array.isArray(e)?e:t;return a?{"":{isFirstLoad:!1,isLoading:!1,options:a,hasMore:!0,lockedUntil:0,additional:s||n}}:{}},cC='[react-select-async-paginate] response of "loadOptions" should be an object with "options" prop, which contains array of options.',MX=t=>{if(!t)return!1;const{options:e,hasMore:n}=t;return!(!Array.isArray(e)||typeof n!="boolean"&&typeof n<"u")},IX=t=>{if(!MX(t))throw console.error(cC,"Received:",t),new Error(cC);return!0},OX=async(t,e,n,s,a,r,o,c)=>{const d=e.current.inputValue,m=!n.current[d],u=m?UR(e.current):n.current[d];if(u.isLoading||!u.hasMore||u.lockedUntil>Date.now())return;if(a(v=>c&&t==="input-change"?{[d]:{...u,isLoading:!0}}:{...v,[d]:{...u,isLoading:!0}}),s>0&&t==="input-change"){await CX(s);const v=e.current.inputValue;if(d!==v){a(y=>{if(m){const{[d]:b,...j}=y;return j}return{...y,[d]:{...u,isLoading:!1}}});return}}const{loadOptions:p,reloadOnErrorTimeout:h=0}=e.current,g=await kX(Promise.resolve().then(()=>p(d,u.options,u.additional)));if(!o.current)return;if(g.isErr()){a(v=>({...v,[d]:{...u,isLoading:!1,lockedUntil:Date.now()+h}}));return}const x=g.unwrap();if(IX(x)){const{options:v,hasMore:y}=x,b=Object.hasOwn(x,"additional")?x.additional:u.additional;a(j=>({...j,[d]:{...u,options:r(u.options,v,b),hasMore:!!y,isLoading:!1,isFirstLoad:!1,additional:b}}))}},Yv=t=>t+1,LX=(t,e=[])=>{const{clearCacheOnSearchChange:n=!1,clearCacheOnMenuClose:s=!1,defaultOptions:a,loadOptionsOnMenuOpen:r=!0,debounceTimeout:o=0,inputValue:c,menuIsOpen:d,filterOption:m=null,reduceOptions:u=AX,shouldLoadMore:p=RX,mapOptionsForMenu:h=void 0}=t,g=ph(d),x=wX(),v=ph(u),y=ph(r),b=f.useRef(!0),j=f.useRef(t);j.current=t;const[k,S]=f.useState(0),N=bX(()=>PX(t)),_=ph(M=>{OX(M,j,N,o,E=>{N.current=E(N.current),x.current&&S(Yv)},v.current,x,n)}),w=f.useCallback(()=>{const M=j.current.inputValue;N.current[M]&&_.current("menu-scroll")},[_,N]);f.useEffect(()=>{b.current?b.current=!1:(N.current={},S(Yv)),a===!0&&_.current("autoload")},e),f.useEffect(()=>{g.current&&!N.current[c]&&_.current("input-change")},[_,c,g,N]),f.useEffect(()=>{if(d){if(!N.current[""]&&y.current){_.current("menu-toggle");return}return}s&&(N.current={},S(Yv))},[_,y,d,N,s]);const T=N.current[c]||UR(t),A=f.useMemo(()=>h?h(T.options):T.options,[T.options,h]);return{handleScrolledToBottom:w,shouldLoadMore:p,filterOption:m,isLoading:T.isLoading||T.lockedUntil>Date.now(),isFirstLoad:T.isFirstLoad,options:A}},FX=(t,e=[])=>{const{inputValue:n,menuIsOpen:s,defaultInputValue:a,defaultMenuIsOpen:r,onInputChange:o,onMenuClose:c,onMenuOpen:d}=t,[m,u]=f.useState(a||""),[p,h]=f.useState(!!r),g=typeof n=="string"?n:m,x=typeof s=="boolean"?s:p,v=f.useCallback((k,S)=>{o&&o(k,S),u(k)},[o]),y=f.useCallback(()=>{c&&c(),h(!1)},[c]),b=f.useCallback(()=>{d&&d(),h(!0)},[d]);return{...LX({...t,inputValue:g,menuIsOpen:x},e),inputValue:g,menuIsOpen:x,onInputChange:v,onMenuClose:y,onMenuOpen:b}},$X=[],BX={};function qX(t){function e(n){const{components:s=BX,selectRef:a=void 0,isLoading:r,cacheUniqs:o=$X,menuPlacement:c,menuShouldScrollIntoView:d,...m}=n,u=FX(m,o),p=TX(s),h=typeof r=="boolean"?r:u.isLoading;return i.jsx(t,{...n,...u,menuPlacement:c,menuShouldScrollIntoView:c==="auto"&&h?!1:d,isLoading:h,components:p,ref:a})}return e}var HX=qX(ot);const yn=({id:t,value:e,onChange:n,placeholder:s,isSearchable:a=!0,isLoading:r=!1,isDisabled:o=!1,isMulti:c=!1,closeMenuOnSelect:d=!0,getOptionValue:m,getOptionLabel:u,customComponents:p={},loadOptions:h,dependencies:g={},searchPlaceholder:x=l("Search...","kivicare-clinic-management-system"),noOptionsMessage:v=l("No options available","kivicare-clinic-management-system"),loadingMessage:y=l("Loading...","kivicare-clinic-management-system"),debounceTimeout:b=300,additional:j={},isCreatable:k=!1,onCreateOption:S,formatCreateLabel:N=w=>`Create "${w}"`,..._})=>{const[w,T]=f.useState({page:1}),A=JSON.stringify(g),M=f.useCallback(async(O,F,{page:q})=>{if(console.log(" asyncLoadOptions called:",{searchQuery:O,page:q,dependencies:g}),!h)return{options:[],hasMore:!1,additional:{page:1}};try{const U={page:q||1,per_page:10,search:O||"",...g};console.log(" Calling loadOptions with params:",U);const K=await h(U);console.log(" Received result:",K);const ne=K?.data??K??[],Y=K?.pagination??{},fe=Array.isArray(ne)?ne:[],le=!!(Y.has_more||Y.current_page<Y.total_pages);return console.log(" Returning options:",{optionsCount:fe.length,hasMore:le,nextPage:(q||1)+1}),k&&O&&fe.length===0&&fe.push({value:"__create__",label:N(O),isCreateOption:!0,inputValue:O}),{options:fe,hasMore:le,additional:{page:(q||1)+1}}}catch(U){return console.error(" Async load options error:",U),{options:[],hasMore:!1,additional:{page:1}}}},[h,A]);f.useEffect(()=>{console.log(" Dependencies changed! Resetting page to 1. New dependencies:",g),T({page:1})},[A]);const E=O=>{try{const F=m?m(O):O?.value??O?.id??"";return String(F??"")}catch{return""}},P=O=>{try{return u?u(O):O?.label??O?.name??O?.title??""}catch{return""}},D=(O,F)=>{if(O&&O.isCreateOption){S&&S(O.inputValue);return}if(c&&Array.isArray(O)){const q=new Set,U=[];O.forEach(K=>{const ne=E(K);q.has(ne)||(q.add(ne),U.push(K))}),n(U,F);return}n(O,F)};return i.jsx(HX,{id:t,value:e,loadOptions:M,onChange:D,additional:w,placeholder:s,isDisabled:o,isMulti:c,closeMenuOnSelect:d,debounceTimeout:b,isSearchable:a,getOptionValue:E,getOptionLabel:P,components:{...p||{}},styles:{menuPortal:O=>({...O,zIndex:9999})},cacheUniqueValue:A,..._})},ha=({show:t,onHide:e,queryParams:n,onApplyFilters:s,onResetFilters:a,title:r=l("Filters","kivicare-clinic-management-system"),fields:o=[],hasAppliedFilters:c=!1})=>{const[d,m]=f.useState({...n}),[u,p]=f.useState(!1),h=["clinicAddress","clinicName","clinic","id","specialization","status","date_from","date_to","patientName","doctorAddress","doctorName","receptionistAddress","receptionistName","serviceName","charges","category","patient","search","startDate","endDate","taxName","service","doctor","encounter_id","serviceName","patient_unique_id"];f.useEffect(()=>{const N=h.some(_=>{const w=d[_];return Array.isArray(w)?w.length>0:typeof w=="number"?w!==0:w!=null&&w!==""});p(N)},[d]);const[g,x]=f.useState({});f.useEffect(()=>{m({...n});const N={};o.forEach(_=>{if(_.type==="dateRange"){const w=n[_.startDateKey],T=n[_.endDateKey];w&&T?N[_.name]=[new Date(w),new Date(T)]:N[_.name]=[]}}),x(N)},[n]);const v=(N,_)=>{m(w=>{const T={...w,[N]:_};return o.forEach(A=>{A.dependencies&&Object.values(A.dependencies).includes(N)&&(T[A.name]=A.type==="multiSelect"||A.isMulti?[]:"")}),T})},y=(N,_)=>{v(N,_?_.value:"")},b=(N,_,w,T)=>{if(x(A=>({...A,[N]:T})),T.length===2){const A=Ql(T[0]),M=Ql(T[1]);m(E=>({...E,[_]:A,[w]:M}))}},j=(N,_)=>{v(N,_)},k=()=>{s(d)},S=N=>{const{type:_,name:w,label:T,placeholder:A,options:M=[],isLoading:E=!1,optionLoader:P,dependencies:D,...O}=N;switch(_){case"select":const F=M.find(z=>z.value===d[w])||null;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsx(ot,{value:F,onChange:z=>y(w,z),options:M,menuShouldScrollIntoView:!1,maxMenuHeight:220,menuPosition:"fixed",isLoading:E,noOptionsMessage:()=>l("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:A||T,className:"react-select-box",classNamePrefix:"react-select",isDisabled:E,styles:{menuPortal:z=>({...z,zIndex:1050}),menu:z=>({...z,zIndex:1050})},...O})]},w);case"paginatedSelect":const q=N.storeObject?d[w]:N.value||M.find(z=>z.value===d[w])||null,U=N.dependencies?Object.keys(N.dependencies).reduce((z,ie)=>{const re=d[N.dependencies[ie]];return z[ie]=re&&typeof re=="object"&&"value"in re?re.value:re,z},{}):{},K=N.key||`${w}-${JSON.stringify(U)}`;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsx(yn,{value:q,id:`filter-${w}`,placeholder:A||T,className:"react-select-box",classNamePrefix:"react-select",loadOptions:P,dependencies:U,isDisabled:N.isDisabled,onChange:z=>{N.storeObject?v(w,z):v(w,z?z.value:""),N.onChange&&typeof N.onChange=="function"&&N.onChange(z)},isClearable:!0,menuShouldScrollIntoView:!1,styles:{menuPortal:z=>({...z,zIndex:1050}),menu:z=>({...z,zIndex:1050})}},K)]},w);case"dateRange":const{startDateKey:ne,endDateKey:Y}=N,fe=g[w]&&g[w].length>0;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsxs("div",{className:"input-group",children:[i.jsx(si,{value:(g[w]||[]).map(z=>typeof z=="string"?ii(z):z),onChange:z=>{z.length===2?b(w,ne,Y,z):z.length===0&&(x(ie=>({...ie,[w]:[]})),m(ie=>({...ie,[ne]:"",[Y]:""})))},options:{mode:"range",dateFormat:bi(window.kc_frontend.date_format),locale:ai(),...O.flatpickrOptions},className:"form-control",placeholder:A||l("Select date range","kivicare-clinic-management-system")}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})}),fe&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{x(z=>({...z,[w]:[]})),m(z=>({...z,[ne]:"",[Y]:""}))},title:l("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},w);case"date":const le=d[w];return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsxs("div",{className:"position-relative",children:[i.jsx(si,{value:d[w]?ii(d[w]):"",onChange:z=>{if(z.length>0){const ie=Ql(z[0]);v(w,ie)}else v(w,"")},options:{dateFormat:bi(window.kc_frontend.date_format),locale:ai(),...O.flatpickrOptions},className:"form-control",placeholder:A||l("Select date","kivicare-clinic-management-system")}),le&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>v(w,""),title:l("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},w);case"text":case"search":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsx(Mt.Control,{type:"text",value:d[w]||"",onChange:z=>j(w,z.target.value),placeholder:A||T,...O})]},w);case"number":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsx(Mt.Control,{type:"number",value:d[w]||"",onChange:z=>j(w,z.target.value),placeholder:A||T,...O})]},w);case"multiSelect":const W=M.filter(z=>Array.isArray(d[w])?d[w].includes(z.value):!1);return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:T}),i.jsx(ot,{value:W,onChange:z=>{const ie=z?z.map(re=>re.value):[];v(w,ie)},className:"react-select-box",classNamePrefix:"react-select",options:M,isMulti:!0,isLoading:E,noOptionsMessage:()=>l("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:A||T,isDisabled:E,menuShouldScrollIntoView:!1,styles:{menuPortal:z=>({...z,zIndex:1050}),menu:z=>({...z,zIndex:1050})},...O})]},w);default:return null}};return i.jsxs(Mu,{show:t,onHide:e,placement:"end",backdrop:!0,className:"on-rtl end",children:[i.jsx(Mu.Header,{closeButton:!0,className:"border-bottom",children:i.jsx(Mu.Title,{as:"h6",className:"mb-0",children:r})}),i.jsx(Mu.Body,{children:i.jsx(Mt,{children:i.jsx("div",{className:"row gy-4",children:o.map(N=>S(N))})})}),i.jsx("div",{className:"offcanvas-footer p-3 border-top",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Yt,{variant:"secondary",onClick:()=>{a(),e()},disabled:!c,children:l("Reset","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:k,disabled:!u,children:l("Apply","kivicare-clinic-management-system")})]})})]})};ha.propTypes={show:De.bool.isRequired,onHide:De.func.isRequired,queryParams:De.object.isRequired,onApplyFilters:De.func.isRequired,onResetFilters:De.func.isRequired,title:De.string,fields:De.arrayOf(De.shape({type:De.oneOf(["select","multiSelect","dateRange","date","text","search","number"]).isRequired,name:De.string.isRequired,label:De.string.isRequired,placeholder:De.string,options:De.array,isLoading:De.bool,startDateKey:De.string,endDateKey:De.string,flatpickrOptions:De.object})).isRequired,hasAppliedFilters:De.bool};const Ys={getSettings:(t={})=>pe({endpoint:"settings",method:"GET",data:t}),getSetting:(t,e,n={})=>{if(t==="webhooks"){let s;switch(e){case"list":s="webhooks";break;case"table-config":s="webhooks/table-config";break;case"events":s="webhooks/events";break;default:s=`webhooks/${e}`}return pe({endpoint:s,method:"GET",data:n})}return pe({endpoint:`${t}/${e}`,method:"GET",data:n})},updateSettings:(t,e,n)=>pe({endpoint:`${t}/${e}`,method:"PUT",data:n}),getClinicData:()=>pe({endpoint:"clinic",method:"GET"}),updateClinicData:t=>pe({endpoint:"clinic",method:"PUT",data:t}),getCustomNotifications:(t={})=>pe({endpoint:"settings/custom-notifications",method:"GET",data:t}),getCustomNotification:t=>pe({endpoint:`settings/custom-notifications/${t}`,method:"GET"}),createCustomNotification:t=>pe({endpoint:"settings/custom-notifications",method:"POST",data:t}),updateCustomNotification:(t,e)=>pe({endpoint:`settings/custom-notifications/${t}`,method:"PUT",data:e}),testCustomNotification:(t,e)=>pe({endpoint:`settings/custom-notifications/${t}/test`,method:"POST",data:e}),deleteCustomNotification:t=>pe({endpoint:`settings/custom-notifications/${t}`,method:"DELETE"}),updateCustomNotificationStatus:(t,e)=>pe({endpoint:`settings/custom-notifications/${t}/status`,method:"PUT",data:e}),getWebhookStatistics:(t,e={})=>pe({endpoint:`webhooks/statistics/${t}`,method:"GET",data:e}),exportCustomFields:(t={})=>pe({endpoint:"setting/custom-field/export",method:"GET",data:t}),exportHolidays:(t={})=>pe({endpoint:"settings/holidays/export",method:"GET",data:t}),exportListings:(t={})=>pe({endpoint:"settings/listing/export",method:"GET",data:t})},Fn={all:["settings"],lists:()=>[...Fn.all,"list"],list:t=>[...Fn.lists(),{filters:t}],details:()=>[...Fn.all,"detail"],detail:(t,e)=>[...Fn.details(),t,e],clinic:()=>[...Fn.all,"clinic"],webhooks:()=>[...Fn.all,"webhooks"],webhookList:t=>[...Fn.webhooks(),"list",{filters:t}],webhookDetail:t=>[...Fn.webhooks(),"detail",t],webhookTableConfig:()=>[...Fn.webhooks(),"table-config"],webhookEvents:()=>[...Fn.webhooks(),"events"],webhookStatistics:(t,e)=>[...Fn.webhooks(),"statistics",t,{params:e}]},bn=(t,e,n={},s={})=>ft({queryKey:[...Fn.detail(t,e),n],queryFn:()=>Ys.getSetting(t,e,n),enabled:!!(t&&e),...s}),cn=(t,e)=>{const n=ze();return Le({mutationFn:s=>{const a=s?.module||t,r=s?.key||e,o=s?.module||s?.key?s?.data:s;return Ys.updateSettings(a,r,o)},onSuccess:(s,a)=>{const r=a?.module||t,o=a?.key||e;n.invalidateQueries({queryKey:Fn.lists()}),n.invalidateQueries({queryKey:["config","settings"]}),n.invalidateQueries({queryKey:Fn.details()}),r&&o&&n.invalidateQueries({queryKey:Fn.detail(r,o)})}})},zX=(t={},e={})=>ft({queryKey:[...Fn.all,"custom-notifications",t],queryFn:()=>Ys.getCustomNotifications(t),...e}),WR=(t,e={})=>ft({queryKey:[...Fn.all,"custom-notification",t],queryFn:()=>Ys.getCustomNotification(t),enabled:!!t&&t!=="new",...e}),VX=(t={})=>{const e=ze();return Le({mutationFn:n=>Ys.createCustomNotification(n),onSuccess:()=>{e.invalidateQueries({queryKey:[...Fn.all,"custom-notifications"]})},...t})},UX=(t={})=>{const e=ze();return Le({mutationFn:({id:n,data:s})=>Ys.updateCustomNotification(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Fn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Fn.all,"custom-notification",s]})},...t})},WX=(t={})=>Le({mutationFn:({id:e,data:n})=>Ys.testCustomNotification(e,n),...t}),KX=(t={})=>{const e=ze();return Le({mutationFn:n=>Ys.deleteCustomNotification(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:[...Fn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Fn.all,"custom-notification",s]})},...t})},GX=(t={})=>{const e=ze();return Le({mutationFn:({id:n,data:s})=>Ys.updateCustomNotificationStatus(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Fn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Fn.all,"custom-notification",s]})},...t})},YX=()=>Le({mutationFn:t=>Ys.exportCustomFields(t)}),QX=()=>Le({mutationFn:t=>Ys.exportHolidays(t)}),ZX=()=>Le({mutationFn:t=>Ys.exportListings(t)}),cu=({id:t="kc-file-upload-input",name:e="file",defaultFile:n="",defaultFileId:s="",onChange:a,className:r="",disabled:o=!1,required:c=!1,label:d="",register:m,errors:u={},accept:p="",...h})=>{const[g,x]=f.useState(n),[v,y]=f.useState(s),[b,j]=f.useState(!1),[k,S]=f.useState(!1),[N,_]=f.useState(null),w=f.useRef(null),T=f.useRef(null),A=u[e],M=!!g,E={};c&&(E.required=l("This field is required","kivicare-clinic-management-system"));const{ref:P,...D}=m?m(e,E):{ref:null},O=!!A||!!N,F=A?.message||N;f.useEffect(()=>{j(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{n&&x(n),s&&y(s)},[n,s]);const q=async le=>{try{S(!0),_(null);const W=window.kc_frontend?.rest_url,z=await pe({endpoint:`${W}/wp/v2/media`,method:"POST",data:le,isFile:!0});if(!z||z.success===!1)throw new Error(z?.message||l("Failed to upload file","kivicare-clinic-management-system"));if(x(z.source_url),y(z.id),w.current){w.current.value=z.id;const ie=new Event("input",{bubbles:!0});w.current.dispatchEvent(ie)}return a&&a({id:z.id,url:z.source_url,filename:z.title?.raw||"",type:z.media_type,subtype:z.mime_type,size:z.media_details?.filesize||0},z.id),z}catch(W){throw console.error("Error uploading file:",W),_(W.message||l("Failed to upload file","kivicare-clinic-management-system")),W}finally{S(!1)}},U=le=>{if(le.preventDefault(),!window.wp||!window.wp.media){T.current&&T.current.click();return}_(null);const W=window.wp.media({title:l("Select or Upload File","kivicare-clinic-management-system"),button:{text:l("Use this file","kivicare-clinic-management-system")},multiple:!1,library:{type:p?p.split(",").map(z=>z.trim()):""}});W.on("select",function(){const z=W.state().get("selection").first().toJSON();if(p&&!p.split(",").map(re=>re.trim()).includes(z.mime)){_(l("Please select a valid file format","kivicare-clinic-management-system"));return}if(x(z.url),y(z.id),w.current){w.current.value=z.id;const ie=new Event("input",{bubbles:!0});w.current.dispatchEvent(ie)}a&&a({id:z.id,url:z.url,filename:z.filename,type:z.type,subtype:z.subtype,size:z.filesizeInBytes},z.id)}),W.open()},K=async le=>{const W=le.target.files[0];if(W){if(_(null),p&&!p.split(",").map(ie=>ie.trim()).includes(W.mime)){_(l("Please select a valid file format","kivicare-clinic-management-system"));return}if(W.size>10*1024*1024){_(l("File size should not exceed 10MB","kivicare-clinic-management-system"));return}try{if(x(W.name),y(""),w.current){w.current.value="";const z=new Event("input",{bubbles:!0});w.current.dispatchEvent(z)}a&&a({url:"",filename:W.name,type:W.type,size:W.size,file:W},""),b||await q(W)}catch(z){console.error("Error handling file:",z)}}},ne=le=>{if(o){le.preventDefault();return}k||(b?U(le):T.current&&T.current.click())},Y=le=>{if(le.preventDefault(),le.stopPropagation(),!o){if(x(""),y(""),w.current){w.current.value="";const W=new Event("input",{bubbles:!0});w.current.dispatchEvent(W)}T.current&&(T.current.value=""),a&&a({url:"",filename:"",type:"",size:0},"")}},fe=le=>{w.current=le,P&&P(le)};return i.jsxs("div",{className:`form-group ${r}`,children:[d&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[d,c&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:`kc-file-upload ${M?"uploaded":""} ${k?"uploading":""} ${O?"is-invalid":""}`,children:[i.jsx("input",{type:"text",id:`${t}-hidden`,className:"d-none",...D,value:v||"",ref:fe,readOnly:!0,disabled:o}),i.jsx("input",{type:"file",id:t,className:"kc-file-upload-input d-none",onChange:K,accept:p,ref:T,disabled:k||o,"aria-invalid":O?"true":"false","aria-describedby":O?`${t}-error`:void 0}),M?i.jsxs("div",{className:"p-2 border rounded bg-light d-flex align-items-center justify-content-between",children:[i.jsx("span",{className:"text-truncate me-2",title:g?g.includes("/")?g.split("/").pop():g:"",children:g?g.includes("/")?g.split("/").pop():g:""}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[g&&g.startsWith("http")&&i.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-icon btn-primary",title:l("View File","kivicare-clinic-management-system"),children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M22.4627 11.666C22.6136 11.8715 22.6136 12.1528 22.4627 12.3582C20.6976 14.7607 16.5916 19.5 12.0001 19.5C7.40864 19.5 3.30252 14.7607 1.53744 12.3582C1.38656 12.1528 1.38656 11.8715 1.53744 11.666C3.30252 9.2635 7.40864 4.52417 12.0001 4.52417C16.5916 4.52417 20.6976 9.2635 22.4627 11.666Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),i.jsx("button",{type:"button",className:"btn btn-sm btn-icon btn-danger",onClick:Y,title:l("Remove File","kivicare-clinic-management-system"),disabled:o,children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M19.3248 9.46826C19.3248 9.46826 18.7818 16.2033 18.4668 19.0403C18.3168 20.3953 17.4798 21.1893 16.1088 21.2143C13.4998 21.2613 10.8878 21.2643 8.27979 21.2093C6.96079 21.1823 6.13779 20.3783 5.99079 19.0473C5.67379 16.1853 5.13379 9.46826 5.13379 9.46826",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M20.708 6.23975H3.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M17.4406 6.23973C16.6556 6.23973 15.9796 5.68473 15.8256 4.91573L15.5826 3.69973C15.4326 3.13873 14.9246 2.75073 14.3456 2.75073H10.1126C9.53358 2.75073 9.02558 3.13873 8.87558 3.69973L8.63258 4.91573C8.47858 5.68473 7.80258 6.23973 7.01758 6.23973",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]})]}):i.jsx("div",{className:`kc-file-upload-wrapper ${O?"border-danger":""} ${o?"disabled":""}`,style:o?{pointerEvents:"none",opacity:.6}:{},children:i.jsxs("div",{className:"kc-file-upload-container",children:[i.jsx("button",{type:"button",className:"kc-browse-btn",onClick:ne,disabled:k||o,children:k?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):l("Browse...","kivicare-clinic-management-system")}),i.jsx("div",{className:"kc-file-text-area",children:k?l("Uploading...","kivicare-clinic-management-system"):l("No file selected.","kivicare-clinic-management-system")})]})}),O&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:F})]})]})};cu.propTypes={id:De.string,name:De.string,defaultFile:De.string,defaultFileId:De.oneOfType([De.string,De.number]),onChange:De.func,className:De.string,disabled:De.bool,required:De.bool,label:De.string,register:De.func,errors:De.object,accept:De.string};const KR={importData:t=>{if(!t||!(t instanceof FormData))throw new Error("Invalid form data provided");const n=`import/${t.get("context")||"doctors"}`;return pe({endpoint:n,method:"POST",data:t,isFile:!0})},downloadSampleFile:(t,e)=>{if(!t||!e)throw new Error("Context and format are required");const r=`${{doctors:"doctor",patients:"patient",receptionists:"receptionist",clinics:"clinic",appointments:"appointment",services:"service","custom-fields":"customField",prescriptions:"prescription",listing:"listing"}[t]||"doctor"}${e==="csv"?".csv":".xlsx"}`,c={csv:"csv",xlsx:"xlsx"}[e]||e,m=`${window.kc_frontend?.kivicare_pro_dir_uri||""}demoImportFiles/${c}/${r}`;return Promise.resolve({data:m,fileName:r})},getImportTemplates:t=>{if(!t)throw new Error("Context is required");return pe({endpoint:`import/templates/${t}`,method:"GET"})},validateImportFile:t=>{if(!t)throw new Error("File data is required");return pe({endpoint:"import/validate",method:"POST",data:t,isFile:!0})}},XX=()=>Le({mutationFn:t=>KR.importData(t),onSuccess:t=>{},onError:t=>{console.error("Import failed:",t)}}),JX=()=>Le({mutationFn:({context:t,format:e})=>KR.downloadSampleFile(t,e),onSuccess:(t,e)=>{try{const n=document.createElement("a");n.href=t.data,n.download=t.fileName,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(n){console.error("Failed to download sample file:",n)}},onError:t=>{console.error("Sample file download failed:",t)}}),Ar=({show:t,onHide:e,onImport:n,onReopenImport:s,onDataRefresh:a,context:r="doctors",encounterId:o=null})=>{const[c,d]=f.useState(null),[m,u]=f.useState(0),[p,h]=f.useState(null),[g,x]=f.useState(!1),v=XX(),y=JX(),{control:b,handleSubmit:j,watch:k,setValue:S,formState:{errors:N},reset:_}=Xt({defaultValues:{fileFormat:null,file:null,sendEmailNotification:!1,sendSMSNotification:!1}}),w=k("fileFormat"),T=[{value:"csv",label:l("CSV","kivicare-clinic-management-system"),icon:"ph-file-csv"},{value:"xlsx",label:l("XLSX","kivicare-clinic-management-system"),icon:"ph-file-xls"}],A=f.useMemo(()=>({doctors:{title:l("Doctors Import","kivicare-clinic-management-system"),requiredFields:[l("First Name","kivicare-clinic-management-system"),l("Last Name","kivicare-clinic-management-system"),l("Email","kivicare-clinic-management-system"),l("Country Calling Code","kivicare-clinic-management-system"),l("Country Code","kivicare-clinic-management-system"),l("Contact","kivicare-clinic-management-system"),l("Gender","kivicare-clinic-management-system"),l("Specialization","kivicare-clinic-management-system")]},patients:{title:l("Patients Import","kivicare-clinic-management-system"),requiredFields:[l("first_name","kivicare-clinic-management-system"),l("last_name","kivicare-clinic-management-system"),l("email","kivicare-clinic-management-system"),l("country_calling_code","kivicare-clinic-management-system"),l("country_code","kivicare-clinic-management-system"),l("contact","kivicare-clinic-management-system"),l("gender","kivicare-clinic-management-system")]},receptionists:{title:l("Receptionists Import","kivicare-clinic-management-system"),requiredFields:[l("First Name","kivicare-clinic-management-system"),l("Last Name","kivicare-clinic-management-system"),l("Email","kivicare-clinic-management-system"),l("Country Calling Code","kivicare-clinic-management-system"),l("Country Code","kivicare-clinic-management-system"),l("Contact ","kivicare-clinic-management-system"),l("Gender  ","kivicare-clinic-management-system")]},clinics:{title:l("Clinics Import","kivicare-clinic-management-system"),requiredFields:[l("clinic_name","kivicare-clinic-management-system"),l("email","kivicare-clinic-management-system"),l("country_calling_code","kivicare-clinic-management-system"),l("country_code","kivicare-clinic-management-system"),l("contact","kivicare-clinic-management-system"),l("specialization","kivicare-clinic-management-system"),l("address","kivicare-clinic-management-system"),l("city","kivicare-clinic-management-system"),l("country","kivicare-clinic-management-system"),l("postal_code","kivicare-clinic-management-system"),l("clinic_admin_first_name","kivicare-clinic-management-system"),l("clinic_admin_last_name","kivicare-clinic-management-system"),l("clinic_admin_email","kivicare-clinic-management-system"),l("clinic_admin_country_calling_code","kivicare-clinic-management-system"),l("clinic_admin_country_code","kivicare-clinic-management-system"),l("clinic_admin_contact","kivicare-clinic-management-system"),l("clinic_admin_gender","kivicare-clinic-management-system")]},services:{title:l("Services Import","kivicare-clinic-management-system"),requiredFields:[l("category","kivicare-clinic-management-system"),l("name","kivicare-clinic-management-system"),l("charges","kivicare-clinic-management-system"),l("doctor_id","kivicare-clinic-management-system")]},"custom-fields":{title:l("Custom Fields Import","kivicare-clinic-management-system"),requiredFields:[l("module","kivicare-clinic-management-system"),l("label","kivicare-clinic-management-system"),l("input_type","kivicare-clinic-management-system")]},appointments:{title:l("Appointments Import","kivicare-clinic-management-system"),requiredFields:[l("date","kivicare-clinic-management-system"),l("start_time","kivicare-clinic-management-system"),l("end_time","kivicare-clinic-management-system"),l("service","kivicare-clinic-management-system"),l("clinic_name","kivicare-clinic-management-system"),l("doctor_name","kivicare-clinic-management-system"),l("patient_name","kivicare-clinic-management-system")]},prescriptions:{title:l("Prescriptions Import","kivicare-clinic-management-system"),requiredFields:[l("name","kivicare-clinic-management-system"),l("frequency","kivicare-clinic-management-system"),l("duration","kivicare-clinic-management-system")]},listing:{title:l("Listings Import","kivicare-clinic-management-system"),requiredFields:[l("Name","kivicare-clinic-management-system"),l("Type","kivicare-clinic-management-system")]}}),[]),M=A[r]||A.doctors,E=M.requiredFields,P=f.useCallback(()=>{if(!w){Ee.error(l("Please select a file format first","kivicare-clinic-management-system"));return}y.mutate({context:r,format:w.value})},[w,r,y]),D=f.useCallback((q,U)=>{if(!q)return{valid:!1,message:l("Please select a file to import","kivicare-clinic-management-system")};const ne=(q.name||q.filename||"").split(".").pop().toLowerCase(),fe={csv:["csv"],xlsx:["xlsx","xls"]}[U]||[];if(!fe.includes(ne)){const le=fe.join(", ");return{valid:!1,message:`${l("File format invalid. Expected","kivicare-clinic-management-system")} ${le.toUpperCase()} ${l("file for","kivicare-clinic-management-system")} ${U.toUpperCase()} ${l("format","kivicare-clinic-management-system")}`}}return{valid:!0}},[]),O=f.useCallback(async q=>{if(!q.fileFormat){Ee.error(l("Please select a file format","kivicare-clinic-management-system"));return}if(!q.file){Ee.error(l("Please select a file to import","kivicare-clinic-management-system"));return}const U=D(q.file,q.fileFormat.value);if(!U.valid){Ee.error(U.message);return}u(0);const K=setInterval(()=>{u(fe=>fe>=90?(clearInterval(K),90):fe+10)},200),ne=new FormData;ne.append("context",r),ne.append("file_format",q.fileFormat.value),ne.append("send_email_notification",q.sendEmailNotification),ne.append("send_sms_notification",q.sendSMSNotification),r==="prescriptions"&&o&&ne.append("encounter_id",o);let Y=q.file instanceof File?q.file:q.file?.file||c;if(!(Y instanceof File))if(Y?.url)try{const le=await(await fetch(Y.url)).blob();Y=new File([le],Y.filename||"import.csv",{type:le.type||"text/csv"})}catch(fe){throw console.error("Error fetching file from URL:",fe),new Error(l("Failed to load file for upload","kivicare-clinic-management-system"))}else throw new Error(l("Please select a valid file to import","kivicare-clinic-management-system"));if(!Y)throw new Error(l("Please select a file to import","kivicare-clinic-management-system"));ne.append("file",Y),v.mutate(ne,{onSuccess:fe=>{const le=fe?.data?.data||fe?.data||{},W={totalRows:le.total_rows||0,insertedRows:le.inserted_rows||0,errors:[],errorSummary:{},toastErrorMessage:le.toast_error_message||""};if(h(W),x(!0),W.insertedRows>0)Ee.success("Data imported successfully",{autoClose:5e3}),a&&setTimeout(()=>{a()},1e3);else{const z=W.toastErrorMessage||"No data imported";Ee.error(z,{autoClose:5e3})}e()},onError:fe=>{Ee.error(fe.message||l("Import failed. Please try again.","kivicare-clinic-management-system")),console.error("Import error:",fe)},onSettled:()=>{u(0),clearInterval(K)}})},[r,D,v,a,e]),F=f.useCallback(()=>{_(),d(null),u(0),h(null),x(!1),e()},[_,e]);return i.jsxs(i.Fragment,{children:[i.jsxs(st,{show:t,onHide:F,size:"lg",centered:!0,children:[i.jsxs(st.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:M.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:F,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(st.Body,{children:i.jsx(Mt,{onSubmit:j(O),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"fileFormat",control:b,rules:{required:!0},render:({field:q})=>i.jsx(ot,{...q,placeholder:l("Choose file format...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:T,isClearable:!0,styles:{menuPortal:U=>({...U,zIndex:9999})},formatOptionLabel:U=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:`ph ${U.icon} h5 mb-0`}),i.jsx("span",{children:U.label})]})})})]})}),i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Upload File","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("div",{className:"gap-2",children:i.jsx(je,{name:"file",control:b,rules:{required:!0},render:({field:q})=>i.jsx(cu,{id:"import-file-upload",name:"file",accept:w?w.value==="csv"?"text/csv":w.value==="xlsx"?["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","),onChange:(U,K)=>{q.onChange(U?.file||U),d(U?.file||U)},errors:N,disabled:!w||v.isPending,required:!0})})})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:P,disabled:!w||v.isPending,children:[i.jsx("i",{className:"ph ph-download me-1"}),l("Click here to download sample file","kivicare-clinic-management-system")]})})}),E.length>0&&i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"required-fields-container mt-0",children:i.jsxs("div",{className:"bg-info-subtle p-3 rounded",children:[i.jsxs("h6",{className:"mb-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),w?l("Following fields are required in","kivicare-clinic-management-system")+" "+w.label.toUpperCase()+" "+l("file","kivicare-clinic-management-system"):l("Following fields are required in file","kivicare-clinic-management-system")]}),i.jsx("ul",{className:"mb-0",children:E.map((q,U)=>i.jsx("li",{children:i.jsx("strong",{children:q})},U))})]})})}),!["appointments","services","custom-fields","prescriptions"].includes(r)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{className:"mb-3",children:[i.jsx("i",{className:"ph ph-bell me-1"}),l("Send Notification when user register","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(je,{name:"sendEmailNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"emailNotification",disabled:v.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"emailNotification",children:[i.jsx("i",{className:"ph ph-envelope me-1"}),l("Email","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(je,{name:"sendSMSNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"smsNotification",disabled:v.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"smsNotification",children:[i.jsx("i",{className:"ph ph-phone me-1"}),l("SMS/WhatsApp","kivicare-clinic-management-system")]})]})})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"mb-0 bg-info-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-info"}),i.jsxs("small",{children:[i.jsx("strong",{children:l("Note:","kivicare-clinic-management-system")})," ",l("If notification is enabled, demo import will take time.","kivicare-clinic-management-system")]})]})})]}),v.isPending&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"progress mb-3",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${m}%`},"aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",children:[m,"%"]})}),i.jsx("div",{className:"text-center",children:i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),l("Importing data, please wait...","kivicare-clinic-management-system")]})})]})]})})}),i.jsxs(st.Footer,{className:"d-flex justify-content-end gap-3",children:[i.jsx(Yt,{variant:"secondary",onClick:F,disabled:v.isPending,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:j(O),disabled:v.isPending,children:v.isPending?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),l("Importing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import","kivicare-clinic-management-system")]})})]})]}),i.jsxs(st,{show:g,onHide:()=>x(!1),size:"md",centered:!0,children:[i.jsxs(st.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:M.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>x(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(st.Body,{children:p&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4",children:i.jsx("i",{className:`ph ${p.insertedRows>0?"ph-check-circle text-success":"ph-warning-circle text-warning"}`,style:{fontSize:"3rem"}})}),i.jsx("h4",{className:"mb-3",children:l("Import Summary","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Total Rows","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-primary",children:p.totalRows||0})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:l("Successfully Inserted","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-success",children:p.insertedRows||0})]})})]})]})}),i.jsxs(st.Footer,{className:"d-flex justify-content-center gap-3",children:[i.jsx(Yt,{variant:"outline-primary",onClick:()=>{x(!1),h(null),s&&s()},children:l("Import More File","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:()=>x(!1),children:l("Close","kivicare-clinic-management-system")})]})]})]})},du={addReview:t=>pe({endpoint:"rating/add",method:"POST",data:t}),updateReview:t=>pe({endpoint:"rating/update",method:"POST",data:t}),getReviews:(t={})=>pe({endpoint:"rating/list",method:"GET",data:t}),getReviewByPatientDoctor:(t,e)=>pe({endpoint:"rating/list",method:"GET",data:{patient_id:t,doctor_id:e,per_page:1}}).then(n=>{const s=n.data?.reviews||[];return s.length>0?s[0]:null}),deleteReview:t=>pe({endpoint:"rating/delete",method:"POST",data:t})},or={all:["ratings"],lists:()=>[...or.all,"list"],list:t=>[...or.lists(),{filters:t}],details:()=>[...or.all,"detail"],detail:t=>[...or.details(),t]},GR=(t={},e={})=>{const[n,s]=f.useState(!1),a=ft({queryKey:or.list(t),queryFn:()=>du.getReviews(t),...e}),{data:r,isLoading:o,isFetching:c}=a,d=r?.data?.pagination||{},m=f.useCallback(async()=>{if(!o&&d.page<d.total_pages&&!n)try{s(!0),await a.refetch({...t,page:(d.page||0)+1})}finally{s(!1)}},[o,d.page,d.total_pages,n,t]);return{...a,hasNextPage:d.page<d.total_pages,fetchNextPage:m,isFetchingNextPage:n}},eJ=(t,e,n={})=>ft({queryKey:[...or.details(),"patient-doctor",t,e],queryFn:()=>du.getReviewByPatientDoctor(t,e),enabled:!!t&&!!e,...n}),tJ=()=>{const t=ze();return Le({mutationFn:e=>du.addReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:or.lists()})}})},nJ=()=>{const t=ze();return Le({mutationFn:e=>du.updateReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:or.lists()})}})},iJ=()=>{const t=ze();return Le({mutationFn:e=>du.deleteReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:or.lists()})}})},sJ=({show:t,onHide:e})=>i.jsxs(st,{show:t,onHide:e,centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:i.jsx(C,{width:"150px",height:"1.5rem"})})}),i.jsxs(st.Body,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx("div",{className:"d-flex gap-1",children:[1,2,3,4,5].map(n=>i.jsx(C,{width:"24px",height:"24px",style:{borderRadius:"50%"}},n))})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"80px",style:{borderRadius:"4px"}})]})]}),i.jsxs(st.Footer,{children:[i.jsx(nt,{width:"80px",className:"me-2"}),i.jsx(nt,{width:"120px"})]})]}),aJ=({show:t,onHide:e,appointment:n})=>{const{hasCapability:s}=ht(),[a,r]=f.useState(0),[o,c]=f.useState(""),[d,m]=f.useState(!1),u=tJ(),p=nJ(),h=iJ(),{data:g,isLoading:x}=eJ(n?.patientId,n?.doctorId,{enabled:t&&!!n?.patientId&&!!n?.doctorId&&s("patient_review_get")});f.useEffect(()=>{g?(r(g.rating||0),c(g.review_text||""),m(!0)):(r(0),c(""),m(!1))},[g,t]);const v=()=>{if(a===0){Et.fire({icon:"warning",title:l("Rating Required","kivicare-clinic-management-system"),text:l("Please select a rating before submitting.","kivicare-clinic-management-system")});return}const j={appointment_id:n?.id,rating:a,review_text:o.trim()};if(d&&g){if(!s("patient_review_edit")){Et.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to edit reviews.","kivicare-clinic-management-system")});return}p.mutate({review_id:g.id,rating:a,review_text:o.trim()},{onSuccess:k=>{Et.fire({icon:"success",title:l("Review Updated","kivicare-clinic-management-system"),text:l("Your review has been updated successfully!","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review update error:",k),Et.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to update review. Please try again.","kivicare-clinic-management-system")})}})}else{if(!s("patient_review_add")){Et.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to add reviews.","kivicare-clinic-management-system")});return}u.mutate(j,{onSuccess:k=>{Et.fire({icon:"success",title:l("Review Submitted","kivicare-clinic-management-system"),text:l("Thank you for your review!","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review submission error:",k),Et.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to submit review. Please try again.","kivicare-clinic-management-system")})}})}},y=async()=>{if(!s("patient_review_delete")){Et.fire({icon:"error",title:l("Permission Denied","kivicare-clinic-management-system"),text:l("You do not have permission to delete reviews.","kivicare-clinic-management-system")});return}(await Et.fire({icon:"warning",title:l("Delete Review?","kivicare-clinic-management-system"),text:l("Are you sure you want to delete this review? This action cannot be undone.","kivicare-clinic-management-system"),showCancelButton:!0,confirmButtonText:l("Yes, Delete","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"})).isConfirmed&&h.mutate({review_id:g.id},{onSuccess:k=>{Et.fire({icon:"success",title:l("Review Deleted","kivicare-clinic-management-system"),text:l("Your review has been deleted successfully.","kivicare-clinic-management-system")}),b()},onError:k=>{console.error("Review deletion error:",k),Et.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:k?.response?.data?.message||l("Failed to delete review. Please try again.","kivicare-clinic-management-system")})}})},b=()=>{e(),r(0),c(""),m(!1)};return x?i.jsx(sJ,{show:t,onHide:b}):i.jsxs(st,{show:t,onHide:b,centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:d?l("Update Review","kivicare-clinic-management-system"):l("Leave Review","kivicare-clinic-management-system")})}),i.jsx(st.Body,{children:i.jsxs(Mt,{children:[i.jsxs(Mt.Group,{className:"mb-3",children:[i.jsx(Mt.Label,{children:l("Rating","kivicare-clinic-management-system")}),i.jsx("div",{children:[1,2,3,4,5].map(j=>i.jsx("i",{className:`${a>=j?"ph-fill":"ph"} ph-star fs-4 me-1 text-warning cursor-pointer`,onClick:()=>r(j)},j))})]}),i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:l("Please Share Your Experience","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:o,onChange:j=>c(j.target.value),placeholder:l("Share your experience...","kivicare-clinic-management-system")})]})]})}),i.jsx(st.Footer,{children:i.jsxs("div",{className:"d-flex justify-content-between w-100",children:[i.jsx("div",{children:d&&g&&s("patient_review_delete")&&i.jsx(Qe,{placement:"top",overlay:j=>i.jsx(ut,{...j,children:l("Delete Review","kivicare-clinic-management-system")}),children:i.jsx(Yt,{variant:"outline-danger",onClick:y,disabled:u.isPending||p.isPending||h.isPending,children:i.jsx("i",{className:`ph ${h.isPending?"ph-spinner ph-spin":"ph-trash"}`})})})}),i.jsxs("div",{children:[i.jsx(Yt,{variant:"secondary",onClick:b,className:"me-2",disabled:u.isPending||p.isPending||h.isPending,children:l("Close","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:v,disabled:u.isPending||p.isPending||h.isPending,children:u.isPending||p.isPending?l("Submitting...","kivicare-clinic-management-system"):d?l("Update Review","kivicare-clinic-management-system"):l("Submit Review","kivicare-clinic-management-system")})]})]})})]})};var Uh={exports:{}},rJ=Uh.exports,dC;function lJ(){return dC||(dC=1,(function(t,e){(function(n,s){t.exports=s()})(rJ,(function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(r,o,c){var d=o.prototype;c.utc=function(v){var y={date:v,utc:!0,args:arguments};return new o(y)},d.utc=function(v){var y=c(this.toDate(),{locale:this.$L,utc:!0});return v?y.add(this.utcOffset(),n):y},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),m.call(this,v)};var u=d.init;d.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else u.call(this)};var p=d.utcOffset;d.utcOffset=function(v,y){var b=this.$utils().u;if(b(v))return this.$u?0:b(this.$offset)?p.call(this):this.$offset;if(typeof v=="string"&&(v=(function(N){N===void 0&&(N="");var _=N.match(s);if(!_)return null;var w=(""+_[0]).match(a)||["-",0,0],T=w[0],A=60*+w[1]+ +w[2];return A===0?0:T==="+"?A:-A})(v),v===null))return this;var j=Math.abs(v)<=16?60*v:v;if(j===0)return this.utc(y);var k=this.clone();if(y)return k.$offset=j,k.$u=!1,k;var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(k=this.local().add(j+S,n)).$offset=j,k.$x.$localOffset=S,k};var h=d.format;d.format=function(v){var y=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,y)},d.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var g=d.toDate;d.toDate=function(v){return v==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var x=d.diff;d.diff=function(v,y,b){if(v&&this.$u===v.$u)return x.call(this,v,y,b);var j=this.local(),k=c(v).local();return x.call(j,k,y,b)}}}))})(Uh)),Uh.exports}var oJ=lJ();const cJ=ma(oJ);var Wh={exports:{}},dJ=Wh.exports,mC;function mJ(){return mC||(mC=1,(function(t,e){(function(n,s){t.exports=s()})(dJ,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(a,r,o){var c,d=function(h,g,x){x===void 0&&(x={});var v=new Date(h),y=(function(b,j){j===void 0&&(j={});var k=j.timeZoneName||"short",S=b+"|"+k,N=s[S];return N||(N=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:k}),s[S]=N),N})(g,x);return y.formatToParts(v)},m=function(h,g){for(var x=d(h,g),v=[],y=0;y<x.length;y+=1){var b=x[y],j=b.type,k=b.value,S=n[j];S>=0&&(v[S]=parseInt(k,10))}var N=v[3],_=N===24?0:N,w=v[0]+"-"+v[1]+"-"+v[2]+" "+_+":"+v[4]+":"+v[5]+":000",T=+h;return(o.utc(w).valueOf()-(T-=T%1e3))/6e4},u=r.prototype;u.tz=function(h,g){h===void 0&&(h=c);var x,v=this.utcOffset(),y=this.toDate(),b=y.toLocaleString("en-US",{timeZone:h}),j=Math.round((y-new Date(b))/1e3/60),k=15*-Math.round(y.getTimezoneOffset()/15)-j;if(!Number(k))x=this.utcOffset(0,g);else if(x=o(b,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(k,!0),g){var S=x.utcOffset();x=x.add(v-S,"minute")}return x.$x.$timezone=h,x},u.offsetName=function(h){var g=this.$x.$timezone||o.tz.guess(),x=d(this.valueOf(),g,{timeZoneName:h}).find((function(v){return v.type.toLowerCase()==="timezonename"}));return x&&x.value};var p=u.startOf;u.startOf=function(h,g){if(!this.$x||!this.$x.$timezone)return p.call(this,h,g);var x=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return p.call(x,h,g).tz(this.$x.$timezone,!0)},o.tz=function(h,g,x){var v=x&&g,y=x||g||c,b=m(+o(),y);if(typeof h!="string")return o(h).tz(y);var j=(function(_,w,T){var A=_-60*w*1e3,M=m(A,T);if(w===M)return[A,w];var E=m(A-=60*(M-w)*1e3,T);return M===E?[A,M]:[_-60*Math.min(M,E)*1e3,Math.max(M,E)]})(o.utc(h,v).valueOf(),b,y),k=j[0],S=j[1],N=o(k).utcOffset(S);return N.$x.$timezone=y,N},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(h){c=h}}}))})(Wh)),Wh.exports}var uJ=mJ();const hJ=ma(uJ);sl.extend(cJ);sl.extend(hJ);const Cy=({hideBreadcrumbs:t=!1,patientId:e=!1})=>{const{patientIdParam:n}=Wt(),{isAddonActive:s,patientCalanderIntegration:a,hasCapability:r,wp_timezone:o,current_server_time:c,cancellationBufferEnabled:d,cancellationBufferHours:m,global_date_format:u,currentDoctorId:p,currentuserID:h,defaultClinicId:g}=ht(),x=ls(),v=zi(),y=Kn(),b=mi(),j=s("kiviPro"),[k,S]=f.useState(!1),[N,_]=f.useState(!1),[w,T]=f.useState(!1),[A,M]=f.useState(null),[E,P]=f.useState(!1),D=f.useRef(null),[O,F]=f.useState([]),[q,U]=f.useState([]),[K,ne]=f.useState([]),[Y,fe]=f.useState(null),[le,W]=f.useState({page:1,perPage:10,search:"",date:"",clinic:"",patient:e||"",doctor:v&&(p||h)||"",status:"",orderby:"",order:"",timeFrame:"upcoming"}),z={patientId:"patient",doctorId:"doctor",clinicId:"clinic",appointment_start_date:"dateTime"},ie=le.orderby?[{id:z[le.orderby]||le.orderby,desc:le.order==="desc"}]:[],re=ve=>{if(ve.length>0){const{id:ue,desc:Re}=ve[0],Be={patient:"patientId",doctor:"doctorId",clinic:"clinicId",dateTime:"appointment_start_date"};W(Ue=>({...Ue,orderby:Be[ue]||ue,order:Re?"desc":"asc",page:1}))}else W(ue=>({...ue,orderby:"",order:"",page:1}))},de=ze(),L=async({page:ve,per_page:ue,search:Re})=>{try{const Be={dataType:"clinicList",page:ve,per_page:ue,search:Re},Ue=await de.fetchQuery({queryKey:vt.list(Be),queryFn:()=>Bt.getStaticData(Be),staleTime:300*1e3}),Ye=Ue.data.map(tt=>({value:tt.id,label:tt.label||tt.name}));return F(tt=>[...tt,...Ye]),Ue}catch(Be){return console.error("Error loading clinics:",Be),{data:[],pagination:{has_more:!1}}}},Q=async({page:ve,per_page:ue,search:Re,clinic_ids:Be})=>{try{let Ue=Be;(y||b)&&g&&(Ue=g);const Ye={dataType:"staticData",staticDataType:"users",role:Vl(),clinic_ids:Ue,page:ve,per_page:ue,search:Re},tt=await de.fetchQuery({queryKey:vt.list(Ye),queryFn:()=>Bt.getStaticData(Ye),staleTime:300*1e3}),Dt=tt.data.map(Jt=>({value:Jt.id,label:Jt.label||Jt.name}));return U(Jt=>[...Jt,...Dt]),tt}catch(Ue){return console.error("Error loading patients:",Ue),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},V=async({page:ve,per_page:ue,search:Re,clinic_ids:Be})=>{try{let Ue=Be;(y||b)&&g&&(Ue=g);const Ye={dataType:"staticData",staticDataType:"doctors",clinic_ids:Ue,page:ve,per_page:ue,search:Re},tt=await de.fetchQuery({queryKey:vt.list(Ye),queryFn:()=>Bt.getStaticData(Ye),staleTime:0}),Dt=tt.data.map(Jt=>({value:Jt.id,label:Jt.label||Jt.name}));return ne(Jt=>[...Jt,...Dt]),tt}catch(Ue){return console.error("Error loading doctors:",Ue),{data:[],pagination:{has_more:!1}}}},Z=IR(),X=ve=>{Z.mutate(ve,{onSuccess:ue=>{const Re=new Blob([ue],{type:"application/pdf"}),Be=URL.createObjectURL(Re);window.open(Be,"_blank")},onError:ue=>{rt({title:l("Error","kivicare-clinic-management-system"),text:ue?.response?.data?.message||ue?.message||l("Failed to generate invoice PDF.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};f.useEffect(()=>{n&&W(ve=>({...ve,patient:n,page:1}))},[n]),f.useEffect(()=>{if(v&&(p||h)){const ve=p||h;W(ue=>({...ue,doctor:ve,page:1}))}},[v,p,h]);const{data:R}=bn("settings","google-event-template",{},{enabled:j&&ls()}),G=[{value:"all",label:l("All","kivicare-clinic-management-system")},{value:"upcoming",label:l("Upcoming","kivicare-clinic-management-system")},{value:"past",label:l("Past","kivicare-clinic-management-system")}],ee=f.useMemo(()=>Object.fromEntries(Object.entries(le).filter(([ve,ue])=>ue!==""&&ue!==null&&ue!==void 0).map(([ve,ue])=>ue&&typeof ue=="object"&&"value"in ue?[ve,ue.value]:[ve,ue])),[le]),{data:ae,isLoading:I,error:H,refetch:B}=CZ(ee),te=ae?.data?.appointments||[],oe=ae?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ye=RZ(),me=AZ(),xe=DZ(),Ce=OZ(),he=f.useMemo(()=>{if(!x||!d||!o||!c)return{enabled:!1};const ve=parseFloat(m);if(isNaN(ve)||ve<=0)return{enabled:!1};try{return{enabled:!0,bufferHours:ve,serverTime:sl.tz(c,"YYYY-MM-DD HH:mm:ss",o)}}catch(ue){return console.error("Error parsing server time for cancellation buffer:",ue),{enabled:!1}}},[x,d,m,o,c]),_e=IZ(),Ke=async ve=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ue={...ee,format:ve,page:le.page,perPage:le.perPage};ue.status&&typeof ue.status=="object"&&(ue.status=ue.status.value);const Re=await _e.mutateAsync(ue);if(Re?.data?.appointments&&Re.data.appointments.length>0){const Be=new Date().toISOString().split("T")[0],Ue=Re.data.appointments.map(Ye=>{const{id:tt,date:Dt,time:Jt,description:Yn,status:_s,created_at:Wa,reports:gn,doctor_name:Ka,patient_name:kl,clinic_full_address:zn,clinic_name:Mr,appointment_formated_start_date:jl,payment_mode:Ir,cancellation_buffer:Bo,patient_contact_no:Or,patient_image_url:Es,custom_forms:Nl,charges:dd,services:md,service_array:ud,...hd}=Ye;return{id:tt,date:Dt,time:Jt,description:Yn,status:_s,created_at:Wa,reports:gn,doctor_name:Ka,patient_name:kl,clinic_full_address:zn,clinic_name:Mr,appointment_formated_start_date:jl,payment_mode:Ir,cancellation_buffer:Bo,patient_contact_no:Or,patient_image_url:Es,custom_forms:Nl,charges:dd,services:md,service_array:ud,...hd}});switch(ve){case"csv":cs(Ue,`appointments-${Be}.csv`);break;case"xls":ds(Ue,`appointments-${Be}.xls`);break;case"pdf":ms(Ue,`appointments-${Be}.pdf`,"Appointments List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else Bi(),rt({title:l("No Data to Export","kivicare-clinic-management-system"),text:l("No appointments found to export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(ue){console.error("Export error:",ue),Bi(),rt({title:l("Error!","kivicare-clinic-management-system"),text:ue.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},Ae=()=>Ke("csv"),$e=()=>Ke("xls"),[Je,et]=f.useState(!1),Me=()=>{Je||(et(!0),Ke("pdf"),setTimeout(()=>et(!1),2e3))},ge=(ve,ue)=>{const Re={service_name:ue.services||"Appointment",clinic_name:ue.clinicName||"",appointment_date:ue.appointmentStartDate||"",appointment_time:ue.appointmentStartTime||"",patient_name:ue.patientName||"",doctor_name:ue.doctorName||""};let Be=ve;for(const[Ue,Ye]of Object.entries(Re))Be=Be.replace(new RegExp(`{{${Ue}}}`,"g"),Ye);return Be},Ne=ve=>{if(!ve)return null;const ue=new Date(ve);return isNaN(ue.getTime())?null:ue},qe=ve=>{const ue=ve.getFullYear(),Re=String(ve.getMonth()+1).padStart(2,"0"),Be=String(ve.getDate()).padStart(2,"0"),Ue=String(ve.getHours()).padStart(2,"0"),Ye=String(ve.getMinutes()).padStart(2,"0"),tt=String(ve.getSeconds()).padStart(2,"0");return`${ue}${Re}${Be}T${Ue}${Ye}${tt}`},at=ve=>{const ue=R?.data?.data?.post_title||"";return encodeURIComponent(ge(ue,ve))},Kt=ve=>{const ue=R?.data?.data?.post_content||"",Re=ve.description?`

${ve.description}`:"";return encodeURIComponent(ge(ue,ve)+Re)},Gt=ve=>encodeURIComponent(ve.clinicAddress||ve.clinicName||""),tn=ve=>{const ue=Ne(ve.start||`${ve.appointmentStartDateWF}T${ve.appointmentStartTimeWF}`),Re=Ne(ve.end||`${ve.appointmentEndDateWF}T${ve.appointmentEndTimeWF}`);if(!ue||!Re)return"#";const Be=ue.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ue=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ye=at(ve),tt=Kt(ve),Dt=Gt(ve);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${Ye}&dates=${Be}/${Ue}&details=${tt}&location=${Dt}`},Ot=ve=>{const ue=Ne(ve.start||`${ve.appointmentStartDateWF}T${ve.appointmentStartTimeWF}`),Re=Ne(ve.end||`${ve.appointmentEndDateWF}T${ve.appointmentEndTimeWF}`);if(!ue||!Re)return"#";const Be=ue.toISOString(),Ue=Re.toISOString(),Ye=at(ve),tt=Kt(ve),Dt=Gt(ve);return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${Ye}&startdt=${Be}&enddt=${Ue}&body=${tt}&location=${Dt}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent`},Te=ve=>{const ue=Ne(ve.start||`${ve.appointmentStartDateWF}T${ve.appointmentStartTimeWF}`),Re=Ne(ve.end||`${ve.appointmentEndDateWF}T${ve.appointmentEndTimeWF}`);if(!ue||!Re)return"#";const Be=ue.toISOString(),Ue=Re.toISOString(),Ye=at(ve),tt=Kt(ve),Dt=Gt(ve);return`https://outlook.office.com/calendar/deeplink/compose?subject=${Ye}&startdt=${Be}&enddt=${Ue}&body=${tt}&location=${Dt}&path=/calendar/action/compose&rru=addevent`},Fe=ve=>{const ue=Ne(ve.start||`${ve.appointmentStartDateWF}T${ve.appointmentStartTimeWF}`),Re=Ne(ve.end||`${ve.appointmentEndDateWF}T${ve.appointmentEndTimeWF}`);if(!ue||!Re)return"#";const Be=qe(ue),Ue=qe(Re),Ye=at(ve),tt=Kt(ve),Dt=Gt(ve);return`https://calendar.yahoo.com/?v=60&TITLE=${Ye}&ST=${Be}&ET=${Ue}&DESC=${tt}&in_loc=${Dt}`},J=ve=>{const ue=Ne(ve.start||`${ve.appointmentStartDateWF}T${ve.appointmentStartTimeWF}`),Re=Ne(ve.end||`${ve.appointmentEndDateWF}T${ve.appointmentEndTimeWF}`);if(!ue||!Re)return"";const Be=ue.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ue=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Ye=new Date().toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",tt=`appointment-${ve.id}@kivicare.com`,Dt=ge(R?.data?.data?.post_title||"",ve),Jt=ge(R?.data?.data?.post_content||"",ve),Yn=ve.clinicName||"";return`BEGIN:VCALENDAR
      VERSION:2.0
      BEGIN:VEVENT
      UID:${tt}
      DTSTAMP:${Ye}
      DTSTART:${Be}
      DTEND:${Ue}
      SUMMARY:${Dt}
      DESCRIPTION:${Jt}
      LOCATION:${Yn}
      END:VEVENT
      END:VCALENDAR`},se=In(),ke=f.useMemo(()=>[se.accessor("patientId",{id:"patient",header:()=>l("Patient","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:ve=>i.jsx(Zt,{profileUrl:ve.row.original.patient_image_url,name:ve.row.original.patientName,email:ve.row.original.patientEmail,fallbackText:"PT",variant:"primary",size:"md",nameLabel:l("Patient","kivicare-clinic-management-system")})}),se.accessor("doctorId",{id:"doctor",header:()=>l("Doctor","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:ve=>i.jsx(Zt,{profileUrl:ve.row.original.doctor_image_url,name:ve.row.original.doctorName,email:ve.row.original.doctorEmail,fallbackText:"DR",variant:"info",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system")})}),...j&&!y&&!b?[se.accessor("clinicId",{id:"clinic",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:ve=>i.jsx(Zt,{profileUrl:ve.row.original.clinic_image_url,name:ve.row.original.clinicName,email:ve.row.original.clinicEmail,fallbackText:"CL",variant:"success",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")})})]:[],se.accessor(ve=>({startDate:ve.appointmentStartDate,startTime:ve.appointmentStartTime,endTime:ve.appointmentEndTime}),{id:"dateTime",header:()=>l("Date and Time","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"datetime",cell:ve=>{const{startDate:ue,startTime:Re,endTime:Be}=ve.getValue();return i.jsxs("div",{children:[ue," ",Re," - ",Be]})}}),se.accessor("services",{id:"services",header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!1,cell:ve=>ve.row.original.services||"-"}),se.accessor("charges",{id:"charges",header:()=>l("Charges","kivicare-clinic-management-system"),enableSorting:!1,cell:ve=>ve.getValue()||"-"}),se.accessor("payment",{id:"paymentMode",enableSorting:!1,header:()=>l("Payment Mode","kivicare-clinic-management-system"),cell:ve=>ve.row.original.payment?.mode||l("N/A","kivicare-clinic-management-system")}),se.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:ve=>{const ue={CANCELLED:0,BOOKED:1,PENDING:2,CHECK_OUT:3,CHECK_IN:4},Be={[ue.CANCELLED]:{text:l("Cancelled","kivicare-clinic-management-system"),class:"bg-danger-subtle"},[ue.BOOKED]:{text:l("Booked","kivicare-clinic-management-system"),class:"bg-success-subtle"},[ue.PENDING]:{text:l("Pending","kivicare-clinic-management-system"),class:"bg-warning-subtle"},[ue.CHECK_OUT]:{text:l("Check Out","kivicare-clinic-management-system"),class:"bg-info-subtle"},[ue.CHECK_IN]:{text:l("Check In","kivicare-clinic-management-system"),class:"bg-primary-subtle"}}[ve.getValue()]||{text:l("Unknown","kivicare-clinic-management-system"),class:"bg-secondary-subtle"};return i.jsx("span",{className:`badge ${Be.class} px-3 py-2`,children:Be.text})}}),...x?[...a==="yes"?[se.accessor("Add To Calendar",{id:"calandarevent",header:()=>l("Add To Calendar","kivicare-clinic-management-system"),cell:ve=>i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Add to Google Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:tn(ve.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Google"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Add to Outlook","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Ot(ve.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Outlook"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Add to Microsoft 365","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Te(ve.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Microsoft"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Add to Apple Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(J(ve.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Apple"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Add to Yahoo Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Fe(ve.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Yahoo"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:l("Download iCal","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(J(ve.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-success px-2 py-1",children:i.jsx("i",{className:"ph ph-download"})})})]})})]:[]]:[],...r("appointment_edit")||r("appointment_view")||r("appointment_delete")||r("appointment_cancel")?[se.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:ve=>{const ue={CANCELLED:0,BOOKED:1,CHECK_OUT:3,CHECK_IN:4},Re=parseInt(ve.cell.row.original.status),Be={isBooked:Re===ue.BOOKED,isCheckedIn:Re===ue.CHECK_IN,isCheckedOut:Re===ue.CHECK_OUT,isCancelled:Re===ue.CANCELLED,isToday:ve.cell.row.original.isToday},{isBooked:Ue,isCheckedIn:Ye,isCheckedOut:tt,isCancelled:Dt,isToday:Jt}=Be;let Yn=!0;const _s=ve.row.original;if(he.enabled)try{const zn=`${_s.appointmentStartDate} ${_s.appointmentStartTime}`,jl=sl.tz(zn,"YYYY-MM-DD HH:mm:ss",o).subtract(he.bufferHours,"hour");he.serverTime.isAfter(jl)&&(Yn=!1)}catch(zn){console.error("Error calculating cancellation buffer for appointment:",_s.id,zn),Yn=!0}const Wa=_s.isPast,gn=zn=>Mr=>i.jsx(ut,{id:`tooltip-${ve.cell.row.original.id}-${zn}`,...Mr,children:zn}),Ka=zn=>e?`/patient/profile/${e}/appointments/edit/${zn}`:`/appointments/edit/${zn}`,kl=zn=>e?`/patient/profile/${e}/appointments/view/${zn}`:`/appointments/view/${zn}`;return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[r("appointment_edit")&&!Ye&&!tt&&!Dt&&Yn&&!Wa&&i.jsx(Qe,{placement:"top",overlay:gn(l("Edit Appointment","kivicare-clinic-management-system")),children:i.jsx(gt,{to:Ka(ve.cell.row.original.id),className:"text-success",children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),r("appointment_view")&&i.jsxs(i.Fragment,{children:[i.jsx(Qe,{placement:"top",overlay:gn(l("View Appointment","kivicare-clinic-management-system")),children:i.jsx(gt,{to:kl(ve.cell.row.original.id),className:"text-gray",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Qe,{placement:"top",overlay:gn(l("Print Details","kivicare-clinic-management-system")),children:i.jsx("span",{onClick:()=>X(ve.cell.row.original.id),role:"button",className:"text-secondary fs-5 p-0",children:i.jsx("i",{className:"ph ph-printer fs-5 p-0"})})})]}),Ye&&i.jsx(Qe,{placement:"top",overlay:gn(l("Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/dashboard/${ve.cell.row.original.encounterId}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray ",children:i.jsx("i",{className:"ph ph-gauge fs-5"})})})}),Ye&&(()=>{const zn=ve?.cell?.row?.original?.zoom_data?.startUrl;return zn?i.jsx(Qe,{placement:"top",overlay:gn(l("Start Video Conference","kivicare-clinic-management-system")),children:i.jsx("a",{target:"_blank",href:zn,className:"btn btn-link text-primary fs-5 p-0",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-video-conference"})})}):!x&&!zn?i.jsx(Qe,{placement:"top",overlay:gn(l("Video Conference Not Available","kivicare-clinic-management-system")),children:i.jsx("span",{className:"text-secondary fs-5 p-0",onClick:()=>zt(ve.cell.row.original),role:"button",tabIndex:0,children:i.jsx("i",{className:"ph ph-warning-octagon"})})}):null})(),!x&&r("patient_appointment_status_change")&&i.jsxs(i.Fragment,{children:[Ue&&Jt&&i.jsx(Qe,{placement:"top",overlay:gn(l("Check In","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>dt(ve.cell.row.original,4),className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-in"})})}),Ye&&Jt&&i.jsx(Qe,{placement:"top",overlay:gn(l("Check Out","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>dt(ve.cell.row.original,3),className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-out"})})})]}),j&&x&&tt&&r("patient_review_add")&&i.jsx(Qe,{placement:"top",overlay:gn(l("Leave Review","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>{M(ve.cell.row.original),T(!0)},className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-star"})})}),!x&&r("appointment_delete")&&i.jsx(Qe,{placement:"top",overlay:gn(l("Delete Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>_t(ve.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})}),x&&r("appointment_cancel")&&Re!==ue.CANCELLED&&!Ye&&!tt&&Yn&&i.jsx(Qe,{placement:"top",overlay:gn(l("Cancel Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ct(ve.cell.row.original.id,0),children:i.jsx("i",{className:"ph ph-prohibit"})})})]})}})]:[]],[R,a,r,d,m,o,c]),Pe=[{type:"dateRange",name:"dateRange",label:l("Select Date Range","kivicare-clinic-management-system"),placeholder:l("Select date range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},...j&&!y&&!b?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:L,options:O,onChange:ve=>{fe(ve)},storeObject:!0}]:[],...e===!1&&!n&&!x?[{type:"paginatedSelect",name:"patient",label:l("Patient","kivicare-clinic-management-system"),placeholder:l("Select Patient","kivicare-clinic-management-system"),optionLoader:Q,options:q,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}]:[],...v?[]:[{type:"paginatedSelect",name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),placeholder:l("Select Doctor","kivicare-clinic-management-system"),optionLoader:V,options:K,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:l("Select Status","kivicare-clinic-management-system"),placeholder:l("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:l("Cancelled","kivicare-clinic-management-system")},{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"4",label:l("Check-In","kivicare-clinic-management-system")},{value:"3",label:l("Check-Out","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],Xe=f.useMemo(()=>["search","date_from","date_to","clinic","patient","doctor","status"].some(ue=>{const Re=le[ue];return typeof Re=="object"&&Re!==null?Re.value!==void 0&&Re.value!=="":Re!=null&&Re!==""})||le.timeFrame!=="upcoming",[le]),it=ve=>{W({...le,...ve,page:1}),S(!1)},lt=()=>{W({page:1,perPage:10,search:"",date:"",clinic:"",patient:"",doctor:"",status:"",orderby:"",order:"",timeFrame:"upcoming",startDate:"",endDate:"",date_from:"",date_to:""}),S(!1)},dt=(ve,ue)=>{if(ue===3){ve.encounterStatus==1?bt({title:l("","kivicare-clinic-management-system"),text:l("Please close the Encounter to checkout patient","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1}):bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),me.mutate({id:ve.id,status:ue},{onSuccess:Be=>{St({text:Be?.message||l("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Be=>{console.error("Update appointment status error:",Be);const Ue=Be?.response?.data?.message||Be?.message||l("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:Ue})}}))});return}ue===4&&bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),me.mutate({id:ve.id,status:ue},{onSuccess:Be=>{St({text:Be?.message||l("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Be=>{console.error("Update appointment status error:",Be);const Ue=Be?.response?.data?.message||Be?.message||l("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:Ue})}}))})},_t=ve=>{bt({title:l("Delete Appointment?","kivicare-clinic-management-system"),text:l("You're about to delete this appointment. This action cannot be undone.","kivicare-clinic-management-system"),confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep appointment","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ue=>{ue.isConfirmed&&(yt({title:l("Deleting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),ye.mutate(ve,{onSuccess:Re=>{St({text:Re?.message||l("Appointment has been deleted successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Delete appointment error:",Re);const Be=Re?.response?.data?.message||Re?.message||l("Failed to delete appointment. Please try again.","kivicare-clinic-management-system");rt({text:Be})}}))})},ct=(ve,ue)=>{bt({title:l("Cancel Appointment","kivicare-clinic-management-system"),text:l("Are you sure you want to cancel this appointment?","kivicare-clinic-management-system"),confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-warning",icon:"ph-warning",iconColor:"text-warning",bgIconColor:"bg-warning"}).then(Re=>{Re.isConfirmed&&(yt({title:l("Canceling...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),me.mutate({id:ve,status:ue},{onSuccess:Be=>{St({text:l("Appointment cancelled successfully.","kivicare-clinic-management-system")})},onError:Be=>{console.error("Cancel appointment error:",Be);const Ue=Be?.response?.data?.message||Be?.message||l("Failed to cancel appointment. Please try again.","kivicare-clinic-management-system");rt({text:Ue})}}))})},kt=()=>{B()},zt=({id:ve})=>{bt({title:l("Regenerate Video Conference Link","kivicare-clinic-management-system"),text:l("Are you sure you want to regenerate the video conference link for this appointment?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, regenerate","kivicare-clinic-management-system"),cancelButtonText:l("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ue=>{ue.isConfirmed&&(yt({title:l("Regenerating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),xe.mutate(ve,{onSuccess:Re=>{St({text:Re?.message||l("Video conference link has been regenerated successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Regenerate video conference error:",Re);const Be=Re?.response?.data?.data?.error||Re?.message||l("Failed to regenerate video conference link. Please try again.","kivicare-clinic-management-system");rt({text:Be})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("div",{children:!t&&i.jsx(ki,{})}),!x&&j&&i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap",children:i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>_(!0),children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Appointments","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[r("appointment_add")&&i.jsxs(gt,{to:e?`/patient/profile/${e}/appointments/add`:"/appointments/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Appointment","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>S(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!E,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:D,children:i.jsxs("div",{ref:D,className:"position-absolute top-0  w-100 d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(ot,{className:"react-select-box",classNamePrefix:"react-select",options:G,value:G.find(ve=>ve.value===le.timeFrame),isSearchable:!1,styles:{menuPortal:ve=>({...ve,zIndex:9999})},onChange:ve=>W(ue=>({...ue,timeFrame:ve.value}))}),i.jsxs(Qd,{children:[i.jsx(si,{onChange:ve=>{if(ve.length===2){const[ue,Re]=ve,Be=tt=>{const Dt=tt.getFullYear(),Jt=String(tt.getMonth()+1).padStart(2,"0"),Yn=String(tt.getDate()).padStart(2,"0");return`${Dt}-${Jt}-${Yn}`},Ue=Be(ue),Ye=Be(Re);W(tt=>({...tt,timeFrame:"all",date_from:Ue,date_to:Ye,page:1}))}},value:le.date_from&&le.date_to?[ii(le.date_from),ii(le.date_to)]:null,options:{mode:"range",dateFormat:bi(window.kc_frontend.date_format),locale:ai()},className:"form-control",placeholder:l("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:le.date_from&&le.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{W(ue=>({...ue,date_from:"",date_to:"",page:1}));const ve=document.querySelector('.form-control[placeholder="Select date range"]');ve&&ve._flatpickr&&ve._flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:le.search,onChange:ve=>{const ue=ve.target.value;W(Re=>({...Re,search:ue,page:1}))}})]})}),r("appointment_export")&&j&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Ae,disabled:_e.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:$e,disabled:_e.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Me,disabled:_e.isPending||Je,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:te,columns:ke,isLoading:I,error:H,currentPage:oe.currentPage,perPage:oe.perPage,totalItems:oe.total,lastPage:oe.lastPage,onPageChange:ve=>W(ue=>({...ue,page:ve})),onPerPageChange:ve=>W(ue=>({...ue,perPage:ve,page:1})),sorting:ie,onSortingChange:re,manualSorting:!0,enableSelection:!x,bulkActions:x?[]:[{label:l("Delete","kivicare-clinic-management-system"),action:(ve,ue)=>{const Re=ve.map(Be=>Be.id);bt({title:l("Delete Appointments?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${ve.length} appointments</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep appointments","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Be=>{Be.isConfirmed&&(yt({title:l("Deleting Appointments...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected appointments.<br>This won't take long.","kivicare-clinic-management-system")}),Ce.mutate(Re,{onSuccess:Ue=>{ue&&ue(),St({title:l("Appointment Deleted","kivicare-clinic-management-system"),text:l(`${ve.length} appointment${ve.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to appointments","kivicare-clinic-management-system")})},onError:Ue=>{console.error("Bulk delete appointments error:",Ue);const Ye=Ue?.response?.data?.message||Ue?.message||l("Failed to delete selected appointments. Please try again.","kivicare-clinic-management-system");rt({text:Ye})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:P,moduleNamePlural:"appointments",skeletonRows:5})]}),i.jsx(ha,{show:k,onHide:()=>S(!1),queryParams:le,onApplyFilters:it,onResetFilters:lt,title:l("Filters","kivicare-clinic-management-system"),fields:Pe,hasAppliedFilters:Xe}),j&&i.jsx(Ar,{show:N,onHide:()=>_(!1),onReopenImport:()=>_(!0),onDataRefresh:kt,context:"appointments"}),i.jsx(aJ,{show:w,onHide:()=>T(!1),appointment:A})]})};function YR({Formwatch:t,summaryData:e,summaryLoading:n,summaryError:s,className:a={}}){const[r,o]=f.useState(!0),{getPriceFormat:c}=ht(),d=t("service"),m=f.useMemo(()=>{const u={};return(e?.applied_taxes||[]).forEach(p=>{if(p.tax_name)if(u[p.tax_name])u[p.tax_name].count+=1,u[p.tax_name].totalAmount+=Number(p.tax_amount);else{let h=1;parseInt(p.tax_value)/parseInt(p.tax_amount)>1&&p.type==="fixed"&&(h=Math.ceil(parseInt(p.tax_value)/parseInt(p.tax_amount))),u[p.tax_name]={...p,count:h,totalAmount:Number(p.tax_amount)}}}),Object.values(u)},[e?.applied_taxes]);return!d||d.length===0?i.jsx(mt,{className:a,children:i.jsx(mt.Body,{className:"text-center",children:i.jsxs("p",{children:[" ",l("No Service Is Selected","kivicare-clinic-management-system")," "]})})}):n?i.jsx(mt,{className:a,children:i.jsx(vk,{})}):s?i.jsx(mt,{className:a,children:i.jsx(mt.Body,{className:"text-danger",children:l("Failed to load appointment summary.","kivicare-clinic-management-system")})}):i.jsx(mt,{className:a,children:i.jsxs(mt.Body,{children:[e?.services?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:u.title}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(u.price)})})]},p)),e?.applied_taxes?.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(e?.subtotal)})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 cursor-pointer applied-tax",onClick:()=>o(!r),children:[i.jsx("div",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{class:"ph ph-caret-up  fw-semibold rotated"}),i.jsx("p",{className:"m-0 text-danger",children:c(e?.tax)})]})]}),i.jsx(g_,{in:r,children:i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:m?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("div",{className:"font-size-14",children:[u.tax_name," ",u.count>1?` x${u.count}`:""," ",u.tax_type=="percentage"?`(${u.tax_value}%)`:""]}),i.jsx("div",{className:"text-end text-danger font-size-14 m-0",children:c(u.totalAmount)})]},p))})]})})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx("div",{children:i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")})}),i.jsx("div",{children:i.jsx("h5",{className:"m-0 text-primary",children:c(e?.grand_total)})})]})]})})}function pJ({showConfirmationModel:t,handleCloseConfirmationModel:e,handleConfirmAppointment:n,confirmationData:s,isSubmitting:a,setValue:r}){const{getPriceFormat:o,paymentGateway:c}=ht(),{clinicName:d,doctorName:m,service:u,date:p,time:h,grandTotal:g}=s||{},x=c?.map(v=>({value:v.id,label:v.name}));return i.jsx(st,{show:t,onHide:e,backdrop:"static",keyboard:!1,centered:!0,size:"md",children:i.jsxs(st.Body,{className:"appointment-confirmation-model",children:[i.jsx("div",{className:"d-flex justify-content-center mb-5 pb-lg-4 pb-0",children:i.jsx("div",{class:"modal-custom-icon",children:i.jsx("i",{class:"ph ph-question-mark text-primary"})})}),i.jsxs("div",{className:"text-center mb-5",children:[i.jsx("h4",{children:l("Confirm your Appointment","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Please review the details below to ensure everything is correct before proceeding.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"p-4 bg-body rounded-3 mb-3",children:[i.jsx("h6",{className:"pb-3 mb-4 border-bottom",children:l("Appointment Summary:","kivicare-clinic-management-system")}),i.jsxs(Un,{className:"gy-2",children:[i.jsx(Ct,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Clinic:","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:d||l("N/A","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Doctor:","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:m||l("N/A","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Service:","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:Array.isArray(u)?u.map(v=>v.label).join(", "):u?.label||l("N/A","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Date and Time:","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:p&&h?`${p}, ${h}`:l("N/A","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:l("Price:","kivicare-clinic-management-system")})}),i.jsx(Ct,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:g?o(g):l("Free","kivicare-clinic-management-system")})})]})]}),Number(g)>0&&i.jsxs("div",{children:[i.jsx("label",{children:l("Payment Gateway:","kivicare-clinic-management-system")}),i.jsx(ot,{options:x,onChange:v=>{r("payment_gateway",v.value)},className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:v=>({...v,zIndex:9999})}})]}),i.jsxs("div",{className:"d-flex justify-content-center gap-lg-4 gap-2 mt-5 pt-lg-2 pt-0",children:[i.jsx(Yt,{variant:"secondary",onClick:e,disabled:a,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:n,disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Confirming...","kivicare-clinic-management-system")]}):l("Confirm","kivicare-clinic-management-system")})]})]})})}const gJ={getSchedules:(t={})=>pe({endpoint:"clinic-schedules",method:"GET",data:t}),getSchedule:t=>pe({endpoint:`clinic-schedules/${t}`,method:"GET"}),createSchedule:t=>pe({endpoint:"clinic-schedules",method:"POST",data:t}),updateSchedule:(t,e)=>pe({endpoint:`clinic-schedules/${t}`,method:"PUT",data:e}),deleteSchedule:t=>pe({endpoint:`clinic-schedules/${t}`,method:"DELETE"}),getunavailableSchedule:(t={})=>pe({endpoint:"clinic-schedules/get-unavailable-schedule",method:"GET",data:t})},Hd={all:["clinicSchedules"],lists:()=>[...Hd.all,"list"],list:t=>[...Hd.lists(),{filters:t}],details:()=>[...Hd.all,"detail"],detail:t=>[...Hd.details(),t]},fJ=(t={},e={})=>ft({queryKey:Hd.list(t),queryFn:()=>gJ.getunavailableSchedule(t),...e}),vJ=()=>_r(()=>import("./index-B0HAhLET.js"),[],import.meta.url),xJ=He.lazy(()=>_r(()=>import("./react-stripe.esm--RVoZQbo.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckoutProvider}))),yJ=He.lazy(()=>_r(()=>import("./react-stripe.esm--RVoZQbo.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckout}))),bJ=t=>{if(!t)return{isValid:!1,error:l("No appointment data provided","kivicare-clinic-management-system")};const{publishable_key:e,client_secret:n}=t;return e?n?e.startsWith("pk_")?n.includes("_secret_")?{isValid:!0,error:null}:{isValid:!1,error:l("Invalid Stripe client secret format","kivicare-clinic-management-system")}:{isValid:!1,error:l("Invalid Stripe publishable key format","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Stripe client secret","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Stripe publishable key","kivicare-clinic-management-system")}},wJ=()=>{let t=null;try{t=dn()}catch{}return f.useEffect(()=>{_r(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url).catch(e=>console.warn("Failed to load payment gateway styles:",e))},[]),t},kJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const r=wJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState(null),[x,v]=f.useState(null),[y,b]=f.useState(!0),j=OR();f.useImperativeHandle(a,()=>({updateAppointmentData:N=>{c(N)}}),[]);const k=()=>{j.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,session_id:o.payment_response.data.payment_id,method:"POST"}).then(N=>{N.data.status=="success"?(Ee.success(N?.data?.message||l("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),e?setTimeout(()=>{e(N)},1500):r&&setTimeout(()=>{r("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Ee.error(N?.data?.message||l("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),n?n(N):r&&r("/appointments/add",{replace:!0}))})},S=()=>{Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep paying","kivicare-clinic-management-system")}).then(async N=>{if(N.isConfirmed)try{const _=window.kc_frontend?.rest_url||"/wp-json/",w=o?.appointment_id,T=o?.payment_response?.gateway||"stripe";await fetch(`${_}kivicare/v1/appointments/payment-cancel?appointment_id=${w}&gateway=${T}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Ee.success(l("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),setTimeout(()=>{n?n():r&&r("/appointments",{replace:!0})},1e3)}catch(_){console.error("Error cancelling appointment:",_),p(!1)}})};return f.useEffect(()=>{const N=async()=>{try{b(!0),v(null);const _=bJ(o.payment_response?.data);if(!_.isValid){v(_.error);return}const w=await vJ();g(w);const T=await w.loadStripe(o.payment_response?.data?.publishable_key);if(!T){v(l("Failed to load Stripe. Please check your connection and try again.","kivicare-clinic-management-system"));return}m(T)}catch(_){console.error("Error initializing Stripe:",_),v(l("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{b(!1),p(!0)}};if(!o){p(!1);return}N()},[o]),i.jsx(st,{show:u,centered:!0,size:"xl",animation:!0,onHide:()=>S(),backdrop:"static",keyboard:!1,className:"kivicare-payment-gateway-modal",...s,children:i.jsxs(st.Body,{className:"position-relative",children:[i.jsx("button",{className:"close-btn",onClick:()=>S(),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})}),d&&h&&i.jsx(He.Suspense,{fallback:i.jsx(Cg,{}),children:i.jsx(xJ,{stripe:d,options:{clientSecret:o?.payment_response?.data?.client_secret,onComplete:k},children:i.jsx(yJ,{})})})]})})}),jJ=t=>{if(!t)return{isValid:!1,error:l("No appointment data provided","kivicare-clinic-management-system")};const{key_id:e,order_id:n,amount:s,currency:a}=t;return e?n?!s||isNaN(s)?{isValid:!1,error:l("Invalid amount","kivicare-clinic-management-system")}:a?{isValid:!0,error:null}:{isValid:!1,error:l("Missing currency","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Razorpay order ID","kivicare-clinic-management-system")}:{isValid:!1,error:l("Missing Razorpay key ID","kivicare-clinic-management-system")}},NJ=()=>{let t=null;try{t=dn()}catch{}return t},CJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const r=NJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),h=OR();f.useImperativeHandle(a,()=>({updateAppointmentData:x=>{c(x)}}),[]);const g=async()=>{if((await Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:l("No, keep paying","kivicare-clinic-management-system")})).isConfirmed)try{const v=window.kc_frontend?.rest_url||"/wp-json/",y=o?.appointment_id,b=o?.payment_response?.gateway||"razorpay";await fetch(`${v}kivicare/v1/appointments/payment-cancel?appointment_id=${y}&gateway=${b}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Ee.success(l("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{n?n():r&&r("/appointments",{replace:!0})},1e3)}catch(v){console.error("Error cancelling appointment:",v),n?n():r&&r("/appointments",{replace:!0})}};return f.useEffect(()=>{const x=async()=>{try{p(!0),m(null);const v=jJ(o.payment_response?.data);if(!v.isValid){m(v.error);return}const y=o.payment_response?.data;if(await(S=>new Promise((N,_)=>{const w=document.createElement("script");w.src=S,w.onload=()=>N(!0),w.onerror=()=>_(new Error("Failed to load Razorpay SDK")),document.body.appendChild(w)}))("https://checkout.razorpay.com/v1/checkout.js"),!window.Razorpay)throw new Error("Razorpay SDK failed to load");const j={key:y.key_id,currency:y.currency.toUpperCase(),order_id:y.order_id,handler:function(S){h.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,payment_id:S.razorpay_payment_id,razorpay_order_id:S.razorpay_order_id,razorpay_signature:S.razorpay_signature,method:"POST"}).then(N=>{N.data.status==="success"?(Ee.success(N?.data?.message||l("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{e?e(N):r&&r("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Ee.error(N?.data?.message||l("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n(N):r&&r("/appointments/add",{replace:!0}))}).catch(N=>{Ee.error(l("Payment processing failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n():r&&r("/appointments/add",{replace:!0})})},modal:{ondismiss:function(){g()}},prefill:{name:o.patient_name||"",email:o.patient_email||"",contact:o.patient_contact||""},notes:{appointment_id:o.appointment_id,transaction_ref:y.transaction_ref},theme:{color:"#3399cc"}};new window.Razorpay(j).open()}catch(v){console.error("Error initializing Razorpay:",v),m(l("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{p(!1)}};o&&x()},[o]),i.jsxs(i.Fragment,{children:[u&&i.jsxs("div",{className:"text-center",children:[i.jsx(Cg,{animation:"border"}),i.jsx("p",{children:l("Loading Razorpay...","kivicare-clinic-management-system")})]}),d&&i.jsx("div",{className:"alert alert-danger",children:d})]})}),yl={getCustomForms:(t={})=>pe({endpoint:"custom-forms/admin",method:"GET",data:t}),getCustomFormsRender:(t={})=>pe({endpoint:"custom-forms/render",method:"GET",data:t}),getCustomForm:t=>pe({endpoint:`custom-forms/${t}`,method:"GET"}),createCustomForm:t=>pe({endpoint:"custom-forms",method:"POST",data:t}),updateCustomForm:(t,e)=>pe({endpoint:`custom-forms/${t}`,method:"PUT",data:e}),deleteCustomForm:t=>pe({endpoint:`custom-forms/${t}`,method:"DELETE"}),getCustomFormStats:(t={})=>pe({endpoint:"custom-forms/stats",method:"GET",data:t}),bulkDeleteCustomForms:t=>pe({endpoint:"custom-forms/bulk-delete",method:"POST",data:{ids:t}}),updateCustomFormStatus:(t,e)=>pe({endpoint:`custom-forms/${t}/status`,method:"PUT",data:{status:e}}),getCustomFormTableConfig:()=>pe({endpoint:"custom-forms/table-config",method:"GET"}),submitCustomForm:t=>pe({endpoint:"custom-forms/submit",method:"POST",data:t})},xi={all:["custom-forms"],lists:()=>[...xi.all,"list"],list:t=>[...xi.lists(),{filters:t}],details:()=>[...xi.all,"detail"],detail:t=>[...xi.details(),t],tableConfig:()=>[...xi.all,"table-config"]},SJ=(t={},e={})=>ft({queryKey:xi.list(t),queryFn:()=>yl.getCustomForms(t),...e}),sd=(t={},e={})=>ft({queryKey:xi.list(t),queryFn:()=>yl.getCustomFormsRender(t),...e}),QR=(t,e={})=>ft({queryKey:xi.detail(t),queryFn:()=>yl.getCustomForm(t),enabled:!!t,...e}),_J=(t={})=>{const e=ze();return Le({mutationFn:n=>yl.createCustomForm(n),onSuccess:n=>{e.invalidateQueries({queryKey:xi.lists()}),e.setQueryData(xi.detail(n.id),n)},...t})},EJ=(t={})=>{const e=ze();return Le({mutationFn:({id:n,...s})=>yl.updateCustomForm(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:xi.lists()}),e.setQueryData(xi.detail(s.id),n)},...t})},TJ=(t={})=>{const e=ze();return Le({mutationFn:n=>yl.deleteCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:xi.lists()}),e.removeQueries({queryKey:xi.detail(s)})},...t})},AJ=(t={})=>{const e=ze();return Le({mutationFn:({id:n,status:s})=>yl.updateCustomFormStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:xi.lists()}),e.setQueryData(xi.detail(s.id),n)},...t})},DJ=(t={})=>{const e=ze();return Le({mutationFn:n=>yl.submitCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:xi.lists()})},...t})},Oa=f.forwardRef(({fields:t,data:e={},readOnly:n=!0,onChange:s,formId:a},r)=>{const{control:o,handleSubmit:c,watch:d,reset:m,trigger:u,formState:{errors:p,isValid:h,isDirty:g}}=Xt({defaultValues:e,mode:"onBlur",reValidateMode:"onBlur"}),x=d(),[v,y]=f.useState({isValid:!0,errors:{}}),b=f.useRef(p);f.useEffect(()=>{b.current=p},[p]);const j=f.useCallback(async()=>{const _=await u();await new Promise(A=>setTimeout(A,100));const w=b.current,T={isValid:_,errors:w};return y(T),T},[u]);f.useImperativeHandle(r,()=>({validateForm:async()=>(await j()).isValid,getFormData:()=>x,getFormErrors:()=>v.errors,getFormValidationState:()=>v,isFormValid:()=>v.isValid,resetForm:(_={})=>{m(_),y({isValid:!0,errors:{}})},triggerValidation:async()=>await j()}),[x,v,j,m]),f.useEffect(()=>{Object.keys(p).length>0&&y(_=>({..._,errors:p,isValid:!1}))},[p]),f.useEffect(()=>{s&&s(x)},[x,s]);const k=_=>{const w={};return _.required&&(w.required=_.errorMessage||l("This field is required","kivicare-clinic-management-system")),_.type==="email"&&(w.pattern={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}),_.type==="number"&&(_.min!==void 0&&(w.min={value:_.min,message:l(`Minimum value is ${_.min}`,"kivicare-clinic-management-system")}),_.max!==void 0&&(w.max={value:_.max,message:l(`Maximum value is ${_.max}`,"kivicare-clinic-management-system")})),_.minLength&&(w.minLength={value:_.minLength,message:l(`Minimum length is ${_.minLength} characters`,"kivicare-clinic-management-system")}),_.maxLength&&(w.maxLength={value:_.maxLength,message:l(`Maximum length is ${_.maxLength} characters`,"kivicare-clinic-management-system")}),_.pattern&&(w.pattern={value:new RegExp(_.pattern),message:_.patternMessage||l("Invalid format","kivicare-clinic-management-system")}),_.validate&&(w.validate=_.validate),w},S=_=>{if(n)return N(_);const w=k(_),T=!!p[_.id],A=p[_.id]?.message,M={id:`${a}_${_.id}`,isInvalid:T,"aria-describedby":T?`${a}_${_.id}_feedback`:void 0};switch(_.type){case"textarea":return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsx(Mt.Control,{as:"textarea",rows:3,...P,placeholder:_.placeholder,...M})}),T&&i.jsx(Mt.Control.Feedback,{id:`${M.id}_feedback`,type:"invalid",style:{display:"block"},children:A})]});case"select":return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsx(ot,{value:_.options?.find(D=>D===P.value)?{label:_.options.find(D=>D===P.value),value:P.value}:null,onChange:D=>P.onChange(D?.value||""),onBlur:P.onBlur,options:_.options?.map(D=>({label:D,value:D}))||[],placeholder:_.placeholder||l("Select an option","kivicare-clinic-management-system"),className:`react-select-box ${T?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})},...M})}),T&&i.jsx("div",{id:`${M.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"radio":return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsx("div",{className:T?"is-invalid":"",children:_.options?.map((D,O)=>i.jsx(Mt.Check,{id:O===0?M.id:`${M.id}_${O}`,inline:!0,type:"radio",label:D,name:_.id,value:D,checked:P.value===D,onChange:F=>P.onChange(F.target.value),onBlur:P.onBlur,isInvalid:T},O))})}),T&&i.jsx("div",{id:`${M.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"checkbox":return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsx(Mt.Check,{type:"checkbox",label:_.placeholder||_.label,checked:!!P.value,onChange:D=>P.onChange(D.target.checked),onBlur:P.onBlur,isInvalid:T,...M})}),T&&i.jsx("div",{id:`${M.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"file":const E=_.fileTypes&&_.fileTypes.length>0?_.fileTypes.map(P=>P.id||P).join(","):"";return i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>{const D=P.value,O=D&&(D.url||D.name);return i.jsx(cu,{id:`custom-form-field-${_.id}`,name:_.id,accept:E,required:_.required,defaultFile:O?D.url:"",defaultFileId:O?D.id:"",onChange:(F,q)=>{P.onChange({id:q,url:F.url,name:F.filename||F.name})},errors:p,readOnly:n})}});case"date":return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsxs("div",{className:"input-group",children:[i.jsx(si,{className:`form-control ps-3 pe-5 ${T?"is-invalid":""}`,placeholder:_.placeholder,options:{dateFormat:bi(window.kc_frontend.date_format),disableMobile:!0,locale:ai()},...M,value:P.value?ii(P.value):"",onChange:async D=>{const O=D[0]?Ql(D[0]):"";P.onChange(O),await u(_.id)}}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]})}),T&&i.jsx("div",{id:`${M.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});default:return i.jsxs(i.Fragment,{children:[i.jsx(je,{name:_.id,control:o,rules:w,render:({field:P})=>i.jsx(Mt.Control,{type:_.type,...P,placeholder:_.placeholder,...M})}),T&&i.jsx(Mt.Control.Feedback,{id:`${M.id}_feedback`,type:"invalid",children:A})]})}},N=_=>{const w=x[_.id];if(w==null||w==="")return i.jsx("div",{className:" small",children:i.jsx("em",{children:l("No data","kivicare-clinic-management-system")})});switch(_.type){case"textarea":return i.jsx("div",{className:"font-size-14 h6 mb-0 text-prewrap",children:w});case"select":{const T=_.options?.find(A=>A===w);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:T||w})}case"radio":{const T=_.options?.find(A=>A===w);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:T||w})}case"checkbox":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:w?l("Yes","kivicare-clinic-management-system"):l("No","kivicare-clinic-management-system")});case"file":return w?w instanceof File?i.jsxs("div",{className:"font-size-14 h6 mb-0",children:[i.jsx("div",{children:w.name}),i.jsxs("small",{children:[(w.size/1024).toFixed(2)," KB"]})]}):i.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0 text-primary",children:l("View File","kivicare-clinic-management-system")}):i.jsx("div",{className:"small",children:i.jsx("em",{children:l("No file","kivicare-clinic-management-system")})});case"date":try{const T=new Date(w);if(!isNaN(T.getTime())){const A=T.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return i.jsx("div",{className:"font-size-14 h6 mb-0",children:A})}}catch{}return i.jsx("div",{className:"font-size-14 h6 mb-0",children:w});case"email":return i.jsx("a",{href:`mailto:${w}`,className:"d-block font-size-14 h6 mb-0",children:w});case"tel":case"phone":return i.jsx("a",{href:`tel:${w}`,className:"d-block font-size-14 h6 mb-0",children:w});case"url":return i.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0",children:w});case"number":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:Number(w).toLocaleString()});default:return i.jsx("div",{className:"font-size-14 h6 mb-0",children:w})}};return!t||t.length===0?i.jsx("div",{children:l("No fields to display","kivicare-clinic-management-system")}):i.jsx("div",{className:`custom-form-container ${n?"bg-body p-3 rounded":""}`,children:i.jsx(Un,{className:"gy-3",children:t.map(_=>i.jsx(Ct,{className:`${_.columnClass} custom-form-border-end `,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:`form-label ${n?"text-body":""}`,htmlFor:`${a}_${_.id}`,children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:RR(_.label)}}),_.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),S(_)]})},_.id))})})});Oa.displayName="CustomFormRenderer";const RJ=({label:t,value:e,onChange:n,placeholder:s="",type:a="text",isDisable:r=!1,error:o=null,showError:c=!0,className:d="",hasTooltip:m=!1,hasUrl:u="",name:p="",key:h="",required:g=!1,register:x=()=>{},...v})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[(t||g||m)&&i.jsx(i.Fragment,{children:i.jsxs("label",{className:"form-label",children:[t,g&&i.jsx("span",{className:"input-field-required text-danger",children:"*"}),m&&i.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5"})})]})}),i.jsx("input",{name:p,type:a,className:`form-control ${d}`,placeholder:s,value:e,onChange:y=>n(y.target.value),disabled:r,...x(p,{required:g}),...v},h)]}),o&&c&&i.jsx("div",{className:"text-danger",children:o?.message||l("This field is required","kivicare-clinic-management-system")})]}),Ut=f.memo(RJ),ln=({label:t,checked:e,onChange:n,badge:s=null,className:a="",disabled:r=!1,error:o=null,inputClassName:c="",...d})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:`form-check form-switch custom-switch-xl p-0 d-flex align-items-md-center justify-content-between column-gap-3 row-gap-1 flex-md-row flex-column ${a}`,children:[t&&i.jsxs("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label m-0 h6 font-size-14",children:[i.jsx("span",{className:"mb-0 font-size-14",children:t}),s&&i.jsx("span",{className:`badge rounded-pill ${s.className}`,children:s.text})]}),i.jsx("input",{className:`form-check-input ${c}`,type:"checkbox",role:"switch",checked:e==="on"||e===!0,onChange:m=>{const u=m.target.checked;n(typeof e=="string"?u?"on":"off":!!u)},disabled:r,...d})]}),o&&i.jsx("div",{className:"text-danger",children:o.message})]}),uC=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],Qv=()=>{};function PJ(t){function e(a){const r={},o={},c=uC.map(d=>d.key);return Object.entries(a).forEach(d=>{let[m,u]=d;c.includes(m)&&He.isValidElement(u)?(r[m]=u,o[m]=" "):o[m]=u}),[r,o]}function n(a,r){Object.entries(r).forEach(o=>{let[c,d]=o;const u=uC.find(h=>h.key===c).getter(t),p=vI.createRoot(u);p.render(d),a.__roots.push(p)})}function s(a){a.__roots.forEach(r=>{r.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(He.isValidElement(a[0])||He.isValidElement(a[1])){const r={};return["title","html","icon"].forEach((o,c)=>{a[c]!==void 0&&(r[o]=a[c])}),r}else return t.argsToParams(a)}_main(a,r){this.__roots=[],this.__params=Object.assign({},r,a);const[o,c]=e(this.__params),d=c.willOpen||Qv,m=c.didOpen||Qv,u=c.didDestroy||Qv;return super._main(Object.assign({},c,{willOpen:p=>{n(this,o),d(p)},didOpen:p=>{setTimeout(()=>{m(p)})},didDestroy:p=>{u(p),s(this)}}))}update(a){Object.assign(this.__params,a),s(this);const[r,o]=e(this.__params);super.update(o),n(this,r)}}}const Ze=PJ(Et),Zv={patient:"/patient",doctor:"/doctor",receptionist:"/receptionist",appointments:"/appointments",encounter:"/encounter",clinic:"/clinic",service:"/service","doctor-session":"/doctor-session",tax:"/tax",billings:"/billings"},Gn=({text:t=l("Back","kivicare-clinic-management-system"),className:e="",size:n="",variant:s="primary",iconClass:a="ph ph-caret-left",showIcon:r=!0,style:o={},...c})=>{const d=dn(),m=Hn(),u=m.pathname.replace(/\/$/,"");if(Object.values(Zv).includes(u)||u==="")return null;const p=()=>{if(window.history.state&&window.history.state.idx>0){d(-1);return}let x="/";const v=m.pathname.split("/").filter(Boolean);for(const y of v)if(Zv[y]){x=Zv[y];break}d(x,{replace:!0})},h=n?`btn-${n}`:"",g=["btn","d-flex align-items-center gap-1 back-btn",`btn-${s}`,h,"fw-semibold",e].filter(Boolean).join(" ");return i.jsxs("button",{type:"button",className:g,onClick:p,style:o,...c,children:[r&&i.jsx("i",{className:`${a}`}),i.jsx("span",{className:"font-size-14",children:t})]})},Xa=He.forwardRef(({title:t,children:e,helpUrl:n=null,footer:s=null,headerActions:a=null,className:r="",...o},c)=>i.jsx("div",{className:`card ${r}`,ref:c,...o,children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[t,n&&i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-2 d-inline-flex align-items-center p-0 ",children:i.jsx("i",{className:"ph ph-question align-middle h6 text-primary"})})]}),a&&i.jsx("div",{children:a})]}),e,s&&i.jsx("div",{className:"mt-3",children:s})]})})),ef=f.forwardRef(({id:t="kc-image-upload-input",name:e="image",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:r,className:o="",disabled:c=!1,required:d=!1,label:m="",register:u,setValue:p,errors:h={},accept:g,allowFile:x=!1,...v},y)=>{const[b,j]=f.useState(n),[k,S]=f.useState(s),[N,_]=f.useState(!1),[w,T]=f.useState(!1),[A,M]=f.useState(null),E=f.useRef(null),P=f.useRef(null),D=h[e],O=!!b,F={};d&&(F.required=l("This field is required","kivicare-clinic-management-system"));const{ref:q,...U}=u?u(e,F):{ref:null},K=!!D||!!A,ne=D?.message||A;f.useEffect(()=>{_(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{j(n||""),S(s||"")},[n,s]),f.useEffect(()=>{s&&re(n||"",s)},[s]);const Y=async V=>{try{T(!0),M(null);const Z=window.kc_frontend?.rest_url,X=await pe({endpoint:`${Z}/wp/v2/media`,method:"POST",data:V,isFile:!0});if(!X||X.success===!1)throw new Error(X?.message||l("Failed to upload image","kivicare-clinic-management-system"));return j(X.source_url),S(X.id),re(X.source_url,X.id),a&&a({id:X.id,url:X.source_url,filename:X.title?.raw||"",type:X.media_type,subtype:X.mime_type,size:X.media_details?.filesize||0},X.id),X}catch(Z){throw console.error("Error uploading image:",Z),M(Z.message||l("Failed to upload image","kivicare-clinic-management-system")),Z}finally{T(!1)}},fe=V=>{if(V.preventDefault(),!window.wp||!window.wp.media){P.current&&P.current.click();return}M(null);const Z=window.wp.media({title:l("Select or Upload Image","kivicare-clinic-management-system"),button:{text:l("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:x?"":"image"}});Z.on("select",function(){const X=Z.state().get("selection").first().toJSON();if(!x&&X.type!=="image"){M(l("Please select an image file","kivicare-clinic-management-system"));return}j(X.url),S(X.id),re(X.url,X.id),a&&a({id:X.id,url:X.url,filename:X.filename,type:X.type,subtype:X.subtype,size:X.filesizeInBytes},X.id)}),Z.open()},le=async V=>{const Z=V.target.files[0];if(Z){if(M(null),!x&&!Z.type.startsWith("image/")){M(l("Please select an image file","kivicare-clinic-management-system"));return}try{if(!x||Z.type.startsWith("image/")){const X=URL.createObjectURL(Z);j(X)}else j(Z.name);S(""),re(!x||Z.type.startsWith("image/")?URL.createObjectURL(Z):"",""),a&&a({url:!x||Z.type.startsWith("image/")?URL.createObjectURL(Z):"",filename:Z.name,type:Z.type,size:Z.size,file:Z},""),N||await Y(Z)}catch(X){console.error("Error handling file:",X)}}},W=V=>{if(c){V.preventDefault();return}w||(N?fe(V):P.current&&P.current.click())},z=V=>{if(c){V.preventDefault();return}N?fe(V):P.current&&P.current.click()},ie=()=>{j(""),S(""),M(null),re("",""),P.current&&(P.current.value=""),r&&r()};f.useImperativeHandle(y,()=>({clearImage:ie}));const re=(V="",Z="")=>{if(E.current)try{if(E.current.value=Z,U&&typeof U.onChange=="function")try{U.onChange({target:{value:Z},currentTarget:{value:Z}})}catch{}try{const X=new Event("input",{bubbles:!0});E.current.dispatchEvent(X);const R=new Event("change",{bubbles:!0});E.current.dispatchEvent(R)}catch{}}catch{}a&&a({id:Z,url:V,filename:"",type:"image",size:0},Z);try{typeof p=="function"&&(p(e,V),p(`${e}Id`,Z))}catch{}},de=V=>{V.preventDefault(),V.stopPropagation(),!(c||w)&&ie()},L=V=>{E.current=V,q&&q(V)},Q=g||(x?void 0:"image/*");return i.jsxs("div",{className:`form-group mb-3 ${o}`,children:[m&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[m,d&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsxs("div",{className:`kc-image-upload ${O?"uploaded":""} ${w?"uploading":""} ${K?"is-invalid":""}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,...U,value:k||"",ref:L,readOnly:!0,disabled:c}),i.jsx("input",{type:"file",id:t,className:"kc-image-upload-input d-none",onChange:le,accept:Q,ref:P,disabled:w||c,"aria-invalid":K?"true":"false","aria-describedby":K?`${t}-error`:void 0}),i.jsx("div",{className:`kc-image-upload-label ${K?"border-danger":""}  ${c?"disabled":""}`,onClick:W,style:c?{pointerEvents:"none",opacity:.6}:{},children:O?i.jsxs("span",{className:"kc-image-uploaded-image-container",children:[i.jsx("span",{className:"kc-image-uploaded-image",children:typeof b=="string"&&/\.(jpe?g|png|gif|webp|bmp|svg)$/i.test(b)?i.jsx("img",{src:b,alt:l("uploaded","kivicare-clinic-management-system")}):i.jsx("span",{children:b})}),i.jsxs("div",{className:"upload-actions",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Edit image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"edit-upload-btn",onClick:z,disabled:w||c,children:w?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"remove-upload-btn",onClick:de,disabled:w||c,children:i.jsx("i",{className:"ph ph-x"})})})]})]}):i.jsxs("span",{className:"kc-image-upload-image-container",children:[i.jsx("span",{className:"kc-image-upload-image",children:w?i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Uploading...","kivicare-clinic-management-system")})}):x?i.jsx("i",{className:"ph ph-upload-simple"}):i.jsx("i",{className:"ph ph-camera"})}),i.jsx("span",{className:"upload-text",children:w?l("Uploading...","kivicare-clinic-management-system"):N&&!x?l("Choose Image","kivicare-clinic-management-system"):l("Choose file","kivicare-clinic-management-system")})]})}),K&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:ne})]})]})});ef.propTypes={id:De.string,name:De.string,defaultImage:De.string,defaultImageId:De.oneOfType([De.string,De.number]),onChange:De.func,onClear:De.func,setValue:De.func,className:De.string,disabled:De.bool,required:De.bool,label:De.string,register:De.func,errors:De.object,accept:De.string,allowFile:De.bool};const Xv=({label:t=l("Select Media","kivicare-clinic-management-system"),value:e,onChange:n,className:s="",preview:a=!0,disabled:r=!1})=>{const o=f.useRef(null),c=d=>{if(!window.wp||!window.wp.media){alert("WordPress media library not loaded.");return}if(o.current){o.current.open();return}const m=window.wp.media({title:l("Select or Upload Media","kivicare-clinic-management-system"),button:{text:l("Use this media","kivicare-clinic-management-system")},multiple:!1});m.on("select",()=>{const u=m.state().get("selection").first().toJSON();d(u)}),o.current=m,m.open()};return i.jsx(f.Fragment,{children:i.jsxs("div",{className:"row align-items-center",children:[i.jsxs("div",{className:`form-group ${s}`,children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:t})}),i.jsx("input",{className:"form-control",type:"file",style:{cursor:"pointer"},onClick:d=>{d.preventDefault(),c(n)},readOnly:!0})]}),a&&e&&(e.url||typeof e=="string")?i.jsx("div",{className:"mt-2 col-md-6",children:i.jsx("img",{src:typeof e=="string"?e:e.url,alt:"media_preview",className:"img-fluid",style:{maxHeight:100}})}):i.jsx("div",{className:"col-md-6 mt-2",children:i.jsx("p",{className:"double-lines-spinner"})})]})})},ri=({text:t,title:e=l("Premium Feature","kivicare-clinic-management-system"),icon:n="ph-lock",className:s="",overlayStyle:a={},contentStyle:r={},link:o=""})=>{const c={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#0000009e",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9,borderRadius:8,...a},d={textAlign:"center",padding:"1.5rem",color:"white",...r};return i.jsx("a",{href:o,className:"text-decoration-none",children:i.jsx("div",{style:c,className:s,children:i.jsxs("div",{style:d,children:[i.jsx("div",{className:"mb-4 fs-1",children:i.jsx("i",{className:`ph ${n} text-white`})}),i.jsx("h4",{className:"text-white mb-3",children:e}),i.jsx("p",{className:"text-white",children:t})]})})})},MJ=({fields:t,data:e,title:n})=>{const s=t||[],a=e||{};if(Object.keys(a).length===0)return null;const r=(o,c)=>{if(c==null||c==="")return null;const d=o?.type;if(d==="multi_select"){let m=[];return c.forEach(u=>{m.push(u?.label)}),i.jsx("span",{className:"text-dark",children:m.join(", ")})}if(d==="file_upload"){let m=c;if(typeof c=="string")try{m=JSON.parse(c)}catch{return i.jsx("span",{className:"text-dark",children:c})}if(m&&typeof m=="object"&&m.url)return i.jsx("a",{href:m.url,download:!0,className:"text-primary text-decoration-underline",style:{cursor:"pointer"},children:m.name||l("Download File","kivicare-clinic-management-system")})}return Array.isArray(c)?i.jsx("span",{className:"text-dark",children:c.join(", ")}):typeof c=="object"&&c!==null?c.label?i.jsx("span",{className:"text-dark",children:c.label}):c.value?i.jsx("span",{className:"text-dark",children:c.value}):i.jsx("span",{className:"text-dark",children:JSON.stringify(c)}):i.jsx("span",{className:"text-dark",children:String(c)})};return i.jsxs("div",{className:"mt-4  border-top pt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:n||l("Other Information","kivicare-clinic-management-system")}),Object.entries(a).map(([o,c])=>{const d=s.find(p=>p.id==o),m=d?.name||`${l("Field","kivicare-clinic-management-system")} ${o}`,u=r(d,c);return u?i.jsxs("div",{className:"mb-2",children:[i.jsxs("strong",{children:[m,":"]})," ",u]},o):null})]})};function Xp({trigger:t,children:e,placement:n="bottom"}){const[s,a]=f.useState(!1),r=f.useRef(null),o=()=>{r.current&&clearTimeout(r.current),a(!0)},c=()=>{r.current=setTimeout(()=>{a(!1)},50)},d=m=>i.jsx(Mx,{id:"button-tooltip",...m,className:"contact-card-popover border-0 bg-transparent shadow-none",onMouseEnter:o,onMouseLeave:c,children:i.jsx(Mx.Body,{className:"p-0 border-0 bg-transparent",children:i.jsx("div",{className:"contact-card",style:{pointerEvents:"auto",minWidth:"500px"},children:e})})});return i.jsx(Qe,{placement:n,show:s,overlay:d,trigger:["hover","focus"],children:i.jsx("span",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:c,children:t})})}const Tm=({avatar:t,name:e,email:n,phone:s,address:a})=>i.jsxs("div",{className:"contact-card-wrapper",children:[i.jsxs("div",{className:"contact-card-header",children:[t?i.jsx("img",{src:t,className:"contact-card-avatar",alt:e||"Avatar"}):i.jsx("span",{className:"contact-card-avatar-fallback",children:i.jsx(Mc,{alt:e,size:28})}),i.jsx("div",{className:"contact-card-name",children:e})]}),(n||s)&&i.jsxs("div",{className:"contact-card-row",children:[n&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("a",{href:`mailto:${n}`,className:"contact-card-link",children:n})]}),s&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{children:s})]})]}),a&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{children:a})]})]});Tm.propTypes={avatar:De.string,name:De.string.isRequired,email:De.string,phone:De.string,address:De.string,fallbackIcon:De.string};const yk={getCustomFieldsByModule:(t={})=>pe({endpoint:"setting/custom-field/by-module",method:"GET",data:t}),saveCustomFieldData:t=>pe({endpoint:"setting/custom-field/save-data",method:"POST",data:t}),getCustomFieldData:(t={})=>pe({endpoint:"setting/custom-field/get-data",method:"GET",data:t})},Bc={all:["customFields"],byModule:(t,e)=>[...Bc.all,"byModule",t,e],data:(t,e)=>[...Bc.all,"data",t,e]},ZR=(t,e=null)=>ft({queryKey:Bc.byModule(t,e),queryFn:()=>yk.getCustomFieldsByModule({module_type:t,...e&&{module_id:e}}),enabled:!!t}),bk=()=>{const t=ze();return Le({mutationFn:({moduleType:e,moduleId:n,fieldsData:s})=>yk.saveCustomFieldData({module_type:e,module_id:n,fields_data:s}),onSuccess:(e,n)=>{t.invalidateQueries(Bc.data(n.moduleType,n.moduleId)),t.invalidateQueries(Bc.byModule(n.moduleType,n.moduleId))}})},Sy=(t,e,n={})=>ft({queryKey:Bc.data(t,e),queryFn:()=>yk.getCustomFieldData({module_type:t,module_id:e}),enabled:n.enabled!==void 0?n.enabled:!!t&&!!e,...n}),tf=({moduleType:t,moduleId:e=null,control:n,errors:s,setValue:a,watch:r,initialData:o=[]})=>{const[c,d]=f.useState(!1),[m,u]=f.useState(null),{module_config:p={}}=ht()||{};if(p?.custom_fields=="0")return null;const{data:h,isLoading:g,error:x}=ZR(t,e),v=bk(),y=h?.data||[],b=f.useMemo(()=>Array.isArray(o)?o:o&&typeof o=="object"?Object.entries(o).map(([w,T])=>({id:Number(w),value:T})):[],[o]);f.useEffect(()=>{b.length>0&&b.forEach(({id:w,value:T})=>{a(`custom_field_${w}`,T,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})})},[b,a]);const j=w=>{const T=b.find(A=>A.id===w);return T?T.value:""},k=w=>w.isRequired==="1"||w.isRequired===!0||w.isRequired===1,S=w=>{if(!t||!e)return;d(!0),u(null);const T={};y.forEach(A=>{const M=`custom_field_${A.id}`,E=w[M];E!==void 0&&(T[A.id]=E)}),v.mutate({moduleType:t,moduleId:e,fieldsData:T},{onSuccess:()=>{u({type:"success",text:l("Custom fields saved successfully","kivicare-clinic-management-system")}),d(!1)},onError:()=>{u({type:"error",text:l("Failed to save custom fields","kivicare-clinic-management-system")}),d(!1)}})};if(!n)return g?i.jsx(zx,{}):y.length===0?null:i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),y.map(w=>i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"font-size-14 text-muted mb-1",children:[w.name,":"]}),i.jsx("input",{type:"text",className:"form-control",value:"",readOnly:!0,placeholder:w.placeholder||"No data"})]},w.id))]});const N=w=>{const T=`custom_field_${w.id}`,A=k(w);switch(w.type){case"text":return i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx(Ut,{...M,type:"text",label:w.name,placeholder:w.placeholder,required:A,error:s?.[T]?.message})},w.id);case"number":return i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx(Ut,{...M,type:"text",inputMode:"decimal",label:w.name,placeholder:w.placeholder,required:A,error:s?.[T]?.message,onInput:E=>{E.target.value=E.target.value.replace(/[^0-9.]/g,""),M.onChange(E)}})},w.id);case"textarea":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[w.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx("textarea",{...M,className:"form-control",placeholder:w.placeholder,rows:"4"})}),s&&s[T]&&i.jsx("span",{className:"text-danger p",children:s[T].message})]},w.id);case"select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[w.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx(ot,{...M,options:w.options.map(E=>({value:E.value||E.id||E,label:E.label||E.text||E})),placeholder:w.placeholder||l("Select an option","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[T]&&i.jsx("span",{className:"text-danger p",children:s[T].message})]},w.id);case"multi_select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[w.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx(ot,{...M,isMulti:!0,options:w.options.map(E=>({value:E.value||E,label:E.label||E})),placeholder:w.placeholder||l("Select options","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[T]&&i.jsx("span",{className:"text-danger p",children:s[T].message})]},w.id);case"radio":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[w.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:w.options.map((E,P)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...M,type:"radio",className:"form-check-input",id:`${T}_${P}`,value:E.value||E,checked:M.value===(E.value||E)}),i.jsx("label",{className:"form-check-label",htmlFor:`${T}_${P}`,children:E.label||E})]},P))})}),s&&s[T]&&i.jsx("span",{className:"text-danger p",children:s[T].message})]},w.id);case"checkbox":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[w.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:w.options.map((E,P)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",id:`${T}_${P}`,value:E.value||E,checked:(M.value||[]).includes(E.value||E),onChange:D=>{const O=M.value||[],F=E.value||E;D.target.checked?M.onChange([...O,F]):M.onChange(O.filter(q=>q!==F))}}),i.jsx("label",{className:"form-check-label",htmlFor:`${T}_${P}`,children:E.label||E})]},P))})}),s&&s[T]&&i.jsx("span",{className:"text-danger p",children:s[T].message})]},w.id);case"calendar":return i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>i.jsx(Ut,{...M,type:"date",label:w.name,placeholder:w.placeholder,required:A,error:s?.[T]?.message})},w.id);case"file_upload":return i.jsx(je,{name:T,control:n,defaultValue:j(w.id),rules:{required:A?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:M})=>{const E=M.value,P=E&&(E.url||E.name),D=w.file_upload_type&&Array.isArray(w.file_upload_type)?w.file_upload_type.map(O=>O.id||O.value||O).join(","):"";return i.jsx(cu,{id:`custom-field-${w.id}`,name:T,label:w.name,accept:D,required:A,defaultFile:P?E.url:"",defaultFileId:P?E.id:"",onChange:(O,F)=>{M.onChange({id:F,url:O.url,name:O.filename||O.name})},errors:s})}},w.id);default:return null}};if(g)return i.jsx(zx,{});if(y.length===0)return null;const _=t==="patient_encounter_module";return i.jsx("div",{className:"card mt-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),i.jsx("div",{className:"row gy-4",children:y.map(w=>i.jsx("div",{className:"col-lg-6",children:N(w)},w.id))}),_&&i.jsxs("div",{className:"mt-4",children:[m&&i.jsx("div",{className:`alert alert-${m.type==="success"?"success":"danger"} mb-3`,children:m.text}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:c,onClick:()=>S(r()),children:c?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})]})]})})},wk=f.createContext();function ppe({children:t}){const[e,n]=f.useState([]),[s,a]=f.useState(!1),r=(d,m={})=>{const u=Date.now(),p={id:u,message:d,type:m.type||"success",position:m.position||"bottom-center",duration:m.duration||5e3,showIcon:m.showIcon!==!1,dismissible:m.dismissible!==!1};return n(h=>[p]),a(!0),p.duration>0&&setTimeout(()=>{a(!1),setTimeout(()=>n([]),300)},p.duration),u},o=()=>{a(!1),setTimeout(()=>n([]),300)},c={success:(d,m)=>r(d,{...m,type:"success"}),error:(d,m)=>r(d,{...m,type:"danger"}),warning:(d,m)=>r(d,{...m,type:"warning"}),info:(d,m)=>r(d,{...m,type:"info"}),dismiss:o};return i.jsx(wk.Provider,{value:{toast:c,toasts:e,visible:s,onDismiss:o},children:t})}function gpe(){const t=f.useContext(wk);if(!t)return console.warn("ToastContainer must be used within a ToastProvider"),null;const{toasts:e,visible:n,onDismiss:s}=t,a=e[0];return a?i.jsx("div",{className:`alert-container alert-widget-container ${n?"visible":""}`,children:i.jsx("div",{className:`alert alert-popup alert-${a.type} alert-left`,onClick:a.dismissible?s:void 0,children:i.jsxs("div",{className:"alert-content",children:[a.showIcon&&i.jsxs("span",{className:"alert-icon",children:[a.type==="success"&&"",a.type==="danger"&&"",a.type==="warning"&&"",a.type==="info"&&""]}),i.jsx("span",{className:"alert-message",children:a.message}),a.dismissible&&i.jsx("button",{className:"alert-close",onClick:r=>{r.stopPropagation(),s()},title:"Dismiss",children:""})]})})}):null}function IJ(){const t=f.useContext(wk);if(!t)throw new Error("useToast must be used within a ToastProvider");return t.toast}const OJ=({disabled:t=!1,isUploading:e=!1,wpMediaAvailable:n=!1,onFilesSelect:s,onClick:a})=>{const r=!n,o=t||e,c=d=>{if(!r||o)return;d.preventDefault(),d.currentTarget.classList.remove("drag-over");const m=Array.from(d.dataTransfer.files);m.length&&s(m)};return i.jsxs("div",{className:`kc-dropzone ${o?"disabled":""}`,onClick:o?void 0:a,onDragOver:d=>{!r||o||(d.preventDefault(),d.currentTarget.classList.add("drag-over"))},onDragLeave:d=>{!r||o||(d.preventDefault(),d.currentTarget.classList.remove("drag-over"))},onDrop:c,children:[i.jsx("style",{children:`.kc-dropzone {
                    position: relative;
                }

                /* Loader overlay */
                .kc-dropzone-loader {
                    position: absolute;
                    inset: 0;
                    background: rgba(255, 255, 255, 0.85);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 2;
                    border-radius: 8px;
                }

                /* Spinner */
                .kc-spinner {
                    width: 32px;
                    height: 32px;
                    border: 3px solid #e5e7eb;
                    border-top-color: #4f46e5;
                    border-radius: 50%;
                    animation: kc-spin 0.8s linear infinite;
                    margin-bottom: 10px;
                }

                @keyframes kc-spin {
                    to {
                        transform: rotate(360deg);
                    }
                }
                `}),e&&i.jsxs("div",{className:"kc-dropzone-loader",children:[i.jsx("span",{className:"kc-spinner"}),i.jsx("p",{className:"kc-uploading-text",children:l("Uploading...","kivicare-clinic-management-system")})]}),!e&&i.jsxs("div",{className:"kc-dropzone-content",children:[i.jsx("i",{className:"ph ph-upload-simple kc-upload-icon"}),i.jsxs("p",{className:"kc-dropzone-text",children:[i.jsx("strong",{children:l("Choose Image","kivicare-clinic-management-system")}),!n&&i.jsxs(i.Fragment,{children:[" ",l("or drag & drop","kivicare-clinic-management-system")]})]}),!n&&i.jsx("small",{className:"kc-dropzone-hint",children:l("Support: JPG, PNG, JPEG, PDF, Doc","kivicare-clinic-management-system")})]})]})},LJ=({id:t="kc-multi-file-upload",name:e="files",label:n=l("Upload Documents","kivicare-clinic-management-system"),defaultFiles:s=[],setValue:a,disabled:r=!1,required:o=!1,allowFile:c=!0,widgetId:d=null,isEdit:m=!1})=>{let u;try{u=IJ()}catch{u={error:console.error,success:console.log}}const[p,h]=f.useState([]);f.useEffect(()=>{m&&h(s)},[s]);const[g,x]=f.useState(!1),[v,y]=f.useState(!1),[b,j]=f.useState(!0),k=f.useRef(null);f.useEffect(()=>{y(typeof window<"u"&&window.wp&&window.wp.media),console.log(v,"wpMediaAvailable")},[]);const S=A=>{h(A),a?.(e,A,{shouldValidate:!0})},N=async A=>{const M=window.kc_frontend?.rest_url;let E=`${M}/wp/v2/media`,P="",D={};d&&(E=`${M}kivicare/v1/frontend/kc-book-appointment/upload-medical-report`,P=window.kc_frontend.nonce,D["Media-Nonce"]=P);try{const O=await pe({endpoint:E,method:"POST",data:A,isFile:!0,headers:D}),F=O.data||O;return{id:F.id,url:F.source_url||F.url,filename:A.name||F.filename||F.title?.raw,type:F.media_type||F.type,size:F.media_details?.filesize||F.size||A.size}}catch(O){return u.error(O?.response?.data?.message||O?.message||l("File upload failed","kivicare-clinic-management-system")),null}},_=async A=>{if(!A.length)return;x(!0);const M=[];for(let E of A){const P=await N(E);P&&M.push(P)}M.length&&(S([...p,...M]),u.success(l("Files uploaded successfully","kivicare-clinic-management-system")),v||j(!1)),x(!1),k.current&&(k.current.value="")},w=()=>{if(!v){j(!0);return}const A=window.wp.media({title:l("Select or Upload Files","kivicare-clinic-management-system"),button:{text:l("Use These Files","kivicare-clinic-management-system")},multiple:!0,library:{type:c?"":"image"}});A.on("select",()=>{const E=A.state().get("selection").toJSON().map(P=>({id:P.id,url:P.url,filename:P.filename,type:P.type,size:P.filesizeInBytes}));S([...p,...E])}),A.open()},T=A=>{S(p.filter((M,E)=>E!==A))};return i.jsxs("div",{className:"form-group",id:t,children:[i.jsx("style",{children:`
                .kc-dropzone {
                    border: 2px dashed #d0d5dd;
                    background: #f9fafb;
                    padding: 40px;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 8px;
                    transition: 0.2s ease;
                }

                .kc-dropzone.drag-over {
                    border-color: #4f46e5;
                    background: #eef2ff;
                }

                .kc-dropzone.disabled {
                    opacity: 0.6;
                    pointer-events: none;
                }

                .kc-upload-icon {
                    font-size: 28px;
                    margin-bottom: 10px;
                    display: block;
                }

                .kc-dropzone-text {
                    font-size: 15px;
                }

                .kc-dropzone-text strong {
                    color: #ef4444;
                }

                .kc-dropzone-hint {
                    font-size: 12px;
                    color: #667085;
                }

                .kc-uploading-text {
                    margin-top: 8px;
                    color: #4f46e5;
                    font-size: 13px;
                }

                .kc-uploaded-files {
                    margin-top: 16px;
                }

                .kc-uploaded-file {
                    background: #f9fafb;
                    border-radius: 6px;
                    padding: 12px 14px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                }

                .kc-file-name {
                    font-size: 14px;
                    color: #344054;
                }

                .kc-file-delete {
                    background: transparent;
                    border: none;
                    color: #ef4444;
                    cursor: pointer;
                    font-size: 16px;
                }
                `}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsxs("label",{className:"form-label mb-0",children:[n,o&&i.jsx("span",{className:"text-danger",children:"*"})]}),(v||!b)&&m===!1&&i.jsx("button",{type:"button",className:"iq-button iq-button-primary btn btn-sm btn-primary",onClick:w,disabled:r||g,children:l("Add Documents","kivicare-clinic-management-system")})]}),i.jsx("input",{id:"kc-hidden-file-input",type:"file",className:"d-none",multiple:!0,ref:k,disabled:r||g,onChange:A=>_(Array.from(A.target.files))}),!v&&b&&i.jsx(OJ,{disabled:r,isUploading:g,wpMediaAvailable:v,onFilesSelect:_,onClick:()=>{console.log("ASDFsdfdfsdf",k),k.current?.click(),!r&&k.current}}),p.length>0&&i.jsx("div",{className:"kc-uploaded-files mt-3",children:p.map((A,M)=>i.jsxs("div",{className:"kc-uploaded-file",children:[i.jsx("span",{className:"kc-file-name",children:A.filename}),i.jsxs("div",{className:"kc-file-actions",children:[i.jsx("a",{className:"me-2",href:A.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})}),i.jsx("button",{type:"button",className:"kc-file-delete",onClick:()=>T(M),children:i.jsx("i",{className:"ph ph-trash"})})]})]},M))})]})},Jp=({isEditing:t=!1,patientId:e=!1})=>{f.useEffect(()=>{const ue=new URLSearchParams(window.location.search),Re=ue.get("payment_status"),Be=ue.get("message");if(Re&&Be){Ee[Re==="cancelled"?"error":"info"](decodeURIComponent(Be),{position:"top-right",autoClose:5e3});const Ue=window.location.pathname;window.history.replaceState({},"",Ue)}},[]);const{id:n}=Wt(),s=f.useRef(null),a=f.useRef(null),r=f.useRef({}),o=ze(),{getPriceFormat:c,appointmentDescription:d,is_uploadfile_appointment:m,pre_book:u,post_book:p,only_same_day_book:h,isAddonActive:g,hasCapability:x,currentClinicId:v,currentDoctorId:y,defaultClinicId:b,currentUser:j}=ht(),[k,S]=f.useState(""),[N,_]=f.useState(""),w=Hn(),T=dn(),{prefetchClinics:A}=lV();f.useEffect(()=>{A()},[A]);const M=zi(),E=ls(),P=Kn(),D=mi(),O=g("kiviPro"),F=new Date;F.setHours(0,0,0,0);const q=w.state?.patientId,U=e||q,[K,ne]=f.useState(!1),[Y,fe]=f.useState(null),le=f.useRef([]),{data:W,isLoading:z,error:ie}=SZ(n,{enabled:t&&!!n}),re=W?.data,de=EZ(),L=TZ(),[Q,V]=f.useState(!1),Z=Q||de.isPending||L.isPending||z,X=f.useMemo(()=>{if(O){if((D||P)&&(v||b)){const ue=v||b;return{value:ue,label:ue}}}else if(b)return{value:b,label:b};return null},[D,P,O,t,v,b]),{register:R,handleSubmit:G,control:ee,watch:ae,setValue:I,getValues:H,formState:{errors:B}}=Xt({defaultValues:{clinic:X,doctor:null,service:null,patient:null,appointmentDate:"",appointmentSlot:"",status:{value:"1",label:l("Booked","kivicare-clinic-management-system")},description:""}}),te=ae("clinic"),oe=ae("doctor"),ye=ae("service"),me=ae("appointmentDate"),xe=ae("appointmentSlot"),Ce=y,he=v,{data:_e,isLoading:Ke}=_Z({doctor_id:oe?.value||Ce,clinic_id:te?.value||he||(O?null:0),service_id:ye?.map(ue=>ue.id)||[],date:me,appointment_id:t?n:null});let Ae=!1;ye?.length&&(O?M?Ae=!!(te?.value||he):D||P?Ae=!!(oe?.value||Ce):Ae=!!((oe?.value||Ce)&&(te?.value||he)):Ae=!!(oe?.value||Ce));const{data:$e,isLoading:Je,isError:et,error:Me}=MZ({doctorId:oe?.value||Ce,clinicId:te?.value||he||(O?null:0),services:ye?.map(ue=>ue.id)||[]},{enabled:Ae}),{data:ge,isLoading:Ne}=bn("settings","appointment-setting"),qe=f.useMemo(()=>{if(!ge?.data)return{minDate:null,maxDate:null};const{only_same_day_book:ue,pre_book:Re,post_book:Be}=ge.data,Ue=[!0,"true",1,"1","on","yes"].includes(ue),Ye=sl();if(Ue){const tt=Ye.format("YYYY-MM-DD");return{minDate:tt,maxDate:tt}}return{minDate:Ye.add(parseInt(Re)||0,"day").format("YYYY-MM-DD"),maxDate:Ye.add(parseInt(Be)||365,"day").format("YYYY-MM-DD")}},[ge]),{data:at}=fJ({clinic_id:P||D?v:te?.value||he||(O?null:0),doctor_id:oe?.value||Ce},{enabled:!!(oe?.value||Ce)&&(!!te?.value||!!he||!O||P||D)}),Kt=at?.data??{},{data:Gt}=sd({module_type:"appointment_module",status:1,module_id:n},{enabled:g("kiviPro")}),tn=$e?.data,Ot=f.useMemo(()=>{const ue=Gt?.data?.forms||[];return te?.value?ue.filter(Re=>{const Be=Re.conditions?.clinics||[];return Be.length===0||Be.includes(parseInt(te.value))}):ue},[Gt,te]),Te=()=>{Ot.forEach(ue=>{const Re=document.querySelector(`#custom-forms-tabs-tab-${ue.id}`);Re&&(le.current.map(Be=>parseInt(Be)).includes(parseInt(ue.id))?Re.classList.add("form-error-block"):Re.classList.remove("form-error-block"))})},Fe=async()=>{const ue={};let Re=!0,Be=null;for(const Ye of Ot){const tt=r.current[Ye.id];if(tt){const Dt=await tt.triggerValidation();ue[Ye.id]={isValid:Dt.isValid,data:tt.getFormData(),errors:Dt.errors},Dt.isValid||(Re=!1,Be||(Be=Ye.id))}}const Ue=Object.keys(ue).filter(Ye=>!ue[Ye].isValid);return le.current=Ue,Te(),{allValid:Re,formResults:ue,firstInvalidFormId:Be}},J=()=>{const ue={};return Ot.forEach(Re=>{const Be=r.current[Re.id];Be&&(ue[Re.id]=Be.getFormData())}),ue},se=[{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"4",label:l("Check In","kivicare-clinic-management-system")},{value:"3",label:l("Check Out","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")},{value:"0",label:l("Cancelled","kivicare-clinic-management-system")}],ke=async({page:ue,per_page:Re,search:Be})=>{try{const Ue={dataType:"clinicList",page:ue,per_page:Re,search:Be};return await o.fetchQuery({queryKey:vt.list(Ue),queryFn:()=>Bt.getStaticData(Ue),staleTime:300*1e3})}catch(Ue){return console.error("Error loading clinics:",Ue),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Pe=async({page:ue,per_page:Re,search:Be,clinic_ids:Ue})=>{try{const Ye={dataType:"staticData",staticDataType:"doctors",clinic_ids:Ue,page:ue,per_page:Re,search:Be};return await o.fetchQuery({queryKey:vt.list(Ye),queryFn:()=>Bt.getStaticData(Ye),staleTime:300*1e3})}catch(Ye){return console.error("Error loading doctors:",Ye),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Xe=async({page:ue,per_page:Re,search:Be,clinic_ids:Ue})=>{try{const Ye={dataType:"staticData",staticDataType:"patients",clinic_ids:Ue,page:ue,per_page:Re,search:Be};return await o.fetchQuery({queryKey:vt.list(Ye),queryFn:()=>Bt.getStaticData(Ye),staleTime:300*1e3})}catch(Ye){return console.error("Error loading patients:",Ye),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},it=f.useCallback(async({page:ue,per_page:Re,search:Be,clinic_id:Ue,doctor_id:Ye})=>{console.log(" loadServiceOptions called with:",{page:ue,per_page:Re,search:Be,clinic_id:Ue,doctor_id:Ye});try{const tt={dataType:"staticData",staticDataType:"servicesWithPrice",clinic_id:Ue,doctor_id:Ye,page:ue,per_page:Re,search:Be};console.log(" Query key:",vt.list(tt));const Dt=await o.fetchQuery({queryKey:vt.list(tt),queryFn:()=>Bt.getStaticData(tt),staleTime:0});return console.log(" Services loaded:",Dt),Dt}catch(tt){return console.error(" Error loading services:",tt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[o]),lt=_e?.data?.slots_by_session||[],dt=f.useMemo(()=>{if(!lt||lt.length===0)return!1;const ue=sl();let Re=!1,Be=!1;for(const Ue of lt)if(Ue&&Ue.length>0){Be=!0;for(const Ye of Ue)if(Ye.datetime){if(sl(Ye.datetime).isAfter(ue)||Ye.available===!0){Re=!0;break}}else if(Ye.available===!0){Re=!0;break}if(Re)break}return Be&&!Re},[lt]),_t=f.useMemo(()=>lt&&lt.length>0&&lt.some(ue=>ue&&ue.length>0)&&!dt,[lt,dt]);if(f.useEffect(()=>{if(t&&re&&!z){if(I("clinic",{value:re.clinicId,label:re.clinicName}),I("doctor",{value:re.doctorId,label:re.doctorName}),I("patient",{value:re.patientId,label:re.patientName}),re.service_list&&re.service_list.length>0){const ue=re.service_list.map(Re=>({value:Re.id,label:Re.title,id:Re.id,price:Re.price}));I("service",ue)}I("description",re.description||""),I("appointmentDate",re.appointmentStartDate),I("appointmentSlot",re.appointmentFormatedStartTime),E?I("status",{value:"1",label:l("Booked","kivicare-clinic-management-system")}):I("status",fk(se,re.status)),re?.appointmentReport&&(S(re?.appointmentReport?.url),_(re?.appointmentReport?.id))}},[t,re,z]),f.useEffect(()=>{if(t)return;const ue=U;if(!ue)return;let Re=!1;return(async()=>{try{const Ue={dataType:"staticData",staticDataType:"patients",patient_id:ue,page:1,per_page:1},Ye=await o.fetchQuery({queryKey:vt.list(Ue),queryFn:()=>Bt.getStaticData(Ue),staleTime:300*1e3});if(Re)return;const tt=Ye?.data||Ye?.data?.data||[],Dt=Array.isArray(tt)?tt[0]:null;if(Dt){const Jt=Dt.label||Dt.display_name||`${Dt.first_name||""} ${Dt.last_name||""}`.trim()||Dt.name||Dt.fullName||String(Dt.id);I("patient",{value:Dt.id||ue,label:Jt})}else I("patient",{value:ue,label:String(ue)})}catch{I("patient",{value:ue,label:String(ue)})}})(),()=>{Re=!0}},[U,t,o,I]),f.useEffect(()=>{t&&re?.custom_fields&&I&&Object.keys(re.custom_fields).forEach(ue=>{I(`custom_field_${ue}`,re.custom_fields[ue])})},[t,re?.custom_fields,I]),t&&ie)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:l("Error Loading Appointment Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:l("Unable to load appointment information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>T(-1),children:l("Back to Appointments","kivicare-clinic-management-system")})]});const ct=async ue=>{if(V(!0),Ot.length>0)if((await Fe()).allValid)le.current=[],Te();else{Ee.error(l("Please fix errors in the additional information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),V(!1);return}const Re={};Object.keys(ue).forEach(Ue=>{if(Ue.startsWith("custom_field_")){const Ye=Ue.replace("custom_field_","");Re[Ye]=ue[Ue]}});const Be={tax_data:tn.applied_taxes,clinicId:ue.clinic?.value||((D||P)&&O?v||b:O?null:b),doctorId:ue.doctor?.value,patientId:ue.patient?.value,serviceId:ue.service?.map(Ue=>Ue.id),appointmentStartDate:ue.appointmentDate,appointmentStartTime:ue.appointmentSlot,status:ue.status?.value||ue.status,description:ue.description||"",customForm:J(),customFields:Re,appointmentFile:ue?.appointmentFile};ue.appointmentFiles&&ue.appointmentFiles.length>0&&(Be.appointmentFileId=ue.appointmentFiles.map(Ue=>Ue.id));try{if(t){let Ue=await L.mutateAsync({id:n,...Be});Ee.success(Ue.message||l("Appointment updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),T("/appointments")}else if(E)fe({clinicName:ue.clinic?.label,doctorName:ue.doctor?.label,service:ue.service,date:ue.appointmentDate,time:ue.appointmentSlot,grandTotal:tn?.grand_total,customFormData:J(),customFieldData:Re}),ne(!0);else{let Ue=await de.mutateAsync(Be);console.log("Create response",Ue),Ee.success(Ue.message||l("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),T(e==!1?"/appointments":"/patient/profile/"+e+"/appointments/")}}catch(Ue){console.error("Error saving appointment:",Ue);const Ye=Ue?.response?.data?.message||(t?l("Failed to update appointment","kivicare-clinic-management-system"):l("Failed to create appointment","kivicare-clinic-management-system"));Ee.error(Ye,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{V(!1)}},kt=async()=>{V(!0);const ue=H();E&&j&&j.id&&(ue.patient={value:j.id,label:j.display_name||j.user_email});const Re={};Object.keys(ue).forEach(Ye=>{if(Ye.startsWith("custom_field_")){const tt=Ye.replace("custom_field_","");Re[tt]=ue[Ye]}});const Be=J(),Ue={clinicId:ue.clinic?.value||((D||P)&&O?v||b:O?null:b),doctorId:ue.doctor?.value,patientId:ue.patient?.value,serviceId:ue.service?.map(Ye=>Ye.id),appointmentStartDate:ue.appointmentDate,appointmentStartTime:ue.appointmentSlot,status:ue.status?.value||ue.status,description:ue.description||"",paymentGateway:ue.payment_gateway||null,customForm:Be,customFields:Re,tax_data:tn.applied_taxes};ue.appointmentFiles&&ue.appointmentFiles.length>0&&(Ue.appointmentFileId=ue.appointmentFiles.map(Ye=>Ye.id)),de.mutateAsync(Ue).then(Ye=>{o.invalidateQueries({queryKey:["appointments"]});const tt=Ye?.data?.payment_response?.gateway,Dt=Ye?.data?.payment_response?.data,Jt=Dt?.redirect_url||Dt?.payment_url;switch(tt?.startsWith("knit_pay")?"knit_pay":tt){case"paypal":case"woocommerce":case"knit_pay":Jt?window.location.href=Jt:Ee.error(l("Payment gateway did not provide a redirect URL.","kivicare-clinic-management-system"));break;case"stripe":s?.current?.updateAppointmentData(Ye?.data),ne(!1);break;case"razorpay":a?.current?.updateAppointmentData(Ye?.data),ne(!1);break;case"manual":default:Ee.success(Ye.message||l("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),ne(!1),Jt||T("/appointments");break}}).catch(Ye=>{console.error("Error confirming appointment:",Ye),Ee.error(Ye?.response?.data?.message||l("Failed to create appointment","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}).finally(()=>{V(!1)})},zt=async ue=>{const Re=Object.keys(ue)[0],{formResults:Be,firstInvalidFormId:Ue}=await Fe();let Ye=null;if(Re&&(Ye=document.getElementById(Re),Ye)){Ye.scrollIntoView({behavior:"smooth",block:"center"}),Ye.focus();return}if(Ue&&(Ye=document.getElementById(`custom-form-${Ue}`),Ye)){Ye.scrollIntoView({behavior:"smooth",block:"center"});const tt=document.querySelector(`[data-rb-event-key="${Ue}"]`);tt&&tt.click()}},ve={clinic:{required:O&&!D&&!P?l("Clinic is required","kivicare-clinic-management-system"):!1},doctor:{required:l("Doctor is required","kivicare-clinic-management-system")},service:{required:l("Service is required","kivicare-clinic-management-system")},patient:{required:l("Patient is required","kivicare-clinic-management-system")},appointmentDate:{required:l("Appointment date is required","kivicare-clinic-management-system"),validate:ue=>{if(!ue)return!0;const[Re,Be,Ue]=ue.split("-").map(Number);return new Date(Re,Be-1,Ue)>=F||l("Appointment date cannot be in the past","kivicare-clinic-management-system")}},appointmentSlot:{required:l("Appointment slot is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")}};return t&&z?i.jsx(by,{}):i.jsxs(i.Fragment,{children:[e==!1&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t?l("Edit Appointment","kivicare-clinic-management-system"):l("Add Appointment","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("form",{onSubmit:G(ct,zt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[!D&&!P&&O&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:ee,rules:ve.clinic,render:({field:ue})=>i.jsx(yn,{id:"clinic",loadOptions:ke,value:ue.value,onChange:Re=>{ue.onChange(Re),I("doctor",null),I("service",null)},placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${B.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t,dependencies:{}})}),B.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:B.clinic.message})]})}),!M&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"doctor",control:ee,rules:ve.doctor,render:({field:ue})=>i.jsx(yn,{id:"doctor",loadOptions:Pe,value:ue.value,onChange:Re=>{ue.onChange(Re),I("service",null),I("appointmentSlot",""),o.invalidateQueries({queryKey:["staticData","servicesWithPrice"]})},placeholder:ae("clinic")?.value?l('eg "Mark Martin"',"kivicare-clinic-management-system"):l("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${B.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||z||!ae("clinic")?.value,dependencies:{clinic_ids:ae("clinic")?.value}},`doctor-${ae("clinic")?.value}`)}),B.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:B.doctor.message})]})}),i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[l("Select Service","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!(t||E)&&i.jsx(gt,{to:"/service/add",className:"label-action fw-semibold font-size-12",children:l("Add Service","kivicare-clinic-management-system")})]}),i.jsx(je,{name:"service",control:ee,rules:ve.service,render:({field:ue})=>{const Re=ue.value?.some(tt=>tt?.allow_multiple),Be=tt=>{if(!tt){ue.onChange([]);return}const Dt=Array.isArray(tt)?tt:[tt],Jt=Dt.some(Yn=>!Yn.allow_multiple);ue.onChange(Jt?[Dt.find(Yn=>!Yn.allow_multiple)]:Dt)},Ue=M?y:ae("doctor")?.value,Ye=ae("clinic")?.value;return i.jsx(yn,{id:"service",loadOptions:it,value:ue.value,onChange:Be,placeholder:Ue?l('eg "Checkup"',"kivicare-clinic-management-system"):l("Select Doctor First","kivicare-clinic-management-system"),className:`react-select-box ${B.service?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!Ue||t&&!z,isMulti:Re,closeMenuOnSelect:!1,getOptionValue:tt=>tt.id,getOptionLabel:tt=>tt.label,customComponents:{IndicatorSeparator:()=>null,Option:({innerProps:tt,data:Dt})=>i.jsxs("div",{className:`option select-service-option d-flex justify-content-between gap-1 ${Dt.allow_multiple?"allow-multiple":""}`,...tt,children:[i.jsxs("div",{className:"d-flex flex-column gap-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-06",children:[Dt.is_telemed&&i.jsx("span",{className:"badge bg-success-subtle border border-success rounded-pill ",children:l("Telemed","kivicare-clinic-management-system")}),Dt.allow_multiple&&i.jsx("span",{className:"badge bg-info-subtle border border-info rounded-pill ",children:l("Multiple","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"m-0 texts font-size-14 text-heading fw-medium form-label",children:[" ",Dt.label," "]})]}),i.jsx("span",{className:"text-secondary font-size-14 fw-semibold",children:c(Dt.price)})]})},dependencies:{clinic_id:Ye,doctor_id:Ue}},`service-${Ye}-${Ue}`)}}),B.service&&i.jsx("div",{className:"invalid-feedback d-block",children:B.service.message})]})}),!E&&e===!1&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[l("Select Patient","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!t&&i.jsx(gt,{to:{pathname:"/patient/add",search:"from=appointment"},className:"label-action fw-semibold font-size-12",children:l("Add Patient","kivicare-clinic-management-system")})]}),i.jsx(je,{name:"patient",control:ee,rules:ve.patient,render:({field:ue})=>i.jsx(yn,{id:"patient",loadOptions:Xe,value:ue.value,onChange:ue.onChange,placeholder:ae("clinic")?.value?l('eg "Alena James"',"kivicare-clinic-management-system"):l("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${B.patient?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||z||!ae("clinic")?.value,dependencies:{clinic_ids:ae("clinic")?.value}},`patient-${ae("clinic")?.value}`)}),B.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:B.patient.message})]})}),i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Appointment Date","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx(je,{name:"appointmentDate",control:ee,rules:ve.appointmentDate,render:({field:ue})=>i.jsx(si,{id:"appointmentDate",className:`form-control ps-3 pe-5 ${B.appointmentDate?"is-invalid":""}`,value:ue.value?ii(ue.value):"",onChange:([Re])=>{if(Re){const Be=Re.getFullYear(),Ue=String(Re.getMonth()+1).padStart(2,"0"),Ye=String(Re.getDate()).padStart(2,"0");ue.onChange(`${Be}-${Ue}-${Ye}`)}else ue.onChange("");I("appointmentSlot","")},placeholder:l('eg "05/02/2025"',"kivicare-clinic-management-system"),disabled:t&&z||Ne,options:{dateFormat:"Y-m-d",altInput:!0,altFormat:bi(window.kc_frontend.date_format),minDate:qe.minDate,maxDate:qe.maxDate,disableMobile:!0,disable:[function(Re){if(!Kt)return!1;const{off_days:Be=[],holidays:Ue=[]}=Kt;if(Be.includes(String(Re.getDay())))return!0;const Ye=Ql(Re);return(Array.isArray(Ue)?Ue:Object.values(Ue)).includes(Ye)}],locale:ai(),onDayCreate:(Re,Be,Ue,Ye)=>{Ye.innerHTML=Ye.innerHTML.replace(/\d+/g,tt=>kZ(tt))}}})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),B.appointmentDate&&i.jsx("div",{className:"invalid-feedback d-block",children:B.appointmentDate.message})]})}),!E&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:ee,rules:ve.status,render:({field:ue})=>i.jsx(ot,{id:"status",options:se,value:ue.value,onChange:ue.onChange,placeholder:l('eg "Booked"',"kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Re=>({...Re,zIndex:9999})},isDisabled:t&&z||!x("patient_appointment_status_change")})}),B.status&&i.jsx("div",{className:"invalid-feedback d-block",children:B.status.message})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Available Slot","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"appointmentSlot",control:ee,rules:ve.appointmentSlot,render:({field:ue})=>i.jsx(i.Fragment,{children:Ke?i.jsx(R2,{count:18}):_t?i.jsx("div",{className:`p-3 bg-body rounded slot-scrolling ${B.appointmentSlot?" form-control is-invalid":""} `,children:lt.map((Re,Be)=>i.jsx(He.Fragment,{children:Re.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("h6",{className:"w-100 text-center my-3",children:[" ",l(`Session ${Be+1}`,"kivicare-clinic-management-system")," "]}),i.jsx("div",{className:"d-flex align-items-center gap-3 flex-wrap appointments-slot-select",children:Re.map((Ue,Ye)=>i.jsxs("div",{className:"form-check slot-select",children:[i.jsx("input",{type:"radio",name:ue.name,className:`form-check-input ${B.appointmentSlot?"is-invalid":""}`,id:`slot-${Be}-${Ye}`,value:Ue.time,checked:xe===Ue.time,onChange:tt=>{ue.onChange(tt.target.value)},ref:ue.ref,disabled:t&&z}),i.jsx("label",{className:"form-check-label",htmlFor:`slot-${Be}-${Ye}`,children:Ue.time})]},`slot-${Be}-${Ye}`))})]})},`session-${Be}`))}):_e?.status===!1?i.jsx("div",{className:"p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:_e?.data?.error})}):i.jsx("div",{className:"p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:l("No available slots for the selected date and doctor.","kivicare-clinic-management-system")})})})}),B.appointmentSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:B.appointmentSlot.message})]})}),m&&(!t||re?.appointmentReport&&re.appointmentReport.length>0)&&i.jsx("div",{className:"col-12",children:i.jsx(LJ,{name:"appointmentFiles",label:l("Upload Documents","kivicare-clinic-management-system"),setValue:I,defaultFiles:re?.appointmentReport||[],allowFile:!0,isEdit:t})}),d&&i.jsx("div",{className:"col -12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:`form-control ${B.description?"is-invalid":""}`,placeholder:l("Enter appointment description (optional)","kivicare-clinic-management-system"),rows:"3",...R("description"),disabled:t&&z}),B.description&&i.jsx("div",{className:"invalid-feedback d-block",children:B.description.message})]})})]})})}),g("kiviPro")&&oe&&i.jsx(tf,{moduleType:"appointment_module",moduleId:oe?.value,control:ee,errors:B,setValue:I,watch:ae},`custom-fields-${oe?.value||"no-doctor"}`),g("kiviPro")&&Ot.length>0&&i.jsx("div",{className:"mt-4 card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Additional Information","kivicare-clinic-management-system")}),Ot.length===1?i.jsx("div",{id:`custom-form-${Ot[0].id}`,children:i.jsx(Oa,{ref:ue=>r.current[Ot[0].id]=ue,fields:Ot[0].fields,data:Ot[0].form_data,readOnly:!1,formId:`form_${Ot[0].id}`})}):i.jsx($b,{defaultActiveKey:Ot[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:Ot.map(ue=>i.jsx(Sg,{eventKey:ue.id,title:ue.name?.text||ue.name,children:i.jsx("div",{id:`custom-form-${ue.id}`,children:i.jsx(Oa,{ref:Re=>r.current[ue.id]=Re,fields:ue.fields,data:ue.form_data||{},readOnly:!1,formId:`form_${ue.id}`})})},ue.id))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(Gn,{fallbackPath:"/appointments",text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:Z}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Z||t&&z,children:Z?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Appointment","kivicare-clinic-management-system"):l("Save Appointment","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(YR,{Formwatch:ae,summaryData:tn,summaryLoading:Je,summaryError:et,className:"position-sticky top-0"})})]})}),E&&i.jsx(pJ,{showConfirmationModel:K,handleCloseConfirmationModel:()=>ne(!1),handleConfirmAppointment:kt,confirmationData:Y,isSubmitting:Q,setValue:I}),!t&&i.jsx(kJ,{ref:s,appointmentData:!1}),!t&&i.jsx(CJ,{ref:a,appointmentData:!1})]})},XR=()=>{const{id:t}=Wt(),{getPriceFormat:e,isAddonActive:n}=ht(),[s,a]=f.useState(!0),{data:r,isLoading:o,error:c}=PZ(t),{data:d}=sd({module_type:"appointment_module",status:1,module_id:t},{enabled:n("kiviPro")}),m=IR(),u=r?.data||{},p=d?.data?.forms||[],h=[{value:0,text:l("Cancelled","kivicare-clinic-management-system"),color:"text-danger"},{value:1,text:l("Booked","kivicare-clinic-management-system"),color:"text-info"},{value:2,text:l("Pending","kivicare-clinic-management-system"),color:"text-warning"},{value:3,text:l("Check Out","kivicare-clinic-management-system"),color:"text-danger"},{value:4,text:l("Check In","kivicare-clinic-management-system"),color:"text-success"}],x=(N=>{if(N==null)return{text:l("Unknown","kivicare-clinic-management-system"),color:"text-secondary"};const _=Number(N);return h.find(w=>w.value===_)||{text:l("Unknown","kivicare-clinic-management-system"),color:"text-secondary"}})(u.status),v=[{value:0,text:l("Closed","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"},{value:1,text:l("Active","kivicare-clinic-management-system"),badgeClass:"text-bg-success"}],b=(N=>{if(N==null)return{text:l("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"};const _=Number(N);return v.find(w=>w.value===_)||{text:l("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"}})(u.encounterStatus),j=N=>{m.mutate(N,{onSuccess:_=>{const w=new Blob([_],{type:"application/pdf"}),T=URL.createObjectURL(w);window.open(T,"_blank")},onError:_=>{Et.fire({title:l("Error","kivicare-clinic-management-system"),text:_?.response?.data?.message||_?.message||l("Failed to generate invoice PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})},k=f.useMemo(()=>!u||!u.serviceName?null:{services:u.service_list,applied_taxes:u?.taxItems?.tax_data,subtotal:u.subtotal||0,tax:u?.taxItems?.total_tax||0,grand_total:(u.subtotal||0)+(u?.taxItems?.total_tax||0)},[u]),S=N=>N==="service"?u.serviceName?[{name:u.serviceName}]:[]:null;return o?i.jsx(MR,{}):c?i.jsx("div",{className:"alert alert-danger",children:l("Failed to load appointment details.","kivicare-clinic-management-system")}):i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:location.pathname!=="/appointments"&&i.jsx(Gn,{size:"sm"})})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Appointment Detail","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsx("button",{type:"button",onClick:()=>j(u.id),className:"btn btn-primary",children:l("Download Invoice","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Appointment ID","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"m-0 font-size-14 text-primary",children:["#",u.id]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Payment Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"m-0 font-size-14 text-primary",children:u.paymentStatus})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Date & Time","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.appointmentDateTime})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Service Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.serviceName})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Booking Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:`font-size-14 mt-2 mb-0 ${x.color}`,children:x.text})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[l("Payment Mode","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.paymentMode})]})]})}),u.description&&i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsxs("span",{className:"font-size-14",children:[l("Description","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 ms-1 mb-0",children:u.description})]})}),i.jsx("div",{children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Patient Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(Zt,{profileUrl:u.patient_image_url,name:u.patientName,phone:u.patientMobileNo,variant:"primary",size:"md",nameLabel:l("Patient Name","kivicare-clinic-management-system")})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Clinic Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(Zt,{profileUrl:u.clinic_image_url,name:u.clinicName,phone:u.clinicMobileNo,variant:"primary",size:"md",nameLabel:l("Clinic Name","kivicare-clinic-management-system"),rounded:!1})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:l("Doctor Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(Zt,{profileUrl:u.doctor_image_url,name:u.doctorName,phone:u.doctorMobileNo,variant:"primary",size:"md",nameLabel:l("Doctor Name","kivicare-clinic-management-system")})})})]})]})}),u.encounterId&&i.jsxs("div",{className:"spcing-top",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-2",children:[i.jsx("h6",{className:"mb-0 font-size-14",children:l("Encounter Detail","kivicare-clinic-management-system")}),i.jsx(gt,{to:`/encounter/dashboard/${u.encounterId}`,className:"font-size-14 fw-bold",children:l("View Details","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"p-3 bg-body rounded",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Description","kivicare-clinic-management-system"),":"]}),i.jsx("p",{className:"h6 mb-0",children:u.encounterDescription||l("No records found","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"d-flex align-items-center justify-content-lg-end",children:i.jsx("span",{className:`badge ${b.badgeClass} text-uppercase rounded-pill`,children:b.text})})})]})})]}),n("kiviPro")&&p.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Forms","kivicare-clinic-management-system")}),p.length===1?i.jsx("div",{children:i.jsx(Oa,{fields:p[0].fields,data:p[0].form_data,readOnly:!0})}):i.jsx($b,{defaultActiveKey:p[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:p.map(N=>i.jsx(Sg,{eventKey:N.id,title:N.name?.text||N.name,children:i.jsx("div",{children:i.jsx(Oa,{fields:N.fields,data:N.form_data,readOnly:!0})})},N.id))})]})]})}),u?.appointmentReport?.length>0&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:l("Documents","kivicare-clinic-management-system")}),i.jsx(wn,{columns:[{header:l("File Name","kivicare-clinic-management-system"),accessorKey:"filename",enableSorting:!1,cell:N=>N.getValue()},{header:l("Actions","kivicare-clinic-management-system"),enableSorting:!1,maxWidth:100,accessorKey:"actions",cell:N=>i.jsx("a",{href:N.row.original.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})}],data:u.appointmentReport,enableSelection:!1})]})})]}),i.jsxs("div",{className:"col-xl-4",children:[i.jsx("h5",{className:"mb-3",children:l("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"mb-3",children:i.jsx(YR,{Formwatch:S,summaryData:k,summaryLoading:o,summaryError:c})})]})]})},FJ=[Vn({path:"/appointments",title:"Appointments",outlet:NZ,permissions:["appointment_list"],meta:{description:"Appointment management system",icon:"calendar",showInSidebar:!0},children:[We({path:"",component:Cy,title:"All Appointments",index:!0,permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all appointments",breadcrumb:"All Appointments"}}),We({path:"patient/:patientIdParam",component:Cy,title:"Appointments by Patient",permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"Appointments filtered by patient",breadcrumb:"Appointments"}}),We({path:"add",component:Jp,title:"Add Appointment",props:{isEditing:!1},permissions:["appointment_add"],skeleton:by,meta:{description:"Create a new appointment",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Jp,title:"Edit Appointment",props:{isEditing:!0},permissions:["appointment_edit"],skeleton:by,meta:{description:"Edit existing appointment",breadcrumb:"Edit"}}),We({path:"view/:id",component:XR,title:"View Appointment",props:{readOnly:!0},permissions:["appointment_view"],skeleton:MR,meta:{description:"View appointment details",breadcrumb:"View"}})]})],hC=()=>{const t=Hn(),e=["/encounter","/encounter-template"],n=t.pathname.replace(/\/$/,""),s=!e.includes(n);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{updateOnRouteChange:!0}),s&&i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},kk={getMedicalHistories:(t={})=>pe({endpoint:"medical-history",method:"GET",data:t}),getMedicalHistory:t=>pe({endpoint:`medical-history/${t}`,method:"GET"}),createMedicalHistory:t=>pe({endpoint:"medical-history",method:"POST",data:t}),updateMedicalHistory:(t,e)=>pe({endpoint:`medical-history/${t}`,method:"PUT",data:e}),deleteMedicalHistory:t=>pe({endpoint:`medical-history/${t}`,method:"DELETE"})},zl={all:["medicalHistory"],lists:()=>[...zl.all],list:t=>[...zl.lists(),{filters:t}],details:()=>[...zl.all,"detail"],detail:t=>[...zl.details(),t]},Kh=(t={},e={})=>ft({queryKey:zl.list(t),queryFn:()=>kk.getMedicalHistories(t),...e}),_y=()=>Le({mutationFn:kk.createMedicalHistory}),JR=()=>(ze(),Le({mutationFn:t=>kk.deleteMedicalHistory(t)})),jk={getEncounterTemplateMedicalHistory:(t,e={})=>pe({endpoint:`encounter-templates/${t}/medical-history`,method:"GET",data:e}),createEncounterTemplateMedicalHistory:(t,e)=>pe({endpoint:`encounter-templates/${t}/medical-history`,method:"POST",data:e}),deleteEncounterTemplateMedicalHistory:(t,e)=>pe({endpoint:`encounter-templates/${t}/medical-history/${e}`,method:"DELETE"})},cr={all:["encounterTemplateMedicalHistory"],lists:()=>[...cr.all,"list"],list:(t,e)=>[...cr.lists(),t,{filters:e}],details:()=>[...cr.all,"detail"],detail:(t,e)=>[...cr.details(),t,e]},Gh=(t,e={},n={})=>ft({queryKey:cr.list(t,e),queryFn:()=>jk.getEncounterTemplateMedicalHistory(t,e),enabled:!!t,...n}),Ey=()=>{const t=ze();return Le({mutationFn:({templateId:e,...n})=>jk.createEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(cr.list(n.templateId))}})},eP=()=>{const t=ze();return Le({mutationFn:({templateId:e,itemId:n})=>jk.deleteEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(cr.list(n.templateId))}})},jr={createEncounter:t=>pe({endpoint:"encounters",method:"POST",data:t}),updateEncounter:(t,e)=>pe({endpoint:`encounters/${t}`,method:"PUT",data:e}),getEncounterById:t=>pe({endpoint:`encounters/${t}`,method:"GET"}),getEncounters:t=>pe({endpoint:"encounters",method:"GET",data:t}),deleteEncounter:t=>pe({endpoint:`encounters/${t}`,method:"DELETE"}),bulkUpdateEncounterStatus:(t,e)=>pe({endpoint:"encounters/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeletEencounters:t=>pe({endpoint:"encounters/bulk/delete",method:"POST",data:{ids:t}}),getEncounterById:t=>pe({endpoint:`encounters/${t}`,method:"GET"}),printEncounter:t=>pe({endpoint:`encounters/${t}/print`,method:"GET",responseType:"blob"}),exportEncounters:(t={})=>pe({endpoint:"encounters/export",method:"GET",data:t})},mo={createTemplate:t=>pe({endpoint:"encounter-templates",method:"POST",data:t}),updateTemplate:(t,e)=>pe({endpoint:`encounter-templates/${t}`,method:"PUT",data:e}),getTemplateById:t=>pe({endpoint:`encounter-templates/${t}`,method:"GET"}),getTemplates:t=>pe({endpoint:"encounter-templates",method:"GET",data:t}),deleteTemplate:t=>pe({endpoint:`encounter-templates/${t}`,method:"DELETE"}),bulkDeleteTemplates:t=>pe({endpoint:"encounter-templates/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateStatus:(t,e)=>pe({endpoint:"encounter-templates/bulk/status",method:"PUT",data:{ids:t,status:e}}),applyTemplateToEncounter:(t,e)=>pe({endpoint:`encounter-templates/${t}/apply-to-encounter/${e}`,method:"POST"})},$J=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?jr.updateEncounter(e,n):jr.createEncounter(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},BJ=(t={})=>ft({queryKey:["encounters",t],queryFn:()=>jr.getEncounters(t)}),qJ=()=>{const t=ze();return Le({mutationFn:e=>jr.bulkDeletEencounters(e),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},tP=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>jr.bulkUpdateEncounterStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},Nk=(t,e={})=>ft({queryKey:["encounter",t],queryFn:()=>jr.getEncounterById(t),enabled:!!t,...e}),HJ=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?mo.updateTemplate(e,n):mo.createTemplate(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounter-templates"]})}})},nP=(t={})=>ft({queryKey:["encounter-templates",t],queryFn:()=>mo.getTemplates(t)}),zJ=()=>{const t=ze();return Le({mutationFn:e=>mo.deleteTemplate(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},VJ=()=>{const t=ze();return Le({mutationFn:e=>mo.bulkDeleteTemplates(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},UJ=()=>{const t=ze();return Le({mutationFn:({templateId:e,encounterId:n})=>mo.applyTemplateToEncounter(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["medicalHistory"]}),t.invalidateQueries({queryKey:["prescriptions"]})}})},WJ=()=>Le({mutationFn:t=>jr.printEncounter(t)}),KJ=()=>Le({mutationFn:t=>jr.exportEncounters(t)}),Ck=f.createContext(),nf=()=>{const t=f.useContext(Ck);if(!t)throw new Error("useEncounterContext must be used within an EncounterProvider");return t},GJ=({children:t})=>{const{id:e}=Wt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:r}=ht(),o=s||"patient",{data:c,isLoading:d,error:m}=Nk(e),u=c?.data||{},{data:p,isLoading:h,error:g}=PA(e),{data:x}=sd({module_type:"patient_encounter_module",status:1,module_id:e},{enabled:r("kiviPro"),staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),v=f.useMemo(()=>x?.data?.forms||[],[x?.data?.forms]),{data:y}=ZR("appointment_module",u?.doctorId),{data:b}=Sy("appointment_module",u?.appointmentId,{enabled:!!u?.appointmentId,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),{data:j}=Sy("patient_encounter_module",e,{enabled:!!e,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),k=f.useMemo(()=>y?.data||[],[y?.data]),S=f.useMemo(()=>b?.data||{},[b?.data]),N=f.useMemo(()=>j?.data||[],[j?.data]),[_,w]=f.useState(!1),[T,A]=f.useState(null),[M,E]=f.useState(!1),[P,D]=f.useState(!1),[O,F]=f.useState({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{},doctor:{},patient:{},patientEncounter:{},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),q=vr(o)||mi(o)||Kn(o)||zi(o),{data:U}=Cn(),K=U?.data?.allowEncounterEdit;f.useEffect(()=>{w((Number(u?.status)===1||K==="on")&&(vr(o)||mi(o)||Kn(o)||zi(o)&&u?.doctorId===a))},[u,o,a,K]),f.useEffect(()=>{p?.data&&F(p.data)},[p]);const ne=f.useCallback(()=>{A(p?.data?.id||null),F(p?.data||O),E(!0)},[p,O]),Y=f.useCallback(()=>{E(!1),D(!1)},[]),fe=f.useMemo(()=>({isOpen:Number(u?.status)===1,isClosed:Number(u?.status)===0,isPending:Number(u?.status)===2,canClose:Number(u?.status)===1}),[u?.status]),le=f.useMemo(()=>({name:u.patientName||"Unknown Patient",email:u.patientEmail||"No email provided",phone:u.patientPhone,age:u.patientAge,gender:u.patientGender,address:u?.patient_data?.address||u?.patientAddress,profileImage:u.patient_image_url}),[u.patientName,u.patientEmail,u.patientPhone,u.patientAge,u.patientGender,u?.patient_data?.address,u?.patientAddress,u.patient_image_url]),W=f.useMemo(()=>({name:u.clinicName||"Unknown Clinic",address:u.clinicAddress,doctorName:u.doctorName||"Unknown Doctor",profileImage:u.clinic_image_url,description:u.description}),[u.clinicName,u.clinicAddress,u.doctorName,u.clinic_image_url,u.description]),z=f.useMemo(()=>({encounterId:e,encounterData:u,isEncounterLoading:d,encounterError:m,billData:p?.data,isBillLoading:h,billError:g,customForms:v,customFields:k,customFieldData:S,encounterCustomFieldData:N,canEditEncounter:q,canUpdateEncounter:_,userRole:o,showEditBillModal:M,showAddServiceItemForm:P,editFormData:O,setEditFormData:F,setShowAddServiceItemForm:D,handleOpenEditBillModal:ne,handleCloseEditBillModal:Y,encounterStatus:fe,patientInfo:le,clinicInfo:W,hasCapability:n,currentDoctorId:a,isAddonActive:r}),[e,u,d,m,p?.data,h,g,v,q,_,o,M,P,O,F,D,ne,Y,fe,le,W,n,a,r,k,S,N]);return i.jsx(Ck.Provider,{value:z,children:t})},YJ=(t,{isProblemEnabled:e,isObservationEnabled:n,isNoteEnabled:s})=>{const{hasCapability:a}=ht(),{encounterData:r,isEncounterLoading:o,patientInfo:c,isEncounterTemplate:d}=nf(),{data:m}=Cn(),u=m?.data?.allowEncounterEdit,[p,h]=f.useState([]),[g,x]=f.useState(null),[v,y]=f.useState(!0),[b,j]=f.useState(!0),[k,S]=f.useState(!0),[N,_]=f.useState([]),[w,T]=f.useState([]),[A,M]=f.useState(!1),E=!o&&t,{data:P}=Ma(e&&v&&E?"clinical_problems":null),{data:D}=Ma(n&&b&&E?"clinical_observations":null),O={enabled:E&&g!==null},F=(Q,V,Z)=>Q?V():Z(),{data:q}=F(d,()=>Gh(t,{type:"problem"},{enabled:!!v&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"problem"},{enabled:!!v&&!!O.enabled&&e})),{data:U}=F(d,()=>Gh(t,{type:"observation"},{enabled:!!b&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"observation"},{enabled:b&&O.enabled&&n})),{data:K}=F(d,()=>Gh(t,{type:"note"},{enabled:!!k&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"note"},{enabled:!!k&&!!O.enabled&&s})),ne=d?Ey():_y(),Y=d?eP():JR(),fe=f.useMemo(()=>P?.data?P.data.map(Q=>({value:Q.value||Q.id,label:Q.label})):[],[P]),le=f.useMemo(()=>D?.data?D.data.map(Q=>({value:Q.value||Q.id,label:Q.label})):[],[D]);f.useEffect(()=>{const V=(d?q?.data?.items||[]:q?.data?.histories||[]).map(Z=>({...Z,title:Z.clinical_detail_val||Z.title}));_(V)},[q,d]),f.useEffect(()=>{const V=(d?U?.data?.items||[]:U?.data?.histories||[]).map(Z=>({...Z,title:Z.clinical_detail_val||Z.title}));T(V)},[U,d]),f.useEffect(()=>{const Q=d?K?.data?.items||[]:K?.data?.histories||[];h(Q.map(V=>({id:V.id,title:V.clinical_detail_val||V.title})))},[K,d]),f.useEffect(()=>{M(d?a("encounters_template_edit"):(Number(r?.status)===1||u==="on")&&a("patient_encounter_edit")),(r?.patientId||c?.id)&&x(r?.patientId||c?.id)},[r,c,d,a,u]);const W=(Q,V)=>{const Z=d?{templateId:t,template_id:t}:{patient_id:g,encounter_id:t};ne.mutate({...Z,type:Q,title:V})},z=Q=>W("problem",Q),ie=Q=>W("observation",Q),re=Q=>W("note",Q),de=Q=>{d?Y.mutate({templateId:t,itemId:Q}):Y.mutate(Q)},L=a(d?"encounters_template_edit":"patient_encounter_edit");return{clinicalData:{problems:{list:N,staticOptions:fe},observations:{list:w,staticOptions:le},notes:p,patientId:g,isEncounterTemplate:d},handlers:{addProblem:z,addObservation:ie,addNote:re,deleteMedicalHistory:de},permissions:{canEditEncounter:L,canUpdateEncounter:A},uiState:{showProblems:v,showObservations:b,showNote:k,setShowProblems:y,setShowObservations:j,setShowNote:S}}},To={getReports:(t,e={})=>pe({endpoint:"patient-medical-reports",method:"GET",data:{patient_id:t,...e}}),getReport:t=>pe({endpoint:`patient-medical-reports/${t}`,method:"GET"}),createReport:t=>pe({endpoint:"patient-medical-reports",method:"POST",data:t}),updateReport:(t,e)=>pe({endpoint:`patient-medical-reports/${t}`,method:"PUT",data:e}),deleteReport:t=>pe({endpoint:`patient-medical-reports/${t}`,method:"DELETE"}),printReport:t=>pe({endpoint:`patient-medical-reports/print/${t}`,method:"GET",responseType:"blob"}),sendReports:t=>pe({endpoint:"patient-medical-reports/send-email",method:"POST",data:t})},dr={all:["patientMedicalReports"],lists:()=>[...dr.all,"list"],list:(t,e={})=>[...dr.lists(),{patientId:t,params:e}],details:()=>[...dr.all,"detail"],detail:t=>[...dr.details(),t]},QJ=(t,e={},n={})=>ft({queryKey:dr.list(t,e),queryFn:()=>To.getReports(t,e),enabled:!!t,...n}),ZJ=()=>{const t=ze();return Le({mutationFn:e=>To.createReport(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:dr.list(n.patient_id)})}})},XJ=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>To.updateReport(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:dr.detail(n.id)}),n.patient_id&&t.invalidateQueries({queryKey:dr.list(n.patient_id)})}})},JJ=()=>{const t=ze();return Le({mutationFn:({id:e,patient_id:n})=>To.deleteReport(e),onSuccess:(e,n)=>{n.patient_id&&t.invalidateQueries({queryKey:dr.list(n.patient_id)})}})},eee=()=>Le({mutationFn:t=>To.printReport(t)}),tee=()=>Le({mutationFn:t=>To.sendReports(t)}),Jr=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body",children:[t&&i.jsx("h6",{className:"font-size-14 mb-3",children:t}),e]})}),Sk=({patientId:t,canEditEncounter:e,canUpdateEncounter:n,showViewReport:s=!1})=>{const{isAddonActive:a,allowed_mime_types:r,hasCapability:o}=ht(),c=a("kiviPro");if(!c&&!e)return null;const[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState([]),[x,v]=f.useState(null),[y,b]=f.useState(""),[j,k]=f.useState(""),[S,N]=f.useState(!1),[_,w]=f.useState([]),[T,A]=f.useState([]),[M,E]=f.useState(!1),[P,D]=f.useState({page:1,perPage:10}),O=ZJ(),F=XJ(),q=JJ(),U=ze(),{data:K,isLoading:ne}=QJ(t,P,{enabled:c&&!!t}),Y=K?.data?.pagination||{total:0,total_pages:1,per_page:10,current_page:1},fe=tee();f.useEffect(()=>{K?.data?.reports&&g(K.data.reports.map(I=>({id:I.id,name:I.name||"",date:I.date||"",file:I.file||null})))},[K]);const le=I=>{I&&bt({title:l("Delete Report?","kivicare-clinic-management-system"),text:l("You're about to delete this report.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep report","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(H=>{H.isConfirmed&&(yt({title:l("Deleting Report...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected report.<br>This won't take long.","kivicare-clinic-management-system")}),q.mutate({id:I,patient_id:t},{onSuccess:B=>{St({title:l("Report Deleted","kivicare-clinic-management-system"),text:B?.message||l("Report has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:B=>{console.error("Delete report error:",B);const te=B?.response?.data?.message||B?.message||l("Failed to delete report. Please try again.","kivicare-clinic-management-system");rt({text:te})}}))})},{register:W,handleSubmit:z,reset:ie,setValue:re,formState:{errors:de},control:L}=Xt({defaultValues:{name:"",date:"",file:null}}),Q=I=>{let H=I.file;Array.isArray(H)&&(H=H[0]);const B={...I,file:H};if(d!==null){const oe=[...h];oe[d]=B,g(oe),m(null)}else g([...h,B]);const te={patient_id:t,name:I.name,date:I.date,upload_report:H.id};x?(F.mutate({id:x,...te}),v(null),Ee.success(l("Report updated successfully","kivicare-clinic-management-system"))):(O.mutate(te),Ee.success(l("Report created successfully","kivicare-clinic-management-system"))),ie(),p(!1),b(""),k("")},V=I=>{const H=h.find(B=>String(B.id)===String(I));H&&(m(I),p(!0),v(H.id),re("name",H.name),re("date",H.date),re("file",H.file),H.file?H.file instanceof File?(b(URL.createObjectURL(H.file)),k("")):H.file.url?(b(H.file.url),k(H.file.id||"")):typeof H.file=="string"?(b(H.file),k("")):(b(""),k("")):(b(""),k("")))},{mutate:Z}=eee(),X=I=>{Z(I,{onSuccess:H=>{const B=H instanceof Blob?H:new Blob([H],{type:H.type||"application/pdf"}),te=URL.createObjectURL(B),oe=window.open(te,"_blank");oe&&(oe.onload=()=>{URL.revokeObjectURL(te)})},onError:H=>{rt({text:H?.response?.data?.message||H?.message||l("Failed to open report","kivicare-clinic-management-system")})}})},R=()=>{ie(),p(!1),b(""),k(""),m(null)},G=[{header:l("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:I=>I.getValue()},{header:l("Date","kivicare-clinic-management-system"),accessorKey:"date",cell:I=>I.getValue()},{header:l("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:I=>{const H=te=>oe=>i.jsx(ut,{id:`tooltip-${I.cell.row.original.id}-${te}`,...oe,children:te}),B=I.row.original.id;return i.jsxs("div",{className:"d-flex gap-2",children:[o("patient_report_edit")&&i.jsx(Qe,{placement:"top",overlay:H(l("Edit Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>V(B),children:i.jsx("i",{className:"ph ph-pencil-simple"})})}),i.jsx(Qe,{placement:"top",overlay:H(l("View Report","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-sm text-primary fs-5",onClick:()=>X(B),children:i.jsx("i",{className:"ph ph-eye"})})}),o("patient_report_delete")&&i.jsx(Qe,{placement:"top",overlay:H(l("Delete Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>le(B),children:i.jsx("i",{className:"ph ph-trash"})})})]})}}],ee={name:{required:l("Report name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Report name must be at least 2 characters","kivicare-clinic-management-system")}},date:{required:l("Date is required","kivicare-clinic-management-system")},file:{required:l("File is required","kivicare-clinic-management-system")}},ae=async({page:I,per_page:H,search:B})=>{try{const te=["patientMedicalReports",t,I,H,B],oe=await U.fetchQuery({queryKey:te,queryFn:()=>To.getReports(t,{page:I,per_page:H,search:B}),staleTime:300*1e3}),me=(oe.data?.reports||[]).map(xe=>({value:xe.id,label:`${xe.name} - ${xe.date}`}));return A(xe=>[...xe,...me]),{data:me,pagination:oe.data?.pagination||{}}}catch(te){return console.error("Error loading report options:",te),{data:[],pagination:{has_more:!1}}}};return i.jsxs("div",{className:"position-relative",children:[!c&&i.jsx(ri,{text:l("Medical Report feature is available in KiviCare Pro. Upgrade to Pro to unlock uploading and managing patient medical reports.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx("h6",{children:l("Uploaded Reports","kivicare-clinic-management-system")}),(o("patient_report_add")||o("patient_report_view"))&&i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o("patient_report_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>{p(I=>!I),ie(),b(""),k(""),m(null),v(null)},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Report","kivicare-clinic-management-system")})]}),o("patient_report_view")&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("span",{children:l("Send Email","kivicare-clinic-management-system")})]})]})]}),u&&i.jsx(Jr,{className:`${s?"":"bg-body"}`,children:i.jsxs("form",{onSubmit:z(Q),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${de.name?"is-invalid":""}`,type:"text",...W("name",ee.name),placeholder:"eg Blood Test Report"}),de.name&&i.jsx("div",{className:"invalid-feedback d-block",children:de.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Date","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"date",control:L,rules:ee.date,render:({field:I})=>i.jsx(si,{id:"date",className:`form-control ${de.date?"is-invalid":""}`,value:I.value?ii(I.value):"",onChange:H=>{if(H&&H[0]){const B=H[0],te=B.getFullYear(),oe=String(B.getMonth()+1).padStart(2,"0"),ye=String(B.getDate()).padStart(2,"0");I.onChange(`${te}-${oe}-${ye}`)}else I.onChange("")},options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:ai()},placeholder:l("Select date","kivicare-clinic-management-system")})}),de.date&&i.jsx("div",{className:"invalid-feedback d-block",children:de.date.message})]})}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(cu,{id:"report-file",name:"file",label:l("Upload File","kivicare-clinic-management-system"),accept:r?Object.values(r).join(","):".jpg,.jpeg,.png,.gif,.webp,.bmp,.svg,.tiff,.ico,.pdf",className:`${de.file?"is-invalid":""}`,...W("file",ee.file),onChange:I=>{re("file",I.file||I,{shouldValidate:!0}),b(I.url||(I.file?URL.createObjectURL(I.file):"")),k(I.id||"")},required:!0,defaultFile:y,defaultFileId:j,disabled:x!==null}),de.file&&i.jsx("div",{className:"invalid-feedback d-block",children:de.file.message})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:R,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:l("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(wn,{data:K?.data?.reports||[],columns:G,enableSelection:!1,currentPage:Y.current_page,perPage:Y.per_page,totalItems:Y.total,lastPage:Y.total_pages,onPageChange:I=>D(H=>({...H,page:I})),onPerPageChange:I=>D(H=>({...H,perPage:I,page:1})),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:G.length,className:"text-center py-4 border-start border-end",children:l("No data added","kivicare-clinic-management-system")})}),moduleNamePlural:l("reports","kivicare-clinic-management-system"),isLoading:ne})}),i.jsxs(st,{show:S,onHide:()=>{N(!1),w([])},size:"md",backdrop:"static",centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:l("Send Email","kivicare-clinic-management-system")})}),i.jsxs(st.Body,{children:[i.jsx("p",{children:l("Select reports to send via email:","kivicare-clinic-management-system")}),i.jsx(yn,{id:"report-select",placeholder:l("Select reports","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ae,isMulti:!0,closeMenuOnSelect:!1,value:_.map(I=>{const H=T.find(B=>B.value===I);return H?{value:H.value,label:H.label}:null}).filter(Boolean),onChange:I=>{w(I?I.map(H=>H.value):[])},dependencies:{}})]}),i.jsxs(st.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{N(!1),w([])},disabled:M,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(_.length===0){Ee.error(l("Please select reports","kivicare-clinic-management-system"));return}E(!0),fe.mutate({report_ids:_,patient_id:t},{onSuccess:()=>{Ee.success(l("Reports sent successfully","kivicare-clinic-management-system")),N(!1),w([]),E(!1)},onError:I=>{Ee.error(I?.response?.data?.message||l("Failed to send reports","kivicare-clinic-management-system")),E(!1)}})},disabled:M,children:M?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Sending...","kivicare-clinic-management-system")]}):l("Send","kivicare-clinic-management-system")})]})]})]})},nee=({patientId:t,permissions:e})=>i.jsx(mt,{children:i.jsx(Ra,{children:i.jsx(Sk,{patientId:t,canEditEncounter:e.canEditEncounter,canUpdateEncounter:e.canUpdateEncounter})})}),iee=()=>i.jsx("div",{className:"mt-4",children:i.jsx("ol",{className:"mb-0 list-data-scroll",children:[1,2,3].map(t=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx(C,{width:"70%",height:"1rem"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]})},t))})}),see=({items:t,onRemove:e,canEditEncounter:n,canUpdateEncounter:s,isLoading:a,canDelete:r})=>{const[o,c]=f.useState(new Set),d=f.useRef(t.length);return f.useEffect(()=>{if(t.length>d.current){const m=new Set;for(let p=d.current;p<t.length;p++)m.add(p);c(m);const u=setTimeout(()=>{c(new Set)},500);return()=>clearTimeout(u)}d.current=t.length},[t.length]),a?i.jsx(iee,{}):t.length>0?i.jsx("ol",{className:"mt-4 mb-0 list-data-scroll",children:t.map((m,u)=>i.jsx("li",{className:o.has(u)?"slide-in-from-bottom":"",children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("span",{className:"text-break",children:typeof m=="object"?m.label:m}),n&&s&&r&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>e(u)})]})},m.id||u))}):i.jsx("div",{className:"card-body text-danger mt-4 text-center",children:l("No record found","kivicare-clinic-management-system")})},iP=({createLabel:t,note:e,placeholder:n,value:s,options:a,deleteMedicalHistory:r,addMedicalHistory:o,canEditEncounter:c,selectLabel:d,canUpdateEncounter:m,createType:u,isLoading:p,canAdd:h,canDelete:g,onOptimisticAdd:x})=>{const[v,y]=f.useState(null),[b,j]=f.useState(!1),k=oV(),S=cV(),N=async w=>{w=typeof w=="object"?w.label:w,x&&x(w),y(null);const T=u==="clinical_problems"?k:S;T?T.mutate(w,{onSuccess:A=>{o(w)},onError:()=>{}}):o(w)},_=w=>{const T=s[w];r(T.id)};return i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:t}),i.jsxs("div",{className:"bg-body card-block card-stretch card-height card p-3 mb-4",children:[c&&m&&i.jsx("p",{className:"text-danger font-size-12 fw-bold mb-3",children:e}),i.jsx("div",{className:"form-group",children:c&&m&&h&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:d}),i.jsx(ko,{isClearable:!0,placeholder:n,className:"react-select-box",classNamePrefix:"react-select",options:a,value:v,onChange:N,onCreateOption:N,isLoading:b,formatCreateLabel:w=>l("Add","kivicare-clinic-management-system")+` ${t}: "${w}"`})]})}),i.jsx(see,{items:s,onRemove:_,canEditEncounter:c,canUpdateEncounter:m,canDelete:g,isLoading:p})]})]})};iP.propTypes={createLabel:De.string.isRequired,note:De.string,placeholder:De.string,value:De.array.isRequired,setValue:De.func.isRequired,options:De.array.isRequired,setOptions:De.func.isRequired,show:De.bool.isRequired,setShow:De.func.isRequired,createStaicMutation:De.object,createType:De.string,deleteMedicalHistory:De.func,addMedicalHistory:De.func,canEditEncounter:De.bool,selectLabel:De.string,canUpdateEncounter:De.bool,canAdd:De.bool,canDelete:De.bool,onOptimisticAdd:De.func};const aee=({recordData:t,permissions:e,show:n,onToggle:s})=>{const{type:a,encounter_id:r,patient_id:o,isEncounterTemplate:c}=t,[d,m]=f.useState({title:"",type:a,encounter_id:r}),[u,p]=f.useState(!1),[h,g]=f.useState(!1),x=ze(),{hasCapability:v}=ht(),y=a==="note",{data:b}=Ma(y?null:a==="problem"?"clinical_problems":"clinical_observations"),j=f.useMemo(()=>b?.data?b.data.map(q=>({value:q.value||q.id,label:q.label})):[],[b]),k=c?Gh(r,{type:a},{enabled:n}):Kh({patient_id:o,encounter_id:r,type:a},{enabled:n&&!!o}),S=f.useMemo(()=>(c?k?.data?.data?.items||[]:k?.data?.data?.histories||[]).map(U=>({...U,title:U.clinical_detail_val||U.title})),[k,c]),N=c?Ey():_y(),_=c?eP():JR(),w=c?Ey():_y(),T=f.useMemo(()=>{const q=S.map(U=>U.title);return j.filter(U=>!q.includes(U.label))},[j,S]);f.useEffect(()=>{m(q=>({...q,encounter_id:r}))},[r]);const A=async q=>{const U=q;if(g(!0),!!U.trim()){p(!0);try{const K=c?{templateId:r,template_id:r,type:a,title:U}:{patient_id:o,encounter_id:r,type:a,title:U};await N.mutateAsync(K),q||m({title:"",type:a,encounter_id:r}),k.refetch()}catch(K){console.error("Error saving medical history:",K),k.refetch()}finally{p(!1),g(!1)}}},M=q=>{const U=c?cr.list(r,{type:a}):zl.list({patient_id:o,encounter_id:r,type:a});x.setQueryData(U,K=>{const ne={id:Date.now(),title:q,clinical_detail_val:q,type:a,label:q};return K?c?{...K,data:{...K?.data,items:[...K?.data?.items||[],ne]}}:{...K,data:{...K?.data,histories:[...K?.data?.histories||[],ne]}}:c?{data:{items:[ne]}}:{data:{histories:[ne]}}})},E=q=>{const U=c?cr.list(r,{type:a}):zl.list({patient_id:o,encounter_id:r,type:a});x.setQueryData(U,K=>K&&(c?{...K,data:{...K?.data,items:(K?.data?.items||[]).filter(ne=>ne.id!==q)}}:{...K,data:{...K?.data,histories:(K?.data?.histories||[]).filter(ne=>ne.id!==q)}}))},P=async q=>{E(q);try{c?await _.mutateAsync({templateId:r,itemId:q}):await _.mutateAsync(q),k.refetch()}catch(U){console.error("Error deleting medical history:",U),k.refetch()}},D=f.useMemo(()=>a==="problem"?l("Select or type to add problem","kivicare-clinic-management-system"):a==="observation"?l("Select or type to add observation","kivicare-clinic-management-system"):l("Enter note","kivicare-clinic-management-system"),[a]),O=f.useMemo(()=>a==="problem"?l("Select Problems","kivicare-clinic-management-system"):a==="observation"?l("Select Observations","kivicare-clinic-management-system"):l("Notes","kivicare-clinic-management-system"),[a]),F=f.useMemo(()=>a==="problem"?l("Problems","kivicare-clinic-management-system"):a==="observation"?l("Observations","kivicare-clinic-management-system"):l("Notes","kivicare-clinic-management-system"),[a]);return n?y?i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:l("Notes","kivicare-clinic-management-system")}),i.jsxs(Jr,{className:"bg-body card-block card-stretch card-height card mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsxs("div",{className:"form-group position-relative add-note-input d-flex",children:[i.jsx("textarea",{className:"form-control",placeholder:D,value:d.title,onChange:q=>m(U=>({...U,title:q.target.value})),rows:4}),i.jsx("button",{type:"button",className:"btn btn-primary py-1 px-3 add-btn-notes ms-2",onClick:()=>{d.title.trim()&&(M(d.title),A(d.title),m(q=>({...q,title:""})))},disabled:u||!d.title.trim(),children:l("Add","kivicare-clinic-management-system")})]}),S.length>0?i.jsx("ol",{className:"mt-3 mb-0 list-data-scroll",children:S.map(q=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("p",{className:"font-size-14 mb-0",children:q.title}),e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>P(q.id)})]})},q.id))}):i.jsx("div",{className:"text-danger mt-4 text-center",children:l("No record found","kivicare-clinic-management-system")})]})]})}):i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsx(iP,{selectLabel:O,createLabel:F,note:l("Note: Type and press enter to create new","kivicare-clinic-management-system")+" "+a,placeholder:D,value:S.map(q=>typeof q=="object"&&q.label?q:{label:q.title||q,id:q.id}),setValue:()=>{},options:T,setOptions:()=>{},show:n,setShow:s,createStaicMutation:w,createType:a==="problem"?"clinical_problems":"clinical_observations",addMedicalHistory:A,onOptimisticAdd:M,deleteMedicalHistory:P,canEditEncounter:e.canEditEncounter,canUpdateEncounter:e.canUpdateEncounter,isLoading:k.isLoading,canAdd:v("medical_records_add"),canDelete:v("medical_records_delete")})}):null},Ao={getPrescriptions:(t={})=>pe({endpoint:"prescriptions",method:"GET",data:t}),getPrescription:t=>pe({endpoint:`prescriptions/${t}`,method:"GET"}),createPrescription:t=>pe({endpoint:"prescriptions",method:"POST",data:t}),updatePrescription:(t,e)=>pe({endpoint:`prescriptions/${t}`,method:"PUT",data:e}),deletePrescription:t=>pe({endpoint:`prescriptions/${t}`,method:"DELETE"}),printPrescriptions:t=>pe({endpoint:`prescriptions/encounter/${t}/print`,method:"GET",responseType:"blob"}),exportPrescriptions:(t={})=>pe({endpoint:"prescriptions/export",method:"GET",data:t}),sendPrescriptionEmail:(t={})=>pe({endpoint:`prescriptions/${t.encounter_id}/email`,method:"POST",data:t})},ns={all:["prescriptions"],lists:()=>[...ns.all,"list"],list:t=>[...ns.lists(),{params:t}],details:()=>[...ns.all,"detail"],detail:t=>[...ns.details(),t]},ree=(t={},e={})=>ft({queryKey:ns.list(t),queryFn:()=>Ao.getPrescriptions(t),...e}),lee=()=>{const t=ze();return Le({mutationFn:e=>Ao.createPrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ns.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:ns.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ns.list({encounter_id:n.encounter_id})})}})},oee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Ao.updatePrescription(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ns.detail(n.id)}),n?.patient_id&&t.invalidateQueries({queryKey:ns.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ns.list({encounter_id:n.encounter_id})})}})},cee=()=>{const t=ze();return Le({mutationFn:({id:e})=>Ao.deletePrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ns.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:ns.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ns.list({encounter_id:n.encounter_id})})}})},dee=()=>Le({mutationFn:t=>Ao.printPrescriptions(t)}),mee=()=>Le({mutationFn:t=>Ao.exportPrescriptions(t)}),uee=()=>Le({mutationFn:t=>Ao.sendPrescriptionEmail(t)}),sf={getEncounterTemplatePrescriptions:t=>pe({endpoint:`encounter-templates/${t}/prescriptions`,method:"GET"}),createEncounterTemplatePrescription:(t,e)=>pe({endpoint:`encounter-templates/${t}/prescriptions`,method:"POST",data:e}),updateEncounterTemplatePrescription:(t,e,n)=>pe({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"PUT",data:n}),deleteEncounterTemplatePrescription:(t,e)=>pe({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"DELETE"})},el={all:["encounterTemplatePrescription"],lists:()=>[...el.all,"list"],list:t=>[...el.lists(),t],details:()=>[...el.all,"detail"],detail:(t,e)=>[...el.details(),t,e]},hee=(t,e={})=>ft({queryKey:el.list(t),queryFn:()=>sf.getEncounterTemplatePrescriptions(t),...e}),pee=()=>{const t=ze();return Le({mutationFn:({templateId:e,...n})=>sf.createEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(el.list(e.templateId))}})},gee=()=>{const t=ze();return Le({mutationFn:({templateId:e,id:n,...s})=>sf.updateEncounterTemplatePrescription(e,n,s),onSuccess:(e,n)=>{t.invalidateQueries(el.list(n.templateId))}})},fee=()=>{const t=ze();return Le({mutationFn:({templateId:e,itemId:n})=>sf.deleteEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(el.list(e.templateId))}})},vee=({patientId:t,encounterId:e,permissions:n})=>{const{prescription_modules:s,loading:a}=ht();if(!f.useMemo(()=>{if(a||!Array.isArray(s))return!0;const B=s.find(te=>te.name==="prescription");return B?B.status==1:!0},[a,s]))return null;const o=ze(),{isAddonActive:c,hasCapability:d}=ht(),m=Bm(),{isEncounterTemplate:u}=m[m.length-1].handle.meta,{canEditEncounter:p,canUpdateEncounter:h}=n,[g,x]=f.useState(null),[v,y]=f.useState(!1),[b,j]=f.useState(!1),k=c("kiviPro"),S=lee(),N=oee(),_=cee(),w=pee(),T=gee(),A=fee(),M=dee(),E=mee(),P=uee(),{data:D,isLoading:O}=Ma("prescription_medicine"),F=dV(),{data:q,isLoading:U}=u?hee(e,{enabled:!0}):ree({patient_id:t,encounter_id:e}),K=q?.data?.items||q?.data||[],{register:ne,handleSubmit:Y,reset:fe,setValue:le,control:W,formState:{errors:z}}=Xt({defaultValues:{name:"",frequency:"",duration:"",instruction:""}}),ie=B=>{x(B),y(!0);const te=K[B];le("name",{label:te.name,value:te.name}),le("frequency",te.frequency),le("duration",te.duration),le("instruction",te.instruction)},re=B=>{const te={patient_id:t,encounter_id:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction,added_by:1};if(g!==null&&K[g])u?T.mutate({templateId:e,id:K[g].id,...te}):N.mutate({id:K[g].id,...te}),Ee.success(l("Prescription updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});else{const oe=u?w:S,ye=u?{templateId:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction}:te;oe.mutate(ye),Ee.success(l("Prescription created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}fe(),y(!1),x(null)},de=()=>{fe(),y(!1),x(null)},L=B=>{const te=K[B];te?.id&&bt({title:l("Delete Prescription?","kivicare-clinic-management-system"),text:l("You're about to delete this prescription.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep prescription","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(oe=>{if(oe.isConfirmed){yt({title:l("Deleting Prescription...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected prescription.<br>This won't take long.","kivicare-clinic-management-system")});const ye=u?A:_,me=u?{templateId:e,id:te.id}:{id:te.id,patient_id:t,encounter_id:e};ye.mutate(me,{onSuccess:xe=>{St({title:l("Prescription Deleted","kivicare-clinic-management-system"),text:xe?.message||l("Prescription has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:xe=>{console.error("Delete prescription error:",xe);const Ce=xe?.response?.data?.message||xe?.message||l("Failed to delete prescription. Please try again.","kivicare-clinic-management-system");rt({text:Ce})}})}})},Q=[{header:l("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:B=>B.getValue()},{header:l("Frequency","kivicare-clinic-management-system"),accessorKey:"frequency",cell:B=>B.getValue()},{header:l("Duration","kivicare-clinic-management-system"),accessorKey:"duration",cell:B=>{const te=B.getValue();return te?`${te} ${l("days","kivicare-clinic-management-system")}`:l("N/A","kivicare-clinic-management-system")}},{header:l("Instruction","kivicare-clinic-management-system"),accessorKey:"instruction",cell:B=>B.getValue()||l("No data added","kivicare-clinic-management-system")},...ls()?[]:[{header:l("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:B=>{const te=B.row.index;return h?i.jsxs("div",{className:"d-flex gap-2",children:[(u||d("prescription_edit"))&&i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>ie(te),children:i.jsx("i",{className:"ph ph-pencil-simple"})}),d("prescription_delete")&&i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>L(te),children:i.jsx("i",{className:"ph ph-trash"})})]}):i.jsx("div",{className:"text-center text-muted",children:"-"})}}]],V={name:{required:l("Prescription name is required","kivicare-clinic-management-system")},frequency:{required:l("Frequency is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:l("Frequency must be a number greater than zero","kivicare-clinic-management-system")}},duration:{required:l("Duration is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:l("Duration must be a number greater than zero","kivicare-clinic-management-system")}}},Z=()=>{const B={onSuccess:te=>{const oe=new Blob([te],{type:"application/pdf"}),ye=URL.createObjectURL(oe);window.open(ye,"_blank"),setTimeout(()=>URL.revokeObjectURL(ye),100)},onError:te=>{Ee.error(te?.response?.data?.message||l("Failed to print prescriptions","kivicare-clinic-management-system"))}};M.mutate(e,B)},X=async B=>({success:!0}),R=()=>{o.invalidateQueries(["prescriptions",{patient_id:t,encounter_id:e}])},G=async B=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const te={format:B,patient_id:t,encounter_id:e},oe=await E.mutateAsync(te);if(oe?.data?.prescriptions){const ye=new Date().toISOString().split("T")[0],me=oe.data.prescriptions;switch(B){case"csv":cs(me,`prescriptions-${ye}.csv`);break;case"xls":ds(me,`prescriptions-${ye}.xls`);break;case"pdf":ms(me,`prescriptions-${ye}.pdf`,"Prescriptions List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(te){console.error("Export error:",te),rt({title:l("Error!","kivicare-clinic-management-system"),text:te.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},ee=()=>G("csv"),ae=()=>G("xls"),I=()=>G("pdf"),H=()=>{P.mutate({encounter_id:e},{onSuccess:B=>{Ee.success(B?.message||l("Prescription email sent successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})},onError:B=>{Ee.error(B?.response?.data?.message||l("Failed to send prescription email","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})}})};return i.jsxs(i.Fragment,{children:[d("prescription_list")&&i.jsx(mt,{children:i.jsxs(Ra,{children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap justify-content-between mb-3",children:[i.jsx("h5",{children:l("Prescription","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[!u&&i.jsxs(i.Fragment,{children:[K.length>0&&p&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:H,children:l("Email","kivicare-clinic-management-system")}),k&&K.length>0&&i.jsxs(i.Fragment,{children:[h&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>j(!0),children:l("Import","kivicare-clinic-management-system")}),i.jsxs("button",{className:"btn btn-primary",type:"button",onClick:Z,children:[i.jsx("i",{className:"ph ph-printer"})," ",l("Print","kivicare-clinic-management-system")]})]})]}),h&&d("prescription_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>y(B=>!B),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Prescription","kivicare-clinic-management-system")})]})]})]}),k&&!u&&K.length>0&&i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 flex-wrap mb-3",children:d("prescription_export")&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-import-bg",onClick:ee,title:l("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:ae,title:l("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:I,title:l("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]})}),v&&i.jsx(Jr,{className:"bg-body",children:i.jsxs("form",{onSubmit:Y(re),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"name",control:W,rules:V.name,render:({field:B})=>i.jsx(ko,{id:"prescription-name",...B,isClearable:!0,options:D?.data??[],placeholder:l("Select or create medicine","kivicare-clinic-management-system"),className:`react-select-container ${z.name?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isLoading:O||F.isPending,getOptionValue:te=>{const oe=te.value??te.id;return oe!=null?String(oe):""},getOptionLabel:te=>te.label,onChange:te=>{B.onChange(te)},onCreateOption:te=>{F.mutate(te,{onSuccess:oe=>{if(oe?.data){const ye=oe.data?.data?.id||oe.data?.id,me=oe.data?.data?.label||te,xe={id:parseInt(ye,10),value:parseInt(ye,10),label:me};B.onChange(xe)}else B.onChange({label:te,value:te});Ee.success(l("Medicine added successfully","kivicare-clinic-management-system"))},onError:oe=>{console.error("Failed to save medicine:",oe);const ye={label:te,value:te};B.onChange(ye),Ee.error(l("Failed to save medicine to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},noOptionsMessage:()=>l("Type to create a new medicine","kivicare-clinic-management-system"),formatCreateLabel:te=>l("Add medicine","kivicare-clinic-management-system")+`: "${te}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new prescription","kivicare-clinic-management-system")]}),z.name&&i.jsx("div",{className:"invalid-feedback d-block",children:z.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Frequency","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${z.frequency?"is-invalid":""}`,type:"text",...ne("frequency",V.frequency),placeholder:'eg "1"(times per day)'}),z.frequency&&i.jsx("div",{className:"invalid-feedback d-block",children:z.frequency.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Duration (In Days)","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${z.duration?"is-invalid":""}`,type:"text",...ne("duration",V.duration),placeholder:'eg "5" (days)'}),z.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:z.duration.message})]})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Instruction","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",...ne("instruction"),placeholder:'eg "Drink milk after taking pills"'})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:de,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:l("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(wn,{data:K,columns:Q,enableSelection:!1,isLoading:U,skeletonColumns:4,skeletonRows:3,striped:!0,bordered:!0,hover:!0,responsive:!0,moduleNamePlural:l("prescriptions","kivicare-clinic-management-system"),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:Q.length,className:"text-center py-4 border-start border-end",children:l("No data added","kivicare-clinic-management-system")})})})})]})}),k&&i.jsx(Ar,{show:b,onHide:()=>j(!1),onImport:X,onReopenImport:()=>j(!0),onDataRefresh:R,context:"prescriptions",encounterId:e})]})},sP=()=>{const{id:t}=Wt(),{encounter_modules:e,loading:n}=ht(),{control:s,formState:{errors:a},setValue:r,watch:o}=Xt(),{encounterCustomFieldData:c}=nf(),{data:d}=Cn(),u=ls()&&d?.data?.hideClinicalDetailsForPatient===!0,p=f.useCallback(j=>{if(n||!Array.isArray(e))return!0;const k=e.find(S=>S.name===j);return k?k.status==1:!0},[n,e]),h=p("problem"),g=p("observation"),x=p("note"),{clinicalData:v,permissions:y,uiState:b}=YJ(t,{isProblemEnabled:h,isObservationEnabled:g,isNoteEnabled:x});return i.jsxs("div",{className:"mt-4",children:[!u&&(h||g||x)&&i.jsx(mt,{children:i.jsx(Ra,{children:i.jsx("div",{className:"row",children:[{type:"problem",moduleName:"problem",show:b.showProblems,onToggle:b.setShowProblems},{type:"observation",moduleName:"observation",show:b.showObservations,onToggle:b.setShowObservations},{type:"note",moduleName:"note",show:b.showNote,onToggle:b.setShowNote}].map(j=>p(j.moduleName)&&i.jsx(aee,{recordData:{type:j.type,encounter_id:t,patient_id:v.patientId,isEncounterTemplate:v.isEncounterTemplate},permissions:y,show:j.show,onToggle:j.onToggle},j.type))})})}),!v.isEncounterTemplate&&i.jsx(nee,{patientId:v.patientId,permissions:y}),i.jsx(vee,{patientId:v.patientId,encounterId:t,permissions:y}),i.jsx(tf,{moduleType:"patient_encounter_module",moduleId:parseInt(t),control:s,errors:a,setValue:r,watch:o,initialData:c})]})},xee=()=>{const{id:t}=Wt(),e=Bm(),{isEncounterTemplate:n}=e[e.length-1].handle.meta,s={encounterData:null,isEncounterLoading:!1,encounterError:null,customForms:[],canEditEncounter:!0,canUpdateEncounter:!0,showEditBillModal:!1,showAddServiceItemForm:!1,editFormData:{},setEditFormData:()=>{},setShowAddServiceItemForm:()=>{},handleOpenEditBillModal:()=>{},handleCloseEditBillModal:()=>{},billData:null,encounterStatus:null,patientInfo:null,clinicInfo:null,isAddonActive:()=>!1,isEncounterTemplate:n||!1};return i.jsx(Ck.Provider,{value:s,children:i.jsx("div",{className:"row mb-0",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-5",children:i.jsx("h6",{className:"m-0",children:l("Other Details","kivicare-clinic-management-system")})}),i.jsx(sP,{})]})})})},pC=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["50px","120px","120px"]}),i.jsx(nt,{width:"80px",height:"32px"})]}),i.jsx(fl,{titleWidth:"140px"}),i.jsxs("form",{className:"mb-0",children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"80px"})]})]})]}),gC=({view:t=null,children:e=null})=>i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"mt-4",children:e||i.jsx(i.Fragment,{children:t==="clinic-detail"?i.jsx(pt,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((n,s)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},s)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(nt,{width:"140px",height:"38px"})]})})]})}):t==="body-chart"?i.jsx(Nn,{columns:5,rows:5,showHeader:!0,showActions:!0,showPagination:!0,showFilterBar:!0}):t==="custom-form"?i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"custom-form-container",children:i.jsxs("div",{className:"gy-3 row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"150px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:4}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"80px",height:"0.875rem"})]},s))})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"130px",inputHeight:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"200px",height:"0.875rem"})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"180px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:3}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]},s))})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(nt,{width:"120px",height:"42px"})})]})}):i.jsxs(i.Fragment,{children:[i.jsx(pt,{children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(C,{width:"80px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(C,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(C,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"140px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-12",children:[i.jsx(C,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"100%",height:"80px",className:"mb-2",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100%",height:"1rem"})]})})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx(C,{width:"140px",height:"1.125rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"120px"}),i.jsx(nt,{width:"120px"})]})]}),i.jsx(Nn,{columns:3,rows:2,showHeader:!0,showActions:!1,showPagination:!1})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap pt-3 justify-content-between mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"160px"})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 mb-3",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Nn,{columns:5,rows:3,showHeader:!0,showActions:!0,showPagination:!1})]})]})})})}),gh=({view:t=null})=>Hn().key!="default"?i.jsx(gC,{view:t}):i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["50px","120px","100px","140px"]}),i.jsx(nt,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:"position-sticky top-0",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsxs(pt,{children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"180px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"100px",height:"0.875rem"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(C,{width:"100px",height:"1.125rem"})}),i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"140px"})]})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-2"}),i.jsx(pt,{children:i.jsx(Se,{labelWidth:"180px",inputHeight:"38px"})})]})]})}),i.jsxs("div",{className:"col-xl-9 col-lg-8",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"20px"}})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"140px"}),i.jsx(nt,{width:"140px"})]})]}),i.jsx(gC,{view:t})]})]})]}),yee=()=>i.jsx("div",{className:"body-chart-outlet",children:i.jsx(Gi,{})}),bee=()=>i.jsx("div",{className:"body-chart-editor-page",children:i.jsxs(mt,{children:[i.jsx(mt.Header,{className:"mb-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx(C,{width:"150px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(nt,{width:"80px"}),i.jsx(nt,{width:"120px"})]})]})}),i.jsxs(mt.Body,{children:[i.jsx(Un,{children:i.jsxs(Ct,{md:12,children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"100px"})]})]})}),i.jsx(Un,{className:"mt-4",children:i.jsx(Ct,{xs:12,children:i.jsx(mt,{children:i.jsx(mt.Body,{children:i.jsxs("div",{style:{height:"76vh",position:"relative"},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(nt,{width:"40px",height:"30px"}),i.jsx(nt,{width:"120px",height:"30px"}),i.jsx(nt,{width:"120px",height:"30px"})]}),i.jsx(C,{width:"100%",height:"100%"})]})})})})})]})]})}),qa=(t,e)=>{const[n,s]=f.useState(t);return f.useEffect(()=>{const a=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(a)}},[t,e]),n},Dr={getClinics:(t={})=>pe({endpoint:"clinics",method:"GET",data:t}),getClinic:t=>pe({endpoint:`clinics/${t}`,method:"GET"}),createClinic:t=>pe({endpoint:"clinics",method:"POST",data:t}),updateClinic:(t,e)=>pe({endpoint:`clinics/${t}`,method:"PUT",data:e}),deleteClinic:t=>pe({endpoint:`clinics/${t}`,method:"DELETE"}),getClinicDoctors:(t,e={})=>pe({endpoint:`clinics/${t}/doctors`,method:"GET",data:e}),getClinicPatients:(t,e={})=>pe({endpoint:`clinics/${t}/patients`,method:"GET",data:e}),getClinicServices:(t,e={})=>pe({endpoint:`clinics/${t}/services`,method:"GET",data:e}),getClinicSchedule:(t,e={})=>pe({endpoint:`clinics/${t}/schedule`,method:"GET",data:e}),resendCredentials:t=>pe({endpoint:`clinics/${t}/resend-credentials`,method:"POST"}),updateClinicStatus:(t,e)=>pe({endpoint:`clinics/${t}/status`,method:"PUT",data:{status:e}}),bulkDeleteClinics:t=>pe({endpoint:"clinics/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>pe({endpoint:"clinics/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateClinicStatus:(t,e)=>pe({endpoint:"clinics/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportClinics:(t={})=>pe({endpoint:"clinics/export",method:"GET",data:t})},$s={all:["clinics"],lists:()=>[...$s.all,"list"],list:t=>[...$s.lists(),{filters:t}],details:()=>[...$s.all,"detail"],detail:t=>[...$s.details(),t]},aP=(t={},e={})=>ft({queryKey:$s.list(t),queryFn:()=>Dr.getClinics(t),...e}),wee=(t,e={})=>ft({queryKey:$s.detail(t),queryFn:()=>Dr.getClinic(t),enabled:!!t,...e}),kee=()=>{const t=ze();return Le({mutationFn:e=>Dr.createClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:$s.lists()})}})},jee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Dr.updateClinic(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:$s.detail(n.id)}),t.invalidateQueries({queryKey:$s.lists()})}})},Nee=()=>{const t=ze();return Le({mutationFn:e=>Dr.deleteClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:$s.lists()})}})},Cee=()=>Le({mutationFn:t=>Dr.resendCredentials(t)}),See=()=>{const t=ze();return Le({mutationFn:e=>Dr.bulkDeleteClinics(e),onSuccess:()=>{t.invalidateQueries({queryKey:$s.lists()})}})},_ee=()=>Le({mutationFn:t=>Dr.bulkResendCredentials(t)}),Eee=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Dr.bulkUpdateClinicStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:$s.lists()})}})},Ha={getDoctors:(t={})=>pe({endpoint:"doctors",method:"GET",data:t}),getDoctor:t=>pe({endpoint:`doctors/${t}`,method:"GET"}),createDoctor:t=>pe({endpoint:"doctors",method:"POST",data:t}),updateDoctor:(t,e)=>pe({endpoint:`doctors/${t}`,method:"PUT",data:e}),deleteDoctor:t=>pe({endpoint:`doctors/${t}`,method:"DELETE"}),getDoctorSchedule:(t,e={})=>pe({endpoint:`doctors/${t}/schedule`,method:"GET",data:e}),bulkDeleteDoctors:t=>pe({endpoint:"doctors/bulk/delete",method:"POST",data:{ids:t}}),resendCredentials:t=>pe({endpoint:`doctors/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>pe({endpoint:"doctors/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateDoctorStatus:(t,e)=>pe({endpoint:"doctors/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctors:(t={})=>pe({endpoint:"doctors/export",method:"GET",data:t})},Xi={all:["doctors"],lists:()=>[...Xi.all,"list"],list:t=>[...Xi.lists(),{filters:t}],details:()=>[...Xi.all,"detail"],detail:t=>[...Xi.details(),t],schedule:()=>[...Xi.all,"schedule"],doctorSchedule:t=>[...Xi.schedule(),t]},_k=(t={},e={})=>ft({queryKey:Xi.list(t),queryFn:()=>Ha.getDoctors(t),...e}),af=(t,e={})=>ft({queryKey:Xi.detail(t),queryFn:()=>Ha.getDoctor(t),enabled:!!t,...e}),Tee=()=>{const t=ze();return Le({mutationFn:e=>Ha.createDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:Xi.lists()})}})},Aee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Ha.updateDoctor(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Xi.detail(n.id)}),t.invalidateQueries({queryKey:Xi.lists()}),t.invalidateQueries({queryKey:["dashboard","topDoctors"]})}})},Dee=()=>{const t=ze();return Le({mutationFn:e=>Ha.deleteDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:Xi.lists()})}})},Ree=()=>{const t=ze();return Le({mutationFn:e=>Ha.bulkDeleteDoctors(e),onSuccess:()=>{t.invalidateQueries({queryKey:Xi.lists()})}})},Pee=()=>Le({mutationFn:t=>Ha.resendCredentials(t)}),Mee=()=>Le({mutationFn:t=>Ha.bulkResendCredentials(t)}),Iee=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Ha.bulkUpdateDoctorStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Xi.lists()})}})},Oee=()=>Le({mutationFn:t=>Ha.exportDoctors(t)}),Qs={getPatients:(t={})=>pe({endpoint:"patients",method:"GET",data:t}),getPatient:t=>pe({endpoint:`patients/${t}`,method:"GET"}),createPatient:t=>pe({endpoint:"patients",method:"POST",data:t}),updatePatient:(t,e)=>pe({endpoint:`patients/${t}`,method:"PUT",data:e}),resendCredentials:t=>pe({endpoint:`patients/${t}/resend-credentials`,method:"POST"}),deletePatient:t=>pe({endpoint:`patients/${t}`,method:"DELETE"}),bulkDeletePatients:t=>pe({endpoint:"patients/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>pe({endpoint:"patients/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdatePatientStatus:(t,e)=>pe({endpoint:"patients/bulk/status",method:"PUT",data:{ids:t,status:e}}),getPatientUniqueId:()=>pe({endpoint:"patients/uniqueid",method:"GET"}),exportPatients:(t={})=>pe({endpoint:"patients/export",method:"GET",data:t}),getPatientStatistics:t=>pe({endpoint:`patients/${t}/statistics`,method:"GET"})},is={all:["patients"],lists:()=>[...is.all,"list"],list:t=>[...is.lists(),{filters:t}],details:()=>[...is.all,"detail"],detail:t=>[...is.details(),t]},rP=(t={},e={})=>ft({queryKey:is.list(t),queryFn:()=>Qs.getPatients(t),...e}),Lee=(t,e={})=>ft({queryKey:is.detail(t),queryFn:()=>Qs.getPatient(t),enabled:!!t,...e}),Fee=()=>{const t=ze();return Le({mutationFn:e=>Qs.createPatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()}),t.invalidateQueries({queryKey:vt.users()})}})},$ee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Qs.updatePatient(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:is.detail(n.id)}),t.invalidateQueries({queryKey:is.lists()})}})},Bee=()=>Le({mutationFn:t=>Qs.resendCredentials(t)}),qee=()=>{const t=ze();return Le({mutationFn:e=>Qs.deletePatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},Hee=()=>{const t=ze();return Le({mutationFn:e=>Qs.bulkDeletePatients(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},zee=()=>Le({mutationFn:t=>Qs.bulkResendCredentials(t)}),Vee=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Qs.bulkUpdatePatientStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},Uee=(t={})=>ft({queryKey:[...is.all,"uniqueid"],queryFn:()=>Qs.getPatientUniqueId(),...t}),Wee=()=>Le({mutationFn:t=>Qs.exportPatients(t)}),Kee=(t,e={})=>ft({queryKey:[...is.detail(t),"statistics"],queryFn:()=>Qs.getPatientStatistics(t),enabled:!!t,...e}),Ty=({patientId:t})=>{const[e,n]=f.useState(!1),[s,a]=f.useState(()=>{const X={};return t&&(X.patientId=t),X}),[r,o]=f.useState(!1),c=f.useRef(null),{userRole:d,isAddonActive:m,hasCapability:u}=ht(),{data:p}=Cn(),h=m("kiviPro"),g=Kn(),x=mi(),v=p?.data?.allowEncounterEdit,[y,b]=f.useState(null),j=In(),[k,S]=f.useState(null),N=qa(k,500);He.useEffect(()=>{a(X=>({...X,search:N,page:1,...t?{patientId:t}:{}}))},[N,t]);const _=X=>{S(X.target.value)};tP();const w=qJ(),T=ze(),A=f.useMemo(()=>Object.fromEntries(Object.entries(s).filter(([X,R])=>R!==""&&R!==null&&R!==void 0)),[s]),M=KJ(),E=async X=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const G=(await M.mutateAsync({format:X,...A})).data,ee=new Date().toISOString().split("T")[0],ae=`${l("Patients Encounter List","kivicare-clinic-management-system")} - ${ee}`;X==="csv"?cs(G,`${ae}.csv`):X==="xls"?ds(G,`${ae}.xls`):X==="pdf"&&ms(G,`${ae}.pdf`,l("Patients Encounter List","kivicare-clinic-management-system")),Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(R){console.error("Export failed:",R),rt({title:l("Error!","kivicare-clinic-management-system"),text:R.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},P=Le({mutationFn:X=>jr.deleteEncounter(X),onSuccess:()=>{T.invalidateQueries({queryKey:["encounters"]})}}),D=f.useMemo(()=>[j.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:X=>X.getValue(),enableSorting:!0}),j.accessor("patientName",{header:()=>l("Patient","kivicare-clinic-management-system"),cell:X=>{const R=X.row.original;return i.jsx(Zt,{profileUrl:R.patient_image_url,name:R.patientName,email:R.patientEmail||"",nameLabel:l("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0}),...d!=="kiviCare_doctor"?[j.accessor("doctorName",{header:()=>l("Doctor","kivicare-clinic-management-system"),cell:X=>{const R=X.row.original;return i.jsx(Zt,{profileUrl:R.doctor_image_url,name:R.doctorName,email:R.doctorEmail||"",nameLabel:l("Doctor","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})]:[],...h&&!g&&!x?[j.accessor("clinicName",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:X=>{const R=X.row.original;return i.jsx(Zt,{profileUrl:R.clinic_image_url,name:R.clinicName,email:R.clinicEmail||"",nameLabel:l("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})]:[],j.accessor("encounterDate",{header:()=>l("Date","kivicare-clinic-management-system"),cell:X=>X.getValue(),enableSorting:!0}),j.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:X=>{const R=X.getValue();return R===1||R==="1"?i.jsx("span",{className:"badge bg-success-subtle px-3 py-2",children:l("Active","kivicare-clinic-management-system")}):R===0||R==="0"?i.jsx("span",{className:"badge bg-danger-subtle px-3 py-2",children:l("Closed","kivicare-clinic-management-system")}):i.jsx("span",{children:R})},enableSorting:!0}),...u("patient_encounter_edit")||u("patient_encounter_view")||u("patient_encounter_delete")||u("patient_encounter_view_billing")?[j.display({id:"action",header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:X=>{const R=G=>ee=>i.jsx(ut,{id:`tooltip-${X.cell.row.original.id}-${G}`,...ee,children:G});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[u("patient_encounter_edit")&&(X.cell.row.original.status!=="0"||v==="on")&&d!=="kiviCare_patient"&&i.jsx(Qe,{placement:"top",overlay:R(l("Edit Encounter","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/edit/${X.cell.row.original.id}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),X.cell.row.original.status=="0"&&h&&X.cell.row.original.billId&&u("patient_encounter_view_billing")&&i.jsx(Qe,{placement:"top",overlay:R(l("View Billing","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/billings/view/${X.cell.row.original.billId}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),u("patient_encounter_view")&&i.jsx(Qe,{placement:"top",overlay:R(l("View Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/dashboard/${X.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),u("patient_encounter_delete")&&i.jsx(Qe,{placement:"top",overlay:R(l("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async G=>{G.preventDefault(),bt({title:l("Delete Encounter?","kivicare-clinic-management-system"),text:l("You're about to delete this encounter.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep encounter","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ee=>{ee.isConfirmed&&(yt({title:l("Deleting Encounter...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected encounter.<br>This won't take long.","kivicare-clinic-management-system")}),P.mutate(X.cell.row.original.id,{onSuccess:ae=>{St({title:l("Encounter Deleted","kivicare-clinic-management-system"),text:ae?.message||l("Encounter has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to encounters","kivicare-clinic-management-system")})},onError:ae=>{rt({text:ae?.response?.data?.message||ae?.message||l("Failed to delete encounter. Please try again.","kivicare-clinic-management-system")})}}))})},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})}})]:[]],[j,P,u,v,g,x]),O=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Closed","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],F=()=>E("csv"),q=()=>E("xls"),[U,K]=f.useState(!1),ne=()=>{U||(K(!0),E("pdf"),setTimeout(()=>K(!1),2e3))},{data:Y,isLoading:fe,error:le}=BJ(s),{data:W,isLoading:z}=aP(),{data:ie,isLoading:re}=_k(),{data:de,isLoading:L}=rP(),Q=(W?.data?.clinics||[]).map(X=>({value:X.id,label:X.name||X.clinic_name})),V=(ie?.data?.doctors||[]).map(X=>({value:X.id,label:X.name||`${X.first_name||""} ${X.last_name||""}`})),Z=(de?.data?.patients||[]).map(X=>({value:X.id,label:X.name||`${X.first_name||""} ${X.last_name||""}`}));return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:l("All Encounter List","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[d!=="kiviCare_patient"&&u("patient_encounter_add")&&i.jsxs(gt,{to:"/encounter/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Encounter","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>n(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!r,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:c,children:i.jsxs("div",{ref:c,className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(si,{className:"form-control w-auto",value:y?ii(y):"",options:{dateFormat:bi(window.kc_frontend.date_format),allowInput:!0,locale:ai()},onChange:X=>{if(X&&X[0]){const R=X[0],G=R.getFullYear(),ee=String(R.getMonth()+1).padStart(2,"0"),ae=String(R.getDate()).padStart(2,"0"),I=`${G}-${ee}-${ae}`;b(I),a(H=>({...H,encounterDate:I}))}else b(null),a(R=>({...R,encounterDate:void 0}))},placeholder:l("Select Date","kivicare-clinic-management-system")}),y&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute",style:{right:"48px",top:"50%",transform:"translateY(-50%)",zIndex:10,padding:"4px 8px",background:"transparent",border:"none"},onClick:()=>{b(null),a(X=>({...X,encounterDate:void 0}))},title:l("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x text-danger",style:{fontSize:"16px"}})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:O,onChange:X=>a(R=>({...R,encounterStatus:X?X.value:""})),value:O.find(X=>X.value===s.encounterStatus)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:X=>({...X,zIndex:9999})}})]}),i.jsx("div",{className:"position-relative"}),i.jsx("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:k,onChange:_})]}),u("patient_encounter_export")&&h&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:F,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:q,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:ne,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})}),i.jsx(wn,{data:Y?.data.encounters||[],columns:D,moduleNamePlural:"encounters",currentPage:Y?.data.page,perPage:Y?.data.per_page||10,totalItems:Y?.data.total||(Y?.data.encounters?Y.data.length:0),lastPage:Y?.data.total_pages||1,isLoading:fe,enableSelection:d!=="kiviCare_patient",enableSorting:!0,onPageChange:X=>a(R=>({...R,page:X})),onPerPageChange:X=>a(R=>({...R,perPage:X,page:1})),onSortingChange:X=>{a(R=>({...R,sortBy:X.length>0?X[0].id:void 0,sortOrder:X.length>0?X[0].desc?"desc":"asc":void 0,page:1}))},bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(X,R)=>{const G=X.map(ee=>ee.id);bt({title:l("Delete Encounters?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${X.length} encounters</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep encounters","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ee=>{ee.isConfirmed&&(yt({title:l("Deleting Encounters...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected encounters.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(G,{onSuccess:ae=>{St({title:l("Encounter Deleted","kivicare-clinic-management-system"),text:l(`${X.length} encounter${X.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to encounters","kivicare-clinic-management-system")}),R()},onError:ae=>{console.error("Bulk delete encounters error:",ae);const I=ae?.response?.data?.message||ae?.message||l("Failed to delete selected encounters. Please try again.","kivicare-clinic-management-system");rt({text:I})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:X=>{o(X)}})]}),i.jsx(ha,{show:e,onHide:()=>n(!1),queryParams:s,onApplyFilters:X=>{a(R=>({...R,...X,page:1})),n(!1)},onResetFilters:()=>{a({...t?{patientId:t}:{}}),n(!1)},title:l("Filters","kivicare-clinic-management-system"),fields:[{name:"id",label:l("ID","kivicare-clinic-management-system"),type:"text",placeholder:l("eg 123","kivicare-clinic-management-system")},d!=="kiviCare_doctor"?[...h?[{name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),type:"select",options:Q,isLoading:z,placeholder:l("eg Mount Health Care","kivicare-clinic-management-system")}]:[]]:[],d!=="kiviCare_doctor"?[{name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),type:"select",options:V,isLoading:re,placeholder:l("eg Albert Heaven","kivicare-clinic-management-system")}]:[],d!=="kiviCare_patient"?[{name:"patient",label:l("Patient","kivicare-clinic-management-system"),type:"select",options:Z,isLoading:L,placeholder:l("eg Amelia Brightwell","kivicare-clinic-management-system")}]:[],{name:"dateRange",label:l("Select Date","kivicare-clinic-management-system"),type:"dateRange",startDateKey:"startDate",endDateKey:"endDate",placeholder:l("eg Feb 25,2025","kivicare-clinic-management-system")},{name:"status",label:l("Status","kivicare-clinic-management-system"),type:"select",options:O,placeholder:l("eg Active","kivicare-clinic-management-system")}],hasAppliedFilters:f.useMemo(()=>["id","clinic","doctor","patient","startDate","endDate","status","search","encounterDate","encounterStatus"].some(R=>{const G=s[R];return G!=null&&G!==""})||k!==null&&k!=="",[s,k])})]})},Gee=He.memo(({formData:t={},onSubmit:e,onCancel:n,isSubmitting:s})=>{const{register:a,handleSubmit:r,watch:o,setValue:c,reset:d,control:m,formState:{errors:u,isDirty:p}}=Xt(),{userRole:h,currentDoctorId:g,isAddonActive:x,defaultClinicId:v}=ht(),y=ze(),[b,j]=f.useState({clinics:[],doctors:[],patients:[],loadingClinics:!0,loadingDoctors:!1,loadingPatients:!1,clinicError:null,doctorError:null,patientError:null,initialLoadComplete:!1}),[k,S]=f.useState(!1),N=o("clinic"),_=f.useRef(t),w=f.useRef(!0),T=f.useRef(null),A=x("kiviPro"),M=Kn();bk();const E=t?.id,{data:P}=Sy("patient_encounter_module",E,{enabled:!!E}),D=f.useCallback(async({page:de,per_page:L,search:Q})=>{try{const V={dataType:"clinicList",page:de,per_page:L,search:Q};return await y.fetchQuery({queryKey:vt.list(V),queryFn:()=>Bt.getStaticData(V),staleTime:0})}catch(V){return console.error("Error loading clinics:",V),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),O=f.useCallback(async({page:de,per_page:L,search:Q,clinic_ids:V})=>{try{const Z={dataType:"staticData",staticDataType:"doctors",clinic_ids:V,page:de,per_page:L,search:Q};return await y.fetchQuery({queryKey:vt.list(Z),queryFn:()=>Bt.getStaticData(Z),staleTime:0})}catch(Z){return console.error("Error loading doctors:",Z),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),F=f.useCallback(async({page:de,per_page:L,search:Q,clinic_ids:V})=>{try{const Z={dataType:"staticData",staticDataType:"patients",clinic_ids:V,page:de,per_page:L,search:Q};return await y.fetchQuery({queryKey:vt.list(Z),queryFn:()=>Bt.getStaticData(Z),staleTime:0})}catch(Z){return console.error("Error loading patients:",Z),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),q=f.useMemo(()=>new Date().toISOString().slice(0,10),[]),U=de=>de!=null?String(de):"",K=(de,L=!1)=>{if(L&&de){if(typeof de=="string"&&de.length>=10){const R=de.substring(0,10);if(/^\d{4}-\d{2}-\d{2}$/.test(R))return R}const Q=new Date(de);if(isNaN(Q.getTime()))return q;const V=Q.getFullYear(),Z=String(Q.getMonth()+1).padStart(2,"0"),X=String(Q.getDate()).padStart(2,"0");return`${V}-${Z}-${X}`}return q},ne=!!(t?.id||t?.encounterDate||t?.clinic||t?.doctor||t?.patient),Y=f.useCallback(async()=>{j(de=>({...de,loadingClinics:!0,clinicError:null}));try{const de=await Bt.getClinics(),L=de.data||de||[];if(j(Q=>({...Q,clinics:L,loadingClinics:!1})),_.current?.clinic&&w.current){const Q=U(_.current.clinic);L.some(Z=>U(Z.id)===Q||U(Z.ID)===Q||U(Z.slug)===Q||U(Z.name)===Q)&&c("clinic",Q,{shouldDirty:!1})}}catch(de){j(L=>({...L,clinicError:de.message||"Failed to fetch clinics",loadingClinics:!1}))}},[]),fe=f.useCallback(async de=>{if(!de){j(L=>({...L,doctors:[]}));return}j(L=>({...L,loadingDoctors:!0,doctorError:null}));try{const L=await Bt.getDoctors(de),Q=L.data||L||[];if(j(V=>({...V,doctors:Q,loadingDoctors:!1})),_.current?.doctor&&w.current){const V=U(_.current.doctor);Q.some(X=>U(X.id)===V||U(X.ID)===V||U(X.slug)===V||U(X.name)===V)&&c("doctor",V,{shouldDirty:!1})}}catch(L){j(Q=>({...Q,doctorError:L.message||"Failed to fetch doctors",doctors:[],loadingDoctors:!1}))}},[]),le=f.useCallback(async()=>{j(de=>({...de,loadingPatients:!0,patientError:null}));try{const de=Vl(),L=await Bt.getUsersByRole(de),Q=L.data||L||[];if(j(V=>({...V,patients:Q,loadingPatients:!1})),_.current?.patient&&w.current){const V=U(_.current.patient);Q.some(X=>U(X.id)===V||U(X.ID)===V||U(X.slug)===V||U(X.name)===V)&&c("patient",V,{shouldDirty:!1})}}catch(de){j(L=>({...L,patientError:de.message||"Failed to fetch patients",patients:[],loadingPatients:!1}))}},[]);f.useEffect(()=>{(async()=>{const L=t?.id||"new_session";if(T.current===L)return;_.current=t;const Q={encounterDate:K(t?.encounterDate,ne),clinic:t?.clinic?{value:U(t?.clinic),label:t?.clinicName||U(t?.clinic)}:(!A||M)&&v?{value:U(v),label:U(v)}:null,doctor:h==="kiviCare_doctor"?g:t?.doctor?{value:U(t?.doctor),label:t?.doctorName||U(t?.doctor)}:null,patient:t?.patient?{value:U(t?.patient),label:t?.patientName||U(t?.patient)}:null,description:t?.description||""};d(Q),await Promise.all([Y(),le()]),t?.clinic&&await fe(t?.clinic),t?.clinic&&c("clinic",{value:U(t?.clinic),label:t?.clinicName||U(t?.clinic)},{shouldDirty:!1}),t?.doctor&&h!=="kiviCare_doctor"&&c("doctor",{value:U(t?.doctor),label:t?.doctorName||U(t?.doctor)},{shouldDirty:!1}),t?.patient&&c("patient",{value:U(t?.patient),label:t?.patientName||U(t?.patient)},{shouldDirty:!1}),j(V=>({...V,initialLoadComplete:!0})),T.current=L,w.current=!1})()},[t,d,Y,fe,le,h,g,A,v,ne]),f.useEffect(()=>{b.initialLoadComplete&&N&&!w.current&&fe(N)},[N,b.initialLoadComplete,fe]),f.useEffect(()=>{E&&P&&c&&Object.keys(P).forEach(de=>{c(`custom_field_${de}`,P[de])})},[E,P,c]);const W=f.useCallback(async de=>{if(!(s||k)){S(!0);try{de.clinic=de.clinic?.value??de.clinic,de.doctor=de.doctor?.value??de.doctor,de.patient=de.patient?.value??de.patient,h==="kiviCare_doctor"&&(de.doctor=g);const L={};Object.keys(de).forEach(Q=>{if(Q.startsWith("custom_field_")){const V=Q.replace("custom_field_","");L[V]=de[Q],delete de[Q]}}),de.customFieldData=L,await new Promise(Q=>setTimeout(Q,1e3)),await e(de)}catch(L){console.error("Form submission error:",L)}finally{S(!1)}}},[e,s,h,g,k]),z=f.useCallback(()=>{n()},[n]),ie=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:v},[A,v,o("clinic")]),re=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:v},[A,v,o("clinic")]);return i.jsxs("form",{onSubmit:r(W),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Encounter Date","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx(je,{name:"encounterDate",control:m,rules:{required:l("Encounter date is required","kivicare-clinic-management-system")},render:({field:de})=>i.jsx(si,{...de,value:ne?de.value?ii(de.value):"":de.value?ii(de.value):ii(q),className:`form-control ${u.encounterDate?"is-invalid":""}`,options:{dateFormat:bi(window.kc_frontend.date_format),allowInput:!0,locale:ai()},onChange:L=>{if(L&&L[0]){const Q=L[0],V=Q.getFullYear(),Z=String(Q.getMonth()+1).padStart(2,"0"),X=String(Q.getDate()).padStart(2,"0");de.onChange(`${V}-${Z}-${X}`)}else de.onChange("")}})}),u.encounterDate&&i.jsx("div",{className:"invalid-feedback",children:u.encounterDate.message}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})]})}),A&&i.jsx("div",{className:`col-lg-3 col-sm-6 ${M?"d-none":""}`,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:m,rules:{required:l("Clinic is required","kivicare-clinic-management-system")},render:({field:de})=>i.jsx(yn,{id:"clinic",loadOptions:D,value:de.value,onChange:L=>{de.onChange(L),c("doctor",null),c("patient",null)},placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{}})}),u.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:u.clinic.message})]})}),h!=="kiviCare_doctor"&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"doctor",control:m,rules:{required:l("Doctor is required","kivicare-clinic-management-system")},render:({field:de})=>i.jsx(yn,{id:"doctor",loadOptions:O,value:de.value,onChange:L=>{de.onChange(L)},placeholder:l("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic"),dependencies:ie},A?`doctor-${o("clinic")?.value}`:"doctor-lite")}),u.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:u.doctor.message})]})})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Patient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"patient",control:m,rules:{required:l("Patient is required","kivicare-clinic-management-system")},render:({field:de})=>i.jsx(i.Fragment,{children:i.jsx(yn,{id:"patient",loadOptions:F,value:de.value,onChange:L=>{de.onChange(L)},placeholder:l("Select Patient","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic")||ne,dependencies:re},A?`patient-${o("clinic")?.value}`:"patient-lite")})}),u.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:u.patient.message})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",placeholder:l("Write description","kivicare-clinic-management-system"),...a("description")})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:z,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p||k,children:k?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})]})]})});function fC({isEditing:t=!1,...e}){const n=dn(),{mutate:s,isLoading:a}=$J(),{id:r}=Wt(),o=bk(),c=h=>{const g=h.customFieldData||{};delete h.customFieldData,s({id:t?r:null,data:h,isEdit:t},{onSuccess:async x=>{const v=x?.data?.id||r;if(Object.keys(g).length>0&&v)try{await o.mutateAsync({moduleType:"patient_encounter_module",moduleId:v,fieldsData:g})}catch(y){console.error("Error saving custom field data:",y)}Ee.success(l("Encounter saved successfully!","kivicare-clinic-management-system")),setTimeout(()=>{n(`/encounter/dashboard/${v}/clinical-details`)},1600)},onError:x=>{console.error("Error:",x)}})},{data:d,isLoading:m,error:u}=t&&r?Nk(r):{data:null,isLoading:!1,error:null};He.useEffect(()=>{u&&(u?.response?.status===403||u?.status===403)&&n("/403")},[u,n]);const p=f.useMemo(()=>{if(t&&d){const h=d.data||d;if(h)return{id:r,encounterDate:h.encounterDate,clinic:h.clinicId,clinicName:h.clinicName,doctor:h.doctorId,doctorName:h.doctorName,patient:h.patientId,patientName:h.patientName,description:h.description,status:h.status}}return{}},[t,d,r]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:t?l("Edit Encounter","kivicare-clinic-management-system"):l("Add Encounter","kivicare-clinic-management-system")})})}),i.jsx(Gee,{formData:p,onSubmit:c,onCancel:()=>n(-1),isSubmitting:a})]})}const Yee=()=>i.jsxs(pt,{children:[i.jsx(C,{width:"100px",height:"14px",className:"mb-3"}),i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"150px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"100px",height:"14px"}),i.jsx(C,{width:"100px",height:"14px"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"80px",height:"14px"}),i.jsx(C,{width:"40px",height:"14px"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(C,{width:"100px",height:"14px"})}),i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"120px"})]})]}),Qee=({canEditEncounter:t,templateId:e,encounterId:n})=>{const{isAddonActive:s}=ht(),a=ze(),r=s("kiviPro");if(!r&&!t)return null;const c=(r?nP():{data:{data:{list:[]}}})?.data?.data?.list??[],d=c.map(x=>({value:x.id,label:x.name})),[m,u]=f.useState(d.find(x=>x.value==e)),p=UJ();f.useEffect(()=>{if(c.length>0){const x=d.find(v=>v.value==e);u(x||null)}},[e,c]);const h=async x=>{if(!x||!n){u(x);return}try{await p.mutateAsync({templateId:x.value,encounterId:n}),u(x),Ee.success(l("Template applied to encounter successfully!","kivicare-clinic-management-system"))}catch(v){console.error("Error applying template:",v),Ee.error(l("Failed to apply template to encounter.","kivicare-clinic-management-system")),u(d.find(y=>y.value==e)||null)}},g=f.useCallback(async({page:x,per_page:v,search:y})=>{try{const b={page:x,per_page:v,search:y},j=await a.fetchQuery({queryKey:["encounter-templates",b],queryFn:()=>mo.getTemplates(b),staleTime:0});return{data:j.data.list.map(N=>({value:N.id,label:N.name})),pagination:{total:j.data.total_rows,per_page:j.data.per_page,current_page:j.data.page,total_pages:j.data.total_pages,has_more:j.data.has_more}}}catch(b){return console.error("Error loading clinics:",b),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[a]);return i.jsxs("div",{className:"mt-5 pt-2 position-relative",children:[!r&&i.jsx(ri,{link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("h6",{children:l("Encounter Template","kivicare-clinic-management-system")}),i.jsx(Jr,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Select Encounter Template","kivicare-clinic-management-system")}),i.jsx(yn,{id:"encounter-template",loadOptions:g,value:m,onChange:h,placeholder:l("Select Encounter Template","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:p.isPending,dependencies:{}})]})})]})},Zee=()=>{const{id:t}=Wt(),e=dn(),n=Hn(),s=ze(),a=ls(),r=WJ(),{encounterData:o,isEncounterLoading:c,encounterError:d,customForms:m,canEditEncounter:u,canUpdateEncounter:p,showEditBillModal:h,showAddServiceItemForm:g,editFormData:x,setEditFormData:v,setShowAddServiceItemForm:y,handleOpenEditBillModal:b,handleCloseEditBillModal:j,billData:k,encounterStatus:S,patientInfo:N,clinicInfo:_,isAddonActive:w,customFields:T,customFieldData:A}=nf(),{module_config:M}=ht(),E=tP(),P=w("kiviPro"),D=()=>{Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This will close the encounter directly without generating an invoice.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, close it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(K=>{K.isConfirmed&&E.mutate({ids:[t],status:"0"},{onSuccess:()=>{Et.fire({title:l("Closed!","kivicare-clinic-management-system"),text:l("The encounter has been closed successfully.","kivicare-clinic-management-system"),icon:"success"}),s.invalidateQueries({queryKey:["encounter",t]})},onError:ne=>{Et.fire({title:l("Error!","kivicare-clinic-management-system"),text:ne.message||l("Failed to close the encounter.","kivicare-clinic-management-system"),icon:"error"})}})})},O=()=>{(M.billing??"1")==="1"?b():D()},F=()=>{const K=n.pathname;if(K.includes("/body-chart"))return"body-chart";if(K.includes("/clinical-details"))return"clinical-details";for(const ne of m)if(K.includes(`/custom-form-${ne.id}`))return`custom-form-${ne.id}`;return"clinical-details"},q=K=>{K==="clinical-details"?e("clinical-details"):K==="body-chart"?e("body-chart"):K.startsWith("custom-form-")?e(`${K}`):e("clinical-details")};f.useEffect(()=>{n.pathname===`/encounter/dashboard/${t}`&&e("clinical-details",{replace:!0})},[n.pathname,t,e]);const U=()=>{r.mutate(t,{onSuccess:K=>{const ne=new Blob([K],{type:"application/pdf"}),Y=URL.createObjectURL(ne);window.open(Y,"_blank"),setTimeout(()=>URL.revokeObjectURL(Y),100)},onError:K=>{Et.fire({title:l("Error","kivicare-clinic-management-system"),text:K?.response?.data?.message||K?.message||l("Failed to generate encounter PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:" position-sticky top-0",children:[i.jsx("h6",{className:"mb-2",children:l("Encounter Details","kivicare-clinic-management-system")}),c&&i.jsx(Yee,{}),d&&!c&&i.jsx(Jr,{className:"border-danger",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("i",{className:"ph ph-warning-circle text-danger",style:{fontSize:"2rem"}})}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"text-danger mb-1",children:l("Failed to Load Encounter","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-2 font-size-14",children:d?.message||l("Unable to load encounter details. Please try again.","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>window.location.reload(),children:l("Retry","kivicare-clinic-management-system")})]})]})}),!c&&!d&&!o&&i.jsx(Jr,{className:"text-center py-5",children:i.jsxs("div",{className:"d-flex flex-column align-items-center gap-3",children:[i.jsx("i",{className:"ph ph-file-x text-muted",style:{fontSize:"3rem"}}),i.jsxs("div",{children:[i.jsx("h6",{className:"mb-1",children:l("No Encounter Found","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0 font-size-14",children:l("The requested encounter could not be found.","kivicare-clinic-management-system")})]})]})}),!c&&!d&&o&&i.jsx(i.Fragment,{children:i.jsxs(Jr,{children:[i.jsx("h6",{className:"font-size-14 mb-3",children:l("About Patient","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-md-3 gap-2 flex-nowrap",children:[i.jsx(Mc,{src:N.profileImage,alt:N.name||l("Patient","kivicare-clinic-management-system"),text:!N.profileImage&&N.name?N.name.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:N.name}),i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope-simple"}),i.jsx("a",{href:`mailto:${N.email}`,className:"text-muted line-anywhere lh-1",children:N.email})]}),N.phone&&i.jsx("div",{className:"mt-1",children:i.jsx("span",{className:"font-size-14 text-muted",children:N.phone})})]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Encounter Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:o.encounterDate||l("Not specified","kivicare-clinic-management-system")})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Address","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:N.address||"-"})]})}),N.age&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Age","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"font-size-14 fw-normal mb-0",children:[N.age," ",l("years","kivicare-clinic-management-system")]})]})}),N.gender&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[l("Gender","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:N.gender})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx("h6",{className:"mb-0",children:l("About Clinic","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex gap-3 flex-wrap",children:[i.jsx(Mc,{src:_.profileImage,alt:_.name||l("Clinic","kivicare-clinic-management-system"),text:!_.profileImage&&_.name?_.name.charAt(0).toUpperCase():"C",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:_.name}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("span",{className:"text-heading",children:i.jsx("i",{className:"ph ph-stethoscope"})}),i.jsx("span",{className:"font-size-14",children:_.doctorName})]}),_.address&&i.jsx("div",{className:"mt-1",children:i.jsxs("span",{className:"font-size-14 text-muted",children:[i.jsx("i",{className:"ph ph-map-pin me-1"}),_.address]})})]})]}),_.description&&i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"font-size-14 mb-2",children:l("Description","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 font-size-14 text-muted",children:_.description})]}),S.isClosed&&i.jsx("div",{className:"mt-3 pt-3 border-top",children:i.jsxs("h6",{className:"text-danger mb-0",children:[i.jsx("span",{className:"fw-bold",children:l("Note:","kivicare-clinic-management-system")})," ",i.jsx("i",{children:l("This encounter is closed","kivicare-clinic-management-system")})]})})]})]})}),p&&i.jsx(Qee,{canEditEncounter:u,templateId:o.templateId,encounterId:o.id}),((A&&Object.keys(A)?.length)>0||o?.appointmentReport?.length>0)&&i.jsx(i.Fragment,{children:i.jsxs(Jr,{className:"mt-4",children:[i.jsx("h5",{className:"fw-semibold mb-3",children:l("Patient extra details","kivicare-clinic-management-system")}),o?.appointmentReport?.length>0&&i.jsxs("div",{className:"kc-uploaded-files border-top pt-3 mt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:l("Medical Report","kivicare-clinic-management-system")}),o?.appointmentReport?.map((K,ne)=>i.jsxs("div",{className:"kc-uploaded-file d-flex justify-content-between align-items-center",children:[i.jsx("span",{className:"kc-file-name",children:K.filename}),i.jsx("div",{className:"kc-file-actions",children:i.jsx("a",{className:"me-2",href:K.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})})]},ne))]}),i.jsx(MJ,{fields:T,data:A,title:l("Other Information","kivicare-clinic-management-system")})]})})]})}),i.jsx("div",{className:"col-xl-9 col-lg-8",children:i.jsxs(Sg.Container,{activeKey:F(),onSelect:q,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap my-3",children:[i.jsxs(Dn,{variant:"pills",className:"nav-pill-card",children:[i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:"clinical-details",children:l("Clinical Details","kivicare-clinic-management-system")})}),w("bodyChart")&&i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:"body-chart",children:l("Body Chart","kivicare-clinic-management-system")})}),m.map(K=>i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:`custom-form/${K.id}`,children:K.name?.text||K.name})},K.id))]}),i.jsxs("div",{className:"d-flex gap-2",children:[P&&i.jsxs(i.Fragment,{children:[i.jsx(Yt,{variant:"primary",onClick:U,children:l("Print Encounter","kivicare-clinic-management-system")}),S.isClosed&&k?.id&&i.jsx(gt,{className:"btn btn-primary",to:`/encounter/billings/view/${k?.id}`,children:l("Bill Details","kivicare-clinic-management-system")})]}),S.canClose&&i.jsx(i.Fragment,{children:!a&&i.jsx(Yt,{variant:"secondary",onClick:O,children:l("Close Encounter","kivicare-clinic-management-system")})})]})]}),i.jsx(Gi,{})]})})]}),i.jsx(Mw,{show:h,onHide:j,editFormData:x,setEditFormData:v,showAddServiceItemForm:g,setShowAddServiceItemForm:y,discountValue:x?.discountValue||0,totalPayable:x?.totalPayable||0,editBillId:k?.id,appointmentId:o?.appointmentId,handleCloseEditModal:j,onBillSaved:()=>{s.invalidateQueries(["encounter",t]),s.invalidateQueries(["billByEncounterId",t])}})]})},Xee=()=>i.jsx(GJ,{children:i.jsx(Zee,{})}),Jee=()=>{const{isAddonActive:t,hasCapability:e}=ht(),n=t("kiviPro"),s=In(),[a,r]=f.useState(""),[o,c]=f.useState(1),[d,m]=f.useState(10),[u,p]=f.useState([]),h=qa(a,500),g=n?nP({page:o,perPage:d,search:h,sort:u}):{data:{data:{list:[]}},isLoading:!1},x=g?.data?.data?.list??[],v=g?.isLoading??!1,y=g?.data?.data?.total_rows??0,b=g?.data?.data?.total_pages??1,{mutateAsync:j}=HJ(),{mutateAsync:k}=zJ(),{mutateAsync:S}=VJ(),N=()=>n?!0:(Et.fire({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Encounter template management is only available in KiviCarePro.","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:l("OK","kivicare-clinic-management-system")}),!1),_=async(M=null)=>{if(!N())return;const E=!!M,{value:P,isConfirmed:D}=await Et.fire({title:E?l("Edit Template","kivicare-clinic-management-system"):l("Add New Template","kivicare-clinic-management-system"),input:"text",inputLabel:l("Enter Template Name","kivicare-clinic-management-system"),inputPlaceholder:l("e.g. 'Dummy Encounter'","kivicare-clinic-management-system"),inputValue:M?.name||"",showCancelButton:!0,confirmButtonText:l("Save","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),reverseButtons:!0,customClass:{validationMessage:"text-danger fw-medium"},preConfirm:O=>O.trim()?O.trim():(Et.showValidationMessage(l("Template name is required","kivicare-clinic-management-system")),!1)});if(D&&P)try{await j({id:M?.id,data:{name:P},isEdit:E}),Ee.success(E?l("Template updated successfully.","kivicare-clinic-management-system"):l("Template created successfully.","kivicare-clinic-management-system"))}catch(O){const F=O?.response?.data?.message||O?.response?.data?.errors?.name?.[0]||l("Something went wrong. Please try again.","kivicare-clinic-management-system");Ee.error(F)}},w=async M=>{if(!N())return;const{isConfirmed:E}=await Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),reverseButtons:!0});E&&(await k(M),Ee.success(l("Template has been deleted.","kivicare-clinic-management-system")))},T=f.useMemo(()=>[s.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:M=>M.getValue()}),s.accessor("name",{header:()=>l("Template Name","kivicare-clinic-management-system"),headerClassName:"w-75",cell:M=>M.getValue()}),...e("encounters_template_edit")||e("encounters_template_view")||e("encounters_template_delete")?[s.display({id:"action",header:()=>l("Action","kivicare-clinic-management-system"),cell:M=>{const E=P=>D=>i.jsx(ut,{id:`tooltip-${M.cell.row.original.id}-${P}`,...D,children:P});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("encounters_template_edit")&&i.jsx(Qe,{placement:"top",overlay:E(l("Edit Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-success fs-5",onClick:P=>{P.preventDefault(),_(M.row.original)},children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),e("encounters_template_view")&&i.jsx(Qe,{placement:"top",overlay:E(l("Template Dashboard","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter-template/dashboard/${M.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),e("encounters_template_delete")&&i.jsx(Qe,{placement:"top",overlay:E(l("Delete Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-danger fs-5",onClick:P=>{P.preventDefault(),w(M.row.original.id)},children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[n]),A=f.useMemo(()=>n?[{label:l("Delete","kivicare-clinic-management-system"),icon:i.jsx("i",{className:"ph ph-trash"}),action:async(M,E)=>{const P=M.map(O=>O.id),{isConfirmed:D}=await Et.fire({title:l("Delete Templates","kivicare-clinic-management-system"),text:l("Are you sure you want to delete selected templates?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete","kivicare-clinic-management-system"),reverseButtons:!0});D&&(await S(P),Ee.success(l("Templates have been deleted.","kivicare-clinic-management-system")),E())}}]:[],[n,S]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:l("All Encounter Template List","kivicare-clinic-management-system")})}),e("encounters_template_add")&&i.jsx("div",{className:"d-flex align-items-center flex-wrap gap-3",children:i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>_(),disabled:!n,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Template","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search templates","kivicare-clinic-management-system"),value:a,onChange:M=>n&&r(M.target.value),disabled:!n})]})})}),i.jsx(wn,{data:x,columns:T,currentPage:o,perPage:d,totalItems:y,lastPage:b,isLoading:v,enableSelection:n,onPageChange:c,onPerPageChange:M=>{m(M),c(1)},onSortingChange:p,bulkActions:A,moduleNamePlural:"encounter templates"}),!n&&i.jsx(ri,{text:l("Encounter template management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},ete=()=>{const{id:t}=Wt();return i.jsx(Ty,{patientId:t})},tte=({bill:t})=>{const{getPriceFormat:e}=ht(),[n,s]=f.useState(!0),a=In(),r=f.useMemo(()=>[a.accessor("sr",{id:"sr",header:()=>l("Sr. No","kivicare-clinic-management-system"),cell:c=>c.row.index+1,enableSorting:!1}),a.accessor("service_name",{id:"service_name",header:()=>l("Services","kivicare-clinic-management-system"),cell:c=>c.getValue(),enableSorting:!1}),a.accessor("discount",{id:"discount",header:()=>l("Discount","kivicare-clinic-management-system"),cell:c=>{const d=c.getValue();if((d==null||d===0)&&t.discount){const m=t.discount/(t.serviceItems?.length||1);return`${e(m)}`}return d!=null?`${e(d)}`:"0"},enableSorting:!1}),a.accessor("price",{id:"price",header:()=>l("Price","kivicare-clinic-management-system"),cell:c=>e(c.getValue()),enableSorting:!1}),a.accessor("total",{id:"total",header:()=>l("Total Amount","kivicare-clinic-management-system"),cell:c=>{const d=c.row.original,m=d.discount||(t.discount?t.discount/(t.serviceItems?.length||1):0),u=d.price*d.quantity-m;return e(u)},enableSorting:!1})],[]),o=f.useMemo(()=>{const c={};return(t.taxItems||[]).forEach(d=>{if(d.tax_name)if(c[d.tax_name])c[d.tax_name].count+=1,c[d.tax_name].totalAmount+=Number(d.tax_amount);else{let m=1;parseInt(d.tax_value)/parseInt(d.tax_amount)>1&&d.type==="fixed"&&(m=Math.ceil(parseInt(d.tax_value)/parseInt(d.tax_amount))),c[d.tax_name]={...d,count:m,totalAmount:Number(d.tax_amount)}}}),Object.values(c)},[t.taxItems]);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Invoice ID","kivicare-clinic-management-system"),": "]}),i.jsxs("span",{className:"fw-semibold text-primary",children:["#",t.invoiceId]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Date & Time","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:"fw-semibold text-heading",children:t.date||"-"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[l("Payment Status","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:`text-${t?.status==="paid"?"success":"danger"} fw-semibold`,children:t?.status?.toUpperCase()})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Patient","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Zt,{profileUrl:t.patient?.patient_image_url,name:t.patient?.name,gender:t.patient?.gender,dob:t.patient?.dob,size:"sm"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Doctor","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(Zt,{profileUrl:t.doctor?.doctor_image_url,name:t.doctor?.name,email:t.doctor?.email,phone:t.doctor?.phone,size:"sm"})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:l("About Clinic","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(Zt,{profileUrl:t.clinic?.clinic_image_url,name:t.clinic?.name,email:t.clinic?.email,phone:t.clinic?.phone,address:t.clinic?.address,size:"sm"})})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx("h6",{children:l("Service","kivicare-clinic-management-system")}),i.jsx(wn,{data:t.serviceItems||[],columns:r,isLoading:!1,error:null,enableSelection:!1})]}),i.jsxs("div",{children:[i.jsx("h6",{children:l("Payment Details","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.subTotal)??"0.00"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[i.jsx("span",{className:"font-size-14",children:l("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.discount||0)})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:l("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>s(c=>!c),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${n?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsx("span",{className:"text-danger h6 m-0 ms-1",children:e(t.totalTax)??"0.00"})]})]}),n&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:l("Applied Tax","kivicare-clinic-management-system")}),o.length===0&&i.jsx("div",{className:"text-muted",children:l("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:o.map((c,d)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[c.tax_name,c.count>1?` x${c.count}`:"",c.rate?` (${c.rate}%)`:""]}),i.jsx("h6",{className:"font-size-14 m-0 text-danger",children:e(c.totalAmount)})]},d))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-5",children:[i.jsx("h6",{className:"font-size-14 m-0",children:l("Grand Total","kivicare-clinic-management-system")}),i.jsx("h5",{className:"m-0 text-primary",children:e(t.actual_amount)??"0.00"})]})]})})]})]})})},lP=()=>i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"160px",height:"2rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"100px",height:"32px"}),i.jsx(nt,{width:"80px",height:"32px"})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"90px",height:"0.875rem"}),i.jsx(C,{width:"120px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"110px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Hs,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx(C,{width:"60px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"100px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"160px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]})]})]})})]}),i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"70px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx(C,{width:"70px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(C,{width:"30px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx(C,{width:"15px",height:"15px",className:"me-1"}),i.jsx(C,{width:"70px",height:"1.125rem"})]})]}),i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx(C,{width:"90px",height:"1.125rem"}),i.jsx(C,{width:"80px",height:"1.25rem"})]})]})})]})]})})]}),oP=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{id:n}=Wt(),{data:s,isLoading:a}=Pw(n,{enabled:e}),r=s?.data||{},o=nV(),c=iV(),d=()=>{o.mutate(n,{onSuccess:u=>{const p=new Blob([u],{type:"application/pdf"}),h=URL.createObjectURL(p);window.open(h,"_blank")},onError:u=>{Et.fire({title:l("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||l("Failed to generate bill PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})},m=()=>{c.mutate(n,{onSuccess:()=>{Et.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Bill PDF sent to patient email successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:u=>{Et.fire({title:l("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||l("Failed to send bill email.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}})};return a?i.jsx(lP,{}):i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h3",{className:"mb-0",children:l("Billing Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary btn-sm",onClick:d,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-printer me-1"}),l("Print Bill","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:m,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-envelope me-1"}),l("Email","kivicare-clinic-management-system")]})]})]}),!a&&i.jsx(tte,{bill:r}),!e&&i.jsx(ri,{text:l("Billing module is KiviCare Pro feature.","kivicare-clinic-management-system")})]})},nte=()=>{const{id:t}=Wt(),{data:e,isLoading:n}=PA(t),s=e?.data||{};return i.jsx("div",{className:"billing-details",children:!n&&i.jsx(oP,{bill:s})})},Do={getBodyCharts:(t={})=>pe({endpoint:"body-chart",method:"GET",data:t}),getBodyChartConfig:()=>pe({endpoint:"body-chart/config",method:"GET"}),saveBodyChartConfig:t=>pe({endpoint:"body-chart/config",method:"POST",data:t}),updateBodyChartConfig:t=>pe({endpoint:"body-chart/config",method:"PUT",data:t}),saveBodyChart:t=>pe({endpoint:"body-chart",method:"POST",data:t}),getBodyChart:(t,e)=>pe({endpoint:"body-chart/get",method:"GET",data:{body_chart_id:t,encounter_id:e}}),getBodyChartEdit:(t={})=>pe({endpoint:"body-chart/edit",method:"GET",data:t}),deleteBodyChart:(t,e)=>pe({endpoint:"body-chart/delete",method:"POST",data:{body_chart_id:t,encounter_id:e}}),emailBodyChart:(t,e)=>pe({endpoint:"body-chart/email",method:"POST",data:{body_chart_id:t,...e}}),bulkDeleteBodyCharts:t=>pe({endpoint:"body-chart/bulk-delete",method:"POST",data:{ids:t}})},vi={all:["bodyCharts"],lists:()=>[...vi.all,"list"],list:t=>[...vi.lists(),{filters:t}],details:()=>[...vi.all,"detail"],detail:t=>[...vi.details(),t],config:()=>[...vi.all,"config"],edit:()=>[...vi.all,"edit"],editData:t=>[...vi.edit(),t]},ite=(t={},e={})=>{const{sort:n,sorting:s,...a}=t;return ft({queryKey:vi.list(a),queryFn:()=>Do.getBodyCharts(t),enabled:!!t.encounter_id,...e})},ste=(t={})=>ft({queryKey:vi.config(),queryFn:()=>Do.getBodyChartConfig(),staleTime:300*1e3,...t}),fpe=({chartId:t,encounterId:e},n={})=>ft({queryKey:vi.detail(t),queryFn:()=>Do.getBodyChart(t,e),enabled:!!t&&!!e,...n}),ate=(t={})=>{const e=ze();return Le({mutationFn:n=>Do.saveBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:vi.config()}),e.setQueryData(vi.config(),n)},...t})},rte=(t={})=>{const e=ze();return Le({mutationFn:n=>Do.updateBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:vi.config()}),e.setQueryData(vi.config(),n)},...t})},vpe=(t={})=>{const e=ze();return Le({mutationFn:n=>Do.saveBodyChart(n),onSuccess:(n,s)=>{s.encounter_id&&e.invalidateQueries({queryKey:vi.lists(),predicate:a=>a.queryKey[2]?.filters?.encounter_id===s.encounter_id})},...t})},lte=(t={})=>{const e=ze();return Le({mutationFn:n=>Do.deleteBodyChart(n.body_chart_id,n.encounter_id),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:vi.lists()}),e.removeQueries({queryKey:vi.detail(s.body_chart_id)})},...t})},ote=()=>{const{id:t}=Wt(),{encounterData:e}=nf(),n=ls(),s=dn(),[a,r]=f.useState(1),[o,c]=f.useState(10),[d,m]=f.useState([]),[u,p]=f.useState(!1),h=f.useRef(null),{data:g,isLoading:x,error:v}=ite({encounter_id:t,page:a,perPage:o}),y=f.useMemo(()=>{if(!g?.data?.data)return[];let O=[...g.data.data];if(d.length>0){const F=d[0];O.sort((q,U)=>{const K=q[F.id],ne=U[F.id];if(K==null&&ne==null)return 0;if(K==null)return F.desc?1:-1;if(ne==null)return F.desc?-1:1;if(typeof K=="string"&&typeof ne=="string"){const Y=K.localeCompare(ne);return F.desc?-Y:Y}return typeof K=="number"&&typeof ne=="number"?F.desc?ne-K:K-ne:K<ne?F.desc?1:-1:K>ne?F.desc?-1:1:0})}return O},[g?.data?.data,d]),b=lte({onSuccess:()=>{Et.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Body chart deleted successfully","kivicare-clinic-management-system"),icon:"success",timer:2e3})},onError:O=>{Et.fire({title:l("Error","kivicare-clinic-management-system"),text:O.message||l("Failed to delete body chart","kivicare-clinic-management-system"),icon:"error"})}}),j=O=>{r(O)},k=O=>{c(O),r(1)},S=O=>{m(O)},N=In(),_=f.useMemo(()=>[N.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),cell:O=>O.getValue(),enableSorting:!0,size:80}),N.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:O=>O.getValue()||"-",enableSorting:!0,size:200}),N.accessor("chart_image",{header:()=>l("Image","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const F=O.getValue();return F?i.jsx("div",{className:"d-flex align-items-center",children:i.jsx("img",{src:F,alt:O.row.original.name||"Body Chart",className:"rounded",style:{width:"60px",height:"60px",objectFit:"cover",cursor:"pointer"},onClick:()=>M(F)})}):i.jsx("span",{className:"text-muted",children:"-"})},size:100}),N.accessor("description",{header:()=>l("Description","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const F=O.getValue();return F&&F.trim()!==""?i.jsx("span",{title:F,children:F.length>50?`${F.substring(0,50)}...`:F}):"-"},size:250}),N.accessor("last_update_user",{header:()=>l("Last Updated By","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>O.getValue()||"-",size:150}),N.accessor("updatedAt",{header:()=>l("Updated At","kivicare-clinic-management-system"),cell:O=>O.getValue(),size:120,enableSorting:!1}),N.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),cell:O=>i.jsxs("div",{className:"d-flex gap-2",children:[Number(e?.status)===1&&!n&&i.jsx(Yt,{variant:"link",onClick:()=>P(O.row.original.id),title:l("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple text-primary"})}),i.jsx(Yt,{variant:"link",onClick:()=>M(O.row.original.chart_image),title:l("View","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye text-info"})}),i.jsx(Yt,{variant:"link",onClick:()=>E(O.row.original.chart_image,O.row.original.name),title:l("Download","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-download text-success"})}),Number(e?.status)===1&&!n&&i.jsx(Yt,{variant:"link",onClick:()=>D(O.row.original.id),title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash text-danger"})})]}),size:120,enableSorting:!1})],[e,n]),w=Number(e?.status)===1&&!n?[{label:l("Delete","kivicare-clinic-management-system"),action:O=>{Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l(`Delete ${O.length} selected body chart?`,"kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:l("Yes, delete them!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&O.forEach(q=>{b.mutate({body_chart_id:q.id,encounter_id:t})})})}}]:[],T=()=>{s(`/encounter/dashboard/${t}/body-chart/create`)},A=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"text-center  py-4 text-muted border-start border-end",children:i.jsxs("div",{className:"py-4",children:[i.jsx("i",{className:"ph ph-chart-bar-horizontal fs-1 text-muted mb-3 d-block"}),i.jsx("h6",{children:l("No body charts found","kivicare-clinic-management-system")}),!n&&i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-muted mb-3",children:Number(e?.status)===1?l("Start by creating your first body chart for this encounter","kivicare-clinic-management-system"):l("No body charts available for this closed encounter","kivicare-clinic-management-system")})})]})})}),M=O=>{window.open(O,"_blank")},E=(O,F)=>{const q=document.createElement("a");q.href=O,q.download=F||"body-chart",q.click()},P=O=>{s(`/encounter/dashboard/${t}/body-chart/edit/${O}`)},D=O=>{Et.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("This action cannot be undone!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&b.mutate({body_chart_id:O,encounter_id:t})})};return i.jsx("div",{className:"body-chart-list-page",children:i.jsx(mt,{children:i.jsx(mt.Body,{children:i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!u,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:h,children:i.jsxs("div",{ref:h,className:"position-absolute top-0 w-100 d-flex justify-content-between align-items-center mb-4",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-1",children:l("Body Charts","kivicare-clinic-management-system")})}),!n&&Number(e?.status)===1&&i.jsx("div",{className:"d-flex gap-2",children:i.jsxs(Yt,{variant:"secondary",onClick:T,children:[i.jsx("i",{className:"ph ph-plus-circle me-2"}),l("Add New","kivicare-clinic-management-system")]})})]})}),i.jsx(wn,{data:y,columns:_,isLoading:x,error:v,currentPage:a,perPage:o,totalItems:g?.data?.total||0,lastPage:Math.ceil((g?.data?.total||0)/o),onPageChange:j,onPerPageChange:k,onSortingChange:S,enableSelection:Number(e?.status)===1&&!n,bulkActions:w,bulkActionsButtonText:l("Bulk Actions","kivicare-clinic-management-system"),moduleNamePlural:"body charts",renderEmptyState:A,bordered:!0,responsive:!0,manualPagination:!0,manualFiltering:!0,manualSorting:!1,onBulkActionsVisibilityChange:p})]})})})})},cte=()=>{const{id:t,formId:e}=Wt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:r}=ht(),o=s||"patient",[c,d]=f.useState(!1),m=ze(),u=f.useRef({}),{data:p,isLoading:h}=Nk(t),g=p?.data||{},{data:x}=sd({module_type:"patient_encounter_module",status:1,module_id:t},{enabled:r("kiviPro")}),y=(x?.data?.forms||[]).find(k=>k.id.toString()===e),b=DJ({onSuccess:()=>{Et.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Form data saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}),m.invalidateQueries(["custom-forms"])},onError:k=>{console.error("Error saving form data:",k),Et.fire({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save form data. Please try again.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}});f.useEffect(()=>{d(Number(g?.status)===1&&(vr(o)||mi(o)||Kn(o)||zi(o)&&g?.doctorId===a))},[g]);const j=async(k,S)=>{console.log("Saving form data:",{formId:k,formData:S,encounterId:t}),b.mutate({form_id:k,module_id:t,module_type:"patient_encounter_module",form_data:S})};return y?i.jsx("div",{className:"mt-4",children:i.jsx(mt,{children:i.jsxs(Ra,{children:[i.jsx("div",{id:`custom-form-${y.id}`,children:i.jsx(Oa,{ref:k=>u.current[y.id]=k,fields:y.fields,data:y.form_data||{},readOnly:!c,formId:`form_${y.id}`})}),c&&i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsx(Yt,{variant:"primary",onClick:()=>{const k=u.current[y.id];if(k){const S=k.getFormData();j(y.id,S)}},disabled:b.isPending,children:b.isPending?l("Saving...","kivicare-clinic-management-system"):l("Save Form","kivicare-clinic-management-system")})})]})})}):i.jsx("div",{className:"mt-4",children:i.jsx(mt,{children:i.jsx(Ra,{children:i.jsx("div",{className:"text-center",children:i.jsx("p",{children:l("Form not found","kivicare-clinic-management-system")})})})})})},vC=f.lazy(()=>_r(()=>import("./BodyChartEditor-DM0T5mAB.js"),__vite__mapDeps([0,2]),import.meta.url)),dte=[Vn({path:"/encounter",title:l("Encounter List","kivicare-clinic-management-system"),outlet:hC,permissions:["patient_encounter_list"],meta:{description:l("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:Ty,title:l("All Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_list"],meta:{description:l("List of all encounters","kivicare-clinic-management-system"),breadcrumb:l("All Encounters","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:fC,props:{isEditing:!1,mode:"add"},title:l("Add Encounter","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_add"],skeleton:pC,meta:{description:l("Add new encounter","kivicare-clinic-management-system"),breadcrumb:l("Add Encounter","kivicare-clinic-management-system")}}),We({path:"edit/:id",component:fC,props:{isEditing:!0,mode:"edit"},title:l("Edit Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_edit"],skeleton:pC,meta:{description:l("Edit encounter","kivicare-clinic-management-system"),breadcrumb:l("Edit Encounter","kivicare-clinic-management-system")}}),We({path:"view/:id",component:Ty,title:l("All Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("View encounter","kivicare-clinic-management-system"),breadcrumb:l("View Encounter","kivicare-clinic-management-system")}}),Vn({path:"dashboard/:id",title:l("Encounters","kivicare-clinic-management-system"),outlet:Xee,permissions:["patient_encounter_view"],skeleton:gh,meta:{description:l("Encounter dashbord","kivicare-clinic-management-system"),breadcrumb:l("Encounter dashbord","kivicare-clinic-management-system")},children:[We({path:"clinical-details",component:sP,title:l("Clinical Details","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"clinical-details"}),meta:{description:l("Clinical details of encounter","kivicare-clinic-management-system"),breadcrumb:l("Clinical Details","kivicare-clinic-management-system")}}),We({path:"custom-form/:formId",component:cte,title:l("Custom Form","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"custom-form"}),meta:{description:l("Custom form of encounter","kivicare-clinic-management-system"),breadcrumb:l("Custom Form","kivicare-clinic-management-system")}}),Vn({path:"body-chart",title:l("Body Charts","kivicare-clinic-management-system"),outlet:yee,meta:{description:l("Body chart management for encounter","kivicare-clinic-management-system"),breadcrumb:l("Body Charts","kivicare-clinic-management-system")},children:[We({path:"",component:ote,title:l("Body Chart List","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"body-chart"}),index:!0,meta:{description:l("List of body charts for encounter","kivicare-clinic-management-system"),breadcrumb:l("List","kivicare-clinic-management-system")}}),We({path:"create",component:vC,props:{mode:"create"},title:l("Create Body Chart","kivicare-clinic-management-system"),meta:{description:l("Create new body chart","kivicare-clinic-management-system"),breadcrumb:l("Create","kivicare-clinic-management-system")},skeleton:bee}),We({path:"edit/:chartId",component:vC,props:{mode:"edit"},title:l("Edit Body Chart","kivicare-clinic-management-system"),meta:{description:l("Edit existing body chart","kivicare-clinic-management-system"),breadcrumb:l("Edit","kivicare-clinic-management-system")}})]})]}),We({path:"patient/:id",component:ete,title:l("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:l("Patient Encounters","kivicare-clinic-management-system")}}),We({path:"billings/view/:id",component:nte,title:l("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:l("Patient Encounters","kivicare-clinic-management-system")}})]}),Vn({path:"/encounter-template",title:l("Encounter Template List","kivicare-clinic-management-system"),roles:["administrator","clinic_admin","doctor","receptionist"],outlet:hC,meta:{description:l("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:Jee,title:l("All Encounter Templates","kivicare-clinic-management-system"),index:!0,meta:{description:l("List of all encounter templates","kivicare-clinic-management-system"),breadcrumb:l("All Encounter Templates","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:4,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"dashboard/:id",title:l("Encounters Dashboard","kivicare-clinic-management-system"),component:xee,meta:{description:l("Encounter template dashboard","kivicare-clinic-management-system"),breadcrumb:l("Encounter template dashboard","kivicare-clinic-management-system"),isEncounterTemplate:!0}})]})],mte=()=>{const t=Hn();return i.jsxs("div",{className:"clinics-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/clinic"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Ay=()=>i.jsxs(i.Fragment,{children:[i.jsx(fl,{titleWidth:"120px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"85px"})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx(C,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"}),i.jsx(C,{width:"55px",height:"1rem"})]})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"120px",height:"38px"})]})]}),ute=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""}),n=R=>{if(R.length>0){const{id:G,desc:ee}=R[0],ae={id:"id",name:"name",admin:"clinic_admin_name",contact:"telephone_no",status:"status"};e(I=>({...I,orderby:ae[G]||G,order:ee?"desc":"asc",page:1}))}else e(G=>({...G,orderby:"",order:"",page:1}))},[s,a]=f.useState(""),[r,o]=f.useState([]),c=qa(s,500),d=Nee(),m=Cee(),u=See(),p=_ee(),h=Eee(),[g,x]=f.useState(!1),v=async R=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const G=new Date().toISOString().split("T")[0],ee=I=>{if(!I)return"";try{const H=typeof I=="string"?JSON.parse(I):I;return Array.isArray(H)?H.map(B=>B.label||"").filter(Boolean).join(", "):I}catch{return I}},ae=K.map(I=>({id:I.id,name:I.name,email:I.email,contact:I.contact,clinic_admin_name:I.clinic_admin_name,clinic_admin_email:I.clinic_admin_email,specialty:ee(I.specialty),address:[I.address,I.city,I.state,I.postal_code,I.country].filter(Boolean).join(", "),status:I.status===1?"Active":"Inactive"}));switch(R){case"csv":cs(ae,`clinics-${G}.csv`);break;case"xls":ds(ae,`clinics-${G}.xls`);break;case"pdf":ms(ae,`clinics-${G}.pdf`,"Clinics List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(G){console.error("Export error:",G),rt({title:l("Error!","kivicare-clinic-management-system"),text:G.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},y=()=>v("csv"),b=()=>v("xls"),j=()=>{g||(x(!0),v("pdf"),setTimeout(()=>x(!1),2e3))};f.useEffect(()=>{e(R=>({...R,search:c,page:1}))},[c]),He.useEffect(()=>{e(R=>({...R,search:c,page:1}))},[c]);const[k,S]=f.useState(!1),N=f.useRef(null),[_,w]=f.useState(!1),[T,A]=f.useState(!1),{isAddonActive:M,hasCapability:E}=ht(),P=M("kiviPro"),D=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([R,G])=>G!==""&&G!==null&&G!==void 0)),[t]),{data:O,isLoading:F,error:q,refetch:U}=aP(D);He.useEffect(()=>{O?.data?.clinics&&O.data.clinics.length>0&&O.data.clinics.forEach((R,G)=>{if(R.specialty&&typeof R.specialty=="string"&&R.specialty.startsWith("["))try{const ee=JSON.parse(R.specialty)}catch{console.log(`Failed to parse specialty for clinic ${G+1}`)}})},[O]);const K=O?.data?.clinics||[],ne=O?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},Y=ze(),fe=async({page:R,per_page:G,search:ee})=>{try{const ae={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:R,per_page:G,search:ee},I=await Y.fetchQuery({queryKey:vt.list(ae),queryFn:()=>Bt.getStaticData(ae),staleTime:300*1e3}),H=I.data.map(B=>({value:B.id,label:B.label||B.name}));return o(B=>[...B,...H]),I.data.map(B=>{let te="",oe="";return typeof B=="string"?(te=B,oe=B):typeof B=="object"&&B!==null&&(te=B.label||B.name||"",oe=B.id??B.name??te),{value:oe,label:te}})}catch(ae){return console.error("Error loading clinics:",ae),{data:[],pagination:{has_more:!1}}}},le=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],W=In(),z=f.useMemo(()=>[W.accessor("id",{id:"id",enableSorting:!0,header:()=>l("ID","kivicare-clinic-management-system"),cell:R=>i.jsx("div",{className:"font-weight-medium",children:R.getValue()})}),W.accessor("name",{id:"name",enableSorting:!0,header:()=>l("Clinic","kivicare-clinic-management-system"),cell:R=>i.jsx(Zt,{profileUrl:R.row.original.clinic_image_url,name:R.row.original.name,email:R.row.original.email||"",variant:"success",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")})}),W.accessor("admin",{id:"admin",header:()=>l("Clinic Admin","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(R,G)=>{const ee=R.original.clinic_admin_name||"",ae=G.original.clinic_admin_name||"";return ee.localeCompare(ae)},cell:R=>i.jsx(Zt,{profileUrl:R.row.original.clinic_admin_image_url,name:R.row.original.clinic_admin_name,email:R.row.original.clinic_admin_email||"",variant:"success",size:"md",nameLabel:l("Clinic Name","kivicare-clinic-management-system")})}),W.accessor("contact",{id:"contact",enableSorting:!0,header:()=>l("Contact No","kivicare-clinic-management-system"),cell:R=>i.jsx("div",{children:i.jsx("span",{children:R.row.original.contact||""})})}),W.accessor("specialty",{id:"specialty",enableSorting:!1,header:()=>l("Specialization","kivicare-clinic-management-system"),cell:R=>{const G=R.row.original.specialty;let ee=[];try{if(typeof G=="string")if(G.startsWith("["))try{const ae=JSON.parse(G);Array.isArray(ae)&&(ee=ae.map(I=>typeof I=="object"&&I!==null?{label:I.label||""}:{label:I}))}catch{ee=[{label:G}]}else ee=[{label:G}];else Array.isArray(G)?ee=G.map(ae=>typeof ae=="object"&&ae!==null?{label:ae.label||ae.name||""}:{label:ae}):typeof G=="object"&&G!==null&&(G.label?ee=[{label:G.label}]:G.name?ee=[{label:G.name}]:ee=[{label:JSON.stringify(G)}])}catch(ae){console.error("Error processing specialty:",ae),ee=[{label:String(G||"")}]}return ee=ee.filter(ae=>ae.label),i.jsx("div",{children:ee.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[ee.slice(0,2).map((ae,I)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:ae.label},I)),ee.length>2&&i.jsx(Qe,{placement:"top",overlay:ae=>i.jsx(ut,{id:`tooltip-specialization-${R.row.original.id}`,...ae,children:ee.slice(2).map(I=>I.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",ee.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),W.accessor("address",{id:"address",enableSorting:!1,header:()=>l("Clinic Address","kivicare-clinic-management-system"),cell:R=>{const G=R.row.original.address||"",ee=R.row.original.city||"",ae=R.row.original.state||"",I=R.row.original.country||"",H=R.row.original.postal_code||"",B=[G,ee,ae,H,I].filter(Boolean).join(", ");return i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"",children:B||""})})}}),...P?[W.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>{const G=Number(R.getValue()),ee=R.row.original,ae=()=>{const I=G===1?0:1;bt({title:l("Update Status?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),ee.name,I===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(H=>{H.isConfirmed&&(yt({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),h.mutate({ids:[ee.id],status:I},{onSuccess:()=>{St({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Clinic status has been updated successfully.","kivicare-clinic-management-system")})},onError:B=>{rt({title:l("Error","kivicare-clinic-management-system"),text:B.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return E("clinic_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`clinic-status-${ee.id}`,checked:G===1,onChange:ae}),i.jsx("label",{className:"form-check-label",htmlFor:`clinic-status-${ee.id}`,children:i.jsx("span",{className:`badge ${G===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:G===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${G===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:G===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}})]:[],...E("clinic_edit")||E("clinic_resend_credential")||E("clinic_delete")?[W.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:R=>{const G=ee=>ae=>i.jsx(ut,{id:`tooltip-${R.cell.row.original.id}-${ee}`,...ae,children:ee});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("clinic_edit")&&i.jsx(Qe,{placement:"top",overlay:G(l("Edit","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/clinic/edit/${R.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),E("clinic_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:G(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>ie(R.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),E("clinic_delete")&&P&&i.jsx(Qe,{placement:"top",overlay:G(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>re(R.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[E]),ie=R=>{bt({title:l("Resend Credential","kivicare-clinic-management-system"),text:l("Are you sure you want to resend the credential for this clinic?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(G=>{G.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),m.mutate(R,{onSuccess:ee=>{St({text:ee?.message||l("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:ee=>{console.error("Resend credential error:",ee);const ae=ee?.response?.data?.message||ee?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:ae})}}))})},re=R=>{bt({title:l("Delete Clinic?","kivicare-clinic-management-system"),text:l("You're about to delete this clinic.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep clinic","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(G=>{G.isConfirmed&&(yt({title:l("Deleting Clinic...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected clinic.<br>This won't take long.","kivicare-clinic-management-system")}),d.mutate(R,{onSuccess:ee=>{St({title:l("Clinic Deleted","kivicare-clinic-management-system"),text:ee?.message||l("Clinic has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to clinics","kivicare-clinic-management-system")})},onError:ee=>{console.error("Delete clinic error:",ee);const ae=ee?.response?.data?.message||ee?.message||l("Failed to delete clinic. Please try again.","kivicare-clinic-management-system");rt({text:ae})}}))})},de=[{type:"number",name:"id",label:l("Clinic ID","kivicare-clinic-management-system"),placeholder:l("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:R=>{R.target.value=R.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l("eg Mount Health Care","kivicare-clinic-management-system")},{type:"paginatedSelect",name:"specialization",label:l("Specialization","kivicare-clinic-management-system"),placeholder:l("Select Specialization","kivicare-clinic-management-system"),options:r,optionLoader:fe,isSearchable:!0},{type:"text",name:"clinicAddress",label:l("Clinic Address","kivicare-clinic-management-system"),placeholder:l("eg 123 Wellness Way , HC 3456")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select Status","kivicare-clinic-management-system"),options:le,isSearchable:!1}],L=R=>{e(G=>({...G,...R,page:1})),w(!1)},Q=()=>{const R={page:1,perPage:t.perPage,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""};e(R),o([]),w(!1)},V=f.useMemo(()=>["search","id","clinicName","specialization","clinicAddress","status"].some(G=>{const ee=t[G];return ee!=null&&ee!==""})||s!=="",[t,s]),Z=R=>{P?w(R):R===!0&&bt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},X=()=>{U()};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Clinics","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[E("clinic_add")&&i.jsxs(gt,{to:P?"/clinic/add":"#",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:R=>{P||bt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Clinic","kivicare-clinic-management-system")})]}),P&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>P?A(!0):bt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Clinic import is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1}),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>Z(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:P?"kc-table-wrapper":"",children:[P&&i.jsx(i.Fragment,{children:i.jsx(wi,{in:!k,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:N,children:i.jsxs("div",{ref:N,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(yn,{id:"specialties-filter",placeholder:l("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:fe,value:r.find(R=>R.label===t.specialization)||null,onChange:R=>{P&&e(G=>({...G,specialization:R?R.label:""}))},isDisabled:!P,dependencies:{},isClearable:!0}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:le,onChange:R=>P&&e(G=>({...G,status:R?R.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:R=>({...R,zIndex:9999})},isDisabled:!P})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:s,onChange:R=>a(R.target.value),disabled:!P})]})}),E("clinic_export")&&P&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:y,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:b,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:j,disabled:g,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})})}),i.jsx(wn,{data:K,columns:z,isLoading:F,error:q,currentPage:ne.currentPage,perPage:ne.perPage,totalItems:ne.total,lastPage:ne.lastPage,onPageChange:R=>P&&e(G=>({...G,page:R})),onPerPageChange:R=>P&&e(G=>({...G,perPage:R,page:1})),onSortingChange:n,manualSorting:!0,enableSelection:P,moduleNamePlural:"clinics",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(R,G)=>{const ee=R.map(ae=>ae.id);bt({title:l("Delete Clinics?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${R.length} clinics</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep clinics","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ae=>{ae.isConfirmed&&(yt({title:l("Deleting Clinics...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected clinics.<br>This won't take long.","kivicare-clinic-management-system")}),u.mutate(ee,{onSuccess:I=>{St({title:l("Clinic Deleted","kivicare-clinic-management-system"),text:l(`${R.length} clinic${R.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to clinics","kivicare-clinic-management-system")}),G()},onError:I=>{console.error("Bulk delete clinics error:",I);const H=I?.response?.data?.message||I?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:H})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(R,G)=>{const ee=R.map(ae=>ae.id);bt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected clinics?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(ae=>{ae.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),p.mutate(ee,{onSuccess:I=>{St({title:l("Success","kivicare-clinic-management-system"),text:I?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),G()},onError:I=>{console.error("Bulk resend credentials error:",I);const H=I?.response?.data?.message||I?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(R,G)=>{const ee=R.map(ae=>ae.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected clinics to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ae=>{ae.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),h.mutate({ids:ee,status:"1"},{onSuccess:I=>{St({title:l("Success","kivicare-clinic-management-system"),text:I?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),G()},onError:I=>{console.error("Bulk update status error:",I);const H=I?.response?.data?.message||I?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(R,G)=>{const ee=R.map(ae=>ae.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected clinics to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ae=>{ae.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),h.mutate({ids:ee,status:"0"},{onSuccess:I=>{St({title:l("Success","kivicare-clinic-management-system"),text:I?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),G()},onError:I=>{console.error("Bulk update status error:",I);const H=I?.response?.data?.message||I?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:R=>{S(R)}})]})]}),i.jsx(ha,{show:_,onHide:()=>Z(!1),queryParams:t,onApplyFilters:P?L:()=>{},onResetFilters:P?Q:()=>{},title:l("Filters","kivicare-clinic-management-system"),fields:de,hasAppliedFilters:V}),i.jsx(Ar,{show:T,onHide:()=>A(!1),onReopenImport:()=>A(!0),onDataRefresh:X,context:"clinics"})]})})},hl=f.forwardRef(({id:t="profile-image-upload",name:e="doctorImage",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:r,className:o="",disabled:c=!1,size:d=120,setValue:m,register:u,accept:p,allowFile:h=!1},g)=>{const[x,v]=f.useState(n),[y,b]=f.useState(s),[j,k]=f.useState(!1),[S,N]=f.useState(!1),_=f.useRef(null),w=f.useRef(null),T=!!x;f.useEffect(()=>{v(n||""),b(s||"")},[n,s]),f.useEffect(()=>{N(typeof window<"u"&&!!(window.wp&&window.wp.media))},[]),f.useEffect(()=>{if(u&&typeof u=="function"&&w.current)try{u(e)}catch{}},[u,e]);const A=F=>{if(!S)return;const q=window.wp.media({title:l("Select or Upload Image","kivicare-clinic-management-system"),button:{text:l("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:h?"":"image"}});q.on("select",function(){const U=q.state().get("selection").first().toJSON();!h&&U.type!=="image"||O(U.url||U.source_url||"",U.id||"")}),q.open()},M=F=>{F.preventDefault(),!(c||j)&&(S&&!h?A():_.current?.click())},E=async F=>{const q=F.target.files[0];if(q){if(!h&&!q.type.startsWith("image/")){console.error("Please select an image file");return}try{k(!0);const U=URL.createObjectURL(q);v(U),b(""),O(U,""),a&&a({url:U,filename:q.name,type:q.type,size:q.size,file:q},"")}catch(U){console.error("Error handling file:",U)}finally{k(!1)}}},P=()=>{if(v(""),b(""),_.current&&(_.current.value=""),O("",""),r&&r(),a)try{a({id:"",url:"",filename:"",type:"image",size:0},"")}catch{}},D=F=>{F.preventDefault(),F.stopPropagation(),!(c||j)&&P()};f.useImperativeHandle(g,()=>({clearImage:P}));const O=(F="",q="")=>{if(v(F||""),b(q||""),w.current)try{w.current.value=q||"";try{w.current.dispatchEvent(new Event("input",{bubbles:!0})),w.current.dispatchEvent(new Event("change",{bubbles:!0}))}catch{}}catch{}if(typeof m=="function"&&e)try{m(e,F||""),m(`${e}Id`,q||"")}catch{}if(typeof a=="function")try{a({id:q||"",url:F||"",filename:"",type:"image",size:0},q||"")}catch{}};return i.jsxs("div",{className:`profile-image-uploader bg-body rounded w-100 p-3 ${o}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,name:e?`${e}Id`:void 0,ref:w,readOnly:!0,value:y||""}),i.jsx("input",{type:"file",id:t,ref:_,onChange:E,accept:p||(h?void 0:"image/*"),disabled:j||c,className:"profile-image-input"}),i.jsxs("div",{className:`profile-image-container ${c?"disabled":""}`,style:{width:d,height:d,"--profile-size":`${d}px`},onClick:M,children:[T?i.jsx("img",{src:x,alt:"",className:"profile-image"}):i.jsx("div",{className:"profile-image-placeholder",children:i.jsx("i",{className:"ph ph-user",style:{fontSize:`${Math.round(d*.6)}px`,color:"#ccc"}})}),i.jsx("div",{className:"profile-image-overlay",children:j?i.jsx("div",{className:"profile-image-spinner",style:{width:d*.18,height:d*.18,borderWidth:Math.max(2,Math.round(d*.03))}}):i.jsx("i",{className:"ph ph-camera",style:{fontSize:`${Math.round(d*.3)}px`,color:"white"}})}),T&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"profile-image-cancel-icon",onClick:D,disabled:j||c,"aria-label":l("Remove image","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x",style:{fontSize:"14px",color:"white"}})})})]})]})});hl.displayName="ProfileImageUploader";function Dy({isEditing:t=!1,isProfile:e=!1,...n}){const{id:s}=Wt(),{currentuserID:a,defaultClinicId:r,isAddonActive:o,defaultCountryCode:c,showOtherGender:d,userRole:m}=ht(),{data:u}=Cn(),p=dn(),h=o("kiviPro"),g=e?r:s,{data:x,isLoading:v,error:y}=wee(g,{enabled:(t||e)&&!!g}),b=x?.data,j=kee(),k=jee(),[S,N]=f.useState(!1),_=S||j.isPending||k.isPending||v,w=Vc.PhoneNumberUtil.getInstance(),T=L=>{try{return w.isValidNumber(w.parseAndKeepRawInput(L))}catch{return!1}},A=[{value:1,label:l("Active","kivicare-clinic-management-system")},{value:0,label:l("Inactive","kivicare-clinic-management-system")}],{register:M,handleSubmit:E,control:P,watch:D,setValue:O,formState:{errors:F},reset:q}=Xt({defaultValues:{clinicImage:"",clinicImageId:"",clinicName:"",clinicEmail:"",contactNumber:"",status:A[0],specialties:null,address:"",country:"",city:"",postalCode:"",adminImage:"",adminImageId:"",firstName:"",lastName:"",adminEmail:"",adminContactNumber:"",dob:"",gender:""}}),U=f.useMemo(()=>u?.data?.kc_available_translations,[u]),{data:K,isLoading:ne,refetch:Y}=Ma("specialization"),fe=Hg(),le=L=>{if(L==null)return null;const Q=parseInt(L);return A.find(V=>V.value===Q)||null};if(f.useEffect(()=>{if(t&&b&&!v){O("clinicName",b.clinic_name||""),O("clinicEmail",b.clinic_email||""),setTimeout(()=>{O("contactNumber",b.clinic_contact||"")},0),O("address",b.address||""),O("city",b.city||""),O("country",b.country||""),O("postalCode",b.postal_code||"");const L=le(b.status);O("status",L),O("specialties",b.specialties),b.clinic_image&&O("clinicImage",b.clinic_image),b.clinic_image_id&&O("clinicImageId",b.clinic_image_id),O("firstName",b.first_name||""),O("lastName",b.last_name||""),O("adminEmail",b.admin_email||""),setTimeout(()=>{O("adminContactNumber",b.admin_contact_number||"")},0),O("dob",b.dob||""),O("gender",b.gender||""),b.clinic_admin_image_url&&O("adminImage",b.clinic_admin_image_url),b.clinic_admin_image_id&&O("adminImageId",b.clinic_admin_image_id)}},[t,b,v,O]),t&&y)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:l("Error Loading Clinic Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:l("Unable to load clinic information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>p("/clinic"),children:l("Back to Clinics","kivicare-clinic-management-system")})]});const W=(L,Q)=>{O(L,Q.url||Q.image),O(`${L}Id`,Q.id||Q.imageId)},z=async L=>{N(!0);const Q={clinic_name:L.clinicName,clinic_email:L.clinicEmail,clinic_contact:L.contactNumber,status:L.status?parseInt(L.status.value):1,specialties:L.specialties,address:L.address,country:L.country,city:L.city,postal_code:L.postalCode,clinic_image:L.clinicImage,clinic_image_id:L.clinicImageId,admin_image:L.adminImage,admin_image_id:L.adminImageId,first_name:L.firstName,last_name:L.lastName,admin_email:L.adminEmail,admin_contact_number:L.adminContactNumber,dob:L.dob,gender:L.gender};try{if(t){let V=await k.mutateAsync({id:g,...Q});Ee.success(V.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}else{let V=await j.mutateAsync(Q);Ee.success(V.data.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}e&&p(-1),t&&m=="clinic_admin"&&p(-1),p("/clinic",{replace:!0})}catch(V){console.error("Error saving clinic:",V);const Z=V?.response?.data?.message||(t?l("Failed to update clinic","kivicare-clinic-management-system"):l("Failed to create clinic","kivicare-clinic-management-system"));Ee.error(Z,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{N(!1)}},ie=L=>{const Q=Object.keys(L)[0],V=document.getElementById(Q);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.focus())},de={...{clinicName:{required:l("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}},clinicEmail:{required:l("Clinic email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:Q=>Q?T(Q)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},specialties:{required:l("At least one specialty is required","kivicare-clinic-management-system"),validate:{notEmpty:Q=>Q&&Q.length>0||l("At least one specialty is required","kivicare-clinic-management-system")}},address:{required:l("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},country:{required:l("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}},city:{required:l("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{required:l("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}},firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},adminEmail:{required:l("Admin email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},adminContactNumber:{required:l("Admin contact number is required","kivicare-clinic-management-system"),validate:Q=>Q?T(Q)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Admin contact number is required","kivicare-clinic-management-system")},dob:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:Q=>{const V=new Date(Q);return new Date().getFullYear()-V.getFullYear()>=18||l("Admin must be at least 18 years old","kivicare-clinic-management-system")}},gender:{required:l("Gender is required","kivicare-clinic-management-system")}};return v&&(t||e)?i.jsx(Ay,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Clinic","kivicare-clinic-management-system"):l("Add Clinic","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:E(z,ie),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(je,{name:"clinicImage",control:P,render:({field:L})=>i.jsx(hl,{id:"clinic-image-upload",name:"clinicImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:L.value,defaultImageId:D("clinicImageId"),onChange:Q=>W("clinicImage",Q),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicName",className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"clinicName",className:`form-control ${F.clinicName?"is-invalid":""}`,placeholder:l('eg "Health care Clinic"',"kivicare-clinic-management-system"),...M("clinicName",de.clinicName),disabled:t&&v}),F.clinicName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicEmail",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"clinicEmail",className:`form-control ${F.clinicEmail?"is-invalid":""}`,placeholder:l('eg "clinic@example.com"',"kivicare-clinic-management-system"),...M("clinicEmail",de.clinicEmail),disabled:t&&v}),F.clinicEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"contactNumber",control:P,rules:de.contactNumber,render:({field:L})=>i.jsx(Jl,{defaultCountry:c,inputProps:{className:`form-control ${F.contactNumber?"is-invalid":""}`,placeholder:l("Enter phone number","kivicare-clinic-management-system"),disabled:t&&v},...L})}),F.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.contactNumber.message})]})}),!e&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:P,rules:de.status,render:({field:L})=>i.jsx(ot,{id:"status",options:A,value:L.value,onChange:L.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Q=>({...Q,zIndex:9999})},isDisabled:t&&v||!h})}),F.status&&i.jsx("div",{className:"invalid-feedback d-block",children:F.status.message})]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"specialties",className:"form-label",children:[l("Specialties","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"specialties",control:P,rules:de.specialties,render:({field:L})=>i.jsx(ko,{id:"specialties",options:K?.data??[],value:L.value,onChange:Q=>{L.onChange(Q)},onCreateOption:Q=>{fe.mutate(Q,{onSuccess:V=>{if(V?.data?.data){const Z=(L.value||[]).map(X=>X.id===tempOption.id?{id:V.data.data.id,label:V.data.data.label}:X);L.onChange(Z)}Ee.success(l("Specialty added successfully","kivicare-clinic-management-system"))},onError:V=>{console.error("Failed to save specialty:",V),console.error("Error details:",V.response?.data),Ee.error(l("Failed to save specialty to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Q=>Q.id,placeholder:l("Select or create specialties","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:ne,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,isDisabled:t&&v,noOptionsMessage:()=>l("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:Q=>l("Add specialty","kivicare-clinic-management-system")+`: "${Q}"`})}),F.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:F.specialties.message})]}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type a new specialty and press enter to add it","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"address",className:"form-label",children:[l("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"address",className:`form-control ${F.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...M("address",de.address),disabled:t&&v}),F.address&&i.jsx("div",{className:"invalid-feedback d-block",children:F.address.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"country",className:"form-label",children:[l("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"country",className:`form-control ${F.country?"is-invalid":""}`,placeholder:l('eg "USA"',"kivicare-clinic-management-system"),...M("country",de.country),disabled:t&&v}),F.country&&i.jsx("div",{className:"invalid-feedback d-block",children:F.country.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"city",className:"form-label",children:[l("City","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"city",className:`form-control ${F.city?"is-invalid":""}`,placeholder:l('eg "New York"',"kivicare-clinic-management-system"),...M("city",de.city),disabled:t&&v}),F.city&&i.jsx("div",{className:"invalid-feedback d-block",children:F.city.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"postalCode",className:"form-label",children:[l("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${F.postalCode?"is-invalid":""}`,placeholder:l('eg "123456"',"kivicare-clinic-management-system"),...M("postalCode",de.postalCode),disabled:t&&v}),F.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:F.postalCode.message})]})}),e&&i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"language",className:"form-label",children:[l("Choose Language","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"language",control:P,rules:de.language,render:({field:L})=>i.jsx(ot,{id:"language",options:U.map(Q=>({value:Q.lang,label:Q.label})),value:L.value,onChange:L.onChange,placeholder:l("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:Q=>({...Q,zIndex:9999})},isDisabled:t&&v})}),F.language&&i.jsx("div",{className:"invalid-feedback d-block",children:F.language.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx("h6",{className:"mb-3",children:t?l("Update Admin Details","kivicare-clinic-management-system"):l("Create Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(je,{name:"adminImage",control:P,render:({field:L})=>i.jsx(hl,{id:"admin-image-upload",name:"adminImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:L.value,defaultImageId:D("adminImageId"),onChange:Q=>W("adminImage",Q),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${F.firstName?"is-invalid":""}`,placeholder:l('eg "Mark"',"kivicare-clinic-management-system"),...M("firstName",de.firstName),disabled:t&&v}),F.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${F.lastName?"is-invalid":""}`,placeholder:l('eg "Avenue"',"kivicare-clinic-management-system"),...M("lastName",de.lastName),disabled:t&&v}),F.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminEmail",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"adminEmail",className:`form-control ${F.adminEmail?"is-invalid":""}`,placeholder:l('eg "admin@example.com"',"kivicare-clinic-management-system"),...M("adminEmail",de.adminEmail),disabled:t&&v}),F.adminEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:F.adminEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminContactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"adminContactNumber",control:P,rules:de.adminContactNumber,render:({field:L})=>i.jsx(Jl,{defaultCountry:c,value:L.value,onChange:L.onChange,inputProps:{className:`form-control ${F.adminContactNumber?"is-invalid":""}`,placeholder:l("Enter phone number","kivicare-clinic-management-system"),disabled:t&&v}})}),F.adminContactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.adminContactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[l("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"dob",control:P,rules:de.dob,render:({field:L})=>i.jsxs("div",{className:"input-group",children:[i.jsx(si,{id:"dob",className:`form-control ${F.dob?"is-invalid":""}`,value:L.value?ii(L.value):"",onChange:Q=>{if(Q&&Q[0]){const V=Q[0],Z=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`;L.onChange(Z)}else L.onChange("")},options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:ai()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&v}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})}),F.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:F.dob.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",...M("gender",de.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",...M("gender",de.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),d&&i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",...M("gender",de.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),F.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:F.gender.message})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(Gn,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:_||t&&v}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_||t&&v,children:_?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Clinic","kivicare-clinic-management-system"):l("Save Clinic","kivicare-clinic-management-system")})]})]})})]})}const hte=Object.freeze(Object.defineProperty({__proto__:null,default:Dy},Symbol.toStringTag,{value:"Module"})),pte=[Vn({path:"/clinic",title:"Clinic",outlet:mte,permissions:["clinic_list"],meta:{description:"Clinic management system",icon:"hospital",showInSidebar:!0},children:[We({path:"",component:ute,title:"All Clinics",index:!0,permissions:["clinic_list"],meta:{description:"List of all clinics",breadcrumb:"All Clinics"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Dy,title:"Add Clinic",props:{isEditing:!1},addons:["kiviPro"],permissions:["clinic_add"],skeleton:Ay,meta:{description:"Create a new clinic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Dy,title:"Edit Clinic",props:{isEditing:!0},permissions:["clinic_edit"],skeleton:Ay,meta:{description:"Edit existing clinic",breadcrumb:"Edit"}})]})],gte=()=>i.jsx("div",{className:"patients-container",children:i.jsx(Uc,{})}),Ry=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["50px","80px","100px"]}),i.jsx(nt,{width:"80px",height:"32px"})]}),i.jsx(fl,{titleWidth:"150px"}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"150px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"80px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"100px",height:"38px"})]})]})]})})})}),cP=()=>i.jsxs(xo,{fluid:!0,className:"content-inner pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(yo,{items:["80px","100px","120px"]}),i.jsx(C,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsx(Un,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:Array.from({length:4}).map((t,e)=>i.jsx(Ct,{children:i.jsx(mt,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(mt.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-1 justify-content-between",children:[i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(C,{width:"60px",height:"1.5rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx(C,{width:"2rem",height:"2rem",style:{borderRadius:"50%"}})})]})})})},e))}),i.jsx(mt,{children:i.jsx(mt.Body,{children:i.jsx(Un,{children:i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"custom-tab-slider",children:[i.jsxs(Dn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Dn.Item,{children:i.jsx(C,{width:"60px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Dn.Item,{children:i.jsx(C,{width:"70px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Dn.Item,{children:i.jsx(C,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsx(pt,{children:i.jsx(C,{width:"100%",height:"200px"})})})]})})})})})]}),fte=({label:t,count:e,icon:n})=>i.jsx(Ct,{children:i.jsx(mt,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(mt.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"text-body line-clamp-1 fw-medium mb-3",children:t}),i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-0 fw-bold",children:e})]}),i.jsx("div",{className:"card-icon",children:i.jsx("i",{className:`${n} fs-1 text-primary`,"aria-hidden":"true"})})]})})})}),vte=()=>{const{patientProfileId:t}=Wt(),e=Hn(),n=dn(),{isAddonActive:s,getPriceFormat:a}=ht(),[r,o]=f.useState([]),c=s("kiviPro"),{data:d,isLoading:m,isError:u,error:p}=Kee(t),h=()=>{const x=e.pathname;return x.includes("/appointments")?"appointments":x.includes("/reports")?"reports":(x.endsWith(`/profile/${t}`)||x.endsWith(`/profile/${t}/`),"profile")},g=x=>{switch(x){case"profile":n("",{relative:"path"});break;case"reports":n("reports",{relative:"path"});break;case"appointments":n("appointments",{relative:"path"});break;default:n("",{relative:"path"})}};return f.useEffect(()=>{if(d?.data){const x=d?.data?.statistics;o([{label:l("Total Appointments","kivicare-clinic-management-system"),count:x.total_appointments||0,icon:"ph-fill ph-calendar-dots"},{label:l("Completed Appointments","kivicare-clinic-management-system"),count:x.completed_appointments||0,icon:"ph-fill ph-calendar-check"},{label:l("Total Encounters","kivicare-clinic-management-system"),count:x.total_encounters||0,icon:"ph-fill ph-stethoscope"},{label:l("Total Billing Amount","kivicare-clinic-management-system"),count:a(x.total_billing_amount)||0,icon:"ph-fill ph-currency-dollar"}])}},[d]),m?i.jsx(cP,{}):u?i.jsx(xo,{fluid:!0,className:"content-inner pb-0",children:i.jsx("div",{className:"text-center py-5",children:i.jsx("p",{className:"text-danger",children:p?.message||l("Failed to load patient data","kivicare-clinic-management-system")})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx(Gn,{})]}),i.jsx(Un,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:r.map((x,v)=>i.jsx(fte,{...x},v))}),i.jsx(mt,{children:i.jsx(mt.Body,{children:i.jsx(Un,{children:i.jsx(Ct,{xs:12,children:i.jsx("div",{className:"custom-tab-slider",children:i.jsxs(Sg.Container,{activeKey:h(),onSelect:g,children:[i.jsxs(Dn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{eventKey:"profile",children:l("Profile","kivicare-clinic-management-system")})}),c&&i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{eventKey:"reports",children:l("Reports","kivicare-clinic-management-system")})}),i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{eventKey:"appointments",children:l("Appointments","kivicare-clinic-management-system")})})]}),i.jsx(Gi,{})]})})})})})})]})},xte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:"",date_from:"",date_to:"",registeredOn:"",patient_unique_id:""}),n=H=>{if(H.length>0){const{id:B,desc:te}=H[0],oe={name:"name",registeredOn:"registered_on",mobileNumber:"contact_number",status:"status",id:"id"};e(ye=>({...ye,orderby:oe[B]||B,order:te?"desc":"asc",page:1}))}else e(B=>({...B,orderby:"",order:"",page:1}))},[s,a]=f.useState([]),r=Kn(),o=mi(),c=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([H,B])=>B!==""&&B!==null&&B!==void 0)),[t]),[d,m]=f.useState(!1),u=f.useRef(null),{data:p,isLoading:h,error:g,refetch:x}=rP(c),v=qee(),y=Bee(),b=Hee(),j=zee(),k=Vee(),[S,N]=f.useState(!1),_=p?.data?.patients||[],w=p?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},T=ze(),A=async({page:H,per_page:B,search:te})=>{try{const oe={dataType:"clinicList",page:H,per_page:B,search:te},ye=await T.fetchQuery({queryKey:vt.list(oe),queryFn:()=>Bt.getStaticData(oe),staleTime:300*1e3}),me=ye.data.map(xe=>({value:xe.id,label:xe.label||xe.name}));return a(xe=>[...xe,...me]),ye}catch(oe){return console.error("Error loading clinics:",oe),{data:[],pagination:{has_more:!1}}}},M=[{value:"0",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"1",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[E,P]=f.useState(""),D=H=>{P(H.target.value)},O=f.useMemo(()=>E.trim()?_.filter(H=>{const B=E.toLowerCase();return H.name?.toLowerCase().includes(B)||H.email?.toLowerCase().includes(B)||H.mobileNumber?.toLowerCase().includes(B)||H.clinicName?.toLowerCase().includes(B)||H.id?.toString().includes(B)||H.patient_unique_id?.toLowerCase().includes(B)}):_,[_,E]),F=Wee(),q=async H=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:H,search:t.search,clinic:t.clinic,status:t.status},te=await F.mutateAsync(B);if(te?.data?.patients){const oe=new Date().toISOString().split("T")[0],ye=te.data.patients.map(me=>({id:me.id,patient_image_url:me.patient_image_url,name:me.name,clinic:me.clinic,email:me.email,mobile:me.mobile,gender:me.gender,dob:me.dob,blood_group:me.blood_group,registered_on:me.registered_on,status:me.status,address:me.address}));switch(H){case"csv":cs(ye,`patients-${oe}.csv`);break;case"xls":ds(ye,`patients-${oe}.xls`);break;case"pdf":ms(ye,`patients-${oe}.pdf`,"Patients List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(B){console.error("Export error:",B),rt({title:l("Error!","kivicare-clinic-management-system"),text:B.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},U=()=>q("csv"),K=()=>q("xls"),[ne,Y]=f.useState(!1),fe=()=>{ne||(Y(!0),q("pdf"),setTimeout(()=>Y(!1),2e3))},[le,W]=f.useState(!1),z=H=>{e(B=>({...B,...H,page:1})),W(!1)},ie=f.useMemo(()=>["search","id","patientName","clinic","status","date_from","date_to","patient_unique_id"].some(B=>{const te=t[B];return te!=null&&te!==""}),[t]),re=()=>{const H={page:1,perPage:t.perPage,search:"",id:"",patientName:"",clinicName:"",registeredOn:"",status:"",orderBy:"",order:"",patient_unique_id:"",date_from:"",date_to:"",clinic:""};e(H),a([]),W(!1)},{isAddonActive:de,defaultClinicId:L,patientUniqueIdSetting:Q,hasCapability:V}=ht(),Z=de("kiviPro"),X=[...Q?.enable?[{type:"text",name:"patient_unique_id",label:l("Patient Unique ID","kivicare-clinic-management-system"),placeholder:l("Enter Patient Unique ID","kivicare-clinic-management-system")}]:[{type:"number",name:"id",label:l("Patient ID","kivicare-clinic-management-system"),placeholder:l("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:H=>{H.target.value=H.target.value.replace(/[^0-9]/g,"")}}],{type:"text",name:"patientName",label:l("Patient Name","kivicare-clinic-management-system"),placeholder:l("eg Sophia Anderson","kivicare-clinic-management-system")},...Z&&!r&&!o?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:A,options:s,key:"clinic-filter"}]:[],{type:"dateRange",name:"registeredOn",label:l("Registered ON","kivicare-clinic-management-system"),placeholder:l("eg 15/03/25","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("eg Active","kivicare-clinic-management-system"),options:M,isSearchable:!1}],R=In(),G=f.useMemo(()=>[R.accessor("id",{header:()=>Q?.enable?l("Unique ID","kivicare-clinic-management-system"):l("ID","kivicare-clinic-management-system"),cell:H=>{const B=H.row.original;return Q?.enable?B.patient_unique_id?B.patient_unique_id:"-":`#${H.getValue()}`}}),R.accessor("name",{id:"name",header:()=>l("Patient","kivicare-clinic-management-system"),cell:H=>i.jsx(Zt,{profileUrl:H.row.original.patient_image_url,name:H.getValue(),email:H.row.original.email,fallbackText:"PT",variant:"primary",size:"md",nameLabel:l("Patient","kivicare-clinic-management-system")})}),...Z&&!r&&!o?[R.accessor("clinicNameArray",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:H=>{const B=H.row.original.clinics||[];return i.jsx("div",{children:B.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[B.slice(0,2).map((te,oe)=>i.jsx(Xp,{placement:H.row.index<w.perPage-2?"bottom":"top",trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:te.clinic_name}),children:i.jsx(Tm,{avatar:te.clinic_image_url,name:te.clinic_name,email:te.clinic_email,phone:te.clinic_contact_number,address:te.clinic_address,fallbackIcon:"ph-hospital"})},oe)),B.length>2&&i.jsx(Xp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",B.length-2]}),placement:H.row.index<w.perPage-2?"bottom":"top",children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:l("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:B.slice(2).map((te,oe)=>i.jsx("div",{className:oe!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:te.clinic_image_url,name:te.clinic_name,email:te.clinic_email,phone:te.clinic_contact_number,address:te.clinic_address,fallbackIcon:"ph-hospital"})},oe))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})},enableSorting:!1})]:[],R.accessor("mobileNumber",{header:()=>l("Mobile Number","kivicare-clinic-management-system"),cell:H=>H.getValue(),enableSorting:!1}),R.accessor("registeredOn",{header:()=>l("Registered ON","kivicare-clinic-management-system"),cell:H=>H.getValue()}),R.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:H=>{l("Active","kivicare-clinic-management-system"),l("Inactive","kivicare-clinic-management-system");const B=Number(H.getValue()),te=H.row.original,oe=()=>{const ye=B===1?0:1;bt({title:l("Update Status?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),te.name,ye===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(me=>{me.isConfirmed&&(yt({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),k.mutate({ids:[te.id],status:ye},{onSuccess:()=>{St({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Patient status has been updated successfully.","kivicare-clinic-management-system")})},onError:xe=>{rt({title:l("Error","kivicare-clinic-management-system"),text:xe.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return V("patient_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`patient-status-${te.id}`,checked:B===0,onChange:oe}),i.jsx("label",{className:"form-check-label",htmlFor:`patient-status-${te.id}`,children:i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:B===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:B===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})},enableSorting:!1}),...V("patient_edit")||V("patient_appointment")||V("patient_appointment_report")||V("patient_resend_credential")||V("patient_encounter")||V("patient_profile")||V("patient_delete")?[R.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>{const B=te=>oe=>i.jsx(ut,{id:`tooltip-${H.cell.row.original.id}-${te}`,...oe,children:te});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[V("patient_edit")&&i.jsx(Qe,{placement:"top",overlay:B(l("Edit Patient","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/patient/edit/${H.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),V("patient_appointment")&&i.jsx(Qe,{placement:"top",overlay:B(l("Appointments","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/patient/profile/${encodeURIComponent(H.row.original.id)}/appointments`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar"})})}),V("patient_appointment_report")&&i.jsx(Qe,{placement:"top",overlay:B(l("Reports","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/patient-medical-report_id/patient/${H.row.original.id}`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-file"})})}),V("patient_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:B(l("Resend Credential","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>ee(H.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),V("patient_encounter")&&i.jsx(Qe,{placement:"top",overlay:B(l("Patient Encounters","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/patient/${H.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-primary fs-4",children:i.jsx("i",{className:"ph ph-calendar-check"})})})}),V("patient_profile")&&i.jsx(Qe,{placement:"top",overlay:B(l("View Profile","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/patient/profile/${H.row.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-user-circle-check"})})}),V("patient_delete")&&i.jsx(Qe,{placement:"top",overlay:B(l("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ae(H.cell.row.original.id,H.row.original.name),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[Q,V]),ee=H=>{bt({title:l("Resend Credential","kivicare-clinic-management-system"),text:l("Are you sure you want to resend the credential for this patient?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),y.mutate(H,{onSuccess:te=>{St({text:te?.message||l("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:te=>{console.error("Resend credential error:",te);const oe=te?.response?.data?.message||te?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:oe})}}))})},ae=(H,B)=>{bt({title:l("Delete Patient?","kivicare-clinic-management-system"),text:Ti(l("You're about to delete <strong>%s</strong>.<br>This action cannot be undone.","kivicare-clinic-management-system"),B),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep patient","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(te=>{te.isConfirmed&&(yt({title:l("Deleting Patient...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected patient.<br>This won't take long.","kivicare-clinic-management-system")}),v.mutate(H,{onSuccess:oe=>{St({title:l("Patient Deleted","kivicare-clinic-management-system"),text:oe?.message||l("Patient has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to patients","kivicare-clinic-management-system")})},onError:oe=>{console.error("Delete patient error:",oe);const ye=oe?.response?.data?.message||oe?.message||l("Failed to delete patient. Please try again.","kivicare-clinic-management-system");rt({text:ye})}}))})},I=()=>{x()};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsx(ki,{})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Patients","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[V("patient_add")&&i.jsxs(gt,{to:"/patient/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Patient","kivicare-clinic-management-system")})]}),Z&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>W(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[Z&&!r&&!o&&i.jsx(yn,{id:"clinic-filter",placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:A,value:s.find(H=>H.value===t.clinic)||null,onChange:H=>{e(B=>({...B,clinic:H?H.value:""}))},dependencies:{},isClearable:!0}),i.jsx("div",{className:"position-relative",children:i.jsxs(Qd,{children:[i.jsx(si,{onChange:H=>{if(H.length===2){const[B,te]=H;e(oe=>({...oe,date_from:Ql(B),date_to:Ql(te),page:1}))}else H.length===0&&e(B=>({...B,date_from:"",date_to:"",page:1}))},value:t.date_from&&t.date_to?[ii(t.date_from),ii(t.date_to)]:null,options:{mode:"range",dateFormat:bi(window.kc_frontend.date_format),locale:ai()},className:"form-control",placeholder:l("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:t.date_from||t.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{e(B=>({...B,date_from:"",date_to:"",page:1}));const H=document.querySelector('.form-control[placeholder="Select date range"]');H&&H._flatpickr&&H._flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:M,onChange:H=>e(B=>({...B,status:H?H.value:""})),value:M.find(H=>H.value===t.status)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:H=>({...H,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:E,onChange:D})]})}),V("patient_export")&&Z&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:U,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:K,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:fe,disabled:F.isPending||ne,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:O,columns:G,isLoading:h,error:g,currentPage:w.currentPage,perPage:w.perPage,totalItems:w.total,lastPage:w.lastPage,onPageChange:H=>e(B=>({...B,page:H})),onPerPageChange:H=>e(B=>({...B,perPage:H,page:1})),enableSelection:!0,bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(H,B)=>{const te=H.map(oe=>oe.id);bt({title:l("Delete Patients?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${H.length} patients</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep patients","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(oe=>{oe.isConfirmed&&(yt({title:l("Deleting Patients...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected patients.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(te,{onSuccess:ye=>{St({title:l("Patient Deleted","kivicare-clinic-management-system"),text:l(`${H.length} patient${H.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to patients","kivicare-clinic-management-system")}),B()},onError:ye=>{console.error("Bulk delete patient(s) error:",ye);const me=ye?.response?.data?.message||ye?.message||l("Failed to delete selected patient(s). Please try again.","kivicare-clinic-management-system");rt({text:me})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(H,B)=>{const te=H.map(oe=>oe.id);bt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(oe=>{oe.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),j.mutate(te,{onSuccess:ye=>{St({text:ye?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system")}),B()},onError:ye=>{console.error("Bulk resend credentials error:",ye);const me=ye?.response?.data?.message||ye?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:me})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(H,B)=>{const te=H.map(oe=>oe.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to activate the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(oe=>{oe.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:te,status:"0"},{onSuccess:ye=>{St({text:ye?.message||l("Clinic status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:ye=>{console.error("Bulk update status error:",ye);const me=ye?.response?.data?.message||ye?.message||l("Failed to update patient status. Please try again.","kivicare-clinic-management-system");rt({text:me})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(H,B)=>{const te=H.map(oe=>oe.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to inactive the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(oe=>{oe.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:te,status:"1"},{onSuccess:ye=>{St({text:ye?.message||l("Patient status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:ye=>{console.error("Bulk update status error:",ye);const me=ye?.response?.data?.message||ye?.message||l("Failed to update patient(s) status. Please try again.","kivicare-clinic-management-system");rt({text:me})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:H=>{m(H)},onSortingChange:n,skeletonColumns:6,skeletonRows:5,moduleNamePlural:"patients"})]}),i.jsx(ha,{show:le,onHide:()=>W(!1),queryParams:t,onApplyFilters:z,onResetFilters:re,title:l("Filters","kivicare-clinic-management-system"),fields:X,hasAppliedFilters:ie}),Z&&i.jsx(Ar,{show:S,onHide:()=>N(!1),onReopenImport:()=>N(!0),onDataRefresh:I,context:"patients"})]})};function eg({isEditing:t=!1,isProfile:e=!1,hideBreadcrumbs:n=!1,...s}){const{patientProfileId:a}=Wt(),r=ze(),{currentuserID:o,isAddonActive:c,userRole:d,defaultClinicId:m,patientUniqueIdSetting:u,defaultCountryCode:p,showOtherGender:h,sidebarItems:g}=ht(),{data:x}=Cn();f.useMemo(()=>x?.data?.kc_available_translations,[x]);const v=ls(d)&&e?o:a,[y]=xI(),b=y.get("from")==="appointment",{data:j,isLoading:k,error:S}=Lee(v,{enabled:t&&!!v}),N=j?.data,_=async({page:oe,per_page:ye,search:me})=>{try{const xe={dataType:"clinicList",page:oe,per_page:ye,search:me};return await r.fetchQuery({queryKey:vt.list(xe),queryFn:()=>Bt.getStaticData(xe),staleTime:300*1e3})}catch(xe){return console.error("Error loading clinics:",xe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},w=Fee(),T=$ee(),A=dn(),M=!ls(d)||g&&g.length>0,E=u?.enable,{data:P}=sd({module_type:"patient_module",status:1,module_id:v},{enabled:c("kiviPro")}),D=P?.data?.forms||[],O=f.useRef({});f.useEffect(()=>{t&&D.length>0&&D.forEach(oe=>{const ye=oe.form_data;ye&&O.current[oe.id]&&setTimeout(()=>{const me=O.current[oe.id];me&&me.resetForm&&me.resetForm(ye)},100)})},[t,D]);const F=()=>{const oe={};return D.forEach(ye=>{const me=O.current[ye.id];me&&(oe[ye.id]=me.getFormData())}),oe},q=async()=>{const oe={};let ye=!0,me=null;for(const xe of D){const Ce=O.current[xe.id];if(Ce){const he=await Ce.triggerValidation();oe[xe.id]={isValid:he.isValid,data:Ce.getFormData(),errors:he.errors},he.isValid||(ye=!1,me||(me=xe.id))}}return{allValid:ye,formResults:oe,firstInvalidFormId:me}},{data:U,isLoading:K,refetch:ne}=Uee({enabled:!t&&!e&&E}),[Y,fe]=f.useState(!1),le=Y||w.isPending||T.isPending||k,W=Vc.PhoneNumberUtil.getInstance(),z=oe=>{try{return W.isValidNumber(W.parseAndKeepRawInput(oe))}catch{return!1}},ie=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],{register:re,handleSubmit:de,control:L,watch:Q,setValue:V,formState:{errors:Z},reset:X}=Xt({defaultValues:{patientImage:"",patientImageId:"",patientUniqueId:"",firstName:"",lastName:"",email:"",contactNumber:"",dob:"",clinic:[],status:ie[0],bloodGroup:null,gender:"",address:"",city:"",country:"",postalCode:""}}),R=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],G=oe=>oe==null?null:ie.find(ye=>ye.value===oe||ye.value===String(oe)||oe===0&&ye.value==="active"||oe===1&&ye.value==="inactive")||null,ee=oe=>!oe||R.length===0?null:R.find(ye=>ye.value===oe||ye.label===oe)||null;f.useEffect(()=>{!t&&U?.data?.unique_id&&E&&V("patientUniqueId",U.data.unique_id)},[U,t,E,V]),f.useEffect(()=>{if(t&&N&&!k){if(V("firstName",N.first_name||""),V("lastName",N.last_name||""),V("email",N.email||""),V("patientUniqueId",N.patient_unique_id||""),setTimeout(()=>{V("contactNumber",N.contact_number||N.mobile_number||"")},0),V("dob",N.dob||""),V("gender",N.gender||""),d==="kiviCare_receptionist")V("clinic",[{value:m}]);else{const me=Array.isArray(N.clinic)?N.clinic.map(xe=>({value:xe.value??xe.id??xe.ID??"",label:xe.label??xe.name??""})):[];V("clinic",me)}const oe=G(N.status);V("status",oe);const ye=ee(N.blood_group);V("bloodGroup",ye),V("address",N.address||""),V("city",N.city||""),V("country",N.country||""),V("postalCode",N.postal_code||""),N.patient_image_url&&V("patientImage",N.patient_image_url),N.patient_image_id&&V("patientImageId",N.patient_image_id),N.customFields&&typeof N.customFields=="object"&&Object.entries(N.customFields).forEach(([me,xe])=>{V(`custom_field_${me}`,xe)})}},[t,N,k,V]),f.useEffect(()=>{if(S){const oe=S?.response?.data?.message||l("You do not have permission to view this patient.","kivicare-clinic-management-system");Ee.error(oe,{position:"top-right",autoClose:5e3}),A("/patient",{replace:!0})}},[S,A]);const ae=(oe,ye)=>{V(oe,ye.url||ye.image),V(`${oe}Id`,ye.id||ye.imageId)},I=c("kiviPro"),H={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"?{required:l("At least one clinic selection is required","kivicare-clinic-management-system"),validate:oe=>!oe||Array.isArray(oe)&&oe.length===0?l("At least one clinic must be selected","kivicare-clinic-management-system"):!0}:{},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:oe=>oe?z(oe)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},dob:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:oe=>{const ye=new Date(oe),me=new Date;return ye.setHours(0,0,0,0),me.setHours(0,0,0,0),ye>me?l("Date of birth cannot be in the future","kivicare-clinic-management-system"):!0}},gender:{required:l("Gender is required","kivicare-clinic-management-system")}},B=async oe=>{if(fe(!0),D.length>0&&!(await q()).allValid){fe(!1);return}let ye=oe.clinic;d==="kiviCare_receptionist"||d==="kiviCare_clinic_admin"?ye=[{value:m}]:ye=Array.isArray(ye)?ye.map(Ce=>({value:Ce.value||Ce})):[];const me={};Object.keys(oe).forEach(Ce=>{if(Ce.startsWith("custom_field_")){const he=Ce.replace("custom_field_","");me[he]=oe[Ce]}});const xe={first_name:oe.firstName,last_name:oe.lastName,email:oe.email,mobile_number:oe.contactNumber,dob:oe.dob,status:oe.status?.value||oe.status,blood_group:oe.bloodGroup?.value||oe.bloodGroup,gender:oe.gender,profile_image:oe.patientImageId,patient_unique_id:oe.patientUniqueId,address:oe.address,city:oe.city,country:oe.country,postal_code:oe.postalCode,clinics:ye,customForm:F(),customFields:me};try{let Ce;t?(Ce=await T.mutateAsync({id:v,...xe}),Ee.success(l("Patient updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(Ce=await w.mutateAsync(xe),Ee.success(l("Patient created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||A(b?"/appointments/add":"/patient",{replace:!0,state:{NewPatientId:Ce.data.id}})}catch(Ce){console.error("Error saving patient:",Ce);const he=Ce?.response?.data?.message||(t?l("Failed to update patient","kivicare-clinic-management-system"):l("Failed to create patient","kivicare-clinic-management-system"));Ee.error(he,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{fe(!1)}},te=oe=>{console.log("Validation errors:",oe);const ye=Object.keys(oe)[0],me=document.getElementById(ye);me&&(me.scrollIntoView({behavior:"smooth",block:"center"}),me.focus())};return t&&k?i.jsx(Ry,{}):t&&S?null:i.jsxs(i.Fragment,{children:[i.jsx(f.Activity,{mode:n?"hidden":"visible",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),M&&i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Patient","kivicare-clinic-management-system"):l("Add Patient","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:de(B,te),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(je,{name:"patientImage",control:L,render:({field:oe})=>i.jsx(hl,{id:"patient-image-upload",name:"patientImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:oe.value,defaultImageId:Q("patientImageId"),onChange:ye=>ae("patientImage",ye),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[E&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"patientUniqueId",className:"form-label",children:l("Patient Unique ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"patientUniqueId",className:`form-control ${Z.patientUniqueId?"is-invalid":""}`,placeholder:l("Enter Patient Unique ID","kivicare-clinic-management-system"),...re("patientUniqueId"),disabled:t&&k}),Z.patientUniqueId&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.patientUniqueId.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${Z.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...re("firstName",H.firstName),disabled:t&&k}),Z.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${Z.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...re("lastName",H.lastName),disabled:t&&k}),Z.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.lastName.message})]})}),I&&d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinics","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:L,rules:H.clinic,render:({field:oe})=>i.jsx(i.Fragment,{children:i.jsx(yn,{id:"clinic",loadOptions:_,value:oe.value,onChange:ye=>{oe.onChange(ye)},isMulti:!0,closeMenuOnSelect:!1,placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${Z.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t&&k,dependencies:{},getOptionValue:ye=>ye?.value??ye?.id,getOptionLabel:ye=>ye?.label??ye?.name??ye?.clinic_name})})}),Z.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${Z.email?"is-invalid":""}`,placeholder:l('eg "markavenue@gmail.com"',"kivicare-clinic-management-system"),...re("email",H.email),disabled:t&&k}),Z.email&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.email.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"contactNumber",control:L,rules:H.contactNumber,render:({field:oe})=>i.jsx(Jl,{defaultCountry:p,value:oe.value,onChange:oe.onChange,inputProps:{className:`form-control ${Z.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),disabled:t&&k}})}),Z.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[l("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"dob",control:L,rules:H.dob,render:({field:oe})=>i.jsx(si,{id:"dob",className:`form-control ${Z.dob?"is-invalid":""}`,value:oe.value?ii(oe.value):"",onChange:ye=>{if(ye&&ye[0]){const me=ye[0],xe=`${me.getFullYear()}-${String(me.getMonth()+1).padStart(2,"0")}-${String(me.getDate()).padStart(2,"0")}`;oe.onChange(xe)}else oe.onChange("")},options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:ai()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&k})}),Z.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:L,rules:H.status,render:({field:oe})=>i.jsx(ot,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:ie,value:oe.value,onChange:oe.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:ye=>({...ye,zIndex:9999})}})}),Z.status&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"bloodGroup",className:"form-label",children:l("Blood Group","kivicare-clinic-management-system")}),i.jsx(je,{name:"bloodGroup",control:L,rules:H.bloodGroup,render:({field:oe})=>i.jsx(ot,{id:"bloodGroup",className:"react-select-box",classNamePrefix:"react-select",options:R,value:oe.value,onChange:oe.onChange,placeholder:l("Select Blood Group","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:ye=>({...ye,zIndex:9999})},isDisabled:t&&k})}),Z.bloodGroup&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.bloodGroup.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${Z.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...re("gender",H.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${Z.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...re("gender",H.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),h&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${Z.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...re("gender",H.gender),disabled:t&&k}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),Z.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.gender.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Other Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${Z.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...re("address",H.address),disabled:t&&k}),Z.address&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${Z.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...re("city",H.city),disabled:t&&k}),Z.city&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${Z.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...re("country",H.country),disabled:t&&k}),Z.country&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${Z.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...re("postalCode",H.postalCode),onInput:oe=>{oe.target.value=oe.target.value.replace(/[^0-9]/g,"")},disabled:t&&k}),Z.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:Z.postalCode.message})]})})]})]})]})}),i.jsx(tf,{moduleType:"patient_module",control:L,errors:Z,setValue:V,watch:Q}),I&&D.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Information","kivicare-clinic-management-system")}),D.map(oe=>i.jsx(mt,{className:"mb-4",children:i.jsxs(Ra,{children:[i.jsx("h6",{className:"mb-3",children:oe.name?.text||oe.name}),i.jsx("div",{id:`custom-form-${oe.id}`,children:i.jsx(Oa,{ref:ye=>O.current[oe.id]=ye,fields:oe.fields,data:oe.form_data||{},readOnly:!1,formId:`form_${oe.id}`})})]})},oe.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[M&&i.jsx(Gn,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:le||t&&k}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:le||t&&k,children:le?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Patient","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})})]})}const yte=Object.freeze(Object.defineProperty({__proto__:null,default:eg},Symbol.toStringTag,{value:"Module"})),bte=()=>i.jsx(eg,{isEditing:!0,isProfile:!0,hideBreadcrumbs:!0}),wte=()=>{const{patientProfileId:t}=Wt();return i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0})},kte=()=>{const{patientProfileId:t}=Wt();return i.jsx(Cy,{hideBreadcrumbs:!0,patientId:t})},jte=()=>{const{patientProfileId:t}=Wt();return i.jsx(Jp,{isEditing:!1,hideBreadcrumbs:!0,patientId:t})},Nte=()=>{const{patientProfileId:t}=Wt();return i.jsx(Jp,{isEditing:!0,hideBreadcrumbs:!0,patientId:t})},Cte=()=>{const{patientProfileId:t}=Wt();return i.jsx(XR,{readOnly:!0,hideBreadcrumbs:!0,patientId:t})},Ste=[Vn({path:"/patient",title:"Patients",outlet:gte,permissions:["patient_list"],meta:{description:"Patient management system",icon:"users"},children:[We({path:"",component:xte,title:"All Patients",index:!0,permissions:["patient_list"],meta:{description:"List of all patients",breadcrumb:"All Patients"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:eg,title:"Add Patient",props:{isEditing:!1},permissions:["patient_add"],meta:{description:"Create a new patient",breadcrumb:"Add New"},skeleton:Ry}),We({path:"edit/:patientProfileId",component:eg,title:"Edit Patient",props:{isEditing:!0},permissions:["patient_edit"],meta:{description:"Edit existing patient",breadcrumb:"Edit"},skeleton:Ry}),Vn({path:"profile/:patientProfileId",outlet:vte,title:"Patient Profile",permissions:["patient_view","patient_profile"],meta:{description:"View patient profile and details",breadcrumb:"Profile"},children:[We({path:"",component:bte,title:"Patient Profile",index:!0,permissions:["patient_view","patient_profile"],meta:{description:"Patient profile overview",breadcrumb:"Profile"},skeleton:cP}),We({path:"reports",component:wte,title:"Patient Reports",permissions:["patient_view"],addons:["kiviPro"],meta:{description:"Patient medical reports",breadcrumb:"Reports"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:3,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments",component:kte,title:"Patient Appointments",permissions:["appointment_list"],meta:{description:"Patient appointments list",breadcrumb:"Appointments"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments/add",component:jte,title:"Add Appointment",permissions:["appointment_add"],meta:{description:"Create a new appointment for patient",breadcrumb:"Add Appointment"}}),We({path:"appointments/edit/:id",component:Nte,title:"Edit Appointment",permissions:["appointment_edit"],meta:{description:"Edit patient appointment",breadcrumb:"Edit Appointment"}}),We({path:"appointments/view/:id",component:Cte,title:"View Appointment",permissions:["appointment_view"],meta:{description:"View patient appointment details",breadcrumb:"View Appointment"}})]})]})],_te=()=>{const t=Hn();return i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/patient-medical-report_id"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Uc,{})]})},xC=({patientId:t=!1})=>{const e=Wt(),n=ls(),{currentuserID:s}=ht();return n?t=s:!t&&e&&e.patientId&&(t=e.patientId),i.jsx(i.Fragment,{children:i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0,showViewReport:!0})})},Ete=[Vn({path:"/patient-medical-report_id",title:"Patient Medical Reports",outlet:_te,permissions:["patient_report"],meta:{description:"Patient medical reports",icon:"ph ph-file",showInSidebar:!0},children:[We({path:"",component:xC,title:"All Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports",breadcrumb:"All Patient Reports"}}),We({path:"patient/:patientId",component:xC,title:"Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports for patient",breadcrumb:"Patient Reports"}})]})],Tte=()=>{const t=Hn();return i.jsxs("div",{className:"doctors-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/doctor"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Py=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(fl,{titleWidth:"120px"}),i.jsx("div",{className:"d-flex gap-4",children:i.jsxs("div",{className:"kc-doctor-profile flex-fill",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"100px"})})]})})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"55px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})]})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"110px",height:"38px"})]})]})})]})})})}),tg=()=>i.jsxs("div",{className:"doctor-session-module",children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-4"}),i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})})})}),i.jsx("div",{className:"mb-3",children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsxs("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:[i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"80px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"90px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"85px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"75px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})})]}),i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx(nt,{width:"80px",height:"38px",className:"me-3"}),i.jsx(nt,{width:"120px",height:"38px"})]})]}),ng=()=>i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"55px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"200px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"110px",height:"38px"})]})]}),Ate=({reviewCount:t=2})=>i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsx(C,{width:"140px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"position-relative",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"card mb-3 border-0 shadow-sm",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((s,a)=>i.jsx(C,{width:"1rem",height:"1rem"},a))}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsx(C,{width:"80px",height:"0.875rem"})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"70%",height:"1rem"})]})},n))}),i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((e,n)=>i.jsx(C,{width:"2.5rem",height:"2.5rem",style:{borderRadius:"4px"}},n))})})]}),Dte=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+l(" years ago","kivicare-clinic-management-system"):n===1?l("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+l(" months ago","kivicare-clinic-management-system"):n===1?l("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+l(" days ago","kivicare-clinic-management-system"):n===1?l("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+l(" hours ago","kivicare-clinic-management-system"):n===1?l("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+l(" minutes ago","kivicare-clinic-management-system"):n===1?l("1 minute ago","kivicare-clinic-management-system"):e<10?l("just now","kivicare-clinic-management-system"):Math.floor(e)+l(" seconds ago","kivicare-clinic-management-system")))))},Rte=He.memo(({show:t,onHide:e,doctorId:n})=>{const[s,a]=f.useState("date"),[r,o]=f.useState(1),{data:c,isLoading:d,isFetching:m}=GR({doctor_id:n,page:r,per_page:10,sort_by:s},{enabled:t&&!!n,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1});f.useEffect(()=>{o(1)},[s,n]);const u=c?.data?.reviews||[],p=c?.data?.pagination||{},h=c?.data?.doctor_data,g=parseFloat(c?.data?.avg_rating||0),x=parseInt(c?.data?.total_reviews||0),v=f.useCallback(S=>{s!==S&&(a(S),o(1))},[s]),y=f.useCallback(S=>{o(S)},[]),b=f.useCallback(S=>[...Array(5)].map((N,_)=>i.jsx("i",{className:`${_<S?"ph-fill ph-star text-warning":"ph ph-star text-muted"} fs-4`},_)),[]),j=f.useMemo(()=>i.jsxs("div",{className:"review-header d-flex gap-4 align-items-start mb-4 justify-content-between",children:[i.jsx("div",{className:"doctor-profile",children:i.jsx(Zt,{profileUrl:h?.profileImage,name:h?.name,email:h?.email,variant:"info",size:"lg"})}),i.jsx("div",{className:"rating-summary",children:x>0?i.jsxs("div",{className:"d-flex align-items-center gap-3 mb-3",children:[i.jsx("h2",{className:"mb-0",children:g.toFixed(1)}),i.jsxs("div",{children:[b(Math.round(g)),i.jsxs("div",{className:"text-muted",children:[l("Based on","kivicare-clinic-management-system")," ",x," ",l("reviews","kivicare-clinic-management-system")]})]})]}):i.jsx("div",{className:"text-muted",children:l("No average review found.","kivicare-clinic-management-system")})})]}),[h,g,x,b]),k=f.useMemo(()=>d&&!c?i.jsx(Ate,{}):!d&&u.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("i",{className:"ph ph-chat-centered-text fs-1 text-muted mb-3 d-block"}),i.jsx("p",{className:"text-muted",children:l("No reviews found","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h5",{className:"mb-0",children:[l("Reviews","kivicare-clinic-management-system")," (",x||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:s,onChange:S=>v(S.target.value),children:[i.jsx("option",{value:"date",children:l("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:l("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:l("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:`${m?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:u.map(S=>i.jsx(mt,{className:"mb-3 border-0 shadow-sm",children:i.jsxs(mt.Body,{className:"p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{children:b(S.rating)}),i.jsxs("small",{className:"text-muted",children:[l("by","kivicare-clinic-management-system")," ",i.jsx("strong",{children:S.patient_name})]})]}),i.jsx("small",{className:"text-muted",children:Dte(S.created_at)})]}),S.review_text&&i.jsx("p",{className:"mb-0 text-dark",children:S.review_text})]})},S.id))}),m&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx(Cg,{animation:"border",variant:"secondary",size:"sm"})})]}),p?.total_pages>1&&i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsxs(El,{size:"sm",children:[i.jsx(El.First,{onClick:()=>y(1),disabled:r===1}),i.jsx(El.Prev,{onClick:()=>y(r-1),disabled:r===1}),[...Array(p.total_pages)].map((S,N)=>{const _=N+1;return _===1||_===p.total_pages||_>=r-1&&_<=r+1?i.jsx(El.Item,{active:_===r,onClick:()=>y(_),children:_},_):_===r-2||_===r+2?i.jsx(El.Ellipsis,{},_):null}),i.jsx(El.Next,{onClick:()=>y(r+1),disabled:r===p.total_pages}),i.jsx(El.Last,{onClick:()=>y(p.total_pages),disabled:r===p.total_pages})]})})]}),[d,m,u,s,x,p,r,v,y,b,c]);return i.jsxs(st,{show:t,onHide:e,size:"lg",backdrop:"static",centered:!0,children:[i.jsxs(st.Header,{children:[i.jsx(st.Title,{children:l("Doctor Reviews","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(st.Body,{className:"p-4",children:[j,k]})]})}),Pte=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(null),[a,r]=f.useState([]),[o,c]=f.useState([]),[d,m]=f.useState(!1),u=f.useRef(null),p=Kn(),h=mi(),g={page:1,perPage:10,search:"",date:"",clinic:"",specialization:"",status:"",orderBy:"",order:""},[x,v]=f.useState(g),[y,b]=f.useState(""),{isAddonActive:j,hasCapability:k,userRole:S,defaultClinicId:N}=ht(),_=Dee(),w=Ree(),T=Mee(),A=Iee(),M=Oee(),E=Pee(),P=j("kiviPro"),{data:D,isLoading:O}=Ma("specialization");f.useMemo(()=>D?.data?D.data.map(Ae=>{let $e="";return typeof Ae=="string"?$e=Ae:typeof Ae=="object"&&Ae!==null&&($e=Ae.label||Ae.name||""),{value:$e,label:$e}}):[],[D]);const F=qa(y,500);He.useEffect(()=>{v(Ae=>({...Ae,search:F,page:1}))},[F]);const q=Ae=>{if(Ae.length>0){const{id:$e,desc:Je}=Ae[0],et={id:"id",name:"name",status:"status"};v(Me=>({...Me,orderby:et[$e]||$e,order:Je?"desc":"asc",page:1}))}else v($e=>({...$e,orderby:"",order:"",page:1}))},U=ze(),K=async({page:Ae,per_page:$e,search:Je})=>{try{const et={dataType:"clinicList",page:Ae,per_page:$e,search:Je},Me=await U.fetchQuery({queryKey:vt.list(et),queryFn:()=>Bt.getStaticData(et),staleTime:300*1e3}),ge=Me.data.map(Ne=>({value:Ne.id,label:Ne.label||Ne.name}));return r(Ne=>[...Ne,...ge]),Me}catch(et){return console.error("Error loading clinics:",et),{data:[],pagination:{has_more:!1}}}},ne=f.useMemo(()=>{const Ae=Object.fromEntries(Object.entries(x).filter(([$e,Je])=>Je!==""&&Je!==null&&Je!==void 0));return S==="clinic_admin"&&N&&!Ae.clinic&&!Ae.id&&(Ae.clinic=N),Ae},[x,S,N]),{data:Y,isLoading:fe,error:le,refetch:W}=_k(ne),z=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],ie=Y?.data?.doctors||[],re=Y?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},de=async({page:Ae,per_page:$e,search:Je})=>{try{const et={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:Ae,per_page:$e,search:Je},Me=await U.fetchQuery({queryKey:vt.list(et),queryFn:()=>Bt.getStaticData(et),staleTime:300*1e3}),ge=Me.data.map(Ne=>({value:Ne.id,label:Ne.label||Ne.name}));return c(Ne=>[...Ne,...ge]),Me.data.map(Ne=>{let qe="",at="";return typeof Ne=="string"?(qe=Ne,at=Ne):typeof Ne=="object"&&Ne!==null&&(qe=Ne.label||Ne.name||"",at=Ne.id??Ne.name??qe),{value:at,label:qe}})}catch(et){return console.error("Error loading Specialties:",et),{data:[],pagination:{has_more:!1}}}},L=In(),Q=f.useMemo(()=>[L.accessor("id",{id:"id",enableSorting:!0,header:()=>l("ID","kivicare-clinic-management-system"),cell:Ae=>i.jsx("div",{className:"font-weight-medium",children:Ae.getValue()})}),L.accessor("name",{id:"name",enableSorting:!0,header:()=>l("Doctor","kivicare-clinic-management-system"),cell:Ae=>i.jsx(Zt,{profileUrl:Ae.row.original.doctor_image_url,name:Ae.row.original.name,email:Ae.row.original.email||"",fallbackText:"DR",variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system")})}),...P&&!p&&!h?[L.accessor("clinicNameArray",{id:"clinic_name",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!1,cell:Ae=>{const $e=Ae.row.original.clinics||[];return i.jsx("div",{children:$e.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[$e.slice(0,2).map((Je,et)=>i.jsx(Xp,{trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:Je.clinic_name}),children:i.jsx(Tm,{avatar:Je.clinic_image_url,name:Je.clinic_name,email:Je.clinic_email,phone:Je.clinic_contact_number,address:Je.clinic_address,fallbackIcon:"ph-hospital"})},et)),$e.length>2&&i.jsx(Xp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",$e.length-2]}),children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:l("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:$e.slice(2).map((Je,et)=>i.jsx("div",{className:et!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:Je.clinic_image_url,name:Je.clinic_name,email:Je.clinic_email,phone:Je.clinic_contact_number,address:Je.clinic_address,fallbackIcon:"ph-hospital"})},et))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})}})]:[],L.accessor("mobile_number",{id:"mobile_number",header:()=>l("Mobile Number","kivicare-clinic-management-system"),cell:Ae=>i.jsx("div",{children:i.jsx("span",{children:Ae.row.original.mobile_number||""})})}),L.accessor("specialization",{id:"specialization",enableSorting:!1,header:()=>l("Specialization","kivicare-clinic-management-system"),cell:Ae=>{const $e=Ae.row.original.specialties||[];return i.jsx("div",{children:$e.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[$e.slice(0,2).map((Je,et)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:Je.label},et)),$e.length>2&&i.jsx(Qe,{placement:"top",overlay:Je=>i.jsx(ut,{id:`tooltip-specialization-${Ae.row.original.id}`,...Je,children:$e.slice(2).map(et=>et.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",$e.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),L.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:Ae=>{const $e=Number(Ae.getValue()),Je=Ae.row.original,et=()=>{const Me=$e===1?0:1;bt({title:l("Update Status?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),Je.name,Me===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(ge=>{ge.isConfirmed&&(yt({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),A.mutate({ids:[Je.id],status:Me},{onSuccess:()=>{St({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Doctor status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ne=>{rt({title:l("Error","kivicare-clinic-management-system"),text:Ne.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return k("doctor_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`doctor-status-${Je.id}`,checked:$e===0,onChange:et}),i.jsx("label",{className:"form-check-label",htmlFor:`doctor-status-${Je.id}`,children:i.jsx("span",{className:`badge ${$e===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:$e===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${$e===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:$e===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),...k("doctor_edit")||k("patient_review_get")||k("doctor_resend_credential")||k("doctor_session")||k("doctor_service")||k("doctor_delete")?[L.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Ae=>{const $e=Je=>et=>i.jsx(ut,{id:`tooltip-${Ae.cell.row.original.id}-${Je}`,...et,children:Je});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[k("doctor_edit")&&i.jsx(Qe,{placement:"top",overlay:$e(l("Edit Doctor","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/doctor/edit/${Ae.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),k("patient_review_get")&&i.jsx(Qe,{placement:"top",overlay:$e(l("View Reviews","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>{s(Ae.cell.row.original.id),e(!0)},children:i.jsx("i",{className:"ph ph-star"})})}),k("doctor_edit")&&i.jsx(Qe,{placement:"top",overlay:$e(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>Z(Ae.cell.row.original.id,Ae.cell.row.original.name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),k("doctor_session")&&i.jsx(Qe,{placement:"top",overlay:$e(l("View Doctor Sessions","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/doctor/${Ae.cell.row.original.id}/sessions`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar-plus"})})}),k("doctor_service")&&i.jsx(Qe,{placement:"top",overlay:$e(l("Add Service","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/doctor/${Ae.cell.row.original.id}/add-service`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-plus-square"})})}),k("doctor_delete")&&i.jsx(Qe,{placement:"top",overlay:$e(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>V(Ae.cell.row.original.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[k]),V=Ae=>{bt({title:l("Delete Doctor?","kivicare-clinic-management-system"),text:l("You're about to delete this doctor.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep doctor","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then($e=>{$e.isConfirmed&&(yt({title:l("Deleting Doctor...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected doctor.<br>This won't take long.","kivicare-clinic-management-system")}),_.mutate(Ae,{onSuccess:()=>{St({title:l("Doctor Deleted","kivicare-clinic-management-system"),text:l("Doctor has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to doctors","kivicare-clinic-management-system")})},onError:Je=>{rt({title:l("Error!","kivicare-clinic-management-system"),text:Je.message||l("Failed to delete doctor.","kivicare-clinic-management-system")})}}))})},Z=(Ae,$e)=>{bt({title:l("Resend Credentials?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),$e),icon:"ph-question",confirmButtonText:l("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Je=>{Je.isConfirmed&&E.mutate(Ae,{onSuccess:()=>{St({title:l("Credentials Sent!","kivicare-clinic-management-system"),text:l("Doctor credentials have been resent successfully.","kivicare-clinic-management-system")})},onError:et=>{rt({title:l("Error!","kivicare-clinic-management-system"),text:et.message||l("Failed to resend credentials.","kivicare-clinic-management-system")})}})})},X=Ae=>{b(Ae.target.value)},R=()=>{v(g),r([]),c([]),b("")},G=f.useMemo(()=>["search","id","doctorName","clinic","specialization","doctorAddress","status"].some($e=>{const Je=x[$e];return Je!=null&&Je!==""})||y!=="",[x,y]),ee=async Ae=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const $e={format:Ae};x.search&&($e.search=x.search),x.clinic&&($e.clinic_id=x.clinic),x.status!==""&&x.status!==null&&x.status!==void 0&&($e.status=x.status);const Je=await M.mutateAsync($e);if(Je?.data?.doctors){const et=new Date().toISOString().split("T")[0],Me=Je.data.doctors.map(ge=>({id:ge.id,name:ge.name,clinic_name:ge.clinic_name||"",clinic_id:ge.clinic_id||"",email:ge.email,mobile_number:ge.mobile_number,gender:ge.gender,dob:ge.dob,specialties:ge.specialties,status:ge.user_status,full_address:ge.full_address}));switch(Ae){case"csv":cs(Me,`doctors-${et}.csv`);break;case"xls":ds(Me,`doctors-${et}.xls`);break;case"pdf":ms(Me,`doctors-${et}.pdf`,"Doctors List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}}catch($e){console.error("Export error:",$e),rt({title:l("Error!","kivicare-clinic-management-system"),text:$e.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system")})}},ae=()=>ee("csv"),I=()=>ee("xls"),[H,B]=f.useState(!1),te=()=>{H||(B(!0),ee("pdf"),setTimeout(()=>B(!1),2e3))},[oe,ye]=f.useState(!1),[me,xe]=f.useState(!1),Ce=Ae=>{v({...x,...Ae,page:1}),ye(!1)},he=async Ae=>({success:!0}),_e=()=>{W()},Ke=[{type:"number",name:"id",label:l("Doctor ID","kivicare-clinic-management-system"),placeholder:l("Enter Doctor ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...P&&!p&&!h?[{type:"paginatedSelect",name:"clinic",label:l("clinic_id","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:K,options:a,key:"clinic-filter"}]:[],{type:"paginatedSelect",name:"specialization",label:l("Specialization","kivicare-clinic-management-system"),placeholder:l("Select Specialization","kivicare-clinic-management-system"),options:o,optionLoader:de,isSearchable:!0},{type:"text",name:"doctorAddress",label:l("Doctor Address","kivicare-clinic-management-system"),placeholder:l("Search by address, city, or state","kivicare-clinic-management-system")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select status","kivicare-clinic-management-system"),options:z}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Doctors","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[k("doctor_add")&&i.jsxs(gt,{to:"/doctor/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Doctor","kivicare-clinic-management-system")})]}),P&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>xe(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>ye(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[P&&!p&&!h&&i.jsx(i.Fragment,{children:i.jsx(yn,{id:"clinic-filter",placeholder:l("Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:K,value:a.find(Ae=>Ae.value===x.clinic_id)||null,onChange:Ae=>{v($e=>({...$e,clinic_id:Ae?Ae.value:""}))},dependencies:{},isClearable:!0})}),i.jsx(yn,{id:"specialties-selection",placeholder:l("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:de,value:o.find(Ae=>Ae.label===x.specialization)||null,onChange:Ae=>v($e=>({...$e,specialization:Ae?Ae.label:""})),isClearable:!0}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:z,onChange:Ae=>v($e=>({...$e,status:Ae?Ae.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Ae=>({...Ae,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:y,onChange:X})]})}),k("doctor_export")&&P&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ae,disabled:M.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:I,disabled:M.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:te,disabled:M.isPending||H,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:ie,columns:Q,isLoading:fe,error:le,currentPage:re.currentPage,perPage:re.perPage,totalItems:re.total,lastPage:re.lastPage,moduleNamePlural:"doctors",onPageChange:Ae=>v($e=>({...$e,page:Ae})),onPerPageChange:Ae=>v($e=>({...$e,perPage:Ae,page:1})),onSortingChange:q,manualSorting:!0,enableSelection:!0,bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(Ae,$e)=>{const Je=Ae.map(et=>et.id);bt({title:l("Delete Doctors?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${Ae.length} doctors</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep doctors","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",reverseButtons:!0}).then(et=>{et.isConfirmed&&(yt({title:l("Deleting Doctors...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected doctors.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(Je,{onSuccess:Me=>{St({title:l("Doctor Deleted","kivicare-clinic-management-system"),text:l(`${Ae.length} doctor${Ae.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to doctors","kivicare-clinic-management-system")}),$e()},onError:Me=>{console.error("Bulk delete doctors error:",Me);const ge=Me?.response?.data?.message||Me?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:ge})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(Ae,$e)=>{const Je=Ae.map(et=>et.id);bt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected Doctors?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(et=>{et.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),T.mutate(Je,{onSuccess:Me=>{St({text:Me?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system")}),$e()},onError:Me=>{console.error("Bulk resend credentials error:",Me);const ge=Me?.response?.data?.message||Me?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:ge})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(Ae,$e)=>{const Je=Ae.map(et=>et.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Doctors to active?","kivicare-clinic-management-system"),icon:"ph-question",showCancelButton:!0,confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(et=>{et.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:Je,status:"0"},{onSuccess:Me=>{St({text:Me?.message||l("Doctors status has been updated successfully.","kivicare-clinic-management-system")}),$e()},onError:Me=>{console.error("Bulk update status error:",Me);const ge=Me?.response?.data?.message||Me?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({text:ge})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(Ae,$e)=>{const Je=Ae.map(et=>et.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected doctors to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(et=>{et.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:Je,status:"1"},{onSuccess:Me=>{St({title:l("Success","kivicare-clinic-management-system"),text:Me?.message||l("Doctors status has been updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}),$e()},onError:Me=>{console.error("Bulk update status error:",Me);const ge=Me?.response?.data?.message||Me?.message||l("Failed to update Doctor status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:ge,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Ae=>{m(Ae)}})]}),i.jsx(ha,{show:oe,onHide:()=>ye(!1),queryParams:x,onApplyFilters:Ce,onResetFilters:R,title:l("Filters","kivicare-clinic-management-system"),fields:Ke,hasAppliedFilters:G}),P&&i.jsx(Ar,{show:me,onHide:()=>xe(!1),onImport:he,onReopenImport:()=>xe(!0),onDataRefresh:_e,context:"doctors"}),i.jsx(Rte,{show:t,onHide:()=>{e(!1),s(null)},doctorId:n})]})};function uo(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}uo.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};uo.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};uo.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Ek(t,e,n,s){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=s}Ek.prototype.length=function(){for(var t=10,e=0,n=void 0,s=void 0,a=0;a<=t;a+=1){var r=a/t,o=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=o-n,m=c-s;e+=Math.sqrt(d*d+m*m)}n=o,s=c}return e};Ek.prototype._point=function(t,e,n,s,a){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*s*(1-t)*t*t+a*t*t*t};function Mte(t,e,n){var s,a,r,o=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:Date.now(),o=null,r=t.apply(s,a),o||(s=a=null)};return function(){var m=Date.now();!c&&n.leading===!1&&(c=m);var u=e-(m-c);return s=this,a=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),c=m,r=t.apply(s,a),o||(s=a=null)):!o&&n.trailing!==!1&&(o=setTimeout(d,u)),r}}function En(t,e){var n=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=Mte(En.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=En.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var r=a.changedTouches[0];n._strokeBegin(r)}},this._handleTouchMove=function(a){a.preventDefault();var r=a.targetTouches[0];n._strokeMoveUpdate(r)},this._handleTouchEnd=function(a){var r=a.target===n._canvas;r&&(a.preventDefault(),n._strokeEnd(a))},this.on()}En.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};En.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=n.ratio||window.devicePixelRatio||1,r=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),s.src=t,s.onload=function(){e._ctx.drawImage(s,0,0,r,o)},this._isEmpty=!1};En.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[t].concat(s))}};En.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};En.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};En.prototype.isEmpty=function(){return this._isEmpty};En.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};En.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,s=this._createPoint(e,n),a=this._data[this._data.length-1],r=a&&a[a.length-1],o=r&&s.distanceTo(r)<this.minDistance;if(!(r&&o)){var c=this._addPoint(s),d=c.curve,m=c.widths;d&&m&&this._drawCurve(d,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};En.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var s=this._data[this._data.length-1],a=s[s.length-1];n.equals(a)||s.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};En.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};En.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};En.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};En.prototype._createPoint=function(t,e,n){var s=this._canvas.getBoundingClientRect();return new uo(t-s.left,e-s.top,n||new Date().getTime())};En.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=n.c1,r=new Ek(e[1],s,a,e[2]),o=this._calculateCurveWidths(r);return e.shift(),{curve:r,widths:o}}return{}};En.prototype._calculateCurveControlPoints=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,r=e.x-n.x,o=e.y-n.y,c={x:(t.x+e.x)/2,y:(t.y+e.y)/2},d={x:(e.x+n.x)/2,y:(e.y+n.y)/2},m=Math.sqrt(s*s+a*a),u=Math.sqrt(r*r+o*o),p=c.x-d.x,h=c.y-d.y,g=u/(m+u),x={x:d.x+p*g,y:d.y+h*g},v=e.x-x.x,y=e.y-x.y;return{c1:new uo(c.x+v,c.y+y),c2:new uo(d.x+v,d.y+y)}};En.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(a);return s.start=this._lastWidth,s.end=r,this._lastVelocity=a,this._lastWidth=r,s};En.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};En.prototype._drawPoint=function(t,e,n){var s=this._ctx;s.moveTo(t,e),s.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};En.prototype._drawCurve=function(t,e,n){var s=this._ctx,a=n-e,r=Math.floor(t.length());s.beginPath();for(var o=0;o<r;o+=1){var c=o/r,d=c*c,m=d*c,u=1-c,p=u*u,h=p*u,g=h*t.startPoint.x;g+=3*p*c*t.control1.x,g+=3*u*d*t.control2.x,g+=m*t.endPoint.x;var x=h*t.startPoint.y;x+=3*p*c*t.control1.y,x+=3*u*d*t.control2.y,x+=m*t.endPoint.y;var v=e+m*a;this._drawPoint(g,x,v)}s.closePath(),s.fill()};En.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};En.prototype._fromData=function(t,e,n){for(var s=0;s<t.length;s+=1){var a=t[s];if(a.length>1)for(var r=0;r<a.length;r+=1){var o=a[r],c=new uo(o.x,o.y,o.time),d=o.color;if(r===0)this.penColor=d,this._reset(),this._addPoint(c);else if(r!==a.length-1){var m=this._addPoint(c),u=m.curve,p=m.widths;u&&p&&e(u,p,d)}}else{this._reset();var h=a[0];n(h)}}};En.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,r=0,o=n.width/s,c=n.height/s,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",n.width),d.setAttributeNS(null,"height",n.height),this._fromData(e,function(b,j,k){var S=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){var N="M "+b.startPoint.x.toFixed(3)+","+b.startPoint.y.toFixed(3)+" "+("C "+b.control1.x.toFixed(3)+","+b.control1.y.toFixed(3)+" ")+(b.control2.x.toFixed(3)+","+b.control2.y.toFixed(3)+" ")+(b.endPoint.x.toFixed(3)+","+b.endPoint.y.toFixed(3));S.setAttribute("d",N),S.setAttribute("stroke-width",(j.end*2.25).toFixed(3)),S.setAttribute("stroke",k),S.setAttribute("fill","none"),S.setAttribute("stroke-linecap","round"),d.appendChild(S)}},function(b){var j=document.createElement("circle"),k=typeof t.dotSize=="function"?t.dotSize():t.dotSize;j.setAttribute("r",k),j.setAttribute("cx",b.x),j.setAttribute("cy",b.y),j.setAttribute("fill",b.color),d.appendChild(j)});var m="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+r+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",p=d.innerHTML;if(p===void 0){var h=document.createElement("dummy"),g=d.childNodes;h.innerHTML="";for(var x=0;x<g.length;x+=1)h.appendChild(g[x].cloneNode(!0));p=h.innerHTML}var v="</svg>",y=u+p+v;return m+btoa(y)};En.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,s){return e._drawCurve(n,s.start,s.end)},function(n){return e._drawDot(n)}),this._data=t};En.prototype.toData=function(){return this._data};var Yh={exports:{}},Ite=Yh.exports,yC;function Ote(){return yC||(yC=1,(function(t,e){(function(n,s){t.exports=s()})(Ite,function(){return(function(n){function s(r){if(a[r])return a[r].exports;var o=a[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}var a={};return s.m=n,s.c=a,s.p="",s(0)})([function(n,s){function a(m){var u=m.getContext("2d"),p=m.width,h=m.height,g=u.getImageData(0,0,p,h).data,x=c(!0,p,h,g),v=c(!1,p,h,g),y=d(!0,p,h,g),b=d(!1,p,h,g),j=b-y+1,k=v-x+1,S=u.getImageData(y,x,j,k);return m.width=j,m.height=k,u.clearRect(0,0,j,k),u.putImageData(S,0,0),m}function r(m,u,p,h){return{red:h[4*(p*u+m)],green:h[4*(p*u+m)+1],blue:h[4*(p*u+m)+2],alpha:h[4*(p*u+m)+3]}}function o(m,u,p,h){return r(m,u,p,h).alpha}function c(m,u,p,h){for(var g=m?1:-1,x=m?0:p-1,v=x;m?v<p:v>-1;v+=g)for(var y=0;y<u;y++)if(o(y,v,u,h))return v;return null}function d(m,u,p,h){for(var g=m?1:-1,x=m?0:u-1,v=x;m?v<u:v>-1;v+=g)for(var y=0;y<p;y++)if(o(v,y,u,h))return v;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Yh)),Yh.exports}var Lte=Ote();const Fte=ma(Lte);var $te=["canvasProps","clearOnResize"],rf=(function(t){HE(n,t);var e=VE(n);function n(){var s;BE(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return s=e.call.apply(e,[this].concat(r)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(c){s._canvas=c,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var c=s.props;c.canvasProps,c.clearOnResize;var d=ua(c,$te);return d},s.componentDidMount=function(){var c=s.getCanvas();s._sigPad=new En(c,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var c=s.getCanvas(),d=document.createElement("canvas");return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),Fte(d)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var c,d,m=(c=s.props.canvasProps)!==null&&c!==void 0?c:{},u=m.width,p=m.height;if(!(typeof u<"u"&&typeof p<"u")){var h=s.getCanvas(),g=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof u>"u"&&(h.width=h.offsetWidth*g),typeof p>"u"&&(h.height=h.offsetHeight*g),h.getContext("2d").scale(g,g),s.clear()}},s.render=function(){var c=s.props.canvasProps;return He.createElement("canvas",Pt({ref:s.setRef},c))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(c,d){return s.getSignaturePad().fromDataURL(c,d)},s.toDataURL=function(c,d){return s.getSignaturePad().toDataURL(c,d)},s.fromData=function(c){return s.getSignaturePad().fromData(c)},s.toData=function(){return s.getSignaturePad().toData()},s}return qE(n)})(f.Component);rf.propTypes={velocityFilterWeight:De.number,minWidth:De.number,maxWidth:De.number,minDistance:De.number,dotSize:De.oneOfType([De.number,De.func]),penColor:De.string,throttle:De.number,onEnd:De.func,onBegin:De.func,canvasProps:De.object,clearOnResize:De.bool};rf.defaultProps={clearOnResize:!0};rf.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const Bte=t=>{if(!t)return"";const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+l(" years ago","kivicare-clinic-management-system"):n===1?l("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+l(" months ago","kivicare-clinic-management-system"):n===1?l("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+l(" days ago","kivicare-clinic-management-system"):n===1?l("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+l(" hours ago","kivicare-clinic-management-system"):n===1?l("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+l(" minutes ago","kivicare-clinic-management-system"):n===1?l("1 minute ago","kivicare-clinic-management-system"):e<10?l("just now","kivicare-clinic-management-system"):Math.floor(e)+l(" seconds ago","kivicare-clinic-management-system")))))},qte=({filled:t})=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t?"#F59E0B":"#E5E7EB",stroke:t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),dP=({rating:t,size:e="md"})=>{const n={sm:14,md:16,lg:20};return i.jsx("div",{className:"kc-star-rating",children:[...Array(5)].map((s,a)=>i.jsx("svg",{width:n[e],height:n[e],viewBox:"0 0 24 24",fill:a<t?"#F59E0B":"#E5E7EB",stroke:a<t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},a))})},Hte=({distribution:t,totalReviews:e})=>{const n=[5,4,3,2,1];return i.jsx("div",{className:"kc-rating-distribution",children:n.map(s=>{const a=t[s]||0,r=e>0?a/e*100:0;return i.jsxs("div",{className:"kc-distribution-row",children:[i.jsx("span",{className:"kc-rating-number",children:s}),i.jsx(qte,{filled:!0}),i.jsx("div",{className:"kc-bar-track",children:i.jsx("div",{className:"kc-bar-fill",style:{width:`${r}%`}})})]},s)})})},zte=({review:t})=>i.jsxs("div",{className:"kc-review-card",children:[i.jsx("div",{className:"kc-review-avatar",children:i.jsx(Mc,{src:t.profileUrl,alt:t.patientName||l("Patient","kivicare-clinic-management-system"),text:!t.profileUrl&&t.patientName?t.patientName.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"})}),i.jsxs("div",{className:"kc-review-content",children:[i.jsx("h4",{className:"kc-review-name",children:t.patientName}),i.jsxs("div",{className:"kc-review-meta",children:[i.jsx(dP,{rating:t.rating,size:"sm"}),i.jsx("span",{className:"kc-review-separator",children:""}),i.jsx("span",{className:"kc-review-date",children:Bte(t.createdAt)||""})]}),t.reviewText&&i.jsx("p",{className:"kc-review-text",children:t.reviewText})]})]}),Vte=({doctorId:t})=>{const[e,n]=f.useState("date"),[s,a]=f.useState(1),[r,o]=f.useState([]),[c,d]=f.useState(!1),[m,u]=f.useState({5:0,4:0,3:0,2:0,1:0}),[p,h]=f.useState(0),[g,x]=f.useState(0),[v,y]=f.useState(0),b=f.useRef(null),j=5,k={doctor_id:t,page:s,per_page:j,...e?{sort_by:e}:{}},{data:S,isLoading:N,isFetching:_}=GR(k,{enabled:!!t,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),w=T=>{T!==e&&(n(T),a(1))};return f.useEffect(()=>{s===1&&S?.data?.distribution&&(x(S?.data?.avg_rating||0),y(S?.data?.total_reviews||0),u(S.data.distribution),h(v))},[S,s,v]),f.useEffect(()=>{const T=S?.data?.reviews||[],A=S?.data?.pagination||{},M=typeof A.has_more<"u"?!!A.has_more:A.total_pages?A.page<A.total_pages:T.length===j;d(M),s===1?o(T||[]):T&&T.length>0&&o(E=>{const P=new Set(E.map(O=>O.id)),D=[...E];return T.forEach(O=>{P.has(O.id)||(D.push(O),P.add(O.id))}),D})},[S,s]),f.useEffect(()=>{a(1),o([]),d(!1),u({5:0,4:0,3:0,2:0,1:0})},[t]),f.useEffect(()=>{const T=b.current;if(!T)return;let A=!1;const M=()=>{A||(A=!0,requestAnimationFrame(()=>{const{scrollTop:E,scrollHeight:P,clientHeight:D}=T;P-E-D<200&&c&&!_&&a(F=>F+1),A=!1}))};return T.addEventListener("scroll",M),()=>T.removeEventListener("scroll",M)},[c,_]),t?i.jsxs("div",{className:"card kc-reviews-panel",children:[i.jsx("div",{className:"kc-reviews-header",children:i.jsx("h3",{children:l("Reviews","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"kc-reviews-body",children:[i.jsxs("div",{className:"kc-rating-summary form-control",children:[i.jsxs("div",{className:"kc-rating-score",children:[i.jsx("span",{className:"kc-score-number",children:g.toFixed(1)}),i.jsxs("span",{className:"kc-score-label",children:["(",l("Ratings","kivicare-clinic-management-system"),")"]})]}),i.jsx("div",{className:"kc-rating-stars-center",children:i.jsx(dP,{rating:Math.round(g),size:"lg"})}),i.jsxs("p",{className:"kc-reviews-count",children:[v," ",l("reviews","kivicare-clinic-management-system")]}),i.jsx(Hte,{distribution:m,totalReviews:p})]}),i.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[l("Reviews","kivicare-clinic-management-system")," (",v||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:e,onChange:T=>w(T.target.value),children:[i.jsx("option",{value:"date",children:l("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:l("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:l("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{ref:b,className:"kc-reviews-list position-relative",style:{maxHeight:850,overflowY:"auto"},children:[i.jsx("div",{className:`${_?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:N&&r.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("span",{className:"spinner-border  spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Loading...","kivicare-clinic-management-system")]}):r.length===0?i.jsx("div",{className:"text-center py-4 border-start border-end",children:l("No reviews yet","kivicare-clinic-management-system")}):r.map(T=>i.jsx(zte,{review:{id:T.id,patientName:T.patient_name||T.patientName,rating:T.rating||T.rating,reviewText:T.review_text||T.reviewText,createdAt:T.created_at||T.createdAt,profileUrl:T.patient_profile_url||T.patient_profile_url}},T.id))}),_&&r.length>0&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx("div",{className:"spinner-border",role:"status"})}),!c&&r.length>0&&i.jsx("div",{className:"text-center small text-muted py-2",children:l("No more reviews","kivicare-clinic-management-system")})]})]})]}):null};function My({isEditing:t=!1,isProfile:e=!1}){const n=ze(),s=Tee(),a=Aee(),r=dn(),{isAddonActive:o,currentuserID:c,userRole:d,defaultCountryCode:m,showOtherGender:u,defaultClinicId:p}=ht(),{data:h}=Cn();f.useMemo(()=>h?.data?.kc_available_translations,[h]);const g=o("kiviPro"),{id:x}=Wt(),v=p?parseInt(p,10):null,y=zi(),b=Kn(),j=mi(),k=e?c:x,[S,N]=f.useState(!1),_=f.useRef(null),{data:w}=sd({module_type:"doctor_module",status:1,module_id:k},{enabled:o("kiviPro")}),T=w?.data?.forms||[];f.useEffect(()=>{t&&T.length>0&&T.forEach(Te=>{const Fe=Te.form_data;Fe&&A.current[Te.id]&&setTimeout(()=>{const J=A.current[Te.id];J&&J.resetForm&&J.resetForm(Fe)},100)})},[t,T]);const A=f.useRef({}),M=()=>{const Te={};return T.forEach(Fe=>{const J=A.current[Fe.id];J&&(Te[Fe.id]=J.getFormData())}),Te},E=async()=>{const Te={};let Fe=!0,J=null;for(const se of T){const ke=A.current[se.id];if(ke){const Pe=await ke.triggerValidation();Te[se.id]={isValid:Pe.isValid,data:ke.getFormData(),errors:Pe.errors},Pe.isValid||(Fe=!1,J||(J=se.id))}}return{allValid:Fe,formResults:Te,firstInvalidFormId:J}},P=()=>{_.current.clear(),N(!0)},D=()=>{const Te=_.current.toData();Te&&(Te.pop(),_.current.fromData(Te),N(!0))};f.useEffect(()=>{if(_.current){const Te=_.current.getCanvas(),Fe=()=>{N(!0)};return Te.addEventListener("mousedown",Fe),Te.addEventListener("touchstart",Fe),()=>{Te.removeEventListener("mousedown",Fe),Te.removeEventListener("touchstart",Fe)}}},[]);const[O,F]=f.useState({degree:"",university:"",year:""}),[q,U]=f.useState({}),[K,ne]=f.useState(-1),[Y,fe]=f.useState(!1),[le,W]=f.useState(!1),z=le||s.isPending,[ie,re]=f.useState(!1),{data:de,isLoading:L,error:Q}=af(k,{enabled:(t||e)&&!!k}),V=de?.data,Z=Vc.PhoneNumberUtil.getInstance(),X=Te=>{try{return Z.isValidNumber(Z.parseAndKeepRawInput(Te))}catch{return!1}},R=[{value:0,label:l("Active","kivicare-clinic-management-system")},{value:1,label:l("Inactive","kivicare-clinic-management-system")}],{register:G,handleSubmit:ee,control:ae,watch:I,setValue:H,formState:{errors:B},reset:te}=Xt({defaultValues:{doctorImage:"",doctorImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",specialization:[],experience:null,bloodGroup:null,status:R[0],gender:"",signature:"",description:"",address:"",city:"",country:"",postalCode:"",qualifications:[]}}),{fields:oe,append:ye,remove:me,update:xe}=mr({control:ae,name:"qualifications"}),Ce=async({page:Te,per_page:Fe,search:J})=>{try{const se={dataType:"clinicList",page:Te,per_page:Fe,search:J};return await n.fetchQuery({queryKey:vt.list(se),queryFn:()=>Bt.getStaticData(se),staleTime:300*1e3})}catch(se){return console.error("Error loading clinics:",se),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},{data:he,isLoading:_e,refetch:Ke}=Ma("specialization"),Ae=Hg();if(f.useEffect(()=>{if((t||e)&&V&&!L){const Te={firstName:V.first_name||"",lastName:V.last_name||"",email:V.email||"",contactNumber:V.contact_number||"",dob:V.dob||"",gender:V.gender||"",status:R.find(Fe=>Fe.value===parseInt(V.status))||R[0],clinic:Array.isArray(V?.clinics)?V.clinics.map(Fe=>{const J=Fe.id??Fe.clinic_id??Fe.value,se=parseInt(J,10);return{...Fe,id:se,value:se,label:Fe.name||Fe.clinic_name||Fe.label}}):null,specialization:Array.isArray(V?.specialties)?V.specialties.map(Fe=>{let J=parseInt(Fe.id??Fe.value,10);if(isNaN(J)&&he?.data){const se=he.data.find(ke=>ke.label===Fe.label);se&&(J=parseInt(se.id,10))}return{id:J,value:J,label:Fe.label}}):[],doctorImage:V.doctor_image_url||"",doctorImageId:V.doctor_image_id||"",experience:V.no_of_experience||"",address:V.address||"",city:V.city||"",country:V.country||"",postalCode:V.postal_code||"",qualifications:Array.isArray(V.qualifications)?V.qualifications.map(Fe=>({degree:Fe.degree||"",university:Fe.university||"",year:Fe.year||"",file:Fe.file||""})):[],description:V.doctor_description||""};te(Te),V.customFields&&typeof V.customFields=="object"&&Object.entries(V.customFields).forEach(([Fe,J])=>{H(`custom_field_${Fe}`,J)}),V.doctor_signature&&_.current&&!S&&setTimeout(()=>{_?.current?.fromDataURL(V.doctor_signature)},100),setTimeout(()=>{H("contactNumber",V.contact_number||"")},0)}},[t,e,V,he]),f.useEffect(()=>{if(Q){const Te=Q?.response?.data?.message||l("You do not have permission to view this doctor.","kivicare-clinic-management-system");Ee.error(Te,{position:"top-right",autoClose:5e3}),r("/doctor",{replace:!0})}},[Q,r]),(t||e)&&L)return i.jsx(Py,{});if((t||e)&&Q)return null;const $e=()=>{F({degree:"",university:"",year:""}),ne(-1),fe(!0)},Je=Te=>{const Fe=oe[Te];F({degree:Fe.degree||"",university:Fe.university||"",year:Fe.year||""}),ne(Te),fe(!0)},et=Te=>{const{name:Fe,value:J}=Te.target;F(se=>({...se,[Fe]:J})),q[Fe]&&U(se=>({...se,[Fe]:""}))},Me=()=>{const Te={};if(O.degree.trim()||(Te.degree=l("Degree is required","kivicare-clinic-management-system")),O.university.trim()||(Te.university=l("University is required","kivicare-clinic-management-system")),!O.year)Te.year=l("Year is required","kivicare-clinic-management-system");else{const Fe=new Date().getFullYear(),J=parseInt(O.year);(J<1950||J>Fe)&&(Te.year=l(`Year must be between 1950 and ${Fe}`,"kivicare-clinic-management-system"))}if(Object.keys(Te).length>0){U(Te);return}U({}),K>=0?(Ee.success(l("Qualification updated successfully","kivicare-clinic-management-system")),xe(K,O)):(Ee.success(l("Qualification added successfully","kivicare-clinic-management-system")),ye(O)),F({degree:"",university:"",year:""}),fe(!1),ne(-1)},ge=()=>{F({degree:"",university:"",year:""}),U({}),fe(!1),ne(-1)},Ne={control:(Te,Fe)=>({...Te,borderColor:Fe.isFocused?"#86b7fe":"#dee2e6",boxShadow:Fe.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null,"&:hover":{borderColor:Fe.isFocused?"#86b7fe":"#dee2e6"},minHeight:"38px",fontSize:"1rem"}),placeholder:Te=>({...Te,color:"#6c757d"}),singleValue:Te=>({...Te,color:"#495057"})},qe=Te=>({...Ne,control:(Fe,J)=>({...Ne.control(Fe,J),borderColor:Te?"#dc3545":J.isFocused?"#86b7fe":"#dee2e6",boxShadow:Te?"0 0 0 0.25rem rgba(220, 53, 69, 0.25)":J.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null})}),at=(Te,Fe)=>{H(Te,Fe.url||Fe.image),H(`${Te}Id`,Fe.id||Fe.imageId)},Kt=async Te=>{if(W(!0),T.length>0&&!(await E()).allValid){Ee.error(l("Please fix errors in the custom information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),W(!1);return}let Fe=null;if(_.current&&(S||!t))try{_.current.isEmpty()?Fe="":Fe=_.current.getCanvas().toDataURL("image/png")}catch(se){console.error("Error processing signature:",se)}const J={first_name:Te.firstName,last_name:Te.lastName,email:Te.email,mobile_number:Te.contactNumber,dob:Te.dob,specialties:Array.isArray(Te.specialization)?Te.specialization.map(se=>({id:se.value,label:se.label})):Te.specialization?[{id:Te.specialization.value,label:Te.specialization.label}]:[],experience_years:Te.experience?.value||Te.experience,blood_group:Te.bloodGroup?.value||Te.bloodGroup,status:typeof Te.status=="object"?Te.status?.value:Te.status,gender:Te.gender,signature:Te.signature,description:Te.description,doctor_image_id:Te.doctorImageId??null,address:Te.address,city:Te.city,country:Te.country,postal_code:Te.postalCode,qualifications:Te.qualifications,...S||!t?{doctor_signature:Fe??""}:{},customForm:M(),customFields:Object.keys(Te).reduce((se,ke)=>{if(ke.startsWith("custom_field_")){const Pe=ke.replace("custom_field_","");se[Pe]=Te[ke]}return se},{})};j||b?J.clinic_id=[{id:String(v)}]:Te.clinic&&Array.isArray(Te.clinic)&&Te.clinic.length>0&&(J.clinic_id=Te.clinic.map(se=>({id:String(se.value||se.id)})));try{let se;t||e?(se=await a.mutateAsync({id:k,...J}),Ee.success(l("Doctor updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),e||r("/doctor")):(se=await s.mutateAsync(J),Ee.success(l("Doctor created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),r("/doctor"))}catch(se){console.error("Error saving doctor:",se);const ke=se?.response?.data?.message||(t?l("Failed to update doctor","kivicare-clinic-management-system"):l("Failed to create doctor","kivicare-clinic-management-system"));Ee.error(ke,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{W(!1)}},Gt=Te=>{console.log("Validation errors:",Te);const Fe=Object.keys(Te)[0],J=document.getElementById(Fe);J&&(J.scrollIntoView({behavior:"smooth",block:"center"}),J.focus())},tn=Te=>{me(Te),Ee.success(l("Qualification deleted successfully","kivicare-clinic-management-system"))},Ot={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:!j&&!b?{required:l("Clinic selection is required","kivicare-clinic-management-system")}:{},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:Te=>Te?X(Te)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},dob:{validate:Te=>{if(!Te)return!0;const Fe=new Date(Te);return new Date().getFullYear()-Fe.getFullYear()>=18||l("Doctor must be at least 18 years old","kivicare-clinic-management-system")}},specialization:{required:l("Specialization is required","kivicare-clinic-management-system")},experience:{validate:Te=>{if(!Te)return!0;const Fe=parseFloat(Te);return isNaN(Fe)?l("Please enter a valid number","kivicare-clinic-management-system"):Fe<0?l("Experience cannot be negative","kivicare-clinic-management-system"):Fe>100?l("Experience cannot be more than 100 years","kivicare-clinic-management-system"):!0}},status:{required:l("Status is required","kivicare-clinic-management-system")},gender:{required:l("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},"qualifications.degree":{required:l("Degree is required","kivicare-clinic-management-system")},"qualifications.university":{required:l("College/University is required","kivicare-clinic-management-system")},"qualifications.year":{required:l("Year is required","kivicare-clinic-management-system"),min:{message:l("Year must be 1950 or later","kivicare-clinic-management-system")},max:{value:new Date().getFullYear(),message:l(`Year cannot be later than ${new Date().getFullYear()}`,"kivicare-clinic-management-system")}}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):t?l("Edit Doctor","kivicare-clinic-management-system"):l("Add Doctor","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]}),i.jsxs("div",{className:"d-flex gap-4",children:[i.jsx("div",{className:"kc-doctor-profile",children:i.jsxs("form",{onSubmit:ee(Kt,Gt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:l("Profile Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(je,{name:"doctorImage",control:ae,render:({field:Te})=>i.jsx(hl,{id:"doctor-image-upload",name:"doctorImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:Te.value,defaultImageId:I("doctorImageId"),onChange:Fe=>at("doctorImage",Fe),setValue:H,size:200})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${B.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...G("firstName",Ot.firstName)}),B.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${B.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...G("lastName",Ot.lastName)}),B.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${B.email?"is-invalid":""}`,placeholder:l('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...G("email",Ot.email)}),B.email&&i.jsx("div",{className:"invalid-feedback d-block",children:B.email.message})]})}),g&&!j&&!b&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:ae,rules:Ot.clinic,render:({field:Te})=>i.jsx(yn,{id:"clinic",loadOptions:Ce,value:Te.value,onChange:Fe=>{Te.onChange(Fe)},placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${B.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{},isMulti:!0,getOptionValue:Fe=>Fe?.value??Fe?.id,getOptionLabel:Fe=>Fe?.label??Fe?.name??Fe?.clinic_name})}),B.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:B.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"contactNumber",control:ae,rules:Ot.contactNumber,render:({field:Te})=>i.jsx(Jl,{defaultCountry:m,value:Te.value,onChange:Te.onChange,inputProps:{className:`form-control ${B.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":B.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),B.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:B.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:l("DOB","kivicare-clinic-management-system")}),i.jsx(je,{name:"dob",control:ae,rules:Ot.dob,render:({field:Te})=>i.jsx(si,{id:"dob",className:`form-control ${B.dob?"is-invalid":""}`,value:Te.value?ii(Te.value):"",onChange:Fe=>{if(Fe&&Fe[0]){const J=Fe[0],se=`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`;Te.onChange(se)}else Te.onChange("")},options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:ai()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&L})}),B.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:B.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"specialization",className:"form-label",children:[l("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"specialization",control:ae,rules:Ot.specialization,render:({field:Te})=>i.jsx(ko,{id:"specialization",options:he?.data??[],value:Te.value,onChange:Fe=>{Te.onChange(Fe)},onCreateOption:Fe=>{Ae.mutate(Fe,{onSuccess:J=>{if(J?.data){const se={id:parseInt(J?.data?.data.id,10),value:parseInt(J?.data?.data.id,10),label:J?.data?.data.label};Te.onChange([...Te.value||[],se])}Ee.success(l("Specialization added successfully","kivicare-clinic-management-system"))},onError:J=>{console.error("Failed to save specialization:",J),console.error("Error details:",J.response?.data),Ee.error(l("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Fe=>{const J=Fe.value??Fe.id;return J!=null?String(J):""},getOptionLabel:Fe=>Fe.label,placeholder:l("Select or create specialization","kivicare-clinic-management-system"),isLoading:_e,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1,className:`react-select ${B.specialization?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",noOptionsMessage:()=>l("Type to create a new specialization","kivicare-clinic-management-system"),formatCreateLabel:Fe=>l("Add specialization","kivicare-clinic-management-system")+`: "${Fe}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new specialization","kivicare-clinic-management-system")]}),B.specialization&&i.jsx("div",{className:"invalid-feedback d-block",children:B.specialization.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"experience",className:"form-label",children:l("Experience (In Years)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"experience",className:`form-control ${B.experience?"is-invalid":""}`,placeholder:l("Enter experience","kivicare-clinic-management-system"),...G("experience",Ot.experience),onInput:Te=>{Te.target.value=Te.target.value.replace(/[^0-9]/g,"")}}),B.experience&&i.jsx("div",{className:"invalid-feedback d-block",children:B.experience.message})]})}),!e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:ae,rules:Ot.status,render:({field:Te})=>i.jsx(ot,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:R,value:Te.value,onChange:Te.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{...qe(B.status),menuPortal:Fe=>({...Fe,zIndex:9999})}})}),B.status&&i.jsx("div",{className:"invalid-feedback d-block",children:B.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",style:{cursor:"pointer"},...G("gender",Ot.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",style:{cursor:"pointer"},...G("gender",Ot.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),u&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",style:{cursor:"pointer"},...G("gender",Ot.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),B.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:B.gender.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",className:"form-label h6",children:l("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:"form-control",rows:"2",placeholder:l("Write description","kivicare-clinic-management-system"),...G("description")})]})}),i.jsxs("div",{className:"col-lg-4 col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signature",className:"form-label d-block",children:l("Signature","kivicare-clinic-management-system")}),i.jsx(rf,{ref:_,id:"signatureCanvas",className:"w-100 rounded",canvasProps:{width:500,height:100,className:"sigCanvas"},penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(220,220,220)"})]}),i.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[i.jsx("button",{type:"button",onClick:D,className:"btn btn-secondary",children:l("Undo","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",onClick:P,className:"btn btn-primary",children:l("Clear","kivicare-clinic-management-system")})]})]})]})})]}),i.jsx("div",{className:"row gy-4"})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:l("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${B.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...G("address",Ot.address)}),B.address&&i.jsx("div",{className:"invalid-feedback d-block",children:B.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${B.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...G("city",Ot.city)}),B.city&&i.jsx("div",{className:"invalid-feedback d-block",children:B.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${B.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...G("country",Ot.country)}),B.country&&i.jsx("div",{className:"invalid-feedback d-block",children:B.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${B.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...G("postalCode",Ot.postalCode),onInput:Te=>{Te.target.value=Te.target.value.replace(/[^0-9]/g,"")}}),B.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:B.postalCode.message})]})})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:l("Add Qualification","kivicare-clinic-management-system")}),!Y&&i.jsxs("button",{type:"button",onClick:$e,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Qualification","kivicare-clinic-management-system")})]})]}),Y&&i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-4 bg-body rounded",children:[i.jsx("h6",{children:K>=0?l("Edit Qualification","kivicare-clinic-management-system"):l("Add Qualification","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3 mt-2",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"degree",className:"form-label",children:[l("Degree","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"degree",name:"degree",className:`form-control ${q.degree?"is-invalid":""}`,placeholder:l('eg "Dermatology"',"kivicare-clinic-management-system"),value:O.degree,onChange:et}),q.degree&&i.jsx("div",{className:"invalid-feedback d-block",children:q.degree})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"university",className:"form-label",children:[l("University","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"university",name:"university",className:`form-control ${q.university?"is-invalid":""}`,placeholder:l('eg "I"',"kivicare-clinic-management-system"),value:O.university,onChange:et}),q.university&&i.jsx("div",{className:"invalid-feedback d-block",children:q.university})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"year",className:"form-label",children:[l("Year","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"number",id:"year",name:"year",className:`form-control ${q.year?"is-invalid":""}`,placeholder:l("1999","kivicare-clinic-management-system"),min:"1950",max:new Date().getFullYear(),value:O.year,onChange:et,onInput:Te=>{Te.target.value=Te.target.value.replace(/[^0-9]/g,"")}}),q.year&&i.jsx("div",{className:"invalid-feedback d-block",children:q.year})]})}),i.jsxs("div",{className:"col-12 text-end",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:ge,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:Me,children:l("Save","kivicare-clinic-management-system")})]})]})]})}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",children:l("SR. NO","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Degree","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("College/University","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Year","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:l("Action","kivicare-clinic-management-system")})]})}),i.jsx("tbody",{children:oe.length>0?oe.map((Te,Fe)=>i.jsxs("tr",{children:[i.jsxs("th",{children:[Fe+1,"."]}),i.jsx("td",{children:Te.degree}),i.jsx("td",{children:Te.university}),i.jsx("td",{children:Te.year}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:()=>Je(Fe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-pencil"})})}),i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>tn(Fe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})]})})]},Te.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"text-center py-4 start-border end-border",children:l("No records found","kivicare-clinic-management-system")})})})]})})]})}),i.jsx(tf,{moduleType:"doctor_module",control:ae,errors:B,setValue:H,watch:I}),g&&T.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:l("Custom Form","kivicare-clinic-management-system")}),T.map(Te=>i.jsx(mt,{className:"mb-4",children:i.jsxs(Ra,{children:[i.jsx("h6",{className:"mb-3",children:Te.name?.text||Te.name}),i.jsx("div",{id:`custom-form-${Te.id}`,children:i.jsx(Oa,{ref:Fe=>A.current[Te.id]=Fe,fields:Te.fields,data:Te.form_data||{},readOnly:!1,formId:`form_${Te.id}`})})]})},Te.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Gn,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:z}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:z,children:z?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save Doctor","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"kc-doctor-ratings-reviews",children:y&&(t||e)&&k&&g&&i.jsx(Vte,{doctorId:k})})]})]})}const Ute=Object.freeze(Object.defineProperty({__proto__:null,default:My},Symbol.toStringTag,{value:"Module"})),Ro={getDoctorSessions:(t={})=>pe({endpoint:"doctor-sessions",method:"GET",data:t}),getDoctorSession:t=>pe({endpoint:`doctor-sessions/${t}`,method:"GET"}),createDoctorSession:t=>pe({endpoint:"doctor-sessions",method:"POST",data:t}),updateDoctorSession:(t,e)=>pe({endpoint:`doctor-sessions/${t}`,method:"PUT",data:e}),deleteDoctorSession:t=>pe({endpoint:`doctor-sessions/${t}`,method:"DELETE"}),bulkDeleteDoctorSessions:t=>pe({endpoint:"doctor-sessions/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorSessionStatus:(t,e)=>pe({endpoint:"doctor-sessions/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctorSessions:(t={})=>pe({endpoint:"doctor-sessions/export",method:"GET",data:t})},sa={all:["doctorSessions"],lists:()=>[...sa.all,"list"],list:t=>[...sa.lists(),{filters:t}],details:()=>[...sa.all,"detail"],detail:t=>[...sa.details(),t]},Wte=(t={},e={})=>ft({queryKey:sa.list(t),queryFn:()=>Ro.getDoctorSessions(t),...e}),Kte=(t,e={})=>ft({queryKey:sa.detail(t),queryFn:()=>Ro.getDoctorSession(t),enabled:!!t,...e}),Gte=()=>{const t=ze();return Le({mutationFn:e=>Ro.createDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:sa.lists()})}})},Yte=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Ro.updateDoctorSession(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:sa.detail(n.id)}),t.invalidateQueries({queryKey:sa.lists()})}})},Qte=()=>{const t=ze();return Le({mutationFn:e=>Ro.deleteDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:sa.lists()})}})},Zte=()=>{const t=ze();return Le({mutationFn:e=>Ro.bulkDeleteDoctorSessions(e),onSuccess:()=>{t.invalidateQueries({queryKey:sa.lists()})}})},Xte=()=>Le({mutationFn:t=>Ro.exportDoctorSessions(t)}),fh=[{id:"mon",label:l("Monday","kivicare-clinic-management-system")},{id:"tue",label:l("Tuesday","kivicare-clinic-management-system")},{id:"wed",label:l("Wednesday","kivicare-clinic-management-system")},{id:"thu",label:l("Thursday","kivicare-clinic-management-system")},{id:"fri",label:l("Friday","kivicare-clinic-management-system")},{id:"sat",label:l("Saturday","kivicare-clinic-management-system")},{id:"sun",label:l("Sunday","kivicare-clinic-management-system")}],xn={timeToMinutes:t=>{if(!t)return 0;const[e,n]=t.split(":").map(Number);return e*60+n},minutesToTime:t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},formatTime:t=>{if(!t)return"";try{const[e,n]=t.split(":").map(Number),s=new Date;return s.setHours(e,n,0),s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return t}},isBefore:(t,e)=>xn.timeToMinutes(t)<xn.timeToMinutes(e),isAfter:(t,e)=>xn.timeToMinutes(t)>xn.timeToMinutes(e),doRangesOverlap:(t,e,n,s)=>{const a=xn.timeToMinutes(t),r=xn.timeToMinutes(e),o=xn.timeToMinutes(n),c=xn.timeToMinutes(s);return a<c&&o<r}},Am=({name:t,control:e,rules:n,placeholder:s,error:a,id:r})=>i.jsx(je,{name:t,control:e,rules:n,render:({field:o})=>{let c=Array.isArray(o.value)?o.value[0]:o.value;return c instanceof Date&&(c=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`),i.jsx(si,{value:c,onChange:d=>{if(d&&d.length>0){const m=d[0],u=`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`;o.onChange(u)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:ai()},className:`form-control d-none ${a?"is-invalid":""}`,placeholder:s,id:r||t})}}),Jte=()=>{const{getValues:t}=lb(),e=f.useCallback(r=>o=>o?!0:l("Start time is required","kivicare-clinic-management-system"),[]),n=f.useCallback(r=>o=>{if(!o)return l("End time is required","kivicare-clinic-management-system");const c=t(`days.${r}.mainSession.start`);return c?xn.isAfter(o,c)?xn.timeToMinutes(o)-xn.timeToMinutes(c)<30?l("Session must be at least 30 minutes long","kivicare-clinic-management-system"):!0:l("End time must be after start time","kivicare-clinic-management-system"):!0},[t]),s=f.useCallback((r,o)=>c=>{if(!c)return l("Break start time is required","kivicare-clinic-management-system");const d=t(`days.${r}.mainSession`);if(!d||!d.start||!d.end)return l("Please set main session times first","kivicare-clinic-management-system");if(!xn.isAfter(c,d.start)||!xn.isBefore(c,d.end))return l("Break must be within session hours","kivicare-clinic-management-system");const u=(t(`days.${r}.breaks`)||[]).filter((p,h)=>h!==o);for(let p=0;p<u.length;p++){const h=u[p];if(h.start&&h.end&&xn.timeToMinutes(c)>=xn.timeToMinutes(h.start)&&xn.timeToMinutes(c)<xn.timeToMinutes(h.end))return l("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]),a=f.useCallback((r,o)=>c=>{if(!c)return l("Break end time is required","kivicare-clinic-management-system");const d=t(`days.${r}.mainSession`),m=t(`days.${r}.breaks.${o}.start`);if(!d||!d.start||!d.end)return l("Please set main session times first","kivicare-clinic-management-system");if(!m)return l("Please set break start time first","kivicare-clinic-management-system");if(!xn.isAfter(c,m))return l("Break end time must be after break start time","kivicare-clinic-management-system");if(!xn.isBefore(c,d.end))return l("Break must end before session ends","kivicare-clinic-management-system");if(xn.timeToMinutes(c)-xn.timeToMinutes(m)<15)return l("Break must be at least 15 minutes long","kivicare-clinic-management-system");const h=(t(`days.${r}.breaks`)||[]).filter((g,x)=>x!==o);for(let g=0;g<h.length;g++){const x=h[g];if(x.start&&x.end&&xn.doRangesOverlap(m,c,x.start,x.end))return l("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]);return{validateSessionStart:e,validateSessionEnd:n,validateBreakStart:s,validateBreakEnd:a}};function Dm({isEditing:t=!1,hideDoctorField:e=!1}){const{id:n,doctorId:s}=Wt(),{data:a,isLoading:r}=Kte(n),{data:o}=af(s?parseInt(s):null),{pathname:c}=Hn(),d=c.includes("setting")?"/setting":"",m=dn(),{isAddonActive:u,defaultClinicId:p,currentDoctorId:h,userRole:g}=ht(),{data:x}=Cn(),v=zi(),y=Kn(),b=mi(),j=u("kiviPro"),k=v?h:s?parseInt(s):null,S=Gte(),N=Yte(),_=Xt({defaultValues:{clinic:b||y?{value:p,label:""}:j?null:{value:p,label:""},doctor:null,timeSlot:"00:00",days:fh.map(re=>({id:re.id,enabled:!1,mainSession:{start:"09:00",end:"18:00"},breaks:[]}))},mode:"onChange"}),{control:w,handleSubmit:T,setValue:A,getValues:M,formState:{errors:E,isValid:P}}=_,D=ze(),O=async({page:re,per_page:de,search:L,doctor_id:Q})=>{try{const V={dataType:"clinicList",page:re,per_page:de,search:L};return Q&&(V.doctor_id=Q,V.exclude_with_sessions=!0),await D.fetchQuery({queryKey:vt.list(V),queryFn:()=>Bt.getStaticData(V),staleTime:300*1e3})}catch(V){return console.error("Error loading clinics:",V),{data:[],pagination:{has_more:!1}}}},F=async({page:re,per_page:de,search:L,clinic_ids:Q})=>{try{const V={dataType:"staticData",staticDataType:"doctors",clinic_ids:Q,page:re,per_page:de,search:L};return Q&&!n&&(V.exclude_with_sessions=!0),await D.fetchQuery({queryKey:vt.list(V),queryFn:()=>Bt.getStaticData(V),staleTime:0})}catch(V){return console.error("Error loading doctors:",V),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},q=ur({control:w,name:"clinic"}),U=f.useMemo(()=>b||y?p:j?Array.isArray(q)&&q.length>0?q.map(de=>de.value):q&&q.value?q.value:null:p,[j,q,p,g]),{data:K,isLoading:ne}=IA(U),Y=f.useMemo(()=>K?.data?K.data:[],[K?.data]);f.useEffect(()=>{if(o?.data&&k&&!n){const re=o.data.display_name||"";A("doctor",{value:k,label:re})}},[o,k,n,A]),f.useEffect(()=>{if(a&&n){const re=a?.data,de=fh.map(L=>{const Q=re.days?.find(Z=>Z.id===L.id),V=!!Q?.enabled;return V&&Array.isArray(Q.breaks)&&Q.breaks.length>0&&Q.breaks,{id:L.id,enabled:V,mainSession:V?{start:Q.main_session?.start||"",end:Q.main_session?.end||""}:{start:"",end:""},breaks:V?Array.isArray(Q.breaks)?Q.breaks:[]:[]}});_.reset({clinic:re.clinicId?{value:re.clinicId,label:re.clinicName}:null,doctor:re.doctorId?{value:re.doctorId,label:re.doctorName}:null,timeSlot:re.time_slot||"00:30",days:de})}},[a,n,_]);const fe=ur({control:w,name:"days"}),le=f.useMemo(()=>fe?.every(re=>re.enabled)||!1,[fe]),W=f.useCallback(re=>{const de=M("days");A("days",de.map(L=>({...L,enabled:re,mainSession:re?{start:"09:00",end:"18:00"}:{start:"",end:""}})))},[M,A]),z=f.useCallback(re=>{const de=re.days.filter(Z=>Z.enabled);if(de.length===0){Ee.error(l("Please select at least one day","kivicare-clinic-management-system"));return}for(const Z of de)if(!Z.mainSession.start||!Z.mainSession.end){Ee.error(l(`Please set session times for ${fh.find(X=>X.id===Z.id)?.label}`,"kivicare-clinic-management-system"));return}const L=s?parseInt(s):v?h:re?.doctor?.value,Q=re?.clinic?.value||p,V={doctor_id:L,clinic_id:Q,time_slot:re?.timeSlot,days:re.days.map(Z=>({id:Z.id,enabled:Z.enabled,main_session:{start:Z.mainSession.start,end:Z.mainSession.end},breaks:Z.breaks.map(X=>({start:X.start,end:X.end}))}))};t&&n?N.mutate({id:n,...V},{onSuccess:()=>{Ee.success(l("Doctor session updated successfully","kivicare-clinic-management-system")),m(`${d}/doctor-session`)},onError:Z=>{Ee.error(Z?.message||l("Failed to update session","kivicare-clinic-management-system"))}}):S.mutate(V,{onSuccess:()=>{Ee.success(l("Doctor session created successfully","kivicare-clinic-management-system")),s&&D.invalidateQueries({queryKey:vt.list({dataType:"clinicList",doctor_id:parseInt(s)})});const Z=s?`/doctor/${s}/sessions`:`${d}/doctor-session`;m(Z)},onError:Z=>{console.log(Z),Ee.error(Z?.response?.data?.message||l("Failed to create session","kivicare-clinic-management-system"))}})},[v,h,p,S,N,t,n,d,m,s]),ie=f.useCallback(re=>{const de=Object.keys(re);if(de.length>0){const L=de[0];if(["clinic","doctor","timeSlot"].includes(L)){const Q=document.getElementById(L);if(Q){Q.scrollIntoView({behavior:"smooth",block:"center"});return}}if(L==="days"){const Q=re.days;for(const V in Q){const Z=Q[V];if(Z){if(Z.mainSession){if(Z.mainSession.start){document.getElementById(`days.${V}.mainSession.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(Z.mainSession.end){document.getElementById(`days.${V}.mainSession.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}if(Z.breaks)for(const X in Z.breaks){const R=Z.breaks[X];if(R){if(R.start){document.getElementById(`days.${V}.breaks.${X}.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(R.end){document.getElementById(`days.${V}.breaks.${X}.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}}}}}}},[]);return t&&r?i.jsx(tg,{}):i.jsx(a_,{..._,children:i.jsxs("div",{className:"doctor-session-module",children:[i.jsx("h5",{className:"mb-4",children:t?l("Edit Doctor Sessions","kivicare-clinic-management-system"):l("Add Doctor Session","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:T(z,ie),className:"mb-0",children:[i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:i.jsx(ene,{control:w,errors:E,isProActive:j,isDoctorUser:v,isEditing:t,isReceptionistUser:y,isClinicAdminUser:b,loadClinicOptions:O,loadDoctorOptions:F,doctors:Y,loadingDoctors:ne,doctorSessionData:a?.data,hideDoctorField:e,doctorId:s})})})})}),i.jsx(tne,{checked:le,onChange:W}),i.jsx("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:fe?.map((re,de)=>i.jsx(ine,{day:fh.find(L=>L.id===re.id),dayIndex:de,control:w,errors:E},re.id))}),i.jsx(nne,{isValid:P,isEditing:t,onCancel:()=>m(`${d}/doctor-session`)})]})]})})}const ene=({control:t,errors:e,isProActive:n,isDoctorUser:s,isEditing:a,isReceptionistUser:r,isClinicAdminUser:o,loadClinicOptions:c,loadDoctorOptions:d,doctors:m,loadingDoctors:u,doctorSessionData:p,hideDoctorField:h=!1,doctorId:g})=>{const x=ur({control:t,name:"clinic"});return i.jsxs(i.Fragment,{children:[n&&!r&&!o&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:t,rules:{required:l("Clinic selection is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx(yn,{id:"clinic",loadOptions:c,value:v.value,onChange:y=>{v.onChange(y),t._formValues.doctor=null},placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${e.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:g?{doctor_id:parseInt(g)}:{}})}),e.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:e.clinic.message})]})}),!s&&!h&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"doctor",control:t,rules:{required:l("Doctor selection is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx(yn,{id:"doctor",loadOptions:d,value:v.value,onChange:y=>v.onChange(y),placeholder:x?l("Select Doctor","kivicare-clinic-management-system"):l("Select Clinic first","kivicare-clinic-management-system"),className:`react-select-box ${e.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!x,dependencies:{clinic_ids:x?.value}},`doctor-${x?.value||"none"}`)}),e.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:e.doctor.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Time Slot Duration","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"timeSlot",control:t,rules:{required:l("Time slot is required","kivicare-clinic-management-system"),validate:v=>!v||v==="00:00"?l("Time slot is required","kivicare-clinic-management-system"):!0},render:({field:v})=>i.jsx(Am,{name:v.name,control:t,rules:v.rules,placeholder:l("Select time slot","kivicare-clinic-management-system"),error:e.timeSlot,format:"m"})}),e.timeSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:e.timeSlot.message})]})})]})},tne=({checked:t,onChange:e})=>i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:t,onChange:n=>e(n.target.checked),id:"select-all-days"}),i.jsx("label",{htmlFor:"select-all-days",className:"form-label text-heading fw-semibold font-size-14 mb-0",children:l("Select All Days","kivicare-clinic-management-system")})]})}),nne=({isValid:t,isEditing:e,onCancel:n})=>i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-3",onClick:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:e?l("Update Sessions","kivicare-clinic-management-system"):l("Save Session","kivicare-clinic-management-system")})]}),ine=He.memo(({day:t,dayIndex:e,control:n,errors:s})=>{const a=ur({control:n,name:`days.${e}.enabled`,defaultValue:!1}),{fields:r,append:o,remove:c}=mr({control:n,name:`days.${e}.breaks`}),d=f.useCallback(()=>o({start:"",end:""}),[o]),{validateSessionStart:m,validateSessionEnd:u,validateBreakStart:p,validateBreakEnd:h}=Jte(),g=ur({control:n,name:`days.${e}.mainSession.start`}),x=ur({control:n,name:`days.${e}.mainSession.end`}),v=f.useMemo(()=>{if(g&&x){const y=xn.timeToMinutes(x)-xn.timeToMinutes(g);return y>0?y:0}return 0},[g,x]);return i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap",children:[i.jsxs("div",{className:"form-check",children:[i.jsx(je,{name:`days.${e}.enabled`,control:n,render:({field:y})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:y.value,onChange:b=>{const j=b.target.checked;y.onChange(j)},id:`days.${e}.enabled`})}),i.jsx("label",{className:"form-label text-heading fw-semibold font-size-14 mb-0",htmlFor:`days.${e}.enabled`,children:t.label})]}),a?i.jsx("button",{type:"button",className:"btn btn-link fw-bold font-size-14 p-0",onClick:d,disabled:!g||!x,children:l("Add Break","kivicare-clinic-management-system")}):i.jsx("span",{className:"fw-bold font-size-14 text-muted",children:l("Not scheduled","kivicare-clinic-management-system")})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mt-3",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Session Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.start`,control:n,rules:{required:a&&l("Start time is required","kivicare-clinic-management-system"),validate:m(e)},placeholder:l("Start Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Session End","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.end`,control:n,rules:{required:a&&l("End time is required","kivicare-clinic-management-system"),validate:u(e)},placeholder:l("End Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.end})]})]}),g&&x&&v>0&&i.jsx("div",{className:"bg-info-subtle rounded py-2 px-3 my-3",children:i.jsxs("small",{children:[l("Session Duration:","kivicare-clinic-management-system")," ",Math.floor(v/60),"h ",v%60,"m",i.jsx("br",{}),l("Time:","kivicare-clinic-management-system")," ",xn.formatTime(g)," - ",xn.formatTime(x)]})}),(s?.days?.[e]?.mainSession?.start||s?.days?.[e]?.mainSession?.end)&&i.jsx("div",{className:"bg-danger-subtle rounded py-2 px-3",children:s.days[e].mainSession.start?.message||s.days[e].mainSession.end?.message}),r.map((y,b)=>i.jsx(sne,{dayIndex:e,breakIndex:b,control:n,errors:s,onRemove:()=>c(b),validateStart:p(e,b),validateEnd:h(e,b)},y.id)),g&&x&&r.length===0&&i.jsx("div",{className:"text-center mt-3",children:i.jsx("small",{className:"text-muted",children:l('No breaks scheduled. Click "Add Break" to add a break time.',"kivicare-clinic-management-system")})})]})]})})})})}),sne=He.memo(({dayIndex:t,breakIndex:e,control:n,errors:s,onRemove:a,validateStart:r,validateEnd:o})=>{const c=`days.${t}.breaks.${e}.start`,d=`days.${t}.breaks.${e}.end`,m=ur({control:n,name:c}),u=ur({control:n,name:d}),p=f.useMemo(()=>{if(m&&u){const h=xn.timeToMinutes(u)-xn.timeToMinutes(m);return h>0?h:0}return 0},[m,u]);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border rounded p-3 mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsxs("h6",{className:"mb-0",children:[l("Break","kivicare-clinic-management-system")," ",e+1]}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a,children:[i.jsx("i",{className:"ph ph-trash"})," ",l("Remove","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Break Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:c,control:n,rules:{required:l("Break start time is required","kivicare-clinic-management-system"),validate:r},placeholder:l("Break Start","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:l("Break End","kivicare-clinic-management-system")}),i.jsx(Am,{name:d,control:n,rules:{required:l("Break end time is required","kivicare-clinic-management-system"),validate:o},placeholder:l("Break End","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.end})]})]}),m&&u&&p>0&&i.jsx("div",{className:"alert alert-light py-1 mb-0",children:i.jsxs("small",{children:[l("Break Duration:","kivicare-clinic-management-system")," ",p,"m (",xn.formatTime(m)," - ",xn.formatTime(u),")"]})}),(s?.days?.[t]?.breaks?.[e]?.start||s?.days?.[t]?.breaks?.[e]?.end)&&i.jsx("div",{className:"alert alert-danger py-2 mt-2 mb-0",children:i.jsx("small",{children:s.days[t].breaks[e].start?.message||s.days[t].breaks[e].end?.message})})]})})});function Tk({filterByDoctor:t=!1}){const{pathname:e}=Hn(),{doctorId:n}=Wt(),s=e.includes("setting")?"/setting":"",a=zi(),[r,o]=f.useState([]),c=ze(),d=Kn(),m=mi(),[u,p]=f.useState({page:1,perPage:10,search:"",doctor_id:t&&n?parseInt(n):"",clinic_id:"",days:"",timeSlot:"",orderBy:"",order:""}),[h,g]=f.useState(""),[x,v]=f.useState(!1),[y,b]=f.useState(!1),j=f.useRef(null),{isAddonActive:k,hasCapability:S}=ht(),N=k?k("kiviPro"):!0,{data:_,isLoading:w,error:T}=Wte(u),{data:A,isLoading:M}=_k({perPage:100}),{data:E}=af(t&&n?parseInt(n):null),P=async({page:V,per_page:Z,search:X})=>{try{const R={dataType:"clinicList",page:V,per_page:Z,search:X},G=await c.fetchQuery({queryKey:vt.list(R),queryFn:()=>Bt.getStaticData(R),staleTime:300*1e3}),ee=G.data.map(ae=>({value:ae.id,label:ae.label||ae.name}));return o(ae=>[...ae,...ee]),G}catch(R){return console.error("Error loading clinics:",R),{data:[],pagination:{has_more:!1}}}};f.useEffect(()=>{t&&n&&p(V=>({...V,doctor_id:parseInt(n)}))},[n,t]);const D=Qte(),O=Zte(),F=Xte(),q=_?.data?.sessions||[],U=_?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},K=f.useMemo(()=>A?.data?.doctors?[...A.data.doctors.map(V=>({value:V.id,label:V.name}))]:[],[A?.data?.doctors]),ne=async V=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const Z={format:V,...u},X=await F.mutateAsync(Z);if(X?.data?.sessions){const R=X.data.sessions,G=new Date().toISOString().split("T")[0],ee=R.map(ae=>({id:ae.id,clinic_id:ae.clinic_id||"",clinic_name:ae.clinic_name||"",days:ae.days||"",doctor_id:ae.doctor_id||"",doctor_name:ae.doctor_name||"",time_slot:ae.time_slot||"",morning_session:ae.morning_session||"",evening_session:ae.evening_session||""}));switch(V){case"csv":cs(ee,`doctor-sessions-${G}.csv`);break;case"xls":ds(ee,`doctor-sessions-${G}.xls`);break;case"pdf":ms(ee,`doctor-sessions-${G}.pdf`,"Doctor Sessions List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(Z){console.error("Export error:",Z),rt({title:l("Error!","kivicare-clinic-management-system"),text:Z.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},Y=()=>ne("csv"),fe=()=>ne("xls"),[le,W]=f.useState(!1),z=()=>{le||(W(!0),ne("pdf"),setTimeout(()=>W(!1),2e3))},ie=In(),re=f.useMemo(()=>[ie.accessor("doctor",{id:"doctor",header:()=>l("Doctors","kivicare-clinic-management-system"),cell:V=>i.jsx(Zt,{profileUrl:V.row.original.doctor.doctor_image_url,name:V.row.original.doctor.name,email:V.row.original.doctor.email,variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system")})}),...N&&!d&&!m?[ie.accessor("clinic",{id:"clinic",header:()=>l("Clinics","kivicare-clinic-management-system"),cell:V=>i.jsx(Zt,{profileUrl:V.row.original.clinic.clinic_image_url,name:V.row.original.clinic.name,email:V.row.original.clinic.email,variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")})})]:[],ie.accessor("days",{id:"days",header:()=>l("Days","kivicare-clinic-management-system"),enableSorting:!1,cell:V=>i.jsx("div",{className:"d-flex flex-wrap gap-1",children:V.row.original.days.split(", ").map((Z,X)=>i.jsx("span",{className:"badge bg-primary-subtle text-primary",children:Z},X))})}),ie.accessor("time_slot",{id:"time_slot",header:()=>l("Time Slot","kivicare-clinic-management-system"),cell:V=>{const Z=V.row.original.time_slot;if(!Z)return i.jsx("span",{children:""});const X=parseInt(Z);if(X>=60){const R=Math.floor(X/60),G=X%60;return i.jsxs("span",{children:[R,"h ",G>0?`${G}min`:""]})}return i.jsxs("span",{children:[X," min"]})}}),...S("doctor_session_edit")||S("doctor_session_delete")?[ie.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:V=>{const Z=X=>R=>i.jsx(ut,{id:`tooltip-${V.cell.row.original.id}-${X}`,...R,children:X});return i.jsxs("div",{className:"d-flex align-items-center gap-3 fs-5",children:[S("doctor_session_edit")&&i.jsx(Qe,{placement:"top",overlay:Z(l("Edit","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`${s}/doctor-session/edit/${V.row.original.id}`,className:"text-success",children:i.jsx("i",{className:"ph text-bold ph-pencil-simple-line"})})}),S("doctor_session_delete")&&i.jsx(Qe,{placement:"top",overlay:Z(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger p-0 fs-5",onClick:()=>de(V.row.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[N,S]),de=V=>{bt({title:l("Delete Sessions?","kivicare-clinic-management-system"),text:l("You're about to delete all sessions for this doctor.<br>This will remove all scheduled days and cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Z=>{Z.isConfirmed&&(yt({title:l("Deleting Sessions...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),D.mutate(V.id,{onSuccess:X=>{St({title:l("Sessions Deleted","kivicare-clinic-management-system"),text:X?.message||l("Sessions have been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to sessions","kivicare-clinic-management-system")}),V.doctor?.id&&c.invalidateQueries({queryKey:vt.list({dataType:"clinicList",doctor_id:V.doctor.id})})},onError:X=>{rt({text:l("Failed to delete sessions. Please try again.","kivicare-clinic-management-system")})}}))})},L=f.useCallback(V=>{g(V.target.value),p(Z=>({...Z,search:V.target.value,page:1}))},[]),Q=V=>{if(V.length>0){const{id:Z,desc:X}=V[0],R={doctor:"doctor_name",clinic:"clinic_name",time_slot:"time_slot"};p(G=>({...G,orderby:R[Z]||Z,order:X?"desc":"asc",page:1}))}else p(Z=>({...Z,orderby:"",order:"",page:1}))};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t&&E?.data?.display_name?`${E.data.display_name}'s Sessions`:l("Doctor Sessions","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t&&n&&i.jsxs(gt,{to:`/doctor/${n}/add-session`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Session","kivicare-clinic-management-system")})]}),!t&&S("doctor_session_add")&&i.jsxs(gt,{to:`${s}/doctor-session/add`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Session","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!y,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:j,children:i.jsxs("div",{ref:j,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[N&&!d&&!m&&i.jsx(yn,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:P,value:r.find(V=>V.value===u.clinic_id)||null,onChange:V=>{p(Z=>({...Z,clinic_id:V?V.value:""}))},dependencies:{},isClearable:!0}),!a&&!t&&i.jsx(ot,{placeholder:l("Doctor Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:K,onChange:V=>p(Z=>({...Z,doctor_id:V?V.value:""})),isLoading:M,value:K.find(V=>V.value===u.doctor_id)||null,isClearable:!0,styles:{menuPortal:V=>({...V,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:h,onChange:L})]})}),S("doctor_session_export")&&N&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Y,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:fe,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:z,disabled:F.isPending||le,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:q,columns:re,isLoading:w,error:T,currentPage:U.currentPage,perPage:U.perPage,totalItems:U.total,lastPage:U.lastPage,onPageChange:V=>p(Z=>({...Z,page:V})),onPerPageChange:V=>p(Z=>({...Z,perPage:V,page:1})),onSortingChange:Q,enableSelection:!0,moduleNamePlural:"doctor sessions",bulkActions:S("doctor_session_delete")?[{label:l("Delete","kivicare-clinic-management-system"),action:(V,Z)=>{const X=V.map(R=>R.id);bt({title:l("Delete Sessions?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${V.length} sessions</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(R=>{R.isConfirmed&&(yt({title:l("Deleting Sessions...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),O.mutate(X,{onSuccess:G=>{St({title:l("Sessions Deleted","kivicare-clinic-management-system"),text:l(`${V.length} session${V.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to sessions","kivicare-clinic-management-system")}),Z()},onError:G=>{console.error("Bulk delete doctor sessions error:",G);const ee=G?.response?.data?.message||G?.message||l("Failed to delete selected doctor sessions. Please try again.","kivicare-clinic-management-system");rt({text:ee})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}]:[],isBulkActionShow:V=>{b(V)}})]})]})})}function Iy({isEditing:t=!1}){const{id:e,doctorId:n}=Wt(),s=dn(),[a,r]=f.useState([]),{isAddonActive:o,defaultClinicId:c,userRole:d,googleMeetIntegration:m,currencyPrefix:u,currencyPostfix:p}=ht(),{data:h}=af(n?parseInt(n):null),g=zi(),x=Kn(),v=mi(),y=vr(),b=o("kiviPro"),{data:j,isLoading:k,error:S}=xV(e,{enabled:t&&!!e}),N=j?.data,_=yV(),w=bV(),[T,A]=f.useState(!1),[M,E]=f.useState(0),P=T||_.isPending||w.isPending||k,{data:D,isLoading:O}=Ma("service_type"),{data:F}=aV(),{data:q,isLoading:U}=iu({enabled:b}),K=ze(),ne=async({page:he,per_page:_e,search:Ke})=>{try{const Ae={dataType:"clinicList",page:he,per_page:_e,search:Ke},$e=await K.fetchQuery({queryKey:vt.list(Ae),queryFn:()=>Bt.getStaticData(Ae),staleTime:300*1e3}),Je=$e.data.map(et=>({value:et.id,label:et.label||et.name}));return r(et=>[...et,...Je]),$e}catch(Ae){return console.error("Error loading clinics:",Ae),{data:[],pagination:{has_more:!1}}}},Y=async({page:he,per_page:_e,search:Ke,clinic_ids:Ae,telemed_service:$e})=>{try{let Je=Ae;(x||v)&&c&&(Je=c);const et={dataType:"staticData",staticDataType:"doctors",clinic_ids:Je,telemed_service:$e,page:he,per_page:_e,search:Ke};return await K.fetchQuery({queryKey:vt.list(et),queryFn:()=>Bt.getStaticData(et),staleTime:0})}catch(Je){return console.error("Error loading doctors:",Je),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},fe=async({page:he,per_page:_e,search:Ke})=>{try{const Ae={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:he,per_page:_e,search:Ke};return await K.fetchQuery({queryKey:vt.list(Ae),queryFn:()=>Bt.getStaticData(Ae),staleTime:0})}catch(Ae){return console.error("Error loading doctors:",Ae),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},le=Hg({specialty_type:"service_type"}),{register:W,handleSubmit:z,control:ie,setValue:re,watch:de,formState:{errors:L},reset:Q}=Xt({defaultValues:{serviceImage:"",serviceImageId:"",category:null,name:"",charges:0,telemed_service:{value:"no",label:"No"},clinic:[],doctor:[],duration:0,status:null,allowMulti:null}}),V=de("telemed_service");f.useEffect(()=>{if(h?.data&&n&&!t){const he=h.data.clinics?.[0]?.id,_e=h.data.clinics?.[0]?.clinic_name,Ke=h.data.display_name||"";re("doctor",[{value:parseInt(n),label:Ke}]),(v||x)&&c&&_e?re("clinic",[{value:c,label:_e}]):he&&_e&&re("clinic",[{value:he,label:_e}])}},[h,n,t,re,v,x,c]);const Z=ur({control:ie,name:"clinic"}),X=f.useMemo(()=>v||x?c:b?Array.isArray(Z)&&Z.length>0?Z.map(_e=>_e.value):Z&&Z.value?Z.value:null:c,[b,Z,c,v,x]),{data:R,isLoading:G}=IA(X),ee=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),ae=f.useMemo(()=>[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}],[]),I=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),H=he=>he==null?null:ae.find(_e=>_e.value===he||_e.value===String(he)||he===1&&_e.value==="active"||he===0&&_e.value==="inactive")||null,B=he=>he==null?null:ee.find(_e=>_e.value===he||_e.value===String(he))||null,te=he=>he==null?null:I.find(_e=>_e.value===he||_e.value===String(he))||null;f.useEffect(()=>{if(t&&N&&!k){N.service_image_url&&re("serviceImage",N.service_image_url),N.service_image_id&&re("serviceImageId",N.service_image_id),re("category",N.service_category),re("name",N.name||""),re("charges",N.price||0);const he=B(N.telemed_service);re("telemed_service",he),re("clinic",N.clinics||[]),re("doctor",N.doctors||[]),re("duration",N.duration||0);const _e=H(N.status);re("status",_e);const Ke=te(N.allow_multi);re("allowMulti",Ke)}},[t,N,k,re]);const oe=(he,_e)=>{re(he,_e.url||_e.image),re(`${he}Id`,_e.id||_e.imageId)},ye={category:{required:l("Service category is required","kivicare-clinic-management-system")},name:{required:l("Service name is required","kivicare-clinic-management-system"),minLength:{value:3,message:l("Service name must be at least 3 characters","kivicare-clinic-management-system")},maxLength:{value:100,message:l("Service name must be less than 100 characters","kivicare-clinic-management-system")}},charges:{required:l("Charges are required","kivicare-clinic-management-system"),min:{value:0,message:l("Charges must be a positive number","kivicare-clinic-management-system")},pattern:{value:/^\d+(\.\d{1,2})?$/,message:l("Invalid price format (e.g. 50 or 50.00)","kivicare-clinic-management-system")}},telemed_service:{required:l("Telemed service selection is required","kivicare-clinic-management-system")},clinic:{required:l("At least one clinic must be selected","kivicare-clinic-management-system"),validate:he=>(Array.isArray(he)?he.length>0:!!he)||l("At least one clinic must be selected","kivicare-clinic-management-system")},doctor:{required:l("At least one doctor must be selected","kivicare-clinic-management-system"),validate:he=>(Array.isArray(he)?he.length>0:!!he)||l("At least one doctor must be selected","kivicare-clinic-management-system")},status:{required:l("Status is required","kivicare-clinic-management-system")},allowMulti:{required:l("Multi-selection option is required","kivicare-clinic-management-system")}},me=async he=>{A(!0);const _e=et=>Array.isArray(et)?et:et?[et]:[],Ke=_e(he.clinic),Ae=_e(he.doctor),$e=Ke.length?Ke:_e(F?.data),Je={profile_image:he.serviceImageId,category:he.category?.id,name:he.name,price:he.charges,telemed_service:he.telemed_service?.value,clinics:$e,doctors:Ae,duration:he.duration,status:he.status?.value,allow_multi:he.allowMulti?.value};try{let et;t?(et=await w.mutateAsync({id:e,...Je}),Ee.success(l("Service updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(et=await _.mutateAsync(Je),Ee.success(l("Service created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),s("/service",{replace:!0})}catch(et){const Me=et?.response?.data?.message||(t?l("Failed to update service","kivicare-clinic-management-system"):l("Failed to create service","kivicare-clinic-management-system"));Ee.error(Me,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{A(!1)}},xe=he=>{console.log("Validation errors:",he);const _e=Object.keys(he)[0],Ke=document.getElementById(_e);Ke&&(Ke.scrollIntoView({behavior:"smooth",block:"center"}),Ke.focus())},Ce=()=>{s("/service")};return f.useEffect(()=>{if(S){const he=S?.response?.data?.message||l("You do not have permission to view this service.","kivicare-clinic-management-system");Ee.error(he,{position:"top-right",autoClose:5e3}),s("/service",{replace:!0})}},[S,s]),t&&k?i.jsx(ng,{}):i.jsx("div",{className:"position-relative",children:(!t||t&&N)&&i.jsxs("form",{onSubmit:z(me,xe),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex justify-content-center pt-5",children:i.jsx(je,{name:"serviceImage",control:ie,render:({field:he})=>i.jsx(hl,{id:"service-image-upload",name:"serviceImage",label:l("Image","kivicare-clinic-management-system"),defaultImage:he.value,defaultImageId:de("serviceImageId"),onChange:_e=>oe("serviceImage",_e),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service Category","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"category",control:ie,rules:ye.category,render:({field:he})=>i.jsxs(i.Fragment,{children:[i.jsx(yn,{id:"category",loadOptions:fe,value:he.value,onChange:_e=>{he.onChange(_e)},onCreateOption:_e=>{le.mutate(_e,{onSuccess:Ke=>{if(Ke?.data?.data){const Ae={id:Ke.data.data.id,label:Ke.data.data.label};K.setQueryData(["staticData","service_type"],$e=>({...$e,data:[...$e?.data||[],Ae]})),he.onChange(Ae),E($e=>$e+1)}Ee.success(l("category added successfully","kivicare-clinic-management-system"))},onError:Ke=>{console.error("Failed to save category:",Ke),console.error("Error details:",Ke.response?.data),Ee.error(l("Failed to save category to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:_e=>_e.id,placeholder:l("Select or create categories","kivicare-clinic-management-system"),isLoading:O,isSearchable:!0,isMulti:!1,closeMenuOnSelect:!0,className:`react-select ${L.category?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t,noOptionsMessage:()=>l("Type to create a new category","kivicare-clinic-management-system"),formatCreateLabel:_e=>l("Add category","kivicare-clinic-management-system")+`: "${_e}"`,isCreatable:!0},M),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type and press enter to add new Category","kivicare-clinic-management-system")]})]})}),L.category&&i.jsx("div",{className:"invalid-feedback d-block",children:L.category.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Service Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"name",className:`form-control ${L.name?"is-invalid":""}`,placeholder:l("Enter the Service Name","kivicare-clinic-management-system"),...W("name",ye.name),disabled:t&&k}),L.name&&i.jsx("div",{className:"invalid-feedback d-block",children:L.name.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Charges","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[u&&i.jsx("span",{className:"input-group-text",children:u}),i.jsx("input",{type:"number",id:"charges",step:"0.01",min:"0",className:`form-control ${L.charges?"is-invalid":""}`,placeholder:l("Enter Charges","kivicare-clinic-management-system"),...W("charges",ye.charges),disabled:t&&k}),p&&i.jsx("span",{className:"input-group-text",children:p})]}),L.charges&&i.jsx("div",{className:"invalid-feedback d-block",children:L.charges.message})]})}),(o("googlemeet")||o("telemed"))&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Telemed Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"telemed_service",control:ie,rules:ye.telemed_service,render:({field:he})=>i.jsx(ot,{...he,onChange:_e=>{he.onChange(_e),re("doctor",[])},id:"telemed_service",options:ee,placeholder:l("Select Telemed Service","kivicare-clinic-management-system"),className:`react-select ${L.telemed_service?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&k,styles:{menuPortal:_e=>({..._e,zIndex:9999})}})}),L.telemed_service&&i.jsx("div",{className:"invalid-feedback d-block",children:L.telemed_service.message})]})}),b&&y&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(je,{name:"clinic",control:ie,rules:ye.clinic,render:({field:he})=>{const _e=a??q?.data??[],[Ke,Ae]=f.useState(!1),$e=Array.isArray(he.value)&&he.value.length>0&&he.value.length===_e.length,Je=async et=>{if(et.target.checked){Ae(!0);try{const Ne=((await ne({page:-1,per_page:1,search:""}))?.data||[]).map(qe=>({value:qe.id,label:qe.label||qe.name}));r(Ne),he.onChange(Ne)}catch(ge){console.error("Error selecting all clinics:",ge)}finally{Ae(!1)}}else he.onChange([])};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[l("Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllClinics",className:"form-check-input",checked:$e,onChange:Je,disabled:Ke}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllClinics",children:Ke?l("Loading...","kivicare-clinic-management-system"):l("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(yn,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isMulti:!t,loadOptions:ne,value:he.value,onChange:et=>{he.onChange(et),re("doctor",null)}}),L.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:L.clinic.message})]})}})})}),!g&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(je,{name:"doctor",control:ie,rules:ye.doctor,render:({field:he})=>{const _e=Array.isArray(de("clinic"))?de("clinic").map(ge=>ge.value):de("clinic")?.value,[Ke,Ae]=f.useState(!1),[$e,Je]=f.useState(0),et=Array.isArray(he.value)&&he.value.length>0&&$e>0&&he.value.length===$e,Me=async ge=>{if(ge.target.checked){Ae(!0);try{const at=((await Y({page:-1,per_page:1,search:"",clinic_ids:_e}))?.data||[]).map(Kt=>({value:Kt.id,label:Kt.label||Kt.name}));Je(at.length),he.onChange(at)}catch(qe){console.error("Error selecting all doctors:",qe)}finally{Ae(!1)}}else he.onChange([])};return f.useEffect(()=>{_e&&Y({page:-1,per_page:1,search:"",clinic_ids:_e}).then(ge=>{Je(ge?.data?.length||0)})},[_e]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[l("Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllDoctors",className:"form-check-input",checked:et,onChange:Me,disabled:Ke||!_e}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllDoctors",children:Ke?l("Loading...","kivicare-clinic-management-system"):l("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(yn,{id:"doctor",loadOptions:Y,value:he.value,onChange:ge=>he.onChange(ge),placeholder:_e?l("Select doctor","kivicare-clinic-management-system"):l("Select a clinic first","kivicare-clinic-management-system"),className:`react-select-box ${L.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isMulti:!t,isDisabled:!_e||t&&k,dependencies:{clinic_ids:_e,telemed_service:V?.value}},`doctor-${_e}-${V?.value}`),L.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:L.doctor.message})]})}})})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[b&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Duration","kivicare-clinic-management-system")}),i.jsx(je,{name:"duration",control:ie,rules:ye.duration,render:({field:he})=>{let _e=he.value;if(typeof _e=="number"&&!isNaN(_e)){const Ke=Math.floor(_e/60).toString().padStart(2,"0"),Ae=(_e%60).toString().padStart(2,"0");_e=`${Ke}:${Ae}`}else _e instanceof Date&&(_e=`${_e.getHours().toString().padStart(2,"0")}:${_e.getMinutes().toString().padStart(2,"0")}`);return i.jsx(si,{value:_e,onChange:Ke=>{if(Ke&&Ke.length>0){const Ae=Ke[0],$e=Ae.getHours()*60+Ae.getMinutes();he.onChange($e)}else he.onChange(null)},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:0,defaultMinute:0,minuteIncrement:5,inline:!0,locale:ai()},className:`form-control d-none  ${L.duration?"is-invalid":""}`,placeholder:l("MM:SS","kivicare-clinic-management-system")})}}),L.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:L.duration.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:ie,rules:ye.status,render:({field:he})=>i.jsx(ot,{...he,id:"status",options:ae,placeholder:l("Select Status","kivicare-clinic-management-system"),className:`react-select ${L.status?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",styles:{menuPortal:_e=>({..._e,zIndex:9999})}})}),L.status&&i.jsx("div",{className:"invalid-feedback d-block",children:L.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Allow multi selection while booking?","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"allowMulti",control:ie,rules:ye.allowMulti,render:({field:he})=>i.jsx(ot,{...he,id:"allowMulti",options:I,placeholder:l("Allow multi selection?","kivicare-clinic-management-system"),className:`react-select ${L.allowMulti?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&k,styles:{menuPortal:_e=>({..._e,zIndex:9999})}})}),L.allowMulti&&i.jsx("div",{className:"invalid-feedback d-block",children:L.allowMulti.message})]})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ce,disabled:P||t&&k,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P||t&&k,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):t?l("Update Service","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})})}const ane=[Vn({path:"/doctor",title:"Doctors",outlet:Tte,permissions:["doctor_list"],meta:{description:"Doctor management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:Pte,title:"All Doctors",index:!0,permissions:["doctor_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all doctors",breadcrumb:"All Doctors"}}),We({path:"add",component:My,title:"Add Doctor",props:{isEditing:!1},permissions:["doctor_add"],skeleton:Py,meta:{description:"Create a new doctor",breadcrumb:"Add Doctor"}}),We({path:"edit/:id",component:My,title:"Edit Doctor",props:{isEditing:!0},permissions:["doctor_edit"],meta:{description:"Edit existing doctor",breadcrumb:"Edit Doctor"},skeleton:Py}),We({path:":doctorId/sessions",component:Tk,title:"Doctor Sessions",props:{filterByDoctor:!0},permissions:["doctor_session_list"],meta:{description:"View all sessions for this doctor",breadcrumb:t=>t.doctorId?`Doctor #${t.doctorId} Sessions`:"Doctor Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:":doctorId/add-session",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create",hideDoctorField:!0},permissions:["doctor_session_add"],meta:{description:"Add a new doctor session for specific doctor",breadcrumb:"Add Session"},skeleton:tg}),We({path:":doctorId/add-service",component:Iy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],meta:{description:"Add a new service for specific doctor",breadcrumb:"Add Service"},skeleton:ng})]})],rne=()=>{const t=Hn();return t.pathname==="/tax/add"||t.pathname.startsWith("/tax/edit/"),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/tax"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Oy=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(fl,{titleWidth:"80px"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"55px"}),i.jsx(C,{width:"200px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(C,{width:"220px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(C,{width:"230px",height:"0.8rem",className:"mt-2"})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"55px"})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"110px",height:"38px"})]})]})})})}),Nr={createTax:t=>pe({endpoint:"taxes",method:"POST",data:t}),updateTax:(t,e)=>pe({endpoint:`taxes/${t}`,method:"PUT",data:e}),getTaxById:t=>pe({endpoint:`taxes/${t}`,method:"GET"}),getTaxes:t=>pe({endpoint:"taxes",method:"GET",data:t}),deleteTax:t=>pe({endpoint:`taxes/${t}`,method:"DELETE"}),bulkUpdateTaxStatus:(t,e)=>pe({endpoint:"taxes/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeleteTaxes:t=>pe({endpoint:"taxes/bulk/delete",method:"POST",data:{ids:t}}),updateTaxStatus:(t,e)=>pe({endpoint:`taxes/${t}/status`,method:"PUT",data:{status:e}}),exportTaxes:(t={})=>pe({endpoint:"taxes/export",method:"GET",data:t})},lne=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Nr.updateTax(e,n):Nr.createTax(n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},one=(t={},e={})=>ft({queryKey:["taxes",t],queryFn:()=>Nr.getTaxes(t),...e}),cne=()=>{const t=ze();return Le({mutationFn:e=>Nr.bulkDeleteTaxes(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},dne=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Nr.bulkUpdateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},mne=(t,e={})=>ft({queryKey:["tax",t],queryFn:()=>Nr.getTaxById(t),enabled:!!t,...e}),une=()=>{const t=ze();return Le({mutationFn:e=>Nr.deleteTax(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},hne=()=>{const t=ze();return Le({mutationFn:({id:e,status:n})=>Nr.updateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},pne=()=>Le({mutationFn:t=>Nr.exportTaxes(t)}),gne=()=>{const{isAddonActive:t,getCurrencyDetail:e,hasCapability:n}=ht(),a=e().prefix,r=t("kiviPro"),[o,c]=f.useState(!1),[d,m]=f.useState(!1),u=f.useRef(null),[p,h]=f.useState({}),g=Kn(),x=mi(),v=ze(),y=async({page:z,per_page:ie,search:re,clinic_ids:de})=>{try{const L={dataType:"staticData",staticDataType:"users",role:oc(),page:z,per_page:ie,search:re||""},Q=de&&typeof de=="object"?de.value:de,V=String(Q||"").split(",").filter(X=>X&&X!=="undefined"&&X!=="null").join(",");return V&&(L.clinic_ids=V),(await v.fetchQuery({queryKey:vt.list(L),queryFn:()=>Bt.getStaticData(L),staleTime:300*1e3})).data.map(X=>({value:X.id||X.ID,label:X.label||X.display_name}))}catch(L){return console.error("Error loading doctors:",L),{options:[],hasMore:!1}}},b=async({page:z,per_page:ie,search:re,clinic_id:de,doctor_ids:L})=>{try{const Q={dataType:"staticData",staticDataType:"servicesWithPrice",page:z,per_page:ie,search:re||""},V=de&&typeof de=="object"?de.value:de,Z=L&&typeof L=="object"?L.value:L,X=Number(V);!isNaN(X)&&X>0&&(Q.clinic_id=X);const R=String(Z||"").split(",").filter(ee=>ee&&ee!=="undefined"&&ee!=="null").join(",");return R&&(Q.doctor_ids=R),(await v.fetchQuery({queryKey:vt.list(Q),queryFn:()=>Bt.getStaticData(Q),staleTime:300*1e3})).data.map(ee=>({value:ee.id,label:ee.label}))}catch(Q){return console.error("Error loading services:",Q),{options:[],hasMore:!1}}},j=une(),k=cne(),S=dne(),N=hne(),_=pne(),{data:w,isLoading:T}=one(p,{enabled:r}),A=Array.isArray(w?.data?.taxes)?w.data.taxes:[],M=w?.data?.page||1,E=w?.data?.per_page||10,P=w?.data?.total||0,D=w?.data?.total_pages||1,{data:O}=iu(),{data:F}=MA(),{data:q}=rV({clinicId:p.clinic&&typeof p.clinic=="object"?p.clinic.value:p.clinic||null,doctorId:p.doctor&&typeof p.doctor=="object"?p.doctor.value:p.doctor||null}),U=Array.isArray(O?.data)?O.data:[];Array.isArray(F?.data)&&F.data,Array.isArray(q?.data)&&q.data;const K=f.useMemo(()=>Object.fromEntries(Object.entries(p).map(([z,ie])=>{const re=ie&&typeof ie=="object"&&"value"in ie?ie.value:ie;return[z,re]}).filter(([z,ie])=>ie!==""&&ie!==null&&ie!==void 0)),[p]),ne=z=>{if(z.length>0){const{id:ie,desc:re}=z[0],de={id:"id",taxName:"taxName",taxRate:"taxRate",clinicName:"clinicName",doctorName:"doctorName",serviceName:"serviceName",status:"status"};h(L=>({...L,orderby:de[ie]||ie,order:re?"desc":"asc",page:1}))}else h(ie=>({...ie,orderby:"",order:"",page:1}))},Y=async z=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ie={format:z,...K},de=(await _.mutateAsync(ie))?.data?.taxes||[];if(!de.length){bt({icon:"ph-info",title:l("No data","kivicare-clinic-management-system"),text:l("No tax records found for export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const L=new Date().toISOString().split("T")[0],Q=de.map(V=>({id:V.id,tax_name:V.tax_name,tax_rate:V.tax_rate,clinic_name:V.clinic_name,doctor_name:V.doctor_name,service_name:V.service_name,status:V.status}));switch(z){case"csv":cs(Q,`taxes-${L}.csv`);break;case"xls":ds(Q,`taxes-${L}.xls`);break;case"pdf":ms(Q,`taxes-${L}.pdf`,"Tax Records");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(ie){console.error("Export error:",ie),rt({title:l("Error!","kivicare-clinic-management-system"),text:ie.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},fe=A.map(z=>({id:z.id,taxName:z.name,taxRate:z.taxType==="fixed"?a+`${z.taxValue}`:`${z.taxValue}%`,clinicName:z.clinicName,clinic_image_url:z.clinic_image_url,clinicEmail:z.clinicEmail,doctorName:z.doctorName,doctor_image_url:z.doctor_image_url,doctorEmail:z.doctorEmail,serviceName:z.serviceName,service_image_url:z.service_image_url,status:z.status})),le=r?[{label:l("Delete","kivicare-clinic-management-system"),action:(z,ie)=>{const re=z.map(de=>de.id);bt({title:l("Delete Taxes?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${z.length} taxes</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep taxes","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(de=>{de.isConfirmed&&(yt({title:l("Deleting Taxes...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected taxes.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(re,{onSuccess:()=>{St({title:l("Tax Deleted","kivicare-clinic-management-system"),text:l(`${z.length} tax${z.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to taxes","kivicare-clinic-management-system")}).then(()=>{ie()})},onError:L=>{rt({title:l("Error","kivicare-clinic-management-system"),text:L?.response?.data?.message||L?.message||l("Failed to delete selected taxes.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(z,ie)=>{const re=z.map(de=>de.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Taxes to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(de=>{de.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),S.mutate({ids:re,status:"1"},{onSuccess:L=>{St({title:l("Success","kivicare-clinic-management-system"),text:L?.message||l("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{ie()})},onError:L=>{const Q=L?.response?.data?.message||L?.message||l("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(z,ie)=>{const re=z.map(de=>de.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Taxes to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(de=>{de.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),S.mutate({ids:re,status:"0"},{onSuccess:L=>{St({title:l("Success","kivicare-clinic-management-system"),text:L?.message||l("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{ie()})},onError:L=>{console.error("Bulk update status error:",L);const Q=L?.response?.data?.message||L?.message||l("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}]:[],W=f.useMemo(()=>[{accessorKey:"id",header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:z=>z.getValue()},{accessorKey:"taxName",header:()=>l("Tax Name","kivicare-clinic-management-system"),enableSorting:!0,cell:z=>z.getValue()},{accessorKey:"taxRate",header:()=>l("Tax Rate","kivicare-clinic-management-system"),enableSorting:!0,cell:z=>z.getValue()},...!g&&!x?[{accessorKey:"clinicName",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:z})=>i.jsx(i.Fragment,{children:z.original.clinicName?i.jsx(Zt,{profileUrl:z.original.clinic_image_url,name:z.original.clinicName,email:z.original.clinicEmail}):i.jsx("span",{className:"",children:l("All Clinic","kivicare-clinic-management-system")})})}]:[],{accessorKey:"doctorName",header:()=>l("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:z})=>i.jsx(i.Fragment,{children:z.original.doctorName?i.jsx(Zt,{profileUrl:z.original.doctor_image_url,name:z.original.doctorName,email:z.original.doctorEmail}):i.jsx("span",{className:"",children:l("All Doctor","kivicare-clinic-management-system")})})},{accessorKey:"serviceName",header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:z})=>i.jsx(i.Fragment,{children:z.original.serviceName?i.jsx(Zt,{profileUrl:z.original.service_image_url,name:z.original.serviceName}):i.jsx("span",{className:"",children:l("All Service","kivicare-clinic-management-system")})})},{accessorKey:"status",header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:z=>{const ie=z.row.original,re=Number(ie.status),de=async L=>{const Q=L.target.checked?1:0,{isConfirmed:V}=await bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to update status?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"});if(!V){L.target.checked=re===1;return}yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),N.mutate({id:ie.id,status:Q},{onSuccess:()=>{St({title:l("Success","kivicare-clinic-management-system"),text:l("Status updated successfully.","kivicare-clinic-management-system")})},onError:Z=>{L.target.checked=re===1,rt({title:l("Error","kivicare-clinic-management-system"),text:Z?.response?.data?.message||Z?.message||l("Failed to update status.","kivicare-clinic-management-system")})}})};return n("tax_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`tax-status-${ie.id}`,checked:re===1,onChange:de}),i.jsx("label",{className:"form-check-label",htmlFor:`tax-status-${ie.id}`,children:i.jsx("span",{className:`badge ${re===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:re===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${re===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:re===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}},...n("tax_edit")||n("tax_view")||n("tax_delete")?[{id:"action",header:()=>l("Action","kivicare-clinic-management-system"),cell:z=>{const ie=z.row.original,re=de=>L=>i.jsx(ut,{id:`tooltip-${z.cell.row.original.id}-${de}`,...L,children:de});return i.jsx("div",{className:"d-flex align-items-center gap-3",children:r?i.jsxs(i.Fragment,{children:[n("tax_edit")&&i.jsx(Qe,{placement:"top",overlay:re(l("Edit","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/tax/edit/${ie.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),n("tax_delete")&&i.jsx(Qe,{placement:"top",overlay:re(l("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async de=>{de.preventDefault();const{isConfirmed:L}=await bt({title:l("Delete Tax?","kivicare-clinic-management-system"),text:l("You're about to delete this tax.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep tax","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"});L&&(yt({title:l("Deleting Tax...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected tax.<br>This won't take long.","kivicare-clinic-management-system")}),j.mutate(ie.id,{onSuccess:()=>{St({title:l("Tax Deleted","kivicare-clinic-management-system"),text:l("Tax has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to taxes","kivicare-clinic-management-system")})},onError:Q=>{rt({title:l("Error","kivicare-clinic-management-system"),text:Q?.response?.data?.message||Q?.message||l("Failed to delete tax.","kivicare-clinic-management-system")})}}))},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]}):i.jsx("span",{className:"text-muted",children:l("Pro Only","kivicare-clinic-management-system")})})}}]:[]],[n,g,x]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsx("h5",{children:l("Tax List","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[n("tax_add")&&i.jsxs(gt,{to:r?"/tax/add":"#",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-plus-circle"})," ",l("Add Tax","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[i.jsx("i",{className:"ph ph-funnel"})," ",l("Filter","kivicare-clinic-management-system")]})]})]}),n("tax_export")&&r&&i.jsx("div",{className:"kc-table-wrapper",children:i.jsx(wi,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsx("div",{ref:u,className:"d-flex justify-content-end mb-4 position-absolute top-0 w-100",children:i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Y("csv"),disabled:_.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Y("xls"),disabled:_.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Y("pdf"),disabled:_.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})})})}),i.jsx(wn,{data:fe,columns:W,moduleNamePlural:"taxes",currentPage:M,perPage:E,totalItems:P,lastPage:D,isLoading:T,bulkActions:le,onPageChange:z=>h(ie=>({...ie,page:z})),onPerPageChange:z=>h(ie=>({...ie,perPage:z,page:1})),onSortingChange:ne,manualSorting:!0,isBulkActionShow:z=>{m(z)}}),i.jsx(ha,{show:o,onHide:()=>c(!1),queryParams:p,hasAppliedFilters:Object.keys(K).length>0,onApplyFilters:z=>{h({...z,page:1}),c(!1)},onResetFilters:()=>{h({}),c(!1)},title:l("Filters","kivicare-clinic-management-system"),fields:[{name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),type:"select",options:U},{name:"doctor",label:l("Doctor","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:y,dependencies:{clinic_ids:"clinic"},isSearchable:!0,storeObject:!0},{name:"service",label:l("Service","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:b,dependencies:{clinic_id:"clinic",doctor_ids:"doctor"},isSearchable:!0,storeObject:!0},{name:"taxName",label:l("Tax Name","kivicare-clinic-management-system"),type:"text",placeholder:l("Enter Tax Name","kivicare-clinic-management-system")},{name:"status",label:l("Status","kivicare-clinic-management-system"),type:"select",options:[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}]}]}),!r&&i.jsx(ri,{text:l("Taxes management is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},fne=({values:t,errors:e,onChange:n,onValidate:s,onCancel:a,isLoading:r,error:o,success:c,isEditing:d=!1})=>{const{getCurrencyDetail:m}=ht(),p=m().prefix,h=[{value:"1",label:l("Active","kivicare-clinic-management-system")},{value:"0",label:l("Inactive","kivicare-clinic-management-system")}],g=[{value:"fixed",label:p},{value:"percentage",label:"%"}],{data:x,isLoading:v}=iu(),b=(Array.isArray(x)?x:Array.isArray(x?.data)?x.data:[]).map(A=>({value:A.id,label:A.label||A.name})),j=ze(),k=async({page:A,per_page:M,search:E})=>{try{const P={dataType:"clinicList",page:A,per_page:M,search:E};return await j.fetchQuery({queryKey:vt.list(P),queryFn:()=>Bt.getStaticData(P),staleTime:3e5})}catch{return{data:[],pagination:{has_more:!1}}}},S=async({page:A,per_page:M,search:E,clinic_ids:P})=>{try{const D={dataType:"staticData",staticDataType:"doctors",page:A,per_page:M,search:E};return P&&P.length>0&&(D.clinic_ids=P),await j.fetchQuery({queryKey:vt.list(D),queryFn:()=>Bt.getStaticData(D),staleTime:0})}catch{return{data:[],pagination:{has_more:!1}}}},N=async({page:A,per_page:M,search:E,clinic_ids:P,doctor_ids:D})=>{try{const O={dataType:"staticData",staticDataType:"servicesWithPrice",page:A,per_page:M,search:E};P&&P.length>0&&(O.clinic_ids=P),D&&D.length>0&&(O.doctor_ids=Array.isArray(D)?D.join(","):D);const F=await j.fetchQuery({queryKey:vt.list(O),queryFn:()=>Bt.getStaticData(O),staleTime:0});return F.data=F.data.map(q=>({...q,id:q.service_id})),F}catch{return{data:[],pagination:{has_more:!1}}}},_=b.find(A=>String(A.value)===String(t.clinic))||null,w=g.find(A=>A.value===t.rateType?.value)||g[0],T=h.find(A=>String(A.value)===String(t.status?.value||t.status))||h[0];return i.jsxs("div",{className:"add-tax-form",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${e.name?" is-invalid":""}`,placeholder:l("Enter Tax Name","kivicare-clinic-management-system"),value:t.name,onChange:A=>n({...t,name:A.target.value}),required:!0}),e.name&&i.jsx("div",{className:"invalid-feedback",children:e.name})]})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Tax Rate","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ot,{options:g,value:w,onChange:A=>n({...t,rateType:A}),isDisabled:!1,styles:{container:A=>({...A,minWidth:80,width:80}),menuPortal:A=>({...A,zIndex:9999})},className:"react-select-box",classNamePrefix:"react-select"}),i.jsx("input",{type:"text",className:`form-control${e.rateValue?" is-invalid":""}`,placeholder:l("Enter Tax Rate","kivicare-clinic-management-system"),value:t.rateValue,onChange:A=>{let M=A.target.value;M=M.replace(/[^0-9.]/g,"");const E=M.split(".");E.length>2&&(M=E[0]+"."+E.slice(1).join("")),n({...t,rateValue:M})},onInput:A=>{let M=A.target.value;M=M.replace(/[^0-9.]/g,"");const E=M.split(".");E.length>2&&(M=E[0]+"."+E.slice(1).join("")),A.target.value=M},required:!0})]}),e.rateValue&&i.jsx("div",{className:"invalid-feedback d-block",children:e.rateValue})]})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Clinic","kivicare-clinic-management-system")}),i.jsx(yn,{id:"clinic",loadOptions:k,value:_,onChange:A=>n({...t,clinic:A?A.value:null,doctor:null}),placeholder:l("Select clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isClearable:!0})]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("To apply tax to all clinics, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Doctor","kivicare-clinic-management-system")}),i.jsx(yn,{id:"doctor",loadOptions:S,value:t.doctor,onChange:A=>n({...t,doctor:A,service:null}),placeholder:l("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[]},isClearable:!0,isMulti:!d},`doctor-${t.clinic||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("To apply tax to all doctors, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Service","kivicare-clinic-management-system")}),i.jsx(yn,{id:"service",loadOptions:N,value:t.service,onChange:A=>n({...t,service:A}),placeholder:l("Select Service","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[],doctor_ids:Array.isArray(t.doctor)?t.doctor.map(A=>A?.value):t.doctor?.value?[t.doctor.value]:[]},isClearable:!0,isMulti:!d},`service-${t.clinic||"none"}-${Array.isArray(t.doctor)?t.doctor.map(A=>A?.value).join(","):t.doctor?.value||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("To apply tax to all services, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ot,{className:"react-select-box",classNamePrefix:"react-select",options:h,value:T,onChange:A=>n({...t,status:A}),isClearable:!1,styles:{menuPortal:A=>({...A,zIndex:9999})},placeholder:l("Status","kivicare-clinic-management-system"),required:!0}),e.status&&i.jsx("div",{className:"invalid-feedback",children:e.status})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary d-flex align-items-center",onClick:a,disabled:r,children:i.jsx("span",{children:l("Cancel","kivicare-clinic-management-system")})}),i.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center",onClick:s,disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),i.jsx("span",{children:l("Saving...","kivicare-clinic-management-system")})]}):i.jsx("span",{children:l("Save","kivicare-clinic-management-system")})})]})]})},bC=({isEditing:t=!1,editId:e,onSuccess:n,onCancel:s,...a})=>{const{getCurrencyDetail:r}=ht(),c=r().prefix,d=[{value:"1",label:"Active"},{value:"0",label:"Inactive"}],m=[{value:"fixed",label:c},{value:"percentage",label:"%"}],u={name:"",rateType:m[0],rateValue:"",clinic:null,doctor:null,service:null,status:d[0]},{id:p}=Wt(),[h,g]=f.useState(u),[x,v]=f.useState({}),[y,b]=f.useState(!1),j=lne(),k=dn(),{data:S,isLoading:N}=mne(t?p:null),_=s?()=>s(k):()=>k("/tax"),w=async(M,E)=>{if(!M)return null;try{const D=(await Bt.getStaticData({dataType:"staticData",staticDataType:E,page:1,per_page:100,search:""}))?.data||[],O=String(M),F=D.find(q=>String(q.id)===O||String(q.value)===O);if(F)return[{value:String(F.id||F.value),label:F.label||F.name||String(F.id||F.value)}]}catch(P){console.error(`Error fetching ${E} data:`,P)}return null};f.useEffect(()=>{t&&S&&(async()=>{const[E,P]=await Promise.all([w(S.data.doctor_id,"doctors"),w(S.data.service_id,"servicesWithPrice")]);g({name:S.data.name||"",rateType:m.find(D=>D.value===S.data.taxType)||m[0],rateValue:S.data.taxValue||"",clinic:S.data.clinic_id||"",doctor:E,service:S.data.service,status:d.find(D=>String(D.value)===String(S.data.status))||d[0]})})()},[t,S]);const T=()=>{const M={};return h.name.trim()||(M.name=l("Tax Name is required","kivicare-clinic-management-system")),h.rateValue.trim()?isNaN(h.rateValue)?M.rateValue=l("Tax Rate must be a number","kivicare-clinic-management-system"):parseFloat(h.rateValue)<0?M.rateValue=l("Tax Rate cannot be negative","kivicare-clinic-management-system"):h.rateType?.value==="percentage"&&parseFloat(h.rateValue)>100&&(M.rateValue=l("Percentage cannot be greater than 100","kivicare-clinic-management-system")):M.rateValue=l("Tax Rate is required","kivicare-clinic-management-system"),h.status||(M.status=l("Status is required","kivicare-clinic-management-system")),v(M),Object.keys(M).length===0},A=()=>{T()&&(b(!0),j.mutate({id:t?p:void 0,data:{name:h.name,rateType:h.rateType.value,rateValue:h.rateValue,clinic:h.clinic||null,doctor:h.doctor||null,service:h.service||null,status:h.status?.value||null},isEdit:t},{onSuccess:M=>{Ee.success(M?.message||l("Tax saved successfully!","kivicare-clinic-management-system"),{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{k("/tax")},1600)},onError:M=>{const E=M?.response?.data?.message||M?.message||l("Something went wrong!","kivicare-clinic-management-system");Ee.error(E),b(!1)}}))};return t&&N?i.jsx(Oy,{}):i.jsx(fne,{values:h,errors:x,onChange:g,onValidate:A,onCancel:_,isLoading:y||j.isLoading||N,error:j.isError,success:j.isSuccess,isEditing:t})},vne=[Vn({path:"/tax",title:"Taxes",outlet:rne,permissions:["tax_list"],meta:{description:"Tax management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:gne,title:"All Taxes",index:!0,permissions:["tax_list"],meta:{description:"List of all taxes",breadcrumb:"All Taxes"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:bC,title:"Add Tax",props:{isEditing:!1},permissions:["tax_add"],meta:{description:"Create a new tax",breadcrumb:"Add New"},skeleton:Oy}),We({path:"edit/:id",component:bC,title:"Edit Tax",props:{isEditing:!0},index:!0,permissions:["tax_edit"],meta:{description:"Edit existing tax",breadcrumb:"Edit"},skeleton:Oy})]})],xne=()=>i.jsxs("div",{className:"get-help-container",children:[i.jsx("div",{className:"get-help-header"}),i.jsx("div",{className:"get-help-content",children:i.jsx(Uc,{})}),i.jsx("div",{className:"get-help-footer"})]}),yne=({activeTab:t="shortcodes",showHeader:e=!0,showTabs:n=!0})=>i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[e&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"help-tabs",children:[n&&i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:Array.from({length:8}).map((s,a)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:`${80+Math.random()*40}px`,height:"38px",style:{borderRadius:"4px"}})},`tab-skeleton-${a}`))}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-4"}),Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"mb-3",children:i.jsx(C,{width:`${120+Math.random()*60}px`,height:"1.25rem",className:"d-inline-block me-4 mb-2"})}),i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem"})]}),i.jsxs("div",{className:"mt-3 mt-md-0 ms-md-3 flex-shrink-0",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx(C,{width:"70px",height:"0.875rem"})]})]},`shortcode-${a}`))]})}),t!=="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx(C,{width:"200px",height:"1.25rem"}),i.jsx(C,{width:"150px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"98%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem",className:"mb-4"}),i.jsx(C,{width:"180px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-3 mb-4",children:Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"d-flex gap-2 mb-2",children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem"})]},`content-${a}`))}),i.jsx("div",{className:"ps-4 mb-3",children:Array.from({length:3}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"98%",height:"1rem"})]},`list-item-${a}`))})]})})]})})]})]})})}),bne=()=>{const[t,e]=f.useState("shortcodes"),[n,s]=f.useState(null),{isAddonActive:a}=ht(),r=(o,c)=>{navigator.clipboard.writeText(o),s(c),setTimeout(()=>{s(null)},1500)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("Get help","kivicare-clinic-management-system")})}),a("kiviPro")&&i.jsx("div",{className:" d-flex align-items-center gap-3",children:i.jsx("a",{href:"https://iqonic.desky.support/",className:"btn btn-primary",children:l("Get Support","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"help-tabs",children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:[i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="shortcodes"?"nav-link active":"nav-link",id:"nav-shortcodes-tab",onClick:()=>e("shortcodes"),type:"button",role:"tab","aria-controls":"nav-shortcodes","aria-selected":t==="shortcodes",children:l("Shortcodes","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="telemed"?"nav-link active":"nav-link",id:"nav-telemed-tab",onClick:()=>e("telemed"),type:"button",role:"tab","aria-controls":"nav-telemed","aria-selected":t==="telemed",children:l("Telemed (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="woocommerce"?"nav-link active":"nav-link",id:"nav-woocommerce-tab",onClick:()=>e("woocommerce"),type:"button",role:"tab","aria-controls":"nav-woocommerce","aria-selected":t==="woocommerce",children:l("Woocommerce (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="googlecalendar"?"nav-link active":"nav-link",id:"nav-googlecalendar-tab",onClick:()=>e("googlecalendar"),type:"button",role:"tab","aria-controls":"nav-googlecalendar","aria-selected":t==="googlecalendar",children:l("Google Calendar (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="sms"?"nav-link active":"nav-link",id:"nav-sms-tab",onClick:()=>e("sms"),type:"button",role:"tab","aria-controls":"nav-sms","aria-selected":t==="sms",children:l("SMS (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="language"?"nav-link active":"nav-link",id:"nav-language-tab",onClick:()=>e("language"),type:"button",role:"tab","aria-controls":"nav-language","aria-selected":t==="language",children:l("Language","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="appointments"?"nav-link active":"nav-link",id:"nav-appointments-tab",onClick:()=>e("appointments"),type:"button",role:"tab","aria-controls":"nav-appointments","aria-selected":t==="appointments",children:l("Appointments","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="holiday"?"nav-link active":"nav-link",id:"nav-holiday-tab",onClick:()=>e("holiday"),type:"button",role:"tab","aria-controls":"nav-holiday","aria-selected":t==="holiday",children:l("Holiday","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel","aria-labelledby":"nav-shortcodes-tab",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx("h5",{className:"mb-4",children:l("KiviCare Shortcode","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[bookAppointment]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="bookAppointment"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[bookAppointment]","bookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[patientDashboard]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="patientDashboard"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[patientDashboard]","patientDashboard"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode patient can register,login, manage profile, manage password and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/patient-dashboard-widget/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointment]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareBookAppointment"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareBookAppointment]","kivicareBookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"mt-md-3",children:i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget-customizable/",children:l("Overview","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareRegisterLogin]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareRegisterLogin"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareRegisterLogin]","kivicareRegisterLogin"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:l("With following shortcode kivicare users ( doctor, patient and receptionist ) can register and login","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointmentButton]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareBookAppointmentButton"?l("Copied","kivicare-clinic-management-system"):l("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>r("[kivicareBookAppointmentButton]","kivicareBookAppointmentButton"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",l("Copy Code","kivicare-clinic-management-system")]})}),i.jsxs("p",{className:"mt-3 mb-0",children:[l("With following shortcode Users can register/login and book appointment In Popup","kivicare-clinic-management-system")," ",i.jsx(st,{className:""})]})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-button-widget-customizable/",children:l("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",l("Deprecated","kivicare-clinic-management-system"),")"]})]})]})]})}),t==="telemed"&&i.jsxs("div",{className:"tab-pane fade show active",id:"nav-telemed",role:"tabpanel","aria-labelledby":"nav-telemed-tab",children:[i.jsxs("div",{className:" mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Telemed (Zoom Integration)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/#zoom-configuration",className:"btn btn-primary",children:l("Telemed Documentation","kivicare-clinic-management-system")})]}),i.jsx("p",{className:"mb-2",children:l("Setting up a Telemed (Zoom) appointment booking for a doctor. Doctor need to just follow few steps as mentioned below. We have also mentioned these steps in the doctor detail page. An administrator or Clinic admin can also do this for a doctor.","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("When a doctor is done with saving the Zoom API keys and charges, the doctor will get a Telemed service in their appointment services list.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Service name rendered from settings.","kivicare-clinic-management-system")]})]}),i.jsx("h6",{className:"fw-semibold mb-3",children:l("Zoom Configuration Guide","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 1:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[l("Sign up or sign in here. ","kivicare-clinic-management-system"),i.jsx("a",{href:"https://marketplace.zoom.us/",className:"text-decoration-none fw-semibold",children:l("Zoom Market Place Portal","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 2:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[l("Click/Hover on Develop button at the right in navigation bar and click on build app. ","kivicare-clinic-management-system"),i.jsxs("a",{href:"https://marketplace.zoom.us/develop/create",className:"text-decoration-none fw-semibold",children:['"',l("Create App","kivicare-clinic-management-system"),'"']}),"."]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 3:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l("Select JWT and click Create.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:l("Step 4:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l("Fill the mandatory information. In the App Credentials tab, you can see the API Key and API Secret.","kivicare-clinic-management-system")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"fw-bold",children:l("Step 5:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:l(`Copy and paste the API Key and API Secret here, then click on "Save"  you're ready to go.`,"kivicare-clinic-management-system")})]})]})]}),t==="woocommerce"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-woocommerce",role:"tabpanel","aria-labelledby":"nav-woocommerce-tab",children:i.jsxs("div",{className:"wocommerce-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("Woocommerce Payment Gateway","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/",className:"btn btn-primary ",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("For setting up a woocommerce payment gateway with kivicare payment, You have a basic woocommmerce setup with any payment method on it.","kivicare-clinic-management-system")}),i.jsx("li",{className:"mb-3",children:l("By default woocommerce payment is Disabled you need to Enabled it from payment tab in Setting page .","kivicare-clinic-management-system")}),i.jsx("li",{children:l("Appointment Service charges are considered for appointment's woocommerce payment.","kivicare-clinic-management-system")})]})]})}),t==="googlecalendar"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-googlecalendar",role:"tabpanel","aria-labelledby":"nav-googlecalendar-tab",children:i.jsxs("div",{className:"google-calander-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("Google Calendar","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-calendar/",className:"btn btn-primary",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:l("For setting up a Google Calendar (Appointment reminder) in kivicare setup we have provide a setup option in Pro Setting tab. You just need to enable google calendar service and fillup the Api key details.","kivicare-clinic-management-system")})})]})}),t==="sms"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-sms",role:"tabpanel","aria-labelledby":"nav-sms-tab",children:i.jsxs("div",{className:"sms-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:l("SMS (Twilio)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/pro-version/sms-notifications-twilio/",className:"btn btn-primary",children:l("Documentation","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[l("For sending a SMS with kivicare we are providing","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/sms",children:l("Twilio SMS","kivicare-clinic-management-system")})," ",l("support.","kivicare-clinic-management-system")]})})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Set Twilio Geo Location Permission with your Twilio account. Basically you need to select country where you want to enable your SMS Service. ","kivicare-clinic-management-system"),i.jsx("a",{className:"text-primary flex-shrink-0 fw-semibold",href:"https://www.twilio.com/console/sms/settings/geo-permissions",children:l("Enable Geo Location","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-3",children:l("Common issue with Free trial SMS setup with Twilio","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("With twilio free SMS trial you can send SMS on only verified number.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[l("Here you can verify receiver's number with Twilio.","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/console/phone-numbers/verified",children:l("Verify receiver's number here","kivicare-clinic-management-system")})]})})]})]})]})}),t==="language"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-language",role:"tabpanel","aria-labelledby":"nav-language-tab",children:i.jsxs("div",{className:"language-tab",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:i.jsxs("h6",{className:"mb-0",children:[l("Multi-Language","kivicare-clinic-management-system")," ",i.jsxs("span",{className:"text-muted",children:["(",l("Soft deprecated","kivicare-clinic-management-system"),")"]})]})}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:l("For changing a language in your kivicare setup you we have provided a change language option in Pro settings tab in Settings page.","kivicare-clinic-management-system")}),i.jsx("li",{children:l("You need to change text for your selected language manually from Language setting tab in Settings page.","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Kivicare plugin requires a folder permission on mention path wp-content/uploads/kiviCare_lang","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("Common issue: Kivicare dashboard blank ?","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("This is happening because your kivicare setup has not given a appropriate permission for this wp-content/uploads/kiviCare_lang path.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"fw-semibold",children:l("Solution:","kivicare-clinic-management-system")})," ",l("You need to manually copy language json files from plugin folder resources/assets/lang and paste it to wp-content/uploads/kiviCare_lang folder.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:l("Wordpress Translation Plugin Support","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("You can change kivicare plugin text with the use of any wordpress translation plugin.","kivicare-clinic-management-system")})]})]})}),t==="appointments"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-appointments",role:"tabpanel","aria-labelledby":"nav-appointments-tab",children:i.jsxs("div",{className:"appointments-tab",children:[i.jsxs("p",{className:"mb-5",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If Woocommerce payment settings is toggle on, then appointment message sent through Email/SMS/Whatsapp after payment successfully done by patient And this feature is only available on Kivicare-Pro.","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-3",children:l("Restrict Advance Appointment Booking","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Open booking days:","kivicare-clinic-management-system")}),l("As consideration of current date booking already opened as mentioned days in settings.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:l("Close booking days:","kivicare-clinic-management-system")}),l("As consideration of current date booking already closed as mentioned days in settings.","kivicare-clinic-management-system")]})]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("Example","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("Current Date: 25 November","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-2",children:[i.jsx("span",{className:"",children:l("Pre-booking:","kivicare-clinic-management-system")})," ",l("10 days , so patient/doctor/receptionist can't select the date from 25 November to 5 December.","kivicare-clinic-management-system")]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"",children:l("Post-booking:","kivicare-clinic-management-system")})," ",l("10 days, so patient/doctor/receptionist can't select the date after 5 December.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:l("File Upload Setting","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:l("If Appointment File Upload toggle is on, then patient can add their reports at the time of booking an appointment.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If kivicare pro version is activate then patients can add more then one report, else patients can only add one report at a time while booking an appointment.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:l("Appointment Reminder","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Appointment Email Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Email Reminder will be send to patient through Email.","kivicare-clinic-management-system")]}),i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:l("Appointment Sms Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Sms Reminder will be send to patient through SMS.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:l("Appointment Whatsapp Reminder:","kivicare-clinic-management-system")})," ",l("If the toggle is on ,Then an Appointment Whatsapp Reminder will be send to patient through WhatsApp.","kivicare-clinic-management-system")]})]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Appointment Sms Reminder and Appointment Whatsapp Reminder, Required Kivicare-Pro to be Activated and also from pro settings: Toggle on WhatsApp and SMS, for access Appointment Sms Reminder and Appointment Whatsapp Reminder, this two setting is required to toggle on.","kivicare-clinic-management-system")]})]})]})}),t==="holiday"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-holiday",role:"tabpanel","aria-labelledby":"nav-holiday-tab",children:i.jsxs("div",{className:"holiday-tab",children:[i.jsx("h6",{className:"mb-4",children:l("Add Holiday","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsx("li",{className:"mb-3",children:l("If an holiday is set and they have an appointment between that holiday dates then all appointments will get cancelled and appointment cancelled mail/sms/whatsapp message will send to patients.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:l("sms/whatsapp only work in kivicare-pro only.","kivicare-clinic-management-system")})})]}),i.jsxs("p",{className:"m-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("once an holiday is set and appointments get cancelled then cancelled appointments cannot be reverted.","kivicare-clinic-management-system")]})]})})]})})]})]})})})};function wC(){return i.jsx("div",{children:"GetHelpManageForm"})}const wne=[Vn({path:"/get-help",title:"Get Help",outlet:xne,meta:{description:"Help and support system",icon:"help-circle",showInSidebar:!0},children:[We({path:"",component:bne,title:"All Help Topics",index:!0,skeleton:yne,meta:{description:"List of all help topics",breadcrumb:"All Help Topics"}}),We({path:"add",component:wC,title:"Add Help Topic",props:{isEditing:!1},meta:{description:"Create a new help topic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:wC,title:"Edit Help Topic",props:{isEditing:!0},index:!0,meta:{description:"Edit existing help topic",breadcrumb:"Edit"}})]})],kne=()=>{const t=Hn();return i.jsxs("div",{className:"receptionists-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/receptionist"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Ly=()=>i.jsxs(i.Fragment,{children:[i.jsx(fl,{titleWidth:"140px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",style:{borderRadius:"50%"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"}),i.jsx(C,{width:"55px",height:"1rem"})]})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"120px"})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(nt,{width:"80px",height:"38px"}),i.jsx(nt,{width:"130px",height:"38px"})]})]}),za={getReceptionists:(t={})=>pe({endpoint:"receptionists",method:"GET",data:t}),getReceptionist:t=>pe({endpoint:`receptionists/${t}`,method:"GET"}),createReceptionist:t=>pe({endpoint:"receptionists",method:"POST",data:t}),updateReceptionist:(t,e)=>pe({endpoint:`receptionists/${t}`,method:"PUT",data:e}),deleteReceptionist:t=>pe({endpoint:`receptionists/${t}`,method:"DELETE"}),getClinicReceptionists:(t,e={})=>pe({endpoint:`clinics/${t}/receptionists`,method:"GET",data:e}),getReceptionistPatients:(t,e={})=>pe({endpoint:`receptionists/${t}/patients`,method:"GET",data:e}),getReceptionistSchedule:(t,e={})=>pe({endpoint:`receptionists/${t}/schedule`,method:"GET",data:e}),deleteReceptionist:t=>pe({endpoint:`receptionists/${t}`,method:"DELETE"}),bulkDeleteReceptionists:t=>pe({endpoint:"receptionists/bulk-delete",method:"POST",data:{ids:t}}),resendCredentials:t=>pe({endpoint:`receptionists/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>pe({endpoint:"receptionists/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateReceptionistStatus:(t,e)=>pe({endpoint:"receptionists/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportReceptionists:(t={})=>pe({endpoint:"receptionists/export",method:"GET",data:t})},Bs={all:["receptionists"],lists:()=>[...Bs.all,"list"],list:t=>[...Bs.lists(),{filters:t}],details:()=>[...Bs.all,"detail"],detail:t=>[...Bs.details(),t]},jne=(t={},e={})=>ft({queryKey:Bs.list(t),queryFn:()=>za.getReceptionists(t),...e}),Nne=(t,e={})=>ft({queryKey:Bs.detail(t),queryFn:()=>za.getReceptionist(t),enabled:!!t,...e}),Cne=()=>{const t=ze();return Le({mutationFn:e=>za.createReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Bs.lists()})}})},Sne=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>za.updateReceptionist(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Bs.detail(n.id)}),t.invalidateQueries({queryKey:Bs.lists()})}})},_ne=()=>{const t=ze();return Le({mutationFn:e=>za.deleteReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Bs.lists()})}})},Ene=()=>{const t=ze();return Le({mutationFn:e=>za.bulkDeleteReceptionists(e),onSuccess:()=>{t.invalidateQueries({queryKey:Bs.lists()})}})},Tne=()=>Le({mutationFn:t=>za.resendCredentials(t)}),Ane=()=>Le({mutationFn:t=>za.bulkResendCredentials(t)}),Dne=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>za.bulkUpdateReceptionistStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Bs.lists()})}})},Rne=()=>Le({mutationFn:t=>za.exportReceptionists(t)}),Pne=()=>{const{hasCapability:t,isAddonActive:e}=ht(),[n,s]=f.useState([]),[a,r]=f.useState(!1),o=f.useRef(null),c=Kn(),d=mi(),m={page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:""},[u,p]=f.useState(m),h=I=>{if(I.length>0){const{id:H,desc:B}=I[0],te={id:"id",profile:"display_name",clinic_name:"clinic_name",contact_number:"contact_number",status:"user_status"};p(oe=>({...oe,orderby:te[H]||H,order:B?"desc":"asc",page:1}))}else p(H=>({...H,orderby:"",order:"",page:1}))},[g,x]=f.useState(""),v=qa(g,500);He.useEffect(()=>{p(I=>({...I,search:v,page:1}))},[v]);const[y,b]=f.useState(!1),[j,k]=f.useState(!1),S=f.useMemo(()=>Object.fromEntries(Object.entries(u).filter(([I,H])=>H!==""&&H!==null&&H!==void 0)),[u]),{data:N,isLoading:_,error:w,refetch:T}=jne(S),A=ze(),M=async({page:I,per_page:H,search:B})=>{try{const te={dataType:"clinicList",page:I,per_page:H,search:B},oe=await A.fetchQuery({queryKey:vt.list(te),queryFn:()=>Bt.getStaticData(te),staleTime:300*1e3}),ye=oe.data.map(me=>({value:me.id,label:me.label||me.name}));return s(me=>[...me,...ye]),oe}catch(te){return console.error("Error loading clinics:",te),{data:[],pagination:{has_more:!1}}}},E=_ne(),P=Ene(),D=Ane(),O=Dne(),F=Rne(),q=Tne(),U=N?.data?.receptionists||[],K=N?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ne=I=>{bt({title:l("Delete Receptionist?","kivicare-clinic-management-system"),text:l("You're about to delete this receptionist.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep receptionist","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(H=>{H.isConfirmed&&(yt({title:l("Deleting Receptionist...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected receptionist.<br>This won't take long.","kivicare-clinic-management-system")}),E.mutate(I,{onSuccess:()=>{St({title:l("Receptionist Deleted","kivicare-clinic-management-system"),text:l("Receptionist has been deleted.","kivicare-clinic-management-system"),confirmButtonText:l("Back to receptionists","kivicare-clinic-management-system")}),T()},onError:B=>{rt({title:l("Error!","kivicare-clinic-management-system"),text:B.message||l("Failed to delete receptionist.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},Y=(I,H)=>{bt({title:l("Resend Credentials?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),H),icon:"ph-question",confirmButtonText:l("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(B=>{B.isConfirmed&&q.mutate(I,{onSuccess:()=>{St({title:l("Credentials Sent!","kivicare-clinic-management-system"),text:l("Receptionist credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onError:te=>{rt({title:l("Error!","kivicare-clinic-management-system"),text:te.message||l("Failed to resend credentials.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}})})},fe=e("kiviPro"),le=In(),W=f.useMemo(()=>[le.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:I=>i.jsx("div",{className:"font-weight-medium",children:I.getValue()})}),le.accessor("profile",{id:"profile",enableSorting:!0,header:()=>l("Receptionist","kivicare-clinic-management-system"),cell:I=>i.jsx(Zt,{profileUrl:I.row.original.receptionist_image_url,name:I.row.original.first_name+" "+I.row.original.last_name,email:I.row.original.email||"",fallbackText:(I.row.original.first_name?.charAt(0)||"")+(I.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system")}),sortingFn:(I,H)=>{const B=`${I.original.first_name} ${I.original.last_name}`.toLowerCase(),te=`${H.original.first_name} ${H.original.last_name}`.toLowerCase();return B.localeCompare(te)}}),...fe&&!c&&!d?[le.accessor("clinic_name",{id:"clinic_name",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(I,H)=>{const B=`${I.original.first_name} ${I.original.last_name}`.toLowerCase(),te=`${H.original.first_name} ${H.original.last_name}`.toLowerCase();return B.localeCompare(te)},cell:I=>i.jsx(Zt,{profileUrl:I.row.original?.clinic?.clinic_image_url,name:I.row.original?.clinic?.clinic_name,email:I.row.original?.clinic?.clinic_email||"",fallbackText:(I.row.original.first_name?.charAt(0)||"")+(I.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:l("Receptionist","kivicare-clinic-management-system")})})]:[],le.accessor("contact_number",{id:"contact_number",header:()=>l("Contact Number","kivicare-clinic-management-system"),cell:I=>i.jsx("div",{children:i.jsx("span",{children:I.row.original.contact_number||""})})}),le.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:I=>{const H=Number(I.getValue()),B=I.row.original,te=()=>{const oe=H===1?0:1;bt({title:l("Update Status?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),B.first_name+" "+B.last_name,oe===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(ye=>{ye.isConfirmed&&(yt({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),O.mutate({ids:[B.id],status:oe},{onSuccess:()=>{St({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Receptionist status has been updated successfully.","kivicare-clinic-management-system")})},onError:me=>{rt({title:l("Error","kivicare-clinic-management-system"),text:me.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return t("receptionist_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`receptionist-status-${B.id}`,checked:H===0,onChange:te}),i.jsx("label",{className:"form-check-label",htmlFor:`receptionist-status-${B.id}`,children:i.jsx("span",{className:`badge ${H===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:H===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${H===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:H===0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),...t("receptionist_edit")||t("receptionist_resend_credential")||t("receptionist_delete")?[le.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>{const H=B=>te=>i.jsx(ut,{id:`tooltip-${I.cell.row.original.id}-${B}`,...te,children:B});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[t("receptionist_edit")&&i.jsx(Qe,{placement:"top",overlay:H(l("Edit","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/receptionist/edit/${I.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),t("receptionist_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:H(l("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>Y(I.row.original.id,I.row.original.display_name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),t("receptionist_delete")&&i.jsx(Qe,{placement:"top",overlay:H(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ne(I.row.original.id),disabled:E.isPending,children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[E.isPending,t]),z=I=>{x(I.target.value)},ie=[{value:"0",label:l("Active","kivicare-clinic-management-system")},{value:"1",label:l("Inactive","kivicare-clinic-management-system")}],re=async I=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const H={format:I};u.search&&(H.search=u.search),u.clinic&&(H.clinic_id=u.clinic),u.status!==""&&u.status!==null&&u.status!==void 0&&(H.status=u.status),u.orderBy&&(H.orderby=u.orderBy),u.order&&(H.order=u.order);const B=await F.mutateAsync(H);if(B?.data?.receptionists){const te=new Date().toISOString().split("T")[0],oe=B.data.receptionists.map(ye=>({id:ye.id,name:ye.name,clinic_name:ye.clinic_name||"",clinic_id:ye.clinic_id||"",email:ye.email,contact_number:ye.contact_number,gender:ye.gender,dob:ye.dob,status:ye.user_status,full_address:ye.full_address}));switch(I){case"csv":cs(oe,`receptionists-${te}.csv`);break;case"xls":ds(oe,`receptionists-${te}.xls`);break;case"pdf":ms(oe,`receptionists-${te}.pdf`,"Receptionists List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}}catch(H){console.error("Export error:",H),rt({title:l("Error!","kivicare-clinic-management-system"),text:H.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},de=()=>re("csv"),L=()=>re("xls"),[Q,V]=f.useState(!1),Z=()=>{Q||(V(!0),re("pdf"),setTimeout(()=>V(!1),2e3))},X=I=>{p({...u,...I,page:1}),b(!1)},R=()=>{p(m),s([]),x("")},G=f.useMemo(()=>["search","id","receptionistName","clinic","receptionistAddress","status"].some(H=>{const B=u[H];return B!=null&&B!==""})||g!=="",[u,g]),ee=async I=>{console.log("Import data:",I);try{return St({title:l("Success!","kivicare-clinic-management-system"),text:l("Receptionists data imported successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),{success:!0}}catch(H){throw console.error("Import error:",H),H}},ae=[{type:"number",name:"id",label:l("Receptionist ID","kivicare-clinic-management-system"),placeholder:l("Enter Receptionist ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:I=>{I.target.value=I.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"receptionistName",label:l("Receptionist Name","kivicare-clinic-management-system"),placeholder:l("Enter Receptionist Name","kivicare-clinic-management-system"),min:1},...fe&&!c&&!d?[{type:"paginatedSelect",name:"clinic",label:l("Clinic","kivicare-clinic-management-system"),placeholder:l("Select clinic","kivicare-clinic-management-system"),optionLoader:M,options:n,key:"clinic-filter"}]:[],{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("Select status","kivicare-clinic-management-system"),options:ie}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Receptionists","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t("receptionist_add")&&i.jsxs(gt,{to:"/receptionist/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Receptionist","kivicare-clinic-management-system")})]}),fe&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>k(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>b(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!a,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:o,children:i.jsxs("div",{ref:o,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[fe&&!c&&!d&&i.jsx(yn,{id:"clinic-filter",placeholder:l("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:M,value:n.find(I=>I.value===u.clinic)||null,onChange:I=>{p(H=>({...H,clinic:I?I.value:""}))},dependencies:{},isClearable:!0}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ie,onChange:I=>p(H=>({...H,status:I?I.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:I=>({...I,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:g,onChange:z})]})}),t("receptionist_export")&&fe&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:de,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:L,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Z,disabled:Q,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:U,columns:W,isLoading:_||E.isPending,error:w,currentPage:K.currentPage,perPage:K.perPage,totalItems:K.total,lastPage:K.lastPage,onPageChange:I=>p(H=>({...H,page:I})),onPerPageChange:I=>p(H=>({...H,perPage:I,page:1})),onSortingChange:h,manualSorting:!0,enableSelection:!0,moduleNamePlural:"receptionists",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(I,H)=>{const B=I.map(te=>te.id);bt({title:l("Delete Receptionists?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${I.length} receptionists</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep receptionists","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(te=>{te.isConfirmed&&(yt({title:l("Deleting Receptionists...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected receptionists.<br>This won't take long.","kivicare-clinic-management-system")}),P.mutate(B,{onSuccess:oe=>{St({title:l("Receptionist Deleted","kivicare-clinic-management-system"),text:l(`${I.length} receptionist${I.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to receptionists","kivicare-clinic-management-system")}),H()},onError:oe=>{console.error("Bulk delete clinics error:",oe);const ye=oe?.response?.data?.message||oe?.message||l("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:ye,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Resend Credentials","kivicare-clinic-management-system"),action:(I,H)=>{const B=I.map(te=>te.id);bt({title:l("Resend Credentials","kivicare-clinic-management-system"),text:l("Are you sure you want to resend credentials to the selected Receptionists?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(te=>{te.isConfirmed&&(yt({title:l("Sending...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),D.mutate(B,{onSuccess:oe=>{St({title:l("Success","kivicare-clinic-management-system"),text:oe?.message||l("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),H()},onError:oe=>{console.error("Bulk resend credentials error:",oe);const ye=oe?.response?.data?.message||oe?.message||l("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:ye,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(I,H)=>{const B=I.map(te=>te.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Receptionists to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(te=>{te.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"0"},{onSuccess:oe=>{St({title:l("Success","kivicare-clinic-management-system"),text:oe?.message||l("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),H()},onError:oe=>{console.error("Bulk update status error:",oe);const ye=oe?.response?.data?.message||oe?.message||l("Failed to update Receptionists status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:ye,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(I,H)=>{const B=I.map(te=>te.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to set the selected Receptionists to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(te=>{te.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"1"},{onSuccess:oe=>{St({title:l("Success","kivicare-clinic-management-system"),text:oe?.message||l("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),H()},onError:oe=>{console.error("Bulk update status error:",oe);const ye=oe?.response?.data?.message||oe?.message||l("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:ye,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:I=>{r(I)}})]}),i.jsx(ha,{show:y,onHide:()=>b(!1),queryParams:u,onApplyFilters:X,onResetFilters:R,title:l("Filters","kivicare-clinic-management-system"),fields:ae,hasAppliedFilters:G}),fe&&i.jsx(Ar,{show:j,onHide:()=>k(!1),onImport:ee,onReopenImport:()=>k(!0),onDataRefresh:T,context:"receptionists"})]})};function Fy({isEditing:t=!1,isProfile:e=!1}){const n=dn(),{id:s}=Wt(),{currentuserID:a,defaultCountryCode:r,showOtherGender:o}=ht(),{data:c}=Cn(),d=ze(),m=f.useMemo(()=>c?.data?.kc_available_translations||[{lang:"en_US",label:"English (United States)"}],[c]),u=e?a:s,p=Cne(),h=Sne(),{isAddonActive:g}=ht(),x=g("kiviPro"),[v,y]=f.useState(!1),b=v||p.isPending,{data:j,isLoading:k,error:S}=Nne(u,{enabled:(t||e)&&!!u}),N=j?.data,_=async({page:W,per_page:z,search:ie})=>{try{const re={dataType:"clinicList",page:W,per_page:z,search:ie};return await d.fetchQuery({queryKey:vt.list(re),queryFn:()=>Bt.getStaticData(re),staleTime:300*1e3})}catch(re){return console.error("Error loading clinics:",re),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},w=Vc.PhoneNumberUtil.getInstance(),T=W=>{try{return w.isValidNumber(w.parseAndKeepRawInput(W))}catch{return!1}},A=[{value:0,label:l("Active","kivicare-clinic-management-system")},{value:1,label:l("Inactive","kivicare-clinic-management-system")}],{register:M,handleSubmit:E,control:P,watch:D,setValue:O,formState:{errors:F},reset:q}=Xt({defaultValues:{receptionistImage:"",receptionistImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",status:A[0],gender:"",address:"",city:"",country:"",postalCode:""}});f.useEffect(()=>{if(t&&N&&!k){const W={firstName:N.first_name||"",lastName:N.last_name||"",email:N.email||"",contactNumber:N.contact_number||"",dob:N.dob||"",gender:N.gender||"",status:A.find(z=>z.value===parseInt(N.status))||A[0],clinic:N?.clinic?{value:N.clinic.clinic_id,label:N.clinic.clinic_name}:null,receptionistImageId:N.receptionist_image_id||"",receptionistImage:N.receptionist_image_url||"",address:N.address||"",city:N.city||"",country:N.country||"",postalCode:N.postal_code||""};console.log(W.clinic),q(W),setTimeout(()=>{O("contactNumber",N.contact_number||"")},0)}},[t,N]);const U=(W,z)=>{console.log(`Updating ${W} with:`,z),O(W,z.url||z.image),O(`${W}Id`,z.id||z.imageId)},K=async W=>{y(!0);try{console.log("Form Data:",W);const z={first_name:W.firstName,last_name:W.lastName,email:W.email,clinic_id:W.clinic?.value||W.clinic,contact_number:W.contactNumber,dob:W.dob,status:W.status?.value||W.status,gender:W.gender,receptionist_image:W.receptionistImage,receptionist_image_id:W.receptionistImageId,address:W.address,city:W.city,country:W.country,postal_code:W.postalCode};let ie;t?(ie=await h.mutateAsync({id:u,...z}),Ee.success(l("Receptionist updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(ie=await p.mutateAsync(z),Ee.success(l("Receptionist created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||n("/receptionist")}catch(z){console.error("Submission error:",z);const ie=z.response?.data?.message||z.message||l("Failed to save receptionist. Please try again.","kivicare-clinic-management-system");Ee.error(ie,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{y(!1)}},ne=W=>{console.log("Validation errors:",W);const z=Object.keys(W)[0],ie=document.getElementById(z);ie&&(ie.scrollIntoView({behavior:"smooth",block:"center"}),ie.focus())},Y={firstName:{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}},clinic:{required:l("Clinic selection is required","kivicare-clinic-management-system")},contactNumber:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:W=>W?T(W)||l("Please enter a valid phone number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},dob:{validate:W=>{if(!W)return!0;const z=new Date(W);return new Date().getFullYear()-z.getFullYear()>=18||l("Receptionist must be at least 18 years old","kivicare-clinic-management-system")}},status:{required:l("Status is required","kivicare-clinic-management-system")},gender:{required:l("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}},city:{minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}},country:{minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:l("Invalid postal code format","kivicare-clinic-management-system")}}},fe=t?l("Edit Receptionist","kivicare-clinic-management-system"):l("Add Receptionist","kivicare-clinic-management-system"),le=t?l("Update Receptionist","kivicare-clinic-management-system"):l("Save Receptionist","kivicare-clinic-management-system");return(t||e)&&k?i.jsx(Ly,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?l("My Profile","kivicare-clinic-management-system"):fe})}),e&&i.jsx("div",{children:i.jsx(Gn,{size:"sm"})})]}),i.jsxs("form",{onSubmit:E(K,ne),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:l("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(je,{name:"receptionistImage",control:P,render:({field:W})=>i.jsx(hl,{id:"receptionist-image-upload",name:"receptionistImage",label:l("Profile Image","kivicare-clinic-management-system"),defaultImage:W.value,defaultImageId:D("receptionistImageId"),onChange:z=>{U("receptionistImage",z)},size:200,register:M,errors:F,className:""})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${F.firstName?"is-invalid":""}`,placeholder:l("Enter the First Name","kivicare-clinic-management-system"),...M("firstName",Y.firstName)}),F.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${F.lastName?"is-invalid":""}`,placeholder:l("Enter the Last Name","kivicare-clinic-management-system"),...M("lastName",Y.lastName)}),F.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${F.email?"is-invalid":""}`,placeholder:l('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...M("email",Y.email)}),F.email&&i.jsx("div",{className:"invalid-feedback d-block",children:F.email.message})]})}),x&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[l("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"clinic",control:P,rules:Y.clinic,render:({field:W})=>i.jsx(yn,{id:"clinic",loadOptions:_,value:W.value,onChange:z=>W.onChange(z),placeholder:l("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${F.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{}})}),F.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"contactNumber",control:P,rules:Y.contactNumber,render:({field:W})=>i.jsx(Jl,{defaultCountry:r,value:W.value,onChange:W.onChange,inputProps:{className:`form-control ${F.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":F.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),F.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:l("DOB","kivicare-clinic-management-system")}),i.jsx(je,{name:"dob",control:P,rules:Y.dob,render:({field:W})=>i.jsx(si,{id:"dob",className:`form-control ${F.dob?"is-invalid":""}`,value:W.value?ii(W.value):"",onChange:z=>{if(z&&z[0]){const ie=z[0],re=`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}-${String(ie.getDate()).padStart(2,"0")}`;W.onChange(re)}else W.onChange("")},options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:ai()},placeholder:l("Select date of birth","kivicare-clinic-management-system"),disabled:t&&k})}),F.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:F.dob.message})]})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(je,{name:"status",control:P,rules:Y.status,render:({field:W})=>i.jsx(ot,{id:"status",className:`react-select-box ${F.status?"is-invalid":""}`,classNamePrefix:"react-select",options:A,value:W.value,onChange:W.onChange,placeholder:l("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:z=>({...z,zIndex:9999})}})}),F.status&&i.jsx("div",{className:"invalid-feedback d-block",children:F.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...M("gender",Y.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:l("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...M("gender",Y.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:l("Female","kivicare-clinic-management-system")})]}),o&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...M("gender",Y.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:l("Other","kivicare-clinic-management-system")})]})]}),F.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:F.gender.message})]})}),e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"language",className:"form-label",children:l("Choose Language","kivicare-clinic-management-system")}),i.jsx(je,{name:"language",control:P,render:({field:W})=>i.jsx(ot,{id:"language",options:m.map(z=>({value:z.lang,label:z.label})),value:W.value,onChange:W.onChange,placeholder:l("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:z=>({...z,zIndex:9999})}})})]})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:l("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:l("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${F.address?"is-invalid":""}`,placeholder:l('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...M("address",Y.address)}),F.address&&i.jsx("div",{className:"invalid-feedback d-block",children:F.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:l("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${F.city?"is-invalid":""}`,placeholder:l("Enter City Name","kivicare-clinic-management-system"),...M("city",Y.city)}),F.city&&i.jsx("div",{className:"invalid-feedback d-block",children:F.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:l("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${F.country?"is-invalid":""}`,placeholder:l("Enter Country Name","kivicare-clinic-management-system"),...M("country",Y.country)}),F.country&&i.jsx("div",{className:"invalid-feedback d-block",children:F.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:l("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${F.postalCode?"is-invalid":""}`,placeholder:l("Enter Postal Code","kivicare-clinic-management-system"),...M("postalCode",Y.postalCode)}),F.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:F.postalCode.message})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Gn,{text:l("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:b}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):le})]})]})]})}const Mne=Object.freeze(Object.defineProperty({__proto__:null,default:Fy},Symbol.toStringTag,{value:"Module"})),Ine=[Vn({path:"/receptionist",title:"Receptionist",outlet:kne,permissions:["receptionist_list"],module:"receptionist",meta:{description:"Receptionist management system",icon:"user-circle",showInSidebar:!0},children:[We({path:"",component:Pne,title:"All Receptionists",index:!0,permissions:["receptionist_list"],module:"receptionist",meta:{description:"List of all receptionists",breadcrumb:"All Receptionists"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Fy,title:"Add Receptionist",props:{isEditing:!1},permissions:["receptionist_add"],module:"receptionist",skeleton:Ly,meta:{description:"Create a new receptionist",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Fy,title:"Edit Receptionist",props:{isEditing:!0},permissions:["receptionist_edit"],module:"receptionist",skeleton:Ly,meta:{description:"Edit existing receptionist",breadcrumb:"Edit"}})]})],One=()=>{const t=Hn();return i.jsxs("div",{className:"doctors-service-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/service"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Lne=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",category:"",status:"",orderBy:"",order:""}),[n,s]=f.useState([]),{isAddonActive:a,hasCapability:r,currencyPrefix:o,currencyPostfix:c}=ht(),d=a("kiviPro"),m=Kn(),u=mi(),{data:p,isLoading:h}=Ma("service_type"),g=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([G,ee])=>ee!==""&&ee!==null&&ee!==void 0)),[t]),{data:x,isLoading:v,error:y}=OA(g),b=wV(),j=kV(),k=jV(),[S,N]=f.useState(!1),[_,w]=f.useState(!1),T=async G=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ee=new Date().toISOString().split("T")[0],ae=P.map(I=>({id:I.id,serviceId:I.serviceId,serviceName:I.serviceName,clinicName:I.clinicName,doctorName:I.doctorName,charges:I.charges,duration:I.duration,category:I.category,status:I.status===1?"Active":"Inactive"}));switch(G){case"csv":cs(ae,`services-${ee}.csv`);break;case"xls":ds(ae,`services-${ee}.xls`);break;case"pdf":ms(ae,`services-${ee}.pdf`,"Services List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(ee){console.error("Export error:",ee),rt({title:l("Error!","kivicare-clinic-management-system"),text:ee.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},A=()=>T("csv"),M=()=>T("xls"),E=()=>{S||(N(!0),T("pdf"),setTimeout(()=>N(!1),2e3))},P=x?.data?.doctorServices||[],D=x?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useMemo(()=>p?.data?p.data.map(G=>{let ee="",ae="";return typeof G=="string"?(ee=G,ae=G):typeof G=="object"&&G!==null&&(ee=G.label||G.name||"",ae=G.id??G.name??ee),{value:ae,label:ee}}):[],[p]);const O=ze(),F=f.useCallback(async({page:G,per_page:ee,search:ae})=>{try{const I={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:G,per_page:ee,search:ae},H=await O.fetchQuery({queryKey:vt.list(I),queryFn:()=>Bt.getStaticData(I),staleTime:0}),B=H.data.map(te=>({value:te.id,label:te.label||te.name}));return s(te=>{const oe=B.filter(ye=>!te.some(me=>me.value===ye.value));return[...te,...oe]}),H.data.map(te=>{let oe="",ye="";return typeof te=="string"?(oe=te,ye=te):typeof te=="object"&&te!==null&&(oe=te.label||te.name||"",ye=te.id??te.name??oe),{value:ye,label:oe}})}catch(I){return console.error("Error loading Specialties:",I),{data:[],pagination:{has_more:!1}}}},[O]),q=[{value:"1",label:l("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:l("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[U,K]=f.useState(""),ne=qa(U,500);He.useEffect(()=>{e(G=>({...G,search:ne,page:1}))},[ne]);const Y=G=>{if(G.length>0){const{id:ee,desc:ae}=G[0],I={id:"id",serviceId:"serviceId",serviceName:"serviceName",clinicName:"clinicName",doctorName:"doctorName",charges:"charges",duration:"duration",category:"category",status:"status"};e(H=>({...H,orderby:I[ee]||ee,order:ae?"desc":"asc",page:1}))}else e(ee=>({...ee,orderby:"",order:"",page:1}))},fe=G=>{K(G.target.value)},[le,W]=f.useState(!1),[z,ie]=f.useState(!1),re=f.useRef(null),de=G=>{const ee={};for(const ae in G)if(Object.prototype.hasOwnProperty.call(G,ae)){const I=G[ae];ee[ae]=typeof I=="string"?I.trim():I}e(ae=>({...ae,...ee,page:1})),W(!1)},L=()=>{const G={page:1,perPage:t.perPage,search:"",id:"",doctorName:"",clinicName:"",serviceName:"",charges:"",duration:"",category:"",status:"",orderBy:"",order:""};e(G),s([]),W(!1)},Q=f.useMemo(()=>["search","id","serviceName","clinicName","doctorName","charges","category","status"].some(ee=>{const ae=t[ee];return typeof ae=="object"&&ae!==null?ae.value!==void 0&&ae.value!=="":ae!=null&&ae!==""})||U!=="",[t,U]),V=[{type:"number",name:"id",label:l("ID","kivicare-clinic-management-system"),placeholder:l('eg "123"',"kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:G=>{G.target.value=G.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"serviceName",label:l("Service Name","kivicare-clinic-management-system"),placeholder:l("eg Full body checkup","kivicare-clinic-management-system")},...d&&!m&&!u?[{type:"text",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l('eg "Mount Health Care"',"kivicare-clinic-management-system")}]:[],{type:"text",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("eg Albert Heaven","kivicare-clinic-management-system")},{type:"number",name:"charges",label:l("Charges","kivicare-clinic-management-system"),placeholder:l('eg "100"',"kivicare-clinic-management-system"),min:0,pattern:"[0-9]*",onInput:G=>{G.target.value=G.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"category",label:l("Category","kivicare-clinic-management-system"),placeholder:l('eg "General Dentistry"',"kivicare-clinic-management-system"),optionLoader:F,isSearchable:!0,perPage:50,storeObject:!0},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l('eg "Active"',"kivicare-clinic-management-system"),options:q,isSearchable:!1}],Z=In(),X=f.useMemo(()=>[Z.accessor("id",{header:()=>l("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>`${G.getValue()}`}),Z.accessor("serviceId",{header:()=>l("Service ID","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>G.getValue()}),Z.accessor("serviceName",{header:()=>l("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>i.jsx(Zt,{profileUrl:G.row.original.service_image_url,name:G.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:l("Service","kivicare-clinic-management-system")})}),...d&&!m&&!u?[Z.accessor("clinicName",{id:"clinicName",header:()=>l("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>{const ee=G.row.original.clinicName,ae=G.row.original.clinicProfileImage,I=G.row.original.clinicEmail,H=G.row.original.clinicContactNumber;return i.jsx(Zt,{profileUrl:ae,name:ee,fallbackText:"CL",variant:"primary",size:"md",nameLabel:l("Clinic","kivicare-clinic-management-system"),email:I,contactNumber:H})}})]:[],Z.accessor("doctorName",{header:()=>l("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>i.jsx(Zt,{profileUrl:G.row.original.doctorProfileImage,name:G.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:l("Doctor","kivicare-clinic-management-system"),email:G.row.original.doctorEmail,contactNumber:G.row.original.doctorContactNumber})}),Z.accessor("charges",{header:()=>l("Charges","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>`${o||""}${G.getValue()}${c||""}`}),Z.accessor("duration",{header:()=>l("Duration","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>G.getValue()}),Z.accessor("category",{header:()=>l("Category","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>G.getValue()}),Z.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:G=>{const ee=Number(G.getValue()),ae=G.row.original,I=()=>{const H=ee===1?0:1;bt({title:l("Update Status?","kivicare-clinic-management-system"),text:Ti(l("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),ae.service_name,H===1?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:l("Yes, update","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:l("Updating Status...","kivicare-clinic-management-system"),text:l("Please wait...","kivicare-clinic-management-system")}),k.mutate({ids:[ae.id],status:H},{onSuccess:()=>{St({title:l("Status Updated","kivicare-clinic-management-system"),text:l("Service status has been updated successfully.","kivicare-clinic-management-system")})},onError:te=>{rt({title:l("Error","kivicare-clinic-management-system"),text:te.message||l("Failed to update status.","kivicare-clinic-management-system")})}}))})};return r("service_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`service-status-${ae.id}`,checked:ee===1,onChange:I}),i.jsx("label",{className:"form-check-label",htmlFor:`service-status-${ae.id}`,children:i.jsx("span",{className:`badge ${ee===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:ee===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${ee===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:ee===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})}}),Z.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:G=>{const ee=ae=>I=>i.jsx(ut,{id:`tooltip-${G.cell.row.original.id}-${ae}`,...I,children:ae});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[r("service_edit")&&i.jsx(Qe,{placement:"top",overlay:ee(l("Edit","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/service/edit/${G.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),r("service_delete")&&i.jsx(Qe,{placement:"top",overlay:ee(l("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>R(G.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[r]),R=G=>{bt({title:l("Delete Service?","kivicare-clinic-management-system"),text:l("You're about to delete this service.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep service","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ee=>{ee.isConfirmed&&(yt({title:l("Deleting Service...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected service.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(G,{onSuccess:ae=>{St({title:l("Deleted!","kivicare-clinic-management-system"),text:ae?.message||l("Service has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to services","kivicare-clinic-management-system")})},onError:ae=>{rt({text:ae?.response?.data?.message||l("Failed to delete service. Please try again.","kivicare-clinic-management-system")})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("All Services","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[r("service_add")&&i.jsxs(gt,{to:"/service/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Service","kivicare-clinic-management-system")})]}),d&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>w(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>W(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsx(ha,{show:le,onHide:()=>W(!1),queryParams:t,onApplyFilters:de,onResetFilters:L,title:l("Filters","kivicare-clinic-management-system"),fields:V,hasAppliedFilters:Q}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(wi,{in:!z,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:re,children:i.jsxs("div",{ref:re,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(yn,{id:"specialties-filter",placeholder:l("Category","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:F,value:n.find(G=>G.value===t.category)||null,onChange:G=>{console.log(G),e(ee=>({...ee,category:G?G.value:""}))},isClearable:!0,perPage:50}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:q,onChange:G=>e(ee=>({...ee,status:G?String(G.value):""})),isSearchable:!1,isClearable:!0,styles:{menuPortal:G=>({...G,zIndex:9999})},value:q.find(G=>String(G.value)===String(t.status))||null})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),value:U,onChange:fe})]})}),r("service_export")&&d&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:A,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:M,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:E,disabled:S,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:P,columns:X,isLoading:v,error:y,currentPage:D.currentPage,perPage:D.perPage,totalItems:D.total,lastPage:D.lastPage,onPageChange:G=>e(ee=>({...ee,page:G})),onPerPageChange:G=>e(ee=>({...ee,perPage:G,page:1})),onSortingChange:Y,manualSorting:!0,enableSelection:!0,moduleNamePlural:"services",bulkActions:[{label:l("Delete","kivicare-clinic-management-system"),action:(G,ee)=>{const ae=G.map(I=>I.id);bt({title:l("Delete Services?","kivicare-clinic-management-system"),text:l(`Youre about to delete <strong>${G.length} services</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep services","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(I=>{I.isConfirmed&&(yt({title:l("Deleting Services...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected services.<br>This won't take long.","kivicare-clinic-management-system")}),j.mutate(ae,{onSuccess:H=>{St({title:l("Deleted!","kivicare-clinic-management-system"),text:l(`${G.length} service${G.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:l("Back to services","kivicare-clinic-management-system")}),ee()},onError:H=>{rt({text:H?.response?.data?.message||l("Failed to delete selected services. Please try again.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:l("Set Active","kivicare-clinic-management-system"),action:(G,ee)=>{const ae=G.map(I=>I.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to activate selected services?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:l("Yes, activate","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(I=>{I.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:ae,status:1},{onSuccess:H=>{St({text:H?.message||l("Services have been activated successfully.","kivicare-clinic-management-system")}),ee()},onError:H=>{rt({text:H?.response?.data?.message||l("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:l("Set Inactive","kivicare-clinic-management-system"),action:(G,ee)=>{const ae=G.map(I=>I.id);bt({title:l("Update Status","kivicare-clinic-management-system"),text:l("Are you sure you want to deactivate selected services?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, deactivate","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(I=>{I.isConfirmed&&(yt({title:l("Updating...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate({ids:ae,status:0},{onSuccess:H=>{St({text:H?.message||l("Services have been deactivated successfully.","kivicare-clinic-management-system")}),ee()},onError:H=>{rt({text:H?.response?.data?.message||l("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:G=>{ie(G)}})]}),d&&i.jsx(Ar,{show:_,onHide:()=>w(!1),onReopenImport:()=>w(!0),onDataRefresh:()=>{window.location.reload()},context:"services"})]})},Fne=[Vn({path:"/service",title:"Services",outlet:One,permissions:["service_list"],meta:{description:"Manage doctor services",icon:"fa-server",showInSidebar:!0},children:[We({path:"",component:Lne,index:!0,permissions:["service_list"],meta:{description:"List of all doctor services",breadcrumb:"All Doctor Services"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Iy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],skeleton:ng,meta:{description:"Create a new doctor service",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Iy,title:"Edit Doctor Service",props:{isEditing:!0},permissions:["service_edit"],skeleton:ng,meta:{description:"Edit existing doctor service",breadcrumb:"Edit"}})]})],$ne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"404"}),i.jsx("p",{className:"fs-3",children:l("Page not found.","kivicare-clinic-management-system")}),i.jsx("p",{className:"lead",children:l("The page you're looking for doesn't exist.","kivicare-clinic-management-system")}),i.jsx(Gn,{text:l("Go Home","kivicare-clinic-management-system"),showIcon:!1})]})}),Bne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"500"}),i.jsx("p",{className:"fs-3",children:l("Internal Server Error","kivicare")}),i.jsx("p",{className:"lead",children:l("Something went wrong on our end. Please try again later.","kivicare")}),i.jsx(gt,{to:"/",className:"btn btn-primary",children:l("Go Home","kivicare")})]})}),qne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:l("Maintenance","kivicare")}),i.jsx("p",{className:"fs-3",children:l("System Under Maintenance","kivicare")}),i.jsx("p",{className:"lead",children:l("We're currently performing scheduled maintenance. Please check back soon.","kivicare")}),i.jsx("p",{className:"text-muted",children:l("We apologize for any inconvenience.","kivicare")})]})}),Hne=[We({path:"/403",component:Xd,title:"Access Denied",exact:!0,meta:{description:"Access denied error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/500",component:Bne,title:"Server Error",exact:!0,meta:{description:"Internal server error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/maintenance",component:qne,title:"Maintenance",exact:!0,meta:{description:"Maintenance mode page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"*",component:$ne,title:"Page Not Found",meta:{description:"Page not found fallback",hideFromBreadcrumb:!0,hideFromSidebar:!0}})],zne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsx(pt,{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column py-4",children:[i.jsx(C,{width:"70px",height:"70px",className:"rounded-circle"}),i.jsxs("div",{className:"text-center w-100",children:[i.jsx(C,{width:"250px",height:"1.5rem",className:"mx-auto mb-3"}),i.jsx(C,{width:"350px",height:"1rem",className:"mx-auto mb-5"}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx(C,{width:"80%",height:"3rem",style:{borderRadius:"50px"}})}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(nt,{className:"mx-auto",width:"120px",height:"42px"})})]})]})})})]})})}),Vne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"320px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(nt,{width:"140px",height:"38px"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(nt,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(nt,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Une=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e)),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]})]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(pt,{children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"350px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsx("div",{className:"row gy-4",children:Array.from({length:6}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e))})}),i.jsx("div",{className:"col-md-4 ",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(nt,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(nt,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Wne=({currentStep:t,onStepClick:e})=>{const n={1:"ph ph-hand-waving",2:"ph ph-hospital",3:"ph ph-user-circle-check"};return i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill",children:i.jsx("ul",{className:"nav nav-pills vendar-reg-tab",id:"step-tabs",role:"tablist",children:[1,2,3].map(s=>{const a=He.useRef(null),r=t===s,o=t>s,c=s<=t;return i.jsx(wi,{nodeRef:a,in:!0,appear:!0,timeout:300,classNames:"step-transition",children:i.jsxs("li",{className:"nav-item",role:"presentation",children:[i.jsxs("a",{className:`nav-link ${r?"active current":""}`,id:`step-${s}-tab`,"data-bs-toggle":"pill",href:`#step-${s}`,role:"tab","aria-controls":`step-${s}`,"aria-selected":r?"true":"false",tabIndex:r?void 0:"-1",style:{cursor:c?"pointer":"default"},onClick:d=>{d.preventDefault(),c&&e&&e(s)},children:[i.jsxs("span",{className:"no",children:["0",s]}),o&&i.jsx("i",{className:"ph-fill ph-check-circle complete-icon icon-transition-active"}),!o&&i.jsx("i",{className:`${n[s]} current-icon ${r?"visible":""}`})]}),i.jsxs("div",{className:"setup-data",children:[i.jsxs("small",{className:"text-primary fw-bold",children:[l("Step","kivicare-clinic-management-system")," ",s]}),i.jsx("h6",{children:s===1?l("Welcome","kivicare-clinic-management-system"):s===2?l("Clinic Basic Detail","kivicare-clinic-management-system"):l("Clinic Admin Detail","kivicare-clinic-management-system")})]})]})},s)})})})})},Kne={clinicImage:null,clinicName:"",clinicEmail:"",specialties:[],contactNumber:"",currencyPrefix:"",currencyPostfix:"",address:"",city:"",country:"",postalCode:"",adminImage:null,firstName:"",lastName:"",adminEmail:"",adminContact:"",dob:"",gender:"",roles:[]},kC={step2Fields:["clinicName","clinicEmail","specialties","contactNumber"],step3Fields:["firstName","lastName","adminEmail","adminContact","gender"]},mP={saveSetupWizard:t=>pe({endpoint:"setup-wizard/save",method:"POST",data:t}),getSetupWizard:()=>pe({endpoint:"setup-wizard",method:"GET"}),completeSetupWizard:t=>pe({endpoint:"setup-wizard/complete",method:"POST",data:t}),setupClinic:t=>{const e={clinic_name:t.clinicName,clinic_email:t.clinicEmail,clinic_contact:t.contactNumber,address:t.address,city:t.city,postal_code:t.postalCode,country:t.country,specialties:t.specialties,clinic_image_id:t.clinicImage?.id||t.clinicImage,firstName:t.firstName,lastName:t.lastName,adminEmail:t.adminEmail,adminContact:t.adminContact,dob:t.dob,gender:t.gender,roles:Array.isArray(t.roles)?t.roles:[]};return t.adminImage&&typeof t.adminImage=="object"&&(e.adminProfile=t.adminImage),pe({endpoint:"setup-wizard/clinic",method:"POST",data:e})},updateStepCompletion:t=>pe({endpoint:"setup-wizard/step-complete",method:"POST",data:{step:t}})},Ak={all:["setup-wizard"],data:()=>[...Ak.all,"data"]},Gne=()=>{const t=ze();return Le({mutationFn:e=>mP.setupClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},Yne=()=>{const t=ze();return Le({mutationFn:e=>mP.updateStepCompletion(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},lf=f.createContext(),Qne=()=>{const{themeSettings:t}=ht(),e=Hn(),n=dn(),s=f.useRef(null),a=r_(),r=()=>{const N=e.pathname;return N.includes("admin-info")?3:N.includes("basic-info")?2:1},[o,c]=f.useState(r()),[d,m]=f.useState([1]);f.useEffect(()=>{const N=r();c(N),d.includes(N)||m(_=>[..._,N])},[e.pathname]);const u=Xt({defaultValues:Kne,mode:"onTouched",shouldUnregister:!1}),{handleSubmit:p,trigger:h,getValues:g}=u,x=Gne(),v=Yne(),y={1:"/clinic-setup",2:"/clinic-setup/basic-info",3:"/clinic-setup/admin-info"},b=async()=>{if(console.log("hit"),o===1){try{await v.mutateAsync({step:1}),d.includes(2)||m(w=>[...w,2]),n("/clinic-setup/basic-info")}catch(w){console.error("Failed to update step completion:",w),Ee.error(l("Failed to update progress","kivicare-clinic-management-system"))}return}const N=o===2?kC.step2Fields:kC.step3Fields;if(await h(N))if(o===2)try{const w=g();await v.mutateAsync({step:2,formData:w}),d.includes(3)||m(T=>[...T,3]),n("/clinic-setup/admin-info")}catch(w){console.error("Failed to update step completion:",w),Ee.error(l("Failed to update progress","kivicare-clinic-management-system"))}else p(k)()},j=()=>{o===2?n("/clinic-setup"):o===3&&n("/clinic-setup/basic-info")},k=async N=>{console.log(" Final form submission with ALL data:",N);try{const _=await x.mutateAsync(N);Ee.success(l("Clinic setup completed successfully!","kivicare-clinic-management-system")),setTimeout(()=>{const w=window.kc_frontend&&window.kc_frontend.dashboard_uri?window.kc_frontend.dashboard_uri:window.location.origin;window.location.href=w},1500)}catch(_){const w=_?.response?.data?.message||_?.message||l("Failed to setup clinic","kivicare-clinic-management-system");Ee.error(w),console.error("Setup clinic error:",_)}},S=N=>{N<=Math.max(...d)&&n(y[N])};return i.jsx(xo,{className:"my-5 pt-5",children:i.jsx(Un,{children:i.jsx(a_,{...u,children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx("img",{className:"logo-normal",src:t.siteLogo,height:"45",alt:"logo"})})}),i.jsx(Wne,{currentStep:o,onStepClick:S}),i.jsx(Rg,{mode:"out-in",children:i.jsx(wi,{nodeRef:s,timeout:250,classNames:"fade",unmountOnExit:!0,appear:!0,children:i.jsx("div",{ref:s,className:"step-content",children:a&&i.jsx(lf.Provider,{value:{onNext:b,onPrevious:j,currentStep:o,isLoading:x.isPending||v.isPending},children:a})})},e.pathname.replace(/\/$/,""))})]})})})})},Zne=()=>{const{onNext:t}=f.useContext(lf);return i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column",children:[i.jsx("i",{className:"ph ph-hand-waving text-secondary fs-70"}),i.jsxs("div",{className:"text-center",children:[i.jsx("h5",{className:"mb-3",children:l("Welcome to kiviCare","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-5 pb-3",children:l("Explore more features by creating account in kivicare.","kivicare-clinic-management-system")}),i.jsx("span",{className:"py-2 px-5 bg-secondary-subtle border border-secondary rounded-pill setup-wizard-badge h5 m-0",children:l("KiviCare - Clinic and Patient Management System (EHR)","kivicare-clinic-management-system")}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(gt,{className:"btn btn-primary",onClick:t,to:"/clinic-setup/basic-info",children:l("Proceed","kivicare-clinic-management-system")})})]})]})})})},jC=Vc.PhoneNumberUtil.getInstance(),Xne=()=>{const{control:t,register:e,formState:n,setValue:s,getValues:a,handleSubmit:r}=lb(),{onNext:o,onPrevious:c}=f.useContext(lf),{errors:d}=n,{data:m,isLoading:u,refetch:p}=Ma("specialization"),h=Hg(),[g]=He.useState(n.submitCount);f.useEffect(()=>{a("currencyPrefix")||s("currencyPrefix","$"),a("currencyPostfix")||s("currencyPostfix","/-")},[]);const x=v=>{try{return jC.isValidNumber(jC.parseAndKeepRawInput(v))}catch{return!1}};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:l("Clinic Basic detail","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Enter basic detail of your clinic and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicName",{required:l("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicName?"is-invalid":""}`,placeholder:l("Enter clinic name","kivicare-clinic-management-system")}),d.clinicName&&i.jsx("div",{className:"invalid-feedback",children:d.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicEmail",{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicEmail?"is-invalid":""}`,placeholder:l("Enter clinic email","kivicare-clinic-management-system")}),d.clinicEmail&&i.jsx("div",{className:"invalid-feedback",children:d.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"specialties",control:t,rules:{required:l("At least one specialization is required","kivicare-clinic-management-system"),validate:{notEmpty:v=>v&&v.length>0||l("At least one specialty is required","kivicare-clinic-management-system")}},render:({field:v})=>i.jsx(ko,{id:"specialties",options:m?.data??[],value:v.value,onChange:y=>{v.onChange(y)},onCreateOption:y=>{const b={id:`temp-${Date.now()}`,label:y},j=v.value||[];v.onChange([...j,b]),h.mutate(y,{onSuccess:k=>{if(k?.data?.data){const S=(v.value||[]).map(N=>N.id===b.id?{id:k.data.data.id,label:k.data.data.label}:N);v.onChange(S)}Ee.success(l("specialization added successfully","kivicare-clinic-management-system"))},onError:k=>{console.error("Failed to save specialization:",k),Ee.error(l("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:y=>y.id,placeholder:l("Select or create specialization","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:u,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,noOptionsMessage:()=>l("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:y=>l("Add specialty","kivicare-clinic-management-system")+`: "${y}"`})}),d.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:d.specialties.message}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("Type a new specialization and press enter to add it","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"contactNumber",control:t,rules:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:v=>v?x(v)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},render:({field:v,fieldState:y})=>i.jsxs(i.Fragment,{children:[i.jsx(Jl,{...v,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>v.onBlur()},placeholder:l("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:d.contactNumber.message})]})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Currency Prefix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPrefix"),className:"form-control",placeholder:l("e.g. $","kivicare-clinic-management-system"),onChange:v=>s("currencyPrefix",v.target.value)})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Currency Postfix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPostfix"),className:"form-control",placeholder:l("e.g. USD","kivicare-clinic-management-system"),onChange:v=>s("currencyPostfix",v.target.value)})]})})]})}),i.jsx("div",{className:"col-md-4",children:i.jsx(ef,{id:"clinic-logo",name:"clinicLogo",label:l("Clinic Logo","kivicare-clinic-management-system"),register:e,defaultImage:a("clinicLogo")?.url,errors:d,className:"mb-3",onChange:(v,y)=>{s("clinicLogo",v,{shouldValidate:!0,shouldDirty:!0})}})})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("address",{required:l("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:l("Address must be at least 10 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.address?"is-invalid":""}`,placeholder:l("Enter clinic address","kivicare-clinic-management-system")}),d.address&&i.jsx("div",{className:"invalid-feedback",children:d.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("City","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("city",{required:l("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("City must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.city?"is-invalid":""}`,placeholder:l("Enter city","kivicare-clinic-management-system")}),d.city&&i.jsx("div",{className:"invalid-feedback",children:d.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("country",{required:l("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Country must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.country?"is-invalid":""}`,placeholder:l("Enter country","kivicare-clinic-management-system")}),d.country&&i.jsx("div",{className:"invalid-feedback",children:d.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("postalCode",{required:l("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9]+$/,message:l("Invalid postal code format","kivicare-clinic-management-system")}}),className:`form-control ${d.postalCode?"is-invalid":""}`,placeholder:l("Enter postal code","kivicare-clinic-management-system"),onInput:v=>v.target.value=v.target.value.replace(/[^0-9]/g,"")}),d.postalCode&&i.jsx("div",{className:"invalid-feedback",children:d.postalCode.message})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,children:l("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:r(o),type:"button",children:l("Next","kivicare-clinic-management-system")})]})]})})},NC=Vc.PhoneNumberUtil.getInstance(),Jne=()=>{const{register:t,control:e,formState:n,setValue:s,getValues:a,handleSubmit:r}=lb(),{onNext:o,onPrevious:c,isLoading:d=!1}=f.useContext(lf),{errors:m}=n,[u]=f.useState(n.submitCount),[p,h]=f.useState(()=>{const k=a("roles");return Array.isArray(k)&&k.length?k:["doctor","receptionist","patient"]}),[g,x]=f.useState(!1),v=k=>{h(S=>S.includes(k)?S.filter(N=>N!==k):[...S,k])},y=()=>{x(!0)},b=()=>{s("roles",p,{shouldDirty:!0,shouldValidate:!1}),x(!1),o()},j=k=>{try{return NC.isValidNumber(NC.parseAndKeepRawInput(k))}catch{return!1}};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:l("Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsx("p",{children:l("Enter basic detail of Clinic Admin and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("firstName",{required:l("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("First name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.firstName?"is-invalid":""}`,placeholder:l("Enter first name","kivicare-clinic-management-system")}),m.firstName&&i.jsx("div",{className:"invalid-feedback",children:m.firstName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("lastName",{required:l("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:l("Last name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.lastName?"is-invalid":""}`,placeholder:l("Enter last name","kivicare-clinic-management-system")}),m.lastName&&i.jsx("div",{className:"invalid-feedback",children:m.lastName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("adminEmail",{required:l("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:l("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${m.adminEmail?"is-invalid":""}`,placeholder:l("Enter admin email","kivicare-clinic-management-system")}),m.adminEmail&&i.jsx("div",{className:"invalid-feedback",children:m.adminEmail.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"adminContact",control:e,rules:{required:l("Contact number is required","kivicare-clinic-management-system"),validate:k=>k?j(k)||l("Please enter a valid Contact number","kivicare-clinic-management-system"):l("Contact number is required","kivicare-clinic-management-system")},render:({field:k,fieldState:S})=>i.jsxs(i.Fragment,{children:[i.jsx(Jl,{...k,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact?"is-invalid":""}`,placeholder:l("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>k.onBlur()},placeholder:l("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact&&i.jsx("div",{className:"invalid-feedback d-block",children:m.adminContact.message})]})})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Date of Birth","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"dob",control:e,rules:{required:l("Date of birth is required","kivicare-clinic-management-system"),validate:k=>{const S=new Date(k),N=new Date;let _=N.getFullYear()-S.getFullYear();const w=N.getMonth()-S.getMonth();return(w<0||w===0&&N.getDate()<S.getDate())&&_--,_>=18||l("Admin must be at least 18 years old","kivicare-clinic-management-system")}},render:({field:k})=>i.jsx(si,{...k,className:`form-control ${m.dob?"is-invalid":""}`,placeholder:l("Select date of birth","kivicare-clinic-management-system"),options:{dateFormat:bi(window.kc_frontend.date_format),maxDate:new Date(new Date().setFullYear(new Date().getFullYear()-18)),disableMobile:!0,locale:ai()},value:k.value?ii(k.value):"",onChange:S=>{if(S&&S[0]){const N=S[0],_=`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`;k.onChange(_)}else k.onChange("")}})}),m.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:m.dob.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("select",{...t("gender",{required:l("Gender is required","kivicare-clinic-management-system")}),className:`form-select ${m.gender?"is-invalid":""}`,children:[i.jsx("option",{value:"",children:l("Select Gender","kivicare-clinic-management-system")}),i.jsx("option",{value:"male",children:l("Male","kivicare-clinic-management-system")}),i.jsx("option",{value:"female",children:l("Female","kivicare-clinic-management-system")}),i.jsx("option",{value:"other",children:l("Other","kivicare-clinic-management-system")})]}),m.gender&&i.jsx("div",{className:"invalid-feedback",children:m.gender.message})]})})]})}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Admin Profile Picture","kivicare-clinic-management-system")}),i.jsx(hl,{id:"admin-profile",name:"adminProfile",label:l("Admin Profile Picture","kivicare-clinic-management-system"),register:t,errors:m,size:230,defaultImage:a("adminProfile")?.url,className:"mb-3",onChange:(k,S)=>{s("adminProfile",k,{shouldValidate:!0,shouldDirty:!0})}})]})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,type:"button",disabled:d,children:l("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:r(y),type:"button",disabled:d,children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Setting up...","kivicare-clinic-management-system")]}):l("Finish","kivicare-clinic-management-system")})]})]}),i.jsxs(st,{show:g,onHide:()=>x(!1),centered:!0,className:"swal2-modal",children:[i.jsx(st.Header,{closeButton:!0,className:"border-0 pb-0",children:i.jsx(st.Title,{className:"swal2-title w-100 text-center",children:l("Create Demo Users","kivicare-clinic-management-system")})}),i.jsx(st.Body,{className:"text-center pt-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-4 flex-wrap",children:[i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("doctor"),onChange:()=>v("doctor")}),i.jsx("span",{children:l("Doctor","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("receptionist"),onChange:()=>v("receptionist")}),i.jsx("span",{children:l("Receptionist","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("patient"),onChange:()=>v("patient")}),i.jsx("span",{children:l("Patient","kivicare-clinic-management-system")})]})]})}),i.jsxs(st.Footer,{className:"border-0 justify-content-center pt-0",children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>x(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:b,children:l("Finish","kivicare-clinic-management-system")})]})]})]})},eie=[Vn({path:"",title:"Clinic Setup",outlet:Qne,meta:{description:"Clinic setup wizard",requiresSetup:!0},children:[We({index:!0,component:Zne,title:"Welcome",props:{stepNumber:1},skeleton:zne,meta:{description:"Setup wizard welcome page",step:1,stepName:"getting_started"}}),We({path:"basic-info",component:Xne,title:"Basic Information",props:{stepNumber:2},skeleton:Vne,meta:{description:"Clinic basic information setup",step:2,stepName:"clinic"}}),We({path:"admin-info",component:Jne,title:"Admin Information",props:{stepNumber:3},skeleton:Une,meta:{description:"Admin user information setup",step:3,stepName:"clinic_admin"}})]})],tie=()=>{const t=Hn(),e=zi();ls();const n=Kn(),s=mi(),a=vr(),{calanderIntegration:r,googleMeetIntegration:o,zoomIntegration:c,isAddonActive:d,hasCapability:m,module_config:u}=ht();let h=[{id:"general-settings",label:l("General Settings","kivicare-clinic-management-system"),iconClass:"ph ph-tree-structure",link:"/setting/general-setting",allowedRoles:["administrator"]},{id:"holidays",label:l("Holidays","kivicare-clinic-management-system"),iconClass:"ph ph-house-line",link:"/setting/holidays",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"clinic_schedule"},{id:"doctor-session",label:l("Doctor Session","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-check",link:"/setting/doctor-session",allowedRoles:["doctor","receptionist"],capability:"doctor_session_list"},{id:"configurations",label:l("Configurations","kivicare-clinic-management-system"),iconClass:"ph ph-toggle-left",link:"/setting/configurations",allowedRoles:["administrator"]},{id:"app-configuration",label:l("App Configuration","kivicare-clinic-management-system"),iconClass:"ph ph-device-mobile",link:"/setting/app-configuration",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"api"},{id:"email-template",label:l("Email Template","kivicare-clinic-management-system"),iconClass:"ph ph-envelope",link:"/setting/email-template",allowedRoles:["administrator"]},{id:"sms-whatsapp-template",label:l("SMS/WhatsApp Template","kivicare-clinic-management-system"),iconClass:"ph ph-chat-circle-dots",link:"/setting/sms-whatsapp-template",allowedRoles:["administrator"],requiresPro:!0},{id:"webhooks",label:l("Webhooks","kivicare-clinic-management-system"),iconClass:"ph ph-webhooks-logo",link:"/setting/webhooks",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"webhooks"},{id:"custom-notification",label:l("Custom notification","kivicare-clinic-management-system"),iconClass:"ph ph-bell",link:"/setting/custom-notification",allowedRoles:["administrator"],requiresPro:!0},{id:"custom-form",label:l("Custom Form","kivicare-clinic-management-system"),iconClass:"ph ph-table",link:"/setting/custom-form",allowedRoles:["administrator","clinic_admin"],capability:"custom_form_list",requiresPro:!0},{id:"encounter-body-chart",label:l("Encounter body chart","kivicare-clinic-management-system"),iconClass:"ph ph-person",link:"/setting/encounter-body-chart",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"bodyChart"},{id:"patient-setting",label:l("Patient Setting","kivicare-clinic-management-system"),iconClass:"ph ph-user",link:"/setting/patient-setting",allowedRoles:["administrator"]},{id:"widget-setting",label:l("Widget Setting","kivicare-clinic-management-system"),iconClass:"ph ph-gear",link:"/setting/widget-setting",allowedRoles:["administrator"]},{id:"google-event-template",label:l("Google Event Template","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-blank",link:"/setting/google-event-template",allowedRoles:["administrator"],requiresPro:!0},{id:"google-meet",label:l("Google Meet","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"googlemeet"},{id:"google-meet-configuration",label:l("Google Meet Integration","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet-configuration",allowedRoles:["doctor"]},{id:"zoom-telemed",label:l("Zoom Telemed","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-telemed",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"telemed"},{id:"zoom-configuration",label:l("Zoom Telemed setting","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-configuration",allowedRoles:["doctor"]},{id:"listings",label:l("Listings","kivicare-clinic-management-system"),iconClass:"ph ph-list-dashes",link:"/setting/listings",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"static_data_list"},{id:"custom-field",label:l("Custom Field","kivicare-clinic-management-system"),iconClass:"ph ph-magic-wand",link:"/setting/custom-field",allowedRoles:["administrator","clinic_admin"],capability:"custom_field_list",module:"custom_fields"},{id:"pro-settings",label:l("Pro Settings","kivicare-clinic-management-system"),iconClass:"ph ph-wrench",link:"/setting/pro-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"payment",label:l("Payment","kivicare-clinic-management-system"),iconClass:"ph ph-credit-card",link:"/setting/payments",allowedRoles:["administrator"]},{id:"appointment-settings",label:l("Appointment Setting","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-plus",link:"/setting/appointment-settings",allowedRoles:["administrator"]},{id:"permission",label:l("Permission Setting","kivicare-clinic-management-system"),iconClass:"ph ph-lock-simple",link:"/setting/permission",allowedRoles:["administrator"],requiresPro:!0},{id:"sidebar-settings",label:l("Sidebar Setting","kivicare-clinic-management-system"),iconClass:"ph ph-list",link:"/setting/sidebar-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"google-calendar-integration",label:l("Google Calendar Integration","kivicare-clinic-management-system"),iconClass:"ph ph-calendar",link:"/setting/google-calendar-integration",allowedRoles:["doctor","receptionist"]}].filter(x=>{if(x.id==="google-meet-configuration")return d("googlemeet")&&e&&o==="yes";if(x.id==="zoom-configuration")return d("telemed")&&e&&c==="yes";if(x.module&&(u[x.module]??"1")==="0")return!1;if(x.id==="google-calendar-integration")return(e||n)&&r==="yes";const v=x.allowedRoles.some(y=>!!(y==="administrator"&&a||y==="clinic_admin"&&s||y==="doctor"&&e||y==="receptionist"&&n));return x.capability&&!m(x.capability)?!1:v});const g=x=>t.pathname===x.link||t.pathname.startsWith(x.link);return i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:h.map((x,v)=>{const y=g(x),b=x.requiresPro&&!d("kiviPro"),j=x.requiresAddon&&!d(x.addonKey);return i.jsxs(gt,{className:`nav-link ${y?"active":""}`,id:x.id,to:x.link,type:"button","aria-selected":"true",children:[i.jsx("i",{className:x.iconClass}),x.label,b&&i.jsx("span",{className:"pro-badge",children:"PRO"}),j&&i.jsx("span",{className:"addon-badge",children:"ADDON"})]},v)})})})})},nie=()=>{const e=Bm().at?.(-1),{hideSettingSidebar:n,noTransitionAnimation:s=!1}=e.handle,a=f.useRef(null);return i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx(wi,{in:!n,nodeRef:a,timeout:300,classNames:"sidebar",unmountOnExit:!0,children:i.jsx("div",{className:"col-md-3",children:i.jsx("div",{ref:a,className:"sidebar-wrapper position-sticky top-0",children:i.jsx(tie,{})})})}),i.jsx("div",{className:n?"col-12":"col-md-9",children:s?i.jsx(Uc,{}):i.jsx(Gi,{})})]})})},iie=()=>i.jsx(pt,{children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"200px",height:"0.875rem"}),i.jsx("hr",{className:"mt-2"})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"d-flex gap-3 mt-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"60px",height:"1rem"})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"120px",height:"1.125rem"}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]}),Array.from({length:2}).map((t,e)=>i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx(C,{width:"24px",height:"24px",style:{borderRadius:"50%"},className:"position-absolute top-0 end-0 mt-1 me-1"}),i.jsx("div",{className:"card-body p-3",children:i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx(C,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]})})]},e))]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]})});function sie(){const{gateway:t}=Wt(),[e,n]=f.useState(!1),s=dn(),{data:a,isLoading:r}=bn("settings","payment-gateway/"+t,{},{enabled:!!t}),{mutateAsync:o}=cn("settings","payment-gateway/"+t),{data:c}=Cn(),d=c?.data?.hideUtilityLinks,{handleSubmit:m,formState:{errors:u},reset:p,control:h,setValue:g,register:x}=Xt({defaultValues:a?.data?.settings||{}}),v=y=>{n(!0),console.log("Form data:",y),o(y).then(()=>{Et.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Settings updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}),s("/setting/payments/"),p(y)}).catch(b=>{const j=b?.response?.data?.message||b.message||l("Failed to update settings.","kivicare-clinic-management-system");Et.fire({title:l("Error Updating Settings","kivicare-clinic-management-system"),text:j,icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}).finally(()=>{n(!1)})};return f.useEffect(()=>{if(a?.data?.settings){const y=a.data.settings;a.data.fields.forEach(b=>{b.type==="select"?g(b.name,fk(b.options,y[b.name]||"")):g(b.name,y[b.name]||"")})}},[a,p,g]),i.jsxs("div",{className:"manage-payment-setting",children:[i.jsxs("div",{className:"d-flex align-items-center mb-3 justify-content-between",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l(`${t.charAt(0).toUpperCase()+t.slice(1)} Payment Setting`,"kivicare-clinic-management-system"),d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#payment-setting",target:"_blank",rel:"noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Top",children:i.jsx("i",{className:"ph ph-question align-middle h5"})})]}),i.jsxs(gt,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:-1,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[l("Back","kivicare-clinic-management-system")," "]})]})]}),i.jsxs("form",{onSubmit:m(v),children:[r?i.jsx(iie,{}):i.jsx(aie,{fields:a?.data?.fields||[],errors:u,control:h,setValue:g,register:x}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e,children:e?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})})})]})]})}const aie=({fields:t,errors:e,control:n,setValue:s,register:a})=>!t||t.length===0?i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body text-center text-muted",children:l("No payment gateway available.","kivicare-clinic-management-system")})}):i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:t.map((r,o)=>r.type==="header"?i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx("h6",{className:"fw-bold",children:r.label}),r.description&&i.jsx("p",{className:"text-muted small mb-0",children:r.description}),i.jsx("hr",{className:"mt-2"})]},o):r.type==="repeater"?i.jsx("div",{className:"col-12",children:i.jsx(rie,{control:n,register:a,setValue:s,errors:e,field:r})},o):i.jsx("div",{className:`col-${r.col||"md-6"}`,children:i.jsxs("div",{className:"form-group",children:[r.type!=="checkbox_switch"&&r.type!=="checkbox"&&i.jsxs("label",{htmlFor:r.name,className:"form-label",children:[r.label,r.validation?.required&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{control:n,name:r.name,rules:r.validation,render:({field:{onChange:c,value:d,ref:m,...u}})=>{if(r.type==="checkbox_switch")return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check form-switch custom-switch-md",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"checkbox",role:"switch",id:r.name,checked:d,onChange:p=>{c(p.target.checked)},...u}),i.jsx("label",{className:"form-check-label",htmlFor:r.name,children:r.label})]}),r.description&&i.jsx("div",{className:"form-text text-muted mt-1",children:r.description}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]});if(["text","email","number","password"].includes(r.type))return i.jsxs(i.Fragment,{children:[i.jsx("input",{type:r.type,id:r.name,className:`form-control ${e[r.name]?"is-invalid":""}`,placeholder:r.placeholder,value:d||"",onChange:c,...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback",children:e[r.name].message})]});if(r.type==="select")return i.jsxs(i.Fragment,{children:[i.jsx(ot,{inputId:r.name,options:r.options,placeholder:l("Select","kivicare-clinic-management-system"),className:`react-select-box ${e[r.name]?"is-invalid":""}`,classNamePrefix:"react-select",value:d,onChange:c,styles:{menuPortal:p=>({...p,zIndex:9999})},...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]});if(r.type==="radio"){const p=r.options||[{value:"on",label:l("On","kivicare-clinic-management-system")},{value:"off",label:l("Off","kivicare-clinic-management-system")}];return i.jsxs("div",{children:[p.map(h=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"radio",id:`${r.name}_${h.value}`,value:h.value,checked:d===h.value,onChange:()=>c(h.value),...u}),i.jsx("label",{className:"form-check-label",htmlFor:`${r.name}_${h.value}`,children:h.label})]},h.value)),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]})}return r.type==="checkbox"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${e[r.name]?"is-invalid":""}`,type:"checkbox",id:r.name,checked:d,onChange:p=>c(p.target.checked),...u}),i.jsx("label",{className:"form-check-label",htmlFor:r.name,children:r.checkboxLabel||r.label})]}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",id:r.name,className:`form-control ${e[r.name]?"is-invalid":""}`,placeholder:r.placeholder,value:d||"",onChange:c,...u}),e[r.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[r.name].message})]})}})]})},o))})})}),rie=({control:t,register:e,setValue:n,errors:s,field:a})=>{const{fields:r,append:o,remove:c}=mr({control:t,name:a.name}),d=(m,u,p,h)=>i.jsx("div",{className:`col-${m.col||"md-6"}`,children:i.jsxs("div",{className:"form-group mb-0",children:[i.jsxs("label",{className:"form-label small text-muted mb-1",children:[m.label,m.validation?.required&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsx(je,{control:t,name:`${a.name}.${p}.${m.name}`,rules:m.validation,render:({field:{onChange:g,value:x,ref:v,...y},fieldState:{error:b}})=>m.type==="select"?i.jsxs(i.Fragment,{children:[i.jsx(ot,{options:m.options,value:fk(m.options,x),onChange:j=>g(j?j.value:""),className:`react-select-box ${b?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})},placeholder:l("Select","kivicare-clinic-management-system")}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):m.type==="image"?i.jsx(ef,{id:`${a.name}.${p}.${m.name}`,name:`${a.name}.${p}.${m.name}`,defaultImage:x,register:e,setValue:n,onChange:j=>{g(j.url)},errors:b?{[`${a.name}.${p}.${m.name}`]:b}:{},className:"mb-0"}):m.type==="textarea"?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{className:`form-control ${b?"is-invalid":""}`,value:x||"",onChange:g,rows:"2",placeholder:m.placeholder||m.label,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:m.type||"text",className:`form-control ${b?"is-invalid":""}`,value:x||"",onChange:g,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]})})]})},`${u.id}-${m.name}-${h}`);return i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0 fw-bold",children:a.label}),i.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>o({}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),a.add_button_text||l("Add Item","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"repeater-list",children:r.map((m,u)=>{const p=a.fields.filter(x=>x.group==="main"),h=a.fields.filter(x=>x.group==="side"),g=p.length>0&&h.length>0;return i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx("button",{type:"button",className:"btn btn-icon btn-sm text-danger position-absolute top-0 end-0 mt-1 me-1",onClick:()=>c(u),style:{zIndex:10},title:l("Remove","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})}),i.jsx("div",{className:"card-body p-3",children:g?i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row g-2",children:p.map((x,v)=>d(x,m,u,v))})}),i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"row g-2 h-100",children:h.map((x,v)=>d(x,m,u,v))})})]}):i.jsx("div",{className:"row g-2",children:a.fields.map((x,v)=>d(x,m,u,v))})})]},m.id)})})]})},lie=()=>i.jsx("div",{className:"settings-container",children:i.jsx(Gi,{})}),oie=()=>i.jsx("div",{className:"custom-notification-outlet",children:i.jsx(Uc,{})});function cie(){return i.jsx("div",{children:i.jsx(Uc,{})})}const die=()=>i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"sidebar-wrapper position-sticky top-0",children:i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:Array.from({length:20}).map((t,e)=>i.jsxs("div",{className:"nav-link skeleton-nav-link",type:"button",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2"}),i.jsx(C,{width:`${120+Math.random()*80}px`,height:"0.875rem"}),Math.random()>.7&&i.jsx(C,{width:Math.random()>.5?"35px":"60px",height:"0.75rem",className:"ms-auto",style:{borderRadius:"10px"}})]},e))})})})})}),i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})})]}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(C,{width:"140px",height:"38px",style:{borderRadius:"4px"}})})})]})})})})]})}),uP=()=>i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(C,{width:"300px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"170px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(nt,{width:"140px",height:"38px"})})})]})})}),mie=()=>i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"120px",height:"1.125rem",className:"mt-2"})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(C,{width:"140px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(nt,{width:"120px",height:"36px"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"100px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"100px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mt-3",children:[i.jsx(C,{width:"200px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"60px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})]})}),hP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:i.jsxs("div",{className:"configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"200px",height:"1.125rem"}),i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"90px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"70px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"50px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap gap-4",children:i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"90px",height:"0.875rem"})]})})]})}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx(nt,{width:"80px",height:"38px"})})]})}),pP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:"app-configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"280px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px"})})]})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(nt,{width:"80px",height:"38px"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"220px",height:"1.125rem"}),i.jsx(nt,{width:"180px",height:"32px"})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"40px",height:"24px",style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})})]},e))})]})})]})]})}),uie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsx("div",{className:"webhook-setting",children:i.jsx("div",{className:"",children:i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:i.jsx(pt,{children:i.jsx(C,{width:"100%",height:"400px",style:{borderRadius:"4px"}})})})})})}),gP=()=>i.jsxs("div",{className:"webhook-form",children:[i.jsxs("div",{className:"d-flex justify-content-end gap-2 mb-3",children:[i.jsx(nt,{width:"100px"}),i.jsx(nt,{width:"100px"})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"150px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"120px"})})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"180px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(nt,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"130px",height:"1rem"}),i.jsx(nt,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"150px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(C,{width:"80px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"90px",height:"28px",style:{borderRadius:"4px"}})]})]}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"140px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-12",children:i.jsx(C,{width:"200px",height:"1rem"})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx(nt,{width:"140px"})})]}),CC=()=>i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"200px",height:"1.75rem",className:"mb-1"}),i.jsx(C,{width:"400px",height:"0.875rem"})]}),i.jsx(nt,{width:"120px"})]}),i.jsx(gP,{})]}),$y=()=>i.jsxs("div",{className:"custom-notification-edit",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"250px",height:"1.75rem",className:"mb-1"}),i.jsx(C,{width:"350px",height:"0.875rem"})]}),i.jsx(nt,{width:"140px"})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"130px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsx(Se,{labelWidth:"100px"})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"160px"}),i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"130px"})})]})]})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"160px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsx(Se,{labelWidth:"80px"})]})]}),i.jsxs(pt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"170px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(nt,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"130px",height:"1rem"}),i.jsx(nt,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"140px",height:"1rem"}),i.jsx(nt,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(C,{width:"120px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"90px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"110px",height:"28px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100%",height:"150px",style:{borderRadius:"4px"}})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"160px"}),i.jsx(nt,{width:"140px"}),i.jsx(nt,{width:"80px"})]})]}),hie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:"custom-forms-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[i.jsx(C,{width:"150px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx(C,{width:"16px",height:"16px"})}),i.jsx(C,{width:"200px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(nt,{width:"120px"})]})]}),i.jsx("div",{className:"table-responsive",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"30px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}}),i.jsx(C,{width:"60px",height:"20px",style:{borderRadius:"10px"}})]})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})})]})})}),By=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb m-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:i.jsx(C,{width:"100px",height:"1rem"})})]})}),i.jsx(nt,{width:"80px"})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 col-md-5 col-lg-4 col-xl-3",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-4",children:[i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"60px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"70px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:[i.jsx(C,{width:"100px",height:"1rem",className:"me-3"}),i.jsx(C,{width:"80px",height:"1rem"})]})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})})]})})]})}),i.jsxs("div",{className:"col-12 col-md-7 col-lg-8 col-xl-9",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx(C,{width:"180px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsx(nt,{width:"100px"}),i.jsx(nt,{width:"120px"})]})]}),i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx(C,{width:"150px",height:"1.25rem"}),i.jsx(nt,{width:"100px"})]}),i.jsxs("div",{className:"row gy-4 custom-form-content",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),Array.from({length:3}).map((t,e)=>i.jsx("div",{className:"col-xl-6 col-12",children:i.jsxs("div",{className:"form-group custom-form-group",children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"},className:"flex-shrink-0 mt-2"}),i.jsx("div",{className:"flex-grow-1",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})},e)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"text-center py-5 border-2 border-dashed border-primary rounded",children:[i.jsx(C,{width:"48px",height:"48px",className:"mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(C,{width:"200px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"300px",height:"1rem"})]})})]})]})]})]})]}),fP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:"encounter-body-chart-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(pt,{children:i.jsxs("form",{children:[i.jsxs("div",{className:"row gy-4 mb-5 pb-3",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"200px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"180px",height:"0.875rem"})]}),i.jsx(nt,{width:"100px"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:3}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"},className:"me-2 d-inline-block"}),i.jsx(C,{width:"60px",height:"1rem",className:"d-inline-block"})]})}),i.jsx("td",{children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"4px"}})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(nt,{width:"80px"})})]})})]})}),vP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"140px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"140px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"70px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e)),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"80px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(pt,{children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"110px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Array.from({length:4}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"120px",height:"1rem"})]},e))})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"110px",height:"1.125rem",className:"mb-3"}),Array.from({length:7}).map((t,e)=>i.jsxs("div",{className:"p-3 bg-body mb-2 d-flex align-items-center gap-3",children:[i.jsx(C,{width:"20px",height:"20px"}),i.jsx(C,{width:"180px",height:"1rem"})]},e))]}),i.jsxs(pt,{children:[i.jsx(C,{width:"150px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(nt,{width:"140px"})})]})}),xP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-event-template-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"180px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(nt,{width:"80px"})})]})}),yP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-meet-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(pt,{children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})})}),i.jsxs(pt,{children:[i.jsxs("div",{className:"row gy-4 pb-4 mb-4 border-bottom",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"90px"})})]}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"250px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"400px",height:"0.875rem"})]})}),i.jsx(C,{width:"150px",height:"1rem",className:"mt-4 mb-3"}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(C,{width:"250px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx(C,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(C,{width:"350px",height:"1rem"})]})]}),i.jsx(C,{width:"500px",height:"0.875rem"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"form-group mb-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(nt,{width:"80px"})})]})}),pie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:"position-relative zoom-telemed-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"200px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(C,{width:"250px",height:"1rem"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"280px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(C,{width:"300px",height:"1rem"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(nt,{width:"80px"})})]})})}),bP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"pro-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:11}).map((t,e)=>i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group pro-setting-color",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]})},e))})]})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})},e))})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"120px"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"130px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(nt,{width:"130px",className:"mb-4"}),i.jsx(C,{width:"140px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))}),i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(nt,{width:"150px",className:"mb-4"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"80px"})})]}),i.jsx("div",{className:"row gy-4 pt-4 mb-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"220px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"400px",height:"0.875rem"})]})}),i.jsx(C,{width:"250px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"150px",height:"1.125rem",className:"mb-3"}),Array.from({length:3}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(pt,{children:[i.jsx(C,{width:"90px",height:"1.125rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"160px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(nt,{width:"80px"})})]})})}),gie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:"webhook-setting",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]})}),i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"row g-3",children:Array.from({length:4}).map((t,e)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx(C,{width:"60px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"50%"}})})]})})})},e))})}),i.jsx("div",{className:"",children:i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-3",role:"tablist",children:[i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),qi={getWebhooks:(t={})=>pe({endpoint:"webhooks",method:"GET",data:t}),getWebhook:t=>pe({endpoint:`webhooks/${t}`,method:"GET"}),createWebhook:t=>pe({endpoint:"webhooks",method:"POST",data:t}),updateWebhook:(t,e)=>pe({endpoint:`webhooks/${t}`,method:"PUT",data:e}),deleteWebhook:t=>pe({endpoint:`webhooks/${t}`,method:"DELETE"}),testWebhook:(t,e={})=>pe({endpoint:`webhooks/${t}/test`,method:"POST",data:e}),getWebhookStats:(t={})=>pe({endpoint:"webhooks/statistics",method:"GET",data:t}),getAvailableEvents:()=>pe({endpoint:"webhooks/events",method:"GET"}),bulkDeleteWebhooks:t=>pe({endpoint:"webhooks/bulk-delete",method:"POST",data:{ids:t}}),updateWebhookStatus:(t,e)=>pe({endpoint:`webhooks/${t}/status`,method:"PATCH",data:{status:e}}),getTableConfig:()=>pe({endpoint:"webhooks/table-config",method:"GET"}),exchangeOAuth2Token:t=>pe({endpoint:"webhooks/oauth2/exchange-token",method:"POST",data:{code:t.code,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl,redirect_uri:t.redirectUri}}),refreshOAuth2Token:t=>pe({endpoint:"webhooks/oauth2/refresh-token",method:"POST",data:{refresh_token:t.refreshToken,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl}}),getWebhookLogs:(t={})=>pe({endpoint:"webhook-logs",method:"GET",data:t}),getWebhookLog:t=>pe({endpoint:`webhook-logs/${t}`,method:"GET"}),deleteWebhookLog:t=>pe({endpoint:`webhook-logs/${t}`,method:"DELETE"}),bulkDeleteWebhookLogs:t=>pe({endpoint:"webhook-logs",method:"DELETE",data:{ids:t}}),getWebhookLogStats:(t={})=>pe({endpoint:"webhook-logs/stats",method:"GET",data:t}),getWebhookLogsByWebhook:(t,e={})=>pe({endpoint:"webhook-logs",method:"GET",data:{webhook_id:t,...e}}),clearOldLogs:(t=30)=>pe({endpoint:"webhook-logs/clear",method:"POST",data:{days:t}}),exportWebhookLogs:(t={})=>pe({endpoint:"webhook-logs/export",method:"GET",data:t})},$n={all:["webhooks"],lists:()=>[...$n.all,"list"],list:t=>[...$n.lists(),{filters:t}],details:()=>[...$n.all,"detail"],detail:t=>[...$n.details(),t],stats:()=>[...$n.all,"stats"],statsList:t=>[...$n.stats(),t],events:()=>[...$n.all,"events"],tableConfig:()=>[...$n.all,"table-config"]},gs={all:["webhook-logs"],lists:()=>[...gs.all,"list"],list:t=>[...gs.lists(),{filters:t}],details:()=>[...gs.all,"detail"],detail:t=>[...gs.details(),t],stats:()=>[...gs.all,"stats"],statsList:t=>[...gs.stats(),t]},wP=(t={},e={})=>ft({queryKey:$n.list(t),queryFn:()=>qi.getWebhooks(t),enabled:e.enabled!==!1,...e}),fie=(t,e={})=>ft({queryKey:$n.detail(t),queryFn:()=>qi.getWebhook(t),enabled:!!t,...e}),vie=(t={},e={})=>ft({queryKey:$n.statsList(t),queryFn:()=>qi.getWebhookStats(t),enabled:e.enabled!==!1,...e}),xie=(t={})=>ft({queryKey:$n.tableConfig(),queryFn:()=>qi.getTableConfig(),...t}),yie=(t={})=>{const e=ze();return Le({mutationFn:n=>qi.createWebhook(n),onSuccess:n=>{e.invalidateQueries({queryKey:$n.lists()}),e.invalidateQueries({queryKey:$n.stats()}),e.setQueryData($n.detail(n.id),n)},...t})},bie=(t={})=>{const e=ze();return Le({mutationFn:({id:n,...s})=>qi.updateWebhook(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$n.lists()}),e.invalidateQueries({queryKey:$n.stats()}),e.setQueryData($n.detail(s.id),n)},...t})},wie=(t={})=>{const e=ze();return Le({mutationFn:n=>qi.deleteWebhook(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$n.lists()}),e.invalidateQueries({queryKey:$n.stats()}),e.removeQueries({queryKey:$n.detail(s)})},...t})},kie=(t={})=>{const e=ze();return Le({mutationFn:n=>qi.testWebhook(n.webhookId,{event_name:n.eventName,payload:n.payload}),onSuccess:(n,s)=>{const a=typeof s=="object"?s.webhookId:s;e.invalidateQueries({queryKey:["webhook-logs"]}),e.setQueryData($n.detail(a),r=>({...r,lastTested:new Date().toISOString(),testResult:n}))},...t})},jie=(t={})=>{const e=ze();return Le({mutationFn:({id:n,status:s})=>qi.updateWebhookStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$n.lists()}),e.invalidateQueries({queryKey:$n.stats()}),e.setQueryData($n.detail(s.id),n)},...t})},Nie=(t={},e={})=>ft({queryKey:gs.list(t),queryFn:()=>qi.getWebhookLogs(t),...e}),Cie=(t={})=>{const e=ze();return Le({mutationFn:n=>qi.deleteWebhookLog(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:gs.lists()}),e.invalidateQueries({queryKey:gs.stats()}),e.removeQueries({queryKey:gs.detail(s)})},...t})},Sie=(t={})=>{const e=ze();return Le({mutationFn:n=>qi.bulkDeleteWebhookLogs(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:gs.lists()}),e.invalidateQueries({queryKey:gs.stats()}),s.forEach(a=>{e.removeQueries({queryKey:gs.detail(a)})})},...t})},_ie=()=>{const[t,e]=f.useState({startDate:null,endDate:null}),n={};t.startDate&&t.endDate&&(n.start_date=t.startDate,n.end_date=t.endDate);const{data:s,isLoading:a,error:r,refetch:o}=vie(n),d=[{title:l("Activate Webhook","kivicare-clinic-management-system"),value:"0",key:"active_webhooks",icon:"ph-broadcast"},{title:l("Success Rate","kivicare-clinic-management-system"),value:"0%",key:"success_rate",icon:"ph-check-circle"},{title:l("Failed Deliveries","kivicare-clinic-management-system"),value:"0",key:"failed_deliveries",icon:"ph-warning-circle"},{title:l("Events Today","kivicare-clinic-management-system"),value:"0",key:"events_today",icon:"ph-bell"}].map(m=>{if(s?.data&&s?.data[m.key]!==void 0){let u=s?.data[m.key];return m.key==="success_rate"&&(u=`${u}%`),{...m,value:u.toString()}}return m});return a?i.jsx(gie,{}):i.jsxs("div",{className:"mb-3",children:[r&&i.jsxs("div",{className:"alert alert-danger mb-3",children:[l("Error loading statistics:","kivicare-clinic-management-system")," ",r.message]}),i.jsx("div",{className:"row g-3",children:d.map((m,u)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-heading counter mb-2 fw-bold",children:a?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):m.value}),i.jsx("p",{className:"text-body fw-medium mb-0",children:m.title})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx("i",{className:`ph ${m.icon} fs-1 text-primary`})})]})})})},u))})]})},Eie=()=>{const{isAddonActive:t}=ht(),e=t("webhooks"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks;return i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:e?"webhook-setting":"p-4",children:[!e&&i.jsx(ri,{text:l("Upgrade to access Webhooks","kivicare-clinic-management-system"),title:l("Premium Feature","kivicare-clinic-management-system"),icon:"ph-lock",link:"https://codecanyon.net/item/kivicare-webhook-addon/54591262"}),i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[l("Webhook","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-webhook/webhook-documentation/getting-started-webhook-documentation/what-is-kivicare-webhook-addon/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]})}),e&&i.jsx(_ie,{}),i.jsxs("div",{className:"",children:[i.jsxs(Dn,{variant:"pills",className:"nav-pill-card mb-3",children:[i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:"/setting/webhooks/configuration",children:l("Configuration","kivicare-clinic-management-system")})}),i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:"/setting/webhooks/events-log",children:l("Events Log","kivicare-clinic-management-system")})}),i.jsx(Dn.Item,{children:i.jsx(Dn.Link,{as:lc,to:"/setting/webhooks/testing",children:l("Testing","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:e?i.jsx(Gi,{}):null})]})]})})},Tie=({stepNumber:t,children:e})=>i.jsx("div",{className:"d-flex flex-column items-list",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsxs("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:[l("Step","kivicare-clinic-management-system")," ",t,":"]}),i.jsx("span",{className:"font-size-14 text-heading",children:e})]})}),Aie=()=>{const{isAddonActive:t}=ht(),e=t("telemed"),{data:n,isLoading:s,error:a}=bn("settings","zoom-telemed",{},{enabled:e}),r=cn("settings","zoom-telemed"),{control:o,handleSubmit:c,watch:d,reset:m,setValue:u,formState:{errors:p}}=Xt({defaultValues:{auth_type:"none",client_id:"",client_secret:"",server_to_server_enabled:!1},shouldUnregister:!1}),[h,g]=f.useState(!1),x=d("auth_type");d("server_to_server_enabled");const v=k=>{u("auth_type",k),k==="oauth"&&u("server_to_server_enabled",!1)};f.useEffect(()=>{if(n?.status&&n?.data){const k=n.data,N={auth_type:k.auth_type||"none",client_id:k.client_id||"",client_secret:k.client_secret||""};m(N)}},[n,m]);const y=k=>{g(!0);const S={auth_type:k.auth_type,client_id:k.client_id,client_secret:k.client_secret,server_to_server_enabled:k.server_to_server_enabled?"Yes":"No"};r.mutateAsync(S).then(N=>{console.log(N),N.status===!0?Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(N.message||"Zoom Telemed settings saved successfully","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(N.message||"Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}).finally(()=>{g(!1)})},b=[{name:"client_id",label:l("Zoom Telemed Client ID","kivicare-clinic-management-system"),placeholder:l("Enter your Zoom Client ID","kivicare-clinic-management-system"),isRequired:!0},{name:"client_secret",label:l("Zoom Telemed Client Secret","kivicare-clinic-management-system"),placeholder:l("Enter your Zoom Client Secret","kivicare-clinic-management-system"),isRequired:!0}],j=[{step:1,content:i.jsxs(i.Fragment,{children:[l("Sign up or Sign in here","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:l("Zoom market Place portal","kivicare-clinic-management-system")})]})},{step:2,content:i.jsxs(i.Fragment,{children:[l("Click/Hover on Develop button at the right in navigation bar and click on build app","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/develop/create",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:l("Create app","kivicare-clinic-management-system")})]})},{step:3,content:l("Select OAuth and click Create","kivicare-clinic-management-system")},{step:4,content:l("Fill the mandatory information and In the App credentials tag you can see Client ID, Client secret And Redirect URL for OAuth.","kivicare-clinic-management-system")},{step:5,content:l("Copy and Paste Client ID, Client secret And Redirect URL here and click on save button and you are ready to go.","kivicare-clinic-management-system")}];if(a){let k;typeof a=="string"?k=a:a?.response?.data?.message?k=a.response.data.message:a?.message?k=a.message:k=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(k,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return e&&(h||s)?i.jsx(pie,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:`position-relative zoom-telemed-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ri,{title:l("Available In Telemed AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-telemed-addon/29363726?s_rank=9"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Zoom Telemed Configuration","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation-telemed/getting-started-telemed-addon/what-is-kivicare-telemedicine-addon/",target:"_blank","data-bs-toggle":"tooltip",title:l("Help","kivicare-clinic-management-system"),"data-bs-placement":"top",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!h||!s)&&i.jsxs("form",{onSubmit:c(y),children:[i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(je,{name:"auth_type",control:o,render:({field:k})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomOAuthSwitch",children:l("Enable Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomOAuthSwitch",checked:k.value==="oauth",onChange:S=>v(S.target.checked?"oauth":"none"),disabled:h||s})]})})})}),x==="oauth"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-4",children:[b.map(k=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"mb-3",children:i.jsx(je,{name:k.name,control:o,rules:{required:k.isRequired?`${k.label} is required`:!1},render:({field:S})=>i.jsxs(i.Fragment,{children:[i.jsxs("label",{htmlFor:S.name,className:"form-label",children:[k.label,k.isRequired&&i.jsx("span",{className:"input-field-required text-danger ms-1",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${p[k.name]?" is-invalid":""}`,id:S.name,name:S.name,placeholder:k.placeholder,value:S.value,onChange:S.onChange}),p[k.name]&&i.jsx("div",{className:"invalid-feedback",children:p[k.name].message})]})})})},k.name)),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Redirect URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:n?.data?.redirect_url||"",readOnly:!0,disabled:!0}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>navigator.clipboard.writeText(n?.data?.redirect_url||""),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:l("Add this URL to your Zoom app's redirect URLs","kivicare-clinic-management-system")})]})})]}),i.jsx("h6",{className:"text-secondary font-size-14 mt-4",children:l("Guide to setup Zoom Telemed with OAuth","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:j.map(k=>i.jsx(Tie,{stepNumber:k.step,children:k.content},k.step))})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(je,{name:"auth_type",control:o,render:({field:k})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomServerSwitch",children:l("Enable Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomServerSwitch",checked:k.value==="server-to-server",onChange:S=>v(S.target.checked?"server-to-server":"none"),disabled:h||s})]})})})}),x==="server-to-server"&&i.jsx("div",{className:"alert alert-info mb-4 bg-info-subtle",children:l("After enabling this, each doctor must configure their Server-to-Server in their own settings","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})]})})})},SC=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{children:[i.jsx(pt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"40px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx(nt,{width:"70px"}),i.jsx(nt,{width:"80px"})]})]})})}),kP=()=>i.jsx("div",{className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"280px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(C,{width:"100%",height:"0.875rem",className:"mt-2"}),i.jsx(C,{width:"80%",height:"0.875rem"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"90%",height:"0.875rem",className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mt-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(nt,{width:"80px",height:"38px"})})]})})}),jP=()=>i.jsxs("div",{className:"permission-setting p-4 position-relative overflow-hidden z-0",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"160px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"permission-setting-tabs",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"100px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:15}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"tab-content mt-2",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsx("div",{className:"permission-switches",children:Array.from({length:12}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"200px",height:"1rem"}),i.jsx(C,{width:"60px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsx(C,{width:"50px",height:"20px",style:{borderRadius:"10px"}})]},e))})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(nt,{width:"80px",height:"38px"})})]})]}),NP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:"sidebar-setting p-4",children:[i.jsx("h6",{className:"setting-title mb-3",children:i.jsx(C,{width:"160px",height:"1.25rem"})}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",children:i.jsx(C,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(C,{width:"90px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsxs("div",{className:"sidebar-items bg-white",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"40px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"50px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"50px",height:"1.125rem",className:"bg-white"})})})]}),Array.from({length:15}).map((t,e)=>i.jsx("div",{style:{paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"20px",height:"20px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-3",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:i.jsx(C,{width:"24px",height:"24px"})})]})},e))]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx(C,{width:"130px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(C,{width:"70px",height:"38px",style:{borderRadius:"4px"}})]})})]})})}),CP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"180px",height:"1.5rem"}),i.jsx(C,{width:"1rem",height:"1rem",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"250px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"38px"})})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx(C,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Die=()=>i.jsxs(xo,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"200px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"400px",height:"1rem"})]}),i.jsxs(Un,{className:"g-4",children:[i.jsx(Ct,{lg:6,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{className:"d-flex align-items-center",children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx(mt.Subtitle,{className:"text-muted small",children:i.jsx(C,{width:"250px",height:"0.875rem"})})]}),i.jsx(mt.Body,{children:i.jsxs(Un,{className:"g-3",children:[i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(nt,{width:"100px",height:"31px"})]}),i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(nt,{width:"100%",height:"38px",className:"flex-fill"}),i.jsx(nt,{width:"100px",height:"38px"})]})})]})})]})}),i.jsx(Ct,{lg:6,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx(mt.Subtitle,{className:"text-muted",children:i.jsx(C,{width:"300px",height:"0.875rem"})})]}),i.jsx(mt.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"hidden"},children:i.jsx("div",{className:"d-grid gap-3",children:[1,2,3].map(t=>i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2 pb-1"}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:[1,2].map(e=>i.jsx("div",{className:"p-3 border rounded",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"0.75rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1.25rem",style:{borderRadius:"10px"}}),i.jsx(C,{width:"16px",height:"16px"})]})]})},e))})]},t))})})})]})})]}),i.jsx(Un,{className:"mt-4",children:i.jsx(Ct,{xs:12,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{children:i.jsx(C,{width:"120px",height:"1.5rem"})}),i.jsx(mt.Subtitle,{className:"text-muted",children:i.jsx(C,{width:"250px",height:"0.875rem"})})]}),i.jsx(mt.Body,{children:i.jsxs("div",{className:"text-center py-5",children:[i.jsx(C,{width:"60px",height:"60px",className:"d-block mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(C,{width:"300px",height:"1rem",className:"mx-auto"})]})})]})})})]}),of=()=>i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsx(C,{width:"80px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"250px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:Array.from({length:6}).map((t,e)=>i.jsx(C,{width:"100px",height:"2rem",style:{borderRadius:"4px"}},e))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(C,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),Rie=[{key:"doctor",label:l("Default status when doctor register","kivicare-clinic-management-system")},{key:"receptionist",label:l("Default status when Receptionist register","kivicare-clinic-management-system")},{key:"patient",label:l("Default status when patient register","kivicare-clinic-management-system")}],Pie={kiviCare_doctor:"doctor",kiviCare_receptionist:"receptionist",kiviCare_patient:"patient"},_C=[{key:jx(),label:l("Clinic Admin","kivicare-clinic-management-system")},{key:oc(),label:l("Doctor","kivicare-clinic-management-system")},{key:Wd(),label:l("Receptionist","kivicare-clinic-management-system")},{key:Vl(),label:l("Patient","kivicare-clinic-management-system")}],Mie="https://www.google.com/recaptcha/admin",Ad={hideUtilityLinks:"off",currencyPrefix:"",currencyPostfix:"",countryCode:"us",countryDialCode:"+44",status:{doctor:"off",receptionist:"off",patient:"on"},role:{[oc()]:"on",[Wd()]:"on",[Vl()]:"on"},enableRecaptcha:"off",recaptchaSiteKey:"",recaptchaSecretKey:"",showOtherGender:"on",loginRedirects:{[jx()]:"",[oc()]:"",[Wd()]:"",[Vl()]:""},logoutRedirects:{[jx()]:"",[oc()]:"",[Wd()]:"",[Vl()]:""},allowEncounterEdit:"off"},Iie=({setting:t,registrationSetting:e,watchedRoles:n,control:s,errors:a,isLoading:r,getBadge:o})=>{const c=n?.[t.key]==="on",d=m=>m===!0||m==="on"?"on":"off";return i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(je,{name:`role.${t.key}`,control:s,render:({field:m})=>i.jsx(ln,{label:t.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:r,error:a.role?.[t.key]})}),i.jsx("div",{className:`kivi-collapse ${c&&e?"show":""}`,children:c&&e&&i.jsx("div",{className:"ms-4",children:i.jsx(je,{name:`status.${e.key}`,control:s,render:({field:m})=>i.jsx(ln,{label:e.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:r,error:a.status?.[e.key]})})})})]})},Oie=({error:t})=>(f.useEffect(()=>{if(t){let e;typeof t=="string"?e=t:t?.response?.data?.message?e=t.response.data.message:t?.message?e=t.message:e=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(e,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}},[t]),null),Lie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(!1),a=f.useRef(null),{data:r,isLoading:o,error:c}=bn("settings","general",{},{enabled:!0}),d=cn("settings","general"),{data:m}=Cn(),u=m?.data?.hideUtilityLinks,{control:p,handleSubmit:h,watch:g,setValue:x,reset:v,formState:{errors:y}}=Xt({defaultValues:Ad}),b=g("enableRecaptcha"),j=g("role"),k=f.useMemo(()=>[{key:oc(),label:l("Doctor Role","kivicare-clinic-management-system")},{key:Wd(),label:l("Receptionist Role","kivicare-clinic-management-system")},{key:Vl(),label:l("Patient Role","kivicare-clinic-management-system")}],[]),S=f.useCallback(T=>({text:T==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:T==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),[]),N=f.useCallback(T=>{const A={...T};if(!A.role)A.role={...Ad.role};else{const E={...Ad.role};Object.keys(E).forEach(P=>{if(A.role[P]===void 0||A.role[P]===null)A.role[P]=E[P];else{const D=A.role[P];A.role[P]=D===!0||D==="on"?"on":"off"}})}if(!A.status)A.status={...Ad.status};else{const E={...Ad.status};Object.keys(E).forEach(P=>{if(A.status[P]===void 0||A.status[P]===null)A.status[P]=E[P];else{const D=A.status[P];A.status[P]=D===!0||D==="on"?"on":"off"}})}return["hideUtilityLinks","enableRecaptcha","showOtherGender","allowEncounterEdit"].forEach(E=>{if(A[E]!==void 0){const P=A[E];A[E]=P===!0||P==="on"?"on":"off"}}),(!A.countryCode||A.countryCode===null)&&(A.countryCode="us"),(!A.countryDialCode||A.countryDialCode===null)&&(A.countryDialCode="+44"),(!A.currencyPrefix||A.currencyPrefix===null)&&(A.currencyPrefix=""),(!A.currencyPostfix||A.currencyPostfix===null)&&(A.currencyPostfix=""),(!A.recaptchaSiteKey||A.recaptchaSiteKey===null)&&(A.recaptchaSiteKey=""),(!A.recaptchaSecretKey||A.recaptchaSecretKey===null)&&(A.recaptchaSecretKey=""),A},[]);f.useEffect(()=>{if(r?.data){const T=N(r.data);v(T)}},[r,v,N]);const _=f.useCallback(async T=>{try{e(""),s(!0);const A=N(T);if(!Object.values(A.role||{}).some(D=>D==="on")){e(l("At least one user registration role must be enabled.","kivicare-clinic-management-system")),a.current?.scrollIntoView({behavior:"smooth"}),a.current?.classList.add("highlight-section"),setTimeout(()=>{a.current?.classList.remove("highlight-section")},2e3);return}if(A.enableRecaptcha==="on"&&(!A.recaptchaSiteKey.trim()||!A.recaptchaSecretKey.trim())){e(l("Both Site Key and Secret Key are required when reCAPTCHA is enabled.","kivicare-clinic-management-system"));return}const E=await d.mutateAsync(A),P={icon:E.status?"success":"error",title:l(E.status?"Success":"Error","kivicare-clinic-management-system"),text:l(E.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")};Ze.fire(P),E.status?e(""):e(E.message)}catch(A){console.error("Failed to save settings:",A),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{s(!1)}},[d,N]),w=f.useCallback(T=>{const A=T?.iso2||"us",M=T?.dialCode?`+${T.dialCode}`:"+1";x("countryCode",A),x("countryDialCode",M)},[x]);return c?i.jsx(Oie,{error:c}):o?i.jsx(uP,{}):i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx("form",{onSubmit:h(_),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Utility Links Setting","kivicare-clinic-management-system"),children:i.jsx(je,{name:"hideUtilityLinks",control:p,render:({field:T})=>i.jsx(ln,{label:l("Hide all utility links : Request features | Get Help | Documentation. ","kivicare-clinic-management-system"),checked:T.value,onChange:A=>{const M=A===!0||A==="on"?"on":"off";T.onChange(M)},disabled:n,error:y.hideUtilityLinks})})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Currency Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(je,{name:"currencyPrefix",control:p,render:({field:T})=>i.jsx(Ut,{label:l("Currency Prefix","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,placeholder:l("Enter currency prefix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPrefix})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(je,{name:"currencyPostfix",control:p,render:({field:T})=>i.jsx(Ut,{label:l("Currency Postfix","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,placeholder:l("Enter currency postfix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPostfix})})})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Country Code Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Select Country","kivicare-clinic-management-system")}),i.jsx(je,{name:"countryCode",control:p,render:({field:T})=>{const A=typeof T.value=="string"&&T.value.length===2?T.value.toLowerCase():"us";return i.jsx("div",{className:"react-international-phone",children:i.jsx(yI,{selectedCountry:A,onSelect:M=>{T.onChange(M.iso2),w(M)},dropdownStyleProps:{className:"country-selector-dropdown"},buttonStyleProps:{className:"country-selector-button"}})})}}),y.countryCode&&i.jsx("div",{className:"text-danger",children:y.countryCode.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(je,{name:"countryDialCode",control:p,render:({field:T})=>i.jsx(Ut,{label:l("Country Dial Code","kivicare-clinic-management-system"),value:T.value||"+44",onChange:A=>{const M=A||"+44";T.onChange(M)},placeholder:l("Enter dial code","kivicare-clinic-management-system"),isDisable:!0,error:y.countryDialCode})})})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx("h4",{children:l("Registration Shortcode Setting","kivicare-clinic-management-system")}),i.jsx(Xa,{title:l("Allowed User Role","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#4-registration-shortcode-settings"},children:i.jsx("div",{className:"d-flex flex-column row-gap-3",ref:a,children:k.map(T=>{const A=Pie[T.key],M=Rie.find(E=>E.key===A);return i.jsx(Iie,{setting:T,registrationSetting:M,watchedRoles:j,control:p,errors:y,isLoading:n,getBadge:S},T.key)})})})]}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Google Recaptcha Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#5-google-recaptcha-settings"},children:i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(je,{name:"enableRecaptcha",control:p,render:({field:T})=>i.jsx(ln,{label:l("Enable Recaptcha","kivicare-clinic-management-system"),checked:T.value,onChange:A=>{const M=A===!0||A==="on"?"on":"off";T.onChange(M)},badge:S(T.value),disabled:n,error:y.enableRecaptcha})}),b==="on"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(je,{name:"recaptchaSiteKey",control:p,render:({field:T})=>i.jsx(Ut,{label:l("Recaptcha Site Key","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,placeholder:l("Enter site key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSiteKey})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(je,{name:"recaptchaSecretKey",control:p,render:({field:T})=>i.jsx(Ut,{label:l("Recaptcha Secret Key","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,placeholder:l("Enter secret key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSecretKey})})})]}),i.jsx("a",{href:Mie,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-decoration-none",children:l("Please Click Here To Create New Site and a Secret Key","kivicare-clinic-management-system")})]}),t&&i.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:t})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Other Gender Setting","kivicare-clinic-management-system"),children:i.jsx(je,{name:"showOtherGender",control:p,render:({field:T})=>i.jsx(ln,{label:l("Show Other Gender Option","kivicare-clinic-management-system"),checked:T.value,onChange:A=>{const M=A===!0||A==="on"?"on":"off";T.onChange(M)},badge:S(T.value),disabled:n,error:y.showOtherGender})})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Login Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#7-login-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(T=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(je,{name:`loginRedirects.${T.key}`,control:p,render:({field:A})=>i.jsx(Ut,{label:`${T.label} ${l("Login Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:l("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.loginRedirects?.[T.key]})})},T.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Logout Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#8-logout-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(T=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(je,{name:`logoutRedirects.${T.key}`,control:p,render:({field:A})=>i.jsx(Ut,{label:`${T.label} ${l("Logout Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:l("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.logoutRedirects?.[T.key]})})},T.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(Xa,{title:l("Encounter Setting","kivicare-clinic-management-system"),children:i.jsx(je,{name:"allowEncounterEdit",control:p,render:({field:T})=>i.jsx(ln,{label:l("Allow Encounter Edit After Close","kivicare-clinic-management-system"),checked:T.value,onChange:A=>{const M=A===!0||A==="on"?"on":"off";T.onChange(M)},badge:S(T.value),disabled:n,error:y.allowEncounterEdit})})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})})})]})})})})},Jv=({isEditing:t=!1,isAdding:e=!1,...n})=>{const{id:s}=Wt(),a=dn(),r=ze(),{isAddonActive:o,userRole:c,currentDoctorId:d,hasCapability:m,defaultClinicId:u}=ht(),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,g=t||e,[x,v]=f.useState(!1),[y,b]=f.useState([]),[j,k]=f.useState(""),[S,N]=f.useState(null),[_,w]=f.useState([]),[T,A]=f.useState([]),[M,E]=f.useState(!0),[P,D]=f.useState({module_type:"",scheduleDate:"",module_id:""}),[O,F]=f.useState({module_type:"",scheduleDate:"",module_id:""}),q=o("kiviPro"),U=c==="kiviCare_doctor",K=qa(j,500),ne=In(),Y=async({page:Me,per_page:ge,search:Ne})=>{try{const qe={dataType:"clinicList",page:Me,per_page:ge,search:Ne};return await r.fetchQuery({queryKey:vt.list(qe),queryFn:()=>Bt.getStaticData(qe),staleTime:300*1e3})}catch(qe){return console.error("Error loading clinics:",qe),{options:[]}}},fe=async({page:Me,per_page:ge,search:Ne})=>{try{const qe={dataType:"staticData",staticDataType:"doctors",page:Me,per_page:ge,search:Ne};return(c==="kiviCare_clinic_admin"||c==="kiviCare_receptionist")&&u&&(qe.clinic_ids=u),await r.fetchQuery({queryKey:vt.list(qe),queryFn:()=>Bt.getStaticData(qe),staleTime:300*1e3})}catch(qe){return console.error("Error loading doctors:",qe),{options:[]}}},[le,W]=f.useState({page:1,perPage:10,searchTerm:"",name:"",module_type:"",module_id:"",orderby:"id",order:"desc"}),{data:z,isLoading:ie,error:re}=Ip({dataType:"staticData",staticDataType:"clinics"},{enabled:!0}),{data:de,isLoading:L}=Ip({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),Q=cn("settings","holidays/update"),V=cn("settings","holidays/delete"),Z=QX(),X=f.useMemo(()=>Object.fromEntries(Object.entries(le).filter(([Me,ge])=>ge!==""&&ge!==null&&ge!==void 0)),[le]),{data:R,isLoading:G}=bn("settings","holidays",X,{enabled:!0}),ee=f.useMemo(()=>[{id:"clinic",label:l("Clinic","kivicare-clinic-management-system")},{id:"doctor",label:l("Doctor","kivicare-clinic-management-system")}],[]);f.useEffect(()=>{U&&d&&W(Me=>({...Me,module_type:"doctor",module_id:d}))},[U,d]),f.useEffect(()=>{z?.status&&z?.data&&w(z.data),R?.status&&R?.data&&(b(R.data.data||[]),R.data.pagination&&Ae(R.data.pagination)),de?.status&&de?.data&&A(de.data)},[z,de,R]),f.useEffect(()=>{if(t&&s&&y.length>0){const Me=y.find(ge=>String(ge.id)===String(s));if(U&&Me&&Me.module_type_label==="clinic"){a("/setting/holidays",{replace:!0});return}Me&&N(Me)}else if(e)if(U){const Me=T.find(ge=>ge.id===d);F({module_type:{id:"doctor",label:l("Doctor","kivicare-clinic-management-system")},scheduleDate:"",module_id:Me||{id:d,label:""}})}else F({module_type:"",scheduleDate:"",module_id:""})},[t,e,s,y,U,d,T,a]),f.useEffect(()=>{W(Me=>({...Me,searchTerm:K,page:1}))},[K]);const ae=f.useCallback(Me=>{bt({title:l("Delete Schedule?","kivicare-clinic-management-system"),text:l("You're about to delete this holiday.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep holiday","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ge=>{ge.isConfirmed&&(yt({title:l("Deleting Schedule...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected holiday.<br>This won't take long.","kivicare-clinic-management-system")}),V.mutate({id:Me},{onSuccess:Ne=>{St({title:l("Schedule Deleted","kivicare-clinic-management-system"),text:Ne?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to holidays","kivicare-clinic-management-system")}),r.invalidateQueries(["settings","listing"])},onError:Ne=>{console.error("Delete clinic error:",Ne);const qe=Ne?.response?.data?.message||Ne?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:qe,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},[V,r]),I=f.useMemo(()=>[ne.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),cell:Me=>Me.getValue()}),ne.accessor("module_type_label",{header:()=>l("Schedule of","kivicare-clinic-management-system"),cell:Me=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:Me.row.original.module_type_label})})}),ne.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:Me=>Me.getValue()}),ne.accessor("start_date",{header:()=>l("From Date","kivicare-clinic-management-system"),cell:Me=>Me.getValue()}),ne.accessor("end_date",{header:()=>l("To Date","kivicare-clinic-management-system"),cell:Me=>Me.getValue()}),...m("clinic_schedule_edit")||m("clinic_schedule_delete")?[ne.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:Me=>{const ge=Me.row.original,Ne=ge.module_type_label==="clinic",qe=!(U&&Ne);return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[m("clinic_schedule_edit")&&qe&&i.jsx(gt,{to:`/setting/holidays/edit/${ge.id}`,className:"btn btn-link text-success fs-5 p-0",title:l("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5"})}),m("clinic_schedule_delete")&&qe&&i.jsx("button",{type:"button",onClick:()=>ae(ge.id),className:"btn btn-link text-danger p-0",title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})},enableSorting:!1})]:[]],[ne,ae,m]),H=f.useCallback(Me=>{k(Me.target.value)},[]);f.useEffect(()=>{if(S){const Me=ee.find(qe=>qe.id===S.module_type_label),ge=qe=>new Date(qe).toISOString().slice(0,10);let Ne=null;S.module_type_label==="clinic"?Ne=_.find(qe=>String(qe.id)===String(S.module_id)):S.module_type_label==="doctor"&&(Ne=T.find(qe=>String(qe.id)===String(S.module_id))),F({id:Number(S.id),module_type:Me||"",scheduleDate:{start:ge(S.start_date),end:ge(S.end_date)},module_id:Ne||""})}},[S,_,T,ee]);const B=()=>{a("/setting/holidays/add")},te=()=>{a("/setting/holidays")},oe=()=>{a("/setting/holidays")},ye=async()=>{if(!(U?!!O.scheduleDate:!!(O.module_type&&O.scheduleDate&&O.module_id))){D({module_type:!U&&!O.module_type?l("Module Type is required.","kivicare-clinic-management-system"):"",scheduleDate:O.scheduleDate?"":l("Schedule Date is required.","kivicare-clinic-management-system"),module_id:!U&&!O.module_id?l("Module ID is required.","kivicare-clinic-management-system"):""}),E(!1);return}bt({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("All the appointments on the selected date will be cancelled.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Yes, save","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(async ge=>{if(ge.isConfirmed){v(!0);try{const Ne=await Q.mutateAsync(O);await r.invalidateQueries(["settings","holidays"]),Ne.status!==!0?rt({title:l("Error","kivicare-clinic-management-system"),text:l(Ne.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):St({title:l("Success","kivicare-clinic-management-system"),text:l(Ne.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),v(!1),a("/setting/holidays"),F({module_type:"",scheduleDate:"",module_id:""}),S&&N(null),D({module_type:"",scheduleDate:"",module_id:""}),E(!0)}catch(Ne){v(!1),console.error("Error submitting form:",Ne),rt({title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save holiday. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}}})};f.useEffect(()=>{if(re){let Me;typeof re=="string"?Me=re:re?.response?.data?.message?Me=re.response.data.message:re?.message?Me=re.message:Me=l("An unknown error occurred","kivicare-clinic-management-system"),rt({title:l("Error","kivicare-clinic-management-system"),text:l(Me,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}},[re]);const[me,xe]=f.useState(!1),Ce=async Me=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ge={format:Me,...X},Ne=await Z.mutateAsync(ge);if(!Ne.status||!Ne.data||!Ne.data.holidays)throw new Error(Ne.message||l("Failed to retrieve export data","kivicare-clinic-management-system"));const qe=new Date().toISOString().split("T")[0],at=Ne.data.holidays;switch(Me){case"csv":cs(at,`holidays-${qe}.csv`);break;case"xls":ds(at,`holidays-${qe}.xls`);break;case"pdf":ms(at,`holidays-${qe}.pdf`,"Holidays List");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(ge){console.error("Export error:",ge),rt({title:l("Error!","kivicare-clinic-management-system"),text:ge.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},he=Me=>{if(Me==="pdf"){if(me)return;xe(!0),Ce("pdf"),setTimeout(()=>xe(!1),2e3)}else Ce(Me)},_e=()=>m("clinic_schedule_export")?i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>he("csv"),title:l("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>he("xls"),title:l("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>he("pdf"),title:l("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}):null,[Ke,Ae]=f.useState({total:0,lastPage:1,perPage:10,currentPage:1}),$e=Me=>{W(ge=>({...ge,page:Me}))},Je=Me=>{W(ge=>({...ge,page:1,perPage:Me}))},et=Me=>{const ge=Me[0];W(ge?Ne=>({...Ne,page:1,orderby:ge.id,order:ge.desc?"desc":"asc"}):Ne=>({...Ne,page:1,orderby:"id",order:"desc"}))};return i.jsx("div",{className:"tab-content",id:"v-pills-tabContent",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-holidays",role:"tabpanel","aria-labelledby":"v-pills-holidays-tab",tabIndex:"0",children:g?i.jsxs("div",{className:"add-holiday-setting",children:[i.jsxs("div",{className:"d-flex align-items-center  justify-content-between  gap-3 mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Add Holiday","kivicare-clinic-management-system")}),i.jsxs("button",{onClick:te,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[!U&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"holidayOf",className:"form-label",children:[l("Holiday of","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ot,{placeholder:l("Select Module Type","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:ee,getOptionValue:Me=>Me.id,getOptionLabel:Me=>Me.label,onChange:Me=>{P?.module_type&&(D(ge=>({...ge,module_type:""})),E(!0)),F(ge=>({...ge,module_type:Me||"",module_id:""}))},value:O.module_type||null,isSearchable:!1,isClearable:!0,error:!!P?.module_type,styles:{menuPortal:Me=>({...Me,zIndex:9999})}},"holiday-of-select"),P?.module_type&&i.jsx("div",{className:"text-danger mt-1",children:P.module_type})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"scheduleDate",className:"form-label",children:[l("Schedule Date","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(si,{options:{mode:"range",dateFormat:bi(window.kc_frontend.date_format),minDate:"today",locale:ai()},className:"form-control",placeholder:l("dd / mm / yyyy","kivicare-clinic-management-system"),value:O.scheduleDate&&O.scheduleDate.start?[ii(O.scheduleDate.start),ii(O.scheduleDate.end||O.scheduleDate.start)]:"",onChange:Me=>{if(P?.scheduleDate&&(D(ge=>({...ge,scheduleDate:""})),E(!0)),Me.length===2){const ge=Ne=>Ne?`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}-${String(Ne.getDate()).padStart(2,"0")}`:"";F(Ne=>({...Ne,scheduleDate:{start:ge(Me[0]),end:ge(Me[1])}}))}},error:P?.scheduleDate?"true":"false"}),P?.scheduleDate&&i.jsx("div",{className:"text-danger mt-1",children:P.scheduleDate})]})}),!U&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"doctor",className:"form-label",children:[O.module_type.id=="doctor"?l("Doctor","kivicare-clinic-management-system"):l("Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(yn,{className:"w-100 react-select-box",classNamePrefix:"react-select",loadOptions:O.module_type?.id==="doctor"?fe:Y,onChange:Me=>{P?.module_id&&(D(ge=>({...ge,module_id:""})),E(!0)),F(ge=>({...ge,module_id:Me||""}))},value:O.module_id||null,isSearchable:!0,isClearable:!0,isDisabled:!O.module_type,error:!!P?.module_id},`form-module-select-${O.module_type?.id}`),P?.module_id&&i.jsx("div",{className:"text-danger mt-1",children:P.module_id})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:oe,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:ye,disabled:!M||x||L||G,children:x||L||G?S?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):S?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"holiday-setting",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between row-gap-2 column-gap-3 flex-md-row flex-column mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0 d-flex align-items-center",children:[l("Holiday List","kivicare-clinic-management-system"),h!=="on"&&i.jsx("span",{className:"ms-2",children:i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/holidays-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})})]}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-4 flex-wrap",children:[q&&i.jsx(_e,{}),m("clinic_schedule_add")&&i.jsxs("button",{onClick:B,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Holiday","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[!U&&i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ot,{placeholder:l("Schedule Type","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:ee,getOptionValue:Me=>Me.id,getOptionLabel:Me=>Me.label,onChange:Me=>{W(ge=>({...ge,module_type:Me?Me.id:"",module_id:""}))},value:ee.find(Me=>Me.id===le.module_type)||null,isSearchable:!1,isClearable:!0,styles:{menuPortal:Me=>({...Me,zIndex:9999})}},"schedule-type-select"),i.jsx(yn,{className:"w-100 react-select-box",classNamePrefix:"react-select",placeholder:le.module_type==="doctor"?l("Select Doctor","kivicare-clinic-management-system"):le.module_type==="clinic"?l("Select Clinic","kivicare-clinic-management-system"):l("Select Type First","kivicare-clinic-management-system"),loadOptions:le.module_type==="doctor"?fe:le.module_type==="clinic"?Y:()=>Promise.resolve({options:[]}),isDisabled:!le.module_type,onChange:Me=>{W(ge=>({...ge,module_id:Me?Me.id:""}))},isSearchable:!0,isClearable:!0},`filter-module-select-${le.module_type}`)]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search by filter","kivicare-clinic-management-system"),onChange:H})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:y,columns:I,currentPage:Ke.currentPage,perPage:Ke.perPage,totalItems:Ke.total,lastPage:Ke.lastPage,onPageChange:$e,onPerPageChange:Je,onSortingChange:et,manualSorting:!0,enableSelection:!1,isLoading:x||L||G})})]})})})},Fie=()=>{const t=cn("settings","configurations"),[e,n]=f.useState(!1),{isAddonActive:s}=ht(),a=s("kiviPro"),{data:r}=Cn(),o=r?.data?.hideUtilityLinks,{data:c,isLoading:d,error:m}=bn("settings","configurations",{},{enabled:!0}),u=[{label:l("Receptionist","kivicare-clinic-management-system"),name:"receptionist",status:0},{label:l("Billing","kivicare-clinic-management-system"),name:"billing",status:0},{label:l("Custom Fields","kivicare-clinic-management-system"),name:"custom_fields",status:0}],p=[{label:l("Problem","kivicare-clinic-management-system"),name:"problem",status:0},{label:l("Observations","kivicare-clinic-management-system"),name:"observation",status:0},{label:l("Note","kivicare-clinic-management-system"),name:"note",status:0}],h=[{label:l("Prescription","kivicare-clinic-management-system"),name:"prescription",status:0}],{register:g,handleSubmit:x,watch:v,setValue:y,reset:b}=Xt({defaultValues:{module_config:u,encounter_modules:p,prescription_modules:h}});f.useEffect(()=>{if(!c?.status||!c?.data)return;const N=w=>Array.isArray(w)?w.map(T=>({...T,status:Number(T.status)||0})):[],_={module_config:u,encounter_modules:p,prescription_modules:h};b(w=>{const T={...w};return["module_config","encounter_modules","prescription_modules"].forEach(A=>{const M=c?.data?.[A];T[A]=N(Array.isArray(M)&&M.length>0?M:_[A])}),T})},[c,b]);const j=async N=>{try{n(!0);const _={module_config:N.module_config,encounter_modules:N.encounter_modules,prescription_modules:N.prescription_modules},w=await t.mutateAsync(_);w.status!==!0?(n(!1),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(w.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})):(n(!1),Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(w.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}))}catch(_){n(!1),console.error("Failed to save settings:",_)}},k=(N,_)=>{const T=v(N).map(A=>A.name===_?{...A,status:A.status===1?0:1}:A);y(N,T)};if(m){let N;typeof m=="string"?N=m:m?.response?.data?.message?N=m.response.data.message:m?.message?N=m.message:N=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(N,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}const S=({title:N,name:_,disabled:w})=>{const T=v(_);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:N}),i.jsx("div",{className:"",children:T.map(A=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",checked:A.status===1,onChange:()=>k(_,A.name),id:A.name,disabled:w}),i.jsx("label",{htmlFor:A.name,className:"form-check-label",children:A.label})]},A.name))})]})})};return d?i.jsx(hP,{}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:[d&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!d&&i.jsxs("form",{onSubmit:x(j),className:"configuration-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Enable/Disable Modules","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/system-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"Top",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx(S,{title:l("Module config","kivicare-clinic-management-system"),name:"module_config",disabled:e}),c?.data?.encounter_modules&&a&&Array.isArray(c.data.encounter_modules)&&i.jsx(S,{title:l("Encounter Module","kivicare-clinic-management-system"),name:"encounter_modules",disabled:e}),c?.data?.prescription_modules&&a&&Array.isArray(c.data.prescription_modules)&&i.jsx(S,{title:l("Prescription Module","kivicare-clinic-management-system"),name:"prescription_modules",disabled:e}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})},ex=[{id:"image/jpeg",text:l("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:l("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:l("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:l("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:l("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:l("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:l("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:l("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:l("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:l("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:l("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:l("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:l("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:l("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:l("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:l("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:l("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:l("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:l("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:l("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:l("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:l("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:l("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:l("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:l("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:l("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:l("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:l("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:l("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:l("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:l("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:l("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:l("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:l("7Z Archive (7z)","kivicare-clinic-management-system")}],tx=()=>{const t=dn(),{hasCapability:e,module_config:n,loading:s}=ht(),{data:a}=Cn(),r=a?.data?.hideUtilityLinks;if(f.useEffect(()=>{if(!s){if((n.custom_fields??"1")==="0"){t("/setting/general-setting",{replace:!0});return}e("custom_field_list")||t("/403",{replace:!0})}},[s,n,e,t]),s||n&&(n.custom_fields??"1")==="0"||!e("custom_field_list"))return null;const[o,c]=f.useState(!1),[d,m]=f.useState(!1),[u,p]=f.useState([]),[h,g]=f.useState(null),x=cn("setting","custom-field/delete"),v=cn("setting","custom-field/status"),{control:y,handleSubmit:b,formState:{errors:j},reset:k,watch:S}=Xt(),N=ze(),{isAddonActive:_}=ht(),[w,T]=f.useState([]),A=_("kiviPro"),[M,E]=f.useState(!1),{id:P}=Wt(),D=Hn(),O=f.useCallback((ge,Ne)=>!ge||!Array.isArray(ge)||ge.length===0?[]:ge.map(qe=>{const at=typeof qe=="object"?qe.id:qe;return Ne.find(Kt=>Kt.id===at)}).filter(Boolean),[]),F=f.useCallback(()=>({id:"",label:"",module_type:"",type:"",status:"",placeholder:"",isRequired:!1,options:[],file_types:[]}),[]),q=YX(),[U,K]=f.useState(!1),ne=()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>he("csv"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>he("xls"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>he("pdf"),disabled:q.isPending||U,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]}),[Y,fe]=f.useState({page:1,perPage:10,searchTerm:"",input_type:"",module_type:"",status:""}),[le,W]=f.useState([]),z=f.useMemo(()=>Object.fromEntries(Object.entries(Y).filter(([ge,Ne])=>Ne!==""&&Ne!==null&&Ne!==void 0)),[Y]),{data:ie,isLoading:re,error:de}=bn("setting","custom-field",z,{enabled:!0}),L=cn("setting","custom-field/update"),{data:Q,isLoading:V}=Ip({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),[Z,X]=f.useState(""),R=qa(Z,500),G=f.useCallback(ge=>{X(ge.target.value)},[]),ee=ge=>{const Ne=ge[0];fe(Ne?qe=>({...qe,page:1,orderby:Ne.id,order:Ne.desc?"desc":"asc"}):qe=>({...qe,page:1,orderby:"id",order:"desc"}))};f.useEffect(()=>{if(D.pathname.endsWith("/add"))c(!0),g(null),k(F());else if(P){const Ne=u.find(qe=>String(qe.id)===P);if(Ne){g(Ne),c(!0);const qe=O(Ne.file_types,ex);k({id:Ne.id,label:Ne.field,module_type:ye.find(at=>at.label===Ne.type)||null,type:me.find(at=>at.value===Ne.inputType)||null,module_id:Ne.module_id&&w.find(at=>at.id===Ne.module_id)||null,status:xe.find(at=>at.id===Ne.status)||null,placeholder:Ne.placeholder||"",isRequired:!!Ne.isRequired,options:Ne.options||[],file_types:qe})}else c(!1),g(null)}else c(!1),g(null),k(F())},[P,D.pathname,u,k,w,O,F]),f.useEffect(()=>{if(h){const ge=h.module_id&&w.length>0?w.find(qe=>String(qe.id)===String(h.module_id)):null,Ne=O(h.file_types,ex);k({id:h.id,label:h.field,module_type:ye.find(qe=>qe.label===h.type)||null,type:me.find(qe=>qe.value===h.inputType)||null,module_id:ge||null,status:xe.find(qe=>qe.id===h.status)||null,placeholder:h.placeholder||"",isRequired:!!h.isRequired,options:h.options||[],file_types:Ne})}},[h,w,O]),f.useEffect(()=>{const ge=S((Ne,{name:qe,type:at})=>{qe==="module_type"&&at==="change"&&(Ne.module_type?.id==="appointment_module"||k(Gt=>({...Gt,module_id:null}),{keepDefaultValues:!0}))});return()=>ge.unsubscribe()},[S,k]);const ae=S("module_type"),I=S("type"),H=In(),B=[H.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system")}),H.accessor("field",{header:()=>l("Field","kivicare-clinic-management-system")}),H.accessor("inputType",{header:()=>l("Input Type","kivicare-clinic-management-system")}),H.accessor("type",{header:()=>l("Type","kivicare-clinic-management-system")}),H.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:ge=>{const Ne=ge.row.original.id,qe=ge.row.original.status,at=qe===1,Kt=qe===0?"bg-danger-subtle":"bg-success-subtle",Gt=qe===0?l("Inactive","kivicare-clinic-management-system"):l("Active","kivicare-clinic-management-system"),tn=Ot=>{const Te=Ot?1:0;v.mutate({id:Ne,status:Te},{onSuccess:()=>{Ee.success(l("Field status has been updated.","kivicare-clinic-management-system")),N.invalidateQueries(["setting","custom-field"])},onError:()=>{Ee.error(l("Failed to update field status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(ln,{checked:at,onChange:tn,disabled:v.isPending,className:"m-0"}),i.jsx("span",{className:`badge ${Kt}`,children:Gt})]})}}),...e("custom_field_edit")||e("custom_field_delete")?[H.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:ge=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("custom_field_edit")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(gt,{className:"text-success btn btn-link p-0",to:`/setting/custom-field/edit/${ge.row.original.id}`,children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),e("custom_field_delete")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-link text-danger p-0",onClick:()=>Ce(ge.cell.row.original.id),children:i.jsx("i",{className:"ph text-danger ph-trash fs-5 p-0"})})})]})})]:[]];f.useEffect(()=>{fe(ge=>({...ge,searchTerm:R,page:1}))},[R]),f.useEffect(()=>{if(!ie?.status){p([]);return}if(ie?.data?.data&&Array.isArray(ie.data.data)){const ge=ie.data.data.map(qe=>{let at={};try{at=qe.fields?JSON.parse(qe.fields):{},typeof at=="object"&&at!==null?at={label:at.name||"",type:at.type||"",placeholder:at.placeholder||"",isRequired:at.isRequired||0,options:at.options||[],file_types:at.file_upload_type||[],status:at.status||1}:at={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}catch{at={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}return{id:qe.id,field:at.label,inputType:at.type,type:ye.find(Kt=>Kt.id===qe.module_type)?.label||qe.module_type||"",module_id:qe.module_id??null,placeholder:at.placeholder,status:Number(qe.status),isRequired:Number(at.isRequired),options:at.options,file_types:at.file_types||[]}}),Ne=A?ge:ge.filter(qe=>qe.type!=="Appointment Module");p(Ne)}else p([])},[ie,A]),f.useEffect(()=>{Q?.status&&Q?.data&&T(Q.data)},[Q]);const te=f.useCallback(ge=>{G(ge)},[G]),oe=ie?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ye=[{id:"doctor_module",label:l("Doctor Module","kivicare-clinic-management-system")},{id:"patient_module",label:l("Patient Module","kivicare-clinic-management-system")},{id:"patient_encounter_module",label:l("Patient Encounter Module","kivicare-clinic-management-system")},{id:"appointment_module",label:l("Appointment Module","kivicare-clinic-management-system")}],me=[{value:"text",label:l("Text","kivicare-clinic-management-system")},{value:"number",label:l("Number","kivicare-clinic-management-system")},{value:"textarea",label:l("Textarea","kivicare-clinic-management-system")},{value:"file_upload",label:l("File Upload","kivicare-clinic-management-system")},{value:"select",label:l("Select","kivicare-clinic-management-system")},{value:"multi_select",label:l("Multi Select","kivicare-clinic-management-system")},{value:"radio",label:l("Radio","kivicare-clinic-management-system")},{value:"checkbox",label:l("Checkbox","kivicare-clinic-management-system")},{value:"calendar",label:l("Calendar","kivicare-clinic-management-system")}],xe=[{id:1,label:l("Active","kivicare-clinic-management-system")},{id:0,label:l("Inactive","kivicare-clinic-management-system")}],Ce=ge=>{bt({title:l("Delete Custom Field?","kivicare-clinic-management-system"),text:l("You're about to delete this custom field.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep custom field","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ne=>{Ne.isConfirmed&&(yt({title:l("Deleting Custom Field...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected custom field.<br>This won't take long.","kivicare-clinic-management-system")}),x.mutate({id:ge},{onSuccess:qe=>{St({title:l("Custom Field Deleted","kivicare-clinic-management-system"),text:qe?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to custom fields","kivicare-clinic-management-system")}),N.invalidateQueries(["setting","custom-field"])},onError:qe=>{console.error("Delete clinic error:",qe);const at=qe?.response?.data?.message||qe?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:at,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},he=ge=>{A?(ge==="csv"&&Ke(),ge==="xls"&&Ae(),ge==="pdf"&&$e()):bt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1})},_e=async ge=>{try{const Ne={format:ge,searchTerm:Y.searchTerm,module_type:Y.module_type,input_type:Y.input_type,status:Y.status},qe=await q.mutateAsync(Ne),at=qe?.data?.customFields||qe?.customFields||qe?.data?.data?.customFields;if(at){const Kt=new Date().toISOString().split("T")[0],Gt=at.map(tn=>({id:tn.id,module:tn.module,label:tn.label,placeholder:tn.placeholder,options:tn.options,input_type:tn.input_type,required:tn.required,status:ge==="pdf"?tn.status==1?"Active":"Inactive":tn.status}));switch(ge){case"csv":cs(Gt,`custom-fields-${Kt}.csv`);break;case"xls":ds(Gt,`custom-fields-${Kt}.xls`);break;case"pdf":ms(Gt,`custom-fields-${Kt}.pdf`,"Custom Fields List");break;default:throw new Error("Invalid export format")}Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}else throw console.error("No custom fields data found in response:",qe),new Error(`No data received from server. Response structure: ${JSON.stringify(qe,null,2)}`)}catch(Ne){console.error("Export error:",Ne),rt({title:l("Error!","kivicare-clinic-management-system"),text:Ne.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},Ke=()=>_e("csv"),Ae=()=>_e("xls"),$e=()=>{U||(K(!0),_e("pdf").finally(()=>{setTimeout(()=>K(!1),1e3)}))},Je=()=>{m(!0)},et=()=>{N.invalidateQueries(["setting","custom-field"])},Me=async ge=>{try{E(!0);const Ne={id:ge.id||"",module_type:{id:ge.module_type?.id||"",label:ge.module_type?.label||""},module_id:ge.module_id?{id:ge.module_id.id||ge.module_id,label:ge.module_id.label||""}:null,fields:[{label:ge.label,type:ge.type?.value||"",options:ge.options||[],file_types:ge.file_types||[],isRequired:ge.isRequired?"1":"0",placeholder:ge.placeholder||"",status:String(ge.status?.id??1)}]};ge.id&&(Ne.fields[0].id=ge.id);const qe=await L.mutateAsync(Ne);qe.status!==!0?rt({title:l("Error","kivicare-clinic-management-system"),text:l(qe.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):(St({title:l("Success","kivicare-clinic-management-system"),text:l(qe.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),N.invalidateQueries(["setting","custom-field"]),t("/setting/custom-field"),c(!1),k())}catch(Ne){console.error("Form submission error:",Ne),rt({title:l("Error","kivicare-clinic-management-system"),text:l(Ne.response?.data?.message||"Failed to save custom field","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{E(!1)}};if(de){let ge;typeof de=="string"?ge=de:de?.response?.data?.message?ge=de.response.data.message:de?.message?ge=de.message:ge=l("An unknown error occurred","kivicare-clinic-management-system"),rt({title:l("Error","kivicare-clinic-management-system"),text:l(ge,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-custom-filed",role:"tabpanel","aria-labelledby":"v-pills-custom-filed-tab",tabIndex:"0",children:[!o&&i.jsxs("div",{className:"custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Custom Field Data","kivicare-clinic-management-system")," ",r!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/custom-field-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[e("custom_field_add")&&i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>t("/setting/custom-field/add"),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Custom field","kivicare-clinic-management-system")})]}),A&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:Je,children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),e("custom_field_export")&&i.jsx(ne,{})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ot,{options:me,placeholder:l("Input Type","kivicare-clinic-management-system"),isSearchable:!0,onChange:ge=>{fe(Ne=>({...Ne,input_type:ge?ge.value:""}))},value:me.find(ge=>ge.value===Y.input_type)||null,isClearable:!0,styles:{menuPortal:ge=>({...ge,zIndex:9999})}}),i.jsx(ot,{placeholder:l("Module Type","kivicare-clinic-management-system"),options:ye,onChange:ge=>{fe(Ne=>({...Ne,module_type:ge?ge.id:""}))},value:ye.find(ge=>ge.id===Y.module_type)||null,isSearchable:!0,isClearable:!0,styles:{menuPortal:ge=>({...ge,zIndex:9999})}}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),options:xe,getOptionLabel:ge=>ge.label,getOptionValue:ge=>ge.id,onChange:ge=>{fe(Ne=>({...Ne,status:ge?ge.id:""}))},value:xe.find(ge=>ge.id===Y.status)||null,isClearable:!0,styles:{menuPortal:ge=>({...ge,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",onChange:te})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:u,columns:B,isLoading:re,error:de,currentPage:oe.currentPage,perPage:oe.perPage,totalItems:oe.total,lastPage:oe.lastPage,onPageChange:ge=>fe(Ne=>({...Ne,page:ge})),onPerPageChange:ge=>fe(Ne=>({...Ne,perPage:ge,page:1})),enableSelection:!1,onSortingChange:ee,manualSorting:!0})})]}),o&&i.jsxs("div",{className:"add-custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title m-0",children:h?l("Edit Custom Field","kivicare-clinic-management-system"):l("Add Custom Field","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsxs("form",{onSubmit:b(Me),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"module_type",control:y,rules:{required:l("Module is required","kivicare-clinic-management-system")},render:({field:ge})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ge.value?JSON.stringify(ge.value):"",onChange:Ne=>{const qe=ye.find(at=>JSON.stringify(at)===Ne.target.value);ge.onChange(qe||null)},children:[i.jsx("option",{value:"",children:l("Select Module","kivicare-clinic-management-system")}),ye.filter(Ne=>A||Ne.id!=="appointment_module").map(Ne=>i.jsx("option",{value:JSON.stringify(Ne),children:Ne.label},Ne.id))]}),ge.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ge.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),j.module_type&&i.jsx("span",{className:"text-danger p",children:j.module_type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Doctor","kivicare-clinic-management-system")," "]}),i.jsx(je,{name:"module_id",control:y,render:({field:ge})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ge.value?JSON.stringify(ge.value):"",onChange:Ne=>{const qe=w.find(at=>JSON.stringify(at)===Ne.target.value);ge.onChange(qe||null)},disabled:!ae||ae.id!=="appointment_module",children:[i.jsx("option",{value:"",children:l("Select Doctor","kivicare-clinic-management-system")}),w.map(Ne=>i.jsx("option",{value:JSON.stringify(Ne),children:Ne.label},Ne.id))]}),ge.value&&ae?.id==="appointment_module"&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ge.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),j.module_id&&i.jsx("span",{className:"text-danger p",children:j.module_id.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(je,{name:"label",control:y,rules:{required:l("Label is required","kivicare-clinic-management-system")},render:({field:ge})=>i.jsx(Ut,{placeholder:l('e.g. "Patient Module"',"kivicare-clinic-management-system"),required:!0,label:l("Label (Where it looks like)","kivicare-clinic-management-system"),hasTooltip:r!=="on",hasUrl:r!=="on"?"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/core-concepts/custom-fields/":"",type:"text",isDisable:!1,error:j.label,value:ge.value??"",onChange:ge.onChange,className:"form-control"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Input Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"type",control:y,rules:{required:l("Input Type is required","kivicare-clinic-management-system")},render:({field:ge})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ge.value?JSON.stringify(ge.value):"",onChange:Ne=>{const qe=me.find(at=>JSON.stringify(at)===Ne.target.value);ge.onChange(qe||null)},children:[i.jsx("option",{value:"",children:l("Select Input Type","kivicare-clinic-management-system")}),me.map(Ne=>i.jsx("option",{value:JSON.stringify(Ne),children:Ne.label},Ne.value))]}),ge.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ge.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),j.type&&i.jsx("span",{className:"text-danger p",children:j.type.message})]})}),I?.value&&I.value!=="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(je,{name:"placeholder",control:y,render:({field:ge})=>i.jsx(Ut,{placeholder:l('eg "Enter placeholder" ',"kivicare-clinic-management-system"),required:!1,label:l("Placeholder","kivicare-clinic-management-system"),type:"text",isDisable:!1,error:j.placeholder,value:ge.value??"",onChange:ge.onChange,className:"form-control"})})})}),I?.value&&I.value==="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"file_types",control:y,rules:{validate:ge=>I?.value==="file_upload"&&(!ge||ge.length===0)?l("File types are required for file upload","kivicare-clinic-management-system"):!0},render:({field:ge})=>i.jsx(ot,{isMulti:!0,className:"w-100",placeholder:l("Select file types","kivicare-clinic-management-system"),options:ex,getOptionLabel:Ne=>Ne.text,getOptionValue:Ne=>Ne.id,value:ge.value||[],onChange:ge.onChange,isClearable:!0,styles:{menuPortal:Ne=>({...Ne,zIndex:9999})}})}),j.file_types&&i.jsx("span",{className:"text-danger p",children:j.file_types.message})]})}),I?.value&&["select","multi_select","radio","checkbox"].includes(I.value)&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Options","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"options",control:y,rules:{validate:ge=>I?.value&&["select","multi_select","radio","checkbox"].includes(I.value)&&(!ge||ge.length===0)?l("Options are required for this input type","kivicare-clinic-management-system"):!0},render:({field:ge})=>i.jsx(ko,{isMulti:!0,className:"w-100",placeholder:l("Type and press enter to add","kivicare-clinic-management-system"),value:ge.value||[],onChange:ge.onChange,onCreateOption:Ne=>{const qe={label:Ne,value:Ne};W(at=>[...at,qe]),ge.onChange([...ge.value||[],qe])},options:[...le,...ge.value||[]],isClearable:!0})}),j.options&&i.jsx("span",{className:"text-danger p",children:j.options.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"status",control:y,rules:{required:l("Status is required","kivicare-clinic-management-system")},render:({field:ge})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ge.value?JSON.stringify(ge.value):"",onChange:Ne=>{const qe=xe.find(at=>JSON.stringify(at)===Ne.target.value);ge.onChange(qe||null)},children:[i.jsx("option",{value:"",children:l("Select Status","kivicare-clinic-management-system")}),xe.map(Ne=>i.jsx("option",{value:JSON.stringify(Ne),children:Ne.label},Ne.id))]}),ge.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ge.onChange(null),title:l("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),j.status&&i.jsx("span",{className:"text-danger p",children:j.status.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Validation","kivicare-clinic-management-system")," "]}),i.jsx(je,{name:"isRequired",control:y,render:({field:ge})=>i.jsx("div",{className:"bg-body px-3 py-2 rounded",children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"mandatory-field",checked:!!ge.value,onChange:ge.onChange}),i.jsx("label",{htmlFor:"mandatory-field",className:"form-check-label",children:l("Mandatory field","kivicare-clinic-management-system")})]})})}),j.isRequired&&i.jsx("span",{className:"text-danger p",children:j.isRequired.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:M,children:M?h?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):h?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})]})]}),i.jsx(Ar,{show:d,onHide:()=>m(!1),onDataRefresh:et,context:"custom-fields"})]})},$ie=()=>i.jsx("div",{className:"custom-form-preview-skeleton p-3",children:i.jsxs(Un,{className:"g-3",children:[i.jsx(Ct,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Ct,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Ct,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"5rem"})]})}),i.jsx(Ct,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"90px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Ct,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"110px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Ct,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Ct,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"130px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex gap-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"60px",height:"1rem"})]})]})]})})]})}),Bie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(1),[a]=f.useState(10),[r,o]=f.useState(!1),[c,d]=f.useState(null),{hasCapability:m,isAddonActive:u}=ht(),p=u("kiviPro"),{data:h}=Cn(),g=h?.data?.hideUtilityLinks,{data:x,isLoading:v,error:y}=SJ({page:n,limit:a,search:t||void 0},{enabled:p}),b=TJ(),j=AJ(),k=x?.pagination||{total:0,lastPage:1,perPage:a,currentPage:n},S=x?.data?.forms?.map(A=>({id:A.id,name:A.name?.text||A.name,type:A.moduleType?.label,status:A.status.label,statusValue:A.status.value,statusClass:A.status.value==="active"?"bg-success-subtle":"bg-danger-subtle",hasView:!0}))||[],N=In(),_=[N.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system")}),N.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system")}),N.accessor("type",{header:()=>l("Type","kivicare-clinic-management-system")}),N.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:A=>{const M=A.row.original.id,E=A.row.original.statusValue,P=A.getValue(),D=E==="active",O=F=>{const q=F?1:0;j.mutate({id:M,status:q},{onSuccess:()=>{Ee.success(l("Form status has been updated.","kivicare-clinic-management-system"))},onError:()=>{Ee.error(l("Failed to update form status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(ln,{checked:D,onChange:O,disabled:j.isLoading,className:"m-0"}),i.jsx("span",{className:`badge ${A.row.original.statusClass}`,children:P})]})}}),...m("custom_form_view")||m("custom_form_edit")||m("custom_form_delete")?[N.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:A=>i.jsx(w,{hasView:A.row.original.hasView,id:A.row.original.id})})]:[]],w=({hasView:A,id:M})=>{const E=()=>{d(M),o(!0)},P=()=>{Ze.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system")}).then(D=>{D.isConfirmed&&b.mutate(M,{onSuccess:()=>{Ze.fire(l("Deleted!","kivicare-clinic-management-system"),l("Your form has been deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{Ze.fire(l("Error!","kivicare-clinic-management-system"),l("Failed to delete the form.","kivicare-clinic-management-system"),"error")}})})};return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[A&&m("custom_form_view")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("View","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",onClick:E,className:"btn btn-link p-0 d-inline-block",children:i.jsx("span",{className:"text-gray fs-5",children:i.jsx("i",{className:"ph ph-eye"})})})}),m("custom_form_edit")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Edit","kivicare-clinic-management-system")}),children:i.jsx(gt,{to:`edit/${M}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),m("custom_form_delete")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Delete","kivicare-clinic-management-system")}),children:i.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),P()},className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})},T=A=>{e(A.target.value),s(1)};return y?i.jsx("div",{className:"alert alert-danger",children:l("Failed to load custom forms","kivicare-clinic-management-system")}):i.jsxs("div",{children:[i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-forms-setting${p?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Custom Form List","kivicare-clinic-management-system")," ",g!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-form-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",value:t,onChange:T})]})}),m("custom_form_add")&&i.jsxs(gt,{to:"add/",className:`btn btn-primary d-flex align-items-center gap-2 ${p?"":"disabled"}`,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Form","kivicare-clinic-management-system")})]})]}),!p&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:S,columns:_,currentPage:k.currentPage,perPage:k.perPage,totalItems:k.total,lastPage:k.lastPage,enableSelection:!1,isLoading:v,onPageChange:s})})]})}),i.jsx(qie,{show:r,onHide:()=>o(!1),formId:c})]})},qie=({show:t,onHide:e,formId:n})=>{const{data:s,isLoading:a}=QR(n,{enabled:!!n}),r=s?.data;return i.jsxs(st,{show:t,onHide:e,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(st.Header,{closeButton:!0,children:i.jsxs(st.Title,{children:[l("Form Preview","kivicare-clinic-management-system")," - ",r?.name?.text||r?.name]})}),i.jsx(st.Body,{children:a?i.jsx($ie,{}):i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Oa,{fields:r?.fields||[],data:{},readOnly:!1,formId:`preview_form_${n}`}),r?.fields?.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:l("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(st.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:l("Close Preview","kivicare-clinic-management-system")})})]})};function Hie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ad(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Dk(t){return"nodeType"in t}function Ki(t){var e,n;return t?ad(t)?t:Dk(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Rk(t){const{Document:e}=Ki(t);return t instanceof e}function mu(t){return ad(t)?!1:t instanceof Ki(t).HTMLElement}function SP(t){return t instanceof Ki(t).SVGElement}function rd(t){return t?ad(t)?t.document:Dk(t)?Rk(t)?t:mu(t)||SP(t)?t.ownerDocument:document:document:document}const oa=cf?f.useLayoutEffect:f.useEffect;function df(t){const e=f.useRef(t);return oa(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function zie(){const t=f.useRef(null),e=f.useCallback((s,a)=>{t.current=setInterval(s,a)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Rm(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return oa(()=>{n.current!==t&&(n.current=t)},e),n}function uu(t,e){const n=f.useRef();return f.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function ig(t){const e=df(t),n=f.useRef(null),s=f.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,s]}function sg(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let nx={};function hu(t,e){return f.useMemo(()=>{if(e)return e;const n=nx[t]==null?0:nx[t]+1;return nx[t]=n,t+"-"+n},[t,e])}function _P(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((r,o)=>{const c=Object.entries(o);for(const[d,m]of c){const u=r[d];u!=null&&(r[d]=u+t*m)}return r},{...e})}}const wc=_P(1),ag=_P(-1);function Vie(t){return"clientX"in t&&"clientY"in t}function mf(t){if(!t)return!1;const{KeyboardEvent:e}=Ki(t.target);return e&&t instanceof e}function Uie(t){if(!t)return!1;const{TouchEvent:e}=Ki(t.target);return e&&t instanceof e}function rg(t){if(Uie(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Vie(t)?{x:t.clientX,y:t.clientY}:null}const La=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[La.Translate.toString(t),La.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),EC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Wie(t){return t.matches(EC)?t:t.querySelector(EC)}const Kie={display:"none"};function Gie(t){let{id:e,value:n}=t;return He.createElement("div",{id:e,style:Kie},n)}function Yie(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return He.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function Qie(){const[t,e]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const EP=f.createContext(null);function Zie(t){const e=f.useContext(EP);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Xie(){const[t]=f.useState(()=>new Set),e=f.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[f.useCallback(s=>{let{type:a,event:r}=s;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,r)})},[t]),e]}const Jie={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ese={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function tse(t){let{announcements:e=ese,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=Jie}=t;const{announce:r,announcement:o}=Qie(),c=hu("DndLiveRegion"),[d,m]=f.useState(!1);if(f.useEffect(()=>{m(!0)},[]),Zie(f.useMemo(()=>({onDragStart(p){let{active:h}=p;r(e.onDragStart({active:h}))},onDragMove(p){let{active:h,over:g}=p;e.onDragMove&&r(e.onDragMove({active:h,over:g}))},onDragOver(p){let{active:h,over:g}=p;r(e.onDragOver({active:h,over:g}))},onDragEnd(p){let{active:h,over:g}=p;r(e.onDragEnd({active:h,over:g}))},onDragCancel(p){let{active:h,over:g}=p;r(e.onDragCancel({active:h,over:g}))}}),[r,e])),!d)return null;const u=He.createElement(He.Fragment,null,He.createElement(Gie,{id:s,value:a.draggable}),He.createElement(Yie,{id:c,announcement:o}));return n?Sa.createPortal(u,n):u}var oi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(oi||(oi={}));function lg(){}function Qh(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function TP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ca=Object.freeze({x:0,y:0});function nse(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ise(t,e){const n=rg(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function sse(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function ase(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function rse(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function TC(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const AP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=TC(e,e.left,e.top),r=[];for(const o of s){const{id:c}=o,d=n.get(c);if(d){const m=nse(TC(d),a);r.push({id:c,data:{droppableContainer:o,value:m}})}}return r.sort(sse)};function lse(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),r=Math.min(e.top+e.height,t.top+t.height),o=a-s,c=r-n;if(s<a&&n<r){const d=e.width*e.height,m=t.width*t.height,u=o*c,p=u/(d+m-u);return Number(p.toFixed(4))}return 0}const DP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=[];for(const r of s){const{id:o}=r,c=n.get(o);if(c){const d=lse(c,e);d>0&&a.push({id:o,data:{droppableContainer:r,value:d}})}}return a.sort(ase)};function ose(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function RP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ca}function cse(t){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),r=1;r<s;r++)a[r-1]=arguments[r];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const dse=cse(1);function PP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mse(t,e,n){const s=PP(e);if(!s)return t;const{scaleX:a,scaleY:r,x:o,y:c}=s,d=t.left-o-(1-a)*parseFloat(n),m=t.top-c-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?t.width/a:t.width,p=r?t.height/r:t.height;return{width:u,height:p,top:m,right:d+u,bottom:m+p,left:d}}const use={ignoreTransform:!1};function ld(t,e){e===void 0&&(e=use);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=Ki(t).getComputedStyle(t);m&&(n=mse(n,m,u))}const{top:s,left:a,width:r,height:o,bottom:c,right:d}=n;return{top:s,left:a,width:r,height:o,bottom:c,right:d}}function AC(t){return ld(t,{ignoreTransform:!0})}function hse(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function pse(t,e){return e===void 0&&(e=Ki(t).getComputedStyle(t)),e.position==="fixed"}function gse(t,e){e===void 0&&(e=Ki(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const r=e[a];return typeof r=="string"?n.test(r):!1})}function Pk(t,e){const n=[];function s(a){if(e!=null&&n.length>=e||!a)return n;if(Rk(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!mu(a)||SP(a)||n.includes(a))return n;const r=Ki(t).getComputedStyle(a);return a!==t&&gse(a,r)&&n.push(a),pse(a,r)?n:s(a.parentNode)}return t?s(t):n}function MP(t){const[e]=Pk(t,1);return e??null}function ix(t){return!cf||!t?null:ad(t)?t:Dk(t)?Rk(t)||t===rd(t).scrollingElement?window:mu(t)?t:null:null}function IP(t){return ad(t)?t.scrollX:t.scrollLeft}function OP(t){return ad(t)?t.scrollY:t.scrollTop}function qy(t){return{x:IP(t),y:OP(t)}}var ui;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ui||(ui={}));function LP(t){return!cf||!t?!1:t===document.scrollingElement}function FP(t){const e={x:0,y:0},n=LP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,r=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,c=t.scrollLeft>=s.x;return{isTop:a,isLeft:r,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const fse={x:.2,y:.2};function vse(t,e,n,s,a){let{top:r,left:o,right:c,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=fse);const{isTop:m,isBottom:u,isLeft:p,isRight:h}=FP(t),g={x:0,y:0},x={x:0,y:0},v={height:e.height*a.y,width:e.width*a.x};return!m&&r<=e.top+v.height?(g.y=ui.Backward,x.y=s*Math.abs((e.top+v.height-r)/v.height)):!u&&d>=e.bottom-v.height&&(g.y=ui.Forward,x.y=s*Math.abs((e.bottom-v.height-d)/v.height)),!h&&c>=e.right-v.width?(g.x=ui.Forward,x.x=s*Math.abs((e.right-v.width-c)/v.width)):!p&&o<=e.left+v.width&&(g.x=ui.Backward,x.x=s*Math.abs((e.left+v.width-o)/v.width)),{direction:g,speed:x}}function xse(t){if(t===document.scrollingElement){const{innerWidth:r,innerHeight:o}=window;return{top:0,left:0,right:r,bottom:o,width:r,height:o}}const{top:e,left:n,right:s,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:a,width:t.clientWidth,height:t.clientHeight}}function $P(t){return t.reduce((e,n)=>wc(e,qy(n)),ca)}function yse(t){return t.reduce((e,n)=>e+IP(n),0)}function bse(t){return t.reduce((e,n)=>e+OP(n),0)}function BP(t,e){if(e===void 0&&(e=ld),!t)return;const{top:n,left:s,bottom:a,right:r}=e(t);MP(t)&&(a<=0||r<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const wse=[["x",["left","right"],yse],["y",["top","bottom"],bse]];class Mk{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Pk(n),a=$P(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,o,c]of wse)for(const d of o)Object.defineProperty(this,d,{get:()=>{const m=c(s),u=a[r]-m;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var a;(a=this.target)==null||a.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function kse(t){const{EventTarget:e}=Ki(t);return t instanceof e?t:rd(t)}function sx(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ds;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ds||(Ds={}));function DC(t){t.preventDefault()}function jse(t){t.stopPropagation()}var pn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pn||(pn={}));const qP={start:[pn.Space,pn.Enter],cancel:[pn.Esc],end:[pn.Space,pn.Enter,pn.Tab]},Nse=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pn.Right:return{...n,x:n.x+25};case pn.Left:return{...n,x:n.x-25};case pn.Down:return{...n,y:n.y+25};case pn.Up:return{...n,y:n.y-25}}};class Ik{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new lm(rd(n)),this.windowListeners=new lm(Ki(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ds.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&BP(s),n(ca)}handleKeyDown(e){if(mf(e)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:r=qP,coordinateGetter:o=Nse,scrollBehavior:c="smooth"}=a,{code:d}=e;if(r.end.includes(d)){this.handleEnd(e);return}if(r.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=s.current,u=m?{x:m.left,y:m.top}:ca;this.referenceCoordinates||(this.referenceCoordinates=u);const p=o(e,{active:n,context:s.current,currentCoordinates:u});if(p){const h=ag(p,u),g={x:0,y:0},{scrollableAncestors:x}=s.current;for(const v of x){const y=e.code,{isTop:b,isRight:j,isLeft:k,isBottom:S,maxScroll:N,minScroll:_}=FP(v),w=xse(v),T={x:Math.min(y===pn.Right?w.right-w.width/2:w.right,Math.max(y===pn.Right?w.left:w.left+w.width/2,p.x)),y:Math.min(y===pn.Down?w.bottom-w.height/2:w.bottom,Math.max(y===pn.Down?w.top:w.top+w.height/2,p.y))},A=y===pn.Right&&!j||y===pn.Left&&!k,M=y===pn.Down&&!S||y===pn.Up&&!b;if(A&&T.x!==p.x){const E=v.scrollLeft+h.x,P=y===pn.Right&&E<=N.x||y===pn.Left&&E>=_.x;if(P&&!h.y){v.scrollTo({left:E,behavior:c});return}P?g.x=v.scrollLeft-E:g.x=y===pn.Right?v.scrollLeft-N.x:v.scrollLeft-_.x,g.x&&v.scrollBy({left:-g.x,behavior:c});break}else if(M&&T.y!==p.y){const E=v.scrollTop+h.y,P=y===pn.Down&&E<=N.y||y===pn.Up&&E>=_.y;if(P&&!h.x){v.scrollTo({top:E,behavior:c});return}P?g.y=v.scrollTop-E:g.y=y===pn.Down?v.scrollTop-N.y:v.scrollTop-_.y,g.y&&v.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,wc(ag(p,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ik.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=qP,onActivation:a}=e,{active:r}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const c=r.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function RC(t){return!!(t&&"distance"in t)}function PC(t){return!!(t&&"delay"in t)}class Ok{constructor(e,n,s){var a;s===void 0&&(s=kse(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:r}=e,{target:o}=r;this.props=e,this.events=n,this.document=rd(o),this.documentListeners=new lm(this.document),this.listeners=new lm(s),this.windowListeners=new lm(Ki(o)),this.initialCoordinates=(a=rg(r))!=null?a:ca,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.DragStart,DC),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),this.windowListeners.add(Ds.ContextMenu,DC),this.documentListeners.add(Ds.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(PC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(RC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ds.Click,jse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ds.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:a,props:r}=this,{onMove:o,options:{activationConstraint:c}}=r;if(!a)return;const d=(n=rg(e))!=null?n:ca,m=ag(a,d);if(!s&&c){if(RC(c)){if(c.tolerance!=null&&sx(m,c.tolerance))return this.handleCancel();if(sx(m,c.distance))return this.handleStart()}if(PC(c)&&sx(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===pn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Cse={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lk extends Ok{constructor(e){const{event:n}=e,s=rd(n.target);super(e,Cse,s)}}Lk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Sse={move:{name:"mousemove"},end:{name:"mouseup"}};var Hy;(function(t){t[t.RightClick=2]="RightClick"})(Hy||(Hy={}));class HP extends Ok{constructor(e){super(e,Sse,rd(e.event.target))}}HP.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Hy.RightClick?!1:(s?.({event:n}),!0)}}];const ax={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zP extends Ok{constructor(e){super(e,ax)}static setup(){return window.addEventListener(ax.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ax.move.name,e)};function e(){}}}zP.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:a}=n;return a.length>1?!1:(s?.({event:n}),!0)}}];var om;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(om||(om={}));var og;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(og||(og={}));function _se(t){let{acceleration:e,activator:n=om.Pointer,canScroll:s,draggingRect:a,enabled:r,interval:o=5,order:c=og.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:p,threshold:h}=t;const g=Tse({delta:p,disabled:!r}),[x,v]=zie(),y=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),j=f.useMemo(()=>{switch(n){case om.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case om.DraggableRect:return a}},[n,a,d]),k=f.useRef(null),S=f.useCallback(()=>{const _=k.current;if(!_)return;const w=y.current.x*b.current.x,T=y.current.y*b.current.y;_.scrollBy(w,T)},[]),N=f.useMemo(()=>c===og.TreeOrder?[...m].reverse():m,[c,m]);f.useEffect(()=>{if(!r||!m.length||!j){v();return}for(const _ of N){if(s?.(_)===!1)continue;const w=m.indexOf(_),T=u[w];if(!T)continue;const{direction:A,speed:M}=vse(_,T,j,e,h);for(const E of["x","y"])g[E][A[E]]||(M[E]=0,A[E]=0);if(M.x>0||M.y>0){v(),k.current=_,x(S,o),y.current=M,b.current=A;return}}y.current={x:0,y:0},b.current={x:0,y:0},v()},[e,S,s,v,r,o,JSON.stringify(j),JSON.stringify(g),x,m,N,u,JSON.stringify(h)])}const Ese={x:{[ui.Backward]:!1,[ui.Forward]:!1},y:{[ui.Backward]:!1,[ui.Forward]:!1}};function Tse(t){let{delta:e,disabled:n}=t;const s=sg(e);return uu(a=>{if(n||!s||!a)return Ese;const r={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[ui.Backward]:a.x[ui.Backward]||r.x===-1,[ui.Forward]:a.x[ui.Forward]||r.x===1},y:{[ui.Backward]:a.y[ui.Backward]||r.y===-1,[ui.Forward]:a.y[ui.Forward]||r.y===1}}},[n,e,s])}function Ase(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return uu(a=>{var r;return e==null?null:(r=s??a)!=null?r:null},[s,e])}function Dse(t,e){return f.useMemo(()=>t.reduce((n,s)=>{const{sensor:a}=s,r=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...r]},[]),[t,e])}var Pm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pm||(Pm={}));var zy;(function(t){t.Optimized="optimized"})(zy||(zy={}));const MC=new Map;function Rse(t,e){let{dragging:n,dependencies:s,config:a}=e;const[r,o]=f.useState(null),{frequency:c,measure:d,strategy:m}=a,u=f.useRef(t),p=y(),h=Rm(p),g=f.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(j=>j===null?b:j.concat(b.filter(k=>!j.includes(k))))},[h]),x=f.useRef(null),v=uu(b=>{if(p&&!n)return MC;if(!b||b===MC||u.current!==t||r!=null){const j=new Map;for(let k of t){if(!k)continue;if(r&&r.length>0&&!r.includes(k.id)&&k.rect.current){j.set(k.id,k.rect.current);continue}const S=k.node.current,N=S?new Mk(d(S),S):null;k.rect.current=N,N&&j.set(k.id,N)}return j}return b},[t,r,n,p,d]);return f.useEffect(()=>{u.current=t},[t]),f.useEffect(()=>{p||g()},[n,p]),f.useEffect(()=>{r&&r.length>0&&o(null)},[JSON.stringify(r)]),f.useEffect(()=>{p||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},c))},[c,p,g,...s]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:r!=null};function y(){switch(m){case Pm.Always:return!1;case Pm.BeforeDragging:return n;default:return!n}}}function Fk(t,e){return uu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Pse(t,e){return Fk(t,e)}function Mse(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(s)},[s,n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function uf(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(s)},[n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function Ise(t){return new Mk(ld(t),t)}function IC(t,e,n){e===void 0&&(e=Ise);const[s,a]=f.useState(null);function r(){a(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const u=e(t);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=Mse({callback(d){if(t)for(const m of d){const{type:u,target:p}=m;if(u==="childList"&&p instanceof HTMLElement&&p.contains(t)){r();break}}}}),c=uf({callback:r});return oa(()=>{r(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),s}function Ose(t){const e=Fk(t);return RP(t,e)}const OC=[];function Lse(t){const e=f.useRef(t),n=uu(s=>t?s&&s!==OC&&t&&e.current&&t.parentNode===e.current.parentNode?s:Pk(t):OC,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function Fse(t){const[e,n]=f.useState(null),s=f.useRef(t),a=f.useCallback(r=>{const o=ix(r.target);o&&n(c=>c?(c.set(o,qy(o)),new Map(c)):null)},[]);return f.useEffect(()=>{const r=s.current;if(t!==r){o(r);const c=t.map(d=>{const m=ix(d);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,qy(m)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=t}return()=>{o(t),o(r)};function o(c){c.forEach(d=>{const m=ix(d);m?.removeEventListener("scroll",a)})}},[a,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((r,o)=>wc(r,o),ca):$P(t):ca,[t,e])}function LC(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const s=t!==ca;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?ag(t,n.current):ca}function $se(t){f.useEffect(()=>{if(!cf)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function Bse(t,e){return f.useMemo(()=>t.reduce((n,s)=>{let{eventName:a,handler:r}=s;return n[a]=o=>{r(o,e)},n},{}),[t,e])}function VP(t){return f.useMemo(()=>t?hse(t):null,[t])}const FC=[];function qse(t,e){e===void 0&&(e=ld);const[n]=t,s=VP(n?Ki(n):null),[a,r]=f.useState(FC);function o(){r(()=>t.length?t.map(d=>LP(d)?s:new Mk(e(d),d)):FC)}const c=uf({callback:o});return oa(()=>{c?.disconnect(),o(),t.forEach(d=>c?.observe(d))},[t]),a}function UP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return mu(e)?e:t}function Hse(t){let{measure:e}=t;const[n,s]=f.useState(null),a=f.useCallback(m=>{for(const{target:u}of m)if(mu(u)){s(p=>{const h=e(u);return p?{...p,width:h.width,height:h.height}:h});break}},[e]),r=uf({callback:a}),o=f.useCallback(m=>{const u=UP(m);r?.disconnect(),u&&r?.observe(u),s(u?e(u):null)},[e,r]),[c,d]=ig(o);return f.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const zse=[{sensor:Lk,options:{}},{sensor:Ik,options:{}}],Vse={current:{}},Zh={draggable:{measure:AC},droppable:{measure:AC,strategy:Pm.WhileDragging,frequency:zy.Optimized},dragOverlay:{measure:ld}};class cm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Use={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zh,measureDroppableContainers:lg,windowRect:null,measuringScheduled:!1},WP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lg,draggableNodes:new Map,over:null,measureDroppableContainers:lg},pu=f.createContext(WP),KP=f.createContext(Use);function Wse(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new cm}}}function Kse(t,e){switch(e.type){case oi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case oi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case oi.DragEnd:case oi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case oi.RegisterDroppable:{const{element:n}=e,{id:s}=n,a=new cm(t.droppable.containers);return a.set(s,n),{...t,droppable:{...t.droppable,containers:a}}}case oi.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=e,r=t.droppable.containers.get(n);if(!r||s!==r.key)return t;const o=new cm(t.droppable.containers);return o.set(n,{...r,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case oi.UnregisterDroppable:{const{id:n,key:s}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const r=new cm(t.droppable.containers);return r.delete(n),{...t,droppable:{...t.droppable,containers:r}}}default:return t}}function Gse(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:a}=f.useContext(pu),r=sg(s),o=sg(n?.id);return f.useEffect(()=>{if(!e&&!s&&r&&o!=null){if(!mf(r)||document.activeElement===r.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:m}=c;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const p=Wie(u);if(p){p.focus();break}}})}},[s,e,a,o,r]),null}function GP(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((a,r)=>r({transform:a,...s}),n):n}function Yse(t){return f.useMemo(()=>({draggable:{...Zh.draggable,...t?.draggable},droppable:{...Zh.droppable,...t?.droppable},dragOverlay:{...Zh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Qse(t){let{activeNode:e,measure:n,initialRect:s,config:a=!0}=t;const r=f.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;oa(()=>{if(!o&&!c||!e){r.current=!1;return}if(r.current||!s)return;const m=e?.node.current;if(!m||m.isConnected===!1)return;const u=n(m),p=RP(u,s);if(o||(p.x=0),c||(p.y=0),r.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=MP(m);h&&h.scrollBy({top:p.y,left:p.x})}},[e,o,c,s,n])}const hf=f.createContext({...ca,scaleX:1,scaleY:1});var qr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(qr||(qr={}));const $k=f.memo(function(e){var n,s,a,r;let{id:o,accessibility:c,autoScroll:d=!0,children:m,sensors:u=zse,collisionDetection:p=DP,measuring:h,modifiers:g,...x}=e;const v=f.useReducer(Kse,void 0,Wse),[y,b]=v,[j,k]=Xie(),[S,N]=f.useState(qr.Uninitialized),_=S===qr.Initialized,{draggable:{active:w,nodes:T,translate:A},droppable:{containers:M}}=y,E=w!=null?T.get(w):null,P=f.useRef({initial:null,translated:null}),D=f.useMemo(()=>{var Te;return w!=null?{id:w,data:(Te=E?.data)!=null?Te:Vse,rect:P}:null},[w,E]),O=f.useRef(null),[F,q]=f.useState(null),[U,K]=f.useState(null),ne=Rm(x,Object.values(x)),Y=hu("DndDescribedBy",o),fe=f.useMemo(()=>M.getEnabled(),[M]),le=Yse(h),{droppableRects:W,measureDroppableContainers:z,measuringScheduled:ie}=Rse(fe,{dragging:_,dependencies:[A.x,A.y],config:le.droppable}),re=Ase(T,w),de=f.useMemo(()=>U?rg(U):null,[U]),L=Ot(),Q=Pse(re,le.draggable.measure);Qse({activeNode:w!=null?T.get(w):null,config:L.layoutShiftCompensation,initialRect:Q,measure:le.draggable.measure});const V=IC(re,le.draggable.measure,Q),Z=IC(re?re.parentElement:null),X=f.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),R=M.getNodeFor((n=X.current.over)==null?void 0:n.id),G=Hse({measure:le.dragOverlay.measure}),ee=(s=G.nodeRef.current)!=null?s:re,ae=_?(a=G.rect)!=null?a:V:null,I=!!(G.nodeRef.current&&G.rect),H=Ose(I?null:V),B=VP(ee?Ki(ee):null),te=Lse(_?R??re:null),oe=qse(te),ye=GP(g,{transform:{x:A.x-H.x,y:A.y-H.y,scaleX:1,scaleY:1},activatorEvent:U,active:D,activeNodeRect:V,containerNodeRect:Z,draggingNodeRect:ae,over:X.current.over,overlayNodeRect:G.rect,scrollableAncestors:te,scrollableAncestorRects:oe,windowRect:B}),me=de?wc(de,A):null,xe=Fse(te),Ce=LC(xe),he=LC(xe,[V]),_e=wc(ye,Ce),Ke=ae?dse(ae,ye):null,Ae=D&&Ke?p({active:D,collisionRect:Ke,droppableRects:W,droppableContainers:fe,pointerCoordinates:me}):null,$e=rse(Ae,"id"),[Je,et]=f.useState(null),Me=I?ye:wc(ye,he),ge=ose(Me,(r=Je?.rect)!=null?r:null,V),Ne=f.useRef(null),qe=f.useCallback((Te,Fe)=>{let{sensor:J,options:se}=Fe;if(O.current==null)return;const ke=T.get(O.current);if(!ke)return;const Pe=Te.nativeEvent,Xe=new J({active:O.current,activeNode:ke,event:Pe,options:se,context:X,onAbort(lt){if(!T.get(lt))return;const{onDragAbort:_t}=ne.current,ct={id:lt};_t?.(ct),j({type:"onDragAbort",event:ct})},onPending(lt,dt,_t,ct){if(!T.get(lt))return;const{onDragPending:zt}=ne.current,ve={id:lt,constraint:dt,initialCoordinates:_t,offset:ct};zt?.(ve),j({type:"onDragPending",event:ve})},onStart(lt){const dt=O.current;if(dt==null)return;const _t=T.get(dt);if(!_t)return;const{onDragStart:ct}=ne.current,kt={activatorEvent:Pe,active:{id:dt,data:_t.data,rect:P}};Sa.unstable_batchedUpdates(()=>{ct?.(kt),N(qr.Initializing),b({type:oi.DragStart,initialCoordinates:lt,active:dt}),j({type:"onDragStart",event:kt}),q(Ne.current),K(Pe)})},onMove(lt){b({type:oi.DragMove,coordinates:lt})},onEnd:it(oi.DragEnd),onCancel:it(oi.DragCancel)});Ne.current=Xe;function it(lt){return async function(){const{active:_t,collisions:ct,over:kt,scrollAdjustedTranslate:zt}=X.current;let ve=null;if(_t&&zt){const{cancelDrop:ue}=ne.current;ve={activatorEvent:Pe,active:_t,collisions:ct,delta:zt,over:kt},lt===oi.DragEnd&&typeof ue=="function"&&await Promise.resolve(ue(ve))&&(lt=oi.DragCancel)}O.current=null,Sa.unstable_batchedUpdates(()=>{b({type:lt}),N(qr.Uninitialized),et(null),q(null),K(null),Ne.current=null;const ue=lt===oi.DragEnd?"onDragEnd":"onDragCancel";if(ve){const Re=ne.current[ue];Re?.(ve),j({type:ue,event:ve})}})}}},[T]),at=f.useCallback((Te,Fe)=>(J,se)=>{const ke=J.nativeEvent,Pe=T.get(se);if(O.current!==null||!Pe||ke.dndKit||ke.defaultPrevented)return;const Xe={active:Pe};Te(J,Fe.options,Xe)===!0&&(ke.dndKit={capturedBy:Fe.sensor},O.current=se,qe(J,Fe))},[T,qe]),Kt=Dse(u,at);$se(u),oa(()=>{V&&S===qr.Initializing&&N(qr.Initialized)},[V,S]),f.useEffect(()=>{const{onDragMove:Te}=ne.current,{active:Fe,activatorEvent:J,collisions:se,over:ke}=X.current;if(!Fe||!J)return;const Pe={active:Fe,activatorEvent:J,collisions:se,delta:{x:_e.x,y:_e.y},over:ke};Sa.unstable_batchedUpdates(()=>{Te?.(Pe),j({type:"onDragMove",event:Pe})})},[_e.x,_e.y]),f.useEffect(()=>{const{active:Te,activatorEvent:Fe,collisions:J,droppableContainers:se,scrollAdjustedTranslate:ke}=X.current;if(!Te||O.current==null||!Fe||!ke)return;const{onDragOver:Pe}=ne.current,Xe=se.get($e),it=Xe&&Xe.rect.current?{id:Xe.id,rect:Xe.rect.current,data:Xe.data,disabled:Xe.disabled}:null,lt={active:Te,activatorEvent:Fe,collisions:J,delta:{x:ke.x,y:ke.y},over:it};Sa.unstable_batchedUpdates(()=>{et(it),Pe?.(lt),j({type:"onDragOver",event:lt})})},[$e]),oa(()=>{X.current={activatorEvent:U,active:D,activeNode:re,collisionRect:Ke,collisions:Ae,droppableRects:W,draggableNodes:T,draggingNode:ee,draggingNodeRect:ae,droppableContainers:M,over:Je,scrollableAncestors:te,scrollAdjustedTranslate:_e},P.current={initial:ae,translated:Ke}},[D,re,Ae,Ke,T,ee,ae,W,M,Je,te,_e]),_se({...L,delta:A,draggingRect:Ke,pointerCoordinates:me,scrollableAncestors:te,scrollableAncestorRects:oe});const Gt=f.useMemo(()=>({active:D,activeNode:re,activeNodeRect:V,activatorEvent:U,collisions:Ae,containerNodeRect:Z,dragOverlay:G,draggableNodes:T,droppableContainers:M,droppableRects:W,over:Je,measureDroppableContainers:z,scrollableAncestors:te,scrollableAncestorRects:oe,measuringConfiguration:le,measuringScheduled:ie,windowRect:B}),[D,re,V,U,Ae,Z,G,T,M,W,Je,z,te,oe,le,ie,B]),tn=f.useMemo(()=>({activatorEvent:U,activators:Kt,active:D,activeNodeRect:V,ariaDescribedById:{draggable:Y},dispatch:b,draggableNodes:T,over:Je,measureDroppableContainers:z}),[U,Kt,D,V,b,Y,T,Je,z]);return He.createElement(EP.Provider,{value:k},He.createElement(pu.Provider,{value:tn},He.createElement(KP.Provider,{value:Gt},He.createElement(hf.Provider,{value:ge},m)),He.createElement(Gse,{disabled:c?.restoreFocus===!1})),He.createElement(tse,{...c,hiddenTextDescribedById:Y}));function Ot(){const Te=F?.autoScrollEnabled===!1,Fe=typeof d=="object"?d.enabled===!1:d===!1,J=_&&!Te&&!Fe;return typeof d=="object"?{...d,enabled:J}:{enabled:J}}}),Zse=f.createContext(null),$C="button",Xse="Draggable";function Jse(t){let{id:e,data:n,disabled:s=!1,attributes:a}=t;const r=hu(Xse),{activators:o,activatorEvent:c,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:p,over:h}=f.useContext(pu),{role:g=$C,roleDescription:x="draggable",tabIndex:v=0}=a??{},y=d?.id===e,b=f.useContext(y?hf:Zse),[j,k]=ig(),[S,N]=ig(),_=Bse(o,e),w=Rm(n);oa(()=>(p.set(e,{id:e,key:r,node:j,activatorNode:S,data:w}),()=>{const A=p.get(e);A&&A.key===r&&p.delete(e)}),[p,e]);const T=f.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":s,"aria-pressed":y&&g===$C?!0:void 0,"aria-roledescription":x,"aria-describedby":u.draggable}),[s,g,v,y,x,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:m,attributes:T,isDragging:y,listeners:s?void 0:_,node:j,over:h,setNodeRef:k,setActivatorNodeRef:N,transform:b}}function YP(){return f.useContext(KP)}const eae="Droppable",tae={timeout:25};function nae(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:a}=t;const r=hu(eae),{active:o,dispatch:c,over:d,measureDroppableContainers:m}=f.useContext(pu),u=f.useRef({disabled:n}),p=f.useRef(!1),h=f.useRef(null),g=f.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:y}={...tae,...a},b=Rm(v??s),j=f.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{m(Array.isArray(b.current)?b.current:[b.current]),g.current=null},y)},[y]),k=uf({callback:j,disabled:x||!o}),S=f.useCallback((T,A)=>{k&&(A&&(k.unobserve(A),p.current=!1),T&&k.observe(T))},[k]),[N,_]=ig(S),w=Rm(e);return f.useEffect(()=>{!k||!N.current||(k.disconnect(),p.current=!1,k.observe(N.current))},[N,k]),f.useEffect(()=>(c({type:oi.RegisterDroppable,element:{id:s,key:r,disabled:n,node:N,rect:h,data:w}}),()=>c({type:oi.UnregisterDroppable,key:r,id:s})),[s]),f.useEffect(()=>{n!==u.current.disabled&&(c({type:oi.SetDroppableDisabled,id:s,key:r,disabled:n}),u.current.disabled=n)},[s,r,n,c]),{active:o,rect:h,isOver:d?.id===s,node:N,over:d,setNodeRef:_}}function iae(t){let{animation:e,children:n}=t;const[s,a]=f.useState(null),[r,o]=f.useState(null),c=sg(n);return!n&&!s&&c&&a(c),oa(()=>{if(!r)return;const d=s?.key,m=s?.props.id;if(d==null||m==null){a(null);return}Promise.resolve(e(m,r)).then(()=>{a(null)})},[e,s,r]),He.createElement(He.Fragment,null,n,s?f.cloneElement(s,{ref:o}):null)}const sae={x:0,y:0,scaleX:1,scaleY:1};function aae(t){let{children:e}=t;return He.createElement(pu.Provider,{value:WP},He.createElement(hf.Provider,{value:sae},e))}const rae={position:"fixed",touchAction:"none"},lae=t=>mf(t)?"transform 250ms ease":void 0,oae=f.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:a,children:r,className:o,rect:c,style:d,transform:m,transition:u=lae}=t;if(!c)return null;const p=a?m:{...m,scaleX:1,scaleY:1},h={...rae,width:c.width,height:c.height,top:c.top,left:c.left,transform:La.Transform.toString(p),transformOrigin:a&&s?ise(s,c):void 0,transition:typeof u=="function"?u(s):u,...d};return He.createElement(n,{className:o,style:h,ref:e},r)}),cae=t=>e=>{let{active:n,dragOverlay:s}=e;const a={},{styles:r,className:o}=t;if(r!=null&&r.active)for(const[c,d]of Object.entries(r.active))d!==void 0&&(a[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(r!=null&&r.dragOverlay)for(const[c,d]of Object.entries(r.dragOverlay))d!==void 0&&s.node.style.setProperty(c,d);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[d,m]of Object.entries(a))n.node.style.setProperty(d,m);o!=null&&o.active&&n.node.classList.remove(o.active)}},dae=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:La.Transform.toString(e)},{transform:La.Transform.toString(n)}]},mae={duration:250,easing:"ease",keyframes:dae,sideEffects:cae({styles:{active:{opacity:"0"}}})};function uae(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=t;return df((r,o)=>{if(e===null)return;const c=n.get(r);if(!c)return;const d=c.node.current;if(!d)return;const m=UP(o);if(!m)return;const{transform:u}=Ki(o).getComputedStyle(o),p=PP(u);if(!p)return;const h=typeof e=="function"?e:hae(e);return BP(d,a.draggable.measure),h({active:{id:r,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:a,transform:p})})}function hae(t){const{duration:e,easing:n,sideEffects:s,keyframes:a}={...mae,...t};return r=>{let{active:o,dragOverlay:c,transform:d,...m}=r;if(!e)return;const u={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},h={x:d.x-u.x,y:d.y-u.y,...p},g=a({...m,active:o,dragOverlay:c,transform:{initial:d,final:h}}),[x]=g,v=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(v))return;const y=s?.({active:o,dragOverlay:c,...m}),b=c.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(j=>{b.onfinish=()=>{y?.(),j()}})}}let BC=0;function pae(t){return f.useMemo(()=>{if(t!=null)return BC++,BC},[t])}const QP=He.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:a,transition:r,modifiers:o,wrapperElement:c="div",className:d,zIndex:m=999}=t;const{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggableNodes:x,droppableContainers:v,dragOverlay:y,over:b,measuringConfiguration:j,scrollableAncestors:k,scrollableAncestorRects:S,windowRect:N}=YP(),_=f.useContext(hf),w=pae(p?.id),T=GP(o,{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:k,scrollableAncestorRects:S,transform:_,windowRect:N}),A=Fk(h),M=uae({config:s,draggableNodes:x,droppableContainers:v,measuringConfiguration:j}),E=A?y.setRef:void 0;return He.createElement(aae,null,He.createElement(iae,{animation:M},p&&w?He.createElement(oae,{key:w,id:p.id,ref:E,as:c,activatorEvent:u,adjustScale:e,className:d,transition:r,rect:A,style:{zIndex:m,...a},transform:T},n):null))});function pf(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function gae(t,e){return t.reduce((n,s,a)=>{const r=e.get(s);return r&&(n[a]=r),n},Array(t.length))}function vh(t){return t!==null&&t>=0}function fae(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function vae(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Bk=t=>{let{rects:e,activeIndex:n,overIndex:s,index:a}=t;const r=pf(e,s,n),o=e[a],c=r[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},xh={scaleX:1,scaleY:1},ZP=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:a,rects:r,overIndex:o}=t;const c=(e=r[n])!=null?e:s;if(!c)return null;if(a===n){const m=r[o];return m?{x:0,y:n<o?m.top+m.height-(c.top+c.height):m.top-c.top,...xh}:null}const d=xae(r,a,n);return a>n&&a<=o?{x:0,y:-c.height-d,...xh}:a<n&&a>=o?{x:0,y:c.height+d,...xh}:{x:0,y:0,...xh}};function xae(t,e,n){const s=t[e],a=t[e-1],r=t[e+1];return s?n<e?a?s.top-(a.top+a.height):r?r.top-(s.top+s.height):0:r?r.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const XP="Sortable",JP=He.createContext({activeIndex:-1,containerId:XP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bk,disabled:{draggable:!1,droppable:!1}});function qk(t){let{children:e,id:n,items:s,strategy:a=Bk,disabled:r=!1}=t;const{active:o,dragOverlay:c,droppableRects:d,over:m,measureDroppableContainers:u}=YP(),p=hu(XP,n),h=c.rect!==null,g=f.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),x=o!=null,v=o?g.indexOf(o.id):-1,y=m?g.indexOf(m.id):-1,b=f.useRef(g),j=!fae(g,b.current),k=y!==-1&&v===-1||j,S=vae(r);oa(()=>{j&&x&&u(g)},[j,g,x,u]),f.useEffect(()=>{b.current=g},[g]);const N=f.useMemo(()=>({activeIndex:v,containerId:p,disabled:S,disableTransforms:k,items:g,overIndex:y,useDragOverlay:h,sortedRects:gae(g,d),strategy:a}),[v,p,S.draggable,S.droppable,k,g,y,d,h,a]);return He.createElement(JP.Provider,{value:N},e)}const yae=t=>{let{id:e,items:n,activeIndex:s,overIndex:a}=t;return pf(n,s,a).indexOf(e)},bae=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:a,items:r,newIndex:o,previousItems:c,previousContainerId:d,transition:m}=t;return!m||!s||c!==r&&a===o?!1:n?!0:o!==a&&e===d},wae={duration:200,easing:"ease"},eM="transform",kae=La.Transition.toString({property:eM,duration:0,easing:"linear"}),jae={roleDescription:"sortable"};function Nae(t){let{disabled:e,index:n,node:s,rect:a}=t;const[r,o]=f.useState(null),c=f.useRef(n);return oa(()=>{if(!e&&n!==c.current&&s.current){const d=a.current;if(d){const m=ld(s.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&o(u)}}n!==c.current&&(c.current=n)},[e,n,s,a]),f.useEffect(()=>{r&&o(null)},[r]),r}function Hk(t){let{animateLayoutChanges:e=bae,attributes:n,disabled:s,data:a,getNewIndex:r=yae,id:o,strategy:c,resizeObserverConfig:d,transition:m=wae}=t;const{items:u,containerId:p,activeIndex:h,disabled:g,disableTransforms:x,sortedRects:v,overIndex:y,useDragOverlay:b,strategy:j}=f.useContext(JP),k=Cae(s,g),S=u.indexOf(o),N=f.useMemo(()=>({sortable:{containerId:p,index:S,items:u},...a}),[p,a,S,u]),_=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:w,node:T,isOver:A,setNodeRef:M}=nae({id:o,data:N,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...d}}),{active:E,activatorEvent:P,activeNodeRect:D,attributes:O,setNodeRef:F,listeners:q,isDragging:U,over:K,setActivatorNodeRef:ne,transform:Y}=Jse({id:o,data:N,attributes:{...jae,...n},disabled:k.draggable}),fe=Hie(M,F),le=!!E,W=le&&!x&&vh(h)&&vh(y),z=!b&&U,ie=z&&W?Y:null,de=W?ie??(c??j)({rects:v,activeNodeRect:D,activeIndex:h,overIndex:y,index:S}):null,L=vh(h)&&vh(y)?r({id:o,items:u,activeIndex:h,overIndex:y}):S,Q=E?.id,V=f.useRef({activeId:Q,items:u,newIndex:L,containerId:p}),Z=u!==V.current.items,X=e({active:E,containerId:p,isDragging:U,isSorting:le,id:o,index:S,items:u,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:m,wasDragging:V.current.activeId!=null}),R=Nae({disabled:!X,index:S,node:T,rect:w});return f.useEffect(()=>{le&&V.current.newIndex!==L&&(V.current.newIndex=L),p!==V.current.containerId&&(V.current.containerId=p),u!==V.current.items&&(V.current.items=u)},[le,L,p,u]),f.useEffect(()=>{if(Q===V.current.activeId)return;if(Q!=null&&V.current.activeId==null){V.current.activeId=Q;return}const ee=setTimeout(()=>{V.current.activeId=Q},50);return()=>clearTimeout(ee)},[Q]),{active:E,activeIndex:h,attributes:O,data:N,rect:w,index:S,newIndex:L,items:u,isOver:A,isSorting:le,isDragging:U,listeners:q,node:T,overIndex:y,over:K,setNodeRef:fe,setActivatorNodeRef:ne,setDroppableNodeRef:M,setDraggableNodeRef:F,transform:R??de,transition:G()};function G(){if(R||Z&&V.current.newIndex===S)return kae;if(!(z&&!mf(P)||!m)&&(le||X))return La.Transition.toString({...m,property:eM})}}function Cae(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}pn.Down,pn.Right,pn.Up,pn.Left;const Sae="Patient Registration",_ae="appointment_module",Eae="active",Tae=[{id:"name",type:"text",label:"Full Name",placeholder:"Enter full name",required:!0,columnClass:"col-md-6 col-12"},{id:"email",type:"email",label:"Email",placeholder:"Enter email",required:!0,columnClass:"col-md-6 col-12"},{id:"phone",type:"text",label:"Phone",placeholder:"Enter phone",required:!1,columnClass:"col-md-6 col-12"},{id:"gender",type:"select",label:"Gender",placeholder:"Select gender",required:!0,columnClass:"col-md-6 col-12",options:["Male","Female","Other"]}],Aae={appointment_status:[{id:"1"}],show_mode:[{id:"appointment"}],clinics:[],roles:["doctor","receptionist"]},Dae={name:Sae,moduleType:_ae,status:Eae,fields:Tae,conditions:Aae},Rae=[{id:"image/jpeg",text:l("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:l("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:l("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:l("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:l("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:l("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:l("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:l("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:l("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:l("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:l("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:l("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:l("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:l("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:l("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:l("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:l("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:l("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:l("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:l("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:l("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:l("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:l("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:l("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:l("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:l("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:l("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:l("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:l("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:l("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:l("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:l("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:l("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:l("7Z Archive (7z)","kivicare-clinic-management-system")}],tM=[{type:"number",label:l("Number","kivicare-clinic-management-system"),icon:"ph-list-numbers"},{type:"textarea",label:l("Text Area","kivicare-clinic-management-system"),icon:"ph-article-ny-times"},{type:"email",label:l("Email","kivicare-clinic-management-system"),icon:"ph-envelope"},{type:"select",label:l("Dropdown","kivicare-clinic-management-system"),icon:"ph-caret-down"},{type:"radio",label:l("Radio Buttons","kivicare-clinic-management-system"),icon:"ph-radio-button"},{type:"checkbox",label:l("Checkbox","kivicare-clinic-management-system"),icon:"ph-check-square"},{type:"file",label:l("File Upload","kivicare-clinic-management-system"),icon:"ph-paperclip"},{type:"date",label:l("Date","kivicare-clinic-management-system"),icon:"ph-calendar"}],qC=[{value:"col-12",label:l("Full Width","kivicare-clinic-management-system")},{value:"col-md-6 col-12",label:l("Half Width (Desktop)","kivicare-clinic-management-system")},{value:"col-lg-4 col-md-6 col-12",label:l("One Third (Large Screen)","kivicare-clinic-management-system")},{value:"col-lg-3 col-md-6 col-12",label:l("One Fourth (Large Screen)","kivicare-clinic-management-system")},{value:"col-xl-2 col-lg-3 col-md-6 col-12",label:l("One Sixth (Extra Large)","kivicare-clinic-management-system")}],Pae=[{value:"appointment_module",label:l("Appointment","kivicare-clinic-management-system")},{value:"patient_encounter_module",label:l("Encounter","kivicare-clinic-management-system")},{value:"patient_module",label:l("Patient","kivicare-clinic-management-system")},{value:"doctor_module",label:l("Doctor","kivicare-clinic-management-system")}],HC=[{value:"active",label:l("Active","kivicare-clinic-management-system")},{value:"inactive",label:l("Inactive","kivicare-clinic-management-system")}],Mae=t=>({id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:t,label:`${t.charAt(0).toUpperCase()+t.slice(1)} ${l("Field","kivicare-clinic-management-system")}`,placeholder:`${l("Enter","kivicare-clinic-management-system")} ${t}`,required:!1,className:"",columnClass:"col-xl-6 col-12",options:t==="select"||t==="radio"?[l("Option 1","kivicare-clinic-management-system"),l("Option 2","kivicare-clinic-management-system")]:[],fileTypes:t==="file"?[]:void 0}),Iae=({field:t,onEdit:e,onDelete:n,isActive:s,onClick:a})=>{const{attributes:r,listeners:o,setNodeRef:c,transform:d,transition:m,isDragging:u}=Hk({id:t.id}),p={transform:La.Transform.toString(d),transition:m,opacity:u?.5:1},h=()=>{switch(t.type){case"textarea":return i.jsx(Mt.Control,{as:"textarea",rows:1,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()});case"select":return i.jsx(ot,{placeholder:t.placeholder,options:t.options?.map(g=>({label:g,value:g}))||[],className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:g=>({...g,zIndex:9999})}});case"radio":return i.jsx("div",{className:"d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:t.options?.map((g,x)=>i.jsx(Mt.Check,{inline:!0,label:g,name:t.id,type:"radio",id:`${t.id}-radio-${x}`,className:"m-0"},x))});case"checkbox":return i.jsx(Mt.Check,{type:"checkbox",label:t.placeholder});case"file":return i.jsx(Mt.Control,{type:"file",onKeyDown:g=>g.stopPropagation()});case"date":return i.jsxs("div",{className:"input-group",children:[i.jsx(si,{onChange:()=>{},options:{dateFormat:"Y-m-d H:i",enableTime:!0,locale:ai()},className:"form-control",placeholder:t.placeholder}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]});default:return i.jsx(Mt.Control,{type:t.type,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()})}};return i.jsxs("div",{ref:c,style:p,...r,className:`form-group custom-form-group ${s?"active":""}`,onClick:a,children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("span",{children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:RR(t.label)}}),t.required&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),e(t)},children:i.jsx("i",{className:"ph ph-pencil-simple-line font-size-18 text-primary"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),n(t.id)},children:i.jsx("i",{className:"ph ph-trash font-size-18 text-danger"})})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx("i",{className:"ph ph-hand-grabbing p-3 font-size-18 rounded bg-primary-subtle icon-color flex-shrink-0",...o,style:{cursor:"grab"},onMouseDown:g=>g.preventDefault()}),i.jsx("div",{className:"flex-grow-1",children:h()})]})]})},zC=({fieldType:t,onDragStart:e})=>{const n=tM.find(s=>s.type===t);return i.jsxs("div",{className:"d-flex align-items-center gap-lg-4 gap-2 p-3 bg-body rounded w-100",draggable:!0,onDragStart:s=>e(s,t),style:{cursor:"grab",userSelect:"none"},children:[i.jsx("i",{className:`ph ${n.icon} font-size-18 icon-color`}),i.jsx("span",{className:"font-size-14 fw-medium",children:n.label})]})},VC=()=>{const{id:t}=Wt(),e=!!t,[n,s]=f.useState("form"),[a,r]=f.useState(!1),[o,c]=f.useState(null),[d,m]=f.useState([]),[u,p]=f.useState(null),[h,g]=f.useState(!1),[x,v]=f.useState("right"),[y,b]=f.useState({name:"Custom Form",moduleType:"appointment_module",status:"active",formIcon:"",showInEncounter:!1,showInAppointment:!0,clinics:[],roles:[]}),[j,k]=f.useState(""),[S,N]=f.useState(!1),[_,w]=f.useState(!1),{control:T,handleSubmit:A,watch:M,setValue:E,reset:P,getValues:D}=Xt({defaultValues:y}),O=M("name"),F=M("moduleType"),q=dn(),{data:U,isLoading:K}=QR(t,{enabled:e}),{data:ne}=iu(),Y=ne?.data?.map(I=>({value:I.id,label:I.label}))||[],fe=_J({onSuccess:I=>{console.log("Custom form created successfully:",I),q("/setting/custom-form/")},onError:I=>{console.error("Error creating custom form:",I)}}),le=EJ({onSuccess:I=>{console.log("Custom form updated successfully:",I),q("/setting/custom-form/")},onError:I=>{console.error("Error updating custom form:",I)}});f.useEffect(()=>{if(e&&U){const I=U.data;P({name:I.name?.text||I.name,moduleType:I.moduleType,status:I.status?.value||I.status,showInEncounter:I.conditions?.show_mode?.some(H=>H.id==="encounter")||!1,showInAppointment:I.conditions?.show_mode?.some(H=>H.id==="appointment")||!1,clinics:I.conditions?.clinics||[],roles:I.conditions?.roles||[]}),m(I.fields||[]),b(H=>({...H,name:I.name?.text||I.name,moduleType:I.moduleType?.value||I.moduleType,status:I.status?.value||I.status}))}},[U,e,P]);const W=I=>{I.moduleType=I.moduleType?.value||I.moduleType;const H={...I,fields:d};console.log("Saving form:",H),e?le.mutate({id:t,...H}):fe.mutate(H)},z=I=>{I!==a&&(g(!0),v(I?"right":"left"),setTimeout(()=>{r(I),setTimeout(()=>g(!1),300)},150))},ie=(I,H)=>{p(H),I.dataTransfer.setData("text/plain",H)},re=I=>{I.preventDefault()},de=I=>{I.preventDefault();const H=I.dataTransfer.getData("text/plain")||u;if(H){const B=Mae(H);m(te=>[...te,B]),c(B),r(!0)}p(null)},L=I=>{c(I),z(!0)},Q=I=>{Ze.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system")}).then(H=>{H.isConfirmed&&(m(B=>B.filter(te=>te.id!==I)),o?.id===I&&(c(null),r(!1)),Ze.fire(l("Deleted!","kivicare-clinic-management-system"),l("Your field has been deleted.","kivicare-clinic-management-system"),"success"))})},V=I=>{m(H=>H.map(B=>B.id===I.id?I:B)),c(I)},Z=I=>{c(I),z(!0)},X=()=>{try{const I=JSON.parse(j);I.name&&(E("name",I.name),b(H=>({...H,name:I.name}))),I.moduleType&&(E("moduleType",I.moduleType),b(H=>({...H,moduleType:I.moduleType}))),I.status&&(E("status",I.status),b(H=>({...H,status:I.status}))),I.conditions&&(I.conditions.show_mode&&(E("showInEncounter",I.conditions.show_mode.some(H=>H.id==="encounter")),E("showInAppointment",I.conditions.show_mode.some(H=>H.id==="appointment"))),I.conditions.clinics&&E("clinics",I.conditions.clinics),I.conditions.roles&&E("roles",I.conditions.roles)),I.fields&&m(I.fields),k(""),s("form"),Ze.fire(l("Success","kivicare-clinic-management-system"),l("Form imported successfully","kivicare-clinic-management-system"),"success")}catch{Ze.fire(l("Error","kivicare-clinic-management-system"),l("Invalid JSON format","kivicare-clinic-management-system"),"error")}},R=()=>{const I=D(),H={name:I.name,moduleType:I.moduleType?.value||I.moduleType,status:I.status,fields:d,conditions:{show_mode:[],clinics:I.clinics||[],roles:I.roles||[]}};I.showInAppointment&&H.conditions.show_mode.push({id:"appointment"}),I.showInEncounter&&H.conditions.show_mode.push({id:"encounter"});const B="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(H,null,2)),te=document.createElement("a");te.setAttribute("href",B),te.setAttribute("download",(I.name||"custom_form")+".json"),document.body.appendChild(te),te.click(),te.remove()},G=()=>{N(!0)},ee=()=>{N(!1)},ae=I=>{const{active:H,over:B}=I;H.id!==B.id&&m(te=>{const oe=te.findIndex(me=>me.id===H.id),ye=te.findIndex(me=>me.id===B.id);return pf(te,oe,ye)})};return e&&K?i.jsx(By,{}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:A(W),children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:i.jsxs(gt,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:"/setting/custom-form/",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[l("Back","kivicare-clinic-management-system")," "]})]})})]}),i.jsxs(Un,{children:[i.jsx(Ct,{xs:12,md:5,lg:4,xl:3,children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:a?i.jsxs("div",{className:`slide-transition ${h&&x==="left"?"slide-enter-left":"slide-active"}`,children:[i.jsxs("button",{className:"d-flex align-items-center gap-2 mb-4 btn btn-link p-0",onClick:()=>z(!1),type:"button",children:[i.jsx("i",{className:"ph ph-caret-left font-size-18 icon-color"}),i.jsx("h6",{className:"m-0",children:l("Back to Fields","kivicare-clinic-management-system")})]}),i.jsxs(Un,{className:"gy-3",children:[i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Label","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:o?.label||"",onChange:I=>V({...o,label:I.target.value}),onKeyDown:I=>I.stopPropagation(),placeholder:l("Field label (HTML allowed)","kivicare-clinic-management-system")}),i.jsx("small",{className:"text-muted",children:l("HTML tags like <strong>, <em>, <span> are allowed for formatting","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Placeholder","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:o?.placeholder||"",onChange:I=>V({...o,placeholder:I.target.value}),onKeyDown:I=>I.stopPropagation(),placeholder:l("Field placeholder","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Field Type","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:o?.type||"",disabled:!0})]})}),o?.type==="file"&&i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ot,{isMulti:!0,className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Select file types","kivicare-clinic-management-system"),options:Rae,getOptionLabel:I=>I.text,getOptionValue:I=>I.id,value:o?.fileTypes||[],onChange:I=>V({...o,fileTypes:I||[]}),isClearable:!0,styles:{menuPortal:I=>({...I,zIndex:9999})}}),i.jsx("small",{className:"text-muted",children:l("Select allowed file types for upload","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsx("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:i.jsx(Mt.Check,{inline:!0,label:l("Required field","kivicare-clinic-management-system"),checked:o?.required||!1,onChange:I=>V({...o,required:I.target.checked}),type:"checkbox"})})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("CSS Class","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:o?.className||"",onChange:I=>V({...o,className:I.target.value}),onKeyDown:I=>I.stopPropagation(),placeholder:"mb-3"})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Column Width","kivicare-clinic-management-system")}),i.jsx(ot,{placeholder:l("Select column width","kivicare-clinic-management-system"),value:qC.find(I=>I.value===o?.columnClass)||null,onChange:I=>V({...o,columnClass:I?.value||"col-md-6 col-12"}),options:qC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:I=>({...I,zIndex:9999})}})]})}),(o?.type==="select"||o?.type==="radio")&&i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Options (one per line)","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:o?.options?.join(`
`)||"",onChange:I=>V({...o,options:I.target.value.split(`
`)}),onKeyDown:I=>I.stopPropagation(),placeholder:`${l("Option 1","kivicare-clinic-management-system")}
${l("Option 2","kivicare-clinic-management-system")}
${l("Option 3","kivicare-clinic-management-system")}`})]})})]})]}):i.jsxs("div",{className:`slide-transition ${h&&x==="right"?"slide-enter-right":"slide-active"}`,children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",id:"pills-tab",role:"tablist",children:[i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${n==="form"?" active":""}`,onClick:()=>s("form"),type:"button",children:l("Form","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${n==="formFields"?" active":""}`,onClick:()=>s("formFields"),type:"button",children:l("Form Fields","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"tab-content",id:"pills-tabContent",children:[n==="form"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs(Un,{className:"gy-3",children:[i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Form Name","kivicare-clinic-management-system")}),i.jsx(je,{name:"name",control:T,render:({field:I})=>i.jsx(Mt.Control,{...I,type:"text",onKeyDown:H=>H.stopPropagation(),placeholder:l("Enter form name","kivicare-clinic-management-system")})})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Module Type","kivicare-clinic-management-system")}),i.jsx(je,{name:"moduleType",control:T,render:({field:I})=>i.jsx(ot,{placeholder:l("Select module type","kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,options:Pae,isSearchable:!1,isDisabled:e,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:H=>({...H,zIndex:9999})}})})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Status","kivicare-clinic-management-system")}),i.jsx(je,{name:"status",control:T,render:({field:I})=>i.jsx(ot,{placeholder:l("Select status","kivicare-clinic-management-system"),value:HC.find(H=>H.value===I.value)||null,onChange:H=>I.onChange(H?.value||""),options:HC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:H=>({...H,zIndex:9999})}})})]})}),F.value==="appointment_module"&&i.jsx(i.Fragment,{children:i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Show in Sections","kivicare-clinic-management-system")}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:[i.jsx(je,{name:"showInAppointment",control:T,render:({field:I})=>i.jsx(Mt.Check,{inline:!0,label:l("Appointment","kivicare-clinic-management-system"),checked:I.value,onChange:H=>I.onChange(H.target.checked),type:"checkbox",id:"showInAppointment",className:"m-0"})}),i.jsx(je,{name:"showInEncounter",control:T,render:({field:I})=>i.jsx(Mt.Check,{inline:!0,label:l("Encounter","kivicare-clinic-management-system"),checked:I.value,onChange:H=>I.onChange(H.target.checked),type:"checkbox",id:"showInEncounter",className:"m-0"})})]}),i.jsx("small",{className:"text-muted",children:l("Note: If encounter is selected, form will only be displayed if there has been an appointment encounter","kivicare-clinic-management-system")})]})})}),vr()&&i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Clinics","kivicare-clinic-management-system")}),i.jsx(je,{name:"clinics",control:T,render:({field:I})=>i.jsx(ot,{placeholder:l("Select clinics","kivicare-clinic-management-system"),value:I.value?I.value.map(H=>Y.find(B=>B.value===H)):[],onChange:H=>I.onChange(H?H.map(B=>B.value):[]),options:Y,isMulti:!0,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:H=>({...H,zIndex:9999})}})}),i.jsx("small",{className:"text-muted",children:l("Note: To show form to all clinics, please leave the selection blank.","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Roles to Access","kivicare-clinic-management-system")}),i.jsx(je,{name:"roles",control:T,render:({field:I})=>i.jsx(ot,{placeholder:l("Select roles","kivicare-clinic-management-system"),value:I.value?I.value.map(H=>dj().find(B=>B.value===H)):[],onChange:H=>I.onChange(H?H.map(B=>B.value):[]),options:dj(),isMulti:!0,isSearchable:!1,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:H=>({...H,zIndex:9999})}})}),i.jsx("small",{className:"text-muted",children:l("Note: To show form to all roles, please leave the selection blank.","kivicare-clinic-management-system")})]})})]})}),n==="formFields"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsx("div",{className:"form-filed-content d-flex align-items-center gap-2 flex-column",children:tM.map(I=>i.jsx(zC,{fieldType:I.type,onDragStart:ie},I.type))})})]})]})})})}),i.jsxs(Ct,{xs:12,md:7,lg:8,xl:9,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:e?l("Edit Custom Form","kivicare-clinic-management-system"):l("Add Custom Form","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>w(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:l("Import","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:R,children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:l("Export","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:G,children:[i.jsx("i",{className:"ph ph-eye"}),i.jsx("span",{children:l("View Form","kivicare-clinic-management-system")})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:fe.isPending||le.isPending,children:fe.isPending||le.isPending?l("Saving...","kivicare-clinic-management-system"):e?l("Update Form","kivicare-clinic-management-system"):l("Save Form","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",onDragOver:re,onDrop:de,style:{minHeight:"400px"},children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:y.name}),i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{r(!1),s("formFields")},children:l("Add fields","kivicare-clinic-management-system")})})]}),i.jsxs($k,{collisionDetection:DP,onDragEnd:ae,children:[i.jsx(qk,{items:d.map(I=>I.id),strategy:Bk,children:i.jsxs(Un,{className:"gy-4 custom-form-content",children:[i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Form Name","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:O,onChange:I=>E("name",I.target.value),onKeyDown:I=>I.stopPropagation(),placeholder:l("Enter form name","kivicare-clinic-management-system")})]})}),d.map(I=>i.jsx(Ct,{className:I.columnClass,children:i.jsx(Iae,{field:I,onEdit:L,onDelete:Q,isActive:o?.id===I.id,onClick:()=>Z(I)})},I.id)),d.length===0&&i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"text-center p-5 border-2 border-dashed rounded",style:{borderStyle:"dashed"},children:[i.jsx("i",{className:"ph ph-upload-simple font-size-32 text-muted mb-3"}),i.jsx("p",{className:"text-muted",children:l('Drag and drop form fields here or click "Add fields" to get started',"kivicare-clinic-management-system")})]})})]})}),i.jsx(QP,{children:u?i.jsx("div",{className:"opacity-50",children:i.jsx(zC,{fieldType:u,onDragStart:ie})}):null})]})]})})]})]})]}),i.jsxs(st,{show:S,onHide:ee,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(st.Header,{closeButton:!0,children:i.jsxs(st.Title,{children:[l("Form Preview","kivicare-clinic-management-system")," - ",O||y.name]})}),i.jsx(st.Body,{children:i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Oa,{fields:d,data:{},readOnly:!1,formId:"preview_form"}),d.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:l("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(st.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:ee,children:l("Close Preview","kivicare-clinic-management-system")})})]}),i.jsxs(st,{show:_,onHide:()=>w(!1),size:"md",centered:!0,backdrop:"static",children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:l("Import Form","kivicare-clinic-management-system")})}),i.jsx(st.Body,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Import JSON","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:10,placeholder:l("Paste your JSON here","kivicare-clinic-management-system"),value:j,onChange:I=>k(I.target.value)}),i.jsx("div",{className:"mt-2",children:i.jsx("a",{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(Dae,null,2))}`,download:"sample1.json",children:l("Click here to download sample json file","kivicare-clinic-management-system")})})]})}),i.jsxs(st.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>w(!1),children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{X(),w(!1)},children:l("Import Form","kivicare-clinic-management-system")})]})]})]})},Oae=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{data:n,isLoading:s,isError:a,error:r}=zX(),o=KX(),c=GX(),d=n?.data||[],{data:m}=Cn(),u=m?.data?.hideUtilityLinks,p=In(),h=f.useMemo(()=>[p.accessor("server_name",{header:l("Service Name","kivicare-clinic-management-system"),cell:g=>i.jsxs("div",{children:[i.jsx("h6",{className:"m-0",children:g.getValue()}),i.jsx("small",{className:"text-muted",children:g.row.original.server_url})]})}),p.accessor("server_type",{header:l("Type","kivicare-clinic-management-system"),cell:g=>{const x=g.row.original.type_label||g.getValue();let v="bg-primary";switch(x.toLowerCase()){case"email":v="bg-primary";break;case"whatsapp":v="bg-success";break;case"sms":v="bg-success";break;case"push notification":v="bg-warning";break;case"webhook":v="bg-info";break;case"custom api":v="bg-secondary";break;default:v="bg-secondary"}return i.jsx("span",{className:`badge ${v}`,children:x})}}),p.accessor("is_active",{header:l("Status","kivicare-clinic-management-system"),cell:g=>i.jsx("div",{className:"form-check form-switch custom-switch-xl",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!g.getValue(),onClick:x=>{const v=g.row.original.id,y=x.target.checked;try{c.mutateAsync({id:v,data:{status:y}}).then(b=>{Ee(b.message)})}catch{x.target.checked=!y,Ee(l("Failed to update status","kivicare-clinic-management-system"))}}})})}),p.display({id:"actions",header:l("Action","kivicare-clinic-management-system"),cell:g=>{const{id:x}=g.row.original;return i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(gt,{to:`/setting/custom-notification/edit/${x}`,className:"btn btn-link text-secondary p-0",title:l("Configure","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-gear"})}),i.jsx(gt,{to:`/setting/custom-notification/test/${x}`,className:"btn btn-link text-info p-0",title:l("Test","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-flask"})}),i.jsx(gt,{onClick:async v=>{v.preventDefault(),Ze.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(async y=>{if(y.isConfirmed)try{await o.mutateAsync(x),Ee(l("Service deleted successfully","kivicare-clinic-management-system"))}catch{Ee(l("Failed to delete service","kivicare-clinic-management-system"))}})},className:"btn btn-link text-danger p-0",title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})})]})}})],[]);return e&&s?i.jsx(Nn,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-notification-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("Custom Notification","kivicare-clinic-management-system"),u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-notification-settings-documentation/",target:"_blank",rel:"noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Help",children:i.jsx("i",{className:"ph ph-question align-middle h5 ms-2 text-primary"})})]}),i.jsxs(gt,{to:"/setting/custom-notification/add",className:"btn btn-primary btn-sm",children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add New Service","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"table-responsive",children:a?i.jsx("div",{className:"alert alert-danger",children:r?.message||l("Failed to load data","kivicare-clinic-management-system")}):i.jsx(wn,{data:d,columns:h,enableSelection:!1})})]})})},UC=()=>{const{id:t}=Wt(),e=dn(),n=t&&t!=="new",s=VX(),a=UX(),{data:r,isLoading:o}=WR(t,{enabled:n}),{control:c,handleSubmit:d,formState:{errors:m},setValue:u,watch:p,reset:h,getValues:g}=Xt({defaultValues:{serverType:"",serverName:"",serverUrl:"",port:443,httpMethod:"POST",authMethod:"none",apiKey:"",keyLocation:"header",headerParamName:"Authorization",username:"",password:"",encoding:"Base64",accessToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature",senderName:"",senderEmail:"",enableSSL:!1,contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBodyFields:[{key:"",value:""}],requestBody:""}}),{append:x,remove:v}=mr({control:c,name:"customHeaders"}),{append:y,remove:b}=mr({control:c,name:"queryParams"}),{append:j,remove:k}=mr({control:c,name:"requestBodyFields"}),S=p(),[N,_]=f.useState(!1),[w,T]=f.useState(!1);f.useEffect(()=>{if(n&&r?.data){const R=r.data;let G=[{key:"",value:""}],ee=R.request_body||"";if(R.request_body)try{const ae=JSON.parse(R.request_body);typeof ae=="object"&&ae!==null?(G=Object.entries(ae).map(([I,H])=>({key:I,value:typeof H=="string"?H:JSON.stringify(H)})),G.length===0&&(G=[{key:"",value:""}])):G=[{key:"",value:R.request_body}]}catch{if(R.content_type==="application/x-www-form-urlencoded")try{const I=new URLSearchParams(R.request_body);G=[];for(let[H,B]of I.entries())G.push({key:H,value:B});G.length===0&&(G=[{key:"",value:""}])}catch{G=[{key:"",value:R.request_body}]}else G=[{key:"",value:R.request_body}]}console.log(R.auth_config?.access_token,"ritesh"),h({serverType:R.server_type||"",serverName:R.server_name||"",serverUrl:R.server_url||"",port:R.port||443,httpMethod:R.http_method||"POST",authMethod:R.auth_method||"none",apiKey:R.auth_config?.api_key||"",keyLocation:R.auth_config?.key_location||"header",headerParamName:R.auth_config?.header_param_name||"Authorization",clientId:R.auth_config?.client_id||"",clientSecret:R.auth_config?.client_secret||"",authUrl:R.auth_config?.auth_url||"",tokenUrl:R.auth_config?.token_url||"",redirectUrl:R.auth_config?.redirect_url||"",username:R.auth_config?.username||"",password:R.auth_config?.password||"",accessToken:R.auth_config?.access_token||"",tokenExpiry:R.auth_config?.token_expiry||"",scopes:R.auth_config?.scopes,senderName:R.sender_name||"",senderEmail:R.sender_email||"",enableSSL:R.enable_ssl||!1,contentType:R.content_type||"application/json",customHeaders:R.custom_headers?.length>0?R.custom_headers:[{key:"",value:""}],queryParams:R.query_params?.length>0?R.query_params:[{key:"",value:""}],requestBodyFields:G,requestBody:ee})}},[n,r,h]),f.useEffect(()=>{if(S.authMethod==="bearer"&&!S.redirectUrl){const R=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";u("redirectUrl",R)}},[S.authMethod,S.redirectUrl,u]);const A=[{name:"receiver_email",description:l("Recipient email address","kivicare-clinic-management-system"),example:"user@example.com"},{name:"receiver_number",description:l("Recipient phone number","kivicare-clinic-management-system"),example:"+1234567890"},{name:"subject",description:l("Message subject/title","kivicare-clinic-management-system"),example:"Appointment Confirmation"},{name:"content",description:l("Message content/body","kivicare-clinic-management-system"),example:"Your appointment is confirmed for tomorrow at 10:00 AM"},{name:"timestamp",description:l("Current timestamp","kivicare-clinic-management-system"),example:"2024-01-15 10:30:45"},{name:"clinic_name",description:l("Clinic/site name","kivicare-clinic-management-system"),example:"Healthcare Clinic"},{name:"content_sid",description:l("Content/Message SID identifier","kivicare-clinic-management-system"),example:"SM1234567890abcdef"}],M=[{value:"sms",label:"SMS"},{value:"whatsapp",label:"WhatsApp"},{value:"email",label:"Email"},{value:"webhook",label:"Webhook"},{value:"custom-api",label:"Custom API"},{value:"push-notification",label:"Push Notification"}],E=[{value:"none",label:"No Authentication"},{value:"apikey",label:"API Key Authentication"},{value:"basic",label:"Basic Authentication"},{value:"bearer",label:"Bearer Token Authentication (OAuth2 / JWT)"},{value:"jwt",label:"JWT (JSON Web Token)"},{value:"hmac",label:"HMAC / Signature Authentication"}],P=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],D=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],O=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],F=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],q=[{value:"HS256",label:"HS256"},{value:"HS384",label:"HS384"},{value:"HS512",label:"HS512"},{value:"RS256",label:"RS256"},{value:"RS384",label:"RS384"},{value:"RS512",label:"RS512"},{value:"ES256",label:"ES256"},{value:"ES384",label:"ES384"},{value:"ES512",label:"ES512"}],U=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}],K=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],ne=[{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Y=(R,G)=>{u(R,G)},fe=R=>{R==="customHeaders"?x({key:"",value:""}):R==="queryParams"?y({key:"",value:""}):R==="requestBodyFields"&&j({key:"",value:""})},le=(R,G,ee,ae)=>{if(R==="customHeaders"){const H=g("customHeaders").map((B,te)=>te===G?{...B,[ee]:ae}:B);u("customHeaders",H)}else if(R==="queryParams"){const H=g("queryParams").map((B,te)=>te===G?{...B,[ee]:ae}:B);u("queryParams",H)}else if(R==="requestBodyFields"){const H=g("requestBodyFields").map((B,te)=>te===G?{...B,[ee]:ae}:B);u("requestBodyFields",H)}},W=(R,G)=>{R==="customHeaders"?v(G):R==="queryParams"?b(G):R==="requestBodyFields"&&k(G)},z=()=>{switch(S.serverType){case"sms":return l("Enter phone number (e.g., +1234567890)","kivicare-clinic-management-system");case"email":return l("Enter email address (e.g., noreply@domain.com)","kivicare-clinic-management-system");case"push-notification":return l("Enter app identifier or sender ID","kivicare-clinic-management-system");default:return l("Enter sender identifier","kivicare-clinic-management-system")}},ie=()=>{switch(S.contentType){case"application/json":return`{
  "to": "{{receiver_number}}",
  "message": "{{content}}",
  "content_id": "{{contentid}}",
  "appointment_id": "{{appointment_id}}",
  "patient_name": "{{patient_name}}",
  "doctor_name": "{{doctor_name}}",
  "clinic_name": "{{clinic_name}}",
  "appointment_date": "{{appointment_date}}",
  "appointment_time": "{{appointment_time}}"
}`;case"application/xml":return`<?xml version="1.0"?>
<notification>
  <to>{{receiver_number}}</to>
  <message>{{content}}</message>
  <content_id>{{contentid}}</content_id>
  <appointment_id>{{appointment_id}}</appointment_id>
  <patient_name>{{patient_name}}</patient_name>
  <doctor_name>{{doctor_name}}</doctor_name>
  <clinic_name>{{clinic_name}}</clinic_name>
  <appointment_date>{{appointment_date}}</appointment_date>
  <appointment_time>{{appointment_time}}</appointment_time>
</notification>`;case"application/x-www-form-urlencoded":return"to={{receiver_number}}&message={{content}}&content_id={{contentid}}&appointment_id={{appointment_id}}&patient_name={{patient_name}}&doctor_name={{doctor_name}}&clinic_name={{clinic_name}}&appointment_date={{appointment_date}}&appointment_time={{appointment_time}}";default:return"Use variables like {{receiver_number}}, {{content}}, {{contentid}}, {{appointment_id}}, {{patient_name}}, {{doctor_name}}, {{clinic_name}}, {{appointment_date}}, {{appointment_time}}"}},re=()=>["POST","PUT","PATCH"].includes(S.httpMethod),de=async R=>{try{await navigator.clipboard.writeText(`{{${R}}}`),console.log(`Copied {{${R}}} to clipboard`)}catch{const ee=document.createElement("textarea");ee.value=`{{${R}}}`,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),console.log(`Copied {{${R}}} to clipboard`)}},L=async()=>{if(!S.clientId||!S.clientSecret||!S.authUrl||!S.tokenUrl){Ee.error(l("Error: Please fill in all required OAuth2 fields (Client ID, Client Secret, Auth URL, Token URL)","kivicare-clinic-management-system"));return}T(!0),Ee.info(l("Starting OAuth2 authorization flow...","kivicare-clinic-management-system"));try{const R=new URLSearchParams({response_type:"code",client_id:S.clientId,redirect_uri:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",scope:S.scopes||"read write",state:Math.random().toString(36).substring(2,15)}),G=`${S.authUrl}?${R.toString()}`;Ee.info(l("Opening authorization window...","kivicare-clinic-management-system"));const ee=window.open(G,"oauth2_auth","width=600,height=700,scrollbars=yes,resizable=yes");if(!ee)throw new Error(l("Failed to open authorization window. Please allow popups for this site.","kivicare-clinic-management-system"));const ae=H=>{H.origin===window.location.origin&&(H.data.type==="oauth2_success"&&H.data.code?(ee.close(),window.removeEventListener("message",ae),Q(H.data.code)):H.data.type==="oauth2_error"&&(ee.close(),window.removeEventListener("message",ae),Ee.error(l("Authorization failed: ","kivicare-clinic-management-system")+H.data.error),T(!1)))};window.addEventListener("message",ae);const I=setInterval(()=>{ee.closed&&(clearInterval(I),window.removeEventListener("message",ae),Ee.warning(l("Authorization cancelled by user","kivicare-clinic-management-system")),T(!1))},1e3)}catch(R){console.error("OAuth2 Error:",R),Ee.error(l("Error: ","kivicare-clinic-management-system")+R.message),T(!1)}},Q=async R=>{try{Ee.info(l("Exchanging authorization code for access token...","kivicare-clinic-management-system"));const G=new URLSearchParams({grant_type:"authorization_code",client_id:S.clientId,client_secret:S.clientSecret,code:R,redirect_uri:S.redirectUrl||window.location.origin+"#/setting/custom-notification/oauth2/callback"}),ee={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ae=btoa(`${S.clientId}:${S.clientSecret}`);ee.Authorization=`Basic ${ae}`;const I=await fetch(S.tokenUrl,{method:"POST",headers:ee,body:G.toString(),mode:"cors",credentials:"omit"});let H,B;try{H=await I.text(),B=JSON.parse(H)}catch{throw new Error(`Invalid response format: ${H.substring(0,200)}...`)}if(!I.ok){const te=B?.error_description||B?.error||H;throw new Error(`Token exchange failed (${I.status}): ${te}`)}if(B.access_token){if(Y("accessToken",B.access_token),B.refresh_token&&Y("refreshToken",B.refresh_token),B.expires_in){const te=new Date;te.setSeconds(te.getSeconds()+parseInt(B.expires_in)),Y("tokenExpiry",te.toISOString().slice(0,16))}B.token_type&&Y("tokenType",B.token_type),Ee.success(l(" Access token generated successfully! Token will expire at: ","kivicare-clinic-management-system")+(B.expires_in?new Date(Date.now()+parseInt(B.expires_in)*1e3).toLocaleString():l("Unknown","kivicare-clinic-management-system")))}else throw B.error?new Error(B.error_description||B.error):new Error(l("No access token received from server. Response: ","kivicare-clinic-management-system")+JSON.stringify(B))}catch(G){console.error("Token Exchange Error:",G);let ee=G.message;G.message.includes("CORS")?ee=l("CORS error: The OAuth provider does not allow browser requests. You may need to configure CORS settings or use server-side token exchange.","kivicare-clinic-management-system"):G.message.includes("Failed to fetch")&&(ee=l("Network error: Unable to reach the token endpoint. Please check the Token URL and your internet connection.","kivicare-clinic-management-system")),Ee.error(l("Token exchange failed: ","kivicare-clinic-management-system")+ee)}finally{T(!1)}},V=async()=>{if(!S.refreshToken||!S.tokenUrl){Ee.error(l("Error: Refresh token and token URL are required for token refresh","kivicare-clinic-management-system"));return}T(!0),Ee.info(l("Refreshing access token...","kivicare-clinic-management-system"));try{const R=new URLSearchParams({grant_type:"refresh_token",client_id:S.clientId,client_secret:S.clientSecret,refresh_token:S.refreshToken}),G={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ee=btoa(`${S.clientId}:${S.clientSecret}`);G.Authorization=`Basic ${ee}`;const ae=await fetch(S.tokenUrl,{method:"POST",headers:G,body:R.toString(),mode:"cors",credentials:"omit"});let I,H;try{I=await ae.text(),H=JSON.parse(I)}catch{throw new Error(`Invalid response format: ${I.substring(0,200)}...`)}if(!ae.ok){const B=H?.error_description||H?.error||I;throw new Error(`Token refresh failed (${ae.status}): ${B}`)}if(H.access_token){if(Y("accessToken",H.access_token),H.refresh_token&&Y("refreshToken",H.refresh_token),H.expires_in){const B=new Date;B.setSeconds(B.getSeconds()+parseInt(H.expires_in)),Y("tokenExpiry",B.toISOString().slice(0,16))}H.token_type&&Y("tokenType",H.token_type),Ee.success(l(" Access token refreshed successfully! New expiry: ","kivicare-clinic-management-system")+(H.expires_in?new Date(Date.now()+parseInt(H.expires_in)*1e3).toLocaleString():l("Unknown","kivicare-clinic-management-system")))}else throw new Error(l("No access token received during refresh","kivicare-clinic-management-system"))}catch(R){console.error("Token Refresh Error:",R),Ee.error(l("Token refresh failed: ","kivicare-clinic-management-system")+R.message)}finally{T(!1)}},Z=(R=S)=>{const G={};R.authMethod==="apikey"?(G.api_key=R.apiKey,G.key_location=R.keyLocation,G.header_param_name=R.headerParamName):R.authMethod==="basic"?(G.username=R.username,G.password=R.password,G.encoding=R.encoding):R.authMethod==="bearer"?(G.access_token=R.accessToken,G.token_type=R.tokenType,G.token_expiry=R.tokenExpiry,R.clientId&&(G.client_id=R.clientId),R.clientSecret&&(G.client_secret=R.clientSecret),R.authUrl&&(G.auth_url=R.authUrl),R.tokenUrl&&(G.token_url=R.tokenUrl),R.redirectUrl&&(G.redirect_url=R.redirectUrl),R.scopes&&(G.scopes=R.scopes),R.refreshToken&&(G.refresh_token=R.refreshToken)):R.authMethod==="jwt"?(G.issuer=R.jwtIssuer,G.subject=R.jwtSubject,G.audience=R.jwtAudience,G.private_key=R.jwtPrivateKey,G.algorithm=R.jwtAlgorithm,G.expiry_duration=R.jwtExpiryDuration,G.expiry_unit=R.jwtExpiryUnit):R.authMethod==="hmac"&&(G.access_key=R.hmacAccessKey,G.secret_key=R.hmacSecretKey,G.algorithm=R.hmacAlgorithm,G.signature_location=R.hmacSignatureLocation,G.header_param_name=R.hmacHeaderParamName);const ee=R.customHeaders.filter(B=>B.key&&B.value),ae=R.queryParams.filter(B=>B.key&&B.value),I=R.requestBodyFields?R.requestBodyFields.filter(B=>B.key&&B.value):[];let H=R.requestBody;if(R.contentType==="application/x-www-form-urlencoded"&&I.length>0){const B=new URLSearchParams;I.forEach(te=>{B.append(te.key,te.value)}),H=B.toString()}else if(R.contentType==="application/json"&&I.length>0){const B={};I.forEach(te=>{B[te.key]=te.value}),H=JSON.stringify(B)}else if(I.length>0&&I.some(B=>B.key&&B.value))if(R.contentType==="application/json"){const B={};I.forEach(te=>{B[te.key]=te.value}),H=JSON.stringify(B)}else{const B=new URLSearchParams;I.forEach(te=>{B.append(te.key,te.value)}),H=B.toString()}return{server_type:R.serverType,server_name:R.serverName,server_url:R.serverUrl,port:parseInt(R.port),http_method:R.httpMethod,auth_method:R.authMethod,auth_config:Object.keys(G).length>0?G:null,sender_name:R.senderName,sender_email:R.senderEmail,enable_ssl:R.enableSSL,content_type:R.contentType,custom_headers:ee.length>0?ee:null,query_params:ae.length>0?ae:null,request_body:H,is_active:!0}},X=async R=>{_(!0);try{const G=Z(R);n?(await a.mutateAsync({id:parseInt(t),data:G}),Ee.success(l("Configuration updated successfully","kivicare-clinic-management-system"))):(await s.mutateAsync(G),Ee.success(l("Configuration saved successfully","kivicare-clinic-management-system"))),e("/setting/custom-notification")}catch(G){console.error("Error saving notification service:",G)}finally{_(!1)}};return n&&o?i.jsx($y,{}):i.jsx("div",{className:"custom-notification-edit",children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:n?l("Edit Notification Service","kivicare-clinic-management-system"):l("Create Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:n?l("Configure settings for notification service ID:","kivicare-clinic-management-system")+" "+t:l("Configure settings for a new notification service","kivicare-clinic-management-system")})]}),i.jsx(gt,{to:"/setting/custom-notification",className:"btn btn-primary",children:l("Back","kivicare-clinic-management-system")})]}),i.jsxs("form",{onSubmit:d(X),children:[i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Basic Settings","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Notification Server Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ot,{options:M,value:M.find(R=>R.value===S.serverType)||null,onChange:R=>Y("serverType",R?.value||""),placeholder:l("Select server type","kivicare-clinic-management-system"),classNamePrefix:"react-select",isClearable:!0,isSearchable:!1,styles:{menuPortal:R=>({...R,zIndex:9999})},className:m.serverType?"react-select-box is-invalid":"react-select-box"}),m.serverType&&i.jsx("div",{className:"invalid-feedback d-block",children:m.serverType})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Server Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.serverName?"is-invalid":""}`,value:S.serverName,onChange:R=>Y("serverName",R.target.value),placeholder:l("Enter server name","kivicare-clinic-management-system")}),m.serverName&&i.jsx("div",{className:"invalid-feedback",children:m.serverName})]})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Server URL / Host","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"url",className:`form-control ${m.serverUrl?"is-invalid":""}`,value:S.serverUrl,onChange:R=>Y("serverUrl",R.target.value),placeholder:l("https://api.example.com/v1/send","kivicare-clinic-management-system")}),m.serverUrl&&i.jsx("div",{className:"invalid-feedback",children:m.serverUrl})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Port Number","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.port?"is-invalid":""}`,value:S.port,onChange:R=>Y("port",R.target.value),placeholder:"443"}),m.port&&i.jsx("div",{className:"invalid-feedback",children:m.port})]})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ot,{options:P,value:P.find(R=>R.value===S.httpMethod)||null,onChange:R=>Y("httpMethod",R?.value||"POST"),placeholder:l("Select HTTP method","kivicare-clinic-management-system"),className:m.httpMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:R=>({...R,zIndex:9999})}}),m.httpMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.httpMethod})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Authentication","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Authentication Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ot,{options:E,value:E.find(R=>R.value===S.authMethod)||null,onChange:R=>Y("authMethod",R?.value||""),placeholder:l("Select authentication method","kivicare-clinic-management-system"),isSearchable:!1,className:m.authMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}}),m.authMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.authMethod})]}),S.authMethod==="apikey"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("API Key Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("API Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.apiKey?"is-invalid":""}`,value:S.apiKey,onChange:R=>Y("apiKey",R.target.value),placeholder:l("Enter API key","kivicare-clinic-management-system")}),m.apiKey&&i.jsx("div",{className:"invalid-feedback",children:m.apiKey})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Key Location","kivicare-clinic-management-system")}),console.log(S),i.jsx(ot,{options:O,value:O.find(R=>R.value===S.keyLocation)||O[0],onChange:R=>Y("keyLocation",R?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.headerParamName?"is-invalid":""}`,value:S.headerParamName,onChange:R=>Y("headerParamName",R.target.value),placeholder:l("Authorization","kivicare-clinic-management-system")}),m.headerParamName&&i.jsx("div",{className:"invalid-feedback",children:m.headerParamName})]})})]})]}),S.authMethod==="basic"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("Basic Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Username","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.username?"is-invalid":""}`,value:S.username,onChange:R=>Y("username",R.target.value),placeholder:l("Enter username","kivicare-clinic-management-system")}),m.username&&i.jsx("div",{className:"invalid-feedback",children:m.username})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Password","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.password?"is-invalid":""}`,value:S.password,onChange:R=>Y("password",R.target.value),placeholder:l("Enter password","kivicare-clinic-management-system")}),m.password&&i.jsx("div",{className:"invalid-feedback",children:m.password})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Encoding","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.encoding,onChange:R=>Y("encoding",R.target.value),placeholder:"Base64",readOnly:!0})]})})]})]}),S.authMethod==="bearer"&&i.jsxs("div",{className:"border p-3 rounded ",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Access Token","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.accessToken?"is-invalid":""}`,value:S.accessToken,onChange:R=>Y("accessToken",R.target.value),placeholder:l("Enter access token","kivicare-clinic-management-system")}),m.accessToken&&i.jsx("div",{className:"invalid-feedback",children:m.accessToken})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token Type","kivicare-clinic-management-system")}),i.jsx(ot,{options:F,value:F.find(R=>R.value===S.tokenType)||F[0],onChange:R=>Y("tokenType",R?.value||"Bearer"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token Expiry","kivicare-clinic-management-system")}),i.jsx("input",{type:"datetime-local",className:"form-control",value:S.tokenExpiry,onChange:R=>Y("tokenExpiry",R.target.value)})]})})]}),i.jsx("h6",{className:"mt-4 mb-3",children:l("OAuth2 Flow (Optional)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Client ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.clientId,onChange:R=>Y("clientId",R.target.value),placeholder:l("Enter client ID","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Client Secret","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:S.clientSecret,onChange:R=>Y("clientSecret",R.target.value),placeholder:l("Enter client secret","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Authorization URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:S.authUrl,onChange:R=>Y("authUrl",R.target.value),placeholder:l("Enter authorization URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Token URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:S.tokenUrl,onChange:R=>Y("tokenUrl",R.target.value),placeholder:l("Enter token URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Redirect URL / Callback","kivicare-clinic-management-system"),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:"redirect-url-tooltip",children:l("This is the callback URL you need to configure in your OAuth2 provider settings. It tells the provider where to send the authorization code after user approval.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ms-1",style:{cursor:"help"}})})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"url",className:"form-control",value:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",onChange:R=>Y("redirectUrl",R.target.value),placeholder:l("OAuth2 callback URL","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{const R=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";Y("redirectUrl",R)},title:l("Set default callback URL","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-link"})}),i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:async()=>{try{const R=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";await navigator.clipboard.writeText(R),Ee.success(l(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}catch{const G=document.createElement("textarea");G.value=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",document.body.appendChild(G),G.select(),document.execCommand("copy"),document.body.removeChild(G),Ee.success(l(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}},title:l("Copy callback URL to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("strong",{children:l("Important:","kivicare-clinic-management-system")})," ",l(`Copy this URL and paste it as the "Redirect URI" or "Callback URL" in your OAuth2 provider's application settings. This allows the provider to send the authorization code back to this application.`,"kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Scopes","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.scopes,onChange:R=>Y("scopes",R.target.value),placeholder:l("Enter scopes (comma separated)","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Refresh Token","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:S.refreshToken,onChange:R=>Y("refreshToken",R.target.value),placeholder:l("Enter refresh token","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[" ",l("OAuth2 Token Generation","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:L,disabled:w||!S.clientId||!S.clientSecret||!S.authUrl||!S.tokenUrl,children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Generating...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),l("Generate Access Token","kivicare-clinic-management-system")]})}),S.refreshToken&&i.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:V,disabled:w||!S.refreshToken||!S.tokenUrl,children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Refreshing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-arrow-clockwise me-2"}),l("Refresh Token","kivicare-clinic-management-system")]})})]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:l('Fill in all OAuth2 fields above, then click "Generate Access Token" to start the OAuth2 authorization flow. This will automatically populate the Access Token field. If you have a refresh token, you can use the "Refresh Token" button to get a new access token without going through the full authorization flow again.',"kivicare-clinic-management-system")})]})]}),S.authMethod==="jwt"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("JWT (JSON Web Token)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Issuer (iss)","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.jwtIssuer?"is-invalid":""}`,value:S.jwtIssuer,onChange:R=>Y("jwtIssuer",R.target.value),placeholder:l("Enter issuer","kivicare-clinic-management-system")}),m.jwtIssuer&&i.jsx("div",{className:"invalid-feedback",children:m.jwtIssuer})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Subject (sub)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.jwtSubject,onChange:R=>Y("jwtSubject",R.target.value),placeholder:l("Enter subject","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Audience (aud)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.jwtAudience,onChange:R=>Y("jwtAudience",R.target.value),placeholder:l("Enter audience","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Private Key / Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${m.jwtPrivateKey?"is-invalid":""}`,rows:"4",value:S.jwtPrivateKey,onChange:R=>Y("jwtPrivateKey",R.target.value),placeholder:l("Enter private key or secret","kivicare-clinic-management-system"),style:{fontFamily:"monospace"}}),m.jwtPrivateKey&&i.jsx("div",{className:"invalid-feedback",children:m.jwtPrivateKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(ot,{options:q,value:q.find(R=>R.value===S.jwtAlgorithm)||q[0],onChange:R=>Y("jwtAlgorithm",R?.value||"HS256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Expiry Duration","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.jwtExpiryDuration?"is-invalid":""}`,value:S.jwtExpiryDuration,onChange:R=>Y("jwtExpiryDuration",R.target.value),placeholder:"60",min:"1"}),m.jwtExpiryDuration&&i.jsx("div",{className:"invalid-feedback",children:m.jwtExpiryDuration})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Unit","kivicare-clinic-management-system")}),i.jsx(ot,{options:ne,value:ne.find(R=>R.value===S.jwtExpiryUnit)||ne[0],onChange:R=>Y("jwtExpiryUnit",R?.value||"minutes"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})})]})]}),S.authMethod==="hmac"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",l("HMAC / Signature Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Access Key / Public Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacAccessKey?"is-invalid":""}`,value:S.hmacAccessKey,onChange:R=>Y("hmacAccessKey",R.target.value),placeholder:l("Enter access key","kivicare-clinic-management-system")}),m.hmacAccessKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacAccessKey})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.hmacSecretKey?"is-invalid":""}`,value:S.hmacSecretKey,onChange:R=>Y("hmacSecretKey",R.target.value),placeholder:l("Enter secret key","kivicare-clinic-management-system")}),m.hmacSecretKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacSecretKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(ot,{options:U,value:U.find(R=>R.value===S.hmacAlgorithm)||U[0],onChange:R=>Y("hmacAlgorithm",R?.value||"HMAC-SHA256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Signature Location","kivicare-clinic-management-system")}),i.jsx(ot,{options:K,value:K.find(R=>R.value===S.hmacSignatureLocation)||K[0],onChange:R=>Y("hmacSignatureLocation",R?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacHeaderParamName?"is-invalid":""}`,value:S.hmacHeaderParamName,onChange:R=>Y("hmacHeaderParamName",R.target.value),placeholder:l("X-Signature","kivicare-clinic-management-system")}),m.hmacHeaderParamName&&i.jsx("div",{className:"invalid-feedback",children:m.hmacHeaderParamName})]})})]})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Sender Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Sender Name / From","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.senderName,onChange:R=>Y("senderName",R.target.value),placeholder:l("Enter sender name","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Sender Email / Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.senderEmail,onChange:R=>Y("senderEmail",R.target.value),placeholder:z()})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"enableSSL",checked:S.enableSSL,onChange:R=>Y("enableSSL",R.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"enableSSL",children:l("Enable SSL/TLS","kivicare-clinic-management-system")})]}),i.jsx("span",{className:`badge ${S.enableSSL?"bg-success":"bg-warning"}`,children:S.enableSSL?l("Secure","kivicare-clinic-management-system"):l("Insecure","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Request Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Content Type","kivicare-clinic-management-system")}),i.jsx(ot,{options:D,value:D.find(R=>R.value===S.contentType)||D[0],onChange:R=>Y("contentType",R?.value||"application/json"),placeholder:l("Select content type","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:R=>({...R,zIndex:9999})}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>fe("customHeaders"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Header","kivicare-clinic-management-system")]})]}),S.customHeaders.map((R,G)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Header name","kivicare-clinic-management-system"),value:R.key,onChange:ee=>le("customHeaders",G,"key",ee.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Header value","kivicare-clinic-management-system"),value:R.value,onChange:ee=>le("customHeaders",G,"value",ee.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>W("customHeaders",G),children:i.jsx("i",{className:"ph ph-trash"})})})]},G))]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>fe("queryParams"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Parameter","kivicare-clinic-management-system")]})]}),S.queryParams.map((R,G)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Parameter name","kivicare-clinic-management-system"),value:R.key,onChange:ee=>le("queryParams",G,"key",ee.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Parameter value","kivicare-clinic-management-system"),value:R.value,onChange:ee=>le("queryParams",G,"value",ee.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>W("queryParams",G),children:i.jsx("i",{className:"ph ph-trash"})})})]},G))]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("label",{className:"form-label mb-0",children:l("Dynamic Variables","kivicare-clinic-management-system")}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:"dynamic-variables-tooltip",children:l("Click any variable button to copy it to your clipboard, then paste it in your request body, headers, or query parameters. Variables will be automatically replaced with actual values when the notification is sent.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ",style:{cursor:"help"}})})]}),i.jsx("small",{className:"text-muted",children:l("Click to copy variable to clipboard","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:A.map((R,G)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary d-flex align-items-center gap-1",onClick:()=>de(R.name),title:`${R.description} - ${l("Example:","kivicare-clinic-management-system")} ${R.example}`,children:[i.jsx("code",{className:"small text-white",children:`{{${R.name}}}`}),i.jsx("i",{className:"ph ph-copy"})]},G))})]}),re()&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Request Body","kivicare-clinic-management-system")}),S.contentType==="application/x-www-form-urlencoded"?i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("small",{className:"text-muted",children:l("Add key-value pairs for the request body","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>fe("requestBodyFields"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Field","kivicare-clinic-management-system")]})]}),S.requestBodyFields&&S.requestBodyFields.map((R,G)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Field name","kivicare-clinic-management-system"),value:R.key,onChange:ee=>le("requestBodyFields",G,"key",ee.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Field value","kivicare-clinic-management-system"),value:R.value,onChange:ee=>le("requestBodyFields",G,"value",ee.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>W("requestBodyFields",G),children:i.jsx("i",{className:"ph ph-trash"})})})]},G))]}):i.jsx("textarea",{className:"form-control",rows:"8",value:S.requestBody,onChange:R=>Y("requestBody",R.target.value),placeholder:ie(),style:{fontFamily:"monospace"}}),i.jsx("div",{className:"form-text",children:l("Use the dynamic variables from above in your request body. Copy variables by clicking the copy button next to each variable.","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:N||s.isPending||a.isPending,children:[i.jsx("i",{className:"ph ph-floppy-disk me-1"}),N||s.isPending||a.isPending?l("Saving...","kivicare-clinic-management-system"):l("Save Configuration","kivicare-clinic-management-system")]}),i.jsxs("button",{type:"button",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-lightning me-1"}),l("Test Connection","kivicare-clinic-management-system")]}),i.jsx(gt,{to:"/setting/custom-notification",className:"btn btn-secondary",children:l("Cancel","kivicare-clinic-management-system")})]})]})]})})},Lae=()=>i.jsxs("div",{className:"custom-notification-test",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"250px",height:"1.75rem",className:"mb-2"}),i.jsx(C,{width:"150px",height:"1rem"})]}),i.jsx(C,{width:"140px",height:"2.25rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"200px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"120px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})]})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"160px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"140px",height:"1rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"40px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"60px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"50px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"70px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"180px",height:"1rem"})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"120px",height:"1rem"})]})]})]})})]})]}),Fae=()=>{const{id:t}=Wt(),[e,n]=f.useState(null),{data:s,isLoading:a}=WR(t),r=WX(),{register:o,handleSubmit:c,formState:{errors:d},watch:m}=Xt({defaultValues:{recipient:"",message:""}}),u=m("message"),p=async v=>{try{const y=await r.mutateAsync({id:parseInt(t),data:{recipient:v.recipient,message:v.message}});n({success:!0,message:y.message||l("Test notification sent successfully!","kivicare-clinic-management-system"),timestamp:new Date().toLocaleString(),details:y.data||null}),Ee.success(l("Test notification sent successfully!","kivicare-clinic-management-system"))}catch(y){console.error("Test notification error:",y);const b=y.response?.data?.message||y.message||l("Failed to send test notification","kivicare-clinic-management-system");n({success:!1,message:b,timestamp:new Date().toLocaleString(),details:y.response?.data?.data||null}),Ee.error(b)}};return i.jsx("div",{className:"custom-notification-test",children:a?i.jsx(Lae,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:l("Test Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:s?.data?.server_name?`${s.data.server_name} (ID: ${t})`:`${l("Service ID:","kivicare-clinic-management-system")} ${t}`})]}),i.jsxs(gt,{to:"/setting/custom-notification",className:"btn btn-outline-secondary",children:[i.jsx("i",{className:"ph ph-arrow-left me-1"}),l("Back to Services","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-8",children:[i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:l("Send Test Notification","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:c(p),children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Test Recipient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${d.recipient?"is-invalid":""}`,placeholder:l("Enter email, phone number, or device token","kivicare-clinic-management-system"),...o("recipient",{required:l("Recipient is required","kivicare-clinic-management-system")})}),d.recipient&&i.jsx("div",{className:"invalid-feedback",children:d.recipient.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Test Message","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${d.message?"is-invalid":""}`,rows:"4",placeholder:l("Enter test message content","kivicare-clinic-management-system"),...o("message",{required:l("Message is required","kivicare-clinic-management-system"),minLength:{value:1,message:l("Message cannot be empty","kivicare-clinic-management-system")}})}),d.message&&i.jsx("div",{className:"invalid-feedback",children:d.message.message})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r.isPending||!u?.trim(),children:r.isPending?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Sending...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-paper-plane-tilt me-1"}),l("Send Test","kivicare-clinic-management-system")]})})]})})]}),e&&i.jsx("div",{className:`alert ${e.success?"alert-success":"alert-danger"} mt-3`,children:i.jsxs("div",{className:"d-flex align-items-start",children:[i.jsx("i",{className:`ph ${e.success?"ph-check-circle":"ph-x-circle"} me-2 mt-1`}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("strong",{children:e.message}),i.jsx("br",{}),i.jsxs("small",{children:[l("Sent at:","kivicare-clinic-management-system")," ",e.timestamp]}),e.details&&i.jsxs("div",{className:"mt-2",children:[i.jsx("small",{className:"text-muted",children:i.jsx("strong",{children:l("Details:","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"small p-2 mt-1 rounded",style:{textWrap:"wrap"},children:JSON.stringify(e.details,null,2)})]})]})]})})]}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:l("Service Information","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:s?.data?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Service Name","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:s.data.server_name})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Type","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${g(s.data.server_type)}`,children:h(s.data.server_type)})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Status","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${s.data.is_active?"bg-success":"bg-secondary"}`,children:s.data.is_active?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Server URL","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-break",children:s.data.server_url})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx("label",{className:"form-label small text-muted",children:l("Authentication","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small",children:x(s.data.auth_method)})]})]}):i.jsxs("div",{className:"text-center py-3",children:[i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"small text-muted mt-2 mb-0",children:l("Loading service info...","kivicare-clinic-management-system")})]})})]})})]})]})});function h(v){return{sms:"SMS",email:"Email",webhook:"Webhook","custom-api":"Custom API","push-notification":"Push Notification"}[v]||v}function g(v){return{sms:"bg-primary",email:"bg-info",webhook:"bg-warning","custom-api":"bg-secondary","push-notification":"bg-success"}[v]||"bg-secondary"}function x(v){return{none:l("No Authentication","kivicare-clinic-management-system"),apikey:l("API Key","kivicare-clinic-management-system"),basic:l("Basic Auth","kivicare-clinic-management-system"),bearer:l("Bearer Token","kivicare-clinic-management-system"),jwt:l("JWT","kivicare-clinic-management-system"),hmac:l("HMAC","kivicare-clinic-management-system")}[v]||v}},$ae=()=>(f.useEffect(()=>{(()=>{try{let e=new URLSearchParams(window.location.search),n=e.get("code"),s=e.get("error"),a=e.get("error_description");if(!n&&!s&&window.location.hash){const r=new URLSearchParams(window.location.hash.substring(1));n=r.get("code"),s=r.get("error"),a=r.get("error_description")}s?window.opener?.postMessage({type:"oauth2_error",error:a||s},window.location.origin):n?window.opener?.postMessage({type:"oauth2_success",code:n},window.location.origin):window.opener?.postMessage({type:"oauth2_error",error:"No authorization code received"},window.location.origin),setTimeout(()=>{window.close()},1e3)}catch(e){console.error("OAuth2 callback error:",e),window.opener?.postMessage({type:"oauth2_error",error:"Callback processing failed: "+e.message},window.location.origin),setTimeout(()=>{window.close()},1e3)}})()},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:l("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("Please wait while we process your authorization. This window will close automatically.","kivicare-clinic-management-system")})]})})),Bae=()=>{const t=dn(),[e,n]=f.useState(!1),[s,a]=f.useState([]),[r,o]=f.useState({}),[c,d]=f.useState(""),[m,u]=f.useState(""),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,{data:g,isLoading:x,error:v}=bn("settings","email-template",{},{enabled:!0}),y=cn("settings","email-template"),b=In(),j=P=>{const D=[];return!P||typeof P!="object"||Object.keys(P).forEach(O=>{(Array.isArray(P[O])?P[O]:[]).forEach(q=>{D.push({...q,user_type:O})})}),D};f.useEffect(()=>{if(!g?.status||!g.data){a([]),o({});return}a(j(g.data.data)),o(g.data.dynamicKey||{})},[g]);const k=()=>{n(!1)},S=P=>{t(`/setting/email-template/edit/${P.ID}`)},N=()=>{t("/setting/email-template/test")},_=async(P,D)=>{const O={ID:P,post_status:D==="publish"?"draft":"publish"};y.mutate(O,{onError:F=>{console.error("Error updating status:",F),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to update template status","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}})},w=P=>{console.log("sending test mail"),alert(l("Test mail send","kivicare-clinic-management-system"))},T=f.useMemo(()=>[...new Set(s.map(D=>D.user_type))].sort(),[s]),A=f.useMemo(()=>{let P=s;return c&&(P=P.filter(D=>D.post_title?.toLowerCase().includes(c.toLowerCase()))),m&&(P=P.filter(D=>D.user_type===m)),P},[s,c,m]),M=f.useMemo(()=>[b.accessor("templates",{id:"templates",header:()=>l("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:P.row.original.post_title})})}),b.accessor("recipient",{id:"recipient",header:()=>l("Recipient(s)","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:P.row.original.user_type})})}),b.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(ln,{checked:P.row.original.post_status==="publish",onChange:()=>_(P.row.original.ID,P.row.original.post_status),inputClassName:"text-center"})}),b.accessor("actions",{header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("button",{onClick:()=>S(P.row.original),className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:l("Manage","kivicare-clinic-management-system")})})],[x,r]);if(v){let P;typeof v=="string"?P=v:v?.response?.data?.message?P=v.response.data.message:v?.message?P=v.message:P=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(P,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}const E=({type:P,title:D})=>i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:D}),i.jsx("div",{children:i.jsxs("button",{onClick:k,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"text",className:"form-control",placeholder:l("Enter email id","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:l('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system")})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>w(),children:l("Test","kivicare-clinic-management-system")})]})]});return x?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:10,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-email-template",role:"tabpanel","aria-labelledby":"v-pills-email-template-tab",tabIndex:"0",children:e?i.jsx(E,{type:"email",title:l("Test Email","kivicare-clinic-management-system")}):i.jsxs("div",{className:"email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("Email Template","kivicare-clinic-management-system")," ",h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/email-template-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"Top",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx("button",{type:"button",onClick:N,className:"btn btn-primary",children:l("Send Test Email","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"row mb-3 g-3 justify-content-end",children:[i.jsx("div",{className:"col-md-2",children:i.jsx("div",{className:"input-search-select",children:i.jsxs("div",{className:"input-group input-group-search ",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search templates...","kivicare-clinic-management-system"),value:c,onChange:P=>d(P.target.value)}),c&&i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(""),children:i.jsx("i",{className:"ph ph-x"})})]})})}),i.jsx("div",{className:"col-md-2",children:i.jsx(ot,{className:"react-select-box",classNamePrefix:"react-select",value:m?{value:m,label:m.charAt(0).toUpperCase()+m.slice(1)}:{value:"",label:l("All Recipients","kivicare-clinic-management-system")},onChange:P=>u(P?.value||""),options:[{value:"",label:l("All Recipients","kivicare-clinic-management-system")},...T.map(P=>({value:P,label:P.charAt(0).toUpperCase()+P.slice(1)}))],isClearable:!1,isSearchable:!1,styles:{menuPortal:P=>({...P,zIndex:9999})}})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:A,columns:M,enableSelection:!1,isLoading:x})})]})})};var nM=typeof global=="object"&&global&&global.Object===Object&&global,qae=typeof self=="object"&&self&&self.Object===Object&&self,Va=nM||qae||Function("return this")(),pl=Va.Symbol,iM=Object.prototype,Hae=iM.hasOwnProperty,zae=iM.toString,Dd=pl?pl.toStringTag:void 0;function Vae(t){var e=Hae.call(t,Dd),n=t[Dd];try{t[Dd]=void 0;var s=!0}catch{}var a=zae.call(t);return s&&(e?t[Dd]=n:delete t[Dd]),a}var Uae=Object.prototype,Wae=Uae.toString;function Kae(t){return Wae.call(t)}var Gae="[object Null]",Yae="[object Undefined]",WC=pl?pl.toStringTag:void 0;function od(t){return t==null?t===void 0?Yae:Gae:WC&&WC in Object(t)?Vae(t):Kae(t)}function Cr(t){return t!=null&&typeof t=="object"}var ho=Array.isArray;function bl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function sM(t){return t}var Qae="[object AsyncFunction]",Zae="[object Function]",Xae="[object GeneratorFunction]",Jae="[object Proxy]";function zk(t){if(!bl(t))return!1;var e=od(t);return e==Zae||e==Xae||e==Qae||e==Jae}var rx=Va["__core-js_shared__"],KC=(function(){var t=/[^.]+$/.exec(rx&&rx.keys&&rx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function ere(t){return!!KC&&KC in t}var tre=Function.prototype,nre=tre.toString;function Po(t){if(t!=null){try{return nre.call(t)}catch{}try{return t+""}catch{}}return""}var ire=/[\\^$.*+?()[\]{}|]/g,sre=/^\[object .+?Constructor\]$/,are=Function.prototype,rre=Object.prototype,lre=are.toString,ore=rre.hasOwnProperty,cre=RegExp("^"+lre.call(ore).replace(ire,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dre(t){if(!bl(t)||ere(t))return!1;var e=zk(t)?cre:sre;return e.test(Po(t))}function mre(t,e){return t?.[e]}function Mo(t,e){var n=mre(t,e);return dre(n)?n:void 0}var Vy=Mo(Va,"WeakMap"),GC=Object.create,ure=(function(){function t(){}return function(e){if(!bl(e))return{};if(GC)return GC(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function hre(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function pre(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var gre=800,fre=16,vre=Date.now;function xre(t){var e=0,n=0;return function(){var s=vre(),a=fre-(s-n);if(n=s,a>0){if(++e>=gre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function yre(t){return function(){return t}}var cg=(function(){try{var t=Mo(Object,"defineProperty");return t({},"",{}),t}catch{}})(),bre=cg?function(t,e){return cg(t,"toString",{configurable:!0,enumerable:!1,value:yre(e),writable:!0})}:sM,wre=xre(bre);function kre(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var jre=9007199254740991,Nre=/^(?:0|[1-9]\d*)$/;function aM(t,e){var n=typeof t;return e=e??jre,!!e&&(n=="number"||n!="symbol"&&Nre.test(t))&&t>-1&&t%1==0&&t<e}function Vk(t,e,n){e=="__proto__"&&cg?cg(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function gu(t,e){return t===e||t!==t&&e!==e}var Cre=Object.prototype,Sre=Cre.hasOwnProperty;function rM(t,e,n){var s=t[e];(!(Sre.call(t,e)&&gu(s,n))||n===void 0&&!(e in t))&&Vk(t,e,n)}function _re(t,e,n,s){var a=!n;n||(n={});for(var r=-1,o=e.length;++r<o;){var c=e[r],d=void 0;d===void 0&&(d=t[c]),a?Vk(n,c,d):rM(n,c,d)}return n}var YC=Math.max;function Ere(t,e,n){return e=YC(e===void 0?t.length-1:e,0),function(){for(var s=arguments,a=-1,r=YC(s.length-e,0),o=Array(r);++a<r;)o[a]=s[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=s[a];return c[e]=n(o),hre(t,this,c)}}function Tre(t,e){return wre(Ere(t,e,sM),t+"")}var Are=9007199254740991;function lM(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Are}function gf(t){return t!=null&&lM(t.length)&&!zk(t)}function Dre(t,e,n){if(!bl(n))return!1;var s=typeof e;return(s=="number"?gf(n)&&aM(e,n.length):s=="string"&&e in n)?gu(n[e],t):!1}function Rre(t){return Tre(function(e,n){var s=-1,a=n.length,r=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(r=t.length>3&&typeof r=="function"?(a--,r):void 0,o&&Dre(n[0],n[1],o)&&(r=a<3?void 0:r,a=1),e=Object(e);++s<a;){var c=n[s];c&&t(e,c,s,r)}return e})}var Pre=Object.prototype;function Uk(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Pre;return t===n}function Mre(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var Ire="[object Arguments]";function QC(t){return Cr(t)&&od(t)==Ire}var oM=Object.prototype,Ore=oM.hasOwnProperty,Lre=oM.propertyIsEnumerable,Uy=QC((function(){return arguments})())?QC:function(t){return Cr(t)&&Ore.call(t,"callee")&&!Lre.call(t,"callee")};function Fre(){return!1}var cM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZC=cM&&typeof module=="object"&&module&&!module.nodeType&&module,$re=ZC&&ZC.exports===cM,XC=$re?Va.Buffer:void 0,Bre=XC?XC.isBuffer:void 0,Mm=Bre||Fre,qre="[object Arguments]",Hre="[object Array]",zre="[object Boolean]",Vre="[object Date]",Ure="[object Error]",Wre="[object Function]",Kre="[object Map]",Gre="[object Number]",Yre="[object Object]",Qre="[object RegExp]",Zre="[object Set]",Xre="[object String]",Jre="[object WeakMap]",ele="[object ArrayBuffer]",tle="[object DataView]",nle="[object Float32Array]",ile="[object Float64Array]",sle="[object Int8Array]",ale="[object Int16Array]",rle="[object Int32Array]",lle="[object Uint8Array]",ole="[object Uint8ClampedArray]",cle="[object Uint16Array]",dle="[object Uint32Array]",On={};On[nle]=On[ile]=On[sle]=On[ale]=On[rle]=On[lle]=On[ole]=On[cle]=On[dle]=!0;On[qre]=On[Hre]=On[ele]=On[zre]=On[tle]=On[Vre]=On[Ure]=On[Wre]=On[Kre]=On[Gre]=On[Yre]=On[Qre]=On[Zre]=On[Xre]=On[Jre]=!1;function mle(t){return Cr(t)&&lM(t.length)&&!!On[od(t)]}function Wk(t){return function(e){return t(e)}}var dM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dm=dM&&typeof module=="object"&&module&&!module.nodeType&&module,ule=dm&&dm.exports===dM,lx=ule&&nM.process,qc=(function(){try{var t=dm&&dm.require&&dm.require("util").types;return t||lx&&lx.binding&&lx.binding("util")}catch{}})(),JC=qc&&qc.isTypedArray,Kk=JC?Wk(JC):mle,hle=Object.prototype,ple=hle.hasOwnProperty;function mM(t,e){var n=ho(t),s=!n&&Uy(t),a=!n&&!s&&Mm(t),r=!n&&!s&&!a&&Kk(t),o=n||s||a||r,c=o?Mre(t.length,String):[],d=c.length;for(var m in t)(e||ple.call(t,m))&&!(o&&(m=="length"||a&&(m=="offset"||m=="parent")||r&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||aM(m,d)))&&c.push(m);return c}function uM(t,e){return function(n){return t(e(n))}}var gle=uM(Object.keys,Object),fle=Object.prototype,vle=fle.hasOwnProperty;function xle(t){if(!Uk(t))return gle(t);var e=[];for(var n in Object(t))vle.call(t,n)&&n!="constructor"&&e.push(n);return e}function yle(t){return gf(t)?mM(t):xle(t)}function ble(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var wle=Object.prototype,kle=wle.hasOwnProperty;function jle(t){if(!bl(t))return ble(t);var e=Uk(t),n=[];for(var s in t)s=="constructor"&&(e||!kle.call(t,s))||n.push(s);return n}function hM(t){return gf(t)?mM(t,!0):jle(t)}var Im=Mo(Object,"create");function Nle(){this.__data__=Im?Im(null):{},this.size=0}function Cle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Sle="__lodash_hash_undefined__",_le=Object.prototype,Ele=_le.hasOwnProperty;function Tle(t){var e=this.__data__;if(Im){var n=e[t];return n===Sle?void 0:n}return Ele.call(e,t)?e[t]:void 0}var Ale=Object.prototype,Dle=Ale.hasOwnProperty;function Rle(t){var e=this.__data__;return Im?e[t]!==void 0:Dle.call(e,t)}var Ple="__lodash_hash_undefined__";function Mle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Im&&e===void 0?Ple:e,this}function po(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}po.prototype.clear=Nle;po.prototype.delete=Cle;po.prototype.get=Tle;po.prototype.has=Rle;po.prototype.set=Mle;function Ile(){this.__data__=[],this.size=0}function ff(t,e){for(var n=t.length;n--;)if(gu(t[n][0],e))return n;return-1}var Ole=Array.prototype,Lle=Ole.splice;function Fle(t){var e=this.__data__,n=ff(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():Lle.call(e,n,1),--this.size,!0}function $le(t){var e=this.__data__,n=ff(e,t);return n<0?void 0:e[n][1]}function Ble(t){return ff(this.__data__,t)>-1}function qle(t,e){var n=this.__data__,s=ff(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function Rr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Rr.prototype.clear=Ile;Rr.prototype.delete=Fle;Rr.prototype.get=$le;Rr.prototype.has=Ble;Rr.prototype.set=qle;var Om=Mo(Va,"Map");function Hle(){this.size=0,this.__data__={hash:new po,map:new(Om||Rr),string:new po}}function zle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vf(t,e){var n=t.__data__;return zle(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Vle(t){var e=vf(this,t).delete(t);return this.size-=e?1:0,e}function Ule(t){return vf(this,t).get(t)}function Wle(t){return vf(this,t).has(t)}function Kle(t,e){var n=vf(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function Io(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Io.prototype.clear=Hle;Io.prototype.delete=Vle;Io.prototype.get=Ule;Io.prototype.has=Wle;Io.prototype.set=Kle;function Gle(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var pM=uM(Object.getPrototypeOf,Object),Yle="[object Object]",Qle=Function.prototype,Zle=Object.prototype,gM=Qle.toString,Xle=Zle.hasOwnProperty,Jle=gM.call(Object);function eoe(t){if(!Cr(t)||od(t)!=Yle)return!1;var e=pM(t);if(e===null)return!0;var n=Xle.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gM.call(n)==Jle}function toe(){this.__data__=new Rr,this.size=0}function noe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function ioe(t){return this.__data__.get(t)}function soe(t){return this.__data__.has(t)}var aoe=200;function roe(t,e){var n=this.__data__;if(n instanceof Rr){var s=n.__data__;if(!Om||s.length<aoe-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new Io(s)}return n.set(t,e),this.size=n.size,this}function Aa(t){var e=this.__data__=new Rr(t);this.size=e.size}Aa.prototype.clear=toe;Aa.prototype.delete=noe;Aa.prototype.get=ioe;Aa.prototype.has=soe;Aa.prototype.set=roe;var fM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eS=fM&&typeof module=="object"&&module&&!module.nodeType&&module,loe=eS&&eS.exports===fM,tS=loe?Va.Buffer:void 0,nS=tS?tS.allocUnsafe:void 0;function vM(t,e){if(e)return t.slice();var n=t.length,s=nS?nS(n):new t.constructor(n);return t.copy(s),s}function ooe(t,e){for(var n=-1,s=t==null?0:t.length,a=0,r=[];++n<s;){var o=t[n];e(o,n,t)&&(r[a++]=o)}return r}function coe(){return[]}var doe=Object.prototype,moe=doe.propertyIsEnumerable,iS=Object.getOwnPropertySymbols,uoe=iS?function(t){return t==null?[]:(t=Object(t),ooe(iS(t),function(e){return moe.call(t,e)}))}:coe;function hoe(t,e,n){var s=e(t);return ho(t)?s:Gle(s,n(t))}function Wy(t){return hoe(t,yle,uoe)}var Ky=Mo(Va,"DataView"),Gy=Mo(Va,"Promise"),Yy=Mo(Va,"Set"),sS="[object Map]",poe="[object Object]",aS="[object Promise]",rS="[object Set]",lS="[object WeakMap]",oS="[object DataView]",goe=Po(Ky),foe=Po(Om),voe=Po(Gy),xoe=Po(Yy),yoe=Po(Vy),Js=od;(Ky&&Js(new Ky(new ArrayBuffer(1)))!=oS||Om&&Js(new Om)!=sS||Gy&&Js(Gy.resolve())!=aS||Yy&&Js(new Yy)!=rS||Vy&&Js(new Vy)!=lS)&&(Js=function(t){var e=od(t),n=e==poe?t.constructor:void 0,s=n?Po(n):"";if(s)switch(s){case goe:return oS;case foe:return sS;case voe:return aS;case xoe:return rS;case yoe:return lS}return e});var boe=Object.prototype,woe=boe.hasOwnProperty;function koe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&woe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var dg=Va.Uint8Array;function Gk(t){var e=new t.constructor(t.byteLength);return new dg(e).set(new dg(t)),e}function joe(t,e){var n=Gk(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var Noe=/\w*$/;function Coe(t){var e=new t.constructor(t.source,Noe.exec(t));return e.lastIndex=t.lastIndex,e}var cS=pl?pl.prototype:void 0,dS=cS?cS.valueOf:void 0;function Soe(t){return dS?Object(dS.call(t)):{}}function xM(t,e){var n=e?Gk(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var _oe="[object Boolean]",Eoe="[object Date]",Toe="[object Map]",Aoe="[object Number]",Doe="[object RegExp]",Roe="[object Set]",Poe="[object String]",Moe="[object Symbol]",Ioe="[object ArrayBuffer]",Ooe="[object DataView]",Loe="[object Float32Array]",Foe="[object Float64Array]",$oe="[object Int8Array]",Boe="[object Int16Array]",qoe="[object Int32Array]",Hoe="[object Uint8Array]",zoe="[object Uint8ClampedArray]",Voe="[object Uint16Array]",Uoe="[object Uint32Array]";function Woe(t,e,n){var s=t.constructor;switch(e){case Ioe:return Gk(t);case _oe:case Eoe:return new s(+t);case Ooe:return joe(t);case Loe:case Foe:case $oe:case Boe:case qoe:case Hoe:case zoe:case Voe:case Uoe:return xM(t,n);case Toe:return new s;case Aoe:case Poe:return new s(t);case Doe:return Coe(t);case Roe:return new s;case Moe:return Soe(t)}}function yM(t){return typeof t.constructor=="function"&&!Uk(t)?ure(pM(t)):{}}var Koe="[object Map]";function Goe(t){return Cr(t)&&Js(t)==Koe}var mS=qc&&qc.isMap,Yoe=mS?Wk(mS):Goe,Qoe="[object Set]";function Zoe(t){return Cr(t)&&Js(t)==Qoe}var uS=qc&&qc.isSet,Xoe=uS?Wk(uS):Zoe,Joe=1,bM="[object Arguments]",ece="[object Array]",tce="[object Boolean]",nce="[object Date]",ice="[object Error]",wM="[object Function]",sce="[object GeneratorFunction]",ace="[object Map]",rce="[object Number]",kM="[object Object]",lce="[object RegExp]",oce="[object Set]",cce="[object String]",dce="[object Symbol]",mce="[object WeakMap]",uce="[object ArrayBuffer]",hce="[object DataView]",pce="[object Float32Array]",gce="[object Float64Array]",fce="[object Int8Array]",vce="[object Int16Array]",xce="[object Int32Array]",yce="[object Uint8Array]",bce="[object Uint8ClampedArray]",wce="[object Uint16Array]",kce="[object Uint32Array]",Tn={};Tn[bM]=Tn[ece]=Tn[uce]=Tn[hce]=Tn[tce]=Tn[nce]=Tn[pce]=Tn[gce]=Tn[fce]=Tn[vce]=Tn[xce]=Tn[ace]=Tn[rce]=Tn[kM]=Tn[lce]=Tn[oce]=Tn[cce]=Tn[dce]=Tn[yce]=Tn[bce]=Tn[wce]=Tn[kce]=!0;Tn[ice]=Tn[wM]=Tn[mce]=!1;function Xh(t,e,n,s,a,r){var o,c=e&Joe;if(o!==void 0)return o;if(!bl(t))return t;var d=ho(t);if(d)o=koe(t);else{var m=Js(t),u=m==wM||m==sce;if(Mm(t))return vM(t,c);if(m==kM||m==bM||u&&!a)o=u?{}:yM(t);else{if(!Tn[m])return a?t:{};o=Woe(t,m,c)}}r||(r=new Aa);var p=r.get(t);if(p)return p;r.set(t,o),Xoe(t)?t.forEach(function(x){o.add(Xh(x,e,n,x,t,r))}):Yoe(t)&&t.forEach(function(x,v){o.set(v,Xh(x,e,n,v,t,r))});var h=Wy,g=d?void 0:h(t);return kre(g||t,function(x,v){g&&(v=x,x=t[v]),rM(o,v,Xh(x,e,n,v,t,r))}),o}var jce=1,Nce=4;function kc(t){return Xh(t,jce|Nce)}var Cce="__lodash_hash_undefined__";function Sce(t){return this.__data__.set(t,Cce),this}function _ce(t){return this.__data__.has(t)}function mg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Io;++e<n;)this.add(t[e])}mg.prototype.add=mg.prototype.push=Sce;mg.prototype.has=_ce;function Ece(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function Tce(t,e){return t.has(e)}var Ace=1,Dce=2;function jM(t,e,n,s,a,r){var o=n&Ace,c=t.length,d=e.length;if(c!=d&&!(o&&d>c))return!1;var m=r.get(t),u=r.get(e);if(m&&u)return m==e&&u==t;var p=-1,h=!0,g=n&Dce?new mg:void 0;for(r.set(t,e),r.set(e,t);++p<c;){var x=t[p],v=e[p];if(s)var y=o?s(v,x,p,e,t,r):s(x,v,p,t,e,r);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!Ece(e,function(b,j){if(!Tce(g,j)&&(x===b||a(x,b,n,s,r)))return g.push(j)})){h=!1;break}}else if(!(x===v||a(x,v,n,s,r))){h=!1;break}}return r.delete(t),r.delete(e),h}function Rce(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}function Pce(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var Mce=1,Ice=2,Oce="[object Boolean]",Lce="[object Date]",Fce="[object Error]",$ce="[object Map]",Bce="[object Number]",qce="[object RegExp]",Hce="[object Set]",zce="[object String]",Vce="[object Symbol]",Uce="[object ArrayBuffer]",Wce="[object DataView]",hS=pl?pl.prototype:void 0,ox=hS?hS.valueOf:void 0;function Kce(t,e,n,s,a,r,o){switch(n){case Wce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Uce:return!(t.byteLength!=e.byteLength||!r(new dg(t),new dg(e)));case Oce:case Lce:case Bce:return gu(+t,+e);case Fce:return t.name==e.name&&t.message==e.message;case qce:case zce:return t==e+"";case $ce:var c=Rce;case Hce:var d=s&Mce;if(c||(c=Pce),t.size!=e.size&&!d)return!1;var m=o.get(t);if(m)return m==e;s|=Ice,o.set(t,e);var u=jM(c(t),c(e),s,a,r,o);return o.delete(t),u;case Vce:if(ox)return ox.call(t)==ox.call(e)}return!1}var Gce=1,Yce=Object.prototype,Qce=Yce.hasOwnProperty;function Zce(t,e,n,s,a,r){var o=n&Gce,c=Wy(t),d=c.length,m=Wy(e),u=m.length;if(d!=u&&!o)return!1;for(var p=d;p--;){var h=c[p];if(!(o?h in e:Qce.call(e,h)))return!1}var g=r.get(t),x=r.get(e);if(g&&x)return g==e&&x==t;var v=!0;r.set(t,e),r.set(e,t);for(var y=o;++p<d;){h=c[p];var b=t[h],j=e[h];if(s)var k=o?s(j,b,h,e,t,r):s(b,j,h,t,e,r);if(!(k===void 0?b===j||a(b,j,n,s,r):k)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var S=t.constructor,N=e.constructor;S!=N&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof N=="function"&&N instanceof N)&&(v=!1)}return r.delete(t),r.delete(e),v}var Xce=1,pS="[object Arguments]",gS="[object Array]",yh="[object Object]",Jce=Object.prototype,fS=Jce.hasOwnProperty;function ede(t,e,n,s,a,r){var o=ho(t),c=ho(e),d=o?gS:Js(t),m=c?gS:Js(e);d=d==pS?yh:d,m=m==pS?yh:m;var u=d==yh,p=m==yh,h=d==m;if(h&&Mm(t)){if(!Mm(e))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new Aa),o||Kk(t)?jM(t,e,n,s,a,r):Kce(t,e,d,n,s,a,r);if(!(n&Xce)){var g=u&&fS.call(t,"__wrapped__"),x=p&&fS.call(e,"__wrapped__");if(g||x){var v=g?t.value():t,y=x?e.value():e;return r||(r=new Aa),a(v,y,n,s,r)}}return h?(r||(r=new Aa),Zce(t,e,n,s,a,r)):!1}function NM(t,e,n,s,a){return t===e?!0:t==null||e==null||!Cr(t)&&!Cr(e)?t!==t&&e!==e:ede(t,e,n,s,NM,a)}function tde(t){return function(e,n,s){for(var a=-1,r=Object(e),o=s(e),c=o.length;c--;){var d=o[++a];if(n(r[d],d,r)===!1)break}return e}}var nde=tde();function Qy(t,e,n){(n!==void 0&&!gu(t[e],n)||n===void 0&&!(e in t))&&Vk(t,e,n)}function ide(t){return Cr(t)&&gf(t)}function Zy(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function sde(t){return _re(t,hM(t))}function ade(t,e,n,s,a,r,o){var c=Zy(t,n),d=Zy(e,n),m=o.get(d);if(m){Qy(t,n,m);return}var u=r?r(c,d,n+"",t,e,o):void 0,p=u===void 0;if(p){var h=ho(d),g=!h&&Mm(d),x=!h&&!g&&Kk(d);u=d,h||g||x?ho(c)?u=c:ide(c)?u=pre(c):g?(p=!1,u=vM(d,!0)):x?(p=!1,u=xM(d,!0)):u=[]:eoe(d)||Uy(d)?(u=c,Uy(c)?u=sde(c):(!bl(c)||zk(c))&&(u=yM(d))):p=!1}p&&(o.set(d,u),a(u,d,s,r,o),o.delete(d)),Qy(t,n,u)}function CM(t,e,n,s,a){t!==e&&nde(e,function(r,o){if(a||(a=new Aa),bl(r))ade(t,e,o,n,CM,s,a);else{var c=s?s(Zy(t,o),r,o+"",t,e,a):void 0;c===void 0&&(c=r),Qy(t,o,c)}},hM)}function Hr(t,e){return NM(t,e)}var rl=Rre(function(t,e,n){CM(t,e,n)}),Nt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Nt||{});class Fa{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const a=Nt.TYPE&Nt.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Nt.LEVEL|a:Nt.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class jc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const SM=class Xy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const a=this.query(n);if(a==null)throw new jc(`Unable to create ${n} blot`);const r=a,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:r.create(s),c=new r(e,o,s);return Xy.blots.set(c.domNode,c),c}find(e,n=!1){return Xy.find(e,n)}query(e,n=Nt.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&Nt.LEVEL&Nt.BLOCK?s=this.types.block:e&Nt.LEVEL&Nt.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(s=this.classes[a],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&Nt.LEVEL&s.scope&&n&Nt.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,a="attrName"in n;if(!s&&!a)throw new jc("Invalid definition");if(s&&n.blotName==="abstract")throw new jc("Cannot register abstract class");const r=s?n.blotName:a?n.attrName:void 0;return this.types[r]=n,a?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};SM.blots=new WeakMap;let Hc=SM;function vS(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class rde extends Fa{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){vS(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(vS(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const pa=rde;function cx(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class lde extends Fa{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[cx(this.keyName)]=n,!0):!1}remove(e){e.style[cx(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[cx(this.keyName)];return this.canAdd(e,n)?n:""}}const wl=lde;class ode{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Hc.find(this.domNode);if(e==null)return;const n=Fa.keys(this.domNode),s=pa.keys(this.domNode),a=wl.keys(this.domNode);n.concat(s).concat(a).forEach(r=>{const o=e.scroll.query(r,Nt.ATTRIBUTE);o instanceof Fa&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const xf=ode,_M=class{constructor(e,n){this.scroll=e,this.domNode=n,Hc.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new jc("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Hc.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,a){const r=this.isolate(e,n);if(this.scroll.query(s,Nt.BLOT)!=null&&a)r.wrap(s,a);else if(this.scroll.query(s,Nt.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);r.wrap(o),o.format(s,a)}}insertAt(e,n,s){const a=s==null?this.scroll.create("text",n):this.scroll.create(n,s),r=this.split(e);this.parent.insertBefore(a,r||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new jc(`Cannot wrap ${e}`);return s.appendChild(this),s}};_M.blotName="abstract";let EM=_M;const TM=class extends EM{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};TM.scope=Nt.INLINE_BLOT;let cde=TM;const Ri=cde;class dde{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),a=0;for(;s;){if(s===e)return a;a+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let a=s();for(;a;){const r=a.length();if(e<r||n&&e===r&&(a.next==null||a.next.length()!==0))return[a,e];e-=r,a=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[a,r]=this.find(e);let o=e-r;const c=this.iterator(a);let d=c();for(;d&&o<e+n;){const m=d.length();e>o?s(d,e-o,Math.min(n,o+m-e)):s(d,0,Math.min(m,e+n-o)),o+=m,d=c()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let a=s();for(;a;)n=e(n,a),a=s();return n}}function xS(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(Nt.INLINE);return Array.from(t.childNodes).forEach(a=>{s.domNode.appendChild(a)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const AM=class $r extends EM{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,$r.uiClass&&this.uiNode.classList.add($r.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new dde,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=xS(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof jc)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,a,r)=>{s.deleteAt(a,r)})}descendant(e,n=0){const[s,a]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,a]:s instanceof $r?s.descendant(e,a):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let a=[],r=s;return this.children.forEachAt(n,s,(o,c,d)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&a.push(o),o instanceof $r&&(a=a.concat(o.descendants(e,c,r))),r-=d}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===Nt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof $r?n.unwrap():n.remove())})}formatAt(e,n,s,a){this.children.forEachAt(e,n,(r,o,c)=>{r.formatAt(o,c,s,a)})}insertAt(e,n,s){const[a,r]=this.children.find(e);if(a)a.insertAt(r,n,s);else{const o=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,a]=this.children.find(e,n),r=[[this,e]];return s instanceof $r?r.concat(s.path(a,n)):(s!=null&&r.push([s,a]),r)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof $r&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(a,r,o)=>{const c=a.split(r,n);c!=null&&s.appendChild(c)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],a=[];e.forEach(r=>{r.target===this.domNode&&r.type==="childList"&&(s.push(...r.addedNodes),a.push(...r.removedNodes))}),a.forEach(r=>{if(r.parentNode!=null&&r.tagName!=="IFRAME"&&document.body.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(r);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(r=>r.parentNode===this.domNode&&r!==this.uiNode).sort((r,o)=>r===o?0:r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(r=>{let o=null;r.nextSibling!=null&&(o=this.scroll.find(r.nextSibling));const c=xS(r,this.scroll);(c.next!==o||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,o||void 0))}),this.enforceAllowedChildren()}};AM.uiClass="";let mde=AM;const ra=mde;function ude(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const ec=class tc extends ra{static create(e){return super.create(e)}static formats(e,n){const s=n.query(tc.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof tc||(s=s.wrap(tc.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,Nt.INLINE);if(s==null)return;s instanceof Fa?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.formats()[s]!=null||this.scroll.query(s,Nt.ATTRIBUTE)?this.isolate(e,n).format(s,a):super.formatAt(e,n,s,a)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof tc&&s.prev===this&&ude(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof tc&&this.attributes.move(s),s}};ec.allowedChildren=[ec,Ri],ec.blotName="inline",ec.scope=Nt.INLINE_BLOT,ec.tagName="SPAN";let hde=ec;const Yk=hde,nc=class Jy extends ra{static create(e){return super.create(e)}static formats(e,n){const s=n.query(Jy.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){const s=this.scroll.query(e,Nt.BLOCK);s!=null&&(s instanceof Fa?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(Jy.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.scroll.query(s,Nt.BLOCK)!=null?this.format(s,a):super.formatAt(e,n,s,a)}insertAt(e,n,s){if(s==null||this.scroll.query(n,Nt.INLINE)!=null)super.insertAt(e,n,s);else{const a=this.split(e);if(a!=null){const r=this.scroll.create(n,s);a.parent.insertBefore(r,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};nc.blotName="block",nc.scope=Nt.BLOCK_BLOT,nc.tagName="P",nc.allowedChildren=[Yk,nc,Ri];let pde=nc;const Lm=pde,eb=class extends ra{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};eb.blotName="container",eb.scope=Nt.BLOCK_BLOT;let gde=eb;const yf=gde;class fde extends Ri{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,a){e===0&&n===this.length()?this.format(s,a):super.formatAt(e,n,s,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ss=fde,vde={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},xde=100,ic=class extends ra{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,vde),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=Nt.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,a){this.update(),super.formatAt(e,n,s,a)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const r=(d,m=!0)=>{d==null||d===this||d.domNode.parentNode!=null&&(s.has(d.domNode)||s.set(d.domNode,[]),m&&r(d.parent))},o=d=>{s.has(d.domNode)&&(d instanceof ra&&d.children.forEach(o),s.delete(d.domNode),d.optimize(n))};let c=e;for(let d=0;c.length>0;d+=1){if(d>=xde)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(m=>{const u=this.find(m.target,!0);u!=null&&(u.domNode===m.target&&(m.type==="childList"?(r(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(p=>{const h=this.find(p,!1);r(h,!1),h instanceof ra&&h.children.forEach(g=>{r(g,!1)})})):m.type==="attributes"&&r(u.prev)),r(u))}),this.children.forEach(o),c=Array.from(this.observer.takeRecords()),a=c.slice();a.length>0;)e.push(a.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(a=>{const r=this.find(a.target,!0);return r==null?null:s.has(r.domNode)?(s.get(r.domNode).push(a),null):(s.set(r.domNode,[a]),r)}).forEach(a=>{a!=null&&a!==this&&s.has(a.domNode)&&a.update(s.get(a.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};ic.blotName="scroll",ic.defaultChild=Lm,ic.allowedChildren=[Lm,yf],ic.scope=Nt.BLOCK_BLOT,ic.tagName="DIV";let yde=ic;const Qk=yde,tb=class DM extends Ri{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof DM&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};tb.blotName="text",tb.scope=Nt.INLINE_BLOT;let bde=tb;const ug=bde,wde=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Fa,AttributorStore:xf,BlockBlot:Lm,ClassAttributor:pa,ContainerBlot:yf,EmbedBlot:Ss,InlineBlot:Yk,LeafBlot:Ri,ParentBlot:ra,Registry:Hc,Scope:Nt,ScrollBlot:Qk,StyleAttributor:wl,TextBlot:ug},Symbol.toStringTag,{value:"Module"}));var bh={exports:{}},dx,yS;function kde(){if(yS)return dx;yS=1;var t=-1,e=1,n=0;function s(E,P,D,O,F){if(E===P)return E?[[n,E]]:[];if(D!=null){var q=A(E,P,D);if(q)return q}var U=c(E,P),K=E.substring(0,U);E=E.substring(U),P=P.substring(U),U=m(E,P);var ne=E.substring(E.length-U);E=E.substring(0,E.length-U),P=P.substring(0,P.length-U);var Y=a(E,P);return K&&Y.unshift([n,K]),ne&&Y.push([n,ne]),j(Y,F),O&&p(Y),Y}function a(E,P){var D;if(!E)return[[e,P]];if(!P)return[[t,E]];var O=E.length>P.length?E:P,F=E.length>P.length?P:E,q=O.indexOf(F);if(q!==-1)return D=[[e,O.substring(0,q)],[n,F],[e,O.substring(q+F.length)]],E.length>P.length&&(D[0][0]=D[2][0]=t),D;if(F.length===1)return[[t,E],[e,P]];var U=u(E,P);if(U){var K=U[0],ne=U[1],Y=U[2],fe=U[3],le=U[4],W=s(K,Y),z=s(ne,fe);return W.concat([[n,le]],z)}return r(E,P)}function r(E,P){for(var D=E.length,O=P.length,F=Math.ceil((D+O)/2),q=F,U=2*F,K=new Array(U),ne=new Array(U),Y=0;Y<U;Y++)K[Y]=-1,ne[Y]=-1;K[q+1]=0,ne[q+1]=0;for(var fe=D-O,le=fe%2!==0,W=0,z=0,ie=0,re=0,de=0;de<F;de++){for(var L=-de+W;L<=de-z;L+=2){var Q=q+L,V;L===-de||L!==de&&K[Q-1]<K[Q+1]?V=K[Q+1]:V=K[Q-1]+1;for(var Z=V-L;V<D&&Z<O&&E.charAt(V)===P.charAt(Z);)V++,Z++;if(K[Q]=V,V>D)z+=2;else if(Z>O)W+=2;else if(le){var X=q+fe-L;if(X>=0&&X<U&&ne[X]!==-1){var R=D-ne[X];if(V>=R)return o(E,P,V,Z)}}}for(var G=-de+ie;G<=de-re;G+=2){var X=q+G,R;G===-de||G!==de&&ne[X-1]<ne[X+1]?R=ne[X+1]:R=ne[X-1]+1;for(var ee=R-G;R<D&&ee<O&&E.charAt(D-R-1)===P.charAt(O-ee-1);)R++,ee++;if(ne[X]=R,R>D)re+=2;else if(ee>O)ie+=2;else if(!le){var Q=q+fe-G;if(Q>=0&&Q<U&&K[Q]!==-1){var V=K[Q],Z=q+V-Q;if(R=D-R,V>=R)return o(E,P,V,Z)}}}}return[[t,E],[e,P]]}function o(E,P,D,O){var F=E.substring(0,D),q=P.substring(0,O),U=E.substring(D),K=P.substring(O),ne=s(F,q),Y=s(U,K);return ne.concat(Y)}function c(E,P){if(!E||!P||E.charAt(0)!==P.charAt(0))return 0;for(var D=0,O=Math.min(E.length,P.length),F=O,q=0;D<F;)E.substring(q,F)==P.substring(q,F)?(D=F,q=D):O=F,F=Math.floor((O-D)/2+D);return k(E.charCodeAt(F-1))&&F--,F}function d(E,P){var D=E.length,O=P.length;if(D==0||O==0)return 0;D>O?E=E.substring(D-O):D<O&&(P=P.substring(0,D));var F=Math.min(D,O);if(E==P)return F;for(var q=0,U=1;;){var K=E.substring(F-U),ne=P.indexOf(K);if(ne==-1)return q;U+=ne,(ne==0||E.substring(F-U)==P.substring(0,U))&&(q=U,U++)}}function m(E,P){if(!E||!P||E.slice(-1)!==P.slice(-1))return 0;for(var D=0,O=Math.min(E.length,P.length),F=O,q=0;D<F;)E.substring(E.length-F,E.length-q)==P.substring(P.length-F,P.length-q)?(D=F,q=D):O=F,F=Math.floor((O-D)/2+D);return S(E.charCodeAt(E.length-F))&&F--,F}function u(E,P){var D=E.length>P.length?E:P,O=E.length>P.length?P:E;if(D.length<4||O.length*2<D.length)return null;function F(z,ie,re){for(var de=z.substring(re,re+Math.floor(z.length/4)),L=-1,Q="",V,Z,X,R;(L=ie.indexOf(de,L+1))!==-1;){var G=c(z.substring(re),ie.substring(L)),ee=m(z.substring(0,re),ie.substring(0,L));Q.length<ee+G&&(Q=ie.substring(L-ee,L)+ie.substring(L,L+G),V=z.substring(0,re-ee),Z=z.substring(re+G),X=ie.substring(0,L-ee),R=ie.substring(L+G))}return Q.length*2>=z.length?[V,Z,X,R,Q]:null}var q=F(D,O,Math.ceil(D.length/4)),U=F(D,O,Math.ceil(D.length/2)),K;if(!q&&!U)return null;U?q?K=q[4].length>U[4].length?q:U:K=U:K=q;var ne,Y,fe,le;E.length>P.length?(ne=K[0],Y=K[1],fe=K[2],le=K[3]):(fe=K[0],le=K[1],ne=K[2],Y=K[3]);var W=K[4];return[ne,Y,fe,le,W]}function p(E){for(var P=!1,D=[],O=0,F=null,q=0,U=0,K=0,ne=0,Y=0;q<E.length;)E[q][0]==n?(D[O++]=q,U=ne,K=Y,ne=0,Y=0,F=E[q][1]):(E[q][0]==e?ne+=E[q][1].length:Y+=E[q][1].length,F&&F.length<=Math.max(U,K)&&F.length<=Math.max(ne,Y)&&(E.splice(D[O-1],0,[t,F]),E[D[O-1]+1][0]=e,O--,O--,q=O>0?D[O-1]:-1,U=0,K=0,ne=0,Y=0,F=null,P=!0)),q++;for(P&&j(E),b(E),q=1;q<E.length;){if(E[q-1][0]==t&&E[q][0]==e){var fe=E[q-1][1],le=E[q][1],W=d(fe,le),z=d(le,fe);W>=z?(W>=fe.length/2||W>=le.length/2)&&(E.splice(q,0,[n,le.substring(0,W)]),E[q-1][1]=fe.substring(0,fe.length-W),E[q+1][1]=le.substring(W),q++):(z>=fe.length/2||z>=le.length/2)&&(E.splice(q,0,[n,fe.substring(0,z)]),E[q-1][0]=e,E[q-1][1]=le.substring(0,le.length-z),E[q+1][0]=t,E[q+1][1]=fe.substring(z),q++),q++}q++}}var h=/[^a-zA-Z0-9]/,g=/\s/,x=/[\r\n]/,v=/\n\r?\n$/,y=/^\r?\n\r?\n/;function b(E){function P(z,ie){if(!z||!ie)return 6;var re=z.charAt(z.length-1),de=ie.charAt(0),L=re.match(h),Q=de.match(h),V=L&&re.match(g),Z=Q&&de.match(g),X=V&&re.match(x),R=Z&&de.match(x),G=X&&z.match(v),ee=R&&ie.match(y);return G||ee?5:X||R?4:L&&!V&&Z?3:V||Z?2:L||Q?1:0}for(var D=1;D<E.length-1;){if(E[D-1][0]==n&&E[D+1][0]==n){var O=E[D-1][1],F=E[D][1],q=E[D+1][1],U=m(O,F);if(U){var K=F.substring(F.length-U);O=O.substring(0,O.length-U),F=K+F.substring(0,F.length-U),q=K+q}for(var ne=O,Y=F,fe=q,le=P(O,F)+P(F,q);F.charAt(0)===q.charAt(0);){O+=F.charAt(0),F=F.substring(1)+q.charAt(0),q=q.substring(1);var W=P(O,F)+P(F,q);W>=le&&(le=W,ne=O,Y=F,fe=q)}E[D-1][1]!=ne&&(ne?E[D-1][1]=ne:(E.splice(D-1,1),D--),E[D][1]=Y,fe?E[D+1][1]=fe:(E.splice(D+1,1),D--))}D++}}function j(E,P){E.push([n,""]);for(var D=0,O=0,F=0,q="",U="",K;D<E.length;){if(D<E.length-1&&!E[D][1]){E.splice(D,1);continue}switch(E[D][0]){case e:F++,U+=E[D][1],D++;break;case t:O++,q+=E[D][1],D++;break;case n:var ne=D-F-O-1;if(P){if(ne>=0&&_(E[ne][1])){var Y=E[ne][1].slice(-1);if(E[ne][1]=E[ne][1].slice(0,-1),q=Y+q,U=Y+U,!E[ne][1]){E.splice(ne,1),D--;var fe=ne-1;E[fe]&&E[fe][0]===e&&(F++,U=E[fe][1]+U,fe--),E[fe]&&E[fe][0]===t&&(O++,q=E[fe][1]+q,fe--),ne=fe}}if(N(E[D][1])){var Y=E[D][1].charAt(0);E[D][1]=E[D][1].slice(1),q+=Y,U+=Y}}if(D<E.length-1&&!E[D][1]){E.splice(D,1);break}if(q.length>0||U.length>0){q.length>0&&U.length>0&&(K=c(U,q),K!==0&&(ne>=0?E[ne][1]+=U.substring(0,K):(E.splice(0,0,[n,U.substring(0,K)]),D++),U=U.substring(K),q=q.substring(K)),K=m(U,q),K!==0&&(E[D][1]=U.substring(U.length-K)+E[D][1],U=U.substring(0,U.length-K),q=q.substring(0,q.length-K)));var le=F+O;q.length===0&&U.length===0?(E.splice(D-le,le),D=D-le):q.length===0?(E.splice(D-le,le,[e,U]),D=D-le+1):U.length===0?(E.splice(D-le,le,[t,q]),D=D-le+1):(E.splice(D-le,le,[t,q],[e,U]),D=D-le+2)}D!==0&&E[D-1][0]===n?(E[D-1][1]+=E[D][1],E.splice(D,1)):D++,F=0,O=0,q="",U="";break}}E[E.length-1][1]===""&&E.pop();var W=!1;for(D=1;D<E.length-1;)E[D-1][0]===n&&E[D+1][0]===n&&(E[D][1].substring(E[D][1].length-E[D-1][1].length)===E[D-1][1]?(E[D][1]=E[D-1][1]+E[D][1].substring(0,E[D][1].length-E[D-1][1].length),E[D+1][1]=E[D-1][1]+E[D+1][1],E.splice(D-1,1),W=!0):E[D][1].substring(0,E[D+1][1].length)==E[D+1][1]&&(E[D-1][1]+=E[D+1][1],E[D][1]=E[D][1].substring(E[D+1][1].length)+E[D+1][1],E.splice(D+1,1),W=!0)),D++;W&&j(E,P)}function k(E){return E>=55296&&E<=56319}function S(E){return E>=56320&&E<=57343}function N(E){return S(E.charCodeAt(0))}function _(E){return k(E.charCodeAt(E.length-1))}function w(E){for(var P=[],D=0;D<E.length;D++)E[D][1].length>0&&P.push(E[D]);return P}function T(E,P,D,O){return _(E)||N(O)?null:w([[n,E],[t,P],[e,D],[n,O]])}function A(E,P,D){var O=typeof D=="number"?{index:D,length:0}:D.oldRange,F=typeof D=="number"?null:D.newRange,q=E.length,U=P.length;if(O.length===0&&(F===null||F.length===0)){var K=O.index,ne=E.slice(0,K),Y=E.slice(K),fe=F?F.index:null;e:{var le=K+U-q;if(fe!==null&&fe!==le||le<0||le>U)break e;var W=P.slice(0,le),z=P.slice(le);if(z!==Y)break e;var ie=Math.min(K,le),re=ne.slice(0,ie),de=W.slice(0,ie);if(re!==de)break e;var L=ne.slice(ie),Q=W.slice(ie);return T(re,L,Q,Y)}e:{if(fe!==null&&fe!==K)break e;var V=K,W=P.slice(0,V),z=P.slice(V);if(W!==ne)break e;var Z=Math.min(q-V,U-V),X=Y.slice(Y.length-Z),R=z.slice(z.length-Z);if(X!==R)break e;var L=Y.slice(0,Y.length-Z),Q=z.slice(0,z.length-Z);return T(ne,L,Q,X)}}if(O.length>0&&F&&F.length===0)e:{var re=E.slice(0,O.index),X=E.slice(O.index+O.length),ie=re.length,Z=X.length;if(U<ie+Z)break e;var de=P.slice(0,ie),R=P.slice(U-Z);if(re!==de||X!==R)break e;var L=E.slice(ie,q-Z),Q=P.slice(ie,U-Z);return T(re,L,Q,X)}return null}function M(E,P,D,O){return s(E,P,D,O,!0)}return M.INSERT=e,M.DELETE=t,M.EQUAL=n,dx=M,dx}var zd={exports:{}};zd.exports;var bS;function RM(){return bS||(bS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=9007199254740991,r="[object Arguments]",o="[object Array]",c="[object Boolean]",d="[object Date]",m="[object Error]",u="[object Function]",p="[object GeneratorFunction]",h="[object Map]",g="[object Number]",x="[object Object]",v="[object Promise]",y="[object RegExp]",b="[object Set]",j="[object String]",k="[object Symbol]",S="[object WeakMap]",N="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",M="[object Int16Array]",E="[object Int32Array]",P="[object Uint8Array]",D="[object Uint8ClampedArray]",O="[object Uint16Array]",F="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/\w*$/,K=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,Y={};Y[r]=Y[o]=Y[N]=Y[_]=Y[c]=Y[d]=Y[w]=Y[T]=Y[A]=Y[M]=Y[E]=Y[h]=Y[g]=Y[x]=Y[y]=Y[b]=Y[j]=Y[k]=Y[P]=Y[D]=Y[O]=Y[F]=!0,Y[m]=Y[u]=Y[S]=!1;var fe=typeof zr=="object"&&zr&&zr.Object===Object&&zr,le=typeof self=="object"&&self&&self.Object===Object&&self,W=fe||le||Function("return this")(),z=e&&!e.nodeType&&e,ie=z&&!0&&t&&!t.nodeType&&t,re=ie&&ie.exports===z;function de($,ce){return $.set(ce[0],ce[1]),$}function L($,ce){return $.add(ce),$}function Q($,ce){for(var we=-1,Ve=$?$.length:0;++we<Ve&&ce($[we],we,$)!==!1;);return $}function V($,ce){for(var we=-1,Ve=ce.length,Vt=$.length;++we<Ve;)$[Vt+we]=ce[we];return $}function Z($,ce,we,Ve){for(var Vt=-1,At=$?$.length:0;++Vt<At;)we=ce(we,$[Vt],Vt,$);return we}function X($,ce){for(var we=-1,Ve=Array($);++we<$;)Ve[we]=ce(we);return Ve}function R($,ce){return $?.[ce]}function G($){var ce=!1;if($!=null&&typeof $.toString!="function")try{ce=!!($+"")}catch{}return ce}function ee($){var ce=-1,we=Array($.size);return $.forEach(function(Ve,Vt){we[++ce]=[Vt,Ve]}),we}function ae($,ce){return function(we){return $(ce(we))}}function I($){var ce=-1,we=Array($.size);return $.forEach(function(Ve){we[++ce]=Ve}),we}var H=Array.prototype,B=Function.prototype,te=Object.prototype,oe=W["__core-js_shared__"],ye=(function(){var $=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""})(),me=B.toString,xe=te.hasOwnProperty,Ce=te.toString,he=RegExp("^"+me.call(xe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=re?W.Buffer:void 0,Ke=W.Symbol,Ae=W.Uint8Array,$e=ae(Object.getPrototypeOf,Object),Je=Object.create,et=te.propertyIsEnumerable,Me=H.splice,ge=Object.getOwnPropertySymbols,Ne=_e?_e.isBuffer:void 0,qe=ae(Object.keys,Object),at=Zs(W,"DataView"),Kt=Zs(W,"Map"),Gt=Zs(W,"Promise"),tn=Zs(W,"Set"),Ot=Zs(W,"WeakMap"),Te=Zs(Object,"create"),Fe=Ii(at),J=Ii(Kt),se=Ii(Gt),ke=Ii(tn),Pe=Ii(Ot),Xe=Ke?Ke.prototype:void 0,it=Xe?Xe.valueOf:void 0;function lt($){var ce=-1,we=$?$.length:0;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function dt(){this.__data__=Te?Te(null):{}}function _t($){return this.has($)&&delete this.__data__[$]}function ct($){var ce=this.__data__;if(Te){var we=ce[$];return we===s?void 0:we}return xe.call(ce,$)?ce[$]:void 0}function kt($){var ce=this.__data__;return Te?ce[$]!==void 0:xe.call(ce,$)}function zt($,ce){var we=this.__data__;return we[$]=Te&&ce===void 0?s:ce,this}lt.prototype.clear=dt,lt.prototype.delete=_t,lt.prototype.get=ct,lt.prototype.has=kt,lt.prototype.set=zt;function ve($){var ce=-1,we=$?$.length:0;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function ue(){this.__data__=[]}function Re($){var ce=this.__data__,we=Or(ce,$);if(we<0)return!1;var Ve=ce.length-1;return we==Ve?ce.pop():Me.call(ce,we,1),!0}function Be($){var ce=this.__data__,we=Or(ce,$);return we<0?void 0:ce[we][1]}function Ue($){return Or(this.__data__,$)>-1}function Ye($,ce){var we=this.__data__,Ve=Or(we,$);return Ve<0?we.push([$,ce]):we[Ve][1]=ce,this}ve.prototype.clear=ue,ve.prototype.delete=Re,ve.prototype.get=Be,ve.prototype.has=Ue,ve.prototype.set=Ye;function tt($){var ce=-1,we=$?$.length:0;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function Dt(){this.__data__={hash:new lt,map:new(Kt||ve),string:new lt}}function Jt($){return Sl(this,$).delete($)}function Yn($){return Sl(this,$).get($)}function _s($){return Sl(this,$).has($)}function Wa($,ce){return Sl(this,$).set($,ce),this}tt.prototype.clear=Dt,tt.prototype.delete=Jt,tt.prototype.get=Yn,tt.prototype.has=_s,tt.prototype.set=Wa;function gn($){this.__data__=new ve($)}function Ka(){this.__data__=new ve}function kl($){return this.__data__.delete($)}function zn($){return this.__data__.get($)}function Mr($){return this.__data__.has($)}function jl($,ce){var we=this.__data__;if(we instanceof ve){var Ve=we.__data__;if(!Kt||Ve.length<n-1)return Ve.push([$,ce]),this;we=this.__data__=new tt(Ve)}return we.set($,ce),this}gn.prototype.clear=Ka,gn.prototype.delete=kl,gn.prototype.get=zn,gn.prototype.has=Mr,gn.prototype.set=jl;function Ir($,ce){var we=fd($)||Ho($)?X($.length,String):[],Ve=we.length,Vt=!!Ve;for(var At in $)xe.call($,At)&&!(Vt&&(At=="length"||Rf(At,Ve)))&&we.push(At);return we}function Bo($,ce,we){var Ve=$[ce];(!(xe.call($,ce)&&Cu(Ve,we))||we===void 0&&!(ce in $))&&($[ce]=we)}function Or($,ce){for(var we=$.length;we--;)if(Cu($[we][0],ce))return we;return-1}function Es($,ce){return $&&gd(ce,xd(ce),$)}function Nl($,ce,we,Ve,Vt,At,rn){var nn;if(Ve&&(nn=At?Ve($,Vt,At,rn):Ve($)),nn!==void 0)return nn;if(!va($))return $;var ei=fd($);if(ei){if(nn=Af($),!ce)return _f($,nn)}else{var fn=Ya($),ji=fn==u||fn==p;if(Su($))return qo($,ce);if(fn==x||fn==r||ji&&!At){if(G($))return At?$:{};if(nn=fa(ji?{}:$),!ce)return Ef($,Es(nn,$))}else{if(!Y[fn])return At?$:{};nn=Df($,fn,Nl,ce)}}rn||(rn=new gn);var Yi=rn.get($);if(Yi)return Yi;if(rn.set($,nn),!ei)var li=we?Tf($):xd($);return Q(li||$,function(Ni,gi){li&&(gi=Ni,Ni=$[gi]),Bo(nn,gi,Nl(Ni,ce,we,Ve,gi,$,rn))}),nn}function dd($){return va($)?Je($):{}}function md($,ce,we){var Ve=ce($);return fd($)?Ve:V(Ve,we($))}function ud($){return Ce.call($)}function hd($){if(!va($)||Mf($))return!1;var ce=vd($)||G($)?he:K;return ce.test(Ii($))}function jf($){if(!ju($))return qe($);var ce=[];for(var we in Object($))xe.call($,we)&&we!="constructor"&&ce.push(we);return ce}function qo($,ce){if(ce)return $.slice();var we=new $.constructor($.length);return $.copy(we),we}function pd($){var ce=new $.constructor($.byteLength);return new Ae(ce).set(new Ae($)),ce}function Cl($,ce){var we=ce?pd($.buffer):$.buffer;return new $.constructor(we,$.byteOffset,$.byteLength)}function wu($,ce,we){var Ve=ce?we(ee($),!0):ee($);return Z(Ve,de,new $.constructor)}function ku($){var ce=new $.constructor($.source,U.exec($));return ce.lastIndex=$.lastIndex,ce}function Nf($,ce,we){var Ve=ce?we(I($),!0):I($);return Z(Ve,L,new $.constructor)}function Cf($){return it?Object(it.call($)):{}}function Sf($,ce){var we=ce?pd($.buffer):$.buffer;return new $.constructor(we,$.byteOffset,$.length)}function _f($,ce){var we=-1,Ve=$.length;for(ce||(ce=Array(Ve));++we<Ve;)ce[we]=$[we];return ce}function gd($,ce,we,Ve){we||(we={});for(var Vt=-1,At=ce.length;++Vt<At;){var rn=ce[Vt],nn=void 0;Bo(we,rn,nn===void 0?$[rn]:nn)}return we}function Ef($,ce){return gd($,Ga($),ce)}function Tf($){return md($,xd,Ga)}function Sl($,ce){var we=$.__data__;return Pf(ce)?we[typeof ce=="string"?"string":"hash"]:we.map}function Zs($,ce){var we=R($,ce);return hd(we)?we:void 0}var Ga=ge?ae(ge,Object):Of,Ya=ud;(at&&Ya(new at(new ArrayBuffer(1)))!=_||Kt&&Ya(new Kt)!=h||Gt&&Ya(Gt.resolve())!=v||tn&&Ya(new tn)!=b||Ot&&Ya(new Ot)!=S)&&(Ya=function($){var ce=Ce.call($),we=ce==x?$.constructor:void 0,Ve=we?Ii(we):void 0;if(Ve)switch(Ve){case Fe:return _;case J:return h;case se:return v;case ke:return b;case Pe:return S}return ce});function Af($){var ce=$.length,we=$.constructor(ce);return ce&&typeof $[0]=="string"&&xe.call($,"index")&&(we.index=$.index,we.input=$.input),we}function fa($){return typeof $.constructor=="function"&&!ju($)?dd($e($)):{}}function Df($,ce,we,Ve){var Vt=$.constructor;switch(ce){case N:return pd($);case c:case d:return new Vt(+$);case _:return Cl($,Ve);case w:case T:case A:case M:case E:case P:case D:case O:case F:return Sf($,Ve);case h:return wu($,Ve,we);case g:case j:return new Vt($);case y:return ku($);case b:return Nf($,Ve,we);case k:return Cf($)}}function Rf($,ce){return ce=ce??a,!!ce&&(typeof $=="number"||ne.test($))&&$>-1&&$%1==0&&$<ce}function Pf($){var ce=typeof $;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?$!=="__proto__":$===null}function Mf($){return!!ye&&ye in $}function ju($){var ce=$&&$.constructor,we=typeof ce=="function"&&ce.prototype||te;return $===we}function Ii($){if($!=null){try{return me.call($)}catch{}try{return $+""}catch{}}return""}function Nu($){return Nl($,!0,!0)}function Cu($,ce){return $===ce||$!==$&&ce!==ce}function Ho($){return If($)&&xe.call($,"callee")&&(!et.call($,"callee")||Ce.call($)==r)}var fd=Array.isArray;function zo($){return $!=null&&_u($.length)&&!vd($)}function If($){return Eu($)&&zo($)}var Su=Ne||Lf;function vd($){var ce=va($)?Ce.call($):"";return ce==u||ce==p}function _u($){return typeof $=="number"&&$>-1&&$%1==0&&$<=a}function va($){var ce=typeof $;return!!$&&(ce=="object"||ce=="function")}function Eu($){return!!$&&typeof $=="object"}function xd($){return zo($)?Ir($):jf($)}function Of(){return[]}function Lf(){return!1}t.exports=Nu})(zd,zd.exports)),zd.exports}var Vd={exports:{}};Vd.exports;var wS;function PM(){return wS||(wS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=1,r=2,o=9007199254740991,c="[object Arguments]",d="[object Array]",m="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",h="[object Error]",g="[object Function]",x="[object GeneratorFunction]",v="[object Map]",y="[object Number]",b="[object Null]",j="[object Object]",k="[object Promise]",S="[object Proxy]",N="[object RegExp]",_="[object Set]",w="[object String]",T="[object Symbol]",A="[object Undefined]",M="[object WeakMap]",E="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",O="[object Float64Array]",F="[object Int8Array]",q="[object Int16Array]",U="[object Int32Array]",K="[object Uint8Array]",ne="[object Uint8ClampedArray]",Y="[object Uint16Array]",fe="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,ie={};ie[D]=ie[O]=ie[F]=ie[q]=ie[U]=ie[K]=ie[ne]=ie[Y]=ie[fe]=!0,ie[c]=ie[d]=ie[E]=ie[u]=ie[P]=ie[p]=ie[h]=ie[g]=ie[v]=ie[y]=ie[j]=ie[N]=ie[_]=ie[w]=ie[M]=!1;var re=typeof zr=="object"&&zr&&zr.Object===Object&&zr,de=typeof self=="object"&&self&&self.Object===Object&&self,L=re||de||Function("return this")(),Q=e&&!e.nodeType&&e,V=Q&&!0&&t&&!t.nodeType&&t,Z=V&&V.exports===Q,X=Z&&re.process,R=(function(){try{return X&&X.binding&&X.binding("util")}catch{}})(),G=R&&R.isTypedArray;function ee($,ce){for(var we=-1,Ve=$==null?0:$.length,Vt=0,At=[];++we<Ve;){var rn=$[we];ce(rn,we,$)&&(At[Vt++]=rn)}return At}function ae($,ce){for(var we=-1,Ve=ce.length,Vt=$.length;++we<Ve;)$[Vt+we]=ce[we];return $}function I($,ce){for(var we=-1,Ve=$==null?0:$.length;++we<Ve;)if(ce($[we],we,$))return!0;return!1}function H($,ce){for(var we=-1,Ve=Array($);++we<$;)Ve[we]=ce(we);return Ve}function B($){return function(ce){return $(ce)}}function te($,ce){return $.has(ce)}function oe($,ce){return $?.[ce]}function ye($){var ce=-1,we=Array($.size);return $.forEach(function(Ve,Vt){we[++ce]=[Vt,Ve]}),we}function me($,ce){return function(we){return $(ce(we))}}function xe($){var ce=-1,we=Array($.size);return $.forEach(function(Ve){we[++ce]=Ve}),we}var Ce=Array.prototype,he=Function.prototype,_e=Object.prototype,Ke=L["__core-js_shared__"],Ae=he.toString,$e=_e.hasOwnProperty,Je=(function(){var $=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""})(),et=_e.toString,Me=RegExp("^"+Ae.call($e).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Z?L.Buffer:void 0,Ne=L.Symbol,qe=L.Uint8Array,at=_e.propertyIsEnumerable,Kt=Ce.splice,Gt=Ne?Ne.toStringTag:void 0,tn=Object.getOwnPropertySymbols,Ot=ge?ge.isBuffer:void 0,Te=me(Object.keys,Object),Fe=Ga(L,"DataView"),J=Ga(L,"Map"),se=Ga(L,"Promise"),ke=Ga(L,"Set"),Pe=Ga(L,"WeakMap"),Xe=Ga(Object,"create"),it=Ii(Fe),lt=Ii(J),dt=Ii(se),_t=Ii(ke),ct=Ii(Pe),kt=Ne?Ne.prototype:void 0,zt=kt?kt.valueOf:void 0;function ve($){var ce=-1,we=$==null?0:$.length;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function ue(){this.__data__=Xe?Xe(null):{},this.size=0}function Re($){var ce=this.has($)&&delete this.__data__[$];return this.size-=ce?1:0,ce}function Be($){var ce=this.__data__;if(Xe){var we=ce[$];return we===s?void 0:we}return $e.call(ce,$)?ce[$]:void 0}function Ue($){var ce=this.__data__;return Xe?ce[$]!==void 0:$e.call(ce,$)}function Ye($,ce){var we=this.__data__;return this.size+=this.has($)?0:1,we[$]=Xe&&ce===void 0?s:ce,this}ve.prototype.clear=ue,ve.prototype.delete=Re,ve.prototype.get=Be,ve.prototype.has=Ue,ve.prototype.set=Ye;function tt($){var ce=-1,we=$==null?0:$.length;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function Dt(){this.__data__=[],this.size=0}function Jt($){var ce=this.__data__,we=qo(ce,$);if(we<0)return!1;var Ve=ce.length-1;return we==Ve?ce.pop():Kt.call(ce,we,1),--this.size,!0}function Yn($){var ce=this.__data__,we=qo(ce,$);return we<0?void 0:ce[we][1]}function _s($){return qo(this.__data__,$)>-1}function Wa($,ce){var we=this.__data__,Ve=qo(we,$);return Ve<0?(++this.size,we.push([$,ce])):we[Ve][1]=ce,this}tt.prototype.clear=Dt,tt.prototype.delete=Jt,tt.prototype.get=Yn,tt.prototype.has=_s,tt.prototype.set=Wa;function gn($){var ce=-1,we=$==null?0:$.length;for(this.clear();++ce<we;){var Ve=$[ce];this.set(Ve[0],Ve[1])}}function Ka(){this.size=0,this.__data__={hash:new ve,map:new(J||tt),string:new ve}}function kl($){var ce=Zs(this,$).delete($);return this.size-=ce?1:0,ce}function zn($){return Zs(this,$).get($)}function Mr($){return Zs(this,$).has($)}function jl($,ce){var we=Zs(this,$),Ve=we.size;return we.set($,ce),this.size+=we.size==Ve?0:1,this}gn.prototype.clear=Ka,gn.prototype.delete=kl,gn.prototype.get=zn,gn.prototype.has=Mr,gn.prototype.set=jl;function Ir($){var ce=-1,we=$==null?0:$.length;for(this.__data__=new gn;++ce<we;)this.add($[ce])}function Bo($){return this.__data__.set($,s),this}function Or($){return this.__data__.has($)}Ir.prototype.add=Ir.prototype.push=Bo,Ir.prototype.has=Or;function Es($){var ce=this.__data__=new tt($);this.size=ce.size}function Nl(){this.__data__=new tt,this.size=0}function dd($){var ce=this.__data__,we=ce.delete($);return this.size=ce.size,we}function md($){return this.__data__.get($)}function ud($){return this.__data__.has($)}function hd($,ce){var we=this.__data__;if(we instanceof tt){var Ve=we.__data__;if(!J||Ve.length<n-1)return Ve.push([$,ce]),this.size=++we.size,this;we=this.__data__=new gn(Ve)}return we.set($,ce),this.size=we.size,this}Es.prototype.clear=Nl,Es.prototype.delete=dd,Es.prototype.get=md,Es.prototype.has=ud,Es.prototype.set=hd;function jf($,ce){var we=Ho($),Ve=!we&&Cu($),Vt=!we&&!Ve&&zo($),At=!we&&!Ve&&!Vt&&Eu($),rn=we||Ve||Vt||At,nn=rn?H($.length,String):[],ei=nn.length;for(var fn in $)$e.call($,fn)&&!(rn&&(fn=="length"||Vt&&(fn=="offset"||fn=="parent")||At&&(fn=="buffer"||fn=="byteLength"||fn=="byteOffset")||Df(fn,ei)))&&nn.push(fn);return nn}function qo($,ce){for(var we=$.length;we--;)if(Nu($[we][0],ce))return we;return-1}function pd($,ce,we){var Ve=ce($);return Ho($)?Ve:ae(Ve,we($))}function Cl($){return $==null?$===void 0?A:b:Gt&&Gt in Object($)?Ya($):ju($)}function wu($){return va($)&&Cl($)==c}function ku($,ce,we,Ve,Vt){return $===ce?!0:$==null||ce==null||!va($)&&!va(ce)?$!==$&&ce!==ce:Nf($,ce,we,Ve,ku,Vt)}function Nf($,ce,we,Ve,Vt,At){var rn=Ho($),nn=Ho(ce),ei=rn?d:fa($),fn=nn?d:fa(ce);ei=ei==c?j:ei,fn=fn==c?j:fn;var ji=ei==j,Yi=fn==j,li=ei==fn;if(li&&zo($)){if(!zo(ce))return!1;rn=!0,ji=!1}if(li&&!ji)return At||(At=new Es),rn||Eu($)?gd($,ce,we,Ve,Vt,At):Ef($,ce,ei,we,Ve,Vt,At);if(!(we&a)){var Ni=ji&&$e.call($,"__wrapped__"),gi=Yi&&$e.call(ce,"__wrapped__");if(Ni||gi){var Lr=Ni?$.value():$,Qa=gi?ce.value():ce;return At||(At=new Es),Vt(Lr,Qa,we,Ve,At)}}return li?(At||(At=new Es),Tf($,ce,we,Ve,Vt,At)):!1}function Cf($){if(!_u($)||Pf($))return!1;var ce=Su($)?Me:W;return ce.test(Ii($))}function Sf($){return va($)&&vd($.length)&&!!ie[Cl($)]}function _f($){if(!Mf($))return Te($);var ce=[];for(var we in Object($))$e.call($,we)&&we!="constructor"&&ce.push(we);return ce}function gd($,ce,we,Ve,Vt,At){var rn=we&a,nn=$.length,ei=ce.length;if(nn!=ei&&!(rn&&ei>nn))return!1;var fn=At.get($);if(fn&&At.get(ce))return fn==ce;var ji=-1,Yi=!0,li=we&r?new Ir:void 0;for(At.set($,ce),At.set(ce,$);++ji<nn;){var Ni=$[ji],gi=ce[ji];if(Ve)var Lr=rn?Ve(gi,Ni,ji,ce,$,At):Ve(Ni,gi,ji,$,ce,At);if(Lr!==void 0){if(Lr)continue;Yi=!1;break}if(li){if(!I(ce,function(Qa,_l){if(!te(li,_l)&&(Ni===Qa||Vt(Ni,Qa,we,Ve,At)))return li.push(_l)})){Yi=!1;break}}else if(!(Ni===gi||Vt(Ni,gi,we,Ve,At))){Yi=!1;break}}return At.delete($),At.delete(ce),Yi}function Ef($,ce,we,Ve,Vt,At,rn){switch(we){case P:if($.byteLength!=ce.byteLength||$.byteOffset!=ce.byteOffset)return!1;$=$.buffer,ce=ce.buffer;case E:return!($.byteLength!=ce.byteLength||!At(new qe($),new qe(ce)));case u:case p:case y:return Nu(+$,+ce);case h:return $.name==ce.name&&$.message==ce.message;case N:case w:return $==ce+"";case v:var nn=ye;case _:var ei=Ve&a;if(nn||(nn=xe),$.size!=ce.size&&!ei)return!1;var fn=rn.get($);if(fn)return fn==ce;Ve|=r,rn.set($,ce);var ji=gd(nn($),nn(ce),Ve,Vt,At,rn);return rn.delete($),ji;case T:if(zt)return zt.call($)==zt.call(ce)}return!1}function Tf($,ce,we,Ve,Vt,At){var rn=we&a,nn=Sl($),ei=nn.length,fn=Sl(ce),ji=fn.length;if(ei!=ji&&!rn)return!1;for(var Yi=ei;Yi--;){var li=nn[Yi];if(!(rn?li in ce:$e.call(ce,li)))return!1}var Ni=At.get($);if(Ni&&At.get(ce))return Ni==ce;var gi=!0;At.set($,ce),At.set(ce,$);for(var Lr=rn;++Yi<ei;){li=nn[Yi];var Qa=$[li],_l=ce[li];if(Ve)var oj=rn?Ve(_l,Qa,li,ce,$,At):Ve(Qa,_l,li,$,ce,At);if(!(oj===void 0?Qa===_l||Vt(Qa,_l,we,Ve,At):oj)){gi=!1;break}Lr||(Lr=li=="constructor")}if(gi&&!Lr){var Tu=$.constructor,Au=ce.constructor;Tu!=Au&&"constructor"in $&&"constructor"in ce&&!(typeof Tu=="function"&&Tu instanceof Tu&&typeof Au=="function"&&Au instanceof Au)&&(gi=!1)}return At.delete($),At.delete(ce),gi}function Sl($){return pd($,xd,Af)}function Zs($,ce){var we=$.__data__;return Rf(ce)?we[typeof ce=="string"?"string":"hash"]:we.map}function Ga($,ce){var we=oe($,ce);return Cf(we)?we:void 0}function Ya($){var ce=$e.call($,Gt),we=$[Gt];try{$[Gt]=void 0;var Ve=!0}catch{}var Vt=et.call($);return Ve&&(ce?$[Gt]=we:delete $[Gt]),Vt}var Af=tn?function($){return $==null?[]:($=Object($),ee(tn($),function(ce){return at.call($,ce)}))}:Of,fa=Cl;(Fe&&fa(new Fe(new ArrayBuffer(1)))!=P||J&&fa(new J)!=v||se&&fa(se.resolve())!=k||ke&&fa(new ke)!=_||Pe&&fa(new Pe)!=M)&&(fa=function($){var ce=Cl($),we=ce==j?$.constructor:void 0,Ve=we?Ii(we):"";if(Ve)switch(Ve){case it:return P;case lt:return v;case dt:return k;case _t:return _;case ct:return M}return ce});function Df($,ce){return ce=ce??o,!!ce&&(typeof $=="number"||z.test($))&&$>-1&&$%1==0&&$<ce}function Rf($){var ce=typeof $;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?$!=="__proto__":$===null}function Pf($){return!!Je&&Je in $}function Mf($){var ce=$&&$.constructor,we=typeof ce=="function"&&ce.prototype||_e;return $===we}function ju($){return et.call($)}function Ii($){if($!=null){try{return Ae.call($)}catch{}try{return $+""}catch{}}return""}function Nu($,ce){return $===ce||$!==$&&ce!==ce}var Cu=wu((function(){return arguments})())?wu:function($){return va($)&&$e.call($,"callee")&&!at.call($,"callee")},Ho=Array.isArray;function fd($){return $!=null&&vd($.length)&&!Su($)}var zo=Ot||Lf;function If($,ce){return ku($,ce)}function Su($){if(!_u($))return!1;var ce=Cl($);return ce==g||ce==x||ce==m||ce==S}function vd($){return typeof $=="number"&&$>-1&&$%1==0&&$<=o}function _u($){var ce=typeof $;return $!=null&&(ce=="object"||ce=="function")}function va($){return $!=null&&typeof $=="object"}var Eu=G?B(G):Sf;function xd($){return fd($)?jf($):_f($)}function Of(){return[]}function Lf(){return!1}t.exports=If})(Vd,Vd.exports)),Vd.exports}var wh={},kS;function jde(){if(kS)return wh;kS=1,Object.defineProperty(wh,"__esModule",{value:!0});const t=RM(),e=PM();var n;return(function(s){function a(d={},m={},u=!1){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});let p=t(m);u||(p=Object.keys(p).reduce((h,g)=>(p[g]!=null&&(h[g]=p[g]),h),{}));for(const h in d)d[h]!==void 0&&m[h]===void 0&&(p[h]=d[h]);return Object.keys(p).length>0?p:void 0}s.compose=a;function r(d={},m={}){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});const u=Object.keys(d).concat(Object.keys(m)).reduce((p,h)=>(e(d[h],m[h])||(p[h]=m[h]===void 0?null:m[h]),p),{});return Object.keys(u).length>0?u:void 0}s.diff=r;function o(d={},m={}){d=d||{};const u=Object.keys(m).reduce((p,h)=>(m[h]!==d[h]&&d[h]!==void 0&&(p[h]=m[h]),p),{});return Object.keys(d).reduce((p,h)=>(d[h]!==m[h]&&m[h]===void 0&&(p[h]=null),p),u)}s.invert=o;function c(d,m,u=!1){if(typeof d!="object")return m;if(typeof m!="object")return;if(!u)return m;const p=Object.keys(m).reduce((h,g)=>(d[g]===void 0&&(h[g]=m[g]),h),{});return Object.keys(p).length>0?p:void 0}s.transform=c})(n||(n={})),wh.default=n,wh}var kh={},jS;function MM(){if(jS)return kh;jS=1,Object.defineProperty(kh,"__esModule",{value:!0});var t;return(function(e){function n(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=n})(t||(t={})),kh.default=t,kh}var jh={},NS;function Nde(){if(NS)return jh;NS=1,Object.defineProperty(jh,"__esModule",{value:!0});const t=MM();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const a=this.ops[this.index];if(a){const r=this.offset,o=t.default.length(a);if(s>=o-r?(s=o-r,this.index+=1,this.offset=0):this.offset+=s,typeof a.delete=="number")return{delete:s};{const c={};return a.attributes&&(c.attributes=a.attributes),typeof a.retain=="number"?c.retain=s:typeof a.retain=="object"&&a.retain!==null?c.retain=a.retain:typeof a.insert=="string"?c.insert=a.insert.substr(r,s):c.insert=a.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,a=this.index,r=this.next(),o=this.ops.slice(this.index);return this.offset=s,this.index=a,[r].concat(o)}}else return[]}}return jh.default=e,jh}var CS;function Cde(){return CS||(CS=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=kde(),s=RM(),a=PM(),r=jde();e.AttributeMap=r.default;const o=MM();e.Op=o.default;const c=Nde();e.OpIterator=c.default;const d="\0",m=(p,h)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const g=Object.keys(p)[0];if(!g||g!==Object.keys(h)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(h)[0]}`);return[g,p[g],h[g]]};class u{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,g){this.handlers[h]=g}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const g=this.handlers[h];if(!g)throw new Error(`no handlers for embed type "${h}"`);return g}insert(h,g){const x={};return typeof h=="string"&&h.length===0?this:(x.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,g){if(typeof h=="number"&&h<=0)return this;const x={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x)}push(h){let g=this.ops.length,x=this.ops[g-1];if(h=s(h),typeof x=="object"){if(typeof h.delete=="number"&&typeof x.delete=="number")return this.ops[g-1]={delete:x.delete+h.delete},this;if(typeof x.delete=="number"&&h.insert!=null&&(g-=1,x=this.ops[g-1],typeof x!="object"))return this.ops.unshift(h),this;if(a(h.attributes,x.attributes)){if(typeof h.insert=="string"&&typeof x.insert=="string")return this.ops[g-1]={insert:x.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof x.retain=="number")return this.ops[g-1]={retain:x.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const g=[],x=[];return this.forEach(v=>{(h(v)?g:x).push(v)}),[g,x]}reduce(h,g){return this.ops.reduce(h,g)}changeLength(){return this.reduce((h,g)=>g.insert?h+o.default.length(g):g.delete?h-g.delete:h,0)}length(){return this.reduce((h,g)=>h+o.default.length(g),0)}slice(h=0,g=1/0){const x=[],v=new c.default(this.ops);let y=0;for(;y<g&&v.hasNext();){let b;y<h?b=v.next(h-y):(b=v.next(g-y),x.push(b)),y+=o.default.length(b)}return new u(x)}compose(h){const g=new c.default(this.ops),x=new c.default(h.ops),v=[],y=x.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let j=y.retain;for(;g.peekType()==="insert"&&g.peekLength()<=j;)j-=g.peekLength(),v.push(g.next());y.retain-j>0&&x.next(y.retain-j)}const b=new u(v);for(;g.hasNext()||x.hasNext();)if(x.peekType()==="insert")b.push(x.next());else if(g.peekType()==="delete")b.push(g.next());else{const j=Math.min(g.peekLength(),x.peekLength()),k=g.next(j),S=x.next(j);if(S.retain){const N={};if(typeof k.retain=="number")N.retain=typeof S.retain=="number"?j:S.retain;else if(typeof S.retain=="number")k.retain==null?N.insert=k.insert:N.retain=k.retain;else{const w=k.retain==null?"insert":"retain",[T,A,M]=m(k[w],S.retain),E=u.getHandler(T);N[w]={[T]:E.compose(A,M,w==="retain")}}const _=r.default.compose(k.attributes,S.attributes,typeof k.retain=="number");if(_&&(N.attributes=_),b.push(N),!x.hasNext()&&a(b.ops[b.ops.length-1],N)){const w=new u(g.rest());return b.concat(w).chop()}}else typeof S.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&b.push(S)}return b.chop()}concat(h){const g=new u(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g}diff(h,g){if(this.ops===h.ops)return new u;const x=[this,h].map(k=>k.map(S=>{if(S.insert!=null)return typeof S.insert=="string"?S.insert:d;const N=k===h?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")),v=new u,y=n(x[0],x[1],g,!0),b=new c.default(this.ops),j=new c.default(h.ops);return y.forEach(k=>{let S=k[1].length;for(;S>0;){let N=0;switch(k[0]){case n.INSERT:N=Math.min(j.peekLength(),S),v.push(j.next(N));break;case n.DELETE:N=Math.min(S,b.peekLength()),b.next(N),v.delete(N);break;case n.EQUAL:N=Math.min(b.peekLength(),j.peekLength(),S);const _=b.next(N),w=j.next(N);a(_.insert,w.insert)?v.retain(N,r.default.diff(_.attributes,w.attributes)):v.push(w).delete(N);break}S-=N}}),v.chop()}eachLine(h,g=`
`){const x=new c.default(this.ops);let v=new u,y=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const b=x.peek(),j=o.default.length(b)-x.peekLength(),k=typeof b.insert=="string"?b.insert.indexOf(g,j)-j:-1;if(k<0)v.push(x.next());else if(k>0)v.push(x.next(k));else{if(h(v,x.next(1).attributes||{},y)===!1)return;y+=1,v=new u}}v.length()>0&&h(v,{},y)}invert(h){const g=new u;return this.reduce((x,v)=>{if(v.insert)g.delete(o.default.length(v));else{if(typeof v.retain=="number"&&v.attributes==null)return g.retain(v.retain),x+v.retain;if(v.delete||typeof v.retain=="number"){const y=v.delete||v.retain;return h.slice(x,x+y).forEach(j=>{v.delete?g.push(j):v.retain&&v.attributes&&g.retain(o.default.length(j),r.default.invert(v.attributes,j.attributes))}),x+y}else if(typeof v.retain=="object"&&v.retain!==null){const y=h.slice(x,x+1),b=new c.default(y.ops).next(),[j,k,S]=m(v.retain,b.insert),N=u.getHandler(j);return g.retain({[j]:N.invert(k,S)},r.default.invert(v.attributes,b.attributes)),x+1}}return x},0),g.chop()}transform(h,g=!1){if(g=!!g,typeof h=="number")return this.transformPosition(h,g);const x=h,v=new c.default(this.ops),y=new c.default(x.ops),b=new u;for(;v.hasNext()||y.hasNext();)if(v.peekType()==="insert"&&(g||y.peekType()!=="insert"))b.retain(o.default.length(v.next()));else if(y.peekType()==="insert")b.push(y.next());else{const j=Math.min(v.peekLength(),y.peekLength()),k=v.next(j),S=y.next(j);if(k.delete)continue;if(S.delete)b.push(S);else{const N=k.retain,_=S.retain;let w=typeof _=="object"&&_!==null?_:j;if(typeof N=="object"&&N!==null&&typeof _=="object"&&_!==null){const T=Object.keys(N)[0];if(T===Object.keys(_)[0]){const A=u.getHandler(T);A&&(w={[T]:A.transform(N[T],_[T],g)})}}b.retain(w,r.default.transform(k.attributes,S.attributes,g))}}return b.chop()}transformPosition(h,g=!1){g=!!g;const x=new c.default(this.ops);let v=0;for(;x.hasNext()&&v<=h;){const y=x.peekLength(),b=x.peekType();if(x.next(),b==="delete"){h-=Math.min(y,h-v);continue}else b==="insert"&&(v<h||!g)&&(h+=y);v+=y}return h}}u.Op=o.default,u.OpIterator=c.default,u.AttributeMap=r.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(bh,bh.exports)),bh.exports}var qs=Cde();const jt=ma(qs);class ga extends Ss{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ga.blotName="break";ga.tagName="BR";let da=class extends ug{};const Sde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bf(t){return t.replace(/[&<>"']/g,e=>Sde[e])}class Li extends Yk{static allowedChildren=[Li,ga,Ss,da];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const s=Li.order.indexOf(e),a=Li.order.indexOf(n);return s>=0||a>=0?s-a:e===n?0:e<n?-1:1}formatAt(e,n,s,a){if(Li.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Nt.BLOT)){const r=this.isolate(e,n);a&&r.wrap(s,a)}else super.formatAt(e,n,s,a)}optimize(e){if(super.optimize(e),this.parent instanceof Li&&Li.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const SS=1;class yi extends Lm{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=IM(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,a){n<=0||(this.scroll.query(s,Nt.BLOCK)?e+n===this.length()&&this.format(s,a):super.formatAt(e,Math.min(n,this.length()-e-1),s,a),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const a=n.split(`
`),r=a.shift();r.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let o=this;a.reduce((c,d)=>(o=o.split(c,!0),o.insertAt(0,d),d.length),e+r.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof ga&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+SS),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-SS)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const s=super.split(e,n);return this.cache={},s}}yi.blotName="block";yi.tagName="P";yi.defaultChild=ga;yi.allowedChildren=[ga,Li,Ss,da];class Os extends Ss{attach(){super.attach(),this.attributes=new xf(this.domNode)}delta(){return new jt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,Nt.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,a){this.format(s,a)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const a=n.split(`
`),r=a.pop(),o=a.map(d=>{const m=this.scroll.create(yi.blotName);return m.insertAt(0,d),m}),c=this.split(e);o.forEach(d=>{this.parent.insertBefore(d,c)}),r&&this.parent.insertBefore(this.scroll.create("text",r),c)}}Os.scope=Nt.BLOCK_BLOT;function IM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Ri).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),Ps(s,{},e)),new jt).insert(`
`,Ps(t))}function Ps(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Ps(t.parent,e,n)}class ea extends Ss{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode(ea.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,a=0;for(;s!=null&&s.statics.scope!==Nt.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=ea.CONTENTS.length,s.optimize(),s.formatAt(a,ea.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof da?this.prev:null,s=n?n.length():0,a=this.next instanceof da?this.next:null,r=a?a.text:"",{textNode:o}=this,c=o.data.split(ea.CONTENTS).join("");o.data=ea.CONTENTS;let d;if(n)d=n,(c||a)&&(n.insertAt(n.length(),c+r),a&&a.remove());else if(a)d=a,a.insertAt(0,c);else{const m=document.createTextNode(c);d=this.scroll.create(m),this.parent.insertBefore(d,this)}if(this.remove(),e){const m=(h,g)=>n&&h===n.domNode?g:h===o?s+g-1:a&&h===a.domNode?s+c.length+g:null,u=m(e.start.node,e.start.offset),p=m(e.end.node,e.end.offset);if(u!==null&&p!==null)return{startNode:d.domNode,startOffset:u,endNode:d.domNode,endOffset:p}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=ea.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var mx={exports:{}},_S;function _de(){return _S||(_S=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(d,m,u){this.fn=d,this.context=m,this.once=u||!1}function r(d,m,u,p,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,p||d,h),x=n?n+m:m;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],g]:d._events[x].push(g):(d._events[x]=g,d._eventsCount++),d}function o(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],u,p;if(this._eventsCount===0)return m;for(p in u=this._events)e.call(u,p)&&m.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},c.prototype.listeners=function(m){var u=n?n+m:m,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,g=p.length,x=new Array(g);h<g;h++)x[h]=p[h].fn;return x},c.prototype.listenerCount=function(m){var u=n?n+m:m,p=this._events[u];return p?p.fn?1:p.length:0},c.prototype.emit=function(m,u,p,h,g,x){var v=n?n+m:m;if(!this._events[v])return!1;var y=this._events[v],b=arguments.length,j,k;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,p),!0;case 4:return y.fn.call(y.context,u,p,h),!0;case 5:return y.fn.call(y.context,u,p,h,g),!0;case 6:return y.fn.call(y.context,u,p,h,g,x),!0}for(k=1,j=new Array(b-1);k<b;k++)j[k-1]=arguments[k];y.fn.apply(y.context,j)}else{var S=y.length,N;for(k=0;k<S;k++)switch(y[k].once&&this.removeListener(m,y[k].fn,void 0,!0),b){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,u);break;case 3:y[k].fn.call(y[k].context,u,p);break;case 4:y[k].fn.call(y[k].context,u,p,h);break;default:if(!j)for(N=1,j=new Array(b-1);N<b;N++)j[N-1]=arguments[N];y[k].fn.apply(y[k].context,j)}}return!0},c.prototype.on=function(m,u,p){return r(this,m,u,p,!1)},c.prototype.once=function(m,u,p){return r(this,m,u,p,!0)},c.prototype.removeListener=function(m,u,p,h){var g=n?n+m:m;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!h||x.once)&&(!p||x.context===p)&&o(this,g);else{for(var v=0,y=[],b=x.length;v<b;v++)(x[v].fn!==u||h&&!x[v].once||p&&x[v].context!==p)&&y.push(x[v]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},c.prototype.removeAllListeners=function(m){var u;return m?(u=n?n+m:m,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(mx)),mx.exports}var Ede=_de();const Tde=ma(Ede),nb=new WeakMap,ib=["error","warn","log","info"];let sb="warn";function OM(t){if(sb&&ib.indexOf(t)<=ib.indexOf(sb)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function Pr(t){return ib.reduce((e,n)=>(e[n]=OM.bind(console,n,t),e),{})}Pr.level=t=>{sb=t};OM.level=Pr.level;const ux=Pr("quill:events"),Ade=["selectionchange","mousedown","mouseup","click"];Ade.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const r=nb.get(a);r&&r.emitter&&r.emitter.handleDOM(...n)})})});class wt extends Tde{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",ux.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return ux.log.call(ux,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(r=>{let{node:o,handler:c}=r;(e.target===o||o.contains(e.target))&&c(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}const hx=Pr("quill:selection");class go{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Dde{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new go(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,wt.sources.USER),1)}),this.emitter.on(wt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(wt.events.SCROLL_UPDATE,(a,r)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const o=r.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(o?wt.sources.SILENT:a)}catch{}})}),this.emitter.on(wt.events.SCROLL_OPTIMIZE,(s,a)=>{if(a.range){const{startNode:r,startOffset:o,endNode:c,endOffset:d}=a.range;this.setNativeRange(r,o,c,d),this.update(wt.sources.SILENT)}}),this.update(wt.sources.SILENT)}handleComposition(){this.emitter.on(wt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(wt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(wt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,Nt.BLOCK))){if(s.start.node!==this.cursor.textNode){const a=this.scroll.find(s.start.node,!1);if(a==null)return;if(a instanceof Ri){const r=a.split(s.start.offset);a.parent.insertBefore(this.cursor,r)}else a.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let a,[r,o]=this.scroll.leaf(e);if(r==null)return null;if(n>0&&o===r.length()){const[u]=this.scroll.leaf(e+1);if(u){const[p]=this.scroll.line(e),[h]=this.scroll.line(e+1);p===h&&(r=u,o=0)}}[a,o]=r.position(o,!0);const c=document.createRange();if(n>0)return c.setStart(a,o),[r,o]=this.scroll.leaf(e+n),r==null?null:([a,o]=r.position(o,!0),c.setEnd(a,o),c.getBoundingClientRect());let d="left",m;if(a instanceof Text){if(!a.data.length)return null;o<a.data.length?(c.setStart(a,o),c.setEnd(a,o+1)):(c.setStart(a,o-1),c.setEnd(a,o),d="right"),m=c.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;m=r.domNode.getBoundingClientRect(),o>0&&(d="right")}return{bottom:m.top+m.height,height:m.height,left:m[d],right:m[d],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return hx.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&px(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(o=>{const[c,d]=o,m=this.scroll.find(c,!0),u=m.offset(this.scroll);return d===0?u:m instanceof Ri?u+m.index(c,d):u+m.length()}),a=Math.min(Math.max(...s),this.scroll.length()-1),r=Math.min(a,...s);return new go(r,a-r)}normalizeNative(e){if(!px(this.root,e.startContainer)||!e.collapsed&&!px(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:a,offset:r}=s;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>r)a=a.childNodes[r],r=0;else if(a.childNodes.length===r)a=a.lastChild,a instanceof Text?r=a.data.length:a.childNodes.length>0?r=a.childNodes.length:r=a.childNodes.length+1;else break;s.node=a,s.offset=r}),n}rangeToNative(e){const n=this.scroll.length(),s=(a,r)=>{a=Math.min(n-1,a);const[o,c]=this.scroll.leaf(a);return o?o.position(c,r):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(hx.info("setNativeRange",e,n,s,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||r||e!==c.startContainer||n!==c.startOffset||s!==c.endContainer||a!==c.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(a=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const d=document.createRange();d.setStart(e,n),d.setEnd(s,a),o.removeAllRanges(),o.addRange(d)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;if(typeof n=="string"&&(s=n,n=!1),hx.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const n=this.lastRange,[s,a]=this.getRange();if(this.lastRange=s,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!Hr(n,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const r=[wt.events.SELECTION_CHANGE,kc(this.lastRange),kc(n),e];this.emitter.emit(wt.events.EDITOR_CHANGE,...r),e!==wt.sources.SILENT&&this.emitter.emit(...r)}}}function px(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Rde=/^[ -~]*$/;class Pde{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=ES(e),a=new jt;return Ide(s.ops.slice()).reduce((o,c)=>{const d=qs.Op.length(c);let m=c.attributes||{},u=!1,p=!1;if(c.insert!=null){if(a.retain(d),typeof c.insert=="string"){const x=c.insert;p=!x.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(Os,o)[0]),this.scroll.insertAt(o,x);const[v,y]=this.scroll.line(o);let b=rl({},Ps(v));if(v instanceof yi){const[j]=v.descendant(Ri,y);j&&(b=rl(b,Ps(j)))}m=qs.AttributeMap.diff(b,m)||{}}else if(typeof c.insert=="object"){const x=Object.keys(c.insert)[0];if(x==null)return o;const v=this.scroll.query(x,Nt.INLINE)!=null;if(v)(n<=o||this.scroll.descendant(Os,o)[0])&&(p=!0);else if(o>0){const[y,b]=this.scroll.descendant(Ri,o-1);y instanceof da?y.value()[b]!==`
`&&(u=!0):y instanceof Ss&&y.statics.scope===Nt.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,x,c.insert[x]),v){const[y]=this.scroll.descendant(Ri,o);if(y){const b=rl({},Ps(y));m=qs.AttributeMap.diff(b,m)||{}}}}n+=d}else if(a.push(c),c.retain!==null&&typeof c.retain=="object"){const x=Object.keys(c.retain)[0];if(x==null)return o;this.scroll.updateEmbedAt(o,x,c.retain[x])}Object.keys(m).forEach(x=>{this.scroll.formatAt(o,d,x,m[x])});const h=u?1:0,g=p?1:0;return n+=h+g,a.retain(h),a.delete(g),o+d+h+g},0),a.reduce((o,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(o,c.delete),o):o+qs.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new jt().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(r=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(r,s[r])})}),this.scroll.optimize();const a=new jt().retain(e).retain(n,kc(s));return this.update(a)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(r=>{this.scroll.formatAt(e,n,r,s[r])});const a=new jt().retain(e).retain(n,kc(s));return this.update(a)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new jt)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=[];n===0?this.scroll.path(e).forEach(c=>{const[d]=c;d instanceof yi?s.push(d):d instanceof Ri&&a.push(d)}):(s=this.scroll.lines(e,n),a=this.scroll.descendants(Ri,e,n));const[r,o]=[s,a].map(c=>{const d=c.shift();if(d==null)return{};let m=Ps(d);for(;Object.keys(m).length>0;){const u=c.shift();if(u==null)return m;m=Mde(Ps(u),m)}return m});return{...r,...o}}getHTML(e,n){const[s,a]=this.scroll.line(e);if(s){const r=s.length();return s.length()>=a+n&&!(a===0&&n===r)?Fm(s,a,n,!0):Fm(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=ES(n),a=new jt().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(a)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new jt().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(a=>{this.scroll.formatAt(e,n.length,a,s[a])}),this.update(new jt().retain(e).insert(n,kc(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==yi.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof ga}removeFormat(e,n){const s=this.getText(e,n),[a,r]=this.scroll.line(e+n);let o=0,c=new jt;a!=null&&(o=a.length()-r,c=a.delta().slice(r,r+o-1).insert(`
`));const m=this.getContents(e,n+o).diff(new jt().insert(s).concat(c)),u=new jt().retain(e).concat(m);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(Rde)&&this.scroll.find(n[0].target)){const r=this.scroll.find(n[0].target),o=Ps(r),c=r.offset(this.scroll),d=n[0].oldValue.replace(ea.CONTENTS,""),m=new jt().insert(d),u=new jt().insert(r.value()),p=s&&{oldRange:TS(s.oldRange,-c),newRange:TS(s.newRange,-c)};e=new jt().retain(c).concat(m.diff(u,p)).reduce((g,x)=>x.insert?g.insert(x.insert,o):g.push(x),new jt),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!Hr(a.compose(e),this.delta))&&(e=a.diff(this.delta,s));return e}}function sc(t,e,n){if(t.length===0){const[g]=gx(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${sc([],e-1,n)}`}const[{child:s,offset:a,length:r,indent:o,type:c},...d]=t,[m,u]=gx(c);if(o>e)return n.push(c),o===e+1?`<${m}><li${u}>${Fm(s,a,r)}${sc(d,o,n)}`:`<${m}><li>${sc(t,e+1,n)}`;const p=n[n.length-1];if(o===e&&c===p)return`</li><li${u}>${Fm(s,a,r)}${sc(d,o,n)}`;const[h]=gx(n.pop());return`</li></${h}>${sc(t,e-1,n)}`}function Fm(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof da)return bf(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof ra){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,n,(u,p,h)=>{const g="formats"in u&&typeof u.formats=="function"?u.formats():{};m.push({child:u,offset:p,length:h,indent:g.indent||0,type:g.list})}),sc(m,-1,[])}const a=[];if(t.children.forEachAt(e,n,(m,u,p)=>{a.push(Fm(m,u,p))}),s||t.statics.blotName==="list")return a.join("");const{outerHTML:r,innerHTML:o}=t.domNode,[c,d]=r.split(`>${o}<`);return c==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${d}`:`${c}>${a.join("")}<${d}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Mde(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const a=e[s];return a===t[s]?n[s]=a:Array.isArray(a)?a.indexOf(t[s])<0?n[s]=a.concat([t[s]]):n[s]=a:n[s]=[a,t[s]],n},{})}function gx(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function ES(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new jt)}function TS(t,e){let{index:n,length:s}=t;return new go(n+e,s)}function Ide(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((a,r)=>{r&&e.push({insert:`
`,attributes:n.attributes}),a&&e.push({insert:a,attributes:n.attributes})}):e.push(n)}),e}class Ua{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const Nh="\uFEFF";class Zk extends Ss{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(Nh),this.rightGuard=document.createTextNode(Nh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const a=e.data.split(Nh).join("");if(e===this.leftGuard)if(this.prev instanceof da){const r=this.prev.length();this.prev.insertAt(r,a),n={startNode:this.prev.domNode,startOffset:r+a.length}}else s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof da?(this.next.insertAt(0,a),n={startNode:this.next.domNode,startOffset:a.length}):(s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:a.length}));return e.data=Nh,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const a=this.restore(s.target);a&&(n.range=a)}})}}class Ode{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Zk)&&(this.emitter.emit(wt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(wt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(wt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(wt.events.COMPOSITION_END,e),this.isComposing=!1}}class cd{static DEFAULTS={modules:{}};static themes={default:cd};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const Lde=t=>t.parentElement||t.getRootNode().host||null,Fde=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},Ch=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},AS=(t,e,n,s,a,r)=>t<n&&e>s?0:t<n?-(n-t+a):e>s?e-t>s-n?t+a-n:e-s+r:0,$de=(t,e)=>{const n=t.ownerDocument;let s=e,a=t;for(;a;){const r=a===n.body,o=r?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:Fde(a),c=getComputedStyle(a),d=AS(s.left,s.right,o.left,o.right,Ch(c.scrollPaddingLeft),Ch(c.scrollPaddingRight)),m=AS(s.top,s.bottom,o.top,o.bottom,Ch(c.scrollPaddingTop),Ch(c.scrollPaddingBottom));if(d||m)if(r)n.defaultView?.scrollBy(d,m);else{const{scrollLeft:u,scrollTop:p}=a;m&&(a.scrollTop+=m),d&&(a.scrollLeft+=d);const h=a.scrollLeft-u,g=a.scrollTop-p;s={left:s.left-h,top:s.top-g,right:s.right-h,bottom:s.bottom-g}}a=r||c.position==="fixed"?null:Lde(a)}},Bde=100,qde=["block","break","cursor","inline","scroll","text"],Hde=(t,e,n)=>{const s=new Hc;return qde.forEach(a=>{const r=e.query(a);r&&s.register(r)}),t.forEach(a=>{let r=e.query(a);r||n.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;r;)if(s.register(r),r="blotName"in r?r.requiredContainer??null:null,o+=1,o>Bde){n.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),s},Nc=Pr("quill"),Sh=new Hc;ra.uiClass="ql-ui";class Ge{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Sh,theme:"default"};static events=wt.events;static sources=wt.sources;static version="2.0.3";static imports={delta:jt,parchment:wde,"core/module":Ua,"core/theme":cd};static debug(e){e===!0&&(e="log"),Pr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return nb.get(e)||Sh.find(e,n)}static import(e){return this.imports[e]==null&&Nc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(a=>{this.register(a,e[a],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&Nc.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Sh.register(n),typeof n.register=="function"&&n.register(Sh)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=zde(e,n),this.container=this.options.container,this.container==null){Nc.error("Invalid Quill container",e);return}this.options.debug&&Ge.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",nb.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new wt;const a=Qk.blotName,r=this.options.registry.query(a);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Pde(this.scroll),this.selection=new Dde(this.scroll,this.emitter),this.composition=new Ode(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(wt.events.EDITOR_CHANGE,o=>{o===wt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(wt.events.SCROLL_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;Xs.call(this,()=>this.editor.update(null,c,u),o)}),this.emitter.on(wt.events.SCROLL_EMBED_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;Xs.call(this,()=>{const p=new jt().retain(o.offset(this)).retain({[o.statics.blotName]:c});return this.editor.update(p,[],u)},Ge.sources.USER)}),s){const o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=Ja(e,n,s),Xs.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;return Xs.call(this,()=>{const a=this.getSelection(!0);let r=new jt;if(a==null)return r;if(this.scroll.query(e,Nt.BLOCK))r=this.editor.formatLine(a.index,a.length,{[e]:n});else{if(a.length===0)return this.selection.format(e,n),r;r=this.editor.formatText(a.index,a.length,{[e]:n})}return this.setSelection(a,wt.sources.SILENT),r},s)}formatLine(e,n,s,a,r){let o;return[e,n,o,r]=Ja(e,n,s,a,r),Xs.call(this,()=>this.editor.formatLine(e,n,o),r,e,0)}formatText(e,n,s,a,r){let o;return[e,n,o,r]=Ja(e,n,s,a,r),Xs.call(this,()=>this.editor.formatText(e,n,o),r,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const a=this.container.getBoundingClientRect();return{bottom:s.bottom-a.top,height:s.height,left:s.left-a.left,right:s.right-a.left,top:s.top-a.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Ja(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Ja(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Ja(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ge.sources.API;return Xs.call(this,()=>this.editor.insertEmbed(e,n,s),a,e)}insertText(e,n,s,a,r){let o;return[e,,o,r]=Ja(e,0,s,a,r),Xs.call(this,()=>this.editor.insertText(e,n,o),r,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=Ja(e,n,s),Xs.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){$de(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return Xs.call(this,()=>{e=new jt(e);const s=this.getLength(),a=this.editor.deleteText(0,s),r=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return a.compose(r).compose(o)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||Ge.sources.API):([e,n,,s]=Ja(e,n,s),this.selection.setRange(new go(Math.max(0,e),n),s),s!==wt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;const s=new jt().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return Xs.call(this,()=>(e=new jt(e),this.editor.applyDelta(e)),n,!0)}}function DS(t){return typeof t=="string"?document.querySelector(t):t}function fx(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,a]=n;return{...e,[s]:a===!0?{}:a}},{})}function RS(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function zde(t,e){const n=DS(t);if(!n)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===Ge.DEFAULTS.theme?cd:Ge.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...o}=Ge.DEFAULTS,{modules:c,...d}=a.DEFAULTS;let m=fx(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const u=rl({},fx(r),fx(c),m),p={...o,...RS(d),...RS(e)};let h=e.registry;return h?e.formats&&Nc.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?Hde(e.formats,p.registry,Nc):p.registry,{...p,registry:h,container:n,theme:a,modules:Object.entries(u).reduce((g,x)=>{let[v,y]=x;if(!y)return g;const b=Ge.import(`modules/${v}`);return b==null?(Nc.error(`Cannot load ${v} module. Are you sure you registered it?`),g):{...g,[v]:rl({},b.DEFAULTS||{},y)}},{}),bounds:DS(p.bounds)}}function Xs(t,e,n,s){if(!this.isEnabled()&&e===wt.sources.USER&&!this.allowReadOnlyEdits)return new jt;let a=n==null?null:this.getSelection();const r=this.editor.delta,o=t();if(a!=null&&(n===!0&&(n=a.index),s==null?a=PS(a,o,e):s!==0&&(a=PS(a,n,s,e)),this.setSelection(a,wt.sources.SILENT)),o.length()>0){const c=[wt.events.TEXT_CHANGE,o,r,e];this.emitter.emit(wt.events.EDITOR_CHANGE,...c),e!==wt.sources.SILENT&&this.emitter.emit(...c)}return o}function Ja(t,e,n,s,a){let r={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(a=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(a=s,s=n,n=e,e=0),typeof n=="object"?(r=n,a=s):typeof n=="string"&&(s!=null?r[n]=s:a=n),a=a||wt.sources.API,[t,e,r,a]}function PS(t,e,n,s){const a=typeof n=="number"?n:0;if(t==null)return null;let r,o;return e&&typeof e.transformPosition=="function"?[r,o]=[t.index,t.index+t.length].map(c=>e.transformPosition(c,s!==wt.sources.USER)):[r,o]=[t.index,t.index+t.length].map(c=>c<e||c===e&&s===wt.sources.USER?c:a>=0?c+a:Math.max(e,c+a)),new go(r,o-r)}class Oo extends yf{}function MS(t){return t instanceof yi||t instanceof Os}function IS(t){return typeof t.updateContent=="function"}class Vde extends Qk{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=yi;static allowedChildren=[yi,Os,Oo];constructor(e,n,s){let{emitter:a}=s;super(e,n),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",r=>this.handleDragStart(r))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(wt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(wt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(wt.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,a]=this.line(e),[r]=this.line(e+n);if(super.deleteAt(e,n),r!=null&&s!==r&&a>0){if(s instanceof Os||r instanceof Os){this.optimize();return}const o=r.children.head instanceof ga?null:r.children.head;s.moveChildren(r,o),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,Nt.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),s==null&&n.endsWith(`
`)?a.insertAt(0,n.slice(0,-1),s):a.insertAt(0,n,s)}else{const a=this.scroll.create(n,s);this.appendChild(a)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===Nt.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new jt().insert(`
`))),a=s.pop();if(a==null)return;this.batchStart();const r=s.shift();if(r){const d=r.type==="block"&&(r.delta.length()===0||!this.descendant(Os,e)[0]&&e<this.length()),m=r.type==="block"?r.delta:new jt().insert({[r.key]:r.value});vx(this,e,m);const u=r.type==="block"?1:0,p=e+m.length()+u;d&&this.insertAt(p-1,`
`);const h=Ps(this.line(e)[0]),g=qs.AttributeMap.diff(h,r.attributes)||{};Object.keys(g).forEach(x=>{this.formatAt(p-1,1,x,g[x])}),e=p}let[o,c]=this.children.find(e);if(s.length&&(o&&(o=o.split(c),c=0),s.forEach(d=>{if(d.type==="block"){const m=this.createBlock(d.attributes,o||void 0);vx(m,0,d.delta)}else{const m=this.create(d.key,d.value);this.insertBefore(m,o||void 0),Object.keys(d.attributes).forEach(u=>{m.format(u,d.attributes[u])})}})),a.type==="block"&&a.delta.length()){const d=o?o.offset(o.scroll)+c:this.length();vx(this,d,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,a]=n;return s instanceof Ri?[s,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(MS,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(a,r,o)=>{let c=[],d=o;return a.children.forEachAt(r,o,(m,u,p)=>{MS(m)?c.push(m):m instanceof yf&&(c=c.concat(s(m,u,d))),d-=p}),c};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(wt.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=wt.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:a}=s;const r=this.find(a,!0);return r&&!IS(r)}),e.length>0&&this.emitter.emit(wt.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(wt.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[a]=this.descendant(r=>r instanceof Os,e);a&&a.statics.blotName===n&&IS(a)&&a.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new jt;return e.forEach(a=>{const r=a?.insert;if(r)if(typeof r=="string"){const o=r.split(`
`);o.slice(0,-1).forEach(d=>{s.insert(d,a.attributes),n.push({type:"block",delta:s,attributes:a.attributes??{}}),s=new jt});const c=o[o.length-1];c&&s.insert(c,a.attributes)}else{const o=Object.keys(r)[0];if(!o)return;this.query(o,Nt.INLINE)?s.push(a):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new jt,n.push({type:"blockEmbed",key:o,value:r[o],attributes:a.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const a={};Object.entries(e).forEach(c=>{let[d,m]=c;this.query(d,Nt.BLOCK&Nt.BLOT)!=null?s=d:a[d]=m});const r=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(r,n||void 0);const o=r.length();return Object.entries(a).forEach(c=>{let[d,m]=c;r.formatAt(0,o,d,m)}),r}}function vx(t,e,n){n.reduce((s,a)=>{const r=qs.Op.length(a);let o=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const c=a.insert;t.insertAt(s,c);const[d]=t.descendant(Ri,s),m=Ps(d);o=qs.AttributeMap.diff(m,o)||{}}else if(typeof a.insert=="object"){const c=Object.keys(a.insert)[0];if(c==null)return s;if(t.insertAt(s,c,a.insert[c]),t.scroll.query(c,Nt.INLINE)!=null){const[m]=t.descendant(Ri,s),u=Ps(m);o=qs.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(c=>{t.formatAt(s,r,c,o[c])}),s+r},e)}const Xk={scope:Nt.BLOCK,whitelist:["right","center","justify"]},Ude=new Fa("align","align",Xk),LM=new pa("align","ql-align",Xk),FM=new wl("align","text-align",Xk);class $M extends wl{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):n}}const Wde=new pa("color","ql-color",{scope:Nt.INLINE}),Jk=new $M("color","color",{scope:Nt.INLINE}),Kde=new pa("background","ql-bg",{scope:Nt.INLINE}),ej=new $M("background","background-color",{scope:Nt.INLINE});class Lo extends Oo{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${bf(this.code(e,n))}
</pre>`}}class Hi extends yi{static TAB="  ";static register(){Ge.register(Lo)}}class tj extends Li{}tj.blotName="code";tj.tagName="CODE";Hi.blotName="code-block";Hi.className="ql-code-block";Hi.tagName="DIV";Lo.blotName="code-block-container";Lo.className="ql-code-block-container";Lo.tagName="DIV";Lo.allowedChildren=[Hi];Hi.allowedChildren=[da,ga,ea];Hi.requiredContainer=Lo;const nj={scope:Nt.BLOCK,whitelist:["rtl"]},BM=new Fa("direction","dir",nj),qM=new pa("direction","ql-direction",nj),HM=new wl("direction","direction",nj),zM={scope:Nt.INLINE,whitelist:["serif","monospace"]},VM=new pa("font","ql-font",zM);class Gde extends wl{value(e){return super.value(e).replace(/["']/g,"")}}const UM=new Gde("font","font-family",zM),WM=new pa("size","ql-size",{scope:Nt.INLINE,whitelist:["small","large","huge"]}),KM=new wl("size","font-size",{scope:Nt.INLINE,whitelist:["10px","18px","32px"]}),Yde=Pr("quill:keyboard"),Qde=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class wf extends Ua{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Xde(e);if(a==null){Yde.warn("Attempted to add invalid keyboard binding",a);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(a.key)?a.key:[a.key]).forEach(o=>{const c={...a,key:o,...n,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>wf.match(e,b));if(a.length===0)return;const r=Ge.find(e.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[c,d]=this.quill.getLine(o.index),[m,u]=this.quill.getLeaf(o.index),[p,h]=o.length===0?[m,u]:this.quill.getLeaf(o.index+o.length),g=m instanceof ug?m.value().slice(0,u):"",x=p instanceof ug?p.value().slice(h):"",v={collapsed:o.length===0,empty:o.length===0&&c.length()<=1,format:this.quill.getFormat(o),line:c,offset:d,prefix:g,suffix:x,event:e};a.some(b=>{if(b.collapsed!=null&&b.collapsed!==v.collapsed||b.empty!=null&&b.empty!==v.empty||b.offset!=null&&b.offset!==v.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(j=>v.format[j]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(j=>b.format[j]===!0?v.format[j]!=null:b.format[j]===!1?v.format[j]==null:Hr(b.format[j],v.format[j])))return!1;return b.prefix!=null&&!b.prefix.test(v.prefix)||b.suffix!=null&&!b.suffix.test(v.suffix)?!1:b.handler.call(this,o,v,b)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[r]=this.quill.getLine(e.index);let o=new jt().retain(e.index-s).delete(s);if(n.offset===0){const[c]=this.quill.getLine(e.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const m=r.formats(),u=this.quill.getFormat(e.index-1,1);if(a=qs.AttributeMap.diff(m,u)||{},Object.keys(a).length>0){const p=new jt().retain(e.index+r.length()-2).retain(1,a);o=o.compose(p)}}}this.quill.updateContents(o,Ge.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let a={};const[r]=this.quill.getLine(e.index);let o=new jt().retain(e.index).delete(s);if(n.offset>=r.length()-1){const[c]=this.quill.getLine(e.index+1);if(c){const d=r.formats(),m=this.quill.getFormat(e.index,1);a=qs.AttributeMap.diff(d,m)||{},Object.keys(a).length>0&&(o=o.retain(c.length()-1).retain(1,a))}}this.quill.updateContents(o,Ge.sources.USER),this.quill.focus()}handleDeleteRange(e){ij({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((r,o)=>(this.quill.scroll.query(o,Nt.BLOCK)&&!Array.isArray(n.format[o])&&(r[o]=n.format[o]),r),{}),a=new jt().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(e.index+1,Ge.sources.SILENT),this.quill.focus()}}const Zde={bindings:{bold:xx("bold"),italic:xx("italic"),underline:xx("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Ge.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Ge.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Ge.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Ge.sources.USER)}},"indent code-block":OS(!0),"outdent code-block":OS(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Ge.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new jt().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,Ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Ge.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Ge.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Ge.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},a=new jt().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(t.index+1,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),a=new jt().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(t.index+1,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,a,r]=e.getTable(t),o=Jde(n,s,a,r);if(o==null)return;let c=n.offset();if(o<0){const d=new jt().retain(c).insert(`
`);this.quill.updateContents(d,Ge.sources.USER),this.quill.setSelection(t.index+1,t.length,Ge.sources.SILENT)}else if(o>0){c+=n.length();const d=new jt().retain(c).insert(`
`);this.quill.updateContents(d,Ge.sources.USER),this.quill.setSelection(c,Ge.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,a=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(a-1,Ge.sources.USER):this.quill.setSelection(a+s.length(),Ge.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,a]=this.quill.getLine(t.index);if(a>n)return!0;let r;switch(e.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}this.quill.insertText(t.index," ",Ge.sources.USER),this.quill.history.cutoff();const o=new jt().retain(t.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:r});return this.quill.updateContents(o,Ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Ge.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,s-=1,s<=0){const r=new jt().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,Ge.sources.USER),this.quill.setSelection(t.index-1,Ge.sources.SILENT),!1}return!0}},"embed left":_h("ArrowLeft",!1),"embed left shift":_h("ArrowLeft",!0),"embed right":_h("ArrowRight",!1),"embed right shift":_h("ArrowRight",!0),"table down":LS(!1),"table up":LS(!0)}};wf.DEFAULTS=Zde;function OS(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const a=this.quill.scroll.query("code-block"),{TAB:r}=a;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,r,Ge.sources.USER),this.quill.setSelection(e.index+r.length,Ge.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:d}=e;o.forEach((m,u)=>{t?(m.insertAt(0,r),u===0?c+=r.length:d+=r.length):m.domNode.textContent.startsWith(r)&&(m.deleteAt(0,r.length),u===0?c-=r.length:d-=r.length)}),this.quill.update(Ge.sources.USER),this.quill.setSelection(c,d,Ge.sources.SILENT)}}}function _h(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:a}=s;t==="ArrowRight"&&(a+=s.length+1);const[r]=this.quill.getLeaf(a);return r instanceof Ss?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,Ge.sources.USER):this.quill.setSelection(s.index-1,Ge.sources.USER):e?this.quill.setSelection(s.index,s.length+1,Ge.sources.USER):this.quill.setSelection(s.index+s.length+1,Ge.sources.USER),!1):!0}}}function xx(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Ge.sources.USER)}}}function LS(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",a=n.line,r=a.parent[s];if(r!=null){if(r.statics.blotName==="table-row"){let o=r.children.head,c=a;for(;c.prev!=null;)c=c.prev,o=o.next;const d=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(d,0,Ge.sources.USER)}}else{const o=a.table()[s];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Ge.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Ge.sources.USER))}return!1}}}function Xde(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=kc(t);else return null;return t.shortKey&&(t[Qde]=t.shortKey,delete t.shortKey),t}function ij(t){let{quill:e,range:n}=t;const s=e.getLines(n);let a={};if(s.length>1){const r=s[0].formats(),o=s[s.length-1].formats();a=qs.AttributeMap.diff(o,r)||{}}e.deleteText(n,Ge.sources.USER),Object.keys(a).length>0&&e.formatLine(n.index,1,a,Ge.sources.USER),e.setSelection(n.index,Ge.sources.SILENT)}function Jde(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const eme=/font-weight:\s*normal/,tme=["P","OL","UL"],FS=t=>t&&tme.includes(t.tagName),nme=t=>{Array.from(t.querySelectorAll("br")).filter(e=>FS(e.previousElementSibling)&&FS(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},ime=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(eme)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function sme(t){t.querySelector('[id^="docs-internal-guid-"]')&&(ime(t),nme(t))}const ame=/\bmso-list:[^;]*ignore/i,rme=/\bmso-list:[^;]*\bl(\d+)/i,lme=/\bmso-list:[^;]*\blevel(\d+)/i,ome=(t,e)=>{const n=t.getAttribute("style"),s=n?.match(rme);if(!s)return null;const a=Number(s[1]),r=n?.match(lme),o=r?Number(r[1]):1,c=new RegExp(`@list l${a}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),d=e.match(c),m=d&&d[1]==="bullet"?"bullet":"ordered";return{id:a,indent:o,type:m,element:t}},cme=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(o=>{(o.getAttribute("style")||"").match(ame)?n.push(o):s.push(o)}),n.forEach(o=>o.parentNode?.removeChild(o));const a=t.documentElement.innerHTML,r=s.map(o=>ome(o,a)).filter(o=>o);for(;r.length;){const o=[];let c=r.shift();for(;c;)o.push(c),c=r.length&&r[0]?.element===c.element.nextElementSibling&&r[0].id===c.id?r.shift():null;const d=document.createElement("ul");o.forEach(p=>{const h=document.createElement("li");h.setAttribute("data-list",p.type),p.indent>1&&h.setAttribute("class",`ql-indent-${p.indent-1}`),h.innerHTML=p.element.innerHTML,d.appendChild(h)});const m=o[0]?.element,{parentNode:u}=m??{};m&&u?.replaceChild(d,m),o.slice(1).forEach(p=>{let{element:h}=p;u?.removeChild(h)})}};function dme(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&cme(t)}const mme=[dme,sme],ume=t=>{t.documentElement&&mme.forEach(e=>{e(t)})},hme=Pr("quill:clipboard"),pme=[[Node.TEXT_NODE,_me],[Node.TEXT_NODE,BS],["br",bme],[Node.ELEMENT_NODE,BS],[Node.ELEMENT_NODE,yme],[Node.ELEMENT_NODE,xme],[Node.ELEMENT_NODE,Cme],["li",jme],["ol, ul",Nme],["pre",wme],["tr",Sme],["b",yx("bold")],["i",yx("italic")],["strike",yx("strike")],["style",kme]],gme=[Ude,BM].reduce((t,e)=>(t[e.keyName]=e,t),{}),$S=[FM,ej,Jk,HM,UM,KM].reduce((t,e)=>(t[e.keyName]=e,t),{});class fme extends Ua{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],pme.concat(this.options.matchers??[]).forEach(s=>{let[a,r]=s;this.addMatcher(a,r)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Hi.blotName])return new jt().insert(s||"",{[Hi.blotName]:a[Hi.blotName]});if(!n)return new jt().insert(s||"",a);const r=this.convertHTML(n);return fu(r,`
`)&&(r.ops[r.ops.length-1].attributes==null||a.table)?r.compose(new jt().retain(r.length()-1).delete(1)):r}normalizeHTML(e){ume(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,a=new WeakMap,[r,o]=this.prepareMatching(s,a);return sj(this.quill.scroll,s,r,o,a)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ge.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,n),this.quill.setSelection(0,Ge.sources.SILENT)}else{const a=this.convert({html:n,text:""});this.quill.updateContents(new jt().retain(e).concat(a),s),this.quill.setSelection(e+a.length(),Ge.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:a,text:r}=this.onCopy(s,n);e.clipboardData?.setData("text/plain",r),e.clipboardData?.setData("text/html",a),n&&ij({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!s&&!a){const o=e.clipboardData?.getData("text/uri-list");o&&(a=this.normalizeURIList(o))}const r=Array.from(e.clipboardData?.files||[]);if(!s&&r.length>0){this.quill.uploader.upload(n,r);return}if(s&&r.length>0){const o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,r);return}}this.onPaste(n,{html:s,text:a})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:a}=n;const r=this.quill.getFormat(e.index),o=this.convert({text:s,html:a},r);hme.log("onPaste",o,{text:s,html:a});const c=new jt().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(c,Ge.sources.USER),this.quill.setSelection(c.length()-e.length,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],a=[];return this.matchers.forEach(r=>{const[o,c]=r;switch(o){case Node.TEXT_NODE:a.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(e.querySelectorAll(o)).forEach(d=>{n.has(d)?n.get(d)?.push(c):n.set(d,[c])});break}}),[s,a]}}function Fo(t,e,n,s){return s.query(e)?t.reduce((a,r)=>{if(!r.insert)return a;if(r.attributes&&r.attributes[e])return a.push(r);const o=n?{[e]:n}:{};return a.insert(r.insert,{...o,...r.attributes})},new jt):t}function fu(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const a=t.ops[s];if(typeof a.insert!="string")break;n=a.insert+n}return n.slice(-1*e.length)===e}function tl(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ss?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function vme(t,e){return t.previousElementSibling&&t.nextElementSibling&&!tl(t.previousElementSibling,e)&&!tl(t.nextElementSibling,e)}const Eh=new WeakMap;function GM(t){return t==null?!1:(Eh.has(t)||(t.tagName==="PRE"?Eh.set(t,!0):Eh.set(t,GM(t.parentNode))),Eh.get(t))}function sj(t,e,n,s,a){return e.nodeType===e.TEXT_NODE?s.reduce((r,o)=>o(e,r,t),new jt):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((r,o)=>{let c=sj(t,o,n,s,a);return o.nodeType===e.ELEMENT_NODE&&(c=n.reduce((d,m)=>m(o,d,t),c),c=(a.get(o)||[]).reduce((d,m)=>m(o,d,t),c)),r.concat(c)},new jt):new jt}function yx(t){return(e,n,s)=>Fo(n,t,!0,s)}function xme(t,e,n){const s=Fa.keys(t),a=pa.keys(t),r=wl.keys(t),o={};return s.concat(a).concat(r).forEach(c=>{let d=n.query(c,Nt.ATTRIBUTE);d!=null&&(o[d.attrName]=d.value(t),o[d.attrName])||(d=gme[c],d!=null&&(d.attrName===c||d.keyName===c)&&(o[d.attrName]=d.value(t)||void 0),d=$S[c],d!=null&&(d.attrName===c||d.keyName===c)&&(d=$S[c],o[d.attrName]=d.value(t)||void 0))}),Object.entries(o).reduce((c,d)=>{let[m,u]=d;return Fo(c,m,u,n)},e)}function yme(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Ss){const a={},r=s.value(t);if(r!=null)return a[s.blotName]=r,new jt().insert(a,s.formats(t,n))}else if(s.prototype instanceof Lm&&!fu(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Fo(e,s.blotName,s.formats(t,n),n);return e}function bme(t,e){return fu(e,`
`)||e.insert(`
`),e}function wme(t,e,n){const s=n.query("code-block"),a=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return Fo(e,"code-block",a,n)}function kme(){return new jt}function jme(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!fu(e,`
`))return e;let a=-1,r=t.parentNode;for(;r!=null;)["OL","UL"].includes(r.tagName)&&(a+=1),r=r.parentNode;return a<=0?e:e.reduce((o,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?o.push(c):o.insert(c.insert,{indent:a,...c.attributes||{}}):o,new jt)}function Nme(t,e,n){const s=t;let a=s.tagName==="OL"?"ordered":"bullet";const r=s.getAttribute("data-checked");return r&&(a=r==="true"?"checked":"unchecked"),Fo(e,"list",a,n)}function BS(t,e,n){if(!fu(e,`
`)){if(tl(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(tl(s,n))return e.insert(`
`);const a=n.query(s);if(a&&a.prototype instanceof Os)return e.insert(`
`);s=s.firstChild}}}return e}function Cme(t,e,n){const s={},a=t.style||{};return a.fontStyle==="italic"&&(s.italic=!0),a.textDecoration==="underline"&&(s.underline=!0),a.textDecoration==="line-through"&&(s.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((r,o)=>{let[c,d]=o;return Fo(r,c,d,n)},e),parseFloat(a.textIndent||0)>0?new jt().insert("	").concat(e):e}function Sme(t,e,n){const s=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(s!=null){const r=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return Fo(e,"table",r,n)}return e}function _me(t,e,n){let s=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!GM(t)){if(s.trim().length===0&&s.includes(`
`)&&!vme(t,n))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&tl(t.parentElement,n)||t.previousSibling instanceof Element&&tl(t.previousSibling,n))&&(s=s.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&tl(t.parentElement,n)||t.nextSibling instanceof Element&&tl(t.nextSibling,n))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class Eme extends Ua{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(Ge.events.EDITOR_CHANGE,(s,a,r,o)=>{s===Ge.events.SELECTION_CHANGE?a&&o!==Ge.sources.SILENT&&(this.currentRange=a):s===Ge.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===Ge.sources.USER?this.record(a,r):this.transform(a)),this.currentRange=ab(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const a=this.quill.getContents(),r=s.delta.invert(a);this.stack[n].push({delta:r,range:ab(s.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,Ge.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),a=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),a=o.range)}else this.lastRecorded=r;s.length()!==0&&(this.stack.undo.push({delta:s,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){qS(this.stack.undo,e),qS(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Ge.sources.USER);else{const n=Ame(this.quill.scroll,e.delta);this.quill.setSelection(n,Ge.sources.USER)}}}function qS(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const a=t[s];t[s]={delta:n.transform(a.delta,!0),range:a.range&&ab(a.range,n)},n=a.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function Tme(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,Nt.BLOCK)!=null):!1}function Ame(t,e){const n=e.reduce((a,r)=>a+(r.delete||0),0);let s=e.length()-n;return Tme(t,e)&&(s-=1),s}function ab(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class YM extends Ua{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{s.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);a=document.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)}const r=a&&e.selection.normalizeNative(a);if(r){const o=e.selection.normalizedToRange(r);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&s.push(a)}),s.length>0&&this.options.handler.call(this,e,s)}}YM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(a=>{const r=new FileReader;r.onload=()=>{a(r.result)},r.readAsDataURL(s)}));Promise.all(n).then(s=>{const a=s.reduce((r,o)=>r.insert({image:o}),new jt().retain(t.index).delete(t.length));this.quill.updateContents(a,wt.sources.USER),this.quill.setSelection(t.index+s.length,wt.sources.SILENT)})}};const Dme=["insertText","insertReplacementText"];class Rme extends Ua{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(Ge.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ij({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new jt().retain(e.index).insert(n,s),Ge.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,Ge.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Dme.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=Pme(e);if(s==null)return;const a=this.quill.selection.normalizeNative(n),r=a?this.quill.selection.normalizedToRange(a):null;r&&this.replaceText(r,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Pme(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Mme=/Mac/i.test(navigator.platform),Ime=100,Ome=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Mme&&t.key==="a"&&t.ctrlKey===!0);class Lme extends Ua{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:a}=n;if(!(s instanceof ra)||!s.uiNode)return!0;const r=getComputedStyle(s.domNode).direction==="rtl";return r&&a.key!=="ArrowRight"||!r&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),Ge.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&Ome(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Ime,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof ra)||!s.uiNode)return;const a=document.createRange();a.setStartAfter(s.uiNode),a.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(a)}}Ge.register({"blots/block":yi,"blots/block/embed":Os,"blots/break":ga,"blots/container":Oo,"blots/cursor":ea,"blots/embed":Zk,"blots/inline":Li,"blots/scroll":Vde,"blots/text":da,"modules/clipboard":fme,"modules/history":Eme,"modules/keyboard":wf,"modules/uploader":YM,"modules/input":Rme,"modules/uiNode":Lme});class Fme extends pa{add(e,n){let s=0;if(n==="+1"||n==="-1"){const a=this.value(e)||0;s=n==="+1"?a+1:a-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const $me=new Fme("indent","ql-indent",{scope:Nt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Bme extends yi{static blotName="blockquote";static tagName="blockquote"}class qme extends yi{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class vu extends Oo{}vu.blotName="list-container";vu.tagName="OL";class xu extends yi{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Ge.register(vu)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),a=r=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),r.preventDefault()):o==="unchecked"&&(this.format("list","checked"),r.preventDefault())};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}xu.blotName="list";xu.tagName="LI";vu.allowedChildren=[xu];xu.requiredContainer=vu;class aj extends Li{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Hme extends aj{static blotName="italic";static tagName=["EM","I"]}class hg extends Li{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return QM(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function QM(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class zme extends Li{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class Vme extends aj{static blotName="strike";static tagName=["S","STRIKE"]}class Ume extends Li{static blotName="underline";static tagName="U"}class Wme extends Zk{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const HS=["alt","height","width"];let Kme=class extends Ss{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return HS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return QM(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){HS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const zS=["height","width"];class Gme extends Os{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return zS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return hg.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){zS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Ud=new pa("code-token","hljs",{scope:Nt.INLINE});class Sr extends Li{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Hi.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Ud.add(this.domNode,s)}format(e,n){e!==Sr.blotName?super.format(e,n):n?Ud.add(this.domNode,n):(Ud.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ud.value(this.domNode)||this.unwrap()}}Sr.blotName="code-token";Sr.className="ql-token";class Ms extends Hi{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Sr.blotName,!1),super.replaceWith(e,n)}}class mm extends Lo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Ms.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,a){s===Ms.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,a)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,r=Ms.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const o=this.children.reduce((d,m)=>d.concat(IM(m,!1)),new jt),c=e(a,r);o.diff(c).reduce((d,m)=>{let{retain:u,attributes:p}=m;return u?(p&&Object.keys(p).forEach(h=>{[Ms.blotName,Sr.blotName].includes(h)&&this.formatAt(d,u,h,p[h])}),d+u):d},0)}this.cachedText=a,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?Ms.formats(s.domNode):"plain"}">
${bf(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Ms.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}mm.allowedChildren=[Ms];Ms.requiredContainer=mm;Ms.allowedChildren=[Sr,ea,da,ga];const Yme=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class ZM extends Ua{static register(){Ge.register(Sr,!0),Ge.register(Ms,!0),Ge.register(mm,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,a)=>{let{key:r}=a;return s[r]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Ge.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof mm))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:a,label:r}=s;const o=n.ownerDocument.createElement("option");o.textContent=r,o.setAttribute("value",a),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(Ms.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Ms.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Ge.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Ge.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(mm):[e]).forEach(r=>{r.highlight(this.highlightBlot,n)}),this.quill.update(Ge.sources.SILENT),s!=null&&this.quill.setSelection(s,Ge.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return bf(e).split(`
`).reduce((a,r,o)=>(o!==0&&a.insert(`
`,{[Hi.blotName]:n}),a.insert(r)),new jt);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Hi.className),s.innerHTML=Yme(this.options.hljs,n,e),sj(this.quill.scroll,s,[(a,r)=>{const o=Ud.value(a);return o?r.compose(new jt().retain(r.length(),{[Sr.blotName]:o})):r}],[(a,r)=>a.data.split(`
`).reduce((o,c,d)=>(d!==0&&o.insert(`
`,{[Hi.blotName]:n}),o.insert(c)),r)],new WeakMap)}}ZM.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class na extends yi{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",rj()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===na.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class fo extends Oo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),a=n.next.formats();if(s.table!==a.table){const r=this.splitAfter(n);r&&r.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class ll extends Oo{static blotName="table-body";static tagName="TBODY"}class pg extends Oo{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(fo),n=e.reduce((s,a)=>Math.max(a.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let a;s.children.head!=null&&(a=na.formats(s.children.head.domNode));const r=this.scroll.create(na.blotName,a);s.appendChild(r),r.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(ll);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e);a?.remove()})}insertColumn(e){const[n]=this.descendant(ll);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e),r=na.formats(s.children.head.domNode),o=this.scroll.create(na.blotName,r);s.insertBefore(o,a)})}insertRow(e){const[n]=this.descendant(ll);if(n==null||n.children.head==null)return;const s=rj(),a=this.scroll.create(fo.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(na.blotName,s);a.appendChild(o)});const r=n.children.at(e);n.insertBefore(a,r)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}pg.allowedChildren=[ll];ll.requiredContainer=pg;ll.allowedChildren=[fo];fo.requiredContainer=ll;fo.allowedChildren=[na];na.requiredContainer=fo;function rj(){return`row-${Math.random().toString(36).slice(2,6)}`}class Qme extends Ua{static register(){Ge.register(na),Ge.register(fo),Ge.register(ll),Ge.register(pg)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(pg).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(Ge.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Ge.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(Ge.sources.USER),this.quill.setSelection(n,Ge.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==na.blotName)return[null,null,null,-1];const a=n.parent;return[a.parent.parent,a,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,a,r]=this.getTable(n);if(r==null)return;const o=r.cellOffset();s.insertColumn(o+e),this.quill.update(Ge.sources.USER);let c=a.rowOffset();e===0&&(c+=1),this.quill.setSelection(n.index+c,n.length,Ge.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,a,r]=this.getTable(n);if(r==null)return;const o=a.rowOffset();s.insertRow(o+e),this.quill.update(Ge.sources.USER),e>0?this.quill.setSelection(n,Ge.sources.SILENT):this.quill.setSelection(n.index+a.children.length,n.length,Ge.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const a=new Array(e).fill(0).reduce(r=>{const o=new Array(n).fill(`
`).join("");return r.insert(o,{table:rj()})},new jt().retain(s.index));this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(s.index,Ge.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Ge.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(Ge.events.TEXT_CHANGE,(s,a,r)=>{r===Ge.sources.USER&&this.balanceTables()}),!0):!1)})}}const VS=Pr("quill:toolbar");class lj extends Ua{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Zme(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){VS.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const a=this.options.handlers?.[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Ge.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){VS.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,a=>{let r;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const c=e.options[e.selectedIndex];c.hasAttribute("selected")?r=!1:r=c.value||!1}else e.classList.contains("ql-active")?r=!1:r=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,r);else if(this.quill.scroll.query(n).prototype instanceof Ss){if(r=prompt(`Enter ${n}`),!r)return;this.quill.updateContents(new jt().retain(o.index).delete(o.length).insert({[n]:r}),Ge.sources.USER)}else this.quill.format(n,r,Ge.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[a,r]=s;if(r.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[a]==null)o=r.querySelector("option[selected]");else if(!Array.isArray(n[a])){let c=n[a];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),o=r.querySelector(`option[value="${c}"]`)}o==null?(r.value="",r.selectedIndex=-1):o.selected=!0}else if(e==null)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const o=n[a],c=o===r.getAttribute("value")||o!=null&&o.toString()===r.getAttribute("value")||o==null&&!r.getAttribute("value");r.classList.toggle("ql-active",c),r.setAttribute("aria-pressed",c.toString())}else{const o=n[a]!=null;r.classList.toggle("ql-active",o),r.setAttribute("aria-pressed",o.toString())}})}}lj.DEFAULTS={};function US(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function Zme(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(a=>{if(typeof a=="string")US(s,a);else{const r=Object.keys(a)[0],o=a[r];Array.isArray(o)?Xme(s,r,o):US(s,r,o)}}),t.appendChild(s)})}function Xme(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(a=>{const r=document.createElement("option");a!==!1?r.setAttribute("value",String(a)):r.setAttribute("selected","selected"),s.appendChild(r)}),t.appendChild(s)}lj.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,Nt.INLINE)!=null&&this.quill.format(n,!1,Ge.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Ge.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Ge.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Ge.sources.USER),this.quill.format("direction",t,Ge.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let a=t==="+1"?1:-1;n.direction==="rtl"&&(a*=-1),this.quill.format("indent",s+a,Ge.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Ge.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,Ge.sources.USER):this.quill.format("list","unchecked",Ge.sources.USER):this.quill.format("list",t,Ge.sources.USER)}}};const Jme='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',eue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',tue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',nue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',iue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',sue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',aue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',rue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',WS='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',lue='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',oue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',cue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',due='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',mue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',uue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',pue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',gue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',vue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',xue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',yue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',bue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',wue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',kue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',jue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Nue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Cue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Sue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',_ue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Eue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Tue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Aue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',$m={align:{"":Jme,center:eue,right:tue,justify:nue},background:iue,blockquote:sue,bold:aue,clean:rue,code:WS,"code-block":WS,color:lue,direction:{"":oue,rtl:cue},formula:due,header:{1:mue,2:uue,3:hue,4:pue,5:gue,6:fue},italic:vue,image:xue,indent:{"+1":yue,"-1":bue},link:wue,list:{bullet:kue,check:jue,ordered:Nue},script:{sub:Cue,super:Sue},strike:_ue,table:Eue,underline:Tue,video:Aue},Due='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let KS=0;function GS(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class kf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),GS(this.label,"aria-expanded"),GS(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(n,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Due,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${KS}`,KS+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class XM extends kf{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=a:s.style.fill=a)}}class JM extends kf{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Rue=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class eI{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Rue(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let o=0;if(r.right>a.right&&(o=a.right-r.right,this.root.style.left=`${n+o}px`),r.left<a.left&&(o=a.left-r.left,this.root.style.left=`${n+o}px`),r.bottom>a.bottom){const c=r.bottom-r.top,d=e.bottom-e.top+c;this.root.style.top=`${s-d}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Pue=[!1,"center","right","justify"],Mue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Iue=[!1,"serif","monospace"],Oue=["1","2","3",!1],Lue=["small",!1,"large","huge"];class yu extends cd{constructor(e,n){super(e,n);const s=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(r=>{r.container.contains(a.target)||r.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(r=>{if(r.startsWith("ql-")&&(r=r.slice(3),n[r]!=null))if(r==="direction")s.innerHTML=n[r][""]+n[r].rtl;else if(typeof n[r]=="string")s.innerHTML=n[r];else{const o=s.value||"";o!=null&&n[r][o]&&(s.innerHTML=n[r][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Rd(a,Pue),typeof n.align=="object"))return new JM(a,n.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const r=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Rd(a,Mue,r==="background"?"#ffffff":"#000000"),new XM(a,n[r])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Rd(a,Iue):a.classList.contains("ql-header")?Rd(a,Oue):a.classList.contains("ql-size")&&Rd(a,Lue)),new kf(a)});const s=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(wt.events.EDITOR_CHANGE,s)}}yu.DEFAULTS=rl({},cd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class tI extends eI{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,wt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,wt.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=Fue(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,wt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",wt.sources.USER),this.quill.setSelection(s+2,wt.sources.USER)}break}}this.textbox.value="",this.hide()}}function Fue(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Rd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const a=document.createElement("option");s===n?a.setAttribute("selected","selected"):a.setAttribute("value",String(s)),t.appendChild(a)})}const $ue=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Bue extends tI{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(wt.events.EDITOR_CHANGE,(s,a,r,o)=>{if(s===wt.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&o===wt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(a.index,a.length);if(c.length===1){const d=this.quill.getBounds(a);d!=null&&this.position(d)}else{const d=c[c.length-1],m=this.quill.getIndex(d),u=Math.min(d.length()-1,a.index+a.length-m),p=this.quill.getBounds(new go(m,u));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(wt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}class nI extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=$ue),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Bue(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m))}}nI.DEFAULTS=rl({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Ge.sources.USER)}}}}});const que=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Hue extends tI{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,wt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(wt.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===wt.sources.USER){const[a,r]=this.quill.scroll.descendant(hg,e.index);if(a!=null){this.linkRange=new go(e.index-r,a.length());const o=hg.formats(a.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class iI extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=que),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m),this.tooltip=new Hue(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}iI.DEFAULTS=rl({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,Ge.sources.USER)}}}}});Ge.register({"attributors/attribute/direction":BM,"attributors/class/align":LM,"attributors/class/background":Kde,"attributors/class/color":Wde,"attributors/class/direction":qM,"attributors/class/font":VM,"attributors/class/size":WM,"attributors/style/align":FM,"attributors/style/background":ej,"attributors/style/color":Jk,"attributors/style/direction":HM,"attributors/style/font":UM,"attributors/style/size":KM},!0);Ge.register({"formats/align":LM,"formats/direction":qM,"formats/indent":$me,"formats/background":ej,"formats/color":Jk,"formats/font":VM,"formats/size":WM,"formats/blockquote":Bme,"formats/code-block":Hi,"formats/header":qme,"formats/list":xu,"formats/bold":aj,"formats/code":tj,"formats/italic":Hme,"formats/link":hg,"formats/script":zme,"formats/strike":Vme,"formats/underline":Ume,"formats/formula":Wme,"formats/image":Kme,"formats/video":Gme,"modules/syntax":ZM,"modules/table":Qme,"modules/toolbar":lj,"themes/bubble":nI,"themes/snow":iI,"ui/icons":$m,"ui/picker":kf,"ui/icon-picker":JM,"ui/color-picker":XM,"ui/tooltip":eI},!0);class $o extends He.Component{constructor(e){super(e),this.editingAreaRef=f.createRef(),this.containerRef=f.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,a,r,o)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,o,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(a,o,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(He.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(He.Children.count(e.children)&&He.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const s=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!Hr(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!Hr(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){const{delta:s,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const r=this.editor;r.setContents(s),YS(()=>this.setEditorSelection(r,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const s=new Ge(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?Hr(e.ops,n.ops):Hr(e,n)}setEditorContents(e,n){this.value=n;const s=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),YS(()=>this.setEditorSelection(e,s))}setEditorSelection(e,n){if(this.selection=n,n){const s=e.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:s}=this.state,a={key:s,ref:this.editingAreaRef};return He.Children.count(e)?He.cloneElement(He.Children.only(e),a):n?He.createElement("pre",{...a}):He.createElement("div",{...a})}render(){return He.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,s,a){if(!this.editor)return;const r=this.isDelta(this.value)?a.getContents():a.getHTML();r!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=r,this.props.onChange?.(e,n,s,a))}onEditorChangeSelection(e,n,s){if(!this.editor)return;const a=this.getEditorSelection(),r=!a&&e,o=a&&!e;Hr(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,n,s),r?this.props.onFocus?.(e,n,s):o&&this.props.onBlur?.(a,n,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}$o.displayName="React Quill";$o.Quill=Ge;$o.defaultProps={theme:"snow",modules:{},readOnly:!1};function YS(t){Promise.resolve().then(t)}const zue=({isEditing:t})=>{const{id:e}=Wt(),n=dn(),[s,a]=f.useState(""),[r,o]=f.useState(""),[c,d]=f.useState([]),[m,u]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),{data:x,isLoading:v,error:y}=bn("settings","email-template",{id:e},{enabled:t&&!!e,select:w=>w?.status&&w.data?{status:w.status,message:w.message,data:{templatePost:w.data.templatePost||{},dynamicKeys:w.data.dynamic_keys||[]}}:w}),b=cn("settings","email-template");f.useEffect(()=>{if(x?.status&&x.data&&!p){const{templatePost:w,dynamicKeys:T}=x.data;o(w.post_title||""),a(w.post_content||""),h(!0),d(T.map(A=>A.replace(/[{}]/g,""))||[])}},[x,p]),f.useEffect(()=>{if(y){let w;typeof y=="string"?w=y:y?.response?.data?.message?w=y.response.data.message:y?.message?w=y.message:w=l("Failed to load template","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:w,confirmButtonText:l("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const j=w=>{p&&a(w)},k=async()=>{try{const w={ID:e,post_content:s,post_title:r};u(!0);const T=await b.mutateAsync(w);T.status!==!0?Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:T.message||l("Failed to update template","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:T.message||l("Template updated successfully","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}).then(()=>n("/setting/email-template"))}catch(w){console.error("Error updating template:",w),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("An error occurred while updating the template","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{u(!1)}},S=w=>{navigator.clipboard.writeText(`{{${w}}}`),Ze.fire({title:l("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},N={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},_=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return v&&!x?i.jsx(of,{}):i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Edit Email Template","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:()=>n(-1),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:m,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"emailSubject",className:"form-label h6",children:l("Email Subject","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"emailSubject",className:"form-control",placeholder:l("Email Subject","kivicare-clinic-management-system"),value:r,onChange:w=>o(w.target.value),disabled:m})]}),c.length>0&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:c.map(w=>i.jsx(Qe,{placement:"top",overlay:T=>i.jsx(ut,{...T,children:l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>S(w),disabled:m,children:[w,i.jsx("i",{className:"ph ph-copy"})]})},w))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Email Content","kivicare-clinic-management-system")}),i.jsx($o,{ref:g,theme:"snow",value:s,onChange:j,modules:N,formats:_,readOnly:m||v})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:k,disabled:m||v||!p,children:m?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})})]})},Vue=()=>{const t=dn(),[e,n]=f.useState(""),[s,a]=f.useState(""),[r,o]=f.useState(!1),c=cn("settings","email-template/test"),d=()=>{t("/setting/email-template")},m=async()=>{if(!e.trim()){Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Please enter an email address","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")});return}if(!s.trim()){Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Please enter test content","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")});return}try{o(!0);const u={email:e,content:s},p=await c.mutateAsync(u);if(p?.status===!0)Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:p.message||l("Test email sent successfully","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),n(""),a("");else throw new Error(p?.message||"Failed to send test email")}catch(u){console.error("Error sending test email:",u),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:u.message||l("Failed to send test email","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{o(!1)}};return i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Test Email","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:d,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:r,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"email",className:"form-control",placeholder:l("Enter email id","kivicare-clinic-management-system"),value:e,onChange:u=>n(u.target.value),required:!0,disabled:r})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:l('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system"),value:s,onChange:u=>a(u.target.value),required:!0,disabled:r})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,disabled:r,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,disabled:r,children:r?l("Sending...","kivicare-clinic-management-system"):l("Send Test Email","kivicare-clinic-management-system")})]})]})})},QS=({show:t,onSave:e,onCancel:n,existingImageData:s=[],editData:a=null,title:r=null})=>{const{control:o,handleSubmit:c,setValue:d,reset:m,setError:u,clearErrors:p,formState:{errors:h}}=Xt({defaultValues:{name:"",url:"",imageId:""}}),g=f.useRef(null);f.useEffect(()=>{t&&a?(d("name",a.name||""),d("url",a.url||""),d("imageId",a.imageId||"")):t||(m(),p(),g.current&&g.current.clearImage())},[t,a,d,m,p]);const x=v=>{e(v)};return i.jsxs(st,{show:t,onHide:n,centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:r||l("Upload New","kivicare-clinic-management-system")})}),i.jsx(st.Body,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"name",control:o,rules:{required:l("Name is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx("input",{...v,type:"text",className:`form-control ${h.name?"is-invalid":""}`,placeholder:l("Image name","kivicare-clinic-management-system")})}),h.name&&i.jsx("div",{className:"invalid-feedback d-block",children:h.name.message})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Upload File","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"url",control:o,rules:{required:l("Image is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsxs(i.Fragment,{children:[i.jsx(ef,{ref:g,id:a?`edit-image-upload-${a.id}`:"new-image-upload",name:a?`edit_image_${a.id}`:"new_image",defaultImage:a?.url,defaultImageId:a?.imageId,className:"mb-0",required:!0,onChange:(y,b)=>{if(s.some((k,S)=>a&&S===a.index?!1:k.imageId===b)){u("url",{type:"duplicate",message:l("This image is already uploaded","kivicare-clinic-management-system")}),d("url",a?.url||""),d("imageId",a?.imageId||"");return}p("url"),d("url",y.url||""),d("imageId",b||"")},errors:h.url?{[a?`edit_image_${a.id}`:"new_image"]:{message:h.url.message}}:{}}),h.url&&i.jsx("div",{className:"invalid-feedback d-block",children:h.url.message})]})})]})})]})}),i.jsxs(st.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary ms-2",onClick:c(x),children:l("Save","kivicare-clinic-management-system")})]})]})},Uue=()=>{const{isAddonActive:t}=ht(),e=t("bodyChart"),{data:n,isLoading:s,error:a}=ste({enabled:e}),r=f.useRef(!1),o=f.useRef(null),c=(W,z=null)=>{if(r.current){let ie;switch(z){case"add":ie=l("Image template added successfully","kivicare-clinic-management-system");break;case"delete":ie=l("Image template deleted successfully","kivicare-clinic-management-system");break;case"edit":ie=l("Image template updated successfully","kivicare-clinic-management-system");break;default:ie=l("Image template updated successfully","kivicare-clinic-management-system")}Ee.success(ie)}else Ze.fire(l("Success","kivicare-clinic-management-system"),W,"success");r.current=!1,o.current=null},d=ate({onSuccess:()=>c(l("Configuration saved successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Ze.fire(l("Error","kivicare-clinic-management-system"),W.message||l("Failed to save configuration","kivicare-clinic-management-system"),"error"),r.current=!1,o.current=null}}),m=rte({onSuccess:()=>c(l("Configuration updated successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Ze.fire(l("Error","kivicare-clinic-management-system"),W.message||l("Failed to update configuration","kivicare-clinic-management-system"),"error"),r.current=!1,o.current=null}}),{control:u,handleSubmit:p,watch:h,setValue:g,reset:x,getValues:v,register:y,formState:{errors:b,isValid:j}}=Xt({defaultValues:{theme:"whiteTheme",menuBarPosition:"left",replaceOrNewAfterEditImage:"new",menu:[],defaultImageData:[],defaultImage:-1},mode:"onChange"}),{fields:k,append:S,remove:N}=mr({control:u,name:"defaultImageData"}),[_,w]=f.useState(!1),[T,A]=f.useState(null),M=h();f.useEffect(()=>{n?.data&&x({theme:n.data.theme||"whiteTheme",menuBarPosition:n.data.menuBarPosition||"left",replaceOrNewAfterEditImage:n.data.replaceOrNewAfterEditImage||"new",menu:n.data.menu||[],defaultImageData:n.data.defaultImageData&&Array.isArray(n.data.defaultImageData)?n.data.defaultImageData.map((W,z)=>({id:z+1,name:W.name||"",url:W.url||"",imageId:W.imageId||""})):[],defaultImage:n.data.defaultImage})},[n,x]);const E=f.useMemo(()=>k.map((W,z)=>({id:W.id,name:W.name||"",url:W.url||"",imageId:W.imageId||"",placeholder:W.name||l("Image name","kivicare-clinic-management-system"),defaultValue:W.name||"",radioId:`radioDefault${W.id}`,selected:M.defaultImage===(W.imageId||"")})),[k,M.defaultImage]),P=f.useMemo(()=>In(),[]);f.useRef(null);const D=async W=>{console.log(W);const z=v("defaultImageData")||[],ie={...W,defaultImageData:z};try{if(!ie.defaultImageData||ie.defaultImageData.length===0){const Q={...ie,defaultImageData:[],defaultImage:-1};n?.data?await m.mutateAsync(Q):await d.mutateAsync(Q);return}if(ie.defaultImageData.some(Q=>!Q.name||Q.name.trim()===""||!Q.url&&!Q.imageId)){Ze.fire(l("Validation Error","kivicare-clinic-management-system"),l("Please complete all required fields in the image templates","kivicare-clinic-management-system"),"warning");return}if(ie.defaultImageData.length>0&&(!ie.defaultImage||ie.defaultImage===-1||ie.defaultImage==="")){Ze.fire(l("Validation Error","kivicare-clinic-management-system"),l("Please select a default image from the image templates","kivicare-clinic-management-system"),"warning");return}if(!ie.defaultImageData.some(Q=>Q.imageId===ie.defaultImage)){Ze.fire(l("Validation Error","kivicare-clinic-management-system"),l("Selected default image is no longer available. Please select another default image.","kivicare-clinic-management-system"),"warning");return}const L={...ie,defaultImageData:ie.defaultImageData.map(Q=>({id:Q.id,name:Q.name.trim(),url:Q.url||"",imageId:Q.imageId||""}))};n?.data?await m.mutateAsync(L):await d.mutateAsync(L)}catch(re){console.error("Error saving configuration:",re)}},O=f.useCallback(W=>{const z=k[W];if(N(W),M.defaultImage===z.imageId){const ie=k.filter((re,de)=>de!==W);ie.length>0&&ie[0].imageId?g("defaultImage",ie[0].imageId):g("defaultImage",-1)}setTimeout(()=>{r.current=!0,o.current="delete",p(D)()},100)},[k,N,g,M.defaultImage,p,D]),F=W=>{const z=k[W];A({...z,index:W})},q=W=>{T&&(g(`defaultImageData.${T.index}.name`,W.name),g(`defaultImageData.${T.index}.url`,W.url),g(`defaultImageData.${T.index}.imageId`,W.imageId),A(null),setTimeout(()=>{r.current=!0,o.current="edit",p(D)()},100))},U=f.useMemo(()=>[P.accessor("name",{header:()=>l("Name","kivicare-clinic-management-system"),cell:W=>i.jsx("span",{children:W.row.original.name})}),P.accessor("radio",{header:()=>l("Default","kivicare-clinic-management-system"),cell:W=>i.jsx(je,{name:"defaultImage",control:u,render:({field:z})=>{const ie=W.row.original.imageId;return i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"defaultImage",id:W.row.original.radioId,value:ie,checked:z.value===ie,disabled:!ie,onChange:()=>{ie&&z.onChange(ie)}}),i.jsx("label",{className:"form-check-label",htmlFor:W.row.original.radioId,children:l("Default","kivicare-clinic-management-system")})]})}},`radio-${W.row.original.id}`)}),P.accessor("url",{header:()=>l("Image","kivicare-clinic-management-system"),cell:W=>i.jsx("div",{className:"d-flex align-items-center",children:W.row.original.url?i.jsx("img",{src:W.row.original.url,alt:W.row.original.name,className:"rounded",style:{width:"40px",height:"40px",objectFit:"cover"}}):i.jsx("div",{className:"bg-light rounded d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:i.jsx("i",{className:"ph ph-image text-muted"})})})}),P.accessor("action",{header:()=>l("Action","kivicare-clinic-management-system"),cell:W=>i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0 text-primary",onClick:()=>F(W.row.index),title:l("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple fs-5"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0 text-danger",onClick:()=>O(W.row.index),title:l("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})})],[P,k.length,O,u]),K=FT({data:E,columns:U,getCoreRowModel:LT(),autoResetPageIndex:!1,autoResetExpanded:!1,autoResetSorting:!1,autoResetFilters:!1,autoResetRowSelection:!1,autoResetColumnOrder:!1,autoResetColumnPinning:!1,autoResetColumnSizing:!1,autoResetColumnVisibility:!1,autoResetGlobalFilter:!1,autoResetGrouping:!1}),ne=()=>{w(!0)},Y=W=>{if((v("defaultImageData")||[]).some(Q=>Q.imageId===W.imageId)){Ze.fire(l("Error","kivicare-clinic-management-system"),l("This image is already used in another template","kivicare-clinic-management-system"),"error");return}const de={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:W.name,url:W.url,imageId:W.imageId};S(de),w(!1);const L=v("defaultImage");(!L||L===-1||L==="")&&de.imageId&&g("defaultImage",de.imageId),setTimeout(()=>{r.current=!0,o.current="add",p(D)()},100)};if(s)return i.jsx(fP,{});if(a)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l("Error loading configuration:","kivicare-clinic-management-system")," ",a.message]});const fe=[{id:"theme-mode",label:l("Theme mode","kivicare-clinic-management-system"),required:!0,value:M.theme,options:[{value:"whiteTheme",label:l("Light","kivicare-clinic-management-system")},{value:"blackTheme",label:l("Dark","kivicare-clinic-management-system")}]},{id:"menu-position",label:l("Menu bar position","kivicare-clinic-management-system"),required:!0,value:M.menuBarPosition,options:[{value:"left",label:l("Left","kivicare-clinic-management-system")},{value:"right",label:l("Right","kivicare-clinic-management-system")},{value:"top",label:l("Top","kivicare-clinic-management-system")},{value:"bottom",label:l("Bottom","kivicare-clinic-management-system")}]},{id:"image-handling",label:l("Image Handling Preference (when image save after editing)","kivicare-clinic-management-system"),required:!0,value:M.replaceOrNewAfterEditImage,options:[{value:"new",label:l("Create New Image","kivicare-clinic-management-system")},{value:"replace",label:l("Replace Original Image","kivicare-clinic-management-system")}]},{id:"menu-type",label:l("Menu Type","kivicare-clinic-management-system"),required:!0,value:M.menu,options:[{value:"crop",label:l("Crop","kivicare-clinic-management-system")},{value:"flip",label:l("Flip","kivicare-clinic-management-system")},{value:"rotate",label:l("Rotate","kivicare-clinic-management-system")},{value:"draw",label:l("Draw","kivicare-clinic-management-system")},{value:"shape",label:l("Shape","kivicare-clinic-management-system")},{value:"icon",label:l("Icon","kivicare-clinic-management-system")},{value:"filter",label:l("Filter","kivicare-clinic-management-system")},{value:"text",label:l("Text","kivicare-clinic-management-system")},{value:"mask",label:l("Mask","kivicare-clinic-management-system")}],isMulti:!0}],le=({fieldConfig:W,control:z,errors:ie})=>{const re=W.isMulti?W.value?.map(Q=>({value:typeof Q=="object"?Q.id:Q,label:typeof Q=="object"?Q.label:W.options.find(V=>V.value===Q)?.label||Q}))||[]:W.options.find(Q=>Q.value===W.value)||null,L={"theme-mode":"theme","menu-position":"menuBarPosition","image-handling":"replaceOrNewAfterEditImage","menu-type":"menu"}[W.id];return i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:W.id,className:"form-label",children:[W.label," ",W.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:L,control:z,rules:{required:W.required?l("This field is required","kivicare-clinic-management-system"):!1},render:({field:Q})=>i.jsx(ot,{...Q,className:`react-select-box ${ie[L]?"is-invalid":""}`,classNamePrefix:"react-select",options:W.options,isSearchable:!1,isMulti:W.isMulti||!1,value:re,onChange:V=>{let Z;W.isMulti?Z=V?V.map(X=>({id:X.value,label:X.label})):[]:Z=V?V.value:"",Q.onChange(Z)},id:W.id,styles:{menuPortal:V=>({...V,zIndex:9999})}})}),ie[L]&&i.jsx("div",{className:"invalid-feedback d-block",children:ie[L].message})]})})};return i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:`encounter-body-chart-setting${e?"":" p-4"}`,children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Encounter body chart Settings","kivicare-clinic-management-system"),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-encounter-body-chart-addon-24687/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!e&&i.jsx(ri,{title:l("Available For Encounter Body Chart Addon","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-encounter-body-chart-addon/51585503"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:p(D),children:[i.jsx("div",{className:"row gy-4 mb-5 pb-3",children:fe.map(W=>i.jsx(le,{fieldConfig:W,control:u,errors:b},W.id))}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("label",{className:"form-label mb-0",children:[l("Image Template","kivicare-clinic-management-system"),i.jsx("div",{className:"text-muted small fw-normal",children:l("Add image templates for body chart","kivicare-clinic-management-system")})]}),i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:ne,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add New","kivicare-clinic-management-system")})]})]}),i.jsx(QS,{show:_,onSave:Y,onCancel:()=>w(!1),existingImageData:v("defaultImageData")||[]}),i.jsx(QS,{show:!!T,onSave:q,onCancel:()=>A(null),existingImageData:v("defaultImageData")||[],editData:T,title:l("Edit Image Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:K.getHeaderGroups().map(W=>i.jsx("tr",{children:W.headers.map(z=>i.jsx("th",{children:Cp(z.column.columnDef.header,z.getContext())},z.id))},W.id))}),i.jsx("tbody",{children:K.getRowModel().rows.map(W=>i.jsx("tr",{children:W.getVisibleCells().map((z,ie)=>i.jsxs("td",{children:[ie===0&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.name`),defaultValue:W.original.name}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.url`),defaultValue:W.original.url}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.imageId`),defaultValue:W.original.imageId})]}),Cp(z.column.columnDef.cell,z.getContext())]},`cell-${W.original.id}-${z.column.id}`))},`row-${W.original.id}`))})]})}),b.defaultImage&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),b.defaultImage.message]}),b.defaultImageData&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),Array.isArray(b.defaultImageData)?i.jsx("ul",{className:"mb-0",children:b.defaultImageData.map((W,z)=>W&&i.jsxs("li",{children:[l("Row","kivicare-clinic-management-system")," ",z+1,":",W.name?.message&&` ${W.name.message}`,W.url?.message&&` ${W.url.message}`]},z))}):b.defaultImageData.message]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d.isLoading||m.isLoading,children:d.isLoading||m.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})})})]})})},Wue=()=>{const[t,e]=f.useState({ID:"",post_title:"",post_content:""}),{isAddonActive:n}=ht(),s=n("kiviPro"),{data:a,isLoading:r,error:o}=bn("settings","google-event-template",{},{enabled:s}),c=cn("settings","google-event-template"),[d,m]=f.useState(!1),{data:u}=Cn(),p=u?.data?.hideUtilityLinks;f.useEffect(()=>{if(!a?.data?.data)return;const v=a.data.data;e({ID:v.ID||"",post_title:v.post_title||"",post_content:v.post_content||""})},[a]);const h=v=>{e(y=>({...y,post_title:v.target.value}))},g=v=>{e(y=>({...y,post_content:v}))},x=async()=>{try{m(!0),(await c.mutateAsync(t)).status!==!0?Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),m(!1)}catch(v){m(!1),console.error("Error submitting form:",v)}};if(o){let v;typeof o=="string"?v=o:o?.response?.data?.message?v=o.response.data.message:o?.message?v=o.message:v=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(v,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return(r||d)&&s?i.jsx(xP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-event-template-setting${s?"":" p-4"}`,children:[!s&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Google Event Template","kivicare-clinic-management-system"),p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/google-event-template/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!r&&!d&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:l("Google Event Template","kivicare-clinic-management-system")}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx("label",{htmlFor:"event-title",className:"form-label",children:l("Google Event Title","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:t?.post_title,onChange:h,disabled:d||r})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"event-description",className:"form-label h6",children:l("Google Event Description","kivicare-clinic-management-system")}),t?.ID&&i.jsx($o,{theme:"snow",value:t?.post_content||"",onChange:g},t?.ID)]})]})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:x,disabled:d||r,children:l("Save","kivicare-clinic-management-system")})})]})]})})},Kue=()=>{const[t,e]=f.useState(!1),{isAddonActive:n}=ht(),s=n("googlemeet"),{data:a,isLoading:r,error:o,refetch:c}=bn("settings","googlemeet",{},{enabled:s}),[d,m]=f.useState(""),u=cn("settings","googlemeet"),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,{control:g,handleSubmit:x,watch:v,reset:y,formState:{errors:b}}=Xt({defaultValues:{enableCal:!1,client_id:"",client_secret:"",app_name:""}}),j=v("enableCal"),k=[{id:"client_id",label:l("Google Meet Client ID","kivicare-clinic-management-system"),placeholder:"EXAMPLE-1234567890.apps.googleusercontent.com"},{id:"client_secret",label:l("Google Meet Client Secret","kivicare-clinic-management-system"),placeholder:"EXAMPLE-GOCSPX-ecA6KW3s9suV9ifVKET5FwqxzW"},{id:"app_name",label:l("App Name","kivicare-clinic-management-system"),placeholder:"My Google App Name"}];f.useEffect(()=>{!a?.status||!a?.data?.data||(m(a.data.data),!(!a?.data?.config?.data||Object.keys(a.data.config.data).length===0)&&y(w=>{const T=Object.fromEntries(Object.entries(a.data.config.data).filter(([A,M])=>M!=null&&M!==""));return{...w,...T,enableCal:T.enableCal==="Yes"}}))},[a,y]);const S=w=>{m(T=>({...T,post_title:w.target.value}))},N=w=>{m(T=>({...T,post_content:w}))},_=async w=>{try{e(!0);const A={google_meet_config:{...w,enableCal:w.enableCal?"Yes":"No"},google_meet_event_template:d};(await u.mutateAsync(A)).status!==!0?Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):(Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),c()),e(!1)}catch(T){e(!1),console.error("Error submitting form:",T)}};if(o){let w;typeof o=="string"?w=o:o?.response?.data?.message?w=o.response.data.message:o?.message?w=o.message:w=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(w,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return s&&(r||t)?i.jsx(yP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-meet-setting${s?"":" p-4"}`,children:[!s&&i.jsx(ri,{title:l("Available In GoogleMeet AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-google-meet-telemed-addon/35301137?s_rank=21"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Google Meet","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/getting-started-googlemeet/what-is-kivicare-google-meet-addon/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!t||!r)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsx("div",{className:"card-body p-3",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx(je,{name:"enableCal",control:g,render:({field:w})=>i.jsx(ln,{label:l("Google Meet Configuration","kivicare-clinic-management-system"),checked:w.value,onChange:w.onChange,disabled:t||r,error:b?.enableCal})})})})})}),i.jsxs("form",{onSubmit:x(_),children:[j&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"row gy-4",children:[k.map(({id:w,label:T,placeholder:A})=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(je,{name:w,control:g,rules:{required:`${w} is required`},render:({field:M})=>i.jsx(Ut,{label:T,type:"text",className:"form-control",placeholder:A,value:M.value,required:!0,onChange:M.onChange,isDisable:t||r,error:b[w]})})})},w)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:a?.data?.redirection_url||"",readOnly:!0,disabled:t||r,placeholder:l("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{a?.data?.redirection_url&&(navigator.clipboard.writeText(a.data.redirection_url),Ze.fire({icon:"success",title:l("Copied!","kivicare-clinic-management-system"),text:l("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}))},disabled:!a?.data?.redirection_url||t||r,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),l("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})]}),i.jsxs("div",{className:"pt-4 mt-4 border-top",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Guide to setup Google Meet.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l("Step 1:","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/configuration-doc/global-google-meet-settings-admin/",target:"_blank",className:"font-size-14 text-heading",children:l("Please refer the following link for the setup.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l("Step 2:","kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 text-heading",children:l("Copy the Redirection URL above and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")})]})]})]}),i.jsxs("p",{className:"font-size-12 mb-0",children:[i.jsx("span",{className:"text-primary",children:l("Note:","kivicare-clinic-management-system")})," ",l("If you have already set up Google Calendar, you can use the same Client ID and Client Secret here.","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:l("Google Meet Event Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-group mb-4",children:i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:d.post_title,onChange:S,disabled:t||r})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"eventDescription",className:"form-label fw-semibold text-body",children:l("Google Event Description","kivicare-clinic-management-system")}),i.jsx("div",{className:"quill-editor-wrapper",children:i.jsx($o,{theme:"snow",value:d.post_content,onChange:N})})]})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||r,children:l("Save","kivicare-clinic-management-system")})})]})]})]})})},Gue=()=>{const{isAddonActive:t,googleMeetIntegration:e}=ht();if(!t("googlemeet")||e!=="yes")return i.jsx(gg,{to:"/setting",replace:!0});const n=t("googlemeet"),[s,a]=f.useState(!1),[r,o]=f.useState(!1),{data:c,isLoading:d,error:m,refetch:u}=bn("settings","googlemeet/doctor-config",{},{enabled:n}),{refetch:p}=bn("settings","googlemeet/authorize",{},{enabled:!1}),{refetch:h}=bn("settings","googlemeet/disconnect",{},{enabled:!1});f.useEffect(()=>{const y=new URLSearchParams(window.location.search);y.get("google_meet_connected")==="1"&&(Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Google Meet connected successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),y.delete("google_meet_connected"),window.history.replaceState({},document.title,window.location.pathname),u())},[u]);const g=async()=>{const{data:y}=await u();if(!(y?.data?.is_zoom_connected&&!(await Ze.fire({title:l("Warning","kivicare-clinic-management-system"),text:l("Press yes to connect to Google Meet. Connecting to Google Meet will disconnect Zoom.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes","kivicare-clinic-management-system"),cancelButtonText:l("No","kivicare-clinic-management-system")})).isConfirmed))try{a(!0);const{data:j}=await p();j?.data?.redirect_url?window.location.href=j.data.redirect_url:Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:j?.message||l("Failed to initiate Google Meet connection","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(j){console.error("Connection failed:",j),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:j.message||l("An error occurred","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}finally{a(!1)}},x=async()=>{if((await Ze.fire({title:l("Disconnect Google Meet","kivicare-clinic-management-system"),message:l("Are you sure you want to disconnect your Google Meet account?","kivicare-clinic-management-system"),confirmButtonText:l("Disconnect","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{o(!0);const{data:b}=await h();b?.status?(u(),Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Disconnected from Google Meet","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})):Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:b?.message||l("Failed to disconnect from Google Meet","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(b){console.error("Disconnection failed:",b),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:b.message||l("An error occurred","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}finally{o(!1)}},v=()=>!c||!c.data?null:c.data.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("Your Google Meet account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:x,disabled:r,children:r?l("Disconnecting...","kivicare-clinic-management-system"):l("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),l("Your Google Meet account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:g,disabled:s,children:s?l("Connecting...","kivicare-clinic-management-system"):l("Connect Google Meet Account","kivicare-clinic-management-system")})]});return i.jsx("div",{className:"google-meet-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsx("div",{className:"d-flex align-items-center mb-4",children:i.jsx("h4",{className:"mb-0",children:l("Google Meet Settings","kivicare-clinic-management-system")})}),d||s||r?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:l("Loading Google Meet configuration...","kivicare-clinic-management-system")})]}):m?i.jsxs("div",{className:"alert alert-danger",children:[i.jsx("i",{className:"fas fa-exclamation-circle me-2"}),l("Failed to load Google Meet configuration:","kivicare-clinic-management-system")," ",m.message]}):i.jsxs(i.Fragment,{children:[n?v():i.jsx("div",{className:"alert alert-warning",children:l("Google Meet telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"mb-3",children:l("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-question-circle text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-meet-telemed-woocommerce-addon/doctor/",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:l("Google Meet integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("Learn how to set up and use Google Meet telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-video text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://support.google.com/meet",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:l("Google Meet requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})]})})})},Qo=[{id:1,label:l("Active","kivicare-clinic-management-system")},{id:0,label:l("Inactive","kivicare-clinic-management-system")}],ZS=[{label:"Prescription type",value:"prescription_type"},{label:"Service type",value:"service_type"}],Yue={page:1,perPage:10,searchTerm:"",type:"",status:""},bx=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),[a,r]=f.useState([]),[o,c]=f.useState(null),[d,m]=f.useState(""),[u,p]=f.useState(ZS),[h,g]=f.useState(Yue),[x,v]=f.useState(!1),y=vr(),b=dn(),j=Hn(),{id:k}=Wt(),S=ze(),N=qa(d,500),{control:_,handleSubmit:w,formState:{errors:T},reset:A}=Xt(),{isAddonActive:M,hasCapability:E}=ht(),P=M("kiviPro"),{data:D}=Cn(),O=D?.data?.hideUtilityLinks,{data:F,isLoading:q,error:U}=bn("settings","listing",h,{enabled:!0}),{data:K}=Ip({dataType:"staticData",staticDataType:"staticDataTypes"},{enabled:!!F}),ne=cn("settings","listing/update"),Y=cn("settings","listing/delete"),fe=ZX(),le=F?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useEffect(()=>{g(H=>({...H,searchTerm:N,page:1}))},[N]),f.useEffect(()=>{if(K?.status&&K?.data&&p(K.data.length?K.data:ZS),!F?.status){r([]);return}r(Array.isArray(F?.data?.data)?F.data.data.map(H=>({id:H.id,name:H.label,type:H.type,status:H.status===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})):[])},[F,K]),f.useEffect(()=>{if(j.pathname.endsWith("/add"))s(!0),c(null),A({id:"",label:"",type:"",status:""});else if(k){const B=a.find(te=>String(te.id)===k);B&&(c(B),s(!0),A({id:B.id,label:B.name,type:u.find(te=>te.value===B.type.replace(/\s+/g,"_").toLowerCase())||null,status:Qo.find(te=>te.label===B.status)||null}))}else s(!1),c(null),A({id:"",label:"",type:"",status:""})},[k,j.pathname,a,A,u]);const W=f.useCallback(H=>{m(H.target.value)},[]),z=f.useCallback(H=>{bt({title:l("Delete Listing?","kivicare-clinic-management-system"),text:l("You're about to delete this listing.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:l("Keep listing","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(B=>{B.isConfirmed&&(yt({title:l("Deleting Listing...","kivicare-clinic-management-system"),text:l("Please wait while we remove the selected listing.<br>This won't take long.","kivicare-clinic-management-system")}),Y.mutate({id:H},{onSuccess:te=>{St({title:l("Listing Deleted","kivicare-clinic-management-system"),text:te?.message||l("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:l("Back to listings","kivicare-clinic-management-system")}),S.invalidateQueries(["settings","listing"])},onError:te=>{console.error("Delete clinic error:",te);const oe=te?.response?.data?.message||te?.message||l("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:l("Error","kivicare-clinic-management-system"),text:oe,confirmButtonText:l("OK","kivicare-clinic-management-system")})}}))})},[Y,S]),ie=f.useCallback(async H=>{try{e(!0),!o&&(!H.id||H.id==="")&&delete H.id;const B=await ne.mutateAsync(H);B.status!==!0?rt({title:l("Error","kivicare-clinic-management-system"),text:l(B.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):St({title:l("Success","kivicare-clinic-management-system"),text:l(B.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),await S.invalidateQueries(["settings","listing"]),s(!1),c(null),A(),b("/setting/listings")}catch(B){console.error("Error submitting form:",B)}finally{e(!1)}},[o,b,S,A,ne]),[re,de]=f.useState(!1),L=async H=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:H,searchTerm:h.searchTerm||"",type:h.type||"",status:h.status!==""?h.status:void 0},te=await fe.mutateAsync(B);if(!te.status||!te.data||!te.data.listings)throw new Error(te.message||l("Failed to retrieve export data","kivicare-clinic-management-system"));const oe=new Date().toISOString().split("T")[0],ye=te.data.listings;switch(H){case"csv":cs(ye,`listings-${oe}.csv`);break;case"xls":ds(ye,`listings-${oe}.xls`);break;case"pdf":ms(ye,`listings-${oe}.pdf`,"Listings Data");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(B){console.error("Export error:",B),rt({title:l("Error!","kivicare-clinic-management-system"),text:B.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},Q=f.useCallback(()=>L("csv"),[]),V=f.useCallback(()=>L("xls"),[]),Z=f.useCallback(()=>{re||(de(!0),L("pdf"),setTimeout(()=>de(!1),2e3))},[re]),X=f.useCallback(H=>{if(!P){bt({title:l("Pro Feature","kivicare-clinic-management-system"),text:l("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}switch(H){case"csv":Q();break;case"xls":V();break;case"pdf":Z();break}},[Q,V,Z,P]),R=f.useCallback(()=>{v(!0)},[]),G=f.useCallback(()=>{S.invalidateQueries(["settings","listing"])},[S]),ee=f.useCallback(()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>X("csv"),title:l("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>X("xls"),title:l("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>X("pdf"),title:l("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}),[X]),ae=In(),I=f.useMemo(()=>[ae.accessor("id",{id:"id",header:()=>l("ID","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"font-weight-medium",children:H.getValue()})}),ae.accessor("name",{id:"name",header:()=>l("Name","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:H.row.original.name})})}),ae.accessor("type",{id:"type",header:()=>l("Type","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:H.row.original.type})})}),ae.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>{const B=H.getValue(),te=Qo.find(oe=>oe.label===B)||{label:l("Unknown","kivicare-clinic-management-system"),class:"bg-body"};return te.label===l("Active","kivicare-clinic-management-system")?te.class="bg-success-subtle text-success":te.label===l("Inactive","kivicare-clinic-management-system")&&(te.class="bg-danger-subtle text-danger"),i.jsx("span",{className:`badge ${te.class} px-3 py-2`,children:te.label})}}),ae.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("static_data_edit")&&i.jsx(gt,{className:"text-success btn btn-link p-0",to:`/setting/listings/edit/${H.cell.row.original.id}`,children:i.jsx("i",{className:"h6 text-success ph ph-pencil-simple-line"})}),y&&i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>z(H.cell.row.original.id),children:i.jsx("i",{className:"ph h6 text-danger ph-trash"})})]})})],[ae,z,E]);if(U){let H;typeof U=="string"?H=U:U?.response?.data?.message?H=U.response.data.message:U?.message?H=U.message:H=l("An unknown error occurred","kivicare-clinic-management-system"),rt({title:l("Error","kivicare-clinic-management-system"),text:l(H,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return!n&&q?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:[n?i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{onSubmit:w(ie),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(je,{name:"label",control:_,rules:{required:l("Label is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsx(Ut,{label:l("Label","kivicare-clinic-management-system"),placeholder:l("Dummy Data","kivicare-clinic-management-system"),required:!0,type:"text",isDisable:!1,error:T.label,value:H.value??"",onChange:H.onChange,showError:!1,className:"form-control"})}),T.label&&i.jsx("span",{className:"text-danger p",children:T.label.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"type",control:_,rules:{required:l("Type is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsxs("select",{className:"form-select select2-basic-single",value:H.value?JSON.stringify(H.value):"",onChange:B=>{const te=u.find(oe=>JSON.stringify(oe)===B.target.value);H.onChange(te||null)},children:[i.jsx("option",{value:"",children:l("Select Service Type","kivicare-clinic-management-system")}),u.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.value))]})}),T.type&&i.jsx("span",{className:"text-danger p",children:T.type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[l("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(je,{name:"status",control:_,rules:{required:l("Status is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsxs("select",{className:"form-select select2-basic-single",value:H.value?JSON.stringify(H.value):"",onChange:B=>{const te=Qo.find(oe=>JSON.stringify(oe)===B.target.value);H.onChange(te||null)},children:[i.jsx("option",{value:"",children:l("Select Status","kivicare-clinic-management-system")}),Qo.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.id))]})}),T.status&&i.jsx("span",{className:"text-danger p",children:T.status.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{b("/setting/listings"),s(!1),c(null)},children:l("Back","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?o?l("Updating...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system"):o?l("Update","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})}):i.jsxs("div",{className:"listing-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[l("Listing Data","kivicare-clinic-management-system"),O!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/listings-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[E("static_data_add")&&i.jsxs("button",{onClick:()=>b("/setting/listings/add"),className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add List","kivicare-clinic-management-system")})]}),P&&E("static_data_export")&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:R,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]}),i.jsx(ee,{})]}),P&&!E("static_data_export")&&i.jsxs("button",{onClick:R,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:l("Import Data","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-sm-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[i.jsx(ot,{placeholder:l("Select Type","kivicare-clinic-management-system"),options:u,onChange:H=>{g(B=>({...B,type:H?H.value:"",page:1}))},value:u.find(H=>H.value===h.type)||null,isClearable:!0,styles:{menuPortal:H=>({...H,zIndex:9999})}}),i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),options:Qo,getOptionLabel:H=>H.label,getOptionValue:H=>H.id,onChange:H=>{g(B=>({...B,status:H?H.id:"",page:1}))},value:Qo.find(H=>H.id===h.status)||null,isClearable:!0,styles:{menuPortal:H=>({...H,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search Anything","kivicare-clinic-management-system"),onChange:W})]})})]}),i.jsx(wn,{data:a,columns:I,isLoading:q,error:U,currentPage:le.currentPage,perPage:le.perPage,totalItems:le.total,lastPage:le.lastPage,onPageChange:H=>g(B=>({...B,page:H})),onPerPageChange:H=>g(B=>({...B,perPage:H,page:1})),enableSelection:!1})]}),i.jsx(Ar,{show:x,onHide:()=>v(!1),onReopenImport:()=>v(!0),onDataRefresh:G,context:"listing"})]})},Que=()=>{const[t,e]=f.useState(!1),{control:n,handleSubmit:s,watch:a,reset:r,formState:{errors:o}}=Xt({defaultValues:{enable:"off",only_number:"off",prefix_value:"",postfix_value:""}}),{data:c,isLoading:d,error:m}=bn("settings","patient-setting",{},{enabled:!0}),u=cn("settings","patient-setting"),{data:p}=Cn(),h=p?.data?.hideUtilityLinks,g=a("enable"),x=y=>({text:y==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:y==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"});f.useEffect(()=>{!c?.status||!c?.data||(e(!1),r(y=>{const b={...y,...Object.fromEntries(Object.entries(c.data).filter(([,j])=>j!=null&&j!==""))};return b.enable=b.enable===!0?"on":"off",b.only_number=b.only_number===!0?"on":"off",b}))},[c,r]);const v=async y=>{e(!0),y.enable=y.enable==="on",y.only_number=y.only_number==="on";try{const b=await u.mutateAsync(y);Ze.fire({icon:b.status?"success":"error",title:b.status?l("Success","kivicare-clinic-management-system"):l("Error","kivicare-clinic-management-system"),text:l(b.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}catch(b){console.error("Error submitting form:",b)}finally{e(!1)}};if(m){const y=typeof m=="string"?m:m?.response?.data?.message||m?.message||l("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:y,confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Patient Settings","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/patient-settings/",target:"_blank","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),d?i.jsx(CP,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body p-3",children:i.jsxs("form",{onSubmit:s(v),children:[i.jsx(je,{name:"enable",control:n,render:({field:y})=>i.jsx(ln,{label:l("Patient unique ID Setting","kivicare-clinic-management-system"),checked:y.value,onChange:y.onChange,badge:x(y.value),disabled:t})}),g==="on"&&i.jsxs(i.Fragment,{children:[i.jsx(je,{name:"only_number",control:n,render:({field:y})=>i.jsx(ln,{label:l("Show only numbers in patient unique ID","kivicare-clinic-management-system"),className:"my-3",checked:y.value,onChange:y.onChange,badge:x(y.value),disabled:t})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"prefix_value",control:n,render:({field:y})=>i.jsx(Ut,{label:l("Prefix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:l("e.g., PAT-","kivicare-clinic-management-system"),error:o.prefix_value,disabled:t})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"postfix_value",control:n,render:({field:y})=>i.jsx(Ut,{label:l("Postfix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:l("e.g., -001","kivicare-clinic-management-system"),error:o.postfix_value,disabled:t})})})]})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:l("Save","kivicare-clinic-management-system")})})]})})})]})})},Zue=()=>{const t=ze(),{data:e,isLoading:n}=bn("settings","payments-gateway",{},{enabled:!0}),{mutateAsync:s}=cn(),{data:a}=Cn(),r=a?.data?.hideUtilityLinks,o=async m=>{const u=m.status?"off":"on",p={paypal:"enablePaypal",woocommerce:"enableWooCommerce",manual:"enablePayLater",knit_pay:"enableKnitPay"};if(p[m.id])try{await s({module:"settings",key:`payment-gateway/${m.id}`,data:{id:m.id,[p[m.id]]:u}}),Et.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Status updated successfully.","kivicare-clinic-management-system"),position:"center",showConfirmButton:!1,timer:1500}),t.invalidateQueries({queryKey:[...Fn.details(),"settings","payments-gateway"]})}catch(h){console.error("Toggle Error:",h);const g=h?.response?.data?.message||h.message||l("Update failed","kivicare-clinic-management-system");Et.fire({icon:"error",title:l("Cannot Enable Gateway","kivicare-clinic-management-system"),text:g,position:"center",confirmButtonText:l("OK","kivicare-clinic-management-system")})}},c=In(),d=f.useMemo(()=>[c.accessor("name",{header:l("Payment method","kivicare-clinic-management-system"),cell:m=>i.jsx("h6",{className:"m-0",children:m.getValue()})}),c.accessor("status",{header:l("Status","kivicare-clinic-management-system"),cell:m=>i.jsx("div",{className:"form-check form-switch custom-switch-xl p-0",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!m.getValue(),onChange:()=>o(m.row.original),style:{cursor:"pointer"}})})}),c.display({id:"actions",header:l("Action","kivicare-clinic-management-system"),cell:m=>i.jsx(gt,{to:`/setting/payment/${m.row.original.id}`,className:"btn btn-link text-secondary fw-semibold p-0",children:l("Manage","kivicare-clinic-management-system")})})],[]);return i.jsxs("div",{className:"payment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Payment Setting","kivicare-clinic-management-system"),r!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/payment-settings/",target:"_blank",rel:"noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:e?.data||[],columns:d,enableSelection:!1,isLoading:n})})]})},XS=He.memo(({items:t,activeTab:e,onSelect:n,baseId:s})=>{const a=He.useRef(null),[r,o]=He.useState(!1),[c,d]=He.useState(!1),m=He.useCallback(()=>{const h=a.current;if(!h)return;const{scrollLeft:g,scrollWidth:x,clientWidth:v}=h;o(g>0),d(g<x-v-1)},[]);He.useEffect(()=>{m();const h=a.current;if(!h)return;const g=new ResizeObserver(m);return g.observe(h),()=>g.disconnect()},[t,m]);const u=()=>{const h=a.current;h&&(h.scrollBy({left:-200,behavior:"smooth"}),setTimeout(m,300))},p=()=>{const h=a.current;h&&(h.scrollBy({left:200,behavior:"smooth"}),setTimeout(m,300))};return i.jsxs("div",{className:"tab-nav-wrapper mb-4 position-relative",children:[r&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-left rounded-circle",onClick:u,"aria-label":l("Scroll left","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-left"})}),i.jsx("div",{ref:a,className:"tab-nav-scroll-container",onScroll:m,style:{overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-0",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:t.map(h=>{const g=typeof h=="string"?h:h.key,x=typeof h=="string"?h:h.name;return i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:`nav-link ${e===g?"active":""}`,id:`${s}-${g}-tab`,"data-bs-toggle":"tab","data-bs-target":`#${s}-${g}`,type:"button",role:"tab","aria-controls":`${s}-${g}`,"aria-selected":e===g,onClick:()=>n(g),children:x})},g)})})}),c&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-right rounded-circle",onClick:p,"aria-label":l("Scroll right","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-right"})})]})}),Xue=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks,{data:a,isLoading:r,error:o}=bn("settings","permission-setting",{},{enabled:e}),[c,d]=f.useState({}),m=ze(),u=f.useMemo(()=>[{key:"administrator",name:l("Administrator","kivicare-clinic-management-system")},{key:"clinic_admin",name:l("Clinic Admin","kivicare-clinic-management-system")},{key:"doctor",name:l("Doctor","kivicare-clinic-management-system")},{key:"patient",name:l("Patient","kivicare-clinic-management-system")},{key:"receptionist",name:l("Receptionist","kivicare-clinic-management-system")}],[]),p=f.useMemo(()=>[{key:"appointment_module",name:l("Appointment","kivicare-clinic-management-system"),permissions:[{key:"appointment_list",label:l("Appointment List","kivicare-clinic-management-system")},{key:"appointment_add",label:l("Appointment Add","kivicare-clinic-management-system")},{key:"appointment_edit",label:l("Appointment Edit","kivicare-clinic-management-system")},{key:"appointment_view",label:l("Appointment View","kivicare-clinic-management-system")},{key:"appointment_delete",label:l("Appointment Delete","kivicare-clinic-management-system")},{key:"appointment_export",label:l("Appointment Export","kivicare-clinic-management-system")},{key:"patient_appointment_status_change",label:l("Patient Appointment Status Change","kivicare-clinic-management-system")},{key:"appointment_cancel",label:l("Appointment Cancel","kivicare-clinic-management-system")}]},{key:"billing_module",name:l("Billing","kivicare-clinic-management-system"),permissions:[{key:"patient_bill_list",label:l("Patient Bill List","kivicare-clinic-management-system")},{key:"patient_bill_add",label:l("Patient Bill Add","kivicare-clinic-management-system")},{key:"patient_bill_edit",label:l("Patient Bill Edit","kivicare-clinic-management-system")},{key:"patient_bill_view",label:l("Patient Bill View","kivicare-clinic-management-system")},{key:"patient_bill_export",label:l("Patient Bill Export","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:l("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"clinic_module",name:l("Clinic","kivicare-clinic-management-system"),permissions:[{key:"clinic_list",label:l("Clinic List","kivicare-clinic-management-system")},{key:"clinic_add",label:l("Clinic Add","kivicare-clinic-management-system")},{key:"clinic_edit",label:l("Clinic Edit","kivicare-clinic-management-system")},{key:"clinic_delete",label:l("Clinic Delete","kivicare-clinic-management-system")},{key:"clinic_profile",label:l("Clinic Profile","kivicare-clinic-management-system")},{key:"clinic_resend_credential",label:l("Clinic Resend Credential","kivicare-clinic-management-system")},{key:"clinic_export",label:l("Clinic Export","kivicare-clinic-management-system")}]},{key:"clinical_detail_module",name:l("Clinical Detail","kivicare-clinic-management-system"),permissions:[{key:"medical_records_list",label:l("Medical Records List","kivicare-clinic-management-system")},{key:"medical_records_add",label:l("Medical Records Add","kivicare-clinic-management-system")},{key:"medical_records_edit",label:l("Medical Records Edit","kivicare-clinic-management-system")},{key:"medical_records_delete",label:l("Medical Records Delete","kivicare-clinic-management-system")},{key:"medical_records_view",label:l("Medical Records View","kivicare-clinic-management-system")}]},{key:"custom_field_module",name:l("Custom Field","kivicare-clinic-management-system"),permissions:[{key:"custom_field_list",label:l("Custom Field List","kivicare-clinic-management-system")},{key:"custom_field_add",label:l("Custom Field Add","kivicare-clinic-management-system")},{key:"custom_field_edit",label:l("Custom Field Edit","kivicare-clinic-management-system")},{key:"custom_field_delete",label:l("Custom Field Delete","kivicare-clinic-management-system")},{key:"custom_field_export",label:l("Custom Field Export","kivicare-clinic-management-system")}]},{key:"dashboard_module",name:l("Dashboard","kivicare-clinic-management-system"),permissions:[{key:"dashboard_total_patient",label:l("Dashboard Total Patient","kivicare-clinic-management-system")},{key:"dashboard_total_doctor",label:l("Dashboard Total Doctor","kivicare-clinic-management-system")},{key:"dashboard_total_appointment",label:l("Dashboard Total Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_revenue",label:l("Dashboard Total Revenue","kivicare-clinic-management-system")},{key:"dashboard_total_today_appointment",label:l("Dashboard Total Today Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_service",label:l("Dashboard Total Service","kivicare-clinic-management-system")},{key:"dashboard_total_clinic",label:l("Dashboard Total Clinic","kivicare-clinic-management-system")},{key:"dashboard",label:l("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:l("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:l("Home Page","kivicare-clinic-management-system")}]},{key:"doctor_module",name:l("Doctor","kivicare-clinic-management-system"),permissions:[{key:"doctor_list",label:l("Doctor List","kivicare-clinic-management-system")},{key:"doctor_add",label:l("Doctor Add","kivicare-clinic-management-system")},{key:"doctor_edit",label:l("Doctor Edit","kivicare-clinic-management-system")},{key:"doctor_delete",label:l("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_session",label:l("Doctor Session","kivicare-clinic-management-system")},{key:"doctor_service",label:l("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_resend_credential",label:l("Doctor Resend Credential","kivicare-clinic-management-system")},{key:"patient_review_get",label:l("Patient Review Get","kivicare-clinic-management-system")},{key:"doctor_export",label:l("Doctor Export","kivicare-clinic-management-system")}]},{key:"encounter_module",name:l("Encounter","kivicare-clinic-management-system"),permissions:[{key:"patient_encounter_list",label:l("Patient Encounter List","kivicare-clinic-management-system")},{key:"patient_encounter_add",label:l("Patient Encounter Add","kivicare-clinic-management-system")},{key:"patient_encounter_edit",label:l("Patient Encounter Edit","kivicare-clinic-management-system")},{key:"patient_encounter_view",label:l("Patient Encounter View","kivicare-clinic-management-system")},{key:"patient_encounter_delete",label:l("Patient Encounter Delete","kivicare-clinic-management-system")},{key:"patient_encounter_view_billing",label:l("Patient Encounter View Billing","kivicare-clinic-management-system")},{key:"patient_encounter_export",label:l("Patient Encounter Export","kivicare-clinic-management-system")}]},{key:"encounters_template_module",name:l("Encounter Template","kivicare-clinic-management-system"),permissions:[{key:"encounters_template_list",label:l("Encounters Template List","kivicare-clinic-management-system")},{key:"encounters_template_add",label:l("Encounters Template Add","kivicare-clinic-management-system")},{key:"encounters_template_edit",label:l("Encounters Template Edit","kivicare-clinic-management-system")},{key:"encounters_template_view",label:l("Encounters Template View","kivicare-clinic-management-system")},{key:"encounters_template_delete",label:l("Encounters Template Delete","kivicare-clinic-management-system")}]},{key:"holiday_module",name:l("Holiday","kivicare-clinic-management-system"),permissions:[{key:"clinic_schedule",label:l("Clinic Schedule","kivicare-clinic-management-system")},{key:"clinic_schedule_add",label:l("Clinic Schedule Add","kivicare-clinic-management-system")},{key:"clinic_schedule_edit",label:l("Clinic Schedule Edit","kivicare-clinic-management-system")},{key:"clinic_schedule_delete",label:l("Clinic Schedule Delete","kivicare-clinic-management-system")},{key:"clinic_schedule_export",label:l("Clinic Schedule Export","kivicare-clinic-management-system")}]},{key:"other_module",name:l("Other","kivicare-clinic-management-system"),permissions:[{key:"dashboard",label:l("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:l("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:l("Home Page","kivicare-clinic-management-system")},{key:"medical_records_view",label:l("Medical Records View","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:l("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"tax_module",name:l("Tax","kivicare-clinic-management-system"),permissions:[{key:"tax_list",label:l("Tax List","kivicare-clinic-management-system")},{key:"tax_add",label:l("Tax Add","kivicare-clinic-management-system")},{key:"tax_edit",label:l("Tax Edit","kivicare-clinic-management-system")},{key:"tax_delete",label:l("Tax Delete","kivicare-clinic-management-system")},{key:"tax_export",label:l("Tax Export","kivicare-clinic-management-system")}]},{key:"custom_form_module",name:l("Custom Form","kivicare-clinic-management-system"),permissions:[{key:"custom_form_list",label:l("Custom Form List","kivicare-clinic-management-system")},{key:"custom_form_add",label:l("Custom Form Add","kivicare-clinic-management-system")},{key:"custom_form_edit",label:l("Custom Form Edit","kivicare-clinic-management-system")},{key:"custom_form_view",label:l("Custom Form View","kivicare-clinic-management-system")},{key:"custom_form_delete",label:l("Custom Form Delete","kivicare-clinic-management-system")},{key:"change_password",label:l("Change Password","kivicare-clinic-management-system")}]},{key:"patient_module",name:l("Patient","kivicare-clinic-management-system"),permissions:[{key:"patient_list",label:l("Patient List","kivicare-clinic-management-system")},{key:"patient_add",label:l("Patient Add","kivicare-clinic-management-system")},{key:"patient_edit",label:l("Patient Edit","kivicare-clinic-management-system")},{key:"patient_delete",label:l("Patient Delete","kivicare-clinic-management-system")},{key:"patient_profile",label:l("Patient Profile","kivicare-clinic-management-system")},{key:"patient_resend_credential",label:l("Patient Resend Credential","kivicare-clinic-management-system")},{key:"patient_export",label:l("Patient Export","kivicare-clinic-management-system")},{key:"patient_clinic",label:l("Patient Clinic","kivicare-clinic-management-system")},{key:"patient_appointment",label:l("Patient Appointment","kivicare-clinic-management-system")},{key:"patient_appointment_report",label:l("Patient Report","kivicare-clinic-management-system")},{key:"patient_encounter",label:l("Patient Encounter","kivicare-clinic-management-system")}]},{key:"patient_report_module",name:l("Patient Reports","kivicare-clinic-management-system"),permissions:[{key:"patient_report",label:l("Patient Reports","kivicare-clinic-management-system")},{key:"patient_report_add",label:l("Patient Reports Add","kivicare-clinic-management-system")},{key:"patient_report_view",label:l("Patient Reports View","kivicare-clinic-management-system")},{key:"patient_report_delete",label:l("Patient Reports Delete","kivicare-clinic-management-system")},{key:"patient_report_edit",label:l("Patient Reports Edit","kivicare-clinic-management-system")}]},{key:"patient_review_module",name:l("Patient Review","kivicare-clinic-management-system"),permissions:[{key:"patient_review_add",label:l("Patient Review Add","kivicare-clinic-management-system")},{key:"patient_review_edit",label:l("Patient Review Edit","kivicare-clinic-management-system")},{key:"patient_review_get",label:l("Patient Review Get","kivicare-clinic-management-system")},{key:"patient_review_delete",label:l("Patient Review Delete","kivicare-clinic-management-system")}]},{key:"prescription_module",name:l("Prescription","kivicare-clinic-management-system"),permissions:[{key:"prescription_list",label:l("Prescription List","kivicare-clinic-management-system")},{key:"prescription_add",label:l("Prescription Add","kivicare-clinic-management-system")},{key:"prescription_edit",label:l("Prescription Edit","kivicare-clinic-management-system")},{key:"prescription_delete",label:l("Prescription Delete","kivicare-clinic-management-system")},{key:"prescription_export",label:l("Prescription Export","kivicare-clinic-management-system")}]},{key:"receptionist_module",name:l("Receptionist","kivicare-clinic-management-system"),permissions:[{key:"receptionist_list",label:l("Receptionist List","kivicare-clinic-management-system")},{key:"receptionist_add",label:l("Receptionist Add","kivicare-clinic-management-system")},{key:"receptionist_edit",label:l("Receptionist Edit","kivicare-clinic-management-system")},{key:"receptionist_delete",label:l("Receptionist Delete","kivicare-clinic-management-system")},{key:"receptionist_resend_credential",label:l("Receptionist Resend Credential","kivicare-clinic-management-system")},{key:"receptionist_export",label:l("Receptionist Export","kivicare-clinic-management-system")}]},{key:"service_module",name:l("Service","kivicare-clinic-management-system"),permissions:[{key:"service_list",label:l("Service List","kivicare-clinic-management-system")},{key:"service_add",label:l("Service Add","kivicare-clinic-management-system")},{key:"service_edit",label:l("Service Edit","kivicare-clinic-management-system")},{key:"service_delete",label:l("Service Delete","kivicare-clinic-management-system")},{key:"service_export",label:l("Service Export","kivicare-clinic-management-system")}]},{key:"session_module",name:l("Doctor Session","kivicare-clinic-management-system"),permissions:[{key:"doctor_session_list",label:l("Doctor Session List","kivicare-clinic-management-system")},{key:"doctor_session_add",label:l("Doctor Session Add","kivicare-clinic-management-system")},{key:"doctor_session_edit",label:l("Doctor Session Edit","kivicare-clinic-management-system")},{key:"doctor_session_delete",label:l("Doctor Session Delete","kivicare-clinic-management-system")},{key:"doctor_session_export",label:l("Doctor Session Export","kivicare-clinic-management-system")}]},{key:"static_data_module",name:l("Static/Listing Data","kivicare-clinic-management-system"),permissions:[{key:"static_data_list",label:l("Static Data List","kivicare-clinic-management-system")},{key:"static_data_add",label:l("Static Data Add","kivicare-clinic-management-system")},{key:"static_data_edit",label:l("Static Data Edit","kivicare-clinic-management-system")},{key:"static_data_export",label:l("Static Data Export","kivicare-clinic-management-system")}]}],[]),h=f.useMemo(()=>({administrator:{modules:p.filter(ae=>ae.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinic_module:["clinic_list","clinic_add","clinic_edit","clinic_delete","clinic_profile","clinic_resend_credential","clinic_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_edit","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["medical_records_view","patient_bill_delete"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},clinic_admin:{modules:p.filter(ae=>ae.key!=="clinic_module"&&ae.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_edit","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],other_module:["dashboard","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},doctor:{modules:p.filter(ae=>!["clinic_module","doctor_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_edit","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_appointment","dashboard_total_today_appointment","dashboard_total_service","dashboard_total_clinic"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},patient:{modules:p.filter(ae=>["appointment_module","billing_module","clinical_detail_module","encounter_module","other_module","patient_module","patient_report_module","patient_review_module","prescription_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_cancel","appointment_export"],billing_module:["patient_bill_list","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list"],encounter_module:["patient_encounter_list","patient_encounter_view","patient_encounter_export","patient_encounter_view_billing"],other_module:["dashboard","doctor_dashboard","change_password","medical_records_view","home_page"],patient_module:["patient_profile","patient_clinic"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],patient_review_module:["patient_review_add","patient_review_edit","patient_review_get","patient_review_delete"],prescription_module:["prescription_list","prescription_export"]}},receptionist:{modules:p.filter(ae=>!["clinic_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_edit","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_today_appointment","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","doctor_export","patient_review_get"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}}}),[p]),[g,x]=f.useState(u),[v,y]=f.useState("administrator"),[b,j]=f.useState(h.administrator.modules),[k,S]=f.useState(h.administrator.modules[0]?.key||""),{control:N,handleSubmit:_,setValue:w,watch:T}=Xt({defaultValues:{}}),A=T(`${v}.appointment_module.appointment_list`)??!0,M=T(`${v}.billing_module.patient_bill_list`)??!0,E=T(`${v}.service_module.service_list`)??!0,P=T(`${v}.prescription_module.prescription_list`)??!0,D=T(`${v}.clinical_detail_module.medical_records_list`)??!0,O=T(`${v}.static_data_module.static_data_list`)??!0,F=T(`${v}.holiday_module.clinic_schedule`)??!0,q=T(`${v}.encounter_module.patient_encounter_list`)??!0,U=T(`${v}.receptionist_module.receptionist_list`)??!0,K=T(`${v}.doctor_module.doctor_list`)??!0,ne=T(`${v}.custom_field_module.custom_field_list`)??!0,Y=T(`${v}.session_module.doctor_session_list`)??!0,fe=T(`${v}.clinic_module.clinic_list`)??!0,le=T(`${v}.dashboard_module.dashboard_total_patient`)??!0,W=T(`${v}.patient_report_module.patient_report`)??!0,z=T(`${v}.patient_module.patient_list`)??!0,ie=T(`${v}.tax_module.tax_list`)??!0,re=T(`${v}.custom_form_module.custom_form_list`)??!0,de=T(`${v}.encounters_template_module.encounters_template_list`)??!0,[L,Q]=f.useState(!1),V=cn("settings","permission-setting");f.useEffect(()=>{if(a?.status&&a?.data){const ae=a.data;d(ae);const I=u.map(B=>({...B,capabilities:ae[B.key]?.capabilities||{}}));x(I),y("administrator"),j(h.administrator.modules),S(h.administrator.modules[0]?.key);const H={};u.forEach(B=>{const te=B.key;(h[te]?.modules||[]).forEach(ye=>{const me=ye.key;(h[te]?.permissions[me]||[]).forEach(Ce=>{const he=ae[te]?.capabilities?.[me]?.[Ce];H[`${te}.${me}.${Ce}`]=he!==void 0?he:!0})})}),Object.entries(H).forEach(([B,te])=>w(B,te))}},[a,w,u,h]);const Z=f.useCallback(ae=>{y(ae);const I=h[ae]?.modules||[];j(I),S(I[0]?.key||"")},[h]);f.useEffect(()=>{c&&c[v]&&(h[v]?.modules||[]).forEach(I=>{const H=I.key;(h[v]?.permissions[H]||[]).forEach(te=>{const oe=c[v]?.capabilities?.[H]?.[te];w(`${v}.${H}.${te}`,oe!==void 0?oe:!0)})})},[v,c,h,w]);const X=f.useCallback((ae,I)=>{const H=p.find(te=>te.key===I)?.permissions||[],B=h[ae]?.permissions[I]||[];return H.filter(te=>B.includes(te.key)).map(te=>({key:te.key,label:te.label,value:c[ae]?.capabilities?.[I]?.[te.key]||!1}))},[p,h,c]),R=ae=>({text:ae===!0?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:ae===!0?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),G=f.useCallback((ae,I,H)=>{const B={};return Object.entries(ae).forEach(([te,oe])=>{B[te]={name:I[te]?.name||te,capabilities:{}},Object.entries(oe).forEach(([ye,me])=>{B[te].capabilities[ye]={...me}})}),{data:B,type:H}},[]),ee=f.useCallback(async ae=>{try{if(!ae||Object.keys(ae).length===0){Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("No permission data to save","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")});return}Q(!0);const I=G(ae,c,v);if(!I.data||Object.keys(I.data).length===0)throw new Error(l("Invalid permission data structure","kivicare-clinic-management-system"));const H=await V.mutateAsync(I);H.status!==!0?(Q(!1),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(H.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})):(Q(!1),m.invalidateQueries(["config"]),Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(H.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}))}catch(I){Q(!1),console.error("Failed to save settings:",I);const H=I?.response?.data?.message||I?.message||l("Failed to save permission settings","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(H,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}},[G,c,v,V]);if(o){let ae;return typeof o=="string"?ae=o:o?.response?.data?.message?ae=o.response.data.message:o?.message?ae=o.message:ae=l("An unknown error occurred","kivicare-clinic-management-system"),i.jsx(Ze,{icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(ae,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsxs("div",{className:`permission-setting${e?"":" p-4 position-relative overflow-hidden z-0"}`,children:[!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Permission Setting","kivicare-clinic-management-system")," "," ",s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/permission-settings/",target:"_blank",rel:"noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&(r||L)&&i.jsx(jP,{}),i.jsx("div",{className:"permission-setting-tabs",children:i.jsxs("form",{onSubmit:_(ee),children:[i.jsx(XS,{items:g,activeTab:v,onSelect:Z,baseId:"role"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",id:`role-${v}`,role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx(XS,{items:b,activeTab:k,onSelect:S,baseId:"module"}),i.jsx("div",{className:"tab-content mt-4 ",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",id:`module-${k}`,role:"tabpanel",children:X(v,k).map(ae=>{let I=!1;return k==="appointment_module"&&ae.key!=="appointment_list"?I=!A:k==="billing_module"&&ae.key!=="patient_bill_list"?I=!M:k==="service_module"&&ae.key!=="service_list"?I=!E:k==="prescription_module"&&ae.key!=="prescription_list"?I=!P:k==="clinical_detail_module"&&ae.key!=="medical_records_list"?I=!D:k==="static_data_module"&&ae.key!=="static_data_list"?I=!O:k==="holiday_module"&&ae.key!=="clinic_schedule"?I=!F:k==="encounter_module"&&ae.key!=="patient_encounter_list"?I=!q:k==="receptionist_module"&&ae.key!=="receptionist_list"?I=!U:k==="doctor_module"&&ae.key!=="doctor_list"?I=!K:k==="custom_field_module"&&ae.key!=="custom_field_list"?I=!ne:k==="session_module"&&ae.key!=="doctor_session_list"?I=!Y:k==="clinic_module"&&ae.key!=="clinic_list"?I=!fe:k==="dashboard_module"&&ae.key!=="dashboard_total_patient"?I=!le:k==="encounters_template_module"&&ae.key!=="encounters_template_list"?I=!de:k==="patient_module"&&ae.key!=="patient_list"?I=!z:k==="patient_report_module"&&ae.key!=="patient_report"?I=!W:k==="tax_module"&&ae.key!=="tax_list"?I=!ie:k==="custom_form_module"&&ae.key!=="custom_form_list"&&(I=!re),i.jsx(je,{name:`${v}.${k}.${ae.key}`,control:N,render:({field:H})=>i.jsx(ln,{label:ae.label,checked:H.value,onChange:H.onChange,badge:R(H.value),className:"mb-2",inputClassName:"mb-2",disabled:I})},ae.key)})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:L,children:L?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save","kivicare-clinic-management-system")})})]})})]})},JS=({isOpen:t,onClose:e,isLoading:n,messageData:s,setMessageData:a,onSubmit:r,disabled:o=!1,mode:c="sms",requiredFields:d=[]})=>{if(!t)return null;const m=o||n||!s?.phoneNumber||!s?.messageContent||d.some(g=>!g.value),u=g=>{const{name:x,value:v}=g.target;a(y=>({...y,[x]:v}))},p=c==="whatsapp"?l("Test WhatsApp Message","kivicare-clinic-management-system"):l("Test SMS","kivicare-clinic-management-system"),h=c==="whatsapp"?l("Welcome to KiviCare, This is test WhatsApp message","kivicare-clinic-management-system"):l("Welcome to KiviCare, This is test SMS message","kivicare-clinic-management-system");return i.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:i.jsx("div",{className:"modal-dialog",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:p}),i.jsx("button",{type:"button",className:"btn-close",onClick:e,disabled:n,"aria-label":l("Close","kivicare-clinic-management-system"),children:i.jsx("i",{class:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Phone Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"phoneNumber",className:"form-control",value:s.phoneNumber||"",onChange:u,placeholder:l("Enter phone number with country code (e.g., +1234567890)","kivicare-clinic-management-system"),disabled:n})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:l("Message Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"messageContent",className:"form-control",rows:"4",value:s.messageContent||h,onChange:u,disabled:n})]}),i.jsx("div",{className:"alert alert-warning mb-0",children:c==="whatsapp"?l("Note: Standard Twilio WhatsApp Charges Applicable","kivicare-clinic-management-system"):l("Note: Standard Twilio SMS Charges Applicable","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:n,children:l("Cancel","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-primary ms-2",onClick:g=>{g.preventDefault(),r()},disabled:m,children:[n&&i.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),l("Send Test","kivicare-clinic-management-system")]})]})]})})})},Fr=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(t,"kivicare-clinic-management-system")}),e]})}),e_=({title:t,text:e})=>i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:l(t,"kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 text-heading",children:l(e,"kivicare-clinic-management-system")})]})}),Jue=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),[n,s]=f.useState(!1),[a,r]=f.useState(""),o=cn("settings","pro-settings"),{data:c}=Cn(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:p}=bn("settings","pro-settings",{},{enabled:e}),{control:h,handleSubmit:g,watch:x,reset:v,formState:{errors:y}}=Xt({defaultValues:{site_logo:"",site_mini_logo:"",rtl:!1,themeColor:"#007bff",primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",wordpressLogo:"",wordpressLogoStatus:!1,enabledCustomizableSms:!1,enabledCustomizableWhatsApp:!1,enableTwilioSms:!1,twilioSmsAccountSID:"",twilioSmsAuthToken:"",twilioSmsPhoneNumber:"",enableTwilioWhatsApp:!1,twilioWhatsAppAccountSID:"",twilioWhatsAppAuthToken:"",twilioWhatsAppPhoneNumber:"",googleCalendarConfiguration:!1,googleCalendarClientId:"",googleCalendarClientSecret:"",appName:"",patientCalendarEvent:!1,clinicEncounterPrint:!1,doctorEncounterPrint:!1,hideEncounterClinicalDetails:!1,copyrightText:"KiviCare - Clinic and Patient Management System (EHR)",AdminSlug:"",clinicAdminSlug:"",doctorSlug:"",receptionistSlug:"",patientSlug:""}});f.useEffect(()=>{if(m){const L=Z=>Z===!0||Z==="true"||Z===1||Z==="1"||Z==="yes"||Z==="on",Q=["rtl","wordpressLogoStatus","enabledCustomizableSms","enabledCustomizableWhatsApp","enableTwilioSms","enableTwilioWhatsApp","googleCalendarConfiguration","patientCalendarEvent","clinicEncounterPrint","doctorEncounterPrint","hideEncounterClinicalDetails"],V={...m};Q.forEach(Z=>{Z in V&&(V[Z]=L(V[Z]))}),v(Z=>({...Z,...V})),(V.rtl===!0||V.rtl==="true")&&(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode"))}},[m,v]);const b=()=>{const L={primary:x("primaryColor"),secondary:x("secondaryColor"),success:x("successColor"),warning:x("warningColor"),danger:x("dangerColor"),info:x("infoColor"),"body-bg":x("bodyBg"),"body-color":x("bodyColor"),"border-color":x("borderColor"),"heading-color":x("headingColor"),"gray-900":x("cardColor")},Q=Object.fromEntries(Object.entries(L).filter(([V,Z])=>Z&&Z.trim()!==""));iC(Q)},j=x("googleCalendarConfiguration"),k=x("wordpressLogoStatus"),S=x("enableTwilioSms"),N=x("enableTwilioWhatsApp"),_=L=>({text:L===!0||L==="on"?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:L===!0||L==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),w=[{key:"clinicEncounterPrint",label:l("Include Encounter Clinical Details In Prescription Print","kivicare-clinic-management-system")},{key:"doctorEncounterPrint",label:l("Include Encounter Custom Fields In Prescription Print","kivicare-clinic-management-system")},{key:"hideEncounterClinicalDetails",label:l("Hide Encounter Clinical Details To Patient","kivicare-clinic-management-system")}],T=[{key:"googleCalendarClientId",label:l("Google Calendar Client Id","kivicare-clinic-management-system"),placeholder:l("Enter Google Calendar Client Id","kivicare-clinic-management-system"),isInteger:!1},{key:"googleCalendarClientSecret",label:l("Google Calendar Client Secret","kivicare-clinic-management-system"),placeholder:l("Enter Google Calendar Client Secret","kivicare-clinic-management-system"),isInteger:!1},{key:"appName",label:l("App Name","kivicare-clinic-management-system"),placeholder:l("Enter App Name","kivicare-clinic-management-system"),isInteger:!1}];l("Step 1:","kivicare-clinic-management-system"),l("Please refer the following link for the setup.","kivicare-clinic-management-system");const A=[{key:"twilioSmsAccountSID",label:l("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:l("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsAuthToken",label:l("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:l("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsPhoneNumber",label:l("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:l("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],M=[{key:"twilioWhatsAppAccountSID",label:l("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:l("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppAuthToken",label:l("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:l("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppPhoneNumber",label:l("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:l("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],E=[{title:l("Step 1:","kivicare-clinic-management-system"),text:l("You can sign up for a free Twilio trial account here: Step 1: You can sign up for a free Twilio trial account here","kivicare-clinic-management-system")},{title:l("Step 2:","kivicare-clinic-management-system"),text:l("To get the Twilio CLI connected to your account. Visit , Twilo SMS portal and youll find your unique Account SID and Auth Token to provide to the CLI.","kivicare-clinic-management-system")},{title:l("Step 3:","kivicare-clinic-management-system"),text:l("Copy and Paste ACCOUNT SID and AUTH TOKEN and click on save button and here you go.","kivicare-clinic-management-system")},{title:l("Step 4 (Optional):","kivicare-clinic-management-system"),text:l("To get your first Twilio phone number for sending sms. Visit , head on over to the console and you will get phone number to send SMS if you dont want any particular number to send message use your SID.","kivicare-clinic-management-system")},{title:l("Important Note:","kivicare-clinic-management-system"),text:l("Reciever(doctor/patient) Phone/contact No must be in twillo specific format ([+] [country code] [mobile number] ) , Please Refer here for more details","kivicare-clinic-management-system")}],P=L=>L?String(L).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-"):"",D=L=>{const Q=L.key;L.ctrlKey||L.metaKey||L.altKey||["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(Q)||/^[a-z0-9-]$/.test(Q)||L.preventDefault()},O=cn("settings","sms-whatsapp-template/test"),[F,q]=f.useState(!1),[U,K]=f.useState(!1),[ne,Y]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test SMS message"}),[fe,le]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test WhatsApp message"}),W=async()=>{try{s(!0),O.mutate({type:"sms",mobile:ne.phoneNumber,content:ne.messageContent},{onSuccess:()=>{Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Test SMS sent successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),q(!1)},onError:L=>{Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:L.message||l("Failed to send test SMS","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onSettled:()=>{s(!1)}})}catch{s(!1)}},z=async()=>{try{s(!0),O.mutate({type:"whatsapp",mobile:fe.phoneNumber,content:fe.messageContent},{onSuccess:()=>{Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Test WhatsApp message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),K(!1)},onError:L=>{Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:L?.response?.data?.message||L?.message||l("Failed to send test WhatsApp message","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})},onSettled:()=>{s(!1)}})}catch{s(!1)}},ie=()=>{Ze.fire({title:l("Reset Color Settings","kivicare-clinic-management-system"),text:l("Are you sure you want to reset all color settings to their default values?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, reset","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system")}).then(L=>{L.isConfirmed&&(v(Q=>({...Q,primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff"})),b())})},re=L=>!L||/^\d+$/.test(String(L))?!0:l("Invalid parameter","kivicare-clinic-management-system"),de=async L=>{try{r(""),s(!0);const Q={primary:L.primaryColor,secondary:L.secondaryColor,success:L.successColor,warning:L.warningColor,danger:L.dangerColor,info:L.infoColor,"body-bg":L.bodyBg,"body-color":L.bodyColor,"border-color":L.borderColor,"heading-color":L.headingColor,"gray-900":L.cardColor},V=Object.fromEntries(Object.entries(Q).filter(([G,ee])=>ee&&ee.trim()!=="")),Z=iC(V),X={...L,site_logo:L.site_logo&&L.site_logo.id?L.site_logo.id:null,site_mini_logo:L.site_mini_logo&&L.site_mini_logo.id?L.site_mini_logo.id:null,wordpressLogo:L.wordpressLogo&&L.wordpressLogo.id?L.wordpressLogo.id:null,clinicEncounterPrint:L.clinicEncounterPrint,doctorEncounterPrint:L.doctorEncounterPrint,hideEncounterClinicalDetails:L.hideEncounterClinicalDetails,rtl:L.rtl,customNotification:[{type:"sms",status:L.enabledCustomizableSms?"yes":"no"},{type:"whatsapp",status:L.enabledCustomizableWhatsApp?"yes":"no"}],twilioSms:{account_id:L.twilioSmsAccountSID||"",auth_token:L.twilioSmsAuthToken||"",to_number:L.twilioSmsPhoneNumber||"",enableSMS:L.enableTwilioSms},twilioWhatsApp:{account_id:L.twilioWhatsAppAccountSID||"",auth_token:L.twilioWhatsAppAuthToken||"",to_number:L.twilioWhatsAppPhoneNumber||"",enableWhatsApp:L.enableTwilioWhatsApp},googleAccount:{client_id:L.googleCalendarClientId,client_secret:L.googleCalendarClientSecret,app_name:L.appName,enableCal:!!L.googleCalendarConfiguration},generatedColors:Z},R=await o.mutateAsync(X);R.status!==!0?(s(!1),r(R.message),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(R.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})):(s(!1),r(""),L.rtl===!0||L.rtl==="true"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode")):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang","en"),document.body.classList.remove("rtl-mode")),Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(R.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}))}catch(Q){s(!1),console.error("Failed to save settings:",Q)}};if(p){let L;typeof p=="string"?L=p:p?.response?.data?.message?L=p.response.data.message:p?.message?L=p.message:L=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(L,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsx(i.Fragment,{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`pro-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Pro Settings","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/pro-settings/",target:"_blank",rel:"noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"top",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&u&&i.jsx(bP,{}),!u&&i.jsxs("form",{onSubmit:g(de),children:[i.jsxs(Fr,{title:l("Theme Setting","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"rtl",control:h,render:({field:L})=>i.jsx(ln,{label:l("RTL Mode","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.rtl})}),i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"site_logo",control:h,render:({field:L})=>i.jsx(Xv,{label:l("Site Logo","kivicare-clinic-management-system"),value:L.value,onChange:L.onChange,className:"col-md-6",preview:!!L.value,disabled:n})})})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"site_mini_logo",control:h,render:({field:L})=>i.jsx(Xv,{label:l("Site Mini Logo","kivicare-clinic-management-system"),value:L.value,onChange:L.onChange,className:"col-md-6",preview:!!L.value,disabled:n})})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[l("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:ie,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"primaryColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Primary Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.primaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"secondaryColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Secondary Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.secondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"successColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Success Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.successColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"warningColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Warning Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.warningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"dangerColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Danger Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.dangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"infoColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Info Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.infoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"bodyBg",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Body Background Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.bodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"bodyColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Body Text Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.bodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"borderColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Border Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.borderColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"headingColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Heading Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.headingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(je,{name:"cardColor",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Card Color","kivicare-clinic-management-system"),type:"color",value:L.value,onChange:Q=>{L.onChange(Q),b()},disabled:n,error:y?.cardColor,className:"form-control-color"})})})})]})]})]})]}),i.jsxs(Fr,{title:l("Dashboard Slug","kivicare-clinic-management-system"),children:[i.jsx("div",{className:"col-12",children:i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:l("Note :","kivicare-clinic-management-system")})," ",l("If you change slug here then you need to also change in general setting login redirect url slug","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"row gy-4 ",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"AdminSlug",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Admin Slug","kivicare-clinic-management-system"),value:L.value,onChange:Q=>L.onChange(P(Q?.target?Q.target.value:Q)),onKeyDown:D,placeholder:l("e.g. kivicare-admin","kivicare-clinic-management-system"),error:y?.AdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"clinicAdminSlug",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Clinic Admin Slug","kivicare-clinic-management-system"),value:L.value,onChange:Q=>L.onChange(P(Q?.target?Q.target.value:Q)),onKeyDown:D,placeholder:l("e.g. kivicare-clinic-admin","kivicare-clinic-management-system"),error:y?.clinicAdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"doctorSlug",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Doctor Slug","kivicare-clinic-management-system"),value:L.value,onChange:Q=>L.onChange(P(Q?.target?Q.target.value:Q)),onKeyDown:D,placeholder:l("e.g. kivicare-doctor","kivicare-clinic-management-system"),error:y?.doctorSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"receptionistSlug",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Receptionist Slug","kivicare-clinic-management-system"),value:L.value,onChange:Q=>L.onChange(P(Q?.target?Q.target.value:Q)),onKeyDown:D,placeholder:l("e.g. kivicare-receptionist","kivicare-clinic-management-system"),error:y?.receptionistSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(je,{name:"patientSlug",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Patient Slug","kivicare-clinic-management-system"),value:L.value,onChange:Q=>L.onChange(P(Q?.target?Q.target.value:Q)),onKeyDown:D,placeholder:l("e.g. kivicare-patient","kivicare-clinic-management-system"),error:y?.patientSlug})})})]})]}),i.jsxs(Fr,{title:l("WordPress Logo","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"wordpressLogoStatus",control:h,render:({field:L})=>i.jsx(ln,{label:l("Enable WordPress Logo","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.wordpressLogo})}),k||k=="on"?i.jsx(je,{name:"wordpressLogo",control:h,render:({field:L})=>i.jsx(Xv,{label:l("WordPress Logo","kivicare-clinic-management-system"),value:L.value,onChange:L.onChange,className:"col-md-6",preview:!!L.value,disabled:n})}):i.jsx(i.Fragment,{})]}),i.jsxs(Fr,{title:l("Custom Notification","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"enabledCustomizableSms",control:h,render:({field:L})=>i.jsx(ln,{label:l("Enable SMS","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.enabledCustomizableSms})}),i.jsx(je,{name:"enabledCustomizableWhatsApp",control:h,render:({field:L})=>i.jsx(ln,{label:l("Enable whatsApp","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.enabledCustomizableWhatsApp})})]}),i.jsxs(Fr,{title:l("Twilio Account Settings","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"enableTwilioSms",control:h,render:({field:L})=>i.jsx(ln,{label:l("SMS Configuration","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.enableTwilioSms})}),S||S=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:A.map(L=>i.jsx("div",{className:"col-lg-4",children:i.jsx(je,{name:L.key,control:h,rules:{required:S||S=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:L.isInteger&&(S||S=="on")?re:void 0},render:({field:Q})=>i.jsx(Ut,{label:l(L.label,"kivicare-clinic-management-system"),value:Q.value,onChange:Q.onChange,placeholder:l(L.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[L.key]})})},L.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>q(!0),disabled:n||!x("twilioSmsAccountSID")||!x("twilioSmsAuthToken"),children:[i.jsx("i",{className:"ph ph-chat-circle-text"})," ",l("Send Test SMS","kivicare-clinic-management-system")]})}),i.jsx(JS,{isOpen:F,onClose:()=>q(!1),isLoading:n,messageData:ne,setMessageData:Y,onSubmit:W,mode:"sms",requiredFields:[{value:x("twilioSmsAccountSID"),label:"Account SID"},{value:x("twilioSmsAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Twilio SMS guide","kivicare-clinic-management-system")}),E.map(L=>i.jsx(e_,{title:L.title,text:L.text}))]})]}):i.jsx(i.Fragment,{}),i.jsx(je,{name:"enableTwilioWhatsApp",control:h,render:({field:L})=>i.jsx(ln,{label:l("WhatsApp Configuration","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.enableTwilioWhatsApp})}),N||N=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:M.map(L=>i.jsx("div",{className:"col-lg-4",children:i.jsx(je,{name:L.key,control:h,rules:{required:N||N=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:L.isInteger&&(N||N=="on")?re:void 0},render:({field:Q})=>i.jsx(Ut,{label:l(L.label,"kivicare-clinic-management-system"),value:Q.value,onChange:Q.onChange,placeholder:l(L.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[L.key]})})},L.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>K(!0),disabled:n||!x("twilioWhatsAppAccountSID")||!x("twilioWhatsAppAuthToken"),children:[i.jsx("i",{className:"ph ph-whatsapp-logo"})," ",l("Send Test WhatsApp","kivicare-clinic-management-system")]})}),i.jsx(JS,{isOpen:U,onClose:()=>K(!1),isLoading:n,messageData:fe,setMessageData:le,onSubmit:z,mode:"whatsapp",requiredFields:[{value:x("twilioWhatsAppAccountSID"),label:"Account SID"},{value:x("twilioWhatsAppAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:l("Twilio WhatsApp guide","kivicare-clinic-management-system")}),E.map(L=>i.jsx(e_,{title:L.title,text:L.text}))]})]}):i.jsx(i.Fragment,{})]}),i.jsxs(Fr,{title:l("Google Account Settings","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"googleCalendarConfiguration",control:h,render:({field:L})=>i.jsx(ln,{label:l("Google Calendar Configuration","kivicare-clinic-management-system"),className:"mb-3",checked:L.value,onChange:L.onChange,badge:_(L.value),disabled:n,error:y?.googleCalendarConfiguration})}),j||j=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:T.map(L=>i.jsx("div",{className:"col-lg-4",children:i.jsx(je,{name:L.key,control:h,rules:{required:j||j=="on"?l("This field is required","kivicare-clinic-management-system"):!1,validate:L.isInteger&&(j||j=="on")?re:void 0},render:({field:Q})=>i.jsx(Ut,{label:l(L.label,"kivicare-clinic-management-system"),value:Q.value,onChange:Q.onChange,placeholder:l(L.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[L.key]})})},L.key))}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:l("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:m?.googleCalendarRedirectionUrl||"",readOnly:!0,disabled:n,placeholder:l("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{m?.googleCalendarRedirectionUrl&&(navigator.clipboard.writeText(m.googleCalendarRedirectionUrl),Ze.fire({icon:"success",title:l("Copied!","kivicare-clinic-management-system"),text:l("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}))},disabled:!m?.googleCalendarRedirectionUrl||n,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),l("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})})]}):i.jsx(i.Fragment,{}),i.jsx(je,{name:"patientCalendarEvent",control:h,render:({field:L})=>i.jsx(ln,{label:l("Setting for add event in calendar for patient.","kivicare-clinic-management-system"),checked:L.value,onChange:L.onChange,disabled:n,error:y?.patientCalendarEvent})})]}),i.jsx(Fr,{title:l("Encounters Settings","kivicare-clinic-management-system"),children:w.map(L=>i.jsx(je,{name:L.key,control:h,render:({field:Q})=>i.jsx(ln,{label:l(L.label,"kivicare-clinic-management-system"),className:"mb-3",checked:Q.value,onChange:Q.onChange,badge:_(Q.value),disabled:n,error:y?.[L.key]})}))}),i.jsx(Fr,{title:l("Copyright","kivicare-clinic-management-system"),children:i.jsx(je,{name:"copyrightText",control:h,render:({field:L})=>i.jsx(Ut,{label:l("Change Copyright Text","kivicare-clinic-management-system"),placeholder:l("Western State Pain Institute","kivicare-clinic-management-system"),value:L.value,onChange:L.onChange,error:y?.copyrightText})})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})})})},ehe=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{data:n}=Cn(),s=n?.data?.hideUtilityLinks,a=cn("settings","sms-whatsapp-template"),r=cn("settings","sms-whatsapp-template/test"),[o,c]=f.useState(!1),[d,m]=f.useState(""),[u,p]=f.useState(!1),[h,g]=f.useState(!1),[x,v]=f.useState([]),y=()=>setShow(!1),b=()=>{p(!0),setTimeout(()=>g(!0),10)},j=()=>{g(!1),setTimeout(()=>p(!1),300)},{data:k,isLoading:S,error:N}=bn("settings","sms-whatsapp-template",{},{enabled:e}),_=M=>{const E=[];return!M||typeof M!="object"||Object.keys(M).forEach(P=>{(Array.isArray(M[P])?M[P]:[]).forEach(O=>{E.push({...O,user_type:P})})}),E};f.useEffect(()=>{if(!k?.status||!k.data){v([]);return}v(_(k.data.data))},[k]);const w=async(M,E)=>{c(!0);const P={ID:M,post_status:E==="publish"?"draft":"publish"};a.mutate(P,{onSuccess:()=>{v(D=>D.map(O=>O.ID===M?{...O,post_status:P.post_status}:O)),c(!1)},onError:D=>{console.error("Error submitting form:",D),c(!1)}})},T=In(),A=f.useMemo(()=>[T.accessor("post_title",{id:"templates",header:()=>l("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:M.getValue()})})}),T.accessor("user_type",{id:"recipient",header:()=>l("Recipient(s)","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:M.getValue()})})}),T.accessor("post_status",{header:()=>l("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx(ln,{checked:M.getValue()==="publish",onChange:()=>w(M.row.original.ID,M.getValue()),inputClassName:"text-center"})}),T.accessor("ID",{id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx(gt,{to:`/setting/sms-whatsapp-template/edit/${M.getValue()}`,className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:l("Manage","kivicare-clinic-management-system")})})],[]);if(N){const M=typeof N=="string"?N:N?.response?.data?.message||N?.message||l("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(M,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-smswhatsapp-template",role:"tabpanel","aria-labelledby":"v-pills-smswhatsapp-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`sms-template-setting${e?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[l("SMS/WhatsApp Template","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sms-whatsapp-template-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":l("Help","kivicare-clinic-management-system"),className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[i.jsx("button",{className:"btn btn-secondary",disabled:!e,onClick:()=>{e&&(m("sms"),b())},children:l("Send Test SMS","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",disabled:!e,onClick:()=>{e&&(m("whatsapp"),b())},children:l("Send Test Whatsapp","kivicare-clinic-management-system")})]}),!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:x,columns:A,enableSelection:!1,isLoading:o||S})})]})}),u&&i.jsxs(st,{show:h,onHide:y,centered:!0,className:"modal",tabIndex:"-1",role:"dialog",children:[i.jsxs(st.Header,{children:[i.jsx("h5",{className:"modal-title",children:d==="sms"?l("Send Test SMS","kivicare-clinic-management-system"):l("Send Test Whatsapp","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:j,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(st.Body,{children:i.jsxs("form",{onSubmit:M=>{M.preventDefault();const E=new FormData(M.target),P=E.get("mobile"),D=E.get("content");r.mutate({type:d,mobile:P,content:D},{onSuccess:()=>{Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Test message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),j()},onError:O=>{const F=O?.response?.data?.message||O?.message||l("Something went wrong","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:F,confirmButtonText:l("OK","kivicare-clinic-management-system")})}})},children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"mobile",className:"form-label",children:l("Mobile Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"mobile",className:"form-control",required:!0})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"content",className:"form-label",children:l("Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"content",className:"form-control",rows:"3",required:!0})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:j,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r.isLoading,children:r.isLoading?l("Sending...","kivicare-clinic-management-system"):l("Send","kivicare-clinic-management-system")})]})]})})]})]})},the=()=>{const{id:t}=Wt(),e=dn(),{isAddonActive:n}=ht(),s=n("kiviPro"),[a,r]=f.useState(""),[o,c]=f.useState(""),[d,m]=f.useState(""),[u,p]=f.useState([]),[h,g]=f.useState(!0),[x,v]=f.useState(!1),y=cn("settings","sms-whatsapp-template"),{data:b,isLoading:j,error:k}=bn("settings","sms-whatsapp-template",{id:t},{enabled:s&&!!t,select:A=>A?.status&&A.data?{status:A.status,message:A.message,data:{post_content:A.data.templatePost?.post_content||"",post_status:A.data.templatePost?.post_status||"draft",post_title:A.data.templatePost?.post_title||"",content_sid:A.data.templatePost?.content_sid||"",dynamic_keys:A.data.dynamic_keys||[]}}:A});f.useEffect(()=>{if(b?.status&&b.data&&!x){const{post_content:A,content_sid:M,post_title:E,dynamic_keys:P}=b.data;r(A),c(M),m(E),p(P.map(D=>D.replace(/[{}]/g,""))),v(!0),g(!1)}},[b,x]),f.useEffect(()=>{if(k){let A;typeof k=="string"?A=k:k?.response?.data?.message?A=k.response.data.message:k?.message?A=k.message:A=l("Failed to load template","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:l("Ok","kivicare-clinic-management-system")}).then(()=>e(-1))}},[k,e]);const S=A=>{x&&r(A)},N=f.useCallback(A=>{navigator.clipboard.writeText(`{{${A}}}`),Ze.fire({title:l("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},[]),_=f.useCallback(async()=>{try{if(!x)return;g(!0);const A={ID:t,content_sid:o,post_content:a},M=await y.mutateAsync(A);M.status!==!0?Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(M.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):(Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(M.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}),e("/setting/sms-whatsapp-template"))}catch(A){Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(A.message||"Failed to save template","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{g(!1)}},[t,o,a,y,e,x]),w={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},T=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return j&&!x||!b?i.jsx(of,{}):i.jsxs("div",{className:"edit-template-page",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:l("Edit SMS/WhatsApp Template","kivicare-clinic-management-system")}),i.jsxs("button",{onClick:()=>e("/setting/sms-whatsapp-template"),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:h,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:l("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx("h5",{className:"mb-0",children:d})}),i.jsx("div",{className:"row mb-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Content SID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Enter Content SID","kivicare-clinic-management-system"),value:o,onChange:A=>c(A.target.value),disabled:h||!x})]})})}),u.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"form-label",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Qe,{placement:"top",overlay:M=>i.jsx(ut,{...M,children:l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>N(A),disabled:h||!x,children:[A,i.jsx("i",{className:"ph ph-copy"})]},A)},A))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:l("Template Content","kivicare-clinic-management-system")}),i.jsx($o,{theme:"snow",value:a,onChange:S,modules:w,formats:T,readOnly:h||!x})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>e("/setting/sms-whatsapp-template"),disabled:h,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:_,disabled:h||!x,children:h?l("Saving...","kivicare-clinic-management-system"):l("Save Changes","kivicare-clinic-management-system")})]})]})},nhe=()=>{const[t,e]=f.useState({page:1,per_page:10}),n=In(),{data:s,isLoading:a,error:r,refetch:o}=wP(t),c=jie({onSuccess:()=>{Ee.success(l("Webhook status updated","kivicare-clinic-management-system")),o()},onError:()=>{Ee.error(l("Failed to update webhook status","kivicare-clinic-management-system"))}}),d=wie({onSuccess:()=>{Ee.success(l("Webhook deleted successfully","kivicare-clinic-management-system")),o()},onError:()=>{Ee.error(l("Failed to delete webhook","kivicare-clinic-management-system"))}}),m=s?.data?.data||[],u={currentPage:s?.data?.pagination?.currentPage||1,perPage:s?.data?.pagination?.perPage||10,totalItems:s?.data?.pagination?.total||0,lastPage:s?.data?.pagination?.lastPage||1},p=async(j,k)=>{const S=k===1?0:1;console.log(k),c.mutate({id:j,status:S})},h=j=>{Ze.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(k=>{k.isConfirmed&&d.mutate(j)})},g=f.useMemo(()=>[n.accessor("id",{header:l("ID","kivicare-clinic-management-system"),cell:j=>j.getValue(),enableSorting:!0}),n.accessor("name",{header:l("Name","kivicare-clinic-management-system"),cell:j=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-semibold",children:j.getValue()}),i.jsx("small",{className:"text-muted",children:j.row.original.module_name})]}),enableSorting:!0}),n.accessor("endpoint",{header:l("Endpoint","kivicare-clinic-management-system"),cell:j=>{const k=j.getValue();return i.jsx("code",{className:"text-break",children:k})},enableSorting:!1}),n.accessor("event_name",{header:l("Event","kivicare-clinic-management-system"),cell:j=>i.jsx("span",{className:"badge bg-info",children:j.getValue()}),enableSorting:!0}),n.accessor("status",{header:l("Status","kivicare-clinic-management-system"),cell:j=>{const k=j.row.original,S=j.getValue();return i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("span",{className:`badge ${S===1?"bg-success":"bg-danger"} me-2`,children:S===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`status-toggle-${k.id}`,defaultChecked:S===1,onChange:()=>p(k.id,S)})})]})},enableSorting:!0}),n.accessor("updated_at",{header:l("Last Delivery","kivicare-clinic-management-system"),cell:j=>{const k=j.getValue();return i.jsx("small",{className:"text-muted",children:k?new Date(k).toLocaleDateString():l("Never","kivicare-clinic-management-system")})},enableSorting:!0}),n.display({id:"actions",header:l("Actions","kivicare-clinic-management-system"),cell:j=>{const k=j.row.original;return i.jsxs("div",{className:"btn-group",role:"group",children:[i.jsx(gt,{to:`/setting/webhooks/configuration/edit/${k.id}`,className:"btn btn-link text-primary",title:l("Edit Webhook","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil"})}),i.jsx("button",{type:"button",className:"btn btn-link text-danger",onClick:()=>h(k.id),title:l("Delete Webhook","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})})]})}})],[n]),x=j=>{e(k=>({...k,page:j}))},v=j=>{e(k=>({...k,page:1,per_page:j}))},y=j=>{console.log("Sorting changed:",j)},b=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:g.length,className:"text-center py-4 border-start border-end",children:i.jsxs("div",{className:"d-flex flex-column align-items-center",children:[i.jsx("i",{className:"ph ph-webhook text-muted"}),i.jsx("p",{className:"text-muted mb-3",children:l("No webhooks configured yet","kivicare-clinic-management-system")}),i.jsx(gt,{to:"/setting/webhooks/configuration/add",className:"btn btn-outline-primary btn-sm",children:l("Create Your First Webhook","kivicare-clinic-management-system")})]})})});return a?i.jsx(uie,{}):i.jsxs("div",{className:"webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h4",{className:"mb-0",children:l("Webhook Configuration","kivicare-clinic-management-system")}),i.jsxs(gt,{to:"/setting/webhooks/configuration/add",className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-plus me-2"}),l("Add Webhook","kivicare-clinic-management-system")]})]}),i.jsx(wn,{data:m,columns:g,isLoading:a,error:r,pagination:u,currentPage:u.currentPage,perPage:u.perPage,totalItems:u.totalItems,lastPage:u.lastPage,onPageChange:x,onPerPageChange:v,onSortingChange:y,moduleNamePlural:"webhooks",renderEmptyState:b,enableSelection:!1,manualPagination:!0,manualFiltering:!0})]})},ihe=()=>{const[t,e]=f.useState({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),[n,s]=f.useState(!1),[a,r]=f.useState(null),{data:o,isLoading:c,error:d}=Nie(t);Cie();const m=Sie(),[u,p]=f.useState(!1),h=f.useMemo(()=>[{type:"text",name:"webhook_id",label:l("Webhook ID","kivicare-clinic-management-system"),placeholder:l("Enter webhook ID","kivicare-clinic-management-system")},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),placeholder:l("All Statuses","kivicare-clinic-management-system"),options:[{value:"success",label:l("Success","kivicare-clinic-management-system")},{value:"failed",label:l("Failed","kivicare-clinic-management-system")},{value:"pending",label:l("Pending","kivicare-clinic-management-system")}]},{type:"dateRange",name:"date_range",label:l("Date Range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to",placeholder:l("Select date range","kivicare-clinic-management-system")}],[]),g=f.useMemo(()=>[{accessorKey:"id",header:l("ID","kivicare-clinic-management-system"),size:80},{accessorKey:"webhook_name",header:l("Webhook","kivicare-clinic-management-system"),cell:({row:w})=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-medium",children:w.original.webhook_name||l("Unknown Webhook","kivicare-clinic-management-system")}),i.jsxs("div",{className:"text-muted small",children:["ID: ",w.original.webhook_id]})]})},{accessorKey:"event_type",header:l("Event Type","kivicare-clinic-management-system"),cell:({row:w})=>i.jsx(ta,{bg:"primary",children:w.original.event_type||l("Unknown","kivicare-clinic-management-system")})},{accessorKey:"status",header:l("Status","kivicare-clinic-management-system"),cell:({row:w})=>{const T=w.original.status,A={success:"success",failed:"danger",pending:"warning"};return i.jsx(ta,{bg:A[T]||"secondary",children:T||l("Unknown","kivicare-clinic-management-system")})}},{accessorKey:"created_at",header:l("Created At","kivicare-clinic-management-system"),cell:({row:w})=>{const T=new Date(w.original.created_at);return i.jsxs(i.Fragment,{children:[i.jsx("div",{children:T.toLocaleDateString()}),i.jsx("div",{children:T.toLocaleTimeString()})]})}},{accessorKey:"execution_time",header:l("Execution Time","kivicare-clinic-management-system"),cell:({row:w})=>i.jsx("span",{children:w.original.execution_time?`${w.original.execution_time}ms`:"-"})},{accessorKey:"actions",header:l("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:w})=>{const T=A=>M=>i.jsx(ut,{...M,children:A});return i.jsx(Qe,{placement:"top",overlay:T(l("View Log Details","kivicare-clinic-management-system")),children:i.jsx("button",{onClick:()=>y(w.original),className:"btn btn-link",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})})}}],[]),x=w=>{e(T=>({...T,page:w}))},v=w=>{e(T=>({...T,page:1,per_page:w}))},y=w=>{r(w),s(!0)},b=w=>{e(T=>({...T,...w,page:1})),p(!1)},j=()=>{e({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),p(!1)},k=async w=>{if(window.confirm(l("Are you sure you want to delete the selected webhook logs?","kivicare-clinic-management-system")))try{await m.mutateAsync(w)}catch(T){console.error("Error bulk deleting webhook logs:",T)}},S=[{label:l("Delete","kivicare-clinic-management-system"),action:k}],N=o?.data?.logs||[],_=o?.data?.pagination||{};return i.jsxs(xo,{fluid:!0,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h5",{className:"mb-0",children:l("Webhook Event Logs","kivicare-clinic-management-system")}),i.jsxs(Yt,{variant:"btn btn-primary",onClick:()=>p(!0),children:[i.jsx("i",{className:"bi bi-funnel-fill me-2"}),l("Filters","kivicare-clinic-management-system")]})]}),i.jsx(wn,{data:N,columns:g,isLoading:c,error:d,pagination:_,currentPage:t.currentPage,perPage:t.perPage,totalItems:_.total||0,lastPage:_.lastPage||1,onPageChange:x,onPerPageChange:v,enableSelection:!0,moduleNamePlural:l("webhook logs","kivicare-clinic-management-system"),bulkActions:S,bulkActionsButtonText:l("Bulk Actions","kivicare-clinic-management-system")}),i.jsxs(st,{show:n,onHide:()=>s(!1),size:"xl",scrollable:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsxs(st.Title,{children:[l("Webhook Log Details","kivicare-clinic-management-system")," - ",a?.webhook_name]})}),i.jsx(st.Body,{children:a&&i.jsxs(i.Fragment,{children:[i.jsxs(Un,{className:"mb-4",children:[i.jsx(Ct,{md:6,children:i.jsxs(mt,{children:[i.jsx(mt.Header,{children:i.jsx("h6",{className:"mb-0",children:l("Event Information","kivicare-clinic-management-system")})}),i.jsx(mt.Body,{children:i.jsx(Ox,{size:"sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Event Type","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ta,{bg:"primary",children:a.event_type})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Status","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ta,{bg:a.status==="success"?"success":a.status==="failed"?"danger":"warning",children:a.status})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Execution Time","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:a.execution_time?`${a.execution_time}ms`:"-"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Created At","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:new Date(a.created_at).toLocaleString()})]})]})})})]})}),i.jsx(Ct,{md:6,children:i.jsxs(mt,{children:[i.jsx(mt.Header,{children:i.jsx("h6",{className:"mb-0",children:l("Response Information","kivicare-clinic-management-system")})}),i.jsx(mt.Body,{children:i.jsx(Ox,{size:"sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Response Code","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ta,{bg:a.response_code>=200&&a.response_code<300?"success":"danger",children:a.response_code||"-"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[l("Response Body","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{className:"small text-truncate",style:{maxWidth:"200px"},children:a.response?.body?a.response.body.substring(0,100)+"...":"-"})]})]})})})]})})]}),a.payload&&i.jsxs(mt,{className:"mb-3",children:[i.jsx(mt.Header,{children:i.jsx("h6",{className:"mb-0",children:l("Payload Data","kivicare-clinic-management-system")})}),i.jsx(mt.Body,{children:i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.payload,null,2)})})})]}),a.response&&i.jsxs(mt,{className:"mb-3",children:[i.jsx(mt.Header,{children:i.jsx("h6",{className:"mb-0",children:l("Response Data","kivicare-clinic-management-system")})}),i.jsx(mt.Body,{children:i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.response,null,2)})})})]}),a.error_message&&i.jsxs(mt,{children:[i.jsx(mt.Header,{children:i.jsx("h6",{className:"mb-0 text-danger",children:l("Error Message","kivicare-clinic-management-system")})}),i.jsx(mt.Body,{children:i.jsx("div",{className:"alert alert-danger",children:i.jsx("pre",{children:i.jsx("code",{children:a.error_message})})})})]})]})}),i.jsx(st.Footer,{children:i.jsx(Yt,{variant:"secondary",onClick:()=>s(!1),children:l("Close","kivicare-clinic-management-system")})})]}),i.jsx(ha,{show:u,onHide:()=>p(!1),queryParams:t,onApplyFilters:b,onResetFilters:j,title:l("Filter Webhook Logs","kivicare-clinic-management-system"),fields:h})]})},sI=({initialData:t=null,onSubmit:e,isLoading:n=!1,isEditing:s=!1})=>{const[a,r]=f.useState(null),[o,c]=f.useState([]),[d,m]=f.useState({header:[],body:[],query_params:[]}),[u,p]=f.useState(!0),{control:h,handleSubmit:g,formState:{errors:x},setValue:v,watch:y,reset:b,getValues:j}=Xt({defaultValues:{name:"",moduleName:"",eventName:"",webhookUrl:"",httpMethod:"POST",status:1,authMethod:"none",authConfig:{apiKey:"",keyLocation:"header",headerName:"Authorization",username:"",password:"",encoding:"Base64",bearerToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",accessToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature"},contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBody:"",timeout:30,retryAttempts:3,retryDelay:5,enableSSL:!0}}),{fields:k,append:S,remove:N}=mr({control:h,name:"customHeaders"}),{fields:_,append:w,remove:T}=mr({control:h,name:"queryParams"}),A=y(),[M,E]=f.useState(!1),[P,D]=f.useState(!1),[O,F]=f.useState(""),[q,U]=f.useState(""),[K,ne]=f.useState(!1),[Y,fe]=f.useState(null),le=f.useRef(null);f.useEffect(()=>{(async()=>{try{const xe=await qi.getTableConfig();xe.data&&r(xe.data)}catch(xe){console.error("Failed to load table config:",xe),Ee.error(l("Failed to load configuration","kivicare-clinic-management-system"))}finally{p(!1)}})()},[]),f.useEffect(()=>{const me=y((xe,{name:Ce})=>{if(xe.moduleName){const he=a?.modules?.find(_e=>_e.value===xe.moduleName);he&&(c(he.events||[]),Ce==="moduleName"&&!s&&v("eventName",""),m({header:[],body:[],query_params:[]}))}if(xe.eventName){const he=o.find(_e=>_e.value===xe.eventName);he?.dynamic_variables&&m(he.dynamic_variables)}});return()=>me.unsubscribe()},[a,y,o,v,s]),f.useEffect(()=>{const me=j("moduleName");if(me&&a?.modules){const xe=a.modules.find(Ce=>Ce.value===me);xe&&c(xe.events||[])}},[a,j]),f.useEffect(()=>{const me=j("eventName");if(me&&o.length>0){const xe=o.find(Ce=>Ce.value===me);xe?.dynamic_variables&&m(xe.dynamic_variables)}},[o,j]),f.useEffect(()=>{s&&t&&(console.log("Initial Data:",t),b({name:t.name||"",moduleName:t.moduleName||"",eventName:t.eventName||"",webhookUrl:t?.webhookData?.url||"",httpMethod:t?.methods||"POST",status:t.status||1,authMethod:t?.webhookData?.auth_method||"none",authConfig:{apiKey:t?.webhookData?.auth_config?.api_key||"",keyLocation:t?.webhookData?.auth_config?.key_location||"header",headerName:t?.webhookData?.auth_config?.header_name||"Authorization",username:t?.webhookData?.auth_config?.username||"",password:t?.webhookData?.auth_config?.password||"",encoding:t?.webhookData?.auth_config?.encoding||"Base64",bearerToken:t?.webhookData?.auth_config?.bearer_token||"",tokenType:t?.webhookData?.auth_config?.token_type||"Bearer",tokenExpiry:t?.webhookData?.auth_config?.token_expiry||"",clientId:t?.webhookData?.auth_config?.client_id||"",clientSecret:t?.webhookData?.auth_config?.client_secret||"",authUrl:t?.webhookData?.auth_config?.auth_url||"",tokenUrl:t?.webhookData?.auth_config?.token_url||"",redirectUrl:t?.webhookData?.auth_config?.redirect_url||"",scopes:t?.webhookData?.auth_config?.scopes||"",refreshToken:t?.webhookData?.auth_config?.refresh_token||"",accessToken:t?.webhookData?.auth_config?.access_token||"",jwtIssuer:t?.webhookData?.auth_config?.jwt_issuer||"",jwtSubject:t?.webhookData?.auth_config?.jwt_subject||"",jwtAudience:t?.webhookData?.auth_config?.jwt_audience||"",jwtPrivateKey:t?.webhookData?.auth_config?.jwt_private_key||"",jwtAlgorithm:t?.webhookData?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:t?.webhookData?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:t?.webhookData?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:t?.webhookData?.auth_config?.hmac_access_key||"",hmacSecretKey:t?.webhookData?.auth_config?.hmac_secret_key||"",hmacAlgorithm:t?.webhookData?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:t?.webhookData?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:t?.webhookData?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:t?.webhookData?.content_type||"application/json",customHeaders:t?.webhookData?.custom_headers?.length>0?t.webhookData.custom_headers:[{key:"",value:""}],queryParams:t?.webhookData?.query_params?.length>0?t.webhookData.query_params:[{key:"",value:""}],requestBody:t?.webhookData?.request_body||"",timeout:t?.webhookData?.timeout||30,retryAttempts:t?.webhookData?.retry_attempts||3,retryDelay:t?.webhookData?.retry_delay||5,enableSSL:t?.webhookData?.enable_ssl!==!1}))},[s,t,b]),f.useEffect(()=>{if(A.authMethod==="oauth2"&&!A.authConfig.redirectUrl){const me=window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback";v("authConfig.redirectUrl",me)}},[A.authMethod,A.authConfig.redirectUrl,v]);const W=async me=>{try{await navigator.clipboard.writeText(me),Ee.success(l("Copied to clipboard!","kivicare-clinic-management-system"))}catch(xe){console.error("Failed to copy:",xe),Ee.error(l("Failed to copy to clipboard","kivicare-clinic-management-system"))}},z=me=>{if(F(me),!me.trim()){U(""),ne(!1),fe(null);return}try{const xe=JSON.parse(me);if(!xe.name){U(l("Missing required field: name","kivicare-clinic-management-system")),ne(!1),fe(null);return}if(!xe.module_name){U(l("Missing required field: module_name","kivicare-clinic-management-system")),ne(!1),fe(null);return}if(!xe.webhook_data?.url){U(l("Missing required field: webhook_data.url","kivicare-clinic-management-system")),ne(!1),fe(null);return}U(""),ne(!0),fe(xe)}catch(xe){U(l("Invalid JSON format: ","kivicare-clinic-management-system")+xe.message),ne(!1),fe(null)}},ie=me=>{const xe=me.target.files[0];if(!xe)return;if(!xe.name.endsWith(".json")){Ee.error(l("Please select a valid JSON file","kivicare-clinic-management-system"));return}const Ce=new FileReader;Ce.onload=he=>{try{const _e=he.target.result;z(_e)}catch{Ee.error(l("Failed to read file","kivicare-clinic-management-system"))}},Ce.onerror=()=>{Ee.error(l("Failed to read file","kivicare-clinic-management-system"))},Ce.readAsText(xe)},re=()=>{if(!K||!Y){Ee.error(l("Please provide valid JSON configuration","kivicare-clinic-management-system"));return}try{b({name:Y.name||"",moduleName:Y.module_name||"",eventName:Y.event_name||"",webhookUrl:Y.webhook_data?.url||"",httpMethod:Y.methods||"POST",status:Y.status||1,authMethod:Y.webhook_data?.auth_method||"none",authConfig:{apiKey:Y.webhook_data?.auth_config?.api_key||"",keyLocation:Y.webhook_data?.auth_config?.key_location||"header",headerName:Y.webhook_data?.auth_config?.header_name||"Authorization",username:Y.webhook_data?.auth_config?.username||"",password:Y.webhook_data?.auth_config?.password||"",encoding:Y.webhook_data?.auth_config?.encoding||"Base64",bearerToken:Y.webhook_data?.auth_config?.bearer_token||"",tokenType:Y.webhook_data?.auth_config?.token_type||"Bearer",tokenExpiry:Y.webhook_data?.auth_config?.token_expiry||"",clientId:Y.webhook_data?.auth_config?.client_id||"",clientSecret:Y.webhook_data?.auth_config?.client_secret||"",authUrl:Y.webhook_data?.auth_config?.auth_url||"",tokenUrl:Y.webhook_data?.auth_config?.token_url||"",redirectUrl:Y.webhook_data?.auth_config?.redirect_url||"",scopes:Y.webhook_data?.auth_config?.scopes||"",refreshToken:Y.webhook_data?.auth_config?.refresh_token||"",accessToken:Y.webhook_data?.auth_config?.access_token||"",jwtIssuer:Y.webhook_data?.auth_config?.jwt_issuer||"",jwtSubject:Y.webhook_data?.auth_config?.jwt_subject||"",jwtAudience:Y.webhook_data?.auth_config?.jwt_audience||"",jwtPrivateKey:Y.webhook_data?.auth_config?.jwt_private_key||"",jwtAlgorithm:Y.webhook_data?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:Y.webhook_data?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:Y.webhook_data?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:Y.webhook_data?.auth_config?.hmac_access_key||"",hmacSecretKey:Y.webhook_data?.auth_config?.hmac_secret_key||"",hmacAlgorithm:Y.webhook_data?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:Y.webhook_data?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:Y.webhook_data?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:Y.webhook_data?.content_type||"application/json",customHeaders:Y.webhook_data?.custom_headers?.length>0?Y.webhook_data.custom_headers:[{key:"",value:""}],queryParams:Y.webhook_data?.query_params?.length>0?Y.webhook_data.query_params:[{key:"",value:""}],requestBody:Y.webhook_data?.request_body||"",timeout:Y.webhook_data?.timeout||30,retryAttempts:Y.webhook_data?.retry_attempts||3,retryDelay:Y.webhook_data?.retry_delay||5,enableSSL:Y.webhook_data?.enable_ssl!==!1}),de(),Ee.success(l("Webhook configuration imported successfully!","kivicare-clinic-management-system"))}catch(me){console.error("Import error:",me),Ee.error(l("Failed to import configuration. Please try again.","kivicare-clinic-management-system"))}},de=()=>{D(!1),F(""),U(""),ne(!1),fe(null),le.current&&(le.current.value="")},L=async()=>{const{clientId:me,authUrl:xe,redirectUrl:Ce,scopes:he}=A.authConfig;if(!me||!xe||!Ce){Ee.error(l("Please fill in Client ID, Authorization URL, and Redirect URL","kivicare-clinic-management-system"));return}E(!0);try{const _e=new URLSearchParams({client_id:me,redirect_uri:Ce,response_type:"code",scope:he||"",state:Math.random().toString(36).substring(7)}),Ke=`${xe}?${_e.toString()}`,Ae=600,$e=700,Je=window.screenX+(window.outerWidth-Ae)/2,et=window.screenY+(window.outerHeight-$e)/2,Me=window.open(Ke,"OAuth2 Authorization",`width=${Ae},height=${$e},left=${Je},top=${et},toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes`);if(!Me){Ee.error(l("Popup blocked. Please allow popups for this site.","kivicare-clinic-management-system")),E(!1);return}const ge=async qe=>{qe.origin===window.location.origin&&qe.data.type==="oauth2_callback"&&(window.removeEventListener("message",ge),Me.close(),qe.data.code?await Q(qe.data.code):qe.data.error&&(Ee.error(l("Authorization failed: ","kivicare-clinic-management-system")+qe.data.error),E(!1)))};window.addEventListener("message",ge);const Ne=setInterval(()=>{Me.closed&&(clearInterval(Ne),window.removeEventListener("message",ge),E(!1))},1e3)}catch(_e){console.error("OAuth2 generation error:",_e),Ee.error(l("Failed to generate OAuth2 token","kivicare-clinic-management-system")),E(!1)}},Q=async me=>{const{clientId:xe,clientSecret:Ce,tokenUrl:he,redirectUrl:_e}=A.authConfig;try{const Ke=await qi.exchangeOAuth2Token({code:me,clientId:xe,clientSecret:Ce,tokenUrl:he,redirectUri:_e});v("authConfig.accessToken",Ke?.data?.access_token),Ke?.data?.refresh_token&&v("authConfig.refreshToken",Ke?.data?.refresh_token),Ee.success(l("OAuth2 tokens generated successfully!","kivicare-clinic-management-system")),E(!1)}catch(Ke){console.error("Token exchange error:",Ke),Ee.error(l("Failed to exchange authorization code for token","kivicare-clinic-management-system")),E(!1)}},V=async()=>{const{clientId:me,clientSecret:xe,tokenUrl:Ce,refreshToken:he}=A.authConfig;if(!he){Ee.error(l("No refresh token available","kivicare-clinic-management-system"));return}E(!0);try{const _e=await qi.refreshOAuth2Token({refreshToken:he,clientId:me,clientSecret:xe,tokenUrl:Ce});console.log(_e,"test"),v("authConfig.accessToken",_e.data.access_token),_e.data.refresh_token&&v("authConfig.refreshToken",_e.data.refresh_token),Ee.success(l("Access token refreshed successfully!","kivicare-clinic-management-system")),E(!1)}catch(_e){console.error("Token refresh error:",_e),Ee.error(l("Failed to refresh access token","kivicare-clinic-management-system")),E(!1)}},Z=a?.modules?.map(me=>({value:me.value,label:me.label}))||[],X=o.map(me=>({value:me.value,label:me.label})),R=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],G=[{value:"none",label:l("No Authentication","kivicare-clinic-management-system")},{value:"apikey",label:l("API Key Authentication","kivicare-clinic-management-system")},{value:"basic",label:l("Basic Authentication","kivicare-clinic-management-system")},{value:"bearer",label:l("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")},{value:"oauth2",label:l("OAuth2 Authentication","kivicare-clinic-management-system")},{value:"hmac",label:l("HMAC / Signature Authentication","kivicare-clinic-management-system")}],ee=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],ae=[{value:"header",label:l("Header","kivicare-clinic-management-system")},{value:"query",label:l("Query Parameter","kivicare-clinic-management-system")}],I=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],H=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}];l("Minutes","kivicare-clinic-management-system"),l("Hours","kivicare-clinic-management-system"),l("Days","kivicare-clinic-management-system");const B=()=>{switch(A.contentType){case"application/json":return`{
                    "event": "{{event_name}}",
                    "module": "{{module_name}}",
                    "data": {
                        "id": "{{record_id}}",
                        "timestamp": "{{timestamp}}"
                    }}`;case"application/xml":return`<?xml version="1.0"?>
                    <webhook>
                    <event>{{event_name}}</event>
                    <module>{{module_name}}</module>
                    <data>
                        <id>{{record_id}}</id>
                        <timestamp>{{timestamp}}</timestamp>
                    </data>
                    </webhook>`;case"application/x-www-form-urlencoded":return"event={{event_name}}&module={{module_name}}&id={{record_id}}&timestamp={{timestamp}}";default:return"Use variables like {{event_name}}, {{module_name}}, {{record_id}}, {{timestamp}}"}},te=()=>["POST","PUT","PATCH"].includes(A.httpMethod),oe=me=>{const xe={};me.authMethod==="apikey"?(xe.api_key=me.authConfig.apiKey,xe.key_location=me.authConfig.keyLocation,xe.header_name=me.authConfig.headerName):me.authMethod==="basic"?(xe.username=me.authConfig.username,xe.password=me.authConfig.password,xe.encoding=me.authConfig.encoding):me.authMethod==="bearer"?(xe.bearer_token=me.authConfig.bearerToken,xe.token_type=me.authConfig.tokenType,xe.token_expiry=me.authConfig.tokenExpiry):me.authMethod==="oauth2"?(xe.client_id=me.authConfig.clientId,xe.client_secret=me.authConfig.clientSecret,xe.auth_url=me.authConfig.authUrl,xe.token_url=me.authConfig.tokenUrl,xe.redirect_url=me.authConfig.redirectUrl,xe.scopes=me.authConfig.scopes,xe.refresh_token=me.authConfig.refreshToken,xe.access_token=me.authConfig.accessToken):me.authMethod==="hmac"&&(xe.hmac_access_key=me.authConfig.hmacAccessKey,xe.hmac_secret_key=me.authConfig.hmacSecretKey,xe.hmac_algorithm=me.authConfig.hmacAlgorithm,xe.hmac_signature_location=me.authConfig.hmacSignatureLocation,xe.hmac_header_param_name=me.authConfig.hmacHeaderParamName);const Ce=me.customHeaders.filter(Ke=>Ke.key&&Ke.value),he=me.queryParams.filter(Ke=>Ke.key&&Ke.value),_e={url:me.webhookUrl,method:me.httpMethod,auth_method:me.authMethod,auth_config:xe,content_type:me.contentType,custom_headers:Ce,query_params:he,request_body:me.requestBody,timeout:parseInt(me.timeout),retry_attempts:parseInt(me.retryAttempts),retry_delay:parseInt(me.retryDelay),enable_ssl:me.enableSSL};return{name:me.name,module_name:me.moduleName,event_name:me.eventName,methods:me.httpMethod,webhook_data:_e,status:me.status}},ye=me=>{const xe=oe(me);e(xe)};return i.jsxs("form",{onSubmit:g(ye),className:"webhook-form",children:[i.jsx("div",{className:"d-flex justify-content-end gap-2 mb-3",children:i.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>D(!0),children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import JSON","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Basic Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Webhook Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"name",control:h,rules:{required:l("Webhook name is required","kivicare-clinic-management-system")},render:({field:me})=>i.jsx("input",{...me,type:"text",className:`form-control ${x.name?"is-invalid":""}`,placeholder:l("Enter webhook name","kivicare-clinic-management-system")})}),x.name&&i.jsx("div",{className:"invalid-feedback d-block",children:x.name.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"moduleName",control:h,rules:{required:l("Module is required","kivicare-clinic-management-system")},render:({field:me})=>i.jsx(ot,{...me,options:Z,className:`react-select-box ${x.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:l("Select module","kivicare-clinic-management-system"),value:Z.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})}),x.moduleName&&i.jsx("div",{className:"invalid-feedback d-block",children:x.moduleName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Event","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"eventName",control:h,rules:{required:l("Event is required","kivicare-clinic-management-system")},render:({field:me})=>i.jsx(ot,{...me,options:X,className:`react-select-box ${x.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:l("Select event","kivicare-clinic-management-system"),value:X.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})}),x.eventName&&i.jsx("div",{className:"invalid-feedback d-block",children:x.eventName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"httpMethod",control:h,rules:{required:l("HTTP method is required","kivicare-clinic-management-system")},render:({field:me})=>i.jsx(ot,{...me,options:R,value:R.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[l("Webhook URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"webhookUrl",control:h,rules:{required:l("Webhook URL is required","kivicare-clinic-management-system"),pattern:{value:/^https?:\/\/.+/,message:l("Please enter a valid URL","kivicare-clinic-management-system")}},render:({field:me})=>i.jsx("input",{...me,type:"url",className:`form-control ${x.webhookUrl?"is-invalid":""}`,placeholder:"https://example.com/webhook"})}),x.webhookUrl&&i.jsx("div",{className:"invalid-feedback d-block",children:x.webhookUrl.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Status","kivicare-clinic-management-system")}),i.jsx(je,{name:"status",control:h,render:({field:me})=>i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{...me,type:"checkbox",className:"form-check-input",checked:me.value===1,onChange:xe=>me.onChange(xe.target.checked?1:0)}),i.jsx("label",{className:"form-check-label",children:me.value===1?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system")})]})})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Authentication","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Authentication Method","kivicare-clinic-management-system")}),i.jsx(je,{name:"authMethod",control:h,render:({field:me})=>i.jsx(ot,{...me,options:G,value:G.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),A.authMethod==="apikey"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("API Key","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.apiKey",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Enter API key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:l("Location","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.keyLocation",control:h,render:({field:me})=>i.jsx(ot,{...me,options:ae,className:"react-select-box",classNamePrefix:"react-select",value:ae.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:l("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.headerName",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:"Authorization"})})]})]}),A.authMethod==="basic"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Username","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.username",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Enter username","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Password","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.password",control:h,render:({field:me})=>i.jsx("input",{...me,type:"password",className:"form-control",placeholder:l("Enter password","kivicare-clinic-management-system")})})]})]}),A.authMethod==="bearer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-8",children:[i.jsx("label",{className:"form-label",children:l("Bearer Token","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.bearerToken",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Enter bearer token","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Token Type","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.tokenType",control:h,render:({field:me})=>i.jsx(ot,{...me,options:I,className:"react-select-box",classNamePrefix:"react-select",value:I.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-12",children:[i.jsx("label",{className:"form-label",children:l("Token Expiry (Optional)","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.tokenExpiry",control:h,render:({field:me})=>i.jsx("input",{...me,type:"datetime-local",className:"form-control"})}),i.jsx("small",{className:"text-muted",children:l("Set when the token expires to get a reminder to refresh it","kivicare-clinic-management-system")})]})]}),A.authMethod==="oauth2"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),l("OAuth2 allows secure authorization without sharing passwords. Configure your OAuth2 provider settings below.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.clientId",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Enter client ID","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.clientSecret",control:h,render:({field:me})=>i.jsx("input",{...me,type:"password",className:"form-control",placeholder:l("Enter client secret","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Authorization URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.authUrl",control:h,render:({field:me})=>i.jsx("input",{...me,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/authorize"})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Token URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.tokenUrl",control:h,render:({field:me})=>i.jsx("input",{...me,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/token"})})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Redirect URL (Callback)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx(je,{name:"authConfig.redirectUrl",control:h,render:({field:me})=>i.jsx("input",{...me,type:"url",className:"form-control",placeholder:window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback",readOnly:!0})}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>W(A.authConfig.redirectUrl),title:l("Copy to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:l("Configure this URL in your OAuth2 provider settings","kivicare-clinic-management-system")})]}),"                                ",i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:l("Scopes","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.scopes",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:"read write admin"})}),i.jsx("small",{className:"text-muted",children:l("Space-separated list of permission scopes","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Access Token","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.accessToken",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Refresh Token","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.refreshToken",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary",onClick:L,disabled:M||!A.authConfig.clientId||!A.authConfig.authUrl||!A.authConfig.redirectUrl,children:M?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Authorizing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),l("Generate OAuth2 Token","kivicare-clinic-management-system")]})}),A.authConfig.refreshToken&&i.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:V,disabled:M,children:[i.jsx("i",{className:"ph ph-arrows-clockwise me-2"}),l("Refresh Token","kivicare-clinic-management-system")]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:l('Click "Generate OAuth2 Token" to open authorization popup and obtain access tokens',"kivicare-clinic-management-system")})]})]}),A.authMethod==="hmac"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),l("HMAC (Hash-based Message Authentication Code) provides request signing for enhanced security.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Access Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.hmacAccessKey",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:l("Enter access key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(je,{name:"authConfig.hmacSecretKey",control:h,render:({field:me})=>i.jsx("input",{...me,type:"password",className:"form-control",placeholder:l("Enter secret key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Algorithm","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.hmacAlgorithm",control:h,render:({field:me})=>i.jsx(ot,{...me,options:H,className:"react-select-box",classNamePrefix:"react-select",value:H.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Signature Location","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.hmacSignatureLocation",control:h,render:({field:me})=>i.jsx(ot,{...me,options:ae,className:"react-select-box",classNamePrefix:"react-select",value:ae.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(je,{name:"authConfig.hmacHeaderParamName",control:h,render:({field:me})=>i.jsx("input",{...me,type:"text",className:"form-control",placeholder:"X-Signature"})})]})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Request Configuration","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:l("Content Type","kivicare-clinic-management-system")}),i.jsx(je,{name:"contentType",control:h,render:({field:me})=>i.jsx(ot,{...me,options:ee,className:"react-select-box",classNamePrefix:"react-select",value:ee.find(xe=>xe.value===me.value),onChange:xe=>me.onChange(xe?.value),styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:l("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>S({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Header","kivicare-clinic-management-system")]})]}),k.map((me,xe)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(je,{name:`customHeaders.${xe}.key`,control:h,render:({field:Ce})=>i.jsx("input",{...Ce,type:"text",className:"form-control",placeholder:l("Header Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(je,{name:`customHeaders.${xe}.value`,control:h,render:({field:Ce})=>i.jsx(ot,{...Ce,options:d.header?.map(he=>({value:he,label:he}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Header Value","kivicare-clinic-management-system"),isClearable:!0,value:Ce.value?{value:Ce.value,label:Ce.value}:null,onChange:he=>Ce.onChange(he?.value||""),onInputChange:(he,{action:_e})=>{_e==="input-change"&&Ce.onChange(he)},styles:{menuPortal:he=>({...he,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>N(xe),children:i.jsx("i",{className:"ph ph-trash"})})})]},me.id))]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:l("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>w({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),l("Add Parameter","kivicare-clinic-management-system")]})]}),_.map((me,xe)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(je,{name:`queryParams.${xe}.key`,control:h,render:({field:Ce})=>i.jsx("input",{...Ce,type:"text",className:"form-control",placeholder:l("Parameter Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(je,{name:`queryParams.${xe}.value`,control:h,render:({field:Ce})=>i.jsx(ot,{...Ce,options:d.query_params?.map(he=>({value:he,label:he}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Parameter Value","kivicare-clinic-management-system"),isClearable:!0,value:Ce.value?{value:Ce.value,label:Ce.value}:null,onChange:he=>Ce.onChange(he?.value||""),onInputChange:(he,{action:_e})=>{_e==="input-change"&&Ce.onChange(he)},styles:{menuPortal:he=>({...he,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>T(xe),children:i.jsx("i",{className:"ph ph-trash"})})})]},me.id))]}),te()&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-2",children:i.jsx("label",{className:"form-label mb-0",children:l("Request Body","kivicare-clinic-management-system")})}),d.body?.length>0?i.jsxs("div",{className:"mb-2",children:[i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("strong",{children:l("Available Variables - Click to copy:","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-wrap gap-1",children:d.body.map((me,xe)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>W(me),title:l("Click to copy","kivicare-clinic-management-system"),children:[i.jsx("i",{className:"ph ph-copy me-1"}),me]},xe))})]}):i.jsx("div",{className:"mb-2",children:i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("em",{children:l("Select a module and event above to see available variables","kivicare-clinic-management-system")})})}),i.jsx(je,{name:"requestBody",control:h,render:({field:me})=>i.jsx("textarea",{...me,className:"form-control font-monospace",rows:"8",placeholder:B()})}),i.jsx("small",{className:"text-muted",children:l("Click on variable buttons above to copy them to clipboard, then paste in the body","kivicare-clinic-management-system")})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:l("Advanced Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Timeout (seconds)","kivicare-clinic-management-system")}),i.jsx(je,{name:"timeout",control:h,render:({field:me})=>i.jsx("input",{...me,type:"number",min:"1",max:"300",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Retry Attempts","kivicare-clinic-management-system")}),i.jsx(je,{name:"retryAttempts",control:h,render:({field:me})=>i.jsx("input",{...me,type:"number",min:"0",max:"10",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:l("Retry Delay (seconds)","kivicare-clinic-management-system")}),i.jsx(je,{name:"retryDelay",control:h,render:({field:me})=>i.jsx("input",{...me,type:"number",min:"1",max:"60",className:"form-control"})})]}),i.jsx("div",{className:"col-12",children:i.jsx(je,{name:"enableSSL",control:h,render:({field:me})=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...me,type:"checkbox",className:"form-check-input",checked:me.value,onChange:xe=>me.onChange(xe.target.checked)}),i.jsx("label",{className:"form-check-label",children:l("Enable SSL Certificate Verification","kivicare-clinic-management-system")})]})})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Saving...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-floppy-disk me-2"}),s?l("Update Webhook","kivicare-clinic-management-system"):l("Create Webhook","kivicare-clinic-management-system")]})})}),i.jsxs(st,{show:P,onHide:de,size:"lg",centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsxs(st.Title,{children:[i.jsx("i",{className:"ph ph-upload me-2"}),l("Import Webhook Configuration","kivicare-clinic-management-system")]})}),i.jsxs(st.Body,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-file-arrow-up me-2"}),l("Upload JSON File","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("input",{ref:le,type:"file",accept:".json",className:"form-control",onChange:ie}),i.jsx(Yt,{variant:"outline-secondary",onClick:()=>le.current?.click(),children:i.jsx("i",{className:"ph ph-file"})})]}),i.jsx("small",{className:"text-muted",children:l("Upload a .json file containing the webhook configuration","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center mb-4",children:i.jsx("span",{className:"badge bg-secondary",children:l("OR","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-code me-2"}),l("Paste JSON Configuration","kivicare-clinic-management-system")]}),i.jsx("textarea",{className:`form-control font-monospace ${q?"is-invalid":K?"is-valid":""}`,rows:"12",value:O,onChange:me=>z(me.target.value),placeholder:JSON.stringify({name:"Example Webhook",module_name:"appointment",event_name:"created",webhook_data:{url:"https://example.com/webhook",method:"POST"}},null,2),style:{fontSize:"0.875rem"}}),q&&i.jsxs("div",{className:"invalid-feedback d-block",children:[i.jsx("i",{className:"ph ph-warning-circle me-1"}),q]}),K&&!q&&i.jsxs("div",{className:"valid-feedback d-block",children:[i.jsx("i",{className:"ph ph-check-circle me-1"}),l("Valid JSON configuration detected","kivicare-clinic-management-system")]}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),l("Paste a valid webhook JSON configuration. The format will be validated automatically.","kivicare-clinic-management-system")]})]}),Y&&K&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-3",children:[i.jsxs("h6",{className:"alert-heading",children:[i.jsx("i",{className:"ph ph-eye me-2"}),l("Configuration Preview","kivicare-clinic-management-system")]}),i.jsx("hr",{}),i.jsxs("div",{className:"small",children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Name:","kivicare-clinic-management-system")})," ",Y.name]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Module:","kivicare-clinic-management-system")})," ",Y.module_name]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Event:","kivicare-clinic-management-system")})," ",Y.event_name||l("N/A","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("URL:","kivicare-clinic-management-system")}),i.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},children:Y.webhook_data?.url})]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Method:","kivicare-clinic-management-system")})," ",Y.methods||Y.webhook_data?.method||"POST"]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:l("Auth:","kivicare-clinic-management-system")})," ",Y.webhook_data?.auth_method||"none"]})]})]})]})]}),i.jsxs(st.Footer,{children:[i.jsxs(Yt,{variant:"secondary",className:"me-2",onClick:de,children:[i.jsx("i",{className:"ph ph-x me-1"}),l("Cancel","kivicare-clinic-management-system")]}),i.jsxs(Yt,{variant:"primary",onClick:re,disabled:!K,children:[i.jsx("i",{className:"ph ph-upload me-1"}),l("Import Configuration","kivicare-clinic-management-system")]})]})]})]})};function she(){const t=dn(),e=yie({onSuccess:()=>{Ee.success(l("Webhook created successfully","kivicare-clinic-management-system")),t("/setting/webhooks/configuration")},onError:s=>{console.error("Error creating webhook:",s),Ee.error(l("Failed to create webhook","kivicare-clinic-management-system"))}}),n=s=>{e.mutate(s)};return i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:l("Add New Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Configure a new webhook to send notifications when events occur","kivicare-clinic-management-system")})]}),i.jsx("button",{className:"btn btn-primary",onClick:()=>t("/setting/webhooks/configuration"),children:l("Back","kivicare-clinic-management-system")})]}),i.jsx(sI,{onSubmit:n,isLoading:e.isLoading,isEditing:!1})]})}function ahe(){const{id:t}=Wt(),e=dn(),{data:n,isLoading:s}=fie(t,{enabled:!!t}),a=bie({onSuccess:()=>{Ee.success(l("Webhook updated successfully","kivicare-clinic-management-system")),e("/setting/webhooks/configuration")},onError:o=>{console.error("Error updating webhook:",o),Ee.error(l("Failed to update webhook","kivicare-clinic-management-system"))}}),r=o=>{a.mutate({id:t,...o})};return s?i.jsx(gP,{}):n?.data?i.jsxs("div",{className:"edit-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:l("Edit Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:l("Update webhook configuration and settings","kivicare-clinic-management-system")})]}),i.jsx(gt,{to:"/setting/webhooks/configuration",className:"btn btn-primary",children:l("Back","kivicare-clinic-management-system")})]}),i.jsx(sI,{initialData:n.data,onSubmit:r,isLoading:a.isLoading,isEditing:!0})]}):i.jsx("div",{className:"alert alert-warning",children:l("Webhook not found","kivicare-clinic-management-system")})}const rhe=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(""),[a,r]=f.useState(""),[o,c]=f.useState([]),[d,m]=f.useState(!1),{data:u}=wP({page:1,per_page:100}),p=u?.data?.data||[],h=p.map(w=>({value:w.id,label:w.name,url:w.url,method:w.method,status:w.status})),{data:g}=xie(),x=g?.data?.modules||[];g?.data?.common_variables;const v=kie({onSuccess:w=>{let T=null,A=null;for(const P of x){const D=P.events.find(O=>O.value===n);if(D){T=P,A=D;break}}const M=w.data||w,E={id:Date.now(),webhook:M.webhook_data?.name||p.find(P=>P.id==t)?.name||"Unknown",module:T?.label||"Unknown",event:A?.label||n,status:M.success?"success":"failed",responseCode:M.status_code||0,responseTime:M.execution_time||0,response:M.response||M.error||"No response data",url:M.webhook_data?.url||"Unknown URL",method:M.webhook_data?.method||"POST",timestamp:new Date().toLocaleString()};c(P=>[E,...P]),w.status?Ee.success(l("Test webhook delivered successfully","kivicare-clinic-management-system")):Ee.error(l("Test webhook delivery failed","kivicare-clinic-management-system"))},onError:w=>{let T=null,A=null;for(const E of x){const P=E.events.find(D=>D.value===n);if(P){T=E,A=P;break}}const M={id:Date.now(),webhook:p.find(E=>E.id==t)?.name||"Unknown",module:T?.label||"Unknown",event:A?.label||n,status:"failed",responseCode:0,responseTime:0,response:w.message||"Network error occurred",url:"Unknown URL",method:"Unknown",timestamp:new Date().toLocaleString()};c(E=>[M,...E]),Ee.error(l("Test failed: Network error","kivicare-clinic-management-system"))}}),y=w=>{let T=null,A=null;for(const P of x){const D=P.events.find(O=>O.value===w);if(D){T=P,A=D;break}}if(!A)return{};const M=A.dynamic_variables,E={};return M.body?.forEach(P=>{const D=P.replace(/{{|}}/g,"");if(D.includes("_id"))D.includes("appointment_id")?E[D]=Math.floor(Math.random()*1e3)+1:D.includes("patient_id")?E[D]=Math.floor(Math.random()*500)+100:D.includes("doctor_id")?E[D]=Math.floor(Math.random()*100)+50:D.includes("clinic_id")?E[D]=Math.floor(Math.random()*10)+1:D.includes("encounter_id")?E[D]=Math.floor(Math.random()*2e3)+500:E[D]=Math.floor(Math.random()*1e3)+1;else if(D.includes("_email"))D.includes("patient_email")?E[D]="john.doe@example.com":D.includes("doctor_email")?E[D]="dr.smith@kivicare.com":D.includes("clinic_email")?E[D]="info@healthclinic.com":E[D]="contact@kivicare.com";else if(D.includes("_name")||D.includes("_full_name"))D.includes("patient")?E[D]="John Doe":D.includes("doctor")?E[D]="Dr. Sarah Smith":D.includes("clinic")?E[D]="Main Health Clinic":D.includes("first_name")?E[D]="John":D.includes("last_name")?E[D]="Doe":D.includes("service_names")?E[D]="General Consultation, Blood Test":E[D]="Sample Name";else if(D.includes("_contact_number")||D.includes("_phone")){const O=["+1-555-0123","+1 (555) 123-4567","555-123-4567"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("_date")){const O=new Date;if(D.includes("appointment_date")||D.includes("encounter_date")){const F=new Date(O);F.setDate(O.getDate()+Math.floor(Math.random()*30)+1),E[D]=F.toISOString().split("T")[0]}else if(D.includes("dob")||D.includes("date_of_birth")){const F=1970+Math.floor(Math.random()*40);E[D]=`${F}-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`}else if(D.includes("registered_date")){const F=new Date(O);F.setDate(O.getDate()-Math.floor(Math.random()*365)),E[D]=F.toISOString().split("T")[0]}else E[D]=O.toISOString().split("T")[0]}else if(D.includes("_time"))if(D.includes("start_time")){const O=["09:00:00","10:00:00","11:00:00","14:00:00","15:00:00"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("end_time")){const O=["09:30:00","10:30:00","11:30:00","14:30:00","15:30:00"];E[D]=O[Math.floor(Math.random()*O.length)]}else E[D]=new Date().toTimeString().split(" ")[0];else if(D.includes("_address")){const O=["123 Main Street, New York, NY 10001","456 Oak Avenue, Los Angeles, CA 90210","789 Elm Drive, Chicago, IL 60601","321 Pine Road, Houston, TX 77001"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("_status"))if(D.includes("appointment_status")){const O=["1","2","3"];E[D]=O[Math.floor(Math.random()*O.length)]}else E[D]="1";else if(D.includes("_gender")){const O=["male","female","other"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("blood_group")){const O=["A+","A-","B+","B-","AB+","AB-","O+","O-"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("specialization")){const O=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("qualification")){const O=["MBBS, MD","MBBS, MS","BDS, MDS","BAMS","BHMS"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("experience"))E[D]=`${Math.floor(Math.random()*20)+1} years`;else if(D.includes("description"))D.includes("doctor")?E[D]="Experienced physician with expertise in general medicine and patient care.":D.includes("encounter")?E[D]="Regular check-up and consultation for ongoing health monitoring.":E[D]="Sample description for healthcare services.";else if(D.includes("postal_code")||D.includes("zip_code"))E[D]=String(Math.floor(Math.random()*9e4)+1e4);else if(D.includes("city")){const O=["New York","Los Angeles","Chicago","Houston","Phoenix"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("country")){const O=["United States","Canada","United Kingdom","Australia"];E[D]=O[Math.floor(Math.random()*O.length)]}else if(D.includes("profile_photo")||D.includes("signature"))E[D]=`https://via.placeholder.com/150x150?text=${D.replace(/_/g,"+")}`;else if(D.includes("clinic_ids")||D.includes("_ids"))E[D]="[1, 2, 3]";else if(D.includes("custom_fields_data"))E[D]=JSON.stringify({insurance_provider:"Blue Cross Blue Shield",emergency_contact:"+1-555-9876",allergies:"None known",medical_history:"Hypertension"});else if(D==="current_date_time")E[D]=new Date().toISOString();else if(D==="current_date")E[D]=new Date().toISOString().split("T")[0];else if(D==="current_time")E[D]=new Date().toTimeString().split(" ")[0];else if(D==="current_user_id")E[D]="1";else{const O=D.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase());E[D]=`Sample ${O}`}}),{event:w,module:T?.value,data:E,metadata:{timestamp:new Date().toISOString(),webhook_id:t,test_mode:!0}}},b=w=>{s(w);const T=y(w);r(JSON.stringify(T,null,2)),Ee.success(l("Sample payload loaded","kivicare-clinic-management-system"))},j=w=>{try{return JSON.parse(w),!0}catch{return!1}},k=async()=>{if(!t||!n||!a){Ee.error(l("Please select a webhook, event, and provide payload data","kivicare-clinic-management-system"));return}if(!j(a)){Ee.error(l("Invalid JSON payload","kivicare-clinic-management-system"));return}m(!0);try{await v.mutateAsync({webhookId:t,eventName:n,payload:JSON.parse(a)})}finally{m(!1)}},S=async()=>{if(!t){Ee.error(l("Please select a webhook endpoint","kivicare-clinic-management-system"));return}m(!0);for(const w of x.slice(0,3)){const T=w.events[0];if(T)try{s(T.value);const A=y(T.value);r(JSON.stringify(A,null,2)),await v.mutateAsync({webhookId:t,eventName:T.value,payload:A}),await new Promise(M=>setTimeout(M,1e3))}catch(A){console.error("Bulk test error:",A)}}m(!1),Ee.success(l("Bulk test completed","kivicare-clinic-management-system"))},N=w=>{switch(w){case"success":return i.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"});case"failed":return i.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2"});default:return i.jsx("i",{className:"bi bi-clock-fill text-warning me-2"})}},_=w=>{switch(w){case"success":return"success";case"failed":return"danger";default:return"warning"}};return i.jsxs(xo,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"mb-2",children:l("Webhook Testing","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("Test webhook deliveries with sample or custom payloads","kivicare-clinic-management-system")})]}),i.jsxs(Un,{className:"g-4",children:[i.jsx(Ct,{lg:6,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{className:"d-flex align-items-center",children:l("Test Configuration","kivicare-clinic-management-system")}),i.jsx(mt.Subtitle,{className:"text-muted small ",children:l("Configure and execute webhook tests","kivicare-clinic-management-system")})]}),i.jsx(mt.Body,{children:i.jsxs(Un,{className:"g-3",children:[i.jsx(Ct,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:l("Select Webhook","kivicare-clinic-management-system")}),i.jsx(ot,{value:h.find(w=>w.value==t)||null,onChange:w=>e(w?w.value:""),options:h,placeholder:l("Choose webhook endpoint...","kivicare-clinic-management-system"),isClearable:!0,isSearchable:!0,noOptionsMessage:()=>l("No webhooks found","kivicare-clinic-management-system"),loadingMessage:()=>l("Loading webhooks...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:w=>({...w,zIndex:9999})}}),p.length===0&&i.jsx(Mt.Text,{className:"text-muted",children:l("No webhooks configured. Please create a webhook first.","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(Mt.Label,{children:l("Payload Data","kivicare-clinic-management-system")}),i.jsxs(Yt,{variant:"btn btn-secondary",size:"sm",onClick:()=>b(n),disabled:!n,children:[i.jsx("i",{className:"bi bi-code me-1"}),l("Reload Sample","kivicare-clinic-management-system")]})]}),i.jsx(Mt.Control,{as:"textarea",rows:10,value:a,onChange:w=>r(w.target.value),placeholder:l("Enter JSON payload or select a sample from the right panel...","kivicare-clinic-management-system")}),a&&!j(a)&&i.jsx(Mt.Text,{className:"text-danger",children:l("Invalid JSON format","kivicare-clinic-management-system")})]})}),i.jsx(Ct,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(Yt,{variant:"primary",onClick:k,disabled:d||!t||!n||!a,className:"flex-fill",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),l("Testing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-play-fill me-2"}),l("Send Test","kivicare-clinic-management-system")]})}),i.jsx(Yt,{variant:"btn btn-primary",onClick:S,disabled:d||!t,children:l("Bulk Test","kivicare-clinic-management-system")})]})})]})})]})}),i.jsx(Ct,{lg:6,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{children:l("Sample Payloads","kivicare-clinic-management-system")}),i.jsx(mt.Subtitle,{className:"text-muted",children:l("Click on any event below to load its sample payload for testing","kivicare-clinic-management-system")})]}),i.jsx(mt.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"auto"},children:x.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-muted",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"text-muted mt-2",children:l("Loading events...","kivicare-clinic-management-system")})]}):i.jsx("div",{className:"d-grid gap-3",children:x.map(w=>i.jsxs("div",{children:[i.jsx("h6",{className:"text-muted mb-2 border-bottom pb-1",children:w.label}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:w.events.map(T=>i.jsx("div",{className:`p-3 border rounded cursor-pointer transition-colors ${n===T.value?"border-primary bg-primary bg-opacity-10":"border-light hover:bg-light"}`,onClick:()=>b(T.value),onMouseEnter:A=>{n!==T.value&&(A.target.style.backgroundColor="#f8f9fa")},onMouseLeave:A=>{n!==T.value&&(A.target.style.backgroundColor="")},children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"fw-medium mb-1",children:T.label}),i.jsx("div",{className:"small text-muted",children:T.value})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n===T.value&&i.jsx(ta,{bg:"primary",className:"small",children:l("Selected","kivicare-clinic-management-system")}),i.jsxs(ta,{bg:"secondary",className:"small",children:[T.dynamic_variables?.body?.length||0," ",l("vars","kivicare-clinic-management-system")]}),i.jsx("i",{className:"bi bi-arrow-right text-muted"})]})]})},T.value))})]},w.value))})})})]})})]}),i.jsx(Un,{className:"mt-4",children:i.jsx(Ct,{xs:12,children:i.jsxs(mt,{children:[i.jsxs(mt.Header,{children:[i.jsx(mt.Title,{children:l("Test Results","kivicare-clinic-management-system")}),i.jsx(mt.Subtitle,{className:"text-muted",children:l("Recent webhook test deliveries and responses","kivicare-clinic-management-system")})]}),i.jsx(mt.Body,{children:o.length===0?i.jsxs("div",{className:"text-center py-5 text-muted",children:[i.jsx("i",{className:"bi bi-play display-1 opacity-25 d-block mb-3"}),i.jsx("p",{children:l("No test results yet. Run a test to see delivery results here.","kivicare-clinic-management-system")})]}):i.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:i.jsx("div",{className:"d-grid gap-3",children:o.map(w=>i.jsxs("div",{className:"border rounded p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[N(w.status),i.jsxs("div",{children:[i.jsx("p",{className:"fw-medium mb-1",children:w.webhook}),i.jsxs("p",{className:"text-muted small mb-1",children:[w.module,"  ",w.event]}),i.jsxs("p",{className:"text-muted small mb-0",children:[i.jsx(ta,{bg:"secondary",className:"me-2",children:w.method}),w.url]})]})]}),i.jsxs("div",{className:"text-end",children:[i.jsx(ta,{bg:_(w.status),className:"mb-1",children:w.responseCode}),i.jsxs("p",{className:"text-muted small mb-1",children:[w.responseTime,"ms"]}),i.jsx("p",{className:"text-muted small mb-0",children:w.timestamp})]})]}),i.jsx("hr",{className:"my-3"}),i.jsxs("div",{children:[i.jsx(Mt.Label,{className:"small text-muted",children:l("Response Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-light p-3 rounded mt-1",children:[i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Status:","kivicare-clinic-management-system")}),i.jsx(ta,{bg:_(w.status),className:"ms-1",children:w.status.toUpperCase()})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Code:","kivicare-clinic-management-system")}),i.jsx("span",{className:"ms-1 fw-medium",children:w.responseCode})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:l("Time:","kivicare-clinic-management-system")}),i.jsxs("span",{className:"ms-1 fw-medium",children:[w.responseTime,"ms"]})]})]}),i.jsxs("div",{children:[i.jsx("small",{className:"text-muted d-block mb-1",children:l("Response Body:","kivicare-clinic-management-system")}),i.jsx("pre",{className:"small mb-0",style:{overflowX:"auto",fontSize:"0.75rem",maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #dee2e6",borderRadius:"0.25rem",padding:"0.5rem"},children:typeof w.response=="string"?w.response:JSON.stringify(w.response,null,2)})]})]})]})]},w.id))})})})]})})})]})},lhe=()=>(f.useEffect(()=>{const t=new URLSearchParams(window.location.search),e=t.get("code"),n=t.get("error"),s=t.get("error_description");window.opener?(e?window.opener.postMessage({type:"oauth2_callback",code:e},window.location.origin):n&&window.opener.postMessage({type:"oauth2_callback",error:s||n},window.location.origin),setTimeout(()=>{window.close()},500)):console.error("OAuth2Callback: No opener window found")},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:l("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:l("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:l("This window will close automatically.","kivicare-clinic-management-system")})]})})),ohe=[{att_name:"clinic",name:l("Choose your Clinic","kivicare-clinic-management-system"),fixed:!1},{att_name:"doctor",name:l("Choose your Doctor","kivicare-clinic-management-system"),fixed:!1},{att_name:"servicesCategory",name:l("Services from Category","kivicare-clinic-management-system"),fixed:!1},{att_name:"selectDateTime",name:l("Select Date and Time","kivicare-clinic-management-system"),fixed:!0},{att_name:"userDetail",name:l("User Detail information","kivicare-clinic-management-system"),fixed:!0},{att_name:"appointmentExtra",name:l("Appointment Extra Data","kivicare-clinic-management-system"),fixed:!0},{att_name:"confirmation",name:l("Confirmation","kivicare-clinic-management-system"),fixed:!0}],wx=[{id:1,label:l("Show Phone & Email","kivicare-clinic-management-system")},{id:2,label:l("Show Phone Number","kivicare-clinic-management-system")},{id:3,label:l("Show Email Address","kivicare-clinic-management-system")},{id:4,label:l("Hide contact details","kivicare-clinic-management-system")}],Pd={clinic:[{key:"showClinicImage",label:l("Show Clinic Image","kivicare-clinic-management-system")},{key:"showClinicAddress",label:l("Show Clinic Address","kivicare-clinic-management-system")}],doctor:[{key:"showDoctorImage",label:l("Show Doctor Image","kivicare-clinic-management-system")},{key:"showDoctorExperience",label:l("Show Doctor Experience","kivicare-clinic-management-system")},{key:"showDoctorSpeciality",label:l("Show doctor speciality","kivicare-clinic-management-system")},{key:"showDoctorDegree",label:l("Show doctor degree","kivicare-clinic-management-system")},{key:"showDoctorRating",label:l("Show doctor rating","kivicare-clinic-management-system")}],service:[{key:"showServiceImage",label:l("Show Service Image","kivicare-clinic-management-system")},{key:"showServicetype",label:l("Show Service Type","kivicare-clinic-management-system")},{key:"showServicePrice",label:l("Show Service Price","kivicare-clinic-management-system")},{key:"showServiceDuration",label:l("Show Service Duration","kivicare-clinic-management-system")},{key:"skip_service_when_single",label:l("Skip service when single is present","kivicare-clinic-management-system")}],color:[{key:"primaryColor",label:l("Primary Color","kivicare-clinic-management-system")},{key:"primaryHoverColor",label:l("Primary Hover Color","kivicare-clinic-management-system")},{key:"secondaryColor",label:l("Secondary Color","kivicare-clinic-management-system")},{key:"secondaryHoverColor",label:l("Secondary Hover Color","kivicare-clinic-management-system")}],print:[{key:"widget_print",label:l("Print Detail","kivicare-clinic-management-system")},{key:"afterWoocommerceRedirect",label:l("Redirect to Print after payment","kivicare-clinic-management-system")}]},che=({label:t,value:e="#000000",onChange:n,disabled:s=!1})=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx("input",{type:"color",className:"form-control form-control-color",value:e,title:l("Choose your color","kivicare-clinic-management-system"),onChange:n,disabled:s}),i.jsx("label",{className:"form-label",children:l(t,"kivicare-clinic-management-system")})]}),Zo=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(t,"kivicare-clinic-management-system")}),e]})}),dhe=({id:t,name:e,fixed:n,disabled:s})=>{const{attributes:a,listeners:r,setNodeRef:o,transform:c,transition:d,isDragging:m}=Hk({id:t,disabled:n}),u={transform:La.Transform.toString(c),transition:d,opacity:m?.7:1,cursor:n?"not-allowed":"grab",background:m?"#eaf1ff":void 0,boxShadow:m?"0 0 10px #5670CC":void 0,pointerEvents:n?"none":"auto",filter:s?"grayscale(1) opacity(0.5)":void 0};return i.jsxs("div",{ref:o,style:u,...a,...!n&&!s?r:{},className:`p-3 bg-body mb-2 d-flex align-items-center gap-3 ${s?"disabled":""}`,children:[!n&&!s&&i.jsx("i",{className:"ph ph-list fs-5"}),i.jsx("span",{className:"font-size-14 flex-grow-1",children:l(e,"kivicare-clinic-management-system")})]})},mhe=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{data:n,isLoading:s,error:a}=bn("settings","widget-setting",{},{enabled:!0}),r=cn("settings","widget-setting"),[o,c]=f.useState(!1),{data:d}=Cn(),m=d?.data?.hideUtilityLinks,{control:u,handleSubmit:p,setValue:h,watch:g,reset:x}=Xt({defaultValues:{showClinicImage:!1,showClinicAddress:!1,clinicContactDetails:wx[0],showDoctorImage:!1,showDoctorExperience:!1,showDoctorSpeciality:!1,showDoctorDegree:!1,showDoctorRating:!1,doctorContactDetails:wx[0],primaryColor:"#5670CC",primaryHoverColor:"#4563CC",secondaryColor:"#F67E7D",secondaryHoverColor:"#000000",widget_print:!1,afterWoocommerceRedirect:!1,widgetOrder:ohe,showServiceImage:!0,showServicetype:!0,showServicePrice:!0,showServiceDuration:!0,skip_service_when_single:!1}}),v=g("widgetOrder"),y=TP(Qh(Lk,{activationConstraint:{distance:5}}));f.useEffect(()=>{!n?.status||!n?.data||x(_=>({..._,...Object.fromEntries(Object.entries(n.data).filter(([w,T])=>T!=null&&T!==""))}))},[n,x]),f.useEffect(()=>{if(!a)return;const _=typeof a=="string"?a:a?.response?.data?.message||a?.message||l("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:_,confirmButtonText:l("Ok","kivicare-clinic-management-system")})},[a]);const b=_=>{const{active:w,over:T}=_;if(!T||w.id===T.id)return;const A=v.findIndex(E=>E.att_name===w.id),M=v.findIndex(E=>E.att_name===T.id);if(!v[A].fixed&&!v[M].fixed){const E=pf(v,A,M);h("widgetOrder",E,{shouldDirty:!0})}},j=p(async _=>{c(!0);try{const w={..._,widgetOrder:v},T=await r.mutateAsync(w);Ze.fire({icon:T.status?"success":"error",title:l(T.status?"Success":"Error","kivicare-clinic-management-system"),text:T.message,confirmButtonText:l("Ok","kivicare-clinic-management-system")})}catch(w){console.error("Error saving settings:",w),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}finally{c(!1)}}),k=_=>({text:_?l("Active","kivicare-clinic-management-system"):l("Inactive","kivicare-clinic-management-system"),className:_?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),S=_=>_.map(({key:w,label:T})=>i.jsx(je,{name:w,control:u,render:({field:A})=>i.jsx(ln,{label:T,checked:A.value,onChange:A.onChange,badge:k(A.value),className:"mb-3",disabled:o})},w)),N=_=>i.jsx(je,{name:_,control:u,render:({field:w})=>i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:l("Contact Details","kivicare-clinic-management-system")})}),i.jsx(ot,{className:"react-select-box",options:wx,value:w.value,onChange:w.onChange,isDisabled:o,getOptionLabel:T=>T.label,getOptionValue:T=>T.id,classNamePrefix:"react-select",styles:{menuPortal:T=>({...T,zIndex:9999})}})]})});return s?i.jsx(vP,{}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Widget Settings","kivicare-clinic-management-system"),m!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/widget-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:"top","data-bs-placement":"right",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primaryGoogle Event Template"})})]}),e&&i.jsxs(Zo,{title:"Clinic",children:[S(Pd.clinic),N("clinicContactDetails")]}),i.jsxs(Zo,{title:"Doctor",children:[S(Pd.doctor),N("doctorContactDetails")]}),i.jsx(Zo,{title:"Service",children:S(Pd.service)}),i.jsx(Zo,{title:"Widget Color",children:i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Pd.color.map(({key:_,label:w})=>i.jsx(je,{name:_,control:u,render:({field:T})=>i.jsx(che,{label:w,value:T.value,onChange:A=>T.onChange(A.target.value),disabled:o})},_))})}),i.jsxs("div",{className:"position-relative",children:[!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),text:l("Change widget order setting is available in Kivicare Pro. Upgrade now to access these features.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx(Zo,{title:"Widget Order",children:i.jsx($k,{sensors:y,collisionDetection:AP,onDragEnd:b,children:i.jsx(qk,{items:v.map(_=>_.att_name),strategy:ZP,children:v.map(_=>i.jsx(dhe,{id:_.att_name,name:_.name,fixed:_.fixed,disabled:o},_.att_name))})})})]}),i.jsx(Zo,{title:"Print Detail setting",children:S(Pd.print)}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary px-4",onClick:j,disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),l("Saving...","kivicare-clinic-management-system")]}):l("Save Settings","kivicare-clinic-management-system")})})]})})},uhe=({title:t,titleId:e,...n},s)=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:26,viewBox:"0 0 114 26",width:114,ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"m23.6977 25.2924h-20.10301c-1.32885 0-2.58954-.6978-3.202853-1.8892-.698493-1.3617-.4429462-2.9956.630343-4.068l13.98692-13.97375h-10.01743c-2.7599 0-4.99167-2.22968-4.99167-4.987h18.5186c1.3288 0 2.5895.69784 3.2028 1.88927.6986 1.36164.443 2.9956-.6303 4.0679l-13.98691 13.97378h11.60181c2.7599 0 4.9917 2.2297 4.9917 4.987zm79.5603-25.2924c-2.879 0-5.4691 1.24249-7.241 3.23389-1.7883-1.9914-4.3781-3.23389-7.2401-3.23389-5.3497 0-9.7108 4.56149-9.7108 9.88887v15.40353c2.7598 0 4.9915-2.2297 4.9915-4.987v-10.46757c0-2.5701 1.9933-4.74871 4.5487-4.85083 2.692-.10213 4.9237 2.05945 4.9237 4.73169v10.58671c0 2.7573 2.2317 4.987 4.9915 4.987v-15.45457c0-2.5701 1.9935-4.74871 4.5485-4.85083 2.692-.10213 4.924 2.05945 4.924 4.73169v10.58671c0 2.7573 2.232 4.987 4.991 4.987v-15.40353c-.017-5.32738-4.378-9.88887-9.727-9.88887zm-54.3805 12.8334c0 7.0806-5.7583 12.8335-12.8455 12.8335-7.0871 0-12.8454-5.7529-12.8454-12.8335 0-7.0805 5.7753-12.8334 12.8454-12.8334 7.0702 0 12.8455 5.7529 12.8455 12.8334zm-4.9917 0c0-4.32315-3.5265-7.8464-7.8538-7.8464-4.3272 0-7.8538 3.52325-7.8538 7.8464 0 4.3233 3.5266 7.8465 7.8538 7.8465 4.3273 0 7.8538-3.5232 7.8538-7.8465zm32.6758 0c0 7.0806-5.758 12.8335-12.8451 12.8335-7.0877 0-12.8458-5.7529-12.8458-12.8335 0-7.0805 5.7757-12.8334 12.8458-12.8334 7.0696 0 12.8451 5.7529 12.8451 12.8334zm-4.9915 0c0-4.32315-3.5264-7.8464-7.8536-7.8464-4.3273 0-7.8541 3.52325-7.8541 7.8464 0 4.3233 3.5268 7.8465 7.8541 7.8465 4.3272 0 7.8536-3.5232 7.8536-7.8465z",fill:"#0b5cff"})),t_=f.forwardRef(uhe);function hhe(){const{isAddonActive:t,zoomIntegration:e}=ht();if(!t("telemed")||e!=="yes")return i.jsx(gg,{to:"/setting",replace:!0});const n=ze(),s=t("telemed"),[a,r]=f.useState(!1),[o,c]=f.useState(!1),{register:d,handleSubmit:m,reset:u,control:p,watch:h,formState:{isDirty:g,errors:x},getValues:v}=Xt({defaultValues:{auth_type:"none",account_id:"",client_id:"",client_secret:"",enable_server_to_server:!1}}),y=h("enable_server_to_server"),{data:b,isLoading:j,error:k}=bn("settings","zoom-telemed/doctor-config",{},{enabled:s});f.useEffect(()=>{if(b?.data){const D=b.data,O=D.auth_type==="server-to-server",F=D.is_connected===!0,q={auth_type:D.auth_type,account_id:D.account_id||"",client_id:D.client_id||"",client_secret:D.client_secret||"",enable_server_to_server:O&&F};u(q)}},[b,u]);const{refetch:S}=bn("settings","zoom-telemed/authorize",{},{enabled:a}),{refetch:N}=bn("settings","zoom-telemed/disconnect",{},{enabled:s&&b?.data?.connection_status==="not_connected"}),_=cn("settings","zoom-telemed/doctor-config"),w=cn("settings","zoom-telemed/test-connection"),T=async D=>{const O=D.enable_server_to_server,F=b?.data?.is_google_meet_connected;if(!(O&&F&&!(await Ze.fire({title:l("Warning","kivicare-clinic-management-system"),text:l("Press Yes to save server to server oauth configuration and will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes","kivicare-clinic-management-system"),cancelButtonText:l("No","kivicare-clinic-management-system")})).isConfirmed))try{r(!0),await _.mutateAsync({...D,auth_type:O?"server-to-server":"none"}),n.invalidateQueries(["settings","zoom-telemed/doctor-config"]),n.invalidateQueries(["config"]),Ze.fire({title:l("Success","kivicare-clinic-management-system"),text:l("Configuration saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(q){console.error("Update failed:",q),Ze.fire({title:l("Error","kivicare-clinic-management-system"),text:q?.response?.data?.message||l("Failed to save settings","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}finally{r(!1)}},A=async()=>{if(!(b?.data?.is_google_meet_connected&&!(await Ze.fire({title:l("Warning","kivicare-clinic-management-system"),text:l("Press yes to connect to Zoom. Connecting to Zoom will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes","kivicare-clinic-management-system"),cancelButtonText:l("No","kivicare-clinic-management-system")})).isConfirmed))try{r(!0);const{data:O}=await S();window.location.href=O?.data?.redirect_url}catch(O){console.error("Connection failed:",O),alert(l("Failed to connect to Zoom. Please try again.","kivicare-clinic-management-system"))}finally{r(!1)}},M=async()=>{w.mutateAsync({...v(),auth_type:"server-to-server"}).then(D=>{D?.data?.success?Ze.fire({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:l("Zoom configuration test successful!","kivicare-clinic-management-system"),icon:"success",confirmButtonText:l("OK","kivicare-clinic-management-system")}):Ze.fire({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:l("Zoom configuration test failed. Please check your settings.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})}).catch(D=>{console.error("Test failed:",D),Ze.fire({title:l("Test Zoom Configuration","kivicare-clinic-management-system"),text:D?.response?.data?.data?.error||D?.message,icon:"error",confirmButtonText:l("OK","kivicare-clinic-management-system")})})},E=async()=>{if((await Ze.fire({title:l("Disconnect Zoom","kivicare-clinic-management-system"),message:l("Are you sure you want to disconnect your Zoom account?","kivicare-clinic-management-system"),confirmButtonText:l("Disconnect","kivicare-clinic-management-system"),cancelButtonText:l("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{c(!0);const{data:O}=await N();n.invalidateQueries(["settings","zoom-telemed/doctor-config"])}catch(O){console.error("Disconnection failed:",O),alert(l("Failed to disconnect from Zoom. Please try again.","kivicare-clinic-management-system"))}finally{c(!1)}},P=()=>b?b?.data?.auth_type!=="oauth"?i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Telemed Server To Server Oauth","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:m(T),children:[i.jsx("div",{className:"mb-3 p-0 form-check form-switch",children:i.jsx(je,{name:"enable_server_to_server",control:p,render:({field:D})=>i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[i.jsx("label",{className:"form-check-label",htmlFor:"enableServerToServer",children:l("Zoom Telemed Server To Server Oauth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableServerToServer",checked:D.value,onChange:O=>D.onChange(O.target.checked),disabled:a})]})})}),y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Account ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${x.account_id?"is-invalid":""}`,placeholder:l("Enter Zoom Account ID","kivicare-clinic-management-system"),...d("account_id",{required:l("Account ID is required","kivicare-clinic-management-system")})}),x.account_id&&i.jsx("div",{className:"invalid-feedback",children:x.account_id.message}),i.jsx("div",{className:"form-text",children:l("Find this in your Zoom app credentials","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${x.client_id?"is-invalid":""}`,placeholder:l("Enter Client ID","kivicare-clinic-management-system"),...d("client_id",{required:l("Client ID is required","kivicare-clinic-management-system")})}),x.client_id&&i.jsx("div",{className:"invalid-feedback",children:x.client_id.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[l("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${x.client_secret?"is-invalid":""}`,placeholder:l("Enter Client Secret","kivicare-clinic-management-system"),...d("client_secret",{required:l("Client Secret is required","kivicare-clinic-management-system")})}),x.client_secret&&i.jsx("div",{className:"invalid-feedback",children:x.client_secret.message})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a||!g,children:a?l("Saving...","kivicare-clinic-management-system"):l("Save Settings","kivicare-clinic-management-system")}),y&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:M,children:l("Test Zoom Config","kivicare-clinic-management-system")})]})]}),y&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-4",children:[l("Your administrator has enabled server to server authentication.","kivicare-clinic-management-system"),i.jsx("br",{}),l("Meetings will be created using these credentials.","kivicare-clinic-management-system")]})]}):b?.data?.auth_type==="oauth"?i.jsxs("div",{className:"bg-body p-4 rounded",children:[i.jsx("h5",{className:"mb-3",children:l("Zoom Account Connection","kivicare-clinic-management-system")}),b?.data?.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("Your Zoom account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:E,disabled:o,children:o?l("Disconnecting...","kivicare-clinic-management-system"):l("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"bg-warning-subtle p-3 rounded d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),l("Your Zoom account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-warning",onClick:A,disabled:a,children:a?l("Connecting...","kivicare-clinic-management-system"):l("Connect Zoom Account","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("p",{className:"mb-1",children:[i.jsx("strong",{children:l("Connection Status:","kivicare-clinic-management-system")})," ",b?.data?.connection_status==="not_connected"?l("Not Connected","kivicare-clinic-management-system"):l("Connected","kivicare-clinic-management-system")]}),i.jsx("p",{className:"mb-0 text-muted",children:b?.data?.is_connected?l("You can now create Zoom meetings directly from appointments","kivicare-clinic-management-system"):l("Connect your Zoom account to enable telemedicine features","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"alert alert-warning",children:[i.jsx(t_,{}),l("Zoom telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")]}):null;return i.jsx("div",{className:"zoom-telemed-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsxs("div",{className:"d-flex align-items-center mb-4",children:[i.jsx(t_,{width:70,className:"me-3"}),i.jsx("h4",{className:"mb-0",children:l("Telemedicine Settings","kivicare-clinic-management-system")})]}),j?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:l("Loading Zoom configuration...","kivicare-clinic-management-system")})]}):k?i.jsxs("div",{className:"bg-danger-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-exclamation-mark fs-4 me-2"}),l("Failed to load Zoom configuration:","kivicare-clinic-management-system")," ",k.message]}):P(),i.jsxs("div",{className:"mt-5",children:[i.jsx("h6",{className:"mb-3",children:l("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-question text-primary fs-4"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/configuration-telemed-addon/doctor-level-configuration/",className:"text-decoration-none",children:l("Zoom integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("Learn how to set up and use Zoom telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-video fs-4 text-primary"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/getting-started-telemed-addon/system-requirements-zoom-account-types/",className:"text-decoration-none",children:l("Zoom meeting requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:l("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})})})}const bu={list:(t={})=>pe({endpoint:"push-templates",method:"GET",data:t}),get:t=>pe({endpoint:`push-templates/${t}`,method:"GET"}),save:t=>pe({endpoint:"push-templates",method:"POST",data:t}),setStatus:(t,e)=>pe({endpoint:`push-templates/${t}/status`,method:"POST",data:{enabled:e}}),sendTest:t=>pe({endpoint:"push-templates/test-notification",method:"POST",data:t})},zc={all:["pushTemplates"],list:()=>[...zc.all,"list"],detail:t=>[...zc.all,"detail",t]},phe=(t={})=>ft({queryKey:zc.list(),queryFn:async()=>{const e=await bu.list();return e?.data??e??[]},...t}),ghe=(t,e={})=>ft({queryKey:zc.detail(t),queryFn:async()=>{const n=await bu.get(t);return n?.data??n??null},enabled:!!t,...e}),fhe=(t={})=>{const e=ze();return Le({mutationFn:n=>bu.save(n),onSuccess:()=>{e.invalidateQueries({queryKey:zc.list()})},...t})},vhe=(t={})=>{const e=ze();return Le({mutationFn:({name:n,enabled:s})=>bu.setStatus(n,s),onSuccess:()=>{e.invalidateQueries({queryKey:zc.list()})},...t})},xhe=(t={})=>Le({mutationFn:e=>bu.sendTest(e),...t}),yhe=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),a=f.useRef(null),{isAddonActive:r}=ht(),o=r("api"),{data:c}=Cn(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:p}=bn("settings","app-configuration",{},{enabled:o}),h=cn("settings","app-configuration"),{register:g,handleSubmit:x,reset:v,formState:{errors:y,isDirty:b}}=Xt({mode:"onBlur",reValidateMode:"onChange",defaultValues:{serverKey:"",client_emaail:"",privateKey:"",project_id:"",server_client_id:""}}),{mutateAsync:j,isLoading:k}=vhe({onSuccess:()=>{Ee.success(l("Template saved","kivicare-clinic-management-system")),T()},onError:q=>{Ee.error(l("Failed to update template status","kivicare-clinic-management-system"))}});f.useEffect(()=>{if(!o||!m?.status||!m?.data||n)return;const q=Object.fromEntries(Object.entries(m.data).filter(([U,K])=>K!=null&&K!==""));v(q),s(!0)},[m,v,o,n]);const S=[{key:"serverKey",label:l("Firebase Server Key","kivicare-clinic-management-system"),placeholder:l("Firebase Server Key","kivicare-clinic-management-system"),required:!0},{key:"server_client_id",label:l("Firebase Server Client Id","kivicare-clinic-management-system"),placeholder:l("Firebase Server Client Id","kivicare-clinic-management-system"),required:!0},{key:"client_emaail",label:l("Client Email","kivicare-clinic-management-system"),placeholder:l("Client Email","kivicare-clinic-management-system"),required:!0,pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:l("Please enter a valid email address","kivicare-clinic-management-system")}},{key:"privat_key",label:l("Private Key","kivicare-clinic-management-system"),placeholder:l("Private Key","kivicare-clinic-management-system"),required:!0},{key:"project_id",label:l("Project Id","kivicare-clinic-management-system"),placeholder:l("Project Id","kivicare-clinic-management-system"),required:!0}],N=async q=>{e(!0);try{const U=await h.mutateAsync(q);U.status!==!0?Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(U.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(U.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}catch(U){console.error("Failed to save settings:",U)}finally{e(!1)}},{data:_=[],isLoading:w,refetch:T}=phe({enabled:o}),A=dn(),M=q=>{A(`/setting/push-template/edit/${q}`)},E=In(),P=async(q,U)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{try{await j({name:q,enabled:U==="on"?"off":"on"})}catch(K){console.error("Failed to toggle template enabled",K)}},500)},D=()=>{A("/setting/push-template/test-notification")},O=[E.accessor(q=>q.title,{id:"title",header:()=>l("Name","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:q.getValue()})})}),E.accessor(q=>q.recipients,{id:"recipients",header:()=>l("Recipients","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:(q.getValue()||[]).join(", ")})})}),E.accessor(q=>q.enabled,{id:"enabled",header:()=>l("Enabled","kivicare-clinic-management-system"),cell:q=>i.jsx(ln,{checked:q.getValue(),onChange:()=>P(q.row.original.name,q.getValue())})}),E.display({id:"actions",header:()=>l("Actions","kivicare-clinic-management-system"),cell:q=>i.jsx("button",{className:"btn btn-link p-0",onClick:()=>M(q.row.original.name),children:l("Manage","kivicare-clinic-management-system")})})];if(p){let q;typeof p=="string"?q=p:p?.response?.data?.message?q=p.response.data.message:p?.message?q=p.message:q=l("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(q,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}const F=({title:q,fields:U,errors:K,register:ne})=>i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:q}),i.jsx("div",{className:"row gy-4",children:U.map(Y=>i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{htmlFor:Y.key,className:"form-label",children:[Y.label,Y.required&&" *"]}),i.jsx("input",{type:"text",id:Y.key,className:`form-control ${K[Y.key]?"is-invalid":""}`,placeholder:Y.placeholder,disabled:t,...ne(Y.key,{required:Y.required?l(`${Y.label} is required`,"kivicare-clinic-management-system"):!1,pattern:Y.pattern})}),K[Y.key]&&i.jsx("div",{className:"invalid-feedback",children:K[Y.key].message})]})},Y.key))})]})});return u?i.jsx(pP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:`app-configuration-setting${o?"":" p-4"}`,children:[!o&&i.jsx(ri,{title:l("Available For Kivicare Flutter","kivicare-clinic-management-system"),text:l("This feature is available For Kivicare Flutter App users. Please upgrade to access this feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-flutter-app-clinic-patient-management-system/30970616"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("App Configurations","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#app-config",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":l("Help","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),o&&u&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!u&&i.jsxs("form",{onSubmit:x(N),children:[i.jsx(F,{title:l("Firebase Cloud Messaging Configuration","kivicare-clinic-management-system"),fields:S,errors:y,register:g}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||!b,children:t?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):l("Save","kivicare-clinic-management-system")})})]}),o&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:l("Push Notification Templates","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:D,children:l("Send Test Notification","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsx(wn,{data:_,columns:O,isLoading:w,moduleNamePlural:l("Templates","kivicare-clinic-management-system"),bordered:!0,responsive:!0,enableSelection:!1,pagination:null})})]})]})})},n_=()=>{const{name:t}=Wt(),e=dn(),[n,s]=f.useState(!1),[a,r]=f.useState(null),[o,c]=f.useState({}),[d,m]=f.useState([]),[u,p]=f.useState(null),h=!t,{data:g,isLoading:x,error:v}=ghe(t,{enabled:!!t}),y=fhe({onSuccess:()=>{Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Template saved","kivicare-clinic-management-system")}).then(()=>e(-1))},onError:w=>{Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:w?.message||l("Failed to save template","kivicare-clinic-management-system")})}}),{mutateAsync:b}=xhe({onSuccess:()=>{Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Test notification sent successfully","kivicare-clinic-management-system")}).then(()=>e(-1))},onError:w=>{Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:w?.message||l("Failed to send test notification","kivicare-clinic-management-system")})}});f.useEffect(()=>{if(g){const w=g.template||null;if(w){r({title:w.title||"",body:w.body||"",data:w.data||{},recipients:w.recipients||[],enabled:!!w.enabled});const T=g.dynamic_keys||g.dynamicKeys||[];m(Array.isArray(T)?T.map(A=>A.replace(/[{}]/g,"")):[])}}},[g]),f.useEffect(()=>{if(v){let w=v?.response?.data?.message||v?.message||l("Failed to load template","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:w,confirmButtonText:l("Ok","kivicare-clinic-management-system")}).then(()=>e(-1))}},[v,e]);const j=w=>{navigator.clipboard.writeText(`{{${w}}}`),p(w),setTimeout(()=>{p(T=>T===w?null:T)},1500)},k=[{value:"patient",label:l("Patient","kivicare-clinic-management-system")},{value:"doctor",label:l("Doctor","kivicare-clinic-management-system")},{value:"receptionist",label:l("Receptionist","kivicare-clinic-management-system")},{value:"clinic",label:l("Clinic Admin","kivicare-clinic-management-system")}],S=()=>{const w={};return h&&(!a?.userId||isNaN(a.userId))&&(w.userId=l("User ID must be a valid integer","kivicare-clinic-management-system")),a?.recipients?.length||(w.recipients=l("Recipients is required","kivicare-clinic-management-system")),a?.title?.trim()||(w.title=l("Title is required","kivicare-clinic-management-system")),a?.body?.trim()||(w.body=l("Body is required","kivicare-clinic-management-system")),c(w),Object.keys(w).length===0},N=async()=>{if(S()){s(!0);try{const w={name:t,title:a.title||"",body:a.body||"",data:a.data||{},recipients:a.recipients||[],enabled:!!a.enabled};await y.mutateAsync(w)}catch(w){console.error("Failed to save push template",w)}finally{s(!1)}}},_=async()=>{if(S()){s(!0);try{await b({userId:parseInt(a.userId),recipients:Array.isArray(a.recipients)?a.recipients[0]:a.recipients,title:a.title,body:a.body})}catch(w){console.error("Failed to send test notification",w)}finally{s(!1)}}};return x&&!h?i.jsx(of,{}):!a&&!h?null:(!a&&h&&r({userId:"",recipients:[],title:"",body:"",data:{},enabled:!0}),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"manage-push-notification-template",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title mb-0",children:h?l("Send Test Notification","kivicare-clinic-management-system"):`${l("Edit Push Template","kivicare-clinic-management-system")} : ${t}`}),i.jsx("div",{className:"d-flex gap-2",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>e(-1),children:l("Back","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[d.length>0&&i.jsxs("div",{className:"form-group mb-3",children:[i.jsx("label",{className:"form-label h6",children:l("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:d.map(w=>i.jsx(Qe,{placement:"top",overlay:T=>i.jsx(ut,{...T,children:u===w?l("Copied","kivicare-clinic-management-system"):l("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>j(w),children:[w," ",i.jsx("i",{className:"ph ph-copy"})]})},w))})]}),i.jsxs("div",{className:"row gy-3",children:[h&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("User ID","kivicare-clinic-management-system")," *"]}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:`form-control ${o.userId?"is-invalid":""}`,placeholder:l("Enter user ID","kivicare-clinic-management-system"),value:a?.userId||"",onChange:w=>{const T=w.target.value;/^\d*$/.test(T)&&r(A=>({...A,userId:T}))}}),o.userId&&i.jsx("div",{className:"invalid-feedback d-block",children:o.userId})]}),h&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Recipients","kivicare-clinic-management-system")," *"]}),i.jsx(ot,{options:k,value:k.find(w=>a?.recipients?.[0]===w.value)||null,onChange:w=>r(T=>({...T,recipients:w?[w.value]:[]})),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:w=>({...w,zIndex:9999})}}),o.recipients&&i.jsx("div",{className:"invalid-feedback d-block",children:o.recipients})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[l("Title","kivicare-clinic-management-system")," *"]}),i.jsx("input",{type:"text",className:`form-control ${o.title?"is-invalid":""}`,placeholder:l("Enter notification title","kivicare-clinic-management-system"),value:a?.title||"",onChange:w=>r(T=>({...T,title:w.target.value}))}),o.title&&i.jsx("div",{className:"invalid-feedback d-block",children:o.title})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[l("Body","kivicare-clinic-management-system")," *"]}),i.jsx("textarea",{className:`form-control ${o.body?"is-invalid":""}`,rows:4,placeholder:l("Enter notification body","kivicare-clinic-management-system"),value:a?.body||"",onChange:w=>r(T=>({...T,body:w.target.value}))}),o.body&&i.jsx("div",{className:"invalid-feedback d-block",children:o.body})]})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{className:"btn btn-sm btn-primary",onClick:h?_:N,disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),h?l("Sending...","kivicare-clinic-management-system"):l("Saving...","kivicare-clinic-management-system")]}):h?l("Send Notification","kivicare-clinic-management-system"):l("Save Template","kivicare-clinic-management-system")})})]}))},bhe=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{control:n,handleSubmit:s,watch:a,reset:r,errors:o}=Xt({defaultValues:{only_same_day_book:!1,post_book:"365",pre_book:"0",fileUploadEnabled:!1,emailReminder:!1,emailReminderHours:"24",smsReminder:!1,whatsappReminder:!1,appointmentDescription:!1,showPatientInfo:!1,cancellationBufferEnabled:!1,cancellationBufferHours:"365"}}),[c,d]=f.useState(!1),[m,u]=f.useState(""),p=a("only_same_day_book"),h=a("emailReminder"),g=a("smsReminder"),x=a("whatsappReminder"),v=a("cancellationBufferEnabled"),y=cn("settings","appointment-setting"),{data:b,isLoading:j,error:k}=bn("settings","appointment-setting");f.useEffect(()=>{if(b){const _=M=>!!["true",!0,1,"1","yes","on"].includes(M),w=["only_same_day_book","fileUploadEnabled","emailReminder","smsReminder","whatsappReminder","appointmentDescription","showPatientInfo","cancellationBufferEnabled"],T=b.data||b,A={...T};w.forEach(M=>{A[M]=_(T[M])}),r(M=>({...M,...A}))}},[b,r]);const S=async _=>{const w=parseInt(_.post_book,10),T=parseInt(_.pre_book,10);if(!_.only_same_day_book&&!isNaN(T)&&!isNaN(w)&&T>w){u("Booking Close Before cannot be greater than Booking Open Before."),Ze.fire({icon:"error",title:l("Invalid Settings","kivicare-clinic-management-system"),text:l('"Booking Close Before (in Days)" cannot be greater than "Booking Open Before (in Days)".',"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")});return}d(!0),u("");try{const M=await y.mutateAsync(_);if(d(!1),!M.status){u(M.message),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(M.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")});return}Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l(M.message,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}catch(M){d(!1),console.error("Failed to save settings:",M),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("An unexpected error occurred","kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}};if(k){const _=typeof k=="string"?k:k?.response?.data?.message||k?.message||l("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l(_,"kivicare-clinic-management-system"),confirmButtonText:l("Ok","kivicare-clinic-management-system")})}const N=({title:_,children:w,className:T=""})=>i.jsx("div",{className:`card ${T}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:l(_,"kivicare-clinic-management-system")}),w]})});return i.jsx("form",{onSubmit:s(S),className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[l("Restrict Advance Appointment Booking","kivicare-clinic-management-system"),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/appointment-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:l("Help"),"data-bs-placement":"top",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),j&&i.jsx(kP,{}),!j&&i.jsxs(i.Fragment,{children:[i.jsxs(N,{children:[i.jsx(je,{name:"only_same_day_book",control:n,render:({field:_})=>i.jsx(ln,{label:l("Allow Same Day Booking Only.","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.only_same_day_book})}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(je,{name:"post_book",control:n,render:({field:_})=>i.jsx(Ut,{type:"number",label:l("Booking Open Before (in Days)","kivicare-clinic-management-system"),placeholder:l("365","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,error:o?.post_book,isDisable:p})})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(je,{name:"pre_book",control:n,render:({field:_})=>i.jsx(Ut,{type:"number",label:l("Booking Close Before (in Days)","kivicare-clinic-management-system"),placeholder:l("0","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,error:o?.pre_book,isDisable:p})})})]}),i.jsxs("span",{className:"font-size-14 mt-2",children:[i.jsxs("span",{className:"text-primary fw-medium",children:[l("Note","kivicare-clinic-management-system"),":"]})," ",l("For example, Booking Open Before: 60 days, Booking Close Before: 7 days, As consideration for the current date, The appointment booking opens 60 days ago and closed 7 days ago.","kivicare-clinic-management-system")]})]}),i.jsx(N,{children:i.jsx(je,{name:"fileUploadEnabled",control:n,render:({field:_})=>i.jsx(ln,{label:l("Appointment File Upload Setting.","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.fileUploadEnabled})})}),i.jsxs(N,{title:l("Appointment Reminder","kivicare-clinic-management-system"),children:[i.jsx(je,{name:"emailReminder",control:n,render:({field:_})=>i.jsx(ln,{label:l("Email Reminder.","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,className:"mb-2",disabled:c,error:o?.emailReminder})}),e&&i.jsx(je,{name:"smsReminder",control:n,render:({field:_})=>i.jsx(ln,{label:l("SMS Reminder (Twilio)","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.smsReminder,className:"mb-2"})}),e&&i.jsx(je,{name:"whatsappReminder",control:n,render:({field:_})=>i.jsx(ln,{label:l("WhatsApp Reminder (Twilio)","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.whatsappReminder,className:"mb-2"})}),(h||g||x)&&i.jsx(je,{name:"emailReminderHours",control:n,render:({field:_})=>i.jsx(Ut,{type:"number",label:l("Select Hours","kivicare-clinic-management-system"),placeholder:l("365","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,error:o?.emailReminderHours,className:"mb-2"})})]}),i.jsx(N,{title:l("Appointment Setting","kivicare-clinic-management-system"),children:i.jsx(je,{name:"appointmentDescription",control:n,render:({field:_})=>i.jsx(ln,{label:l("Appointment Description","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.appointmentDescription,className:"mb-2"})})}),i.jsxs(N,{title:l("Appointment Cancellation Buffer","kivicare-clinic-management-system"),children:[i.jsx("span",{className:"font-size-14",children:l("To prevent appointments from getting canceled too close to the appointment time by patients, you can set a cancellation buffer.","kivicare-clinic-management-system")}),i.jsx(je,{name:"cancellationBufferEnabled",control:n,render:({field:_})=>i.jsx(ln,{label:l("Enable Cancellation Buffer","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:c,error:o?.cancellationBufferEnabled,className:"mt-3"})}),v&&i.jsx(je,{name:"cancellationBufferHours",control:n,render:({field:_})=>i.jsx(Ut,{type:"number",label:l("Select Hours","kivicare-clinic-management-system"),placeholder:l("e.g. 24","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,error:o?.cancellationBufferHours})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:l("Save","kivicare-clinic-management-system")})})]})]})})})},rb=(t,e=null,n=0)=>{let s=[];return t.forEach(a=>{const r=a.id||`kc-uid-${Math.random().toString(36).slice(2)}`,o=a.type||(a.childrens&&a.childrens.length>0?"parent":"route");s.push({...a,id:r,parentId:e,level:n,type:o,iconClass:a.iconClass||"",routeClass:a.routeClass||`custom_${r}`}),a.childrens&&a.childrens.length>0&&(s=s.concat(rb(a.childrens,r,n+1)))}),s},whe=t=>{const e={};t.forEach(s=>{const{isDefault:a,level:r,parentId:o,id:c,...d}=s;e[s.id]={...d,type:s.type,label:s.label,link:s.link||"",iconClass:s.iconClass||"",routeClass:s.routeClass,childrens:[]}});const n=[];return t.forEach(s=>{s.parentId&&e[s.parentId]?e[s.parentId].childrens.push(e[s.id]):n.push(e[s.id])}),n},khe=t=>{const e=[];t.forEach(n=>{for(;e.length>0&&e[e.length-1].level>=n.level;)e.pop();n.parentId=e.length>0?e[e.length-1].id:null,e.push(n)})},aI=({item:t,onChange:e,onDelete:n})=>{const{attributes:s,listeners:a,setNodeRef:r,transform:o,transition:c,isDragging:d}=Hk({id:t.id}),m={transform:La.Transform.toString(o),transition:c,opacity:d?0:1,background:"transparent",paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},u=t.type==="group",p=t.isDefault;return i.jsx("div",{ref:r,style:m,...s,children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx("i",{className:"ph ph-hand-grabbing",style:{cursor:"grab"},...a})}),i.jsx("div",{className:"col-md-3",children:i.jsx("input",{type:"text",className:"form-control",value:t.label,onChange:h=>e(t.id,"label",h.target.value),style:{fontWeight:u?"bold":"normal"},disabled:p})}),i.jsx("div",{className:"col-md-4",children:!u&&i.jsx("input",{type:"text",className:"form-control",value:t.link,onChange:h=>e(t.id,"link",h.target.value),disabled:p})}),i.jsx("div",{className:"col-md-3",children:!u&&i.jsx("input",{type:"text",className:"form-control",placeholder:"ph ph-icon-name",value:t.iconClass,onChange:h=>e(t.id,"iconClass",h.target.value)})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:!p&&i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>n(t.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})})},jhe=({allItems:t,onChange:e,onDelete:n,activeItem:s,activeSubtreeIds:a,placeholderIndex:r,placeholderLevel:o})=>{let c=t;s&&(c=c.filter(m=>m.id!==s.id&&!a.includes(m.id)));const d=c.map(m=>m.id);return i.jsx(qk,{items:d,strategy:ZP,children:c.reduce((m,u,p)=>(r===p&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},`placeholder-${p}`)),m.push(i.jsx("div",{style:{marginLeft:u.level*22},children:i.jsx(aI,{item:u,onChange:e,onDelete:n})},u.id)),r===c.length&&p===c.length-1&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},"placeholder-end")),m),[])})},Nhe=()=>{const{isAddonActive:t}=ht(),e=t("kiviPro"),{data:n,isLoading:s}=bn("settings","sidebar-setting",{},{enabled:e}),a=cn("settings","sidebar-setting"),{data:r}=Cn(),o=r?.data?.hideUtilityLinks,[c,d]=f.useState([]),[m,u]=f.useState({}),[p,h]=f.useState({}),[g,x]=f.useState("administrator"),[v,y]=f.useState(!1),[b,j]=f.useState(null),[k,S]=f.useState(null),[N,_]=f.useState([]),[w,T]=f.useState(null),[A,M]=f.useState(null);f.useEffect(()=>{if(!n?.status||!n?.data?.data)return;const le=Object.keys(n.data.data),W=le.map(re=>({id:re,label:l(re.replace("_"," ").replace(/\b\w/g,de=>de.toUpperCase()),"kivicare-clinic-management-system"),title:l(re.replace("_"," ").replace(/\b\w/g,de=>de.toUpperCase()),"kivicare-clinic-management-system")}));d(W);const z={},ie={};le.forEach(re=>{const de=n.data.data[re].current,L=n.data.data[re].default,Q=rb(de),V=rb(L),Z=new Set(V.map(X=>X.routeClass));z[re]=Q.map(X=>({...X,isDefault:Z.has(X.routeClass)})),ie[re]=V.map(X=>({...X,isDefault:!0}))}),u(z),h(ie),x(le[0]||"administrator")},[n]);const E=TP(Qh(HP),Qh(zP),Qh(Ik)),P=(le,W,z)=>{u(ie=>({...ie,[g]:ie[g].map(re=>re.id===le?{...re,[W]:z}:re)}))},D=le=>{u(W=>{const z=[...W[g]],ie=z.findIndex(Q=>Q.id===le);if(ie===-1||z[ie].isDefault)return W;const re=z[ie].level;let de=ie+1;for(;de<z.length&&z[de].level>re;)de++;const L=[...z.slice(0,ie),...z.slice(de)];return{...W,[g]:L}})},O=()=>{const le=`kc-uid-${Math.random().toString(36).slice(2)}`,W={id:le,type:"group",label:"New Section",link:"",iconClass:"",routeClass:`custom_group_${le}`,parentId:null,level:0,isDefault:!1};u(z=>({...z,[g]:[...z[g],W]}))},F=()=>{const le=`kc-uid-${Math.random().toString(36).slice(2)}`,W={id:le,type:"route",label:"New Item",link:"/",iconClass:"ph ph-question",routeClass:`custom_route_${le}`,parentId:null,level:0,isDefault:!1};u(z=>({...z,[g]:[...z[g],W]}))},q=()=>{Ze.fire({title:l("Are you sure?","kivicare-clinic-management-system"),text:l("Are you sure you want to reset to default positions? All customizations will be lost.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:l("Yes, reset it!","kivicare-clinic-management-system"),cancelButtonText:l("No, cancel!","kivicare-clinic-management-system")}).then(le=>{le.isConfirmed&&(y(!0),a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{reset:!0,type:g}}).then(async W=>{W?.status?(u(z=>({...z,[g]:p[g]})),await Ze.fire({icon:"success",title:l("Reset successful!","kivicare-clinic-management-system")})):Ze.fire({icon:"error",title:l("Failed to reset","kivicare-clinic-management-system"),text:W?.message||"Unknown error"})}).catch(W=>{Ze.fire({icon:"error",title:l("Failed to reset","kivicare-clinic-management-system"),text:W.message})}).finally(()=>{y(!1)}))})},U=le=>{const W=le.active.id,z=m[g].findIndex(L=>L.id===W),ie=m[g][z];S(ie);let re=[],de=z+1;for(;de<m[g].length&&m[g][de].level>ie.level;)re.push(m[g][de].id),de++;_(re),T(null),M(null)},K=(le,W)=>{const{active:z,over:ie}=le;if(!ie||z.id===ie.id)return null;const re=W.findIndex(oe=>oe.id===ie.id);if(re===-1)return null;const de=le.active.rect.current.translated,L=le.over.rect,Q=W[re],V=de.top>L.top+L.height/2;let Z=re+(V?1:0);const X=de.left-L.left;let G=Q.level+Math.round(X/22);G=Math.max(0,G);const ee=Z>0?W[Z-1]:null,ae=Z<W.length?W[Z]:null;let I=ee?ee.type==="group"?ee.level:ee.level+1:0,H=0;ae&&ae.level>I&&(H=ae.level);let B=Math.max(H,Math.min(G,I));k.type==="group"&&(B=0);let te=null;if(B>0&&ee){let oe=ee;for(;oe&&oe.level>=B;)oe=W.find(ye=>ye.id===oe.parentId);oe&&oe.level===B-1?te=oe.id:(B=I,te=ee.parentId)}return{newIndex:Z,newDepth:B,newParentId:te}},ne=le=>{if(!k)return;const W=m[g].filter(ie=>ie.id!==k.id&&!N.includes(ie.id)),z=K(le,W);if(!z){T(null),M(null);return}T(z.newIndex),M(z.newDepth)},Y=le=>{if(!k)return;const W=m[g].filter(X=>X.id!==k.id&&!N.includes(X.id)),z=K(le,W);if(T(null),M(null),S(null),_([]),!z)return;const{newIndex:ie,newDepth:re,newParentId:de}=z,L={...k,level:re,parentId:de},Q=m[g].filter(X=>N.includes(X.id));let V=[...W.slice(0,ie),L,...Q,...W.slice(ie)];khe(V),V=V.map(X=>X.isDefault&&X.routeClass!=="patient_encounter_list"&&X.routeClass!=="encounter_template"?{...X,parentId:null,level:0}:X);const Z=new Set(V.map(X=>X.parentId).filter(X=>X!==null));V.forEach(X=>{Z.has(X.id)?(X.type==="route"||X.type==="href")&&(X.type="parent"):X.type==="parent"&&!X.isDefault&&(X.type="route")}),u(X=>({...X,[g]:V}))},fe=async()=>{y(!0),j(null);try{const le=whe(m[g]),W=await a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{type:g,data:le}});if(!W?.status)throw new Error(W?.message||"Save failed");await Ze.fire({icon:"success",title:l("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(le){j(le.message),Ze.fire({icon:"error",title:l("Failed to save settings","kivicare-clinic-management-system"),text:le.message})}finally{y(!1)}};return s?i.jsx(NP,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:`sidebar-setting${e?"":" p-4"}`,children:[!e&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[l("Sidebar Settings","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sidebar-settings/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":l("Help","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:c.map(le=>i.jsx("li",{className:"nav-item",children:i.jsx("button",{className:`nav-link ${g===le.id?"active":""}`,onClick:()=>x(le.id),children:le.label})},le.id))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-primary me-2",onClick:O,children:l("Add Section","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary me-2",onClick:F,children:l("Add Item","kivicare-clinic-management-system")})]})}),c.map(le=>i.jsxs("div",{style:{display:g===le.id?"block":"none"},children:[i.jsxs("div",{className:"sidebar-items bg-white",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1  d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Drag","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Label","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("URL","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Icon","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:l("Action","kivicare-clinic-management-system")})})})]}),i.jsxs($k,{sensors:E,collisionDetection:AP,onDragStart:U,onDragOver:ne,onDragEnd:Y,children:[i.jsx(jhe,{allItems:m[le.id]||[],onChange:P,onDelete:D,activeItem:k,activeSubtreeIds:N,placeholderIndex:w,placeholderLevel:A}),i.jsx(QP,{dropAnimation:null,children:k?i.jsx(aI,{item:k,onChange:()=>{},onDelete:()=>{}}):null})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:q,disabled:v,children:l("Reset to Default","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:fe,disabled:v,children:v?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})}),b&&i.jsx("div",{className:"alert alert-danger mt-3",children:b})]},le.id))]})})})},Che=()=>{const{data:t,isLoading:e,refetch:n}=bn("settings","google-calendar-integration"),s=cn("settings","google-calendar-integration/connect"),a=cn("settings","google-calendar-integration/disconnect"),[r,o]=He.useState(!1),c=t?.connected||!1;f.useEffect(()=>{const u=new URLSearchParams(window.location.search),p=window.location.hash;if(u.get("google_calendar_connected")==="1"&&Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Google Calendar connected successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p),n()}),u.get("google_calendar_error")==="1"){const h=u.get("error_code")||"unknown";let g=l("An error occurred during Google Calendar connection","kivicare-clinic-management-system");switch(h){case"oauth_cancelled":g=l("Google Calendar connection was cancelled","kivicare-clinic-management-system");break;case"invalid_callback":g=l("Invalid callback parameters received","kivicare-clinic-management-system");break;case"invalid_state":g=l("Invalid authentication state","kivicare-clinic-management-system");break;case"state_mismatch":g=l("Authentication state verification failed","kivicare-clinic-management-system");break;case"auth_failed":g=l("Failed to obtain Google Calendar authorization","kivicare-clinic-management-system");break;case"processing_error":g=l("Error processing Google Calendar connection","kivicare-clinic-management-system");break;default:g=l("An unknown error occurred during Google Calendar connection","kivicare-clinic-management-system")}Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:g,confirmButtonText:l("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p)})}},[n]);const d=async()=>{o(!0);try{const u=await s.mutateAsync({});u.url?(sessionStorage.setItem("kc_oauth_in_progress","1"),window.location.href=u.url):Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:l("Failed to get authentication URL","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}catch(u){console.error("Connection error:",u);let p=l("An error occurred during connection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:p,confirmButtonText:l("OK","kivicare-clinic-management-system")})}finally{o(!1)}},m=async()=>{o(!0);try{await a.mutateAsync({}),Ze.fire({icon:"success",title:l("Success","kivicare-clinic-management-system"),text:l("Google Calendar disconnected successfully!","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")}),n()}catch(u){console.error("Disconnection error:",u);let p=l("An error occurred during disconnection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Ze.fire({icon:"error",title:l("Error","kivicare-clinic-management-system"),text:p,confirmButtonText:l("OK","kivicare-clinic-management-system")})}finally{o(!1)}};return f.useEffect(()=>{sessionStorage.removeItem("kc_oauth_in_progress")},[]),i.jsx("div",{className:"card mt-4 mx-auto",style:{maxWidth:900,borderRadius:8},children:i.jsxs("div",{className:"card-body py-4 px-5",children:[i.jsx("h4",{className:"mb-4",children:l("Google Calendar Integration","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"fs-5",children:c?i.jsxs("span",{className:"text-success",children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),l("You are connected with the google calender.","kivicare-clinic-management-system")]}):i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-calendar me-2"}),l("Please connect with your Google Account to get appointments in Google Calendar automatically.","kivicare-clinic-management-system")]})}),i.jsx("button",{className:`btn ${c?"btn-outline-danger":"btn-primary"}`,onClick:c?m:d,disabled:r||e,children:r?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l("Please wait...","kivicare-clinic-management-system")]}):i.jsx(i.Fragment,{children:c?l("Disconnect","kivicare-clinic-management-system"):l("Connect to Google","kivicare-clinic-management-system")})})]})]})})},kx=()=>{const t=Hn(),e=Wt(),n=t.pathname.includes("/add"),s=t.pathname.includes("/edit/");return n?i.jsx(Dm,{}):s?i.jsx(Dm,{sessionId:e.id}):i.jsx(Tk,{})},She=[Vn({path:"/setting",title:"Setting",outlet:nie,meta:{description:"Setting",showInSidebar:!0},skeleton:die,children:[We({path:"general-setting",component:Lie,title:"General Setting",index:!0,meta:{description:"General Setting",breadcrumb:"General Setting"},skeleton:uP}),We({path:"holidays",component:Jv,title:"Holidays",roles:["administrator","doctor","receptionist","clinic_admin"],index:!0,permissions:["clinic_schedule"],meta:{description:"Holidays",breadcrumb:"Holidays"},skeleton:mie}),We({path:"holidays/add",component:Jv,title:"Add Holiday",props:{isAdding:!0},permissions:["clinic_schedule_add","clinic_schedule"],meta:{description:"Add a new Holiday",breadcrumb:"Add Holiday"}}),We({path:"holidays/edit/:id",component:Jv,title:"Edit Holiday",props:{isEditing:!0},permissions:["clinic_schedule_edit","clinic_schedule"],meta:{description:"Edit existing Holidays",breadcrumb:"Edit Holiday"}}),We({path:"doctor-session",component:kx,title:"setting/Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_list"],index:!0,meta:{description:"Doctor Session",breadcrumb:"Doctor Session"}}),We({path:"doctor-session/add",component:kx,title:"Add Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_add","doctor_session_list"],meta:{description:"Add new doctor session",breadcrumb:"Add Doctor Session"}}),We({path:"doctor-session/edit/:id",component:kx,title:"Edit Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_edit","doctor_session_list"],meta:{description:"Edit existing doctor session",breadcrumb:"Edit Doctor Session"}}),We({path:"configurations",component:Fie,title:"Configuration Setting",roles:["administrator"],index:!0,meta:{description:"Configuration Setting",breadcrumb:"Configuration Setting"},skeleton:hP}),We({path:"app-configuration",component:yhe,title:"App Configuration Setting",roles:["administrator"],index:!0,meta:{description:"App Configuration Setting",breadcrumb:"App Configuration Setting"},skeleton:pP}),We({path:"email-template",component:Bae,title:"Email Template Settting",index:!0,meta:{description:"Email Template Settting",breadcrumb:"Email Template Settting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"email-template/edit/:id",component:zue,title:"Edit Email Template",props:{isEditing:!0},meta:{description:"Edit existing Email",breadcrumb:"Edit Email Template"}}),We({path:"email-template/test",component:Vue,title:"Test Email"}),We({path:"push-template/test-notification",component:n_,title:"Send Test Notification",meta:{description:"Send test push notification",breadcrumb:"Send Test Notification"}}),We({path:"push-template/edit/:name",component:n_,title:"Edit Push Template",props:{isEditing:!0},meta:{description:"Edit existing Push Template",breadcrumb:"Edit Push Template"},skeleton:of}),We({path:"sms-whatsapp-template",component:ehe,title:"SMS-WhatsApp Template setting",index:!0,meta:{description:"SMS-WhatsApp Template setting",breadcrumb:"SMS-WhatsApp Template setting"}}),We({path:"sms-whatsapp-template/edit/:id",component:the,title:"SMS-WhatsApp Edit Template",index:!0,meta:{description:"SMS-WhatsApp edit Template",breadcrumb:"SMS-WhatsApp edit Template"}}),Vn({path:"webhooks",title:"WebHook setting",outlet:Eie,meta:{description:"WebHook setting",breadcrumb:"WebHook setting",hideSettingSidebar:!1},children:[We({path:"",element:i.jsx(gg,{to:"./configuration",replace:!0}),index:!0}),Vn({path:"configuration",title:"WebHook configuration",outlet:cie,meta:{description:"WebHook configuration",breadcrumb:"WebHook configuration",noTransitionAnimation:!0},children:[We({path:"",component:nhe,title:l("WebHooks","kivicare-clinic-management-system"),meta:{description:l("webhook","kivicare-clinic-management-system"),breadcrumb:l("WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:she,skeleton:CC,title:l("Add WebHook","kivicare-clinic-management-system"),meta:{description:l("Add new webhook","kivicare-clinic-management-system"),breadcrumb:l("Add WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}}),We({path:"edit/:id",component:ahe,skeleton:CC,title:l("Edit WebHook","kivicare-clinic-management-system"),meta:{description:l("Edit existing webhook","kivicare-clinic-management-system"),breadcrumb:l("Edit WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}})]}),We({path:"events-log",component:ihe,title:l("Events Log","kivicare-clinic-management-system"),meta:{description:l("Webhook events and logs","kivicare-clinic-management-system"),breadcrumb:l("Events Log","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:5,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"testing",component:rhe,title:l("Testing","kivicare-clinic-management-system"),meta:{description:l("Webhook testing tools","kivicare-clinic-management-system"),breadcrumb:l("Testing","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:Die}),We({path:"oauth2/callback",component:lhe,title:l("OAuth2 Callback","kivicare-clinic-management-system"),meta:{description:l("OAuth2 authorization callback","kivicare-clinic-management-system"),breadcrumb:l("OAuth2 Callback","kivicare-clinic-management-system")}})]}),Vn({path:"custom-notification",title:"Custom Notification",outlet:oie,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},children:[We({path:"",component:Oae,title:"Custom Notification",index:!0,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:UC,skeleton:$y,title:"Create Notification Service",meta:{description:"Create new notification service",breadcrumb:"Create Service"}}),We({path:"edit/:id",component:UC,skeleton:$y,title:"Configure Notification Service",meta:{description:"Configure notification service settings",breadcrumb:"Configure Service"}}),We({path:"test/:id",component:Fae,title:"Test Notification Service",meta:{description:"Test notification service",breadcrumb:"Test Service"}}),We({path:"oauth2/callback",component:$ae,title:"OAuth2 Callback",meta:{description:"OAuth2 authorization callback",breadcrumb:"OAuth2 Callback"}})]}),Vn({path:"custom-form",title:"Custom Form setting",outlet:lie,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"},children:[We({path:"",component:Bie,skeleton:hie,title:"Custom Form setting",index:!0,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"}}),We({path:"add",component:VC,skeleton:By,title:"Add Custom Form",permissions:["custom_form_add","custom_form_list"],meta:{description:"Add new custom form",breadcrumb:"Add Custom Form",hideSettingSidebar:!0}}),We({path:"edit/:id",component:VC,skeleton:By,title:"Edit Custom Form",permissions:["custom_form_edit","custom_form_list"],meta:{description:"Edit existing custom form",breadcrumb:"Edit Custom Form",hideSettingSidebar:!0}})]}),We({path:"encounter-body-chart",component:Uue,title:"Encounter Body Chart setting",index:!0,meta:{description:"Encounter Body Chart setting",breadcrumb:"Encounter Body Chart setting"},skeleton:fP}),We({path:"patient-setting",component:Que,title:"patient setting",index:!0,meta:{description:"patient setting",breadcrumb:"patient setting"},skeleton:CP}),We({path:"widget-setting",component:mhe,title:"Widget setting",index:!0,meta:{description:"Widget setting",breadcrumb:"Widget setting"},skeleton:vP}),We({path:"google-event-template",component:Wue,title:"Google Event template setting",index:!0,meta:{description:"Google Event template setting",breadcrumb:"Google Event template setting"},skeleton:xP}),We({path:"google-meet",component:Kue,title:"Google Meet Setting",roles:["administrator"],index:!0,meta:{description:"Google Meet Setting",breadcrumb:"Google Meet Setting"},skeleton:yP}),We({path:"google-meet-configuration",component:Gue,title:"Google Meet Configuration",roles:["doctor"],index:!0,meta:{description:"Google Meet Configuration",breadcrumb:"Google Meet Configuration"}}),We({path:"zoom-telemed",component:Aie,title:"Zoom Telemed setting",roles:["administrator"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"zoom-configuration",component:hhe,title:"Zoom Telemed setting",roles:["doctor"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"listings",component:bx,title:"listings setting",index:!0,permissions:["static_data_list"],meta:{description:"Listing setting",breadcrumb:"Listing setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})})}),We({path:"listings/add",component:bx,title:"Add Listing",permissions:["static_data_add","static_data_list"],meta:{description:"Add Listing",breadcrumb:"Add Listing"},skeleton:SC}),We({path:"listings/edit/:id",component:bx,title:"Edit Listing",permissions:["static_data_edit","static_data_list"],meta:{description:"Edit Listing",breadcrumb:"Edit Listing"},skeleton:SC}),We({path:"custom-field",component:tx,title:"Cusotm Field Setting",index:!0,permissions:["custom_field_list"],meta:{description:"Cusotm Field Setting",breadcrumb:"Cusotm Field Setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"custom-field/add",component:tx,title:"Add Custom Field",permissions:["custom_field_add","custom_field_list"],meta:{description:"Add new custom field",breadcrumb:"Add Custom Field"}}),We({path:"custom-field/edit/:id",component:tx,title:"Edit Custom Field",permissions:["custom_field_edit","custom_field_list"],meta:{description:"Edit existing custom field",breadcrumb:"Edit Custom Field"}}),We({path:"pro-settings",component:Jue,title:"Pro Setting",index:!0,meta:{description:"Pro Setting",breadcrumb:"Pro Setting"},skeleton:bP}),We({path:"payments",component:Zue,title:"Payment Methods",index:!0,meta:{description:"List of all payment methods",breadcrumb:"Payment Methods"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"payment/:gateway",component:sie,title:"Update Payment Setting",meta:{description:"Update payment method by key",breadcrumb:"Update"}}),We({path:"appointment-settings",component:bhe,title:"Appointment settings",index:!0,skeleton:kP,meta:{description:"Appointment settings"}}),We({path:"permission",component:Xue,title:"Permission Setting",index:!0,skeleton:jP,meta:{description:"Permission Setting"}}),We({path:"sidebar-settings",component:Nhe,title:"Sidebar Setting",index:!0,skeleton:NP,meta:{description:"Sidebar Setting"}}),We({path:"google-calendar-integration",component:Che,title:"Google Calendar Integration",index:!0,meta:{description:"Google Calendar Integration"}})]})],_he=()=>{const t=Hn();return i.jsxs("div",{className:"billings-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/billings"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Ehe=()=>{const{getCurrencyDetail:t,isAddonActive:e,hasCapability:n}=ht(),s=e("kiviPro"),a=Kn(),r=mi(),o=zi(),{data:c,isLoading:d}=Xz({enabled:s}),m=c?.data?.encounters||[],[u,p]=f.useState(""),h=f.useMemo(()=>m.find(B=>String(B.id)===String(u)),[m,u]),[g,x]=f.useState(!1),v=t(),y=v.prefix,b=v.postfix,[j,k]=f.useState({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),[S,N]=f.useState(!1),[_,w]=f.useState(!1),[T,A]=f.useState(null),[M,E]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[P,D]=f.useState(!1),{data:O,isLoading:F}=Pw(T,{enabled:!!T&&_});f.useEffect(()=>{O&&E(O?.data)},[O]);const q=B=>{A(B.id),w(!0)},U=()=>{N(!1),p("")},K=()=>{w(!1),A(null),D(!1)},ne=f.useMemo(()=>Object.fromEntries(Object.entries(j).filter(([B,te])=>te!==""&&te!==null&&te!==void 0)),[j]),{data:Y,isLoading:fe,error:le}=Gz(ne,{enabled:s}),W=tV(),z=Y?.data?.billings||[],ie=Y?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},re=[{value:"Paid",label:l("Paid","kivicare-clinic-management-system")},{value:"Unpaid",label:l("Unpaid","kivicare-clinic-management-system")}],[de,L]=f.useState(""),Q=qa(de,500);f.useEffect(()=>{k(B=>({...B,search:Q,page:1}))},[Q]);const V=B=>{L(B.target.value)},Z=async B=>{try{yt({title:l("Exporting...","kivicare-clinic-management-system"),text:l("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const te={format:B,...ne},ye=(await W.mutateAsync(te))?.data?.bills||[];if(!ye.length){bt({icon:"ph-info",iconColor:"text-info",bgIconColor:"bg-info",title:l("No data","kivicare-clinic-management-system"),text:l("No billing records found for export.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const me=new Date().toISOString().split("T")[0],xe=ye.map(Ce=>({id:Ce.id,total_amount:Ce.total_amount,discount:Ce.discount,actual_amount:Ce.actual_amount,encounter_id:Ce.encounter_id,encounter_date:Ce.encounter_date,clinic_id:Ce.clinic_id,doctor_id:Ce.doctor_id,patient_id:Ce.patient_id,appointment_id:Ce.appointment_id,status:Ce.status,doctor_name:Ce.doctor_name,patient_name:Ce.patient_name,clinic_name:Ce.clinic_name,service_name:Ce.service_name}));switch(B){case"csv":cs(xe,`bills-${me}.csv`);break;case"xls":ds(xe,`bills-${me}.xls`);break;case"pdf":ms(xe,`bills-${me}.pdf`,"Billing Records");break;default:throw new Error("Invalid export format")}Bi(),Ee.success(l("Export completed successfully.","kivicare-clinic-management-system"))}catch(te){console.error("Export error:",te),rt({title:l("Error!","kivicare-clinic-management-system"),text:te.message||l("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:l("OK","kivicare-clinic-management-system")})}},X=In(),R=f.useMemo(()=>[X.accessor("invoiceId",{id:"invoiceId",header:()=>l("Bill ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),X.accessor("encounter_id",{id:"encounter_id",header:()=>l("Encounter ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),...o?[]:[X.accessor("doctor.name",{id:"doctorName",header:()=>l("Doctor","kivicare-clinic-management-system"),cell:B=>i.jsx(Zt,{profileUrl:B.row.original.doctor.doctor_image_url,name:B.getValue(),email:B.row.original.doctor.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})],...!a&&!r?[X.accessor("clinic.name",{header:()=>l("Clinic","kivicare-clinic-management-system"),cell:B=>i.jsx(Zt,{profileUrl:B.row.original.clinic.clinic_image_url,name:B.getValue(),email:B.row.original.clinic.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})]:[],X.accessor("patient.name",{id:"patientName",header:()=>l("Patient","kivicare-clinic-management-system"),cell:B=>i.jsx(Zt,{profileUrl:B.row.original.patient.patient_image_url,name:B.getValue(),email:B.row.original.patient.email,fallbackText:B.getValue()?.charAt(0)||"P",variant:"primary",size:"sm"})}),X.accessor("services",{header:()=>l("Services","kivicare-clinic-management-system"),cell:B=>B.getValue()}),X.accessor("total_amount",{header:()=>l("Total","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),X.accessor("discount",{header:()=>l("Discount","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),X.accessor("actual_amount",{header:()=>l("Amount Due","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),X.accessor("date",{header:()=>l("Date","kivicare-clinic-management-system"),cell:B=>B.getValue()}),X.accessor("status",{header:()=>l("Status","kivicare-clinic-management-system"),cell:B=>{const te=B.getValue(),oe=te==="paid"?"Paid":"Unpaid",ye=te==="paid"?"bg-success-subtle text-success":"bg-danger-subtle text-danger";return i.jsx("span",{className:`badge ${ye} px-3 py-2`,children:oe})}}),X.accessor("actions",{header:()=>l("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:B})=>{const te=oe=>ye=>i.jsx(ut,{id:`tooltip-${B.original.id}-${oe}`,...ye,children:oe});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n("patient_bill_view")&&i.jsx(Qe,{placement:"top",overlay:te(l("Bill Detail","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/billings/view/${B.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),n("patient_bill_edit")&&B.original.status!=="paid"&&i.jsx(Qe,{placement:"top",overlay:te(l("Edit","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>q(B.original),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),n("patient_encounter_view")&&i.jsx(Qe,{placement:"top",overlay:te(l("Encounter Details","kivicare-clinic-management-system")),children:i.jsx(gt,{to:`/encounter/dashboard/${B.original.encounter_id}/clinical-details`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-gauge"})})})]})}})],[n]),G=B=>{const te=B[0];k(te?oe=>({...oe,page:1,orderBy:te.id,order:te.desc?"desc":"asc"}):oe=>({...oe,page:1,orderBy:"",order:""}))},ee=()=>{if(!u){rt({title:l("Error","kivicare-clinic-management-system"),text:l("Please select an encounter to add a bill.","kivicare-clinic-management-system")});return}E({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{id:h.clinicId,name:h.clinicName,email:"",clinic_image_url:h.clinic_image_url||""},doctor:{id:h.doctorId,name:h.doctorName,email:"",doctor_image_url:h.doctor_image_url||""},patient:{id:h.patientId,name:h.patientName,email:"",patient_image_url:h.patient_image_url||""},patientEncounter:{id:h.id,appointmentId:h.appointmentId||null},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),N(!1),p(""),w(!0)},ae=[{type:"number",name:"id",label:l("Bill ID","kivicare-clinic-management-system"),placeholder:l("Enter Bill ID","kivicare-clinic-management-system")},{type:"number",name:"encounter_id",label:l("Encounter ID","kivicare-clinic-management-system"),placeholder:l("Enter Encounter ID","kivicare-clinic-management-system")},{type:"text",name:"doctorName",label:l("Doctor Name","kivicare-clinic-management-system"),placeholder:l("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...!a&&!r?[{type:"text",name:"clinicName",label:l("Clinic Name","kivicare-clinic-management-system"),placeholder:l("Enter Clinic Name","kivicare-clinic-management-system"),min:1}]:[],{type:"text",name:"patientName",label:l("Patient Name","kivicare-clinic-management-system"),placeholder:l("Enter Patient Name","kivicare-clinic-management-system"),min:1},{type:"text",name:"serviceName",label:l("Service Name","kivicare-clinic-management-system"),placeholder:l("Enter Service Name","kivicare-clinic-management-system"),min:1},{type:"select",name:"status",label:l("Status","kivicare-clinic-management-system"),options:re,placeholder:l("Select status","kivicare-clinic-management-system")}],I=f.useMemo(()=>["search","status","date_from","date_to","id","encounter_id","doctorName","clinicName","patientName","serviceName"].some(te=>{const oe=j[te];return typeof oe=="object"&&oe!==null?oe.value!==void 0&&oe.value!=="":oe!=null&&oe!==""}),[j]),H=f.useRef(null);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4"}),i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:l("Billing Records","kivicare-clinic-management-system")})}),i.jsxs("div",{className:" d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[n("patient_bill_add")&&i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:l("Add Bill","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>x(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:l("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(si,{ref:H,onChange:B=>{if(B.length===2){const[te,oe]=B;k(ye=>({...ye,date_from:te.toISOString().split("T")[0],date_to:oe.toISOString().split("T")[0],page:1}))}},options:{mode:"range",dateFormat:bi(window.kc_frontend.date_format),locale:ai()},className:"form-control w-auto",placeholder:l("Select date range","kivicare-clinic-management-system")}),j.date_from&&j.date_to&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{k(B=>({...B,date_from:"",date_to:"",page:1})),H.current&&H.current.flatpickr&&H.current.flatpickr.clear()},title:l("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx("div",{children:i.jsx(ot,{placeholder:l("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:re,onChange:B=>k(te=>({...te,status:B?B.value:"",page:1})),isClearable:!0,styles:{menuPortal:B=>({...B,zIndex:9999})}})})]}),i.jsx("div",{className:"table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:l("Search...","kivicare-clinic-management-system"),value:de,onChange:V})]}),n("patient_bill_export")&&s&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Z("csv"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Z("xls"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:l("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>Z("pdf"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})]}),i.jsx(wn,{data:z,columns:R,isLoading:fe,error:le,currentPage:ie.currentPage,perPage:ie.perPage,totalItems:ie.total,lastPage:ie.lastPage,onPageChange:B=>k(te=>({...te,page:B})),onPerPageChange:B=>k(te=>({...te,perPage:B,page:1})),onSortingChange:G,enableSelection:!1,moduleNamePlural:"Billing records"}),i.jsx(Mw,{show:_,onHide:K,editFormData:M,setEditFormData:E,showAddServiceItemForm:P,setShowAddServiceItemForm:D,editBillId:T,handleCloseEditModal:K}),i.jsxs(st,{show:S,onHide:U,centered:!0,children:[i.jsx(st.Header,{closeButton:!0,children:i.jsx(st.Title,{children:l("Add New Bill","kivicare-clinic-management-system")})}),i.jsx(st.Body,{className:"p-0",children:i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-2",children:[i.jsxs("label",{htmlFor:"select_type",className:"form-label",children:[l("Select Encounter ID","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ot,{id:"select_type",className:"react-select-box",classNamePrefix:"react-select",placeholder:l("Select Encounter","kivicare-clinic-management-system"),isLoading:d,options:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})),value:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})).find(B=>String(B.value)===String(u))||null,onChange:B=>p(B?B.value:""),styles:{menuPortal:B=>({...B,zIndex:9999})},isClearable:!0})]}),h&&i.jsxs(i.Fragment,{children:[i.jsx("h6",{className:"font-size-14",children:l("Encounter Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.encounterDate?new Date(h.encounterDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Patient Name","kivicare-clinic-management-system"),":"]}),i.jsx(Zt,{profileUrl:h.patient_image_url,name:h.patientName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[l("Doctor Name","kivicare-clinic-management-system"),":"]}),i.jsx(Zt,{profileUrl:h.doctor_image_url,name:h.doctorName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap",children:[i.jsxs("span",{className:"font-size-14",children:[l("Clinic Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.clinicName||"-"})]})]})]})]})}),i.jsxs(st.Footer,{className:"gap-3",children:[i.jsx(Yt,{variant:"secondary",onClick:U,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:ee,children:l("Generate","kivicare-clinic-management-system")})]})]}),i.jsx(ha,{show:g,onHide:()=>x(!1),queryParams:j,onApplyFilters:B=>{k(te=>({...te,...B,page:1})),x(!1)},onResetFilters:()=>{k({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),x(!1)},title:l("Filters","kivicare-clinic-management-system"),hasAppliedFilters:I,fields:ae}),!s&&i.jsx(ri,{text:l("Bill module is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},The=[Vn({path:"/billings",title:"Billings",outlet:_he,permissions:["patient_bill_list"],module:"billing",meta:{description:"Billing management system",icon:"receipt",showInSidebar:!0},children:[We({path:"",component:Ehe,title:"All Billings",index:!0,permissions:["patient_bill_list"],module:"billing",meta:{description:"List of all billings",breadcrumb:"All Billings"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"view/:id",component:oP,title:"Billing Details",index:!0,permissions:["patient_bill_view"],module:"billing",meta:{description:"Details of a specific billing",breadcrumb:"Billing Details"},skeleton:lP})]})],Ahe=()=>{const t=Hn();return i.jsxs("div",{className:"doctor-session-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(ki,{}),i.jsx("div",{children:t.pathname!=="/doctor-session"&&i.jsx(Gn,{size:"sm"})})]}),i.jsx(Gi,{})]})},Dhe=[Vn({path:"/doctor-session",title:"Doctor Sessions",outlet:Ahe,permissions:["doctor_session_list"],meta:{description:"Manage doctor sessions",icon:"calendar",showInSidebar:!0,section:"management"},children:[We({path:"",component:Tk,title:"Sessions",index:!0,permissions:["doctor_session_list"],meta:{description:"List of all doctor sessions",breadcrumb:"All Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Nn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create"},permissions:["doctor_session_add"],skeleton:tg,meta:{description:"Add a new doctor session",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Dm,title:"Edit Doctor Session",props:{isEditing:!0,mode:"edit"},permissions:["doctor_session_edit"],skeleton:tg,meta:{description:"Edit doctor session",breadcrumb:"Edit"}})]})],rI=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx(yo,{items:["50px","80px"]}),i.jsx(C,{width:"120px",height:"1.125rem",className:"mt-2"})]})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs(pt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"200px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs(pt,{children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs(pt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"300px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(pt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})})]})})]})]}),Xo={getReportInitialData:()=>pe({endpoint:"reports/initial-data",method:"GET"}),getClinicRevenueOverall:(t={})=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall params:",t),pe({endpoint:"reports/clinic-revenue-overall",method:"GET",data:t}).then(e=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall response:",e),e))),getClinicRevenueDetail:(t={})=>pe({endpoint:"reports/clinic-revenue-detail",method:"GET",data:t}),getDoctorRevenue:(t={})=>pe({endpoint:"reports/doctor-revenue",method:"GET",data:t}),getClinicAppointmentCount:(t={})=>pe({endpoint:"reports/clinic-appointment-count",method:"GET",data:t}),getDoctorAppointmentCount:(t={})=>pe({endpoint:"reports/doctor-appointment-count",method:"GET",data:t})};Qm.register(Z9,eq,P9,fT,B9,kT,yT);const i_=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"320px",minHeight:"320px"},children:i.jsx("p",{className:"text-muted",children:l("No data available for the selected period.","kivicare-clinic-management-system")})}),Rhe={id:"doughnutCenterText",beforeDraw:({config:t,chartArea:e,ctx:n})=>{const{type:s,options:{plugins:{centerText:a}={}}}=t;if(s!=="doughnut"||!a?.display||!a?.text)return;const{top:r,left:o,width:c,height:d}=e,m=o+c/2,u=r+d/2;n.save(),n.font="1rem Inter, sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(a.label,m,u-12),n.fillText(a.text,m,u+10),n.restore()}},Phe=t=>{const e=t?.data?.datasets;return e?.length?e.some(n=>n.data.some(s=>s>0)):!1},Md=({title:t,chartType:e="bar",queryKey:n,queryFn:s,filters:a,enabled:r=!0,colors:o,selectOptions:c,selectValue:d,onSelectChange:m,initialData:u})=>{const p=f.useRef();f.useEffect(()=>()=>{p.current&&p.current.destroy()},[]);const h=_=>{if(!p.current)return;const w=p.current,T=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();if(_==="png"||_==="jpeg"){const A=document.createElement("a");A.download=`${T}.${_}`,A.href=w.toBase64Image(`image/${_}`),A.click()}else if(_==="csv"){const A=w.data;let M;e==="doughnut"?(M=l("Clinic","kivicare-clinic-management-system")+","+l("Revenue","kivicare-clinic-management-system")+`
`,A.labels.forEach((D,O)=>{M+=`"${D}",${A.datasets[0].data[O]||0}
`})):(M=(a.month==="all"?l("Month","kivicare-clinic-management-system"):l("Day","kivicare-clinic-management-system"))+","+A.datasets.map(O=>`"${O.label||"Dataset"}"`).join(",")+`
`,A.labels.forEach((O,F)=>{M+=`"${O}",`+A.datasets.map(q=>q.data[F]||0).join(",")+`
`}));const E=new Blob([M],{type:"text/csv"}),P=document.createElement("a");P.download=`${T}.csv`,P.href=URL.createObjectURL(E),P.click()}},g=[{value:"png",label:l("PNG","kivicare-clinic-management-system")},{value:"jpeg",label:l("JPEG","kivicare-clinic-management-system")},{value:"csv",label:l("CSV","kivicare-clinic-management-system")}],{data:x,isFetching:v}=ft({queryKey:n,queryFn:()=>s(a),enabled:r,staleTime:300*1e3}),y=f.useMemo(()=>{if(e!=="doughnut")return"";const _=x?.data?.datasets?.[0]?.data?.reduce((M,E)=>M+E,0)||0,w=u?.clinic_currency?.prefix||"",T=u?.clinic_currency?.postfix||"",A=_.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${w}${A}${T}`},[x,e,u]),b=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{position:"bottom"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0},suggestedMax:5}}}),[]),j=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,cutout:"70%",plugins:{legend:{position:"bottom"},title:{display:!1},centerText:{display:!0,text:y,label:l("Total","kivicare-clinic-management-system")}}}),[y]),k=(_,w)=>({labels:_?.data?.labels||[],datasets:(_?.data?.datasets||[]).map((T,A)=>({...T,backgroundColor:w?.[A%w.length]||"#4874dc"}))}),S=f.useMemo(()=>{const _=x?.data?.datasets?.[0]?.data?.length>0;return{labels:_?x.data.labels:[],datasets:[{label:t,data:_?x.data.datasets[0].data:[],backgroundColor:o||[],hoverOffset:4}]}},[x,o,t]),N=()=>{const _=JSON.stringify(n);return e==="doughnut"?S.datasets[0].data.length?i.jsx(_T,{ref:p,options:j,data:S,plugins:[Rhe]},_):i.jsx(i_,{}):Phe(x)?i.jsx(oq,{ref:p,options:b,data:k(x,o)},_):i.jsx(i_,{})};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"m-0",children:t}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ot,{options:g,onChange:_=>h(_.value),placeholder:l("Export","kivicare-clinic-management-system"),styles:{container:_=>({..._,minWidth:"80px"})},className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1}),c&&i.jsx(ot,{options:c,value:c.find(_=>_.value===d),onChange:_=>m(_.value),className:"react-select-box",classNamePrefix:"react-select",styles:{container:_=>({..._,minWidth:"100px"}),menuPortal:_=>({..._,zIndex:9999})}})]})]}),i.jsx("div",{className:"position-relative",children:i.jsx("div",{style:{height:320},children:v?e==="doughnut"?i.jsx("div",{className:"col-lg-12",children:i.jsxs(pt,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"160px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}):i.jsx("div",{className:"col-md-12",children:i.jsxs(pt,{children:[i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"})]})]})}):N()})})]})})},Id=(t,e)=>["reports",t,e],Mhe=()=>{const t=new Date;return{year:t.getFullYear().toString(),monthValue:`${t.getMonth()+1}`.padStart(2,"0"),monthLabel:l(t.toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}};function Ihe(){const{isAddonActive:t,userRole:e}=ht(),n=t("kiviPro"),[s,a]=f.useState(()=>{const{year:N,monthValue:_,monthLabel:w}=Mhe();return{clinic_id:{id:"all",label:l("All Clinics","kivicare-clinic-management-system")},doctor_id:{id:"all",label:l("All Doctors","kivicare-clinic-management-system")},month:{value:_,label:w},year:{value:N,label:N}}}),[r,o]=f.useState("all"),[c,d]=f.useState("all"),{data:m,isLoading:u}=ft({queryKey:["reports","initialData"],queryFn:Xo.getReportInitialData,enabled:n}),{data:p,isLoading:h}=iu({enabled:n}),{data:g,isLoading:x}=MA(s.clinic_id?.id,{enabled:n}),v=f.useMemo(()=>[{id:"all",label:l("All Clinics","kivicare-clinic-management-system")},...p?.data||[]],[p]),y=f.useMemo(()=>[{id:"all",label:l("All Doctors","kivicare-clinic-management-system")},...g?.data||[]],[g]),b=f.useMemo(()=>Array.from({length:new Date().getFullYear()-2019},(N,_)=>{const w=(new Date().getFullYear()-_).toString();return{value:w,label:w}}),[]),j=f.useMemo(()=>[{value:"all",label:l("All Months","kivicare-clinic-management-system")},...Array.from({length:12},(N,_)=>({value:(_+1).toString().padStart(2,"0"),label:l(new Date(0,_).toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}))],[]),k=f.useMemo(()=>[{value:"all",label:l("All","kivicare-clinic-management-system")},{value:"1",label:l("Booked","kivicare-clinic-management-system")},{value:"2",label:l("Pending","kivicare-clinic-management-system")},{value:"0",label:l("Completed","kivicare-clinic-management-system")},{value:"3",label:l("Check-in","kivicare-clinic-management-system")},{value:"4",label:l("Cancelled","kivicare-clinic-management-system")}],[]),S=f.useCallback((N,_)=>{a(w=>({...w,[N]:_}))},[]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb mb-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(gt,{to:"/",children:l("Home","kivicare-clinic-management-system")})}),i.jsx("li",{className:"breadcrumb-item active",children:l("Reports","kivicare-clinic-management-system")})]})}),i.jsx("h6",{className:"m-0 mt-2",children:l("Reports","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"position-relative",children:[u&&i.jsx(rI,{}),!n&&i.jsx(ri,{title:l("Available For Kivicare Pro","kivicare-clinic-management-system"),text:l("Multiple clinics management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[e==="administrator"&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ot,{placeholder:l("Select Clinic","kivicare-clinic-management-system"),options:v,value:s.clinic_id,onChange:N=>S("clinic_id",N),getOptionValue:N=>N.id,isLoading:h,isDisabled:!n,isClearable:!0,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:N=>({...N,zIndex:9999})}})}),["administrator","kivicare_clinic_admin"].includes(e)&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ot,{placeholder:l("Select Doctor","kivicare-clinic-management-system"),options:y,value:s.doctor_id,onChange:N=>S("doctor_id",N),getOptionValue:N=>N.id,isLoading:x,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",isClearable:!0,styles:{menuPortal:N=>({...N,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ot,{options:j,value:s.month,onChange:N=>S("month",N),getOptionValue:N=>N.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:N=>({...N,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ot,{options:b,value:s.year,onChange:N=>S("year",N),styles:{container:N=>({...N,minWidth:"100px"}),menuPortal:N=>({...N,zIndex:9999})},getOptionValue:N=>N.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select"})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:(()=>{const N={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Md,{id:"clinic-revenue-overall",title:l("Clinic Revenue (Overall)","kivicare-clinic-management-system"),chartType:"doughnut",queryKey:Id("clinicRevenueOverall",N),queryFn:Xo.getClinicRevenueOverall,filters:N,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-8",children:(()=>{const N={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Md,{id:"clinic-revenue-detail",title:l("Clinic Revenue (Detail)","kivicare-clinic-management-system"),chartType:"bar",queryKey:Id("clinicRevenueDetail",N),queryFn:Xo.getClinicRevenueDetail,filters:N,enabled:n&&!u,colors:m?.data?.clinic_colors})})()}),i.jsx("div",{className:"col-lg-12",children:(()=>{const N={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Md,{id:"doctor-revenue",title:l("Doctor Revenue","kivicare-clinic-management-system"),chartType:"bar",queryKey:Id("doctorRevenue",N),queryFn:Xo.getDoctorRevenue,filters:N,enabled:n&&!u,colors:m?.data?.doctor_colors})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const N={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:r,appointment_status_doctor:"all"};return i.jsx(Md,{id:"clinic-appointment-count",title:l("Clinic Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Id("clinicAppointmentCount",N),queryFn:Xo.getClinicAppointmentCount,filters:N,enabled:n&&!u,colors:m?.data?.clinic_colors,selectOptions:k,selectValue:r,onSelectChange:o})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const N={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:c};return i.jsx(Md,{id:"doctor-appointment-count",title:l("Doctor Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Id("doctorAppointmentCount",N),queryFn:Xo.getDoctorAppointmentCount,filters:N,enabled:n&&!u,colors:m?.data?.doctor_colors,selectOptions:k,selectValue:c,onSelectChange:d})})()})]})})]})]})}const Ohe=[We({path:"/clinic-revenue-reports",title:l("Reports","kivicare-clinic-management-system"),component:Ihe,roles:["administrator","clinic_admin"],meta:{description:l("Access various clinic and doctor reports and analytics.","kivicare-clinic-management-system"),icon:"ph ph-chart-line",showInSidebar:!0,section:"Financial"},skeleton:rI})],Lhe=()=>{const t=Hn(),e=dn(),[n,s]=f.useState({text:"",type:""}),a=bI();f.useEffect(()=>{t.state?.message&&s(t.state.message)},[t.state]),f.useEffect(()=>{a.isSuccess&&a.data&&(a.data.data?.nonce&&(window.kc_frontend||(window.kc_frontend={}),window.kc_frontend.nonce=a.data.data.nonce),e("/dashboard",{replace:!0}))},[a.isSuccess,a.data,e]),f.useEffect(()=>{if(a.isError){const u=a.error?.message||l("Login failed. Please try again.","kivicare-clinic-management-system");s({text:u,type:"error"})}},[a.isError,a.error]);const{register:r,handleSubmit:o,formState:{errors:c},reset:d}=Xt(),m=u=>{s({text:"",type:""}),a.mutate(u)};return i.jsx("div",{className:"container",children:i.jsx("div",{className:"row justify-content-center align-items-center min-vh-100",children:i.jsx("div",{className:"col-4",children:i.jsxs("div",{className:"kc-register-login-form",children:[n.text&&i.jsx("div",{className:`alert ${n.type==="success"?"alert-success":"alert-danger"} mb-4`,dangerouslySetInnerHTML:{__html:n.text}}),i.jsx("div",{className:"card p-0 mb-0",children:i.jsxs("div",{className:"card-body auth-card",children:[i.jsx("div",{className:"logo-img text-center mb-4",children:i.jsx("img",{src:window.kc_frontend?.loader_image?.replace("loader.gif","logo.png"),alt:"KiviCare",height:"45",className:"logo-normal"})}),i.jsxs("form",{className:"kc-login-form",onSubmit:o(m),children:[i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-username",children:l("Username","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"login-username",className:`form-control ${c.username?"is-invalid":""}`,placeholder:"username@example.com",...r("username",{required:l("Username is required","kivicare-clinic-management-system")})}),c.username&&i.jsx("div",{className:"invalid-feedback",children:c.username.message})]}),i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-password",children:l("Password","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",id:"login-password",className:`form-control ${c.password?"is-invalid":""}`,placeholder:"********",...r("password",{required:l("Password is required","kivicare-clinic-management-system")})}),c.password&&i.jsx("div",{className:"invalid-feedback",children:c.password.message})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"remember-me",...r("rememberMe")}),i.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:l("Remember Me","kivicare-clinic-management-system")})]}),i.jsx("a",{href:`${window.kc_frontend?.home_url}/wp-login.php?action=lostpassword`,className:"forgot-pwd fw-semibold fst-italic",children:l("Forgot Password?","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:a.isPending,children:i.jsx("span",{className:"text d-inline-block align-middle text-uppercase",children:a.isPending?l("Loading...","kivicare-clinic-management-system"):l("Login","kivicare-clinic-management-system")})})})]})]})})]})})})})};function lI(){const t=dn(),[e,n]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,a]=f.useState(!1),[r,o]=f.useState({type:"",text:""}),[c,d]=f.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),m=h=>{n({...e,[h.target.name]:h.target.value}),r.text&&o({type:"",text:""})},u=h=>{d({...c,[h]:!c[h]})},p=async()=>{if(!e.currentPassword){o({type:"danger",text:l("Current password is required","kivicare-clinic-management-system")});return}if(!e.newPassword){o({type:"danger",text:l("New password is required","kivicare-clinic-management-system")});return}if(!e.confirmPassword){o({type:"danger",text:l("Confirm password is required","kivicare-clinic-management-system")});return}if(e.newPassword!==e.confirmPassword){o({type:"danger",text:l("New password and confirm password do not match","kivicare-clinic-management-system")});return}if(e.currentPassword===e.newPassword){o({type:"danger",text:l("Old and new password are same","kivicare-clinic-management-system")});return}if(e.newPassword.length<4){o({type:"danger",text:l("New password must be at least 4 characters long","kivicare-clinic-management-system")});return}a(!0),o({type:"",text:""});try{const h=await wI.changePassword(e);h.status?(o({type:"success",text:l("Password changed successfully","kivicare-clinic-management-system")}),n({currentPassword:"",newPassword:"",confirmPassword:""})):h.message&&h.message.includes("current password")?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):h.message&&h.message.includes("400")?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:h.message||l("Failed to change password","kivicare-clinic-management-system")})}catch(h){h.response&&h.response.status===400?o({type:"danger",text:l("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:l("An error occurred while changing password","kivicare-clinic-management-system")})}finally{a(!1)}};return i.jsxs("div",{children:[i.jsx("h6",{className:"mb-4",children:"Change Password"}),r.text&&i.jsx(d3,{variant:r.type,className:"mb-3",children:r.text}),i.jsxs(Mt,{children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:l("Current password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.currentPassword?"text":"password",name:"currentPassword",placeholder:l("Enter your old password","kivicare-clinic-management-system"),value:e.currentPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("currentPassword"),children:c.currentPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:l("New password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.newPassword?"text":"password",name:"newPassword",placeholder:l("Enter your new password","kivicare-clinic-management-system"),value:e.newPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("newPassword"),children:c.newPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:l("Confirm password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.confirmPassword?"text":"password",name:"confirmPassword",placeholder:l("Enter your confirm password","kivicare-clinic-management-system"),value:e.confirmPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("confirmPassword"),children:c.confirmPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]})]})})}),i.jsxs("div",{className:"text-end",children:[i.jsx(Yt,{variant:"secondary",onClick:()=>t(-1),className:"btn btn-secondary me-2",disabled:s,children:l("Cancel","kivicare-clinic-management-system")}),i.jsx(Yt,{variant:"primary",onClick:p,className:"btn btn-primary",disabled:s,children:s?l("Saving...","kivicare-clinic-management-system"):l("Save","kivicare-clinic-management-system")})]})]})]})}const Fhe=[We({path:"/login",component:Lhe,title:"Login",exact:!0,meta:{description:"User login page",requiresAuth:!1,showInSidebar:!1}}),We({path:"/change-password",component:lI,title:"Change Password",permissions:["change_password"],meta:{description:"User change password page",breadcrumb:"Change Password",showInSidebar:!1}})],$he=f.lazy(()=>_r(()=>Promise.resolve().then(()=>yte),void 0,import.meta.url)),Bhe=f.lazy(()=>_r(()=>Promise.resolve().then(()=>Ute),void 0,import.meta.url)),qhe=f.lazy(()=>_r(()=>Promise.resolve().then(()=>Mne),void 0,import.meta.url)),Hhe=f.lazy(()=>_r(()=>Promise.resolve().then(()=>hte),void 0,import.meta.url)),zhe=()=>{const{userRole:t,isLoading:e}=ht();switch(t){case"kiviCare_patient":return i.jsx($he,{isProfile:!0,isEditing:!0});case"kiviCare_doctor":return i.jsx(Bhe,{isProfile:!0,isEditing:!0});case"kiviCare_receptionist":return i.jsx(qhe,{isProfile:!0,isEditing:!0});case"administrator":case"kiviCare_clinic_admin":return i.jsx(Hhe,{isProfile:!0,isEditing:!0});default:return i.jsx("div",{children:l("Unknown user role","kivicare-clinic-management-system")})}},Vhe=()=>{const{userRole:t,hasCapability:e}=ht(),n=t?.includes("patient")?"patient_profile":t?.includes("doctor")?"doctor_profile":t?.includes("receptionist")?"receptionist_profile":t?.includes("clinic_admin")?"clinic_profile":"read";return e(n)||t?.includes("administrator")?i.jsx(zhe,{}):i.jsx(Xd,{})},Uhe=[We({path:"/profile",component:Vhe,title:"Profile",meta:{description:"User profile page"}}),We({path:"/change-password",component:lI,title:"Change Password",meta:{description:"Change password page"}})],Whe=[{name:"auth",routes:Fhe,description:"Authentication routes",enabled:!0},{name:"dashboard",routes:jZ,description:"Core dashboard routes",enabled:!0},{name:"appointments",routes:FJ,description:"Appointment management routes",enabled:!0},{name:"encounters",routes:dte,description:"Encounter management routes",enabled:!0},{name:"clinics",routes:pte,description:"Clinic management routes",enabled:!0},{name:"patients",routes:Ste,description:"Patient management routes",enabled:!0},{name:"taxes",routes:vne,description:"Tax management routes",enabled:!0},{name:"get-help",routes:wne,description:"Help and support management routes",enabled:!0},{name:"doctors",routes:ane,description:"Doctor management routes",enabled:!0},{name:"billing",routes:The,description:"Billing management routes",enabled:!0},{name:"patients-reports",routes:Ete,description:"Patient Report routes",enabled:!0},{name:"receptionists",routes:Ine,description:"Receptionist management routes",enabled:!0},{name:"doctor-services",routes:Fne,description:"Doctor Service management routes",enabled:!0},{name:"doctor-session",routes:Dhe,description:"Doctor session management routes",enabled:!0},{name:"reports",routes:Ohe,description:"Clinic and Doctor Reports",enabled:!0},{name:"setup",routes:eie,description:"Initial setup wizard routes",enabled:!0},{name:"setting",routes:She,description:"Kivicare Setting routes"},{name:"profile",routes:Uhe,description:"User profile management routes",enabled:!0},{name:"errors",routes:Hne,description:"Error handling and fallback routes",enabled:!0}],Khe=()=>Whe.reduce((t,e)=>[...t,...e.routes],[]),Ghe=Khe(),ps=new Map,s_=[];function oI(t,e="",n=0,s=-1,a=-1){t.forEach((r,o)=>{let c=r.path;c?.startsWith("/")||(e?c=`${e}/${r.path}`.replace(/\/+/g,"/"):c=`/${r.path}`),c=c.replace(/\/+/g,"/"),r.index&&(c=e||"/");const d=n===0;d&&(a=s_.length,s_.push(c));const m={path:c,index:o,level:n,parentPath:e,topLevelIndex:a,topLevelPath:d?c:ps.get(e)?.topLevelPath||"/"};ps.set(c,m),r.children&&oI(r.children,c,n+1,o,a)})}oI(Ghe);const Gi=()=>{const t=Hn(),e=r_(),n=f.useRef(null),[s,a]=f.useState("fade-down"),r=f.useRef(t),o=f.useRef(!0);f.useEffect(()=>{if(o.current){o.current=!1,r.current=t;return}const m=t.pathname,u=r.current.pathname;if(m===u)return;const p=ps.get(m)||d(m),h=ps.get(u)||d(u);let g="fade-down";p&&h&&(p.topLevelPath===h.topLevelPath?p.parentPath===h.parentPath?g=p.index>h.index?"fade-left":"fade-right":g=p.level<h.level?"fade-down":"fade-up":p.level===0&&h.level===0?g=p.index<h.index?"fade-down":"fade-up":p.parentPath===h.path?g="fade-left":h.parentPath===p.path?g="fade-right":g=p.topLevelIndex<h.topLevelIndex?"fade-down":"fade-up"),a(g),r.current=t},[t]);const c=f.useRef(new Map);function d(m){if(c.current.has(m))return c.current.get(m);if(ps.has(m))return ps.get(m);const u=m.replace(/\/+$/,""),p=`${u}/`;if(ps.has(u))return c.current.set(m,ps.get(u)),ps.get(u);if(ps.has(p))return c.current.set(m,ps.get(p)),ps.get(p);const h=ps.get("/")||{path:"/",index:0,level:0,parentPath:"",topLevelIndex:0,topLevelPath:"/"};return c.current.set(m,h),h}return i.jsx("div",{className:"route-container",children:i.jsx(Rg,{mode:"out-in",children:i.jsx(wi,{nodeRef:n,timeout:300,classNames:s,unmountOnExit:!0,children:()=>i.jsx("div",{ref:n,className:"w-100",children:e})},t.pathname)})})};export{VO as $,yg as A,y_ as B,g_ as C,Dn as D,C as E,Khe as F,Jhe as G,Xhe as H,G_ as I,P2 as J,eie as K,Lhe as L,hpe as M,kb as N,Mu as O,IJ as P,tf as Q,ppe as R,Ac as S,Gi as T,EZ as U,upe as V,bk as W,ZR as X,Rg as Y,wi as Z,kJ as _,bj as a,CJ as a0,gpe as a1,IR as a2,LJ as a3,_Z as a4,fJ as a5,si as a6,ai as a7,bi as a8,Ql as a9,Et as aa,Ze as ab,fpe as ac,vpe as ad,bee as ae,mt as af,ef as ag,Mt as ah,Un as ai,Ct as aj,st as ak,De as al,AO as b,OO as c,gm as d,kg as e,jb as f,b3 as g,JI as h,u_ as i,w3 as j,Tt as k,xt as l,$O as m,K_ as n,W_ as o,vg as p,Pl as q,Sa as r,U_ as s,Yt as t,Is as u,ob as v,db as w,Cc as x,ot as y,xo as z};
