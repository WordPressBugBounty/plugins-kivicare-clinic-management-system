const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-lCWIDpmK.css","./_payment-gateway-model-BiLTufOy.css","./BodyChartEditor-UXLNUaJU.css"])))=>i.map(i=>d[i]);
import{a7 as cI,a8 as ya,r as f,v as ze,j as i,a9 as cj,aa as dI,_ as r,L as ht,u as ut,ab as Bm,N as pg,l as Xn,i as Yi,k as Li,n as Jn,m as Cr,I as ve,J as ft,ac as Le,z as Ve,ad as mI,ae as uI,af as hI,ag as pI,ah as gI,ai as fI,D as ol,B as en,H as Ne,aj as Gt,h as hn,o as vI,e as Kn,c as _n,ak as rc,w as Vc,U as eo,O as Uc,al as xI,am as yr,an as br,y as lb,F as r_,E as lc,ao as l_,ap as jx,G as oc,aq as yI,ar as dj,g as Yr,C as bI,as as wI}from"./index-DaLzaML2.js";var Ia=cI();const Hl=ya(Ia),kI=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),jI=function(t,e){return new URL(t,e).href},mj={},Ir=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let m=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(n.map(u=>{if(u=jI(u,s),u in mj)return;mj[u]=!0;const p=u.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(s)for(let x=o.length-1;x>=0;x--){const v=o[x];if(v.href===u&&(!p||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":kI,p||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),p)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})};var NI=/%(((\d+)\$)|(\(([$_a-zA-Z][$_a-zA-Z0-9]*)\)))?[ +0#-]*\d*(\.(\d+|\*))?(ll|[lhqL])?([cduxXefgsp%])/g;function CI(t,...e){var n=0;return Array.isArray(e[0])&&(e=e[0]),t.replace(NI,function(){var s,a,l,o,c;return s=arguments[3],a=arguments[5],l=arguments[7],o=arguments[9],o==="%"?"%":(l==="*"&&(l=e[n],n++),a===void 0?(s===void 0&&(s=n+1),n++,c=e[s-1]):e[0]&&typeof e[0]=="object"&&e[0].hasOwnProperty(a)&&(c=e[0][a]),o==="f"?c=parseFloat(c)||0:o==="d"&&(c=parseInt(c)||0),l!==void 0&&(o==="f"?c=c.toFixed(l):o==="s"&&(c=c.substr(0,l))),c??"")})}function Pi(t,...e){return CI(t,...e)}var Lf={exports:{}};var uj;function SI(){return uj||(uj=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var l="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(l=a(l,s(c)))}return l}function s(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var o="";for(var c in l)e.call(l,c)&&l[c]&&(o=a(o,c));return o}function a(l,o){return o?l?l+" "+o:l+o:l}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Lf)),Lf.exports}var _I=SI();const vt=ya(_I);function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ot.apply(null,arguments)}function gg(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function hj(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function EI(t){var e=TI(t,"string");return typeof e=="symbol"?e:String(e)}function TI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function o_(t,e,n){var s=f.useRef(t!==void 0),a=f.useState(e),l=a[0],o=a[1],c=t!==void 0,d=s.current;return s.current=c,!c&&d&&l!==e&&o(e),[c?t:l,f.useCallback(function(m){for(var u=arguments.length,p=new Array(u>1?u-1:0),h=1;h<u;h++)p[h-1]=arguments[h];n&&n.apply(void 0,[m].concat(p)),o(m)},[n])]}function ob(t,e){return Object.keys(e).reduce(function(n,s){var a,l=n,o=l[hj(s)],c=l[s],d=gg(l,[hj(s),s].map(EI)),m=e[s],u=o_(c,o,t[m]),p=u[0],h=u[1];return Ot({},d,(a={},a[s]=p,a[m]=h,a))},t)}function Xh(t,e){return Xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xh(t,e)}function cb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Xh(t,e)}const AI=["xxl","xl","lg","md","sm","xs"],DI="xs",qm=f.createContext({prefixes:{},breakpoints:AI,minBreakpoint:DI}),{Consumer:Yhe,Provider:Qhe}=qm;function Rt(t,e){const{prefixes:n}=f.useContext(qm);return t||n[e]||e}function c_(){const{breakpoints:t}=f.useContext(qm);return t}function d_(){const{minBreakpoint:t}=f.useContext(qm);return t}function db(){const{dir:t}=f.useContext(qm);return t==="rtl"}function Wc(t){return t&&t.ownerDocument||document}function RI(t){var e=Wc(t);return e&&e.defaultView||window}function PI(t,e){return RI(t).getComputedStyle(t,e)}var MI=/([A-Z])/g;function II(t){return t.replace(MI,"-$1").toLowerCase()}var OI=/^ms-/;function Au(t){return II(t).replace(OI,"-ms-")}var FI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function LI(t){return!!(t&&FI.test(t))}function wr(t,e){var n="",s="";if(typeof e=="string")return t.style.getPropertyValue(Au(e))||PI(t).getPropertyValue(Au(e));Object.keys(e).forEach(function(a){var l=e[a];!l&&l!==0?t.style.removeProperty(Au(a)):LI(a)?s+=a+"("+l+") ":n+=Au(a)+": "+l+";"}),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}var $f={exports:{}},Bf,pj;function $I(){if(pj)return Bf;pj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bf=t,Bf}var qf,gj;function BI(){if(gj)return qf;gj=1;var t=$I();function e(){}function n(){}return n.resetWarningCache=e,qf=function(){function s(o,c,d,m,u,p){if(p!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},qf}var fj;function qI(){return fj||(fj=1,$f.exports=BI()()),$f.exports}var HI=qI();const Pe=ya(HI),vj={disabled:!1},mb=ze.createContext(null);var m_=function(e){return e.scrollTop},Fd="unmounted",Wr="exited",Mi="entering",Ns="entered",to="exiting",Ya=(function(t){cb(e,t);function e(s,a){var l;l=t.call(this,s,a)||this;var o=a,c=o&&!o.isMounting?s.enter:s.appear,d;return l.appearStatus=null,s.in?c?(d=Wr,l.appearStatus=Mi):d=Ns:s.unmountOnExit||s.mountOnEnter?d=Fd:d=Wr,l.state={status:d},l.nextCallback=null,l}e.getDerivedStateFromProps=function(a,l){var o=a.in;return o&&l.status===Fd?{status:Wr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var l=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==Mi&&o!==Ns&&(l=Mi):(o===Mi||o===Ns)&&(l=to)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,l,o,c;return l=o=c=a,a!=null&&typeof a!="number"&&(l=a.exit,o=a.enter,c=a.appear!==void 0?a.appear:o),{exit:l,enter:o,appear:c}},n.updateStatus=function(a,l){if(a===void 0&&(a=!1),l!==null)if(this.cancelNextCallback(),l===Mi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Hl.findDOMNode(this);o&&m_(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Wr&&this.setState({status:Fd})},n.performEnter=function(a){var l=this,o=this.props.enter,c=this.context?this.context.isMounting:a,d=this.props.nodeRef?[c]:[Hl.findDOMNode(this),c],m=d[0],u=d[1],p=this.getTimeouts(),h=c?p.appear:p.enter;if(!a&&!o||vj.disabled){this.safeSetState({status:Ns},function(){l.props.onEntered(m)});return}this.props.onEnter(m,u),this.safeSetState({status:Mi},function(){l.props.onEntering(m,u),l.onTransitionEnd(h,function(){l.safeSetState({status:Ns},function(){l.props.onEntered(m,u)})})})},n.performExit=function(){var a=this,l=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:Hl.findDOMNode(this);if(!l||vj.disabled){this.safeSetState({status:Wr},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:to},function(){a.props.onExiting(c),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:Wr},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,l){l=this.setNextCallback(l),this.setState(a,l)},n.setNextCallback=function(a){var l=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,l.nextCallback=null,a(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,l){this.setNextCallback(l);var o=this.props.nodeRef?this.props.nodeRef.current:Hl.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=d[0],u=d[1];this.props.addEndListener(m,u)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Fd)return null;var l=this.props,o=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var c=gg(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ze.createElement(mb.Provider,{value:null},typeof o=="function"?o(a,c):ze.cloneElement(ze.Children.only(o),c))},e})(ze.Component);Ya.contextType=mb;Ya.propTypes={};function zo(){}Ya.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:zo,onEntering:zo,onEntered:zo,onExit:zo,onExiting:zo,onExited:zo};Ya.UNMOUNTED=Fd;Ya.EXITED=Wr;Ya.ENTERING=Mi;Ya.ENTERED=Ns;Ya.EXITING=to;function u_(t){return t.code==="Escape"||t.keyCode===27}function zI(){const t=f.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function xo(t){if(!t||typeof t=="function")return null;const{major:e}=zI();return e>=19?t.props.ref:t.ref}const Kc=!!(typeof window<"u"&&window.document&&window.document.createElement);var Nx=!1,Cx=!1;try{var Hf={get passive(){return Nx=!0},get once(){return Cx=Nx=!0}};Kc&&(window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,!0))}catch{}function h_(t,e,n,s){if(s&&typeof s!="boolean"&&!Cx){var a=s.once,l=s.capture,o=n;!Cx&&a&&(o=n.__once||function c(d){this.removeEventListener(e,c,l),n.call(this,d)},n.__once=o),t.addEventListener(e,o,Nx?s:l)}t.addEventListener(e,n,s)}function Sx(t,e,n,s){var a=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(e,n,a),n.__once&&t.removeEventListener(e,n.__once,a)}function ur(t,e,n,s){return h_(t,e,n,s),function(){Sx(t,e,n,s)}}function VI(t,e,n,s){if(s===void 0&&(s=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(e,n,s),t.dispatchEvent(a)}}function UI(t){var e=wr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function WI(t,e,n){n===void 0&&(n=5);var s=!1,a=setTimeout(function(){s||VI(t,"transitionend",!0)},e+n),l=ur(t,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(a),l()}}function p_(t,e,n,s){n==null&&(n=UI(t)||0);var a=WI(t,n,s),l=ur(t,"transitionend",e);return function(){a(),l()}}function xj(t,e){const n=wr(t,e)||"",s=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*s}function ub(t,e){const n=xj(t,"transitionDuration"),s=xj(t,"transitionDelay"),a=p_(t,l=>{l.target===t&&(a(),e(l))},n+s)}function bd(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...a){e.apply(this,a),n.apply(this,a)}},null)}function g_(t){t.offsetHeight}const yj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function KI(t,e){const n=yj(t),s=yj(e);return a=>{n&&n(a),s&&s(a)}}function fg(t,e){return f.useMemo(()=>KI(t,e),[t,e])}function Jh(t){return t&&"setState"in t?Hl.findDOMNode(t):t??null}const vg=ze.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,onExited:l,addEndListener:o,children:c,childRef:d,...m},u)=>{const p=f.useRef(null),h=fg(p,d),g=T=>{h(Jh(T))},x=T=>N=>{T&&p.current&&T(p.current,N)},v=f.useCallback(x(t),[t]),y=f.useCallback(x(e),[e]),b=f.useCallback(x(n),[n]),k=f.useCallback(x(s),[s]),w=f.useCallback(x(a),[a]),S=f.useCallback(x(l),[l]),j=f.useCallback(x(o),[o]);return i.jsx(Ya,{ref:u,...m,onEnter:v,onEntered:b,onEntering:y,onExit:k,onExited:S,onExiting:w,addEndListener:j,nodeRef:p,children:typeof c=="function"?(T,N)=>c(T,{...N,ref:g}):ze.cloneElement(c,{ref:g})})});vg.displayName="TransitionWrapper";const GI={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function YI(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],a=GI[t];return s+parseInt(wr(e,a[0]),10)+parseInt(wr(e,a[1]),10)}const QI={[Wr]:"collapse",[to]:"collapsing",[Mi]:"collapsing",[Ns]:"collapse show"},f_=ze.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,className:l,children:o,dimension:c="height",in:d=!1,timeout:m=300,mountOnEnter:u=!1,unmountOnExit:p=!1,appear:h=!1,getDimensionValue:g=YI,...x},v)=>{const y=typeof c=="function"?c():c,b=f.useMemo(()=>bd(T=>{T.style[y]="0"},t),[y,t]),k=f.useMemo(()=>bd(T=>{const N=`scroll${y[0].toUpperCase()}${y.slice(1)}`;T.style[y]=`${T[N]}px`},e),[y,e]),w=f.useMemo(()=>bd(T=>{T.style[y]=null},n),[y,n]),S=f.useMemo(()=>bd(T=>{T.style[y]=`${g(y,T)}px`,g_(T)},s),[s,g,y]),j=f.useMemo(()=>bd(T=>{T.style[y]=null},a),[y,a]);return i.jsx(vg,{ref:v,addEndListener:ub,...x,"aria-expanded":x.role?d:null,onEnter:b,onEntering:k,onEntered:w,onExit:S,onExiting:j,childRef:xo(o),in:d,timeout:m,mountOnEnter:u,unmountOnExit:p,appear:h,children:(T,N)=>ze.cloneElement(o,{...N,className:vt(l,o.props.className,QI[T],y==="width"&&"collapse-horizontal")})})});f_.displayName="Collapse";function ZI(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Cc(t){const e=ZI(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Hm=(t=>f.forwardRef((e,n)=>i.jsx("div",{...e,ref:n,className:vt(e.className,t)}))),v_=Hm("h4");v_.displayName="DivStyledAsH4";const x_=f.forwardRef(({className:t,bsPrefix:e,as:n=v_,...s},a)=>(e=Rt(e,"alert-heading"),i.jsx(n,{ref:a,className:vt(t,e),...s})));x_.displayName="AlertHeading";function bj(){return f.useState(null)}function XI(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Hs(t){const e=XI(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function y_(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function JI(t){const e=f.useRef(null);return f.useEffect(()=>{e.current=t}),e.current}const eO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",tO=typeof document<"u",wj=tO||eO?f.useLayoutEffect:f.useEffect,nO=["as","disabled"];function iO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function sO(t){return!t||t.trim()==="#"}function hb({tagName:t,disabled:e,href:n,target:s,rel:a,role:l,onClick:o,tabIndex:c=0,type:d}){t||(n!=null||s!=null||a!=null?t="a":t="button");const m={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},m];const u=h=>{if((e||t==="a"&&sO(n))&&h.preventDefault(),e){h.stopPropagation();return}o?.(h)},p=h=>{h.key===" "&&(h.preventDefault(),u(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:l??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?s:void 0,"aria-disabled":e||void 0,rel:t==="a"?a:void 0,onClick:u,onKeyDown:p},m]}const b_=f.forwardRef((t,e)=>{let{as:n,disabled:s}=t,a=iO(t,nO);const[l,{tagName:o}]=hb(Object.assign({tagName:n,disabled:s},a));return i.jsx(o,Object.assign({},a,l,{ref:e}))});b_.displayName="Button";const aO=["onKeyDown"];function rO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function lO(t){return!t||t.trim()==="#"}const xg=f.forwardRef((t,e)=>{let{onKeyDown:n}=t,s=rO(t,aO);const[a]=hb(Object.assign({tagName:"a"},s)),l=Hs(o=>{a.onKeyDown(o),n?.(o)});return lO(s.href)||s.role==="button"?i.jsx("a",Object.assign({ref:e},s,a,{onKeyDown:l})):i.jsx("a",Object.assign({ref:e},s,{onKeyDown:n}))});xg.displayName="Anchor";const w_=f.forwardRef(({className:t,bsPrefix:e,as:n=xg,...s},a)=>(e=Rt(e,"alert-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));w_.displayName="AlertLink";const oO={[Mi]:"show",[Ns]:"show"},qa=f.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:s,...a},l)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=f.useCallback((d,m)=>{g_(d),s?.(d,m)},[s]);return i.jsx(vg,{ref:l,addEndListener:ub,...o,onEnter:c,childRef:xo(e),children:(d,m)=>f.cloneElement(e,{...m,className:vt("fade",t,e.props.className,oO[d],n[d])})})});qa.displayName="Fade";const cO={"aria-label":Pe.string,onClick:Pe.func,variant:Pe.oneOf(["white"])},yg=f.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},a)=>i.jsx("button",{ref:a,type:"button",className:vt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));yg.displayName="CloseButton";yg.propTypes=cO;const k_=f.forwardRef((t,e)=>{const{bsPrefix:n,show:s=!0,closeLabel:a="Close alert",closeVariant:l,className:o,children:c,variant:d="primary",onClose:m,dismissible:u,transition:p=qa,...h}=ob(t,{show:"onClose"}),g=Rt(n,"alert"),x=Cc(b=>{m&&m(!1,b)}),v=p===!0?qa:p,y=i.jsxs("div",{role:"alert",...v?void 0:h,ref:e,className:vt(o,g,d&&`${g}-${d}`,u&&`${g}-dismissible`),children:[u&&i.jsx(yg,{onClick:x,"aria-label":a,variant:l}),c]});return v?i.jsx(v,{unmountOnExit:!0,...h,ref:void 0,in:s,children:y}):s?y:null});k_.displayName="Alert";const dO=Object.assign(k_,{Link:w_,Heading:x_}),ca=f.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:s,className:a,as:l="span",...o},c)=>{const d=Rt(t,"badge");return i.jsx(l,{ref:c,...o,className:vt(a,d,n&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});ca.displayName="Badge";const Xt=f.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:s,active:a=!1,disabled:l=!1,className:o,...c},d)=>{const m=Rt(e,"btn"),[u,{tagName:p}]=hb({tagName:t,disabled:l,...c}),h=p;return i.jsx(h,{...u,...c,ref:d,disabled:l,className:vt(o,m,a&&"active",n&&`${m}-${n}`,s&&`${m}-${s}`,c.href&&l&&"disabled")})});Xt.displayName="Button";const Ha=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Ha.displayName="CardBody";const j_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));j_.displayName="CardFooter";const pb=f.createContext(null);pb.displayName="CardHeaderContext";const N_=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const l=Rt(t,"card-header"),o=f.useMemo(()=>({cardHeaderBsPrefix:l}),[l]);return i.jsx(pb.Provider,{value:o,children:i.jsx(n,{ref:a,...s,className:vt(e,l)})})});N_.displayName="CardHeader";const C_=f.forwardRef(({bsPrefix:t,className:e,variant:n,as:s="img",...a},l)=>{const o=Rt(t,"card-img");return i.jsx(s,{ref:l,className:vt(n?`${o}-${n}`:o,e),...a})});C_.displayName="CardImg";const S_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-img-overlay"),i.jsx(n,{ref:a,className:vt(t,e),...s})));S_.displayName="CardImgOverlay";const __=f.forwardRef(({className:t,bsPrefix:e,as:n="a",...s},a)=>(e=Rt(e,"card-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));__.displayName="CardLink";const mO=Hm("h6"),E_=f.forwardRef(({className:t,bsPrefix:e,as:n=mO,...s},a)=>(e=Rt(e,"card-subtitle"),i.jsx(n,{ref:a,className:vt(t,e),...s})));E_.displayName="CardSubtitle";const T_=f.forwardRef(({className:t,bsPrefix:e,as:n="p",...s},a)=>(e=Rt(e,"card-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));T_.displayName="CardText";const uO=Hm("h5"),A_=f.forwardRef(({className:t,bsPrefix:e,as:n=uO,...s},a)=>(e=Rt(e,"card-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));A_.displayName="CardTitle";const D_=f.forwardRef(({bsPrefix:t,className:e,bg:n,text:s,border:a,body:l=!1,children:o,as:c="div",...d},m)=>{const u=Rt(t,"card");return i.jsx(c,{ref:m,...d,className:vt(e,u,n&&`bg-${n}`,s&&`text-${s}`,a&&`border-${a}`),children:l?i.jsx(Ha,{children:o}):o})});D_.displayName="Card";const St=Object.assign(D_,{Img:C_,Title:A_,Subtitle:E_,Body:Ha,Link:__,Text:T_,Header:N_,Footer:j_,ImgOverlay:S_});function hO(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function pO(t){const e=f.useRef(t);return e.current=t,e}function R_(t){const e=pO(t);f.useEffect(()=>()=>e.current(),[])}const _x=2**31-1;function P_(t,e,n){const s=n-Date.now();t.current=s<=_x?setTimeout(e,s):setTimeout(()=>P_(t,e,n),_x)}function gO(){const t=hO(),e=f.useRef();return R_(()=>clearTimeout(e.current)),f.useMemo(()=>{const n=()=>clearTimeout(e.current);function s(a,l=0){t()&&(n(),l<=_x?e.current=setTimeout(a,l):P_(e,a,Date.now()+l))}return{set:s,clear:n,handleRef:e}},[])}function kj(t,e){let n=0;return f.Children.map(t,s=>f.isValidElement(s)?e(s,n++):s)}function fO(t,e){let n=0;f.Children.forEach(t,s=>{f.isValidElement(s)&&e(s,n++)})}function vO(t,e){return f.Children.toArray(t).some(n=>f.isValidElement(n)&&n.type===e)}function xO({as:t,bsPrefix:e,className:n,...s}){e=Rt(e,"col");const a=c_(),l=d_(),o=[],c=[];return a.forEach(d=>{const m=s[d];delete s[d];let u,p,h;typeof m=="object"&&m!=null?{span:u,offset:p,order:h}=m:u=m;const g=d!==l?`-${d}`:"";u&&o.push(u===!0?`${e}${g}`:`${e}${g}-${u}`),h!=null&&c.push(`order${g}-${h}`),p!=null&&c.push(`offset${g}-${p}`)}),[{...s,className:vt(n,...o,...c)},{as:t,bsPrefix:e,spans:o}]}const Et=f.forwardRef((t,e)=>{const[{className:n,...s},{as:a="div",bsPrefix:l,spans:o}]=xO(t);return i.jsx(a,{...s,ref:e,className:vt(n,!o.length&&l)})});Et.displayName="Col";const yo=f.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:s,...a},l)=>{const o=Rt(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return i.jsx(n,{ref:l,...a,className:vt(s,e?`${o}${c}`:o)})});yo.displayName="Container";var yO=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ol(t,e){return yO(t.querySelectorAll(e))}function bO(t,e,n){const s=f.useRef(t!==void 0),[a,l]=f.useState(e),o=t!==void 0,c=s.current;return s.current=o,!o&&c&&a!==e&&l(e),[o?t:a,f.useCallback((...d)=>{const[m,...u]=d;let p=n?.(m,...u);return l(m),p},[n])]}function wO(){const[,t]=f.useReducer(e=>e+1,0);return t}var jj=Object.prototype.hasOwnProperty;function Nj(t,e,n){for(n of t.keys())if(Kd(n,e))return n}function Kd(t,e){var n,s,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Kd(t[s],e[s]););return s===-1}if(n===Set){if(t.size!==e.size)return!1;for(s of t)if(a=s,a&&typeof a=="object"&&(a=Nj(e,a),!a)||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(s of t)if(a=s[0],a&&typeof a=="object"&&(a=Nj(e,a),!a)||!Kd(s[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(jj.call(t,n)&&++s&&!jj.call(e,n)||!(n in e)||!Kd(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function kO(t){const e=y_();return[t[0],f.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var ds="top",Qs="bottom",Zs="right",ms="left",gb="auto",zm=[ds,Qs,Zs,ms],Sc="start",um="end",jO="clippingParents",M_="viewport",wd="popper",NO="reference",Cj=zm.reduce(function(t,e){return t.concat([e+"-"+Sc,e+"-"+um])},[]),I_=[].concat(zm,[gb]).reduce(function(t,e){return t.concat([e,e+"-"+Sc,e+"-"+um])},[]),CO="beforeRead",SO="read",_O="afterRead",EO="beforeMain",TO="main",AO="afterMain",DO="beforeWrite",RO="write",PO="afterWrite",MO=[CO,SO,_O,EO,TO,AO,DO,RO,PO];function Oa(t){return t.split("-")[0]}function Es(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function no(t){var e=Es(t).Element;return t instanceof e||t instanceof Element}function Fa(t){var e=Es(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fb(t){if(typeof ShadowRoot>"u")return!1;var e=Es(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Kl=Math.max,ep=Math.min,_c=Math.round;function Ex(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function O_(){return!/^((?!chrome|android).)*safari/i.test(Ex())}function Ec(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),a=1,l=1;e&&Fa(t)&&(a=t.offsetWidth>0&&_c(s.width)/t.offsetWidth||1,l=t.offsetHeight>0&&_c(s.height)/t.offsetHeight||1);var o=no(t)?Es(t):window,c=o.visualViewport,d=!O_()&&n,m=(s.left+(d&&c?c.offsetLeft:0))/a,u=(s.top+(d&&c?c.offsetTop:0))/l,p=s.width/a,h=s.height/l;return{width:p,height:h,top:u,right:m+p,bottom:u+h,left:m,x:m,y:u}}function vb(t){var e=Ec(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function F_(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fb(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function pl(t){return t?(t.nodeName||"").toLowerCase():null}function Sr(t){return Es(t).getComputedStyle(t)}function IO(t){return["table","td","th"].indexOf(pl(t))>=0}function wl(t){return((no(t)?t.ownerDocument:t.document)||window.document).documentElement}function bg(t){return pl(t)==="html"?t:t.assignedSlot||t.parentNode||(fb(t)?t.host:null)||wl(t)}function Sj(t){return!Fa(t)||Sr(t).position==="fixed"?null:t.offsetParent}function OO(t){var e=/firefox/i.test(Ex()),n=/Trident/i.test(Ex());if(n&&Fa(t)){var s=Sr(t);if(s.position==="fixed")return null}var a=bg(t);for(fb(a)&&(a=a.host);Fa(a)&&["html","body"].indexOf(pl(a))<0;){var l=Sr(a);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||e&&l.willChange==="filter"||e&&l.filter&&l.filter!=="none")return a;a=a.parentNode}return null}function Vm(t){for(var e=Es(t),n=Sj(t);n&&IO(n)&&Sr(n).position==="static";)n=Sj(n);return n&&(pl(n)==="html"||pl(n)==="body"&&Sr(n).position==="static")?e:n||OO(t)||e}function xb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Gd(t,e,n){return Kl(t,ep(e,n))}function FO(t,e,n){var s=Gd(t,e,n);return s>n?n:s}function L_(){return{top:0,right:0,bottom:0,left:0}}function $_(t){return Object.assign({},L_(),t)}function B_(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var LO=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,$_(typeof e!="number"?e:B_(e,zm))};function $O(t){var e,n=t.state,s=t.name,a=t.options,l=n.elements.arrow,o=n.modifiersData.popperOffsets,c=Oa(n.placement),d=xb(c),m=[ms,Zs].indexOf(c)>=0,u=m?"height":"width";if(!(!l||!o)){var p=LO(a.padding,n),h=vb(l),g=d==="y"?ds:ms,x=d==="y"?Qs:Zs,v=n.rects.reference[u]+n.rects.reference[d]-o[d]-n.rects.popper[u],y=o[d]-n.rects.reference[d],b=Vm(l),k=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0,w=v/2-y/2,S=p[g],j=k-h[u]-p[x],T=k/2-h[u]/2+w,N=Gd(S,T,j),_=d;n.modifiersData[s]=(e={},e[_]=N,e.centerOffset=N-T,e)}}function BO(t){var e=t.state,n=t.options,s=n.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||F_(e.elements.popper,a)&&(e.elements.arrow=a))}const qO={name:"arrow",enabled:!0,phase:"main",fn:$O,effect:BO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tc(t){return t.split("-")[1]}var HO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zO(t,e){var n=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:_c(n*a)/a||0,y:_c(s*a)/a||0}}function _j(t){var e,n=t.popper,s=t.popperRect,a=t.placement,l=t.variation,o=t.offsets,c=t.position,d=t.gpuAcceleration,m=t.adaptive,u=t.roundOffsets,p=t.isFixed,h=o.x,g=h===void 0?0:h,x=o.y,v=x===void 0?0:x,y=typeof u=="function"?u({x:g,y:v}):{x:g,y:v};g=y.x,v=y.y;var b=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),w=ms,S=ds,j=window;if(m){var T=Vm(n),N="clientHeight",_="clientWidth";if(T===Es(n)&&(T=wl(n),Sr(T).position!=="static"&&c==="absolute"&&(N="scrollHeight",_="scrollWidth")),T=T,a===ds||(a===ms||a===Zs)&&l===um){S=Qs;var A=p&&T===j&&j.visualViewport?j.visualViewport.height:T[N];v-=A-s.height,v*=d?1:-1}if(a===ms||(a===ds||a===Qs)&&l===um){w=Zs;var P=p&&T===j&&j.visualViewport?j.visualViewport.width:T[_];g-=P-s.width,g*=d?1:-1}}var E=Object.assign({position:c},m&&HO),M=u===!0?zO({x:g,y:v},Es(n)):{x:g,y:v};if(g=M.x,v=M.y,d){var R;return Object.assign({},E,(R={},R[S]=k?"0":"",R[w]=b?"0":"",R.transform=(j.devicePixelRatio||1)<=1?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",R))}return Object.assign({},E,(e={},e[S]=k?v+"px":"",e[w]=b?g+"px":"",e.transform="",e))}function VO(t){var e=t.state,n=t.options,s=n.gpuAcceleration,a=s===void 0?!0:s,l=n.adaptive,o=l===void 0?!0:l,c=n.roundOffsets,d=c===void 0?!0:c,m={placement:Oa(e.placement),variation:Tc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,_j(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,_j(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const UO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:VO,data:{}};var Du={passive:!0};function WO(t){var e=t.state,n=t.instance,s=t.options,a=s.scroll,l=a===void 0?!0:a,o=s.resize,c=o===void 0?!0:o,d=Es(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return l&&m.forEach(function(u){u.addEventListener("scroll",n.update,Du)}),c&&d.addEventListener("resize",n.update,Du),function(){l&&m.forEach(function(u){u.removeEventListener("scroll",n.update,Du)}),c&&d.removeEventListener("resize",n.update,Du)}}const KO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WO,data:{}};var GO={left:"right",right:"left",bottom:"top",top:"bottom"};function Eh(t){return t.replace(/left|right|bottom|top/g,function(e){return GO[e]})}var YO={start:"end",end:"start"};function Ej(t){return t.replace(/start|end/g,function(e){return YO[e]})}function yb(t){var e=Es(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function bb(t){return Ec(wl(t)).left+yb(t).scrollLeft}function QO(t,e){var n=Es(t),s=wl(t),a=n.visualViewport,l=s.clientWidth,o=s.clientHeight,c=0,d=0;if(a){l=a.width,o=a.height;var m=O_();(m||!m&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:l,height:o,x:c+bb(t),y:d}}function ZO(t){var e,n=wl(t),s=yb(t),a=(e=t.ownerDocument)==null?void 0:e.body,l=Kl(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Kl(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-s.scrollLeft+bb(t),d=-s.scrollTop;return Sr(a||n).direction==="rtl"&&(c+=Kl(n.clientWidth,a?a.clientWidth:0)-l),{width:l,height:o,x:c,y:d}}function wb(t){var e=Sr(t),n=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+s)}function q_(t){return["html","body","#document"].indexOf(pl(t))>=0?t.ownerDocument.body:Fa(t)&&wb(t)?t:q_(bg(t))}function Yd(t,e){var n;e===void 0&&(e=[]);var s=q_(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),l=Es(s),o=a?[l].concat(l.visualViewport||[],wb(s)?s:[]):s,c=e.concat(o);return a?c:c.concat(Yd(bg(o)))}function Tx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function XO(t,e){var n=Ec(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Tj(t,e,n){return e===M_?Tx(QO(t,n)):no(e)?XO(e,n):Tx(ZO(wl(t)))}function JO(t){var e=Yd(bg(t)),n=["absolute","fixed"].indexOf(Sr(t).position)>=0,s=n&&Fa(t)?Vm(t):t;return no(s)?e.filter(function(a){return no(a)&&F_(a,s)&&pl(a)!=="body"}):[]}function e3(t,e,n,s){var a=e==="clippingParents"?JO(t):[].concat(e),l=[].concat(a,[n]),o=l[0],c=l.reduce(function(d,m){var u=Tj(t,m,s);return d.top=Kl(u.top,d.top),d.right=ep(u.right,d.right),d.bottom=ep(u.bottom,d.bottom),d.left=Kl(u.left,d.left),d},Tj(t,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function H_(t){var e=t.reference,n=t.element,s=t.placement,a=s?Oa(s):null,l=s?Tc(s):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,d;switch(a){case ds:d={x:o,y:e.y-n.height};break;case Qs:d={x:o,y:e.y+e.height};break;case Zs:d={x:e.x+e.width,y:c};break;case ms:d={x:e.x-n.width,y:c};break;default:d={x:e.x,y:e.y}}var m=a?xb(a):null;if(m!=null){var u=m==="y"?"height":"width";switch(l){case Sc:d[m]=d[m]-(e[u]/2-n[u]/2);break;case um:d[m]=d[m]+(e[u]/2-n[u]/2);break}}return d}function hm(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=s===void 0?t.placement:s,l=n.strategy,o=l===void 0?t.strategy:l,c=n.boundary,d=c===void 0?jO:c,m=n.rootBoundary,u=m===void 0?M_:m,p=n.elementContext,h=p===void 0?wd:p,g=n.altBoundary,x=g===void 0?!1:g,v=n.padding,y=v===void 0?0:v,b=$_(typeof y!="number"?y:B_(y,zm)),k=h===wd?NO:wd,w=t.rects.popper,S=t.elements[x?k:h],j=e3(no(S)?S:S.contextElement||wl(t.elements.popper),d,u,o),T=Ec(t.elements.reference),N=H_({reference:T,element:w,placement:a}),_=Tx(Object.assign({},w,N)),A=h===wd?_:T,P={top:j.top-A.top+b.top,bottom:A.bottom-j.bottom+b.bottom,left:j.left-A.left+b.left,right:A.right-j.right+b.right},E=t.modifiersData.offset;if(h===wd&&E){var M=E[a];Object.keys(P).forEach(function(R){var O=[Zs,Qs].indexOf(R)>=0?1:-1,L=[ds,Qs].indexOf(R)>=0?"y":"x";P[R]+=M[L]*O})}return P}function t3(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=n.boundary,l=n.rootBoundary,o=n.padding,c=n.flipVariations,d=n.allowedAutoPlacements,m=d===void 0?I_:d,u=Tc(s),p=u?c?Cj:Cj.filter(function(x){return Tc(x)===u}):zm,h=p.filter(function(x){return m.indexOf(x)>=0});h.length===0&&(h=p);var g=h.reduce(function(x,v){return x[v]=hm(t,{placement:v,boundary:a,rootBoundary:l,padding:o})[Oa(v)],x},{});return Object.keys(g).sort(function(x,v){return g[x]-g[v]})}function n3(t){if(Oa(t)===gb)return[];var e=Eh(t);return[Ej(t),e,Ej(e)]}function i3(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=n.mainAxis,l=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!0:o,d=n.fallbackPlacements,m=n.padding,u=n.boundary,p=n.rootBoundary,h=n.altBoundary,g=n.flipVariations,x=g===void 0?!0:g,v=n.allowedAutoPlacements,y=e.options.placement,b=Oa(y),k=b===y,w=d||(k||!x?[Eh(y)]:n3(y)),S=[y].concat(w).reduce(function(X,J){return X.concat(Oa(J)===gb?t3(e,{placement:J,boundary:u,rootBoundary:p,padding:m,flipVariations:x,allowedAutoPlacements:v}):J)},[]),j=e.rects.reference,T=e.rects.popper,N=new Map,_=!0,A=S[0],P=0;P<S.length;P++){var E=S[P],M=Oa(E),R=Tc(E)===Sc,O=[ds,Qs].indexOf(M)>=0,L=O?"width":"height",q=hm(e,{placement:E,boundary:u,rootBoundary:p,altBoundary:h,padding:m}),Q=O?R?Zs:ms:R?Qs:ds;j[L]>T[L]&&(Q=Eh(Q));var V=Eh(Q),se=[];if(l&&se.push(q[M]<=0),c&&se.push(q[Q]<=0,q[V]<=0),se.every(function(X){return X})){A=E,_=!1;break}N.set(E,se)}if(_)for(var G=x?3:1,ge=function(J){var ue=S.find(function(le){var I=N.get(le);if(I)return I.slice(0,J).every(function(ee){return ee})});if(ue)return A=ue,"break"},ie=G;ie>0;ie--){var W=ge(ie);if(W==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const s3={name:"flip",enabled:!0,phase:"main",fn:i3,requiresIfExists:["offset"],data:{_skip:!1}};function Aj(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Dj(t){return[ds,Zs,Qs,ms].some(function(e){return t[e]>=0})}function a3(t){var e=t.state,n=t.name,s=e.rects.reference,a=e.rects.popper,l=e.modifiersData.preventOverflow,o=hm(e,{elementContext:"reference"}),c=hm(e,{altBoundary:!0}),d=Aj(o,s),m=Aj(c,a,l),u=Dj(d),p=Dj(m);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const r3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:a3};function l3(t,e,n){var s=Oa(t),a=[ms,ds].indexOf(s)>=0?-1:1,l=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=l[0],c=l[1];return o=o||0,c=(c||0)*a,[ms,Zs].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function o3(t){var e=t.state,n=t.options,s=t.name,a=n.offset,l=a===void 0?[0,0]:a,o=I_.reduce(function(u,p){return u[p]=l3(p,e.rects,l),u},{}),c=o[e.placement],d=c.x,m=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=m),e.modifiersData[s]=o}const c3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:o3};function d3(t){var e=t.state,n=t.name;e.modifiersData[n]=H_({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const m3={name:"popperOffsets",enabled:!0,phase:"read",fn:d3,data:{}};function u3(t){return t==="x"?"y":"x"}function h3(t){var e=t.state,n=t.options,s=t.name,a=n.mainAxis,l=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!1:o,d=n.boundary,m=n.rootBoundary,u=n.altBoundary,p=n.padding,h=n.tether,g=h===void 0?!0:h,x=n.tetherOffset,v=x===void 0?0:x,y=hm(e,{boundary:d,rootBoundary:m,padding:p,altBoundary:u}),b=Oa(e.placement),k=Tc(e.placement),w=!k,S=xb(b),j=u3(S),T=e.modifiersData.popperOffsets,N=e.rects.reference,_=e.rects.popper,A=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,P=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(T){if(l){var R,O=S==="y"?ds:ms,L=S==="y"?Qs:Zs,q=S==="y"?"height":"width",Q=T[S],V=Q+y[O],se=Q-y[L],G=g?-_[q]/2:0,ge=k===Sc?N[q]:_[q],ie=k===Sc?-_[q]:-N[q],W=e.elements.arrow,X=g&&W?vb(W):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:L_(),ue=J[O],le=J[L],I=Gd(0,N[q],X[q]),ee=w?N[q]/2-G-I-ue-P.mainAxis:ge-I-ue-P.mainAxis,K=w?-N[q]/2+G+I+le+P.mainAxis:ie+I+le+P.mainAxis,ne=e.elements.arrow&&Vm(e.elements.arrow),oe=ne?S==="y"?ne.clientTop||0:ne.clientLeft||0:0,D=(R=E?.[S])!=null?R:0,$=Q+ee-D-oe,te=Q+K-D,ae=Gd(g?ep(V,$):V,Q,g?Kl(se,te):se);T[S]=ae,M[S]=ae-Q}if(c){var Y,H=S==="x"?ds:ms,B=S==="x"?Qs:Zs,re=T[j],de=j==="y"?"height":"width",xe=re+y[H],U=re-y[B],me=[ds,ms].indexOf(b)!==-1,ye=(Y=E?.[j])!=null?Y:0,pe=me?xe:re-N[de]-_[de]-ye+P.altAxis,Ce=me?re+N[de]+_[de]-ye-P.altAxis:U,Ge=g&&me?FO(pe,re,Ce):Gd(g?pe:xe,re,g?Ce:U);T[j]=Ge,M[j]=Ge-re}e.modifiersData[s]=M}}const p3={name:"preventOverflow",enabled:!0,phase:"main",fn:h3,requiresIfExists:["offset"]};function g3(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function f3(t){return t===Es(t)||!Fa(t)?yb(t):g3(t)}function v3(t){var e=t.getBoundingClientRect(),n=_c(e.width)/t.offsetWidth||1,s=_c(e.height)/t.offsetHeight||1;return n!==1||s!==1}function x3(t,e,n){n===void 0&&(n=!1);var s=Fa(e),a=Fa(e)&&v3(e),l=wl(e),o=Ec(t,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((pl(e)!=="body"||wb(l))&&(c=f3(e)),Fa(e)?(d=Ec(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):l&&(d.x=bb(l))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function y3(t){var e=new Map,n=new Set,s=[];t.forEach(function(l){e.set(l.name,l)});function a(l){n.add(l.name);var o=[].concat(l.requires||[],l.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var d=e.get(c);d&&a(d)}}),s.push(l)}return t.forEach(function(l){n.has(l.name)||a(l)}),s}function b3(t){var e=y3(t);return MO.reduce(function(n,s){return n.concat(e.filter(function(a){return a.phase===s}))},[])}function w3(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function k3(t){var e=t.reduce(function(n,s){var a=n[s.name];return n[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var Rj={placement:"bottom",modifiers:[],strategy:"absolute"};function Pj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function j3(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,a=e.defaultOptions,l=a===void 0?Rj:a;return function(c,d,m){m===void 0&&(m=l);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rj,l),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},p=[],h=!1,g={state:u,setOptions:function(b){var k=typeof b=="function"?b(u.options):b;v(),u.options=Object.assign({},l,u.options,k),u.scrollParents={reference:no(c)?Yd(c):c.contextElement?Yd(c.contextElement):[],popper:Yd(d)};var w=b3(k3([].concat(s,u.options.modifiers)));return u.orderedModifiers=w.filter(function(S){return S.enabled}),x(),g.update()},forceUpdate:function(){if(!h){var b=u.elements,k=b.reference,w=b.popper;if(Pj(k,w)){u.rects={reference:x3(k,Vm(w),u.options.strategy==="fixed"),popper:vb(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var j=u.orderedModifiers[S],T=j.fn,N=j.options,_=N===void 0?{}:N,A=j.name;typeof T=="function"&&(u=T({state:u,options:_,name:A,instance:g})||u)}}}},update:w3(function(){return new Promise(function(y){g.forceUpdate(),y(u)})}),destroy:function(){v(),h=!0}};if(!Pj(c,d))return g;g.setOptions(m).then(function(y){!h&&m.onFirstUpdate&&m.onFirstUpdate(y)});function x(){u.orderedModifiers.forEach(function(y){var b=y.name,k=y.options,w=k===void 0?{}:k,S=y.effect;if(typeof S=="function"){var j=S({state:u,name:b,instance:g,options:w}),T=function(){};p.push(j||T)}})}function v(){p.forEach(function(y){return y()}),p=[]}return g}}const N3=j3({defaultModifiers:[r3,m3,UO,KO,c3,s3,p3,qO]}),C3=["enabled","placement","strategy","modifiers"];function S3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const _3={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},E3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==n.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:s}=t.elements,a=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&a==="tooltip"&&"setAttribute"in s){const l=s.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(n.id)!==-1)return;s.setAttribute("aria-describedby",l?`${l},${n.id}`:n.id)}}},T3=[];function A3(t,e,n={}){let{enabled:s=!0,placement:a="bottom",strategy:l="absolute",modifiers:o=T3}=n,c=S3(n,C3);const d=f.useRef(o),m=f.useRef(),u=f.useCallback(()=>{var y;(y=m.current)==null||y.update()},[]),p=f.useCallback(()=>{var y;(y=m.current)==null||y.forceUpdate()},[]),[h,g]=kO(f.useState({placement:a,update:u,forceUpdate:p,attributes:{},styles:{popper:{},arrow:{}}})),x=f.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:y})=>{const b={},k={};Object.keys(y.elements).forEach(w=>{b[w]=y.styles[w],k[w]=y.attributes[w]}),g({state:y,styles:b,attributes:k,update:u,forceUpdate:p,placement:y.placement})}}),[u,p,g]),v=f.useMemo(()=>(Kd(d.current,o)||(d.current=o),d.current),[o]);return f.useEffect(()=>{!m.current||!s||m.current.setOptions({placement:a,strategy:l,modifiers:[...v,x,_3]})},[l,a,x,s,v]),f.useEffect(()=>{if(!(!s||t==null||e==null))return m.current=N3(t,e,Object.assign({},c,{placement:a,strategy:l,modifiers:[...v,E3,x]})),()=>{m.current!=null&&(m.current.destroy(),m.current=void 0,g(y=>Object.assign({},y,{attributes:{},styles:{popper:{}}})))}},[s,t,e]),h}function pm(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var zf,Mj;function D3(){if(Mj)return zf;Mj=1;var t=function(){};return zf=t,zf}var R3=D3();const P3=ya(R3),Ij=()=>{};function M3(t){return t.button===0}function I3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Th=t=>t&&("current"in t?t.current:t),Oj={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function O3(t,e=Ij,{disabled:n,clickTrigger:s="click"}={}){const a=f.useRef(!1),l=f.useRef(!1),o=f.useCallback(m=>{const u=Th(t);P3(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!u||I3(m)||!M3(m)||!!pm(u,m.target)||l.current,l.current=!1},[t]),c=Hs(m=>{const u=Th(t);u&&pm(u,m.target)?l.current=!0:l.current=!1}),d=Hs(m=>{a.current||e(m)});f.useEffect(()=>{var m,u;if(n||t==null)return;const p=Wc(Th(t)),h=p.defaultView||window;let g=(m=h.event)!=null?m:(u=h.parent)==null?void 0:u.event,x=null;Oj[s]&&(x=ur(p,Oj[s],c,!0));const v=ur(p,s,o,!0),y=ur(p,s,k=>{if(k===g){g=void 0;return}d(k)});let b=[];return"ontouchstart"in p.documentElement&&(b=[].slice.call(p.body.children).map(k=>ur(k,"mousemove",Ij))),()=>{x?.(),v(),y(),b.forEach(k=>k())}},[t,n,s,o,c,d])}function F3(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function L3(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function $3({enabled:t,enableEvents:e,placement:n,flip:s,offset:a,fixed:l,containerPadding:o,arrowElement:c,popperConfig:d={}}){var m,u,p,h,g;const x=F3(d.modifiers);return Object.assign({},d,{placement:n,enabled:t,strategy:l?"fixed":d.strategy,modifiers:L3(Object.assign({},x,{eventListeners:{enabled:e,options:(m=x.eventListeners)==null?void 0:m.options},preventOverflow:Object.assign({},x.preventOverflow,{options:o?Object.assign({padding:o},(u=x.preventOverflow)==null?void 0:u.options):(p=x.preventOverflow)==null?void 0:p.options}),offset:{options:Object.assign({offset:a},(h=x.offset)==null?void 0:h.options)},arrow:Object.assign({},x.arrow,{enabled:!!c,options:Object.assign({},(g=x.arrow)==null?void 0:g.options,{element:c})}),flip:Object.assign({enabled:!!s},x.flip)}))})}const z_={prefix:String(Math.round(Math.random()*1e10)),current:0},V_=ze.createContext(z_),B3=ze.createContext(!1);let Vf=new WeakMap;function q3(t=!1){let e=f.useContext(V_),n=f.useRef(null);if(n.current===null&&!t){var s,a;let l=(a=ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(s=a.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(l){let o=Vf.get(l);o==null?Vf.set(l,{id:e.current,state:l.memoizedState}):l.memoizedState!==o.state&&(e.current=o.id,Vf.delete(l))}n.current=++e.current}return n.current}function H3(t){let e=f.useContext(V_),n=q3(!!t),s=`react-aria${e.prefix}`;return t||`${s}-${n}`}function z3(t){let e=ze.useId(),[n]=f.useState(G3()),s=n?"react-aria":`react-aria${z_.prefix}`;return t||`${s}-${e}`}const V3=typeof ze.useId=="function"?z3:H3;function U3(){return!1}function W3(){return!0}function K3(t){return()=>{}}function G3(){return typeof ze.useSyncExternalStore=="function"?ze.useSyncExternalStore(K3,U3,W3):f.useContext(B3)}const Ac=f.createContext(null),gm=(t,e=null)=>t!=null?String(t):e||null,kb=f.createContext(null);kb.displayName="NavContext";const Y3="data-rr-ui-",Q3="rrUi";function wg(t){return`${Y3}${t}`}function Z3(t){return`${Q3}${t}`}const U_=f.createContext(Kc?window:void 0);U_.Provider;function jb(){return f.useContext(U_)}const X3=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",J3=typeof document<"u",W_=J3||X3?f.useLayoutEffect:f.useEffect,K_=f.createContext(null);K_.displayName="InputGroupContext";const G_=f.createContext(null);G_.displayName="NavbarContext";Pe.string,Pe.bool,Pe.bool,Pe.bool,Pe.bool;const Y_=f.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:s=!1,roundedCircle:a=!1,thumbnail:l=!1,...o},c)=>(t=Rt(t,"img"),i.jsx("img",{ref:c,...o,className:vt(e,n&&`${t}-fluid`,s&&"rounded",a&&"rounded-circle",l&&`${t}-thumbnail`)})));Y_.displayName="Image";const e5={type:Pe.string,tooltip:Pe.bool,as:Pe.elementType},kg=f.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:s=!1,...a},l)=>i.jsx(t,{...a,ref:l,className:vt(e,`${n}-${s?"tooltip":"feedback"}`)}));kg.displayName="Feedback";kg.propTypes=e5;const _r=f.createContext({}),Um=f.forwardRef(({id:t,bsPrefix:e,className:n,type:s="checkbox",isValid:a=!1,isInvalid:l=!1,as:o="input",...c},d)=>{const{controlId:m}=f.useContext(_r);return e=Rt(e,"form-check-input"),i.jsx(o,{...c,ref:d,type:s,id:t||m,className:vt(n,e,a&&"is-valid",l&&"is-invalid")})});Um.displayName="FormCheckInput";const tp=f.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...s},a)=>{const{controlId:l}=f.useContext(_r);return t=Rt(t,"form-check-label"),i.jsx("label",{...s,ref:a,htmlFor:n||l,className:vt(e,t)})});tp.displayName="FormCheckLabel";const Q_=f.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:s=!1,reverse:a=!1,disabled:l=!1,isValid:o=!1,isInvalid:c=!1,feedbackTooltip:d=!1,feedback:m,feedbackType:u,className:p,style:h,title:g="",type:x="checkbox",label:v,children:y,as:b="input",...k},w)=>{e=Rt(e,"form-check"),n=Rt(n,"form-switch");const{controlId:S}=f.useContext(_r),j=f.useMemo(()=>({controlId:t||S}),[S,t]),T=!y&&v!=null&&v!==!1||vO(y,tp),N=i.jsx(Um,{...k,type:x==="switch"?"checkbox":x,ref:w,isValid:o,isInvalid:c,disabled:l,as:b});return i.jsx(_r.Provider,{value:j,children:i.jsx("div",{style:h,className:vt(p,T&&e,s&&`${e}-inline`,a&&`${e}-reverse`,x==="switch"&&n),children:y||i.jsxs(i.Fragment,{children:[N,T&&i.jsx(tp,{title:g,children:v}),m&&i.jsx(kg,{type:u,tooltip:d,children:m})]})})})});Q_.displayName="FormCheck";const np=Object.assign(Q_,{Input:Um,Label:tp}),Z_=f.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:s,id:a,className:l,isValid:o=!1,isInvalid:c=!1,plaintext:d,readOnly:m,as:u="input",...p},h)=>{const{controlId:g}=f.useContext(_r);return t=Rt(t,"form-control"),i.jsx(u,{...p,type:e,size:s,ref:h,readOnly:m,id:a||g,className:vt(l,d?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",c&&"is-invalid")})});Z_.displayName="FormControl";const t5=Object.assign(Z_,{Feedback:kg}),X_=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"form-floating"),i.jsx(n,{ref:a,className:vt(t,e),...s})));X_.displayName="FormFloating";const Nb=f.forwardRef(({controlId:t,as:e="div",...n},s)=>{const a=f.useMemo(()=>({controlId:t}),[t]);return i.jsx(_r.Provider,{value:a,children:i.jsx(e,{...n,ref:s})})});Nb.displayName="FormGroup";const J_=f.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:s=!1,className:a,htmlFor:l,...o},c)=>{const{controlId:d}=f.useContext(_r);e=Rt(e,"form-label");let m="col-form-label";typeof n=="string"&&(m=`${m} ${m}-${n}`);const u=vt(a,e,s&&"visually-hidden",n&&m);return l=l||d,n?i.jsx(Et,{ref:c,as:"label",className:u,htmlFor:l,...o}):i.jsx(t,{ref:c,className:u,htmlFor:l,...o})});J_.displayName="FormLabel";const eE=f.forwardRef(({bsPrefix:t,className:e,id:n,...s},a)=>{const{controlId:l}=f.useContext(_r);return t=Rt(t,"form-range"),i.jsx("input",{...s,type:"range",ref:a,className:vt(e,t),id:n||l})});eE.displayName="FormRange";const tE=f.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:s,isValid:a=!1,isInvalid:l=!1,id:o,...c},d)=>{const{controlId:m}=f.useContext(_r);return t=Rt(t,"form-select"),i.jsx("select",{...c,size:n,ref:d,className:vt(s,t,e&&`${t}-${e}`,a&&"is-valid",l&&"is-invalid"),id:o||m})});tE.displayName="FormSelect";const nE=f.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:s,...a},l)=>(t=Rt(t,"form-text"),i.jsx(n,{...a,ref:l,className:vt(e,t,s&&"text-muted")})));nE.displayName="FormText";const iE=f.forwardRef((t,e)=>i.jsx(np,{...t,ref:e,type:"switch"}));iE.displayName="Switch";const n5=Object.assign(iE,{Input:np.Input,Label:np.Label}),sE=f.forwardRef(({bsPrefix:t,className:e,children:n,controlId:s,label:a,...l},o)=>(t=Rt(t,"form-floating"),i.jsxs(Nb,{ref:o,className:vt(e,t),controlId:s,...l,children:[n,i.jsx("label",{htmlFor:s,children:a})]})));sE.displayName="FloatingLabel";const i5={_ref:Pe.any,validated:Pe.bool,as:Pe.elementType},Cb=f.forwardRef(({className:t,validated:e,as:n="form",...s},a)=>i.jsx(n,{...s,ref:a,className:vt(t,e&&"was-validated")}));Cb.displayName="Form";Cb.propTypes=i5;const Mt=Object.assign(Cb,{Group:Nb,Control:t5,Floating:X_,Check:np,Switch:n5,Label:J_,Text:nE,Range:eE,Select:tE,FloatingLabel:sE}),jg=f.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},a)=>(e=Rt(e,"input-group-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));jg.displayName="InputGroupText";const s5=t=>i.jsx(jg,{children:i.jsx(Um,{type:"checkbox",...t})}),a5=t=>i.jsx(jg,{children:i.jsx(Um,{type:"radio",...t})}),aE=f.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:s,as:a="div",...l},o)=>{t=Rt(t,"input-group");const c=f.useMemo(()=>({}),[]);return i.jsx(K_.Provider,{value:c,children:i.jsx(a,{ref:o,...l,className:vt(s,t,e&&`${t}-${e}`,n&&"has-validation")})})});aE.displayName="InputGroup";const Qd=Object.assign(aE,{Text:jg,Radio:a5,Checkbox:s5}),Fj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function r5(t,e){const n=Fj(t),s=Fj(e);return a=>{n&&n(a),s&&s(a)}}function Wm(t,e){return f.useMemo(()=>r5(t,e),[t,e])}const Gc=f.createContext(null),l5=["as","active","eventKey"];function o5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function rE({key:t,onClick:e,active:n,id:s,role:a,disabled:l}){const o=f.useContext(Ac),c=f.useContext(kb),d=f.useContext(Gc);let m=n;const u={role:a};if(c){!a&&c.role==="tablist"&&(u.role="tab");const p=c.getControllerId(t??null),h=c.getControlledId(t??null);u[wg("event-key")]=t,u.id=p||s,m=n==null&&t!=null?c.activeKey===t:n,(m||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=m,m||(u.tabIndex=-1),l&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Hs(p=>{l||(e?.(p),t!=null&&o&&!p.isPropagationStopped()&&o(t,p))}),[u,{isActive:m}]}const lE=f.forwardRef((t,e)=>{let{as:n=b_,active:s,eventKey:a}=t,l=o5(t,l5);const[o,c]=rE(Object.assign({key:gm(a,l.href),active:s},l));return o[wg("active")]=c.isActive,i.jsx(n,Object.assign({},l,o,{ref:e}))});lE.displayName="NavItem";const c5=["as","onSelect","activeKey","role","onKeyDown"];function d5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const Lj=()=>{},$j=wg("event-key"),oE=f.forwardRef((t,e)=>{let{as:n="div",onSelect:s,activeKey:a,role:l,onKeyDown:o}=t,c=d5(t,c5);const d=wO(),m=f.useRef(!1),u=f.useContext(Ac),p=f.useContext(Gc);let h,g;p&&(l=l||"tablist",a=p.activeKey,h=p.getControlledId,g=p.getControllerId);const x=f.useRef(null),v=w=>{const S=x.current;if(!S)return null;const j=Ol(S,`[${$j}]:not([aria-disabled=true])`),T=S.querySelector("[aria-selected=true]");if(!T||T!==document.activeElement)return null;const N=j.indexOf(T);if(N===-1)return null;let _=N+w;return _>=j.length&&(_=0),_<0&&(_=j.length-1),j[_]},y=(w,S)=>{w!=null&&(s?.(w,S),u?.(w,S))},b=w=>{if(o?.(w),!p)return;let S;switch(w.key){case"ArrowLeft":case"ArrowUp":S=v(-1);break;case"ArrowRight":case"ArrowDown":S=v(1);break;default:return}S&&(w.preventDefault(),y(S.dataset[Z3("EventKey")]||null,w),m.current=!0,d())};f.useEffect(()=>{if(x.current&&m.current){const w=x.current.querySelector(`[${$j}][aria-selected=true]`);w?.focus()}m.current=!1});const k=Wm(e,x);return i.jsx(Ac.Provider,{value:y,children:i.jsx(kb.Provider,{value:{role:l,activeKey:gm(a),getControlledId:h||Lj,getControllerId:g||Lj},children:i.jsx(n,Object.assign({},c,{onKeyDown:b,ref:k,role:l}))})})});oE.displayName="Nav";const m5=Object.assign(oE,{Item:lE});var Ru;function Bj(t){if((!Ru&&Ru!==0||t)&&Kc){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Ru=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Ru}function u5(){return f.useState(null)}function Uf(t){t===void 0&&(t=Wc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function h5(t){const e=f.useRef(t);return e.current=t,e}function p5(t){const e=h5(t);f.useEffect(()=>()=>e.current(),[])}function g5(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const qj=wg("modal-open");class Sb{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return g5(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[s]:a.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(wr(a,s)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(qj,""),wr(a,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(qj),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Wf=(t,e)=>Kc?t==null?(e||Wc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Ax(t,e){const n=jb(),[s,a]=f.useState(()=>Wf(t,n?.document));if(!s){const l=Wf(t);l&&a(l)}return f.useEffect(()=>{},[e,s]),f.useEffect(()=>{const l=Wf(t);l!==s&&a(l)},[t,s]),s}function _b({children:t,in:e,onExited:n,mountOnEnter:s,unmountOnExit:a}){const l=f.useRef(null),o=f.useRef(e),c=Hs(n);f.useEffect(()=>{e?o.current=!0:c(l.current)},[e,c]);const d=Wm(l,xo(t)),m=f.cloneElement(t,{ref:d});return e?m:a||!o.current&&s?null:m}const f5=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function v5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function x5(t){let{onEnter:e,onEntering:n,onEntered:s,onExit:a,onExiting:l,onExited:o,addEndListener:c,children:d}=t,m=v5(t,f5);const u=f.useRef(null),p=Wm(u,xo(d)),h=S=>j=>{S&&u.current&&S(u.current,j)},g=f.useCallback(h(e),[e]),x=f.useCallback(h(n),[n]),v=f.useCallback(h(s),[s]),y=f.useCallback(h(a),[a]),b=f.useCallback(h(l),[l]),k=f.useCallback(h(o),[o]),w=f.useCallback(h(c),[c]);return Object.assign({},m,{nodeRef:u},e&&{onEnter:g},n&&{onEntering:x},s&&{onEntered:v},a&&{onExit:y},l&&{onExiting:b},o&&{onExited:k},c&&{addEndListener:w},{children:typeof d=="function"?(S,j)=>d(S,Object.assign({},j,{ref:p})):f.cloneElement(d,{ref:p})})}const y5=["component"];function b5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const w5=f.forwardRef((t,e)=>{let{component:n}=t,s=b5(t,y5);const a=x5(s);return i.jsx(n,Object.assign({ref:e},a))});function k5({in:t,onTransition:e}){const n=f.useRef(null),s=f.useRef(!0),a=Hs(e);return wj(()=>{if(!n.current)return;let l=!1;return a({in:t,element:n.current,initial:s.current,isStale:()=>l}),()=>{l=!0}},[t,a]),wj(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function j5({children:t,in:e,onExited:n,onEntered:s,transition:a}){const[l,o]=f.useState(!e);e&&l&&o(!1);const c=k5({in:!!e,onTransition:m=>{const u=()=>{m.isStale()||(m.in?s?.(m.element,m.initial):(o(!0),n?.(m.element)))};Promise.resolve(a(m)).then(u,p=>{throw m.in||o(!0),p})}}),d=Wm(c,xo(t));return l&&!e?null:f.cloneElement(t,{ref:d})}function Dx(t,e,n){return t?i.jsx(w5,Object.assign({},n,{component:t})):e?i.jsx(j5,Object.assign({},n,{transition:e})):i.jsx(_b,Object.assign({},n))}const N5=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function C5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}let Kf;function S5(t){return Kf||(Kf=new Sb({ownerDocument:t?.document})),Kf}function _5(t){const e=jb(),n=t||S5(e),s=f.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:f.useCallback(a=>{s.current.dialog=a},[]),setBackdropRef:f.useCallback(a=>{s.current.backdrop=a},[])})}const cE=f.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:a,style:l,children:o,backdrop:c=!0,keyboard:d=!0,onBackdropClick:m,onEscapeKeyDown:u,transition:p,runTransition:h,backdropTransition:g,runBackdropTransition:x,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:k,renderDialog:w,renderBackdrop:S=te=>i.jsx("div",Object.assign({},te)),manager:j,container:T,onShow:N,onHide:_=()=>{},onExit:A,onExited:P,onExiting:E,onEnter:M,onEntering:R,onEntered:O}=t,L=C5(t,N5);const q=jb(),Q=Ax(T),V=_5(j),se=y_(),G=JI(n),[ge,ie]=f.useState(!n),W=f.useRef(null);f.useImperativeHandle(e,()=>V,[V]),Kc&&!G&&n&&(W.current=Uf(q?.document)),n&&ge&&ie(!1);const X=Hs(()=>{if(V.add(),K.current=ur(document,"keydown",I),ee.current=ur(document,"focus",()=>setTimeout(ue),!0),N&&N(),v){var te,ae;const Y=Uf((te=(ae=V.dialog)==null?void 0:ae.ownerDocument)!=null?te:q?.document);V.dialog&&Y&&!pm(V.dialog,Y)&&(W.current=Y,V.dialog.focus())}}),J=Hs(()=>{if(V.remove(),K.current==null||K.current(),ee.current==null||ee.current(),b){var te;(te=W.current)==null||te.focus==null||te.focus(k),W.current=null}});f.useEffect(()=>{!n||!Q||X()},[n,Q,X]),f.useEffect(()=>{ge&&J()},[ge,J]),p5(()=>{J()});const ue=Hs(()=>{if(!y||!se()||!V.isTopModal())return;const te=Uf(q?.document);V.dialog&&te&&!pm(V.dialog,te)&&V.dialog.focus()}),le=Hs(te=>{te.target===te.currentTarget&&(m?.(te),c===!0&&_())}),I=Hs(te=>{d&&u_(te)&&V.isTopModal()&&(u?.(te),te.defaultPrevented||_())}),ee=f.useRef(),K=f.useRef(),ne=(...te)=>{ie(!0),P?.(...te)};if(!Q)return null;const oe=Object.assign({role:s,ref:V.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},L,{style:l,className:a,tabIndex:-1});let D=w?w(oe):i.jsx("div",Object.assign({},oe,{children:f.cloneElement(o,{role:"document"})}));D=Dx(p,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:A,onExiting:E,onExited:ne,onEnter:M,onEntering:R,onEntered:O,children:D});let $=null;return c&&($=S({ref:V.setBackdropRef,onClick:le}),$=Dx(g,x,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:$})),i.jsx(i.Fragment,{children:Hl.createPortal(i.jsxs(i.Fragment,{children:[$,D]}),Q)})});cE.displayName="Modal";const dE=Object.assign(cE,{Manager:Sb});function Rx(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function mE(t,e){t.classList?t.classList.add(e):Rx(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Hj(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function uE(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Hj(t.className,e):t.setAttribute("class",Hj(t.className&&t.className.baseVal||"",e))}const Vo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class hE extends Sb{adjustAndStore(e,n,s){const a=n.style[e];n.dataset[e]=a,wr(n,{[e]:`${parseFloat(wr(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],wr(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(mE(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Ol(n,Vo.FIXED_CONTENT).forEach(l=>this.adjustAndStore(s,l,e.scrollBarWidth)),Ol(n,Vo.STICKY_CONTENT).forEach(l=>this.adjustAndStore(a,l,-e.scrollBarWidth)),Ol(n,Vo.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(a,l,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();uE(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Ol(n,Vo.FIXED_CONTENT).forEach(l=>this.restore(s,l)),Ol(n,Vo.STICKY_CONTENT).forEach(l=>this.restore(a,l)),Ol(n,Vo.NAVBAR_TOGGLER).forEach(l=>this.restore(a,l))}}let Gf;function pE(t){return Gf||(Gf=new hE(t)),Gf}const gE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"modal-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));gE.displayName="ModalBody";const Eb=f.createContext({onHide(){}}),Tb=f.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:a,fullscreen:l,children:o,scrollable:c,...d},m)=>{t=Rt(t,"modal");const u=`${t}-dialog`,p=typeof l=="string"?`${t}-fullscreen-${l}`:`${t}-fullscreen`;return i.jsx("div",{...d,ref:m,className:vt(u,e,a&&`${t}-${a}`,s&&`${u}-centered`,c&&`${u}-scrollable`,l&&p),children:i.jsx("div",{className:vt(`${t}-content`,n),children:o})})});Tb.displayName="ModalDialog";const fE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"modal-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));fE.displayName="ModalFooter";const Ab=f.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:a,...l},o)=>{const c=f.useContext(Eb),d=Cc(()=>{c?.onHide(),s?.()});return i.jsxs("div",{ref:o,...l,children:[a,n&&i.jsx(yg,{"aria-label":t,variant:e,onClick:d})]})});Ab.displayName="AbstractModalHeader";const vE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},l)=>(t=Rt(t,"modal-header"),i.jsx(Ab,{ref:l,...a,className:vt(e,t),closeLabel:n,closeButton:s})));vE.displayName="ModalHeader";const E5=Hm("h4"),xE=f.forwardRef(({className:t,bsPrefix:e,as:n=E5,...s},a)=>(e=Rt(e,"modal-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));xE.displayName="ModalTitle";function T5(t){return i.jsx(qa,{...t,timeout:null})}function A5(t){return i.jsx(qa,{...t,timeout:null})}const yE=f.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:a,children:l,dialogAs:o=Tb,"data-bs-theme":c,"aria-labelledby":d,"aria-describedby":m,"aria-label":u,show:p=!1,animation:h=!0,backdrop:g=!0,keyboard:x=!0,onEscapeKeyDown:v,onShow:y,onHide:b,container:k,autoFocus:w=!0,enforceFocus:S=!0,restoreFocus:j=!0,restoreFocusOptions:T,onEntered:N,onExit:_,onExiting:A,onEnter:P,onEntering:E,onExited:M,backdropClassName:R,manager:O,...L},q)=>{const[Q,V]=f.useState({}),[se,G]=f.useState(!1),ge=f.useRef(!1),ie=f.useRef(!1),W=f.useRef(null),[X,J]=u5(),ue=fg(q,J),le=Cc(b),I=db();t=Rt(t,"modal");const ee=f.useMemo(()=>({onHide:le}),[le]);function K(){return O||pE({isRTL:I})}function ne(pe){if(!Kc)return;const Ce=K().getScrollbarWidth()>0,Ge=pe.scrollHeight>Wc(pe).documentElement.clientHeight;V({paddingRight:Ce&&!Ge?Bj():void 0,paddingLeft:!Ce&&Ge?Bj():void 0})}const oe=Cc(()=>{X&&ne(X.dialog)});R_(()=>{Sx(window,"resize",oe),W.current==null||W.current()});const D=()=>{ge.current=!0},$=pe=>{ge.current&&X&&pe.target===X.dialog&&(ie.current=!0),ge.current=!1},te=()=>{G(!0),W.current=p_(X.dialog,()=>{G(!1)})},ae=pe=>{pe.target===pe.currentTarget&&te()},Y=pe=>{if(g==="static"){ae(pe);return}if(ie.current||pe.target!==pe.currentTarget){ie.current=!1;return}b?.()},H=pe=>{x?v?.(pe):(pe.preventDefault(),g==="static"&&te())},B=(pe,Ce)=>{pe&&ne(pe),P?.(pe,Ce)},re=pe=>{W.current==null||W.current(),_?.(pe)},de=(pe,Ce)=>{E?.(pe,Ce),h_(window,"resize",oe)},xe=pe=>{pe&&(pe.style.display=""),M?.(pe),Sx(window,"resize",oe)},U=f.useCallback(pe=>i.jsx("div",{...pe,className:vt(`${t}-backdrop`,R,!h&&"show")}),[h,R,t]),me={...n,...Q};me.display="block";const ye=pe=>i.jsx("div",{role:"dialog",...pe,style:me,className:vt(e,t,se&&`${t}-static`,!h&&"show"),onClick:g?Y:void 0,onMouseUp:$,"data-bs-theme":c,"aria-label":u,"aria-labelledby":d,"aria-describedby":m,children:i.jsx(o,{...L,onMouseDown:D,className:s,contentClassName:a,children:l})});return i.jsx(Eb.Provider,{value:ee,children:i.jsx(dE,{show:p,ref:ue,backdrop:g,container:k,keyboard:!0,autoFocus:w,enforceFocus:S,restoreFocus:j,restoreFocusOptions:T,onEscapeKeyDown:H,onShow:y,onHide:b,onEnter:B,onEntering:de,onEntered:N,onExit:re,onExiting:A,onExited:xe,manager:K(),transition:h?T5:void 0,backdropTransition:h?A5:void 0,renderBackdrop:U,renderDialog:ye})})});yE.displayName="Modal";const lt=Object.assign(yE,{Body:gE,Header:vE,Title:xE,Footer:fE,Dialog:Tb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Db=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"nav-item"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Db.displayName="NavItem";const Rb=f.forwardRef(({bsPrefix:t,className:e,as:n=xg,active:s,eventKey:a,disabled:l=!1,...o},c)=>{t=Rt(t,"nav-link");const[d,m]=rE({key:gm(a,o.href),active:s,disabled:l,...o});return i.jsx(n,{...o,...d,ref:c,disabled:l,className:vt(e,t,l&&"disabled",m.isActive&&"active")})});Rb.displayName="NavLink";const bE=f.forwardRef((t,e)=>{const{as:n="div",bsPrefix:s,variant:a,fill:l=!1,justify:o=!1,navbar:c,navbarScroll:d,className:m,activeKey:u,...p}=ob(t,{activeKey:"onSelect"}),h=Rt(s,"nav");let g,x,v=!1;const y=f.useContext(G_),b=f.useContext(pb);return y?(g=y.bsPrefix,v=c??!0):b&&({cardHeaderBsPrefix:x}=b),i.jsx(m5,{as:n,ref:e,activeKey:u,className:vt(m,{[h]:!v,[`${g}-nav`]:v,[`${g}-nav-scroll`]:v&&d,[`${x}-${a}`]:!!x,[`${h}-${a}`]:!!a,[`${h}-fill`]:l,[`${h}-justified`]:o}),...p})});bE.displayName="Nav";const Mn=Object.assign(bE,{Item:Db,Link:Rb}),Px=new WeakMap,zj=(t,e)=>{if(!t||!e)return;const n=Px.get(e)||new Map;Px.set(e,n);let s=n.get(t);return s||(s=e.matchMedia(t),s.refCount=0,n.set(s.media,s)),s};function D5(t,e=typeof window>"u"?void 0:window){const n=zj(t,e),[s,a]=f.useState(()=>n?n.matches:!1);return W_(()=>{let l=zj(t,e);if(!l)return a(!1);let o=Px.get(e);const c=()=>{a(l.matches)};return l.refCount++,l.addListener(c),c(),()=>{l.removeListener(c),l.refCount--,l.refCount<=0&&o?.delete(l.media),l=void 0}},[t]),s}function R5(t){const e=Object.keys(t);function n(c,d){return c===d?d:c?`${c} and ${d}`:d}function s(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function a(c){const d=s(c);let m=t[d];return typeof m=="number"?m=`${m-.2}px`:m=`calc(${m} - 0.2px)`,`(max-width: ${m})`}function l(c){let d=t[c];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function o(c,d,m){let u;typeof c=="object"?(u=c,m=d,d=!0):(d=d||!0,u={[c]:d});let p=f.useMemo(()=>Object.entries(u).reduce((h,[g,x])=>((x==="up"||x===!0)&&(h=n(h,l(g))),(x==="down"||x===!0)&&(h=n(h,a(g))),h),""),[JSON.stringify(u)]);return D5(p,m)}return o}const P5=R5({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),wE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"offcanvas-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));wE.displayName="OffcanvasBody";const M5={[Mi]:"show",[Ns]:"show"},kE=f.forwardRef(({bsPrefix:t,className:e,children:n,in:s=!1,mountOnEnter:a=!1,unmountOnExit:l=!1,appear:o=!1,...c},d)=>(t=Rt(t,"offcanvas"),i.jsx(vg,{ref:d,addEndListener:ub,in:s,mountOnEnter:a,unmountOnExit:l,appear:o,...c,childRef:xo(n),children:(m,u)=>f.cloneElement(n,{...u,className:vt(e,n.props.className,(m===Mi||m===to)&&`${t}-toggling`,M5[m])})})));kE.displayName="OffcanvasToggling";const jE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},l)=>(t=Rt(t,"offcanvas-header"),i.jsx(Ab,{ref:l,...a,className:vt(e,t),closeLabel:n,closeButton:s})));jE.displayName="OffcanvasHeader";const I5=Hm("h5"),NE=f.forwardRef(({className:t,bsPrefix:e,as:n=I5,...s},a)=>(e=Rt(e,"offcanvas-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));NE.displayName="OffcanvasTitle";function O5(t){return i.jsx(kE,{...t})}function F5(t){return i.jsx(qa,{...t})}const CE=f.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":s,placement:a="start",responsive:l,show:o=!1,backdrop:c=!0,keyboard:d=!0,scroll:m=!1,onEscapeKeyDown:u,onShow:p,onHide:h,container:g,autoFocus:x=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:b,onEntered:k,onExit:w,onExiting:S,onEnter:j,onEntering:T,onExited:N,backdropClassName:_,manager:A,renderStaticNode:P=!1,...E},M)=>{const R=f.useRef();t=Rt(t,"offcanvas");const[O,L]=f.useState(!1),q=Cc(h),Q=P5(l||"xs","up");f.useEffect(()=>{L(l?o&&!Q:o)},[o,l,Q]);const V=f.useMemo(()=>({onHide:q}),[q]);function se(){return A||(m?(R.current||(R.current=new hE({handleContainerOverflow:!1})),R.current):pE())}const G=(X,...J)=>{X&&(X.style.visibility="visible"),j?.(X,...J)},ge=(X,...J)=>{X&&(X.style.visibility=""),N?.(...J)},ie=f.useCallback(X=>i.jsx("div",{...X,className:vt(`${t}-backdrop`,_)}),[_,t]),W=X=>i.jsx("div",{...X,...E,className:vt(e,l?`${t}-${l}`:t,`${t}-${a}`),"aria-labelledby":s,children:n});return i.jsxs(i.Fragment,{children:[!O&&(l||P)&&W({}),i.jsx(Eb.Provider,{value:V,children:i.jsx(dE,{show:O,ref:M,backdrop:c,container:g,keyboard:d,autoFocus:x,enforceFocus:v&&!m,restoreFocus:y,restoreFocusOptions:b,onEscapeKeyDown:u,onShow:p,onHide:q,onEnter:G,onEntering:T,onEntered:k,onExit:w,onExiting:S,onExited:ge,manager:se(),transition:O5,backdropTransition:F5,renderBackdrop:ie,renderDialog:W})})]})});CE.displayName="Offcanvas";const Pu=Object.assign(CE,{Body:wE,Header:jE,Title:NE}),L5=()=>{};function $5(t,e,{disabled:n,clickTrigger:s}={}){const a=e||L5;O3(t,a,{disabled:n,clickTrigger:s});const l=Hs(o=>{u_(o)&&a(o)});f.useEffect(()=>{if(n||t==null)return;const o=Wc(Th(t));let c=(o.defaultView||window).event;const d=ur(o,"keyup",m=>{if(m===c){c=void 0;return}l(m)});return()=>{d()}},[t,n,l])}const SE=f.forwardRef((t,e)=>{const{flip:n,offset:s,placement:a,containerPadding:l,popperConfig:o={},transition:c,runTransition:d}=t,[m,u]=bj(),[p,h]=bj(),g=Wm(u,e),x=Ax(t.container),v=Ax(t.target),[y,b]=f.useState(!t.show),k=A3(v,m,$3({placement:a,enableEvents:!!t.show,containerPadding:l||5,flip:n,offset:s,arrowElement:p,popperConfig:o}));t.show&&y&&b(!1);const w=(...E)=>{b(!0),t.onExited&&t.onExited(...E)},S=t.show||!y;if($5(m,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!S)return null;const{onExit:j,onExiting:T,onEnter:N,onEntering:_,onEntered:A}=t;let P=t.children(Object.assign({},k.attributes.popper,{style:k.styles.popper,ref:g}),{popper:k,placement:a,show:!!t.show,arrowProps:Object.assign({},k.attributes.arrow,{style:k.styles.arrow,ref:h})});return P=Dx(c,d,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:P,onExit:j,onExiting:T,onExited:w,onEnter:N,onEntering:_,onEntered:A}),x?Hl.createPortal(P,x):null});SE.displayName="Overlay";const _E=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"popover-header"),i.jsx(n,{ref:a,className:vt(t,e),...s})));_E.displayName="PopoverHeader";const Pb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"popover-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Pb.displayName="PopoverBody";function EE(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function TE(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const AE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,body:l,arrowProps:o,hasDoneInitialMeasure:c,popper:d,show:m,...u},p)=>{const h=Rt(t,"popover"),g=db(),[x]=e?.split("-")||[],v=EE(x,g);let y=s;return m&&!c&&(y={...s,...TE(d?.strategy)}),i.jsxs("div",{ref:p,role:"tooltip",style:y,"x-placement":x,className:vt(n,h,x&&`bs-popover-${v}`),...u,children:[i.jsx("div",{className:"popover-arrow",...o}),l?i.jsx(Pb,{children:a}):a]})});AE.displayName="Popover";const Mx=Object.assign(AE,{Header:_E,Body:Pb,POPPER_OFFSET:[0,8]}),DE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,arrowProps:l,hasDoneInitialMeasure:o,popper:c,show:d,...m},u)=>{t=Rt(t,"tooltip");const p=db(),[h]=e?.split("-")||[],g=EE(h,p);let x=s;return d&&!o&&(x={...s,...TE(c?.strategy)}),i.jsxs("div",{ref:u,style:x,role:"tooltip","x-placement":h,className:vt(n,t,`bs-tooltip-${g}`),...m,children:[i.jsx("div",{className:"tooltip-arrow",...l}),i.jsx("div",{className:`${t}-inner`,children:a})]})});DE.displayName="Tooltip";const mt=Object.assign(DE,{TOOLTIP_OFFSET:[0,6]});function B5(t){const e=f.useRef(null),n=Rt(void 0,"popover"),s=Rt(void 0,"tooltip"),a=f.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(Rx(e.current,n))return Mx.POPPER_OFFSET;if(Rx(e.current,s))return mt.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,s]);return[e,[a]]}function q5(t,e){const{ref:n}=t,{ref:s}=e;t.ref=n.__wrapped||(n.__wrapped=a=>n(Jh(a))),e.ref=s.__wrapped||(s.__wrapped=a=>s(Jh(a)))}const RE=f.forwardRef(({children:t,transition:e=qa,popperConfig:n={},rootClose:s=!1,placement:a="top",show:l=!1,...o},c)=>{const d=f.useRef({}),[m,u]=f.useState(null),[p,h]=B5(o.offset),g=fg(c,p),x=e===!0?qa:e||void 0,v=Cc(y=>{u(y),n==null||n.onFirstUpdate==null||n.onFirstUpdate(y)});return W_(()=>{m&&o.target&&(d.current.scheduleUpdate==null||d.current.scheduleUpdate())},[m,o.target]),f.useEffect(()=>{l||u(null)},[l]),i.jsx(SE,{...o,ref:g,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:v},transition:x,rootClose:s,placement:a,show:l,children:(y,{arrowProps:b,popper:k,show:w})=>{var S;q5(y,b);const j=k?.placement,T=Object.assign(d.current,{state:k?.state,scheduleUpdate:k?.update,placement:j,outOfBoundaries:(k==null||(S=k.state)==null||(S=S.modifiersData.hide)==null?void 0:S.isReferenceHidden)||!1,strategy:n.strategy}),N=!!m;return typeof t=="function"?t({...y,placement:j,show:w,...!e&&w&&{className:"show"},popper:T,arrowProps:b,hasDoneInitialMeasure:N}):f.cloneElement(t,{...y,placement:j,arrowProps:b,popper:T,hasDoneInitialMeasure:N,className:vt(t.props.className,!e&&w&&"show"),style:{...t.props.style,...y.style}})}})});RE.displayName="Overlay";function H5(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function Vj(t,e,n){const[s]=e,a=s.currentTarget,l=s.relatedTarget||s.nativeEvent[n];(!l||l!==a)&&!pm(a,l)&&t(...e)}Pe.oneOf(["click","hover","focus"]);const Ze=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:s={},show:a,defaultShow:l=!1,onToggle:o,delay:c,placement:d,flip:m=d&&d.indexOf("auto")!==-1,...u})=>{const p=f.useRef(null),h=fg(p,xo(n)),g=gO(),x=f.useRef(""),[v,y]=o_(a,l,o),b=H5(c),{onFocus:k,onBlur:w,onClick:S}=typeof n!="function"?f.Children.only(n).props:{},j=L=>{h(Jh(L))},T=f.useCallback(()=>{if(g.clear(),x.current="show",!b.show){y(!0);return}g.set(()=>{x.current==="show"&&y(!0)},b.show)},[b.show,y,g]),N=f.useCallback(()=>{if(g.clear(),x.current="hide",!b.hide){y(!1);return}g.set(()=>{x.current==="hide"&&y(!1)},b.hide)},[b.hide,y,g]),_=f.useCallback((...L)=>{T(),k?.(...L)},[T,k]),A=f.useCallback((...L)=>{N(),w?.(...L)},[N,w]),P=f.useCallback((...L)=>{y(!v),S?.(...L)},[S,y,v]),E=f.useCallback((...L)=>{Vj(T,L,"fromElement")},[T]),M=f.useCallback((...L)=>{Vj(N,L,"toElement")},[N]),R=t==null?[]:[].concat(t),O={ref:j};return R.indexOf("click")!==-1&&(O.onClick=P),R.indexOf("focus")!==-1&&(O.onFocus=_,O.onBlur=A),R.indexOf("hover")!==-1&&(O.onMouseOver=E,O.onMouseOut=M),i.jsxs(i.Fragment,{children:[typeof n=="function"?n(O):f.cloneElement(n,O),i.jsx(RE,{...u,show:v,onHide:N,flip:m,placement:d,popperConfig:s,target:p.current,children:e})]})},Mb=f.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:s,activeLabel:a="(current)",children:l,linkStyle:o,linkClassName:c,as:d=xg,...m},u)=>{const p=t||e?"span":d;return i.jsx("li",{ref:u,style:s,className:vt(n,"page-item",{active:t,disabled:e}),children:i.jsxs(p,{className:vt("page-link",c),style:o,...m,children:[l,t&&a&&i.jsx("span",{className:"visually-hidden",children:a})]})})});Mb.displayName="PageItem";function Km(t,e,n=t){const s=f.forwardRef(({children:a,...l},o)=>i.jsxs(Mb,{...l,ref:o,children:[i.jsx("span",{"aria-hidden":"true",children:a||e}),i.jsx("span",{className:"visually-hidden",children:n})]}));return s.displayName=t,s}const z5=Km("First",""),V5=Km("Prev","","Previous"),U5=Km("Ellipsis","","More"),W5=Km("Next",""),K5=Km("Last",""),PE=f.forwardRef(({bsPrefix:t,className:e,size:n,...s},a)=>{const l=Rt(t,"pagination");return i.jsx("ul",{ref:a,...s,className:vt(e,l,n&&`${l}-${n}`)})});PE.displayName="Pagination";const Dl=Object.assign(PE,{First:z5,Prev:V5,Ellipsis:U5,Item:Mb,Next:W5,Last:K5}),Yn=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const l=Rt(t,"row"),o=c_(),c=d_(),d=`${l}-cols`,m=[];return o.forEach(u=>{const p=s[u];delete s[u];let h;p!=null&&typeof p=="object"?{cols:h}=p:h=p;const g=u!==c?`-${u}`:"";h!=null&&m.push(`${d}${g}-${h}`)}),i.jsx(n,{ref:a,...s,className:vt(e,l,...m)})});Yn.displayName="Row";const Ng=f.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:s,as:a="div",className:l,...o},c)=>{t=Rt(t,"spinner");const d=`${t}-${n}`;return i.jsx(a,{ref:c,...o,className:vt(l,d,s&&`${d}-${s}`,e&&`text-${e}`)})});Ng.displayName="Spinner";const G5=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Y5=["activeKey","getControlledId","getControllerId"],Q5=["as"];function Ix(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function ME(t){let{active:e,eventKey:n,mountOnEnter:s,transition:a,unmountOnExit:l,role:o="tabpanel",onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}=t,g=Ix(t,G5);const x=f.useContext(Gc);if(!x)return[Object.assign({},g,{role:o}),{eventKey:n,isActive:e,mountOnEnter:s,transition:a,unmountOnExit:l,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}];const{activeKey:v,getControlledId:y,getControllerId:b}=x,k=Ix(x,Y5),w=gm(n);return[Object.assign({},g,{role:o,id:y(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:e==null&&w!=null?gm(v)===w:e,transition:a||k.transition,mountOnEnter:s??k.mountOnEnter,unmountOnExit:l??k.unmountOnExit,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:p,onExited:h}]}const IE=f.forwardRef((t,e)=>{let{as:n="div"}=t,s=Ix(t,Q5);const[a,{isActive:l,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,transition:x=_b}]=ME(s);return i.jsx(Gc.Provider,{value:null,children:i.jsx(Ac.Provider,{value:null,children:i.jsx(x,{in:l,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:p,mountOnEnter:h,unmountOnExit:g,children:i.jsx(n,Object.assign({},a,{ref:e,hidden:!l,"aria-hidden":!l}))})})})});IE.displayName="TabPanel";const Ib=t=>{const{id:e,generateChildId:n,onSelect:s,activeKey:a,defaultActiveKey:l,transition:o,mountOnEnter:c,unmountOnExit:d,children:m}=t,[u,p]=bO(a,l,s),h=V3(e),g=f.useMemo(()=>n||((v,y)=>h?`${h}-${y}-${v}`:null),[h,n]),x=f.useMemo(()=>({onSelect:p,activeKey:u,transition:o,mountOnEnter:c||!1,unmountOnExit:d||!1,getControlledId:v=>g(v,"tabpane"),getControllerId:v=>g(v,"tab")}),[p,u,o,c,d,g]);return i.jsx(Gc.Provider,{value:x,children:i.jsx(Ac.Provider,{value:p||null,children:m})})};Ib.Panel=IE;function Ob(t){return typeof t=="boolean"?t?qa:_b:t}const OE=({transition:t,...e})=>i.jsx(Ib,{...e,transition:Ob(t)});OE.displayName="TabContainer";const Fb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"tab-content"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Fb.displayName="TabContent";const Lb=f.forwardRef(({bsPrefix:t,transition:e,...n},s)=>{const[{className:a,as:l="div",...o},{isActive:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:x,unmountOnExit:v,transition:y=qa}]=ME({...n,transition:Ob(e)}),b=Rt(t,"tab-pane");return i.jsx(Gc.Provider,{value:null,children:i.jsx(Ac.Provider,{value:null,children:i.jsx(y,{in:c,onEnter:d,onEntering:m,onEntered:u,onExit:p,onExiting:h,onExited:g,mountOnEnter:x,unmountOnExit:v,children:i.jsx(l,{...o,ref:s,className:vt(a,b,c&&"active")})})})})});Lb.displayName="TabPane";const Z5={eventKey:Pe.oneOfType([Pe.string,Pe.number]),title:Pe.node.isRequired,disabled:Pe.bool,tabClassName:Pe.string,tabAttrs:Pe.object},FE=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};FE.propTypes=Z5;const Cg=Object.assign(FE,{Container:OE,Content:Fb,Pane:Lb}),Ox=f.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:s,borderless:a,hover:l,size:o,variant:c,responsive:d,...m},u)=>{const p=Rt(t,"table"),h=vt(e,p,c&&`${p}-${c}`,o&&`${p}-${o}`,n&&`${p}-${typeof n=="string"?`striped-${n}`:"striped"}`,s&&`${p}-bordered`,a&&`${p}-borderless`,l&&`${p}-hover`),g=i.jsx("table",{...m,className:h,ref:u});if(d){let x=`${p}-responsive`;return typeof d=="string"&&(x=`${x}-${d}`),i.jsx("div",{className:x,children:g})}return g});Ox.displayName="Table";function X5(t){let e;return fO(t,n=>{e==null&&(e=n.props.eventKey)}),e}function J5(t){const{title:e,eventKey:n,disabled:s,tabClassName:a,tabAttrs:l,id:o}=t.props;return e==null?null:i.jsx(Db,{as:"li",role:"presentation",children:i.jsx(Rb,{as:"button",type:"button",eventKey:n,disabled:s,id:o,className:a,...l,children:e})})}const $b=t=>{const{id:e,onSelect:n,transition:s,mountOnEnter:a=!1,unmountOnExit:l=!1,variant:o="tabs",children:c,activeKey:d=X5(c),...m}=ob(t,{activeKey:"onSelect"});return i.jsxs(Ib,{id:e,activeKey:d,onSelect:n,transition:Ob(s),mountOnEnter:a,unmountOnExit:l,children:[i.jsx(Mn,{id:e,...m,role:"tablist",as:"ul",variant:o,children:kj(c,J5)}),i.jsx(Fb,{children:kj(c,u=>{const p={...u.props};return delete p.title,delete p.disabled,delete p.tabClassName,delete p.tabAttrs,i.jsx(Lb,{...p})})})]})};$b.displayName="Tabs";function io(t){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(t)}function e4(t,e){if(io(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(io(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LE(t){var e=e4(t,"string");return io(e)=="symbol"?e:e+""}function Ld(t,e,n){return(e=LE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(n),!0).forEach(function(s){Ld(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function t4(t){if(Array.isArray(t))return t}function n4(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,a,l,o,c=[],d=!0,m=!1;try{if(l=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(s=l.call(n)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(u){m=!0,a=u}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}function Fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function $E(t,e){if(t){if(typeof t=="string")return Fx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fx(t,e):void 0}}function i4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kr(t,e){return t4(t)||n4(t,e)||$E(t,e)||i4()}function ba(t,e){if(t==null)return{};var n,s,a=gg(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function BE(t){var e=t.defaultInputValue,n=e===void 0?"":e,s=t.defaultMenuIsOpen,a=s===void 0?!1:s,l=t.defaultValue,o=l===void 0?null:l,c=t.inputValue,d=t.menuIsOpen,m=t.onChange,u=t.onInputChange,p=t.onMenuClose,h=t.onMenuOpen,g=t.value,x=ba(t,s4),v=f.useState(c!==void 0?c:n),y=kr(v,2),b=y[0],k=y[1],w=f.useState(d!==void 0?d:a),S=kr(w,2),j=S[0],T=S[1],N=f.useState(g!==void 0?g:o),_=kr(N,2),A=_[0],P=_[1],E=f.useCallback(function(V,se){typeof m=="function"&&m(V,se),P(V)},[m]),M=f.useCallback(function(V,se){var G;typeof u=="function"&&(G=u(V,se)),k(G!==void 0?G:V)},[u]),R=f.useCallback(function(){typeof h=="function"&&h(),T(!0)},[h]),O=f.useCallback(function(){typeof p=="function"&&p(),T(!1)},[p]),L=c!==void 0?c:b,q=d!==void 0?d:j,Q=g!==void 0?g:A;return Ft(Ft({},x),{},{inputValue:L,menuIsOpen:q,onChange:E,onInputChange:M,onMenuClose:O,onMenuOpen:R,value:Q})}function qE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wj(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,LE(s.key),s)}}function HE(t,e,n){return e&&Wj(t.prototype,e),n&&Wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xh(t,e)}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(t)}function VE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VE=function(){return!!t})()}function a4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r4(t,e){if(e&&(io(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4(t)}function UE(t){var e=VE();return function(){var n,s=ip(t);if(e){var a=ip(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return r4(this,n)}}function l4(t){if(Array.isArray(t))return Fx(t)}function o4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cc(t){return l4(t)||o4(t)||$E(t)||c4()}function d4(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function m4(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var u4=(function(){function t(n){var s=this;this._insertTag=function(a){var l;s.tags.length===0?s.insertionPoint?l=s.insertionPoint.nextSibling:s.prepend?l=s.container.firstChild:l=s.before:l=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(a,l),s.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(m4(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var l=d4(a);try{l.insertRule(s,l.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){var a;return(a=s.parentNode)==null?void 0:a.removeChild(s)}),this.tags=[],this.ctr=0},t})(),Ai="-ms-",sp="-moz-",pn="-webkit-",WE="comm",Bb="rule",qb="decl",h4="@import",KE="@keyframes",p4="@layer",g4=Math.abs,Sg=String.fromCharCode,f4=Object.assign;function v4(t,e){return wi(t,0)^45?(((e<<2^wi(t,0))<<2^wi(t,1))<<2^wi(t,2))<<2^wi(t,3):0}function GE(t){return t.trim()}function x4(t,e){return(t=e.exec(t))?t[0]:t}function fn(t,e,n){return t.replace(e,n)}function Lx(t,e){return t.indexOf(e)}function wi(t,e){return t.charCodeAt(e)|0}function fm(t,e,n){return t.slice(e,n)}function Ra(t){return t.length}function Hb(t){return t.length}function Mu(t,e){return e.push(t),t}function y4(t,e){return t.map(e).join("")}var _g=1,Dc=1,YE=0,hs=0,oi=0,Yc="";function Eg(t,e,n,s,a,l,o){return{value:t,root:e,parent:n,type:s,props:a,children:l,line:_g,column:Dc,length:o,return:""}}function kd(t,e){return f4(Eg("",null,null,"",null,null,0),t,{length:-t.length},e)}function b4(){return oi}function w4(){return oi=hs>0?wi(Yc,--hs):0,Dc--,oi===10&&(Dc=1,_g--),oi}function Cs(){return oi=hs<YE?wi(Yc,hs++):0,Dc++,oi===10&&(Dc=1,_g++),oi}function La(){return wi(Yc,hs)}function Ah(){return hs}function Gm(t,e){return fm(Yc,t,e)}function vm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QE(t){return _g=Dc=1,YE=Ra(Yc=t),hs=0,[]}function ZE(t){return Yc="",t}function Dh(t){return GE(Gm(hs-1,$x(t===91?t+2:t===40?t+1:t)))}function k4(t){for(;(oi=La())&&oi<33;)Cs();return vm(t)>2||vm(oi)>3?"":" "}function j4(t,e){for(;--e&&Cs()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return Gm(t,Ah()+(e<6&&La()==32&&Cs()==32))}function $x(t){for(;Cs();)switch(oi){case t:return hs;case 34:case 39:t!==34&&t!==39&&$x(oi);break;case 40:t===41&&$x(t);break;case 92:Cs();break}return hs}function N4(t,e){for(;Cs()&&t+oi!==57;)if(t+oi===84&&La()===47)break;return"/*"+Gm(e,hs-1)+"*"+Sg(t===47?t:Cs())}function C4(t){for(;!vm(La());)Cs();return Gm(t,hs)}function S4(t){return ZE(Rh("",null,null,null,[""],t=QE(t),0,[0],t))}function Rh(t,e,n,s,a,l,o,c,d){for(var m=0,u=0,p=o,h=0,g=0,x=0,v=1,y=1,b=1,k=0,w="",S=a,j=l,T=s,N=w;y;)switch(x=k,k=Cs()){case 40:if(x!=108&&wi(N,p-1)==58){Lx(N+=fn(Dh(k),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:N+=Dh(k);break;case 9:case 10:case 13:case 32:N+=k4(x);break;case 92:N+=j4(Ah()-1,7);continue;case 47:switch(La()){case 42:case 47:Mu(_4(N4(Cs(),Ah()),e,n),d);break;default:N+="/"}break;case 123*v:c[m++]=Ra(N)*b;case 125*v:case 59:case 0:switch(k){case 0:case 125:y=0;case 59+u:b==-1&&(N=fn(N,/\f/g,"")),g>0&&Ra(N)-p&&Mu(g>32?Gj(N+";",s,n,p-1):Gj(fn(N," ","")+";",s,n,p-2),d);break;case 59:N+=";";default:if(Mu(T=Kj(N,e,n,m,u,a,c,w,S=[],j=[],p),l),k===123)if(u===0)Rh(N,e,T,T,S,l,p,c,j);else switch(h===99&&wi(N,3)===110?100:h){case 100:case 108:case 109:case 115:Rh(t,T,T,s&&Mu(Kj(t,T,T,0,0,a,c,w,a,S=[],p),j),a,j,p,c,s?S:j);break;default:Rh(N,T,T,T,[""],j,0,c,j)}}m=u=g=0,v=b=1,w=N="",p=o;break;case 58:p=1+Ra(N),g=x;default:if(v<1){if(k==123)--v;else if(k==125&&v++==0&&w4()==125)continue}switch(N+=Sg(k),k*v){case 38:b=u>0?1:(N+="\f",-1);break;case 44:c[m++]=(Ra(N)-1)*b,b=1;break;case 64:La()===45&&(N+=Dh(Cs())),h=La(),u=p=Ra(w=N+=C4(Ah())),k++;break;case 45:x===45&&Ra(N)==2&&(v=0)}}return l}function Kj(t,e,n,s,a,l,o,c,d,m,u){for(var p=a-1,h=a===0?l:[""],g=Hb(h),x=0,v=0,y=0;x<s;++x)for(var b=0,k=fm(t,p+1,p=g4(v=o[x])),w=t;b<g;++b)(w=GE(v>0?h[b]+" "+k:fn(k,/&\f/g,h[b])))&&(d[y++]=w);return Eg(t,e,n,a===0?Bb:c,d,m,u)}function _4(t,e,n){return Eg(t,e,n,WE,Sg(b4()),fm(t,2,-2),0)}function Gj(t,e,n,s){return Eg(t,e,n,qb,fm(t,0,s),fm(t,s+1,-1),s)}function dc(t,e){for(var n="",s=Hb(t),a=0;a<s;a++)n+=e(t[a],a,t,e)||"";return n}function E4(t,e,n,s){switch(t.type){case p4:if(t.children.length)break;case h4:case qb:return t.return=t.return||t.value;case WE:return"";case KE:return t.return=t.value+"{"+dc(t.children,s)+"}";case Bb:t.value=t.props.join(",")}return Ra(n=dc(t.children,s))?t.return=t.value+"{"+n+"}":""}function T4(t){var e=Hb(t);return function(n,s,a,l){for(var o="",c=0;c<e;c++)o+=t[c](n,s,a,l)||"";return o}}function A4(t){return function(e){e.root||(e=e.return)&&t(e)}}function D4(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var R4=function(e,n,s){for(var a=0,l=0;a=l,l=La(),a===38&&l===12&&(n[s]=1),!vm(l);)Cs();return Gm(e,hs)},P4=function(e,n){var s=-1,a=44;do switch(vm(a)){case 0:a===38&&La()===12&&(n[s]=1),e[s]+=R4(hs-1,n,s);break;case 2:e[s]+=Dh(a);break;case 4:if(a===44){e[++s]=La()===58?"&\f":"",n[s]=e[s].length;break}default:e[s]+=Sg(a)}while(a=Cs());return e},M4=function(e,n){return ZE(P4(QE(e),n))},Yj=new WeakMap,I4=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,s=e.parent,a=e.column===s.column&&e.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Yj.get(s))&&!a){Yj.set(e,!0);for(var l=[],o=M4(n,l),c=s.props,d=0,m=0;d<o.length;d++)for(var u=0;u<c.length;u++,m++)e.props[m]=l[d]?o[d].replace(/&\f/g,c[u]):c[u]+" "+o[d]}}},O4=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function XE(t,e){switch(v4(t,e)){case 5103:return pn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return pn+t+sp+t+Ai+t+t;case 6828:case 4268:return pn+t+Ai+t+t;case 6165:return pn+t+Ai+"flex-"+t+t;case 5187:return pn+t+fn(t,/(\w+).+(:[^]+)/,pn+"box-$1$2"+Ai+"flex-$1$2")+t;case 5443:return pn+t+Ai+"flex-item-"+fn(t,/flex-|-self/,"")+t;case 4675:return pn+t+Ai+"flex-line-pack"+fn(t,/align-content|flex-|-self/,"")+t;case 5548:return pn+t+Ai+fn(t,"shrink","negative")+t;case 5292:return pn+t+Ai+fn(t,"basis","preferred-size")+t;case 6060:return pn+"box-"+fn(t,"-grow","")+pn+t+Ai+fn(t,"grow","positive")+t;case 4554:return pn+fn(t,/([^-])(transform)/g,"$1"+pn+"$2")+t;case 6187:return fn(fn(fn(t,/(zoom-|grab)/,pn+"$1"),/(image-set)/,pn+"$1"),t,"")+t;case 5495:case 3959:return fn(t,/(image-set\([^]*)/,pn+"$1$`$1");case 4968:return fn(fn(t,/(.+:)(flex-)?(.*)/,pn+"box-pack:$3"+Ai+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pn+t+t;case 4095:case 3583:case 4068:case 2532:return fn(t,/(.+)-inline(.+)/,pn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ra(t)-1-e>6)switch(wi(t,e+1)){case 109:if(wi(t,e+4)!==45)break;case 102:return fn(t,/(.+:)(.+)-([^]+)/,"$1"+pn+"$2-$3$1"+sp+(wi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Lx(t,"stretch")?XE(fn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(wi(t,e+1)!==115)break;case 6444:switch(wi(t,Ra(t)-3-(~Lx(t,"!important")&&10))){case 107:return fn(t,":",":"+pn)+t;case 101:return fn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pn+(wi(t,14)===45?"inline-":"")+"box$3$1"+pn+"$2$3$1"+Ai+"$2box$3")+t}break;case 5936:switch(wi(t,e+11)){case 114:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return pn+t+Ai+t+t}return t}var F4=function(e,n,s,a){if(e.length>-1&&!e.return)switch(e.type){case qb:e.return=XE(e.value,e.length);break;case KE:return dc([kd(e,{value:fn(e.value,"@","@"+pn)})],a);case Bb:if(e.length)return y4(e.props,function(l){switch(x4(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return dc([kd(e,{props:[fn(l,/:(read-\w+)/,":"+sp+"$1")]})],a);case"::placeholder":return dc([kd(e,{props:[fn(l,/:(plac\w+)/,":"+pn+"input-$1")]}),kd(e,{props:[fn(l,/:(plac\w+)/,":"+sp+"$1")]}),kd(e,{props:[fn(l,/:(plac\w+)/,Ai+"input-$1")]})],a)}return""})}},L4=[F4],$4=function(e){var n=e.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var a=e.stylisPlugins||L4,l={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)l[y[b]]=!0;c.push(v)});var d,m=[I4,O4];{var u,p=[E4,A4(function(v){u.insert(v)})],h=T4(m.concat(a,p)),g=function(y){return dc(S4(y),h)};d=function(y,b,k,w){u=k,g(y?y+"{"+b.styles+"}":b.styles),w&&(x.inserted[b.name]=!0)}}var x={key:n,sheet:new u4({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:d};return x.sheet.hydrate(c),x},Yf={exports:{}},yn={};var Qj;function B4(){if(Qj)return yn;Qj=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,l=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,k=t?Symbol.for("react.scope"):60119;function w(j){if(typeof j=="object"&&j!==null){var T=j.$$typeof;switch(T){case e:switch(j=j.type,j){case d:case m:case s:case l:case a:case p:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case x:case g:case o:return j;default:return T}}case n:return T}}}function S(j){return w(j)===m}return yn.AsyncMode=d,yn.ConcurrentMode=m,yn.ContextConsumer=c,yn.ContextProvider=o,yn.Element=e,yn.ForwardRef=u,yn.Fragment=s,yn.Lazy=x,yn.Memo=g,yn.Portal=n,yn.Profiler=l,yn.StrictMode=a,yn.Suspense=p,yn.isAsyncMode=function(j){return S(j)||w(j)===d},yn.isConcurrentMode=S,yn.isContextConsumer=function(j){return w(j)===c},yn.isContextProvider=function(j){return w(j)===o},yn.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},yn.isForwardRef=function(j){return w(j)===u},yn.isFragment=function(j){return w(j)===s},yn.isLazy=function(j){return w(j)===x},yn.isMemo=function(j){return w(j)===g},yn.isPortal=function(j){return w(j)===n},yn.isProfiler=function(j){return w(j)===l},yn.isStrictMode=function(j){return w(j)===a},yn.isSuspense=function(j){return w(j)===p},yn.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===s||j===m||j===l||j===a||j===p||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===x||j.$$typeof===g||j.$$typeof===o||j.$$typeof===c||j.$$typeof===u||j.$$typeof===y||j.$$typeof===b||j.$$typeof===k||j.$$typeof===v)},yn.typeOf=w,yn}var Zj;function q4(){return Zj||(Zj=1,Yf.exports=B4()),Yf.exports}var Qf,Xj;function H4(){if(Xj)return Qf;Xj=1;var t=q4(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[t.ForwardRef]=s,l[t.Memo]=a;function o(x){return t.isMemo(x)?a:l[x.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;function g(x,v,y){if(typeof v!="string"){if(h){var b=p(v);b&&b!==h&&g(x,b,y)}var k=d(v);m&&(k=k.concat(m(v)));for(var w=o(x),S=o(v),j=0;j<k.length;++j){var T=k[j];if(!n[T]&&!(y&&y[T])&&!(S&&S[T])&&!(w&&w[T])){var N=u(v,T);try{c(x,T,N)}catch{}}}}return x}return Qf=g,Qf}H4();var z4=!0;function V4(t,e,n){var s="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(s+=a+" ")}),s}var JE=function(e,n,s){var a=e.key+"-"+n.name;(s===!1||z4===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},U4=function(e,n,s){JE(e,n,s);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var l=n;do e.insert(n===l?"."+a:"",l,e.sheet,!0),l=l.next;while(l!==void 0)}};function W4(t){for(var e=0,n,s=0,a=t.length;a>=4;++s,a-=4)n=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(s+2)&255)<<16;case 2:e^=(t.charCodeAt(s+1)&255)<<8;case 1:e^=t.charCodeAt(s)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var K4={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},G4=/[A-Z]|^ms/g,Y4=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e2=function(e){return e.charCodeAt(1)===45},Jj=function(e){return e!=null&&typeof e!="boolean"},Zf=D4(function(t){return e2(t)?t:t.replace(G4,"-$&").toLowerCase()}),e0=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Y4,function(s,a,l){return Pa={name:a,styles:l,next:Pa},a})}return K4[e]!==1&&!e2(e)&&typeof n=="number"&&n!==0?n+"px":n};function xm(t,e,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return Pa={name:a.name,styles:a.styles,next:Pa},a.name;var l=n;if(l.styles!==void 0){var o=l.next;if(o!==void 0)for(;o!==void 0;)Pa={name:o.name,styles:o.styles,next:Pa},o=o.next;var c=l.styles+";";return c}return Q4(t,e,n)}case"function":{if(t!==void 0){var d=Pa,m=n(t);return Pa=d,xm(t,e,m)}break}}var u=n;return u}function Q4(t,e,n){var s="";if(Array.isArray(n))for(var a=0;a<n.length;a++)s+=xm(t,e,n[a])+";";else for(var l in n){var o=n[l];if(typeof o!="object"){var c=o;Jj(c)&&(s+=Zf(l)+":"+e0(l,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var d=0;d<o.length;d++)Jj(o[d])&&(s+=Zf(l)+":"+e0(l,o[d])+";");else{var m=xm(t,e,o);switch(l){case"animation":case"animationName":{s+=Zf(l)+":"+m+";";break}default:s+=l+"{"+m+"}"}}}return s}var t0=/label:\s*([^\s;{]+)\s*(;|$)/g,Pa;function t2(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";Pa=void 0;var l=t[0];if(l==null||l.raw===void 0)s=!1,a+=xm(n,e,l);else{var o=l;a+=o[0]}for(var c=1;c<t.length;c++)if(a+=xm(n,e,t[c]),s){var d=l;a+=d[c]}t0.lastIndex=0;for(var m="",u;(u=t0.exec(a))!==null;)m+="-"+u[1];var p=W4(a)+m;return{name:p,styles:a,next:Pa}}var Z4=function(e){return e()},X4=cj.useInsertionEffect?cj.useInsertionEffect:!1,J4=X4||Z4,n2=f.createContext(typeof HTMLElement<"u"?$4({key:"css"}):null);n2.Provider;var eF=function(e){return f.forwardRef(function(n,s){var a=f.useContext(n2);return e(n,a,s)})},tF=f.createContext({}),zb={}.hasOwnProperty,Bx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nF=function(e,n){var s={};for(var a in n)zb.call(n,a)&&(s[a]=n[a]);return s[Bx]=e,s},iF=function(e){var n=e.cache,s=e.serialized,a=e.isStringTag;return JE(n,s,a),J4(function(){return U4(n,s,a)}),null},sF=eF(function(t,e,n){var s=t.css;typeof s=="string"&&e.registered[s]!==void 0&&(s=e.registered[s]);var a=t[Bx],l=[s],o="";typeof t.className=="string"?o=V4(e.registered,l,t.className):t.className!=null&&(o=t.className+" ");var c=t2(l,void 0,f.useContext(tF));o+=e.key+"-"+c.name;var d={};for(var m in t)zb.call(t,m)&&m!=="css"&&m!==Bx&&(d[m]=t[m]);return d.className=o,n&&(d.ref=n),f.createElement(f.Fragment,null,f.createElement(iF,{cache:e,serialized:c,isStringTag:typeof a=="string"}),f.createElement(a,d))}),aF=sF,It=function(e,n){var s=arguments;if(n==null||!zb.call(n,"css"))return f.createElement.apply(void 0,s);var a=s.length,l=new Array(a);l[0]=aF,l[1]=nF(e,n);for(var o=2;o<a;o++)l[o]=s[o];return f.createElement.apply(null,l)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(It||(It={}));function Vb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t2(e)}function rF(){var t=Vb.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function lF(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const oF=Math.min,cF=Math.max,ap=Math.round,Iu=Math.floor,rp=t=>({x:t,y:t});function dF(t){const{x:e,y:n,width:s,height:a}=t;return{width:s,height:a,top:n,left:e,right:e+s,bottom:n+a,x:e,y:n}}function Tg(){return typeof window<"u"}function i2(t){return a2(t)?(t.nodeName||"").toLowerCase():"#document"}function Er(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function s2(t){var e;return(e=(a2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function a2(t){return Tg()?t instanceof Node||t instanceof Er(t).Node:!1}function mF(t){return Tg()?t instanceof Element||t instanceof Er(t).Element:!1}function Ub(t){return Tg()?t instanceof HTMLElement||t instanceof Er(t).HTMLElement:!1}function n0(t){return!Tg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Er(t).ShadowRoot}const uF=new Set(["inline","contents"]);function r2(t){const{overflow:e,overflowX:n,overflowY:s,display:a}=Wb(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!uF.has(a)}function hF(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pF=new Set(["html","body","#document"]);function gF(t){return pF.has(i2(t))}function Wb(t){return Er(t).getComputedStyle(t)}function fF(t){if(i2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n0(t)&&t.host||s2(t);return n0(e)?e.host:e}function l2(t){const e=fF(t);return gF(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ub(e)&&r2(e)?e:l2(e)}function lp(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=l2(t),l=a===((s=t.ownerDocument)==null?void 0:s.body),o=Er(a);if(l){const c=qx(o);return e.concat(o,o.visualViewport||[],r2(a)?a:[],c&&n?lp(c):[])}return e.concat(a,lp(a,[],n))}function qx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vF(t){const e=Wb(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=Ub(t),l=a?t.offsetWidth:n,o=a?t.offsetHeight:s,c=ap(n)!==l||ap(s)!==o;return c&&(n=l,s=o),{width:n,height:s,$:c}}function Kb(t){return mF(t)?t:t.contextElement}function i0(t){const e=Kb(t);if(!Ub(e))return rp(1);const n=e.getBoundingClientRect(),{width:s,height:a,$:l}=vF(e);let o=(l?ap(n.width):n.width)/s,c=(l?ap(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const xF=rp(0);function yF(t){const e=Er(t);return!hF()||!e.visualViewport?xF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bF(t,e,n){return!1}function s0(t,e,n,s){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),l=Kb(t);let o=rp(1);e&&(o=i0(t));const c=bF()?yF(l):rp(0);let d=(a.left+c.x)/o.x,m=(a.top+c.y)/o.y,u=a.width/o.x,p=a.height/o.y;if(l){const h=Er(l),g=s;let x=h,v=qx(x);for(;v&&s&&g!==x;){const y=i0(v),b=v.getBoundingClientRect(),k=Wb(v),w=b.left+(v.clientLeft+parseFloat(k.paddingLeft))*y.x,S=b.top+(v.clientTop+parseFloat(k.paddingTop))*y.y;d*=y.x,m*=y.y,u*=y.x,p*=y.y,d+=w,m+=S,x=Er(v),v=qx(x)}}return dF({width:u,height:p,x:d,y:m})}function o2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wF(t,e){let n=null,s;const a=s2(t);function l(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),l();const m=t.getBoundingClientRect(),{left:u,top:p,width:h,height:g}=m;if(c||e(),!h||!g)return;const x=Iu(p),v=Iu(a.clientWidth-(u+h)),y=Iu(a.clientHeight-(p+g)),b=Iu(u),w={rootMargin:-x+"px "+-v+"px "+-y+"px "+-b+"px",threshold:cF(0,oF(1,d))||1};let S=!0;function j(T){const N=T[0].intersectionRatio;if(N!==d){if(!S)return o();N?o(!1,N):s=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!o2(m,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,w)}n.observe(t)}return o(!0),l}function kF(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,m=Kb(t),u=a||l?[...m?lp(m):[],...lp(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",n,{passive:!0}),l&&b.addEventListener("resize",n)});const p=m&&c?wF(m,n):null;let h=-1,g=null;o&&(g=new ResizeObserver(b=>{let[k]=b;k&&k.target===m&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),n()}),m&&!d&&g.observe(m),g.observe(e));let x,v=d?s0(t):null;d&&y();function y(){const b=s0(t);v&&!o2(v,b)&&n(),v=b,x=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(k=>{a&&k.removeEventListener("scroll",n),l&&k.removeEventListener("resize",n)}),p?.(),(b=g)==null||b.disconnect(),g=null,d&&cancelAnimationFrame(x)}}var op=f.useLayoutEffect,jF=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],cp=function(){};function NF(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function CF(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];var l=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&l.push("".concat(NF(t,o)));return l.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var dp=function(e){return MF(e)?e.filter(Boolean):io(e)==="object"&&e!==null?[e]:[]},c2=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=ba(e,jF);return Ft({},n)},Qn=function(e,n,s){var a=e.cx,l=e.getStyles,o=e.getClassNames,c=e.className;return{css:l(n,e),className:a(s??{},o(n,e),c)}};function Ag(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function SF(t){return Ag(t)?window.innerHeight:t.clientHeight}function d2(t){return Ag(t)?window.pageYOffset:t.scrollTop}function mp(t,e){if(Ag(t)){window.scrollTo(0,e);return}t.scrollTop=e}function _F(t){var e=getComputedStyle(t),n=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(n&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function EF(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e}function Ou(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cp,a=d2(t),l=e-a,o=10,c=0;function d(){c+=o;var m=EF(c,a,l,n);mp(t,m),c<n?window.requestAnimationFrame(d):s(t)}d()}function a0(t,e){var n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=e.offsetHeight/3;s.bottom+a>n.bottom?mp(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):s.top-a<n.top&&mp(t,Math.max(e.offsetTop-a,0))}function TF(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function r0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function AF(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var m2=!1,DF={get passive(){return m2=!0}},Fu=typeof window<"u"?window:{};Fu.addEventListener&&Fu.removeEventListener&&(Fu.addEventListener("p",cp,DF),Fu.removeEventListener("p",cp,!1));var RF=m2;function PF(t){return t!=null}function MF(t){return Array.isArray(t)}function $d(t,e,n){return t?e:n}var IF=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var l=Object.entries(e).filter(function(o){var c=kr(o,1),d=c[0];return!s.includes(d)});return l.reduce(function(o,c){var d=kr(c,2),m=d[0],u=d[1];return o[m]=u,o},{})},OF=["children","innerProps"],FF=["children","innerProps"];function LF(t){var e=t.maxHeight,n=t.menuEl,s=t.minHeight,a=t.placement,l=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,d=_F(n),m={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return m;var u=d.getBoundingClientRect(),p=u.height,h=n.getBoundingClientRect(),g=h.bottom,x=h.height,v=h.top,y=n.offsetParent.getBoundingClientRect(),b=y.top,k=o?window.innerHeight:SF(d),w=d2(d),S=parseInt(getComputedStyle(n).marginBottom,10),j=parseInt(getComputedStyle(n).marginTop,10),T=b-j,N=k-v,_=T+w,A=p-w-v,P=g-k+w+S,E=w+v-j,M=160;switch(a){case"auto":case"bottom":if(N>=x)return{placement:"bottom",maxHeight:e};if(A>=x&&!o)return l&&Ou(d,P,M),{placement:"bottom",maxHeight:e};if(!o&&A>=s||o&&N>=s){l&&Ou(d,P,M);var R=o?N-S:A-S;return{placement:"bottom",maxHeight:R}}if(a==="auto"||o){var O=e,L=o?T:_;return L>=s&&(O=Math.min(L-S-c,e)),{placement:"top",maxHeight:O}}if(a==="bottom")return l&&mp(d,P),{placement:"bottom",maxHeight:e};break;case"top":if(T>=x)return{placement:"top",maxHeight:e};if(_>=x&&!o)return l&&Ou(d,E,M),{placement:"top",maxHeight:e};if(!o&&_>=s||o&&T>=s){var q=e;return(!o&&_>=s||o&&T>=s)&&(q=o?T-j:_-j),l&&Ou(d,E,M),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return m}function $F(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var u2=function(e){return e==="auto"?"bottom":e},BF=function(e,n){var s,a=e.placement,l=e.theme,o=l.borderRadius,c=l.spacing,d=l.colors;return Ft((s={label:"menu"},Ld(s,$F(a),"100%"),Ld(s,"position","absolute"),Ld(s,"width","100%"),Ld(s,"zIndex",1),s),n?{}:{backgroundColor:d.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},h2=f.createContext(null),qF=function(e){var n=e.children,s=e.minMenuHeight,a=e.maxMenuHeight,l=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,m=f.useContext(h2)||{},u=m.setPortalPlacement,p=f.useRef(null),h=f.useState(a),g=kr(h,2),x=g[0],v=g[1],y=f.useState(null),b=kr(y,2),k=b[0],w=b[1],S=d.spacing.controlHeight;return op(function(){var j=p.current;if(j){var T=o==="fixed",N=c&&!T,_=LF({maxHeight:a,menuEl:j,minHeight:s,placement:l,shouldScroll:N,isFixedPosition:T,controlHeight:S});v(_.maxHeight),w(_.placement),u?.(_.placement)}},[a,l,o,c,s,u,S]),n({ref:p,placerProps:Ft(Ft({},e),{},{placement:k||u2(l),maxHeight:x})})},HF=function(e){var n=e.children,s=e.innerRef,a=e.innerProps;return It("div",Ot({},Qn(e,"menu",{menu:!0}),{ref:s},a),n)},zF=HF,VF=function(e,n){var s=e.maxHeight,a=e.theme.spacing.baseUnit;return Ft({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},UF=function(e){var n=e.children,s=e.innerProps,a=e.innerRef,l=e.isMulti;return It("div",Ot({},Qn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":l}),{ref:a},s),n)},p2=function(e,n){var s=e.theme,a=s.spacing.baseUnit,l=s.colors;return Ft({textAlign:"center"},n?{}:{color:l.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},WF=p2,KF=p2,GF=function(e){var n=e.children,s=n===void 0?"No options":n,a=e.innerProps,l=ba(e,OF);return It("div",Ot({},Qn(Ft(Ft({},l),{},{children:s,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),s)},YF=function(e){var n=e.children,s=n===void 0?"Loading...":n,a=e.innerProps,l=ba(e,FF);return It("div",Ot({},Qn(Ft(Ft({},l),{},{children:s,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),s)},QF=function(e){var n=e.rect,s=e.offset,a=e.position;return{left:n.left,position:a,top:s,width:n.width,zIndex:1}},ZF=function(e){var n=e.appendTo,s=e.children,a=e.controlElement,l=e.innerProps,o=e.menuPlacement,c=e.menuPosition,d=f.useRef(null),m=f.useRef(null),u=f.useState(u2(o)),p=kr(u,2),h=p[0],g=p[1],x=f.useMemo(function(){return{setPortalPlacement:g}},[]),v=f.useState(null),y=kr(v,2),b=y[0],k=y[1],w=f.useCallback(function(){if(a){var N=TF(a),_=c==="fixed"?0:window.pageYOffset,A=N[h]+_;(A!==b?.offset||N.left!==b?.rect.left||N.width!==b?.rect.width)&&k({offset:A,rect:N})}},[a,c,h,b?.offset,b?.rect.left,b?.rect.width]);op(function(){w()},[w]);var S=f.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),a&&d.current&&(m.current=kF(a,d.current,w,{elementResize:"ResizeObserver"in window}))},[a,w]);op(function(){S()},[S]);var j=f.useCallback(function(N){d.current=N,S()},[S]);if(!n&&c!=="fixed"||!b)return null;var T=It("div",Ot({ref:j},Qn(Ft(Ft({},e),{},{offset:b.offset,position:c,rect:b.rect}),"menuPortal",{"menu-portal":!0}),l),s);return It(h2.Provider,{value:x},n?Ia.createPortal(T,n):T)},XF=function(e){var n=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},JF=function(e){var n=e.children,s=e.innerProps,a=e.isDisabled,l=e.isRtl;return It("div",Ot({},Qn(e,"container",{"--is-disabled":a,"--is-rtl":l}),s),n)},eL=function(e,n){var s=e.theme.spacing,a=e.isMulti,l=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ft({alignItems:"center",display:a&&l&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},tL=function(e){var n=e.children,s=e.innerProps,a=e.isMulti,l=e.hasValue;return It("div",Ot({},Qn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":l}),s),n)},nL=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},iL=function(e){var n=e.children,s=e.innerProps;return It("div",Ot({},Qn(e,"indicatorsContainer",{indicators:!0}),s),n)},l0,sL=["size"],aL=["innerProps","isRtl","size"],rL={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},g2=function(e){var n=e.size,s=ba(e,sL);return It("svg",Ot({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rL},s))},Gb=function(e){return It(g2,Ot({size:20},e),It("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},f2=function(e){return It(g2,Ot({size:20},e),It("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},v2=function(e,n){var s=e.isFocused,a=e.theme,l=a.spacing.baseUnit,o=a.colors;return Ft({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:s?o.neutral60:o.neutral20,padding:l*2,":hover":{color:s?o.neutral80:o.neutral40}})},lL=v2,oL=function(e){var n=e.children,s=e.innerProps;return It("div",Ot({},Qn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),n||It(f2,null))},cL=v2,dL=function(e){var n=e.children,s=e.innerProps;return It("div",Ot({},Qn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),n||It(Gb,null))},mL=function(e,n){var s=e.isDisabled,a=e.theme,l=a.spacing.baseUnit,o=a.colors;return Ft({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:l*2,marginTop:l*2})},uL=function(e){var n=e.innerProps;return It("span",Ot({},n,Qn(e,"indicatorSeparator",{"indicator-separator":!0})))},hL=rF(l0||(l0=lF([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),pL=function(e,n){var s=e.isFocused,a=e.size,l=e.theme,o=l.colors,c=l.spacing.baseUnit;return Ft({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:s?o.neutral60:o.neutral20,padding:c*2})},Xf=function(e){var n=e.delay,s=e.offset;return It("span",{css:Vb({animation:"".concat(hL," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},gL=function(e){var n=e.innerProps,s=e.isRtl,a=e.size,l=a===void 0?4:a,o=ba(e,aL);return It("div",Ot({},Qn(Ft(Ft({},o),{},{innerProps:n,isRtl:s,size:l}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),It(Xf,{delay:0,offset:s}),It(Xf,{delay:160,offset:!0}),It(Xf,{delay:320,offset:!s}))},fL=function(e,n){var s=e.isDisabled,a=e.isFocused,l=e.theme,o=l.colors,c=l.borderRadius,d=l.spacing;return Ft({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:a?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},vL=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,l=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return It("div",Ot({ref:l},Qn(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":a,"control--menu-is-open":c}),o,{"aria-disabled":s||void 0}),n)},xL=vL,yL=["data"],bL=function(e,n){var s=e.theme.spacing;return n?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},wL=function(e){var n=e.children,s=e.cx,a=e.getStyles,l=e.getClassNames,o=e.Heading,c=e.headingProps,d=e.innerProps,m=e.label,u=e.theme,p=e.selectProps;return It("div",Ot({},Qn(e,"group",{group:!0}),d),It(o,Ot({},c,{selectProps:p,theme:u,getStyles:a,getClassNames:l,cx:s}),m),It("div",null,n))},kL=function(e,n){var s=e.theme,a=s.colors,l=s.spacing;return Ft({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:l.baseUnit*3,paddingRight:l.baseUnit*3,textTransform:"uppercase"})},jL=function(e){var n=c2(e);n.data;var s=ba(n,yL);return It("div",Ot({},Qn(e,"groupHeading",{"group-heading":!0}),s))},NL=wL,CL=["innerRef","isDisabled","isHidden","inputClassName"],SL=function(e,n){var s=e.isDisabled,a=e.value,l=e.theme,o=l.spacing,c=l.colors;return Ft(Ft({visibility:s?"hidden":"visible",transform:a?"translateZ(0)":""},_L),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},x2={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},_L={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ft({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},x2)},EL=function(e){return Ft({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},x2)},TL=function(e){var n=e.cx,s=e.value,a=c2(e),l=a.innerRef,o=a.isDisabled,c=a.isHidden,d=a.inputClassName,m=ba(a,CL);return It("div",Ot({},Qn(e,"input",{"input-container":!0}),{"data-value":s||""}),It("input",Ot({className:n({input:!0},d),ref:l,style:EL(c),disabled:o},m)))},AL=TL,DL=function(e,n){var s=e.theme,a=s.spacing,l=s.borderRadius,o=s.colors;return Ft({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:l/2,margin:a.baseUnit/2})},RL=function(e,n){var s=e.theme,a=s.borderRadius,l=s.colors,o=e.cropWithEllipsis;return Ft({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:l.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},PL=function(e,n){var s=e.theme,a=s.spacing,l=s.borderRadius,o=s.colors,c=e.isFocused;return Ft({alignItems:"center",display:"flex"},n?{}:{borderRadius:l/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},y2=function(e){var n=e.children,s=e.innerProps;return It("div",s,n)},ML=y2,IL=y2;function OL(t){var e=t.children,n=t.innerProps;return It("div",Ot({role:"button"},n),e||It(Gb,{size:14}))}var FL=function(e){var n=e.children,s=e.components,a=e.data,l=e.innerProps,o=e.isDisabled,c=e.removeProps,d=e.selectProps,m=s.Container,u=s.Label,p=s.Remove;return It(m,{data:a,innerProps:Ft(Ft({},Qn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),l),selectProps:d},It(u,{data:a,innerProps:Ft({},Qn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},n),It(p,{data:a,innerProps:Ft(Ft({},Qn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},c),selectProps:d}))},LL=FL,$L=function(e,n){var s=e.isDisabled,a=e.isFocused,l=e.isSelected,o=e.theme,c=o.spacing,d=o.colors;return Ft({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:l?d.primary:a?d.primary25:"transparent",color:s?d.neutral20:l?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:l?d.primary:d.primary50}})},BL=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,l=e.isSelected,o=e.innerRef,c=e.innerProps;return It("div",Ot({},Qn(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":a,"option--is-selected":l}),{ref:o,"aria-disabled":s},c),n)},qL=BL,HL=function(e,n){var s=e.theme,a=s.spacing,l=s.colors;return Ft({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:l.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},zL=function(e){var n=e.children,s=e.innerProps;return It("div",Ot({},Qn(e,"placeholder",{placeholder:!0}),s),n)},VL=zL,UL=function(e,n){var s=e.isDisabled,a=e.theme,l=a.spacing,o=a.colors;return Ft({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:s?o.neutral40:o.neutral80,marginLeft:l.baseUnit/2,marginRight:l.baseUnit/2})},WL=function(e){var n=e.children,s=e.isDisabled,a=e.innerProps;return It("div",Ot({},Qn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),a),n)},KL=WL,b2={ClearIndicator:dL,Control:xL,DropdownIndicator:oL,DownChevron:f2,CrossIcon:Gb,Group:NL,GroupHeading:jL,IndicatorsContainer:iL,IndicatorSeparator:uL,Input:AL,LoadingIndicator:gL,Menu:zF,MenuList:UF,MenuPortal:ZF,LoadingMessage:YF,NoOptionsMessage:GF,MultiValue:LL,MultiValueContainer:ML,MultiValueLabel:IL,MultiValueRemove:OL,Option:qL,Placeholder:VL,SelectContainer:JF,SingleValue:KL,ValueContainer:tL},GL=function(e){return Ft(Ft({},b2),e.components)},o0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function YL(t,e){return!!(t===e||o0(t)&&o0(e))}function QL(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!YL(t[n],e[n]))return!1;return!0}function ZL(t,e){e===void 0&&(e=QL);var n=null;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){n=null},s}var XL={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},JL=function(e){return It("span",Ot({css:XL},e))},c0=JL,e6={guidance:function(e){var n=e.isSearchable,s=e.isMulti,a=e.tabSelectsValue,l=e.context,o=e.isInitialFocus;switch(l){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,s=e.label,a=s===void 0?"":s,l=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(l.length>1?"s":""," ").concat(l.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var n=e.context,s=e.focused,a=e.options,l=e.label,o=l===void 0?"":l,c=e.selectValue,d=e.isDisabled,m=e.isSelected,u=e.isAppleDevice,p=function(v,y){return v&&v.length?"".concat(v.indexOf(y)+1," of ").concat(v.length):""};if(n==="value"&&c)return"value ".concat(o," focused, ").concat(p(c,s),".");if(n==="menu"&&u){var h=d?" disabled":"",g="".concat(m?" selected":"").concat(h);return"".concat(o).concat(g,", ").concat(p(a,s),".")}return""},onFilter:function(e){var n=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(n?" for search term "+n:"",".")}},t6=function(e){var n=e.ariaSelection,s=e.focusedOption,a=e.focusedValue,l=e.focusableOptions,o=e.isFocused,c=e.selectValue,d=e.selectProps,m=e.id,u=e.isAppleDevice,p=d.ariaLiveMessages,h=d.getOptionLabel,g=d.inputValue,x=d.isMulti,v=d.isOptionDisabled,y=d.isSearchable,b=d.menuIsOpen,k=d.options,w=d.screenReaderStatus,S=d.tabSelectsValue,j=d.isLoading,T=d["aria-label"],N=d["aria-live"],_=f.useMemo(function(){return Ft(Ft({},e6),p||{})},[p]),A=f.useMemo(function(){var L="";if(n&&_.onChange){var q=n.option,Q=n.options,V=n.removedValue,se=n.removedValues,G=n.value,ge=function(I){return Array.isArray(I)?null:I},ie=V||q||ge(G),W=ie?h(ie):"",X=Q||se||void 0,J=X?X.map(h):[],ue=Ft({isDisabled:ie&&v(ie,c),label:W,labels:J},n);L=_.onChange(ue)}return L},[n,_,v,c,h]),P=f.useMemo(function(){var L="",q=s||a,Q=!!(s&&c&&c.includes(s));if(q&&_.onFocus){var V={focused:q,label:h(q),isDisabled:v(q,c),isSelected:Q,options:l,context:q===s?"menu":"value",selectValue:c,isAppleDevice:u};L=_.onFocus(V)}return L},[s,a,h,v,_,l,c,u]),E=f.useMemo(function(){var L="";if(b&&k.length&&!j&&_.onFilter){var q=w({count:l.length});L=_.onFilter({inputValue:g,resultsMessage:q})}return L},[l,g,b,_,k,w,j]),M=n?.action==="initial-input-focus",R=f.useMemo(function(){var L="";if(_.guidance){var q=a?"value":b?"menu":"input";L=_.guidance({"aria-label":T,context:q,isDisabled:s&&v(s,c),isMulti:x,isSearchable:y,tabSelectsValue:S,isInitialFocus:M})}return L},[T,s,a,x,v,y,b,_,c,S,M]),O=It(f.Fragment,null,It("span",{id:"aria-selection"},A),It("span",{id:"aria-focused"},P),It("span",{id:"aria-results"},E),It("span",{id:"aria-guidance"},R));return It(f.Fragment,null,It(c0,{id:m},M&&O),It(c0,{"aria-live":N,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!M&&O))},n6=t6,Hx=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],i6=new RegExp("["+Hx.map(function(t){return t.letters}).join("")+"]","g"),w2={};for(var Jf=0;Jf<Hx.length;Jf++)for(var ev=Hx[Jf],tv=0;tv<ev.letters.length;tv++)w2[ev.letters[tv]]=ev.base;var k2=function(e){return e.replace(i6,function(n){return w2[n]})},s6=ZL(k2),d0=function(e){return e.replace(/^\s+|\s+$/g,"")},a6=function(e){return"".concat(e.label," ").concat(e.value)},r6=function(e){return function(n,s){if(n.data.__isNew__)return!0;var a=Ft({ignoreCase:!0,ignoreAccents:!0,stringify:a6,trim:!0,matchFrom:"any"},e),l=a.ignoreCase,o=a.ignoreAccents,c=a.stringify,d=a.trim,m=a.matchFrom,u=d?d0(s):s,p=d?d0(c(n)):c(n);return l&&(u=u.toLowerCase(),p=p.toLowerCase()),o&&(u=s6(u),p=k2(p)),m==="start"?p.substr(0,u.length)===u:p.indexOf(u)>-1}},l6=["innerRef"];function o6(t){var e=t.innerRef,n=ba(t,l6),s=IF(n,"onExited","in","enter","exit","appear");return It("input",Ot({ref:e},s,{css:Vb({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var c6=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function d6(t){var e=t.isEnabled,n=t.onBottomArrive,s=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,o=f.useRef(!1),c=f.useRef(!1),d=f.useRef(0),m=f.useRef(null),u=f.useCallback(function(y,b){if(m.current!==null){var k=m.current,w=k.scrollTop,S=k.scrollHeight,j=k.clientHeight,T=m.current,N=b>0,_=S-j-w,A=!1;_>b&&o.current&&(s&&s(y),o.current=!1),N&&c.current&&(l&&l(y),c.current=!1),N&&b>_?(n&&!o.current&&n(y),T.scrollTop=S,A=!0,o.current=!0):!N&&-b>w&&(a&&!c.current&&a(y),T.scrollTop=0,A=!0,c.current=!0),A&&c6(y)}},[n,s,a,l]),p=f.useCallback(function(y){u(y,y.deltaY)},[u]),h=f.useCallback(function(y){d.current=y.changedTouches[0].clientY},[]),g=f.useCallback(function(y){var b=d.current-y.changedTouches[0].clientY;u(y,b)},[u]),x=f.useCallback(function(y){if(y){var b=RF?{passive:!1}:!1;y.addEventListener("wheel",p,b),y.addEventListener("touchstart",h,b),y.addEventListener("touchmove",g,b)}},[g,h,p]),v=f.useCallback(function(y){y&&(y.removeEventListener("wheel",p,!1),y.removeEventListener("touchstart",h,!1),y.removeEventListener("touchmove",g,!1))},[g,h,p]);return f.useEffect(function(){if(e){var y=m.current;return x(y),function(){v(y)}}},[e,x,v]),function(y){m.current=y}}var m0=["boxSizing","height","overflow","paddingRight","position"],u0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function h0(t){t.cancelable&&t.preventDefault()}function p0(t){t.stopPropagation()}function g0(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function f0(){return"ontouchstart"in window||navigator.maxTouchPoints}var v0=!!(typeof window<"u"&&window.document&&window.document.createElement),jd=0,Uo={capture:!1,passive:!1};function m6(t){var e=t.isEnabled,n=t.accountForScrollbars,s=n===void 0?!0:n,a=f.useRef({}),l=f.useRef(null),o=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;if(s&&m0.forEach(function(x){var v=u&&u[x];a.current[x]=v}),s&&jd<1){var p=parseInt(a.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,g=window.innerWidth-h+p||0;Object.keys(u0).forEach(function(x){var v=u0[x];u&&(u[x]=v)}),u&&(u.paddingRight="".concat(g,"px"))}m&&f0()&&(m.addEventListener("touchmove",h0,Uo),d&&(d.addEventListener("touchstart",g0,Uo),d.addEventListener("touchmove",p0,Uo))),jd+=1}},[s]),c=f.useCallback(function(d){if(v0){var m=document.body,u=m&&m.style;jd=Math.max(jd-1,0),s&&jd<1&&m0.forEach(function(p){var h=a.current[p];u&&(u[p]=h)}),m&&f0()&&(m.removeEventListener("touchmove",h0,Uo),d&&(d.removeEventListener("touchstart",g0,Uo),d.removeEventListener("touchmove",p0,Uo)))}},[s]);return f.useEffect(function(){if(e){var d=l.current;return o(d),function(){c(d)}}},[e,o,c]),function(d){l.current=d}}var u6=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},h6={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function p6(t){var e=t.children,n=t.lockEnabled,s=t.captureEnabled,a=s===void 0?!0:s,l=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,m=d6({isEnabled:a,onBottomArrive:l,onBottomLeave:o,onTopArrive:c,onTopLeave:d}),u=m6({isEnabled:n}),p=function(g){m(g),u(g)};return It(f.Fragment,null,n&&It("div",{onClick:u6,css:h6}),e(p))}var g6={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},f6=function(e){var n=e.name,s=e.onFocus;return It("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:g6,value:"",onChange:function(){}})},v6=f6;function Yb(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function x6(){return Yb(/^iPhone/i)}function j2(){return Yb(/^Mac/i)}function y6(){return Yb(/^iPad/i)||j2()&&navigator.maxTouchPoints>1}function b6(){return x6()||y6()}function w6(){return j2()||b6()}var k6=function(e){return e.label},N2=function(e){return e.label},C2=function(e){return e.value},j6=function(e){return!!e.isDisabled},N6={clearIndicator:cL,container:XF,control:fL,dropdownIndicator:lL,group:bL,groupHeading:kL,indicatorsContainer:nL,indicatorSeparator:mL,input:SL,loadingIndicator:pL,loadingMessage:KF,menu:BF,menuList:VF,menuPortal:QF,multiValue:DL,multiValueLabel:RL,multiValueRemove:PL,noOptionsMessage:WF,option:$L,placeholder:HL,singleValue:UL,valueContainer:eL},C6={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},S6=4,S2=4,_6=38,E6=S2*2,T6={baseUnit:S2,controlHeight:_6,menuGutter:E6},nv={borderRadius:S6,colors:C6,spacing:T6},A6={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:r0(),captureMenuScroll:!r0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:r6(),formatGroupLabel:k6,getOptionLabel:N2,getOptionValue:C2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:j6,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!AF(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function x0(t,e,n,s){var a=T2(t,e,n),l=A2(t,e,n),o=E2(t,e),c=up(t,e);return{type:"option",data:e,isDisabled:a,isSelected:l,label:o,value:c,index:s}}function Ph(t,e){return t.options.map(function(n,s){if("options"in n){var a=n.options.map(function(o,c){return x0(t,o,e,c)}).filter(function(o){return b0(t,o)});return a.length>0?{type:"group",data:n,options:a,index:s}:void 0}var l=x0(t,n,e,s);return b0(t,l)?l:void 0}).filter(PF)}function _2(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,cc(n.options.map(function(s){return s.data}))):e.push(n.data),e},[])}function y0(t,e){return t.reduce(function(n,s){return s.type==="group"?n.push.apply(n,cc(s.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(s.index,"-").concat(a.index)}}))):n.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),n},[])}function D6(t,e){return _2(Ph(t,e))}function b0(t,e){var n=t.inputValue,s=n===void 0?"":n,a=e.data,l=e.isSelected,o=e.label,c=e.value;return(!R2(t)||!l)&&D2(t,{label:o,value:c,data:a},s)}function R6(t,e){var n=t.focusedValue,s=t.selectValue,a=s.indexOf(n);if(a>-1){var l=e.indexOf(n);if(l>-1)return n;if(a<e.length)return e[a]}return null}function P6(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var iv=function(e,n){var s,a=(s=e.find(function(l){return l.data===n}))===null||s===void 0?void 0:s.id;return a||null},E2=function(e,n){return e.getOptionLabel(n)},up=function(e,n){return e.getOptionValue(n)};function T2(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function A2(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var s=up(t,e);return n.some(function(a){return up(t,a)===s})}function D2(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var R2=function(e){var n=e.hideSelectedOptions,s=e.isMulti;return n===void 0?s:n},M6=1,Qb=(function(t){zE(n,t);var e=UE(n);function n(s){var a;if(qE(this,n),a=e.call(this,s),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,m){var u=a.props,p=u.onChange,h=u.name;m.name=h,a.ariaOnChange(d,m),p(d,m)},a.setValue=function(d,m,u){var p=a.props,h=p.closeMenuOnSelect,g=p.isMulti,x=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:x}),h&&(a.setState({inputIsHiddenAfterUpdate:!g}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:m,option:u})},a.selectOption=function(d){var m=a.props,u=m.blurInputOnSelect,p=m.isMulti,h=m.name,g=a.state.selectValue,x=p&&a.isOptionSelected(d,g),v=a.isOptionDisabled(d,g);if(x){var y=a.getOptionValue(d);a.setValue(g.filter(function(b){return a.getOptionValue(b)!==y}),"deselect-option",d)}else if(!v)p?a.setValue([].concat(cc(g),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:h});return}u&&a.blurInput()},a.removeValue=function(d){var m=a.props.isMulti,u=a.state.selectValue,p=a.getOptionValue(d),h=u.filter(function(x){return a.getOptionValue(x)!==p}),g=$d(m,h,h[0]||null);a.onChange(g,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange($d(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,m=a.state.selectValue,u=m[m.length-1],p=m.slice(0,m.length-1),h=$d(d,p,p[0]||null);u&&a.onChange(h,{action:"pop-value",removedValue:u})},a.getFocusedOptionId=function(d){return iv(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return y0(Ph(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,m=new Array(d),u=0;u<d;u++)m[u]=arguments[u];return CF.apply(void 0,[a.props.classNamePrefix].concat(m))},a.getOptionLabel=function(d){return E2(a.props,d)},a.getOptionValue=function(d){return up(a.props,d)},a.getStyles=function(d,m){var u=a.props.unstyled,p=N6[d](m,u);p.boxSizing="border-box";var h=a.props.styles[d];return h?h(p,m):p},a.getClassNames=function(d,m){var u,p;return(u=(p=a.props.classNames)[d])===null||u===void 0?void 0:u.call(p,m)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return GL(a.props)},a.buildCategorizedOptions=function(){return Ph(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return _2(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,m){a.setState({ariaSelection:Ft({value:d},m)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var m=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():m&&a.openMenu("first"):(m&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var m=a.props,u=m.isMulti,p=m.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!u}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&Ag(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var m=d.touches,u=m&&m.item(0);u&&(a.initialTouchX=u.clientX,a.initialTouchY=u.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var m=d.touches,u=m&&m.item(0);if(u){var p=Math.abs(u.clientX-a.initialTouchX),h=Math.abs(u.clientY-a.initialTouchY),g=5;a.userIsDragging=p>g||h>g}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var m=a.props.inputValue,u=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(u,{action:"input-change",prevInputValue:m}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var m=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:m}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var m=a.getFocusableOptions(),u=m.indexOf(d);a.setState({focusedOption:d,focusedOptionId:u>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return R2(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var m=a.props,u=m.isMulti,p=m.backspaceRemovesValue,h=m.escapeClearsValue,g=m.inputValue,x=m.isClearable,v=m.isDisabled,y=m.menuIsOpen,b=m.onKeyDown,k=m.tabSelectsValue,w=m.openMenuOnFocus,S=a.state,j=S.focusedOption,T=S.focusedValue,N=S.selectValue;if(!v&&!(typeof b=="function"&&(b(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!u||g)return;a.focusValue("previous");break;case"ArrowRight":if(!u||g)return;a.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(T)a.removeValue(T);else{if(!p)return;u?a.popValue():x&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!y||!k||!j||w&&a.isOptionSelected(j,N))return;a.selectOption(j);break;case"Enter":if(d.keyCode===229)break;if(y){if(!j||a.isComposing)return;a.selectOption(j);break}return;case"Escape":y?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:g}),a.onMenuClose()):x&&h&&a.clearValue();break;case" ":if(g)return;if(!y){a.openMenu("first");break}if(!j)return;a.selectOption(j);break;case"ArrowUp":y?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":y?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!y)return;a.focusOption("pageup");break;case"PageDown":if(!y)return;a.focusOption("pagedown");break;case"Home":if(!y)return;a.focusOption("first");break;case"End":if(!y)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++M6),a.state.selectValue=dp(s.value),s.menuIsOpen&&a.state.selectValue.length){var l=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),c=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=l,a.state.focusedOption=o[c],a.state.focusedOptionId=iv(l,o[c])}return a}return HE(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&a0(this.menuListRef,this.focusedOptionRef),w6()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var l=this.props,o=l.isDisabled,c=l.menuIsOpen,d=this.state.isFocused;(d&&!o&&a.isDisabled||d&&c&&!a.menuIsOpen)&&this.focusInput(),d&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(a0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,l){this.props.onInputChange(a,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var l=this,o=this.state,c=o.selectValue,d=o.isFocused,m=this.buildFocusableOptions(),u=a==="first"?0:m.length-1;if(!this.props.isMulti){var p=m.indexOf(c[0]);p>-1&&(u=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[u],focusedOptionId:this.getFocusedOptionId(m[u])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(a){var l=this.state,o=l.selectValue,c=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=o.indexOf(c);c||(d=-1);var m=o.length-1,u=-1;if(o.length){switch(a){case"previous":d===0?u=0:d===-1?u=m:u=d-1;break;case"next":d>-1&&d<m&&(u=d+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,m=c.indexOf(o);o||(m=-1),a==="up"?d=m>0?m-1:c.length-1:a==="down"?d=(m+1)%c.length:a==="pageup"?(d=m-l,d<0&&(d=0)):a==="pagedown"?(d=m+l,d>c.length-1&&(d=c.length-1)):a==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nv):Ft(Ft({},nv),this.props.theme):nv})},{key:"getCommonProps",value:function(){var a=this.clearValue,l=this.cx,o=this.getStyles,c=this.getClassNames,d=this.getValue,m=this.selectOption,u=this.setValue,p=this.props,h=p.isMulti,g=p.isRtl,x=p.options,v=this.hasValue();return{clearValue:a,cx:l,getStyles:o,getClassNames:c,getValue:d,hasValue:v,isMulti:h,isRtl:g,options:x,selectOption:m,selectProps:p,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,l=a.isClearable,o=a.isMulti;return l===void 0?o:l}},{key:"isOptionDisabled",value:function(a,l){return T2(this.props,a,l)}},{key:"isOptionSelected",value:function(a,l){return A2(this.props,a,l)}},{key:"filterOption",value:function(a,l){return D2(this.props,a,l)}},{key:"formatOptionLabel",value:function(a,l){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(a,{context:l,inputValue:o,selectValue:c})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var a=this.props,l=a.isDisabled,o=a.isSearchable,c=a.inputId,d=a.inputValue,m=a.tabIndex,u=a.form,p=a.menuIsOpen,h=a.required,g=this.getComponents(),x=g.Input,v=this.state,y=v.inputIsHidden,b=v.ariaSelection,k=this.commonProps,w=c||this.getElementId("input"),S=Ft(Ft(Ft({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?b?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?f.createElement(x,Ot({},k,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:u,type:"text",value:d},S)):f.createElement(o6,Ot({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:cp,onFocus:this.onInputFocus,disabled:l,tabIndex:m,inputMode:"none",form:u,value:""},S))})},{key:"renderPlaceholderOrValue",value:function(){var a=this,l=this.getComponents(),o=l.MultiValue,c=l.MultiValueContainer,d=l.MultiValueLabel,m=l.MultiValueRemove,u=l.SingleValue,p=l.Placeholder,h=this.commonProps,g=this.props,x=g.controlShouldRenderValue,v=g.isDisabled,y=g.isMulti,b=g.inputValue,k=g.placeholder,w=this.state,S=w.selectValue,j=w.focusedValue,T=w.isFocused;if(!this.hasValue()||!x)return b?null:f.createElement(p,Ot({},h,{key:"placeholder",isDisabled:v,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),k);if(y)return S.map(function(_,A){var P=_===j,E="".concat(a.getOptionLabel(_),"-").concat(a.getOptionValue(_));return f.createElement(o,Ot({},h,{components:{Container:c,Label:d,Remove:m},isFocused:P,isDisabled:v,key:E,index:A,removeProps:{onClick:function(){return a.removeValue(_)},onTouchEnd:function(){return a.removeValue(_)},onMouseDown:function(R){R.preventDefault()}},data:_}),a.formatOptionLabel(_,"value"))});if(b)return null;var N=S[0];return f.createElement(u,Ot({},h,{data:N,isDisabled:v}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),l=a.ClearIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!this.isClearable()||!l||d||!this.hasValue()||m)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(l,Ot({},o,{innerProps:p,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),l=a.LoadingIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!l||!m)return null;var p={"aria-hidden":"true"};return f.createElement(l,Ot({},o,{innerProps:p,isDisabled:d,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),l=a.DropdownIndicator,o=a.IndicatorSeparator;if(!l||!o)return null;var c=this.commonProps,d=this.props.isDisabled,m=this.state.isFocused;return f.createElement(o,Ot({},c,{isDisabled:d,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),l=a.DropdownIndicator;if(!l)return null;var o=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(l,Ot({},o,{innerProps:m,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,l=this.getComponents(),o=l.Group,c=l.GroupHeading,d=l.Menu,m=l.MenuList,u=l.MenuPortal,p=l.LoadingMessage,h=l.NoOptionsMessage,g=l.Option,x=this.commonProps,v=this.state.focusedOption,y=this.props,b=y.captureMenuScroll,k=y.inputValue,w=y.isLoading,S=y.loadingMessage,j=y.minMenuHeight,T=y.maxMenuHeight,N=y.menuIsOpen,_=y.menuPlacement,A=y.menuPosition,P=y.menuPortalTarget,E=y.menuShouldBlockScroll,M=y.menuShouldScrollIntoView,R=y.noOptionsMessage,O=y.onMenuScrollToTop,L=y.onMenuScrollToBottom;if(!N)return null;var q=function(W,X){var J=W.type,ue=W.data,le=W.isDisabled,I=W.isSelected,ee=W.label,K=W.value,ne=v===ue,oe=le?void 0:function(){return a.onOptionHover(ue)},D=le?void 0:function(){return a.selectOption(ue)},$="".concat(a.getElementId("option"),"-").concat(X),te={id:$,onClick:D,onMouseMove:oe,onMouseOver:oe,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:I};return f.createElement(g,Ot({},x,{innerProps:te,data:ue,isDisabled:le,isSelected:I,key:$,label:ee,type:J,value:K,isFocused:ne,innerRef:ne?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(W.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(ie){if(ie.type==="group"){var W=ie.data,X=ie.options,J=ie.index,ue="".concat(a.getElementId("group"),"-").concat(J),le="".concat(ue,"-heading");return f.createElement(o,Ot({},x,{key:ue,data:W,options:X,Heading:c,headingProps:{id:le,data:ie.data},label:a.formatGroupLabel(ie.data)}),ie.options.map(function(I){return q(I,"".concat(J,"-").concat(I.index))}))}else if(ie.type==="option")return q(ie,"".concat(ie.index))});else if(w){var V=S({inputValue:k});if(V===null)return null;Q=f.createElement(p,x,V)}else{var se=R({inputValue:k});if(se===null)return null;Q=f.createElement(h,x,se)}var G={minMenuHeight:j,maxMenuHeight:T,menuPlacement:_,menuPosition:A,menuShouldScrollIntoView:M},ge=f.createElement(qF,Ot({},x,G),function(ie){var W=ie.ref,X=ie.placerProps,J=X.placement,ue=X.maxHeight;return f.createElement(d,Ot({},x,G,{innerRef:W,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:w,placement:J}),f.createElement(p6,{captureEnabled:b,onTopArrive:O,onBottomArrive:L,lockEnabled:E},function(le){return f.createElement(m,Ot({},x,{innerRef:function(ee){a.getMenuListRef(ee),le(ee)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:a.getElementId("listbox")},isLoading:w,maxHeight:ue,focusedOption:v}),Q)}))});return P||A==="fixed"?f.createElement(u,Ot({},x,{appendTo:P,controlElement:this.controlRef,menuPlacement:_,menuPosition:A}),ge):ge}},{key:"renderFormField",value:function(){var a=this,l=this.props,o=l.delimiter,c=l.isDisabled,d=l.isMulti,m=l.name,u=l.required,p=this.state.selectValue;if(u&&!this.hasValue()&&!c)return f.createElement(v6,{name:m,onFocus:this.onValueInputFocus});if(!(!m||c))if(d)if(o){var h=p.map(function(v){return a.getOptionValue(v)}).join(o);return f.createElement("input",{name:m,type:"hidden",value:h})}else{var g=p.length>0?p.map(function(v,y){return f.createElement("input",{key:"i-".concat(y),name:m,type:"hidden",value:a.getOptionValue(v)})}):f.createElement("input",{name:m,type:"hidden",value:""});return f.createElement("div",null,g)}else{var x=p[0]?this.getOptionValue(p[0]):"";return f.createElement("input",{name:m,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,l=this.state,o=l.ariaSelection,c=l.focusedOption,d=l.focusedValue,m=l.isFocused,u=l.selectValue,p=this.getFocusableOptions();return f.createElement(n6,Ot({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:d,isFocused:m,selectValue:u,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),l=a.Control,o=a.IndicatorsContainer,c=a.SelectContainer,d=a.ValueContainer,m=this.props,u=m.className,p=m.id,h=m.isDisabled,g=m.menuIsOpen,x=this.state.isFocused,v=this.commonProps=this.getCommonProps();return f.createElement(c,Ot({},v,{className:u,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:x}),this.renderLiveRegion(),f.createElement(l,Ot({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:x,menuIsOpen:g}),f.createElement(d,Ot({},v,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(o,Ot({},v,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,l){var o=l.prevProps,c=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,m=l.ariaSelection,u=l.isFocused,p=l.prevWasFocused,h=l.instancePrefix,g=a.options,x=a.value,v=a.menuIsOpen,y=a.inputValue,b=a.isMulti,k=dp(x),w={};if(o&&(x!==o.value||g!==o.options||v!==o.menuIsOpen||y!==o.inputValue)){var S=v?D6(a,k):[],j=v?y0(Ph(a,k),"".concat(h,"-option")):[],T=c?R6(l,k):null,N=P6(l,S),_=iv(j,N);w={selectValue:k,focusedOption:N,focusedOptionId:_,focusableOptionsWithIds:j,focusedValue:T,clearFocusValueOnUpdate:!1}}var A=d!=null&&a!==o?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=m,E=u&&p;return u&&!E&&(P={value:$d(b,k,k[0]||null),options:k,action:"initial-input-focus"},E=!p),m?.action==="initial-input-focus"&&(P=null),Ft(Ft(Ft({},w),A),{},{prevProps:a,ariaSelection:P,prevWasFocused:E})}}]),n})(f.Component);Qb.defaultProps=A6;var I6=f.forwardRef(function(t,e){var n=BE(t);return f.createElement(Qb,Ot({ref:e},n))}),ct=I6;const C=({width:t="100%",height:e="1rem",className:n="",style:s={}})=>i.jsx("div",{className:`skeleton-element ${n}`,style:{width:t,height:e,...s},role:"status","aria-label":"Loading content"}),bo=({items:t=["50px","100px","120px"]})=>i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:t.map((e,n)=>i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:e,height:"1rem"})},n))})}),kl=({titleWidth:t="180px",buttonWidth:e=null})=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(C,{width:t,height:"1.5rem"}),e&&i.jsx(C,{width:e,height:"38px",style:{borderRadius:"4px"}})]}),Se=({labelWidth:t="120px",inputHeight:e="38px",hasAction:n=!1})=>i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:`${n?"d-flex justify-content-between":""} mb-2`,children:[i.jsx(C,{width:t,height:"1rem"}),n&&i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx(C,{width:"100%",height:e,style:{borderRadius:"4px"}})]}),Ys=({avatarSize:t="50px",nameWidth:e="120px",detailWidth:n="100px"})=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:t,height:t,style:{borderRadius:"50%"},className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(C,{width:e,height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:n,height:"0.75rem"})]})]}),w0=({labelWidth:t="100px",valueWidth:e="140px"})=>i.jsxs("div",{children:[i.jsx(C,{width:t,height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:e,height:"0.875rem"})]}),st=({width:t="80px",height:e="38px",className:n={}})=>i.jsx(C,{width:t,height:e,style:{borderRadius:"4px"},className:n}),gt=({children:t})=>i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:t})}),Zd=({count:t,colClass:e="col-md-6",children:n})=>i.jsx("div",{className:"row gy-3",children:Array.from({length:t}).map((s,a)=>i.jsx("div",{className:e,children:typeof n=="function"?n(a):n},a))}),P2=({count:t=28})=>i.jsxs("div",{className:"p-3 bg-body rounded slot-scrolling",children:[i.jsx(C,{width:"100px",height:"1.1rem",className:"mx-auto my-3 d-block"}),i.jsx("div",{className:"appointments-slot-select",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"form-check slot-select",children:i.jsx(C,{width:"100%",height:"36px",style:{borderRadius:"4px"}})},n))})]});var O6=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return mE(e,s)})},sv=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return uE(e,s)})},Ci=(function(t){cb(e,t);function e(){for(var s,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=t.call.apply(t,[this].concat(l))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1];s.removeClasses(u,"exit"),s.addClass(u,p?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(c,d)},s.onEntering=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.addClass(u,h,"active"),s.props.onEntering&&s.props.onEntering(c,d)},s.onEntered=function(c,d){var m=s.resolveArguments(c,d),u=m[0],p=m[1],h=p?"appear":"enter";s.removeClasses(u,h),s.addClass(u,h,"done"),s.props.onEntered&&s.props.onEntered(c,d)},s.onExit=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"appear"),s.removeClasses(m,"enter"),s.addClass(m,"exit","base"),s.props.onExit&&s.props.onExit(c)},s.onExiting=function(c){var d=s.resolveArguments(c),m=d[0];s.addClass(m,"exit","active"),s.props.onExiting&&s.props.onExiting(c)},s.onExited=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"exit"),s.addClass(m,"exit","done"),s.props.onExited&&s.props.onExited(c)},s.resolveArguments=function(c,d){return s.props.nodeRef?[s.props.nodeRef.current,c]:[c,d]},s.getClassNames=function(c){var d=s.props.classNames,m=typeof d=="string",u=m&&d?d+"-":"",p=m?""+u+c:d[c],h=m?p+"-active":d[c+"Active"],g=m?p+"-done":d[c+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:g}},s}var n=e.prototype;return n.addClass=function(a,l,o){var c=this.getClassNames(l)[o+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;l==="appear"&&o==="done"&&m&&(c+=" "+m),o==="active"&&a&&m_(a),c&&(this.appliedClasses[l][o]=c,O6(a,c))},n.removeClasses=function(a,l){var o=this.appliedClasses[l],c=o.base,d=o.active,m=o.done;this.appliedClasses[l]={},c&&sv(a,c),d&&sv(a,d),m&&sv(a,m)},n.render=function(){var a=this.props;a.classNames;var l=gg(a,["classNames"]);return ze.createElement(Ya,Ot({},l,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(ze.Component);Ci.defaultProps={classNames:""};Ci.propTypes={};var Lu,$u;function F6(t,e){return!(t===e||ze.isValidElement(t)&&ze.isValidElement(e)&&t.key!=null&&t.key===e.key)}var Rc={out:"out-in",in:"in-out"},hp=function(e,n,s){return function(){var a;e.props[n]&&(a=e.props)[n].apply(a,arguments),s()}},L6=(Lu={},Lu[Rc.out]=function(t){var e=t.current,n=t.changeState;return ze.cloneElement(e,{in:!1,onExited:hp(e,"onExited",function(){n(Mi,null)})})},Lu[Rc.in]=function(t){var e=t.current,n=t.changeState,s=t.children;return[e,ze.cloneElement(s,{in:!0,onEntered:hp(s,"onEntered",function(){n(Mi)})})]},Lu),$6=($u={},$u[Rc.out]=function(t){var e=t.children,n=t.changeState;return ze.cloneElement(e,{in:!0,onEntered:hp(e,"onEntered",function(){n(Ns,ze.cloneElement(e,{in:!0}))})})},$u[Rc.in]=function(t){var e=t.current,n=t.children,s=t.changeState;return[ze.cloneElement(e,{in:!1,onExited:hp(e,"onExited",function(){s(Ns,ze.cloneElement(n,{in:!0}))})}),ze.cloneElement(n,{in:!0})]},$u),Dg=(function(t){cb(e,t);function e(){for(var s,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=t.call.apply(t,[this].concat(l))||this,s.state={status:Ns,current:null},s.appeared=!1,s.changeState=function(c,d){d===void 0&&(d=s.state.current),s.setState({status:c,current:d})},s}var n=e.prototype;return n.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(a,l){return a.children==null?{current:null}:l.status===Mi&&a.mode===Rc.in?{status:Mi}:l.current&&F6(l.current,a.children)?{status:to}:{current:ze.cloneElement(a.children,{in:!0})}},n.render=function(){var a=this.props,l=a.children,o=a.mode,c=this.state,d=c.status,m=c.current,u={children:l,current:m,changeState:this.changeState,status:d},p;switch(d){case Mi:p=$6[o](u);break;case to:p=L6[o](u);break;case Ns:p=m}return ze.createElement(mb.Provider,{value:{isMounting:!this.appeared}},p)},e})(ze.Component);Dg.propTypes={};Dg.defaultProps={mode:Rc.out};const M2=({children:t})=>{const e=dI();return e?i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("Oops!","kivicare")}),i.jsx("p",{className:"fs-3",children:r("Something went wrong.","kivicare")}),i.jsx("p",{className:"lead",children:e?.message||r("An unexpected error occurred.","kivicare")}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:r("Refresh Page","kivicare")})]})}):t},Xd=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("403","kivicare")}),i.jsx("p",{className:"fs-3",children:r("Access Forbidden","kivicare")}),i.jsx("p",{className:"lead",children:r("You don't have permission to access this resource.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:r("Go Home","kivicare")})]})}),zx=()=>i.jsx("div",{className:"container-fluid py-4",children:i.jsxs(gt,{children:[i.jsx(C,{width:"40%",height:"1.5rem",className:"mb-3"}),i.jsx(C,{width:"60%",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"80%",height:"1rem"})]})}),B6=(t,e)=>{if(!t||t.length===0)return!0;const n={administrator:Cr,clinic_admin:Jn,doctor:Li,patient:Yi,receptionist:Xn};return t.some(s=>{const a=n[s];return a?a(e):!1})},Vx=({component:t,props:e={},permissions:n=[],addons:s=[],roles:a=[],module:l=null,meta:o={},...c})=>{const{hasCapability:d,isAddonActive:m,userRole:u,module_config:p,loading:h}=ut(),v=Bm().at?.(-1)?.handle?.skeleton,y=v?typeof v=="function"?v:()=>ze.createElement(v):zx;return h?i.jsx(y,{}):l&&(p[l]??"1")==="0"?i.jsx(pg,{to:"/dashboard",replace:!0}):s.length>0&&!s.every(k=>m(k))?i.jsx(Xd,{message:"Required addons are not active"}):B6(a,u)?n.length>0&&!n.every(k=>d(k))?i.jsx(Xd,{message:"You don't have required permissions"}):i.jsx(M2,{children:i.jsx(t,{...e})}):i.jsx(Xd,{message:"You don't have role access to this page"})},Zhe=t=>i.jsx(M2,{children:t}),Xhe=t=>t.map(e=>{const n=({route:a})=>{const{permissions:l=[],addons:o=[],roles:c=[],module:d=null,meta:m={},skeleton:u=null}=a;return i.jsx(Vx,{component:()=>a.element,permissions:l,addons:o,roles:c,module:d,meta:m,skeleton:u})};if(e.element)return{...e,element:i.jsx(n,{route:e}),children:e.children?mc(e.children):void 0};if(e.component){const a={path:e.path,element:i.jsx(Vx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.exact!==void 0&&{exact:e.exact},...e.index!==void 0&&{index:e.index},handle:e.handle,meta:e.meta};return e.children&&(a.children=mc(e.children)),a}const s={...e};return e.children&&(s.children=mc(e.children)),s}),mc=t=>t.map(e=>{if(e.element){const s={...e,handle:e.handle};return e.children&&(s.children=mc(e.children)),s}if(e.component){const s={path:e.path,element:i.jsx(Vx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.index!==void 0&&{index:e.index},...e.exact!==void 0&&{exact:e.exact},handle:e.handle};return e.children&&(s.children=mc(e.children)),s}const n={...e};return e.children&&(n.children=mc(e.children)),n}),We=({path:t,component:e,title:n,props:s={},exact:a,index:l,children:o,permissions:c=[],addons:d=[],roles:m=[],meta:u={},element:p,module:h=null,skeleton:g=null})=>({path:t,title:n,...p&&{element:p},...e&&{component:e},...s&&Object.keys(s).length>0&&{props:s},...a!==void 0&&{exact:a},...l!==void 0&&{index:l},...o&&{children:o},...c.length>0&&{permissions:c},...d.length>0&&{addons:d},...m.length>0&&{roles:m},...h&&{module:h},skeleton:g,handle:{title:n,meta:u,permissions:c,addons:d,roles:m,skeleton:g,...u}}),Gn=({path:t,title:e,roles:n=[],outlet:s,children:a,permissions:l=[],addons:o=[],meta:c={},module:d=null,skeleton:m=null})=>({path:t,title:e,roles:n,element:i.jsx(s,{}),children:a,permissions:l,addons:o,meta:c,module:d,skeleton:m,handle:{title:e,meta:c,permissions:l,addons:o,roles:n,skeleton:m,...c}}),k0=({showBreadcrumb:t=!0,showInsights:e=!0,showPaymentHistory:n=!0})=>{const s=window.kc_frontend.dashboard_type,a=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),l=["administrator","kiviCare_clinic_admin","kiviCare_receptionist"].includes(s),o=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),c=["administrator","kiviCare_clinic_admin"].includes(s),d=["kiviCare_patient","kiviCare_receptionist","kiviCare_doctor"].includes(s),m=s==="kiviCare_patient",u=["administrator","kiviCare_clinic_admin"].includes(s),p=["kiviCare_doctor","kiviCare_receptionist"].includes(s)?"right":"top",h=s==="kiviCare_doctor"?4:["kiviCare_receptionist","kiviCare_clinic_admin"].includes(s)?5:6;return i.jsxs("div",{className:"container-fluid pb-0",children:[t&&i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"120px",height:"1.75rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[!m&&i.jsx(C,{width:"250px",height:"2.5rem"}),!m&&i.jsx(C,{width:"120px",height:"2.5rem",className:"rounded"})]})]}),e&&!m&&i.jsx("div",{className:`insights-container dashboard-insights-container stash-cards ${"grid-count-"+h} mb-4`,children:Array.from({length:h}).map((g,x)=>i.jsx("div",{className:"card card-block card-stretch card-height",children:i.jsx("div",{className:"card-body",children:p==="right"?i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"text-start",children:[i.jsx(C,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"140px",height:"1rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})})]}):i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle mb-3",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})}),i.jsx(C,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"140px",height:"1rem"})]})})},`insight-${x}`))}),u&&i.jsxs("div",{className:"row my-0 gx-4 mb-4",children:[a&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(C,{width:"180px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,x)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"140px",detailWidth:"100px"})},`appointment-${x}`))})]})}),l&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,x)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[i.jsx("div",{className:"flex-grow-1",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"90px"})}),i.jsx(C,{width:"80px",height:"1rem"})]})},`kiviCare_doctor-${x}`))})]})}),o&&i.jsx("div",{className:"col-xl-4 col-lg-12 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"140px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx(C,{width:"200px",height:"200px",className:"rounded-circle"})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((g,x)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"10px",height:"10px",className:"rounded-circle"}),i.jsx(C,{width:"80px",height:"1rem"})]},`legend-${x}`))})]})]})})]}),n&&c&&i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx(C,{width:"150px",height:"1.25rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:9}).map((g,x)=>i.jsx("th",{className:"py-3",children:i.jsx(C,{width:"90%",height:"1rem"})},`th-${x}`))})}),i.jsx("tbody",{children:Array.from({length:3}).map((g,x)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"})}),Array.from({length:6}).map((v,y)=>i.jsx("td",{className:"py-3",children:i.jsx(C,{width:"90%",height:"1rem"})},`cell-${x}-${y}`)),i.jsx("td",{className:"py-3",children:i.jsx(C,{width:"60px",height:"1.5rem",className:"rounded"})}),i.jsx("td",{className:"py-3",children:i.jsx("div",{className:"d-flex gap-1",children:i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"})})})]},`row-${x}`))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsx(C,{width:"150px",height:"1rem"})]})]}),d&&i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((g,x)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(C,{width:"60px",height:"1rem"})},`day-${x}`))}),Array.from({length:5}).map((g,x)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((v,y)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(C,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(C,{width:"100%",height:"6px",className:"rounded"}),i.jsx(C,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${x}-${y}`))},`week-${x}`))]})]})})})]})};var av=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],uc={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ym={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},is=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},Fs=function(t){return t===!0?1:0};function j0(t,e){var n;return function(){var s=this,a=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(s,a)},e)}}var rv=function(t){return t instanceof Array?t:[t]};function Hi(t,e,n){if(n===!0)return t.classList.add(e);t.classList.remove(e)}function gn(t,e,n){var s=window.document.createElement(t);return e=e||"",n=n||"",s.className=e,n!==void 0&&(s.textContent=n),s}function Bu(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function I2(t,e){if(e(t))return t;if(t.parentNode)return I2(t.parentNode,e)}function qu(t,e){var n=gn("div","numInputWrapper"),s=gn("input","numInput "+t),a=gn("span","arrowUp"),l=gn("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),e!==void 0)for(var o in e)s.setAttribute(o,e[o]);return n.appendChild(s),n.appendChild(a),n.appendChild(l),n}function bs(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var lv=function(){},pp=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},q6={D:lv,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*Fs(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,n){var s=parseInt(e),a=new Date(t.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:lv,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:lv,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Bl={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Jd={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[Jd.w(t,e,n)]},F:function(t,e,n){return pp(Jd.n(t,e,n)-1,!1,e)},G:function(t,e,n){return is(Jd.h(t,e,n))},H:function(t){return is(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[Fs(t.getHours()>11)]},M:function(t,e){return pp(t.getMonth(),!0,e)},S:function(t){return is(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return is(t.getFullYear(),4)},d:function(t){return is(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return is(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return is(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},O2=function(t){var e=t.config,n=e===void 0?uc:e,s=t.l10n,a=s===void 0?ym:s,l=t.isMobile,o=l===void 0?!1:l;return function(c,d,m){var u=m||a;return n.formatDate!==void 0&&!o?n.formatDate(c,d,u):d.split("").map(function(p,h,g){return Jd[p]&&g[h-1]!=="\\"?Jd[p](c,u,n):p!=="\\"?p:""}).join("")}},Ux=function(t){var e=t.config,n=e===void 0?uc:e,s=t.l10n,a=s===void 0?ym:s;return function(l,o,c,d){if(!(l!==0&&!l)){var m=d||a,u,p=l;if(l instanceof Date)u=new Date(l.getTime());else if(typeof l!="string"&&l.toFixed!==void 0)u=new Date(l);else if(typeof l=="string"){var h=o||(n||uc).dateFormat,g=String(l).trim();if(g==="today")u=new Date,c=!0;else if(n&&n.parseDate)u=n.parseDate(l,h);else if(/Z$/.test(g)||/GMT$/.test(g))u=new Date(l);else{for(var x=void 0,v=[],y=0,b=0,k="";y<h.length;y++){var w=h[y],S=w==="\\",j=h[y-1]==="\\"||S;if(Bl[w]&&!j){k+=Bl[w];var T=new RegExp(k).exec(l);T&&(x=!0)&&v[w!=="Y"?"push":"unshift"]({fn:q6[w],val:T[++b]})}else S||(k+=".")}u=!n||!n.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),v.forEach(function(N){var _=N.fn,A=N.val;return u=_(u,A,m)||u}),u=x?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){n.errorHandler(new Error("Invalid date provided: "+p));return}return c===!0&&u.setHours(0,0,0,0),u}}};function ws(t,e,n){return n===void 0&&(n=!0),n!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var H6=function(t,e,n){return t>Math.min(e,n)&&t<Math.max(e,n)},ov=function(t,e,n){return t*3600+e*60+n},z6=function(t){var e=Math.floor(t/3600),n=(t-e*3600)/60;return[e,n,t-e*3600-n*60]},V6={DAY:864e5};function cv(t){var e=t.defaultHour,n=t.defaultMinute,s=t.defaultSeconds;if(t.minDate!==void 0){var a=t.minDate.getHours(),l=t.minDate.getMinutes(),o=t.minDate.getSeconds();e<a&&(e=a),e===a&&n<l&&(n=l),e===a&&n===l&&s<o&&(s=t.minDate.getSeconds())}if(t.maxDate!==void 0){var c=t.maxDate.getHours(),d=t.maxDate.getMinutes();e=Math.min(e,c),e===c&&(n=Math.min(d,n)),e===c&&n===d&&(s=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var s=function(c){c&&Object.keys(c).forEach(function(d){return t[d]=c[d]})},a=0,l=e;a<l.length;a++){var o=l[a];s(o)}return t});var Ri=function(){return Ri=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ri.apply(this,arguments)},N0=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],o=0,c=l.length;o<c;o++,a++)s[a]=l[o];return s},U6=300;function W6(t,e){var n={config:Ri(Ri({},uc),ii.defaultConfig),l10n:ym};n.parseDate=Ux({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=v,n._setHoursFromDate=h,n._positionCalendar=B,n.changeMonth=ge,n.changeYear=le,n.clear=ie,n.close=W,n.onMouseOver=oe,n._createElement=gn,n.createDay=T,n.destroy=X,n.isEnabled=I,n.jumpToDate=k,n.updateValue=xt,n.open=$,n.redraw=xe,n.set=pe,n.setDate=Ge,n.toggle=we;function s(){n.utils={getDaysInMonth:function(z,Z){return z===void 0&&(z=n.currentMonth),Z===void 0&&(Z=n.currentYear),z===1&&(Z%4===0&&Z%100!==0||Z%400===0)?29:n.l10n.daysInMonth[z]}}}function a(){n.element=n.input=t,n.isOpen=!1,ae(),H(),et(),$e(),s(),n.isMobile||j(),b(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&h(n.config.noCalendar?n.latestSelectedDateObj:void 0),xt(!1)),c();var z=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&z&&B(),Ee("onReady")}function l(){var z;return((z=n.calendarContainer)===null||z===void 0?void 0:z.getRootNode()).activeElement||document.activeElement}function o(z){return z.bind(n)}function c(){var z=n.config;z.weekNumbers===!1&&z.showMonths===1||z.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){var Z=(n.days.offsetWidth+1)*z.showMonths;n.daysContainer.style.width=Z+"px",n.calendarContainer.style.width=Z+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function d(z){if(n.selectedDates.length===0){var Z=n.config.minDate===void 0||ws(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),fe=cv(n.config);Z.setHours(fe.hours,fe.minutes,fe.seconds,Z.getMilliseconds()),n.selectedDates=[Z],n.latestSelectedDateObj=Z}z!==void 0&&z.type!=="blur"&&Oe(z);var _e=n._input.value;p(),xt(),n._input.value!==_e&&n._debouncedChange()}function m(z,Z){return z%12+12*Fs(Z===n.l10n.amPM[1])}function u(z){switch(z%24){case 0:case 12:return 12;default:return z%12}}function p(){if(!(n.hourElement===void 0||n.minuteElement===void 0)){var z=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,Z=(parseInt(n.minuteElement.value,10)||0)%60,fe=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(z=m(z,n.amPM.textContent));var _e=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&ws(n.latestSelectedDateObj,n.config.minDate,!0)===0,Ke=n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&ws(n.latestSelectedDateObj,n.config.maxDate,!0)===0;if(n.config.maxTime!==void 0&&n.config.minTime!==void 0&&n.config.minTime>n.config.maxTime){var it=ov(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),at=ov(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),ot=ov(z,Z,fe);if(ot>at&&ot<it){var Nt=z6(it);z=Nt[0],Z=Nt[1],fe=Nt[2]}}else{if(Ke){var dt=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;z=Math.min(z,dt.getHours()),z===dt.getHours()&&(Z=Math.min(Z,dt.getMinutes())),Z===dt.getMinutes()&&(fe=Math.min(fe,dt.getSeconds()))}if(_e){var jt=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;z=Math.max(z,jt.getHours()),z===jt.getHours()&&Z<jt.getMinutes()&&(Z=jt.getMinutes()),Z===jt.getMinutes()&&(fe=Math.max(fe,jt.getSeconds()))}}g(z,Z,fe)}}function h(z){var Z=z||n.latestSelectedDateObj;Z&&Z instanceof Date&&g(Z.getHours(),Z.getMinutes(),Z.getSeconds())}function g(z,Z,fe){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(z%24,Z,fe||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=is(n.config.time_24hr?z:(12+z)%12+12*Fs(z%12===0)),n.minuteElement.value=is(Z),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[Fs(z>=12)]),n.secondElement!==void 0&&(n.secondElement.value=is(fe)))}function x(z){var Z=bs(z),fe=parseInt(Z.value)+(z.delta||0);(fe/1e3>1||z.key==="Enter"&&!/[^\d]/.test(fe.toString()))&&le(fe)}function v(z,Z,fe,_e){if(Z instanceof Array)return Z.forEach(function(Ke){return v(z,Ke,fe,_e)});if(z instanceof Array)return z.forEach(function(Ke){return v(Ke,Z,fe,_e)});z.addEventListener(Z,fe,_e),n._handlers.push({remove:function(){return z.removeEventListener(Z,fe,_e)}})}function y(){Ee("onChange")}function b(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(function(fe){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+fe+"]"),function(_e){return v(_e,"click",n[fe])})}),n.isMobile){qe();return}var z=j0(D,50);if(n._debouncedChange=j0(y,U6),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&v(n.daysContainer,"mouseover",function(fe){n.config.mode==="range"&&oe(bs(fe))}),v(n._input,"keydown",ne),n.calendarContainer!==void 0&&v(n.calendarContainer,"keydown",ne),!n.config.inline&&!n.config.static&&v(window,"resize",z),window.ontouchstart!==void 0?v(window.document,"touchstart",ue):v(window.document,"mousedown",ue),v(window.document,"focus",ue,{capture:!0}),n.config.clickOpens===!0&&(v(n._input,"focus",n.open),v(n._input,"click",n.open)),n.daysContainer!==void 0&&(v(n.monthNav,"click",Ae),v(n.monthNav,["keyup","increment"],x),v(n.daysContainer,"click",me)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){var Z=function(fe){return bs(fe).select()};v(n.timeContainer,["increment"],d),v(n.timeContainer,"blur",d,{capture:!0}),v(n.timeContainer,"click",w),v([n.hourElement,n.minuteElement],["focus","click"],Z),n.secondElement!==void 0&&v(n.secondElement,"focus",function(){return n.secondElement&&n.secondElement.select()}),n.amPM!==void 0&&v(n.amPM,"click",function(fe){d(fe)})}n.config.allowInput&&v(n._input,"blur",K)}function k(z,Z){var fe=z!==void 0?n.parseDate(z):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),_e=n.currentYear,Ke=n.currentMonth;try{fe!==void 0&&(n.currentYear=fe.getFullYear(),n.currentMonth=fe.getMonth())}catch(it){it.message="Invalid date supplied: "+fe,n.config.errorHandler(it)}Z&&n.currentYear!==_e&&(Ee("onYearChange"),R()),Z&&(n.currentYear!==_e||n.currentMonth!==Ke)&&Ee("onMonthChange"),n.redraw()}function w(z){var Z=bs(z);~Z.className.indexOf("arrow")&&S(z,Z.classList.contains("arrowUp")?1:-1)}function S(z,Z,fe){var _e=z&&bs(z),Ke=fe||_e&&_e.parentNode&&_e.parentNode.firstChild,it=Qe("increment");it.delta=Z,Ke&&Ke.dispatchEvent(it)}function j(){var z=window.document.createDocumentFragment();if(n.calendarContainer=gn("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(z.appendChild(q()),n.innerContainer=gn("div","flatpickr-innerContainer"),n.config.weekNumbers){var Z=G(),fe=Z.weekWrapper,_e=Z.weekNumbers;n.innerContainer.appendChild(fe),n.weekNumbers=_e,n.weekWrapper=fe}n.rContainer=gn("div","flatpickr-rContainer"),n.rContainer.appendChild(V()),n.daysContainer||(n.daysContainer=gn("div","flatpickr-days"),n.daysContainer.tabIndex=-1),M(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),z.appendChild(n.innerContainer)}n.config.enableTime&&z.appendChild(Q()),Hi(n.calendarContainer,"rangeMode",n.config.mode==="range"),Hi(n.calendarContainer,"animate",n.config.animate===!0),Hi(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(z);var Ke=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!Ke&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var it=gn("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(it,n.element),it.appendChild(n.element),n.altInput&&it.appendChild(n.altInput),it.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function T(z,Z,fe,_e){var Ke=I(Z,!0),it=gn("span",z,Z.getDate().toString());return it.dateObj=Z,it.$i=_e,it.setAttribute("aria-label",n.formatDate(Z,n.config.ariaDateFormat)),z.indexOf("hidden")===-1&&ws(Z,n.now)===0&&(n.todayDateElem=it,it.classList.add("today"),it.setAttribute("aria-current","date")),Ke?(it.tabIndex=-1,nt(Z)&&(it.classList.add("selected"),n.selectedDateElem=it,n.config.mode==="range"&&(Hi(it,"startRange",n.selectedDates[0]&&ws(Z,n.selectedDates[0],!0)===0),Hi(it,"endRange",n.selectedDates[1]&&ws(Z,n.selectedDates[1],!0)===0),z==="nextMonthDay"&&it.classList.add("inRange")))):it.classList.add("flatpickr-disabled"),n.config.mode==="range"&&Ht(Z)&&!nt(Z)&&it.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&z!=="prevMonthDay"&&_e%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(Z)+"</span>"),Ee("onDayCreate",it),it}function N(z){z.focus(),n.config.mode==="range"&&oe(z)}function _(z){for(var Z=z>0?0:n.config.showMonths-1,fe=z>0?n.config.showMonths:-1,_e=Z;_e!=fe;_e+=z)for(var Ke=n.daysContainer.children[_e],it=z>0?0:Ke.children.length-1,at=z>0?Ke.children.length:-1,ot=it;ot!=at;ot+=z){var Nt=Ke.children[ot];if(Nt.className.indexOf("hidden")===-1&&I(Nt.dateObj))return Nt}}function A(z,Z){for(var fe=z.className.indexOf("Month")===-1?z.dateObj.getMonth():n.currentMonth,_e=Z>0?n.config.showMonths:-1,Ke=Z>0?1:-1,it=fe-n.currentMonth;it!=_e;it+=Ke)for(var at=n.daysContainer.children[it],ot=fe-n.currentMonth===it?z.$i+Z:Z<0?at.children.length-1:0,Nt=at.children.length,dt=ot;dt>=0&&dt<Nt&&dt!=(Z>0?Nt:-1);dt+=Ke){var jt=at.children[dt];if(jt.className.indexOf("hidden")===-1&&I(jt.dateObj)&&Math.abs(z.$i-dt)>=Math.abs(Z))return N(jt)}n.changeMonth(Ke),P(_(Ke),0)}function P(z,Z){var fe=l(),_e=ee(fe||document.body),Ke=z!==void 0?z:_e?fe:n.selectedDateElem!==void 0&&ee(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&ee(n.todayDateElem)?n.todayDateElem:_(Z>0?1:-1);Ke===void 0?n._input.focus():_e?A(Ke,Z):N(Ke)}function E(z,Z){for(var fe=(new Date(z,Z,1).getDay()-n.l10n.firstDayOfWeek+7)%7,_e=n.utils.getDaysInMonth((Z-1+12)%12,z),Ke=n.utils.getDaysInMonth(Z,z),it=window.document.createDocumentFragment(),at=n.config.showMonths>1,ot=at?"prevMonthDay hidden":"prevMonthDay",Nt=at?"nextMonthDay hidden":"nextMonthDay",dt=_e+1-fe,jt=0;dt<=_e;dt++,jt++)it.appendChild(T("flatpickr-day "+ot,new Date(z,Z-1,dt),dt,jt));for(dt=1;dt<=Ke;dt++,jt++)it.appendChild(T("flatpickr-day",new Date(z,Z,dt),dt,jt));for(var Ut=Ke+1;Ut<=42-fe&&(n.config.showMonths===1||jt%7!==0);Ut++,jt++)it.appendChild(T("flatpickr-day "+Nt,new Date(z,Z+1,Ut%Ke),Ut,jt));var be=gn("div","dayContainer");return be.appendChild(it),be}function M(){if(n.daysContainer!==void 0){Bu(n.daysContainer),n.weekNumbers&&Bu(n.weekNumbers);for(var z=document.createDocumentFragment(),Z=0;Z<n.config.showMonths;Z++){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+Z),z.appendChild(E(fe.getFullYear(),fe.getMonth()))}n.daysContainer.appendChild(z),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&oe()}}function R(){if(!(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")){var z=function(_e){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&_e<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&_e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var Z=0;Z<12;Z++)if(z(Z)){var fe=gn("option","flatpickr-monthDropdown-month");fe.value=new Date(n.currentYear,Z).getMonth().toString(),fe.textContent=pp(Z,n.config.shorthandCurrentMonth,n.l10n),fe.tabIndex=-1,n.currentMonth===Z&&(fe.selected=!0),n.monthsDropdownContainer.appendChild(fe)}}}function O(){var z=gn("div","flatpickr-month"),Z=window.document.createDocumentFragment(),fe;n.config.showMonths>1||n.config.monthSelectorType==="static"?fe=gn("span","cur-month"):(n.monthsDropdownContainer=gn("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),v(n.monthsDropdownContainer,"change",function(at){var ot=bs(at),Nt=parseInt(ot.value,10);n.changeMonth(Nt-n.currentMonth),Ee("onMonthChange")}),R(),fe=n.monthsDropdownContainer);var _e=qu("cur-year",{tabindex:"-1"}),Ke=_e.getElementsByTagName("input")[0];Ke.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&Ke.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(Ke.setAttribute("max",n.config.maxDate.getFullYear().toString()),Ke.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var it=gn("div","flatpickr-current-month");return it.appendChild(fe),it.appendChild(_e),Z.appendChild(it),z.appendChild(Z),{container:z,yearElement:Ke,monthElement:fe}}function L(){Bu(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var z=n.config.showMonths;z--;){var Z=O();n.yearElements.push(Z.yearElement),n.monthElements.push(Z.monthElement),n.monthNav.appendChild(Z.container)}n.monthNav.appendChild(n.nextMonthNav)}function q(){return n.monthNav=gn("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=gn("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=gn("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,L(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(z){n.__hidePrevMonthArrow!==z&&(Hi(n.prevMonthNav,"flatpickr-disabled",z),n.__hidePrevMonthArrow=z)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(z){n.__hideNextMonthArrow!==z&&(Hi(n.nextMonthNav,"flatpickr-disabled",z),n.__hideNextMonthArrow=z)}}),n.currentYearElement=n.yearElements[0],Lt(),n.monthNav}function Q(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var z=cv(n.config);n.timeContainer=gn("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var Z=gn("span","flatpickr-time-separator",":"),fe=qu("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=fe.getElementsByTagName("input")[0];var _e=qu("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=_e.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=is(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?z.hours:u(z.hours)),n.minuteElement.value=is(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():z.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(fe),n.timeContainer.appendChild(Z),n.timeContainer.appendChild(_e),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var Ke=qu("flatpickr-second");n.secondElement=Ke.getElementsByTagName("input")[0],n.secondElement.value=is(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():z.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(gn("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(Ke)}return n.config.time_24hr||(n.amPM=gn("span","flatpickr-am-pm",n.l10n.amPM[Fs((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function V(){n.weekdayContainer?Bu(n.weekdayContainer):n.weekdayContainer=gn("div","flatpickr-weekdays");for(var z=n.config.showMonths;z--;){var Z=gn("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(Z)}return se(),n.weekdayContainer}function se(){if(n.weekdayContainer){var z=n.l10n.firstDayOfWeek,Z=N0(n.l10n.weekdays.shorthand);z>0&&z<Z.length&&(Z=N0(Z.splice(z,Z.length),Z.splice(0,z)));for(var fe=n.config.showMonths;fe--;)n.weekdayContainer.children[fe].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Z.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function G(){n.calendarContainer.classList.add("hasWeeks");var z=gn("div","flatpickr-weekwrapper");z.appendChild(gn("span","flatpickr-weekday",n.l10n.weekAbbreviation));var Z=gn("div","flatpickr-weeks");return z.appendChild(Z),{weekWrapper:z,weekNumbers:Z}}function ge(z,Z){Z===void 0&&(Z=!0);var fe=Z?z:z-n.currentMonth;fe<0&&n._hidePrevMonthArrow===!0||fe>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=fe,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,Ee("onYearChange"),R()),M(),Ee("onMonthChange"),Lt())}function ie(z,Z){if(z===void 0&&(z=!0),Z===void 0&&(Z=!0),n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,Z===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){var fe=cv(n.config),_e=fe.hours,Ke=fe.minutes,it=fe.seconds;g(_e,Ke,it)}n.redraw(),z&&Ee("onChange")}function W(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),Ee("onClose")}function X(){n.config!==void 0&&Ee("onDestroy");for(var z=n._handlers.length;z--;)n._handlers[z].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var Z=n.calendarContainer.parentNode;if(Z.lastChild&&Z.removeChild(Z.lastChild),Z.parentNode){for(;Z.firstChild;)Z.parentNode.insertBefore(Z.firstChild,Z);Z.parentNode.removeChild(Z)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(fe){try{delete n[fe]}catch{}})}function J(z){return n.calendarContainer.contains(z)}function ue(z){if(n.isOpen&&!n.config.inline){var Z=bs(z),fe=J(Z),_e=Z===n.input||Z===n.altInput||n.element.contains(Z)||z.path&&z.path.indexOf&&(~z.path.indexOf(n.input)||~z.path.indexOf(n.altInput)),Ke=!_e&&!fe&&!J(z.relatedTarget),it=!n.config.ignoredFocusElements.some(function(at){return at.contains(Z)});Ke&&it&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&d(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&n.clear(!1))}}function le(z){if(!(!z||n.config.minDate&&z<n.config.minDate.getFullYear()||n.config.maxDate&&z>n.config.maxDate.getFullYear())){var Z=z,fe=n.currentYear!==Z;n.currentYear=Z||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),fe&&(n.redraw(),Ee("onYearChange"),R())}}function I(z,Z){var fe;Z===void 0&&(Z=!0);var _e=n.parseDate(z,void 0,Z);if(n.config.minDate&&_e&&ws(_e,n.config.minDate,Z!==void 0?Z:!n.minDateHasTime)<0||n.config.maxDate&&_e&&ws(_e,n.config.maxDate,Z!==void 0?Z:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(_e===void 0)return!1;for(var Ke=!!n.config.enable,it=(fe=n.config.enable)!==null&&fe!==void 0?fe:n.config.disable,at=0,ot=void 0;at<it.length;at++){if(ot=it[at],typeof ot=="function"&&ot(_e))return Ke;if(ot instanceof Date&&_e!==void 0&&ot.getTime()===_e.getTime())return Ke;if(typeof ot=="string"){var Nt=n.parseDate(ot,void 0,!0);return Nt&&Nt.getTime()===_e.getTime()?Ke:!Ke}else if(typeof ot=="object"&&_e!==void 0&&ot.from&&ot.to&&_e.getTime()>=ot.from.getTime()&&_e.getTime()<=ot.to.getTime())return Ke}return!Ke}function ee(z){return n.daysContainer!==void 0?z.className.indexOf("hidden")===-1&&z.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(z):!1}function K(z){var Z=z.target===n._input,fe=n._input.value.trimEnd()!==Yt();Z&&fe&&!(z.relatedTarget&&J(z.relatedTarget))&&n.setDate(n._input.value,!0,z.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function ne(z){var Z=bs(z),fe=n.config.wrap?t.contains(Z):Z===n._input,_e=n.config.allowInput,Ke=n.isOpen&&(!_e||!fe),it=n.config.inline&&fe&&!_e;if(z.keyCode===13&&fe){if(_e)return n.setDate(n._input.value,!0,Z===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),Z.blur();n.open()}else if(J(Z)||Ke||it){var at=!!n.timeContainer&&n.timeContainer.contains(Z);switch(z.keyCode){case 13:at?(z.preventDefault(),d(),U()):me(z);break;case 27:z.preventDefault(),U();break;case 8:case 46:fe&&!n.config.allowInput&&(z.preventDefault(),n.clear());break;case 37:case 39:if(!at&&!fe){z.preventDefault();var ot=l();if(n.daysContainer!==void 0&&(_e===!1||ot&&ee(ot))){var Nt=z.keyCode===39?1:-1;z.ctrlKey?(z.stopPropagation(),ge(Nt),P(_(1),0)):P(void 0,Nt)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:z.preventDefault();var dt=z.keyCode===40?1:-1;n.daysContainer&&Z.$i!==void 0||Z===n.input||Z===n.altInput?z.ctrlKey?(z.stopPropagation(),le(n.currentYear-dt),P(_(1),0)):at||P(void 0,dt*7):Z===n.currentYearElement?le(n.currentYear-dt):n.config.enableTime&&(!at&&n.hourElement&&n.hourElement.focus(),d(z),n._debouncedChange());break;case 9:if(at){var jt=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(function(he){return he}),Ut=jt.indexOf(Z);if(Ut!==-1){var be=jt[Ut+(z.shiftKey?-1:1)];z.preventDefault(),(be||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(Z)&&z.shiftKey&&(z.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&Z===n.amPM)switch(z.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],p(),xt();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],p(),xt();break}(fe||J(Z))&&Ee("onKeyDown",z)}function oe(z,Z){if(Z===void 0&&(Z="flatpickr-day"),!(n.selectedDates.length!==1||z&&(!z.classList.contains(Z)||z.classList.contains("flatpickr-disabled")))){for(var fe=z?z.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),_e=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),Ke=Math.min(fe,n.selectedDates[0].getTime()),it=Math.max(fe,n.selectedDates[0].getTime()),at=!1,ot=0,Nt=0,dt=Ke;dt<it;dt+=V6.DAY)I(new Date(dt),!0)||(at=at||dt>Ke&&dt<it,dt<_e&&(!ot||dt>ot)?ot=dt:dt>_e&&(!Nt||dt<Nt)&&(Nt=dt));var jt=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+Z));jt.forEach(function(Ut){var be=Ut.dateObj,he=be.getTime(),Re=ot>0&&he<ot||Nt>0&&he>Nt;if(Re){Ut.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ie){Ut.classList.remove(Ie)});return}else if(at&&!Re)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ie){Ut.classList.remove(Ie)}),z!==void 0&&(z.classList.add(fe<=n.selectedDates[0].getTime()?"startRange":"endRange"),_e<fe&&he===_e?Ut.classList.add("startRange"):_e>fe&&he===_e&&Ut.classList.add("endRange"),he>=ot&&(Nt===0||he<=Nt)&&H6(he,_e,fe)&&Ut.classList.add("inRange"))})}}function D(){n.isOpen&&!n.config.static&&!n.config.inline&&B()}function $(z,Z){if(Z===void 0&&(Z=n._positionElement),n.isMobile===!0){if(z){z.preventDefault();var fe=bs(z);fe&&fe.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),Ee("onOpen");return}else if(n._input.disabled||n.config.inline)return;var _e=n.isOpen;n.isOpen=!0,_e||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),Ee("onOpen"),B(Z)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(z===void 0||!n.timeContainer.contains(z.relatedTarget))&&setTimeout(function(){return n.hourElement.select()},50)}function te(z){return function(Z){var fe=n.config["_"+z+"Date"]=n.parseDate(Z,n.config.dateFormat),_e=n.config["_"+(z==="min"?"max":"min")+"Date"];fe!==void 0&&(n[z==="min"?"minDateHasTime":"maxDateHasTime"]=fe.getHours()>0||fe.getMinutes()>0||fe.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(function(Ke){return I(Ke)}),!n.selectedDates.length&&z==="min"&&h(fe),xt()),n.daysContainer&&(xe(),fe!==void 0?n.currentYearElement[z]=fe.getFullYear().toString():n.currentYearElement.removeAttribute(z),n.currentYearElement.disabled=!!_e&&fe!==void 0&&_e.getFullYear()===fe.getFullYear())}}function ae(){var z=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Z=Ri(Ri({},JSON.parse(JSON.stringify(t.dataset||{}))),e),fe={};n.config.parseDate=Z.parseDate,n.config.formatDate=Z.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(jt){n.config._enable=De(jt)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(jt){n.config._disable=De(jt)}});var _e=Z.mode==="time";if(!Z.dateFormat&&(Z.enableTime||_e)){var Ke=ii.defaultConfig.dateFormat||uc.dateFormat;fe.dateFormat=Z.noCalendar||_e?"H:i"+(Z.enableSeconds?":S":""):Ke+" H:i"+(Z.enableSeconds?":S":"")}if(Z.altInput&&(Z.enableTime||_e)&&!Z.altFormat){var it=ii.defaultConfig.altFormat||uc.altFormat;fe.altFormat=Z.noCalendar||_e?"h:i"+(Z.enableSeconds?":S K":" K"):it+(" h:i"+(Z.enableSeconds?":S":"")+" K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:te("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:te("max")});var at=function(jt){return function(Ut){n.config[jt==="min"?"_minTime":"_maxTime"]=n.parseDate(Ut,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:at("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:at("max")}),Z.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,fe,Z);for(var ot=0;ot<z.length;ot++)n.config[z[ot]]=n.config[z[ot]]===!0||n.config[z[ot]]==="true";av.filter(function(jt){return n.config[jt]!==void 0}).forEach(function(jt){n.config[jt]=rv(n.config[jt]||[]).map(o)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ot=0;ot<n.config.plugins.length;ot++){var Nt=n.config.plugins[ot](n)||{};for(var dt in Nt)av.indexOf(dt)>-1?n.config[dt]=rv(Nt[dt]).map(o).concat(n.config[dt]):typeof Z[dt]>"u"&&(n.config[dt]=Nt[dt])}Z.altInputClass||(n.config.altInputClass=Y().className+" "+n.config.altInputClass),Ee("onParseConfig")}function Y(){return n.config.wrap?t.querySelector("[data-input]"):t}function H(){typeof n.config.locale!="object"&&typeof ii.l10ns[n.config.locale]>"u"&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Ri(Ri({},ii.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?ii.l10ns[n.config.locale]:void 0),Bl.D="("+n.l10n.weekdays.shorthand.join("|")+")",Bl.l="("+n.l10n.weekdays.longhand.join("|")+")",Bl.M="("+n.l10n.months.shorthand.join("|")+")",Bl.F="("+n.l10n.months.longhand.join("|")+")",Bl.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var z=Ri(Ri({},e),JSON.parse(JSON.stringify(t.dataset||{})));z.time_24hr===void 0&&ii.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=O2(n),n.parseDate=Ux({config:n.config,l10n:n.l10n})}function B(z){if(typeof n.config.position=="function")return void n.config.position(n,z);if(n.calendarContainer!==void 0){Ee("onPreCalendarPosition");var Z=z||n._positionElement,fe=Array.prototype.reduce.call(n.calendarContainer.children,(function(rn,xs){return rn+xs.offsetHeight}),0),_e=n.calendarContainer.offsetWidth,Ke=n.config.position.split(" "),it=Ke[0],at=Ke.length>1?Ke[1]:null,ot=Z.getBoundingClientRect(),Nt=window.innerHeight-ot.bottom,dt=it==="above"||it!=="below"&&Nt<fe&&ot.top>fe,jt=window.pageYOffset+ot.top+(dt?-fe-2:Z.offsetHeight+2);if(Hi(n.calendarContainer,"arrowTop",!dt),Hi(n.calendarContainer,"arrowBottom",dt),!n.config.inline){var Ut=window.pageXOffset+ot.left,be=!1,he=!1;at==="center"?(Ut-=(_e-ot.width)/2,be=!0):at==="right"&&(Ut-=_e-ot.width,he=!0),Hi(n.calendarContainer,"arrowLeft",!be&&!he),Hi(n.calendarContainer,"arrowCenter",be),Hi(n.calendarContainer,"arrowRight",he);var Re=window.document.body.offsetWidth-(window.pageXOffset+ot.right),Ie=Ut+_e>window.document.body.offsetWidth,He=Re+_e>window.document.body.offsetWidth;if(Hi(n.calendarContainer,"rightMost",Ie),!n.config.static)if(n.calendarContainer.style.top=jt+"px",!Ie)n.calendarContainer.style.left=Ut+"px",n.calendarContainer.style.right="auto";else if(!He)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=Re+"px";else{var Be=re();if(Be===void 0)return;var Je=window.document.body.offsetWidth,bt=Math.max(0,Je/2-_e/2),Kt=".flatpickr-calendar.centerMost:before",$n=".flatpickr-calendar.centerMost:after",ti=Be.cssRules.length,vs="{left:"+ot.left+"px;right:auto;}";Hi(n.calendarContainer,"rightMost",!1),Hi(n.calendarContainer,"centerMost",!0),Be.insertRule(Kt+","+$n+vs,ti),n.calendarContainer.style.left=bt+"px",n.calendarContainer.style.right="auto"}}}}function re(){for(var z=null,Z=0;Z<document.styleSheets.length;Z++){var fe=document.styleSheets[Z];if(fe.cssRules){try{fe.cssRules}catch{continue}z=fe;break}}return z??de()}function de(){var z=document.createElement("style");return document.head.appendChild(z),z.sheet}function xe(){n.config.noCalendar||n.isMobile||(R(),Lt(),M())}function U(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function me(z){z.preventDefault(),z.stopPropagation();var Z=function(jt){return jt.classList&&jt.classList.contains("flatpickr-day")&&!jt.classList.contains("flatpickr-disabled")&&!jt.classList.contains("notAllowed")},fe=I2(bs(z),Z);if(fe!==void 0){var _e=fe,Ke=n.latestSelectedDateObj=new Date(_e.dateObj.getTime()),it=(Ke.getMonth()<n.currentMonth||Ke.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=_e,n.config.mode==="single")n.selectedDates=[Ke];else if(n.config.mode==="multiple"){var at=nt(Ke);at?n.selectedDates.splice(parseInt(at),1):n.selectedDates.push(Ke)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=Ke,n.selectedDates.push(Ke),ws(Ke,n.selectedDates[0],!0)!==0&&n.selectedDates.sort(function(jt,Ut){return jt.getTime()-Ut.getTime()}));if(p(),it){var ot=n.currentYear!==Ke.getFullYear();n.currentYear=Ke.getFullYear(),n.currentMonth=Ke.getMonth(),ot&&(Ee("onYearChange"),R()),Ee("onMonthChange")}if(Lt(),M(),xt(),!it&&n.config.mode!=="range"&&n.config.showMonths===1?N(_e):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){var Nt=n.config.mode==="single"&&!n.config.enableTime,dt=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(Nt||dt)&&U()}y()}}var ye={locale:[H,se],showMonths:[L,c,V],minDate:[k],maxDate:[k],positionElement:[tt],clickOpens:[function(){n.config.clickOpens===!0?(v(n._input,"focus",n.open),v(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function pe(z,Z){if(z!==null&&typeof z=="object"){Object.assign(n.config,z);for(var fe in z)ye[fe]!==void 0&&ye[fe].forEach(function(_e){return _e()})}else n.config[z]=Z,ye[z]!==void 0?ye[z].forEach(function(_e){return _e()}):av.indexOf(z)>-1&&(n.config[z]=rv(Z));n.redraw(),xt(!0)}function Ce(z,Z){var fe=[];if(z instanceof Array)fe=z.map(function(_e){return n.parseDate(_e,Z)});else if(z instanceof Date||typeof z=="number")fe=[n.parseDate(z,Z)];else if(typeof z=="string")switch(n.config.mode){case"single":case"time":fe=[n.parseDate(z,Z)];break;case"multiple":fe=z.split(n.config.conjunction).map(function(_e){return n.parseDate(_e,Z)});break;case"range":fe=z.split(n.l10n.rangeSeparator).map(function(_e){return n.parseDate(_e,Z)});break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(z)));n.selectedDates=n.config.allowInvalidPreload?fe:fe.filter(function(_e){return _e instanceof Date&&I(_e,!1)}),n.config.mode==="range"&&n.selectedDates.sort(function(_e,Ke){return _e.getTime()-Ke.getTime()})}function Ge(z,Z,fe){if(Z===void 0&&(Z=!1),fe===void 0&&(fe=n.config.dateFormat),z!==0&&!z||z instanceof Array&&z.length===0)return n.clear(Z);Ce(z,fe),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),k(void 0,Z),h(),n.selectedDates.length===0&&n.clear(!1),xt(Z),Z&&Ee("onChange")}function De(z){return z.slice().map(function(Z){return typeof Z=="string"||typeof Z=="number"||Z instanceof Date?n.parseDate(Z,void 0,!0):Z&&typeof Z=="object"&&Z.from&&Z.to?{from:n.parseDate(Z.from,void 0),to:n.parseDate(Z.to,void 0)}:Z}).filter(function(Z){return Z})}function $e(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var z=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);z&&Ce(z,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function et(){if(n.input=Y(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=gn(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),tt()}function tt(){n._positionElement=n.config.positionElement||n._input}function qe(){var z=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=gn("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=z,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=z==="datetime-local"?"Y-m-d\\TH:i:S":z==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}v(n.mobileInput,"change",function(Z){n.setDate(bs(Z).value,!1,n.mobileFormatStr),Ee("onChange"),Ee("onClose")})}function we(z){if(n.isOpen===!0)return n.close();n.open(z)}function Ee(z,Z){if(n.config!==void 0){var fe=n.config[z];if(fe!==void 0&&fe.length>0)for(var _e=0;fe[_e]&&_e<fe.length;_e++)fe[_e](n.selectedDates,n.input.value,n,Z);z==="onChange"&&(n.input.dispatchEvent(Qe("change")),n.input.dispatchEvent(Qe("input")))}}function Qe(z){var Z=document.createEvent("Event");return Z.initEvent(z,!0,!0),Z}function nt(z){for(var Z=0;Z<n.selectedDates.length;Z++){var fe=n.selectedDates[Z];if(fe instanceof Date&&ws(fe,z)===0)return""+Z}return!1}function Ht(z){return n.config.mode!=="range"||n.selectedDates.length<2?!1:ws(z,n.selectedDates[0])>=0&&ws(z,n.selectedDates[1])<=0}function Lt(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(function(z,Z){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+Z),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[Z].textContent=pp(fe.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=fe.getMonth().toString(),z.value=fe.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function Yt(z){var Z=z||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map(function(fe){return n.formatDate(fe,Z)}).filter(function(fe,_e,Ke){return n.config.mode!=="range"||n.config.enableTime||Ke.indexOf(fe)===_e}).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function xt(z){z===void 0&&(z=!0),n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=Yt(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=Yt(n.config.altFormat)),z!==!1&&Ee("onValueUpdate")}function Ae(z){var Z=bs(z),fe=n.prevMonthNav.contains(Z),_e=n.nextMonthNav.contains(Z);fe||_e?ge(fe?-1:1):n.yearElements.indexOf(Z)>=0?Z.select():Z.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):Z.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Oe(z){z.preventDefault();var Z=z.type==="keydown",fe=bs(z),_e=fe;n.amPM!==void 0&&fe===n.amPM&&(n.amPM.textContent=n.l10n.amPM[Fs(n.amPM.textContent===n.l10n.amPM[0])]);var Ke=parseFloat(_e.getAttribute("min")),it=parseFloat(_e.getAttribute("max")),at=parseFloat(_e.getAttribute("step")),ot=parseInt(_e.value,10),Nt=z.delta||(Z?z.which===38?1:-1:0),dt=ot+at*Nt;if(typeof _e.value<"u"&&_e.value.length===2){var jt=_e===n.hourElement,Ut=_e===n.minuteElement;dt<Ke?(dt=it+dt+Fs(!jt)+(Fs(jt)&&Fs(!n.amPM)),Ut&&S(void 0,-1,n.hourElement)):dt>it&&(dt=_e===n.hourElement?dt-it-Fs(!n.amPM):Ke,Ut&&S(void 0,1,n.hourElement)),n.amPM&&jt&&(at===1?dt+ot===23:Math.abs(dt-ot)>at)&&(n.amPM.textContent=n.l10n.amPM[Fs(n.amPM.textContent===n.l10n.amPM[0])]),_e.value=is(dt)}}return a(),n}function hc(t,e){for(var n=Array.prototype.slice.call(t).filter(function(o){return o instanceof HTMLElement}),s=[],a=0;a<n.length;a++){var l=n[a];try{if(l.getAttribute("data-fp-omit")!==null)continue;l._flatpickr!==void 0&&(l._flatpickr.destroy(),l._flatpickr=void 0),l._flatpickr=W6(l,e||{}),s.push(l._flatpickr)}catch(o){console.error(o)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return hc(this,t)},HTMLElement.prototype.flatpickr=function(t){return hc([this],t)});var ii=function(t,e){return typeof t=="string"?hc(window.document.querySelectorAll(t),e):t instanceof Node?hc([t],e):hc(t,e)};ii.defaultConfig={};ii.l10ns={en:Ri({},ym),default:Ri({},ym)};ii.localize=function(t){ii.l10ns.default=Ri(Ri({},ii.l10ns.default),t)};ii.setDefaults=function(t){ii.defaultConfig=Ri(Ri({},ii.defaultConfig),t)};ii.parseDate=Ux({});ii.formatDate=O2({});ii.compareDates=ws;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return hc(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=ii);const K6=["onCreate","onDestroy"],Wx=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],G6=(t,e)=>(Wx.forEach(n=>{const s=e[n],a=t[n];if(s){a&&!Array.isArray(a)?t[n]=[t[n]]:t[n]||(t[n]=[]);const l=Array.isArray(s)?s:[s];t[n].length===0?t[n]=l:t[n].push(...l)}}),Wx.forEach(n=>{delete e[n]}),K6.forEach(n=>{delete e[n]}),t),Un=t=>{const e=f.useMemo(()=>({...t}),[t]),{defaultValue:n,options:s={},value:a,children:l,render:o,onCreate:c,onDestroy:d}=e,m=f.useMemo(()=>G6(s,e),[s,e]),u=f.useRef(null),p=f.useRef(void 0);f.useImperativeHandle(t.ref,()=>({get flatpickr(){return p.current}}),[]),f.useEffect(()=>{const x=()=>{var y;m.onClose=m.onClose||(()=>{var b;(b=u.current)!=null&&b.blur&&u.current.blur()}),p.current=(((y=ii)==null?void 0:y.default)||ii)(u.current,m),c?.(p.current)},v=()=>{d?.(p.current),p.current&&p.current.destroy(),p.current=void 0};return x(),()=>{v()}},[m,c,d]),f.useEffect(()=>{var x;if(p.current){const v=Object.getOwnPropertyNames(m);for(let y=v.length-1;y>=0;y--){const b=v[y];let k=m[b];k?.toString()!==((x=p.current.config[b])==null?void 0:x.toString())&&(Wx.includes(b)&&!Array.isArray(k)&&(k=[k]),p.current.set(b,k))}a!==void 0&&a!==p.current.input.value&&p.current.setDate(a,!1)}},[m,a]);const h=f.useCallback(x=>{u.current=x},[]);if(o)return o({...e,defaultValue:n,value:a},h);const g=f.useCallback(x=>{var v,y;t&&t.onChange&&(Array.isArray(t?.onChange)?(v=t?.onChange)==null||v.forEach(()=>[new Date(x.target.value)],a?.toString()||""):typeof t.onChange=="function"&&((y=t?.onChange)==null||y.call(t,[new Date(x.target.value)],a?.toString()||"",p.current)))},[t,a]);return s.wrap?i.jsx("div",{className:"flatpickr",ref:h,children:l}):i.jsx("input",{onChange:g,...e,value:a?.toString(),defaultValue:n,ref:h})},Si=()=>{const t=Bm(),e=f.useMemo(()=>{const s=t.map(c=>{const{handle:d,params:m,data:u}=c,p=d?.meta||{};let h=p.breadcrumb||d?.breadcrumb||d?.title||p.title,g="";if(typeof h=="function")try{g=h(m,u,c)}catch(x){console.warn("[Breadcrumb] Resolver failed:",x),g=""}else g=h;return{key:c.id,path:c.pathname,label:g,isHome:c.pathname==="/"||c.pathname==="/dashboard"}}).filter(c=>c.label),a=[],l=new Set;return s.forEach(c=>{l.has(c.path)||(l.add(c.path),a.push(c))}),a.length>0&&a[0].path==="/"||a.unshift({key:"root-home",path:"/",label:r("Home","kivicare-clinic-management-system"),isHome:!0}),a.map(c=>({...c,label:r(c.label,"kivicare-clinic-management-system")}))},[t]);return e.length<=1?null:i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:e.map((n,s)=>{const a=s===e.length-1;return i.jsx("li",{className:`breadcrumb-item ${a?"active":""}`,...a?{"aria-current":"page"}:{},children:a?i.jsx("span",{className:"breadcrumb-text",children:n.label}):i.jsx(ht,{to:n.path,className:"breadcrumb-link",children:n.label})},n.key)})})})},wo={getUpcomingAppointment:(t=null)=>{let e="dashboard/upcoming-appointments";if(t&&t.start_date&&t.end_date){const n=new URLSearchParams;n.append("start_date",t.start_date),n.append("end_date",t.end_date),e=`${e}?${n.toString()}`}return ve({endpoint:e,method:"GET"})},getStatsCount:(t,e=null)=>{let n=`dashboard/statistics/${t}`;if(e&&e.start_date&&e.end_date){const s=new URLSearchParams;s.append("start_date",e.start_date),s.append("end_date",e.end_date),n=`${n}?${s.toString()}`}return ve({endpoint:n,method:"GET"})},getTopDoctors:(t={})=>{const{limit:e=5,start_date:n,end_date:s}=t,a=new URLSearchParams;e&&a.append("limit",e),n&&a.append("start_date",n),s&&a.append("end_date",s);const l=a.toString(),o=`dashboard/top-doctors${l?"?"+l:""}`;return ve({endpoint:o,method:"GET"})},getRecentPayments:(t={})=>{const{limit:e=3,clinic_id:n,start_date:s,end_date:a}=t,l=new URLSearchParams;e&&l.append("limit",e),n&&l.append("clinic_id",n),s&&l.append("start_date",s),a&&l.append("end_date",a);const o=l.toString(),c=`dashboard/recent-payments${o?"?"+o:""}`;return ve({endpoint:c,method:"GET"})},getCalendarAppointments:(t={})=>{const e=new URLSearchParams;t.start_date&&e.append("date_from",t.start_date),t.end_date&&e.append("date_to",t.end_date),t.doctor&&e.append("doctor",t.doctor),t.patient&&e.append("patient",t.patient),t.clinic&&e.append("clinic",t.clinic),t.status&&e.append("status",t.status),t.search&&e.append("search",t.search),e.append("perPage","all");const n=e.toString(),s=`appointments${n?"?"+n:""}`;return ve({endpoint:s,method:"GET"})}},$s={all:["dashboard"],settings:(t={})=>[...$s.all,"settings",t?.start_date,t?.end_date],stats:(t,e={})=>[...$s.all,"stats",t,e?.start_date,e?.end_date],topDoctors:(t={},e={})=>[...$s.all,"topDoctors",JSON.stringify(t),e?.start_date,e?.end_date],recentPayments:(t={})=>[...$s.all,"recentPayments",JSON.stringify(t),t?.start_date,t?.end_date],calendarAppointments:t=>[...$s.all,"calendarAppointments",JSON.stringify(t)],bookingStatus:(t={})=>[...$s.all,"bookingStatus",t?.start_date,t?.end_date]},Y6=(t={})=>{const{params:e,...n}=t;return ft({queryKey:t.queryKey||$s.settings(e),queryFn:()=>wo.getUpcomingAppointment(e),staleTime:300*1e3,cacheTime:1800*1e3,...n})},Q6=(t,e={})=>{const{params:n,...s}=e;return ft({queryKey:e.queryKey||$s.stats(t,n),queryFn:()=>wo.getStatsCount(t,n),enabled:!!t,staleTime:300*1e3,cacheTime:1800*1e3,...s})},C0=async(t,e,n=null)=>{let s=null,a=null;typeof e=="function"?(s=e,a=n):e&&typeof e=="object"&&(a=e,s=n);try{const l=await wo.getStatsCount(t,a);return s&&typeof s=="function"&&s(l),l}catch(l){throw console.error(`Error fetching stats for ${t}:`,l),s&&typeof s=="function"&&s(null,l),l}},Z6=(t={},e={})=>{const{start_date:n,end_date:s,...a}=t,l=n&&s?{start_date:n,end_date:s}:{};return ft({queryKey:$s.topDoctors(a,l),queryFn:()=>wo.getTopDoctors({...a,...l}),staleTime:300*1e3,cacheTime:1800*1e3,...e})},X6=(t={},e={})=>ft({queryKey:$s.recentPayments(t),queryFn:()=>wo.getRecentPayments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),J6=(t={},e={})=>ft({queryKey:$s.calendarAppointments(t),queryFn:()=>wo.getCalendarAppointments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),e$=(t={},e={})=>ft({queryKey:$s.bookingStatus(t),queryFn:()=>wo.getStatsCount("booking-status",t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),t$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:30,viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M0.549316 24.1039C0.549574 24.814 0.836051 25.4949 1.34578 25.997C1.85551 26.4991 2.54678 26.7813 3.26764 26.7815H9.24796V21.9297C8.05264 21.7971 6.94867 21.2358 6.14653 20.3528C5.3444 19.4698 4.90021 18.327 4.89865 17.1421V14.4645C4.89991 14.0388 5.07215 13.6309 5.37775 13.3298C5.68335 13.0288 6.09746 12.8592 6.52964 12.8579H7.0733C7.1447 12.8579 7.2154 12.8718 7.28136 12.8987C7.34732 12.9256 7.40725 12.965 7.45773 13.0148C7.50822 13.0645 7.54826 13.1235 7.57558 13.1885C7.60291 13.2535 7.61697 13.3231 7.61697 13.3934C7.61697 13.4638 7.60291 13.5334 7.57558 13.5984C7.54826 13.6634 7.50822 13.7224 7.45773 13.7721C7.40725 13.8218 7.34732 13.8613 7.28136 13.8882C7.2154 13.9151 7.1447 13.929 7.0733 13.929H6.52964C6.38558 13.9294 6.24755 13.9859 6.14568 14.0863C6.04381 14.1866 5.9864 14.3226 5.98598 14.4645V17.1421C6.17796 22.1095 13.4071 22.1061 13.5973 17.1421V14.4645C13.5969 14.3226 13.5395 14.1866 13.4376 14.0863C13.3357 13.9859 13.1977 13.9294 13.0536 13.929H12.51C12.3672 13.9268 12.2311 13.8694 12.1309 13.7692C12.0308 13.669 11.9747 13.5341 11.9747 13.3934C11.9747 13.2528 12.0308 13.1179 12.1309 13.0177C12.2311 12.9175 12.3672 12.8601 12.51 12.8579H13.0536C13.4858 12.8592 13.8999 13.0288 14.2055 13.3298C14.5111 13.6309 14.6833 14.0388 14.6846 14.4645V17.1421C14.683 18.327 14.2388 19.4698 13.4367 20.3528C12.6346 21.2358 11.5306 21.7971 10.3353 21.9297C10.3332 22.1578 10.3368 26.7538 10.3353 26.7815C10.4885 27.6708 10.9531 28.479 11.6483 29.066C12.3435 29.6529 13.2255 29.9815 14.141 29.9946L16.3156 29.9946C17.2301 29.9941 18.1138 29.669 18.8048 29.0789C19.4957 28.4888 19.9476 27.6732 20.0777 26.7815H28.2762C28.9971 26.7813 29.6884 26.4991 30.1981 25.997C30.7078 25.4949 30.9943 24.814 30.9946 24.1039V9.10925H0.549316V24.1039ZM17.9466 19.2842C17.9468 18.5741 18.2333 17.8932 18.7431 17.3911C19.2528 16.889 19.9441 16.6068 20.6649 16.6066H21.2629C21.3883 16.0018 21.7219 15.4582 22.2074 15.0679C22.6928 14.6776 23.3003 14.4644 23.9269 14.4645C27.5184 14.5754 27.5207 19.7087 23.9269 19.8197C23.3002 19.8198 22.6928 19.6066 22.2074 19.2163C21.7219 18.8259 21.3883 18.2824 21.2629 17.6776H20.6649C20.2328 17.6789 19.8186 17.8485 19.513 18.1496C19.2074 18.4506 19.0352 18.8585 19.0339 19.2842V26.246C19.0323 26.9557 18.7454 27.6358 18.236 28.1376C17.7266 28.6394 17.0361 28.922 16.3156 28.9236H14.141C13.5143 28.9237 12.9069 28.7105 12.4214 28.3202C11.936 27.9298 11.6024 27.3863 11.477 26.7815H17.9466L17.9466 19.2842Z",fill:"currentColor"}),f.createElement("path",{d:"M23.9269 18.7487C24.3563 18.7438 24.7664 18.5724 25.0682 18.2717C25.3701 17.9709 25.5394 17.565 25.5394 17.1421C25.5394 16.7191 25.3701 16.3132 25.0682 16.0125C24.7663 15.7117 24.3562 15.5403 23.9269 15.5355C23.4975 15.5404 23.0874 15.7117 22.7856 16.0125C22.4837 16.3133 22.3144 16.7192 22.3144 17.1421C22.3144 17.5651 22.4837 17.9709 22.7856 18.2717C22.0875 18.5725 23.4976 18.7438 23.9269 18.7487ZM23.9269 16.6066C24.0697 16.6087 24.2059 16.666 24.3062 16.7662C24.4064 16.8664 24.4626 17.0014 24.4626 17.1421C24.4626 17.2828 24.4064 17.4178 24.3061 17.518C24.2059 17.6182 24.0697 17.6755 23.9269 17.6776C23.7841 17.6755 23.6479 17.6182 23.5476 17.518C23.4474 17.4178 23.3912 17.2827 23.3912 17.1421C23.3913 17.0014 23.4474 16.8664 23.5477 16.7662C23.6479 16.666 23.7841 16.6086 23.9269 16.6066Z",fill:"currentColor"}),f.createElement("path",{d:"M28.2762 2.68297H26.6452V1.61195C26.6403 1.18907 26.4662 0.785175 26.1609 0.48787C25.8556 0.190565 25.4436 0.0238284 25.0142 0.0238284C24.5849 0.0238284 24.1729 0.190565 23.8675 0.48787C23.5622 0.785175 23.3882 1.18907 23.3832 1.61195V5.36056C23.3813 5.50131 23.3231 5.63564 23.2214 5.73448C23.1196 5.83333 22.9825 5.88875 22.8396 5.88875C22.6967 5.88875 22.5595 5.83333 22.4578 5.73448C22.356 5.63564 22.2979 5.50131 22.2959 5.36056V2.68297H8.16061V1.61195C8.15652 1.1885 7.98288 0.783761 7.67745 0.485753C7.37202 0.187744 6.9595 0.0205639 6.52959 0.0205688C6.09969 0.0205738 5.68717 0.187763 5.38174 0.485779C5.07632 0.783795 4.90269 1.18854 4.89862 1.61198V5.36061C4.89632 5.50114 4.83803 5.63515 4.73632 5.73373C4.63461 5.83231 4.49764 5.88756 4.35495 5.88756C4.21227 5.88756 4.0753 5.83231 3.97359 5.73373C3.87188 5.63515 3.81359 5.50114 3.81129 5.36061V2.68302H3.26763C2.6666 2.68031 2.08185 2.87536 1.60615 3.23722C1.13045 3.59908 0.791025 4.10703 0.641715 4.68051C0.452452 5.13787 0.589135 7.52339 0.549259 8.03826H30.9946V5.36058C30.9943 4.65051 30.7078 3.96959 30.1981 3.46749C29.6884 2.9654 28.9971 2.68321 28.2762 2.68297ZM7.0733 2.68297H5.98595V1.61195C5.98595 1.46992 6.04323 1.3337 6.14519 1.23327C6.24714 1.13284 6.38543 1.07642 6.52962 1.07642C6.6738 1.07642 6.81209 1.13284 6.91404 1.23327C7.016 1.3337 7.07328 1.46992 7.07328 1.61195L7.0733 2.68297ZM25.5579 2.68297H24.4706V1.61195C24.4706 1.46992 24.5278 1.3337 24.6298 1.23327C24.7318 1.13284 24.87 1.07642 25.0142 1.07642C25.1584 1.07642 25.2967 1.13284 25.3987 1.23327C25.5006 1.3337 25.5579 1.46992 25.5579 1.61195L25.5579 2.68297Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:31,height:30,fill:"white"})))),n$=f.forwardRef(t$),i$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:38,height:30,viewBox:"0 0 38 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M12.9992 14.9391C16.7634 14.9391 19.8148 11.8876 19.8148 8.12343C19.8148 4.35926 16.7634 1.3078 12.9992 1.3078C9.23505 1.3078 6.18359 4.35926 6.18359 8.12343C6.18359 11.8876 9.23505 14.9391 12.9992 14.9391Z",fill:"currentColor"}),f.createElement("path",{d:"M36.3828 0.859375H28.8281C27.9609 0.859375 27.2656 1.5625 27.2656 2.42187V11.2266C27.2656 13.0547 28.2656 14.7422 29.8672 15.6172L31.8273 16.6812V23.2305C31.8273 25.6281 29.8766 27.5781 27.4797 27.5781H25.9469C25.9414 27.5781 25.9359 27.5812 25.9305 27.5812C25.8508 24.1313 24.4336 21.0031 22.1562 18.7266C20.7031 17.2812 18.9062 16.1719 16.8984 15.5391C15.7344 16.1562 14.4062 16.5 13 16.5C11.5938 16.5 10.2656 16.1562 9.10156 15.5391C3.85938 17.1875 0.0546875 22.0938 0.0546875 27.8828V29.1406H25.9453H25.9469H27.4797C30.7391 29.1406 33.3898 26.4891 33.3898 23.2305V16.6742L35.3359 15.618C36.9453 14.743 37.9453 13.0555 37.9453 11.2273V2.42187C37.9453 1.5625 37.2422 0.859375 36.3828 0.859375ZM35.2656 8.96094H33.3828V10.8438C33.3828 11.2812 33.0391 11.625 32.6016 11.625C32.1719 11.625 31.8203 11.2812 31.8203 10.8438V8.96094H29.9375C29.5078 8.96094 29.1562 8.61719 29.1562 8.17969C29.1562 7.75 29.5078 7.39844 29.9375 7.39844H31.8203V5.51563C31.8203 5.08594 32.1719 4.73438 32.6016 4.73438C33.0391 4.73438 33.3828 5.08594 33.3828 5.51563V7.39844H35.2656C35.7031 7.39844 36.0469 7.75 36.0469 8.17969C36.0469 8.61719 35.7031 8.96094 35.2656 8.96094Z",fill:"currentColor"})),s$=f.forwardRef(i$),a$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:25,height:31,viewBox:"0 0 25 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M18.8486 11V14C18.8486 14.1326 18.796 14.2598 18.7022 14.3536C18.6084 14.4473 18.4812 14.5 18.3486 14.5H14.8486V18C14.8486 18.1326 14.796 18.2598 14.7022 18.3536C14.6084 18.4473 14.4812 18.5 14.3486 18.5H11.3486C11.216 18.5 11.0888 18.4473 10.9951 18.3536C10.9013 18.2598 10.8486 18.1326 10.8486 18V14.5H7.34863C7.21602 14.5 7.08885 14.4473 6.99508 14.3536C6.90131 14.2598 6.84863 14.1326 6.84863 14V11C6.84863 10.8674 6.90131 10.7402 6.99508 10.6464C7.08885 10.5527 7.21602 10.5 7.34863 10.5H10.8486V7C10.8486 6.86739 10.9013 6.74021 10.9951 6.64645C11.0888 6.55268 11.216 6.5 11.3486 6.5H14.3486C14.4812 6.5 14.6084 6.55268 14.7022 6.64645C14.796 6.74021 14.8486 6.86739 14.8486 7V10.5H18.3486C18.4812 10.5 18.6084 10.5527 18.7022 10.6464C18.796 10.7402 18.8486 10.8674 18.8486 11ZM24.8486 12.5C24.8486 21.647 13.6238 30.0488 13.1458 30.4021C13.0597 30.4657 12.9556 30.5 12.8486 30.5C12.7417 30.5 12.6375 30.4657 12.5515 30.4021C12.0735 30.0488 0.848633 21.647 0.848633 12.5C0.848633 9.3174 2.11291 6.26515 4.36335 4.01472C6.61379 1.76428 9.66603 0.5 12.8486 0.5C16.0312 0.5 19.0835 1.76428 21.3339 4.01472C23.5844 6.26515 24.8486 9.3174 24.8486 12.5ZM21.8486 12.5C21.8486 10.72 21.3208 8.97991 20.3319 7.49987C19.3429 6.01983 17.9373 4.86627 16.2928 4.18508C14.6482 3.5039 12.8386 3.32567 11.0928 3.67293C9.34699 4.0202 7.74334 4.87737 6.48467 6.13604C5.226 7.39471 4.36883 8.99836 4.02157 10.7442C3.6743 12.49 3.85253 14.2996 4.53372 15.9442C5.21491 17.5887 6.36846 18.9943 7.8485 19.9832C9.32854 20.9722 11.0686 21.5 12.8486 21.5C15.2347 21.4973 17.5224 20.5482 19.2096 18.861C20.8968 17.1737 21.8459 14.8861 21.8486 12.5Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:24,height:30,fill:"white",transform:"translate(0.848633 0.5)"})))),r$=f.forwardRef(a$),l$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:27,height:31,viewBox:"0 0 27 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M21.9935 17.4026C22.2786 18.0609 22.4445 18.8663 22.4812 19.7977C23.4435 20.0182 24.1637 20.879 24.1637 21.9069C24.1637 23.1008 23.1924 24.0721 21.9985 24.0721C20.8046 24.0721 19.8333 23.1008 19.8333 21.9069C19.8333 20.8906 20.5378 20.0389 21.4832 19.806C21.4415 18.881 21.2204 17.4736 20.315 16.7787C19.8529 16.6591 19.3779 16.5725 18.8906 16.5279C18.8546 18.1485 13.4982 22.1478 13.4982 22.1478C13.4982 22.1478 8.14018 18.1491 8.10387 16.5286C7.56257 16.5779 7.03593 16.6768 6.52727 16.8194C5.86672 17.3423 5.52495 18.3167 5.50729 19.7331C5.7015 19.8447 5.85839 20.0189 5.95466 20.2297C6.66618 20.5658 7.29475 21.2727 7.7761 22.279C7.85671 22.4482 7.86737 22.6394 7.80807 22.814C8.09655 23.5565 8.26143 24.3679 8.26143 25.0495C8.26143 26.0045 8.26143 26.9076 7.22047 27.1394C7.10788 27.233 6.96664 27.2846 6.81841 27.2846H6.12288C5.77411 27.2846 5.49031 27.0002 5.49031 26.6524L5.49097 26.6277C5.5043 26.2913 5.78577 26.0198 6.12288 26.0198H6.81841C6.88969 26.0198 6.95931 26.0318 7.0266 26.0551C7.06857 26.0435 7.0819 26.0338 7.08223 26.0335C7.15951 25.8962 7.15951 25.3246 7.15951 25.0501C7.15951 24.4965 7.02094 23.828 6.7781 23.2067C6.65219 23.1351 6.55026 23.0268 6.48763 22.8959C6.06592 22.0129 5.4923 21.4426 5.02662 21.4426C4.55027 21.4426 3.94801 22.0595 3.52796 22.9762C3.45934 23.1258 3.33909 23.2474 3.19119 23.3203C2.97167 23.9146 2.85109 24.5265 2.85109 25.0498C2.85109 25.2803 2.85109 25.8919 2.93903 26.0358C2.94003 26.0358 2.95968 26.0478 3.01498 26.0615C3.08693 26.0338 3.16421 26.0195 3.24149 26.0195H3.93835C4.26313 26.0195 4.53462 26.2667 4.56726 26.5881L4.57059 26.6271C4.57059 27.0005 4.28678 27.285 3.93835 27.285H3.24149C3.10325 27.285 2.96967 27.2387 2.85975 27.1547C2.46168 27.0798 2.18121 26.9042 2.00366 26.6184C1.78847 26.273 1.74916 25.8193 1.74916 25.0498C1.74916 24.3749 1.90506 23.5975 2.1882 22.855C2.14656 22.6961 2.16055 22.5302 2.22984 22.3806C2.52464 21.7357 2.89972 21.1834 3.31411 20.784C3.54195 20.5645 3.78679 20.388 4.04295 20.259C4.13888 20.0345 4.30544 19.8503 4.50897 19.7341C4.51963 18.8463 4.6562 18.0798 4.9087 17.4479C2.01798 18.9143 0.0369873 21.9133 0.0369873 25.3766C0.0369873 29.8023 3.27047 30.0188 7.50328 30.0188C7.9653 30.0188 8.43831 30.0161 8.92165 30.0161H18.0711C18.5538 30.0161 19.0268 30.0188 19.4889 30.0188C23.7223 30.0188 26.9571 29.8023 26.9571 25.3766C26.9568 21.8766 24.9335 18.8513 21.9935 17.4026Z",fill:"currentColor"}),f.createElement("path",{d:"M13.4996 17.691C17.5915 17.691 20.9082 11.5382 20.9082 7.44661C20.9082 3.3557 17.5915 0.0389404 13.4996 0.0389404C9.40831 0.0389404 6.09155 3.3557 6.09155 7.44661C6.09155 11.5382 9.40831 17.691 13.4996 17.691Z",fill:"currentColor"}),f.createElement("path",{d:"M21.9981 22.9062C22.55 22.9062 22.9974 22.4588 22.9974 21.9069C22.9974 21.355 22.55 20.9076 21.9981 20.9076C21.4462 20.9076 20.9988 21.355 20.9988 21.9069C20.9988 22.4588 21.4462 22.9062 21.9981 22.9062Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:27,height:30.0578,fill:"white"})))),o$=f.forwardRef(l$),c$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:31,viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M15.1456 8.172C11.1049 8.172 7.8176 11.4593 7.8176 15.5C7.8176 19.5407 11.1049 22.8281 15.1456 22.8281C19.1863 22.8281 22.4737 19.5407 22.4737 15.5C22.4737 11.4593 19.1863 8.172 15.1456 8.172ZM14.1122 18.917L11.2788 16.0836L12.5217 14.8406L14.1123 16.4311L17.8389 12.7046L19.0818 13.9475L14.1122 18.917Z",fill:"currentColor"}),f.createElement("path",{d:"M30.1456 17.9258V13.0742L27.1493 12.2039C26.8752 11.2063 26.4774 10.249 25.9619 9.34689L27.4674 6.60869L24.0369 3.17814L21.2987 4.68371C20.3966 4.16826 19.4394 3.77047 18.4416 3.49631L17.5714 0.5H12.7198L11.8495 3.49631C10.8518 3.77041 9.89452 4.16826 8.99241 4.68371L6.25426 3.17814L2.82372 6.60869L4.32922 9.34689C3.81377 10.249 3.41592 11.2063 3.14182 12.2039L0.14563 13.0742V17.9258L3.14194 18.7961C3.41604 19.7937 3.81389 20.751 4.32934 21.6531L2.82383 24.3913L6.25438 27.8219L8.99252 26.3163C9.89463 26.8317 10.8519 27.2295 11.8496 27.5037L12.7199 30.5H17.5714L18.4418 27.5037C19.4394 27.2296 20.3967 26.8317 21.2989 26.3163L24.037 27.8219L27.4675 24.3913L25.962 21.6531C26.4775 20.751 26.8753 19.7937 27.1494 18.7961L30.1456 17.9258ZM15.1456 24.5858C10.1357 24.5858 6.05979 20.5099 6.05979 15.5C6.05979 10.4901 10.1357 6.41416 15.1456 6.41416C20.1556 6.41416 24.2315 10.4901 24.2315 15.5C24.2315 20.5099 20.1556 24.5858 15.1456 24.5858Z",fill:"currentColor"})),d$=f.forwardRef(c$),m$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:23,height:30,viewBox:"0 0 23 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M6.37115 5.625H16.5872L18.792 3.895C19.5427 3.3075 19.8231 2.35375 19.5057 1.46375C19.1884 0.57375 18.3638 0 17.4054 0H5.55295C4.59455 0 3.76998 0.575 3.45264 1.46375C3.1353 2.3525 3.41568 3.3075 4.16506 3.89375L6.37115 5.625Z",fill:"currentColor"}),f.createElement("path",{d:"M16.7618 7.5H6.19653C2.71598 10.8512 0.0090332 16.7312 0.0090332 21.5625C0.0090332 25.7612 2.27502 30 7.33717 30H15.9398C20.264 30 22.9493 26.7663 22.9493 21.5625C22.9493 16.7312 20.2423 10.8512 16.7618 7.5ZM10.9949 17.8125H11.9635C13.4533 17.8125 14.6653 19.0013 14.6653 20.4625C14.6653 21.7763 13.6993 22.8575 12.435 23.0775V24.0613C12.435 24.5788 12.0068 24.9988 11.4792 24.9988C10.9515 24.9988 10.5233 24.5788 10.5233 24.0613V23.125H9.24886C8.72123 23.125 8.29302 22.705 8.29302 22.1875C8.29302 21.67 8.72123 21.25 9.24886 21.25H11.9635C12.3993 21.25 12.7536 20.9025 12.7536 20.475C12.7536 20.035 12.3993 19.6875 11.9635 19.6875H10.9949C9.50503 19.6875 8.29302 18.4987 8.29302 17.0375C8.29302 15.7238 9.25906 14.6425 10.5233 14.4225V13.4375C10.5233 12.92 10.9515 12.5 11.4792 12.5C12.0068 12.5 12.435 12.92 12.435 13.4375V14.375H13.7095C14.2371 14.375 14.6653 14.795 14.6653 15.3125C14.6653 15.83 14.2371 16.25 13.7095 16.25H10.9949C10.559 16.25 10.2047 16.5975 10.2047 17.025C10.2047 17.465 10.559 17.8125 10.9949 17.8125Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:23,height:30,fill:"white"})))),u$=f.forwardRef(m$),h$=({component:t,title:e,iconKey:n,color:s="primary",useHook:a=!0,onDataLoaded:l=null,dateFilter:o=null,isFiltering:c=!1,isCurrency:d=!1,capability:m,linkTo:u=null,iconPosition:p="top",...h})=>{const{hasCapability:g}=ut();if(m&&!g(m))return null;const[x,v]=f.useState("--"),[y,b]=f.useState("--"),[k,w]=f.useState(!1),[S,j]=f.useState(null),T=ze.useMemo(()=>{const V=["stats",t];return o?.start_date&&o?.end_date&&V.push(o.start_date,o.end_date),V},[t,o]),{data:N,isLoading:_,error:A,refetch:P}=Q6(t,{enabled:a&&!!t,params:o,queryKey:T}),E=V=>{let se=0,G=null;V?.json?.data?.count!==void 0?se=V.json.data.count:V?.data?.count!==void 0?se=V.data.count:V?.count!==void 0&&(se=V.count),V?.json?.data?.formatted_count!==void 0?G=V.json.data.formatted_count:V?.data?.formatted_count!==void 0?G=V.data.formatted_count:V?.formatted_count!==void 0&&(G=V.formatted_count);const ge=G||(isNaN(se)?se:Number(se).toLocaleString());let ie=ge;if(d&&!isNaN(se)&&Number(se)>1e3){const W=Number(se);let X;W>=1e6?X=(W/1e6).toFixed(1)+"M":X=(W/1e3).toFixed(1)+"k",X=X.replace(".0",""),G?ie=G.replace(/[\d,.]+/,X):ie=X}return{displayCount:ie,fullDisplay:ge}};f.useEffect(()=>{if(N&&a)try{const{displayCount:V,fullDisplay:se}=E(N);v(V),b(se),l&&typeof l=="function"&&l(N,null,t)}catch(V){j(V)}},[N,t,a,l,d]),f.useEffect(()=>{A&&a&&(j(A),l&&typeof l=="function"&&l(null,A,t))},[A,t,a,l]),f.useEffect(()=>{!a&&t&&(w(!0),j(null),C0(t,(V,se)=>{if(w(!1),se)j(se),v("--"),b("--");else{const{displayCount:G,fullDisplay:ge}=E(V);v(G),b(ge)}l&&typeof l=="function"&&l(V,se,t)},o))},[t,a,l,o]);const M=a?_:k,R=a?A:S,O={appointment:n$,patient:s$,clinic:r$,doctor:o$,service:d$,revenue:u$},L=()=>{const V=O[n];return V?i.jsx(V,{className:"icon-svg",style:{width:"30px",height:"30px"},"aria-label":`${e} icon`}):i.jsx("div",{className:`text-center rounded-circle p-3 bg-${s}-subtle mb-3`,children:i.jsx("i",{className:`${n} fs-4 align-middle`})})},q=()=>i.jsx("div",{className:p==="right"?"text-start":"text-center",children:M?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"skeleton-element mb-2 mb-md-3 mx-auto",style:{width:"80px",height:"2rem"}}),i.jsx("div",{className:"skeleton-element mx-auto",style:{width:"140px",height:"1rem"}})]}):R?i.jsxs("div",{className:"text-danger mb-3",children:[r("Error","kivicare-clinic-management-system"),i.jsx("button",{className:"btn btn-link btn-sm text-decoration-none ms-2",onClick:()=>{a?P():t&&(w(!0),j(null),C0(t,(V,se)=>{if(w(!1),se)j(se),v("--"),b("--");else{const{displayCount:G,fullDisplay:ge}=E(V);v(G),b(ge)}l&&l(V,se,t)}))},children:r("Retry","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[d&&x!==y?i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{id:`tooltip-${t}`,children:y}),children:i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-2 mb-md-3 fw-bold",children:x})}):i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-0 fw-bold",children:x}),i.jsx("p",{className:"text-body line-clamp-1 fw-medium mb-0",children:e})]})}),Q=i.jsx("div",{className:`card-body  ${p==="right"?"p-4":""}`,children:i.jsxs("div",{className:`d-flex ${p==="right"?"align-items-center justify-content-between gap-lg-3 gap-2":"align-items-center justify-content-center flex-column"}`,children:[p==="right"&&q(),i.jsx("div",{className:`card-icon ${p==="right"?"mb-0":""}`,children:L()}),p!=="right"&&q()]})});return i.jsx("div",{className:`card card-block card-stretch card-height overflow-hidden ${u?"cursor-pointer":""}`,children:u?i.jsx(ht,{to:u,className:"text-decoration-none text-reset",children:Q}):Q})},S0=({title:t,items:e=[],renderItem:n,viewAllLink:s="appointments",loading:a=!1,emptyMessage:l=r("No items to display","kivicare-clinic-management-system")})=>i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx("h6",{className:"card-title mb-0",children:t}),s==="appointments"&&i.jsx(ht,{to:"/appointments",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")}),s==="doctors"&&i.jsx(ht,{to:"/doctor",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"card-body pt-0",children:i.jsx("div",{className:"upcoming-appointments","data-scrollbar":"true",children:i.jsx("div",{className:"scroll-content",children:a?i.jsx("ul",{className:"list-inline p-0 m-0",children:Array.from({length:3}).map((o,c)=>i.jsx("li",{className:"items-list",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"2.5rem",height:"2.5rem"}}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"skeleton-element mb-2",style:{width:"140px",height:"1rem"}}),i.jsx("div",{className:"skeleton-element",style:{width:"100px",height:"0.875rem"}})]})]})})},`skeleton-${c}`))}):e.length>0?i.jsx("ul",{id:"upcoming-appointments",className:"list-inline p-0 m-0",children:e.map((o,c)=>i.jsx("li",{className:"items-list",children:n(o)},c))}):i.jsx("div",{className:"d-flex align-items-center justify-content-center p-3",style:{minHeight:"19rem"},children:i.jsx("p",{className:"text-muted mb-0",children:l})})})})})]});function Ym(t){return t+.5|0}const Qr=(t,e,n)=>Math.max(Math.min(t,n),e);function Bd(t){return Qr(Ym(t*2.55),0,255)}function cl(t){return Qr(Ym(t*255),0,255)}function mr(t){return Qr(Ym(t/2.55)/100,0,1)}function _0(t){return Qr(Ym(t*100),0,100)}const Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Kx=[..."0123456789ABCDEF"],p$=t=>Kx[t&15],g$=t=>Kx[(t&240)>>4]+Kx[t&15],Hu=t=>(t&240)>>4===(t&15),f$=t=>Hu(t.r)&&Hu(t.g)&&Hu(t.b)&&Hu(t.a);function v$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Os[t[1]]*17,g:255&Os[t[2]]*17,b:255&Os[t[3]]*17,a:e===5?Os[t[4]]*17:255}:(e===7||e===9)&&(n={r:Os[t[1]]<<4|Os[t[2]],g:Os[t[3]]<<4|Os[t[4]],b:Os[t[5]]<<4|Os[t[6]],a:e===9?Os[t[7]]<<4|Os[t[8]]:255})),n}const x$=(t,e)=>t<255?e(t):"";function y$(t){var e=f$(t)?p$:g$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+x$(t.a,e):void 0}const b$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function F2(t,e,n){const s=e*Math.min(n,1-n),a=(l,o=(l+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function w$(t,e,n){const s=(a,l=(a+t/60)%6)=>n-n*e*Math.max(Math.min(l,4-l,1),0);return[s(5),s(3),s(1)]}function k$(t,e,n){const s=F2(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function j$(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function Zb(t){const n=t.r/255,s=t.g/255,a=t.b/255,l=Math.max(n,s,a),o=Math.min(n,s,a),c=(l+o)/2;let d,m,u;return l!==o&&(u=l-o,m=c>.5?u/(2-l-o):u/(l+o),d=j$(n,s,a,u,l),d=d*60+.5),[d|0,m||0,c]}function Xb(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(cl)}function Jb(t,e,n){return Xb(F2,t,e,n)}function N$(t,e,n){return Xb(k$,t,e,n)}function C$(t,e,n){return Xb(w$,t,e,n)}function L2(t){return(t%360+360)%360}function S$(t){const e=b$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Bd(+e[5]):cl(+e[5]));const a=L2(+e[2]),l=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=N$(a,l,o):e[1]==="hsv"?s=C$(a,l,o):s=Jb(a,l,o),{r:s[0],g:s[1],b:s[2],a:n}}function _$(t,e){var n=Zb(t);n[0]=L2(n[0]+e),n=Jb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function E$(t){if(!t)return;const e=Zb(t),n=e[0],s=_0(e[1]),a=_0(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${mr(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const E0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function T$(){const t={},e=Object.keys(T0),n=Object.keys(E0);let s,a,l,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],a=0;a<n.length;a++)l=n[a],c=c.replace(l,E0[l]);l=parseInt(T0[o],16),t[c]=[l>>16&255,l>>8&255,l&255]}return t}let zu;function A$(t){zu||(zu=T$(),zu.transparent=[0,0,0,0]);const e=zu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const D$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R$(t){const e=D$.exec(t);let n=255,s,a,l;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Bd(o):Qr(o*255,0,255)}return s=+e[1],a=+e[3],l=+e[5],s=255&(e[2]?Bd(s):Qr(s,0,255)),a=255&(e[4]?Bd(a):Qr(a,0,255)),l=255&(e[6]?Bd(l):Qr(l,0,255)),{r:s,g:a,b:l,a:n}}}function P$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const dv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Wo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function M$(t,e,n){const s=Wo(mr(t.r)),a=Wo(mr(t.g)),l=Wo(mr(t.b));return{r:cl(dv(s+n*(Wo(mr(e.r))-s))),g:cl(dv(a+n*(Wo(mr(e.g))-a))),b:cl(dv(l+n*(Wo(mr(e.b))-l))),a:t.a+n*(e.a-t.a)}}function Vu(t,e,n){if(t){let s=Zb(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Jb(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function $2(t,e){return t&&Object.assign(e||{},t)}function A0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=cl(t[3]))):(e=$2(t,{r:0,g:0,b:0,a:1}),e.a=cl(e.a)),e}function I$(t){return t.charAt(0)==="r"?R$(t):S$(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let s;n==="object"?s=A0(e):n==="string"&&(s=v$(e)||A$(e)||I$(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=$2(this._rgb);return e&&(e.a=mr(e.a)),e}set rgb(e){this._rgb=A0(e)}rgbString(){return this._valid?P$(this._rgb):void 0}hexString(){return this._valid?y$(this._rgb):void 0}hslString(){return this._valid?E$(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let l;const o=n===l?.5:n,c=2*o-1,d=s.a-a.a,m=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;l=1-m,s.r=255&m*s.r+l*a.r+.5,s.g=255&m*s.g+l*a.g+.5,s.b=255&m*s.b+l*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=M$(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=cl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ym(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vu(this._rgb,2,e),this}darken(e){return Vu(this._rgb,2,-e),this}saturate(e){return Vu(this._rgb,1,e),this}desaturate(e){return Vu(this._rgb,1,-e),this}rotate(e){return _$(this._rgb,e),this}}function ar(){}const O$=(()=>{let t=0;return()=>t++})();function An(t){return t==null}function hi(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function an(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _a(t,e){return Xs(t)?t:e}function sn(t,e){return typeof t>"u"?e:t}const F$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,B2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Nn(t,e,n,s){let a,l,o;if(hi(t))for(l=t.length,a=0;a<l;a++)e.call(n,t[a],a);else if(an(t))for(o=Object.keys(t),l=o.length,a=0;a<l;a++)e.call(n,t[o[a]],o[a])}function gp(t,e){let n,s,a,l;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],l=e[n],a.datasetIndex!==l.datasetIndex||a.index!==l.index)return!1;return!0}function fp(t){if(hi(t))return t.map(fp);if(an(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=fp(t[n[a]]);return e}return t}function q2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function L$(t,e,n,s){if(!q2(t))return;const a=e[t],l=n[t];an(a)&&an(l)?wm(a,l,s):e[t]=fp(l)}function wm(t,e,n){const s=hi(e)?e:[e],a=s.length;if(!an(t))return t;n=n||{};const l=n.merger||L$;let o;for(let c=0;c<a;++c){if(o=s[c],!an(o))continue;const d=Object.keys(o);for(let m=0,u=d.length;m<u;++m)l(d[m],t,o,n)}return t}function em(t,e){return wm(t,e,{merger:$$})}function $$(t,e,n){if(!q2(t))return;const s=e[t],a=n[t];an(s)&&an(a)?em(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=fp(a))}const D0={"":t=>t,x:t=>t.x,y:t=>t.y};function B$(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function q$(t){const e=B$(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function so(t,e){return(D0[e]||(D0[e]=q$(e)))(t)}function ew(t){return t.charAt(0).toUpperCase()+t.slice(1)}const km=t=>typeof t<"u",gl=t=>typeof t=="function",R0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function H$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Tn=Math.PI,ci=2*Tn,vp=Number.POSITIVE_INFINITY,z$=Tn/180,pi=Tn/2,Rl=Tn/4,P0=Tn*2/3,H2=Math.log10,dl=Math.sign;function Mh(t,e,n){return Math.abs(t-e)<n}function M0(t){const e=Math.round(t);t=Mh(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(H2(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function V$(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,l)=>a-l).pop(),e}function U$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function xp(t){return!U$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function W$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function K$(t,e,n){let s,a,l;for(s=0,a=t.length;s<a;s++)l=t[s][n],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function hr(t){return t*(Tn/180)}function G$(t){return t*(180/Tn)}function I0(t){if(!Xs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function z2(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let l=Math.atan2(s,n);return l<-.5*Tn&&(l+=ci),{angle:l,distance:a}}function Y$(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Aa(t){return(t%ci+ci)%ci}function yp(t,e,n,s){const a=Aa(t),l=Aa(e),o=Aa(n),c=Aa(l-a),d=Aa(o-a),m=Aa(a-l),u=Aa(a-o);return a===l||a===o||s&&l===o||c>d&&m<u}function rs(t,e,n){return Math.max(e,Math.min(n,t))}function Q$(t){return rs(t,-32768,32767)}function zl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function tw(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,a=0,l;for(;s-a>1;)l=a+s>>1,n(l)?a=l:s=l;return{lo:a,hi:s}}const Gx=(t,e,n,s)=>tw(t,n,s?a=>{const l=t[a][e];return l<n||l===n&&t[a+1][e]===n}:a=>t[a][e]<n),Z$=(t,e,n)=>tw(t,n,s=>t[s][e]>=n);function X$(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const V2=["push","pop","shift","splice","unshift"];function J$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),V2.forEach(n=>{const s="_onData"+ew(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...l){const o=a.apply(this,l);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...l)}),o}})})}function O0(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(V2.forEach(l=>{delete t[l]}),delete t._chartjs)}function U2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const W2=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function K2(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,W2.call(window,()=>{s=!1,t.apply(e,n)}))}}function eB(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const nw=t=>t==="start"?"left":t==="end"?"right":"center",Di=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,tB=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Uu=t=>t===0||t===1,F0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ci/n)),L0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ci/n)+1,tm={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pi)+1,easeOutSine:t=>Math.sin(t*pi),easeInOutSine:t=>-.5*(Math.cos(Tn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Uu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Uu(t)?t:F0(t,.075,.3),easeOutElastic:t=>Uu(t)?t:L0(t,.075,.3),easeInOutElastic(t){return Uu(t)?t:t<.5?.5*F0(t*2,.1125,.45):.5+.5*L0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tm.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tm.easeInBounce(t*2)*.5:tm.easeOutBounce(t*2-1)*.5+.5};function G2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $0(t){return G2(t)?t:new bm(t)}function mv(t){return G2(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const nB=["x","y","borderWidth","radius","tension"],iB=["color","borderColor","backgroundColor"];function sB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iB},numbers:{type:"number",properties:nB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function aB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const B0=new Map;function rB(t,e){e=e||{};const n=t+JSON.stringify(e);let s=B0.get(n);return s||(s=new Intl.NumberFormat(t,e),B0.set(n,s)),s}function iw(t,e,n){return rB(e,n).format(t)}const lB={values(t){return hi(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,l=t;if(n.length>1){const m=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),l=oB(t,n)}const o=H2(Math.abs(l)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),iw(t,s,d)}};function oB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Y2={formatters:lB};function cB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Y2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ao=Object.create(null),Yx=Object.create(null);function nm(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const l=n[s];t=t[l]||(t[l]=Object.create(null))}return t}function uv(t,e,n){return typeof e=="string"?wm(nm(t,e),n):wm(nm(t,""),e)}class dB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>mv(a.backgroundColor),this.hoverBorderColor=(s,a)=>mv(a.borderColor),this.hoverColor=(s,a)=>mv(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return uv(this,e,n)}get(e){return nm(this,e)}describe(e,n){return uv(Yx,e,n)}override(e,n){return uv(ao,e,n)}route(e,n,s,a){const l=nm(this,e),o=nm(this,s),c="_"+n;Object.defineProperties(l,{[c]:{value:l[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[c],m=o[a];return an(d)?Object.assign({},m,d):sn(d,m)},set(d){this[c]=d}}})}apply(e){e.forEach(n=>n(this))}}var si=new dB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sB,aB,cB]);function mB(t){return!t||An(t.size)||An(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function q0(t,e,n,s,a){let l=e[a];return l||(l=e[a]=t.measureText(a).width,n.push(a)),l>s&&(s=l),s}function Pl(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function H0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function z0(t,e,n,s){Q2(t,e,n,s,null)}function Q2(t,e,n,s,a){let l,o,c,d,m,u,p,h;const g=e.pointStyle,x=e.rotation,v=e.radius;let y=(x||0)*z$;if(g&&typeof g=="object"&&(l=g.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:a?t.ellipse(n,s,a/2,v,0,0,ci):t.arc(n,s,v,0,ci),t.closePath();break;case"triangle":u=a?a/2:v,t.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*v),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*v),y+=P0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*v),t.closePath();break;case"rectRounded":m=v*.516,d=v-m,o=Math.cos(y+Rl)*d,p=Math.cos(y+Rl)*(a?a/2-m:d),c=Math.sin(y+Rl)*d,h=Math.sin(y+Rl)*(a?a/2-m:d),t.arc(n-p,s-c,m,y-Tn,y-pi),t.arc(n+h,s-o,m,y-pi,y),t.arc(n+p,s+c,m,y,y+pi),t.arc(n-h,s+o,m,y+pi,y+Tn),t.closePath();break;case"rect":if(!x){d=Math.SQRT1_2*v,u=a?a/2:d,t.rect(n-u,s-d,2*u,2*d);break}y+=Rl;case"rectRot":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+h,s-o),t.lineTo(n+p,s+c),t.lineTo(n-h,s+o),t.closePath();break;case"crossRot":y+=Rl;case"cross":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"star":p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o),y+=Rl,p=Math.cos(y)*(a?a/2:v),o=Math.cos(y)*v,c=Math.sin(y)*v,h=Math.sin(y)*(a?a/2:v),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"line":o=a?a/2:Math.cos(y)*v,c=Math.sin(y)*v,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(a?a/2:v),s+Math.sin(y)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Z2(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function sw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function aw(t){t.restore()}function uB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),An(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function hB(t,e,n,s,a){if(a.strikethrough||a.underline){const l=t.measureText(s),o=e-l.actualBoundingBoxLeft,c=e+l.actualBoundingBoxRight,d=n-l.actualBoundingBoxAscent,m=n+l.actualBoundingBoxDescent,u=a.strikethrough?(d+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,u),t.lineTo(c,u),t.stroke()}}function pB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jm(t,e,n,s,a,l={}){const o=hi(e)?e:[e],c=l.strokeWidth>0&&l.strokeColor!=="";let d,m;for(t.save(),t.font=a.string,uB(t,l),d=0;d<o.length;++d)m=o[d],l.backdrop&&pB(t,l.backdrop),c&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),An(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(m,n,s,l.maxWidth)),t.fillText(m,n,s,l.maxWidth),hB(t,n,s,m,l),s+=Number(a.lineHeight);t.restore()}function bp(t,e){const{x:n,y:s,w:a,h:l,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Tn,Tn,!0),t.lineTo(n,s+l-o.bottomLeft),t.arc(n+o.bottomLeft,s+l-o.bottomLeft,o.bottomLeft,Tn,pi,!0),t.lineTo(n+a-o.bottomRight,s+l),t.arc(n+a-o.bottomRight,s+l-o.bottomRight,o.bottomRight,pi,0,!0),t.lineTo(n+a,s+o.topRight),t.arc(n+a-o.topRight,s+o.topRight,o.topRight,0,-pi,!0),t.lineTo(n+o.topLeft,s)}const gB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vB(t,e){const n=(""+t).match(gB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const xB=t=>+t||0;function rw(t,e){const n={},s=an(e),a=s?Object.keys(e):e,l=an(t)?s?o=>sn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)n[o]=xB(l(o));return n}function X2(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pc(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Js(t){const e=X2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fi(t,e){t=t||{},e=e||si.font;let n=sn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=sn(t.style,e.style);s&&!(""+s).match(fB)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:sn(t.family,e.family),lineHeight:vB(sn(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:sn(t.weight,e.weight),string:""};return a.string=mB(a),a}function Wu(t,e,n,s){let a,l,o;for(a=0,l=t.length;a<l;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function yB(t,e,n){const{min:s,max:a}=t,l=B2(e,(a-s)/2),o=(c,d)=>n&&c===0?0:c+d;return{min:o(s,-Math.abs(l)),max:o(a,l)}}function Qc(t,e){return Object.assign(Object.create(t),e)}function lw(t,e=[""],n,s,a=()=>t[0]){const l=n||t;typeof s>"u"&&(s=nT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:s,_getTarget:a,override:c=>lw([c,...t],e,l,s)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete t[0][d],!0},get(c,d){return eT(c,d,()=>_B(d,e,t,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,d){return U0(c).includes(d)},ownKeys(c){return U0(c)},set(c,d,m){const u=c._storage||(c._storage=a());return c[d]=u[d]=m,delete c._keys,!0}})}function Pc(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:J2(t,s),setContext:l=>Pc(t,l,n,s),override:l=>Pc(t.override(l),e,n,s)};return new Proxy(a,{deleteProperty(l,o){return delete l[o],delete t[o],!0},get(l,o,c){return eT(l,o,()=>wB(l,o,c))},getOwnPropertyDescriptor(l,o){return l._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(l,o,c){return t[o]=c,delete l[o],!0}})}function J2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:gl(n)?n:()=>n,isIndexable:gl(s)?s:()=>s}}const bB=(t,e)=>t?t+ew(e):e,ow=(t,e)=>an(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function eT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function wB(t,e,n){const{_proxy:s,_context:a,_subProxy:l,_descriptors:o}=t;let c=s[e];return gl(c)&&o.isScriptable(e)&&(c=kB(e,c,t,n)),hi(c)&&c.length&&(c=jB(e,c,t,o.isIndexable)),ow(e,c)&&(c=Pc(c,a,l&&l[e],o)),c}function kB(t,e,n,s){const{_proxy:a,_context:l,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let d=e(l,o||s);return c.delete(t),ow(t,d)&&(d=cw(a._scopes,a,t,d)),d}function jB(t,e,n,s){const{_proxy:a,_context:l,_subProxy:o,_descriptors:c}=n;if(typeof l.index<"u"&&s(t))return e[l.index%e.length];if(an(e[0])){const d=e,m=a._scopes.filter(u=>u!==d);e=[];for(const u of d){const p=cw(m,a,t,u);e.push(Pc(p,l,o&&o[t],c))}}return e}function tT(t,e,n){return gl(t)?t(e,n):t}const NB=(t,e)=>t===!0?e:typeof t=="string"?so(e,t):void 0;function CB(t,e,n,s,a){for(const l of e){const o=NB(n,l);if(o){t.add(o);const c=tT(o._fallback,n,a);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function cw(t,e,n,s){const a=e._rootScopes,l=tT(e._fallback,n,s),o=[...t,...a],c=new Set;c.add(s);let d=V0(c,o,n,l||n,s);return d===null||typeof l<"u"&&l!==n&&(d=V0(c,o,l,d,s),d===null)?!1:lw(Array.from(c),[""],a,l,()=>SB(e,n,s))}function V0(t,e,n,s,a){for(;n;)n=CB(t,e,n,s,a);return n}function SB(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return hi(a)&&an(n)?n:a||{}}function _B(t,e,n,s){let a;for(const l of e)if(a=nT(bB(l,t),n),typeof a<"u")return ow(t,a)?cw(n,s,t,a):a}function nT(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function U0(t){let e=t._keys;return e||(e=t._keys=EB(t._scopes)),e}function EB(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function dw(){return typeof window<"u"&&typeof document<"u"}function mw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wp(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Rg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function TB(t,e){return Rg(t).getPropertyValue(e)}const AB=["top","right","bottom","left"];function Gl(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const l=AB[a];s[l]=parseFloat(t[e+"-"+l+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const DB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function RB(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:l}=s;let o=!1,c,d;if(DB(a,l,t.target))c=a,d=l;else{const m=e.getBoundingClientRect();c=s.clientX-m.left,d=s.clientY-m.top,o=!0}return{x:c,y:d,box:o}}function Fl(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Rg(n),l=a.boxSizing==="border-box",o=Gl(a,"padding"),c=Gl(a,"border","width"),{x:d,y:m,box:u}=RB(t,n),p=o.left+(u&&c.left),h=o.top+(u&&c.top);let{width:g,height:x}=e;return l&&(g-=o.width+c.width,x-=o.height+c.height),{x:Math.round((d-p)/g*n.width/s),y:Math.round((m-h)/x*n.height/s)}}function PB(t,e,n){let s,a;if(e===void 0||n===void 0){const l=t&&mw(t);if(!l)e=t.clientWidth,n=t.clientHeight;else{const o=l.getBoundingClientRect(),c=Rg(l),d=Gl(c,"border","width"),m=Gl(c,"padding");e=o.width-m.width-d.width,n=o.height-m.height-d.height,s=wp(c.maxWidth,l,"clientWidth"),a=wp(c.maxHeight,l,"clientHeight")}}return{width:e,height:n,maxWidth:s||vp,maxHeight:a||vp}}const Zr=t=>Math.round(t*10)/10;function MB(t,e,n,s){const a=Rg(t),l=Gl(a,"margin"),o=wp(a.maxWidth,t,"clientWidth")||vp,c=wp(a.maxHeight,t,"clientHeight")||vp,d=PB(t,e,n);let{width:m,height:u}=d;if(a.boxSizing==="content-box"){const h=Gl(a,"border","width"),g=Gl(a,"padding");m-=g.width+h.width,u-=g.height+h.height}return m=Math.max(0,m-l.width),u=Math.max(0,s?m/s:u-l.height),m=Zr(Math.min(m,o,d.maxWidth)),u=Zr(Math.min(u,c,d.maxHeight)),m&&!u&&(u=Zr(m/2)),(e!==void 0||n!==void 0)&&s&&d.height&&u>d.height&&(u=d.height,m=Zr(Math.floor(u*s))),{width:m,height:u}}function W0(t,e,n){const s=e||1,a=Zr(t.height*s),l=Zr(t.width*s);t.height=Zr(t.height),t.width=Zr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==a||o.width!==l?(t.currentDevicePixelRatio=s,o.height=a,o.width=l,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const IB=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function K0(t,e){const n=TB(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const OB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},FB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function gc(t,e,n){return t?OB(e,n):FB()}function iT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function sT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ku(t,e,n){return t.options.clip?t[n]:e[n]}function LB(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Ku(n,e,"left"),right:Ku(n,e,"right"),top:Ku(s,e,"top"),bottom:Ku(s,e,"bottom")}:e}function $B(t,e){const n=e._clip;if(n.disabled)return!1;const s=LB(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class BB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const l=n.listeners[a],o=n.duration;l.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=W2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const l=s.items;let o=l.length-1,c=!1,d;for(;o>=0;--o)d=l[o],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),c=!0):(l[o]=l[l.length-1],l.pop());c&&(a.draw(),this._notify(a,s,e,"progress")),l.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=l.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var or=new BB;const G0="transparent",qB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=$0(t||G0),a=s.valid&&$0(e||G0);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class HB{constructor(e,n,s,a){const l=n[s];a=Wu([e.to,a,l,e.from]);const o=Wu([e.from,l,a]);this._active=!0,this._fn=e.fn||qB[e.type||typeof o],this._easing=tm[e.easing]||tm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],l=s-this._start,o=this._duration-l;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Wu([e.to,n,a,e.from]),this._from=Wu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,l=this._from,o=this._loop,c=this._to;let d;if(this._active=l!==c&&(o||n<s),!this._active){this._target[a]=c,this._notify(!0);return}if(n<0){this._target[a]=l;return}d=n/s%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(l,c,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class aT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!an(e))return;const n=Object.keys(si.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const l=e[a];if(!an(l))return;const o={};for(const c of n)o[c]=l[c];(hi(l.properties)&&l.properties||[a]).forEach(c=>{(c===a||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,a=VB(e,s);if(!a)return[];const l=this._createAnimations(a,s);return s.$shared&&zB(e.options.$animations,s).then(()=>{e.options=s},()=>{}),l}_createAnimations(e,n){const s=this._properties,a=[],l=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const m=o[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(e,n));continue}const u=n[m];let p=l[m];const h=s.get(m);if(p)if(h&&p.active()){p.update(h,u,c);continue}else p.cancel();if(!h||!h.duration){e[m]=u;continue}l[m]=p=new HB(h,e,m,u),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return or.add(this._chart,s),!0}}function zB(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const l=t[s[a]];l&&l.active()&&n.push(l.wait())}return Promise.all(n)}function VB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Y0(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,l=n.max===void 0?e:0;return{start:s?l:a,end:s?a:l}}function UB(t,e,n){if(n===!1)return!1;const s=Y0(t,n),a=Y0(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function WB(t){let e,n,s,a;return an(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function rT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,l;for(a=0,l=s.length;a<l;++a)n.push(s[a].index);return n}function Q0(t,e,n,s={}){const a=t.keys,l=s.mode==="single";let o,c,d,m;if(e===null)return;let u=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===n){if(u=!0,s.all)continue;break}m=t.values[d],Xs(m)&&(l||e===0||dl(e)===dl(m))&&(e+=m)}return!u&&!s.all?0:e}function KB(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",l=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let d,m,u;for(d=0,m=o.length;d<m;++d)u=o[d],c[d]={[a]:u,[l]:t[u]};return c}function hv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function GB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function YB(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function QB(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Z0(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const l=t[a.index];if(n&&l>0||!n&&l<0)return a.index}return null}function X0(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:l,vScale:o,index:c}=s,d=l.axis,m=o.axis,u=GB(l,o,s),p=e.length;let h;for(let g=0;g<p;++g){const x=e[g],{[d]:v,[m]:y}=x,b=x._stacks||(x._stacks={});h=b[m]=QB(a,u,v),h[c]=y,h._top=Z0(h,o,!0,s.type),h._bottom=Z0(h,o,!1,s.type);const k=h._visualValues||(h._visualValues={});k[c]=y}}function pv(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function ZB(t,e){return Qc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function XB(t,e,n){return Qc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Nd(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const l=a._stacks;if(!l||l[s]===void 0||l[s][n]===void 0)return;delete l[s][n],l[s]._visualValues!==void 0&&l[s]._visualValues[n]!==void 0&&delete l[s]._visualValues[n]}}}const gv=t=>t==="reset"||t==="none",J0=(t,e)=>e?t:Object.assign({},t),JB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rT(n,!0),values:null};class uw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Nd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(p,h,g,x)=>p==="x"?h:p==="r"?x:g,l=n.xAxisID=sn(s.xAxisID,pv(e,"x")),o=n.yAxisID=sn(s.yAxisID,pv(e,"y")),c=n.rAxisID=sn(s.rAxisID,pv(e,"r")),d=n.indexAxis,m=n.iAxisID=a(d,l,o,c),u=n.vAxisID=a(d,o,l,c);n.xScale=this.getScaleForId(l),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(m),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&O0(this._data,this),e._stacked&&Nd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(an(n)){const a=this._cachedMeta;this._data=KB(n,a)}else if(s!==n){if(s){O0(s,this);const a=this._cachedMeta;Nd(a),a._parsed=[]}n&&Object.isExtensible(n)&&J$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const l=n._stacked;n._stacked=hv(n.vScale,n),n.stack!==s.stack&&(a=!0,Nd(n),n.stack=s.stack),this._resyncElements(e),(a||l!==n._stacked)&&(X0(this,n._parsed),n._stacked=hv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:l,_stacked:o}=s,c=l.axis;let d=e===0&&n===a.length?!0:s._sorted,m=e>0&&s._parsed[e-1],u,p,h;if(this._parsing===!1)s._parsed=a,s._sorted=!0,h=a;else{hi(a[e])?h=this.parseArrayData(s,a,e,n):an(a[e])?h=this.parseObjectData(s,a,e,n):h=this.parsePrimitiveData(s,a,e,n);const g=()=>p[c]===null||m&&p[c]<m[c];for(u=0;u<n;++u)s._parsed[u+e]=p=h[u],d&&(g()&&(d=!1),m=p);s._sorted=d}o&&X0(this,h)}parsePrimitiveData(e,n,s,a){const{iScale:l,vScale:o}=e,c=l.axis,d=o.axis,m=l.getLabels(),u=l===o,p=new Array(a);let h,g,x;for(h=0,g=a;h<g;++h)x=h+s,p[h]={[c]:u||l.parse(m[x],x),[d]:o.parse(n[x],x)};return p}parseArrayData(e,n,s,a){const{xScale:l,yScale:o}=e,c=new Array(a);let d,m,u,p;for(d=0,m=a;d<m;++d)u=d+s,p=n[u],c[d]={x:l.parse(p[0],u),y:o.parse(p[1],u)};return c}parseObjectData(e,n,s,a){const{xScale:l,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let u,p,h,g;for(u=0,p=a;u<p;++u)h=u+s,g=n[h],m[u]={x:l.parse(so(g,c),h),y:o.parse(so(g,d),h)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,l=this._cachedMeta,o=n[e.axis],c={keys:rT(a,!0),values:n._stacks[e.axis]._visualValues};return Q0(c,o,l.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const l=s[n.axis];let o=l===null?NaN:l;const c=a&&s._stacks[n.axis];a&&c&&(a.values=c,o=Q0(a,l,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,l=s._sorted&&e===s.iScale,o=a.length,c=this._getOtherScale(e),d=JB(n,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:p}=YB(c);let h,g;function x(){g=a[h];const v=g[c.axis];return!Xs(g[e.axis])||u>v||p<v}for(h=0;h<o&&!(!x()&&(this.updateRangeFromParsed(m,e,g,d),l));++h);if(l){for(h=o-1;h>=0;--h)if(!x()){this.updateRangeFromParsed(m,e,g,d);break}}return m}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,l,o;for(a=0,l=n.length;a<l;++a)o=n[a][e.axis],Xs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,l=this.getParsed(e);return{label:s?""+s.getLabelForValue(l[s.axis]):"",value:a?""+a.getLabelForValue(l[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=WB(sn(this.options.clip,UB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],l=n.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,m=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,l,c,d),u=c;u<c+d;++u){const p=a[u];p.hidden||(p.active&&m?o.push(p):p.draw(e,l))}for(u=0;u<o.length;++u)o[u].draw(e,l)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];l=o.$context||(o.$context=XB(this.getContext(),e,o)),l.parsed=this.getParsed(e),l.raw=a.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=ZB(this.chart.getContext(),this.index)),l.dataset=a,l.index=l.datasetIndex=this.index;return l.active=!!n,l.mode=s,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",l=this._cachedDataOpts,o=e+"-"+n,c=l[o],d=this.enableOptionSharing&&km(s);if(c)return J0(c,d);const m=this.chart.config,u=m.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],h=m.getOptionScopes(this.getDataset(),u),g=Object.keys(si.elements[e]),x=()=>this.getContext(s,a,n),v=m.resolveNamedOptions(h,g,x,p);return v.$shared&&(v.$shared=d,l[o]=Object.freeze(J0(v,d))),v}_resolveAnimations(e,n,s){const a=this.chart,l=this._cachedDataOpts,o=`animation-${n}`,c=l[o];if(c)return c;let d;if(a.options.animation!==!1){const u=this.chart.config,p=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),p);d=u.createResolver(h,this.getContext(e,s,n))}const m=new aT(a,d&&d.animations);return d&&d._cacheable&&(l[o]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||gv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,l=this.getSharedOptions(s),o=this.includeOptions(n,l)||l!==a;return this.updateSharedOptions(l,n,s),{sharedOptions:l,includeOptions:o}}updateElement(e,n,s,a){gv(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!gv(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const l=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(l)||l})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,d,m]of this._syncList)this[c](d,m);this._syncList=[];const a=s.length,l=n.length,o=Math.min(l,a);o&&this.parse(0,o),l>a?this._insertElements(a,l-a,e):l<a&&this._removeElements(l,a-l)}_insertElements(e,n,s=!0){const a=this._cachedMeta,l=a.data,o=e+n;let c;const d=m=>{for(m.length+=n,c=m.length-1;c>=o;c--)m[c]=m[c-n]};for(d(l),c=e;c<o;++c)l[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),s&&this.updateElements(l,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&Nd(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function e8(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,l=n.length;a<l;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=U2(s.sort((a,l)=>a-l))}return t._cache.$bar}function t8(t){const e=t.iScale,n=e8(e,t.type);let s=e._length,a,l,o,c;const d=()=>{o===32767||o===-32768||(km(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(a=0,l=n.length;a<l;++a)o=e.getPixelForValue(n[a]),d();for(c=void 0,a=0,l=e.ticks.length;a<l;++a)o=e.getPixelForTick(a),d();return s}function n8(t,e,n,s){const a=n.barThickness;let l,o;return An(a)?(l=e.min*n.categoryPercentage,o=n.barPercentage):(l=a*s,o=1),{chunk:l/s,ratio:o,start:e.pixels[t]-l/2}}function i8(t,e,n,s){const a=e.pixels,l=a[t];let o=t>0?a[t-1]:null,c=t<a.length-1?a[t+1]:null;const d=n.categoryPercentage;o===null&&(o=l-(c===null?e.end-e.start:c-l)),c===null&&(c=l+l-o);const m=l-(l-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/s,ratio:n.barPercentage,start:m}}function s8(t,e,n,s){const a=n.parse(t[0],s),l=n.parse(t[1],s),o=Math.min(a,l),c=Math.max(a,l);let d=o,m=c;Math.abs(o)>Math.abs(c)&&(d=c,m=o),e[n.axis]=m,e._custom={barStart:d,barEnd:m,start:a,end:l,min:o,max:c}}function lT(t,e,n,s){return hi(t)?s8(t,e,n,s):e[n.axis]=n.parse(t,s),e}function eN(t,e,n,s){const a=t.iScale,l=t.vScale,o=a.getLabels(),c=a===l,d=[];let m,u,p,h;for(m=n,u=n+s;m<u;++m)h=e[m],p={},p[a.axis]=c||a.parse(o[m],m),d.push(lT(h,p,l,m));return d}function fv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function a8(t,e,n){return t!==0?dl(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function r8(t){let e,n,s,a,l;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",l="start"):(a="start",l="end"),{start:n,end:s,reverse:e,top:a,bottom:l}}function l8(t,e,n,s){let a=e.borderSkipped;const l={};if(!a){t.borderSkipped=l;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:d,top:m,bottom:u}=r8(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=m:(n._bottom||0)===s?a=u:(l[tN(u,o,c,d)]=!0,a=m)),l[tN(a,o,c,d)]=!0,t.borderSkipped=l}function tN(t,e,n,s){return s?(t=o8(t,e,n),t=nN(t,n,e)):t=nN(t,e,n),t}function o8(t,e,n){return t===e?n:t===n?e:t}function nN(t,e,n){return t==="start"?e:t==="end"?n:t}function c8(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class d8 extends uw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return eN(e,n,s,a)}parseArrayData(e,n,s,a){return eN(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:l,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=l.axis==="x"?c:d,u=o.axis==="x"?c:d,p=[];let h,g,x,v;for(h=s,g=s+a;h<g;++h)v=n[h],x={},x[l.axis]=l.parse(so(v,m),h),p.push(lT(so(v,u),x,o,h));return p}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const l=s._custom;l&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,l=this.getParsed(e),o=l._custom,c=fv(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(l[a.axis]);return{label:""+s.getLabelForValue(l[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const l=a==="reset",{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),m=c.isHorizontal(),u=this._getRuler(),{sharedOptions:p,includeOptions:h}=this._getSharedOptions(n,a);for(let g=n;g<n+s;g++){const x=this.getParsed(g),v=l||An(x[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),b=(x._stacks||{})[c.axis],k={horizontal:m,base:v.base,enableBorderRadius:!b||fv(x._custom)||o===b._top||o===b._bottom,x:m?v.head:y.center,y:m?y.center:v.head,height:m?y.size:Math.abs(v.size),width:m?Math.abs(v.size):y.size};h&&(k.options=p||this.resolveDataElementOptions(g,e[g].active?"active":a));const w=k.options||e[g].options;l8(k,w,b,o),c8(k,w,u.ratio),this.updateElement(e[g],g,k,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),l=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),d=c&&c[s.axis],m=u=>{const p=u._parsed.find(g=>g[s.axis]===d),h=p&&p[u.vScale.axis];if(An(h)||isNaN(h))return!0};for(const u of a)if(!(n!==void 0&&m(u))&&((l===!1||o.indexOf(u.stack)===-1||l===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[sn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),l=n!==void 0?a.indexOf(n):-1;return l===-1?a.length-1:l}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let l,o;for(l=0,o=n.data.length;l<o;++l)a.push(s.getPixelForValue(this.getParsed(l)[s.axis],l));const c=e.barThickness;return{min:c||t8(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:l,minBarLength:o}}=this,c=l||0,d=this.getParsed(e),m=d._custom,u=fv(m);let p=d[n.axis],h=0,g=s?this.applyStack(n,d,s):p,x,v;g!==p&&(h=g-p,g=p),u&&(p=m.barStart,g=m.barEnd-m.barStart,p!==0&&dl(p)!==dl(m.barEnd)&&(h=0),h+=p);const y=!An(l)&&!u?l:h;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(h+g):x=b,v=x-b,Math.abs(v)<o){v=a8(v,n,c)*o,p===c&&(b-=v/2);const k=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(k,w),j=Math.max(k,w);b=Math.max(Math.min(b,j),S),x=b+v,s&&!u&&(d._stacks[n.axis]._visualValues[a]=n.getValueForPixel(x)-n.getValueForPixel(b))}if(b===n.getPixelForValue(c)){const k=dl(v)*n.getLineWidthForValue(c)/2;b+=k,v-=k}return{size:v,base:b,head:x,center:x+v/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,l=a.skipNull,o=sn(a.maxBarThickness,1/0);let c,d;const m=this._getAxisCount();if(n.grouped){const u=l?this._getStackCount(e):n.stackCount,p=a.barThickness==="flex"?i8(e,n,a,u*m):n8(e,n,a,u*m),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(sn(h,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+g;c=p.start+p.chunk*x+p.chunk/2,d=Math.min(o,p.chunk*p.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(o,n.min*n.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let l=0;for(;l<a;++l)this.getParsed(l)[n.axis]!==null&&!s[l].hidden&&s[l].draw(this._ctx)}}function m8(t,e,n){let s=1,a=1,l=0,o=0;if(e<ci){const c=t,d=c+e,m=Math.cos(c),u=Math.sin(c),p=Math.cos(d),h=Math.sin(d),g=(w,S,j)=>yp(w,c,d,!0)?1:Math.max(S,S*n,j,j*n),x=(w,S,j)=>yp(w,c,d,!0)?-1:Math.min(S,S*n,j,j*n),v=g(0,m,p),y=g(pi,u,h),b=x(Tn,m,p),k=x(Tn+pi,u,h);s=(v-b)/2,a=(y-k)/2,l=-(v+b)/2,o=-(y+k)/2}return{ratioX:s,ratioY:a,offsetX:l,offsetY:o}}class u8 extends uw{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:l,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((d,m)=>{const p=e.getDatasetMeta(0).controller.getStyle(m);return{text:d,fillStyle:p.backgroundColor,fontColor:l,hidden:!e.getDataVisibility(m),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:a,pointStyle:s,borderRadius:o&&(c||p.borderRadius),index:m}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let l=d=>+s[d];if(an(s[e])){const{key:d="value"}=this._parsing;l=m=>+so(s[m],d)}let o,c;for(o=e,c=e+n;o<c;++o)a._parsed[o]=l(o)}}_getRotation(){return hr(this.options.rotation-90)}_getCircumference(){return hr(this.options.circumference)}_getRotationExtents(){let e=ci,n=-ci;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,l=a._getRotation(),o=a._getCircumference();e=Math.min(e,l),n=Math.max(n,l+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,l=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),d=Math.min(F$(this.options.cutout,c),1),m=this._getRingWeight(this.index),{circumference:u,rotation:p}=this._getRotationExtents(),{ratioX:h,ratioY:g,offsetX:x,offsetY:v}=m8(p,u,d),y=(s.width-o)/h,b=(s.height-o)/g,k=Math.max(Math.min(y,b)/2,0),w=B2(this.options.radius,k),S=Math.max(w*d,0),j=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=x*w,this.offsetY=v*w,a.total=this.calculateTotal(),this.outerRadius=w-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*m,0),this.updateElements(l,0,l.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,l=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*l/ci)}updateElements(e,n,s,a){const l=a==="reset",o=this.chart,c=o.chartArea,m=o.options.animation,u=(c.left+c.right)/2,p=(c.top+c.bottom)/2,h=l&&m.animateScale,g=h?0:this.innerRadius,x=h?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(n,a);let b=this._getRotation(),k;for(k=0;k<n;++k)b+=this._circumference(k,l);for(k=n;k<n+s;++k){const w=this._circumference(k,l),S=e[k],j={x:u+this.offsetX,y:p+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:x,innerRadius:g};y&&(j.options=v||this.resolveDataElementOptions(k,S.active?"active":a)),b+=w,this.updateElement(S,k,j,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const l=e._parsed[a];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(l))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ci*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],l=iw(n._parsed[e],s.options.locale);return{label:a[e]||"",value:l}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,l,o,c,d;if(!e){for(a=0,l=s.data.datasets.length;a<l;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,c=o.controller;break}}if(!e)return 0;for(a=0,l=e.length;a<l;++a)d=c.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const l=this.resolveDataElementOptions(s);n=Math.max(n,l.offset||0,l.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(sn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Ml(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hw{static override(e){Object.assign(hw.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ml()}parse(){return Ml()}format(){return Ml()}add(){return Ml()}diff(){return Ml()}startOf(){return Ml()}endOf(){return Ml()}}var h8={_date:hw};function p8(t,e,n,s){const{controller:a,data:l,_sorted:o}=t,c=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&l.length){const m=c._reversePixels?Z$:Gx;if(s){if(a._sharedOptions){const u=l[0],p=typeof u.getRange=="function"&&u.getRange(e);if(p){const h=m(l,e,n-p),g=m(l,e,n+p);return{lo:h.lo,hi:g.hi}}}}else{const u=m(l,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:h}=t,g=h.slice(0,u.lo+1).reverse().findIndex(v=>!An(v[p.axis]));u.lo-=Math.max(0,g);const x=h.slice(u.hi).findIndex(v=>!An(v[p.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:l.length-1}}function Pg(t,e,n,s,a){const l=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,d=l.length;c<d;++c){const{index:m,data:u}=l[c],{lo:p,hi:h}=p8(l[c],e,o,a);for(let g=p;g<=h;++g){const x=u[g];x.skip||s(x,m,g)}}}function g8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const l=e?Math.abs(s.x-a.x):0,o=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(o,2))}}function vv(t,e,n,s,a){const l=[];return!a&&!t.isPointInArea(e)||Pg(t,n,e,function(c,d,m){!a&&!Z2(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&l.push({element:c,datasetIndex:d,index:m})},!0),l}function f8(t,e,n,s){let a=[];function l(o,c,d){const{startAngle:m,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:p}=z2(o,{x:e.x,y:e.y});yp(p,m,u)&&a.push({element:o,datasetIndex:c,index:d})}return Pg(t,n,e,l),a}function v8(t,e,n,s,a,l){let o=[];const c=g8(n);let d=Number.POSITIVE_INFINITY;function m(u,p,h){const g=u.inRange(e.x,e.y,a);if(s&&!g)return;const x=u.getCenterPoint(a);if(!(!!l||t.isPointInArea(x))&&!g)return;const y=c(e,x);y<d?(o=[{element:u,datasetIndex:p,index:h}],d=y):y===d&&o.push({element:u,datasetIndex:p,index:h})}return Pg(t,n,e,m),o}function xv(t,e,n,s,a,l){return!l&&!t.isPointInArea(e)?[]:n==="r"&&!s?f8(t,e,n,a):v8(t,e,n,s,a,l)}function iN(t,e,n,s,a){const l=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Pg(t,n,e,(d,m,u)=>{d[o]&&d[o](e[n],a)&&(l.push({element:d,datasetIndex:m,index:u}),c=c||d.inRange(e.x,e.y,a))}),s&&!c?[]:l}var x8={modes:{index(t,e,n,s){const a=Fl(e,t),l=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?vv(t,a,l,s,o):xv(t,a,l,!1,s,o),d=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const u=c[0].index,p=m.data[u];p&&!p.skip&&d.push({element:p,datasetIndex:m.index,index:u})}),d):[]},dataset(t,e,n,s){const a=Fl(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?vv(t,a,l,s,o):xv(t,a,l,!1,s,o);if(c.length>0){const d=c[0].datasetIndex,m=t.getDatasetMeta(d).data;c=[];for(let u=0;u<m.length;++u)c.push({element:m[u],datasetIndex:d,index:u})}return c},point(t,e,n,s){const a=Fl(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;return vv(t,a,l,s,o)},nearest(t,e,n,s){const a=Fl(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;return xv(t,a,l,n.intersect,s,o)},x(t,e,n,s){const a=Fl(e,t);return iN(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Fl(e,t);return iN(t,a,"y",n.intersect,s)}}};const oT=["left","top","right","bottom"];function Cd(t,e){return t.filter(n=>n.pos===e)}function sN(t,e){return t.filter(n=>oT.indexOf(n.pos)===-1&&n.box.axis===e)}function Sd(t,e){return t.sort((n,s)=>{const a=e?s:n,l=e?n:s;return a.weight===l.weight?a.index-l.index:a.weight-l.weight})}function y8(t){const e=[];let n,s,a,l,o,c;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:l,options:{stack:o,stackWeight:c=1}}=a,e.push({index:n,box:a,pos:l,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&l+o,stackWeight:c});return e}function b8(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:l}=n;if(!s||!oT.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=l}return e}function w8(t,e){const n=b8(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let l,o,c;for(l=0,o=t.length;l<o;++l){c=t[l];const{fullSize:d}=c.box,m=n[c.stack],u=m&&c.stackWeight/m.weight;c.horizontal?(c.width=u?u*s:d&&e.availableWidth,c.height=a):(c.width=s,c.height=u?u*a:d&&e.availableHeight)}return n}function k8(t){const e=y8(t),n=Sd(e.filter(m=>m.box.fullSize),!0),s=Sd(Cd(e,"left"),!0),a=Sd(Cd(e,"right")),l=Sd(Cd(e,"top"),!0),o=Sd(Cd(e,"bottom")),c=sN(e,"x"),d=sN(e,"y");return{fullSize:n,leftAndTop:s.concat(l),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:Cd(e,"chartArea"),vertical:s.concat(a).concat(d),horizontal:l.concat(o).concat(c)}}function aN(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function cT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function j8(t,e,n,s){const{pos:a,box:l}=n,o=t.maxPadding;if(!an(a)){n.size&&(t[a]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?l.height:l.width),n.size=p.size/p.count,t[a]+=n.size}l.getPadding&&cT(o,l.getPadding());const c=Math.max(0,e.outerWidth-aN(o,t,"left","right")),d=Math.max(0,e.outerHeight-aN(o,t,"top","bottom")),m=c!==t.w,u=d!==t.h;return t.w=c,t.h=d,n.horizontal?{same:m,other:u}:{same:u,other:m}}function N8(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function C8(t,e){const n=e.maxPadding;function s(a){const l={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{l[o]=Math.max(e[o],n[o])}),l}return s(t?["left","right"]:["top","bottom"])}function qd(t,e,n,s){const a=[];let l,o,c,d,m,u;for(l=0,o=t.length,m=0;l<o;++l){c=t[l],d=c.box,d.update(c.width||e.w,c.height||e.h,C8(c.horizontal,e));const{same:p,other:h}=j8(e,n,c,s);m|=p&&a.length,u=u||h,d.fullSize||a.push(c)}return m&&qd(a,e,n,s)||u}function Gu(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function rN(t,e,n,s){const a=n.padding;let{x:l,y:o}=e;for(const c of t){const d=c.box,m=s[c.stack]||{placed:0,weight:1},u=c.stackWeight/m.weight||1;if(c.horizontal){const p=e.w*u,h=m.size||d.height;km(m.start)&&(o=m.start),d.fullSize?Gu(d,a.left,o,n.outerWidth-a.right-a.left,h):Gu(d,e.left+m.placed,o,p,h),m.start=o,m.placed+=p,o=d.bottom}else{const p=e.h*u,h=m.size||d.width;km(m.start)&&(l=m.start),d.fullSize?Gu(d,l,a.top,h,n.outerHeight-a.bottom-a.top):Gu(d,l,e.top+m.placed,h,p),m.start=l,m.placed+=p,l=d.right}}e.x=l,e.y=o}var Vs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=Js(t.options.layout.padding),l=Math.max(e-a.width,0),o=Math.max(n-a.height,0),c=k8(t.boxes),d=c.vertical,m=c.horizontal;Nn(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=d.reduce((v,y)=>y.box.options&&y.box.options.display===!1?v:v+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:l,availableHeight:o,vBoxMaxWidth:l/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},a);cT(h,Js(s));const g=Object.assign({maxPadding:h,w:l,h:o,x:a.left,y:a.top},a),x=w8(d.concat(m),p);qd(c.fullSize,g,p,x),qd(d,g,p,x),qd(m,g,p,x)&&qd(d,g,p,x),N8(g),rN(c.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,rN(c.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Nn(c.chartArea,v=>{const y=v.box;Object.assign(y,t.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class dT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class S8 extends dT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ih="$chartjs",_8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lN=t=>t===null||t==="";function E8(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[Ih]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",lN(a)){const l=K0(t,"width");l!==void 0&&(t.width=l)}if(lN(s))if(t.style.height==="")t.height=t.width/(e||2);else{const l=K0(t,"height");l!==void 0&&(t.height=l)}return t}const mT=IB?{passive:!0}:!1;function T8(t,e,n){t&&t.addEventListener(e,n,mT)}function A8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,mT)}function D8(t,e){const n=_8[t.type]||t.type,{x:s,y:a}=Fl(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function kp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function R8(t,e,n){const s=t.canvas,a=new MutationObserver(l=>{let o=!1;for(const c of l)o=o||kp(c.addedNodes,s),o=o&&!kp(c.removedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function P8(t,e,n){const s=t.canvas,a=new MutationObserver(l=>{let o=!1;for(const c of l)o=o||kp(c.removedNodes,s),o=o&&!kp(c.addedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const Nm=new Map;let oN=0;function uT(){const t=window.devicePixelRatio;t!==oN&&(oN=t,Nm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function M8(t,e){Nm.size||window.addEventListener("resize",uT),Nm.set(t,e)}function I8(t){Nm.delete(t),Nm.size||window.removeEventListener("resize",uT)}function O8(t,e,n){const s=t.canvas,a=s&&mw(s);if(!a)return;const l=K2((c,d)=>{const m=a.clientWidth;n(c,d),m<a.clientWidth&&n()},window),o=new ResizeObserver(c=>{const d=c[0],m=d.contentRect.width,u=d.contentRect.height;m===0&&u===0||l(m,u)});return o.observe(a),M8(t,l),o}function yv(t,e,n){n&&n.disconnect(),e==="resize"&&I8(t)}function F8(t,e,n){const s=t.canvas,a=K2(l=>{t.ctx!==null&&n(D8(l,t))},t);return T8(s,e,a),a}class L8 extends dT{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(E8(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Ih])return!1;const s=n[Ih].initial;["height","width"].forEach(l=>{const o=s[l];An(o)?n.removeAttribute(l):n.setAttribute(l,o)});const a=s.style||{};return Object.keys(a).forEach(l=>{n.style[l]=a[l]}),n.width=n.width,delete n[Ih],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),o={attach:R8,detach:P8,resize:O8}[n]||F8;a[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:yv,detach:yv,resize:yv}[n]||A8)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return MB(e,n,s,a)}isAttached(e){const n=e&&mw(e);return!!(n&&n.isConnected)}}function $8(t){return!dw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?S8:L8}let ko=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return xp(this.x)&&xp(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(l=>{a[l]=s[l]&&s[l].active()?s[l]._to:this[l]}),a}};function B8(t,e){const n=t.options.ticks,s=q8(t),a=Math.min(n.maxTicksLimit||s,s),l=n.major.enabled?z8(e):[],o=l.length,c=l[0],d=l[o-1],m=[];if(o>a)return V8(e,m,l,o/a),m;const u=H8(l,e,a);if(o>0){let p,h;const g=o>1?Math.round((d-c)/(o-1)):null;for(Yu(e,m,u,An(g)?0:c-g,c),p=0,h=o-1;p<h;p++)Yu(e,m,u,l[p],l[p+1]);return Yu(e,m,u,d,An(g)?e.length:d+g),m}return Yu(e,m,u),m}function q8(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function H8(t,e,n){const s=U8(t),a=e.length/n;if(!s)return Math.max(a,1);const l=V$(s);for(let o=0,c=l.length-1;o<c;o++){const d=l[o];if(d>a)return d}return Math.max(a,1)}function z8(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function V8(t,e,n,s){let a=0,l=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===l&&(e.push(t[o]),a++,l=n[a*s])}function Yu(t,e,n,s,a){const l=sn(s,0),o=Math.min(sn(a,t.length),t.length);let c=0,d,m,u;for(n=Math.ceil(n),a&&(d=a-s,n=d/Math.floor(d/n)),u=l;u<0;)c++,u=Math.round(l+c*n);for(m=Math.max(l,0);m<o;m++)m===u&&(e.push(t[m]),c++,u=Math.round(l+c*n))}function U8(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const W8=t=>t==="left"?"right":t==="right"?"left":t,cN=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,dN=(t,e)=>Math.min(e||t,t);function mN(t,e){const n=[],s=t.length/e,a=t.length;let l=0;for(;l<a;l+=s)n.push(t[Math.floor(l)]);return n}function K8(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),l=t._startPixel,o=t._endPixel,c=1e-6;let d=t.getPixelForTick(a),m;if(!(n&&(s===1?m=Math.max(d-l,o-d):e===0?m=(t.getPixelForTick(1)-d)/2:m=(d-t.getPixelForTick(a-1))/2,d+=a<e?m:-m,d<l-c||d>o+c)))return d}function G8(t,e){Nn(t,n=>{const s=n.gc,a=s.length/2;let l;if(a>e){for(l=0;l<a;++l)delete n.data[s[l]];s.splice(0,a)}})}function _d(t){return t.drawTicks?t.tickLength:0}function uN(t,e){if(!t.display)return 0;const n=Fi(t.font,e),s=Js(t.padding);return(hi(t.text)?t.text.length:1)*n.lineHeight+s.height}function Y8(t,e){return Qc(t,{scale:e,type:"scale"})}function Q8(t,e,n){return Qc(t,{tick:n,index:e,type:"tick"})}function Z8(t,e,n){let s=nw(t);return(n&&e!=="right"||!n&&e==="right")&&(s=W8(s)),s}function X8(t,e,n,s){const{top:a,left:l,bottom:o,right:c,chart:d}=t,{chartArea:m,scales:u}=d;let p=0,h,g,x;const v=o-a,y=c-l;if(t.isHorizontal()){if(g=Di(s,l,c),an(n)){const b=Object.keys(n)[0],k=n[b];x=u[b].getPixelForValue(k)+v-e}else n==="center"?x=(m.bottom+m.top)/2+v-e:x=cN(t,n,e);h=c-l}else{if(an(n)){const b=Object.keys(n)[0],k=n[b];g=u[b].getPixelForValue(k)-y+e}else n==="center"?g=(m.left+m.right)/2-y+e:g=cN(t,n,e);x=Di(s,o,a),p=n==="left"?-pi:pi}return{titleX:g,titleY:x,maxWidth:h,rotation:p}}class Zc extends ko{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=_a(e,Number.POSITIVE_INFINITY),n=_a(n,Number.NEGATIVE_INFINITY),s=_a(s,Number.POSITIVE_INFINITY),a=_a(a,Number.NEGATIVE_INFINITY),{min:_a(e,s),max:_a(n,a),minDefined:Xs(e),maxDefined:Xs(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:l}=this.getUserBounds(),o;if(a&&l)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let d=0,m=c.length;d<m;++d)o=c[d].controller.getMinMax(this,e),a||(n=Math.min(n,o.min)),l||(s=Math.max(s,o.max));return n=l&&n>s?s:n,s=a&&n>s?n:s,{min:_a(n,_a(s,n)),max:_a(s,_a(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qn(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:l,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yB(this,l,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?mN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=B8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qn(this.options.afterUpdate,[this])}beforeSetDimensions(){qn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,l;for(s=0,a=e.length;s<a;s++)l=e[s],l.label=qn(n.callback,[l.value,s,e],this)}afterTickToLabelConversion(){qn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=dN(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,l=n.maxRotation;let o=a,c,d,m;if(!this._isVisible()||!n.display||a>=l||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),p=u.widest.width,h=u.highest.height,g=rs(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/s:g/(s-1),p+6>c&&(c=g/(s-(e.offset?.5:1)),d=this.maxHeight-_d(e.grid)-n.padding-uN(e.title,this.chart.options.font),m=Math.sqrt(p*p+h*h),o=G$(Math.min(Math.asin(rs((u.highest.height+6)/c,-1,1)),Math.asin(rs(d/m,-1,1))-Math.asin(rs(h/m,-1,1)))),o=Math.max(a,Math.min(l,o))),this.labelRotation=o}afterCalculateLabelRotation(){qn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:l}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=uN(a,n.options.font);if(c?(e.width=this.maxWidth,e.height=_d(l)+d):(e.height=this.maxHeight,e.width=_d(l)+d),s.display&&this.ticks.length){const{first:m,last:u,widest:p,highest:h}=this._getLabelSizes(),g=s.padding*2,x=hr(this.labelRotation),v=Math.cos(x),y=Math.sin(x);if(c){const b=s.mirror?0:y*p.width+v*h.height;e.height=Math.min(this.maxHeight,e.height+b+g)}else{const b=s.mirror?0:v*p.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+b+g)}this._calculatePadding(m,u,y,v)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:l,padding:o},position:c}=this.options,d=this.labelRotation!==0,m=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,g=0;d?m?(h=a*e.width,g=s*n.height):(h=s*e.height,g=a*n.width):l==="start"?g=n.width:l==="end"?h=e.width:l!=="inner"&&(h=e.width/2,g=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let u=n.height/2,p=e.height/2;l==="start"?(u=0,p=e.height):l==="end"&&(u=n.height,p=0),this.paddingTop=u+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)An(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=mN(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:l}=this,o=[],c=[],d=Math.floor(n/dN(n,s));let m=0,u=0,p,h,g,x,v,y,b,k,w,S,j;for(p=0;p<n;p+=d){if(x=e[p].label,v=this._resolveTickFontOptions(p),a.font=y=v.string,b=l[y]=l[y]||{data:{},gc:[]},k=v.lineHeight,w=S=0,!An(x)&&!hi(x))w=q0(a,b.data,b.gc,w,x),S=k;else if(hi(x))for(h=0,g=x.length;h<g;++h)j=x[h],!An(j)&&!hi(j)&&(w=q0(a,b.data,b.gc,w,j),S+=k);o.push(w),c.push(S),m=Math.max(w,m),u=Math.max(S,u)}G8(l,n);const T=o.indexOf(m),N=c.indexOf(u),_=A=>({width:o[A]||0,height:c[A]||0});return{first:_(0),last:_(n-1),widest:_(T),highest:_(N),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Q$(this._alignToPixels?Pl(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=Q8(this.getContext(),e,s))}return this.$context||(this.$context=Y8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=hr(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),l=this._getLabelSizes(),o=e.autoSkipPadding||0,c=l?l.widest.width+o:0,d=l?l.highest.height+o:0;return this.isHorizontal()?d*s>c*a?c/s:d/a:d*a<c*s?d/s:c/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:l,position:o,border:c}=a,d=l.offset,m=this.isHorizontal(),p=this.ticks.length+(d?1:0),h=_d(l),g=[],x=c.setContext(this.getContext()),v=x.display?x.width:0,y=v/2,b=function(q){return Pl(s,q,v)};let k,w,S,j,T,N,_,A,P,E,M,R;if(o==="top")k=b(this.bottom),N=this.bottom-h,A=k-y,E=b(e.top)+y,R=e.bottom;else if(o==="bottom")k=b(this.top),E=e.top,R=b(e.bottom)-y,N=k+y,A=this.top+h;else if(o==="left")k=b(this.right),T=this.right-h,_=k-y,P=b(e.left)+y,M=e.right;else if(o==="right")k=b(this.left),P=e.left,M=b(e.right)-y,T=k+y,_=this.left+h;else if(n==="x"){if(o==="center")k=b((e.top+e.bottom)/2+.5);else if(an(o)){const q=Object.keys(o)[0],Q=o[q];k=b(this.chart.scales[q].getPixelForValue(Q))}E=e.top,R=e.bottom,N=k+y,A=N+h}else if(n==="y"){if(o==="center")k=b((e.left+e.right)/2);else if(an(o)){const q=Object.keys(o)[0],Q=o[q];k=b(this.chart.scales[q].getPixelForValue(Q))}T=k-y,_=T-h,P=e.left,M=e.right}const O=sn(a.ticks.maxTicksLimit,p),L=Math.max(1,Math.ceil(p/O));for(w=0;w<p;w+=L){const q=this.getContext(w),Q=l.setContext(q),V=c.setContext(q),se=Q.lineWidth,G=Q.color,ge=V.dash||[],ie=V.dashOffset,W=Q.tickWidth,X=Q.tickColor,J=Q.tickBorderDash||[],ue=Q.tickBorderDashOffset;S=K8(this,w,d),S!==void 0&&(j=Pl(s,S,se),m?T=_=P=M=j:N=A=E=R=j,g.push({tx1:T,ty1:N,tx2:_,ty2:A,x1:P,y1:E,x2:M,y2:R,width:se,color:G,borderDash:ge,borderDashOffset:ie,tickWidth:W,tickColor:X,tickBorderDash:J,tickBorderDashOffset:ue}))}return this._ticksLength=p,this._borderValue=k,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:l}=s,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:m,padding:u,mirror:p}=l,h=_d(s.grid),g=h+u,x=p?-u:g,v=-hr(this.labelRotation),y=[];let b,k,w,S,j,T,N,_,A,P,E,M,R="middle";if(a==="top")T=this.bottom-x,N=this._getXAxisLabelAlignment();else if(a==="bottom")T=this.top+x,N=this._getXAxisLabelAlignment();else if(a==="left"){const L=this._getYAxisLabelAlignment(h);N=L.textAlign,j=L.x}else if(a==="right"){const L=this._getYAxisLabelAlignment(h);N=L.textAlign,j=L.x}else if(n==="x"){if(a==="center")T=(e.top+e.bottom)/2+g;else if(an(a)){const L=Object.keys(a)[0],q=a[L];T=this.chart.scales[L].getPixelForValue(q)+g}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")j=(e.left+e.right)/2-g;else if(an(a)){const L=Object.keys(a)[0],q=a[L];j=this.chart.scales[L].getPixelForValue(q)}N=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(d==="start"?R="top":d==="end"&&(R="bottom"));const O=this._getLabelSizes();for(b=0,k=c.length;b<k;++b){w=c[b],S=w.label;const L=l.setContext(this.getContext(b));_=this.getPixelForTick(b)+l.labelOffset,A=this._resolveTickFontOptions(b),P=A.lineHeight,E=hi(S)?S.length:1;const q=E/2,Q=L.color,V=L.textStrokeColor,se=L.textStrokeWidth;let G=N;o?(j=_,N==="inner"&&(b===k-1?G=this.options.reverse?"left":"right":b===0?G=this.options.reverse?"right":"left":G="center"),a==="top"?m==="near"||v!==0?M=-E*P+P/2:m==="center"?M=-O.highest.height/2-q*P+P:M=-O.highest.height+P/2:m==="near"||v!==0?M=P/2:m==="center"?M=O.highest.height/2-q*P:M=O.highest.height-E*P,p&&(M*=-1),v!==0&&!L.showLabelBackdrop&&(j+=P/2*Math.sin(v))):(T=_,M=(1-E)*P/2);let ge;if(L.showLabelBackdrop){const ie=Js(L.backdropPadding),W=O.heights[b],X=O.widths[b];let J=M-ie.top,ue=0-ie.left;switch(R){case"middle":J-=W/2;break;case"bottom":J-=W;break}switch(N){case"center":ue-=X/2;break;case"right":ue-=X;break;case"inner":b===k-1?ue-=X:b>0&&(ue-=X/2);break}ge={left:ue,top:J,width:X+ie.width,height:W+ie.height,color:L.backdropColor}}y.push({label:S,font:A,textOffset:M,options:{rotation:v,color:Q,strokeColor:V,strokeWidth:se,textAlign:G,textBaseline:R,translation:[j,T],backdrop:ge}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-hr(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:l}}=this.options,o=this._getLabelSizes(),c=e+l,d=o.widest.width;let m,u;return n==="left"?a?(u=this.right+l,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u+=d)):(u=this.right-c,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u=this.left)):n==="right"?a?(u=this.left+l,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u-=d)):(u=this.left+c,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u=this.right)):m="right",{textAlign:m,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:l,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,l,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(l=>l.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,o;const c=(d,m,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(n.display)for(l=0,o=a.length;l<o;++l){const d=a[l];n.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,l=s.setContext(this.getContext()),o=s.display?l.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,u,p,h;this.isHorizontal()?(m=Pl(e,this.left,o)-o/2,u=Pl(e,this.right,c)+c/2,p=h=d):(p=Pl(e,this.top,o)-o/2,h=Pl(e,this.bottom,c)+c/2,m=u=d),n.save(),n.lineWidth=l.width,n.strokeStyle=l.color,n.beginPath(),n.moveTo(m,p),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&sw(s,a);const l=this.getLabelItems(e);for(const o of l){const c=o.options,d=o.font,m=o.label,u=o.textOffset;jm(s,m,0,u,d,c)}a&&aw(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const l=Fi(s.font),o=Js(s.padding),c=s.align;let d=l.lineHeight/2;n==="bottom"||n==="center"||an(n)?(d+=o.bottom,hi(s.text)&&(d+=l.lineHeight*(s.text.length-1))):d+=o.top;const{titleX:m,titleY:u,maxWidth:p,rotation:h}=X8(this,d,n,c);jm(e,s.text,0,0,l,{color:s.color,maxWidth:p,rotation:h,textAlign:Z8(c,n,a),textBaseline:"middle",translation:[m,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=sn(e.grid&&e.grid.z,-1),a=sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zc.prototype.draw?[{z:n,draw:l=>{this.draw(l)}}]:[{z:s,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let l,o;for(l=0,o=n.length;l<o;++l){const c=n[l];c[s]===this.id&&(!e||c.type===e)&&a.push(c)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Fi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Qu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;tq(n)&&(s=this.register(n));const a=this.items,l=e.id,o=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in a||(a[l]=e,J8(e,o,s),this.override&&si.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in si[a]&&(delete si[a][s],this.override&&delete ao[s])}}function J8(t,e,n){const s=wm(Object.create(null),[n?si.get(n):{},si.get(e),t.defaults]);si.set(e,s),t.defaultRoutes&&eq(e,t.defaultRoutes),t.descriptors&&si.describe(e,t.descriptors)}function eq(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),l=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),d=o.join(".");si.route(l,a,d,c)})}function tq(t){return"id"in t&&"defaults"in t}let nq=class{constructor(){this.controllers=new Qu(uw,"datasets",!0),this.elements=new Qu(ko,"elements"),this.plugins=new Qu(Object,"plugins"),this.scales=new Qu(Zc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const l=s||this._getRegistryForType(a);s||l.isForType(a)||l===this.plugins&&a.id?this._exec(e,l,a):Nn(a,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const a=ew(e);qn(s["before"+a],[],s),n[e](s),qn(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}};var Ta=new nq;class iq{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const l=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(l,e,n,s);return n==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,a){a=a||{};for(const l of e){const o=l.plugin,c=o[s],d=[n,a,l.options];if(qn(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){An(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=sn(s.options&&s.options.plugins,{}),l=sq(s);return a===!1&&!n?[]:rq(e,l,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(l,o)=>l.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function sq(t){const e={},n=[],s=Object.keys(Ta.plugins.items);for(let l=0;l<s.length;l++)n.push(Ta.getPlugin(s[l]));const a=t.plugins||[];for(let l=0;l<a.length;l++){const o=a[l];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function aq(t,e){return!e&&t===!1?null:t===!0?{}:t}function rq(t,{plugins:e,localIds:n},s,a){const l=[],o=t.getContext();for(const c of e){const d=c.id,m=aq(s[d],a);m!==null&&l.push({plugin:c,options:lq(t.config,{plugin:c,local:n[d]},m,o)})}return l}function lq(t,{plugin:e,local:n},s,a){const l=t.pluginScopeKeys(e),o=t.getOptionScopes(s,l);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qx(t,e){const n=si.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function oq(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function cq(t,e){return t===e?"_index_":"_value_"}function hN(t){if(t==="x"||t==="y"||t==="r")return t}function dq(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Zx(t,...e){if(hN(t))return t;for(const n of e){const s=n.axis||dq(n.position)||t.length>1&&hN(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function pN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function mq(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return pN(t,"x",n[0])||pN(t,"y",n[0])}return{}}function uq(t,e){const n=ao[t.type]||{scales:{}},s=e.scales||{},a=Qx(t.type,e),l=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!an(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Zx(o,c,mq(o,t),si.scales[c.type]),m=cq(d,a),u=n.scales||{};l[o]=em(Object.create(null),[{axis:d},c,u[d],u[m]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,d=o.indexAxis||Qx(c,e),u=(ao[c]||{}).scales||{};Object.keys(u).forEach(p=>{const h=oq(p,d),g=o[h+"AxisID"]||h;l[g]=l[g]||Object.create(null),em(l[g],[{axis:h},s[g],u[p]])})}),Object.keys(l).forEach(o=>{const c=l[o];em(c,[si.scales[c.type],si.scale])}),l}function hT(t){const e=t.options||(t.options={});e.plugins=sn(e.plugins,{}),e.scales=uq(t,e)}function pT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function hq(t){return t=t||{},t.data=pT(t.data),hT(t),t}const gN=new Map,gT=new Set;function Zu(t,e){let n=gN.get(t);return n||(n=e(),gN.set(t,n),gT.add(n)),n}const Ed=(t,e,n)=>{const s=so(e,n);s!==void 0&&t.add(s)};class pq{constructor(e){this._config=hq(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),hT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Zu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Zu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Zu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Zu(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:l}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const d=new Set;n.forEach(u=>{e&&(d.add(e),u.forEach(p=>Ed(d,e,p))),u.forEach(p=>Ed(d,a,p)),u.forEach(p=>Ed(d,ao[l]||{},p)),u.forEach(p=>Ed(d,si,p)),u.forEach(p=>Ed(d,Yx,p))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),gT.has(n)&&o.set(n,m),m}chartOptionScopes(){const{options:e,type:n}=this;return[e,ao[n]||{},si.datasets[n]||{},{type:n},si,Yx]}resolveNamedOptions(e,n,s,a=[""]){const l={$shared:!0},{resolver:o,subPrefixes:c}=fN(this._resolverCache,e,a);let d=o;if(fq(o,n)){l.$shared=!1,s=gl(s)?s():s;const m=this.createResolver(e,s,c);d=Pc(o,s,m)}for(const m of n)l[m]=d[m];return l}createResolver(e,n,s=[""],a){const{resolver:l}=fN(this._resolverCache,e,s);return an(n)?Pc(l,n,void 0,a):l}}function fN(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let l=s.get(a);return l||(l={resolver:lw(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(a,l)),l}const gq=t=>an(t)&&Object.getOwnPropertyNames(t).some(e=>gl(t[e]));function fq(t,e){const{isScriptable:n,isIndexable:s}=J2(t);for(const a of e){const l=n(a),o=s(a),c=(o||l)&&t[a];if(l&&(gl(c)||gq(c))||o&&hi(c))return!0}return!1}var vq="4.5.1";const xq=["top","bottom","left","right","chartArea"];function vN(t,e){return t==="top"||t==="bottom"||xq.indexOf(t)===-1&&e==="x"}function xN(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function yN(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qn(n&&n.onComplete,[t],e)}function yq(t){const e=t.chart,n=e.options.animation;qn(n&&n.onProgress,[t],e)}function fT(t){return dw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Oh={},bN=t=>{const e=fT(t);return Object.values(Oh).filter(n=>n.canvas===e).pop()};function bq(t,e,n){const s=Object.keys(t);for(const a of s){const l=+a;if(l>=e){const o=t[a];delete t[a],(n>0||l>e)&&(t[l+n]=o)}}}function wq(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let Qm=class{static defaults=si;static instances=Oh;static overrides=ao;static registry=Ta;static version=vq;static getChart=bN;static register(...e){Ta.add(...e),wN()}static unregister(...e){Ta.remove(...e),wN()}constructor(e,n){const s=this.config=new pq(n),a=fT(e),l=bN(a);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||$8(a)),this.platform.updateConfig(s);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,m=d&&d.height,u=d&&d.width;if(this.id=O$(),this.ctx=c,this.canvas=d,this.width=u,this.height=m,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=eB(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Oh[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}or.listen(this,"complete",yN),or.listen(this,"progress",yq),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:l}=this;return An(e)?n&&l?l:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ta}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H0(this.canvas,this.ctx),this}stop(){return or.stop(this),this}resize(e,n){or.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,l=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,n,l),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,W0(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),qn(s.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Nn(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let l=[];n&&(l=l.concat(Object.keys(n).map(o=>{const c=n[o],d=Zx(o,c),m=d==="r",u=d==="x";return{options:c,dposition:m?"chartArea":u?"bottom":"left",dtype:m?"radialLinear":u?"category":"linear"}}))),Nn(l,o=>{const c=o.options,d=c.id,m=Zx(d,c),u=sn(c.type,o.dtype);(c.position===void 0||vN(c.position,m)!==vN(o.dposition))&&(c.position=o.dposition),a[d]=!0;let p=null;if(d in s&&s[d].type===u)p=s[d];else{const h=Ta.getScale(u);p=new h({id:d,type:u,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(c,e)}),Nn(a,(o,c)=>{o||delete s[c]}),Nn(s,o=>{Vs.configure(this,o,o.options),Vs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,l)=>a.index-l.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(xN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(l=>l===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const l=n[s];let o=this.getDatasetMeta(s);const c=l.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=l.indexAxis||Qx(c,this.options),o.order=l.order||0,o.index=s,o.label=""+l.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const d=Ta.getController(c),{datasetElementType:m,dataElementType:u}=si.datasets[c];Object.assign(d,{dataElementType:Ta.getElement(u),datasetElementType:m&&Ta.getElement(m)}),o.controller=new d(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Nn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let m=0,u=this.data.datasets.length;m<u;m++){const{controller:p}=this.getDatasetMeta(m),h=!a&&l.indexOf(p)===-1;p.buildOrUpdateElements(h),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),a||Nn(l,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xN("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Nn(this.scales,e=>{Vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!R0(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:l}of n){const o=s==="_removeElements"?-l:l;bq(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=l=>new Set(e.filter(o=>o[0]===l).map((o,c)=>c+","+o.splice(1).join(","))),a=s(0);for(let l=1;l<n;l++)if(!R0(a,s(l)))return;return Array.from(a).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Nn(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,l)=>{a._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,gl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(or.has(this)?this.attached&&!or.running(this)&&or.start(this):(this.draw(),yN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,l;for(a=0,l=n.length;a<l;++a){const o=n[a];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=$B(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&sw(n,a),e.controller.draw(),a&&aw(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Z2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const l=x8.modes[n];return typeof l=="function"?l(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(l=>l&&l._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Qc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",l=this.getDatasetMeta(e),o=l.controller._resolveAnimations(void 0,a);km(n)?(l.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(l,{visible:s}),this.update(c=>c.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),or.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Oh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(l,o)=>{n.addEventListener(this,l,o),e[l]=o},a=(l,o,c)=>{l.offsetX=o,l.offsetY=c,this._eventHandler(l)};Nn(this.options.events,l=>s(l,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(d,m)=>{n.addEventListener(this,d,m),e[d]=m},a=(d,m)=>{e[d]&&(n.removeEventListener(this,d,m),delete e[d])},l=(d,m)=>{this.canvas&&this.resize(d,m)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),s("resize",l),s("detach",o)};o=()=>{this.attached=!1,a("resize",l),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){Nn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Nn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let l,o,c,d;for(n==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const m=o&&this.getDatasetMeta(o.datasetIndex).controller;m&&m[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:l,index:o})=>{const c=this.getDatasetMeta(l);if(!c)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:c.data[o],index:o}});!gp(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,l=(d,m)=>d.filter(u=>!m.some(p=>u.datasetIndex===p.datasetIndex&&u.index===p.index)),o=l(n,e),c=s?e:l(e,n);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const l=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(l||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:l}=this,o=n,c=this._getActiveElements(e,a,s,o),d=H$(e),m=wq(e,this._lastEvent,s,d);s&&(this._lastEvent=null,qn(l.onHover,[e,c,this],this),d&&qn(l.onClick,[e,c,this],this));const u=!gp(c,a);return(u||n)&&(this._active=c,this._updateHoverStyles(c,a,n)),this._lastEvent=m,u}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,a)}};function wN(){return Nn(Qm.instances,t=>t._plugins.invalidate())}function kq(t,e,n){const{startAngle:s,x:a,y:l,outerRadius:o,innerRadius:c,options:d}=e,{borderWidth:m,borderJoinStyle:u}=d,p=Math.min(m/o,Aa(s-n));if(t.beginPath(),t.arc(a,l,o-m/2,s+p/2,n-p/2),c>0){const h=Math.min(m/c,Aa(s-n));t.arc(a,l,c+m/2,n-h/2,s+h/2,!0)}else{const h=Math.min(m/2,o*Aa(s-n));if(u==="round")t.arc(a,l,h,n-Tn/2,s+Tn/2,!0);else if(u==="bevel"){const g=2*h*h,x=-g*Math.cos(n+Tn/2)+a,v=-g*Math.sin(n+Tn/2)+l,y=g*Math.cos(s+Tn/2)+a,b=g*Math.sin(s+Tn/2)+l;t.lineTo(x,v),t.lineTo(y,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function jq(t,e,n){const{startAngle:s,pixelMargin:a,x:l,y:o,outerRadius:c,innerRadius:d}=e;let m=a/c;t.beginPath(),t.arc(l,o,c,s-m,n+m),d>a?(m=a/d,t.arc(l,o,d,n+m,s-m,!0)):t.arc(l,o,a,n+pi,s-pi),t.closePath(),t.clip()}function Nq(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Cq(t,e,n,s){const a=Nq(t.options.borderRadius),l=(n-e)/2,o=Math.min(l,s*e/2),c=d=>{const m=(n-Math.min(l,d))*s/2;return rs(d,0,Math.min(l,m))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:rs(a.innerStart,0,o),innerEnd:rs(a.innerEnd,0,o)}}function Ko(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function jp(t,e,n,s,a,l){const{x:o,y:c,startAngle:d,pixelMargin:m,innerRadius:u}=e,p=Math.max(e.outerRadius+s+n-m,0),h=u>0?u+s+n+m:0;let g=0;const x=a-d;if(s){const L=u>0?u-s:0,q=p>0?p-s:0,Q=(L+q)/2,V=Q!==0?x*Q/(Q+s):x;g=(x-V)/2}const v=Math.max(.001,x*p-n/Tn)/p,y=(x-v)/2,b=d+y+g,k=a-y-g,{outerStart:w,outerEnd:S,innerStart:j,innerEnd:T}=Cq(e,h,p,k-b),N=p-w,_=p-S,A=b+w/N,P=k-S/_,E=h+j,M=h+T,R=b+j/E,O=k-T/M;if(t.beginPath(),l){const L=(A+P)/2;if(t.arc(o,c,p,A,L),t.arc(o,c,p,L,P),S>0){const se=Ko(_,P,o,c);t.arc(se.x,se.y,S,P,k+pi)}const q=Ko(M,k,o,c);if(t.lineTo(q.x,q.y),T>0){const se=Ko(M,O,o,c);t.arc(se.x,se.y,T,k+pi,O+Math.PI)}const Q=(k-T/h+(b+j/h))/2;if(t.arc(o,c,h,k-T/h,Q,!0),t.arc(o,c,h,Q,b+j/h,!0),j>0){const se=Ko(E,R,o,c);t.arc(se.x,se.y,j,R+Math.PI,b-pi)}const V=Ko(N,b,o,c);if(t.lineTo(V.x,V.y),w>0){const se=Ko(N,A,o,c);t.arc(se.x,se.y,w,b-pi,A)}}else{t.moveTo(o,c);const L=Math.cos(A)*p+o,q=Math.sin(A)*p+c;t.lineTo(L,q);const Q=Math.cos(P)*p+o,V=Math.sin(P)*p+c;t.lineTo(Q,V)}t.closePath()}function Sq(t,e,n,s,a){const{fullCircles:l,startAngle:o,circumference:c}=e;let d=e.endAngle;if(l){jp(t,e,n,s,d,a);for(let m=0;m<l;++m)t.fill();isNaN(c)||(d=o+(c%ci||ci))}return jp(t,e,n,s,d,a),t.fill(),d}function _q(t,e,n,s,a){const{fullCircles:l,startAngle:o,circumference:c,options:d}=e,{borderWidth:m,borderJoinStyle:u,borderDash:p,borderDashOffset:h,borderRadius:g}=d,x=d.borderAlign==="inner";if(!m)return;t.setLineDash(p||[]),t.lineDashOffset=h,x?(t.lineWidth=m*2,t.lineJoin=u||"round"):(t.lineWidth=m,t.lineJoin=u||"bevel");let v=e.endAngle;if(l){jp(t,e,n,s,v,a);for(let y=0;y<l;++y)t.stroke();isNaN(c)||(v=o+(c%ci||ci))}x&&jq(t,e,v),d.selfJoin&&v-o>=Tn&&g===0&&u!=="miter"&&kq(t,e,v),l||(jp(t,e,n,s,v,a),t.stroke())}class vT extends ko{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:l,distance:o}=z2(a,{x:e,y:n}),{startAngle:c,endAngle:d,innerRadius:m,outerRadius:u,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,g=sn(p,d-c),x=yp(l,c,d)&&c!==d,v=g>=ci||x,y=zl(o,m+h,u+h);return v&&y}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:l,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:m}=this.options,u=(a+l)/2,p=(o+c+m+d)/2;return{x:n+Math.cos(u)*p,y:s+Math.sin(u)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,l=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ci?Math.floor(s/ci):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a);const d=1-Math.sin(Math.min(Tn,s||0)),m=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Sq(e,this,m,l,o),_q(e,this,m,l,o),e.restore()}}function xT(t,e){const{x:n,y:s,base:a,width:l,height:o}=t.getProps(["x","y","base","width","height"],e);let c,d,m,u,p;return t.horizontal?(p=o/2,c=Math.min(n,a),d=Math.max(n,a),m=s-p,u=s+p):(p=l/2,c=n-p,d=n+p,m=Math.min(s,a),u=Math.max(s,a)),{left:c,top:m,right:d,bottom:u}}function Xr(t,e,n,s){return t?0:rs(e,n,s)}function Eq(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,l=X2(s);return{t:Xr(a.top,l.top,0,n),r:Xr(a.right,l.right,0,e),b:Xr(a.bottom,l.bottom,0,n),l:Xr(a.left,l.left,0,e)}}function Tq(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,l=pc(a),o=Math.min(e,n),c=t.borderSkipped,d=s||an(a);return{topLeft:Xr(!d||c.top||c.left,l.topLeft,0,o),topRight:Xr(!d||c.top||c.right,l.topRight,0,o),bottomLeft:Xr(!d||c.bottom||c.left,l.bottomLeft,0,o),bottomRight:Xr(!d||c.bottom||c.right,l.bottomRight,0,o)}}function Aq(t){const e=xT(t),n=e.right-e.left,s=e.bottom-e.top,a=Eq(t,n/2,s/2),l=Tq(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:l},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,l.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(a.b,a.r))}}}}function bv(t,e,n,s){const a=e===null,l=n===null,c=t&&!(a&&l)&&xT(t,s);return c&&(a||zl(e,c.left,c.right))&&(l||zl(n,c.top,c.bottom))}function Dq(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Rq(t,e){t.rect(e.x,e.y,e.w,e.h)}function wv(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,l=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+l,h:t.h+o,radius:t.radius}}class Pq extends ko{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:l,outer:o}=Aq(this),c=Dq(o.radius)?bp:Rq;e.save(),(o.w!==l.w||o.h!==l.h)&&(e.beginPath(),c(e,wv(o,n,l)),e.clip(),c(e,wv(l,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,wv(l,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return bv(this,e,n,s)}inXRange(e,n){return bv(this,e,null,n)}inYRange(e,n){return bv(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(n+a)/2:n,y:l?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const kN=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},Mq=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jN extends ko{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Fi(s.font),l=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=kN(s,l);let m,u;n.font=a.string,this.isHorizontal()?(m=this.maxWidth,u=this._fitRows(o,l,c,d)+10):(u=this.maxHeight,m=this._fitCols(o,a,c,d)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:l,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],u=a+c;let p=e;l.textAlign="left",l.textBaseline="middle";let h=-1,g=-u;return this.legendItems.forEach((x,v)=>{const y=s+n/2+l.measureText(x.text).width;(v===0||m[m.length-1]+y+2*c>o)&&(p+=u,m[m.length-(v>0?0:1)]=0,g+=u,h++),d[v]={left:0,top:g,row:h,width:y,height:a},m[m.length-1]+=y+c}),p}_fitCols(e,n,s,a){const{ctx:l,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],u=o-e;let p=c,h=0,g=0,x=0,v=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:k,itemHeight:w}=Iq(s,n,l,y,a);b>0&&g+w+2*c>u&&(p+=h+c,m.push({width:h,height:g}),x+=h+c,v++,h=g=0),d[b]={left:x,top:g,col:v,width:k,height:w},h=Math.max(h,k),g+=w+c}),p+=h,m.push({width:h,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:l}}=this,o=gc(l,this.left,this.width);if(this.isHorizontal()){let c=0,d=Di(s,this.left+a,this.right-this.lineWidths[c]);for(const m of n)c!==m.row&&(c=m.row,d=Di(s,this.left+a,this.right-this.lineWidths[c])),m.top+=this.top+e+a,m.left=o.leftForLtr(o.x(d),m.width),d+=m.width+a}else{let c=0,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height);for(const m of n)m.col!==c&&(c=m.col,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height)),m.top=d,m.left+=this.left+a,m.left=o.leftForLtr(o.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sw(e,this),this._draw(),aw(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:l,labels:o}=e,c=si.color,d=gc(e.rtl,this.left,this.width),m=Fi(o.font),{padding:u}=o,p=m.size,h=p/2;let g;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:x,boxHeight:v,itemHeight:y}=kN(o,p),b=function(T,N,_){if(isNaN(x)||x<=0||isNaN(v)||v<0)return;a.save();const A=sn(_.lineWidth,1);if(a.fillStyle=sn(_.fillStyle,c),a.lineCap=sn(_.lineCap,"butt"),a.lineDashOffset=sn(_.lineDashOffset,0),a.lineJoin=sn(_.lineJoin,"miter"),a.lineWidth=A,a.strokeStyle=sn(_.strokeStyle,c),a.setLineDash(sn(_.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:A},E=d.xPlus(T,x/2),M=N+h;Q2(a,P,E,M,o.pointStyleWidth&&x)}else{const P=N+Math.max((p-v)/2,0),E=d.leftForLtr(T,x),M=pc(_.borderRadius);a.beginPath(),Object.values(M).some(R=>R!==0)?bp(a,{x:E,y:P,w:x,h:v,radius:M}):a.rect(E,P,x,v),a.fill(),A!==0&&a.stroke()}a.restore()},k=function(T,N,_){jm(a,_.text,T,N+y/2,m,{strikethrough:_.hidden,textAlign:d.textAlign(_.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?g={x:Di(l,this.left+u,this.right-s[0]),y:this.top+u+S,line:0}:g={x:this.left+u,y:Di(l,this.top+S+u,this.bottom-n[0].height),line:0},iT(this.ctx,e.textDirection);const j=y+u;this.legendItems.forEach((T,N)=>{a.strokeStyle=T.fontColor,a.fillStyle=T.fontColor;const _=a.measureText(T.text).width,A=d.textAlign(T.textAlign||(T.textAlign=o.textAlign)),P=x+h+_;let E=g.x,M=g.y;d.setWidth(this.width),w?N>0&&E+P+u>this.right&&(M=g.y+=j,g.line++,E=g.x=Di(l,this.left+u,this.right-s[g.line])):N>0&&M+j>this.bottom&&(E=g.x=E+n[g.line].width+u,g.line++,M=g.y=Di(l,this.top+S+u,this.bottom-n[g.line].height));const R=d.x(E);if(b(R,M,T),E=tB(A,E+x+h,w?E+P:this.right,e.rtl),k(d.x(E),M,T),w)g.x+=P+u;else if(typeof T.text!="string"){const O=m.lineHeight;g.y+=yT(T,O)+u}else g.y+=j}),sT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Fi(n.font),a=Js(n.padding);if(!n.display)return;const l=gc(e.rtl,this.left,this.width),o=this.ctx,c=n.position,d=s.size/2,m=a.top+d;let u,p=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+m,p=Di(e.align,p,this.right-h);else{const x=this.columnSizes.reduce((v,y)=>Math.max(v,y.height),0);u=m+Di(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=Di(c,p,p+h);o.textAlign=l.textAlign(nw(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,jm(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=Fi(e.font),s=Js(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,l;if(zl(e,this.left,this.right)&&zl(n,this.top,this.bottom)){for(l=this.legendHitBoxes,s=0;s<l.length;++s)if(a=l[s],zl(e,a.left,a.left+a.width)&&zl(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!Lq(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,l=Mq(a,s);a&&!l&&qn(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!l&&qn(n.onHover,[e,s,this],this)}else s&&qn(n.onClick,[e,s,this],this)}}function Iq(t,e,n,s,a){const l=Oq(s,t,e,n),o=Fq(a,s,e.lineHeight);return{itemWidth:l,itemHeight:o}}function Oq(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((l,o)=>l.length>o.length?l:o)),e+n.size/2+s.measureText(a).width}function Fq(t,e,n){let s=t;return typeof e.text!="string"&&(s=yT(e,n)),s}function yT(t,e){const n=t.text?t.text.length:0;return e*n}function Lq(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var bT={id:"legend",_element:jN,start(t,e,n){const s=t.legend=new jN({ctx:t.ctx,options:n,chart:t});Vs.configure(t,s,n),Vs.addBox(t,s)},stop(t){Vs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Vs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:l,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(n?0:void 0),u=Js(m.borderWidth);return{text:e[d.index].label,fillStyle:m.backgroundColor,fontColor:l,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:o&&(c||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class wT extends ko{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=hi(s.text)?s.text.length:1;this._padding=Js(s.padding);const l=a*Fi(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:l,options:o}=this,c=o.align;let d=0,m,u,p;return this.isHorizontal()?(u=Di(c,s,l),p=n+e,m=l-s):(o.position==="left"?(u=s+e,p=Di(c,a,n),d=Tn*-.5):(u=l-e,p=Di(c,n,a),d=Tn*.5),m=a-n),{titleX:u,titleY:p,maxWidth:m,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Fi(n.font),l=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:m}=this._drawArgs(l);jm(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:m,textAlign:nw(n.align),textBaseline:"middle",translation:[o,c]})}}function $q(t,e){const n=new wT({ctx:t.ctx,options:e,chart:t});Vs.configure(t,n,e),Vs.addBox(t,n),t.titleBlock=n}var Bq={id:"title",_element:wT,start(t,e,n){$q(t,n)},stop(t){const e=t.titleBlock;Vs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Vs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,l=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const d=c.tooltipPosition();s.add(d.x),a+=d.y,++l}}return l===0||s.size===0?!1:{x:[...s].reduce((c,d)=>c+d)/s.size,y:a/l}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,l,o,c;for(l=0,o=t.length;l<o;++l){const d=t[l].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),u=Y$(e,m);u<a&&(a=u,c=d)}}if(c){const d=c.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function Ea(t,e){return e&&(hi(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function cr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qq(t,e){const{element:n,datasetIndex:s,index:a}=e,l=t.getDatasetMeta(s).controller,{label:o,value:c}=l.getLabelAndValue(a);return{chart:t,label:o,parsed:l.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:c,dataset:l.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function NN(t,e){const n=t.chart.ctx,{body:s,footer:a,title:l}=t,{boxWidth:o,boxHeight:c}=e,d=Fi(e.bodyFont),m=Fi(e.titleFont),u=Fi(e.footerFont),p=l.length,h=a.length,g=s.length,x=Js(e.padding);let v=x.height,y=0,b=s.reduce((S,j)=>S+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,p&&(v+=p*m.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),b){const S=e.displayColors?Math.max(c,d.lineHeight):d.lineHeight;v+=g*S+(b-g)*d.lineHeight+(b-1)*e.bodySpacing}h&&(v+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let k=0;const w=function(S){y=Math.max(y,n.measureText(S).width+k)};return n.save(),n.font=m.string,Nn(t.title,w),n.font=d.string,Nn(t.beforeBody.concat(t.afterBody),w),k=e.displayColors?o+2+e.boxPadding:0,Nn(s,S=>{Nn(S.before,w),Nn(S.lines,w),Nn(S.after,w)}),k=0,n.font=u.string,Nn(t.footer,w),n.restore(),y+=x.width,{width:y,height:v}}function Hq(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function zq(t,e,n,s){const{x:a,width:l}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&a+l+o>e.width||t==="right"&&a-l-o<0)return!0}function Vq(t,e,n,s){const{x:a,width:l}=n,{width:o,chartArea:{left:c,right:d}}=t;let m="center";return s==="center"?m=a<=(c+d)/2?"left":"right":a<=l/2?m="left":a>=o-l/2&&(m="right"),zq(m,t,e,n)&&(m="center"),m}function CN(t,e,n){const s=n.yAlign||e.yAlign||Hq(t,n);return{xAlign:n.xAlign||e.xAlign||Vq(t,e,n,s),yAlign:s}}function Uq(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Wq(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function SN(t,e,n,s){const{caretSize:a,caretPadding:l,cornerRadius:o}=t,{xAlign:c,yAlign:d}=n,m=a+l,{topLeft:u,topRight:p,bottomLeft:h,bottomRight:g}=pc(o);let x=Uq(e,c);const v=Wq(e,d,m);return d==="center"?c==="left"?x+=m:c==="right"&&(x-=m):c==="left"?x-=Math.max(u,h)+a:c==="right"&&(x+=Math.max(p,g)+a),{x:rs(x,0,s.width-e.width),y:rs(v,0,s.height-e.height)}}function Xu(t,e,n){const s=Js(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function _N(t){return Ea([],cr(t))}function Kq(t,e,n){return Qc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function EN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const kT={beforeTitle:ar,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:ar,beforeBody:ar,beforeLabel:ar,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return An(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ar,afterBody:ar,beforeFooter:ar,footer:ar,afterFooter:ar};function ns(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?kT[e].call(n,s):a}let TN=class extends ko{static positioners=Hd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,l=new aT(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=Kq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=ns(s,"beforeTitle",this,e),l=ns(s,"title",this,e),o=ns(s,"afterTitle",this,e);let c=[];return c=Ea(c,cr(a)),c=Ea(c,cr(l)),c=Ea(c,cr(o)),c}getBeforeBody(e,n){return _N(ns(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return Nn(e,l=>{const o={before:[],lines:[],after:[]},c=EN(s,l);Ea(o.before,cr(ns(c,"beforeLabel",this,l))),Ea(o.lines,ns(c,"label",this,l)),Ea(o.after,cr(ns(c,"afterLabel",this,l))),a.push(o)}),a}getAfterBody(e,n){return _N(ns(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=ns(s,"beforeFooter",this,e),l=ns(s,"footer",this,e),o=ns(s,"afterFooter",this,e);let c=[];return c=Ea(c,cr(a)),c=Ea(c,cr(l)),c=Ea(c,cr(o)),c}_createItems(e){const n=this._active,s=this.chart.data,a=[],l=[],o=[];let c=[],d,m;for(d=0,m=n.length;d<m;++d)c.push(qq(this.chart,n[d]));return e.filter&&(c=c.filter((u,p,h)=>e.filter(u,p,h,s))),e.itemSort&&(c=c.sort((u,p)=>e.itemSort(u,p,s))),Nn(c,u=>{const p=EN(e.callbacks,u);a.push(ns(p,"labelColor",this,u)),l.push(ns(p,"labelPointStyle",this,u)),o.push(ns(p,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=l,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let l,o=[];if(!a.length)this.opacity!==0&&(l={opacity:0});else{const c=Hd[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const d=this._size=NN(this,s),m=Object.assign({},c,d),u=CN(this.chart,s,m),p=SN(s,m,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,l={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const l=this.getCaretPosition(e,s,a);n.lineTo(l.x1,l.y1),n.lineTo(l.x2,l.y2),n.lineTo(l.x3,l.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:l}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:d,topRight:m,bottomLeft:u,bottomRight:p}=pc(c),{x:h,y:g}=e,{width:x,height:v}=n;let y,b,k,w,S,j;return l==="center"?(S=g+v/2,a==="left"?(y=h,b=y-o,w=S+o,j=S-o):(y=h+x,b=y+o,w=S-o,j=S+o),k=y):(a==="left"?b=h+Math.max(d,u)+o:a==="right"?b=h+x-Math.max(m,p)-o:b=this.caretX,l==="top"?(w=g,S=w-o,y=b-o,k=b+o):(w=g+v,S=w+o,y=b+o,k=b-o),j=w),{x1:y,x2:b,x3:k,y1:w,y2:S,y3:j}}drawTitle(e,n,s){const a=this.title,l=a.length;let o,c,d;if(l){const m=gc(s.rtl,this.x,this.width);for(e.x=Xu(this,s.titleAlign,s),n.textAlign=m.textAlign(s.titleAlign),n.textBaseline="middle",o=Fi(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,d=0;d<l;++d)n.fillText(a[d],m.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===l&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,a,l){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:d,boxWidth:m}=l,u=Fi(l.bodyFont),p=Xu(this,"left",l),h=a.x(p),g=d<u.lineHeight?(u.lineHeight-d)/2:0,x=n.y+g;if(l.usePointStyle){const v={radius:Math.min(m,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(h,m)+m/2,b=x+d/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,z0(e,v,y,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,z0(e,v,y,b)}else{e.lineWidth=an(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=a.leftForLtr(h,m),y=a.leftForLtr(a.xPlus(h,1),m-2),b=pc(o.borderRadius);Object.values(b).some(k=>k!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,bp(e,{x:v,y:x,w:m,h:d,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),bp(e,{x:y,y:x+1,w:m-2,h:d-2,radius:b}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(v,x,m,d),e.strokeRect(v,x,m,d),e.fillStyle=o.backgroundColor,e.fillRect(y,x+1,m-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:l,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:m,boxPadding:u}=s,p=Fi(s.bodyFont);let h=p.lineHeight,g=0;const x=gc(s.rtl,this.x,this.width),v=function(_){n.fillText(_,x.x(e.x+g),e.y+h/2),e.y+=h+l},y=x.textAlign(o);let b,k,w,S,j,T,N;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Xu(this,y,s),n.fillStyle=s.bodyColor,Nn(this.beforeBody,v),g=c&&y!=="right"?o==="center"?m/2+u:m+2+u:0,S=0,T=a.length;S<T;++S){for(b=a[S],k=this.labelTextColors[S],n.fillStyle=k,Nn(b.before,v),w=b.lines,c&&w.length&&(this._drawColorBox(n,e,S,x,s),h=Math.max(p.lineHeight,d)),j=0,N=w.length;j<N;++j)v(w[j]),h=p.lineHeight;Nn(b.after,v)}g=0,h=p.lineHeight,Nn(this.afterBody,v),e.y-=l}drawFooter(e,n,s){const a=this.footer,l=a.length;let o,c;if(l){const d=gc(s.rtl,this.x,this.width);for(e.x=Xu(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",o=Fi(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<l;++c)n.fillText(a[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:l,yAlign:o}=this,{x:c,y:d}=e,{width:m,height:u}=s,{topLeft:p,topRight:h,bottomLeft:g,bottomRight:x}=pc(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(c+p,d),o==="top"&&this.drawCaret(e,n,s,a),n.lineTo(c+m-h,d),n.quadraticCurveTo(c+m,d,c+m,d+h),o==="center"&&l==="right"&&this.drawCaret(e,n,s,a),n.lineTo(c+m,d+u-x),n.quadraticCurveTo(c+m,d+u,c+m-x,d+u),o==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(c+g,d+u),n.quadraticCurveTo(c,d+u,c,d+u-g),o==="center"&&l==="left"&&this.drawCaret(e,n,s,a),n.lineTo(c,d+p),n.quadraticCurveTo(c,d,c+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,l=s&&s.y;if(a||l){const o=Hd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=NN(this,e),d=Object.assign({},o,this._size),m=CN(n,e,d),u=SN(e,d,m,n);(a._to!==u.x||l._to!==u.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},l={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Js(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(l,e,a,n),iT(e,n.textDirection),l.y+=o.top,this.drawTitle(l,e,n),this.drawBody(l,e,n),this.drawFooter(l,e,n),sT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:c,index:d})=>{const m=this.chart.getDatasetMeta(c);if(!m)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:m.data[d],index:d}}),l=!gp(s,a),o=this._positionChanged(a,n);(l||o)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,l=this._active||[],o=this._getActiveElements(e,l,n,s),c=this._positionChanged(o,e),d=n||!gp(o,l)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,s,a){const l=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,l.mode,l,s);return l.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:a,options:l}=this,o=Hd[l.position].call(this,e,n);return o!==!1&&(s!==o.x||a!==o.y)}};var jT={id:"tooltip",_element:TN,positioners:Hd,afterInit(t,e,n){n&&(t.tooltip=new TN({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Gq=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Yq(t,e,n,s){const a=t.indexOf(e);if(a===-1)return Gq(t,e,n,s);const l=t.lastIndexOf(e);return a!==l?n:a}const Qq=(t,e)=>t===null?null:rs(Math.round(t),0,e);function AN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Zq extends Zc{static id="category";static defaults={ticks:{callback:AN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:l}of n)s[a]===l&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(An(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Yq(s,e,sn(n,e),this._addedLabels),Qq(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let l=this.getLabels();l=e===0&&n===l.length-1?l:l.slice(e,n+1),this._valueRange=Math.max(l.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)a.push({value:o});return a}getLabelForValue(e){return AN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Xq(t,e){const n=[],{bounds:a,step:l,min:o,max:c,precision:d,count:m,maxTicks:u,maxDigits:p,includeBounds:h}=t,g=l||1,x=u-1,{min:v,max:y}=e,b=!An(o),k=!An(c),w=!An(m),S=(y-v)/(p+1);let j=M0((y-v)/x/g)*g,T,N,_,A;if(j<1e-14&&!b&&!k)return[{value:v},{value:y}];A=Math.ceil(y/j)-Math.floor(v/j),A>x&&(j=M0(A*j/x/g)*g),An(d)||(T=Math.pow(10,d),j=Math.ceil(j*T)/T),a==="ticks"?(N=Math.floor(v/j)*j,_=Math.ceil(y/j)*j):(N=v,_=y),b&&k&&l&&W$((c-o)/l,j/1e3)?(A=Math.round(Math.min((c-o)/j,u)),j=(c-o)/A,N=o,_=c):w?(N=b?o:N,_=k?c:_,A=m-1,j=(_-N)/A):(A=(_-N)/j,Mh(A,Math.round(A),j/1e3)?A=Math.round(A):A=Math.ceil(A));const P=Math.max(I0(j),I0(N));T=Math.pow(10,An(d)?P:d),N=Math.round(N*T)/T,_=Math.round(_*T)/T;let E=0;for(b&&(h&&N!==o?(n.push({value:o}),N<o&&E++,Mh(Math.round((N+E*j)*T)/T,o,DN(o,S,t))&&E++):N<o&&E++);E<A;++E){const M=Math.round((N+E*j)*T)/T;if(k&&M>c)break;n.push({value:M})}return k&&h&&_!==c?n.length&&Mh(n[n.length-1].value,c,DN(c,S,t))?n[n.length-1].value=c:n.push({value:c}):(!k||_===c)&&n.push({value:_}),n}function DN(t,e,{horizontal:n,minRotation:s}){const a=hr(s),l=(n?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/l,o)}class Jq extends Zc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return An(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:l}=this;const o=d=>a=n?a:d,c=d=>l=s?l:d;if(e){const d=dl(a),m=dl(l);d<0&&m<0?c(0):d>0&&m>0&&o(0)}if(a===l){let d=l===0?1:Math.abs(l*.05);c(l+d),e||o(a-d)}this.min=a,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},l=this._range||this,o=Xq(a,l);return e.bounds==="ticks"&&K$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return iw(e,this.chart.options.locale,this.options.ticks.format)}}class e9 extends Jq{static id="linear";static defaults={ticks:{callback:Y2.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xs(e)?e:0,this.max=Xs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=hr(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,l.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Mg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},as=Object.keys(Mg);function RN(t,e){return t-e}function PN(t,e){if(An(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:l}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Xs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(a&&(o=a==="week"&&(xp(l)||l===!0)?n.startOf(o,"isoWeek",l):n.startOf(o,a)),+o)}function MN(t,e,n,s){const a=as.length;for(let l=as.indexOf(t);l<a-1;++l){const o=Mg[as[l]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return as[l]}return as[a-1]}function t9(t,e,n,s,a){for(let l=as.length-1;l>=as.indexOf(n);l--){const o=as[l];if(Mg[o].common&&t._adapter.diff(a,s,o)>=e-1)return o}return as[n?as.indexOf(n):0]}function n9(t){for(let e=as.indexOf(t)+1,n=as.length;e<n;++e)if(Mg[as[e]].common)return as[e]}function IN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=tw(n,e),l=n[s]>=e?n[s]:n[a];t[l]=!0}}function i9(t,e,n,s){const a=t._adapter,l=+a.startOf(e[0].value,s),o=e[e.length-1].value;let c,d;for(c=l;c<=o;c=+a.add(c,1,s))d=n[c],d>=0&&(e[d].major=!0);return e}function ON(t,e,n){const s=[],a={},l=e.length;let o,c;for(o=0;o<l;++o)c=e[o],a[c]=o,s.push({value:c,major:!1});return l===0||!n?s:i9(t,s,a,n)}class FN extends Zc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new h8._date(e.adapters.date);a.init(n),em(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:PN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:l,minDefined:o,maxDefined:c}=this.getUserBounds();function d(m){!o&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!c&&!isNaN(m.max)&&(l=Math.max(l,m.max))}(!o||!c)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Xs(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),l=Xs(l)&&!isNaN(l)?l:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,l-1),this.max=Math.max(a+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const l=this.min,o=this.max,c=X$(a,l,o);return this._unit=n.unit||(s.autoSkip?MN(n.minUnit,this.min,this.max,this._getLabelCapacity(l)):t9(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:n9(this._unit),this.initOffsets(a),e.reverse&&c.reverse(),ON(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,l;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?s=l:s=(l-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=rs(n,0,o),s=rs(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,l=a.time,o=l.unit||MN(l.minUnit,n,s,this._getLabelCapacity(n)),c=sn(a.ticks.stepSize,1),d=o==="week"?l.isoWeekday:!1,m=xp(d)||d===!0,u={};let p=n,h,g;if(m&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,m?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(h=p,g=0;h<s;h=+e.add(h,c,o),g++)IN(u,h,x);return(h===s||a.bounds==="ticks"||g===1)&&IN(u,h,x),Object.keys(u).sort(RN).map(v=>+v)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,l=this._unit,o=n||a[l];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,a){const l=this.options,o=l.ticks.callback;if(o)return qn(o,[e,n,s],this);const c=l.time.displayFormats,d=this._unit,m=this._majorUnit,u=d&&c[d],p=m&&c[m],h=s[n],g=m&&p&&h&&h.major;return this._adapter.format(e,a||(g?p:u))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=hr(this.isHorizontal()?n.maxRotation:n.minRotation),l=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:s*l+c*o,h:s*o+c*l}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,l=this._tickFormatFunction(e,0,ON(this,[e],this._majorUnit),a),o=this._getLabelSize(l),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(PN(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return U2(e.sort(RN))}}function Ju(t,e,n){let s=0,a=t.length-1,l,o,c,d;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Gx(t,"pos",e)),{pos:l,time:c}=t[s],{pos:o,time:d}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Gx(t,"time",e)),{time:l,pos:c}=t[s],{time:o,pos:d}=t[a]);const m=o-l;return m?c+(d-c)*(e-l)/m:c}class ipe extends FN{static id="timeseries";static defaults=FN.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ju(n,this.min),this._tableRange=Ju(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],l=[];let o,c,d,m,u;for(o=0,c=e.length;o<c;++o)m=e[o],m>=n&&m<=s&&a.push(m);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=a.length;o<c;++o)u=a[o+1],d=a[o-1],m=a[o],Math.round((u+d)/2)!==m&&l.push({time:m,pos:o/(c-1)});return l}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,l)=>a-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Ju(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Ju(this._table,s*this._tableRange+this._minPos,!0)}}const NT="label";function LN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function s9(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function CT(t,e){t.labels=e}function ST(t,e,n=NT){const s=[];t.datasets=e.map(a=>{const l=t.datasets.find(o=>o[n]===a[n]);return!l||!a.data||s.includes(l)?{...a}:(s.push(l),Object.assign(l,a),l)})}function a9(t,e=NT){const n={labels:[],datasets:[]};return CT(n,t.labels),ST(n,t.datasets,e),n}function r9(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:l,type:o,data:c,options:d,plugins:m=[],fallbackContent:u,updateMode:p,...h}=t,g=f.useRef(null),x=f.useRef(null),v=()=>{g.current&&(x.current=new Qm(g.current,{type:o,data:a9(c,l),options:d&&{...d},plugins:m}),LN(e,x.current))},y=()=>{LN(e,null),x.current&&(x.current.destroy(),x.current=null)};return f.useEffect(()=>{!a&&x.current&&d&&s9(x.current,d)},[a,d]),f.useEffect(()=>{!a&&x.current&&CT(x.current.config.data,c.labels)},[a,c.labels]),f.useEffect(()=>{!a&&x.current&&c.datasets&&ST(x.current.config.data,c.datasets,l)},[a,c.datasets]),f.useEffect(()=>{x.current&&(a?(y(),setTimeout(v)):x.current.update(p))},[a,d,c.labels,c.datasets,p]),f.useEffect(()=>{x.current&&(y(),setTimeout(v))},[o]),f.useEffect(()=>(v(),()=>y()),[]),i.jsx("canvas",{ref:g,role:"img",height:n,width:s,...h,children:u})}const l9=f.forwardRef(r9);function _T(t,e){return Qm.register(e),f.forwardRef((n,s)=>i.jsx(l9,{...n,ref:s,type:t}))}const o9=_T("bar",d8),ET=_T("doughnut",u8);Qm.register(vT,jT,bT);const c9=({clinicId:t,dateRange:e})=>{const n=f.useMemo(()=>{const u={clinic_id:t};if(e&&e.length===2){const p=h=>{if(!h)return"";const g=new Date(h),x=g.getFullYear(),v=String(g.getMonth()+1).padStart(2,"0"),y=String(g.getDate()).padStart(2,"0");return`${x}-${v}-${y}`};u.start_date=p(e[0]),u.end_date=p(e[1])}return u},[t,e]),{data:s,isLoading:a}=e$(n),l={booked:{color:"#00C853",label:r("Booked","kivicare-clinic-management-system")},check_in:{color:"#2962FF",label:r("Check-in","kivicare-clinic-management-system")},check_out:{color:"#82B1FF",label:r("Check-out","kivicare-clinic-management-system")},pending:{color:"#FF8A80",label:r("Pending","kivicare-clinic-management-system")},cancelled:{color:"#FF5252",label:r("Cancelled","kivicare-clinic-management-system")}},o=f.useMemo(()=>{if(!s?.data?.status_breakdown)return null;const u=s.data.status_breakdown;return{labels:Object.keys(l).map(p=>l[p].label),datasets:[{data:[u.booked||0,u.check_in||0,u.check_out||0,u.pending||0,u.cancelled||0],backgroundColor:[l.booked.color,l.check_in.color,l.check_out.color,l.pending.color,l.cancelled.color],borderWidth:0,hoverOffset:4}]}},[s]),c=s?.data?.count||0,d=f.useMemo(()=>({id:"centerText",beforeDraw:function(u){const{width:p}=u,{height:h}=u,{ctx:g}=u;g.restore();const x=(h/8).toFixed(2);g.font=`bold ${x}px sans-serif`,g.textBaseline="middle",g.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--bs-heading-color")||"#333";const v=c.toLocaleString(),y=Math.round((p-g.measureText(v).width)/2),b=h/2;g.fillText(v,y,b-10);const k=(h/16).toFixed(2);g.font=`${k}px sans-serif`,g.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--bs-secondary-color")||"#6c757d";const w=r("Total Bookings","kivicare-clinic-management-system"),S=Math.round((p-g.measureText(w).width)/2);g.fillText(w,S,b+25),g.save()}}),[c]),m={cutout:"65%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(u){const p=u.label||"",h=u.raw||0,g=c>0?Math.round(h/c*100):0;return`${p}: ${h} (${g}%)`}}}},maintainAspectRatio:!1};return a?i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"200px",height:"200px"}})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"10px",height:"10px"}}),i.jsx("div",{className:"skeleton-element",style:{width:"80px",height:"1rem"}})]},`legend-skeleton-${p}`))})]})]}):i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4",style:{height:"220px"},children:o&&i.jsx(ET,{data:o,options:m,plugins:[d]})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Object.entries(l).map(([u,p])=>{const h=s?.data?.status_breakdown?.[u]||0,g=c>0?Math.round(h/c*100):0;return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{className:"rounded-circle",style:{width:"10px",height:"10px",backgroundColor:p.color}}),i.jsx("span",{className:"fw-medium text-dark",children:p.label}),i.jsxs("span",{className:"text-muted",children:[h," (",g,"%)"]})]},u)})})]})]})};function Ln(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Jr(t,e){return typeof t=="function"?t(e):t}function Ts(t,e){return n=>{e.setState(s=>({...s,[t]:Jr(n,s[t])}))}}function Ig(t){return t instanceof Function}function d9(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function m9(t,e){const n=[],s=a=>{a.forEach(l=>{n.push(l);const o=e(l);o!=null&&o.length&&s(o)})};return s(t),n}function zt(t,e,n){let s=[],a;return l=>{let o;n.key&&n.debug&&(o=Date.now());const c=t(l);if(!(c.length!==s.length||c.some((u,p)=>s[p]!==u)))return a;s=c;let m;if(n.key&&n.debug&&(m=Date.now()),a=e(...c),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,p=Math.round((Date.now()-m)*100)/100,h=p/16,g=(x,v)=>{for(x=String(x);x.length<v;)x=" "+x;return x};console.info(`%c ${g(p,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n?.key)}return a}}function Vt(t,e,n,s){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:s}}function u9(t,e,n,s){const a=()=>{var o;return(o=l.getValue())!=null?o:t.options.renderFallbackValue},l={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(s),renderValue:a,getContext:zt(()=>[t,n,e,l],(o,c,d,m)=>({table:o,column:c,row:d,cell:m,getValue:m.getValue,renderValue:m.renderValue}),Vt(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(l,n,e,t)},{}),l}function h9(t,e,n,s){var a,l;const c={...t._getDefaultColumnDef(),...e},d=c.accessorKey;let m=(a=(l=c.id)!=null?l:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:d&&(d.includes(".")?u=h=>{let g=h;for(const v of d.split(".")){var x;g=(x=g)==null?void 0:x[v]}return g}:u=h=>h[c.accessorKey]),!m)throw new Error;let p={id:`${String(m)}`,accessorFn:u,parent:s,depth:n,columnDef:c,columns:[],getFlatColumns:zt(()=>[!0],()=>{var h;return[p,...(h=p.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},Vt(t.options,"debugColumns")),getLeafColumns:zt(()=>[t._getOrderColumnsFn()],h=>{var g;if((g=p.columns)!=null&&g.length){let x=p.columns.flatMap(v=>v.getLeafColumns());return h(x)}return[p]},Vt(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(p,t);return p}const Ti="debugHeaders";function $N(t,e,n){var s;let l={id:(s=n.id)!=null?s:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],c=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(c),o.push(d)};return c(l),o},getContext:()=>({table:t,header:l,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(l,t)}),l}const p9={createTable:t=>{t.getHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>{var l,o;const c=(l=s?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?l:[],d=(o=a?.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?o:[],m=n.filter(p=>!(s!=null&&s.includes(p.id))&&!(a!=null&&a.includes(p.id)));return eh(e,[...c,...m,...d],t)},Vt(t.options,Ti)),t.getCenterHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>(n=n.filter(l=>!(s!=null&&s.includes(l.id))&&!(a!=null&&a.includes(l.id))),eh(e,n,t,"center")),Vt(t.options,Ti)),t.getLeftHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,s)=>{var a;const l=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return eh(e,l,t,"left")},Vt(t.options,Ti)),t.getRightHeaderGroups=zt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,s)=>{var a;const l=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return eh(e,l,t,"right")},Vt(t.options,Ti)),t.getFooterGroups=zt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getLeftFooterGroups=zt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getCenterFooterGroups=zt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getRightFooterGroups=zt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Vt(t.options,Ti)),t.getFlatHeaders=zt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getLeftFlatHeaders=zt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getCenterFlatHeaders=zt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getRightFlatHeaders=zt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Vt(t.options,Ti)),t.getCenterLeafHeaders=zt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getLeftLeafHeaders=zt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getRightLeafHeaders=zt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Vt(t.options,Ti)),t.getLeafHeaders=zt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,s)=>{var a,l,o,c,d,m;return[...(a=(l=e[0])==null?void 0:l.headers)!=null?a:[],...(o=(c=n[0])==null?void 0:c.headers)!=null?o:[],...(d=(m=s[0])==null?void 0:m.headers)!=null?d:[]].map(u=>u.getLeafHeaders()).flat()},Vt(t.options,Ti))}};function eh(t,e,n,s){var a,l;let o=0;const c=function(h,g){g===void 0&&(g=1),o=Math.max(o,g),h.filter(x=>x.getIsVisible()).forEach(x=>{var v;(v=x.columns)!=null&&v.length&&c(x.columns,g+1)},0)};c(t);let d=[];const m=(h,g)=>{const x={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},v=[];h.forEach(y=>{const b=[...v].reverse()[0],k=y.column.depth===x.depth;let w,S=!1;if(k&&y.column.parent?w=y.column.parent:(w=y.column,S=!0),b&&b?.column===w)b.subHeaders.push(y);else{const j=$N(n,w,{id:[s,g,w.id,y?.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${v.filter(T=>T.column===w).length}`:void 0,depth:g,index:v.length});j.subHeaders.push(y),v.push(j)}x.headers.push(y),y.headerGroup=x}),d.push(x),g>0&&m(v,g-1)},u=e.map((h,g)=>$N(n,h,{depth:o,index:g}));m(u,o-1),d.reverse();const p=h=>h.filter(x=>x.column.getIsVisible()).map(x=>{let v=0,y=0,b=[0];x.subHeaders&&x.subHeaders.length?(b=[],p(x.subHeaders).forEach(w=>{let{colSpan:S,rowSpan:j}=w;v+=S,b.push(j)})):v=1;const k=Math.min(...b);return y=y+k,x.colSpan=v,x.rowSpan=y,{colSpan:v,rowSpan:y}});return p((a=(l=d[0])==null?void 0:l.headers)!=null?a:[]),d}const pw=(t,e,n,s,a,l,o)=>{let c={id:e,index:s,original:n,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(c._valuesCache.hasOwnProperty(d))return c._valuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return c._valuesCache[d]=m.accessorFn(c.original,s),c._valuesCache[d]},getUniqueValues:d=>{if(c._uniqueValuesCache.hasOwnProperty(d))return c._uniqueValuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(c._uniqueValuesCache[d]=m.columnDef.getUniqueValues(c.original,s),c._uniqueValuesCache[d]):(c._uniqueValuesCache[d]=[c.getValue(d)],c._uniqueValuesCache[d])},renderValue:d=>{var m;return(m=c.getValue(d))!=null?m:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>m9(c.subRows,d=>d.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let d=[],m=c;for(;;){const u=m.getParentRow();if(!u)break;d.push(u),m=u}return d.reverse()},getAllCells:zt(()=>[t.getAllLeafColumns()],d=>d.map(m=>u9(t,c,m,m.id)),Vt(t.options,"debugRows")),_getAllCellsByColumnId:zt(()=>[c.getAllCells()],d=>d.reduce((m,u)=>(m[u.column.id]=u,m),{}),Vt(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const m=t._features[d];m==null||m.createRow==null||m.createRow(c,t)}return c},g9={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},TT=(t,e,n)=>{var s,a;const l=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(l))};TT.autoRemove=t=>ha(t);const AT=(t,e,n)=>{var s;return!!(!((s=t.getValue(e))==null||(s=s.toString())==null)&&s.includes(n))};AT.autoRemove=t=>ha(t);const DT=(t,e,n)=>{var s;return((s=t.getValue(e))==null||(s=s.toString())==null?void 0:s.toLowerCase())===n?.toLowerCase()};DT.autoRemove=t=>ha(t);const RT=(t,e,n)=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(n)};RT.autoRemove=t=>ha(t);const PT=(t,e,n)=>!n.some(s=>{var a;return!((a=t.getValue(e))!=null&&a.includes(s))});PT.autoRemove=t=>ha(t)||!(t!=null&&t.length);const MT=(t,e,n)=>n.some(s=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(s)});MT.autoRemove=t=>ha(t)||!(t!=null&&t.length);const IT=(t,e,n)=>t.getValue(e)===n;IT.autoRemove=t=>ha(t);const OT=(t,e,n)=>t.getValue(e)==n;OT.autoRemove=t=>ha(t);const gw=(t,e,n)=>{let[s,a]=n;const l=t.getValue(e);return l>=s&&l<=a};gw.resolveFilterValue=t=>{let[e,n]=t,s=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,l=e===null||Number.isNaN(s)?-1/0:s,o=n===null||Number.isNaN(a)?1/0:a;if(l>o){const c=l;l=o,o=c}return[l,o]};gw.autoRemove=t=>ha(t)||ha(t[0])&&ha(t[1]);const dr={includesString:TT,includesStringSensitive:AT,equalsString:DT,arrIncludes:RT,arrIncludesAll:PT,arrIncludesSome:MT,equals:IT,weakEquals:OT,inNumberRange:gw};function ha(t){return t==null||t===""}const f9={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Ts("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);return typeof s=="string"?dr.includesString:typeof s=="number"?dr.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?dr.equals:Array.isArray(s)?dr.arrIncludes:dr.weakEquals},t.getFilterFn=()=>{var n,s;return Ig(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(s=e.options.filterFns)==null?void 0:s[t.columnDef.filterFn])!=null?n:dr[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,s,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((s=e.options.enableColumnFilters)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(s=>s.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,s;return(n=(s=e.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(s=>{const a=t.getFilterFn(),l=s?.find(u=>u.id===t.id),o=Jr(n,l?l.value:void 0);if(BN(a,o,t)){var c;return(c=s?.filter(u=>u.id!==t.id))!=null?c:[]}const d={id:t.id,value:o};if(l){var m;return(m=s?.map(u=>u.id===t.id?d:u))!=null?m:[]}return s!=null&&s.length?[...s,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),s=a=>{var l;return(l=Jr(e,a))==null?void 0:l.filter(o=>{const c=n.find(d=>d.id===o.id);if(c){const d=c.getFilterFn();if(BN(d,o.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(s)},t.resetColumnFilters=e=>{var n,s;t.setColumnFilters(e?[]:(n=(s=t.initialState)==null?void 0:s.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function BN(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const v9=(t,e,n)=>n.reduce((s,a)=>{const l=a.getValue(t);return s+(typeof l=="number"?l:0)},0),x9=(t,e,n)=>{let s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(s>l||s===void 0&&l>=l)&&(s=l)}),s},y9=(t,e,n)=>{let s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(s<l||s===void 0&&l>=l)&&(s=l)}),s},b9=(t,e,n)=>{let s,a;return n.forEach(l=>{const o=l.getValue(t);o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)))}),[s,a]},w9=(t,e)=>{let n=0,s=0;if(e.forEach(a=>{let l=a.getValue(t);l!=null&&(l=+l)>=l&&(++n,s+=l)}),n)return s/n},k9=(t,e)=>{if(!e.length)return;const n=e.map(l=>l.getValue(t));if(!d9(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((l,o)=>l-o);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},j9=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),N9=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,C9=(t,e)=>e.length,kv={sum:v9,min:x9,max:y9,extent:b9,mean:w9,median:k9,unique:j9,uniqueCount:N9,count:C9},S9={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Ts("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(s=>s!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,s;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((s=e.options.enableGrouping)!=null?s:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);if(typeof s=="number")return kv.sum;if(Object.prototype.toString.call(s)==="[object Date]")return kv.extent},t.getAggregationFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(s=e.options.aggregationFns)==null?void 0:s[t.columnDef.aggregationFn])!=null?n:kv[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,s;t.setGrouping(e?[]:(n=(s=t.initialState)==null?void 0:s.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const s=e.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(t._groupingValuesCache[n]=s.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,s)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function _9(t,e,n){if(!(e!=null&&e.length)||!n)return t;const s=t.filter(l=>!e.includes(l.id));return n==="remove"?s:[...e.map(l=>t.find(o=>o.id===l)).filter(Boolean),...s]}const E9={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Ts("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=zt(n=>[im(e,n)],n=>n.findIndex(s=>s.id===t.id),Vt(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var s;return((s=im(e,n)[0])==null?void 0:s.id)===t.id},t.getIsLastColumn=n=>{var s;const a=im(e,n);return((s=a[a.length-1])==null?void 0:s.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=zt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,s)=>a=>{let l=[];if(!(e!=null&&e.length))l=a;else{const o=[...e],c=[...a];for(;c.length&&o.length;){const d=o.shift(),m=c.findIndex(u=>u.id===d);m>-1&&l.push(c.splice(m,1)[0])}l=[...l,...c]}return _9(l,n,s)},Vt(t.options,"debugTable"))}},jv=()=>({left:[],right:[]}),T9={getInitialState:t=>({columnPinning:jv(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Ts("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const s=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var l,o;if(n==="right"){var c,d;return{left:((c=a?.left)!=null?c:[]).filter(p=>!(s!=null&&s.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(s!=null&&s.includes(p))),...s]}}if(n==="left"){var m,u;return{left:[...((m=a?.left)!=null?m:[]).filter(p=>!(s!=null&&s.includes(p))),...s],right:((u=a?.right)!=null?u:[]).filter(p=>!(s!=null&&s.includes(p)))}}return{left:((l=a?.left)!=null?l:[]).filter(p=>!(s!=null&&s.includes(p))),right:((o=a?.right)!=null?o:[]).filter(p=>!(s!=null&&s.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(s=>{var a,l,o;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((l=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?l:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:s,right:a}=e.getState().columnPinning,l=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return l?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();return a?(n=(s=e.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,s,a)=>{const l=[...s??[],...a??[]];return n.filter(o=>!l.includes(o.column.id))},Vt(e.options,"debugRows")),t.getLeftVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,s)=>(s??[]).map(l=>n.find(o=>o.column.id===l)).filter(Boolean).map(l=>({...l,position:"left"})),Vt(e.options,"debugRows")),t.getRightVisibleCells=zt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,s)=>(s??[]).map(l=>n.find(o=>o.column.id===l)).filter(Boolean).map(l=>({...l,position:"right"})),Vt(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,s;return t.setColumnPinning(e?jv():(n=(s=t.initialState)==null?void 0:s.columnPinning)!=null?n:jv())},t.getIsSomeColumnsPinned=e=>{var n;const s=t.getState().columnPinning;if(!e){var a,l;return!!((a=s.left)!=null&&a.length||(l=s.right)!=null&&l.length)}return!!((n=s[e])!=null&&n.length)},t.getLeftLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Vt(t.options,"debugColumns")),t.getRightLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Vt(t.options,"debugColumns")),t.getCenterLeafColumns=zt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s)=>{const a=[...n??[],...s??[]];return e.filter(l=>!a.includes(l.id))},Vt(t.options,"debugColumns"))}};function A9(t){return t||(typeof document<"u"?document:null)}const th={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nv=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),D9={getDefaultColumnDef:()=>th,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nv(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ts("columnSizing",t),onColumnSizingInfoChange:Ts("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,s,a;const l=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:th.minSize,(s=l??t.columnDef.size)!=null?s:th.size),(a=t.columnDef.maxSize)!=null?a:th.maxSize)},t.getStart=zt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(0,t.getIndex(n)).reduce((a,l)=>a+l.getSize(),0),Vt(e.options,"debugColumns")),t.getAfter=zt(n=>[n,im(e,n),e.getState().columnSizing],(n,s)=>s.slice(t.getIndex(n)+1).reduce((a,l)=>a+l.getSize(),0),Vt(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:s,...a}=n;return a})},t.getCanResize=()=>{var n,s;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((s=e.options.enableColumnResizing)!=null?s:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var l;n+=(l=a.column.getSize())!=null?l:0}};return s(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const s=e.getColumn(t.column.id),a=s?.getCanResize();return l=>{if(!s||!a||(l.persist==null||l.persist(),Cv(l)&&l.touches&&l.touches.length>1))return;const o=t.getSize(),c=t?t.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[s.id,s.getSize()]],d=Cv(l)?Math.round(l.touches[0].clientX):l.clientX,m={},u=(b,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(w=>{var S,j;const T=e.options.columnResizeDirection==="rtl"?-1:1,N=(k-((S=w?.startOffset)!=null?S:0))*T,_=Math.max(N/((j=w?.startSize)!=null?j:0),-.999999);return w.columnSizingStart.forEach(A=>{let[P,E]=A;m[P]=Math.round(Math.max(E+E*_,0)*100)/100}),{...w,deltaOffset:N,deltaPercentage:_}}),(e.options.columnResizeMode==="onChange"||b==="end")&&e.setColumnSizing(w=>({...w,...m})))},p=b=>u("move",b),h=b=>{u("end",b),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=A9(n),x={moveHandler:b=>p(b.clientX),upHandler:b=>{g?.removeEventListener("mousemove",x.moveHandler),g?.removeEventListener("mouseup",x.upHandler),h(b.clientX)}},v={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),p(b.touches[0].clientX),!1),upHandler:b=>{var k;g?.removeEventListener("touchmove",v.moveHandler),g?.removeEventListener("touchend",v.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),h((k=b.touches[0])==null?void 0:k.clientX)}},y=R9()?{passive:!1}:!1;Cv(l)?(g?.addEventListener("touchmove",v.moveHandler,y),g?.addEventListener("touchend",v.upHandler,y)):(g?.addEventListener("mousemove",x.moveHandler,y),g?.addEventListener("mouseup",x.upHandler,y)),e.setColumnSizingInfo(b=>({...b,startOffset:d,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:s.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nv():(n=t.initialState.columnSizingInfo)!=null?n:Nv())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0}}};let nh=null;function R9(){if(typeof nh=="boolean")return nh;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return nh=t,nh}function Cv(t){return t.type==="touchstart"}const P9={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Ts("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(s=>({...s,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,s;const a=t.columns;return(n=a.length?a.some(l=>l.getIsVisible()):(s=e.getState().columnVisibility)==null?void 0:s[t.id])!=null?n:!0},t.getCanHide=()=>{var n,s;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((s=e.options.enableHiding)!=null?s:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=zt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Vt(e.options,"debugRows")),t.getVisibleCells=zt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],Vt(e.options,"debugRows"))},createTable:t=>{const e=(n,s)=>zt(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(l=>l.getIsVisible==null?void 0:l.getIsVisible()),Vt(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var s;t.setColumnVisibility(n?{}:(s=t.initialState.columnVisibility)!=null?s:{})},t.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,l)=>({...a,[l.id]:n||!(l.getCanHide!=null&&l.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;t.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function im(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const M9={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},I9={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Ts("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const s=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,s,a,l;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableGlobalFilter)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((l=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?l:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>dr.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:s}=t.options;return Ig(s)?s:s==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[s])!=null?e:dr[s]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},O9={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Ts("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?s:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=s=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(s),t.toggleAllRowsExpanded=s=>{s??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=s=>{var a,l;t.setExpanded(s?{}:(a=(l=t.initialState)==null?void 0:l.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const s=t.getState().expanded;return s===!0||Object.values(s).some(Boolean)},t.getIsAllRowsExpanded=()=>{const s=t.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let s=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(l=>{const o=l.split(".");s=Math.max(s,o.length)}),s},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(s=>{var a;const l=s===!0?!0:!!(s!=null&&s[t.id]);let o={};if(s===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{o[c]=!0}):o=s,n=(a=n)!=null?a:!l,!l&&n)return{...o,[t.id]:!0};if(l&&!n){const{[t.id]:c,...d}=o;return d}return s})},t.getIsExpanded=()=>{var n;const s=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:s===!0||s?.[t.id])},t.getCanExpand=()=>{var n,s,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((s=e.options.enableExpanding)!=null?s:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,s=t;for(;n&&s.parentId;)s=e.getRow(s.parentId,!0),n=s.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Xx=0,Jx=10,Sv=()=>({pageIndex:Xx,pageSize:Jx}),F9={getInitialState:t=>({...t,pagination:{...Sv(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Ts("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?s:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=s=>{const a=l=>Jr(s,l);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=s=>{var a;t.setPagination(s?Sv():(a=t.initialState.pagination)!=null?a:Sv())},t.setPageIndex=s=>{t.setPagination(a=>{let l=Jr(s,a.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return l=Math.max(0,Math.min(l,o)),{...a,pageIndex:l}})},t.resetPageIndex=s=>{var a,l;t.setPageIndex(s?Xx:(a=(l=t.initialState)==null||(l=l.pagination)==null?void 0:l.pageIndex)!=null?a:Xx)},t.resetPageSize=s=>{var a,l;t.setPageSize(s?Jx:(a=(l=t.initialState)==null||(l=l.pagination)==null?void 0:l.pageSize)!=null?a:Jx)},t.setPageSize=s=>{t.setPagination(a=>{const l=Math.max(1,Jr(s,a.pageSize)),o=a.pageSize*a.pageIndex,c=Math.floor(o/l);return{...a,pageIndex:c,pageSize:l}})},t.setPageCount=s=>t.setPagination(a=>{var l;let o=Jr(s,(l=t.options.pageCount)!=null?l:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=zt(()=>[t.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((l,o)=>o)),a},Vt(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:s}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:s<a-1},t.previousPage=()=>t.setPageIndex(s=>s-1),t.nextPage=()=>t.setPageIndex(s=>s+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var s;return(s=t.options.pageCount)!=null?s:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var s;return(s=t.options.rowCount)!=null?s:t.getPrePaginationRowModel().rows.length}}},_v=()=>({top:[],bottom:[]}),L9={getInitialState:t=>({rowPinning:_v(),...t}),getDefaultOptions:t=>({onRowPinningChange:Ts("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,s,a)=>{const l=s?t.getLeafRows().map(d=>{let{id:m}=d;return m}):[],o=a?t.getParentRows().map(d=>{let{id:m}=d;return m}):[],c=new Set([...o,t.id,...l]);e.setRowPinning(d=>{var m,u;if(n==="bottom"){var p,h;return{top:((p=d?.top)!=null?p:[]).filter(v=>!(c!=null&&c.has(v))),bottom:[...((h=d?.bottom)!=null?h:[]).filter(v=>!(c!=null&&c.has(v))),...Array.from(c)]}}if(n==="top"){var g,x;return{top:[...((g=d?.top)!=null?g:[]).filter(v=>!(c!=null&&c.has(v))),...Array.from(c)],bottom:((x=d?.bottom)!=null?x:[]).filter(v=>!(c!=null&&c.has(v)))}}return{top:((m=d?.top)!=null?m:[]).filter(v=>!(c!=null&&c.has(v))),bottom:((u=d?.bottom)!=null?u:[]).filter(v=>!(c!=null&&c.has(v)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=e.options;return typeof s=="function"?s(t):(n=s??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:s,bottom:a}=e.getState().rowPinning,l=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return l?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();if(!a)return-1;const l=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:c}=o;return c});return(s=l?.indexOf(t.id))!=null?s:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,s;return t.setRowPinning(e?_v():(n=(s=t.initialState)==null?void 0:s.rowPinning)!=null?n:_v())},t.getIsSomeRowsPinned=e=>{var n;const s=t.getState().rowPinning;if(!e){var a,l;return!!((a=s.top)!=null&&a.length||(l=s.bottom)!=null&&l.length)}return!!((n=s[e])!=null&&n.length)},t._getPinnedRows=(e,n,s)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(o=>{const c=t.getRow(o,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(o=>e.find(c=>c.id===o))).filter(Boolean).map(o=>({...o,position:s}))},t.getTopRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Vt(t.options,"debugRows")),t.getBottomRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Vt(t.options,"debugRows")),t.getCenterRows=zt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,s)=>{const a=new Set([...n??[],...s??[]]);return e.filter(l=>!a.has(l.id))},Vt(t.options,"debugRows"))}},$9={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Ts("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const s={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(l=>{l.getCanSelect()&&(s[l.id]=!0)}):a.forEach(l=>{delete s[l.id]}),s})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const s=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(l=>{ey(a,l.id,s,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getFilteredSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getGroupedSelectedRowModel=zt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Vt(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let s=!!(e.length&&Object.keys(n).length);return s&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let s=!!e.length;return s&&e.some(a=>!n[a.id])&&(s=!1),s},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,s)=>{const a=t.getIsSelected();e.setRowSelection(l=>{var o;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return l;const c={...l};return ey(c,t.id,n,(o=s?.selectChildren)!=null?o:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return fw(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return ty(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return ty(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return s=>{var a;n&&t.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},ey=(t,e,n,s,a)=>{var l;const o=a.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),o.getCanSelect()&&(t[e]=!0)):delete t[e],s&&(l=o.subRows)!=null&&l.length&&o.getCanSelectSubRows()&&o.subRows.forEach(c=>ey(t,c.id,n,s,a))};function Ev(t,e){const n=t.getState().rowSelection,s=[],a={},l=function(o,c){return o.map(d=>{var m;const u=fw(d,n);if(u&&(s.push(d),a[d.id]=d),(m=d.subRows)!=null&&m.length&&(d={...d,subRows:l(d.subRows)}),u)return d}).filter(Boolean)};return{rows:l(e.rows),flatRows:s,rowsById:a}}function fw(t,e){var n;return(n=e[t.id])!=null?n:!1}function ty(t,e,n){var s;if(!((s=t.subRows)!=null&&s.length))return!1;let a=!0,l=!1;return t.subRows.forEach(o=>{if(!(l&&!a)&&(o.getCanSelect()&&(fw(o,e)?l=!0:a=!1),o.subRows&&o.subRows.length)){const c=ty(o,e);c==="all"?l=!0:(c==="some"&&(l=!0),a=!1)}}),a?"all":l?"some":!1}const ny=/([0-9]+)/gm,B9=(t,e,n)=>FT(fl(t.getValue(n)).toLowerCase(),fl(e.getValue(n)).toLowerCase()),q9=(t,e,n)=>FT(fl(t.getValue(n)),fl(e.getValue(n))),H9=(t,e,n)=>vw(fl(t.getValue(n)).toLowerCase(),fl(e.getValue(n)).toLowerCase()),z9=(t,e,n)=>vw(fl(t.getValue(n)),fl(e.getValue(n))),V9=(t,e,n)=>{const s=t.getValue(n),a=e.getValue(n);return s>a?1:s<a?-1:0},U9=(t,e,n)=>vw(t.getValue(n),e.getValue(n));function vw(t,e){return t===e?0:t>e?1:-1}function fl(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function FT(t,e){const n=t.split(ny).filter(Boolean),s=e.split(ny).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),l=s.shift(),o=parseInt(a,10),c=parseInt(l,10),d=[o,c].sort();if(isNaN(d[0])){if(a>l)return 1;if(l>a)return-1;continue}if(isNaN(d[1]))return isNaN(o)?-1:1;if(o>c)return 1;if(c>o)return-1}return n.length-s.length}const Td={alphanumeric:B9,alphanumericCaseSensitive:q9,text:H9,textCaseSensitive:z9,datetime:V9,basic:U9},W9={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Ts("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const l=a?.getValue(t.id);if(Object.prototype.toString.call(l)==="[object Date]")return Td.datetime;if(typeof l=="string"&&(s=!0,l.split(ny).length>1))return Td.alphanumeric}return s?Td.text:Td.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(s=e.options.sortingFns)==null?void 0:s[t.columnDef.sortingFn])!=null?n:Td[t.columnDef.sortingFn]},t.toggleSorting=(n,s)=>{const a=t.getNextSortingOrder(),l=typeof n<"u"&&n!==null;e.setSorting(o=>{const c=o?.find(g=>g.id===t.id),d=o?.findIndex(g=>g.id===t.id);let m=[],u,p=l?n:a==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&s?c?u="toggle":u="add":o!=null&&o.length&&d!==o.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(l||a||(u="remove")),u==="add"){var h;m=[...o,{id:t.id,desc:p}],m.splice(0,m.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?m=o.map(g=>g.id===t.id?{...g,desc:p}:g):u==="remove"?m=o.filter(g=>g.id!==t.id):m=[{id:t.id,desc:p}];return m})},t.getFirstSortDir=()=>{var n,s;return((n=(s=t.columnDef.sortDescFirst)!=null?s:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var s,a;const l=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==l&&((s=e.options.enableSortingRemoval)==null||s)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":l},t.getCanSort=()=>{var n,s;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((s=e.options.enableSorting)!=null?s:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,s;return(n=(s=t.columnDef.enableMultiSort)!=null?s:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const s=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return s?s.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,s;return(n=(s=e.getState().sorting)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return s=>{n&&(s.persist==null||s.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(s):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,s;t.setSorting(e?[]:(n=(s=t.initialState)==null?void 0:s.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},K9=[p9,P9,E9,T9,g9,f9,M9,I9,W9,S9,O9,F9,L9,$9,D9];function G9(t){var e,n;const s=[...K9,...(e=t._features)!=null?e:[]];let a={_features:s};const l=a._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),o=h=>a.options.mergeOptions?a.options.mergeOptions(l,h):{...l,...h};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(h=>{var g;d=(g=h.getInitialState==null?void 0:h.getInitialState(d))!=null?g:d});const m=[];let u=!1;const p={_features:s,options:{...l,...t},initialState:d,_queue:h=>{m.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:h=>{const g=Jr(h,a.options);a.options=o(g)},getState:()=>a.options.state,setState:h=>{a.options.onStateChange==null||a.options.onStateChange(h)},_getRowId:(h,g,x)=>{var v;return(v=a.options.getRowId==null?void 0:a.options.getRowId(h,g,x))!=null?v:`${x?[x.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(h,g)=>{let x=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[h];if(!x&&(x=a.getCoreRowModel().rowsById[h],!x))throw new Error;return x},_getDefaultColumnDef:zt(()=>[a.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:x=>{const v=x.header.column.columnDef;return v.accessorKey?v.accessorKey:v.accessorFn?v.id:null},cell:x=>{var v,y;return(v=(y=x.renderValue())==null||y.toString==null?void 0:y.toString())!=null?v:null},...a._features.reduce((x,v)=>Object.assign(x,v.getDefaultColumnDef==null?void 0:v.getDefaultColumnDef()),{}),...h}},Vt(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:zt(()=>[a._getColumnDefs()],h=>{const g=function(x,v,y){return y===void 0&&(y=0),x.map(b=>{const k=h9(a,b,y,v),w=b;return k.columns=w.columns?g(w.columns,k,y+1):[],k})};return g(h)},Vt(t,"debugColumns")),getAllFlatColumns:zt(()=>[a.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),Vt(t,"debugColumns")),_getAllFlatColumnsById:zt(()=>[a.getAllFlatColumns()],h=>h.reduce((g,x)=>(g[x.id]=x,g),{}),Vt(t,"debugColumns")),getAllLeafColumns:zt(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(h,g)=>{let x=h.flatMap(v=>v.getLeafColumns());return g(x)},Vt(t,"debugColumns")),getColumn:h=>a._getAllFlatColumnsById()[h]};Object.assign(a,p);for(let h=0;h<a._features.length;h++){const g=a._features[h];g==null||g.createTable==null||g.createTable(a)}return a}function LT(){return t=>zt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,l,o){l===void 0&&(l=0);const c=[];for(let m=0;m<a.length;m++){const u=pw(t,t._getRowId(a[m],m,o),a[m],m,l,void 0,o?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),t.options.getSubRows){var d;u.originalSubRows=t.options.getSubRows(a[m],m),(d=u.originalSubRows)!=null&&d.length&&(u.subRows=s(u.originalSubRows,l+1,u))}}return c};return n.rows=s(e),n},Vt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Y9(t,e,n){return n.options.filterFromLeafRows?Q9(t,e,n):Z9(t,e,n)}function Q9(t,e,n){var s;const a=[],l={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){var p;let g=d[h];const x=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(x.columnFilters=g.columnFilters,(p=g.subRows)!=null&&p.length&&m<o){if(x.subRows=c(g.subRows,m+1),g=x,e(g)&&!x.subRows.length){u.push(g),l[g.id]=g,a.push(g);continue}if(e(g)||x.subRows.length){u.push(g),l[g.id]=g,a.push(g);continue}}else g=x,e(g)&&(u.push(g),l[g.id]=g,a.push(g))}return u};return{rows:c(t),flatRows:a,rowsById:l}}function Z9(t,e,n){var s;const a=[],l={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let h=0;h<d.length;h++){let g=d[h];if(e(g)){var p;if((p=g.subRows)!=null&&p.length&&m<o){const v=pw(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);v.subRows=c(g.subRows,m+1),g=v}u.push(g),a.push(g),l[g.id]=g}}return u};return{rows:c(t),flatRows:a,rowsById:l}}function X9(){return t=>zt(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,s)=>{if(!e.rows.length||!(n!=null&&n.length)&&!s){for(let h=0;h<e.flatRows.length;h++)e.flatRows[h].columnFilters={},e.flatRows[h].columnFiltersMeta={};return e}const a=[],l=[];(n??[]).forEach(h=>{var g;const x=t.getColumn(h.id);if(!x)return;const v=x.getFilterFn();v&&a.push({id:h.id,filterFn:v,resolvedValue:(g=v.resolveFilterValue==null?void 0:v.resolveFilterValue(h.value))!=null?g:h.value})});const o=(n??[]).map(h=>h.id),c=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());s&&c&&d.length&&(o.push("__global__"),d.forEach(h=>{var g;l.push({id:h.id,filterFn:c,resolvedValue:(g=c.resolveFilterValue==null?void 0:c.resolveFilterValue(s))!=null?g:s})}));let m,u;for(let h=0;h<e.flatRows.length;h++){const g=e.flatRows[h];if(g.columnFilters={},a.length)for(let x=0;x<a.length;x++){m=a[x];const v=m.id;g.columnFilters[v]=m.filterFn(g,v,m.resolvedValue,y=>{g.columnFiltersMeta[v]=y})}if(l.length){for(let x=0;x<l.length;x++){u=l[x];const v=u.id;if(u.filterFn(g,v,u.resolvedValue,y=>{g.columnFiltersMeta[v]=y})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const p=h=>{for(let g=0;g<o.length;g++)if(h.columnFilters[o[g]]===!1)return!1;return!0};return Y9(e.rows,p,t)},Vt(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function J9(){return t=>zt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const s=t.getState().sorting,a=[],l=s.filter(d=>{var m;return(m=t.getColumn(d.id))==null?void 0:m.getCanSort()}),o={};l.forEach(d=>{const m=t.getColumn(d.id);m&&(o[d.id]={sortUndefined:m.columnDef.sortUndefined,invertSorting:m.columnDef.invertSorting,sortingFn:m.getSortingFn()})});const c=d=>{const m=d.map(u=>({...u}));return m.sort((u,p)=>{for(let g=0;g<l.length;g+=1){var h;const x=l[g],v=o[x.id],y=v.sortUndefined,b=(h=x?.desc)!=null?h:!1;let k=0;if(y){const w=u.getValue(x.id),S=p.getValue(x.id),j=w===void 0,T=S===void 0;if(j||T){if(y==="first")return j?-1:1;if(y==="last")return j?1:-1;k=j&&T?0:j?y:-y}}if(k===0&&(k=v.sortingFn(u,p,x.id)),k!==0)return b&&(k*=-1),v.invertSorting&&(k*=-1),k}return u.index-p.index}),m.forEach(u=>{var p;a.push(u),(p=u.subRows)!=null&&p.length&&(u.subRows=c(u.subRows))}),m};return{rows:c(n.rows),flatRows:a,rowsById:n.rowsById}},Vt(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function Np(t,e){return t?e7(t)?f.createElement(t,e):t:null}function e7(t){return t7(t)||typeof t=="function"||n7(t)}function t7(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function n7(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function $T(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=f.useState(()=>({current:G9(e)})),[s,a]=f.useState(()=>n.current.initialState);return n.current.setOptions(l=>({...l,...t,state:{...s,...t.state},onStateChange:o=>{a(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}const Sn=({columns:t=5,rows:e=5,showHeader:n=!0,showActions:s=!0,showPagination:a=!0,showBreadcrumb:l=!1,showPageHeader:o=!1,showFilterBar:c=!1})=>{const d=s?t+1:t;return i.jsxs(i.Fragment,{children:[l&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"100px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(C,{width:"120px",height:"1rem"})]}),i.jsx(C,{width:"80px",height:"2.5rem",className:"rounded"})]}),o&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"200px",height:"1.75rem"})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx(C,{width:"140px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"100px",height:"2.5rem",className:"rounded"})]})]}),c&&i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 px-0 pt-4",children:[i.jsxs("div",{className:"d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(C,{width:"180px",height:"2.5rem"}),i.jsx(C,{width:"120px",height:"2.5rem"})]}),i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx(C,{width:"200px",height:"2.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(C,{width:"40px",height:"2.5rem",className:"rounded"})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table",children:[n&&i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:d}).map((m,u)=>i.jsx("th",{className:"py-3",children:i.jsx(C,{width:"80%",height:"1rem"})},`th-${u}`))})}),i.jsx("tbody",{children:Array.from({length:e}).map((m,u)=>i.jsx("tr",{children:Array.from({length:d}).map((p,h)=>i.jsx("td",{className:"py-3",children:h===0?i.jsx(C,{width:"1rem",height:"1rem",className:"rounded"}):h===1?i.jsx(C,{width:"30px",height:"1rem"}):h>=2&&h<=d-2?i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"}):h===d-1&&s?i.jsxs("div",{className:"d-flex gap-1",children:[i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(C,{width:"2rem",height:"2rem",className:"rounded"})]}):i.jsx(C,{width:"90%",height:"1rem"})},`cell-${u}-${h}`))},`row-${u}`))})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 flex-wrap gap-2 pb-3 px-4",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((m,u)=>i.jsx(C,{width:"2.5rem",height:"2.5rem",className:"rounded"},`page-${u}`))})]})]})})]})},kn=({data:t=[],columns:e=[],pagination:n=null,isLoading:s=!1,error:a=null,bordered:l=!0,responsive:o=!0,onPageChange:c=()=>{},onPerPageChange:d=()=>{},onSortingChange:m=()=>{},currentPage:u=1,perPage:p=10,totalItems:h=0,lastPage:g=1,enableSelection:x=!0,manualPagination:v=!0,manualFiltering:y=!0,manualSorting:b=!1,moduleNamePlural:k="",renderEmptyState:w=null,bulkActionsButtonText:S="",bulkActions:j=[],isBulkActionShow:T=()=>{},skeletonColumns:N=null,skeletonRows:_=null,rowIdField:A="id",enableHighlightNewItems:P=!0,className:E=""})=>{const M=Ln(),R=f.useRef(null),[O,L]=f.useState({sorting:[],page:u,perPage:p}),[q,Q]=f.useState(""),[V,se]=f.useState(new Set),G=f.useRef([]);f.useEffect(()=>{if(P&&t?.length>G.current?.length){const oe=new Set(G.current.map($=>$[A]||$.id)),D=t.filter($=>!oe.has($[A]||$.id)).map($=>$[A]||$.id);if(D.length>0){se(te=>{const ae=new Set(te);return D.forEach(Y=>ae.add(Y)),ae});const $=setTimeout(()=>{se(te=>{const ae=new Set(te);return D.forEach(Y=>ae.delete(Y)),ae})},3e3);return()=>clearTimeout($)}}G.current=t},[t,P,A]),f.useEffect(()=>{L(oe=>({...oe,page:u,perPage:p})),J(p==="all"||p===h)},[u,p,h]);const ge=f.useMemo(()=>{let oe=[...e];return x&&oe.unshift(M.display({id:"selection",header:({table:D})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:D.getIsAllRowsSelected(),onChange:D.getToggleAllRowsSelectedHandler()}),cell:({row:D})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:D.getIsSelected(),onChange:D.getToggleSelectedHandler()})})),oe},[e,x,M]),ie=(oe,D)=>{L($=>({...$,[oe]:D}))},W=oe=>{ie("page",oe),c(oe)},[X,J]=f.useState(!1),ue=oe=>{if(oe==="all")J(!0),ie("perPage","all"),d("all");else{J(!1);const D=Number(oe);ie("perPage",D),d(D)}},le=$T({data:t,columns:ge,state:{sorting:Array.isArray(O.sorting)?O.sorting:[]},onSortingChange:oe=>{const D=typeof oe=="function"?oe(Array.isArray(O.sorting)?O.sorting:[]):Array.isArray(oe)?oe:[];ie("sorting",D),m(D)},getCoreRowModel:LT(),getFilteredRowModel:X9(),getSortedRowModel:b?void 0:J9(),enableRowSelection:x,enableSorting:!0,manualPagination:v,manualFiltering:y,manualSorting:b}),I=le.getSelectedRowModel().rows;f.useEffect(()=>{T(I.length>0&&j?.length>0)},[I]);const ee=()=>{if(!q)return;const oe=(j||[]).find(D=>D.label===q);oe&&typeof oe.action=="function"&&oe.action(I.map(D=>D.original),()=>le.resetRowSelection())},K=f.useMemo(()=>{const D=O.page-1,$=O.page+1,te=[],ae=[];let Y;for(let H=1;H<=g;H++)(H===1||H===g||H>=D&&H<=$)&&te.push(H);for(let H of te)Y&&(H-Y===2?ae.push(Y+1):H-Y!==1&&ae.push("...")),ae.push(H),Y=H;return ae},[O.page,g]),ne=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:ge.length,className:"text-center py-5 border-start border-end",children:i.jsx("h6",{className:"text-secondary fw-normal mb-0",children:r(`No ${k||"items"} found`,"kivicare-clinic-management-system")})})});return i.jsxs(i.Fragment,{children:[a&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:typeof a=="string"?a:a.message||r("An error occurred while loading data.","kivicare-clinic-management-system")}),s?i.jsx(Sn,{columns:N||ge.length,rows:_||(p==="all"?10:Math.min(p,10)),showActions:x}):i.jsxs(i.Fragment,{children:[i.jsx(Ci,{in:I.length>0&&j?.length>0,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,appear:!0,nodeRef:R,children:i.jsx("div",{ref:R,className:"position-absolute top-0 rounded w-100 card",style:{zIndex:10},children:i.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center py-2 px-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{children:[I.length," ",I.length===1?r("row selected","kivicare-clinic-management-system"):r("rows selected","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link ",onClick:()=>le.resetRowSelection(),children:r("Clear","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{value:q?{value:q,label:q}:null,onChange:oe=>Q(oe?oe.value:""),options:j.map(oe=>({value:oe.label,label:oe.label})),placeholder:S||r("Bulk Actions","kivicare-clinic-management-system"),className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:oe=>({...oe,zIndex:9999})}}),i.jsx("button",{className:"btn btn-primary btn-sm px-3",onClick:ee,disabled:!q||I.length===0,children:r("Apply","kivicare-clinic-management-system")})]})]})})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:o?"table-responsive":"",children:i.jsxs("table",{className:`table table-bordered  rounded ${E}`,children:[i.jsx("thead",{children:le.getHeaderGroups().map(oe=>i.jsx("tr",{children:oe.headers.map(D=>i.jsx("th",{colSpan:D.colSpan,className:`align-middle ${D.column.columnDef.headerClassName||""}`,children:D.isPlaceholder?null:i.jsxs("div",{className:D.column.getCanSort()?"cursor-pointer user-select-none d-flex align-items-center justify-content-between":"",onClick:D.column.getToggleSortingHandler(),children:[Np(D.column.columnDef.header,D.getContext()),D.column.getCanSort()&&i.jsx("span",{className:"ms-2",children:(()=>{const $=D.column.getIsSorted();return $==="asc"?i.jsx("i",{className:"ph ph-arrow-up"}):$==="desc"?i.jsx("i",{className:"ph ph-arrow-down"}):i.jsx("i",{className:"ph ph-arrows-vertical opacity-50"})})()})]})},D.id))},oe.id))}),i.jsx("tbody",{children:le.getRowModel().rows.length>0?le.getRowModel().rows.map(oe=>{const D=oe.original[A]||oe.original.id,$=V.has(D);return i.jsx("tr",{className:`align-middle ${oe.getIsSelected()?"table-row-selected":""} ${$?"new-row-highlight":""}`,children:oe.getVisibleCells().map(te=>i.jsx("td",{children:Np(te.column.columnDef.cell,te.getContext())},te.id))},oe.id)}):w?w():ne()})]})}),(n||h>0)&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-around justify-content-md-between align-items-center gap-3 mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{children:r("Show","kivicare-clinic-management-system")}),i.jsxs("select",{className:"form-select form-select-sm w-auto",value:X?"all":O.perPage,onChange:oe=>ue(oe.target.value),children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"25",children:"25"}),i.jsx("option",{value:"50",children:"50"}),i.jsx("option",{value:"100",children:"100"}),i.jsx("option",{value:"all",children:r("All","kivicare-clinic-management-system")})]}),i.jsx("span",{children:r("entries","kivicare-clinic-management-system")})]}),i.jsx("div",{children:X?Pi(r("Showing all entries","kivicare-clinic-management-system")):Pi(r("Showing %1$d to %2$d of %3$d entries","kivicare-clinic-management-system"),Math.min((O.page-1)*O.perPage+1,h),Math.min(O.page*O.perPage,h),h)}),(n||h>0)&&!X&&i.jsx("nav",{"aria-label":"Page navigation",children:h>0&&i.jsxs("ul",{className:"pagination pagination-sm",children:[i.jsx("li",{className:`page-item ${O.page===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>W(Math.max(O.page-1,1)),disabled:O.page===1,children:r("Previous","kivicare-clinic-management-system")})}),K.map((oe,D)=>i.jsx("li",{className:`page-item ${O.page===oe?"active":""} ${oe==="..."?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>typeof oe=="number"&&W(oe),disabled:oe==="...",children:oe})},D)),i.jsx("li",{className:`page-item ${O.page===g?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>W(Math.min(O.page+1,g)),disabled:O.page===g,children:r("Next","kivicare-clinic-management-system")})})]})})]})]})]})]})};kn.propTypes={data:Pe.array.isRequired,columns:Pe.array.isRequired,pagination:Pe.object,isLoading:Pe.bool,error:Pe.oneOfType([Pe.string,Pe.object]),bulkActionsButtonText:Pe.string,bulkActions:Pe.arrayOf(Pe.shape({label:Pe.string.isRequired,action:Pe.func.isRequired})),striped:Pe.bool,bordered:Pe.bool,hover:Pe.bool,responsive:Pe.bool,onPageChange:Pe.func,onPerPageChange:Pe.func,onSortingChange:Pe.func,onRowSelect:Pe.func,currentPage:Pe.number,perPage:Pe.number,totalItems:Pe.number,lastPage:Pe.number,enableSelection:Pe.bool,manualPagination:Pe.bool,manualFiltering:Pe.bool,manualSorting:Pe.bool,moduleBaseUrl:Pe.string,moduleNameSingular:Pe.string,moduleNamePlural:Pe.string,renderCustomActions:Pe.func,renderEmptyState:Pe.func,beforeTable:Pe.node,afterTable:Pe.node,customBulkActions:Pe.arrayOf(Pe.shape({label:Pe.string.isRequired,action:Pe.func.isRequired})),isBulkActionShow:Pe.func,rowIdField:Pe.string,enableHighlightNewItems:Pe.bool};function Mc({src:t,variant:e="primary",size:n="md",alt:s="Avatar",text:a="",badge:l=null,className:o="",onClick:c=null}){const d={xs:"avatar-40",sm:"avatar-40",md:"avatar-50",lg:"avatar-40",xl:"avatar-40"},m=typeof n=="string"?d[n]||d.md:`${n}px`,u=l?{position:"absolute",bottom:"0",right:"0",transform:"translate(20%, 20%)",border:"1px solid white",borderRadius:"50%",width:`calc(${m} * 0.4)`,height:`calc(${m} * 0.4)`,backgroundColor:`var(--bs-${l.variant||"danger"})`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:`calc(${m} * 0.2)`,color:"white"}:{},p=()=>a?a.substring(0,2).toUpperCase():s.substring(0,2).toUpperCase();return i.jsxs("div",{onClick:c,role:c?"button":void 0,children:[t?i.jsx(Y_,{src:t,alt:s,className:`avatar  ${o} ${m}`}):i.jsx("div",{className:`avatar  ${o} ${m}`,children:i.jsx("span",{children:p()})}),l&&i.jsx("div",{style:u,children:l.text})]})}Mc.propTypes={src:Pe.string,variant:Pe.string,size:Pe.oneOfType([Pe.string,Pe.number]),alt:Pe.string,text:Pe.string,badge:Pe.shape({variant:Pe.string,text:Pe.oneOfType([Pe.string,Pe.number])}),className:Pe.string,onClick:Pe.func};const cn=({profileUrl:t=null,name:e="",email:n="",gender:s="",phone:a="",address:l="",dob:o="",clinicName:c="",fallbackText:d=null,variant:m="primary",size:u="md",nameLabel:p=r("User Name","kivicare-clinic-management-system"),className:h="",onClick:g=null,rounded:x=!0})=>{const y=t?"":(w=>{if(!w)return"U";const S=w.trim().split(" ");return S.length===1?S[0].charAt(0).toUpperCase():(S[0].charAt(0)+S[1].charAt(0)).toUpperCase()})(e),b=typeof g=="function",k=i.jsxs("div",{className:`d-flex align-items-center gap-3 ${h} ${b?"cursor-pointer":""}`,children:[i.jsx(Mc,{src:t,alt:e||p,text:y,variant:m,size:u,className:`flex-shrink-0 bg-primary-subtle  ${x?"rounded-circle":"rounded"} `}),i.jsxs("div",{className:"user-data",children:[i.jsx("h6",{className:"font-size-14 mb-0",children:e||p}),c&&i.jsx("p",{className:"font-size-12 text-muted mb-1",children:c}),i.jsxs("div",{className:"d-flex align-items-center column-gap-5 row-gap-1 flex-wrap",children:[n&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsxs("span",{className:"text-muted line-anywhere",children:[" ",n]})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{className:"font-size-14 line-anywhere",children:a})]}),s&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-gender-"+s}),i.jsx("span",{className:"font-size-14",children:s})]}),o&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-cake"}),i.jsx("span",{className:"font-size-14",children:o})]}),l&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{className:"font-size-14",children:l})]})]})]})]});return b?i.jsx("div",{onClick:g,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g())},style:{cursor:"pointer"},children:k}):k};var i7=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],qN=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),l=String(s.getOptionValue(n)).toLowerCase(),o=String(s.getOptionLabel(n)).toLowerCase();return l===a||o===a},Tv={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,s,a){return!(!e||n.some(function(l){return qN(e,l,a)})||s.some(function(l){return qN(e,l,a)}))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};function s7(t){var e=t.allowCreateWhileLoading,n=e===void 0?!1:e,s=t.createOptionPosition,a=s===void 0?"last":s,l=t.formatCreateLabel,o=l===void 0?Tv.formatCreateLabel:l,c=t.isValidNewOption,d=c===void 0?Tv.isValidNewOption:c,m=t.getNewOptionData,u=m===void 0?Tv.getNewOptionData:m,p=t.onCreateOption,h=t.options,g=h===void 0?[]:h,x=t.onChange,v=ba(t,i7),y=v.getOptionValue,b=y===void 0?C2:y,k=v.getOptionLabel,w=k===void 0?N2:k,S=v.inputValue,j=v.isLoading,T=v.isMulti,N=v.value,_=v.name,A=f.useMemo(function(){return d(S,dp(N),g,{getOptionValue:b,getOptionLabel:w})?u(S,o(S)):void 0},[o,u,w,b,S,d,g,N]),P=f.useMemo(function(){return(n||!j)&&A?a==="first"?[A].concat(cc(g)):[].concat(cc(g),[A]):g},[n,a,j,A,g]),E=f.useCallback(function(M,R){if(R.action!=="select-option")return x(M,R);var O=Array.isArray(M)?M:[M];if(O[O.length-1]===A){if(p)p(S);else{var L=u(S,S),q={action:"create-option",name:_,option:L};x($d(T,[].concat(cc(dp(N)),[L]),L),q)}return}x(M,R)},[u,S,T,_,A,p,x,N]);return Ft(Ft({},v),{},{options:P,onChange:E})}var a7=f.forwardRef(function(t,e){var n=BE(t),s=s7(n);return f.createElement(Qb,Ot({ref:e},s))}),Xc=a7;function BT(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function r7(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HN(t,e){return t.get(BT(t,e))}function l7(t,e,n){r7(t,e),e.set(t,n)}function o7(t,e,n){return t.set(BT(t,e),n),n}const c7=100,$t={},d7=()=>{$t.previousActiveElement instanceof HTMLElement?($t.previousActiveElement.focus(),$t.previousActiveElement=null):document.body&&document.body.focus()},m7=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;$t.restoreFocusTimeout=setTimeout(()=>{d7(),e()},c7),window.scrollTo(n,s)}),qT="swal2-",u7=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Fe=u7.reduce((t,e)=>(t[e]=qT+e,t),{}),h7=["success","warning","info","question","error"],Cp=h7.reduce((t,e)=>(t[e]=qT+e,t),{}),HT="SweetAlert2:",xw=t=>t.charAt(0).toUpperCase()+t.slice(1),Qi=t=>{console.warn(`${HT} ${typeof t=="object"?t.join(" "):t}`)},jo=t=>{console.error(`${HT} ${t}`)},zN=[],p7=t=>{zN.includes(t)||(zN.push(t),Qi(t))},zT=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;p7(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Og=t=>typeof t=="function"?t():t,yw=t=>t&&typeof t.toPromise=="function",Zm=t=>yw(t)?t.toPromise():Promise.resolve(t),bw=t=>t&&Promise.resolve(t)===t,Zi=()=>document.body.querySelector(`.${Fe.container}`),Xm=t=>{const e=Zi();return e?e.querySelector(t):null},Ds=t=>Xm(`.${t}`),mn=()=>Ds(Fe.popup),Jc=()=>Ds(Fe.icon),g7=()=>Ds(Fe["icon-content"]),VT=()=>Ds(Fe.title),ww=()=>Ds(Fe["html-container"]),UT=()=>Ds(Fe.image),kw=()=>Ds(Fe["progress-steps"]),Fg=()=>Ds(Fe["validation-message"]),za=()=>Xm(`.${Fe.actions} .${Fe.confirm}`),ed=()=>Xm(`.${Fe.actions} .${Fe.cancel}`),No=()=>Xm(`.${Fe.actions} .${Fe.deny}`),f7=()=>Ds(Fe["input-label"]),td=()=>Xm(`.${Fe.loader}`),Jm=()=>Ds(Fe.actions),WT=()=>Ds(Fe.footer),Lg=()=>Ds(Fe["timer-progress-bar"]),jw=()=>Ds(Fe.close),v7=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Nw=()=>{const t=mn();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((l,o)=>{const c=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return c>d?1:c<d?-1:0}),s=t.querySelectorAll(v7),a=Array.from(s).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(l=>us(l))},Cw=()=>jr(document.body,Fe.shown)&&!jr(document.body,Fe["toast-shown"])&&!jr(document.body,Fe["no-backdrop"]),$g=()=>{const t=mn();return t?jr(t,Fe.toast):!1},x7=()=>{const t=mn();return t?t.hasAttribute("data-loading"):!1},Rs=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{t.appendChild(o)});const l=s.querySelector("body");l&&Array.from(l.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?t.appendChild(o.cloneNode(!0)):t.appendChild(o)})}},jr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},y7=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(Fe).includes(n)&&!Object.values(Cp).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},As=(t,e,n)=>{if(y7(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){Qi(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}tn(t,s)}},Bg=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${Fe.popup} > .${Fe[e]}`);case"checkbox":return t.querySelector(`.${Fe.popup} > .${Fe.checkbox} input`);case"radio":return t.querySelector(`.${Fe.popup} > .${Fe.radio} input:checked`)||t.querySelector(`.${Fe.popup} > .${Fe.radio} input:first-child`);case"range":return t.querySelector(`.${Fe.popup} > .${Fe.range} input`);default:return t.querySelector(`.${Fe.popup} > .${Fe.input}`)}},KT=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},GT=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(s):a.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},tn=(t,e)=>{GT(t,e,!0)},ea=(t,e)=>{GT(t,e,!1)},el=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const a=n[s];if(a instanceof HTMLElement&&jr(a,e))return a}},Yl=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},yi=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},$i=t=>{t&&(t.style.display="none")},Sw=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{eu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},VN=(t,e,n,s)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,s)},eu=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?yi(t,n):$i(t)},us=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),b7=()=>!us(za())&&!us(No())&&!us(ed()),UN=t=>t.scrollHeight>t.clientHeight,YT=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},_w=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=Lg();n&&us(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},w7=()=>{const t=Lg();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},k7=()=>typeof window>"u"||typeof document>"u",j7=`
 <div aria-labelledby="${Fe.title}" aria-describedby="${Fe["html-container"]}" class="${Fe.popup}" tabindex="-1">
   <button type="button" class="${Fe.close}"></button>
   <ul class="${Fe["progress-steps"]}"></ul>
   <div class="${Fe.icon}"></div>
   <img class="${Fe.image}" />
   <h2 class="${Fe.title}" id="${Fe.title}"></h2>
   <div class="${Fe["html-container"]}" id="${Fe["html-container"]}"></div>
   <input class="${Fe.input}" id="${Fe.input}" />
   <input type="file" class="${Fe.file}" />
   <div class="${Fe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Fe.select}" id="${Fe.select}"></select>
   <div class="${Fe.radio}"></div>
   <label class="${Fe.checkbox}">
     <input type="checkbox" id="${Fe.checkbox}" />
     <span class="${Fe.label}"></span>
   </label>
   <textarea class="${Fe.textarea}" id="${Fe.textarea}"></textarea>
   <div class="${Fe["validation-message"]}" id="${Fe["validation-message"]}"></div>
   <div class="${Fe.actions}">
     <div class="${Fe.loader}"></div>
     <button type="button" class="${Fe.confirm}"></button>
     <button type="button" class="${Fe.deny}"></button>
     <button type="button" class="${Fe.cancel}"></button>
   </div>
   <div class="${Fe.footer}"></div>
   <div class="${Fe["timer-progress-bar-container"]}">
     <div class="${Fe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),N7=()=>{const t=Zi();return t?(t.remove(),ea([document.documentElement,document.body],[Fe["no-backdrop"],Fe["toast-shown"],Fe["has-column"]]),!0):!1},Il=()=>{$t.currentInstance.resetValidationMessage()},C7=()=>{const t=mn(),e=el(t,Fe.input),n=el(t,Fe.file),s=t.querySelector(`.${Fe.range} input`),a=t.querySelector(`.${Fe.range} output`),l=el(t,Fe.select),o=t.querySelector(`.${Fe.checkbox} input`),c=el(t,Fe.textarea);e.oninput=Il,n.onchange=Il,l.onchange=Il,o.onchange=Il,c.oninput=Il,s.oninput=()=>{Il(),a.value=s.value},s.onchange=()=>{Il(),a.value=s.value}},S7=t=>typeof t=="string"?document.querySelector(t):t,_7=t=>{const e=mn();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},E7=t=>{window.getComputedStyle(t).direction==="rtl"&&tn(Zi(),Fe.rtl)},T7=t=>{const e=N7();if(k7()){jo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=Fe.container,e&&tn(n,Fe["no-transition"]),Rs(n,j7),n.dataset.swal2Theme=t.theme;const s=S7(t.target);s.appendChild(n),_7(t),E7(s),C7()},Ew=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?A7(t,e):t&&Rs(e,t)},A7=(t,e)=>{t.jquery?D7(e,t):Rs(e,t.toString())},D7=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},R7=(t,e)=>{const n=Jm(),s=td();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?$i(n):yi(n),As(n,e,"actions"),P7(n,s,e),Rs(s,e.loaderHtml||""),As(s,e,"loader"))};function P7(t,e,n){const s=za(),a=No(),l=ed();!s||!a||!l||(Av(s,"confirm",n),Av(a,"deny",n),Av(l,"cancel",n),M7(s,a,l,n),n.reverseButtons&&(n.toast?(t.insertBefore(l,s),t.insertBefore(a,s)):(t.insertBefore(l,e),t.insertBefore(a,e),t.insertBefore(s,e))))}function M7(t,e,n,s){if(!s.buttonsStyling){ea([t,e,n],Fe.styled);return}tn([t,e,n],Fe.styled),s.confirmButtonColor&&(t.style.backgroundColor=s.confirmButtonColor,tn(t,Fe["default-outline"])),s.denyButtonColor&&(e.style.backgroundColor=s.denyButtonColor,tn(e,Fe["default-outline"])),s.cancelButtonColor&&(n.style.backgroundColor=s.cancelButtonColor,tn(n,Fe["default-outline"]))}function Av(t,e,n){const s=xw(e);eu(t,n[`show${s}Button`],"inline-block"),Rs(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=Fe[e],As(t,n,`${e}Button`)}const I7=(t,e)=>{const n=jw();n&&(Rs(n,e.closeButtonHtml||""),As(n,e,"closeButton"),eu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},O7=(t,e)=>{const n=Zi();n&&(F7(n,e.backdrop),L7(n,e.position),$7(n,e.grow),As(n,e,"container"))};function F7(t,e){typeof e=="string"?t.style.background=e:e||tn([document.documentElement,document.body],Fe["no-backdrop"])}function L7(t,e){e&&(e in Fe?tn(t,Fe[e]):(Qi('The "position" parameter is not valid, defaulting to "center"'),tn(t,Fe.center)))}function $7(t,e){e&&tn(t,Fe[`grow-${e}`])}var Fn={innerParams:new WeakMap,domCache:new WeakMap};const B7=["input","file","range","select","radio","checkbox","textarea"],q7=(t,e)=>{const n=mn();if(!n)return;const s=Fn.innerParams.get(t),a=!s||e.input!==s.input;B7.forEach(l=>{const o=el(n,Fe[l]);o&&(V7(l,e.inputAttributes),o.className=Fe[l],a&&$i(o))}),e.input&&(a&&H7(e),U7(e))},H7=t=>{if(!t.input)return;if(!ni[t.input]){jo(`Unexpected type of input! Expected ${Object.keys(ni).join(" | ")}, got "${t.input}"`);return}const e=QT(t.input);if(!e)return;const n=ni[t.input](e,t);yi(e),t.inputAutoFocus&&setTimeout(()=>{KT(n)})},z7=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},V7=(t,e)=>{const n=mn();if(!n)return;const s=Bg(n,t);if(s){z7(s);for(const a in e)s.setAttribute(a,e[a])}},U7=t=>{if(!t.input)return;const e=QT(t.input);e&&As(e,t,"input")},Tw=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},tu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),a=Fe["input-label"];s.setAttribute("for",t.id),s.className=a,typeof n.customClass=="object"&&tn(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},QT=t=>{const e=mn();if(e)return el(e,Fe[t]||Fe.input)},Sp=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:bw(e)||Qi(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},ni={};ni.text=ni.email=ni.password=ni.number=ni.tel=ni.url=ni.search=ni.date=ni["datetime-local"]=ni.time=ni.week=ni.month=(t,e)=>(Sp(t,e.inputValue),tu(t,t,e),Tw(t,e),t.type=e.input,t);ni.file=(t,e)=>(tu(t,t,e),Tw(t,e),t);ni.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return Sp(n,e.inputValue),n.type=e.input,Sp(s,e.inputValue),tu(n,t,e),t};ni.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");Rs(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return tu(t,t,e),t};ni.radio=t=>(t.textContent="",t);ni.checkbox=(t,e)=>{const n=Bg(mn(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return Rs(s,e.inputPlaceholder||e.inputLabel),n};ni.textarea=(t,e)=>{Sp(t,e.inputValue),Tw(t,e),tu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(mn()).width),a=()=>{if(!document.body.contains(t))return;const l=t.offsetWidth+n(t);l>s?mn().style.width=`${l}px`:Yl(mn(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const W7=(t,e)=>{const n=ww();n&&(Sw(n),As(n,e,"htmlContainer"),e.html?(Ew(e.html,n),yi(n,"block")):e.text?(n.textContent=e.text,yi(n,"block")):$i(n),q7(t,e))},K7=(t,e)=>{const n=WT();n&&(Sw(n),eu(n,e.footer,"block"),e.footer&&Ew(e.footer,n),As(n,e,"footer"))},G7=(t,e)=>{const n=Fn.innerParams.get(t),s=Jc();if(!s)return;if(n&&e.icon===n.icon){KN(s,e),WN(s,e);return}if(!e.icon&&!e.iconHtml){$i(s);return}if(e.icon&&Object.keys(Cp).indexOf(e.icon)===-1){jo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),$i(s);return}yi(s),KN(s,e),WN(s,e),tn(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ZT)},WN=(t,e)=>{for(const[n,s]of Object.entries(Cp))e.icon!==n&&ea(t,s);tn(t,e.icon&&Cp[e.icon]),Z7(t,e),ZT(),As(t,e,"icon")},ZT=()=>{const t=mn();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},Y7=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Q7=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,KN=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=GN(e.iconHtml):e.icon==="success"?(s=Y7,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=Q7:e.icon&&(s=GN({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&Rs(t,s)},Z7=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])VN(t,n,"background-color",e.iconColor);VN(t,".swal2-success-ring","border-color",e.iconColor)}},GN=t=>`<div class="${Fe["icon-content"]}">${t}</div>`,X7=(t,e)=>{const n=UT();if(n){if(!e.imageUrl){$i(n);return}yi(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Yl(n,"width",e.imageWidth),Yl(n,"height",e.imageHeight),n.className=Fe.image,As(n,e,"image")}};let Aw=!1,XT=0,JT=0,eA=0,tA=0;const J7=t=>{t.addEventListener("mousedown",_p),document.body.addEventListener("mousemove",Ep),t.addEventListener("mouseup",Tp),t.addEventListener("touchstart",_p),document.body.addEventListener("touchmove",Ep),t.addEventListener("touchend",Tp)},eH=t=>{t.removeEventListener("mousedown",_p),document.body.removeEventListener("mousemove",Ep),t.removeEventListener("mouseup",Tp),t.removeEventListener("touchstart",_p),document.body.removeEventListener("touchmove",Ep),t.removeEventListener("touchend",Tp)},_p=t=>{const e=mn();if(t.target===e||Jc().contains(t.target)){Aw=!0;const n=nA(t);XT=n.clientX,JT=n.clientY,eA=parseInt(e.style.insetInlineStart)||0,tA=parseInt(e.style.insetBlockStart)||0,tn(e,"swal2-dragging")}},Ep=t=>{const e=mn();if(Aw){let{clientX:n,clientY:s}=nA(t);e.style.insetInlineStart=`${eA+(n-XT)}px`,e.style.insetBlockStart=`${tA+(s-JT)}px`}},Tp=()=>{const t=mn();Aw=!1,ea(t,"swal2-dragging")},nA=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},tH=(t,e)=>{const n=Zi(),s=mn();if(!(!n||!s)){if(e.toast){Yl(n,"width",e.width),s.style.width="100%";const a=td();a&&s.insertBefore(a,Jc())}else Yl(s,"width",e.width);Yl(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),$i(Fg()),nH(s,e),e.draggable&&!e.toast?(tn(s,Fe.draggable),J7(s)):(ea(s,Fe.draggable),eH(s))}},nH=(t,e)=>{const n=e.showClass||{};t.className=`${Fe.popup} ${us(t)?n.popup:""}`,e.toast?(tn([document.documentElement,document.body],Fe["toast-shown"]),tn(t,Fe.toast)):tn(t,Fe.modal),As(t,e,"popup"),typeof e.customClass=="string"&&tn(t,e.customClass),e.icon&&tn(t,Fe[`icon-${e.icon}`])},iH=(t,e)=>{const n=kw();if(!n)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){$i(n);return}yi(n),n.textContent="",a>=s.length&&Qi("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((l,o)=>{const c=sH(l);if(n.appendChild(c),o===a&&tn(c,Fe["active-progress-step"]),o!==s.length-1){const d=aH(e);n.appendChild(d)}})},sH=t=>{const e=document.createElement("li");return tn(e,Fe["progress-step"]),Rs(e,t),e},aH=t=>{const e=document.createElement("li");return tn(e,Fe["progress-step-line"]),t.progressStepsDistance&&Yl(e,"width",t.progressStepsDistance),e},rH=(t,e)=>{const n=VT();n&&(Sw(n),eu(n,e.title||e.titleText,"block"),e.title&&Ew(e.title,n),e.titleText&&(n.innerText=e.titleText),As(n,e,"title"))},iA=(t,e)=>{tH(t,e),O7(t,e),iH(t,e),G7(t,e),X7(t,e),rH(t,e),I7(t,e),W7(t,e),R7(t,e),K7(t,e);const n=mn();typeof e.didRender=="function"&&n&&e.didRender(n),$t.eventEmitter.emit("didRender",n)},lH=()=>us(mn()),sA=()=>{var t;return(t=za())===null||t===void 0?void 0:t.click()},oH=()=>{var t;return(t=No())===null||t===void 0?void 0:t.click()},cH=()=>{var t;return(t=ed())===null||t===void 0?void 0:t.click()},nd=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),aA=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},dH=(t,e,n)=>{aA(t),e.toast||(t.keydownHandler=s=>uH(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:mn(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},iy=(t,e)=>{var n;const s=Nw();if(s.length){t=t+e,t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=mn())===null||n===void 0||n.focus()},rA=["ArrowRight","ArrowDown"],mH=["ArrowLeft","ArrowUp"],uH=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?hH(e,t):e.key==="Tab"?pH(e):[...rA,...mH].includes(e.key)?gH(e.key):e.key==="Escape"&&fH(e,t,n)))},hH=(t,e)=>{if(!Og(e.allowEnterKey))return;const n=Bg(mn(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;sA(),t.preventDefault()}},pH=t=>{const e=t.target,n=Nw();let s=-1;for(let a=0;a<n.length;a++)if(e===n[a]){s=a;break}t.shiftKey?iy(s,-1):iy(s,1),t.stopPropagation(),t.preventDefault()},gH=t=>{const e=Jm(),n=za(),s=No(),a=ed();if(!e||!n||!s||!a)return;const l=[n,s,a];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const o=rA.includes(t)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let d=0;d<e.children.length;d++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&us(c))break}c instanceof HTMLButtonElement&&c.focus()}},fH=(t,e,n)=>{Og(e.allowEscapeKey)&&(t.preventDefault(),n(nd.esc))};var Ic={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const vH=()=>{const t=Zi();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},lA=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},oA=typeof window<"u"&&!!window.GestureEvent,xH=()=>{if(oA&&!jr(document.body,Fe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,tn(document.body,Fe.iosfix),yH()}},yH=()=>{const t=Zi();if(!t)return;let e;t.ontouchstart=n=>{e=bH(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},bH=t=>{const e=t.target,n=Zi(),s=ww();return!n||!s||wH(t)||kH(t)?!1:e===n||!UN(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(UN(s)&&s.contains(e))},wH=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",kH=t=>t.touches&&t.touches.length>1,jH=()=>{if(jr(document.body,Fe.iosfix)){const t=parseInt(document.body.style.top,10);ea(document.body,Fe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},NH=()=>{const t=document.createElement("div");t.className=Fe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let fc=null;const CH=t=>{fc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(fc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${fc+NH()}px`)},SH=()=>{fc!==null&&(document.body.style.paddingRight=`${fc}px`,fc=null)};function cA(t,e,n,s){$g()?YN(t,s):(m7(n).then(()=>YN(t,s)),aA($t)),oA?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Cw()&&(SH(),jH(),lA()),_H()}function _H(){ea([document.documentElement,document.body],[Fe.shown,Fe["height-auto"],Fe["no-backdrop"],Fe["toast-shown"]])}function tl(t){t=TH(t);const e=Ic.swalPromiseResolve.get(this),n=EH(this);this.isAwaitingPromise?t.isDismissed||(nu(this),e(t)):n&&e(t)}const EH=t=>{const e=mn();if(!e)return!1;const n=Fn.innerParams.get(t);if(!n||jr(e,n.hideClass.popup))return!1;ea(e,n.showClass.popup),tn(e,n.hideClass.popup);const s=Zi();return ea(s,n.showClass.backdrop),tn(s,n.hideClass.backdrop),AH(t,e,n),!0};function dA(t){const e=Ic.swalPromiseReject.get(this);nu(this),e&&e(t)}const nu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Fn.innerParams.get(t)||t._destroy())},TH=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),AH=(t,e,n)=>{var s;const a=Zi(),l=YT(e);typeof n.willClose=="function"&&n.willClose(e),(s=$t.eventEmitter)===null||s===void 0||s.emit("willClose",e),l?DH(t,e,a,n.returnFocus,n.didClose):cA(t,a,n.returnFocus,n.didClose)},DH=(t,e,n,s,a)=>{$t.swalCloseEventFinishedCallback=cA.bind(null,t,n,s,a);const l=function(o){if(o.target===e){var c;(c=$t.swalCloseEventFinishedCallback)===null||c===void 0||c.call($t),delete $t.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},YN=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=$t.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Oc=t=>{let e=mn();if(e||new At,e=mn(),!e)return;const n=td();$g()?$i(Jc()):RH(e,t),yi(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},RH=(t,e)=>{const n=Jm(),s=td();!n||!s||(!e&&us(za())&&(e=za()),yi(n),e&&($i(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),tn([t,n],Fe.loading))},PH=(t,e)=>{e.input==="select"||e.input==="radio"?LH(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(yw(e.inputValue)||bw(e.inputValue))&&(Oc(za()),$H(t,e))},MH=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return IH(n);case"radio":return OH(n);case"file":return FH(n);default:return e.inputAutoTrim?n.value.trim():n.value}},IH=t=>t.checked?1:0,OH=t=>t.checked?t.value:null,FH=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,LH=(t,e)=>{const n=mn();if(!n)return;const s=a=>{e.input==="select"?BH(n,Ap(a),e):e.input==="radio"&&qH(n,Ap(a),e)};yw(e.inputOptions)||bw(e.inputOptions)?(Oc(za()),Zm(e.inputOptions).then(a=>{t.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):jo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},$H=(t,e)=>{const n=t.getInput();n&&($i(n),Zm(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,yi(n),n.focus(),t.hideLoading()}).catch(s=>{jo(`Error in inputValue promise: ${s}`),n.value="",yi(n),n.focus(),t.hideLoading()}))};function BH(t,e,n){const s=el(t,Fe.select);if(!s)return;const a=(l,o,c)=>{const d=document.createElement("option");d.value=c,Rs(d,o),d.selected=mA(c,n.inputValue),l.appendChild(d)};e.forEach(l=>{const o=l[0],c=l[1];if(Array.isArray(c)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,s.appendChild(d),c.forEach(m=>a(d,m[1],m[0]))}else a(s,c,o)}),s.focus()}function qH(t,e,n){const s=el(t,Fe.radio);if(!s)return;e.forEach(l=>{const o=l[0],c=l[1],d=document.createElement("input"),m=document.createElement("label");d.type="radio",d.name=Fe.radio,d.value=o,mA(o,n.inputValue)&&(d.checked=!0);const u=document.createElement("span");Rs(u,c),u.className=Fe.label,m.appendChild(d),m.appendChild(u),s.appendChild(m)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const Ap=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let a=n;typeof a=="object"&&(a=Ap(a)),e.push([s,a])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Ap(s)),e.push([n,s])}),e},mA=(t,e)=>!!e&&e.toString()===t.toString(),HH=t=>{const e=Fn.innerParams.get(t);t.disableButtons(),e.input?uA(t,"confirm"):Rw(t,!0)},zH=t=>{const e=Fn.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?uA(t,"deny"):Dw(t,!1)},VH=(t,e)=>{t.disableButtons(),e(nd.cancel)},uA=(t,e)=>{const n=Fn.innerParams.get(t);if(!n.input){jo(`The "input" parameter is needed to be set when using returnInputValueOn${xw(e)}`);return}const s=t.getInput(),a=MH(t,n);n.inputValidator?UH(t,a,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?Dw(t,a):Rw(t,a)},UH=(t,e,n)=>{const s=Fn.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Zm(s.inputValidator(e,s.validationMessage))).then(l=>{t.enableButtons(),t.enableInput(),l?t.showValidationMessage(l):n==="deny"?Dw(t,e):Rw(t,e)})},Dw=(t,e)=>{const n=Fn.innerParams.get(t||void 0);n.showLoaderOnDeny&&Oc(No()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),nu(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>hA(t||void 0,a))):t.close({isDenied:!0,value:e})},QN=(t,e)=>{t.close({isConfirmed:!0,value:e})},hA=(t,e)=>{t.rejectPromise(e)},Rw=(t,e)=>{const n=Fn.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Oc(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Zm(n.preConfirm(e,n.validationMessage))).then(a=>{us(Fg())||a===!1?(t.hideLoading(),nu(t)):QN(t,typeof a>"u"?e:a)}).catch(a=>hA(t||void 0,a))):QN(t,e)};function Dp(){const t=Fn.innerParams.get(this);if(!t)return;const e=Fn.domCache.get(this);$i(e.loader),$g()?t.icon&&yi(Jc()):WH(e),ea([e.popup,e.actions],Fe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const WH=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?yi(e[0],"inline-block"):b7()&&$i(t.actions)};function pA(){const t=Fn.innerParams.get(this),e=Fn.domCache.get(this);return e?Bg(e.popup,t.input):null}function gA(t,e,n){const s=Fn.domCache.get(t);e.forEach(a=>{s[a].disabled=n})}function fA(t,e){const n=mn();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${Fe.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else t.disabled=e}function vA(){gA(this,["confirmButton","denyButton","cancelButton"],!1)}function xA(){gA(this,["confirmButton","denyButton","cancelButton"],!0)}function yA(){fA(this.getInput(),!1)}function bA(){fA(this.getInput(),!0)}function wA(t){const e=Fn.domCache.get(this),n=Fn.innerParams.get(this);Rs(e.validationMessage,t),e.validationMessage.className=Fe["validation-message"],n.customClass&&n.customClass.validationMessage&&tn(e.validationMessage,n.customClass.validationMessage),yi(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",Fe["validation-message"]),KT(s),tn(s,Fe.inputerror))}function kA(){const t=Fn.domCache.get(this);t.validationMessage&&$i(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),ea(e,Fe.inputerror))}const vc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},KH=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],GH={allowEnterKey:void 0},YH=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],jA=t=>Object.prototype.hasOwnProperty.call(vc,t),NA=t=>KH.indexOf(t)!==-1,CA=t=>GH[t],QH=t=>{jA(t)||Qi(`Unknown parameter "${t}"`)},ZH=t=>{YH.includes(t)&&Qi(`The parameter "${t}" is incompatible with toasts`)},XH=t=>{const e=CA(t);e&&zT(t,e)},SA=t=>{t.backdrop===!1&&t.allowOutsideClick&&Qi('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(t.theme)&&Qi(`Invalid theme "${t.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(const e in t)QH(e),t.toast&&ZH(e),XH(e)};function _A(t){const e=Zi(),n=mn(),s=Fn.innerParams.get(this);if(!n||jr(n,s.hideClass.popup)){Qi("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=JH(t),l=Object.assign({},s,a);SA(l),e.dataset.swal2Theme=l.theme,iA(this,l),Fn.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const JH=t=>{const e={};return Object.keys(t).forEach(n=>{NA(n)?e[n]=t[n]:Qi(`Invalid parameter to update: ${n}`)}),e};function EA(){const t=Fn.domCache.get(this),e=Fn.innerParams.get(this);if(!e){TA(this);return}t.popup&&$t.swalCloseEventFinishedCallback&&($t.swalCloseEventFinishedCallback(),delete $t.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),$t.eventEmitter.emit("didDestroy"),ez(this)}const ez=t=>{TA(t),delete t.params,delete $t.keydownHandler,delete $t.keydownTarget,delete $t.currentInstance},TA=t=>{t.isAwaitingPromise?(Dv(Fn,t),t.isAwaitingPromise=!0):(Dv(Ic,t),Dv(Fn,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Dv=(t,e)=>{for(const n in t)t[n].delete(e)};var tz=Object.freeze({__proto__:null,_destroy:EA,close:tl,closeModal:tl,closePopup:tl,closeToast:tl,disableButtons:xA,disableInput:bA,disableLoading:Dp,enableButtons:vA,enableInput:yA,getInput:pA,handleAwaitingPromise:nu,hideLoading:Dp,rejectPromise:dA,resetValidationMessage:kA,showValidationMessage:wA,update:_A});const nz=(t,e,n)=>{t.toast?iz(t,e,n):(az(e),rz(e),lz(t,e,n))},iz=(t,e,n)=>{e.popup.onclick=()=>{t&&(sz(t)||t.timer||t.input)||n(nd.close)}},sz=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Rp=!1;const az=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Rp=!0)}}},rz=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Rp=!0)}}},lz=(t,e,n)=>{e.container.onclick=s=>{if(Rp){Rp=!1;return}s.target===e.container&&Og(t.allowOutsideClick)&&n(nd.backdrop)}},oz=t=>typeof t=="object"&&t.jquery,ZN=t=>t instanceof Element||oz(t),cz=t=>{const e={};return typeof t[0]=="object"&&!ZN(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const a=t[s];typeof a=="string"||ZN(a)?e[n]=a:a!==void 0&&jo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function dz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function mz(t){class e extends this{_main(s,a){return super._main(s,Object.assign({},t,a))}}return e}const uz=()=>$t.timeout&&$t.timeout.getTimerLeft(),AA=()=>{if($t.timeout)return w7(),$t.timeout.stop()},DA=()=>{if($t.timeout){const t=$t.timeout.start();return _w(t),t}},hz=()=>{const t=$t.timeout;return t&&(t.running?AA():DA())},pz=t=>{if($t.timeout){const e=$t.timeout.increase(t);return _w(e,!0),e}},gz=()=>!!($t.timeout&&$t.timeout.isRunning());let XN=!1;const sy={};function fz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";sy[t]=this,XN||(document.body.addEventListener("click",vz),XN=!0)}const vz=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in sy){const s=e.getAttribute(n);if(s){sy[n].fire({template:s});return}}};let xz=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){var s=this;const a=function(){s.removeListener(e,a);for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];n.apply(s,o)};this.on(e,a)}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(l=>{try{l.apply(this,s)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),a=s.indexOf(n);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};$t.eventEmitter=new xz;const yz=(t,e)=>{$t.eventEmitter.on(t,e)},bz=(t,e)=>{$t.eventEmitter.once(t,e)},wz=(t,e)=>{if(!t){$t.eventEmitter.reset();return}e?$t.eventEmitter.removeListener(t,e):$t.eventEmitter.removeAllListeners(t)};var kz=Object.freeze({__proto__:null,argsToParams:cz,bindClickHandler:fz,clickCancel:cH,clickConfirm:sA,clickDeny:oH,enableLoading:Oc,fire:dz,getActions:Jm,getCancelButton:ed,getCloseButton:jw,getConfirmButton:za,getContainer:Zi,getDenyButton:No,getFocusableElements:Nw,getFooter:WT,getHtmlContainer:ww,getIcon:Jc,getIconContent:g7,getImage:UT,getInputLabel:f7,getLoader:td,getPopup:mn,getProgressSteps:kw,getTimerLeft:uz,getTimerProgressBar:Lg,getTitle:VT,getValidationMessage:Fg,increaseTimer:pz,isDeprecatedParameter:CA,isLoading:x7,isTimerRunning:gz,isUpdatableParameter:NA,isValidParameter:jA,isVisible:lH,mixin:mz,off:wz,on:yz,once:bz,resumeTimer:DA,showLoading:Oc,stopTimer:AA,toggleTimer:hz});class jz{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const RA=["swal-title","swal-html","swal-footer"],Nz=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return Rz(n),Object.assign(Cz(n),Sz(n),_z(n),Ez(n),Tz(n),Az(n),Dz(n,RA))},Cz=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{ro(s,["name","value"]);const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(typeof vc[a]=="boolean"?e[a]=l!=="false":typeof vc[a]=="object"?e[a]=JSON.parse(l):e[a]=l)}),e},Sz=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(e[a]=new Function(`return ${l}`)())}),e},_z=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{ro(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${xw(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},Ez=t=>{const e={},n=t.querySelector("swal-image");return n&&(ro(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},Tz=t=>{const e={},n=t.querySelector("swal-icon");return n&&(ro(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Az=t=>{const e={},n=t.querySelector("swal-input");n&&(ro(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{ro(a,["value"]);const l=a.getAttribute("value");if(!l)return;const o=a.innerHTML;e.inputOptions[l]=o})),e},Dz=(t,e)=>{const n={};for(const s in e){const a=e[s],l=t.querySelector(a);l&&(ro(l,[]),n[a.replace(/^swal-/,"")]=l.innerHTML.trim())}return n},Rz=t=>{const e=RA.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||Qi(`Unrecognized element <${s}>`)})},ro=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Qi([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},PA=10,Pz=t=>{const e=Zi(),n=mn();typeof t.willOpen=="function"&&t.willOpen(n),$t.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;Oz(e,n,t),setTimeout(()=>{Mz(e,n)},PA),Cw()&&(Iz(e,t.scrollbarPadding,a),vH()),!$g()&&!$t.previousActiveElement&&($t.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),$t.eventEmitter.emit("didOpen",n),ea(e,Fe["no-transition"])},Pp=t=>{const e=mn();if(t.target!==e)return;const n=Zi();e.removeEventListener("animationend",Pp),e.removeEventListener("transitionend",Pp),n.style.overflowY="auto"},Mz=(t,e)=>{YT(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Pp),e.addEventListener("transitionend",Pp)):t.style.overflowY="auto"},Iz=(t,e,n)=>{xH(),e&&n!=="hidden"&&CH(n),setTimeout(()=>{t.scrollTop=0})},Oz=(t,e,n)=>{tn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),yi(e,"grid"),setTimeout(()=>{tn(e,n.showClass.popup),e.style.removeProperty("opacity")},PA)):yi(e,"grid"),tn([document.documentElement,document.body],Fe.shown),n.heightAuto&&n.backdrop&&!n.toast&&tn([document.documentElement,document.body],Fe["height-auto"])};var JN={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function Fz(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=JN.email),t.input==="url"&&(t.inputValidator=JN.url))}function Lz(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Qi('Target parameter is not valid, defaulting to "body"'),t.target="body")}function $z(t){Fz(t),t.showLoaderOnConfirm&&!t.preConfirm&&Qi(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Lz(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),T7(t)}let Da;var ih=new WeakMap;class ai{constructor(){if(l7(this,ih,void 0),typeof window>"u")return;Da=this;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,o7(ih,this,this._main(Da.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(SA(Object.assign({},n,e)),$t.currentInstance){const l=Ic.swalPromiseResolve.get($t.currentInstance),{isAwaitingPromise:o}=$t.currentInstance;$t.currentInstance._destroy(),o||l({isDismissed:!0}),Cw()&&lA()}$t.currentInstance=Da;const s=qz(e,n);$z(s),Object.freeze(s),$t.timeout&&($t.timeout.stop(),delete $t.timeout),clearTimeout($t.restoreFocusTimeout);const a=Hz(Da);return iA(Da,s),Fn.innerParams.set(Da,s),Bz(Da,a,s)}then(e){return HN(ih,this).then(e)}finally(e){return HN(ih,this).finally(e)}}const Bz=(t,e,n)=>new Promise((s,a)=>{const l=o=>{t.close({isDismissed:!0,dismiss:o})};Ic.swalPromiseResolve.set(t,s),Ic.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{HH(t)},e.denyButton.onclick=()=>{zH(t)},e.cancelButton.onclick=()=>{VH(t,l)},e.closeButton.onclick=()=>{l(nd.close)},nz(n,e,l),dH($t,n,l),PH(t,n),Pz(n),zz($t,n,l),Vz(e,n),setTimeout(()=>{e.container.scrollTop=0})}),qz=(t,e)=>{const n=Nz(t),s=Object.assign({},vc,e,n,t);return s.showClass=Object.assign({},vc.showClass,s.showClass),s.hideClass=Object.assign({},vc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},Hz=t=>{const e={popup:mn(),container:Zi(),actions:Jm(),confirmButton:za(),denyButton:No(),cancelButton:ed(),loader:td(),closeButton:jw(),validationMessage:Fg(),progressSteps:kw()};return Fn.domCache.set(t,e),e},zz=(t,e,n)=>{const s=Lg();$i(s),e.timer&&(t.timeout=new jz(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(yi(s),As(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&_w(e.timer)})))},Vz=(t,e)=>{if(!e.toast){if(!Og(e.allowEnterKey)){zT("allowEnterKey"),Kz();return}Uz(t)||Wz(t,e)||iy(-1,1)}},Uz=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&us(n))return n.focus(),!0;return!1},Wz=(t,e)=>e.focusDeny&&us(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&us(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&us(t.confirmButton)?(t.confirmButton.focus(),!0):!1,Kz=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ai.prototype.disableButtons=xA;ai.prototype.enableButtons=vA;ai.prototype.getInput=pA;ai.prototype.disableInput=bA;ai.prototype.enableInput=yA;ai.prototype.hideLoading=Dp;ai.prototype.disableLoading=Dp;ai.prototype.showValidationMessage=wA;ai.prototype.resetValidationMessage=kA;ai.prototype.close=tl;ai.prototype.closePopup=tl;ai.prototype.closeModal=tl;ai.prototype.closeToast=tl;ai.prototype.rejectPromise=dA;ai.prototype.update=_A;ai.prototype._destroy=EA;Object.assign(ai,kz);Object.keys(tz).forEach(t=>{ai[t]=function(){return Da&&Da[t]?Da[t](...arguments):null}});ai.DismissReason=nd;ai.version="11.18.0";const At=ai;At.default=At;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-hover-transform: none}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ta={getBills:(t={})=>ve({endpoint:"bills",method:"GET",data:t}),getBill:t=>ve({endpoint:`bills/${t}`,method:"GET"}),createBill:t=>ve({endpoint:"bills",method:"POST",data:t}),updateBill:(t,e)=>ve({endpoint:`bills/${t}`,method:"PUT",data:e}),calculateTaxForService:({service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:l})=>ve({endpoint:"bills/calculate-tax",method:"POST",data:{service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:l}}),getEncountersWithoutBill:()=>ve({endpoint:"bills/encounters-without-bill",method:"GET"}),getBillByEncounterId:t=>ve({endpoint:`bills/by-encounter/${t}`,method:"GET"}),deleteBillItem:t=>ve({endpoint:`bills/item/${t}`,method:"DELETE"}),updateBillItem:(t,e)=>ve({endpoint:`bills/item/${t}`,method:"PUT",data:e}),exportBills:(t={})=>ve({endpoint:"bills/export",method:"GET",data:t}),printBill:t=>ve({endpoint:`bills/${t}/print`,method:"GET",responseType:"blob"}),emailBill:t=>ve({endpoint:`bills/${t}/email`,method:"POST"})},pr={all:["bills"],lists:()=>[...pr.all,"list"],list:t=>[...pr.lists(),{filters:t}],details:()=>[...pr.all,"detail"],detail:t=>[...pr.details(),t]},Gz=(t={},e={})=>ft({queryKey:pr.list(t),queryFn:()=>ta.getBills(t),...e}),Pw=(t,e={})=>ft({queryKey:pr.detail(t),queryFn:()=>ta.getBill(t),enabled:!!t,...e}),Yz=()=>{const t=Ve();return Le({mutationFn:e=>ta.createBill(e),onSuccess:()=>{t.invalidateQueries({queryKey:pr.lists()})}})},Qz=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>ta.updateBill(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:pr.detail(n.id)}),t.invalidateQueries({queryKey:pr.lists()})}})},Zz=()=>Le({mutationFn:t=>ta.calculateTaxForService(t)}),Xz=(t={})=>ft({queryKey:["encountersWithoutBill"],queryFn:()=>ta.getEncountersWithoutBill(),...t}),MA=(t,e={})=>ft({queryKey:["billByEncounterId",t],queryFn:()=>ta.getBillByEncounterId(t),enabled:!!t,...e}),Jz=()=>Le({mutationFn:t=>ta.deleteBillItem(t)}),eV=()=>Le({mutationFn:({itemId:t,...e})=>ta.updateBillItem(t,e)}),tV=()=>Le({mutationFn:t=>ta.exportBills(t)}),nV=()=>Le({mutationFn:t=>ta.printBill(t)}),iV=()=>Le({mutationFn:t=>ta.emailBill(t)}),Co={getDoctorServices:(t={})=>ve({endpoint:"doctor-services",method:"GET",data:t}),getDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"GET"}),createDoctorService:t=>ve({endpoint:"doctor-services",method:"POST",data:t}),updateDoctorService:(t,e)=>ve({endpoint:`doctor-services/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`doctor-services/${t}/resend-credentials`,method:"POST"}),deleteDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"DELETE"}),bulkDeleteDoctorServices:t=>ve({endpoint:"doctor-services/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorServiceStatus:(t,e)=>ve({endpoint:"doctor-services/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportServices:(t={})=>ve({endpoint:"doctor-services/export",method:"GET",data:t})};class sV{async getStaticData(e={}){const{dataType:n="staticData",staticDataType:s,...a}=e,l=new URLSearchParams({dataType:n,...s&&{staticDataType:s},...a});return ve({endpoint:`static-data?${l}`,method:"GET"})}async getClinics(e={}){const n={dataType:"clinicList",page:e.page||1,per_page:e.per_page||10};return e.search&&e.search!=="undefined"&&e.search!=="null"&&(n.search=e.search),this.getStaticData(n)}async getStaticDataByType(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticData",type:e})}async getStaticDataWithLabel(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataWithLabel",type:e})}async getStaticDataWithPagination(e,n={}){const s={dataType:"staticData",staticDataType:"staticDataWithLabel",type:e,page:n.page||1,per_page:n.per_page||10};return n.search&&n.search!=="undefined"&&n.search!=="null"&&(s.search=n.search),this.getStaticData(s)}async getStaticDataTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataTypes"})}async getDoctors(e=null){const n={dataType:"staticData",staticDataType:"doctors"};return e&&(n.clinic_ids=e),this.getStaticData(n)}async getClinicDoctors(e,n={}){const s={};return e&&typeof e=="object"&&e!==null?e.length>0&&(s.clinic_ids=e.join(",")):e&&(s.clinic_id=e),this.getStaticData({dataType:"staticData",staticDataType:"clinicDoctors",...s,...n})}async getDefaultClinic(){return this.getStaticData({dataType:"staticData",staticDataType:"defaultClinic"})}async getServicesWithPrice(e=null,n=null){const s={dataType:"staticData",staticDataType:"servicesWithPrice"};return e&&(s.clinic_id=e),n&&(Array.isArray(n)?s.doctor_ids=n.join(","):s.doctor_id=n),this.getStaticData(s)}async getPatientClinics(e){return this.getStaticData({dataType:"staticData",staticDataType:"patientClinic",patient_id:e})}async getPrescriptions(){return this.getStaticData({dataType:"staticData",staticDataType:"prescriptions"})}async getEmailTemplateTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateType"})}async getEmailTemplateKeys(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateKey"})}async getUsersByClinic(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"getUsersByClinic",clinic_id:e,...n})}async getUsersByRole(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"users",role:e,...n})}async createSpecialty(e,n="specialization"){try{const s=await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:n}});return console.log("StaticDataService.createSpecialty response:",s),s}catch(s){throw console.error("StaticDataService.createSpecialty error:",s),s}}async createProblem(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_problems"}})}catch(n){throw console.error("StaticDataService.createProblem error:",n),n}}async createObservation(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_observations"}})}catch(n){throw console.error("StaticDataService.createObservation error:",n),n}}}const Dt=new sV,jl=()=>typeof window<"u"&&window.kc_frontend&&window.kc_frontend.prefix?window.kc_frontend.prefix:"kiviCare_";jl();const pt={all:["staticData"],lists:()=>[...pt.all,"list"],list:t=>[...pt.lists(),{params:t}],types:()=>[...pt.all,"types"],type:t=>[...pt.types(),t],clinics:()=>[...pt.all,"clinics"],doctors:()=>[...pt.all,"doctors"],doctorsByClinic:t=>[...pt.doctors(),"clinic",t],services:()=>[...pt.all,"services"],servicesWithPrice:t=>[...pt.services(),"withPrice",t],users:()=>[...pt.all,"users"],usersByRole:t=>[...pt.users(),"role",t],usersByClinic:t=>[...pt.users(),"clinic",t],prescriptions:()=>[...pt.all,"prescriptions"],emailTemplates:()=>[...pt.all,"emailTemplates"],patientClinics:t=>[...pt.all,"patientClinics",t]},Mp=(t={},e={})=>ft({queryKey:pt.list(t),queryFn:()=>Dt.getStaticData(t),staleTime:300*1e3,...e}),qg=(t={},e)=>ft({queryKey:pt.clinics(),queryFn:()=>Dt.getClinics(e),staleTime:600*1e3,...t}),Va=(t,e={})=>ft({queryKey:[...pt.type(t),"withLabel"],queryFn:()=>Dt.getStaticDataWithLabel(t),enabled:!!t,staleTime:900*1e3,...e}),IA=(t=null,e={})=>{const n=t?pt.doctorsByClinic(t):pt.doctors();return ft({queryKey:n,queryFn:()=>Dt.getDoctors(t),staleTime:300*1e3,...e})},OA=(t,e={},n={})=>ft({queryKey:[...pt.doctorsByClinic(t),"detailed",e],queryFn:()=>Dt.getClinicDoctors(t,e),enabled:!!t,staleTime:300*1e3,...n}),aV=(t={})=>ft({queryKey:[...pt.clinics(),"default"],queryFn:()=>Dt.getDefaultClinic(),staleTime:1800*1e3,...t}),rV=(t={},e={})=>{const{clinicId:n,doctorId:s}=t;return ft({queryKey:pt.servicesWithPrice({clinicId:n,doctorId:s}),queryFn:()=>Dt.getServicesWithPrice(n,s),staleTime:300*1e3,...e})},lV=()=>{const t=Ve();return{prefetchClinics:()=>{t.prefetchQuery({queryKey:pt.clinics(),queryFn:()=>Dt.getClinics(),staleTime:600*1e3})},prefetchDoctors:(a=null)=>{const l=a?pt.doctorsByClinic(a):pt.doctors();t.prefetchQuery({queryKey:l,queryFn:()=>Dt.getDoctors(a),staleTime:300*1e3})},prefetchStaticDataTypes:()=>{t.prefetchQuery({queryKey:pt.types(),queryFn:()=>Dt.getStaticDataTypes(),staleTime:1800*1e3})}}},Hg=({specialty_type:t="specialization"}={})=>{const e=Ve();return Le({mutationFn:n=>Dt.createSpecialty(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:[...pt.type(t),"withLabel"]})}})},oV=()=>{const t=Ve();return Le({mutationFn:e=>Dt.createProblem(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("clinical_problems"),"withLabel"]})}})},cV=()=>{const t=Ve();return Le({mutationFn:e=>Dt.createObservation(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("clinical_observations"),"withLabel"]})}})},dV=()=>{const t=Ve();return Le({mutationFn:e=>Dt.createSpecialty(e,"prescription_medicine"),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("prescription_medicine"),"withLabel"]})}})},mV=()=>{const t=jl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},uV=()=>{const t=jl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},hV=()=>(jl(),["administrator"]),pV=()=>["administrator",`${jl()}clinic_admin`],gV=()=>{const t=jl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},fV=()=>{const t=jl();return["administrator",`${t}clinic_admin`,`${t}receptionist`]},vV=()=>{const t=jl();return[`${t}doctor`,`${t}receptionist`]},Us={all:["doctorServices"],lists:()=>[...Us.all,"list"],list:t=>[...Us.lists(),{filters:t}],details:()=>[...Us.all,"detail"],detail:t=>[...Us.details(),t]},FA=(t={},e={})=>ft({queryKey:Us.list(t),queryFn:()=>Co.getDoctorServices(t),...e}),xV=(t,e={})=>ft({queryKey:Us.detail(t),queryFn:()=>Co.getDoctorService(t),enabled:!!t,...e}),yV=()=>{const t=Ve();return Le({mutationFn:e=>Co.createDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:pt.services()}),t.invalidateQueries({queryKey:["stats","service"]})}})},bV=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Co.updateDoctorService(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Us.detail(n.id)}),t.invalidateQueries({queryKey:Us.lists()})}})},wV=()=>{const t=Ve();return Le({mutationFn:e=>Co.deleteDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},kV=()=>{const t=Ve();return Le({mutationFn:e=>Co.bulkDeleteDoctorServices(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},jV=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>Co.bulkUpdateDoctorServiceStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},Mw=({show:t,onHide:e,editFormData:n,setEditFormData:s,showAddServiceItemForm:a,setShowAddServiceItemForm:l,editBillId:o,handleCloseEditModal:c,onBillSaved:d,appointmentId:m})=>{const{getCurrencyDetail:u}=ut(),p=u(),h=p.prefix,g=p.postfix,x=Qz(),[v,y]=f.useState([]),[b,k]=f.useState([]),w=Zz(),[S,j]=f.useState(!1),T=Yz(),[N,_]=f.useState(!0),A=Jz(),P=eV(),[E,M]=f.useState({service_name:"",price:"",quantity:"",total:""}),[R,O]=f.useState({clinic_id:"",doctor_id:""}),{data:L,isLoadingDoctorService:q,errorDoctorServiceFetch:Q}=FA(R,{enabled:!!R.clinic_id&&!!R.doctor_id});f.useEffect(()=>{n?.clinic?.id&&n?.doctor?.id&&O({clinic_id:n.clinic.id,doctor_id:n.doctor.id})},[n?.clinic?.id,n?.doctor?.id]),f.useEffect(()=>{t&&n?.serviceItems?.length>0&&(!n?.taxItems||n.taxItems.length===0)&&w.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:n.serviceItems},{onSuccess:ye=>{s(pe=>({...pe,taxItems:ye?.data?.calculated_taxes||[]}))}})},[t,o]);const[V,se]=f.useState(!1);f.useEffect(()=>{if(!V&&n?.serviceItems?.length>0){const pe=n.serviceItems.every(Ce=>Ce.isPaid===!0)?"paid":"unpaid";n.status!==pe&&s(Ce=>({...Ce,status:pe})),se(!0)}t||se(!1)},[n?.serviceItems,t,V]);const G=f.useMemo(()=>[...(L?.data?.doctorServices||[]).map(ye=>({value:ye.serviceId,label:ye.serviceName,charges:ye.charges,isCustom:!1})),...v],[L,v]),ge=ye=>{const{name:pe,value:Ce}=ye.target;s(Ge=>({...Ge,[pe]:Ce}))},[ie,W]=f.useState(""),X=ye=>{const pe=ye.target.value;W(""),pe===""||pe===null?W(r("Discount value is required","kivicare-clinic-management-system")):Number(pe)<0?W(r("Discount value cannot be negative","kivicare-clinic-management-system")):Number(pe)>ue+de&&W(r("Discount value cannot be greater than subtotal + tax","kivicare-clinic-management-system")),s(Ce=>({...Ce,discount:pe}))},J=(ye=!1)=>{if(!n)return;if(!n?.serviceItems||n.serviceItems.length===0){At.fire(r("Error!","kivicare-clinic-management-system"),r("Please add at least one bill item before saving.","kivicare-clinic-management-system"),"error");return}if(ie){At.fire(r("Error!","kivicare-clinic-management-system"),ie,"error");return}const pe=n.serviceItems.map(Ge=>({...Ge,name:Ge.service_name||Ge.name,isPaid:Ge.isPaid??!1})),Ce={...n,serviceItems:pe};o?x.mutate({id:o,...Ce,checkout:ye},{onSuccess:()=>{At.fire(r("Updated!","kivicare-clinic-management-system"),r("The bill has been updated.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to update bill.","kivicare-clinic-management-system"),"error")}}):T.mutate({...Ce,checkout:ye},{onSuccess:()=>{At.fire(r("Created!","kivicare-clinic-management-system"),r("The bill has been created.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to create bill.","kivicare-clinic-management-system"),"error")}})},ue=f.useMemo(()=>(n?.serviceItems||[]).reduce((ye,pe)=>ye+Number(pe.total||0),0),[n?.serviceItems]),le=ye=>{M(ye?pe=>({...pe,serviceId:ye.value,service_name:ye.label,price:ye.charges,quantity:1,total:ye.charges}):{service_name:"",price:"",quantity:"",total:""})},[I,ee]=f.useState(""),K=ye=>{const pe=ye.target.value;pe<0?ee(r("Price cannot be negative","kivicare-clinic-management-system")):ee(""),M(Ce=>({...Ce,price:pe,total:pe&&Ce.quantity?Number(pe)*Number(Ce.quantity):""}))},ne=ye=>{const pe=ye.target.value;M(Ce=>({...Ce,quantity:pe,total:Ce.price&&pe?Number(Ce.price)*Number(pe):""}))},oe=ye=>{const pe={value:`custom-${Date.now()}`,label:ye,charges:0,isCustom:!0};y(Ce=>[...Ce,pe]),M(Ce=>({...Ce,serviceId:pe.value,service_name:pe.label,price:pe.charges,quantity:1,total:pe.charges}))},D=ze.useRef(n);f.useEffect(()=>{D.current=n},[n]);const $=async ye=>{const Ce=(D.current?.serviceItems||[])[ye];let Ge=Ce.serviceId||Ce.value||"";if(typeof Ge=="string"&&Ge.startsWith("custom-")){const De=Ce.service_name||Ce.name;if(!v.find(et=>et.value===Ge)&&De){const et={value:Ge,label:De,charges:Ce.price,isCustom:!0};y(tt=>[...tt,et])}}else Ge&&(Ge=parseInt(Ge));M({serviceId:Ge,service_name:Ce.service_name||Ce.name,price:Ce.price,quantity:Ce.quantity,total:Ce.total,editIndex:ye}),l(!0)},te=ye=>{const pe=D.current?.serviceItems[ye];if(pe.id)At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This will delete the service item from the bill.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(Ce=>{Ce.isConfirmed&&A.mutate(pe.id,{onSuccess:()=>{const Ge=D.current?.serviceItems.filter((De,$e)=>$e!==ye);s(De=>({...De,serviceItems:Ge})),w.mutate({clinic_id:D.current?.clinic?.id,doctor_id:D.current?.doctor?.id,serviceItems:Ge},{onSuccess:De=>{s($e=>({...$e,taxItems:De?.data?.calculated_taxes||[]}))}}),At.fire(r("Deleted!","kivicare-clinic-management-system"),r("Service item deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to delete service item.","kivicare-clinic-management-system"),"error")}})});else{const Ce=D.current?.serviceItems.filter((Ge,De)=>De!==ye);s(Ge=>({...Ge,serviceItems:Ce})),w.mutate({clinic_id:D.current?.clinic?.id,doctor_id:D.current?.doctor?.id,serviceItems:Ce},{onSuccess:Ge=>{s(De=>({...De,taxItems:Ge?.data?.calculated_taxes||[]}))}})}},ae=async()=>{if(!E.quantity)return;if(E.price===""||E.price===null||E.price===void 0){ee(r("Price is required","kivicare-clinic-management-system"));return}if(Number(E.price)<0){ee(r("Price cannot be negative","kivicare-clinic-management-system"));return}const ye=E.serviceId||E.value;if(!ye){At.fire(r("Error!","kivicare-clinic-management-system"),r("Service ID missing.","kivicare-clinic-management-system"),"error");return}if(typeof E.editIndex=="number"&&n.serviceItems[E.editIndex]?.id){const Ce=n.serviceItems[E.editIndex].id;P.mutate({itemId:Ce,serviceId:ye,quantity:E.quantity,price:E.price},{onSuccess:()=>{const Ge=n.serviceItems.map((De,$e)=>$e===E.editIndex?{...De,serviceId:ye,service_name:E.service_name,price:E.price,quantity:E.quantity,total:E.total}:De);s(De=>({...De,serviceItems:Ge})),w.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:Ge},{onSuccess:De=>{s($e=>({...$e,taxItems:De?.data?.calculated_taxes||[]}))}}),M({service_name:"",price:"",quantity:"",total:""}),l(!1),At.fire(r("Updated!","kivicare-clinic-management-system"),r("Service item updated.","kivicare-clinic-management-system"),"success")},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to update service item.","kivicare-clinic-management-system"),"error")}});return}let pe;typeof E.editIndex=="number"?pe=n.serviceItems.map((Ce,Ge)=>Ge===E.editIndex?{...E,serviceId:ye,editIndex:void 0,isPaid:Ce.isPaid??!1}:Ce):pe=[...n.serviceItems,{...E,serviceId:ye,isPaid:!1}],s(Ce=>({...Ce,serviceItems:pe,status:typeof E.editIndex!="number"?"unpaid":Ce.status})),w.mutate({quantity:E.quantity,clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,amount:E.price,service_id:ye,serviceItems:pe},{onSuccess:Ce=>{s(Ge=>({...Ge,taxItems:Ce?.data?.calculated_taxes||[]}))}}),M({service_name:"",price:"",quantity:"",total:""}),l(!1)},Y=Ln(),H=f.useMemo(()=>[Y.accessor("sr",{id:"sr",header:()=>r("Sr. No","kivicare-clinic-management-system"),cell:ye=>ye.row.index+1,enableSorting:!1}),Y.accessor("service_name",{id:"service_name",header:()=>r("Services","kivicare-clinic-management-system"),cell:ye=>ye.getValue(),enableSorting:!1}),Y.accessor("quantity",{id:"quantity",header:()=>r("Quantity","kivicare-clinic-management-system"),cell:ye=>ye.getValue(),enableSorting:!1}),Y.accessor("price",{id:"price",header:()=>r("Price","kivicare-clinic-management-system"),cell:ye=>h+ye.getValue()+g,enableSorting:!1}),Y.accessor("total",{id:"total",header:()=>r("Total Amount","kivicare-clinic-management-system"),cell:ye=>h+ye.getValue()+g,enableSorting:!1}),Y.accessor("payment_status",{id:"payment_status",header:()=>r("Payment Status","kivicare-clinic-management-system"),cell:ye=>ye.row.original.isPaid?i.jsx("span",{className:"badge bg-success-subtle text-success px-2 py-1",children:r("Paid","kivicare-clinic-management-system")}):i.jsx("span",{className:"badge bg-warning-subtle text-warning px-2 py-1",children:r("Unpaid","kivicare-clinic-management-system")}),enableSorting:!1}),Y.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:ye=>ye.row.original.isPaid?i.jsx("span",{className:"text-muted font-size-12",children:r("-","kivicare-clinic-management-system")}):i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary",title:r("Edit","kivicare-clinic-management-system"),onClick:()=>$(ye.row.index),children:i.jsx("i",{className:"ph ph-pencil"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:r("Delete","kivicare-clinic-management-system"),onClick:()=>te(ye.row.index),children:i.jsx("i",{className:"ph ph-trash"})})]}),enableSorting:!1})],[h,g]),B=()=>{M({service_name:"",price:"",quantity:"",total:"",serviceId:""})},re=ye=>{ye||B(),l(ye)},de=f.useMemo(()=>(n?.taxItems||[]).reduce((ye,pe)=>ye+Number(pe.tax_amount||0),0),[n?.taxItems]),xe=Number(n?.discountEnabled&&n?.discount||0),U=ue-xe+de,me=f.useMemo(()=>{const ye={};return(n?.taxItems||[]).forEach(pe=>{pe.tax_name&&(ye[pe.tax_name]?(ye[pe.tax_name].count+=1,ye[pe.tax_name].totalAmount+=Number(pe.tax_amount)):ye[pe.tax_name]={...pe,count:1,totalAmount:Number(pe.tax_amount)})}),Object.values(ye)},[n?.taxItems]);return f.useEffect(()=>{s(ye=>({...ye,service_total:ue,taxTotal:de,discountValue:xe,total_amount:U}))},[ue,de,xe,U,s]),f.useEffect(()=>{n?.discountEnabled||W("")},[n?.discountEnabled]),i.jsx(lt,{show:t,backdrop:"static",onHide:e,centered:!0,size:"xl",dialogClassName:"edit-bill-model",children:n&&i.jsxs(i.Fragment,{children:[i.jsxs(lt.Header,{children:[i.jsx(lt.Title,{id:"closeEncounterModalLabel",children:o?r("Edit Bill","kivicare-clinic-management-system"):r("Generate Invoice","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:r("Add items in billing","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-secondary d-flex align-items-center gap-2",onClick:()=>re(!a),children:a?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-minus-circle"}),i.jsx("span",{children:r("Close","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add New","kivicare-clinic-management-system")})]})})]}),a&&i.jsxs("div",{className:"encounter-box mb-5",children:[i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Xc,{options:G,value:G.find(ye=>ye.value===E.serviceId)||null,onChange:le,formatCreateLabel:ye=>r("Create service","kivicare-clinic-management-system")+`: "${ye}"`,onCreateOption:oe,placeholder:r("Select or create service","kivicare-clinic-management-system"),isClearable:!0})]}),i.jsxs("p",{className:"mt-3 mb-0 text-primary font-size-12 fw-semibold",children:[r("Note: Type and press enter to create new service","kivicare-clinic-management-system")," "]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Price","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-field-reuquired",children:"*"}),i.jsx("input",{className:`form-control ${I?"is-invalid":""}`,type:"number",name:"price",value:E.price,onChange:K,placeholder:r("eg $12","kivicare-clinic-management-system"),required:!0}),I&&i.jsx("div",{className:"invalid-feedback",children:I})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Quantity","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"quantity",value:E.quantity,onChange:ne,min:1,placeholder:r("eg 1","kivicare-clinic-management-system"),disabled:!E.serviceId})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Total","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"total",value:E.total,readOnly:!0,disabled:!0,placeholder:r("eg $12","kivicare-clinic-management-system")})]})})]})})}),i.jsx("button",{type:"button",className:"btn m-2 btn-secondary",onClick:()=>l(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn m-2 btn-primary",onClick:ae,disabled:!E.serviceId||!E.quantity,children:r("Add","kivicare-clinic-management-system")})]}),i.jsx(kn,{data:n.serviceItems,columns:H,isLoading:!1,error:null,enableSelection:!1,renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:H.length,className:"text-center py-4 border-start border-end",children:r("No service data found","kivicare-clinic-management-system")})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap form-check form-switch p-0 mb-2",children:[i.jsx("label",{htmlFor:"switchCheckDiscount",className:"form-label m-0",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",name:"discountEnabled",id:"switchCheckDiscount",checked:n.discountEnabled||!1,onChange:ye=>s(pe=>({...pe,discountEnabled:ye.target.checked,discount:ye.target.checked?pe.discount:0}))})]}),i.jsx("div",{className:"encounter-box mb-5",children:n.discountEnabled&&i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"",className:"form-label",children:[r("Discount Value","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${ie?"is-invalid":""}`,type:"number",placeholder:r("eg $12","kivicare-clinic-management-system"),value:n.discount,onChange:X,name:"discount",required:!0}),ie&&i.jsx("div",{className:"invalid-feedback",children:ie})]})})})})})}),i.jsxs("div",{children:[i.jsx("h6",{children:r("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+ue+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>_(ye=>!ye),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${N?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsxs("span",{className:"text-danger h6 m-0 ms-1",children:[h,de.toFixed(2),g]})]})]}),N&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),me.length===0&&i.jsx("div",{className:"text-muted",children:r("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:me.map((ye,pe)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[ye.tax_name,ye.count>1?` x${ye.count}`:"",ye.rate?` (${ye.rate}%)`:""]}),i.jsxs("h6",{className:"font-size-14 m-0 text-danger",children:[h,ye.totalAmount.toFixed(2),g]})]},pe))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx("span",{className:"font-size-14",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:h+xe+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")}),U>=0?i.jsx("h5",{className:"m-0 text-primary",children:h+U.toFixed(2)+g}):i.jsx("h5",{className:"m-0 text-primary",children:h+0+g})]})]})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"row gy-5",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"",className:"form-label",children:r("Payment Status","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap column-gap-5 row-gap-1",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"pending",value:"unpaid",checked:n.status==="unpaid",onChange:ge}),i.jsx("label",{className:"form-check-label",htmlFor:"pending",children:r("Pending","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"paid",value:"paid",checked:n.status==="paid",onChange:ge}),i.jsx("label",{className:"form-check-label",htmlFor:"paid",children:r("Paid","kivicare-clinic-management-system")})]})]})]})})}),i.jsx("p",{className:"mt-3 mb-0 text-danger font-size-12 fw-semibold",children:r("Note: To close encounter, invoice payment is mandatory","kivicare-clinic-management-system")})]})]}),i.jsxs(lt.Footer,{className:"gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:c,children:r("Cancel","kivicare-clinic-management-system")}),n.status==="paid"?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"primary",onClick:()=>J(!1),disabled:T?.isLoading||x?.isLoading,children:r("Close encounter","kivicare-clinic-management-system")}),Number(m)>0&&i.jsx(Xt,{variant:"primary",onClick:()=>J(!0),disabled:T?.isLoading||x?.isLoading,children:r("Close and checkout","kivicare-clinic-management-system")})]}):i.jsx(Xt,{variant:"primary",onClick:()=>J(!1),disabled:T?.isLoading||x?.isLoading,children:r("Save","kivicare-clinic-management-system")})]})]})})};var Fh={exports:{}},NV=Fh.exports,e1;function CV(){return e1||(e1=1,(function(t,e){(function(n,s){t.exports=s()})(NV,(function(){var n=1e3,s=6e4,a=36e5,l="millisecond",o="second",c="minute",d="hour",m="day",u="week",p="month",h="quarter",g="year",x="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var L=["th","st","nd","rd"],q=O%100;return"["+O+(L[(q-20)%10]||L[q]||L[0])+"]"}},w=function(O,L,q){var Q=String(O);return!Q||Q.length>=L?O:""+Array(L+1-Q.length).join(q)+O},S={s:w,z:function(O){var L=-O.utcOffset(),q=Math.abs(L),Q=Math.floor(q/60),V=q%60;return(L<=0?"+":"-")+w(Q,2,"0")+":"+w(V,2,"0")},m:function O(L,q){if(L.date()<q.date())return-O(q,L);var Q=12*(q.year()-L.year())+(q.month()-L.month()),V=L.clone().add(Q,p),se=q-V<0,G=L.clone().add(Q+(se?-1:1),p);return+(-(Q+(q-V)/(se?V-G:G-V))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:p,y:g,w:u,d:m,D:x,h:d,m:c,s:o,ms:l,Q:h}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},j="en",T={};T[j]=k;var N="$isDayjsObject",_=function(O){return O instanceof M||!(!O||!O[N])},A=function O(L,q,Q){var V;if(!L)return j;if(typeof L=="string"){var se=L.toLowerCase();T[se]&&(V=se),q&&(T[se]=q,V=se);var G=L.split("-");if(!V&&G.length>1)return O(G[0])}else{var ge=L.name;T[ge]=L,V=ge}return!Q&&V&&(j=V),V||!Q&&j},P=function(O,L){if(_(O))return O.clone();var q=typeof L=="object"?L:{};return q.date=O,q.args=arguments,new M(q)},E=S;E.l=A,E.i=_,E.w=function(O,L){return P(O,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var M=(function(){function O(q){this.$L=A(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[N]=!0}var L=O.prototype;return L.parse=function(q){this.$d=(function(Q){var V=Q.date,se=Q.utc;if(V===null)return new Date(NaN);if(E.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var G=V.match(y);if(G){var ge=G[2]-1||0,ie=(G[7]||"0").substring(0,3);return se?new Date(Date.UTC(G[1],ge,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ie)):new Date(G[1],ge,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ie)}}return new Date(V)})(q),this.init()},L.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},L.$utils=function(){return E},L.isValid=function(){return this.$d.toString()!==v},L.isSame=function(q,Q){var V=P(q);return this.startOf(Q)<=V&&V<=this.endOf(Q)},L.isAfter=function(q,Q){return P(q)<this.startOf(Q)},L.isBefore=function(q,Q){return this.endOf(Q)<P(q)},L.$g=function(q,Q,V){return E.u(q)?this[Q]:this.set(V,q)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(q,Q){var V=this,se=!!E.u(Q)||Q,G=E.p(q),ge=function(ee,K){var ne=E.w(V.$u?Date.UTC(V.$y,K,ee):new Date(V.$y,K,ee),V);return se?ne:ne.endOf(m)},ie=function(ee,K){return E.w(V.toDate()[ee].apply(V.toDate("s"),(se?[0,0,0,0]:[23,59,59,999]).slice(K)),V)},W=this.$W,X=this.$M,J=this.$D,ue="set"+(this.$u?"UTC":"");switch(G){case g:return se?ge(1,0):ge(31,11);case p:return se?ge(1,X):ge(0,X+1);case u:var le=this.$locale().weekStart||0,I=(W<le?W+7:W)-le;return ge(se?J-I:J+(6-I),X);case m:case x:return ie(ue+"Hours",0);case d:return ie(ue+"Minutes",1);case c:return ie(ue+"Seconds",2);case o:return ie(ue+"Milliseconds",3);default:return this.clone()}},L.endOf=function(q){return this.startOf(q,!1)},L.$set=function(q,Q){var V,se=E.p(q),G="set"+(this.$u?"UTC":""),ge=(V={},V[m]=G+"Date",V[x]=G+"Date",V[p]=G+"Month",V[g]=G+"FullYear",V[d]=G+"Hours",V[c]=G+"Minutes",V[o]=G+"Seconds",V[l]=G+"Milliseconds",V)[se],ie=se===m?this.$D+(Q-this.$W):Q;if(se===p||se===g){var W=this.clone().set(x,1);W.$d[ge](ie),W.init(),this.$d=W.set(x,Math.min(this.$D,W.daysInMonth())).$d}else ge&&this.$d[ge](ie);return this.init(),this},L.set=function(q,Q){return this.clone().$set(q,Q)},L.get=function(q){return this[E.p(q)]()},L.add=function(q,Q){var V,se=this;q=Number(q);var G=E.p(Q),ge=function(X){var J=P(se);return E.w(J.date(J.date()+Math.round(X*q)),se)};if(G===p)return this.set(p,this.$M+q);if(G===g)return this.set(g,this.$y+q);if(G===m)return ge(1);if(G===u)return ge(7);var ie=(V={},V[c]=s,V[d]=a,V[o]=n,V)[G]||1,W=this.$d.getTime()+q*ie;return E.w(W,this)},L.subtract=function(q,Q){return this.add(-1*q,Q)},L.format=function(q){var Q=this,V=this.$locale();if(!this.isValid())return V.invalidDate||v;var se=q||"YYYY-MM-DDTHH:mm:ssZ",G=E.z(this),ge=this.$H,ie=this.$m,W=this.$M,X=V.weekdays,J=V.months,ue=V.meridiem,le=function(K,ne,oe,D){return K&&(K[ne]||K(Q,se))||oe[ne].slice(0,D)},I=function(K){return E.s(ge%12||12,K,"0")},ee=ue||function(K,ne,oe){var D=K<12?"AM":"PM";return oe?D.toLowerCase():D};return se.replace(b,(function(K,ne){return ne||(function(oe){switch(oe){case"YY":return String(Q.$y).slice(-2);case"YYYY":return E.s(Q.$y,4,"0");case"M":return W+1;case"MM":return E.s(W+1,2,"0");case"MMM":return le(V.monthsShort,W,J,3);case"MMMM":return le(J,W);case"D":return Q.$D;case"DD":return E.s(Q.$D,2,"0");case"d":return String(Q.$W);case"dd":return le(V.weekdaysMin,Q.$W,X,2);case"ddd":return le(V.weekdaysShort,Q.$W,X,3);case"dddd":return X[Q.$W];case"H":return String(ge);case"HH":return E.s(ge,2,"0");case"h":return I(1);case"hh":return I(2);case"a":return ee(ge,ie,!0);case"A":return ee(ge,ie,!1);case"m":return String(ie);case"mm":return E.s(ie,2,"0");case"s":return String(Q.$s);case"ss":return E.s(Q.$s,2,"0");case"SSS":return E.s(Q.$ms,3,"0");case"Z":return G}return null})(K)||G.replace(":","")}))},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(q,Q,V){var se,G=this,ge=E.p(Q),ie=P(q),W=(ie.utcOffset()-this.utcOffset())*s,X=this-ie,J=function(){return E.m(G,ie)};switch(ge){case g:se=J()/12;break;case p:se=J();break;case h:se=J()/3;break;case u:se=(X-W)/6048e5;break;case m:se=(X-W)/864e5;break;case d:se=X/a;break;case c:se=X/s;break;case o:se=X/n;break;default:se=X}return V?se:E.a(se)},L.daysInMonth=function(){return this.endOf(p).$D},L.$locale=function(){return T[this.$L]},L.locale=function(q,Q){if(!q)return this.$L;var V=this.clone(),se=A(q,Q,!0);return se&&(V.$L=se),V},L.clone=function(){return E.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},O})(),R=M.prototype;return P.prototype=R,[["$ms",l],["$s",o],["$m",c],["$H",d],["$W",m],["$M",p],["$y",g],["$D",x]].forEach((function(O){R[O[1]]=function(L){return this.$g(L,O[0],O[1])}})),P.extend=function(O,L){return O.$i||(O(L,M,P),O.$i=!0),P},P.locale=A,P.isDayjs=_,P.unix=function(O){return P(1e3*O)},P.en=T[j],P.Ls=T,P.p={},P}))})(Fh)),Fh.exports}var SV=CV();const En=ya(SV),_V=({limit:t=3})=>{const e=Ln(),{user:n,isAddonActive:s,getPriceFormat:a,global_date_format:l}=ut(),[o,c]=f.useState(!1),[d,m]=f.useState(null),[u,p]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[h,g]=f.useState(!1),{data:x,isLoading:v}=Pw(d,{enabled:!!d&&o});f.useEffect(()=>{x&&p(x?.data)},[x]);const y=P=>{m(P.id),c(!0)},b=()=>{c(!1),m(null),g(!1)},k=n?.clinic_id||0,{data:w,isLoading:S,error:j}=X6({limit:t,clinic_id:k>0?k:void 0}),T=f.useMemo(()=>w?w.data&&Array.isArray(w.data.data)?w.data.data:Array.isArray(w.data)?w.data:Array.isArray(w)?w:[]:[],[w]),N=s("kiviPro"),_=f.useMemo(()=>[e.accessor("patient",{enableSorting:!1,header:()=>r("Patient","kivicare-clinic-management-system"),cell:({getValue:P})=>{const E=P();return E?i.jsx(cn,{profileUrl:E.avatar,name:E.name,email:E.email,fallbackText:E.name?.charAt(0)||"P",variant:"primary",size:"sm"}):"-"}}),e.accessor("dateTime",{enableSorting:!1,header:()=>r("Date and time","kivicare-clinic-management-system"),cell:({getValue:P})=>{const E=P();if(!E)return"-";const M=En(E);if(!M.isValid())return E;const R={Y:"YYYY",y:"YY",F:"MMMM",M:"MMM",m:"MM",n:"M",d:"DD",j:"D",l:"dddd",D:"ddd"},L=(l||"Y-m-d").split("").map(Q=>R[Q]||Q).join("");return`${M.format(L)} ${M.format("h:mm A")}`}}),e.accessor("doctor",{enableSorting:!1,header:()=>r("Doctor","kivicare-clinic-management-system")}),...N?[e.accessor("clinic",{enableSorting:!1,header:()=>r("Clinic","kivicare-clinic-management-system"),cell:({getValue:P})=>P()||"-"})]:[],e.accessor("service",{enableSorting:!1,header:()=>r("Services","kivicare-clinic-management-system")}),e.accessor("charges",{enableSorting:!1,header:()=>r("Charges","kivicare-clinic-management-system"),cell:({getValue:P})=>a(parseFloat(String(P()||0).replace(/[^0-9.]/g,"")||"0"))}),e.accessor("paymentMode",{enableSorting:!1,header:()=>r("Payment Mode","kivicare-clinic-management-system")}),e.accessor("paymentStatus",{enableSorting:!1,header:()=>r("Status","kivicare-clinic-management-system"),cell:({getValue:P})=>{const E=P(),R=String(E||"").toLowerCase()==="paid";return i.jsx("span",{className:`badge ${R?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:R?r("Paid","kivicare-clinic-management-system"):r("Unpaid","kivicare-clinic-management-system")})}}),e.display({enableSorting:!1,id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:({row:P})=>{const E=P.original,R=String(E.paymentStatus||"").toLowerCase()==="paid";return i.jsxs("div",{className:"d-flex align-items-center gap-2 fs-5",children:[i.jsx(ht,{to:`/billings/view/${E.id}`,className:"text-secondary",title:r("View Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye"})}),!R&&i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>y(E),title:r("Edit Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})]})}})],[N,e]);if(j)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r("Error loading payment data:","kivicare-clinic-management-system")," ",j.message||r("Unknown error","kivicare-clinic-management-system")]});const A={currentPage:1,perPage:t,totalItems:T.length,lastPage:1};return i.jsxs(i.Fragment,{children:[i.jsx(kn,{data:T,columns:_,isLoading:S,currentPage:A.currentPage,perPage:A.perPage,totalItems:A.totalItems,lastPage:A.lastPage,bordered:!0,striped:!0,hover:!0,enableSelection:!1,manualPagination:!1,moduleNamePlural:"payments",renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"text-center py-4 border-start border-end",children:r("No payment records found","kivicare-clinic-management-system")})})}),i.jsx(Mw,{show:o,onHide:b,editFormData:u,setEditFormData:p,showAddServiceItemForm:h,setShowAddServiceItemForm:g,editBillId:d,handleCloseEditModal:b})]})};var zg,Bt,LA,$A,Fc,ql,t1,BA,qA,Ip={},HA=[],EV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function nl(t,e){for(var n in e)t[n]=e[n];return t}function zA(t){var e=t.parentNode;e&&e.removeChild(t)}function ke(t,e,n){var s,a,l,o={};for(l in e)l=="key"?s=e[l]:l=="ref"?a=e[l]:o[l]=e[l];if(arguments.length>2&&(o.children=arguments.length>3?zg.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)o[l]===void 0&&(o[l]=t.defaultProps[l]);return Lh(t,o,s,a,null)}function Lh(t,e,n,s,a){var l={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++LA};return a==null&&Bt.vnode!=null&&Bt.vnode(l),l}function Ui(){return{current:null}}function In(t){return t.children}function TV(t,e,n,s,a){var l;for(l in n)l==="children"||l==="key"||l in e||Op(t,l,null,n[l],s);for(l in e)a&&typeof e[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||n[l]===e[l]||Op(t,l,e[l],n[l],s)}function n1(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||EV.test(e)?n:n+"px"}function Op(t,e,n,s,a){var l;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)n&&e in n||n1(t.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||n1(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")l=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+l]=n,n?s||t.addEventListener(e,l?s1:i1,l):t.removeEventListener(e,l?s1:i1,l);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function i1(t){Fc=!0;try{return this.l[t.type+!1](Bt.event?Bt.event(t):t)}finally{Fc=!1}}function s1(t){Fc=!0;try{return this.l[t.type+!0](Bt.event?Bt.event(t):t)}finally{Fc=!1}}function Ss(t,e){this.props=t,this.context=e}function Cm(t,e){if(e==null)return t.__?Cm(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Cm(t):null}function VA(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return VA(t)}}function AV(t){Fc?setTimeout(t):BA(t)}function ay(t){(!t.__d&&(t.__d=!0)&&ql.push(t)&&!Fp.__r++||t1!==Bt.debounceRendering)&&((t1=Bt.debounceRendering)||AV)(Fp)}function Fp(){var t,e,n,s,a,l,o,c;for(ql.sort(function(d,m){return d.__v.__b-m.__v.__b});t=ql.shift();)t.__d&&(e=ql.length,s=void 0,a=void 0,o=(l=(n=t).__v).__e,(c=n.__P)&&(s=[],(a=nl({},l)).__v=l.__v+1,Iw(c,l,a,n.__n,c.ownerSVGElement!==void 0,l.__h!=null?[o]:null,s,o??Cm(l),l.__h),YA(s,l),l.__e!=o&&VA(l)),ql.length>e&&ql.sort(function(d,m){return d.__v.__b-m.__v.__b}));Fp.__r=0}function UA(t,e,n,s,a,l,o,c,d,m){var u,p,h,g,x,v,y,b=s&&s.__k||HA,k=b.length;for(n.__k=[],u=0;u<e.length;u++)if((g=n.__k[u]=(g=e[u])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?Lh(null,g,null,null,g):Array.isArray(g)?Lh(In,{children:g},null,null,null):g.__b>0?Lh(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(h=b[u])===null||h&&g.key==h.key&&g.type===h.type)b[u]=void 0;else for(p=0;p<k;p++){if((h=b[p])&&g.key==h.key&&g.type===h.type){b[p]=void 0;break}h=null}Iw(t,g,h=h||Ip,a,l,o,c,d,m),x=g.__e,(p=g.ref)&&h.ref!=p&&(y||(y=[]),h.ref&&y.push(h.ref,null,g),y.push(p,g.__c||x,g)),x!=null?(v==null&&(v=x),typeof g.type=="function"&&g.__k===h.__k?g.__d=d=WA(g,d,t):d=KA(t,g,h,b,x,d),typeof n.type=="function"&&(n.__d=d)):d&&h.__e==d&&d.parentNode!=t&&(d=Cm(h))}for(n.__e=v,u=k;u--;)b[u]!=null&&(typeof n.type=="function"&&b[u].__e!=null&&b[u].__e==n.__d&&(n.__d=GA(s).nextSibling),ZA(b[u],b[u]));if(y)for(u=0;u<y.length;u++)QA(y[u],y[++u],y[++u])}function WA(t,e,n){for(var s,a=t.__k,l=0;a&&l<a.length;l++)(s=a[l])&&(s.__=t,e=typeof s.type=="function"?WA(s,e,n):KA(n,s,s,a,s.__e,e));return e}function Lp(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Lp(n,e)}):e.push(t)),e}function KA(t,e,n,s,a,l){var o,c,d;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||a!=l||a.parentNode==null)e:if(l==null||l.parentNode!==t)t.appendChild(a),o=null;else{for(c=l,d=0;(c=c.nextSibling)&&d<s.length;d+=1)if(c==a)break e;t.insertBefore(a,l),o=l}return o!==void 0?o:a.nextSibling}function GA(t){var e,n,s;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(s=GA(n)))return s}return null}function Iw(t,e,n,s,a,l,o,c,d){var m,u,p,h,g,x,v,y,b,k,w,S,j,T,N,_=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,l=[c]),(m=Bt.__b)&&m(e);try{e:if(typeof _=="function"){if(y=e.props,b=(m=_.contextType)&&s[m.__c],k=m?b?b.props.value:m.__:s,n.__c?v=(u=e.__c=n.__c).__=u.__E:("prototype"in _&&_.prototype.render?e.__c=u=new _(y,k):(e.__c=u=new Ss(y,k),u.constructor=_,u.render=RV),b&&b.sub(u),u.props=y,u.state||(u.state={}),u.context=k,u.__n=s,p=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),_.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=nl({},u.__s)),nl(u.__s,_.getDerivedStateFromProps(y,u.__s))),h=u.props,g=u.state,u.__v=e,p)_.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(_.getDerivedStateFromProps==null&&y!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,k),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,k)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(A){A&&(A.__=e)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,k),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,g,x)})}if(u.context=k,u.props=y,u.__P=t,S=Bt.__r,j=0,"prototype"in _&&_.prototype.render){for(u.state=u.__s,u.__d=!1,S&&S(e),m=u.render(u.props,u.state,u.context),T=0;T<u._sb.length;T++)u.__h.push(u._sb[T]);u._sb=[]}else do u.__d=!1,S&&S(e),m=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++j<25);u.state=u.__s,u.getChildContext!=null&&(s=nl(nl({},s),u.getChildContext())),p||u.getSnapshotBeforeUpdate==null||(x=u.getSnapshotBeforeUpdate(h,g)),N=m!=null&&m.type===In&&m.key==null?m.props.children:m,UA(t,Array.isArray(N)?N:[N],e,n,s,a,l,o,c,d),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),v&&(u.__E=u.__=null),u.__e=!1}else l==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=DV(n.__e,e,n,s,a,l,o,d);(m=Bt.diffed)&&m(e)}catch(A){e.__v=null,(d||l!=null)&&(e.__e=c,e.__h=!!d,l[l.indexOf(c)]=null),Bt.__e(A,e,n)}}function YA(t,e){Bt.__c&&Bt.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(s){s.call(n)})}catch(s){Bt.__e(s,n.__v)}})}function DV(t,e,n,s,a,l,o,c){var d,m,u,p=n.props,h=e.props,g=e.type,x=0;if(g==="svg"&&(a=!0),l!=null){for(;x<l.length;x++)if((d=l[x])&&"setAttribute"in d==!!g&&(g?d.localName===g:d.nodeType===3)){t=d,l[x]=null;break}}if(t==null){if(g===null)return document.createTextNode(h);t=a?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,h.is&&h),l=null,c=!1}if(g===null)p===h||c&&t.data===h||(t.data=h);else{if(l=l&&zg.call(t.childNodes),m=(p=n.props||Ip).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!c){if(l!=null)for(p={},x=0;x<t.attributes.length;x++)p[t.attributes[x].name]=t.attributes[x].value;(u||m)&&(u&&(m&&u.__html==m.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(TV(t,h,p,a,c),u)e.__k=[];else if(x=e.props.children,UA(t,Array.isArray(x)?x:[x],e,n,s,a&&g!=="foreignObject",l,o,l?l[0]:n.__k&&Cm(n,0),c),l!=null)for(x=l.length;x--;)l[x]!=null&&zA(l[x]);c||("value"in h&&(x=h.value)!==void 0&&(x!==t.value||g==="progress"&&!x||g==="option"&&x!==p.value)&&Op(t,"value",x,p.value,!1),"checked"in h&&(x=h.checked)!==void 0&&x!==t.checked&&Op(t,"checked",x,p.checked,!1))}return t}function QA(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(s){Bt.__e(s,n)}}function ZA(t,e,n){var s,a;if(Bt.unmount&&Bt.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||QA(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){Bt.__e(l,e)}s.base=s.__P=null,t.__c=void 0}if(s=t.__k)for(a=0;a<s.length;a++)s[a]&&ZA(s[a],e,n||typeof t.type!="function");n||t.__e==null||zA(t.__e),t.__=t.__e=t.__d=void 0}function RV(t,e,n){return this.constructor(t,n)}function Sm(t,e,n){var s,a,l;Bt.__&&Bt.__(t,e),a=(s=!1)?null:e.__k,l=[],Iw(e,t=e.__k=ke(In,null,[t]),a||Ip,Ip,e.ownerSVGElement!==void 0,a?null:e.firstChild?zg.call(e.childNodes):null,l,a?a.__e:e.firstChild,s),YA(l,t)}function PV(t,e){var n={__c:e="__cC"+qA++,__:t,Consumer:function(s,a){return s.children(a)},Provider:function(s){var a,l;return this.getChildContext||(a=[],(l={})[e]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(c){c.__e=!0,ay(c)})},this.sub=function(o){a.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),c&&c.call(o)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}zg=HA.slice,Bt={__e:function(t,e,n,s){for(var a,l,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((l=a.constructor)&&l.getDerivedStateFromError!=null&&(a.setState(l.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,s||{}),o=a.__d),o)return a.__E=a}catch(c){t=c}throw t}},LA=0,$A=function(t){return t!=null&&t.constructor===void 0},Fc=!1,Ss.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=nl({},this.state),typeof t=="function"&&(t=t(nl({},n),this.props)),t&&nl(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ay(this))},Ss.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ay(this))},Ss.prototype.render=In,ql=[],BA=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fp.__r=0,qA=0;var Ma,Rv,a1,XA=[],Pv=[],r1=Bt.__b,l1=Bt.__r,o1=Bt.diffed,c1=Bt.__c,d1=Bt.unmount;function MV(){for(var t;t=XA.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach($h),t.__H.__h.forEach(ry),t.__H.__h=[]}catch(e){t.__H.__h=[],Bt.__e(e,t.__v)}}Bt.__b=function(t){Ma=null,r1&&r1(t)},Bt.__r=function(t){l1&&l1(t);var e=(Ma=t.__c).__H;e&&(Rv===Ma?(e.__h=[],Ma.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Pv,n.__N=n.i=void 0})):(e.__h.forEach($h),e.__h.forEach(ry),e.__h=[])),Rv=Ma},Bt.diffed=function(t){o1&&o1(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(XA.push(e)!==1&&a1===Bt.requestAnimationFrame||((a1=Bt.requestAnimationFrame)||IV)(MV)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Pv&&(n.__=n.__V),n.i=void 0,n.__V=Pv})),Rv=Ma=null},Bt.__c=function(t,e){e.some(function(n){try{n.__h.forEach($h),n.__h=n.__h.filter(function(s){return!s.__||ry(s)})}catch(s){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Bt.__e(s,n.__v)}}),c1&&c1(t,e)},Bt.unmount=function(t){d1&&d1(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{$h(s)}catch(a){e=a}}),n.__H=void 0,e&&Bt.__e(e,n.__v))};var m1=typeof requestAnimationFrame=="function";function IV(t){var e,n=function(){clearTimeout(s),m1&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(n,100);m1&&(e=requestAnimationFrame(n))}function $h(t){var e=Ma,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Ma=e}function ry(t){var e=Ma;t.__c=t.__(),Ma=e}function OV(t,e){for(var n in e)t[n]=e[n];return t}function u1(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&t[s]!==e[s])return!0;return!1}function h1(t){this.props=t}(h1.prototype=new Ss).isPureReactComponent=!0,h1.prototype.shouldComponentUpdate=function(t,e){return u1(this.props,t)||u1(this.state,e)};var p1=Bt.__b;Bt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),p1&&p1(t)};var FV=Bt.__e;Bt.__e=function(t,e,n,s){if(t.then){for(var a,l=e;l=l.__;)if((a=l.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(t,e)}FV(t,e,n,s)};var g1=Bt.unmount;function JA(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),t.__c.__H=null),(t=OV({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(s){return JA(s,e,n)})),t}function eD(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(s){return eD(s,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Mv(){this.__u=0,this.t=null,this.__b=null}function tD(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function sh(){this.u=null,this.o=null}Bt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),g1&&g1(t)},(Mv.prototype=new Ss).__c=function(t,e){var n=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(n);var a=tD(s.__v),l=!1,o=function(){l||(l=!0,n.__R=null,a?a(c):c())};n.__R=o;var c=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=eD(m,m.__c.__P,m.__c.__O)}var u;for(s.setState({__a:s.__b=null});u=s.t.pop();)u.forceUpdate()}},d=e.__h===!0;s.__u++||d||s.setState({__a:s.__b=s.__v.__k[0]}),t.then(o,o)},Mv.prototype.componentWillUnmount=function(){this.t=[]},Mv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=JA(this.__b,n,s.__O=s.__P)}this.__b=null}var a=e.__a&&ke(In,null,t.fallback);return a&&(a.__h=null),[ke(In,null,e.__a?null:t.children),a]};var f1=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function LV(t){return this.getChildContext=function(){return t.context},t.children}function $V(t){var e=this,n=t.i;e.componentWillUnmount=function(){Sm(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,a){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),Sm(ke(LV,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function BV(t,e){var n=ke($V,{__v:t,i:e});return n.containerInfo=e,n}(sh.prototype=new Ss).__a=function(t){var e=this,n=tD(e.__v),s=e.o.get(t);return s[0]++,function(a){var l=function(){e.props.revealOrder?(s.push(a),f1(e,t,s)):a()};n?n(l):l()}},sh.prototype.render=function(t){this.u=null,this.o=new Map;var e=Lp(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},sh.prototype.componentDidUpdate=sh.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){f1(t,n,e)})};var qV=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,HV=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zV=typeof document<"u",VV=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};Ss.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Ss.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var v1=Bt.event;function UV(){}function WV(){return this.cancelBubble}function KV(){return this.defaultPrevented}Bt.event=function(t){return v1&&(t=v1(t)),t.persist=UV,t.isPropagationStopped=WV,t.isDefaultPrevented=KV,t.nativeEvent=t};var x1={configurable:!0,get:function(){return this.class}},y1=Bt.vnode;Bt.vnode=function(t){var e=t.type,n=t.props,s=n;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var l in s={},n){var o=n[l];zV&&l==="children"&&e==="noscript"||l==="value"&&"defaultValue"in n&&o==null||(l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&o===!0?o="":/ondoubleclick/i.test(l)?l="ondblclick":/^onchange(textarea|input)/i.test(l+e)&&!VV(n.type)?l="oninput":/^onfocus$/i.test(l)?l="onfocusin":/^onblur$/i.test(l)?l="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(l)?l=l.toLowerCase():a&&HV.test(l)?l=l.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(l)&&(l=l.toLowerCase(),s[l]&&(l="oninputCapture")),s[l]=o)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),t.props=s,n.class!=n.className&&(x1.enumerable="className"in n,n.className!=null&&(s.class=n.className),Object.defineProperty(s,"className",x1))}t.$$typeof=qV,y1&&y1(t)};var b1=Bt.__r;Bt.__r=function(t){b1&&b1(t),t.__c};const nD=[],ly=new Map;function Ow(t){nD.push(t),ly.forEach(e=>{sD(e,t)})}function GV(t){t.isConnected&&t.getRootNode&&iD(t.getRootNode())}function iD(t){let e=ly.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=QV();n&&(e.nonce=n);const s=t===document?document.head:t,a=t===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,a)}ly.set(t,e),YV(e)}}function YV(t){for(const e of nD)sD(t,e)}function sD(t,e){const{sheet:n}=t,s=n.cssRules.length;e.split("}").forEach((a,l)=>{a=a.trim(),a&&n.insertRule(a+"}",s+l)})}let Iv;function QV(){return Iv===void 0&&(Iv=ZV()),Iv}function ZV(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&iD(document);var XV=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Ow(XV);class Fw{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:s}=this;e in s&&(n?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Lw(t){t.parentNode&&t.parentNode.removeChild(t)}function Ii(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(JV(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function JV(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function eU(t,e){let n=t instanceof HTMLElement?[t]:t,s=[];for(let a=0;a<n.length;a+=1){let l=n[a].querySelectorAll(e);for(let o=0;o<l.length;o+=1)s.push(l[o])}return s}const tU=/(top|left|right|bottom|width|height)$/i;function sm(t,e){for(let n in e)aD(t,n,e[n])}function aD(t,e,n){n==null?t.style[e]="":typeof n=="number"&&tU.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function rD(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let w1=0;function Vg(){return w1+=1,"fc-dom-"+w1}function Ug(t){t.preventDefault()}function nU(t,e){return n=>{let s=Ii(n.target,t);s&&e.call(s,n,s)}}function lD(t,e,n,s){let a=nU(n,s);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function iU(t,e,n,s){let a;return lD(t,"mouseover",e,(l,o)=>{if(o!==a){a=o,n(l,o);let c=d=>{a=null,s(d,o),o.removeEventListener("mouseleave",c)};o.addEventListener("mouseleave",c)}})}const k1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function sU(t,e){let n=s=>{e(s),k1.forEach(a=>{t.removeEventListener(a,n)})};k1.forEach(s=>{t.addEventListener(s,n)})}function oD(t){return Object.assign({onClick:t},cD(t))}function cD(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let j1=0;function So(){return j1+=1,String(j1)}function $w(){document.body.classList.add("fc-not-allowed")}function Bw(){document.body.classList.remove("fc-not-allowed")}function aU(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Ug)}function rU(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Ug)}function lU(t){t.addEventListener("contextmenu",Ug)}function oU(t){t.removeEventListener("contextmenu",Ug)}function cU(t){let e=[],n=[],s,a;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),s=0;s<n.length;s+=1)a=n[s],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function dU(t,e,n){let s,a;for(s=0;s<n.length;s+=1)if(a=mU(t,e,n[s]),a)return a;return 0}function mU(t,e,n){return n.func?n.func(t,e):uU(t[n.field],e[n.field])*(n.order||1)}function uU(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function xc(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function am(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((s,a,l)=>s.replace("$"+l,a||""),t):n}function hU(t,e){return t-e}function Bh(t){return t%1===0}function pU(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const N1=["years","months","days","milliseconds"],gU=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Jt(t,e){return typeof t=="string"?fU(t):typeof t=="object"&&t?C1(t):typeof t=="number"?C1({[e||"milliseconds"]:t}):null}function fU(t){let e=gU.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function C1(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function vU(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function oy(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function xU(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function yU(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function bU(t){return yc(t)/365}function wU(t){return yc(t)/30}function yc(t){return ma(t)/864e5}function ma(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function qw(t,e){let n=null;for(let s=0;s<N1.length;s+=1){let a=N1[s];if(e[a]){let l=t[a]/e[a];if(!Bh(l)||n!==null&&n!==l)return null;n=l}else if(t[a])return null}return n}function cy(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function vl(t,e,n){if(t===e)return!0;let s=t.length,a;if(s!==e.length)return!1;for(a=0;a<s;a+=1)if(!(n?n(t[a],e[a]):t[a]===e[a]))return!1;return!0}const kU=["sun","mon","tue","wed","thu","fri","sat"];function S1(t,e){let n=il(t);return n[2]+=e*7,ls(n)}function vi(t,e){let n=il(t);return n[2]+=e,ls(n)}function xl(t,e){let n=il(t);return n[6]+=e,ls(n)}function jU(t,e){return _o(t,e)/7}function _o(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function NU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function CU(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function SU(t,e){return(e.valueOf()-t.valueOf())/1e3}function _U(t,e){let n=On(t),s=On(e);return{years:0,months:0,days:Math.round(_o(n,s)),milliseconds:e.valueOf()-s.valueOf()-(t.valueOf()-n.valueOf())}}function EU(t,e){let n=$p(t,e);return n!==null&&n%7===0?n/7:null}function $p(t,e){return sl(t)===sl(e)?Math.round(_o(t,e)):null}function On(t){return ls([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function TU(t){return ls([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function AU(t){return ls([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function DU(t){return ls([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function RU(t,e,n){let s=t.getUTCFullYear(),a=Ov(t,s,e,n);if(a<1)return Ov(t,s-1,e,n);let l=Ov(t,s+1,e,n);return l>=1?Math.min(a,l):a}function Ov(t,e,n,s){let a=ls([e,0,1+PU(e,n,s)]),l=On(t),o=Math.round(_o(a,l));return Math.floor(o/7)+1}function PU(t,e,n){let s=7+e-n;return-((7+ls([t,0,s]).getUTCDay()-e)%7)+s-1}function _1(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function E1(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function il(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function ls(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function dD(t){return!isNaN(t.valueOf())}function sl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function mD(t,e,n=!1){let s=t.toISOString();return s=s.replace(".000",""),n&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",zw(e,!0)))),s}function Hw(t){return t.toISOString().replace(/T.*$/,"")}function MU(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function IU(t){return xc(t.getUTCHours(),2)+":"+xc(t.getUTCMinutes(),2)+":"+xc(t.getUTCSeconds(),2)}function zw(t,e=!1){let n=t<0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),l=Math.round(s%60);return e?`${n+xc(a,2)}:${xc(l,2)}`:`GMT${n}${a}${l?`:${xc(l,2)}`:""}`}function qt(t,e,n){let s,a;return function(...l){if(!s)a=t.apply(this,l);else if(!vl(s,l)){let o=t.apply(this,l);(!e||!e(o,a))&&(a=o)}return s=l,a}}function qh(t,e,n){let s,a;return l=>(s?ga(s,l)||(a=t.call(this,l)):a=t.call(this,l),s=l,a)}const Fv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Bp={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},ah=/\s*([ap])\.?m\.?/i,OU=/,/g,FU=/\s+/g,LU=/\u200e/g,$U=/UTC|GMT/;class BU{constructor(e){let n={},s={},a=9;for(let l in e)l in Fv?(s[l]=e[l],Fv[l]<9&&(a=Math.min(Fv[l],a))):(n[l]=e[l],l in Bp&&(a=Math.min(Bp[l],a)));this.standardDateProps=n,this.extendedSettings=s,this.smallestUnitNum=a,this.buildFormattingFunc=qt(T1)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,s,a){let{standardDateProps:l,extendedSettings:o}=this,c=WU(e.marker,n.marker,s.calendarSystem);if(!c)return this.format(e,s);let d=c;d>1&&(l.year==="numeric"||l.year==="2-digit")&&(l.month==="numeric"||l.month==="2-digit")&&(l.day==="numeric"||l.day==="2-digit")&&(d=1);let m=this.format(e,s),u=this.format(n,s);if(m===u)return m;let p=KU(l,d),h=T1(p,o,s),g=h(e),x=h(n),v=GU(m,g,u,x),y=o.separator||a||s.defaultSeparator||"";return v?v.before+g+y+x+v.after:m+y+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function T1(t,e,n){let s=Object.keys(t).length;return s===1&&t.timeZoneName==="short"?a=>zw(a.timeZoneOffset):s===0&&e.week?a=>UU(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,e.week):qU(t,e,n)}function qU(t,e,n){t=Object.assign({},t),e=Object.assign({},e),HU(t,e),t.timeZone="UTC";let s=new Intl.DateTimeFormat(n.locale.codes,t),a;if(e.omitZeroMinute){let l=Object.assign({},t);delete l.minute,a=new Intl.DateTimeFormat(n.locale.codes,l)}return l=>{let{marker:o}=l,c;a&&!o.getUTCMinutes()?c=a:c=s;let d=c.format(o);return zU(d,l,t,e,n)}}function HU(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function zU(t,e,n,s,a){return t=t.replace(LU,""),n.timeZoneName==="short"&&(t=VU(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":zw(e.timeZoneOffset))),s.omitCommas&&(t=t.replace(OU,"").trim()),s.omitZeroMinute&&(t=t.replace(":00","")),s.meridiem===!1?t=t.replace(ah,"").trim():s.meridiem==="narrow"?t=t.replace(ah,(l,o)=>o.toLocaleLowerCase()):s.meridiem==="short"?t=t.replace(ah,(l,o)=>`${o.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(t=t.replace(ah,l=>l.toLocaleLowerCase())),t=t.replace(FU," "),t=t.trim(),t}function VU(t,e){let n=!1;return t=t.replace($U,()=>(n=!0,e)),n||(t+=` ${e}`),t}function UU(t,e,n,s,a){let l=[];return a==="long"?l.push(n):(a==="short"||a==="narrow")&&l.push(e),(a==="long"||a==="short")&&l.push(" "),l.push(s.simpleNumberFormat.format(t)),s.options.direction==="rtl"&&l.reverse(),l.join("")}function WU(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:sl(t)!==sl(e)?1:0}function KU(t,e){let n={};for(let s in t)(!(s in Bp)||Bp[s]<=e)&&(n[s]=t[s]);return n}function GU(t,e,n,s){let a=0;for(;a<t.length;){let l=t.indexOf(e,a);if(l===-1)break;let o=t.substr(0,l);a=l+e.length;let c=t.substr(a),d=0;for(;d<n.length;){let m=n.indexOf(s,d);if(m===-1)break;let u=n.substr(0,m);d=m+s.length;let p=n.substr(d);if(o===u&&c===p)return{before:o,after:c}}}return null}function A1(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function qp(t,e,n,s){let a=A1(t,n.calendarSystem),l=e?A1(e,n.calendarSystem):null;return{date:a,start:a,end:l,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:s||n.defaultSeparator}}class YU{constructor(e){this.cmdStr=e}format(e,n,s){return n.cmdFormatter(this.cmdStr,qp(e,null,n,s))}formatRange(e,n,s,a){return s.cmdFormatter(this.cmdStr,qp(e,n,s,a))}}class QU{constructor(e){this.func=e}format(e,n,s){return this.func(qp(e,null,n,s))}formatRange(e,n,s,a){return this.func(qp(e,n,s,a))}}function Vn(t){return typeof t=="object"&&t?new BU(t):typeof t=="string"?new YU(t):typeof t=="function"?new QU(t):null}const D1={navLinkDayClick:Me,navLinkWeekClick:Me,duration:Jt,bootstrapFontAwesome:Me,buttonIcons:Me,customButtons:Me,defaultAllDayEventDuration:Jt,defaultTimedEventDuration:Jt,nextDayThreshold:Jt,scrollTime:Jt,scrollTimeReset:Boolean,slotMinTime:Jt,slotMaxTime:Jt,dayPopoverFormat:Vn,slotDuration:Jt,snapDuration:Jt,headerToolbar:Me,footerToolbar:Me,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Vn,dayHeaderClassNames:Me,dayHeaderContent:Me,dayHeaderDidMount:Me,dayHeaderWillUnmount:Me,dayCellClassNames:Me,dayCellContent:Me,dayCellDidMount:Me,dayCellWillUnmount:Me,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Me,weekNumbers:Boolean,weekNumberClassNames:Me,weekNumberContent:Me,weekNumberDidMount:Me,weekNumberWillUnmount:Me,editable:Boolean,viewClassNames:Me,viewDidMount:Me,viewWillUnmount:Me,nowIndicator:Boolean,nowIndicatorSnap:Me,nowIndicatorClassNames:Me,nowIndicatorContent:Me,nowIndicatorDidMount:Me,nowIndicatorWillUnmount:Me,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Me,locale:Me,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Me,eventOrder:cU,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Me,contentHeight:Me,direction:String,weekNumberFormat:Vn,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Me,initialDate:Me,now:Me,eventDataTransform:Me,stickyHeaderDates:Me,stickyFooterScrollbar:Me,viewHeight:Me,defaultAllDay:Boolean,eventSourceFailure:Me,eventSourceSuccess:Me,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Me,eventConstraint:Me,eventAllow:Me,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Me,eventContent:Me,eventDidMount:Me,eventWillUnmount:Me,selectConstraint:Me,selectOverlap:Me,selectAllow:Me,droppable:Boolean,unselectCancel:String,slotLabelFormat:Me,slotLaneClassNames:Me,slotLaneContent:Me,slotLaneDidMount:Me,slotLaneWillUnmount:Me,slotLabelClassNames:Me,slotLabelContent:Me,slotLabelDidMount:Me,slotLabelWillUnmount:Me,dayMaxEvents:Me,dayMaxEventRows:Me,dayMinWidth:Number,slotLabelInterval:Jt,allDayText:String,allDayClassNames:Me,allDayContent:Me,allDayDidMount:Me,allDayWillUnmount:Me,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Vn,rerenderDelay:Number,moreLinkText:Me,moreLinkHint:Me,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Me,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Jt,hiddenDays:Me,fixedWeekCount:Boolean,validRange:Me,visibleRange:Me,titleFormat:Me,eventInteractive:Boolean,noEventsText:String,viewHint:Me,navLinkHint:Me,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Me,moreLinkClassNames:Me,moreLinkContent:Me,moreLinkDidMount:Me,moreLinkWillUnmount:Me,monthStartFormat:Vn,handleCustomRendering:Me,customRenderingMetaMap:Me,customRenderingReplaces:Boolean},rm={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},R1={datesSet:Me,eventsSet:Me,eventAdd:Me,eventChange:Me,eventRemove:Me,windowResize:Me,eventClick:Me,eventMouseEnter:Me,eventMouseLeave:Me,select:Me,unselect:Me,loading:Me,_unmount:Me,_beforeprint:Me,_afterprint:Me,_noEventDrop:Me,_noEventResize:Me,_resize:Me,_scrollRequest:Me},P1={buttonText:Me,buttonHints:Me,views:Me,plugins:Me,initialEvents:Me,events:Me,eventSources:Me},Ll={headerToolbar:$l,footerToolbar:$l,buttonText:$l,buttonHints:$l,buttonIcons:$l,dateIncrement:$l,plugins:rh,events:rh,eventSources:rh,resources:rh};function $l(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?ga(t,e):t===e}function rh(t,e){return Array.isArray(t)&&Array.isArray(e)?vl(t,e):t===e}const ZU={type:String,component:Me,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Me,usesMinMaxTime:Boolean,classNames:Me,content:Me,didMount:Me,willUnmount:Me};function Lv(t){return Uw(t,Ll)}function Vw(t,e){let n={},s={};for(let a in e)a in t&&(n[a]=e[a](t[a]));for(let a in t)a in e||(s[a]=t[a]);return{refined:n,extra:s}}function Me(t){return t}const{hasOwnProperty:Hp}=Object.prototype;function Uw(t,e){let n={};if(e){for(let s in e)if(e[s]===$l){let a=[];for(let l=t.length-1;l>=0;l-=1){let o=t[l][s];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){n[s]=o;break}}a.length&&(n[s]=Uw(a))}}for(let s=t.length-1;s>=0;s-=1){let a=t[s];for(let l in a)l in n||(n[l]=a[l])}return n}function lo(t,e){let n={};for(let s in t)e(t[s],s)&&(n[s]=t[s]);return n}function Tr(t,e){let n={};for(let s in t)n[s]=e(t[s],s);return n}function uD(t){let e={};for(let n of t)e[n]=!0;return e}function Ww(t){let e=[];for(let n in t)e.push(t[n]);return e}function ga(t,e){if(t===e)return!0;for(let n in t)if(Hp.call(t,n)&&!(n in e))return!1;for(let n in e)if(Hp.call(e,n)&&t[n]!==e[n])return!1;return!0}const XU=/^on[A-Z]/;function JU(t,e){const n=eW(t,e);for(let s of n)if(!XU.test(s))return!1;return!0}function eW(t,e){let n=[];for(let s in t)Hp.call(t,s)&&(s in e||n.push(s));for(let s in e)Hp.call(e,s)&&t[s]!==e[s]&&n.push(s);return n}function $v(t,e,n={}){if(t===e)return!0;for(let s in e)if(!(s in t&&tW(t[s],e[s],n[s])))return!1;for(let s in t)if(!(s in e))return!1;return!0}function tW(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function nW(t,e=0,n,s=1){let a=[];n==null&&(n=Object.keys(t).length);for(let l=e;l<n;l+=s){let o=t[l];o!==void 0&&a.push(o)}return a}let hD={};function iW(t,e){hD[t]=e}function sW(t){return new hD[t]}class aW{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return ls(e)}markerToArray(e){return il(e)}}iW("gregory",aW);const rW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function lW(t){let e=rW.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(dD(n)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class oW{constructor(e){let n=this.timeZone=e.timeZone,s=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=sW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):ls(_1(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=ls(e)),n===null||!dD(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=lW(e);if(n===null)return null;let{marker:s}=n,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:s,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n.years,s[1]+=n.months,s[2]+=n.days,s[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]-=n.years,s[1]-=n.months,s[2]-=n.days,s[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n,this.calendarSystem.arrayToMarker(s)}addMonths(e,n){let s=this.calendarSystem.markerToArray(e);return s[1]+=n,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,n){let{calendarSystem:s}=this;return sl(e)===sl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)&&s.getMarkerMonth(e)===s.getMarkerMonth(n)?s.getMarkerYear(n)-s.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:s}=this;return sl(e)===sl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)?s.getMarkerMonth(n)-s.getMarkerMonth(e)+(s.getMarkerYear(n)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let s=this.diffWholeYears(e,n);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,n),s!==null?{unit:"month",value:s}:(s=EU(e,n),s!==null?{unit:"week",value:s}:(s=$p(e,n),s!==null?{unit:"day",value:s}:(s=NU(e,n),Bh(s)?{unit:"hour",value:s}:(s=CU(e,n),Bh(s)?{unit:"minute",value:s}:(s=SU(e,n),Bh(s)?{unit:"second",value:s}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,s){let a;return s.years&&(a=this.diffWholeYears(e,n),a!==null)?a/bU(s):s.months&&(a=this.diffWholeMonths(e,n),a!==null)?a/wU(s):s.days&&(a=$p(e,n),a!==null)?a/yc(s):(n.valueOf()-e.valueOf())/ma(s)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?On(e):n==="hour"?TU(e):n==="minute"?AU(e):n==="second"?DU(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):RU(e,this.weekDow,this.weekDoy)}format(e,n,s={}){return n.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,s,a={}){return a.isEndExclusive&&(n=xl(n,-1)),s.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)}formatIso(e,n={}){let s=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?s=n.forcedTzo:s=this.offsetForMarker(e)),mD(e,s,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?ls(_1(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):ls(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-E1(il(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(il(e)):null}toDate(e,n){return this.timeZone==="local"?E1(il(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(il(e))*1e3*60):new Date(e.valueOf()-(n||0))}}let iu=class{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,s;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(s in e)n[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let s;return n&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}};iu.prototype.classes={};iu.prototype.iconClasses={};iu.prototype.baseIconClass="";iu.prototype.iconOverridePrefix="";function zp(t){t();let e=Bt.debounceRendering,n=[];function s(a){n.push(a)}for(Bt.debounceRendering=s,Sm(ke(cW,{}),document.createElement("div"));n.length;)n.shift()();Bt.debounceRendering=e}class cW extends Ss{render(){return ke("div",{})}componentDidMount(){this.setState({})}}function pD(t){let e=PV(t),n=e.Provider;return e.Provider=function(){let s=!this.getChildContext,a=n.apply(this,arguments);if(s){let l=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&l.forEach(c=>{c.context=o.value,c.forceUpdate()})},this.sub=o=>{l.push(o);let c=o.componentWillUnmount;o.componentWillUnmount=()=>{l.splice(l.indexOf(o),1),c&&c.call(o)}}}return a},e}class dW{constructor(e,n,s,a){this.execFunc=e,this.emitter=n,this.scrollTime=s,this.scrollTimeReset=a,this.handleScrollRequest=l=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},l),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Or=pD({});function mW(t,e,n,s,a,l,o,c,d,m,u,p,h,g){return{dateEnv:a,nowManager:l,options:n,pluginHooks:c,emitter:u,dispatch:d,getCurrentData:m,calendarApi:p,viewSpec:t,viewApi:e,dateProfileGenerator:s,theme:o,isRtl:n.direction==="rtl",addResizeHandler(x){u.on("_resize",x)},removeResizeHandler(x){u.off("_resize",x)},createScrollResponder(x){return new dW(x,u,Jt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:g}}class Eo extends Ss{shouldComponentUpdate(e,n){return!$v(this.props,e,this.propEquality)||!$v(this.state,n,this.stateEquality)}safeSetState(e){$v(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Eo.addPropsEquality=uW;Eo.addStateEquality=hW;Eo.contextType=Or;Eo.prototype.propEquality={};Eo.prototype.stateEquality={};class jn extends Eo{}jn.contextType=Or;function uW(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function hW(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Ua(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class Kw extends jn{constructor(){super(...arguments),this.id=So(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:s}=this.props;(!n.customRenderingReplaces||!dy(s,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Ua(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:s}=n,{customGenerator:a,defaultGenerator:l,renderProps:o}=e,c=gD(e,[],this.handleEl);let d=!1,m,u=[],p;if(a!=null){const h=typeof a=="function"?a(o,ke):a;if(h===!0)d=!0;else{const g=h&&typeof h=="object";g&&"html"in h?c.dangerouslySetInnerHTML={__html:h.html}:g&&"domNodes"in h?u=Array.prototype.slice.call(h.domNodes):(g?$A(h):typeof h!="function")?m=h:p=h}}else d=!dy(e.generatorName,s);return d&&l&&(m=l(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=p,ke(e.elTag,c,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:s,context:a}=this,{handleCustomRendering:l,customRenderingMetaMap:o}=a.options;if(l){const c=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o?.[s.generatorName];c&&l(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},s),{elClasses:(s.elClasses||[]).filter(pW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,s=this.base;if(!vl(e,n)){n.forEach(Lw);for(let a of e)s.appendChild(a);this.currentDomNodes=e}}}Kw.addPropsEquality({elClasses:vl,elStyle:ga,elAttrs:JU,renderProps:ga});function dy(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function gD(t,e,n){const s=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(s.className=(t.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),t.elStyle&&(s.style=t.elStyle),s}function pW(t){return!!t}const fD=pD(0);class Ps extends Ss{constructor(){super(...arguments),this.InnerContent=gW.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Ua(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=fW(e.classNameGenerator,e.renderProps);if(e.children){const s=gD(e,n,this.handleEl),a=e.children(this.InnerContent,e.renderProps,s);return e.elTag?ke(e.elTag,s,a):a}else return ke(Kw,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Ps.contextType=fD;function gW(t,e){const n=t.props;return ke(Kw,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function fW(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Vp extends jn{render(){let{props:e,context:n}=this,{options:s}=n,a={view:n.viewApi};return ke(Ps,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...vD(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function vD(t){return[`fc-${t.type}-view`,"fc-view"]}function vW(t,e){let n=null,s=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(s=e.createMarker(t.end)),!n&&!s||n&&s&&s<n?null:{start:n,end:s}}function M1(t,e){let n=[],{start:s}=e,a,l;for(t.sort(xW),a=0;a<t.length;a+=1)l=t[a],l.start>s&&n.push({start:s,end:l.start}),l.end>s&&(s=l.end);return s<e.end&&n.push({start:s,end:e.end}),n}function xW(t,e){return t.start.valueOf()-e.start.valueOf()}function oo(t,e){let{start:n,end:s}=t,a=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(n===null||s===null||n<s)&&(a={start:n,end:s}),a}function yW(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Gw(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Wg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Nr(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function bW(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function xD(t){let e=Math.floor(_o(t.start,t.end))||1,n=On(t.start),s=vi(n,e);return{start:n,end:s}}function yD(t,e=Jt(0)){let n=null,s=null;if(t.end){s=On(t.end);let a=t.end.valueOf()-s.valueOf();a&&a>=ma(e)&&(s=vi(s,1))}return t.start&&(n=On(t.start),s&&s<=n&&(s=vi(n,1))),{start:n,end:s}}function sc(t,e,n,s){return s==="year"?Jt(n.diffWholeYears(t,e),"year"):s==="month"?Jt(n.diffWholeMonths(t,e),"month"):_U(t,e)}class bD{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,s){let{dateEnv:a}=this.props,l=a.subtract(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(l,-1,s)}buildNext(e,n,s){let{dateEnv:a}=this.props,l=a.add(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(l,1,s)}build(e,n,s=!0){let{props:a}=this,l,o,c,d,m,u;return l=this.buildValidRange(),l=this.trimHiddenDays(l),s&&(e=bW(e,l)),o=this.buildCurrentRangeInfo(e,n),c=/^(year|month|week|day)$/.test(o.unit),d=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,c),d=this.trimHiddenDays(d),m=d,a.showNonCurrentDates||(m=oo(m,o.range)),m=this.adjustActiveRange(m),m=oo(m,l),u=Gw(o.range,l),Nr(d,e)||(e=d.start),{currentDate:e,validRange:l,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:c,activeRange:m,renderRange:d,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:s}=this,a=null,l=null,o=null,c;return s.duration?(a=s.duration,l=s.durationUnit,o=this.buildRangeFromDuration(e,n,a,l)):(c=this.props.dayCount)?(l="day",o=this.buildRangeFromDayCount(e,n,c)):(o=this.buildCustomVisibleRange(e))?l=s.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),l=cy(a).unit,o=this.buildRangeFromDuration(e,n,a,l)),{duration:a,unit:l,range:o}}getFallbackDuration(){return Jt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:s,slotMinTime:a,slotMaxTime:l}=this.props,{start:o,end:c}=e;return s&&(yc(a)<0&&(o=On(o),o=n.add(o,a)),yc(l)>1&&(c=On(c),c=vi(c,-1),c=n.add(c,l))),{start:o,end:c}}buildRangeFromDuration(e,n,s,a){let{dateEnv:l,dateAlignment:o}=this.props,c,d,m;if(!o){let{dateIncrement:p}=this.props;p&&ma(p)<ma(s)?o=cy(p).unit:o=a}yc(s)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,n),c=On(c));function u(){c=l.startOf(e,o),d=l.add(c,s),m={start:c,end:d}}return u(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,n),u()),m}buildRangeFromDayCount(e,n,s){let{dateEnv:a,dateAlignment:l}=this.props,o=0,c=e,d;l&&(c=a.startOf(c,l)),c=On(c),c=this.skipHiddenDays(c,n),d=c;do d=vi(d,1),this.isHiddenDay(d)||(o+=1);while(o<s);return{start:c,end:d}}buildCustomVisibleRange(e){let{props:n}=this,s=n.visibleRangeInput,a=typeof s=="function"?s.call(n.calendarApi,n.dateEnv.toDate(e)):s,l=this.refineRange(a);return l&&(l.start==null||l.end==null)?null:l}buildRenderRange(e,n,s){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,s;return n||((s=this.props.dateAlignment)?Jt(1,s):e||Jt({days:1}))}refineRange(e){if(e){let n=vW(e,this.props.dateEnv);return n&&(n=yD(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],s=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(n[a]=e.indexOf(a)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:s}=e;return n&&(n=this.skipHiddenDays(n)),s&&(s=this.skipHiddenDays(s,-1,!0)),n==null||s==null||n<s?{start:n,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?n:0)+7)%7];)e=vi(e,n);return e}}function Yw(t,e,n,s){return{instanceId:So(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:s??null}}function wW(t,e,n,s){for(let a=0;a<s.length;a+=1){let l=s[a].parse(t,n);if(l){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=l.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:l.duration,typeData:l.typeData,typeId:a}}}return null}function co(t,e,n){let{dateEnv:s,pluginHooks:a,options:l}=n,{defs:o,instances:c}=t;c=lo(c,d=>!o[d.defId].recurringDef);for(let d in o){let m=o[d];if(m.recurringDef){let{duration:u}=m.recurringDef;u||(u=m.allDay?l.defaultAllDayEventDuration:l.defaultTimedEventDuration);let p=kW(m,u,e,s,a.recurringTypes);for(let h of p){let g=Yw(d,{start:h,end:s.add(h,u)});c[g.instanceId]=g}}}return{defs:o,instances:c}}function kW(t,e,n,s,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:s.subtract(n.start,e),end:n.end},s);return t.allDay&&(o=o.map(On)),o}const Hh={id:String,groupId:String,title:String,url:String,interactive:Boolean},wD={start:Me,end:Me,date:Me,allDay:Boolean},jW=Object.assign(Object.assign(Object.assign({},Hh),wD),{extendedProps:Me});function kD(t,e,n,s,a=Qw(n),l,o){let{refined:c,extra:d}=jD(t,n,a),m=CW(e,n),u=wW(c,m,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let h=my(c,d,e?e.sourceId:"",u.allDay,!!u.duration,n,l);return h.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:h,instance:null}}let p=NW(c,m,n,s);if(p){let h=my(c,d,e?e.sourceId:"",p.allDay,p.hasEnd,n,l),g=Yw(h.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return o&&h.publicId&&o[h.publicId]&&(g.instanceId=o[h.publicId]),{def:h,instance:g}}return null}function jD(t,e,n=Qw(e)){return Vw(t,n)}function Qw(t){return Object.assign(Object.assign(Object.assign({},Up),jW),t.pluginHooks.eventRefiners)}function my(t,e,n,s,a,l,o){let c={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||So(),sourceId:n,allDay:s,hasEnd:a,interactive:t.interactive,ui:Wp(t,l),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let d of l.pluginHooks.eventDefMemberAdders)Object.assign(c,d(t));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function NW(t,e,n,s){let{allDay:a}=t,l,o=null,c=!1,d,m=null,u=t.start!=null?t.start:t.date;if(l=n.dateEnv.createMarkerMeta(u),l)o=l.marker;else if(!s)return null;return t.end!=null&&(d=n.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!l||l.isTimeUnspecified)&&(!d||d.isTimeUnspecified)),a&&o&&(o=On(o)),d&&(m=d.marker,a&&(m=On(m)),o&&m<=o&&(m=null)),m?c=!0:s||(c=n.options.forceEventDuration||!1,m=n.dateEnv.add(o,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:c,range:{start:o,end:m},forcedStartTzo:l?l.forcedTzo:null,forcedEndTzo:d?d.forcedTzo:null}}function CW(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function _m(t,e,n,s,a,l){let o=_s(),c=Qw(n);for(let d of t){let m=kD(d,e,n,s,c,a,l);m&&uy(m,o)}return o}function uy(t,e=_s()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function Zw(t,e){let n=t.instances[e];if(n){let s=t.defs[n.defId],a=Kg(t,l=>SW(s,l));return a.defs[s.defId]=s,a.instances[n.instanceId]=n,a}return _s()}function SW(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function _s(){return{defs:{},instances:{}}}function Xw(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Kg(t,e){let n=lo(t.defs,e),s=lo(t.instances,a=>n[a.defId]);return{defs:n,instances:s}}function _W(t,e){let{defs:n,instances:s}=t,a={},l={};for(let o in n)e.defs[o]||(a[o]=n[o]);for(let o in s)!e.instances[o]&&a[s[o].defId]&&(l[o]=s[o]);return{defs:a,instances:l}}function EW(t,e){return Array.isArray(t)?_m(t,null,e,!0):typeof t=="object"&&t?_m([t],null,e,!0):t!=null?String(t):null}function I1(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Up={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Me,overlap:Me,allow:Me,className:I1,classNames:I1,color:String,backgroundColor:String,borderColor:String,textColor:String},TW={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Wp(t,e){let n=EW(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function ND(t){return t.reduce(AW,TW)}function AW(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const DW={id:String,defaultAllDay:Boolean,url:String,format:String,events:Me,eventDataTransform:Me,success:Me,failure:Me};function CD(t,e,n=SD(e)){let s;if(typeof t=="string"?s={url:t}:typeof t=="function"||Array.isArray(t)?s={events:t}:typeof t=="object"&&t&&(s=t),s){let{refined:a,extra:l}=Vw(s,n),o=RW(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:So(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Wp(a,e),extendedProps:l}}return null}function SD(t){return Object.assign(Object.assign(Object.assign({},Up),DW),t.pluginHooks.eventSourceRefiners)}function RW(t,e){let n=e.pluginHooks.eventSourceDefs;for(let s=n.length-1;s>=0;s-=1){let l=n[s].parseMeta(t);if(l)return{sourceDefId:s,meta:l}}return null}function PW(t,e,n,s,a){switch(e.type){case"RECEIVE_EVENTS":return MW(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return IW(t,n[e.sourceId],e.rawEvents,s.activeRange,a);case"ADD_EVENTS":return OW(t,e.eventStore,s?s.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Xw(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?co(t,s.activeRange,a):t;case"REMOVE_EVENTS":return _W(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return ED(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kg(t,l=>!l.sourceId);case"REMOVE_ALL_EVENTS":return _s();default:return t}}function MW(t,e,n,s,a,l){if(e&&n===e.latestFetchId){let o=_m(_D(a,e,l),e,l);return s&&(o=co(o,s,l)),Xw(ED(t,e.sourceId),o)}return t}function IW(t,e,n,s,a){const{defIdMap:l,instanceIdMap:o}=LW(t);let c=_m(_D(n,e,a),e,a,!1,l,o);return co(c,s,a)}function _D(t,e,n){let s=n.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=O1(t,a)),s&&(t=O1(t,s)),t}function O1(t,e){let n;if(!e)n=t;else{n=[];for(let s of t){let a=e(s);a?n.push(a):a==null&&n.push(s)}}return n}function OW(t,e,n,s){return n&&(e=co(e,n,s)),Xw(t,e)}function F1(t,e,n){let{defs:s}=t,a=Tr(t.instances,l=>s[l.defId].allDay?l:Object.assign(Object.assign({},l),{range:{start:n.createMarker(e.toDate(l.range.start,l.forcedStartTzo)),end:n.createMarker(e.toDate(l.range.end,l.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:l.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:l.forcedEndTzo}));return{defs:s,instances:a}}function ED(t,e){return Kg(t,n=>n.sourceId!==e)}function FW(t,e){return{defs:t.defs,instances:lo(t.instances,n=>!e[n.instanceId])}}function LW(t){const{defs:e,instances:n}=t,s={},a={};for(let l in e){const o=e[l],{publicId:c}=o;c&&(s[c]=l)}for(let l in n){const o=n[l],c=e[o.defId],{publicId:d}=c;d&&(a[d]=l)}return{defIdMap:s,instanceIdMap:a}}let Gg=class{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){$W(this.handlers,e,n)}off(e,n){BW(this.handlers,e,n)}trigger(e,...n){let s=this.handlers[e]||[],a=this.options&&this.options[e],l=[].concat(a||[],s);for(let o of l)o.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}};function $W(t,e,n){(t[e]||(t[e]=[])).push(n)}function BW(t,e,n){n?t[e]&&(t[e]=t[e].filter(s=>s!==n)):delete t[e]}const qW={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function HW(t,e){return _m(zW(t),null,e)}function zW(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},qW),n)),e}function TD(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},Jw(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function VW(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Jw(t,e){let n={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(n,s(t,e));return Object.assign(n,sK(t,e.dateEnv)),n}function L1(t,e,n){let{dateEnv:s,options:a}=n,l=e;return t?(l=On(l),l=s.add(l,a.defaultAllDayEventDuration)):l=s.add(l,a.defaultTimedEventDuration),l}function ek(t,e,n,s){let a=Kp(t.defs,e),l=_s();for(let o in t.defs){let c=t.defs[o];l.defs[o]=UW(c,a[o],n,s)}for(let o in t.instances){let c=t.instances[o],d=l.defs[c.defId];l.instances[o]=WW(c,d,a[c.defId],n,s)}return l}function UW(t,e,n,s){let a=n.standardProps||{};a.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);let l=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});n.extendedProps&&(l.extendedProps=Object.assign(Object.assign({},l.extendedProps),n.extendedProps));for(let o of s.pluginHooks.eventDefMutationAppliers)o(l,n,s);return!l.hasEnd&&s.options.forceEventDuration&&(l.hasEnd=!0),l}function WW(t,e,n,s,a){let{dateEnv:l}=a,o=s.standardProps&&s.standardProps.allDay===!0,c=s.standardProps&&s.standardProps.hasEnd===!1,d=Object.assign({},t);return o&&(d.range=xD(d.range)),s.datesDelta&&n.startEditable&&(d.range={start:l.add(d.range.start,s.datesDelta),end:l.add(d.range.end,s.datesDelta)}),s.startDelta&&n.durationEditable&&(d.range={start:l.add(d.range.start,s.startDelta),end:d.range.end}),s.endDelta&&n.durationEditable&&(d.range={start:d.range.start,end:l.add(d.range.end,s.endDelta)}),c&&(d.range={start:d.range.start,end:L1(e.allDay,d.range.start,a)}),e.allDay&&(d.range={start:On(d.range.start),end:On(d.range.end)}),d.range.end<d.range.start&&(d.range.end=L1(e.allDay,d.range.start,a)),d}class Xo{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class zn{constructor(e,n,s){this._context=e,this._def=n,this._instance=s||null}setProp(e,n){if(e in wD)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=Hh[e](n),this.mutate({standardProps:{publicId:n}});else if(e in Hh)n=Hh[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Up){let s=Up[e](n);e==="color"?s={backgroundColor:n,borderColor:n}:e==="editable"?s={startEditable:n,durationEditable:n}:s={[e]:n},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:s}=this._context,a=s.createMarker(e);if(a&&this._instance){let l=this._instance.range,o=sc(l.start,a,s,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,n={}){let{dateEnv:s}=this._context,a;if(!(e!=null&&(a=s.createMarker(e),!a))&&this._instance)if(a){let l=sc(this._instance.range.end,a,s,n.granularity);this.mutate({endDelta:l})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,s={}){let{dateEnv:a}=this._context,l={allDay:s.allDay},o=a.createMarker(e),c;if(o&&!(n!=null&&(c=a.createMarker(n),!c))&&this._instance){let d=this._instance.range;s.allDay===!0&&(d=xD(d));let m=sc(d.start,o,a,s.granularity);if(c){let u=sc(d.end,c,a,s.granularity);vU(m,u)?this.mutate({datesDelta:m,standardProps:l}):this.mutate({startDelta:m,endDelta:u,standardProps:l})}else l.hasEnd=!1,this.mutate({datesDelta:m,standardProps:l})}}moveStart(e){let n=Jt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Jt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Jt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let s={allDay:e},{maintainDuration:a}=n;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=a),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:n}=this._context,s=this._instance,a=Vn(e);return this._def.hasEnd?n.formatRange(s.range.start,s.range.end,a,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):n.format(s.range.start,a,{forcedTzo:s.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let s=this._def,a=this._context,{eventStore:l}=a.getCurrentData(),o=Zw(l,n.instanceId);o=ek(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let d=new zn(a,s,n);this._def=o.defs[s.defId],this._instance=o.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:d,event:this,relatedEvents:Ql(o,a,n),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:l})}})}}remove(){let e=this._context,n=AD(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Xo(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:s}=n,{startStr:a,endStr:l}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),a&&(o.start=a),l&&(o.end=l),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),s.display&&s.display!=="auto"&&(o.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?o.color=s.backgroundColor:(s.backgroundColor&&(o.backgroundColor=s.backgroundColor),s.borderColor&&(o.borderColor=s.borderColor)),s.textColor&&(o.textColor=s.textColor),s.classNames.length&&(o.classNames=s.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function AD(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Ql(t,e,n){let{defs:s,instances:a}=t,l=[],o=n?n.instanceId:"";for(let c in a){let d=a[c],m=s[d.defId];d.instanceId!==o&&l.push(new zn(e,m,d))}return l}function $1(t,e,n,s){let a={},l={},o={},c=[],d=[],m=Kp(t.defs,e);for(let u in t.defs){let p=t.defs[u];m[p.defId].display==="inverse-background"&&(p.groupId?(a[p.groupId]=[],o[p.groupId]||(o[p.groupId]=p)):l[u]=[])}for(let u in t.instances){let p=t.instances[u],h=t.defs[p.defId],g=m[h.defId],x=p.range,v=!h.allDay&&s?yD(x,s):x,y=oo(v,n);y&&(g.display==="inverse-background"?h.groupId?a[h.groupId].push(y):l[p.defId].push(y):g.display!=="none"&&(g.display==="background"?c:d).push({def:h,ui:g,instance:p,range:y,isStart:v.start&&v.start.valueOf()===y.start.valueOf(),isEnd:v.end&&v.end.valueOf()===y.end.valueOf()}))}for(let u in a){let p=a[u],h=M1(p,n);for(let g of h){let x=o[u],v=m[x.defId];c.push({def:x,ui:v,instance:null,range:g,isStart:!1,isEnd:!1})}}for(let u in l){let p=l[u],h=M1(p,n);for(let g of h)c.push({def:t.defs[u],ui:m[u],instance:null,range:g,isStart:!1,isEnd:!1})}return{bg:c,fg:d}}function KW(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function B1(t,e){t.fcSeg=e}function Lc(t){return t.fcSeg||t.parentNode.fcSeg||null}function Kp(t,e){return Tr(t,n=>DD(n,e))}function DD(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),ND(n)}function RD(t,e){let n=t.map(GW);return n.sort((s,a)=>dU(s,a,e)),n.map(s=>s._seg)}function GW(t){let{eventRange:e}=t,n=e.def,s=e.instance?e.instance.range:e.range,a=s.start?s.start.valueOf():0,l=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:a,end:l,duration:l-a,allDay:Number(n.allDay),_seg:t})}function YW(t,e){let{pluginHooks:n}=e,s=n.isDraggableTransformers,{def:a,ui:l}=t.eventRange,o=l.startEditable;for(let c of s)o=c(o,a,l,e);return o}function QW(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function ZW(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function PD(t,e,n,s,a,l,o){let{dateEnv:c,options:d}=n,{displayEventTime:m,displayEventEnd:u}=d,p=t.eventRange.def,h=t.eventRange.instance;m==null&&(m=s!==!1),u==null&&(u=a!==!1);let g=h.range.start,x=h.range.end,v=t.start||t.eventRange.range.start,y=t.end||t.eventRange.range.end,b=On(g).valueOf()===On(v).valueOf(),k=On(xl(x,-1)).valueOf()===On(xl(y,-1)).valueOf();return m&&!p.allDay&&(b||k)?(v=b?g:v,y=k?x:y,u&&p.hasEnd?c.formatRange(v,y,e,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):c.format(v,e,{forcedTzo:h.forcedStartTzo})):""}function ml(t,e,n){let s=t.eventRange.range;return{isPast:s.end<=(n||e.start),isFuture:s.start>=(n||e.end),isToday:e&&Nr(e,s.start)}}function XW(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function MD(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function ID(t,e){let{def:n,instance:s}=t.eventRange,{url:a}=n;if(a)return{href:a};let{emitter:l,options:o}=e,{eventInteractive:c}=o;return c==null&&(c=n.interactive,c==null&&(c=!!l.hasHandlers("eventClick"))),c?cD(d=>{l.trigger("eventClick",{el:d.target,event:new zn(e,n,s),jsEvent:d,view:e.viewApi})}):{}}const JW={start:Me,end:Me,allDay:Boolean};function eK(t,e,n){let s=tK(t,e),{range:a}=s;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=e.add(a.start,n)}return s}function tK(t,e){let{refined:n,extra:s}=Vw(t,JW),a=n.start?e.createMarkerMeta(n.start):null,l=n.end?e.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=a&&a.isTimeUnspecified&&(!l||l.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:l?l.marker:null},allDay:o},s)}function nK(t,e){return yW(t.range,e.range)&&t.allDay===e.allDay&&iK(t,e)}function iK(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function sK(t,e){return Object.assign(Object.assign({},FD(t.range,e,t.allDay)),{allDay:t.allDay})}function OD(t,e,n){return Object.assign(Object.assign({},FD(t,e,n)),{timeZone:e.timeZone})}function FD(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function aK(t,e,n){let s=jD({editable:!1},n),a=my(s.refined,s.extra,"",t.allDay,!0,n);return{def:a,ui:DD(a,e),instance:Yw(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function rK(t,e,n){let s=!1,a=function(c){s||(s=!0,e(c))},l=function(c){s||(s=!0,n(c))},o=t(a,l);o&&typeof o.then=="function"&&o.then(a,l)}class q1 extends Error{constructor(e,n){super(e),this.response=n}}function lK(t,e,n){t=t.toUpperCase();const s={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(s.body=new URLSearchParams(n),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(a=>{if(a.ok)return a.json().then(l=>[l,a],()=>{throw new q1("Failure parsing JSON",a)});throw new q1("Request failed",a)})}let Bv;function LD(){return Bv==null&&(Bv=oK()),Bv}function oK(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class cK extends jn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{zp(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{zp(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:s}=this.state,a=s||n.height==="auto"||n.contentHeight==="auto",l=!a&&n.height!=null?n.height:"",o=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return LD()||o.push("fc-liquid-hack"),e.children(o,l,a,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class id{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function dK(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function tk(t){return{[t.component.uid]:t}}const hy={};class sd extends Ss{constructor(e,n){super(e,n),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,s=n.nowManager.getDateMarker(),{nowIndicatorSnap:a}=n.options;a==="auto"&&(a=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let l,o;return a?(l=n.dateEnv.startOf(s,e.unit),o=n.dateEnv.add(l,Jt(1,e.unit)).valueOf()-s.valueOf()):(l=s,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:l,todayRange:mK(l)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}sd.contextType=Or;function mK(t){let e=On(t),n=vi(e,1);return{start:e,end:n}}class uK{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let s=this.getCurrentData(),a;n=n||"day",a=s.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:s}=this.getCurrentData(),a=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),l,o;for(let c in n)a.push(c);for(l=0;l<a.length;l+=1)if(o=n[a[l]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),s=Jt(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),Vn(n))}formatRange(e,n,s){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(n),Vn(s),s)}formatIso(e,n){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:n})}select(e,n){let s;n==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:n};let a=this.getCurrentData(),l=eK(s,a.dateEnv,Jt({days:1}));l&&(this.dispatch({type:"SELECT_DATES",selection:l}),TD(l,null,a))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),VW(e,n))}addEvent(e,n){if(e instanceof zn){let o=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:uy({def:o,instance:c})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),a;if(n instanceof Xo)a=n.internalEventSource;else if(typeof n=="boolean")n&&([a]=Ww(s.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;a=o.internalEventSource}let l=kD(e,a,s,!1);if(l){let o=new zn(s,l.def,l.def.recurringDef?null:l.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:uy(l)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:AD(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:s,instances:a}=n.eventStore;e=String(e);for(let l in s){let o=s[l];if(o.publicId===e){if(o.recurringDef)return new zn(n,o,null);for(let c in a){let d=a[c];if(d.defId===o.defId)return new zn(n,o,d)}}}return null}getEvents(){let e=this.getCurrentData();return Ql(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,s=[];for(let a in n)s.push(new Xo(e,n[a]));return s}getEventSourceById(e){let n=this.getCurrentData(),s=n.eventSources;e=String(e);for(let a in s)if(s[a].publicId===e)return new Xo(n,s[a]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Xo)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=CD(e,n);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Xo(n,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Jt(e);n&&this.trigger("_scrollRequest",{time:n})}}function hK(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function $D(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function pK(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function gK(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function fK(t,e){return{left:t.left-e.left,top:t.top-e.top}}const qv=_s();class vK{constructor(){this.getKeysForEventDefs=qt(this._getKeysForEventDefs),this.splitDateSelection=qt(this._splitDateSpan),this.splitEventStore=qt(this._splitEventStore),this.splitIndividualUi=qt(this._splitIndividualUi),this.splitEventDrag=qt(this._splitInteraction),this.splitEventResize=qt(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),s=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),l=this.splitIndividualUi(e.eventUiBases,s),o=this.splitEventStore(e.eventStore,s),c=this.splitEventDrag(e.eventDrag),d=this.splitEventResize(e.eventResize),m={};this.eventUiBuilders=Tr(n,(u,p)=>this.eventUiBuilders[p]||qt(xK));for(let u in n){let p=n[u],h=o[u]||qv,g=this.eventUiBuilders[u];m[u]={businessHours:p.businessHours||e.businessHours,dateSelection:a[u]||null,eventStore:h,eventUiBases:g(e.eventUiBases[""],p.ui,l[u]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:c[u]||null,eventResize:d[u]||null}}return m}_splitDateSpan(e){let n={};if(e){let s=this.getKeysForDateSpan(e);for(let a of s)n[a]=e}return n}_getKeysForEventDefs(e){return Tr(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:s,instances:a}=e,l={};for(let o in s)for(let c of n[o])l[c]||(l[c]=_s()),l[c].defs[o]=s[o];for(let o in a){let c=a[o];for(let d of n[c.defId])l[d]&&(l[d].instances[o]=c)}return l}_splitIndividualUi(e,n){let s={};for(let a in e)if(a)for(let l of n[a])s[l]||(s[l]={}),s[l][a]=e[a];return s}_splitInteraction(e){let n={};if(e){let s=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),l=this._splitEventStore(e.mutatedEvents,a),o=c=>{n[c]||(n[c]={affectedEvents:s[c]||qv,mutatedEvents:l[c]||qv,isEvent:e.isEvent})};for(let c in s)o(c);for(let c in l)o(c)}return n}}function xK(t,e,n){let s=[];t&&s.push(t),e&&s.push(e);let a={"":ND(s)};return n&&Object.assign(a,n),a}function BD(t,e,n,s){return{dow:t.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!Nr(s.activeRange,t))),isOther:!!(s&&!Nr(s.currentRange,t)),isToday:!!(e&&Nr(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function nk(t,e){let n=["fc-day",`fc-day-${kU[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const yK=Vn({year:"numeric",month:"long",day:"numeric"}),bK=Vn({week:"long"});function Gp(t,e,n="day",s=!0){const{dateEnv:a,options:l,calendarApi:o}=t;let c=a.format(e,n==="week"?bK:yK);if(l.navLinks){let d=a.toDate(e);const m=u=>{let p=n==="day"?l.navLinkDayClick:n==="week"?l.navLinkWeekClick:null;typeof p=="function"?p.call(o,a.toDate(e),u):(typeof p=="string"&&(n=p),o.zoomTo(e,n))};return Object.assign({title:am(l.navLinkHint,[c,d],c),"data-navlink":""},s?oD(m):{onClick:m})}return{"aria-label":c}}let Hv=null;function wK(){return Hv===null&&(Hv=kK()),Hv}function kK(){let t=document.createElement("div");sm(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return Lw(t),n}let zv;function jK(){return zv||(zv=NK()),zv}function NK(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=qD(t);return document.body.removeChild(t),e}function qD(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function CK(t,e=!1){let n=window.getComputedStyle(t),s=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,l=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,c=qD(t),d=c.y-s-a,m=c.x-l-o,u={borderLeft:s,borderRight:a,borderTop:l,borderBottom:o,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return wK()&&n.direction==="rtl"?u.scrollbarLeft=d:u.scrollbarRight=d,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function SK(t,e=!1,n){let s=ik(t),a=CK(t,e),l={left:s.left+a.borderLeft+a.scrollbarLeft,right:s.right-a.borderRight-a.scrollbarRight,top:s.top+a.borderTop,bottom:s.bottom-a.borderBottom-a.scrollbarBottom};return e&&(l.left+=a.paddingLeft,l.right-=a.paddingRight,l.top+=a.paddingTop,l.bottom-=a.paddingBottom),l}function ik(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function _K(t){let e=HD(t),n=t.getBoundingClientRect();for(let s of e){let a=$D(n,s.getBoundingClientRect());if(a)n=a;else return null}return n}function HD(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class $c{constructor(e,n,s,a){this.els=n;let l=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(l.left),a&&this.buildElVerticals(l.top)}buildElHorizontals(e){let n=[],s=[];for(let a of this.els){let l=a.getBoundingClientRect();n.push(l.left-e),s.push(l.right-e)}this.lefts=n,this.rights=s}buildElVerticals(e){let n=[],s=[];for(let a of this.els){let l=a.getBoundingClientRect();n.push(l.top-e),s.push(l.bottom-e)}this.tops=n,this.bottoms=s}leftToIndex(e){let{lefts:n,rights:s}=this,a=n.length,l;for(l=0;l<a;l+=1)if(e>=n[l]&&e<s[l])return l}topToIndex(e){let{tops:n,bottoms:s}=this,a=n.length,l;for(l=0;l<a;l+=1)if(e>=n[l]&&e<s[l])return l}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return lh(this.tops||[],e.tops||[])&&lh(this.bottoms||[],e.bottoms||[])&&lh(this.lefts||[],e.lefts||[])&&lh(this.rights||[],e.rights||[])}}function lh(t,e){const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(Math.round(t[s])!==Math.round(e[s]))return!1;return!0}class sk{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class EK extends sk{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class TK extends sk{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Qa extends jn{constructor(){super(...arguments),this.uid=So()}prepareHits(){}queryHit(e,n,s,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Ii(e,".fc-event-mirror")}isValidDateDownEl(e){return!Ii(e,".fc-event:not(.fc-bg-event)")&&!Ii(e,".fc-more-link")&&!Ii(e,"a[data-navlink]")&&!Ii(e,".fc-popover")}}class zD{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let s of e)this.insertEntry(s,n);return n}insertEntry(e,n){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,s){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},n),{span:ak(n.span,e.touchingEntry.span)});s.push(a),this.splitEntry(n,e.touchingEntry,s)}else s.push(n)}splitEntry(e,n,s){let a=e.span,l=n.span;a.start<l.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:l.start}},s),a.end>l.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.end,end:a.end}},s)}insertEntryAt(e,n){let{entriesByLevel:s,levelCoords:a}=this;n.lateral===-1?(Vv(a,n.level,n.levelCoord),Vv(s,n.level,[e])):Vv(s[n.level],n.lateral,e),this.stackCnts[Zl(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:s,strictOrder:a,stackCnts:l}=this,o=n.length,c=0,d=-1,m=-1,u=null,p=0;for(let x=0;x<o;x+=1){const v=n[x];if(!a&&v>=c+this.getEntryThickness(e))break;let y=s[x],b,k=gy(y,e.span.start,py),w=k[0]+k[1];for(;(b=y[w])&&b.span.start<e.span.end;){let S=v+this.getEntryThickness(b);S>c&&(c=S,u=b,d=x,m=w),S===c&&(p=Math.max(p,l[Zl(b)]+1)),w+=1}}let h=0;if(u)for(h=d+1;h<o&&n[h]<c;)h+=1;let g=-1;return h<o&&n[h]===c&&(g=gy(s[h],e.span.end,py)[0]),{touchingLevel:d,touchingLateral:m,touchingEntry:u,stackCnt:p,levelCoord:c,level:h,lateral:g}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,s=e.length,a=[];for(let l=0;l<s;l+=1){let o=e[l],c=n[l];for(let d of o)a.push(Object.assign(Object.assign({},d),{thickness:this.getEntryThickness(d),levelCoord:c}))}return a}}function py(t){return t.span.end}function Zl(t){return t.index+":"+t.span.start}function AK(t){let e=[];for(let n of t){let s=[],a={span:n.span,entries:[n]};for(let l of e)ak(l.span,a.span)?a={entries:l.entries.concat(a.entries),span:DK(l.span,a.span)}:s.push(l);s.push(a),e=s}return e}function DK(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function ak(t,e){let n=Math.max(t.start,e.start),s=Math.min(t.end,e.end);return n<s?{start:n,end:s}:null}function Vv(t,e,n){t.splice(e,0,n)}function gy(t,e,n){let s=0,a=t.length;if(!a||e<n(t[s]))return[0,0];if(e>n(t[a-1]))return[a,0];for(;s<a;){let l=Math.floor(s+(a-s)/2),o=n(t[l]);if(e<o)a=l;else if(e>o)s=l+1;else return[l,1]}return[s,0]}class RK{constructor(e,n){this.emitter=new Gg}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const rk={};function PK(t,e){return!t||e>10?Vn({weekday:"short"}):e>1?Vn({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Vn({weekday:"long"})}const VD="fc-col-header-cell";function UD(t){return t.text}class MK extends jn{render(){let{dateEnv:e,options:n,theme:s,viewApi:a}=this.context,{props:l}=this,{date:o,dateProfile:c}=l,d=BD(o,l.todayRange,null,c),m=[VD].concat(nk(d,s)),u=e.format(o,l.dayHeaderFormat),p=!d.isDisabled&&l.colCnt>1?Gp(this.context,o):{},h=e.toDate(o);e.namedTimeZoneImpl&&(h=xl(h,36e5));let g=Object.assign(Object.assign(Object.assign({date:h,view:a},l.extraRenderProps),{text:u}),d);return ke(Ps,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:l.colSpan,"data-date":d.isDisabled?void 0:Hw(o)},l.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:UD,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},x=>ke("div",{className:"fc-scrollgrid-sync-inner"},!d.isDisabled&&ke(x,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",l.isSticky&&"fc-sticky"]})))}}const IK=Vn({weekday:"long"});class OK extends jn{render(){let{props:e}=this,{dateEnv:n,theme:s,viewApi:a,options:l}=this.context,o=vi(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},d=n.format(o,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:o},c),{view:a}),e.extraRenderProps),{text:d});return ke(Ps,{elTag:"th",elClasses:[VD,...nk(c,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:l.dayHeaderContent,defaultGenerator:UD,classNameGenerator:l.dayHeaderClassNames,didMount:l.dayHeaderDidMount,willUnmount:l.dayHeaderWillUnmount},u=>ke("div",{className:"fc-scrollgrid-sync-inner"},ke(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,IK)}})))}}class WD extends jn{constructor(){super(...arguments),this.createDayHeaderFormatter=qt(FK)}render(){let{context:e}=this,{dates:n,dateProfile:s,datesRepDistinctDays:a,renderIntro:l}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,n.length);return ke(sd,{unit:"day"},(c,d)=>ke("tr",{role:"row"},l&&l("day"),n.map(m=>a?ke(MK,{key:m.toISOString(),date:m,dateProfile:s,todayRange:d,colCnt:n.length,dayHeaderFormat:o}):ke(OK,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:o}))))}}function FK(t,e,n){return t||PK(e,n)}class KD{constructor(e,n){let s=e.start,{end:a}=e,l=[],o=[],c=-1;for(;s<a;)n.isHiddenDay(s)?l.push(c+.5):(c+=1,l.push(c),o.push(s)),s=vi(s,1);this.dates=o,this.indices=l,this.cnt=o.length}sliceRange(e){let n=this.getDateDayIndex(e.start),s=this.getDateDayIndex(vi(e.end,-1)),a=Math.max(0,n),l=Math.min(this.cnt-1,s);return a=Math.ceil(a),l=Math.floor(l),a<=l?{firstIndex:a,lastIndex:l,isStart:n===a,isEnd:s===l}:null}getDateDayIndex(e){let{indices:n}=this,s=Math.floor(_o(this.dates[0],e));return s<0?n[0]-1:s>=n.length?n[n.length-1]+1:n[s]}}class GD{constructor(e,n){let{dates:s}=e,a,l,o;if(n){for(l=s[0].getUTCDay(),a=1;a<s.length&&s[a].getUTCDay()!==l;a+=1);o=Math.ceil(s.length/a)}else o=1,a=s.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let s=[];for(let a=0;a<this.colCnt;a+=1)s.push(this.buildCell(n,a));e.push(s)}return e}buildCell(e,n){let s=this.daySeries.dates[e*this.colCnt+n];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,s=this.daySeries.sliceRange(e),a=[];if(s){let{firstIndex:l,lastIndex:o}=s,c=l;for(;c<=o;){let d=Math.floor(c/n),m=Math.min((d+1)*n,o+1);a.push({row:d,firstCol:c%n,lastCol:(m-1)%n,isStart:s.isStart&&c===l,isEnd:s.isEnd&&m-1===o}),c=m}}return a}}class YD{constructor(){this.sliceBusinessHours=qt(this._sliceBusinessHours),this.sliceDateSelection=qt(this._sliceDateSpan),this.sliceEventStore=qt(this._sliceEventStore),this.sliceEventDrag=qt(this._sliceInteraction),this.sliceEventResize=qt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,s,a,...l){let{eventUiBases:o}=e,c=this.sliceEventStore(e.eventStore,o,n,s,...l);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,s,o,a,...l),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,s,a,...l),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,n,s,...l),eventResize:this.sliceEventResize(e.eventResize,o,n,s,...l),eventSelection:e.eventSelection}}sliceNowDate(e,n,s,a,...l){return this._sliceDateSpan({range:{start:e,end:xl(e,1)},allDay:!1},n,s,{},a,...l)}_sliceBusinessHours(e,n,s,a,...l){return e?this._sliceEventStore(co(e,oh(n,!!s),a),{},n,s,...l).bg:[]}_sliceEventStore(e,n,s,a,...l){if(e){let o=$1(e,n,oh(s,!!a),a);return{bg:this.sliceEventRanges(o.bg,l),fg:this.sliceEventRanges(o.fg,l)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,s,a,...l){if(!e)return null;let o=$1(e.mutatedEvents,n,oh(s,!!a),a);return{segs:this.sliceEventRanges(o.fg,l),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,s,a,l,...o){if(!e)return[];let c=oh(n,!!s),d=oo(e.range,c);if(d){e=Object.assign(Object.assign({},e),{range:d});let m=aK(e,a,l),u=this.sliceRange(e.range,...o);for(let p of u)p.eventRange=m;return u}return[]}sliceEventRanges(e,n){let s=[];for(let a of e)s.push(...this.sliceEventRange(a,n));return s}sliceEventRange(e,n){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:vi(s.start,1)});let a=this.sliceRange(s,...n);for(let l of a)l.eventRange=e,l.isStart=e.isStart&&l.isStart,l.isEnd=e.isEnd&&l.isEnd;return a}}function oh(t,e){let n=t.activeRange;return e?n:{start:xl(n.start,t.slotMinTime.milliseconds),end:xl(n.end,t.slotMaxTime.milliseconds-864e5)}}function QD(t,e,n){let{instances:s}=t.mutatedEvents;for(let a in s)if(!Wg(e.validRange,s[a].range))return!1;return ZD({eventDrag:t},n)}function LK(t,e,n){return Wg(e.validRange,t.range)?ZD({dateSelection:t},n):!1}function ZD(t,e){let n=e.getCurrentData(),s=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||$K)(s,e)}function $K(t,e,n={},s){return!(t.eventDrag&&!BK(t,e,n,s)||t.dateSelection&&!qK(t,e,n,s))}function BK(t,e,n,s){let a=e.getCurrentData(),l=t.eventDrag,o=l.mutatedEvents,c=o.defs,d=o.instances,m=Kp(c,l.isEvent?t.eventUiBases:{"":a.selectionConfig});s&&(m=Tr(m,s));let u=FW(t.eventStore,l.affectedEvents.instances),p=u.defs,h=u.instances,g=Kp(p,t.eventUiBases);for(let x in d){let v=d[x],y=v.range,b=m[v.defId],k=c[v.defId];if(!XD(b.constraints,y,u,t.businessHours,e))return!1;let{eventOverlap:w}=e.options,S=typeof w=="function"?w:null;for(let T in h){let N=h[T];if(Gw(y,N.range)&&(g[N.defId].overlap===!1&&l.isEvent||b.overlap===!1||S&&!S(new zn(e,p[N.defId],N),new zn(e,k,v))))return!1}let j=a.eventStore;for(let T of b.allows){let N=Object.assign(Object.assign({},n),{range:v.range,allDay:k.allDay}),_=j.defs[k.defId],A=j.instances[x],P;if(_?P=new zn(e,_,A):P=new zn(e,k),!T(Jw(N,e),P))return!1}}return!0}function qK(t,e,n,s){let a=t.eventStore,l=a.defs,o=a.instances,c=t.dateSelection,d=c.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!XD(m.constraints,d,a,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,p=typeof u=="function"?u:null;for(let h in o){let g=o[h];if(Gw(d,g.range)&&(m.overlap===!1||p&&!p(new zn(e,l[g.defId],g),null)))return!1}for(let h of m.allows){let g=Object.assign(Object.assign({},n),c);if(!h(Jw(g,e),null))return!1}return!0}function XD(t,e,n,s,a){for(let l of t)if(!zK(HK(l,e,n,s,a),e))return!1;return!0}function HK(t,e,n,s,a){return t==="businessHours"?Uv(co(s,e,a)):typeof t=="string"?Uv(Kg(n,l=>l.groupId===t)):typeof t=="object"&&t?Uv(co(t,e,a)):[]}function Uv(t){let{instances:e}=t,n=[];for(let s in e)n.push(e[s].range);return n}function zK(t,e){for(let n of t)if(Wg(n,e))return!0;return!1}const ch=/^(visible|hidden)$/;class VK extends jn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Ua(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:s}=e,a=n&&s,l=["fc-scroller"];return n&&(s?l.push("fc-scroller-liquid-absolute"):l.push("fc-scroller-liquid")),ke("div",{ref:this.handleEl,className:l.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(ch.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(ch.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return ch.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return ch.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class gr{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,s)=>{let{depths:a,currentMap:l}=this,o=!1,c=!1;n!==null?(o=s in l,l[s]=n,a[s]=(a[s]||0)+1,c=!0):(a[s]-=1,a[s]||(delete l[s],delete this.callbackMap[s],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(s)),c&&this.masterCallback(n,String(s)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),n}collect(e,n,s){return nW(this.currentMap,e,n,s)}getAll(){return Ww(this.currentMap)}}function UK(t){let e=eU(t,".fc-scrollgrid-shrink"),n=0;for(let s of e)n=Math.max(n,pU(s));return Math.ceil(n)}function JD(t,e){return t.liquid&&e.liquid}function WK(t,e){return e.maxHeight!=null||JD(t,e)}function KK(t,e,n,s){let{expandRows:a}=n;return typeof e.content=="function"?e.content(n):ke("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,ke(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function GK(t,e){return vl(t,e,ga)}function YK(t,e){let n=[];for(let s of t){let a=s.span||1;for(let l=0;l<a;l+=1)n.push(ke("col",{style:{width:s.width==="shrink"?QK(e):s.width||"",minWidth:s.minWidth||""}}))}return ke("colgroup",{},...n)}function QK(t){return t??4}function ZK(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function XK(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function JK(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function fy(t){return ke("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Yp(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function eR(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class lk extends jn{constructor(){super(...arguments),this.processCols=qt(e=>e,GK),this.renderMicroColGroup=qt(YK),this.scrollerRefs=new gr,this.scrollerElRefs=new gr(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:s}=this,a=e.sections||[],l=this.processCols(e.cols),o=this.renderMicroColGroup(l,n.shrinkWidth),c=XK(e.liquid,s);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let d=a.length,m=0,u,p=[],h=[],g=[];for(;m<d&&(u=a[m]).type==="header";)p.push(this.renderSection(u,o,!0)),m+=1;for(;m<d&&(u=a[m]).type==="body";)h.push(this.renderSection(u,o,!1)),m+=1;for(;m<d&&(u=a[m]).type==="footer";)g.push(this.renderSection(u,o,!0)),m+=1;let x=!LD();const v={role:"rowgroup"};return ke("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!x&&p.length)&&ke("thead",v,...p),!!(!x&&h.length)&&ke("tbody",v,...h),!!(!x&&g.length)&&ke("tfoot",v,...g),x&&ke("tbody",v,...p,...h,...g))}renderSection(e,n,s){return"outerContent"in e?ke(In,{key:e.key},e.outerContent):ke("tr",{key:e.key,role:"presentation",className:JK(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,s))}renderChunkTd(e,n,s,a){if("outerContent"in s)return s.outerContent;let{props:l}=this,{forceYScrollbars:o,scrollerClientWidths:c,scrollerClientHeights:d}=this.state,m=WK(l,e),u=JD(l,e),p=l.liquid?o?"scroll":m?"auto":"hidden":"visible",h=e.key,g=KK(e,s,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!l.collapsibleWidth&&c[h]!==void 0?c[h]:null,clientHeight:d[h]!==void 0?d[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return ke(a?"th":"td",{ref:s.elRef,role:"presentation"},ke("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},ke(VK,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:p,overflowX:l.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},g)))}_handleScrollerEl(e,n){let s=eG(this.props.sections,n);s&&Ua(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return ZK(this.props.cols)?UK(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=jK(),{scrollerRefs:n,scrollerElRefs:s}=this,a=!1,l={},o={};for(let c in n.currentMap){let d=n.currentMap[c];if(d&&d.needsYScrolling()){a=!0;break}}for(let c of this.props.sections){let d=c.key,m=s.currentMap[d];if(m){let u=m.parentNode;l[d]=Math.floor(u.getBoundingClientRect().width-(a?e.y:0)),o[d]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:l,scrollerClientHeights:o}}}lk.addStateEquality({scrollerClientWidths:ga,scrollerClientHeights:ga});function eG(t,e){for(let n of t)if(n.key===e)return n;return null}class ok extends jn{constructor(){super(...arguments),this.buildPublicEvent=qt((e,n,s)=>new zn(e,n,s)),this.handleEl=e=>{this.el=e,Ua(this.props.elRef,e),e&&B1(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{eventRange:l}=a,{ui:o}=l,c={event:this.buildPublicEvent(n,l.def,l.instance),view:n.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&YW(a,n),isStartResizable:!e.disableResizing&&QW(a,n),isEndResizable:!e.disableResizing&&ZW(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return ke(Ps,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...XW(c),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&B1(this.el,this.props.seg)}}class ck extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{ui:l}=a.eventRange,o=s.eventTimeFormat||e.defaultTimeFormat,c=PD(a,o,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return ke(ok,Object.assign({},e,{elTag:"a",elStyle:{borderColor:l.borderColor,backgroundColor:l.backgroundColor},elAttrs:ID(a,n),defaultGenerator:tG,timeText:c}),(d,m)=>ke(In,null,ke(d,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&ke("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&ke("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}ck.addPropsEquality({seg:ga});function tG(t){return ke("div",{className:"fc-event-main-frame"},t.timeText&&ke("div",{className:"fc-event-time"},t.timeText),ke("div",{className:"fc-event-title-container"},ke("div",{className:"fc-event-title fc-sticky"},t.event.title||ke(In,null,""))))}const dk=t=>ke(Or.Consumer,null,e=>{let{options:n}=e,s={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return ke(Ps,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:s,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),nG=Vn({day:"numeric"});class mk extends jn{constructor(){super(...arguments),this.refineRenderProps=qh(iG)}render(){let{props:e,context:n}=this,{options:s}=n,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:s.monthStartFormat});return ke(Ps,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":Hw(e.date)}),elClasses:[...nk(a,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function uk(t){return!!(t.dayCellContent||dy("dayCellContent",t))}function iG(t){let{date:e,dateEnv:n,dateProfile:s,isMonthStart:a}=t,l=BD(e,t.todayRange,null,s),o=t.showDayNumber?n.format(e,a?t.monthStartFormat:nG):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},l),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class tR extends jn{render(){let{props:e}=this,{seg:n}=e;return ke(ok,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:sG,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function sG(t){let{title:e}=t.event;return e&&ke("div",{className:"fc-event-title"},t.event.title)}function nR(t){return ke("div",{className:`fc-${t}`})}const iR=t=>ke(Or.Consumer,null,e=>{let{dateEnv:n,options:s}=e,{date:a}=t,l=s.weekNumberFormat||t.defaultFormat,o=n.computeWeekNumber(a),c=n.format(a,l),d={num:o,text:c,date:a};return ke(Ps,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:d,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:aG,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},t.children)});function aG(t){return t.text}const Wv=10;class rG extends jn{constructor(){super(...arguments),this.state={titleId:Vg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Ua(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=rD(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:s,state:a}=this,l=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return BV(ke("div",Object.assign({},s.extraAttrs,{id:s.id,className:l.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),ke("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},ke("span",{className:"fc-popover-title",id:a.titleId},s.title),ke("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),ke("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:s}=this.props,{rootEl:a}=this,l=_K(n);if(l){let o=a.getBoundingClientRect(),c=s?Ii(n,".fc-scrollgrid").getBoundingClientRect().top:l.top,d=e?l.right-o.width:l.left;c=Math.max(c,Wv),d=Math.min(d,document.documentElement.clientWidth-Wv-o.width),d=Math.max(d,Wv);let m=a.offsetParent.getBoundingClientRect();sm(a,{top:c-m.top,left:d-m.left})}}}class lG extends Qa{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:s}=this,{startDate:a,todayRange:l,dateProfile:o}=s,c=n.format(a,e.dayPopoverFormat);return ke(mk,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:l},(d,m,u)=>ke(rG,{elRef:u.ref,id:s.id,title:c,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},uk(e)&&ke(d,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,n,s,a){let{rootEl:l,props:o}=this;return e>=0&&e<s&&n>=0&&n<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:l,rect:{left:0,top:0,right:s,bottom:a},layer:1}:null}}class sR extends jn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Vg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Ua(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:s}=this,{moreLinkClick:a}=s.options,l=H1(n).start;function o(c){let{def:d,instance:m,range:u}=c.eventRange;return{event:new zn(s,d,m),start:s.dateEnv.toDate(u.start),end:s.dateEnv.toDate(u.end),isStart:c.isStart,isEnd:c.isEnd}}typeof a=="function"&&(a=a({date:l,allDay:!!n.allDayDate,allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:e,view:s.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&s.calendarApi.zoomTo(l,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return ke(Or.Consumer,null,s=>{let{viewApi:a,options:l,calendarApi:o}=s,{moreLinkText:c}=l,{moreCnt:d}=e,m=H1(e),u=typeof c=="function"?c.call(o,d):`+${d} ${c}`,p=am(l.moreLinkHint,[d],u),h={num:d,shortText:`+${d}`,text:u,view:a};return ke(In,null,!!e.moreCnt&&ke(Ps,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),oD(this.handleClick)),{title:p,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:l.moreLinkContent,defaultGenerator:e.defaultGenerator||oG,classNameGenerator:l.moreLinkClassNames,didMount:l.moreLinkDidMount,willUnmount:l.moreLinkWillUnmount},e.children),n.isPopoverOpen&&ke(lG,{id:n.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ii(this.linkEl,".fc-view-harness"))}}function oG(t){return t.text}function H1(t){if(t.allDayDate)return{start:t.allDayDate,end:vi(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:aR(e),end:dG(e)}}function aR(t){return t.reduce(cG).eventRange.range.start}function cG(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function dG(t){return t.reduce(mG).eventRange.range.end}function mG(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class uG{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class hG extends uG{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let s=!1;e.isActive?(n.set(e.id,e),s=!0):n.has(e.id)&&(n.delete(e.id),s=!0),s&&this.set(n)}}const pG=[],rR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},lR=Object.assign(Object.assign({},rR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function gG(t){let e=t.length>0?t[0].code:"en",n=pG.concat(t),s={en:lR};for(let a of n)s[a.code]=a;return{map:s,defaultCode:e}}function oR(t,e){return typeof t=="object"&&!Array.isArray(t)?cR(t.code,[t.code],t):fG(t,e)}function fG(t,e){let n=[].concat(t||[]),s=vG(n,e)||lR;return cR(t,n,s)}function vG(t,e){for(let n=0;n<t.length;n+=1){let s=t[n].toLocaleLowerCase().split("-");for(let a=s.length;a>0;a-=1){let l=s.slice(0,a).join("-");if(e[l])return e[l]}}return null}function cR(t,e,n){let s=Uw([rR,n],["buttonText"]);delete s.code;let{week:a}=s;return delete s.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:s}}function Fr(t){return{id:So(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function xG(t,e){let n={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(l){for(let o of l){const c=o.name,d=n[c];d===void 0?(n[c]=o.id,a(o.deps),s=bG(s,o)):d!==o.id&&console.warn(`Duplicate plugin '${c}'`)}}return t&&a(t),a(e),s}function yG(){let t=[],e=[],n;return(s,a)=>((!n||!vl(s,t)||!vl(a,e))&&(n=xG(s,a)),t=s,e=a,n)}function bG(t,e){return{premiumReleaseDate:wG(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function wG(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Nl extends iu{}Nl.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Nl.prototype.baseIconClass="fc-icon";Nl.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Nl.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Nl.prototype.iconOverrideOption="buttonIcons";Nl.prototype.iconOverrideCustomButtonOption="icon";Nl.prototype.iconOverridePrefix="fc-icon-";function kG(t,e){let n={},s;for(s in t)vy(s,n,t,e);for(s in e)vy(s,n,t,e);return n}function vy(t,e,n,s){if(e[t])return e[t];let a=jG(t,e,n,s);return a&&(e[t]=a),a}function jG(t,e,n,s){let a=n[t],l=s[t],o=u=>a&&a[u]!==null?a[u]:l&&l[u]!==null?l[u]:null,c=o("component"),d=o("superType"),m=null;if(d){if(d===t)throw new Error("Can't have a custom view type that references itself");m=vy(d,e,n,s)}return!c&&m&&(c=m.component),c?{type:t,component:c,defaults:Object.assign(Object.assign({},m?m.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),l?l.rawOptions:{})}:null}function z1(t){return Tr(t,NG)}function NG(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=V1(e):n&&!(n.prototype instanceof jn)&&(n=V1(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function V1(t){return e=>ke(Or.Consumer,null,n=>ke(Ps,{elTag:"div",elClasses:vD(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function CG(t,e,n,s){let a=z1(t),l=z1(e.views),o=kG(a,l);return Tr(o,c=>SG(c,l,e,n,s))}function SG(t,e,n,s,a){let l=t.overrides.duration||t.defaults.duration||s.duration||n.duration,o=null,c="",d="",m={};if(l&&(o=_G(l),o)){let h=cy(o);c=h.unit,h.value===1&&(d=c,m=e[c]?e[c].rawOptions:{})}let u=h=>{let g=h.buttonText||{},x=t.defaults.buttonTextKey;return x!=null&&g[x]!=null?g[x]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null},p=h=>{let g=h.buttonHints||{},x=t.defaults.buttonTextKey;return x!=null&&g[x]!=null?g[x]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null};return{type:t.type,component:t.component,duration:o,durationUnit:c,singleUnit:d,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},m),t.overrides),buttonTextOverride:u(s)||u(n)||t.overrides.buttonText,buttonTextDefault:u(a)||t.defaults.buttonText||u(rm)||t.type,buttonTitleOverride:p(s)||p(n)||t.overrides.buttonHint,buttonTitleDefault:p(a)||t.defaults.buttonHint||p(rm)}}let U1={};function _G(t){let e=JSON.stringify(t),n=U1[e];return n===void 0&&(n=Jt(t),U1[e]=n),n}function EG(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function TG(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function AG(t,e,n){let s=t.initialDate;return s!=null?e.createMarker(s):n.getDateMarker()}function DG(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function RG(t,e,n,s){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||n);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(a=s.buildPrev(t,n),a.isValid)return a;break;case"NEXT":if(a=s.buildNext(t,n),a.isValid)return a;break}return t}function PG(t,e,n){let s=e?e.activeRange:null;return mR({},BG(t,n),s,n)}function MG(t,e,n,s){let a=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return mR(t,e.sources,a,s);case"REMOVE_EVENT_SOURCE":return OG(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?uR(t,a,s):t;case"FETCH_EVENT_SOURCES":return hk(t,e.sourceIds?uD(e.sourceIds):hR(t,s),a,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return $G(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function IG(t,e,n){let s=e?e.activeRange:null;return hk(t,hR(t,n),s,!0,n)}function dR(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function mR(t,e,n,s){let a={};for(let l of e)a[l.sourceId]=l;return n&&(a=uR(a,n,s)),Object.assign(Object.assign({},t),a)}function OG(t,e){return lo(t,n=>n.sourceId!==e)}function uR(t,e,n){return hk(t,lo(t,s=>FG(s,e,n)),e,!1,n)}function FG(t,e,n){return pR(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function hk(t,e,n,s,a){let l={};for(let o in t){let c=t[o];e[o]?l[o]=LG(c,n,s,a):l[o]=c}return l}function LG(t,e,n,s){let{options:a,calendarApi:l}=s,o=s.pluginHooks.eventSourceDefs[t.sourceDefId],c=So();return o.fetch({eventSource:t,range:e,isRefetch:n,context:s},d=>{let{rawEvents:m}=d;a.eventSourceSuccess&&(m=a.eventSourceSuccess.call(l,m,d.response)||m),t.success&&(m=t.success.call(l,m,d.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:c,fetchRange:e,rawEvents:m})},d=>{let m=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(l,d),m=!0),t.failure&&(t.failure(d),m=!0),m||console.warn(d.message,d),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:c,fetchRange:e,error:d})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:c})}function $G(t,e,n,s){let a=t[e];return a&&n===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:s})}):t}function hR(t,e){return lo(t,n=>pR(n,e))}function BG(t,e){let n=SD(e),s=[].concat(t.eventSources||[]),a=[];t.initialEvents&&s.unshift(t.initialEvents),t.events&&s.unshift(t.events);for(let l of s){let o=CD(l,e,n);o&&a.push(o)}return a}function pR(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function qG(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function HG(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function zG(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function VG(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function UG(t,e,n,s,a){let l=t.headerToolbar?W1(t.headerToolbar,t,e,n,s,a):null,o=t.footerToolbar?W1(t.footerToolbar,t,e,n,s,a):null;return{header:l,footer:o}}function W1(t,e,n,s,a,l){let o={},c=[],d=!1;for(let m in t){let u=t[m],p=WG(u,e,n,s,a,l);o[m]=p.widgets,c.push(...p.viewsWithButtons),d=d||p.hasTitle}return{sectionWidgets:o,viewsWithButtons:c,hasTitle:d}}function WG(t,e,n,s,a,l){let o=e.direction==="rtl",c=e.customButtons||{},d=n.buttonText||{},m=e.buttonText||{},u=n.buttonHints||{},p=e.buttonHints||{},h=t?t.split(" "):[],g=[],x=!1;return{widgets:h.map(y=>y.split(",").map(b=>{if(b==="title")return x=!0,{buttonName:b};let k,w,S,j,T,N;if(k=c[b])S=_=>{k.click&&k.click.call(_.target,_,_.target)},(j=s.getCustomButtonIconClass(k))||(j=s.getIconClass(b,o))||(T=k.text),N=k.hint||k.text;else if(w=a[b]){g.push(b),S=()=>{l.changeView(b)},(T=w.buttonTextOverride)||(j=s.getIconClass(b,o))||(T=w.buttonTextDefault);let _=w.buttonTextOverride||w.buttonTextDefault;N=am(w.buttonTitleOverride||w.buttonTitleDefault||e.viewHint,[_,b],_)}else if(l[b])if(S=()=>{l[b]()},(T=d[b])||(j=s.getIconClass(b,o))||(T=m[b]),b==="prevYear"||b==="nextYear"){let _=b==="prevYear"?"prev":"next";N=am(u[_]||p[_],[m.year||"year","year"],m[b])}else N=_=>am(u[b]||p[b],[m[_]||_,_],m[b]);return{buttonName:b,buttonClick:S,buttonIcon:j,buttonText:T,buttonHint:N}})),viewsWithButtons:g,hasTitle:x}}class KG{constructor(e,n,s){this.type=e,this.getCurrentData=n,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let GG={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const YG=Fr({name:"array-event-source",eventSourceDefs:[GG]});let QG={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:s}=t.context,a=t.eventSource.meta;rK(a.bind(null,OD(t.range,s)),l=>e({rawEvents:l}),n)}};const ZG=Fr({name:"func-event-source",eventSourceDefs:[QG]}),XG={method:String,extraParams:Me,startParam:String,endParam:String,timeZoneParam:String};let JG={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:s}=t.eventSource,a=tY(s,t.range,t.context);lK(s.method,s.url,a).then(([l,o])=>{e({rawEvents:l,response:o})},n)}};const eY=Fr({name:"json-event-source",eventSourceRefiners:XG,eventSourceDefs:[JG]});function tY(t,e,n){let{dateEnv:s,options:a}=n,l,o,c,d,m={};return l=t.startParam,l==null&&(l=a.startParam),o=t.endParam,o==null&&(o=a.endParam),c=t.timeZoneParam,c==null&&(c=a.timeZoneParam),typeof t.extraParams=="function"?d=t.extraParams():d=t.extraParams||{},Object.assign(m,d),m[l]=s.formatIso(e.start),m[o]=s.formatIso(e.end),s.timeZone!=="local"&&(m[c]=s.timeZone),m}const nY={daysOfWeek:Me,startTime:Jt,endTime:Jt,duration:Jt,startRecur:Me,endRecur:Me};let iY={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},s;return t.duration&&(s=t.duration),!s&&t.startTime&&t.endTime&&(s=xU(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:s,typeData:n}}return null},expand(t,e,n){let s=oo(e,{start:t.startRecur,end:t.endRecur});return s?aY(t.daysOfWeek,t.startTime,t.dateEnv,n,s):[]}};const sY=Fr({name:"simple-recurring-event",recurringTypes:[iY],eventRefiners:nY});function aY(t,e,n,s,a){let l=t?uD(t):null,o=On(a.start),c=a.end,d=[];for(e&&(e.milliseconds<0?c=vi(c,1):e.milliseconds>=1e3*60*60*24&&(o=vi(o,-1)));o<c;){let m;(!l||l[o.getUTCDay()])&&(e?m=s.add(o,e):m=o,d.push(s.createMarker(n.toDate(m)))),o=vi(o,1)}return d}const rY=Fr({name:"change-handler",optionChangeHandlers:{events(t,e){K1([t],e)},eventSources:K1}});function K1(t,e){let n=Ww(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let s=[];for(let a of t){let l=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===a){n.splice(o,1),l=!0;break}l||s.push(a)}for(let a of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of s)e.calendarApi.addEventSource(a)}function lY(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},OD(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function oY(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Ql(t,e))}const cY=[YG,ZG,eY,sY,rY,Fr({name:"misc",isLoadingFuncs:[t=>dR(t.eventSources)],propSetHandlers:{dateProfile:lY,eventStore:oY}})];class dY{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new Fw(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],s;for(;s=e.shift();)this.runTask(s),n.push(s);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function mY(t,e,n){let s;return/^(year|month)$/.test(t.currentRangeUnit)?s=t.currentRange:s=t.activeRange,n.formatRange(s.start,s.end,Vn(e.titleFormat||uY(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function uY(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=$p(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class G1{constructor(){this.resetListeners=new Set}handleInput(e,n){const s=this.dateEnv;if(e!==s&&(typeof n=="function"?this.nowFn=n:s||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class hY{constructor(e){this.computeCurrentViewData=qt(this._computeCurrentViewData),this.organizeRawLocales=qt(gG),this.buildLocale=qt(oR),this.buildPluginHooks=yG(),this.buildDateEnv=qt(pY),this.buildTheme=qt(gY),this.parseToolbars=qt(UG),this.buildViewSpecs=qt(CG),this.buildDateProfileGenerator=qh(fY),this.buildViewApi=qt(vY),this.buildViewUiProps=qh(bY),this.buildEventUiBySource=qt(xY,ga),this.buildEventUiBases=qt(yY),this.parseContextBusinessHours=qh(wY),this.buildTitle=qt(mY),this.nowManager=new G1,this.emitter=new Gg,this.actionRunner=new dY(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause(),this.nowManager=new G1;let n={},s=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),a=s.calendarOptions.initialView||s.pluginHooks.initialView,l=this.computeCurrentViewData(a,s,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(l.options);let o={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=AG(s.calendarOptions,s.dateEnv,this.nowManager),d=l.dateProfileGenerator.build(c);Nr(d.activeRange,c)||(c=d.currentRange.start);for(let h of s.pluginHooks.contextInit)h(o);let m=PG(s.calendarOptions,d,o),u={dynamicOptionOverrides:n,currentViewType:a,currentDate:c,dateProfile:d,businessHours:this.parseContextBusinessHours(o),eventSources:m,eventUiBases:{},eventStore:_s(),renderableEventStore:_s(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},p=Object.assign(Object.assign({},o),u);for(let h of s.pluginHooks.reducers)Object.assign(u,h(null,null,p));Kv(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:s}=this;n===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:s,emitter:a}=this,l=DG(s.dynamicOptionOverrides,e),o=this.computeOptionsData(n.optionOverrides,l,n.calendarApi),c=EG(s.currentViewType,e),d=this.computeCurrentViewData(c,o,n.optionOverrides,l);n.calendarApi.currentDataManager=this,a.setThisContext(n.calendarApi),a.setOptions(d.options);let m={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:p}=s;this.data&&this.data.dateProfileGenerator!==d.dateProfileGenerator&&(p=d.dateProfileGenerator.build(u)),u=TG(u,e),p=RG(p,e,u,d.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Nr(p.currentRange,u))&&(u=p.currentRange.start);let h=MG(s.eventSources,e,p,m),g=PW(s.eventStore,e,h,p,m),v=dR(h)&&!d.options.progressiveEventRendering&&s.renderableEventStore||g,{eventUiSingleBase:y,selectionConfig:b}=this.buildViewUiProps(m),k=this.buildEventUiBySource(h),w=this.buildEventUiBases(v.defs,y,k),S={dynamicOptionOverrides:l,currentViewType:c,currentDate:u,dateProfile:p,eventSources:h,eventStore:g,renderableEventStore:v,selectionConfig:b,eventUiBases:w,businessHours:this.parseContextBusinessHours(m),dateSelection:qG(s.dateSelection,e),eventSelection:HG(s.eventSelection,e),eventDrag:zG(s.eventDrag,e),eventResize:VG(s.eventResize,e)},j=Object.assign(Object.assign({},m),S);for(let _ of o.pluginHooks.reducers)Object.assign(S,_(s,e,j));let T=Kv(s,m),N=Kv(S,m);!T&&N?a.trigger("loading",!0):T&&!N&&a.trigger("loading",!1),this.state=S,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,s=this.data,a=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),l=this.computeCurrentViewData(n.currentViewType,a,e.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,l.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),l),n),c=a.pluginHooks.optionChangeHandlers,d=s&&s.calendarOptions,m=a.calendarOptions;if(d&&d!==m){d.timeZone!==m.timeZone&&(n.eventSources=o.eventSources=IG(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=F1(o.eventStore,s.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=F1(o.renderableEventStore,s.dateEnv,o.dateEnv));for(let u in c)(this.optionsForHandling.indexOf(u)!==-1||d[u]!==m[u])&&c[u](m[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,n,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:l,localeDefaults:o,availableLocaleData:c,extra:d}=this.processRawCalendarOptions(e,n);Y1(d);let m=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,l,c,a.defaultRangeSeparator),u=this.buildViewSpecs(l.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),p=this.buildTheme(a,l),h=this.parseToolbars(a,this.stableOptionOverrides,p,u,s);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:l,dateEnv:m,viewSpecs:u,theme:p,toolbarConfig:h,localeDefaults:o,availableRawLocales:c.map}}processRawCalendarOptions(e,n){let{locales:s,locale:a}=Lv([rm,e,n]),l=this.organizeRawLocales(s),o=l.map,c=this.buildLocale(a||l.defaultCode,o).options,d=this.buildPluginHooks(e.plugins||[],cY),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},D1),R1),P1),d.listenerRefiners),d.optionRefiners),u={},p=Lv([rm,c,e,n]),h={},g=this.currentCalendarOptionsInput,x=this.currentCalendarOptionsRefined,v=!1;for(let y in p)this.optionsForRefining.indexOf(y)===-1&&(p[y]===g[y]||Ll[y]&&y in g&&Ll[y](g[y],p[y]))?h[y]=x[y]:m[y]?(h[y]=m[y](p[y]),v=!0):u[y]=g[y];return v&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:d,availableLocaleData:l,localeDefaults:c,extra:u}}_computeCurrentViewData(e,n,s,a){let l=n.viewSpecs[e];if(!l)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:c}=this.processRawViewOptions(l,n.pluginHooks,n.localeDefaults,s,a);Y1(c),this.nowManager.handleInput(n.dateEnv,o.now);let d=this.buildDateProfileGenerator({dateProfileGeneratorClass:l.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:l.duration,durationUnit:l.durationUnit,usesMinMaxTime:l.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:l,options:o,dateProfileGenerator:d,viewApi:m}}processRawViewOptions(e,n,s,a,l){let o=Lv([rm,e.optionDefaults,s,a,e.optionOverrides,l]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},D1),R1),P1),ZU),n.listenerRefiners),n.optionRefiners),d={},m=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,p=!1,h={};for(let g in o)o[g]===m[g]||Ll[g]&&Ll[g](o[g],m[g])?d[g]=u[g]:(o[g]===this.currentCalendarOptionsInput[g]||Ll[g]&&Ll[g](o[g],this.currentCalendarOptionsInput[g])?g in this.currentCalendarOptionsRefined&&(d[g]=this.currentCalendarOptionsRefined[g]):c[g]?d[g]=c[g](o[g]):h[g]=o[g],p=!0);return p&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=d),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function pY(t,e,n,s,a,l,o,c){let d=oR(e||o.defaultCode,o.map);return new oW({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:l.namedTimeZonedImpl,locale:d,weekNumberCalculation:n,firstDay:s,weekText:a,cmdFormatter:l.cmdFormatter,defaultSeparator:c})}function gY(t,e){let n=e.themeClasses[t.themeSystem]||Nl;return new n(t)}function fY(t){let e=t.dateProfileGeneratorClass||bD;return new e(t)}function vY(t,e,n){return new KG(t,e,n)}function xY(t){return Tr(t,e=>e.ui)}function yY(t,e,n){let s={"":e};for(let a in t){let l=t[a];l.sourceId&&n[l.sourceId]&&(s[a]=n[l.sourceId])}return s}function bY(t){let{options:e}=t;return{eventUiSingleBase:Wp({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Wp({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Kv(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function wY(t){return HW(t.options.businessHours,t)}function Y1(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class kY extends jn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return ke("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:s}=this.context,a=[],l=!0;for(let o of e){let{buttonName:c,buttonClick:d,buttonText:m,buttonIcon:u,buttonHint:p}=o;if(c==="title")l=!1,a.push(ke("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=c===n.activeButton,g=!n.isTodayEnabled&&c==="today"||!n.isPrevEnabled&&c==="prev"||!n.isNextEnabled&&c==="next",x=[`fc-${c}-button`,s.getClass("button")];h&&x.push(s.getClass("buttonActive")),a.push(ke("button",{type:"button",title:typeof p=="function"?p(n.navUnit):p,disabled:g,"aria-pressed":h,className:x.join(" "),onClick:d},m||(u?ke("span",{className:u,role:"img"}):"")))}}if(a.length>1){let o=l&&s.getClass("buttonGroup")||"";return ke("div",{className:o},...a)}return a[0]}}let Q1=class extends jn{render(){let{model:e,extraClassName:n}=this.props,s=!1,a,l,o=e.sectionWidgets,c=o.center;return o.left?(s=!0,a=o.left):a=o.start,o.right?(s=!0,l=o.right):l=o.end,ke("div",{className:[n||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",c||[]),this.renderSection("end",l||[]))}renderSection(e,n){let{props:s}=this;return ke(kY,{key:e,widgetGroups:n,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}};class jY extends jn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Ua(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:s}=e,a=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],l="",o="";return s?n.availableWidth!==null?l=n.availableWidth/s:o=`${1/s*100}%`:l=e.height||"",ke("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:l,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class NY extends id{constructor(e){super(e),this.handleSegClick=(n,s)=>{let{component:a}=this,{context:l}=a,o=Lc(s);if(o&&a.isValidSegDownEl(n.target)){let c=Ii(n.target,".fc-event-forced-url"),d=c?c.querySelector("a[href]").href:"";l.emitter.trigger("eventClick",{el:s,event:new zn(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:l.viewApi}),d&&!n.defaultPrevented&&(window.location.href=d)}},this.destroy=lD(e.el,"click",".fc-event",this.handleSegClick)}}class CY extends id{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,s)=>{Lc(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",n,s))},this.handleSegLeave=(n,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,s))},this.removeHoverListeners=iU(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,s){let{component:a}=this,{context:l}=a,o=Lc(s);(!n||a.isValidSegDownEl(n.target))&&l.emitter.trigger(e,{el:s,event:new zn(l,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:l.viewApi})}}class SY extends Eo{constructor(){super(...arguments),this.buildViewContext=qt(mW),this.buildViewPropTransformers=qt(EY),this.buildToolbarProps=qt(_Y),this.headerRef=Ui(),this.footerRef=Ui(),this.interactionsStore={},this.state={viewLabelId:Vg()},this.registerInteractiveComponent=(e,n)=>{let s=dK(e,n),o=[NY,CY].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(s));this.interactionsStore[e.uid]=o,hy[e.uid]=s},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let s of n)s.destroy();delete this.interactionsStore[e.uid]}delete hy[e.uid]},this.resizeRunner=new Fw(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:s}=e,a=!1,l="",o;e.isHeightAuto||e.forPrint?l="":s.height!=null?a=!0:s.contentHeight!=null?l=s.contentHeight:o=Math.max(s.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),d=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return ke(Or.Provider,{value:c},ke(sd,{unit:"day"},m=>{let u=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return ke(In,null,n.header&&ke(Q1,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:d},u)),ke(jY,{liquid:a,height:l,aspectRatio:o,labeledById:d},this.renderView(e),this.buildAppendContent()),n.footer&&ke(Q1,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},u)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let s in n)n[s](e[s],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:s}=n.pluginHooks;for(let a in s)n[a]!==e[a]&&s[a](n[a],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(s=>s(e));return ke(In,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:s}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},l=this.buildViewPropTransformers(n.viewPropsTransformers);for(let c of l)Object.assign(a,c.transform(a,e));let o=s.component;return ke(o,Object.assign({},a))}}function _Y(t,e,n,s,a,l){let o=n.build(a,void 0,!1),c=n.buildPrev(e,s,!1),d=n.buildNext(e,s,!1);return{title:l,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!Nr(e.currentRange,a),isPrevEnabled:c.isValid,isNextEnabled:d.isValid}}function EY(t){return t.map(e=>new e)}class TY extends uK{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;zp(()=>{Sm(ke(cK,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(a,l,o,c)=>(this.setClassNames(a),this.setHeight(l),ke(fD.Provider,{value:this.customContentRenderId},ke(SY,Object.assign({isHeightAuto:o,forPrint:c},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Sm(null,this.el),this.setClassNames([]),this.setHeight(""))},GV(e),this.el=e,this.renderRunner=new Fw(this.handleRenderRequest),new hY({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){zp(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!vl(e,this.currentClassNames)){let{classList:n}=this.el;for(let s of this.currentClassNames)n.remove(s);for(let s of e)n.add(s);this.currentClassNames=e}}setHeight(e){aD(this.el,"height",e)}}const AY=parseInt(String(ze.version).split(".")[0]),DY=AY<18;class gR extends f.Component{constructor(){super(...arguments),this.elRef=f.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(ze.createElement(RY,{key:n.id,customRendering:n}));return ze.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new hG;this.handleCustomRendering=e.handle.bind(e),this.calendar=new TY(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Ia.flushSync(()=>{})});let n;e.subscribe(s=>{const a=Date.now(),l=!n;(DY||l||this.isUpdating||this.isUnmounting||a-n<100?fR:Ia.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{n=a,l?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}gR.act=fR;class RY extends f.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,s=typeof n=="function"?n(e.renderProps):n;return Ia.createPortal(s,e.containerEl)}}function fR(t){t()}class PY extends Qa{constructor(){super(...arguments),this.headerElRef=Ui()}renderSimpleLayout(e,n){let{props:s,context:a}=this,l=[],o=Yp(a.options);return e&&l.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),l.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),ke(Vp,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},ke(lk,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:l}))}renderHScrollLayout(e,n,s,a){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{props:o,context:c}=this,d=!o.forPrint&&Yp(c.options),m=!o.forPrint&&eR(c.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:d,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),m&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:fy}]}),ke(Vp,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},ke(l,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:s,minWidth:a}]}],sections:u}))}}function zh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.row].push(s);return n}function dh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.firstCol].push(s);return n}function Z1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}const vR=Vn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function xR(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class yR extends jn{render(){let{props:e}=this;return ke(ck,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:vR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class bR extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,l=s.eventTimeFormat||vR,o=PD(a,l,n,!0,e.defaultDisplayEventEnd);return ke(ok,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ID(e.seg,n),defaultGenerator:MY,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function MY(t){return ke(In,null,ke("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&ke("div",{className:"fc-event-time"},t.timeText),ke("div",{className:"fc-event-title"},t.event.title||ke(In,null,"")))}class IY extends jn{constructor(){super(...arguments),this.compileSegs=qt(OY)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return ke(sR,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return ke(In,null,n.map(l=>{let o=l.eventRange.instance.instanceId;return ke("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},xR(l)?ke(bR,Object.assign({seg:l,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ml(l,e.todayRange))):ke(yR,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ml(l,e.todayRange))))}))}})}}function OY(t){let e=[],n=[];for(let s of t)e.push(s.seg),s.isVisible||n.push(s.seg);return{allSegs:e,invisibleSegs:n}}const FY=Vn({week:"narrow"});let LY=class extends Qa{constructor(){super(...arguments),this.rootElRef=Ui(),this.state={dayNumberId:Vg()},this.handleRootEl=e=>{Ua(this.rootElRef,e),Ua(this.props.elRef,e)}}render(){let{context:e,props:n,state:s,rootElRef:a}=this,{options:l,dateEnv:o}=e,{date:c,dateProfile:d}=n;const m=n.showDayNumber&&BY(c,d.currentRange,o);return ke(mk,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:$Y,date:c,dateProfile:d,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:m,extraRenderProps:n.extraRenderProps},(u,p)=>ke("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&ke(iR,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Gp(e,c,"week"),date:c,defaultFormat:FY}),!p.isDisabled&&(n.showDayNumber||uk(l)||n.forceDayTop)?ke("div",{className:"fc-daygrid-day-top"},ke(u,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Gp(e,c)),{id:s.dayNumberId})})):n.showDayNumber?ke("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},ke("a",{className:"fc-daygrid-day-number"},"")):void 0,ke("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,ke("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},ke(IY,{allDayDate:c,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:a,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),ke("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}};function $Y(t){return t.dayNumberText||ke(In,null,"")}function BY(t,e,n){const{start:s,end:a}=e,l=xl(a,-1),o=n.getYear(s),c=n.getMonth(s),d=n.getYear(l),m=n.getMonth(l);return!(o===d&&c===m)&&(t.valueOf()===s.valueOf()||n.getDay(t)===1&&t.valueOf()<a.valueOf())}function wR(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function kR(t){return wR(t)+":"+t.lastCol}function qY(t,e,n,s,a,l,o){let c=new VY(b=>{let k=t[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return a[k]||1});c.allowReslicing=!0,c.strictOrder=s,e===!0||n===!0?(c.maxCoord=l,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof n=="number"&&(c.maxStackCnt=n,c.hiddenConsumes=!0);let d=[],m=[];for(let b=0;b<t.length;b+=1){let k=t[b],w=kR(k);a[w]!=null?d.push({index:b,span:{start:k.firstCol,end:k.lastCol+1}}):m.push(k)}let u=c.addSegs(d),p=c.toRects(),{singleColPlacements:h,multiColPlacements:g,leftoverMargins:x}=HY(p,t,o),v=[],y=[];for(let b of m){g[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let k=b.firstCol;k<=b.lastCol;k+=1)h[k].push({seg:bc(b,k,k+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)v.push(0);for(let b of u){let k=t[b.index],w=b.span;g[w.start].push({seg:bc(k,w.start,w.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let S=w.start;S<w.end;S+=1)v[S]+=1,h[S].push({seg:bc(k,S,S+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)y.push(x[b]);return{singleColPlacements:h,multiColPlacements:g,moreCnts:v,moreMarginTops:y}}function HY(t,e,n){let s=zY(t,n.length),a=[],l=[],o=[];for(let c=0;c<n.length;c+=1){let d=s[c],m=[],u=0,p=0;for(let g of d){let x=e[g.index];m.push({seg:bc(x,c,c+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-u}),u=g.levelCoord+g.thickness}let h=[];u=0,p=0;for(let g of d){let x=e[g.index],v=g.span.end-g.span.start>1,y=g.span.start===c;p+=g.levelCoord-u,u=g.levelCoord+g.thickness,v?(p+=g.thickness,y&&h.push({seg:bc(x,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):y&&(h.push({seg:bc(x,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:p}),p=0)}a.push(m),l.push(h),o.push(p)}return{singleColPlacements:a,multiColPlacements:l,leftoverMargins:o}}function zY(t,e){let n=[];for(let s=0;s<e;s+=1)n.push([]);for(let s of t)for(let a=s.span.start;a<s.span.end;a+=1)n[a].push(s);return n}function bc(t,e,n,s){if(t.firstCol===e&&t.lastCol===n-1)return t;let a=t.eventRange,l=a.range,o=oo(l,{start:s[e].date,end:vi(s[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===l.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===l.end.valueOf()})}class VY extends zD{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:s}=this,a=l=>!this.forceHidden[Zl(l)];for(let l=0;l<s.length;l+=1)s[l]=s[l].filter(a);return n}handleInvalidInsertion(e,n,s){const{entriesByLevel:a,forceHidden:l}=this,{touchingEntry:o,touchingLevel:c,touchingLateral:d}=e;if(this.hiddenConsumes&&o){const m=Zl(o);if(!l[m])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:ak(o.span,n.span)}),p=Zl(u);l[p]=!0,a[c][d]=u,s.push(u),this.splitEntry(o,n,s)}else l[m]=!0,s.push(o)}super.handleInvalidInsertion(e,n,s)}}let jR=class extends Qa{constructor(){super(...arguments),this.cellElRefs=new gr,this.frameElRefs=new gr,this.fgElRefs=new gr,this.segHarnessRefs=new gr,this.rootElRef=Ui(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:s}=this,{options:a}=s,l=e.cells.length,o=dh(e.businessHourSegs,l),c=dh(e.bgEventSegs,l),d=dh(this.getHighlightSegs(),l),m=dh(this.getMirrorSegs(),l),{singleColPlacements:u,multiColPlacements:p,moreCnts:h,moreMarginTops:g}=qY(RD(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),x=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return ke("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((v,y)=>{let b=this.renderFgSegs(y,e.forPrint?u[y]:p[y],e.todayRange,x),k=this.renderFgSegs(y,UY(m[y],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return ke(LY,{key:v.key,elRef:this.cellElRefs.createRef(v.key),innerElRef:this.frameElRefs.createRef(v.key),dateProfile:e.dateProfile,date:v.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:v.extraRenderProps,extraDataAttrs:v.extraDataAttrs,extraClassNames:v.extraClassNames,extraDateSpan:v.extraDateSpan,moreCnt:h[y],moreMarginTop:g[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(v.key),fgContent:ke(In,null,ke(In,null,b),ke(In,null,k)),bgContent:ke(In,null,this.renderFillSegs(d[y],"highlight"),this.renderFillSegs(o[y],"non-business"),this.renderFillSegs(c[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let s=this.props;this.updateSizing(!ga(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,s,a,l,o,c){let{context:d}=this,{eventSelection:m}=this.props,{framePositions:u}=this.state,p=this.props.cells.length===1,h=l||o||c,g=[];if(u)for(let x of n){let{seg:v}=x,{instanceId:y}=v.eventRange.instance,b=x.isVisible&&!a[y],k=x.isAbsolute,w="",S="";k&&(d.isRtl?(S=0,w=u.lefts[v.lastCol]-u.lefts[v.firstCol]):(w=0,S=u.rights[v.firstCol]-u.rights[v.lastCol])),g.push(ke("div",{className:"fc-daygrid-event-harness"+(k?" fc-daygrid-event-harness-abs":""),key:wR(v),ref:h?null:this.segHarnessRefs.createRef(kR(v)),style:{visibility:b?"":"hidden",marginTop:k?"":x.marginTop,top:k?x.absoluteTop:"",left:w,right:S}},xR(v)?ke(bR,Object.assign({seg:v,isDragging:l,isSelected:y===m,defaultDisplayEventEnd:p},ml(v,s))):ke(yR,Object.assign({seg:v,isDragging:l,isResizing:o,isDateSelecting:c,isSelected:y===m,defaultDisplayEventEnd:p},ml(v,s)))))}return g}renderFillSegs(e,n){let{isRtl:s}=this.context,{todayRange:a}=this.props,{framePositions:l}=this.state,o=[];if(l)for(let c of e){let d=s?{right:0,left:l.lefts[c.lastCol]-l.lefts[c.firstCol]}:{left:0,right:l.rights[c.firstCol]-l.rights[c.lastCol]};o.push(ke("div",{key:MD(c.eventRange),className:"fc-daygrid-bg-harness",style:d},n==="bg-event"?ke(tR,Object.assign({seg:c},ml(c,a))):nR(n)))}return ke(In,{},...o)}updateSizing(e){let{props:n,state:s,frameElRefs:a}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let d=n.cells.map(m=>a.currentMap[m.key]);if(d.length){let m=this.rootElRef.current,u=new $c(m,d,!0,!1);(!s.framePositions||!s.framePositions.similarTo(u))&&this.setState({framePositions:new $c(m,d,!0,!1)})}}const l=this.state.segHeights,o=this.querySegHeights(),c=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},l),o),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let s in e){let a=Math.round(e[s].getBoundingClientRect().height);n[s]=Math.max(n[s]||0,a)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}};jR.addStateEquality({segHeights:ga});function UY(t,e){if(!t.length)return[];let n=WY(e);return t.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:n[s.eventRange.instance.instanceId],marginTop:0}))}function WY(t){let e={};for(let n of t)for(let s of n)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class KY extends Qa{constructor(){super(...arguments),this.splitBusinessHourSegs=qt(zh),this.splitBgEventSegs=qt(GY),this.splitFgEventSegs=qt(zh),this.splitDateSelectionSegs=qt(zh),this.splitEventDrag=qt(Z1),this.splitEventResize=qt(Z1),this.rowRefs=new gr}render(){let{props:e,context:n}=this,s=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,s),l=this.splitBgEventSegs(e.bgEventSegs,s),o=this.splitFgEventSegs(e.fgEventSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),u=s>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return ke(sd,{unit:"day"},(p,h)=>ke(In,null,e.cells.map((g,x)=>ke(jR,{ref:this.rowRefs.createRef(x),key:g.length?g[0].date.toISOString():x,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:a[x],eventSelection:e.eventSelection,bgEventSegs:l[x],fgEventSegs:o[x],dateSelectionSegs:c[x],eventDrag:d[x],eventResize:m[x],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new $c(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new $c(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:s,rowPositions:a}=this,l=s.leftToIndex(e),o=a.topToIndex(n);if(o!=null&&l!=null){let c=this.props.cells[o][l];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,l),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(o,l),rect:{left:s.lefts[l],right:s.rights[l],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let s=this.props.cells[e][n].date,a=vi(s,1);return{start:s,end:a}}}function GY(t,e){return zh(t.filter(YY),e)}function YY(t){return t.eventRange.def.allDay}let QY=class extends Qa{constructor(){super(...arguments),this.elRef=Ui(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:s,expandRows:a}=e,l=s===!0||n===!0;l&&!a&&(l=!1,n=null,s=null);let o=["fc-daygrid-body",l?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return ke("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},ke("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,ke("tbody",{role:"presentation"},ke(KY,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=ZY(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),s=n.closest(".fc-scroller"),a=e.getBoundingClientRect().top-n.getBoundingClientRect().top;s.scrollTop=a?a+1:0}this.needsScrollReset=!1}}};function ZY(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${MU(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Hw(e.currentDate)}"]`)),n}class XY extends YD{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class NR extends Qa{constructor(){super(...arguments),this.slicer=new XY,this.tableRef=Ui()}render(){let{props:e,context:n}=this;return ke(QY,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class JY extends PY{constructor(){super(...arguments),this.buildDayTableModel=qt(eQ),this.headerRef=Ui(),this.tableRef=Ui()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:s}=this,a=this.buildDayTableModel(s.dateProfile,n),l=e.dayHeaders&&ke(WD,{ref:this.headerRef,dateProfile:s.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=c=>ke(NR,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:a,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(l,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(l,o)}}function eQ(t,e){let n=new KD(t.renderRange,e);return new GD(n,/year|month|week/.test(t.currentRangeUnit))}class tQ extends bD{buildRenderRange(e,n,s){let a=super.buildRenderRange(e,n,s),{props:l}=this;return nQ({currentRange:a,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:l.fixedWeekCount,dateEnv:l.dateEnv})}}function nQ(t){let{dateEnv:e,currentRange:n}=t,{start:s,end:a}=n,l;if(t.snapToWeek&&(s=e.startOfWeek(s),l=e.startOfWeek(a),l.valueOf()!==a.valueOf()&&(a=S1(l,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(vi(n.end,-1))),c=Math.ceil(jU(o,a));a=S1(a,6-c)}return{start:s,end:a}}var iQ=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Ow(iQ);var sQ=Fr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:JY,dateProfileGeneratorClass:tQ},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class aQ extends vK{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?KW(e)?["timed","allDay"]:["allDay"]:["timed"]}}const rQ=Vn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function CR(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return ke(Or.Consumer,null,n=>{if(!t.isLabeled)return ke("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:s,options:a,viewApi:l}=n,o=a.slotLabelFormat==null?rQ:Array.isArray(a.slotLabelFormat)?Vn(a.slotLabelFormat[0]):Vn(a.slotLabelFormat),c={level:0,time:t.time,date:s.toDate(t.date),view:l,text:s.format(t.date,o)};return ke(Ps,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:c,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:lQ,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},d=>ke("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},ke(d,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function lQ(t){return t.text}class oQ extends jn{render(){return this.props.slatMetas.map(e=>ke("tr",{key:e.key},ke(CR,Object.assign({},e))))}}const cQ=Vn({week:"short"}),dQ=5;class mQ extends Qa{constructor(){super(...arguments),this.allDaySplitter=new aQ,this.headerElRef=Ui(),this.rootElRef=Ui(),this.scrollerElRef=Ui(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:s}=this.context,{dateProfile:a}=this.props,l=a.renderRange,c=_o(l.start,l.end)===1?Gp(this.context,l.start,"week"):{};return s.weekNumbers&&e==="day"?ke(iR,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:l.start,defaultFormat:cQ},d=>ke("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},ke(d,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:c}))):ke("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},ke("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:s}=this.context,a={text:n.allDayText,view:s};return ke(Ps,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:uQ,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},l=>ke("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},ke(l,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,s){let{context:a,props:l}=this,o=[],c=Yp(a.options);return e&&o.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(o.push({type:"body",key:"all-day",chunk:{content:n}}),o.push({type:"body",key:"all-day-divider",outerContent:ke("tr",{role:"presentation",className:"fc-scrollgrid-section"},ke("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),ke(Vp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},ke(lk,{liquid:!l.isHeightAuto&&!l.forPrint,collapsibleWidth:l.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,n,s,a,l,o,c){let d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");let{context:m,props:u}=this,p=!u.forPrint&&Yp(m.options),h=!u.forPrint&&eR(m.options),g=[];e&&g.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:v=>ke("tr",{role:"presentation"},this.renderHeadAxis("day",v.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(g.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:v=>ke("tr",{role:"presentation"},this.renderTableRowAxis(v.rowSyncHeights[0]))},{key:"cols",content:n}]}),g.push({key:"all-day-divider",type:"body",outerContent:ke("tr",{role:"presentation",className:"fc-scrollgrid-section"},ke("td",{colSpan:2,className:"fc-timegrid-divider "+m.theme.getClass("tableCellShaded")}))}));let x=m.options.nowIndicator;return g.push({type:"body",key:"body",liquid:!0,expandRows:!!m.options.expandRows,chunks:[{key:"axis",content:v=>ke("div",{className:"fc-timegrid-axis-chunk"},ke("table",{"aria-hidden":!0,style:{height:v.expandRows?v.clientHeight:""}},v.tableColGroupNode,ke("tbody",null,ke(oQ,{slatMetas:o}))),ke("div",{className:"fc-timegrid-now-indicator-container"},ke(sd,{unit:x?"minute":"day"},y=>{let b=x&&c&&c.safeComputeTop(y);return typeof b=="number"?ke(dk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:b},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),h&&g.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:fy},{key:"cols",content:fy}]}),ke(Vp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:m.viewSpec},ke(d,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:l}]}],sections:g}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=dQ),{dayMaxEvents:e,dayMaxEventRows:n}}}function uQ(t){return t.text}class hQ{constructor(e,n,s){this.positions=e,this.dateProfile=n,this.slotDuration=s}safeComputeTop(e){let{dateProfile:n}=this;if(Nr(n.currentRange,e)){let s=On(e),a=e.valueOf()-s.valueOf();if(a>=ma(n.slotMinTime)&&a<ma(n.slotMaxTime))return this.computeTimeTop(Jt(a))}return null}computeDateTop(e,n){return n||(n=On(e)),this.computeTimeTop(Jt(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:s}=this,a=n.els.length,l=(e.milliseconds-ma(s.slotMinTime))/ma(this.slotDuration),o,c;return l=Math.max(0,l),l=Math.min(a,l),o=Math.floor(l),o=Math.min(o,a-1),c=l-o,n.tops[o]+n.getHeight(o)*c}}class pQ extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{slatElRefs:a}=e;return ke("tbody",null,e.slatMetas.map((l,o)=>{let c={time:l.time,date:n.dateEnv.toDate(l.date),view:n.viewApi};return ke("tr",{key:l.key,ref:a.createRef(l.key)},e.axis&&ke(CR,Object.assign({},l)),ke(Ps,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!l.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":l.isoTimeStr},renderProps:c,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class gQ extends jn{constructor(){super(...arguments),this.rootElRef=Ui(),this.slatElRefs=new gr}render(){let{props:e,context:n}=this;return ke("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},ke("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,ke(pQ,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new hQ(new $c(this.rootElRef.current,fQ(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function fQ(t,e){return e.map(n=>t[n.key])}function Ad(t,e){let n=[],s;for(s=0;s<e;s+=1)n.push([]);if(t)for(s=0;s<t.length;s+=1)n[t[s].col].push(t[s]);return n}function X1(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.col].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}class vQ extends jn{render(){let{props:e}=this;return ke(sR,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>_R(e.hiddenSegs,e),defaultGenerator:xQ,forceTimed:!0},n=>ke(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function xQ(t){return t.shortText}function yQ(t,e,n){let s=new zD;e!=null&&(s.strictOrder=e),n!=null&&(s.maxStackCnt=n);let a=s.addSegs(t),l=AK(a),o=bQ(s);return o=NQ(o,1),{segRects:CQ(o),hiddenGroups:l}}function bQ(t){const{entriesByLevel:e}=t,n=pk((s,a)=>s+":"+a,(s,a)=>{let l=jQ(t,s,a),o=J1(l,n),c=e[s][a];return[Object.assign(Object.assign({},c),{nextLevelNodes:o[0]}),c.thickness+o[1]]});return J1(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function J1(t,e){if(!t)return[[],0];let{level:n,lateralStart:s,lateralEnd:a}=t,l=s,o=[];for(;l<a;)o.push(e(n,l)),l+=1;return o.sort(wQ),[o.map(kQ),o[0][1]]}function wQ(t,e){return e[1]-t[1]}function kQ(t){return t[0]}function jQ(t,e,n){let{levelCoords:s,entriesByLevel:a}=t,l=a[e][n],o=s[e]+l.thickness,c=s.length,d=e;for(;d<c&&s[d]<o;d+=1);for(;d<c;d+=1){let m=a[d],u,p=gy(m,l.span.start,py),h=p[0]+p[1],g=h;for(;(u=m[g])&&u.span.start<l.span.end;)g+=1;if(h<g)return{level:d,lateralStart:h,lateralEnd:g}}return null}function NQ(t,e){const n=pk((s,a,l)=>Zl(s),(s,a,l)=>{let{nextLevelNodes:o,thickness:c}=s,d=c+l,m=c/d,u,p=[];if(!o.length)u=e;else for(let g of o)if(u===void 0){let x=n(g,a,d);u=x[0],p.push(x[1])}else{let x=n(g,u,0);p.push(x[1])}let h=(u-a)*m;return[u-h,Object.assign(Object.assign({},s),{thickness:h,nextLevelNodes:p})]});return t.map(s=>n(s,0,0)[1])}function CQ(t){let e=[];const n=pk((a,l,o)=>Zl(a),(a,l,o)=>{let c=Object.assign(Object.assign({},a),{levelCoord:l,stackDepth:o,stackForward:0});return e.push(c),c.stackForward=s(a.nextLevelNodes,l+a.thickness,o+1)+1});function s(a,l,o){let c=0;for(let d of a)c=Math.max(n(d,l,o),c);return c}return s(t,0,0),e}function pk(t,e){const n={};return(...s)=>{let a=t(...s);return a in n?n[a]:n[a]=e(...s)}}function eC(t,e,n=null,s=0){let a=[];if(n)for(let l=0;l<t.length;l+=1){let o=t[l],c=n.computeDateTop(o.start,e),d=Math.max(c+(s||0),n.computeDateTop(o.end,e));a.push({start:Math.round(c),end:Math.round(d)})}return a}function SQ(t,e,n,s){let a=[],l=[];for(let m=0;m<t.length;m+=1){let u=e[m];u?a.push({index:m,thickness:1,span:u}):l.push(t[m])}let{segRects:o,hiddenGroups:c}=yQ(a,n,s),d=[];for(let m of o)d.push({seg:t[m.index],rect:m});for(let m of l)d.push({seg:m,rect:null});return{segPlacements:d,hiddenGroups:c}}const _Q=Vn({hour:"numeric",minute:"2-digit",meridiem:!1});class SR extends jn{render(){return ke(ck,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:_Q}))}}class EQ extends jn{constructor(){super(...arguments),this.sortEventSegs=qt(RD)}render(){let{props:e,context:n}=this,{options:s}=n,a=s.selectMirror,l=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},c=this.sortEventSegs(e.fgEventSegs,s.eventOrder);return ke(mk,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},d=>ke("div",{className:"fc-timegrid-col-frame"},ke("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),ke("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(c,o,!1,!1,!1)),ke("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),ke("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),uk(s)&&ke(d,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,s,a,l,o){let{props:c}=this;return c.forPrint?_R(e,c):this.renderPositionedFgSegs(e,n,s,a,l,o)}renderPositionedFgSegs(e,n,s,a,l,o){let{eventMaxStack:c,eventShortHeight:d,eventOrderStrict:m,eventMinHeight:u}=this.context.options,{date:p,slatCoords:h,eventSelection:g,todayRange:x,nowDate:v}=this.props,y=s||a||l,b=eC(e,p,h,u),{segPlacements:k,hiddenGroups:w}=SQ(e,b,m,c);return ke(In,null,this.renderHiddenGroups(w,e),k.map(S=>{let{seg:j,rect:T}=S,N=j.eventRange.instance.instanceId,_=y||!!(!n[N]&&T),A=Gv(T&&T.span),P=!y&&T?this.computeSegHStyle(T):{left:0,right:0},E=!!T&&T.stackForward>0,M=!!T&&T.span.end-T.span.start<d;return ke("div",{className:"fc-timegrid-event-harness"+(E?" fc-timegrid-event-harness-inset":""),key:o||N,style:Object.assign(Object.assign({visibility:_?"":"hidden"},A),P)},ke(SR,Object.assign({seg:j,isDragging:s,isResizing:a,isDateSelecting:l,isSelected:N===g,isShort:M},ml(j,x,v))))}))}renderHiddenGroups(e,n){let{extraDateSpan:s,dateProfile:a,todayRange:l,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m}=this.props;return ke(In,null,e.map(u=>{let p=Gv(u.span),h=TQ(u.entries,n);return ke(vQ,{key:mD(aR(h)),hiddenSegs:h,top:p.top,bottom:p.bottom,extraDateSpan:s,dateProfile:a,todayRange:l,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m})}))}renderFillSegs(e,n){let{props:s,context:a}=this,o=eC(e,s.date,s.slatCoords,a.options.eventMinHeight).map((c,d)=>{let m=e[d];return ke("div",{key:MD(m.eventRange),className:"fc-timegrid-bg-harness",style:Gv(c)},n==="bg-event"?ke(tR,Object.assign({seg:m},ml(m,s.todayRange,s.nowDate))):nR(n))});return ke(In,null,o)}renderNowIndicator(e){let{slatCoords:n,date:s}=this.props;return n?e.map((a,l)=>ke(dk,{key:l,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(a.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(e){let{isRtl:n,options:s}=this.context,a=s.slotEventOverlap,l=e.levelCoord,o=e.levelCoord+e.thickness,c,d;a&&(o=Math.min(1,l+(o-l)*2)),n?(c=1-o,d=l):(c=l,d=1-o);let m={zIndex:e.stackDepth+1,left:c*100+"%",right:d*100+"%"};return a&&!e.stackForward&&(m[n?"marginLeft":"marginRight"]=20),m}}function _R(t,{todayRange:e,nowDate:n,eventSelection:s,eventDrag:a,eventResize:l}){let o=(a?a.affectedInstances:null)||(l?l.affectedInstances:null)||{};return ke(In,null,t.map(c=>{let d=c.eventRange.instance.instanceId;return ke("div",{key:d,style:{visibility:o[d]?"hidden":""}},ke(SR,Object.assign({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===s,isShort:!1},ml(c,e,n))))}))}function Gv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function TQ(t,e){return t.map(n=>e[n.index])}class AQ extends jn{constructor(){super(...arguments),this.splitFgEventSegs=qt(Ad),this.splitBgEventSegs=qt(Ad),this.splitBusinessHourSegs=qt(Ad),this.splitNowIndicatorSegs=qt(Ad),this.splitDateSelectionSegs=qt(Ad),this.splitEventDrag=qt(X1),this.splitEventResize=qt(X1),this.rootElRef=Ui(),this.cellElRefs=new gr}render(){let{props:e,context:n}=this,s=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,l=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitBgEventSegs(e.bgEventSegs,a),c=this.splitBusinessHourSegs(e.businessHourSegs,a),d=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),m=this.splitDateSelectionSegs(e.dateSelectionSegs,a),u=this.splitEventDrag(e.eventDrag,a),p=this.splitEventResize(e.eventResize,a);return ke("div",{className:"fc-timegrid-cols",ref:this.rootElRef},ke("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,ke("tbody",{role:"presentation"},ke("tr",{role:"row"},e.axis&&ke("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},ke("div",{className:"fc-timegrid-col-frame"},ke("div",{className:"fc-timegrid-now-indicator-container"},typeof s=="number"&&ke(dk,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:e.nowDate})))),e.cells.map((h,g)=>ke(EQ,{key:h.key,elRef:this.cellElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,fgEventSegs:l[g],bgEventSegs:o[g],businessHourSegs:c[g],nowIndicatorSegs:d[g],dateSelectionSegs:m[g],eventDrag:u[g],eventResize:p[g],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new $c(this.rootElRef.current,DQ(this.cellElRefs.currentMap,e.cells),!0,!1))}}function DQ(t,e){return e.map(n=>t[n.key])}class RQ extends Qa{constructor(){super(...arguments),this.processSlotOptions=qt(PQ),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:s}=this.state;if(n&&s){if(e.time){let a=s.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),n(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return ke("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},ke(gQ,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),ke(AQ,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:s,options:a}=this.context,{colCoords:l}=this,{dateProfile:o}=this.props,{slatCoords:c}=this.state,{snapDuration:d,snapsPerSlot:m}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),u=l.leftToIndex(e),p=c.positions.topToIndex(n);if(u!=null&&p!=null){let h=this.props.cells[u],g=c.positions.tops[p],x=c.positions.getHeight(p),v=(n-g)/x,y=Math.floor(v*m),b=p*m+y,k=this.props.cells[u].date,w=oy(o.slotMinTime,yU(d,b)),S=s.add(k,w),j=s.add(S,d);return{dateProfile:o,dateSpan:Object.assign({range:{start:S,end:j},allDay:!1},h.extraDateSpan),dayEl:l.els[u],rect:{left:l.lefts[u],right:l.rights[u],top:g,bottom:g+x},layer:0}}return null}}function PQ(t,e){let n=e||t,s=qw(t,n);return s===null&&(n=t,s=1),{snapDuration:n,snapsPerSlot:s}}class MQ extends YD{sliceRange(e,n){let s=[];for(let a=0;a<n.length;a+=1){let l=oo(e,n[a]);l&&s.push({start:l.start,end:l.end,isStart:l.start.valueOf()===e.start.valueOf(),isEnd:l.end.valueOf()===e.end.valueOf(),col:a})}return s}}class IQ extends Qa{constructor(){super(...arguments),this.buildDayRanges=qt(OQ),this.slicer=new MQ,this.timeColsRef=Ui()}render(){let{props:e,context:n}=this,{dateProfile:s,dayTableModel:a}=e,{nowIndicator:l,nextDayThreshold:o}=n.options,c=this.buildDayRanges(a,s,n.dateEnv);return ke(sd,{unit:l?"minute":"day"},(d,m)=>ke(RQ,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,s,null,n,c),{forPrint:e.forPrint,axis:e.axis,dateProfile:s,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:d,nowIndicatorSegs:l&&this.slicer.sliceNowDate(d,s,o,n,c),todayRange:m,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function OQ(t,e,n){let s=[];for(let a of t.headerDates)s.push({start:n.add(a,e.slotMinTime),end:n.add(a,e.slotMaxTime)});return s}const tC=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function FQ(t,e,n,s,a){let l=new Date(0),o=t,c=Jt(0),d=n||LQ(s),m=[];for(;ma(o)<ma(e);){let u=a.add(l,o),p=qw(c,d)!==null;m.push({date:u,time:o,key:u.toISOString(),isoTimeStr:IU(u),isLabeled:p}),o=oy(o,s),c=oy(c,s)}return m}function LQ(t){let e,n,s;for(e=tC.length-1;e>=0;e-=1)if(n=Jt(tC[e]),s=qw(n,t),s!==null&&s>1)return n;return t}class $Q extends mQ{constructor(){super(...arguments),this.buildTimeColsModel=qt(BQ),this.buildSlatMetas=qt(FQ)}render(){let{options:e,dateEnv:n,dateProfileGenerator:s}=this.context,{props:a}=this,{dateProfile:l}=a,o=this.buildTimeColsModel(l,s),c=this.allDaySplitter.splitProps(a),d=this.buildSlatMetas(l.slotMinTime,l.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:m}=e,u=!m,p=m,h=e.dayHeaders&&ke(WD,{dates:o.headerDates,dateProfile:l,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),g=e.allDaySlot!==!1&&(v=>ke(NR,Object.assign({},c.allDay,{dateProfile:l,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:v.tableMinWidth,colGroupNode:v.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:v.clientWidth,clientHeight:v.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),x=v=>ke(IQ,Object.assign({},c.timed,{dayTableModel:o,dateProfile:l,axis:u,slotDuration:e.slotDuration,slatMetas:d,forPrint:a.forPrint,tableColGroupNode:v.tableColGroupNode,tableMinWidth:v.tableMinWidth,clientWidth:v.clientWidth,clientHeight:v.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:v.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return p?this.renderHScrollLayout(h,g,x,o.colCnt,m,d,this.state.slatCoords):this.renderSimpleLayout(h,g,x)}}function BQ(t,e){let n=new KD(t.renderRange,e);return new GD(n,!1)}var qQ='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Ow(qQ);const HQ={allDaySlot:Boolean};var zQ=Fr({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:HQ,views:{timeGrid:{component:$Q,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});rk.touchMouseIgnoreWait=500;let xy=0,Qp=0,yy=!1;class ER{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&VQ(n)&&this.tryStart(n)){let s=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let s=this.createEventFromMouse(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let s=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let a=n.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let s=this.createEventFromTouch(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=n=>{if(this.isDragging){let s=n.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,UQ()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:a,deltaX:s-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new Gg,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),WQ()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),KQ()}tryStart(e){let n=this.querySubjectEl(e),s=e.target;return n&&(!this.handleSelector||Ii(s,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){yy=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Ii(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return xy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(yy=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let s=0,a=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:a}}createEventFromTouch(e,n){let s=e.touches,a,l,o=0,c=0;return s&&s.length?(a=s[0].pageX,l=s[0].pageY):(a=e.pageX,l=e.pageY),n?(this.origPageX=a,this.origPageY=l):(o=a-this.origPageX,c=l-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:l,deltaX:o,deltaY:c}}}function VQ(t){return t.button===0&&!t.ctrlKey}function UQ(){xy+=1,setTimeout(()=>{xy-=1},rk.touchMouseIgnoreWait)}function WQ(){Qp+=1,Qp===1&&window.addEventListener("touchmove",TR,{passive:!1})}function KQ(){Qp-=1,Qp||window.removeEventListener("touchmove",TR,{passive:!1})}function TR(t){yy&&t.preventDefault()}class GQ{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let s=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,n){let s=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();s.style.transition="top "+n+"ms,left "+n+"ms",sm(s,{left:a.left,top:a.top}),sU(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&(Lw(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&sm(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),sm(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class AR extends sk{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class DR extends AR{constructor(e,n){super(new EK(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return SK(this.scrollController.el)}}class YQ extends AR{constructor(e){super(new TK,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const nC=typeof performance=="function"?performance.now:Date.now;class QQ{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=nC();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let s=e-window.scrollX,a=n-window.scrollY,l=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:s-this.pointerScreenX;l<0?this.everMovedUp=!0:l>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(nC()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:s}=e,{edgeThreshold:a}=this,l=a-e.distance,o=l*l/(a*a)*this.maxVelocity*n,c=1;switch(e.name){case"left":c=-1;case"right":s.setScrollLeft(s.getScrollLeft()+o*c);break;case"top":c=-1;case"bottom":s.setScrollTop(s.getScrollTop()+o*c);break}}computeBestEdge(e,n){let{edgeThreshold:s}=this,a=null,l=this.scrollCaches||[];for(let o of l){let c=o.clientRect,d=e-c.left,m=c.right-e,u=n-c.top,p=c.bottom-n;d>=0&&m>=0&&u>=0&&p>=0&&(u<=s&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"top",distance:u}),p<=s&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>p)&&(a={scrollCache:o,name:"bottom",distance:p}),d<=s&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"left",distance:d}),m<=s&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>m)&&(a={scrollCache:o,name:"right",distance:m}))}return a}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new YQ(!1):new DR(n,!1))}queryScrollEls(e){let n=[];for(let s of this.scrollQuery)typeof s=="object"?n.push(s):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return n}}class su extends RK{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,aU(document.body),lU(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let l=this.minDistance,o,{deltaX:c,deltaY:d}=a;o=c*c+d*d,o>=l*l&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,rU(document.body),oU(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new ER(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),n&&(s.selector=n),this.mirror=new GQ,this.autoScroller=new QQ}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class ZQ{constructor(e){this.el=e,this.origRect=ik(e),this.scrollCaches=HD(e).map(n=>new DR(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let s={left:e,top:n};for(let a of this.scrollCaches)if(!XQ(a.getEventTarget())&&!hK(s,a.clientRect))return!1;return!0}}function XQ(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Yg{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):a.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Gg}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},s=n,a=e.subjectEl,l;a instanceof HTMLElement&&(l=ik(a),s=pK(s,l));let o=this.initialHit=this.queryHitForOffset(s.left,s.top);if(o){if(this.useSubjectCenter&&l){let c=$D(l,o.rect);c&&(s=gK(c))}this.coordAdjust=fK(s,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!Qg(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=Tr(this.droppableStore,e=>(e.component.prepareHits(),new ZQ(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:s,offsetTrackers:a}=this,l=null;for(let o in s){let c=s[o].component,d=a[o];if(d&&d.isWithinClipping(e,n)){let m=d.computeLeft(),u=d.computeTop(),p=e-m,h=n-u,{origRect:g}=d,x=g.right-g.left,v=g.bottom-g.top;if(p>=0&&p<x&&h>=0&&h<v){let y=c.queryHit(p,h,x,v);y&&Wg(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||d.el.contains(d.el.getRootNode().elementFromPoint(p+m-window.scrollX,h+u-window.scrollY)))&&(!l||y.layer>l.layer)&&(y.componentId=o,y.context=c.context,y.rect.left+=m,y.rect.right+=m,y.rect.top+=u,y.rect.bottom+=u,l=y)}}}return l}}function Qg(t,e){return!t&&!e?!0:!!t!=!!e?!1:nK(t.dateSpan,e.dateSpan)}function RR(t,e){let n={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(n,s(t,e));return Object.assign(n,JQ(t,e.dateEnv)),n}function JQ(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class eZ extends id{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:a}=this,l=s.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(l))},this.handleDragEnd=s=>{let{component:a}=this,{pointer:l}=this.dragging;if(!l.wasTouchScroll){let{initialHit:o,finalHit:c}=this.hitDragging;if(o&&c&&Qg(o,c)){let{context:d}=a,m=Object.assign(Object.assign({},RR(o.dateSpan,d)),{dayEl:o.dayEl,jsEvent:s.origEvent,view:d.viewApi||d.calendarApi.view});d.emitter.trigger("dateClick",m)}}},this.dragging=new su(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Yg(this.dragging,tk(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class tZ extends id{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:c,dragging:d}=this,{options:m}=c.context,u=m.selectable&&c.isValidDateDownEl(o.origEvent.target);d.setIgnoreMove(!u),d.delay=o.isTouch?nZ(c):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,c)=>{let{context:d}=this.component,m=null,u=!1;if(o){let p=this.hitDragging.initialHit;o.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,o)||(m=iZ(p,o,d.pluginHooks.dateSelectionTransformers)),(!m||!LK(m,o.dateProfile,d))&&(u=!0,m=null)}m?d.dispatch({type:"SELECT_DATES",selection:m}):c||d.dispatch({type:"UNSELECT_DATES"}),u?$w():Bw(),c||(this.dragSelection=m)},this.handlePointerUp=o=>{this.dragSelection&&(TD(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:s}=n.context,a=this.dragging=new su(e.el);a.touchScrollAllowed=!1,a.minDistance=s.selectMinDistance||0,a.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new Yg(this.dragging,tk(e));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function nZ(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function iZ(t,e,n){let s=t.dateSpan,a=e.dateSpan,l=[s.range.start,s.range.end,a.range.start,a.range.end];l.sort(hU);let o={};for(let c of n){let d=c(t,e);if(d===!1)return null;d&&Object.assign(o,d)}return o.range={start:l[0],end:l[3]},o.allDay=s.allDay,o}class au extends id{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let c=o.origEvent.target,{component:d,dragging:m}=this,{mirror:u}=m,{options:p}=d.context,h=d.context;this.subjectEl=o.subjectEl;let g=this.subjectSeg=Lc(o.subjectEl),v=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=Zw(h.getCurrentData().eventStore,v),m.minDistance=o.isTouch?0:p.eventDragMinDistance,m.delay=o.isTouch&&v!==d.props.eventSelection?aZ(d):null,p.fixedMirrorParent?u.parentNode=p.fixedMirrorParent:u.parentNode=Ii(c,".fc"),u.revertDuration=p.dragRevertDuration;let y=d.isValidSegDownEl(c)&&!Ii(c,".fc-event-resizer");m.setIgnoreMove(!y),this.isDragging=y&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let c=this.component.context,d=this.eventRange,m=d.instance.instanceId;o.isTouch?m!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(o),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new zn(c,d.def,d.instance),jsEvent:o.origEvent,view:c.viewApi}))},this.handleHitUpdate=(o,c)=>{if(!this.isDragging)return;let d=this.relevantEvents,m=this.hitDragging.initialHit,u=this.component.context,p=null,h=null,g=null,x=!1,v={affectedEvents:d,mutatedEvents:_s(),isEvent:!0};if(o){p=o.context;let y=p.options;u===p||y.editable&&y.droppable?(h=sZ(m,o,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(g=ek(d,p.getCurrentData().eventUiBases,h,p),v.mutatedEvents=g,QD(v,o.dateProfile,p)||(x=!0,h=null,g=null,v.mutatedEvents=_s()))):p=null}this.displayDrag(p,v),x?$w():Bw(),c||(u===p&&Qg(m,o)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=h,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let c=this.component.context,d=c.viewApi,{receivingContext:m,validMutation:u}=this,p=this.eventRange.def,h=this.eventRange.instance,g=new zn(c,p,h),x=this.relevantEvents,v=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:o.origEvent,view:d}),u){if(m===c){let b=new zn(c,v.defs[p.defId],h?v.instances[h.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:v});let k={oldEvent:g,event:b,relatedEvents:Ql(v,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:x})}},w={};for(let S of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(w,S(u,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},k),w),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:d})),c.emitter.trigger("eventChange",k)}else if(m){let b={event:g,relatedEvents:Ql(x,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:x})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:o.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:x}),c.emitter.trigger("eventRemove",b);let k=v.defs[p.defId],w=v.instances[h.instanceId],S=new zn(m,k,w);m.dispatch({type:"MERGE_EVENTS",eventStore:v});let j={event:S,relatedEvents:Ql(v,m,w),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:v})}};m.emitter.trigger("eventAdd",j),o.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},RR(y.dateSpan,m)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:y.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},j),{draggedEl:o.subjectEl,view:y.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:s}=n.context,a=this.dragging=new su(e.el);a.pointer.selector=au.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new Yg(this.dragging,hy);l.useSubjectCenter=e.useEventCenter,l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let s=this.component.context,a=this.receivingContext;a&&a!==e&&(a===s?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:_s(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}au.SELECTOR=".fc-event-draggable, .fc-event-resizable";function sZ(t,e,n,s){let a=t.dateSpan,l=e.dateSpan,o=a.range.start,c=l.range.start,d={};a.allDay!==l.allDay&&(d.allDay=l.allDay,d.hasEnd=e.context.options.allDayMaintainDuration,l.allDay?o=On(n):o=n);let m=sc(o,c,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);m.milliseconds&&(d.allDay=!1);let u={datesDelta:m,standardProps:d};for(let p of s)p(u,t,e);return u}function aZ(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class rZ extends id{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let{component:o}=this,c=this.querySegEl(l),d=Lc(c),m=this.eventRange=d.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(l.origEvent.target)||l.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=l=>{let{context:o}=this.component,c=this.eventRange;this.relevantEvents=Zw(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let d=this.querySegEl(l);this.draggingSegEl=d,this.draggingSeg=Lc(d),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:d,event:new zn(o,c.def,c.instance),jsEvent:l.origEvent,view:o.viewApi})},this.handleHitUpdate=(l,o,c)=>{let{context:d}=this.component,m=this.relevantEvents,u=this.hitDragging.initialHit,p=this.eventRange.instance,h=null,g=null,x=!1,v={affectedEvents:m,mutatedEvents:_s(),isEvent:!0};l&&(l.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,l)||(h=lZ(u,l,c.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),h&&(g=ek(m,d.getCurrentData().eventUiBases,h,d),v.mutatedEvents=g,QD(v,l.dateProfile,d)||(x=!0,h=null,g=null,v.mutatedEvents=null)),g?d.dispatch({type:"SET_EVENT_RESIZE",state:v}):d.dispatch({type:"UNSET_EVENT_RESIZE"}),x?$w():Bw(),o||(h&&Qg(u,l)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=g)},this.handleDragEnd=l=>{let{context:o}=this.component,c=this.eventRange.def,d=this.eventRange.instance,m=new zn(o,c,d),u=this.relevantEvents,p=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:l.origEvent,view:o.viewApi}),this.validMutation){let h=new zn(o,p.defs[c.defId],d?p.instances[d.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:p});let g={oldEvent:m,event:h,relatedEvents:Ql(p,o,d),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Jt(0),endDelta:this.validMutation.endDelta||Jt(0),jsEvent:l.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",g)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,s=this.dragging=new su(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.context.options.dragScroll;let a=this.hitDragging=new Yg(this.dragging,tk(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Ii(e.subjectEl,".fc-event")}}function lZ(t,e,n,s){let a=t.context.dateEnv,l=t.dateSpan.range.start,o=e.dateSpan.range.start,c=sc(l,o,a,t.largeUnit);if(n){if(a.add(s.start,c)<s.end)return{startDelta:c}}else if(a.add(s.end,c)>s.start)return{endDelta:c};return null}class oZ{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let a=this.context.options.unselectCancel,l=rD(s.origEvent);this.matchesCancel=!!Ii(l,a),this.matchesEvent=!!Ii(l,au.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:a}=this,{documentPointer:l}=this,o=a.getCurrentData();if(!l.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let c=a.options.unselectAuto;c&&(!c||!this.matchesCancel)&&a.calendarApi.unselect(s)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new ER(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const cZ={fixedMirrorParent:Me},dZ={dateClick:Me,eventDragStart:Me,eventDragStop:Me,eventDrop:Me,eventResizeStart:Me,eventResizeStop:Me,eventResize:Me,drop:Me,eventReceive:Me,eventLeave:Me};rk.dataAttrPrefix="";var mZ=Fr({name:"@fullcalendar/interaction",componentInteractions:[eZ,tZ,au,rZ],calendarInteractions:[oZ],elementDraggingImpl:su,optionRefiners:cZ,listenerRefiners:dZ});const uZ=()=>i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"}),i.jsx(C,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((t,e)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(C,{width:"60px",height:"1rem"})},`day-${e}`))}),Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((n,s)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(C,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(C,{width:"100%",height:"6px",className:"rounded"}),i.jsx(C,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${e}-${s}`))},`week-${e}`))]})]})})}),hZ=()=>(window.kiviCareData?.locale||window.wp?.i18n?.getLocaleData?.()?.[""]?.lang||"en").replace("_","-").toLowerCase(),pZ=t=>{switch(String(t)){case"0":return"#f5365c";case"1":return"#23a359";case"2":return"#efc51c";case"3":return"#78c0fb";case"4":return"#4874dc";default:return"#007bff"}},gZ=({events:t=[],onEventClick:e,onViewChange:n,loading:s=!1,eventContent:a})=>{const[l,o]=f.useState("dayGridMonth"),[c,d]=f.useState(!1);f.useEffect(()=>{!s&&!c&&d(!0)},[s,c]);const m=f.useCallback(h=>{e&&typeof e=="function"&&e(h)},[e]),u=f.useCallback(h=>{const g=h.view?.type||"dayGridMonth";o(g),n&&typeof n=="function"&&n(h)},[n]),p=ze.useMemo(()=>t.map(h=>{const g=h.color||pZ(h.status);return{id:parseInt(h.id,10),title:h.title||`${h.doctorName} - ${h.patientName||r("Patient","kivicare-clinic-management-system")}`,start:h.start||h.appointmentStartDateWF,end:h.end||h.appointmentEndDateWF,backgroundColor:g,borderColor:g,textColor:"#ffffff",allDay:!1,extendedProps:{...h}}}),[t]);return s&&!c?i.jsx(uZ,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"calendar-container",style:{position:"relative"},children:i.jsx(gR,{plugins:[sQ,zQ,mZ],initialView:l,locale:hZ(),headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:r("Today","kivicare-clinic-management-system"),month:r("Month","kivicare-clinic-management-system"),week:r("Week","kivicare-clinic-management-system"),day:r("Day","kivicare-clinic-management-system")},events:p,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!0},dayMaxEvents:3,navLinks:!0,selectable:!0,editable:!1,eventClick:m,datesSet:u,eventContent:a,height:"auto",contentHeight:"auto",windowResize:()=>{}})})})})},gk={getSystemNotices:()=>ve({endpoint:"system/notices",method:"GET"}),sendTestEmail:(t={})=>ve({endpoint:"system/notices/test-email",method:"POST",data:t}),runMigrations:()=>ve({endpoint:"system/notices/run-migrations",method:"POST"})},fZ=(t={})=>ft({queryKey:["system","notices"],queryFn:()=>gk.getSystemNotices(),staleTime:300*1e3,...t}),vZ=()=>Le({mutationFn:t=>gk.sendTestEmail(t)}),xZ=()=>Le({mutationFn:()=>gk.runMigrations()}),wt=({title:t,text:e,icon:n="ph-warning",iconColor:s="text-warning",bgIconColor:a="bg-warning",confirmButtonText:l=r("Yes","kivicare-clinic-management-system"),cancelButtonText:o=r("No","kivicare-clinic-management-system"),confirmButtonClass:c="btn-danger",cancelButtonClass:d="btn-light",...m})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle ${a} bg-opacity-25 avatar-70"
            >
              <i class="ph ${n} ${s} fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!0,focusConfirm:!1,reverseButtons:!0,confirmButtonText:l,cancelButtonText:o,customClass:{popup:"rounded-4 p-4",confirmButton:`btn ${c} px-4`,cancelButton:`btn ${d} px-4`,actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...m}),yt=({title:t=r("Loading...","kivicare-clinic-management-system"),text:e=r("Please wait...","kivicare-clinic-management-system"),...n}={})=>At.fire({allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,background:"transparent",customClass:{popup:"border-0 shadow-none"},html:`
            <div class="bg-white rounded-4 shadow-lg px-5 py-5 text-center">
                <!-- Spinner -->
                <div class="mb-4 d-flex justify-content-center">
                    <div class="spinner-grow text-primary me-1"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.1s"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.2s"></div>
                </div>
                <!-- Title -->
                <h4 class="fw-semibold mb-2">
                    ${t||r("Deleting...","kivicare-clinic-management-system")}
                </h4>

                <!-- Description -->
                <p class="text-muted mb-1">
                    ${e||r("Please wait.","kivicare-clinic-management-system")}
                </p>

                <p class="text-muted small mb-0">
                    ${r("This wont take long.","kivicare-clinic-management-system")}
                </p>
            </div>
          `,...n}),Tt=({title:t=r("Success","kivicare-clinic-management-system"),text:e,confirmButtonText:n=r("OK","kivicare-clinic-management-system"),...s})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-25 avatar-70"
            >
              <i class="ph ph-check text-success fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),rt=({title:t=r("Error","kivicare-clinic-management-system"),text:e,confirmButtonText:n=r("OK","kivicare-clinic-management-system"),...s})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-danger bg-opacity-25 avatar-70"
            >
              <i class="ph ph-x text-danger fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-danger px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),Wi=()=>{At.close()},yZ=()=>{const[t,e]=f.useState([]),{data:n,isLoading:s,refetch:a}=fZ(),{mutate:l,isLoading:o}=vZ(),{mutate:c,isLoading:d}=xZ();if(f.useEffect(()=>{n?.data&&e(n.data)},[n]),t.length===0||s)return null;const m=async()=>{const p=window.kiviCareData?.admin_email||"",h=await wt({html:`
            <div class="pt-3 pb-4 text-start">
                <h4 class="fs-5 mb-0">
                    Add New Bill
                </h4>
            </div>
                <form id="test-email-form">
                    <div class="mb-3 text-start">
                        <label for="swal-email" class="form-label">
                            ${r("Email Address","kivicare-clinic-management-system")}
                        </label>
                        <input 
                            type="email" 
                            class="form-control" 
                            id="swal-email" 
                            value="${p}"
                            placeholder="${r("Enter email address","kivicare-clinic-management-system")}"
                            required
                        />
                        <div class="form-text text-start mt-2">
                            ${r("Test email will be sent to this address","kivicare-clinic-management-system")}
                        </div>
                    </div>
                </form>
            `,showCancelButton:!0,confirmButtonText:r("Send Email","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",focusConfirm:!1,allowOutsideClick:!1,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",cancelButton:"btn btn-secondary px-4",actions:"justify-content-end gap-2 mt-4 mx-0 px-3"},reverseButtons:!0,didOpen:()=>{const g=document.getElementById("swal-email");g&&g.focus()},preConfirm:()=>{const g=document.getElementById("swal-email").value;return g?{email:g}:(rt({text:r("Please enter an email address","kivicare-clinic-management-system")}),!1)}});if(h.isConfirmed&&h.value){const{email:g}=h.value;yt({title:r("Sending Email...","kivicare-clinic-management-system"),text:r("Please wait while we send the test email.","kivicare-clinic-management-system"),didOpen:()=>{l({email:g},{onSuccess:x=>{if(x.status===500){rt({title:r("Email Failed","kivicare-clinic-management-system"),text:x.data?.message||x.message||r("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")});return}Tt({title:r("Email Sent!","kivicare-clinic-management-system"),text:r("Test email has been sent successfully. Please check your inbox.","kivicare-clinic-management-system")}),e(v=>v.filter(y=>y.type!=="smtp"))},onError:x=>{console.error("Email sending error:",x),rt({title:r("Email Failed","kivicare-clinic-management-system"),text:x.response?.data?.message||x.message||r("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")})}})}})}},u=async p=>{const h=p.details?.pending_count||0,g=p.details?.plugin_count||1,x=p.details?.migrations_by_plugin||{},v=p.details?.migrations||[];let y="";Object.keys(x).length>1?y=Object.entries(x).map(([k,w])=>`
                <div class="mb-2">
                    <strong class="text-primary">${k}:</strong>
                    <div class="ms-3">
                        ${w.map(S=>`
                            <div class="small text-muted py-1"> ${S}</div>
                        `).join("")}
                    </div>
                </div>
            `).join(""):y=v.map(k=>`
                <div class="small text-muted py-1"> ${k}</div>
            `).join(""),(await wt({title:r("Run Database Migrations","kivicare-clinic-management-system"),html:`
                <div class="text-start">
                    <div class="mb-4 text-center">
                        <span class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-25 avatar-70">
                            <i class="ph ph-database fs-1"></i>
                        </span>
                    </div>
                    
                    <p class="mb-3">
                        ${g>1?Pi(r("This will run database migrations from %1$d plugins:","kivicare-clinic-management-system"),g):r("This will run the following database migrations:","kivicare-clinic-management-system")}
                    </p>
                    <div class="mb-3">
                        <strong>
                            ${Pi(r("Total Pending Migrations: %1$d","kivicare-clinic-management-system"),h)}
                            ${g>1?Pi(r(" (from %1$d plugins)","kivicare-clinic-management-system"),g):""}
                        </strong>
                    </div>
                    ${v.length>0?`
                        <div class="mb-3">
                            <div class="border rounded p-3 bg-body" style="max-height: 300px; overflow-y: auto;">
                                ${y}
                            </div>
                        </div>
                    `:""}
                    <div class="alert alert-warning bg-warning-subtle small">
                        <i class="ph ph-warning-circle me-2"></i>
                        ${r("It is recommended to backup your database before running migrations.","kivicare-clinic-management-system")}
                    </div>
                    ${g>1?`
                        <div class="alert alert-info bg-info-subtle small">
                            <i class="ph ph-info me-2"></i>
                            ${r("Migrations from all plugins will be executed in the correct order.","kivicare-clinic-management-system")}
                        </div>
                    `:""}
                </div>
            `,icon:"ph-question",iconColor:"text-primary",bgIconColor:"bg-primary",showCancelButton:!0,confirmButtonText:r("Run Migrations","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",allowOutsideClick:!1,focusCancel:!0,width:"600px"})).isConfirmed&&yt({title:r("Running Migrations...","kivicare-clinic-management-system"),text:r("Please wait while we update your database. This may take a few moments.","kivicare-clinic-management-system"),didOpen:()=>{c({},{onSuccess:k=>{const w=k.data?.migrations_run||0;Tt({title:r("Migrations Completed!","kivicare-clinic-management-system"),text:w>0?Pi(r("%1$d migrations have been executed successfully.","kivicare-clinic-management-system"),w):r("No migrations were needed.","kivicare-clinic-management-system")}),e(S=>S.filter(j=>j.type!=="migration")),setTimeout(()=>{a()},1e3)},onError:k=>{console.error("Migration error:",k),rt({title:r("Migration Failed","kivicare-clinic-management-system"),text:k.response?.data?.message||k.message||r("Failed to run migrations. Please try again or contact support.","kivicare-clinic-management-system")})}})}})};return i.jsx(i.Fragment,{children:t.map((p,h)=>{if(p.type==="version")return i.jsx("div",{className:"desktop-warning px-5 my-1 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("h6",{className:"setting-title mb-0",children:p.message})})},"version");if(p.type==="smtp")return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("h6",{className:"setting-title mb-0",children:p.message}),i.jsx("a",{href:"https://kivicare.io/docs/email-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:r("Learn more about SMTP configuration","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:m,disabled:o,children:r("Send Test Email","kivicare-clinic-management-system")})})]},"smtp");if(p.type==="migration"){const g=p.details?.pending_count||0,x=p.details?.plugin_count||1;return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-database text-danger fs-5 me-1"}),i.jsxs("div",{children:[i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message}),g>0&&i.jsx("small",{className:"text-muted",children:x>1?Pi(r("%1$d pending migrations from %2$d plugins","kivicare-clinic-management-system"),g,x):Pi(r("%1$d pending migrations found","kivicare-clinic-management-system"),g)})]}),i.jsx("a",{href:"https://kivicare.io/docs/database-migrations/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:r("Learn more about database migrations","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>u(p),disabled:d,children:[i.jsx("i",{className:"ph ph-play me-1"}),d?r("Running...","kivicare-clinic-management-system"):r("Run Migrations","kivicare-clinic-management-system")]})})]},"migration")}return p.type==="error"?i.jsx("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-warning-circle text-danger fs-5 me-1"}),i.jsx("h6",{className:"setting-title mb-0 text-danger",children:p.message})]})},"error"):null})})},$a=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${s}`},fk=(t,e)=>e?Array.isArray(e)?t.filter(n=>e.includes(n.value)||e.includes(String(n.value))):t.find(n=>n.value===e||n.value===String(e))||null:null,PR=t=>{if(!t)return"";const e=document.createElement("div");e.innerHTML=t;const n=["script","style","iframe","object","embed","form","input","button","link","meta"],s=["onload","onerror","onclick","onmouseover","onmouseout","onkeydown","onkeyup","onkeypress","javascript:"];return n.forEach(l=>{e.querySelectorAll(l).forEach(c=>c.remove())}),e.querySelectorAll("*").forEach(l=>{Array.from(l.attributes).forEach(o=>{s.some(c=>o.name.toLowerCase().includes(c)||o.value.toLowerCase().includes("javascript:"))&&l.removeAttribute(o.name)})}),e.innerHTML},MR=(t,e,n)=>{function s(o){return o.toString(16)}function a(o){return parseInt(o,16)}n=typeof n<"u"?n:50;let l="#";for(let o=0;o<=5;o+=2){const c=a(t.substr(o,2)),d=a(e.substr(o,2));let m=s(Math.floor(d+(c-d)*(n/100)));for(;m.length<2;)m="0"+m;l+=m}return l},bZ=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return MR("FFFFFF",n,e)},mh=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return MR("000000",n,e)},wZ=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null},iC=t=>{let e=document.getElementById("kivicare-dashboard-colors-style"),n=`[data-bs-theme="light"],:root {
`,s={};return Object.entries(t).forEach(([l,o])=>{const c=`--bs-${l}`;s[c]=o,s[`${c}-rgb`]=wZ(o),s[`${c}-bg-subtle`]=bZ(o,80),s[`${c}-border-subtle`]=`var(${c}-bg-subtle)`,s["--bs-link-color-rgb"]=`var(${c}-rgb)`,s[`${c}-hover-bg`]=mh(o,20),s[`${c}-hover-border`]=mh(o,30),s[`${c}-active-bg`]=mh(o,20),s[`${c}-active-border`]=mh(o,30)}),Object.entries(s).forEach(([l,o])=>{n+=`
                ${l}: ${o};`}),n+=`
}`,e||(e=document.createElement("style"),e.setAttribute("id","kivicare-dashboard-colors-style"),document.head.appendChild(e)),e.innerHTML=n,document.querySelectorAll("style.custom-color").forEach(l=>l.remove()),s},Wn=()=>({firstDayOfWeek:window.kc_frontend?.start_of_week?parseInt(window.kc_frontend.start_of_week,10):0,weekdays:{shorthand:[r("Sun","kivicare-clinic-management-system"),r("Mon","kivicare-clinic-management-system"),r("Tue","kivicare-clinic-management-system"),r("Wed","kivicare-clinic-management-system"),r("Thu","kivicare-clinic-management-system"),r("Fri","kivicare-clinic-management-system"),r("Sat","kivicare-clinic-management-system")],longhand:[r("Sunday","kivicare-clinic-management-system"),r("Monday","kivicare-clinic-management-system"),r("Tuesday","kivicare-clinic-management-system"),r("Wednesday","kivicare-clinic-management-system"),r("Thursday","kivicare-clinic-management-system"),r("Friday","kivicare-clinic-management-system"),r("Saturday","kivicare-clinic-management-system")]},months:{shorthand:[r("Jan","kivicare-clinic-management-system"),r("Feb","kivicare-clinic-management-system"),r("Mar","kivicare-clinic-management-system"),r("Apr","kivicare-clinic-management-system"),r("May","kivicare-clinic-management-system"),r("Jun","kivicare-clinic-management-system"),r("Jul","kivicare-clinic-management-system"),r("Aug","kivicare-clinic-management-system"),r("Sep","kivicare-clinic-management-system"),r("Oct","kivicare-clinic-management-system"),r("Nov","kivicare-clinic-management-system"),r("Dec","kivicare-clinic-management-system")],longhand:[r("January","kivicare-clinic-management-system"),r("February","kivicare-clinic-management-system"),r("March","kivicare-clinic-management-system"),r("April","kivicare-clinic-management-system"),r("May","kivicare-clinic-management-system"),r("June","kivicare-clinic-management-system"),r("July","kivicare-clinic-management-system"),r("August","kivicare-clinic-management-system"),r("September","kivicare-clinic-management-system"),r("October","kivicare-clinic-management-system"),r("November","kivicare-clinic-management-system"),r("December","kivicare-clinic-management-system")]}}),kZ=t=>{let e=document.documentElement.lang||"en-US";try{return new Intl.NumberFormat(e).format(t)}catch{return new Intl.NumberFormat("en-US").format(t)}},xi=t=>{if(!t)return"Y-m-d";const e={d:"d",D:"D",j:"j",l:"l",N:"N",S:"S",w:"w",z:"z",W:"W",F:"F",m:"m",M:"M",n:"n",t:"K",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"h",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",v:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"U"};let n="",s=!1;for(let a=0;a<t.length;a++){const l=t[a];s?(n+=l,s=!1):l==="\\"?(s=!0,n+="\\"):n+=e[l]!==void 0?e[l]:l}return n},Zn=t=>{if(!t)return null;const[e,n,s]=t.split("-").map(Number);return new Date(e,n-1,s)};var uh={},sC;function jZ(){if(sC)return uh;sC=1,Object.defineProperty(uh,"__esModule",{value:!0});function t(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(a.length===2)return n(a[0],a[1])||null;var o=a.slice(1).reduce(function(c,d){return n(c,d)},a[0]);return o||null}uh.default=t;var e=new WeakMap;function n(a,l){if(a&&l){var o=e.get(a)||new WeakMap;e.set(a,o);var c=o.get(l)||(function(d){s(a,d),s(l,d)});return o.set(l,c),c}return a||l}function s(a,l){typeof a=="function"?a(l):a.current=l}return uh}var NZ=jZ();const CZ=ya(NZ);var aC=Symbol("useLazyRef empty value"),SZ=t=>{const e=f.useRef(aC);return e.current===aC&&(e.current=t()),e};function _Z(){var t=f.useRef(!1);return f.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t}var hh=function(e){var n=ze.useRef(e);return op(function(){n.current=e}),n};function Vl(t){return{isOk:()=>!0,isOkAnd:n=>n(t),isErr:()=>!1,isErrAnd:()=>!1,ok:()=>vk(t),err:()=>Xl(),map:n=>Vl(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),mapErr:()=>Vl(t),expect:()=>t,expectErr:n=>{throw new Error(n)},unwrap:()=>t,unwrapErr:()=>{throw new Error(`${t}`)},unwrapOr:()=>t,unwrapOrElse:()=>t,and:n=>n,andThen:n=>n(t),or:()=>Vl(t),orElse:()=>Vl(t)}}function Ul(t){return{isOk:()=>!1,isOkAnd:()=>!1,isErr:()=>!0,isErrAnd:n=>n(t),ok:()=>Xl(),err:()=>vk(t),map:()=>Ul(t),mapOr:n=>n,mapOrElse:n=>n(t),mapErr:n=>Ul(n(t)),expect:n=>{throw new Error(n)},expectErr:()=>t,unwrap:()=>{throw new Error(`${t}`)},unwrapErr:()=>t,unwrapOr:n=>n,unwrapOrElse:n=>n(t),and:()=>Ul(t),andThen:()=>Ul(t),or:n=>n,orElse:n=>n(t)}}function Xl(){const t={and:()=>Xl(),andThen:()=>Xl(),expect:e=>{throw new Error(e)},filter:()=>t,isSome:()=>!1,isSomeAnd:()=>!1,isNone:()=>!0,map:()=>Xl(),mapOr:e=>e,mapOrElse:e=>e(),okOr:e=>Ul(e),okOrElse:e=>Ul(e()),or:e=>e,orElse:e=>e(),unwrap:()=>{throw new Error("panic! call `unwrap` on a `None` value")},unwrapOr:e=>e,unwrapOrElse:e=>e(),xor:e=>e.isSome()?e:t};return t}function vk(t){const e={and:n=>n,andThen:n=>n(t),expect:()=>t,filter:n=>n(t)?e:Xl(),isSome:()=>!0,isSomeAnd:n=>n(t),isNone:()=>!1,map:n=>vk(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),okOr:()=>Vl(t),okOrElse:()=>Vl(t),or:()=>e,orElse:()=>e,unwrap:()=>t,unwrapOr:()=>t,unwrapOrElse:()=>t,xor:n=>n.isNone()?e:Xl()};return e}function EZ(t){return t.then(e=>Vl(e),e=>Ul(e))}var TZ=setTimeout;function AZ(t,e){var n=e.useCachedSetTimeout?TZ:setTimeout;return new Promise((function(s){n(s,t)}))}function DZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.useCachedSetTimeout,s=AZ(t,{useCachedSetTimeout:n});function a(l){return s.then((function(){return l}))}return a.then=function(){return s.then.apply(s,arguments)},a.catch=Promise.resolve().catch,a}var RZ=300;function PZ(t){function e(n){const{selectProps:s,innerRef:a}=n,{handleScrolledToBottom:l,shouldLoadMore:o}=s,c=f.useRef(null),d=f.useRef(null),m=f.useCallback(()=>{const h=d.current;if(!h)return!1;const{scrollTop:g,scrollHeight:x,clientHeight:v}=h;return o(x,v,g)},[o]),u=f.useCallback(()=>{m()&&l&&l()},[m,l]),p=f.useMemo(()=>{const h=()=>{u(),c.current=setTimeout(h,RZ)};return h},[u]);return f.useEffect(()=>(p(),()=>{c.current&&clearTimeout(c.current)}),[]),i.jsx(t,{...n,innerRef:CZ(a,d)})}return e}var MZ=PZ(b2.MenuList),IZ=t=>f.useMemo(()=>({MenuList:MZ,...t}),[t]),OZ=(t,e)=>[...t,...e],FZ=10,LZ=(t,e,n)=>t-e-FZ<n,IR=t=>({isFirstLoad:!0,options:[],hasMore:!0,isLoading:!1,lockedUntil:0,additional:t.additional}),$Z=({options:t,defaultOptions:e,additional:n,defaultAdditional:s})=>{const a=e===!0?null:Array.isArray(e)?e:t;return a?{"":{isFirstLoad:!1,isLoading:!1,options:a,hasMore:!0,lockedUntil:0,additional:s||n}}:{}},rC='[react-select-async-paginate] response of "loadOptions" should be an object with "options" prop, which contains array of options.',BZ=t=>{if(!t)return!1;const{options:e,hasMore:n}=t;return!(!Array.isArray(e)||typeof n!="boolean"&&typeof n<"u")},qZ=t=>{if(!BZ(t))throw console.error(rC,"Received:",t),new Error(rC);return!0},HZ=async(t,e,n,s,a,l,o,c)=>{const d=e.current.inputValue,m=!n.current[d],u=m?IR(e.current):n.current[d];if(u.isLoading||!u.hasMore||u.lockedUntil>Date.now())return;if(a(v=>c&&t==="input-change"?{[d]:{...u,isLoading:!0}}:{...v,[d]:{...u,isLoading:!0}}),s>0&&t==="input-change"){await DZ(s);const v=e.current.inputValue;if(d!==v){a(y=>{if(m){const{[d]:b,...k}=y;return k}return{...y,[d]:{...u,isLoading:!1}}});return}}const{loadOptions:p,reloadOnErrorTimeout:h=0}=e.current,g=await EZ(Promise.resolve().then(()=>p(d,u.options,u.additional)));if(!o.current)return;if(g.isErr()){a(v=>({...v,[d]:{...u,isLoading:!1,lockedUntil:Date.now()+h}}));return}const x=g.unwrap();if(qZ(x)){const{options:v,hasMore:y}=x,b=Object.hasOwn(x,"additional")?x.additional:u.additional;a(k=>({...k,[d]:{...u,options:l(u.options,v,b),hasMore:!!y,isLoading:!1,isFirstLoad:!1,additional:b}}))}},Yv=t=>t+1,zZ=(t,e=[])=>{const{clearCacheOnSearchChange:n=!1,clearCacheOnMenuClose:s=!1,defaultOptions:a,loadOptionsOnMenuOpen:l=!0,debounceTimeout:o=0,inputValue:c,menuIsOpen:d,filterOption:m=null,reduceOptions:u=OZ,shouldLoadMore:p=LZ,mapOptionsForMenu:h=void 0}=t,g=hh(d),x=_Z(),v=hh(u),y=hh(l),b=f.useRef(!0),k=f.useRef(t);k.current=t;const[w,S]=f.useState(0),j=SZ(()=>$Z(t)),T=hh(P=>{HZ(P,k,j,o,E=>{j.current=E(j.current),x.current&&S(Yv)},v.current,x,n)}),N=f.useCallback(()=>{const P=k.current.inputValue;j.current[P]&&T.current("menu-scroll")},[T,j]);f.useEffect(()=>{b.current?b.current=!1:(j.current={},S(Yv)),a===!0&&T.current("autoload")},e),f.useEffect(()=>{g.current&&!j.current[c]&&T.current("input-change")},[T,c,g,j]),f.useEffect(()=>{if(d){if(!j.current[""]&&y.current){T.current("menu-toggle");return}return}s&&(j.current={},S(Yv))},[T,y,d,j,s]);const _=j.current[c]||IR(t),A=f.useMemo(()=>h?h(_.options):_.options,[_.options,h]);return{handleScrolledToBottom:N,shouldLoadMore:p,filterOption:m,isLoading:_.isLoading||_.lockedUntil>Date.now(),isFirstLoad:_.isFirstLoad,options:A}},VZ=(t,e=[])=>{const{inputValue:n,menuIsOpen:s,defaultInputValue:a,defaultMenuIsOpen:l,onInputChange:o,onMenuClose:c,onMenuOpen:d}=t,[m,u]=f.useState(a||""),[p,h]=f.useState(!!l),g=typeof n=="string"?n:m,x=typeof s=="boolean"?s:p,v=f.useCallback((w,S)=>{o&&o(w,S),u(w)},[o]),y=f.useCallback(()=>{c&&c(),h(!1)},[c]),b=f.useCallback(()=>{d&&d(),h(!0)},[d]);return{...zZ({...t,inputValue:g,menuIsOpen:x},e),inputValue:g,menuIsOpen:x,onInputChange:v,onMenuClose:y,onMenuOpen:b}},UZ=[],WZ={};function KZ(t){function e(n){const{components:s=WZ,selectRef:a=void 0,isLoading:l,cacheUniqs:o=UZ,menuPlacement:c,menuShouldScrollIntoView:d,...m}=n,u=VZ(m,o),p=IZ(s),h=typeof l=="boolean"?l:u.isLoading;return i.jsx(t,{...n,...u,menuPlacement:c,menuShouldScrollIntoView:c==="auto"&&h?!1:d,isLoading:h,components:p,ref:a})}return e}var GZ=KZ(ct);const dn=({id:t,value:e,onChange:n,placeholder:s,isSearchable:a=!0,isLoading:l=!1,isDisabled:o=!1,isMulti:c=!1,closeMenuOnSelect:d=!0,getOptionValue:m,getOptionLabel:u,customComponents:p={},loadOptions:h,dependencies:g={},searchPlaceholder:x=r("Search...","kivicare-clinic-management-system"),noOptionsMessage:v=r("No options available","kivicare-clinic-management-system"),loadingMessage:y=r("Loading...","kivicare-clinic-management-system"),debounceTimeout:b=300,additional:k={},isCreatable:w=!1,onCreateOption:S,formatCreateLabel:j=N=>`Create "${N}"`,...T})=>{const[N,_]=f.useState({page:1}),A=JSON.stringify(g),P=f.useCallback(async(O,L,{page:q})=>{if(console.log(" asyncLoadOptions called:",{searchQuery:O,page:q,dependencies:g}),!h)return{options:[],hasMore:!1,additional:{page:1}};try{const Q={page:q||1,per_page:10,search:O||"",...g};console.log(" Calling loadOptions with params:",Q);const V=await h(Q);console.log(" Received result:",V);const se=V?.data??V??[],G=V?.pagination??{},ge=Array.isArray(se)?se:[],ie=!!(G.has_more||G.current_page<G.total_pages);return console.log(" Returning options:",{optionsCount:ge.length,hasMore:ie,nextPage:(q||1)+1}),w&&O&&ge.length===0&&ge.push({value:"__create__",label:j(O),isCreateOption:!0,inputValue:O}),{options:ge,hasMore:ie,additional:{page:(q||1)+1}}}catch(Q){return console.error(" Async load options error:",Q),{options:[],hasMore:!1,additional:{page:1}}}},[h,A]);f.useEffect(()=>{console.log(" Dependencies changed! Resetting page to 1. New dependencies:",g),_({page:1})},[A]);const E=O=>{try{const L=m?m(O):O?.value??O?.id??"";return String(L??"")}catch{return""}},M=O=>{try{return u?u(O):O?.label??O?.name??O?.title??""}catch{return""}},R=(O,L)=>{if(O&&O.isCreateOption){S&&S(O.inputValue);return}if(c&&Array.isArray(O)){const q=new Set,Q=[];O.forEach(V=>{const se=E(V);q.has(se)||(q.add(se),Q.push(V))}),n(Q,L);return}n(O,L)};return i.jsx(GZ,{id:t,value:e,loadOptions:P,onChange:R,additional:N,placeholder:s,isDisabled:o,isMulti:c,closeMenuOnSelect:d,debounceTimeout:b,isSearchable:a,getOptionValue:E,getOptionLabel:M,components:{...p||{}},styles:{menuPortal:O=>({...O,zIndex:9999})},cacheUniqueValue:A,...T})},na=({show:t,onHide:e,queryParams:n,onApplyFilters:s,onResetFilters:a,title:l=r("Filters","kivicare-clinic-management-system"),fields:o=[],hasAppliedFilters:c=!1,width:d="400px"})=>{const[m,u]=f.useState({...n}),[p,h]=f.useState(!1),g=["clinicAddress","clinicName","clinic","id","specialization","status","date_from","date_to","patientName","doctorAddress","doctorName","receptionistAddress","receptionistName","serviceName","charges","category","patient","search","startDate","endDate","taxName","service","doctor","encounter_id","serviceName","patient_unique_id"];f.useEffect(()=>{const T=g.some(N=>{const _=m[N];return Array.isArray(_)?_.length>0:typeof _=="number"?_!==0:_!=null&&_!==""});h(T)},[m]);const[x,v]=f.useState({});f.useEffect(()=>{u({...n});const T={};o.forEach(N=>{if(N.type==="dateRange"||N.type==="inlineDateRange"){const _=n[N.startDateKey],A=n[N.endDateKey];_&&A?T[N.name]=[new Date(_),new Date(A)]:T[N.name]=[]}}),v(T)},[n]);const y=(T,N)=>{u(_=>{const A={..._,[T]:N};return o.forEach(P=>{P.dependencies&&Object.values(P.dependencies).includes(T)&&(A[P.name]=P.type==="multiSelect"||P.isMulti?[]:"")}),A})},b=(T,N)=>{y(T,N?N.value:"")},k=(T,N,_,A)=>{if(v(P=>({...P,[T]:A})),A.length===2){const P=$a(A[0]),E=$a(A[1]);u(M=>({...M,[N]:P,[_]:E}))}},w=(T,N)=>{y(T,N)},S=()=>{s(m)},j=T=>{const{type:N,name:_,label:A,placeholder:P,options:E=[],isLoading:M=!1,optionLoader:R,dependencies:O,...L}=T;switch(N){case"select":const q=E.find(D=>D.value===m[_])||null;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(ct,{value:q,onChange:D=>b(_,D),options:E,menuShouldScrollIntoView:!1,maxMenuHeight:220,menuPosition:"fixed",isLoading:M,noOptionsMessage:()=>r("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:P||A,className:"react-select-box",classNamePrefix:"react-select",isDisabled:M,styles:{menuPortal:D=>({...D,zIndex:1050}),menu:D=>({...D,zIndex:1050})},...L})]},_);case"paginatedSelect":const Q=T.storeObject?m[_]:T.value||E.find(D=>D.value===m[_])||null,V=T.dependencies?Object.keys(T.dependencies).reduce((D,$)=>{const te=m[T.dependencies[$]];return D[$]=te&&typeof te=="object"&&"value"in te?te.value:te,D},{}):{},se=T.key||`${_}-${JSON.stringify(V)}`;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(dn,{value:Q,id:`filter-${_}`,placeholder:P||A,className:"react-select-box",classNamePrefix:"react-select",loadOptions:R,dependencies:V,isDisabled:T.isDisabled,onChange:D=>{T.storeObject?y(_,D):y(_,D?D.value:""),T.onChange&&typeof T.onChange=="function"&&T.onChange(D)},isClearable:!0,menuShouldScrollIntoView:!1,styles:{menuPortal:D=>({...D,zIndex:1050}),menu:D=>({...D,zIndex:1050})}},se)]},_);case"dateRange":const{startDateKey:G,endDateKey:ge}=T,ie=x[_]&&x[_].length>0;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{value:(x[_]||[]).map(D=>typeof D=="string"?Zn(D):D),onChange:D=>{D.length===2?k(_,G,ge,D):D.length===0&&(v($=>({...$,[_]:[]})),u($=>({...$,[G]:"",[ge]:""})))},options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...L.flatpickrOptions},className:"form-control",placeholder:P||r("Select date range","kivicare-clinic-management-system")}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})}),ie&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{v(D=>({...D,[_]:[]})),u(D=>({...D,[G]:"",[ge]:""}))},title:r("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},_);case"inlineDateRange":const{startDateKey:W,endDateKey:X}=T,J=x[_]||[],ue=J[0]?En(J[0]).format("DD MMM YYYY"):"-",le=J[1]?En(J[1]).format("DD MMM YYYY"):"-",I=[{id:"today",label:r("Today","kivicare-clinic-management-system"),getRange:()=>[En(),En()]},{id:"last_30_days",label:r("Last 30 Days","kivicare-clinic-management-system"),getRange:()=>[En().subtract(30,"day"),En()]},{id:"this_month",label:r("This Month","kivicare-clinic-management-system"),getRange:()=>[En().startOf("month"),En().endOf("month")]},{id:"last_month",label:r("Last Month","kivicare-clinic-management-system"),getRange:()=>[En().subtract(1,"month").startOf("month"),En().subtract(1,"month").endOf("month")]},{id:"last_90_days",label:r("Last 90 Days","kivicare-clinic-management-system"),getRange:()=>[En().subtract(90,"day"),En()]},{id:"last_6_months",label:r("Last 6 Months","kivicare-clinic-management-system"),getRange:()=>[En().subtract(6,"month"),En()]},{id:"last_1_year",label:r("Last 1 Year","kivicare-clinic-management-system"),getRange:()=>[En().subtract(1,"year"),En()]}],ee=(D,$)=>{D.preventDefault();const te=[$[0].toDate(),$[1].toDate()];k(_,W,X,te)},K=D=>J.length!==2?!1:En(J[0]).isSame(D[0],"day")&&En(J[1]).isSame(D[1],"day");return i.jsxs("div",{className:"col-12 from-group inline-flatpickr-wrapper",children:[i.jsx(Mt.Label,{children:A}),i.jsx("div",{className:"bg-body ranges rounded overflow-hidden border",children:i.jsxs("div",{className:"row p-0 m-0",children:[i.jsx("div",{className:"col-lg-4 p-0 border-end border-bottom-lg-0",children:i.jsx("ul",{className:"list-unstyled m-0 range-list",children:I.map(D=>{const $=D.getRange(),te=K($);return i.jsx("li",{className:`range-list-item ${te?"active":""}`,children:i.jsx("a",{href:"#",onClick:ae=>ee(ae,$),children:D.label})},D.id)})})}),i.jsxs("div",{className:"calender-list-box col-lg-8 p-0",children:[i.jsx("div",{className:"calender-header rounded-top-end bg-primary p-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"btn bg-white text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:ue}),i.jsx("div",{className:"btn text-white pe-none btn-sm fw-bold",children:r("To","kivicare-clinic-management-system")}),i.jsx("div",{className:"btn bg-white text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:le})]})}),i.jsx("div",{className:"calander-body",children:i.jsx("div",{className:"form-group mb-0",children:i.jsx(Un,{value:J.map(D=>typeof D=="string"?Zn(D):D),onChange:D=>{D.length===2?k(_,W,X,D):D.length===0&&(v($=>({...$,[_]:[]})),u($=>({...$,[W]:"",[X]:""})))},options:{mode:"range",inline:!0,dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...L.flatpickrOptions,static:!0,showMonths:1},className:"d-none"})})})]})]})})]},_);case"date":const ne=m[_];return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsxs("div",{className:"position-relative",children:[i.jsx(Un,{value:m[_]?Zn(m[_]):"",onChange:D=>{if(D.length>0){const $=$a(D[0]);y(_,$)}else y(_,"")},options:{dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...L.flatpickrOptions},className:"form-control",placeholder:P||r("Select date","kivicare-clinic-management-system")}),ne&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>y(_,""),title:r("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},_);case"text":case"search":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(Mt.Control,{type:"text",value:m[_]||"",onChange:D=>w(_,D.target.value),placeholder:P||A,...L})]},_);case"number":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(Mt.Control,{type:"number",value:m[_]||"",onChange:D=>w(_,D.target.value),placeholder:P||A,...L})]},_);case"multiSelect":const oe=E.filter(D=>Array.isArray(m[_])?m[_].includes(D.value):!1);return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(ct,{value:oe,onChange:D=>{const $=D?D.map(te=>te.value):[];y(_,$)},className:"react-select-box",classNamePrefix:"react-select",options:E,isMulti:!0,isLoading:M,noOptionsMessage:()=>r("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:P||A,isDisabled:M,menuShouldScrollIntoView:!1,styles:{menuPortal:D=>({...D,zIndex:1050}),menu:D=>({...D,zIndex:1050})},...L})]},_);default:return null}};return i.jsxs(Pu,{show:t,onHide:e,placement:"end",backdrop:!0,className:"on-rtl end",style:{width:d},children:[i.jsx(Pu.Header,{closeButton:!0,className:"border-bottom",children:i.jsx(Pu.Title,{as:"h6",className:"mb-0",children:l})}),i.jsx(Pu.Body,{children:i.jsx(Mt,{children:i.jsx("div",{className:"row gy-4",children:o.map(T=>j(T))})})}),i.jsx("div",{className:"offcanvas-footer p-3 border-top",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:()=>{a(),e()},disabled:!c,children:r("Reset","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:S,disabled:!p,children:r("Apply","kivicare-clinic-management-system")})]})})]})};na.propTypes={show:Pe.bool.isRequired,onHide:Pe.func.isRequired,queryParams:Pe.object.isRequired,onApplyFilters:Pe.func.isRequired,onResetFilters:Pe.func.isRequired,title:Pe.string,fields:Pe.arrayOf(Pe.shape({type:Pe.oneOf(["select","multiSelect","dateRange","inlineDateRange","date","text","search","number"]).isRequired,name:Pe.string.isRequired,label:Pe.string.isRequired,placeholder:Pe.string,options:Pe.array,isLoading:Pe.bool,startDateKey:Pe.string,endDateKey:Pe.string,flatpickrOptions:Pe.object})).isRequired,hasAppliedFilters:Pe.bool,width:Pe.string};const Go=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${a}`},lC=t=>{if(!t)return"";const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),s=e.toLocaleString("default",{month:"short"}),a=e.getFullYear();return`${n} ${s} ${a}`},oC=()=>{const t=Ve(),e=f.useRef(null),[n,s]=f.useState([]),[a,l]=f.useState(null),[o,c]=f.useState(!1),[d,m]=f.useState({start:new Date(new Date().setDate(1)),end:new Date(new Date().getDate()+30)}),[u,p]=f.useState(!1),[h,g]=f.useState(null),{hasCapability:x,userRole:v,user:y,module_config:b}=ut(),k=mI(v||"patient"),w=uI(),S=hI(),j=pI(),T=gI(),N=Yi()||Xn()||Li(),_=Yi(),A=Li(),P=Xn(),E=Jn(),[M,R]=f.useState(!1),[O,L]=f.useState([]),[q,Q]=f.useState([]),[V,se]=f.useState([]),[G,ge]=f.useState({clinic:"",patient:_&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),ie=f.useMemo(()=>!a||a.length!==2?{}:{start_date:Go(a[0]),end_date:Go(a[1])},[a]),{data:W,isLoading:X}=Z6({limit:3,...ie},{enabled:w}),J=ze.useMemo(()=>W?.data?W.data.map(qe=>({id:qe.id,name:qe.name||qe.doctor_name,clinic:qe.clinic||"",appointments:qe.appointments||`${qe.appointment_count}+`,image:qe.image||qe.doctor_image_url||null,speciality:qe.speciality||""})):[],[W]),{isAddonActive:ue,defaultClinicId:le}=ut(),I=ue("kiviPro"),ee=f.useMemo(()=>[{title:r("Total Appointments","kivicare-clinic-management-system"),component:"appointment",iconKey:"appointment",color:"primary",key:"total_appointments",roles:mV(),capability:"dashboard_total_appointment",linkTo:"/appointments"},{title:r("Total Patients","kivicare-clinic-management-system"),component:"patient",iconKey:"patient",color:"success",key:"total_patients",roles:uV(),capability:"dashboard_total_patient",linkTo:"/patient"},...I?[{title:r("Total Clinics","kivicare-clinic-management-system"),component:"clinic",iconKey:"clinic",color:"info",key:"total_clinics",roles:hV(),capability:"dashboard_total_clinic",linkTo:"/clinic"}]:[],{title:r("Total Doctors","kivicare-clinic-management-system"),component:"doctor",iconKey:"doctor",color:"warning",key:"total_doctors",roles:pV(),capability:"dashboard_total_doctor",linkTo:"/doctor"},{title:r("Active Services","kivicare-clinic-management-system"),component:"service",iconKey:"service",color:"secondary",key:"active_services",roles:gV(),capability:"dashboard_total_service",linkTo:"/service"},...(b.billing??"1")==="1"?[{title:r("Total Revenue","kivicare-clinic-management-system"),component:"revenue",iconKey:"revenue",color:"success",key:"total_revenue",roles:fV(),capability:"dashboard_total_revenue"}]:[],{title:r("Today's Appointments","kivicare-clinic-management-system"),component:"today-appointment",iconKey:"appointment",color:"primary",key:"today_appointments",roles:vV(),capability:"dashboard_total_today_appointment",linkTo:"/appointments"}],[]),K=f.useMemo(()=>fI(ee,k),[ee,k]),ne=f.useMemo(()=>{const qe=K.length;if(qe===0)return"";let we="insights-container dashboard-insights-container stash-cards";return we+=` grid-count-${qe}`,we},[K.length]),{data:oe,isLoading:D}=Y6({params:ie,queryKey:["upcomingAppointments",ie?.start_date,ie?.end_date],enabled:T}),$=oe?.data||[],te=qe=>i.jsx(ht,{to:`/appointments/view/${qe.id}`,className:"kc-link-wrapper",children:i.jsxs("div",{className:"bg-body p-3 rounded-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-2",children:[i.jsx(cn,{profileUrl:qe.patient_image_url||null,name:qe.patientName,linkTo:`/patient/edit/${qe.patientId}`,variant:"primary",size:"md",className:"flex-grow-1",fallbackText:"PT"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 text-nowrap",children:[i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:qe.appointmentStartDate}),i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:qe.appointmentStartTime})]})]}),i.jsx("div",{className:"mb-2",children:i.jsx("span",{className:"font-size-14",children:qe.clinicName})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("div",{className:"font-siz-14",children:[qe.serviceListName," ",r("By ","kivicare-clinic-management-system"),i.jsx("span",{className:"font-size-14 text-heading fw-semibold",children:i.jsx(ht,{to:`/doctor/edit/${qe.doctorId}`,className:"text-heading fw-semibold",children:qe.doctorName})})]}),qe.video_consultation&&i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-video text-success align-middle"}),i.jsx("span",{className:"font-size-12 text-heading fw-semibold",children:r("Telemed","kivicare-clinic-management-system")})]})]})]})}),ae=qe=>i.jsx(ht,{to:`/doctor/edit/${qe.id}`,className:"kc-link-wrapper",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between flex-wrap",children:[i.jsx(cn,{profileUrl:qe.image,name:qe.name,clinicName:qe.clinic,variant:"primary",size:"md",className:"flex-grow-1"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-size-14 fw-bold text-secondary",children:qe.appointments}),i.jsxs("span",{className:"font-size-14 fw-medium",children:[" ",r("Appointments","kivicare-clinic-management-system")]})]})]})})}),{data:Y,isLoading:H}=J6({start_date:d.start.toISOString().split("T")[0],end_date:d.end.toISOString().split("T")[0],doctor:G.doctor?.value||G.doctor||(A?y?.id:void 0),patient:G.patient?.value||G.patient||(_?y?.id:void 0),clinic:G.clinic?.value||G.clinic||y?.clinic_id||void 0,status:G.status?.value||G.status||void 0},{enabled:N}),B=Y?.data?.appointments||[],re=f.useCallback(qe=>{const we=qe.event.extendedProps;g(we),p(!0)},[]),de=qe=>{const we=!!qe.event.extendedProps.zoom_data?.startUrl;return i.jsxs("div",{className:"d-flex align-items-center gap-1 overflow-hidden",children:[we&&i.jsx("i",{className:"ph ph-video"}),i.jsx("span",{className:"text-truncate",children:qe.event.title})]})},xe=f.useCallback(qe=>{const we=qe.view.activeStart,Ee=qe.view.activeEnd;m({start:we,end:Ee})},[]),U=qe=>{switch(String(qe)){case"0":return r("Cancelled","kivicare-clinic-management-system");case"1":return r("Booked","kivicare-clinic-management-system");case"2":return r("Pending","kivicare-clinic-management-system");case"3":return r("Completed","kivicare-clinic-management-system");case"4":return r("Check-In","kivicare-clinic-management-system");default:return r("Unknown","kivicare-clinic-management-system")}},me=qe=>{switch(String(qe)){case"0":return"bg-danger";case"1":return"bg-success";case"2":return"bg-warning";case"3":return"bg-success";case"4":return"bg-primary";default:return"bg-secondary"}},ye=f.useMemo(()=>({mode:"range",dateFormat:"d M Y",clickOpens:!0,allowInput:!0,disableMobile:!0,locale:Wn()}),[]),pe=async({page:qe,per_page:we,search:Ee})=>{try{const Qe={dataType:"staticData",staticDataType:"clinics",page:qe,per_page:we,search:Ee},nt=await t.fetchQuery({queryKey:pt.list(Qe),queryFn:()=>Dt.getStaticData(Qe),staleTime:300*1e3}),Ht=nt.data.map(Lt=>({value:Lt.id,label:Lt.label||Lt.name}));return L(Lt=>[...Lt,...Ht]),nt}catch(Qe){return console.error("Error loading clinics:",Qe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Ce=async({page:qe,per_page:we,search:Ee,clinic_ids:Qe})=>{try{let nt=Qe;(P||E)&&le&&(nt=le);const Ht={dataType:"staticData",staticDataType:"users",role:ol(),clinic_ids:nt,page:qe,per_page:we,search:Ee},Lt=await t.fetchQuery({queryKey:pt.list(Ht),queryFn:()=>Dt.getStaticData(Ht),staleTime:300*1e3}),Yt=Lt.data.map(xt=>({value:xt.id,label:xt.label||xt.name}));return Q(xt=>[...xt,...Yt]),Lt}catch(nt){return console.error("Error loading patients:",nt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Ge=async({page:qe,per_page:we,search:Ee,clinic_ids:Qe})=>{try{let nt=Qe;(P||E)&&le&&(nt=le);const Ht={dataType:"staticData",staticDataType:"doctors",clinic_ids:nt,page:qe,per_page:we,search:Ee},Lt=await t.fetchQuery({queryKey:pt.list(Ht),queryFn:()=>Dt.getStaticData(Ht),staleTime:300*1e3}),Yt=Lt.data.map(xt=>({value:xt.id,label:xt.label||xt.name}));return se(xt=>[...xt,...Yt]),Lt}catch(nt){return console.error("Error loading doctors:",nt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},De=[...I&&!P&&!E?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:pe,options:O,storeObject:!0}]:[],..._?[]:[{type:"paginatedSelect",name:"patient",label:r("Patient","kivicare-clinic-management-system"),placeholder:r("Select Patient","kivicare-clinic-management-system"),optionLoader:Ce,options:q,dependencies:P||E?{}:{clinic_ids:"clinic"},storeObject:!0}],...A?[]:[{type:"paginatedSelect",name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),placeholder:r("Select Doctor","kivicare-clinic-management-system"),optionLoader:Ge,options:V,dependencies:P||E?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:r("Select Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:r("Cancelled","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check-In","kivicare-clinic-management-system")},{value:"3",label:r("Check-Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],$e=f.useMemo(()=>["clinic","patient","doctor","status"].some(we=>{const Ee=G[we];return typeof Ee=="object"&&Ee!==null?Ee.value!==void 0&&Ee.value!=="":Ee!=null&&Ee!==""}),[G]),et=qe=>{ge(we=>({...we,...qe})),R(!1)},tt=()=>{ge({clinic:"",patient:_&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),R(!1)};return i.jsxs(i.Fragment,{children:[Cr()&&i.jsx(yZ,{}),i.jsx(Si,{}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("h5",{className:"mb-0",children:r("Insights","kivicare-clinic-management-system")}),a&&i.jsx("div",{className:"d-flex align-items-center",children:i.jsxs("span",{className:"badge bg-body text-secondary",children:[lC(a[0])," -"," ",lC(a[1]),i.jsx("button",{className:"btn btn-link btn-sm p-0 ms-2 text-danger",onClick:()=>{l(null),s([]),e.current&&e.current.flatpickr&&e.current.flatpickr.clear()},"aria-label":r("Clear filter","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})})]}),i.jsx("form",{className:"d-flex align-items-center gap-2 flex-end flex-wrap",onSubmit:qe=>{qe.preventDefault(),n&&n.length===2&&(c(!0),l(n),console.log("Invalidating patient age distribution query with new date range",n),t.invalidateQueries({queryKey:["dashboard","bookingStatus"]}),setTimeout(()=>c(!1),500))},children:!_&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"form-group my-0 flex-grow-1",children:i.jsx(Un,{ref:e,options:{...ye,dateFormat:xi(window.kc_frontend.date_format)},className:"form-control dashboard-date-range",onChange:qe=>s(qe),placeholder:r("24 May 2023 to 25 June 2023","kivicare-clinic-management-system")})}),i.jsxs("button",{type:"submit",className:"btn btn-secondary",disabled:o,children:[o?i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):null,r("Apply Filter","kivicare-clinic-management-system")]})]})})]}),K.length>0&&i.jsx("div",{className:`${ne}`,children:K.map((qe,we)=>i.jsx(h$,{component:qe.component,title:qe.title,iconKey:qe.iconKey,color:qe.color||"primary",useHook:!0,dateFilter:ie,isFiltering:o,isCurrency:qe.component==="revenue"||qe.key==="total_revenue",capability:qe.capability,linkTo:qe.linkTo,iconPosition:A||P?"right":"top",onDataLoaded:(Ee,Qe)=>{}},`stats-card-${qe.key}`))}),k!=="kivicare_patient"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-0 gx-4",children:[T&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:r("Upcoming Appointments","kivicare-clinic-management-system"),items:$,renderItem:te,viewAllLink:"appointments",loading:D||o,emptyMessage:r("No upcoming appointments","kivicare-clinic-management-system"),dateFilter:a?`${Go(a[0])} to ${Go(a[1])}`:null})}),w&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(S0,{title:r("Top Doctors","kivicare-clinic-management-system"),items:J,renderItem:ae,viewAllLink:"doctors",loading:X||o,emptyMessage:r("No doctor data available","kivicare-clinic-management-system"),dateFilter:a?`${Go(a[0])} to ${Go(a[1])}`:null})}),S&&i.jsx("div",{className:"col-xl-4 col-lg-12",children:i.jsx(c9,{clinicId:y?.clinic_id,dateRange:a})})]}),j&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx("h6",{className:"mb-0",children:r("Payment History","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/billings",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")})]}),i.jsx(_V,{limit:3})]})})]}),N&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Appointment Calendar","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>R(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})})]}),i.jsx(gZ,{events:B,loading:H,onEventClick:re,onViewChange:xe,eventContent:de})]}),i.jsx(na,{show:M,onHide:()=>R(!1),queryParams:G,onApplyFilters:et,onResetFilters:tt,title:r("Calendar Filters","kivicare-clinic-management-system"),fields:De,hasAppliedFilters:$e}),i.jsxs(lt,{show:u,onHide:()=>p(!1),centered:!0,size:"lg",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Appointment Details","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:h?i.jsxs("div",{className:"appointment-details",children:[i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Patient","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.patientName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Doctor","kivicare-clinic-management-system")}),i.jsx("h5",{children:h.doctorName})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Date","kivicare-clinic-management-system")}),i.jsx("p",{children:h.appointmentStartDate})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Time","kivicare-clinic-management-system")}),i.jsx("p",{children:`${h.appointmentStartTime||""} - ${h.appointmentEndTime||""}`})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Clinic","kivicare-clinic-management-system")}),i.jsx("p",{children:h.clinicName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Status","kivicare-clinic-management-system")}),i.jsx("p",{children:i.jsx("span",{className:`badge text-white ${h.color?"":me(h.status)}`,style:h.color?{backgroundColor:h.color,color:"var(--bs-white)"}:{},children:h.status_text||U(h.status)})})]})]}),h.services&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Services","kivicare-clinic-management-system")}),i.jsx("p",{children:h.services})]})}),h.description&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Description","kivicare-clinic-management-system")}),i.jsx("p",{children:h.description})]})})]}):i.jsx("div",{className:"text-center",children:i.jsx("p",{children:r("Loading appointment details...","kivicare-clinic-management-system")})})}),i.jsxs(lt.Footer,{className:"gap-3",children:[k!=="kivicare_patient"&&h&&(String(h.status)==="1"||String(h.status)==="2")&&i.jsxs(ht,{to:`/appointments/edit/${h.id}`,className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-pencil-simple me-1"}),r("Edit Appointment","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:r("Close","kivicare-clinic-management-system")})]})]})]})]})},YZ=[We({path:"/dashboard",component:oC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}}),We({path:"/",component:oC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:k0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}})],QZ=()=>i.jsx("div",{className:"appointments-container",children:i.jsx(Ji,{})}),xk=()=>i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"80px",height:"1rem"}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx("div",{className:"d-flex align-items-center gap-1",children:i.jsx(C,{width:"60px",height:"1rem"})})]}),i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"})]})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx(C,{width:"100px",height:"1.25rem"}),i.jsx(C,{width:"120px",height:"1.5rem"})]})]}),by=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["50px","100px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(kl,{titleWidth:"180px"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-lg-8",children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(P2,{count:6})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"form-group",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px",height:"32px"})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"80px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"position-sticky top-0",children:i.jsx(gt,{children:i.jsx(xk,{})})})})]})]}),OR=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["50px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsx(kl,{titleWidth:"160px",buttonWidth:"140px"}),i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"40px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsx(Zd,{count:4,colClass:"col-xl-3 col-lg-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"140px"})})}),i.jsx(Zd,{count:3,colClass:"col-lg-4",children:t=>i.jsxs(i.Fragment,{children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"mt-2",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx(C,{width:"120px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"custom-form-container bg-body p-3 rounded",children:i.jsx(Zd,{count:4,colClass:"col-md-6",children:i.jsx(w0,{labelWidth:"100px",valueWidth:"80px"})})})]})]})]}),i.jsx("div",{className:"col-xl-4",children:i.jsx(xk,{})})]})})})}),Bi={getAppointments:(t={})=>ve({endpoint:"appointments",method:"GET",data:t}),getAppointment:t=>ve({endpoint:`appointments/${t}`,method:"GET"}),createAppointment:t=>ve({endpoint:"appointments",method:"POST",data:t}),updateAppointment:(t,e)=>ve({endpoint:`appointments/${t}`,method:"PUT",data:e}),updateAppointmentStatus:(t,e)=>ve({endpoint:`appointments/${t}/status`,method:"PUT",data:{status:e}}),regenerateVideoConferenceLink:t=>ve({endpoint:`appointments/${t}/regenerate-video-conference`,method:"GET"}),deleteAppointment:t=>ve({endpoint:`appointments/${t}`,method:"DELETE"}),getAppointmentDetails:t=>ve({endpoint:`appointments/${t}/view`,method:"GET"}),getAppointmentInvoiceHTML:t=>ve({endpoint:`appointments/${t}/invoice-html`,method:"GET"}),printInvoice:t=>ve({endpoint:`appointments/${t}/print-invoice`,method:"GET",responseType:"blob"}),getAvailableSlots:(t={})=>ve({endpoint:"appointments/slots",method:"GET",data:t}),getAppointmentSummary:(t={})=>ve({endpoint:"appointments/summary",method:"GET",data:t}),onPaymentSuccess:t=>{const{method:e,...n}=t;return ve({endpoint:"appointments/payment-success",method:e||"GET",data:n})},verifyPayment:t=>ve({endpoint:"appointments/payment-verify",method:"POST",data:t}),exportAppointments:(t={})=>ve({endpoint:"appointments/export",method:"GET",data:t}),bulkDeleteAppointments:t=>ve({endpoint:"appointments/bulk/delete",method:"POST",data:{ids:t}})},Cn={all:["appointments"],lists:()=>[...Cn.all,"list"],list:t=>[...Cn.lists(),{filters:t}],details:()=>[...Cn.all,"detail"],detail:t=>[...Cn.details(),t],slots:()=>[...Cn.all,"slots"],availableSlots:t=>[...Cn.slots(),t],summaries:()=>[...Cn.all,"summary"],summary:t=>[...Cn.summaries(),t]},ZZ=(t={},e={})=>ft({queryKey:Cn.list(t),queryFn:()=>Bi.getAppointments(t),...e}),XZ=(t,e={})=>ft({queryKey:Cn.detail(t),queryFn:()=>Bi.getAppointment(t),enabled:!!t,...e}),JZ=(t,e={})=>{const n=Xn(),s=Jn(),a=Li();let l=!1;return t?.date&&(a?l=!0:l=!!t?.doctor_id),ft({queryKey:Cn.availableSlots(t),queryFn:()=>Bi.getAvailableSlots(t),enabled:l,...e})},eX=()=>{const t=Ve();return Le({mutationFn:e=>Bi.createAppointment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.lists()}),t.invalidateQueries({queryKey:Cn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:Cn.availableSlots({doctor_id:n.doctor_id})})}})},tX=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Bi.updateAppointment(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()}),t.invalidateQueries({queryKey:Cn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:Cn.availableSlots({doctor_id:n.doctor_id})})}})},nX=()=>{const t=Ve();return Le({mutationFn:({id:e,status:n})=>Bi.updateAppointmentStatus(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()})}})},iX=()=>{const t=Ve();return Le({mutationFn:e=>Bi.regenerateVideoConferenceLink(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()})}})},sX=()=>{const t=Ve();return Le({mutationFn:e=>Bi.deleteAppointment(e),onSuccess:()=>{t.invalidateQueries({queryKey:Cn.lists()})}})},aX=(t,e={})=>ft({queryKey:Cn.detail(t),queryFn:()=>Bi.getAppointmentDetails(t),enabled:!!t,...e}),rX=(t,e={})=>ft({queryKey:Cn.summary(t),queryFn:()=>Bi.getAppointmentSummary(t),...e}),FR=()=>Le({mutationFn:t=>Bi.printInvoice(t)}),LR=()=>Le({mutationFn:t=>Bi.onPaymentSuccess(t)}),mpe=()=>{const t=Ve();return Le({mutationFn:e=>Bi.verifyPayment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.lists()}),n.appointment_id&&t.invalidateQueries({queryKey:Cn.detail(n.appointment_id)})}})},lX=()=>Le({mutationFn:t=>Bi.exportAppointments(t)}),oX=()=>{const t=Ve();return Le({mutationFn:e=>Bi.bulkDeleteAppointments(e),onSuccess:()=>{t.invalidateQueries({queryKey:Cn.lists()})}})};function $R(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=$R(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Jl(){for(var t,e,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=$R(t))&&(s&&(s+=" "),s+=e);return s}function cX(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}cX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ru=t=>typeof t=="number"&&!isNaN(t),mo=t=>typeof t=="string",Ar=t=>typeof t=="function",dX=t=>mo(t)||ru(t),wy=t=>mo(t)||Ar(t)?t:null,mX=(t,e)=>t===!1||ru(t)&&t>0?t:e,ky=t=>f.isValidElement(t)||mo(t)||Ar(t)||ru(t);function uX(t,e,n=300){let{scrollHeight:s,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,n)})})}function hX({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:l,position:o,preventExitTransition:c,done:d,nodeRef:m,isIn:u,playToast:p}){let h=n?`${t}--${o}`:t,g=n?`${e}--${o}`:e,x=f.useRef(0);return f.useLayoutEffect(()=>{let v=m.current,y=h.split(" "),b=k=>{k.target===m.current&&(p(),v.removeEventListener("animationend",b),v.removeEventListener("animationcancel",b),x.current===0&&k.type!=="animationcancel"&&v.classList.remove(...y))};v.classList.add(...y),v.addEventListener("animationend",b),v.addEventListener("animationcancel",b)},[]),f.useEffect(()=>{let v=m.current,y=()=>{v.removeEventListener("animationend",y),s?uX(v,d,a):d()};u||(c?y():(x.current=1,v.className+=` ${g}`,v.addEventListener("animationend",y)))},[u]),ze.createElement(ze.Fragment,null,l)}}function cC(t,e){return{content:BR(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function BR(t,e,n=!1){return f.isValidElement(t)&&!mo(t.type)?f.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Ar(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function pX({closeToast:t,theme:e,ariaLabel:n="close"}){return ze.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},ze.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ze.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gX({delay:t,isRunning:e,closeToast:n,type:s="default",hide:a,className:l,controlledProgress:o,progress:c,rtl:d,isIn:m,theme:u}){let p=a||o&&c===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(h.transform=`scaleX(${c})`);let g=Jl("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),x=Ar(l)?l({rtl:d,type:s,defaultClassName:g}):Jl(g,l),v={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{m&&n()}};return ze.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ze.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),ze.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:h,...v}))}var fX=1,qR=()=>`${fX++}`;function vX(t,e,n){let s=1,a=0,l=[],o=[],c=e,d=new Map,m=new Set,u=k=>(m.add(k),()=>m.delete(k)),p=()=>{o=Array.from(d.values()),m.forEach(k=>k())},h=({containerId:k,toastId:w,updateId:S})=>{let j=k?k!==t:t!==1,T=d.has(w)&&S==null;return j||T},g=(k,w)=>{d.forEach(S=>{var j;(w==null||w===S.props.toastId)&&((j=S.toggle)==null||j.call(S,k))})},x=k=>{var w,S;(S=(w=k.props)==null?void 0:w.onClose)==null||S.call(w,k.removalReason),k.isActive=!1},v=k=>{if(k==null)d.forEach(x);else{let w=d.get(k);w&&x(w)}p()},y=()=>{a-=l.length,l=[]},b=k=>{var w,S;let{toastId:j,updateId:T}=k.props,N=T==null;k.staleId&&d.delete(k.staleId),k.isActive=!0,d.set(j,k),p(),n(cC(k,N?"added":"updated")),N&&((S=(w=k.props).onOpen)==null||S.call(w))};return{id:t,props:c,observe:u,toggle:g,removeToast:v,toasts:d,clearQueue:y,buildToast:(k,w)=>{if(h(w))return;let{toastId:S,updateId:j,data:T,staleId:N,delay:_}=w,A=j==null;A&&a++;let P={...c,style:c.toastStyle,key:s++,...Object.fromEntries(Object.entries(w).filter(([M,R])=>R!=null)),toastId:S,updateId:j,data:T,isIn:!1,className:wy(w.className||c.toastClassName),progressClassName:wy(w.progressClassName||c.progressClassName),autoClose:w.isLoading?!1:mX(w.autoClose,c.autoClose),closeToast(M){d.get(S).removalReason=M,v(S)},deleteToast(){let M=d.get(S);if(M!=null){if(n(cC(M,"removed")),d.delete(S),a--,a<0&&(a=0),l.length>0){b(l.shift());return}p()}}};P.closeButton=c.closeButton,w.closeButton===!1||ky(w.closeButton)?P.closeButton=w.closeButton:w.closeButton===!0&&(P.closeButton=ky(c.closeButton)?c.closeButton:!0);let E={content:k,props:P,staleId:N};c.limit&&c.limit>0&&a>c.limit&&A?l.push(E):ru(_)?setTimeout(()=>{b(E)},_):b(E)},setProps(k){c=k},setToggle:(k,w)=>{let S=d.get(k);S&&(S.toggle=w)},isToastActive:k=>{var w;return(w=d.get(k))==null?void 0:w.isActive},getSnapshot:()=>o}}var Vi=new Map,Em=[],jy=new Set,xX=t=>jy.forEach(e=>e(t)),HR=()=>Vi.size>0;function yX(){Em.forEach(t=>VR(t.content,t.options)),Em=[]}var bX=(t,{containerId:e})=>{var n;return(n=Vi.get(e||1))==null?void 0:n.toasts.get(t)};function zR(t,e){var n;if(e)return!!((n=Vi.get(e))!=null&&n.isToastActive(t));let s=!1;return Vi.forEach(a=>{a.isToastActive(t)&&(s=!0)}),s}function wX(t){if(!HR()){Em=Em.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||dX(t))Vi.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Vi.get(t.containerId);e?e.removeToast(t.id):Vi.forEach(n=>{n.removeToast(t.id)})}}var kX=(t={})=>{Vi.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function VR(t,e){ky(t)&&(HR()||Em.push({content:t,options:e}),Vi.forEach(n=>{n.buildToast(t,e)}))}function jX(t){var e;(e=Vi.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function UR(t,e){Vi.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function NX(t){let e=t.containerId||1;return{subscribe(n){let s=vX(e,t,xX);Vi.set(e,s);let a=s.observe(n);return yX(),()=>{a(),Vi.delete(e)}},setProps(n){var s;(s=Vi.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=Vi.get(e))==null?void 0:n.getSnapshot()}}}function CX(t){return jy.add(t),()=>{jy.delete(t)}}function SX(t){return t&&(mo(t.toastId)||ru(t.toastId))?t.toastId:qR()}function lu(t,e){return VR(t,e),e.toastId}function Zg(t,e){return{...e,type:e&&e.type||t,toastId:SX(e)}}function Xg(t){return(e,n)=>lu(e,Zg(t,n))}function Te(t,e){return lu(t,Zg("default",e))}Te.loading=(t,e)=>lu(t,Zg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function _X(t,{pending:e,error:n,success:s},a){let l;e&&(l=mo(e)?Te.loading(e,a):Te.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,u,p)=>{if(u==null){Te.dismiss(l);return}let h={type:m,...o,...a,data:p},g=mo(u)?{render:u}:u;return l?Te.update(l,{...h,...g}):Te(g.render,{...h,...g}),p},d=Ar(t)?t():t;return d.then(m=>c("success",s,m)).catch(m=>c("error",n,m)),d}Te.promise=_X;Te.success=Xg("success");Te.info=Xg("info");Te.error=Xg("error");Te.warning=Xg("warning");Te.warn=Te.warning;Te.dark=(t,e)=>lu(t,Zg("default",{theme:"dark",...e}));function EX(t){wX(t)}Te.dismiss=EX;Te.clearWaitingQueue=kX;Te.isActive=zR;Te.update=(t,e={})=>{let n=bX(t,e);if(n){let{props:s,content:a}=n,l={delay:100,...s,...e,toastId:e.toastId||t,updateId:qR()};l.toastId!==t&&(l.staleId=t);let o=l.render||a;delete l.render,lu(o,l)}};Te.done=t=>{Te.update(t,{progress:1})};Te.onChange=CX;Te.play=t=>UR(!0,t);Te.pause=t=>UR(!1,t);function TX(t){var e;let{subscribe:n,getSnapshot:s,setProps:a}=f.useRef(NX(t)).current;a(t);let l=(e=f.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function o(c){if(!l)return[];let d=new Map;return t.newestOnTop&&l.reverse(),l.forEach(m=>{let{position:u}=m.props;d.has(u)||d.set(u,[]),d.get(u).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:o,isToastActive:zR,count:l?.length}}function AX(t){let[e,n]=f.useState(!1),[s,a]=f.useState(!1),l=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:u,closeOnClick:p}=t;jX({id:t.toastId,containerId:t.containerId,fn:n}),f.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{g()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)}function g(){window.removeEventListener("focus",y),window.removeEventListener("blur",b)}function x(N){if(t.draggable===!0||t.draggable===N.pointerType){k();let _=l.current;o.canCloseOnClick=!0,o.canDrag=!0,_.style.transition="none",t.draggableDirection==="x"?(o.start=N.clientX,o.removalDistance=_.offsetWidth*(t.draggablePercent/100)):(o.start=N.clientY,o.removalDistance=_.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function v(N){let{top:_,bottom:A,left:P,right:E}=l.current.getBoundingClientRect();N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&N.clientX>=P&&N.clientX<=E&&N.clientY>=_&&N.clientY<=A?b():y()}function y(){n(!0)}function b(){n(!1)}function k(){o.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",j)}function w(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",j)}function S(N){let _=l.current;if(o.canDrag&&_){o.didMove=!0,e&&b(),t.draggableDirection==="x"?o.delta=N.clientX-o.start:o.delta=N.clientY-o.start,o.start!==N.clientX&&(o.canCloseOnClick=!1);let A=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;_.style.transform=`translate3d(${A},0)`,_.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function j(){w();let N=l.current;if(o.canDrag&&o.didMove&&N){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){a(!0),t.closeToast(!0),t.collapseAll();return}N.style.transition="transform 0.2s, opacity 0.2s",N.style.removeProperty("transform"),N.style.removeProperty("opacity")}}let T={onPointerDown:x,onPointerUp:v};return c&&d&&(T.onMouseEnter=b,t.stacked||(T.onMouseLeave=y)),p&&(T.onClick=N=>{u&&u(N),o.canCloseOnClick&&m(!0)}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:s,toastRef:l,eventHandlers:T}}var DX=typeof window<"u"?f.useLayoutEffect:f.useEffect,Jg=({theme:t,type:e,isLoading:n,...s})=>ze.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function RX(t){return ze.createElement(Jg,{...t},ze.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function PX(t){return ze.createElement(Jg,{...t},ze.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function MX(t){return ze.createElement(Jg,{...t},ze.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function IX(t){return ze.createElement(Jg,{...t},ze.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function OX(){return ze.createElement("div",{className:"Toastify__spinner"})}var Ny={info:PX,warning:RX,success:MX,error:IX,spinner:OX},FX=t=>t in Ny;function LX({theme:t,type:e,isLoading:n,icon:s}){let a=null,l={theme:t,type:e};return s===!1||(Ar(s)?a=s({...l,isLoading:n}):f.isValidElement(s)?a=f.cloneElement(s,l):n?a=Ny.spinner():FX(e)&&(a=Ny[e](l))),a}var $X=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:a,playToast:l}=AX(t),{closeButton:o,children:c,autoClose:d,onClick:m,type:u,hideProgressBar:p,closeToast:h,transition:g,position:x,className:v,style:y,progressClassName:b,updateId:k,role:w,progress:S,rtl:j,toastId:T,deleteToast:N,isIn:_,isLoading:A,closeOnClick:P,theme:E,ariaLabel:M}=t,R=Jl("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":P}),O=Ar(v)?v({rtl:j,position:x,type:u,defaultClassName:R}):Jl(R,v),L=LX(t),q=!!S||!d,Q={closeToast:h,type:u,theme:E},V=null;return o===!1||(Ar(o)?V=o(Q):f.isValidElement(o)?V=f.cloneElement(o,Q):V=pX(Q)),ze.createElement(g,{isIn:_,done:N,position:x,preventExitTransition:n,nodeRef:s,playToast:l},ze.createElement("div",{id:T,tabIndex:0,onClick:m,"data-in":_,className:O,...a,style:y,ref:s,..._&&{role:w,"aria-label":M}},L!=null&&ze.createElement("div",{className:Jl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},L),BR(c,t,!e),V,!t.customProgressBar&&ze.createElement(gX,{...k&&!q?{key:`p-${k}`}:{},rtl:j,theme:E,delay:d,isRunning:e,isIn:_,closeToast:h,hide:p,type:u,className:b,controlledProgress:q,progress:S||0})))},BX=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),qX=hX(BX("bounce",!0)),HX={position:"top-right",transition:qX,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function upe(t){let e={...HX,...t},n=t.stacked,[s,a]=f.useState(!0),l=f.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=TX(e),{className:m,style:u,rtl:p,containerId:h,hotKeys:g}=e;function x(y){let b=Jl("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":p});return Ar(m)?m({position:y,rtl:p,defaultClassName:b}):Jl(b,wy(m))}function v(){n&&(a(!0),Te.play())}return DX(()=>{var y;if(n){let b=l.current.querySelectorAll('[data-in="true"]'),k=12,w=(y=e.position)==null?void 0:y.includes("top"),S=0,j=0;Array.from(b).reverse().forEach((T,N)=>{let _=T;_.classList.add("Toastify__toast--stacked"),N>0&&(_.dataset.collapsed=`${s}`),_.dataset.pos||(_.dataset.pos=w?"top":"bot");let A=S*(s?.2:1)+(s?0:k*N);_.style.setProperty("--y",`${w?A:A*-1}px`),_.style.setProperty("--g",`${k}`),_.style.setProperty("--s",`${1-(s?j:0)}`),S+=_.offsetHeight,j+=.025})}},[s,d,n]),f.useEffect(()=>{function y(b){var k;let w=l.current;g(b)&&((k=w.querySelector('[tabIndex="0"]'))==null||k.focus(),a(!1),Te.pause()),b.key==="Escape"&&(document.activeElement===w||w!=null&&w.contains(document.activeElement))&&(a(!0),Te.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[g]),ze.createElement("section",{ref:l,className:"Toastify",id:h,onMouseEnter:()=>{n&&(a(!1),Te.pause())},onMouseLeave:v,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,b)=>{let k=b.length?{...u}:{...u,pointerEvents:"none"};return ze.createElement("div",{tabIndex:-1,className:x(y),"data-stacked":n,style:k,key:`c-${y}`},b.map(({content:w,props:S})=>ze.createElement($X,{...S,stacked:n,collapseAll:v,isIn:c(S.toastId,S.containerId),key:`t-${S.key}`},w)))}))}const ps=(t,e="export.csv")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=[n.join(","),...t.map(l=>n.map(o=>{const c=l[o]||"",d=String(c);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"});WR(a,e)},gs=(t,e="export.xls")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=`
    <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head>
        <meta charset="utf-8">
        <!--[if gte mso 9]>
        <xml>
          <x:ExcelWorkbook>
            <x:ExcelWorksheets>
              <x:ExcelWorksheet>
                <x:Name>Doctors</x:Name>
                <x:WorksheetOptions>
                  <x:DisplayGridlines/>
                </x:WorksheetOptions>
              </x:ExcelWorksheet>
            </x:ExcelWorksheets>
          </x:ExcelWorkbook>
        </xml>
        <![endif]-->
        <style>
          table { 
            border-collapse: collapse; 
            width: 100%; 
            font-family: Arial, sans-serif;
            font-size: 11px;
          }
          th, td { 
            border: 1px solid #d0d0d0; 
            padding: 8px 10px; 
            text-align: left;
            white-space: nowrap;
          }
          th { 
            background-color: #4472C4; 
            color: white; 
            font-weight: bold;
            text-transform: lowercase;
          }
          tr:nth-child(even) {
            background-color: #f9f9f9;
          }
        </style>
      </head>
      <body>
        <table>
          <thead>
            <tr>
              ${n.map(l=>`<th>${ac(l)}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${t.map(l=>`
              <tr>
                ${n.map(o=>`<td>${ac(String(l[o]||""))}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
    </html>
  `,a=new Blob([s],{type:"application/vnd.ms-excel"});WR(a,e)},fs=(t,e="export.pdf",n="Export Data")=>{if(!t||t.length===0)throw new Error("No data to export");const s=Object.keys(t[0]),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>${ac(n)}</title>
        <style>
          @page { size: A4 landscape; margin: 15mm; }
          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; font-size: 11px; }
          h1 { color: #333; text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 10px; }
          th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; word-wrap: break-word; }
          th { background-color: #4472C4; color: white; font-weight: bold; text-transform: lowercase; }
          tr:nth-child(even) { background-color: #f9f9f9; }
          .footer { margin-top: 20px; text-align: center; font-size: 9px; color: #666; }
        </style>
      </head>
      <body>
        <h1>${ac(n)}</h1>
        <table>
          <thead><tr>${s.map(c=>`<th>${ac(c)}</th>`).join("")}</tr></thead>
          <tbody>${t.map(c=>`<tr>${s.map(d=>`<td>${ac(String(c[d]||""))}</td>`).join("")}</tr>`).join("")}</tbody>
        </table>
        <div class="footer">Generated on ${new Date().toLocaleString()}</div>
        <script>
          window.onload = () => setTimeout(() => window.print(), 500);
        <\/script>
      </body>
    </html>
  `,l=new Blob([a],{type:"text/html"}),o=URL.createObjectURL(l);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),1e3)},WR=(t,e)=>{const n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)},ac=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])},Ms={getSettings:(t={})=>ve({endpoint:"settings",method:"GET",data:t}),getSetting:(t,e,n={})=>{if(t==="webhooks"){let s;switch(e){case"list":s="webhooks";break;case"table-config":s="webhooks/table-config";break;case"events":s="webhooks/events";break;default:s=`webhooks/${e}`}return ve({endpoint:s,method:"GET",data:n})}return ve({endpoint:`${t}/${e}`,method:"GET",data:n})},updateSettings:(t,e,n)=>ve({endpoint:`${t}/${e}`,method:"PUT",data:n}),getClinicData:()=>ve({endpoint:"clinic",method:"GET"}),updateClinicData:t=>ve({endpoint:"clinic",method:"PUT",data:t}),getCustomNotifications:(t={})=>ve({endpoint:"settings/custom-notifications",method:"GET",data:t}),getCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"GET"}),createCustomNotification:t=>ve({endpoint:"settings/custom-notifications",method:"POST",data:t}),updateCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}`,method:"PUT",data:e}),testCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/test`,method:"POST",data:e}),deleteCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"DELETE"}),updateCustomNotificationStatus:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/status`,method:"PUT",data:e}),getWebhookStatistics:(t,e={})=>ve({endpoint:`webhooks/statistics/${t}`,method:"GET",data:e}),exportCustomFields:(t={})=>ve({endpoint:"setting/custom-field/export",method:"GET",data:t}),exportHolidays:(t={})=>ve({endpoint:"settings/holidays/export",method:"GET",data:t}),exportListings:(t={})=>ve({endpoint:"settings/listing/export",method:"GET",data:t}),getDisabledDates:(t={})=>ve({endpoint:"settings/holidays/disabled-dates",method:"GET",data:t})},Pn={all:["settings"],lists:()=>[...Pn.all,"list"],list:t=>[...Pn.lists(),{filters:t}],details:()=>[...Pn.all,"detail"],detail:(t,e)=>[...Pn.details(),t,e],clinic:()=>[...Pn.all,"clinic"],webhooks:()=>[...Pn.all,"webhooks"],webhookList:t=>[...Pn.webhooks(),"list",{filters:t}],webhookDetail:t=>[...Pn.webhooks(),"detail",t],webhookTableConfig:()=>[...Pn.webhooks(),"table-config"],webhookEvents:()=>[...Pn.webhooks(),"events"],webhookStatistics:(t,e)=>[...Pn.webhooks(),"statistics",t,{params:e}]},wn=(t,e,n={},s={})=>ft({queryKey:[...Pn.detail(t,e),n],queryFn:()=>Ms.getSetting(t,e,n),enabled:!!(t&&e),...s}),un=(t,e)=>{const n=Ve();return Le({mutationFn:s=>{const a=s?.module||t,l=s?.key||e,o=s?.module||s?.key?s?.data:s;return Ms.updateSettings(a,l,o)},onSuccess:(s,a)=>{const l=a?.module||t,o=a?.key||e;n.invalidateQueries({queryKey:Pn.lists()}),n.invalidateQueries({queryKey:["config","settings"]}),n.invalidateQueries({queryKey:Pn.details()}),l&&o&&n.invalidateQueries({queryKey:Pn.detail(l,o)})}})},zX=(t={},e={})=>ft({queryKey:[...Pn.all,"custom-notifications",t],queryFn:()=>Ms.getCustomNotifications(t),...e}),KR=(t,e={})=>ft({queryKey:[...Pn.all,"custom-notification",t],queryFn:()=>Ms.getCustomNotification(t),enabled:!!t&&t!=="new",...e}),VX=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ms.createCustomNotification(n),onSuccess:()=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]})},...t})},UX=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,data:s})=>Ms.updateCustomNotification(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},WX=(t={})=>Le({mutationFn:({id:e,data:n})=>Ms.testCustomNotification(e,n),...t}),KX=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ms.deleteCustomNotification(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},GX=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,data:s})=>Ms.updateCustomNotificationStatus(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},YX=()=>Le({mutationFn:t=>Ms.exportCustomFields(t)}),QX=()=>Le({mutationFn:t=>Ms.exportHolidays(t)}),ZX=()=>Le({mutationFn:t=>Ms.exportListings(t)}),XX=(t={},e={})=>ft({queryKey:[...Pn.all,"holidays","disabled-dates",t],queryFn:()=>Ms.getDisabledDates(t),enabled:!!(t.module_type&&t.module_id),staleTime:30*1e3,...e}),ou=({id:t="kc-file-upload-input",name:e="file",defaultFile:n="",defaultFileId:s="",onChange:a,className:l="",disabled:o=!1,required:c=!1,label:d="",register:m,errors:u={},showPreview:p=!0,accept:h="",...g})=>{const[x,v]=f.useState(n),[y,b]=f.useState(s),[k,w]=f.useState(!1),[S,j]=f.useState(!1),[T,N]=f.useState(null),_=f.useRef(null),A=f.useRef(null),P=u[e],E=!!x,M={};c&&(M.required=r("This field is required","kivicare-clinic-management-system"));const{ref:R,...O}=m?m(e,M):{ref:null},L=!!P||!!T,q=P?.message||T;f.useEffect(()=>{w(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{n&&v(n),s&&b(s)},[n,s]);const Q=async W=>{try{j(!0),N(null);const X=window.kc_frontend?.rest_url,J=await ve({endpoint:`${X}/wp/v2/media`,method:"POST",data:W,isFile:!0});if(!J||J.success===!1)throw new Error(J?.message||r("Failed to upload file","kivicare-clinic-management-system"));if(v(J.source_url),b(J.id),_.current){_.current.value=J.id;const ue=new Event("input",{bubbles:!0});_.current.dispatchEvent(ue)}return a&&a({id:J.id,url:J.source_url,filename:J.title?.raw||"",type:J.media_type,subtype:J.mime_type,size:J.media_details?.filesize||0},J.id),J}catch(X){throw console.error("Error uploading file:",X),N(X.message||r("Failed to upload file","kivicare-clinic-management-system")),X}finally{j(!1)}},V=W=>{if(W.preventDefault(),!window.wp||!window.wp.media){A.current&&A.current.click();return}N(null);const X=window.wp.media({title:r("Select or Upload File","kivicare-clinic-management-system"),button:{text:r("Use this file","kivicare-clinic-management-system")},multiple:!1,library:{type:h?h.split(",").map(J=>J.trim()):""}});X.on("select",function(){const J=X.state().get("selection").first().toJSON();if(h&&!h.split(",").map(le=>le.trim()).includes(J.mime)){N(r("Please select a valid file format","kivicare-clinic-management-system"));return}if(v(J.url),b(J.id),_.current){_.current.value=J.id;const ue=new Event("input",{bubbles:!0});_.current.dispatchEvent(ue)}a&&a({id:J.id,url:J.url,filename:J.filename,type:J.type,subtype:J.subtype,size:J.filesizeInBytes},J.id)}),X.open()},se=async W=>{const X=W.target.files[0];if(X){if(N(null),h&&!h.split(",").map(ue=>ue.trim()).includes(X.type)){N(r("Please select a valid file format","kivicare-clinic-management-system"));return}if(X.size>10*1024*1024){N(r("File size should not exceed 10MB","kivicare-clinic-management-system"));return}try{if(v(X.name),b(""),_.current){_.current.value="";const J=new Event("input",{bubbles:!0});_.current.dispatchEvent(J)}a&&a({url:"",filename:X.name,type:X.type,size:X.size,file:X},""),k||await Q(X)}catch(J){console.error("Error handling file:",J)}}},G=W=>{if(o){W.preventDefault();return}S||(k?V(W):A.current&&A.current.click())},ge=W=>{if(W.preventDefault(),W.stopPropagation(),!o){if(v(""),b(""),_.current){_.current.value="";const X=new Event("input",{bubbles:!0});_.current.dispatchEvent(X)}A.current&&(A.current.value=""),a&&a({url:"",filename:"",type:"",size:0},"")}},ie=W=>{_.current=W,R&&R(W)};return i.jsxs("div",{className:`form-group ${l}`,children:[d&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[d,c&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:`kc-file-upload ${E?"uploaded":""} ${S?"uploading":""} ${L?"is-invalid":""}`,children:[i.jsx("input",{type:"text",id:`${t}-hidden`,className:"d-none",...O,value:y||"",ref:ie,readOnly:!0,disabled:o}),i.jsx("input",{type:"file",id:t,className:"kc-file-upload-input d-none",onChange:se,accept:h,ref:A,disabled:S||o,"aria-invalid":L?"true":"false","aria-describedby":L?`${t}-error`:void 0}),E?i.jsxs("div",{className:"p-2 border rounded bg-light d-flex align-items-center justify-content-between",children:[i.jsx("span",{className:"text-truncate me-2",title:x?x.includes("/")?x.split("/").pop():x:"",children:x?x.includes("/")?x.split("/").pop():x:""}),p&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[x&&x.startsWith("http")&&i.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-icon btn-primary",title:r("View File","kivicare-clinic-management-system"),children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M22.4627 11.666C22.6136 11.8715 22.6136 12.1528 22.4627 12.3582C20.6976 14.7607 16.5916 19.5 12.0001 19.5C7.40864 19.5 3.30252 14.7607 1.53744 12.3582C1.38656 12.1528 1.38656 11.8715 1.53744 11.666C3.30252 9.2635 7.40864 4.52417 12.0001 4.52417C16.5916 4.52417 20.6976 9.2635 22.4627 11.666Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),i.jsx("button",{type:"button",className:"btn btn-sm btn-icon btn-danger",onClick:ge,title:r("Remove File","kivicare-clinic-management-system"),disabled:o,children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M19.3248 9.46826C19.3248 9.46826 18.7818 16.2033 18.4668 19.0403C18.3168 20.3953 17.4798 21.1893 16.1088 21.2143C13.4998 21.2613 10.8878 21.2643 8.27979 21.2093C6.96079 21.1823 6.13779 20.3783 5.99079 19.0473C5.67379 16.1853 5.13379 9.46826 5.13379 9.46826",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M20.708 6.23975H3.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M17.4406 6.23973C16.6556 6.23973 15.9796 5.68473 15.8256 4.91573L15.5826 3.69973C15.4326 3.13873 14.9246 2.75073 14.3456 2.75073H10.1126C9.53358 2.75073 9.02558 3.13873 8.87558 3.69973L8.63258 4.91573C8.47858 5.68473 7.80258 6.23973 7.01758 6.23973",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]})]}):i.jsx("div",{className:`kc-file-upload-wrapper ${L?"border-danger":""} ${o?"disabled":""}`,style:o?{pointerEvents:"none",opacity:.6}:{},children:i.jsxs("div",{className:"kc-file-upload-container",children:[i.jsx("button",{type:"button",className:"kc-browse-btn",onClick:G,disabled:S||o,children:S?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):r("Browse...","kivicare-clinic-management-system")}),i.jsx("div",{className:"kc-file-text-area",children:S?r("Uploading...","kivicare-clinic-management-system"):r("No file selected.","kivicare-clinic-management-system")})]})}),L&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:q})]})]})};ou.propTypes={id:Pe.string,name:Pe.string,defaultFile:Pe.string,defaultFileId:Pe.oneOfType([Pe.string,Pe.number]),onChange:Pe.func,className:Pe.string,disabled:Pe.bool,required:Pe.bool,label:Pe.string,register:Pe.func,errors:Pe.object,accept:Pe.string};const GR={importData:t=>{if(!t||!(t instanceof FormData))throw new Error("Invalid form data provided");const n=`import/${t.get("context")||"doctors"}`;return ve({endpoint:n,method:"POST",data:t,isFile:!0})},downloadSampleFile:(t,e)=>{if(!t||!e)throw new Error("Context and format are required");const l=`${{doctors:"doctor",patients:"patient",receptionists:"receptionist",clinics:"clinic",appointments:"appointment",services:"service","custom-fields":"customField",prescriptions:"prescription",listing:"listing"}[t]||"doctor"}${e==="csv"?".csv":".xlsx"}`,c={csv:"csv",xlsx:"xlsx"}[e]||e,m=`${window.kc_frontend?.kivicare_pro_dir_uri||""}demoImportFiles/${c}/${l}`;return Promise.resolve({data:m,fileName:l})},getImportTemplates:t=>{if(!t)throw new Error("Context is required");return ve({endpoint:`import/templates/${t}`,method:"GET"})},validateImportFile:t=>{if(!t)throw new Error("File data is required");return ve({endpoint:"import/validate",method:"POST",data:t,isFile:!0})}},JX=()=>Le({mutationFn:t=>GR.importData(t),onSuccess:t=>{},onError:t=>{console.error("Import failed:",t)}}),eJ=()=>Le({mutationFn:({context:t,format:e})=>GR.downloadSampleFile(t,e),onSuccess:(t,e)=>{try{const n=document.createElement("a");n.href=t.data,n.download=t.fileName,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(n){console.error("Failed to download sample file:",n)}},onError:t=>{console.error("Sample file download failed:",t)}}),Lr=({show:t,onHide:e,onImport:n,onReopenImport:s,onDataRefresh:a,context:l="doctors",encounterId:o=null})=>{const[c,d]=f.useState(null),[m,u]=f.useState(0),[p,h]=f.useState(null),[g,x]=f.useState(!1),v=JX(),y=eJ(),{control:b,handleSubmit:k,watch:w,setValue:S,formState:{errors:j},reset:T}=en({defaultValues:{fileFormat:null,file:null,sendEmailNotification:!1,sendSMSNotification:!1}}),N=w("fileFormat"),_=[{value:"csv",label:r("CSV","kivicare-clinic-management-system"),icon:"ph-file-csv"},{value:"xlsx",label:r("XLSX","kivicare-clinic-management-system"),icon:"ph-file-xls"}],A=f.useMemo(()=>({doctors:{title:r("Doctors Import","kivicare-clinic-management-system"),requiredFields:[r("First Name","kivicare-clinic-management-system"),r("Last Name","kivicare-clinic-management-system"),r("Email","kivicare-clinic-management-system"),r("Country Calling Code","kivicare-clinic-management-system"),r("Country Code","kivicare-clinic-management-system"),r("Contact","kivicare-clinic-management-system"),r("Gender","kivicare-clinic-management-system"),r("Specialization","kivicare-clinic-management-system")]},patients:{title:r("Patients Import","kivicare-clinic-management-system"),requiredFields:[r("first_name","kivicare-clinic-management-system"),r("last_name","kivicare-clinic-management-system"),r("email","kivicare-clinic-management-system"),r("country_calling_code","kivicare-clinic-management-system"),r("country_code","kivicare-clinic-management-system"),r("contact","kivicare-clinic-management-system"),r("gender","kivicare-clinic-management-system")]},receptionists:{title:r("Receptionists Import","kivicare-clinic-management-system"),requiredFields:[r("First Name","kivicare-clinic-management-system"),r("Last Name","kivicare-clinic-management-system"),r("Email","kivicare-clinic-management-system"),r("Country Calling Code","kivicare-clinic-management-system"),r("Country Code","kivicare-clinic-management-system"),r("Contact ","kivicare-clinic-management-system"),r("Gender  ","kivicare-clinic-management-system")]},clinics:{title:r("Clinics Import","kivicare-clinic-management-system"),requiredFields:[r("clinic_name","kivicare-clinic-management-system"),r("email","kivicare-clinic-management-system"),r("country_calling_code","kivicare-clinic-management-system"),r("country_code","kivicare-clinic-management-system"),r("contact","kivicare-clinic-management-system"),r("specialization","kivicare-clinic-management-system"),r("address","kivicare-clinic-management-system"),r("city","kivicare-clinic-management-system"),r("country","kivicare-clinic-management-system"),r("postal_code","kivicare-clinic-management-system"),r("clinic_admin_first_name","kivicare-clinic-management-system"),r("clinic_admin_last_name","kivicare-clinic-management-system"),r("clinic_admin_email","kivicare-clinic-management-system"),r("clinic_admin_country_calling_code","kivicare-clinic-management-system"),r("clinic_admin_country_code","kivicare-clinic-management-system"),r("clinic_admin_contact","kivicare-clinic-management-system"),r("clinic_admin_gender","kivicare-clinic-management-system")]},services:{title:r("Services Import","kivicare-clinic-management-system"),requiredFields:[r("category","kivicare-clinic-management-system"),r("name","kivicare-clinic-management-system"),r("charges","kivicare-clinic-management-system"),r("doctor_id","kivicare-clinic-management-system")]},"custom-fields":{title:r("Custom Fields Import","kivicare-clinic-management-system"),requiredFields:[r("module","kivicare-clinic-management-system"),r("label","kivicare-clinic-management-system"),r("input_type","kivicare-clinic-management-system")]},appointments:{title:r("Appointments Import","kivicare-clinic-management-system"),requiredFields:[r("date","kivicare-clinic-management-system"),r("start_time","kivicare-clinic-management-system"),r("end_time","kivicare-clinic-management-system"),r("service","kivicare-clinic-management-system"),r("clinic_name","kivicare-clinic-management-system"),r("doctor_name","kivicare-clinic-management-system"),r("patient_name","kivicare-clinic-management-system")]},prescriptions:{title:r("Prescriptions Import","kivicare-clinic-management-system"),requiredFields:[r("name","kivicare-clinic-management-system"),r("frequency","kivicare-clinic-management-system"),r("duration","kivicare-clinic-management-system")]},listing:{title:r("Listings Import","kivicare-clinic-management-system"),requiredFields:[r("Name","kivicare-clinic-management-system"),r("Type","kivicare-clinic-management-system")]}}),[]),P=A[l]||A.doctors,E=P.requiredFields,M=f.useCallback(()=>{if(!N){Te.error(r("Please select a file format first","kivicare-clinic-management-system"));return}y.mutate({context:l,format:N.value})},[N,l,y]),R=f.useCallback((q,Q)=>{if(!q)return{valid:!1,message:r("Please select a file to import","kivicare-clinic-management-system")};const se=(q.name||(q.url?q.url.split("/").pop():q.filename)||"").split(".").pop().toLowerCase(),ge={csv:["csv"],xlsx:["xlsx","xls"]}[Q]||[];if(!ge.includes(se)){const ie=ge.join(", ");return{valid:!1,message:`${r("File format invalid. Expected","kivicare-clinic-management-system")} ${ie.toUpperCase()} ${r("file for","kivicare-clinic-management-system")} ${Q.toUpperCase()} ${r("format","kivicare-clinic-management-system")}`}}return{valid:!0}},[]),O=f.useCallback(async q=>{if(!q.fileFormat){Te.error(r("Please select a file format","kivicare-clinic-management-system"));return}if(!q.file){Te.error(r("Please select a file to import","kivicare-clinic-management-system"));return}const Q=R(q.file,q.fileFormat.value);if(!Q.valid){Te.error(Q.message);return}u(0);const V=setInterval(()=>{u(ge=>ge>=90?(clearInterval(V),90):ge+10)},200),se=new FormData;se.append("context",l),se.append("file_format",q.fileFormat.value),se.append("send_email_notification",q.sendEmailNotification),se.append("send_sms_notification",q.sendSMSNotification),l==="prescriptions"&&o&&se.append("encounter_id",o);let G=q.file instanceof File?q.file:q.file?.file||c;if(!(G instanceof File))if(G?.url)try{const ie=await(await fetch(G.url)).blob(),W=G.filename&&G.filename.includes(".")?G.filename:G.url?G.url.split("/").pop():"import.csv";G=new File([ie],W,{type:ie.type||"text/csv"})}catch(ge){throw console.error("Error fetching file from URL:",ge),new Error(r("Failed to load file for upload","kivicare-clinic-management-system"))}else throw new Error(r("Please select a valid file to import","kivicare-clinic-management-system"));if(!G)throw new Error(r("Please select a file to import","kivicare-clinic-management-system"));se.append("file",G),v.mutate(se,{onSuccess:ge=>{const ie=ge?.data?.data||ge?.data||{},W={totalRows:ie.total_rows||0,insertedRows:ie.inserted_rows||0,errors:[],errorSummary:{},toastErrorMessage:ie.toast_error_message||""};if(h(W),x(!0),W.insertedRows>0)Te.success("Data imported successfully",{autoClose:5e3}),a&&setTimeout(()=>{a()},1e3);else{const X=W.toastErrorMessage||"No data imported";Te.error(X,{autoClose:5e3})}e()},onError:ge=>{Te.error(ge.message||r("Import failed. Please try again.","kivicare-clinic-management-system")),console.error("Import error:",ge)},onSettled:()=>{u(0),clearInterval(V)}})},[l,R,v,a,e]),L=f.useCallback(()=>{T(),d(null),u(0),h(null),x(!1),e()},[T,e]);return i.jsxs(i.Fragment,{children:[i.jsxs(lt,{show:t,onHide:L,size:"lg",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:P.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:L,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsx(Mt,{onSubmit:k(O),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"fileFormat",control:b,rules:{required:!0},render:({field:q})=>i.jsx(ct,{...q,placeholder:r("Choose file format...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:_,isClearable:!0,styles:{menuPortal:Q=>({...Q,zIndex:9999})},formatOptionLabel:Q=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:`ph ${Q.icon} h5 mb-0`}),i.jsx("span",{children:Q.label})]})})})]})}),i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Upload File","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("div",{className:"gap-2",children:i.jsx(Ne,{name:"file",control:b,rules:{required:!0},render:({field:q})=>i.jsx(ou,{id:"import-file-upload",name:"file",showPreview:!1,accept:N?N.value==="csv"?"text/csv":N.value==="xlsx"?["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","),onChange:(Q,V)=>{q.onChange(Q?.file||Q),d(Q?.file||Q)},errors:j,disabled:!N||v.isPending,required:!0})})})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:M,disabled:!N||v.isPending,children:[i.jsx("i",{className:"ph ph-download me-1"}),r("Click here to download sample file","kivicare-clinic-management-system")]})})}),E.length>0&&i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"required-fields-container mt-0",children:i.jsxs("div",{className:"bg-info-subtle p-3 rounded",children:[i.jsxs("h6",{className:"mb-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),N?r("Following fields are required in","kivicare-clinic-management-system")+" "+N.label.toUpperCase()+" "+r("file","kivicare-clinic-management-system"):r("Following fields are required in file","kivicare-clinic-management-system")]}),i.jsx("ul",{className:"mb-0",children:E.map((q,Q)=>i.jsx("li",{children:i.jsx("strong",{children:q})},Q))})]})})}),!["appointments","services","custom-fields","prescriptions"].includes(l)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{className:"mb-3",children:[i.jsx("i",{className:"ph ph-bell me-1"}),r("Send Notification when user register","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(Ne,{name:"sendEmailNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"emailNotification",disabled:v.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"emailNotification",children:[i.jsx("i",{className:"ph ph-envelope me-1"}),r("Email","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(Ne,{name:"sendSMSNotification",control:b,render:({field:q})=>i.jsx("input",{...q,type:"checkbox",className:"form-check-input",id:"smsNotification",disabled:v.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"smsNotification",children:[i.jsx("i",{className:"ph ph-phone me-1"}),r("SMS/WhatsApp","kivicare-clinic-management-system")]})]})})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"mb-0 bg-info-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-info"}),i.jsxs("small",{children:[i.jsx("strong",{children:r("Note:","kivicare-clinic-management-system")})," ",r("If notification is enabled, demo import will take time.","kivicare-clinic-management-system")]})]})})]}),v.isPending&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"progress mb-3",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${m}%`},"aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",children:[m,"%"]})}),i.jsx("div",{className:"text-center",children:i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),r("Importing data, please wait...","kivicare-clinic-management-system")]})})]})]})})}),i.jsxs(lt.Footer,{className:"d-flex justify-content-end gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:L,disabled:v.isPending,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:k(O),disabled:v.isPending,children:v.isPending?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),r("Importing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import","kivicare-clinic-management-system")]})})]})]}),i.jsxs(lt,{show:g,onHide:()=>x(!1),size:"md",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:P.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>x(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:p&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4",children:i.jsx("i",{className:`ph ${p.insertedRows>0?"ph-check-circle text-success":"ph-warning-circle text-warning"}`,style:{fontSize:"3rem"}})}),i.jsx("h4",{className:"mb-3",children:r("Import Summary","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Total Rows","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-primary",children:p.totalRows||0})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Successfully Inserted","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-success",children:p.insertedRows||0})]})})]})]})}),i.jsxs(lt.Footer,{className:"d-flex justify-content-center gap-3",children:[i.jsx(Xt,{variant:"outline-primary",onClick:()=>{x(!1),h(null),s&&s()},children:r("Import More File","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:()=>x(!1),children:r("Close","kivicare-clinic-management-system")})]})]})]})},cu={addReview:t=>ve({endpoint:"rating/add",method:"POST",data:t}),updateReview:t=>ve({endpoint:"rating/update",method:"POST",data:t}),getReviews:(t={})=>ve({endpoint:"rating/list",method:"GET",data:t}),getReviewByPatientDoctor:(t,e)=>ve({endpoint:"rating/list",method:"GET",data:{patient_id:t,doctor_id:e,per_page:1}}).then(n=>{const s=n.data?.reviews||[];return s.length>0?s[0]:null}),deleteReview:t=>ve({endpoint:"rating/delete",method:"POST",data:t})},fr={all:["ratings"],lists:()=>[...fr.all,"list"],list:t=>[...fr.lists(),{filters:t}],details:()=>[...fr.all,"detail"],detail:t=>[...fr.details(),t]},YR=(t={},e={})=>{const[n,s]=f.useState(!1),a=ft({queryKey:fr.list(t),queryFn:()=>cu.getReviews(t),...e}),{data:l,isLoading:o,isFetching:c}=a,d=l?.data?.pagination||{},m=f.useCallback(async()=>{if(!o&&d.page<d.total_pages&&!n)try{s(!0),await a.refetch({...t,page:(d.page||0)+1})}finally{s(!1)}},[o,d.page,d.total_pages,n,t]);return{...a,hasNextPage:d.page<d.total_pages,fetchNextPage:m,isFetchingNextPage:n}},tJ=(t,e,n={})=>ft({queryKey:[...fr.details(),"patient-doctor",t,e],queryFn:()=>cu.getReviewByPatientDoctor(t,e),enabled:!!t&&!!e,...n}),nJ=()=>{const t=Ve();return Le({mutationFn:e=>cu.addReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},iJ=()=>{const t=Ve();return Le({mutationFn:e=>cu.updateReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},sJ=()=>{const t=Ve();return Le({mutationFn:e=>cu.deleteReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},aJ=({show:t,onHide:e})=>i.jsxs(lt,{show:t,onHide:e,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:i.jsx(C,{width:"150px",height:"1.5rem"})})}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx("div",{className:"d-flex gap-1",children:[1,2,3,4,5].map(n=>i.jsx(C,{width:"24px",height:"24px",style:{borderRadius:"50%"}},n))})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"80px",style:{borderRadius:"4px"}})]})]}),i.jsxs(lt.Footer,{children:[i.jsx(st,{width:"80px",className:"me-2"}),i.jsx(st,{width:"120px"})]})]}),rJ=({show:t,onHide:e,appointment:n})=>{const{hasCapability:s}=ut(),[a,l]=f.useState(0),[o,c]=f.useState(""),[d,m]=f.useState(!1),u=nJ(),p=iJ(),h=sJ(),{data:g,isLoading:x}=tJ(n?.patientId,n?.doctorId,{enabled:t&&!!n?.patientId&&!!n?.doctorId&&s("patient_review_get")});f.useEffect(()=>{g?(l(g.rating||0),c(g.review_text||""),m(!0)):(l(0),c(""),m(!1))},[g,t]);const v=()=>{if(a===0){At.fire({icon:"warning",title:r("Rating Required","kivicare-clinic-management-system"),text:r("Please select a rating before submitting.","kivicare-clinic-management-system")});return}const k={appointment_id:n?.id,rating:a,review_text:o.trim()};if(d&&g){if(!s("patient_review_edit")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to edit reviews.","kivicare-clinic-management-system")});return}p.mutate({review_id:g.id,rating:a,review_text:o.trim()},{onSuccess:w=>{At.fire({icon:"success",title:r("Review Updated","kivicare-clinic-management-system"),text:r("Your review has been updated successfully!","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review update error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to update review. Please try again.","kivicare-clinic-management-system")})}})}else{if(!s("patient_review_add")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to add reviews.","kivicare-clinic-management-system")});return}u.mutate(k,{onSuccess:w=>{At.fire({icon:"success",title:r("Review Submitted","kivicare-clinic-management-system"),text:r("Thank you for your review!","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review submission error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to submit review. Please try again.","kivicare-clinic-management-system")})}})}},y=async()=>{if(!s("patient_review_delete")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to delete reviews.","kivicare-clinic-management-system")});return}(await At.fire({icon:"warning",title:r("Delete Review?","kivicare-clinic-management-system"),text:r("Are you sure you want to delete this review? This action cannot be undone.","kivicare-clinic-management-system"),showCancelButton:!0,confirmButtonText:r("Yes, Delete","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"})).isConfirmed&&h.mutate({review_id:g.id},{onSuccess:w=>{At.fire({icon:"success",title:r("Review Deleted","kivicare-clinic-management-system"),text:r("Your review has been deleted successfully.","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review deletion error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to delete review. Please try again.","kivicare-clinic-management-system")})}})},b=()=>{e(),l(0),c(""),m(!1)};return x?i.jsx(aJ,{show:t,onHide:b}):i.jsxs(lt,{show:t,onHide:b,centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:d?r("Update Review","kivicare-clinic-management-system"):r("Leave Review","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>b(),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsxs(Mt,{children:[i.jsxs(Mt.Group,{className:"mb-3",children:[i.jsx(Mt.Label,{children:r("Rating","kivicare-clinic-management-system")}),i.jsx("div",{children:[1,2,3,4,5].map(k=>i.jsx("i",{className:`${a>=k?"ph-fill":"ph"} ph-star fs-4 me-1 text-warning cursor-pointer`,onClick:()=>l(k)},k))})]}),i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:r("Please Share Your Experience","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:o,onChange:k=>c(k.target.value),placeholder:r("Share your experience...","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsxs("div",{className:"d-flex justify-content-between w-100",children:[i.jsx("div",{children:d&&g&&s("patient_review_delete")&&i.jsx(Ze,{placement:"top",overlay:k=>i.jsx(mt,{...k,children:r("Delete Review","kivicare-clinic-management-system")}),children:i.jsx(Xt,{variant:"outline-danger",onClick:y,disabled:u.isPending||p.isPending||h.isPending,children:i.jsx("i",{className:`ph ${h.isPending?"ph-spinner ph-spin":"ph-trash"}`})})})}),i.jsxs("div",{children:[i.jsx(Xt,{variant:"secondary",onClick:b,className:"me-2",disabled:u.isPending||p.isPending||h.isPending,children:r("Close","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:v,disabled:u.isPending||p.isPending||h.isPending,children:u.isPending||p.isPending?r("Submitting...","kivicare-clinic-management-system"):d?r("Update Review","kivicare-clinic-management-system"):r("Submit Review","kivicare-clinic-management-system")})]})]})})]})};var Vh={exports:{}},lJ=Vh.exports,dC;function oJ(){return dC||(dC=1,(function(t,e){(function(n,s){t.exports=s()})(lJ,(function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,o,c){var d=o.prototype;c.utc=function(v){var y={date:v,utc:!0,args:arguments};return new o(y)},d.utc=function(v){var y=c(this.toDate(),{locale:this.$L,utc:!0});return v?y.add(this.utcOffset(),n):y},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),m.call(this,v)};var u=d.init;d.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else u.call(this)};var p=d.utcOffset;d.utcOffset=function(v,y){var b=this.$utils().u;if(b(v))return this.$u?0:b(this.$offset)?p.call(this):this.$offset;if(typeof v=="string"&&(v=(function(j){j===void 0&&(j="");var T=j.match(s);if(!T)return null;var N=(""+T[0]).match(a)||["-",0,0],_=N[0],A=60*+N[1]+ +N[2];return A===0?0:_==="+"?A:-A})(v),v===null))return this;var k=Math.abs(v)<=16?60*v:v;if(k===0)return this.utc(y);var w=this.clone();if(y)return w.$offset=k,w.$u=!1,w;var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(w=this.local().add(k+S,n)).$offset=k,w.$x.$localOffset=S,w};var h=d.format;d.format=function(v){var y=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,y)},d.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var g=d.toDate;d.toDate=function(v){return v==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var x=d.diff;d.diff=function(v,y,b){if(v&&this.$u===v.$u)return x.call(this,v,y,b);var k=this.local(),w=c(v).local();return x.call(k,w,y,b)}}}))})(Vh)),Vh.exports}var cJ=oJ();const dJ=ya(cJ);var Uh={exports:{}},mJ=Uh.exports,mC;function uJ(){return mC||(mC=1,(function(t,e){(function(n,s){t.exports=s()})(mJ,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(a,l,o){var c,d=function(h,g,x){x===void 0&&(x={});var v=new Date(h),y=(function(b,k){k===void 0&&(k={});var w=k.timeZoneName||"short",S=b+"|"+w,j=s[S];return j||(j=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:w}),s[S]=j),j})(g,x);return y.formatToParts(v)},m=function(h,g){for(var x=d(h,g),v=[],y=0;y<x.length;y+=1){var b=x[y],k=b.type,w=b.value,S=n[k];S>=0&&(v[S]=parseInt(w,10))}var j=v[3],T=j===24?0:j,N=v[0]+"-"+v[1]+"-"+v[2]+" "+T+":"+v[4]+":"+v[5]+":000",_=+h;return(o.utc(N).valueOf()-(_-=_%1e3))/6e4},u=l.prototype;u.tz=function(h,g){h===void 0&&(h=c);var x,v=this.utcOffset(),y=this.toDate(),b=y.toLocaleString("en-US",{timeZone:h}),k=Math.round((y-new Date(b))/1e3/60),w=15*-Math.round(y.getTimezoneOffset()/15)-k;if(!Number(w))x=this.utcOffset(0,g);else if(x=o(b,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(w,!0),g){var S=x.utcOffset();x=x.add(v-S,"minute")}return x.$x.$timezone=h,x},u.offsetName=function(h){var g=this.$x.$timezone||o.tz.guess(),x=d(this.valueOf(),g,{timeZoneName:h}).find((function(v){return v.type.toLowerCase()==="timezonename"}));return x&&x.value};var p=u.startOf;u.startOf=function(h,g){if(!this.$x||!this.$x.$timezone)return p.call(this,h,g);var x=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return p.call(x,h,g).tz(this.$x.$timezone,!0)},o.tz=function(h,g,x){var v=x&&g,y=x||g||c,b=m(+o(),y);if(typeof h!="string")return o(h).tz(y);var k=(function(T,N,_){var A=T-60*N*1e3,P=m(A,_);if(N===P)return[A,N];var E=m(A-=60*(P-N)*1e3,_);return P===E?[A,P]:[T-60*Math.min(P,E)*1e3,Math.max(P,E)]})(o.utc(h,v).valueOf(),b,y),w=k[0],S=k[1],j=o(w).utcOffset(S);return j.$x.$timezone=y,j},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(h){c=h}}}))})(Uh)),Uh.exports}var hJ=uJ();const pJ=ya(hJ);En.extend(dJ);En.extend(pJ);const Cy=({hideBreadcrumbs:t=!1,patientId:e=!1})=>{const{patientIdParam:n}=Gt(),{isAddonActive:s,patientCalanderIntegration:a,hasCapability:l,wp_timezone:o,current_server_time:c,cancellationBufferEnabled:d,cancellationBufferHours:m,global_date_format:u,currentDoctorId:p,currentuserID:h,defaultClinicId:g}=ut(),x=Yi(),v=Li(),y=Xn(),b=Jn(),k=s("kiviPro"),[w,S]=f.useState(!1),[j,T]=f.useState(!1),[N,_]=f.useState(!1),[A,P]=f.useState(null),[E,M]=f.useState(!1),R=f.useRef(null),[O,L]=f.useState([]),[q,Q]=f.useState([]),[V,se]=f.useState([]),[G,ge]=f.useState(null),[ie,W]=f.useState({page:1,perPage:10,search:"",date:"",clinic:"",patient:e||"",doctor:v&&(p||h)||"",status:"",orderby:"",order:"",timeFrame:"upcoming"}),X={patientId:"patient",doctorId:"doctor",clinicId:"clinic",appointment_start_date:"dateTime"},J=ie.orderby?[{id:X[ie.orderby]||ie.orderby,desc:ie.order==="desc"}]:[],ue=be=>{if(be.length>0){const{id:he,desc:Re}=be[0],Ie={patient:"patientId",doctor:"doctorId",clinic:"clinicId",dateTime:"appointment_start_date"};W(He=>({...He,orderby:Ie[he]||he,order:Re?"desc":"asc",page:1}))}else W(he=>({...he,orderby:"",order:"",page:1}))},le=Ve(),I=async({page:be,per_page:he,search:Re})=>{try{const Ie={dataType:"clinicList",page:be,per_page:he,search:Re},He=await le.fetchQuery({queryKey:pt.list(Ie),queryFn:()=>Dt.getStaticData(Ie),staleTime:300*1e3}),Be=He.data.map(Je=>({value:Je.id,label:Je.label||Je.name}));return L(Je=>[...Je,...Be]),He}catch(Ie){return console.error("Error loading clinics:",Ie),{data:[],pagination:{has_more:!1}}}},ee=async({page:be,per_page:he,search:Re,clinic_ids:Ie})=>{try{let He=Ie;(y||b)&&g&&(He=g);const Be={dataType:"staticData",staticDataType:"users",role:ol(),clinic_ids:He,page:be,per_page:he,search:Re},Je=await le.fetchQuery({queryKey:pt.list(Be),queryFn:()=>Dt.getStaticData(Be),staleTime:300*1e3}),bt=Je.data.map(Kt=>({value:Kt.id,label:Kt.label||Kt.name}));return Q(Kt=>[...Kt,...bt]),Je}catch(He){return console.error("Error loading patients:",He),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},K=async({page:be,per_page:he,search:Re,clinic_ids:Ie})=>{try{let He=Ie;(y||b)&&g&&(He=g);const Be={dataType:"staticData",staticDataType:"doctors",clinic_ids:He,page:be,per_page:he,search:Re},Je=await le.fetchQuery({queryKey:pt.list(Be),queryFn:()=>Dt.getStaticData(Be),staleTime:0}),bt=Je.data.map(Kt=>({value:Kt.id,label:Kt.label||Kt.name}));return se(Kt=>[...Kt,...bt]),Je}catch(He){return console.error("Error loading doctors:",He),{data:[],pagination:{has_more:!1}}}},ne=FR(),oe=be=>{ne.mutate(be,{onSuccess:he=>{const Re=new Blob([he],{type:"application/pdf"}),Ie=URL.createObjectURL(Re);window.open(Ie,"_blank")},onError:he=>{rt({title:r("Error","kivicare-clinic-management-system"),text:he?.response?.data?.message||he?.message||r("Failed to generate invoice PDF.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};f.useEffect(()=>{n&&W(be=>({...be,patient:n,page:1}))},[n]),f.useEffect(()=>{if(v&&(p||h)){const be=p||h;W(he=>({...he,doctor:be,page:1}))}},[v,p,h]);const{data:D}=wn("settings","google-event-template",{},{enabled:k&&Yi()}),$=[{value:"all",label:r("All","kivicare-clinic-management-system")},{value:"upcoming",label:r("Upcoming","kivicare-clinic-management-system")},{value:"past",label:r("Past","kivicare-clinic-management-system")}],te=f.useMemo(()=>Object.fromEntries(Object.entries(ie).filter(([be,he])=>he!==""&&he!==null&&he!==void 0).map(([be,he])=>he&&typeof he=="object"&&"value"in he?[be,he.value]:[be,he])),[ie]),{data:ae,isLoading:Y,error:H,refetch:B}=ZZ(te),re=ae?.data?.appointments||[],de=ae?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},xe=sX(),U=nX(),me=iX(),ye=oX(),pe=f.useMemo(()=>{if(!x||!d||!o||!c)return{enabled:!1};const be=parseFloat(m);if(isNaN(be)||be<=0)return{enabled:!1};try{return{enabled:!0,bufferHours:be,serverTime:En.tz(c,"YYYY-MM-DD HH:mm:ss",o)}}catch(he){return console.error("Error parsing server time for cancellation buffer:",he),{enabled:!1}}},[x,d,m,o,c]),Ce=lX(),Ge=async be=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const he={...te,format:be,page:ie.page,perPage:ie.perPage};he.status&&typeof he.status=="object"&&(he.status=he.status.value);const Re=await Ce.mutateAsync(he);if(Re?.data?.appointments&&Re.data.appointments.length>0){const Ie=new Date().toISOString().split("T")[0],He=Re.data.appointments.map(Be=>{const{id:Je,date:bt,time:Kt,description:$n,status:ti,created_at:vs,reports:rn,doctor_name:xs,patient_name:ri,clinic_full_address:Zt,clinic_name:sa,appointment_formated_start_date:ja,payment_mode:Na,cancellation_buffer:Hr,patient_contact_no:es,patient_image_url:gi,custom_forms:ys,charges:md,services:ud,service_array:hd,...pd}=Be;return{id:Je,date:bt,time:Kt,description:$n,status:ti,created_at:vs,reports:rn,doctor_name:xs,patient_name:ri,clinic_full_address:Zt,clinic_name:sa,appointment_formated_start_date:ja,payment_mode:Na,cancellation_buffer:Hr,patient_contact_no:es,patient_image_url:gi,custom_forms:ys,charges:md,services:ud,service_array:hd,...pd}});switch(be){case"csv":ps(He,`appointments-${Ie}.csv`);break;case"xls":gs(He,`appointments-${Ie}.xls`);break;case"pdf":fs(He,`appointments-${Ie}.pdf`,"Appointments List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else Wi(),rt({title:r("No Data to Export","kivicare-clinic-management-system"),text:r("No appointments found to export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(he){console.error("Export error:",he),Wi(),rt({title:r("Error!","kivicare-clinic-management-system"),text:he.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},De=()=>Ge("csv"),$e=()=>Ge("xls"),[et,tt]=f.useState(!1),qe=()=>{et||(tt(!0),Ge("pdf"),setTimeout(()=>tt(!1),2e3))},we=(be,he)=>{const Re={service_name:he.services||"Appointment",clinic_name:he.clinicName||"",appointment_date:he.appointmentStartDate||"",appointment_time:he.appointmentStartTime||"",patient_name:he.patientName||"",doctor_name:he.doctorName||""};let Ie=be;for(const[He,Be]of Object.entries(Re))Ie=Ie.replace(new RegExp(`{{${He}}}`,"g"),Be);return Ie},Ee=be=>{if(!be)return null;const he=new Date(be);return isNaN(he.getTime())?null:he},Qe=be=>{const he=be.getFullYear(),Re=String(be.getMonth()+1).padStart(2,"0"),Ie=String(be.getDate()).padStart(2,"0"),He=String(be.getHours()).padStart(2,"0"),Be=String(be.getMinutes()).padStart(2,"0"),Je=String(be.getSeconds()).padStart(2,"0");return`${he}${Re}${Ie}T${He}${Be}${Je}`},nt=be=>{const he=D?.data?.data?.post_title||"";return encodeURIComponent(we(he,be))},Ht=be=>{const he=D?.data?.data?.post_content||"",Re=be.description?`

${be.description}`:"";return encodeURIComponent(we(he,be)+Re)},Lt=be=>encodeURIComponent(be.clinicAddress||be.clinicName||""),Yt=be=>{const he=Ee(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Re=Ee(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!he||!Re)return"#";const Ie=he.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",He=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Be=nt(be),Je=Ht(be),bt=Lt(be);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${Be}&dates=${Ie}/${He}&details=${Je}&location=${bt}`},xt=be=>{const he=Ee(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Re=Ee(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!he||!Re)return"#";const Ie=he.toISOString(),He=Re.toISOString(),Be=nt(be),Je=Ht(be),bt=Lt(be);return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${Be}&startdt=${Ie}&enddt=${He}&body=${Je}&location=${bt}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent`},Ae=be=>{const he=Ee(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Re=Ee(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!he||!Re)return"#";const Ie=he.toISOString(),He=Re.toISOString(),Be=nt(be),Je=Ht(be),bt=Lt(be);return`https://outlook.office.com/calendar/deeplink/compose?subject=${Be}&startdt=${Ie}&enddt=${He}&body=${Je}&location=${bt}&path=/calendar/action/compose&rru=addevent`},Oe=be=>{const he=Ee(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Re=Ee(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!he||!Re)return"#";const Ie=Qe(he),He=Qe(Re),Be=nt(be),Je=Ht(be),bt=Lt(be);return`https://calendar.yahoo.com/?v=60&TITLE=${Be}&ST=${Ie}&ET=${He}&DESC=${Je}&in_loc=${bt}`},z=be=>{const he=Ee(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Re=Ee(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!he||!Re)return"";const Ie=he.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",He=Re.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Be=new Date().toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Je=`appointment-${be.id}@kivicare.com`,bt=we(D?.data?.data?.post_title||"",be),Kt=we(D?.data?.data?.post_content||"",be),$n=be.clinicName||"";return`BEGIN:VCALENDAR
      VERSION:2.0
      BEGIN:VEVENT
      UID:${Je}
      DTSTAMP:${Be}
      DTSTART:${Ie}
      DTEND:${He}
      SUMMARY:${bt}
      DESCRIPTION:${Kt}
      LOCATION:${$n}
      END:VEVENT
      END:VCALENDAR`},Z=Ln(),fe=f.useMemo(()=>[Z.accessor("patientId",{id:"patientId",header:()=>r("Appointment Details","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:be=>{const he=be.row.original;return i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:he.patient_image_url?i.jsx("img",{src:he.patient_image_url,alt:he.patientName,className:"avatar  flex-shrink-0 bg-primary-subtle  rounded-circle  avatar-60"}):i.jsx("div",{className:"avatar  flex-shrink-0 bg-primary-subtle  rounded-circle  avatar-60",children:"KP"})}),i.jsxs("div",{className:"flex-grow-1 min-w-0",children:[i.jsx("div",{className:"fw-semibold text-dark mb-1",children:i.jsx(ht,{to:`/patient/profile/${he.patientId}`,className:"text-decoration-none text-dark",children:he.patientName})}),!v&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-stethoscope me-2"}),i.jsxs("span",{className:"fw-medium",children:[r("Doctor","kivicare-clinic-management-system")," : "]}),x?i.jsx("span",{children:he.doctorName}):i.jsx(ht,{to:`/doctor/edit/${he.doctorId}`,className:"text-primary text-decoration-none",children:he.doctorName})]}),k&&!y&&!b&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-hospital me-2"}),i.jsxs("span",{className:"fw-medium",children:[r("Clinic","kivicare-clinic-management-system")," : "]}),!x&&!v?i.jsx(ht,{to:`/clinic/edit/${he.clinicId}`,className:"text-primary text-decoration-none",children:he.clinicName}):i.jsx("span",{children:he.clinicName})]})]})]})}}),Z.accessor(be=>({startDate:be.appointmentStartDate,startTime:be.appointmentStartTime,endTime:be.appointmentEndTime}),{id:"dateTime",header:()=>r("Date and Time","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"datetime",cell:be=>{const{startDate:he,startTime:Re,endTime:Ie}=be.getValue();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),he]}),i.jsx("div",{children:i.jsxs("b",{children:[i.jsx("i",{className:"ph ph-clock me-2"}),Re," - ",Ie]})})]})}}),Z.accessor("services",{id:"services",header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>be.row.original.services||"-"}),Z.accessor("charges",{id:"charges",header:()=>r("Charges","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>be.getValue()||"-"}),Z.accessor("payment",{id:"paymentMode",enableSorting:!1,header:()=>r("Payment Mode","kivicare-clinic-management-system"),cell:be=>be.row.original.payment?.mode||r("N/A","kivicare-clinic-management-system")}),Z.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>{const he={CANCELLED:0,BOOKED:1,PENDING:2,CHECK_OUT:3,CHECK_IN:4},Ie={[he.CANCELLED]:{text:r("Cancelled","kivicare-clinic-management-system"),class:"bg-danger-subtle"},[he.BOOKED]:{text:r("Booked","kivicare-clinic-management-system"),class:"bg-success-subtle"},[he.PENDING]:{text:r("Pending","kivicare-clinic-management-system"),class:"bg-warning-subtle"},[he.CHECK_OUT]:{text:r("Check Out","kivicare-clinic-management-system"),class:"bg-info-subtle"},[he.CHECK_IN]:{text:r("Check In","kivicare-clinic-management-system"),class:"bg-primary-subtle"}}[be.getValue()]||{text:r("Unknown","kivicare-clinic-management-system"),class:"bg-secondary-subtle"};return i.jsx("span",{className:`badge ${Ie.class} px-3 py-2`,children:Ie.text})}}),...x?[...a==="yes"?[Z.accessor("Add To Calendar",{id:"calandarevent",header:()=>r("Add To Calendar","kivicare-clinic-management-system"),cell:be=>i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Add to Google Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Yt(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Google"})}),i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Add to Outlook","kivicare-clinic-management-system")}),children:i.jsx("a",{href:xt(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Outlook"})}),i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Add to Microsoft 365","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Ae(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Microsoft"})}),i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Add to Apple Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(z(be.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Apple"})}),i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Add to Yahoo Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Oe(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Yahoo"})}),i.jsx(Ze,{placement:"top",overlay:he=>i.jsx(mt,{...he,children:r("Download iCal","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(z(be.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-success px-2 py-1",children:i.jsx("i",{className:"ph ph-download"})})})]})})]:[]]:[],...l("appointment_edit")||l("appointment_view")||l("appointment_delete")||l("appointment_cancel")?[Z.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>{const he={CANCELLED:0,BOOKED:1,CHECK_OUT:3,CHECK_IN:4},Re=parseInt(be.cell.row.original.status),Ie={isBooked:Re===he.BOOKED,isCheckedIn:Re===he.CHECK_IN,isCheckedOut:Re===he.CHECK_OUT,isCancelled:Re===he.CANCELLED,isToday:be.cell.row.original.isToday},{isBooked:He,isCheckedIn:Be,isCheckedOut:Je,isCancelled:bt,isToday:Kt}=Ie;let $n=!0;const ti=be.row.original;if(pe.enabled)try{const Zt=`${ti.appointmentStartDate} ${ti.appointmentStartTime}`,ja=En.tz(Zt,"YYYY-MM-DD HH:mm:ss",o).subtract(pe.bufferHours,"hour");pe.serverTime.isAfter(ja)&&($n=!1)}catch(Zt){console.error("Error calculating cancellation buffer for appointment:",ti.id,Zt),$n=!0}const vs=ti.isPast,rn=Zt=>sa=>i.jsx(mt,{id:`tooltip-${be.cell.row.original.id}-${Zt}`,...sa,children:Zt}),xs=Zt=>e?`/patient/profile/${e}/appointments/edit/${Zt}`:`/appointments/edit/${Zt}`,ri=Zt=>e?`/patient/profile/${e}/appointments/view/${Zt}`:`/appointments/view/${Zt}`;return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l("appointment_edit")&&!Be&&!Je&&!bt&&$n&&!vs&&i.jsx(Ze,{placement:"top",overlay:rn(r("Edit Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:xs(be.cell.row.original.id),className:"text-success",children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),l("appointment_view")&&i.jsxs(i.Fragment,{children:[i.jsx(Ze,{placement:"top",overlay:rn(r("View Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:ri(be.cell.row.original.id),className:"text-gray",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Ze,{placement:"top",overlay:rn(r("Print Details","kivicare-clinic-management-system")),children:i.jsx("span",{onClick:()=>oe(be.cell.row.original.id),role:"button",className:"text-secondary fs-5 p-0",children:i.jsx("i",{className:"ph ph-printer fs-5 p-0"})})})]}),Be&&i.jsx(Ze,{placement:"top",overlay:rn(r("Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${be.cell.row.original.encounterId}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray ",children:i.jsx("i",{className:"ph ph-gauge fs-5"})})})}),Be&&(()=>{const Zt=be?.cell?.row?.original?.zoom_data?.startUrl;return Zt?i.jsx(Ze,{placement:"top",overlay:rn(r("Start Video Conference","kivicare-clinic-management-system")),children:i.jsx("a",{target:"_blank",href:Zt,className:"btn btn-link text-primary fs-5 p-0",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-video-conference"})})}):!x&&!Zt?i.jsx(Ze,{placement:"top",overlay:rn(r("Video Conference Not Available","kivicare-clinic-management-system")),children:i.jsx("span",{className:"text-secondary fs-5 p-0",onClick:()=>Ut(be.cell.row.original),role:"button",tabIndex:0,children:i.jsx("i",{className:"ph ph-warning-octagon"})})}):null})(),!x&&l("patient_appointment_status_change")&&i.jsxs(i.Fragment,{children:[He&&Kt&&i.jsx(Ze,{placement:"top",overlay:rn(r("Check In","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>ot(be.cell.row.original,4),className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-in"})})}),Be&&Kt&&i.jsx(Ze,{placement:"top",overlay:rn(r("Check Out","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>ot(be.cell.row.original,3),className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-out"})})})]}),k&&x&&Je&&l("patient_review_add")&&i.jsx(Ze,{placement:"top",overlay:rn(r("Leave Review","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>{P(be.cell.row.original),_(!0)},className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-star"})})}),!x&&l("appointment_delete")&&i.jsx(Ze,{placement:"top",overlay:rn(r("Delete Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>Nt(be.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})}),x&&l("appointment_cancel")&&Re!==he.CANCELLED&&!Be&&!Je&&$n&&i.jsx(Ze,{placement:"top",overlay:rn(r("Cancel Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>dt(be.cell.row.original.id,0),children:i.jsx("i",{className:"ph ph-prohibit"})})})]})}})]:[]],[D,a,l,d,m,o,c]),_e=[{type:"inlineDateRange",name:"inlineDateRange",label:r("Select Date Range","kivicare-clinic-management-system"),placeholder:r("Select date range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},...k&&!y&&!b?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:I,options:O,onChange:be=>{ge(be)},storeObject:!0}]:[],...e===!1&&!n&&!x?[{type:"paginatedSelect",name:"patient",label:r("Patient","kivicare-clinic-management-system"),placeholder:r("Select Patient","kivicare-clinic-management-system"),optionLoader:ee,options:q,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}]:[],...v?[]:[{type:"paginatedSelect",name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),placeholder:r("Select Doctor","kivicare-clinic-management-system"),optionLoader:K,options:V,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:r("Select Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:r("Cancelled","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check-In","kivicare-clinic-management-system")},{value:"3",label:r("Check-Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],Ke=f.useMemo(()=>["search","date_from","date_to","clinic","patient","doctor","status"].some(he=>{const Re=ie[he];return typeof Re=="object"&&Re!==null?Re.value!==void 0&&Re.value!=="":Re!=null&&Re!==""})||ie.timeFrame!=="upcoming",[ie]),it=be=>{W({...ie,...be,page:1}),S(!1)},at=()=>{W({page:1,perPage:10,search:"",date:"",clinic:"",patient:"",doctor:"",status:"",orderby:"",order:"",timeFrame:"upcoming",startDate:"",endDate:"",date_from:"",date_to:""}),S(!1)},ot=(be,he)=>{if(he===3){be.encounterStatus==1?wt({title:r("","kivicare-clinic-management-system"),text:r("Please close the Encounter to checkout patient","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1}):wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),U.mutate({id:be.id,status:he},{onSuccess:Ie=>{Tt({text:Ie?.message||r("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Update appointment status error:",Ie);const He=Ie?.response?.data?.message||Ie?.message||r("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:He})}}))});return}he===4&&wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Re=>{Re.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),U.mutate({id:be.id,status:he},{onSuccess:Ie=>{Tt({text:Ie?.message||r("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Update appointment status error:",Ie);const He=Ie?.response?.data?.message||Ie?.message||r("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:He})}}))})},Nt=be=>{wt({title:r("Delete Appointment?","kivicare-clinic-management-system"),text:r("You're about to delete this appointment. This action cannot be undone.","kivicare-clinic-management-system"),confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep appointment","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(he=>{he.isConfirmed&&(yt({title:r("Deleting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),xe.mutate(be,{onSuccess:Re=>{Tt({text:Re?.message||r("Appointment has been deleted successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Delete appointment error:",Re);const Ie=Re?.response?.data?.message||Re?.message||r("Failed to delete appointment. Please try again.","kivicare-clinic-management-system");rt({text:Ie})}}))})},dt=(be,he)=>{wt({title:r("Cancel Appointment","kivicare-clinic-management-system"),text:r("Are you sure you want to cancel this appointment?","kivicare-clinic-management-system"),confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-warning",icon:"ph-warning",iconColor:"text-warning",bgIconColor:"bg-warning"}).then(Re=>{Re.isConfirmed&&(yt({title:r("Canceling...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),U.mutate({id:be,status:he},{onSuccess:Ie=>{Tt({text:r("Appointment cancelled successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Cancel appointment error:",Ie);const He=Ie?.response?.data?.message||Ie?.message||r("Failed to cancel appointment. Please try again.","kivicare-clinic-management-system");rt({text:He})}}))})},jt=()=>{B()},Ut=({id:be})=>{wt({title:r("Regenerate Video Conference Link","kivicare-clinic-management-system"),text:r("Are you sure you want to regenerate the video conference link for this appointment?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, regenerate","kivicare-clinic-management-system"),cancelButtonText:r("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(he=>{he.isConfirmed&&(yt({title:r("Regenerating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),me.mutate(be,{onSuccess:Re=>{Tt({text:Re?.message||r("Video conference link has been regenerated successfully.","kivicare-clinic-management-system")})},onError:Re=>{console.error("Regenerate video conference error:",Re);const Ie=Re?.response?.data?.data?.error||Re?.message||r("Failed to regenerate video conference link. Please try again.","kivicare-clinic-management-system");rt({text:Ie})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("div",{children:!t&&i.jsx(Si,{})}),!x&&k&&i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap",children:i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>T(!0),children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Appointments","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[l("appointment_add")&&i.jsxs(ht,{to:e?`/patient/profile/${e}/appointments/add`:"/appointments/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Appointment","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>S(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!E,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:R,children:i.jsxs("div",{ref:R,className:"position-absolute top-0  w-100 d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",options:$,value:$.find(be=>be.value===ie.timeFrame),isSearchable:!1,styles:{menuPortal:be=>({...be,zIndex:9999})},onChange:be=>W(he=>({...he,timeFrame:be.value}))}),i.jsxs(Qd,{children:[i.jsx(Un,{onChange:be=>{if(be.length===2){const[he,Re]=be,Ie=Je=>{const bt=Je.getFullYear(),Kt=String(Je.getMonth()+1).padStart(2,"0"),$n=String(Je.getDate()).padStart(2,"0");return`${bt}-${Kt}-${$n}`},He=Ie(he),Be=Ie(Re);W(Je=>({...Je,timeFrame:"all",date_from:He,date_to:Be,page:1}))}},value:ie.date_from&&ie.date_to?[Zn(ie.date_from),Zn(ie.date_to)]:null,options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control",placeholder:r("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:ie.date_from&&ie.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{W(he=>({...he,date_from:"",date_to:"",page:1}));const be=document.querySelector('.form-control[placeholder="Select date range"]');be&&be._flatpickr&&be._flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:ie.search,onChange:be=>{const he=be.target.value;W(Re=>({...Re,search:he,page:1}))}})]})}),l("appointment_export")&&k&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:De,disabled:Ce.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:$e,disabled:Ce.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:qe,disabled:Ce.isPending||et,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:re,columns:fe,isLoading:Y,error:H,currentPage:de.currentPage,perPage:de.perPage,totalItems:de.total,lastPage:de.lastPage,onPageChange:be=>W(he=>({...he,page:be})),onPerPageChange:be=>W(he=>({...he,perPage:be,page:1})),sorting:J,onSortingChange:ue,manualSorting:!0,enableSelection:!x,bulkActions:x?[]:[{label:r("Delete","kivicare-clinic-management-system"),action:(be,he)=>{const Re=be.map(Ie=>Ie.id);wt({title:r("Delete Appointments?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${be.length} appointments</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep appointments","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ie=>{Ie.isConfirmed&&(yt({title:r("Deleting Appointments...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected appointments.<br>This won't take long.","kivicare-clinic-management-system")}),ye.mutate(Re,{onSuccess:He=>{he&&he(),Tt({title:r("Appointment Deleted","kivicare-clinic-management-system"),text:r(`${be.length} appointment${be.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to appointments","kivicare-clinic-management-system")})},onError:He=>{console.error("Bulk delete appointments error:",He);const Be=He?.response?.data?.message||He?.message||r("Failed to delete selected appointments. Please try again.","kivicare-clinic-management-system");rt({text:Be})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:M,moduleNamePlural:"appointments",skeletonRows:5,className:"kc-appointments-list"})]}),i.jsx(na,{show:w,onHide:()=>S(!1),queryParams:ie,onApplyFilters:it,onResetFilters:at,title:r("Filters","kivicare-clinic-management-system"),fields:_e,hasAppliedFilters:Ke,width:"550px"}),k&&i.jsx(Lr,{show:j,onHide:()=>T(!1),onReopenImport:()=>T(!0),onDataRefresh:jt,context:"appointments"}),i.jsx(rJ,{show:N,onHide:()=>_(!1),appointment:A})]})};function QR({Formwatch:t,summaryData:e,summaryLoading:n,summaryError:s,className:a={}}){const[l,o]=f.useState(!0),{getPriceFormat:c}=ut(),d=t("service"),m=f.useMemo(()=>{const u={};return(e?.applied_taxes||[]).forEach(p=>{if(p.tax_name)if(u[p.tax_name])u[p.tax_name].count+=1,u[p.tax_name].totalAmount+=Number(p.tax_amount);else{let h=1;parseInt(p.tax_value)/parseInt(p.tax_amount)>1&&p.type==="fixed"&&(h=Math.ceil(parseInt(p.tax_value)/parseInt(p.tax_amount))),u[p.tax_name]={...p,count:h,totalAmount:Number(p.tax_amount)}}}),Object.values(u)},[e?.applied_taxes]);return!d||d.length===0?i.jsx(St,{className:a,children:i.jsx(St.Body,{className:"text-center",children:i.jsxs("p",{children:[" ",r("No Service Is Selected","kivicare-clinic-management-system")," "]})})}):n?i.jsx(St,{className:a,children:i.jsx(xk,{})}):s?i.jsx(St,{className:a,children:i.jsx(St.Body,{className:"text-danger",children:r("Failed to load appointment summary.","kivicare-clinic-management-system")})}):i.jsx(St,{className:a,children:i.jsxs(St.Body,{children:[e?.services?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:u.title}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(u.price)})})]},p)),e?.applied_taxes?.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(e?.subtotal)})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 cursor-pointer applied-tax",onClick:()=>o(!l),children:[i.jsx("div",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{class:"ph ph-caret-up  fw-semibold rotated"}),i.jsx("p",{className:"m-0 text-danger",children:c(e?.tax)})]})]}),i.jsx(f_,{in:l,children:i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:m?.map((u,p)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("div",{className:"font-size-14",children:[u.tax_name," ",u.count>1?` x${u.count}`:""," ",u.tax_type=="percentage"?`(${u.tax_value}%)`:""]}),i.jsx("div",{className:"text-end text-danger font-size-14 m-0",children:c(u.totalAmount)})]},p))})]})})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx("div",{children:i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")})}),i.jsx("div",{children:i.jsx("h5",{className:"m-0 text-primary",children:c(e?.grand_total)})})]})]})})}function gJ({showConfirmationModel:t,handleCloseConfirmationModel:e,handleConfirmAppointment:n,confirmationData:s,isSubmitting:a,setValue:l}){const{getPriceFormat:o,paymentGateway:c}=ut(),{clinicName:d,doctorName:m,service:u,date:p,time:h,grandTotal:g}=s||{},x=c?.map(v=>({value:v.id,label:v.name}));return i.jsx(lt,{show:t,onHide:e,backdrop:"static",keyboard:!1,centered:!0,size:"md",children:i.jsxs(lt.Body,{className:"appointment-confirmation-model",children:[i.jsx("div",{className:"d-flex justify-content-center mb-5 pb-lg-4 pb-0",children:i.jsx("div",{class:"modal-custom-icon",children:i.jsx("i",{class:"ph ph-question-mark text-primary"})})}),i.jsxs("div",{className:"text-center mb-5",children:[i.jsx("h4",{children:r("Confirm your Appointment","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Please review the details below to ensure everything is correct before proceeding.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"p-4 bg-body rounded-3 mb-3",children:[i.jsx("h6",{className:"pb-3 mb-4 border-bottom",children:r("Appointment Summary:","kivicare-clinic-management-system")}),i.jsxs(Yn,{className:"gy-2",children:[i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Clinic:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:d||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Doctor:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:m||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Service:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:Array.isArray(u)?u.map(v=>v.label).join(", "):u?.label||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Date and Time:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:p&&h?`${p}, ${h}`:r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Price:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:g?o(g):r("Free","kivicare-clinic-management-system")})})]})]}),Number(g)>0&&i.jsxs("div",{children:[i.jsx("label",{children:r("Payment Gateway:","kivicare-clinic-management-system")}),i.jsx(ct,{options:x,onChange:v=>{l("payment_gateway",v.value)},className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:v=>({...v,zIndex:9999})}})]}),i.jsxs("div",{className:"d-flex justify-content-center gap-lg-4 gap-2 mt-5 pt-lg-2 pt-0",children:[i.jsx(Xt,{variant:"secondary",onClick:e,disabled:a,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:n,disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Confirming...","kivicare-clinic-management-system")]}):r("Confirm","kivicare-clinic-management-system")})]})]})})}const fJ={getSchedules:(t={})=>ve({endpoint:"clinic-schedules",method:"GET",data:t}),getSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"GET"}),createSchedule:t=>ve({endpoint:"clinic-schedules",method:"POST",data:t}),updateSchedule:(t,e)=>ve({endpoint:`clinic-schedules/${t}`,method:"PUT",data:e}),deleteSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"DELETE"}),getunavailableSchedule:(t={})=>ve({endpoint:"clinic-schedules/get-unavailable-schedule",method:"GET",data:t})},zd={all:["clinicSchedules"],lists:()=>[...zd.all,"list"],list:t=>[...zd.lists(),{filters:t}],details:()=>[...zd.all,"detail"],detail:t=>[...zd.details(),t]},vJ=(t={},e={})=>ft({queryKey:zd.list(t),queryFn:()=>fJ.getunavailableSchedule(t),...e}),xJ=()=>Ir(()=>import("./index-B0HAhLET.js"),[],import.meta.url),yJ=ze.lazy(()=>Ir(()=>import("./react-stripe.esm-CKgnXdA0.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckoutProvider}))),bJ=ze.lazy(()=>Ir(()=>import("./react-stripe.esm-CKgnXdA0.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckout}))),wJ=t=>{if(!t)return{isValid:!1,error:r("No appointment data provided","kivicare-clinic-management-system")};const{publishable_key:e,client_secret:n}=t;return e?n?e.startsWith("pk_")?n.includes("_secret_")?{isValid:!0,error:null}:{isValid:!1,error:r("Invalid Stripe client secret format","kivicare-clinic-management-system")}:{isValid:!1,error:r("Invalid Stripe publishable key format","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Stripe client secret","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Stripe publishable key","kivicare-clinic-management-system")}},kJ=()=>{let t=null;try{t=hn()}catch{}return f.useEffect(()=>{Ir(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url).catch(e=>console.warn("Failed to load payment gateway styles:",e))},[]),t},jJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const l=kJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState(null),[x,v]=f.useState(null),[y,b]=f.useState(!0),k=LR();f.useImperativeHandle(a,()=>({updateAppointmentData:j=>{c(j)}}),[]);const w=()=>{k.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,session_id:o.payment_response.data.payment_id,method:"POST"}).then(j=>{j.data.status=="success"?(Te.success(j?.data?.message||r("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),e?setTimeout(()=>{e(j)},1500):l&&setTimeout(()=>{l("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Te.error(j?.data?.message||r("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),n?n(j):l&&l("/appointments/add",{replace:!0}))})},S=()=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep paying","kivicare-clinic-management-system")}).then(async j=>{if(j.isConfirmed)try{const T=window.kc_frontend?.rest_url||"/wp-json/",N=o?.appointment_id,_=o?.payment_response?.gateway||"stripe";await fetch(`${T}kivicare/v1/appointments/payment-cancel?appointment_id=${N}&gateway=${_}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Te.success(r("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),p(!1),setTimeout(()=>{n?n():l&&l("/appointments",{replace:!0})},1e3)}catch(T){console.error("Error cancelling appointment:",T),p(!1)}})};return f.useEffect(()=>{const j=async()=>{try{b(!0),v(null);const T=wJ(o.payment_response?.data);if(!T.isValid){v(T.error);return}const N=await xJ();g(N);const _=await N.loadStripe(o.payment_response?.data?.publishable_key);if(!_){v(r("Failed to load Stripe. Please check your connection and try again.","kivicare-clinic-management-system"));return}m(_)}catch(T){console.error("Error initializing Stripe:",T),v(r("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{b(!1),p(!0)}};if(!o){p(!1);return}j()},[o]),i.jsx(lt,{show:u,centered:!0,size:"xl",animation:!0,onHide:()=>S(),backdrop:"static",keyboard:!1,className:"kivicare-payment-gateway-modal",...s,children:i.jsxs(lt.Body,{className:"position-relative",children:[i.jsx("button",{className:"close-btn",onClick:()=>S(),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})}),d&&h&&i.jsx(ze.Suspense,{fallback:i.jsx(Ng,{}),children:i.jsx(yJ,{stripe:d,options:{clientSecret:o?.payment_response?.data?.client_secret,onComplete:w},children:i.jsx(bJ,{})})})]})})}),NJ=t=>{if(!t)return{isValid:!1,error:r("No appointment data provided","kivicare-clinic-management-system")};const{key_id:e,order_id:n,amount:s,currency:a}=t;return e?n?!s||isNaN(s)?{isValid:!1,error:r("Invalid amount","kivicare-clinic-management-system")}:a?{isValid:!0,error:null}:{isValid:!1,error:r("Missing currency","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Razorpay order ID","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Razorpay key ID","kivicare-clinic-management-system")}},CJ=()=>{let t=null;try{t=hn()}catch{}return t},SJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const l=CJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,p]=f.useState(!1),h=LR();f.useImperativeHandle(a,()=>({updateAppointmentData:x=>{c(x)}}),[]);const g=async()=>{if((await At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep paying","kivicare-clinic-management-system")})).isConfirmed)try{const v=window.kc_frontend?.rest_url||"/wp-json/",y=o?.appointment_id,b=o?.payment_response?.gateway||"razorpay";await fetch(`${v}kivicare/v1/appointments/payment-cancel?appointment_id=${y}&gateway=${b}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Te.success(r("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{n?n():l&&l("/appointments",{replace:!0})},1e3)}catch(v){console.error("Error cancelling appointment:",v),n?n():l&&l("/appointments",{replace:!0})}};return f.useEffect(()=>{const x=async()=>{try{p(!0),m(null);const v=NJ(o.payment_response?.data);if(!v.isValid){m(v.error);return}const y=o.payment_response?.data;if(await(S=>new Promise((j,T)=>{const N=document.createElement("script");N.src=S,N.onload=()=>j(!0),N.onerror=()=>T(new Error("Failed to load Razorpay SDK")),document.body.appendChild(N)}))("https://checkout.razorpay.com/v1/checkout.js"),!window.Razorpay)throw new Error("Razorpay SDK failed to load");const k={key:y.key_id,currency:y.currency.toUpperCase(),order_id:y.order_id,handler:function(S){h.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,payment_id:S.razorpay_payment_id,razorpay_order_id:S.razorpay_order_id,razorpay_signature:S.razorpay_signature,method:"POST"}).then(j=>{j.data.status==="success"?(Te.success(j?.data?.message||r("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{e?e(j):l&&l("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Te.error(j?.data?.message||r("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n(j):l&&l("/appointments/add",{replace:!0}))}).catch(j=>{Te.error(r("Payment processing failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n():l&&l("/appointments/add",{replace:!0})})},modal:{ondismiss:function(){g()}},prefill:{name:o.patient_name||"",email:o.patient_email||"",contact:o.patient_contact||""},notes:{appointment_id:o.appointment_id,transaction_ref:y.transaction_ref},theme:{color:"#3399cc"}};new window.Razorpay(k).open()}catch(v){console.error("Error initializing Razorpay:",v),m(r("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{p(!1)}};o&&x()},[o]),i.jsxs(i.Fragment,{children:[u&&i.jsxs("div",{className:"text-center",children:[i.jsx(Ng,{animation:"border"}),i.jsx("p",{children:r("Loading Razorpay...","kivicare-clinic-management-system")})]}),d&&i.jsx("div",{className:"alert alert-danger",children:d})]})}),Cl={getCustomForms:(t={})=>ve({endpoint:"custom-forms/admin",method:"GET",data:t}),getCustomFormsRender:(t={})=>ve({endpoint:"custom-forms/render",method:"GET",data:t}),getCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"GET"}),createCustomForm:t=>ve({endpoint:"custom-forms",method:"POST",data:t}),updateCustomForm:(t,e)=>ve({endpoint:`custom-forms/${t}`,method:"PUT",data:e}),deleteCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"DELETE"}),getCustomFormStats:(t={})=>ve({endpoint:"custom-forms/stats",method:"GET",data:t}),bulkDeleteCustomForms:t=>ve({endpoint:"custom-forms/bulk-delete",method:"POST",data:{ids:t}}),updateCustomFormStatus:(t,e)=>ve({endpoint:`custom-forms/${t}/status`,method:"PUT",data:{status:e}}),getCustomFormTableConfig:()=>ve({endpoint:"custom-forms/table-config",method:"GET"}),submitCustomForm:t=>ve({endpoint:"custom-forms/submit",method:"POST",data:t})},ji={all:["custom-forms"],lists:()=>[...ji.all,"list"],list:t=>[...ji.lists(),{filters:t}],details:()=>[...ji.all,"detail"],detail:t=>[...ji.details(),t],tableConfig:()=>[...ji.all,"table-config"]},_J=(t={},e={})=>ft({queryKey:ji.list(t),queryFn:()=>Cl.getCustomForms(t),...e}),ad=(t={},e={})=>ft({queryKey:ji.list(t),queryFn:()=>Cl.getCustomFormsRender(t),...e}),ZR=(t,e={})=>ft({queryKey:ji.detail(t),queryFn:()=>Cl.getCustomForm(t),enabled:!!t,...e}),EJ=(t={})=>{const e=Ve();return Le({mutationFn:n=>Cl.createCustomForm(n),onSuccess:n=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(n.id),n)},...t})},TJ=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,...s})=>Cl.updateCustomForm(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},AJ=(t={})=>{const e=Ve();return Le({mutationFn:n=>Cl.deleteCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.removeQueries({queryKey:ji.detail(s)})},...t})},DJ=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,status:s})=>Cl.updateCustomFormStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},RJ=(t={})=>{const e=Ve();return Le({mutationFn:n=>Cl.submitCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()})},...t})},Wa=f.forwardRef(({fields:t,data:e={},readOnly:n=!0,onChange:s,formId:a},l)=>{const{control:o,handleSubmit:c,watch:d,reset:m,trigger:u,formState:{errors:p,isValid:h,isDirty:g}}=en({defaultValues:e,mode:"onBlur",reValidateMode:"onBlur"}),x=d(),[v,y]=f.useState({isValid:!0,errors:{}}),b=f.useRef(p);f.useEffect(()=>{b.current=p},[p]);const k=f.useCallback(async()=>{const T=await u();await new Promise(A=>setTimeout(A,100));const N=b.current,_={isValid:T,errors:N};return y(_),_},[u]);f.useImperativeHandle(l,()=>({validateForm:async()=>(await k()).isValid,getFormData:()=>x,getFormErrors:()=>v.errors,getFormValidationState:()=>v,isFormValid:()=>v.isValid,resetForm:(T={})=>{m(T),y({isValid:!0,errors:{}})},triggerValidation:async()=>await k()}),[x,v,k,m]),f.useEffect(()=>{Object.keys(p).length>0&&y(T=>({...T,errors:p,isValid:!1}))},[p]),f.useEffect(()=>{s&&s(x)},[x,s]);const w=T=>{const N={};return T.required&&(N.required=T.errorMessage||r("This field is required","kivicare-clinic-management-system")),T.type==="email"&&(N.pattern={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}),T.type==="number"&&(T.min!==void 0&&(N.min={value:T.min,message:r(`Minimum value is ${T.min}`,"kivicare-clinic-management-system")}),T.max!==void 0&&(N.max={value:T.max,message:r(`Maximum value is ${T.max}`,"kivicare-clinic-management-system")})),T.minLength&&(N.minLength={value:T.minLength,message:r(`Minimum length is ${T.minLength} characters`,"kivicare-clinic-management-system")}),T.maxLength&&(N.maxLength={value:T.maxLength,message:r(`Maximum length is ${T.maxLength} characters`,"kivicare-clinic-management-system")}),T.pattern&&(N.pattern={value:new RegExp(T.pattern),message:T.patternMessage||r("Invalid format","kivicare-clinic-management-system")}),T.validate&&(N.validate=T.validate),N},S=T=>{if(n)return j(T);const N=w(T),_=!!p[T.id],A=p[T.id]?.message,P={id:`${a}_${T.id}`,isInvalid:_,"aria-describedby":_?`${a}_${T.id}_feedback`:void 0};switch(T.type){case"textarea":return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsx(Mt.Control,{as:"textarea",rows:3,...M,placeholder:T.placeholder,...P})}),_&&i.jsx(Mt.Control.Feedback,{id:`${P.id}_feedback`,type:"invalid",style:{display:"block"},children:A})]});case"select":return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsx(ct,{value:T.options?.find(R=>R===M.value)?{label:T.options.find(R=>R===M.value),value:M.value}:null,onChange:R=>M.onChange(R?.value||""),onBlur:M.onBlur,options:T.options?.map(R=>({label:R,value:R}))||[],placeholder:T.placeholder||r("Select an option","kivicare-clinic-management-system"),className:`react-select-box ${_?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:R=>({...R,zIndex:9999})},...P})}),_&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"radio":return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsx("div",{className:_?"is-invalid":"",children:T.options?.map((R,O)=>i.jsx(Mt.Check,{id:O===0?P.id:`${P.id}_${O}`,inline:!0,type:"radio",label:R,name:T.id,value:R,checked:M.value===R,onChange:L=>M.onChange(L.target.value),onBlur:M.onBlur,isInvalid:_},O))})}),_&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"checkbox":return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsx(Mt.Check,{type:"checkbox",label:T.placeholder||T.label,checked:!!M.value,onChange:R=>M.onChange(R.target.checked),onBlur:M.onBlur,isInvalid:_,...P})}),_&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"file":const E=T.fileTypes&&T.fileTypes.length>0?T.fileTypes.map(M=>M.id||M).join(","):"";return i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>{const R=M.value,O=R&&(R.url||R.name);return i.jsx(ou,{id:`custom-form-field-${T.id}`,name:T.id,accept:E,required:T.required,defaultFile:O?R.url:"",defaultFileId:O?R.id:"",onChange:(L,q)=>{M.onChange({id:q,url:L.url,name:L.filename||L.name})},errors:p,readOnly:n})}});case"date":return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{className:`form-control ps-3 pe-5 ${_?"is-invalid":""}`,placeholder:T.placeholder,style:{display:"none"},options:ze.useMemo(()=>({dateFormat:"Y-m-d",altInput:!0,altFormat:xi(window.kc_frontend.date_format),disableMobile:!0,locale:Wn()}),[]),...P,value:M.value||"",onChange:async R=>{const O=R[0]?$a(R[0]):"";M.onChange(O),await u(T.id)}}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]})}),_&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});default:return i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:T.id,control:o,rules:N,render:({field:M})=>i.jsx(Mt.Control,{type:T.type,...M,placeholder:T.placeholder,...P})}),_&&i.jsx(Mt.Control.Feedback,{id:`${P.id}_feedback`,type:"invalid",children:A})]})}},j=T=>{const N=x[T.id];if(N==null||N==="")return i.jsx("div",{className:" small",children:i.jsx("em",{children:r("No data","kivicare-clinic-management-system")})});switch(T.type){case"textarea":return i.jsx("div",{className:"font-size-14 h6 mb-0 text-prewrap",children:N});case"select":{const _=T.options?.find(A=>A===N);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:_||N})}case"radio":{const _=T.options?.find(A=>A===N);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:_||N})}case"checkbox":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N?r("Yes","kivicare-clinic-management-system"):r("No","kivicare-clinic-management-system")});case"file":return N?N instanceof File?i.jsxs("div",{className:"font-size-14 h6 mb-0",children:[i.jsx("div",{children:N.name}),i.jsxs("small",{children:[(N.size/1024).toFixed(2)," KB"]})]}):i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0 text-primary",children:r("View File","kivicare-clinic-management-system")}):i.jsx("div",{className:"small",children:i.jsx("em",{children:r("No file","kivicare-clinic-management-system")})});case"date":try{const _=new Date(N);if(!isNaN(_.getTime())){const A=_.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return i.jsx("div",{className:"font-size-14 h6 mb-0",children:A})}}catch{}return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N});case"email":return i.jsx("a",{href:`mailto:${N}`,className:"d-block font-size-14 h6 mb-0",children:N});case"tel":case"phone":return i.jsx("a",{href:`tel:${N}`,className:"d-block font-size-14 h6 mb-0",children:N});case"url":return i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0",children:N});case"number":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:Number(N).toLocaleString()});default:return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N})}};return!t||t.length===0?i.jsx("div",{children:r("No fields to display","kivicare-clinic-management-system")}):i.jsx("div",{className:`custom-form-container ${n?"bg-body p-3 rounded":""}`,children:i.jsx(Yn,{className:"gy-3",children:t.map(T=>i.jsx(Et,{className:`${T.columnClass} custom-form-border-end `,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:`form-label ${n?"text-body":""}`,htmlFor:`${a}_${T.id}`,children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:PR(T.label)}}),T.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),S(T)]})},T.id))})})});Wa.displayName="CustomFormRenderer";const PJ=({label:t,value:e,onChange:n,placeholder:s="",type:a="text",isDisable:l=!1,error:o=null,showError:c=!0,className:d="",hasTooltip:m=!1,hasUrl:u="",name:p="",key:h="",required:g=!1,register:x=()=>{},...v})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[(t||g||m)&&i.jsx(i.Fragment,{children:i.jsxs("label",{className:"form-label",children:[t,g&&i.jsx("span",{className:"input-field-required text-danger",children:"*"}),m&&i.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5"})})]})}),i.jsx("input",{name:p,type:a,className:`form-control ${d}`,placeholder:s,value:e,onChange:y=>n(y.target.value),disabled:l,...x(p,{required:g}),...v},h)]}),o&&c&&i.jsx("div",{className:"text-danger",children:o?.message||r("This field is required","kivicare-clinic-management-system")})]}),Qt=f.memo(PJ),on=({label:t,checked:e,onChange:n,badge:s=null,className:a="",disabled:l=!1,error:o=null,inputClassName:c="",...d})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:`form-check form-switch custom-switch-xl p-0 d-flex align-items-md-center justify-content-between column-gap-3 row-gap-1 flex-md-row flex-column ${a}`,children:[t&&i.jsxs("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label m-0 h6 font-size-14",children:[i.jsx("span",{className:"mb-0 font-size-14",children:t}),s&&i.jsx("span",{className:`badge rounded-pill ${s.className}`,children:s.text})]}),i.jsx("input",{className:`form-check-input ${c}`,type:"checkbox",role:"switch",checked:e==="on"||e===!0,onChange:m=>{const u=m.target.checked;n(typeof e=="string"?u?"on":"off":!!u)},disabled:l,...d})]}),o&&i.jsx("div",{className:"text-danger",children:o.message})]}),uC=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],Qv=()=>{};function MJ(t){function e(a){const l={},o={},c=uC.map(d=>d.key);return Object.entries(a).forEach(d=>{let[m,u]=d;c.includes(m)&&ze.isValidElement(u)?(l[m]=u,o[m]=" "):o[m]=u}),[l,o]}function n(a,l){Object.entries(l).forEach(o=>{let[c,d]=o;const u=uC.find(h=>h.key===c).getter(t),p=vI.createRoot(u);p.render(d),a.__roots.push(p)})}function s(a){a.__roots.forEach(l=>{l.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(ze.isValidElement(a[0])||ze.isValidElement(a[1])){const l={};return["title","html","icon"].forEach((o,c)=>{a[c]!==void 0&&(l[o]=a[c])}),l}else return t.argsToParams(a)}_main(a,l){this.__roots=[],this.__params=Object.assign({},l,a);const[o,c]=e(this.__params),d=c.willOpen||Qv,m=c.didOpen||Qv,u=c.didDestroy||Qv;return super._main(Object.assign({},c,{willOpen:p=>{n(this,o),d(p)},didOpen:p=>{setTimeout(()=>{m(p)})},didDestroy:p=>{u(p),s(this)}}))}update(a){Object.assign(this.__params,a),s(this);const[l,o]=e(this.__params);super.update(o),n(this,l)}}}const Xe=MJ(At),Zv={patient:"/patient",doctor:"/doctor",receptionist:"/receptionist",appointments:"/appointments",encounter:"/encounter",clinic:"/clinic",service:"/service","doctor-session":"/doctor-session",tax:"/tax",billings:"/billings"},ei=({text:t=r("Back","kivicare-clinic-management-system"),className:e="",size:n="",variant:s="primary",iconClass:a="ph ph-caret-left",showIcon:l=!0,style:o={},...c})=>{const d=hn(),m=Kn(),u=m.pathname.replace(/\/$/,"");if(Object.values(Zv).includes(u)||u==="")return null;const p=()=>{if(window.history.state&&window.history.state.idx>0){d(-1);return}let x="/";const v=m.pathname.split("/").filter(Boolean);for(const y of v)if(Zv[y]){x=Zv[y];break}d(x,{replace:!0})},h=n?`btn-${n}`:"",g=["btn","d-flex align-items-center gap-1 back-btn",`btn-${s}`,h,"fw-semibold",e].filter(Boolean).join(" ");return i.jsxs("button",{type:"button",className:g,onClick:p,style:o,...c,children:[l&&i.jsx("i",{className:`${a}`}),i.jsx("span",{className:"font-size-14",children:t})]})},rr=ze.forwardRef(({title:t,children:e,helpUrl:n=null,footer:s=null,headerActions:a=null,className:l="",...o},c)=>i.jsx("div",{className:`card ${l}`,ref:c,...o,children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[t,n&&i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"ms-2 d-inline-flex align-items-center p-0 ",children:i.jsx("i",{className:"ph ph-question align-middle h6 text-primary"})})]}),a&&i.jsx("div",{children:a})]}),e,s&&i.jsx("div",{className:"mt-3",children:s})]})})),ef=f.forwardRef(({id:t="kc-image-upload-input",name:e="image",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:l,className:o="",disabled:c=!1,required:d=!1,label:m="",register:u,setValue:p,errors:h={},accept:g,allowFile:x=!1,...v},y)=>{const[b,k]=f.useState(n),[w,S]=f.useState(s),[j,T]=f.useState(!1),[N,_]=f.useState(!1),[A,P]=f.useState(null),E=f.useRef(null),M=f.useRef(null),R=h[e],O=!!b,L={};d&&(L.required=r("This field is required","kivicare-clinic-management-system"));const{ref:q,...Q}=u?u(e,L):{ref:null},V=!!R||!!A,se=R?.message||A;f.useEffect(()=>{T(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{k(n||""),S(s||"")},[n,s]),f.useEffect(()=>{s&&ue(n||"",s)},[s]);const G=async K=>{try{_(!0),P(null);const ne=window.kc_frontend?.rest_url,oe=await ve({endpoint:`${ne}/wp/v2/media`,method:"POST",data:K,isFile:!0});if(!oe||oe.success===!1)throw new Error(oe?.message||r("Failed to upload image","kivicare-clinic-management-system"));return k(oe.source_url),S(oe.id),ue(oe.source_url,oe.id),a&&a({id:oe.id,url:oe.source_url,filename:oe.title?.raw||"",type:oe.media_type,subtype:oe.mime_type,size:oe.media_details?.filesize||0},oe.id),oe}catch(ne){throw console.error("Error uploading image:",ne),P(ne.message||r("Failed to upload image","kivicare-clinic-management-system")),ne}finally{_(!1)}},ge=K=>{if(K.preventDefault(),!window.wp||!window.wp.media){M.current&&M.current.click();return}P(null);const ne=window.wp.media({title:r("Select or Upload Image","kivicare-clinic-management-system"),button:{text:r("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:x?"":"image"}});ne.on("select",function(){const oe=ne.state().get("selection").first().toJSON();if(!x&&oe.type!=="image"){P(r("Please select an image file","kivicare-clinic-management-system"));return}k(oe.url),S(oe.id),ue(oe.url,oe.id),a&&a({id:oe.id,url:oe.url,filename:oe.filename,type:oe.type,subtype:oe.subtype,size:oe.filesizeInBytes},oe.id)}),ne.open()},ie=async K=>{const ne=K.target.files[0];if(ne){if(P(null),!x&&!ne.type.startsWith("image/")){P(r("Please select an image file","kivicare-clinic-management-system"));return}try{if(!x||ne.type.startsWith("image/")){const oe=URL.createObjectURL(ne);k(oe)}else k(ne.name);S(""),ue(!x||ne.type.startsWith("image/")?URL.createObjectURL(ne):"",""),a&&a({url:!x||ne.type.startsWith("image/")?URL.createObjectURL(ne):"",filename:ne.name,type:ne.type,size:ne.size,file:ne},""),j||await G(ne)}catch(oe){console.error("Error handling file:",oe)}}},W=K=>{if(c){K.preventDefault();return}N||(j?ge(K):M.current&&M.current.click())},X=K=>{if(c){K.preventDefault();return}j?ge(K):M.current&&M.current.click()},J=()=>{k(""),S(""),P(null),ue("",""),M.current&&(M.current.value=""),l&&l()};f.useImperativeHandle(y,()=>({clearImage:J}));const ue=(K="",ne="")=>{if(E.current)try{if(E.current.value=ne,Q&&typeof Q.onChange=="function")try{Q.onChange({target:{value:ne},currentTarget:{value:ne}})}catch{}try{const oe=new Event("input",{bubbles:!0});E.current.dispatchEvent(oe);const D=new Event("change",{bubbles:!0});E.current.dispatchEvent(D)}catch{}}catch{}a&&a({id:ne,url:K,filename:"",type:"image",size:0},ne);try{typeof p=="function"&&(p(e,K),p(`${e}Id`,ne))}catch{}},le=K=>{K.preventDefault(),K.stopPropagation(),!(c||N)&&J()},I=K=>{E.current=K,q&&q(K)},ee=g||(x?void 0:"image/*");return i.jsxs("div",{className:`form-group mb-3 ${o}`,children:[m&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[m,d&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsxs("div",{className:`kc-image-upload ${O?"uploaded":""} ${N?"uploading":""} ${V?"is-invalid":""}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,...Q,value:w||"",ref:I,readOnly:!0,disabled:c}),i.jsx("input",{type:"file",id:t,className:"kc-image-upload-input d-none",onChange:ie,accept:ee,ref:M,disabled:N||c,"aria-invalid":V?"true":"false","aria-describedby":V?`${t}-error`:void 0}),i.jsx("div",{className:`kc-image-upload-label ${V?"border-danger":""}  ${c?"disabled":""}`,onClick:W,style:c?{pointerEvents:"none",opacity:.6}:{},children:O?i.jsxs("span",{className:"kc-image-uploaded-image-container",children:[i.jsx("span",{className:"kc-image-uploaded-image",children:typeof b=="string"&&/\.(jpe?g|png|gif|webp|bmp|svg)$/i.test(b)?i.jsx("img",{src:b,alt:r("uploaded","kivicare-clinic-management-system")}):i.jsx("span",{children:b})}),i.jsxs("div",{className:"upload-actions",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Edit image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"edit-upload-btn",onClick:X,disabled:N||c,children:N?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"remove-upload-btn",onClick:le,disabled:N||c,children:i.jsx("i",{className:"ph ph-x"})})})]})]}):i.jsxs("span",{className:"kc-image-upload-image-container",children:[i.jsx("span",{className:"kc-image-upload-image",children:N?i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):x?i.jsx("i",{className:"ph ph-upload-simple"}):i.jsx("i",{className:"ph ph-camera"})}),i.jsx("span",{className:"upload-text",children:N?r("Uploading...","kivicare-clinic-management-system"):j&&!x?r("Choose Image","kivicare-clinic-management-system"):r("Choose file","kivicare-clinic-management-system")})]})}),V&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:se})]})]})});ef.propTypes={id:Pe.string,name:Pe.string,defaultImage:Pe.string,defaultImageId:Pe.oneOfType([Pe.string,Pe.number]),onChange:Pe.func,onClear:Pe.func,setValue:Pe.func,className:Pe.string,disabled:Pe.bool,required:Pe.bool,label:Pe.string,register:Pe.func,errors:Pe.object,accept:Pe.string,allowFile:Pe.bool};const Xv=({label:t=r("Select Media","kivicare-clinic-management-system"),value:e,onChange:n,className:s="",preview:a=!0,disabled:l=!1})=>{const o=f.useRef(null),c=f.useRef(null),[d,m]=f.useState(!1),u=async g=>{try{m(!0);const x=window.kc_frontend?.rest_url,v=await ve({endpoint:`${x}/wp/v2/media`,method:"POST",data:g,isFile:!0});if(!v||v.success===!1)throw new Error(v?.message||r("Failed to upload media","kivicare-clinic-management-system"));return n&&n({id:v.id,url:v.source_url,filename:v.title?.raw||"",type:v.media_type,subtype:v.mime_type,size:v.media_details?.filesize||0,width:v.media_details?.width,height:v.media_details?.height}),v}catch(x){console.error("Error uploading media:",x),alert(x.message||r("Failed to upload media","kivicare-clinic-management-system"))}finally{m(!1),c.current&&(c.current.value="")}},p=g=>{if(!window.wp||!window.wp.media){c.current&&c.current.click();return}if(o.current){o.current.open();return}const x=window.wp.media({title:r("Select or Upload Media","kivicare-clinic-management-system"),button:{text:r("Use this media","kivicare-clinic-management-system")},multiple:!1});x.on("select",()=>{const v=x.state().get("selection").first().toJSON();g(v)}),o.current=x,x.open()},h=async g=>{const x=g.target.files[0];x&&await u(x)};return i.jsx(f.Fragment,{children:i.jsxs("div",{className:"row align-items-center",children:[i.jsxs("div",{className:`form-group ${s}`,children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:t})}),i.jsx("input",{className:"form-control",type:"file",style:{cursor:"pointer"},ref:c,onClick:g=>{window.wp&&window.wp.media&&(g.preventDefault(),p(n))},onChange:h,disabled:l||d})]}),a&&e&&(e.url||typeof e=="string")?i.jsx("div",{className:"mt-2 col-md-6",children:i.jsx("img",{src:typeof e=="string"?e:e.url,alt:"media_preview",className:"img-fluid",style:{maxHeight:100}})}):i.jsx("div",{className:"col-md-6 mt-2",children:i.jsx("p",{className:"double-lines-spinner"})})]})})},di=({text:t,title:e=r("Premium Feature","kivicare-clinic-management-system"),icon:n="ph-lock",className:s="",overlayStyle:a={},contentStyle:l={},link:o=""})=>{const c={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#0000009e",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9,borderRadius:8,...a},d={textAlign:"center",padding:"1.5rem",color:"white",...l};return i.jsx("a",{href:o,className:"text-decoration-none",children:i.jsx("div",{style:c,className:s,children:i.jsxs("div",{style:d,children:[i.jsx("div",{className:"mb-4 fs-1",children:i.jsx("i",{className:`ph ${n} text-white`})}),i.jsx("h4",{className:"text-white mb-3",children:e}),i.jsx("p",{className:"text-white",children:t})]})})})},IJ=({fields:t,data:e,title:n})=>{const s=t||[],a=e||{};if(Object.keys(a).length===0)return null;const l=(o,c)=>{if(c==null||c==="")return null;const d=o?.type;if(d==="multi_select"){let m=[];return c.forEach(u=>{m.push(u?.label)}),i.jsx("span",{className:"text-dark",children:m.join(", ")})}if(d==="file_upload"){let m=c;if(typeof c=="string")try{m=JSON.parse(c)}catch{return i.jsx("span",{className:"text-dark",children:c})}if(m&&typeof m=="object"&&m.url)return i.jsx("a",{href:m.url,download:!0,className:"text-primary text-decoration-underline",style:{cursor:"pointer"},children:m.name||r("Download File","kivicare-clinic-management-system")})}return Array.isArray(c)?i.jsx("span",{className:"text-dark",children:c.join(", ")}):typeof c=="object"&&c!==null?c.label?i.jsx("span",{className:"text-dark",children:c.label}):c.value?i.jsx("span",{className:"text-dark",children:c.value}):i.jsx("span",{className:"text-dark",children:JSON.stringify(c)}):i.jsx("span",{className:"text-dark",children:String(c)})};return i.jsxs("div",{className:"mt-4  border-top pt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:n||r("Other Information","kivicare-clinic-management-system")}),Object.entries(a).map(([o,c])=>{const d=s.find(p=>p.id==o),m=d?.name||`${r("Field","kivicare-clinic-management-system")} ${o}`,u=l(d,c);return u?i.jsxs("div",{className:"mb-2",children:[i.jsxs("strong",{children:[m,":"]})," ",u]},o):null})]})};function Zp({trigger:t,children:e,placement:n="bottom"}){const[s,a]=f.useState(!1),l=f.useRef(null),o=()=>{l.current&&clearTimeout(l.current),a(!0)},c=()=>{l.current=setTimeout(()=>{a(!1)},50)},d=m=>i.jsx(Mx,{id:"button-tooltip",...m,className:"contact-card-popover border-0 bg-transparent shadow-none",onMouseEnter:o,onMouseLeave:c,children:i.jsx(Mx.Body,{className:"p-0 border-0 bg-transparent",children:i.jsx("div",{className:"contact-card",style:{pointerEvents:"auto",minWidth:"500px"},children:e})})});return i.jsx(Ze,{placement:n,show:s,overlay:d,trigger:["hover","focus"],children:i.jsx("span",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:c,children:t})})}const Tm=({avatar:t,name:e,email:n,phone:s,address:a})=>i.jsxs("div",{className:"contact-card-wrapper",children:[i.jsxs("div",{className:"contact-card-header",children:[t?i.jsx("img",{src:t,className:"contact-card-avatar",alt:e||"Avatar"}):i.jsx("span",{className:"contact-card-avatar-fallback",children:i.jsx(Mc,{alt:e,size:28})}),i.jsx("div",{className:"contact-card-name",children:e})]}),(n||s)&&i.jsxs("div",{className:"contact-card-row",children:[n&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("a",{href:`mailto:${n}`,className:"contact-card-link",children:n})]}),s&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{children:s})]})]}),a&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{children:a})]})]});Tm.propTypes={avatar:Pe.string,name:Pe.string.isRequired,email:Pe.string,phone:Pe.string,address:Pe.string,fallbackIcon:Pe.string};const yk={getCustomFieldsByModule:(t={})=>ve({endpoint:"setting/custom-field/by-module",method:"GET",data:t}),saveCustomFieldData:t=>ve({endpoint:"setting/custom-field/save-data",method:"POST",data:t}),getCustomFieldData:(t={})=>ve({endpoint:"setting/custom-field/get-data",method:"GET",data:t})},Bc={all:["customFields"],byModule:(t,e)=>[...Bc.all,"byModule",t,e],data:(t,e)=>[...Bc.all,"data",t,e]},XR=(t,e=null)=>ft({queryKey:Bc.byModule(t,e),queryFn:()=>yk.getCustomFieldsByModule({module_type:t,...e&&{module_id:e}}),enabled:!!t}),bk=()=>{const t=Ve();return Le({mutationFn:({moduleType:e,moduleId:n,fieldsData:s})=>yk.saveCustomFieldData({module_type:e,module_id:n,fields_data:s}),onSuccess:(e,n)=>{t.invalidateQueries(Bc.data(n.moduleType,n.moduleId)),t.invalidateQueries(Bc.byModule(n.moduleType,n.moduleId))}})},Sy=(t,e,n={})=>ft({queryKey:Bc.data(t,e),queryFn:()=>yk.getCustomFieldData({module_type:t,module_id:e}),enabled:n.enabled!==void 0?n.enabled:!!t&&!!e,...n}),tf=({moduleType:t,moduleId:e=null,control:n,errors:s,setValue:a,watch:l,initialData:o=[]})=>{const[c,d]=f.useState(!1),[m,u]=f.useState(null),{module_config:p={}}=ut()||{};if(p?.custom_fields=="0")return null;const{data:h,isLoading:g,error:x}=XR(t,e),v=bk(),y=h?.data||[],b=f.useMemo(()=>Array.isArray(o)?o:o&&typeof o=="object"?Object.entries(o).map(([N,_])=>({id:Number(N),value:_})):[],[o]);f.useEffect(()=>{b.length>0&&b.forEach(({id:N,value:_})=>{a(`custom_field_${N}`,_,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})})},[b,a]);const k=N=>{const _=b.find(A=>A.id===N);return _?_.value:""},w=N=>N.isRequired==="1"||N.isRequired===!0||N.isRequired===1,S=N=>{if(!t||!e)return;d(!0),u(null);const _={};y.forEach(A=>{const P=`custom_field_${A.id}`,E=N[P];E!==void 0&&(_[A.id]=E)}),v.mutate({moduleType:t,moduleId:e,fieldsData:_},{onSuccess:()=>{u({type:"success",text:r("Custom fields saved successfully","kivicare-clinic-management-system")}),d(!1)},onError:()=>{u({type:"error",text:r("Failed to save custom fields","kivicare-clinic-management-system")}),d(!1)}})};if(!n)return g?i.jsx(zx,{}):y.length===0?null:i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),y.map(N=>i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"font-size-14 text-muted mb-1",children:[N.name,":"]}),i.jsx("input",{type:"text",className:"form-control",value:"",readOnly:!0,placeholder:N.placeholder||"No data"})]},N.id))]});const j=N=>{const _=`custom_field_${N.id}`,A=w(N);switch(N.type){case"text":return i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(Qt,{...P,type:"text",label:N.name,placeholder:N.placeholder,required:A,error:s?.[_]?.message})},N.id);case"number":return i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(Qt,{...P,type:"text",inputMode:"decimal",label:N.name,placeholder:N.placeholder,required:A,error:s?.[_]?.message,onInput:E=>{E.target.value=E.target.value.replace(/[^0-9.]/g,""),P.onChange(E)}})},N.id);case"textarea":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("textarea",{...P,className:"form-control",placeholder:N.placeholder,rows:"4"})}),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(ct,{...P,options:N.options.map(E=>({value:E.value||E.id||E,label:E.label||E.text||E})),placeholder:N.placeholder||r("Select an option","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"multi_select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(ct,{...P,isMulti:!0,options:N.options.map(E=>({value:E.value||E,label:E.label||E})),placeholder:N.placeholder||r("Select options","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"radio":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:N.options.map((E,M)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...P,type:"radio",className:"form-check-input",id:`${_}_${M}`,value:E.value||E,checked:P.value===(E.value||E)}),i.jsx("label",{className:"form-check-label",htmlFor:`${_}_${M}`,children:E.label||E})]},M))})}),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"checkbox":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:N.options.map((E,M)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",id:`${_}_${M}`,value:E.value||E,checked:(P.value||[]).includes(E.value||E),onChange:R=>{const O=P.value||[],L=E.value||E;R.target.checked?P.onChange([...O,L]):P.onChange(O.filter(q=>q!==L))}}),i.jsx("label",{className:"form-check-label",htmlFor:`${_}_${M}`,children:E.label||E})]},M))})}),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"calendar":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[N.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{className:`form-control ps-3 pe-5 ${s?.[_]?"is-invalid":""}`,placeholder:N.placeholder,options:{dateFormat:xi(window.kc_frontend.date_format),disableMobile:!0,locale:Wn()},value:P.value?Zn(P.value):"",onChange:E=>{const M=E[0]?$a(E[0]):"";P.onChange(M)}}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})},N.id),s&&s[_]&&i.jsx("span",{className:"text-danger p",children:s[_].message})]},N.id);case"file_upload":return i.jsx(Ne,{name:_,control:n,defaultValue:k(N.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>{const E=P.value,M=E&&(E.url||E.name),R=N.file_upload_type&&Array.isArray(N.file_upload_type)?N.file_upload_type.map(O=>O.id||O.value||O).join(","):"";return i.jsx(ou,{id:`custom-field-${N.id}`,name:_,label:N.name,accept:R,required:A,defaultFile:M?E.url:"",defaultFileId:M?E.id:"",onChange:(O,L)=>{P.onChange({id:L,url:O.url,name:O.filename||O.name})},errors:s})}},N.id);default:return null}};if(g)return i.jsx(zx,{});if(y.length===0)return null;const T=t==="patient_encounter_module";return i.jsx("div",{className:"card mt-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),i.jsx("div",{className:"row gy-4",children:y.map(N=>i.jsx("div",{className:"col-lg-6",children:j(N)},N.id))}),T&&i.jsxs("div",{className:"mt-4",children:[m&&i.jsx("div",{className:`alert alert-${m.type==="success"?"success":"danger"} mb-3`,children:m.text}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:c,onClick:()=>S(l()),children:c?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})]})]})})},wk=f.createContext();function hpe({children:t}){const[e,n]=f.useState([]),[s,a]=f.useState(!1),l=(d,m={})=>{const u=Date.now(),p={id:u,message:d,type:m.type||"success",position:m.position||"bottom-center",duration:m.duration||5e3,showIcon:m.showIcon!==!1,dismissible:m.dismissible!==!1};return n(h=>[p]),a(!0),p.duration>0&&setTimeout(()=>{a(!1),setTimeout(()=>n([]),300)},p.duration),u},o=()=>{a(!1),setTimeout(()=>n([]),300)},c={success:(d,m)=>l(d,{...m,type:"success"}),error:(d,m)=>l(d,{...m,type:"danger"}),warning:(d,m)=>l(d,{...m,type:"warning"}),info:(d,m)=>l(d,{...m,type:"info"}),dismiss:o};return i.jsx(wk.Provider,{value:{toast:c,toasts:e,visible:s,onDismiss:o},children:t})}function ppe(){const t=f.useContext(wk);if(!t)return console.warn("ToastContainer must be used within a ToastProvider"),null;const{toasts:e,visible:n,onDismiss:s}=t,a=e[0];return a?i.jsx("div",{className:`alert-container alert-widget-container ${n?"visible":""}`,children:i.jsx("div",{className:`alert alert-popup alert-${a.type} alert-left`,onClick:a.dismissible?s:void 0,children:i.jsxs("div",{className:"alert-content",children:[a.showIcon&&i.jsxs("span",{className:"alert-icon",children:[a.type==="success"&&"",a.type==="danger"&&"",a.type==="warning"&&"",a.type==="info"&&""]}),i.jsx("span",{className:"alert-message",children:a.message}),a.dismissible&&i.jsx("button",{className:"alert-close",onClick:l=>{l.stopPropagation(),s()},title:"Dismiss",children:""})]})})}):null}function OJ(){const t=f.useContext(wk);if(!t)throw new Error("useToast must be used within a ToastProvider");return t.toast}const FJ=({disabled:t=!1,isUploading:e=!1,wpMediaAvailable:n=!1,onFilesSelect:s,onClick:a})=>{const l=!n,o=t||e,c=d=>{if(!l||o)return;d.preventDefault(),d.currentTarget.classList.remove("drag-over");const m=Array.from(d.dataTransfer.files);m.length&&s(m)};return i.jsxs("div",{className:`kc-dropzone ${o?"disabled":""}`,onClick:o?void 0:a,onDragOver:d=>{!l||o||(d.preventDefault(),d.currentTarget.classList.add("drag-over"))},onDragLeave:d=>{!l||o||(d.preventDefault(),d.currentTarget.classList.remove("drag-over"))},onDrop:c,children:[i.jsx("style",{children:`.kc-dropzone {
                    position: relative;
                }

                /* Loader overlay */
                .kc-dropzone-loader {
                    position: absolute;
                    inset: 0;
                    background: rgba(255, 255, 255, 0.85);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 2;
                    border-radius: 8px;
                }

                /* Spinner */
                .kc-spinner {
                    width: 32px;
                    height: 32px;
                    border: 3px solid #e5e7eb;
                    border-top-color: #4f46e5;
                    border-radius: 50%;
                    animation: kc-spin 0.8s linear infinite;
                    margin-bottom: 10px;
                }

                @keyframes kc-spin {
                    to {
                        transform: rotate(360deg);
                    }
                }
                `}),e&&i.jsxs("div",{className:"kc-dropzone-loader",children:[i.jsx("span",{className:"kc-spinner"}),i.jsx("p",{className:"kc-uploading-text",children:r("Uploading...","kivicare-clinic-management-system")})]}),!e&&i.jsxs("div",{className:"kc-dropzone-content",children:[i.jsx("i",{className:"ph ph-upload-simple kc-upload-icon"}),i.jsxs("p",{className:"kc-dropzone-text",children:[i.jsx("strong",{children:r("Choose Image","kivicare-clinic-management-system")}),!n&&i.jsxs(i.Fragment,{children:[" ",r("or drag & drop","kivicare-clinic-management-system")]})]}),!n&&i.jsx("small",{className:"kc-dropzone-hint",children:r("Support: JPG, PNG, JPEG, PDF, Doc","kivicare-clinic-management-system")})]})]})},LJ=({id:t="kc-multi-file-upload",name:e="files",label:n=r("Upload Documents","kivicare-clinic-management-system"),defaultFiles:s=[],setValue:a,disabled:l=!1,required:o=!1,allowFile:c=!0,widgetId:d=null,isEdit:m=!1})=>{let u;try{u=OJ()}catch{u={error:console.error,success:console.log}}const[p,h]=f.useState([]);f.useEffect(()=>{m&&h(s)},[s]);const[g,x]=f.useState(!1),[v,y]=f.useState(!1),[b,k]=f.useState(!0),w=f.useRef(null);f.useEffect(()=>{y(typeof window<"u"&&window.wp&&window.wp.media),console.log(v,"wpMediaAvailable")},[]);const S=A=>{h(A),a?.(e,A,{shouldValidate:!0})},j=async A=>{const P=window.kc_frontend?.rest_url;let E=`${P}/wp/v2/media`,M="",R={};d&&(E=`${P}kivicare/v1/frontend/kc-book-appointment/upload-medical-report`,M=window.kc_frontend.nonce,R["Media-Nonce"]=M);try{const O=await ve({endpoint:E,method:"POST",data:A,isFile:!0,headers:R}),L=O.data||O;return{id:L.id,url:L.source_url||L.url,filename:A.name||L.filename||L.title?.raw,type:L.media_type||L.type,size:L.media_details?.filesize||L.size||A.size}}catch(O){return u.error(O?.response?.data?.message||O?.message||r("File upload failed","kivicare-clinic-management-system")),null}},T=async A=>{if(!A.length)return;x(!0);const P=[];for(let E of A){const M=await j(E);M&&P.push(M)}P.length&&(S([...p,...P]),u.success(r("Files uploaded successfully","kivicare-clinic-management-system")),v||k(!1)),x(!1),w.current&&(w.current.value="")},N=()=>{if(!v){k(!0);return}const A=window.wp.media({title:r("Select or Upload Files","kivicare-clinic-management-system"),button:{text:r("Use These Files","kivicare-clinic-management-system")},multiple:!0,library:{type:c?"":"image"}});A.on("select",()=>{const E=A.state().get("selection").toJSON().map(M=>({id:M.id,url:M.url,filename:M.filename,type:M.type,size:M.filesizeInBytes}));S([...p,...E])}),A.open()},_=A=>{S(p.filter((P,E)=>E!==A))};return i.jsxs("div",{className:"form-group",id:t,children:[i.jsx("style",{children:`
                .kc-dropzone {
                    border: 2px dashed #d0d5dd;
                    background: #f9fafb;
                    padding: 40px;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 8px;
                    transition: 0.2s ease;
                }

                .kc-dropzone.drag-over {
                    border-color: #4f46e5;
                    background: #eef2ff;
                }

                .kc-dropzone.disabled {
                    opacity: 0.6;
                    pointer-events: none;
                }

                .kc-upload-icon {
                    font-size: 28px;
                    margin-bottom: 10px;
                    display: block;
                }

                .kc-dropzone-text {
                    font-size: 15px;
                }

                .kc-dropzone-text strong {
                    color: #ef4444;
                }

                .kc-dropzone-hint {
                    font-size: 12px;
                    color: #667085;
                }

                .kc-uploading-text {
                    margin-top: 8px;
                    color: #4f46e5;
                    font-size: 13px;
                }

                .kc-uploaded-files {
                    margin-top: 16px;
                }

                .kc-uploaded-file {
                    background: #f9fafb;
                    border-radius: 6px;
                    padding: 12px 14px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                }

                .kc-file-name {
                    font-size: 14px;
                    color: #344054;
                }

                .kc-file-delete {
                    background: transparent;
                    border: none;
                    color: #ef4444;
                    cursor: pointer;
                    font-size: 16px;
                }
                `}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsxs("label",{className:"form-label mb-0",children:[n,o&&i.jsx("span",{className:"text-danger",children:"*"})]}),(v||!b)&&m===!1&&i.jsx("button",{type:"button",className:"iq-button iq-button-primary btn btn-sm btn-primary",onClick:N,disabled:l||g,children:r("Add Documents","kivicare-clinic-management-system")})]}),i.jsx("input",{id:"kc-hidden-file-input",type:"file",className:"d-none",multiple:!0,ref:w,disabled:l||g,onChange:A=>T(Array.from(A.target.files))}),!v&&b&&i.jsx(FJ,{disabled:l,isUploading:g,wpMediaAvailable:v,onFilesSelect:T,onClick:()=>{console.log("ASDFsdfdfsdf",w),w.current?.click(),!l&&w.current}}),p.length>0&&i.jsx("div",{className:"kc-uploaded-files mt-3",children:p.map((A,P)=>i.jsxs("div",{className:"kc-uploaded-file",children:[i.jsx("span",{className:"kc-file-name",children:A.filename}),i.jsxs("div",{className:"kc-file-actions",children:[i.jsx("a",{className:"me-2",href:A.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})}),i.jsx("button",{type:"button",className:"kc-file-delete",onClick:()=>_(P),children:i.jsx("i",{className:"ph ph-trash"})})]})]},P))})]})},Xp=({isEditing:t=!1,patientId:e=!1})=>{f.useEffect(()=>{const he=new URLSearchParams(window.location.search),Re=he.get("payment_status"),Ie=he.get("message");if(Re&&Ie){Te[Re==="cancelled"?"error":"info"](decodeURIComponent(Ie),{position:"top-right",autoClose:5e3});const He=window.location.pathname;window.history.replaceState({},"",He)}},[]);const{id:n}=Gt(),s=f.useRef(null),a=f.useRef(null),l=f.useRef({}),o=Ve(),{getPriceFormat:c,appointmentDescription:d,is_uploadfile_appointment:m,pre_book:u,post_book:p,only_same_day_book:h,isAddonActive:g,hasCapability:x,currentClinicId:v,currentDoctorId:y,defaultClinicId:b,currentUser:k,patientUniqueIdSetting:w}=ut(),S=Kn(),j=hn(),{prefetchClinics:T}=lV();f.useEffect(()=>{T()},[T]);const N=Li(),_=Yi(),A=Xn(),P=Jn(),E=g("kiviPro"),M=new Date;M.setHours(0,0,0,0);const R=S.state?.patientId,O=e||R,[L,q]=f.useState(!1),[Q,V]=f.useState(null),se=f.useRef([]),{data:G,isLoading:ge,error:ie}=XZ(n,{enabled:t&&!!n}),W=G?.data,X=eX(),J=tX(),[ue,le]=f.useState(!1),I=ue||X.isPending||J.isPending||ge,ee=f.useMemo(()=>{if(E){if((P||A)&&(v||b)){const he=v||b;return{value:he,label:he}}}else if(b)return{value:b,label:b};return null},[P,A,E,t,v,b]),{register:K,handleSubmit:ne,control:oe,watch:D,setValue:$,getValues:te,formState:{errors:ae}}=en({defaultValues:{clinic:ee,doctor:null,service:null,patient:null,appointmentDate:"",appointmentSlot:"",status:{value:"1",label:r("Booked","kivicare-clinic-management-system")},description:""}}),Y=D("clinic"),H=D("doctor"),B=D("service"),re=D("appointmentDate"),de=D("appointmentSlot"),xe=y,U=v,{data:me,isLoading:ye}=JZ({doctor_id:H?.value||xe,clinic_id:Y?.value||U||(E?null:0),service_id:B?.map(he=>he.id)||[],date:re,appointment_id:t?n:null});let pe=!1;B?.length&&(E?N?pe=!!(Y?.value||U):P||A?pe=!!(H?.value||xe):pe=!!((H?.value||xe)&&(Y?.value||U)):pe=!!(H?.value||xe));const{data:Ce,isLoading:Ge,isError:De,error:$e}=rX({doctorId:H?.value||xe,clinicId:Y?.value||U||(E?null:0),services:B?.map(he=>he.id)||[]},{enabled:pe}),{data:et,isLoading:tt}=wn("settings","appointment-setting"),qe=f.useMemo(()=>{if(!et?.data)return{minDate:null,maxDate:null};const{only_same_day_book:he,pre_book:Re,post_book:Ie}=et.data,He=[!0,"true",1,"1","on","yes"].includes(he),Be=En();if(He){const Je=Be.format("YYYY-MM-DD");return{minDate:Je,maxDate:Je}}return{minDate:Be.add(parseInt(Re)||0,"day").format("YYYY-MM-DD"),maxDate:Be.add(parseInt(Ie)||365,"day").format("YYYY-MM-DD")}},[et]),{data:we}=vJ({clinic_id:A||P?v:Y?.value||U||(E?null:0),doctor_id:H?.value||xe},{enabled:!!(H?.value||xe)&&(!!Y?.value||!!U||!E||A||P)}),Ee=f.useRef({}),Qe=f.useRef(null),nt=f.useCallback(async(he,Re)=>{const Ie=H?.value||xe,He=Y?.value||U||(E?null:0),Be=B?.map(bt=>bt.id)||service||[];if(!Ie||!Be.length)return;const Je=`${he}-${String(Re).padStart(2,"0")}`;try{const bt={doctor_id:Ie,clinic_id:He,service_id:Be,date:Je},Kt=await o.fetchQuery({queryKey:Cn.availableSlots(bt),queryFn:()=>Bi.getAvailableSlots(bt),staleTime:1e3*60*5});Kt?.data?.dates&&(Object.entries(Kt.data.dates).forEach(([$n,ti])=>{const vs=`${Ie}-${He}-${$n}`;Ee.current[vs]={total_count:ti.total_count,available_count:ti.available_count,date:ti.date,day_of_week:ti.day_of_week}}),Qe.current?.flatpickr&&Qe.current.flatpickr.redraw())}catch(bt){console.error("Error fetching month slots:",bt)}},[H,Y,B,xe,U,E,o]),Ht=we?.data??{},{data:Lt}=ad({module_type:"appointment_module",status:1,module_id:n},{enabled:g("kiviPro")&&!!(Y?.value||U)}),Yt=Ce?.data,xt=f.useMemo(()=>{const he=Lt?.data?.forms||[],Re=Y?.value||U;return Re?he.filter(Ie=>{const He=Ie.conditions?.clinics||[];return He.length===0||He.includes(parseInt(Re))}):[]},[Lt,Y,U]),Ae=()=>{xt.forEach(he=>{const Re=document.querySelector(`#custom-forms-tabs-tab-${he.id}`);Re&&(se.current.map(Ie=>parseInt(Ie)).includes(parseInt(he.id))?Re.classList.add("form-error-block"):Re.classList.remove("form-error-block"))})},Oe=async()=>{const he={};let Re=!0,Ie=null;for(const Be of xt){const Je=l.current[Be.id];if(Je){const bt=await Je.triggerValidation();he[Be.id]={isValid:bt.isValid,data:Je.getFormData(),errors:bt.errors},bt.isValid||(Re=!1,Ie||(Ie=Be.id))}}const He=Object.keys(he).filter(Be=>!he[Be].isValid);return se.current=He,Ae(),{allValid:Re,formResults:he,firstInvalidFormId:Ie}},z=()=>{const he={};return xt.forEach(Re=>{const Ie=l.current[Re.id];Ie&&(he[Re.id]=Ie.getFormData())}),he},Z=[{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check In","kivicare-clinic-management-system")},{value:"3",label:r("Check Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")},{value:"0",label:r("Cancelled","kivicare-clinic-management-system")}],fe=async({page:he,per_page:Re,search:Ie})=>{try{const He={dataType:"clinicList",page:he,per_page:Re,search:Ie};return await o.fetchQuery({queryKey:pt.list(He),queryFn:()=>Dt.getStaticData(He),staleTime:300*1e3})}catch(He){return console.error("Error loading clinics:",He),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},_e=async({page:he,per_page:Re,search:Ie,clinic_ids:He})=>{try{const Be={dataType:"staticData",staticDataType:"doctors",clinic_ids:He,page:he,per_page:Re,search:Ie};return await o.fetchQuery({queryKey:pt.list(Be),queryFn:()=>Dt.getStaticData(Be),staleTime:300*1e3})}catch(Be){return console.error("Error loading doctors:",Be),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Ke=async({page:he,per_page:Re,search:Ie,clinic_ids:He})=>{try{const Be={dataType:"staticData",staticDataType:"patients",clinic_ids:He,page:he,per_page:Re,search:Ie};return await o.fetchQuery({queryKey:pt.list(Be),queryFn:()=>Dt.getStaticData(Be),staleTime:300*1e3})}catch(Be){return console.error("Error loading patients:",Be),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},it=f.useCallback(async({page:he,per_page:Re,search:Ie,clinic_id:He,doctor_id:Be})=>{console.log(" loadServiceOptions called with:",{page:he,per_page:Re,search:Ie,clinic_id:He,doctor_id:Be});try{const Je={dataType:"staticData",staticDataType:"servicesWithPrice",clinic_id:He,doctor_id:Be,page:he,per_page:Re,search:Ie};console.log(" Query key:",pt.list(Je));const bt=await o.fetchQuery({queryKey:pt.list(Je),queryFn:()=>Dt.getStaticData(Je),staleTime:0});return console.log(" Services loaded:",bt),bt}catch(Je){return console.error(" Error loading services:",Je),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[o]),at=me?.data?.slots_by_session||[],ot=f.useMemo(()=>{if(!at||at.length===0)return!1;const he=En();let Re=!1,Ie=!1;for(const He of at)if(He&&He.length>0){Ie=!0;for(const Be of He)if(Be.datetime){if(En(Be.datetime).isAfter(he)||Be.available===!0){Re=!0;break}}else if(Be.available===!0){Re=!0;break}if(Re)break}return Ie&&!Re},[at]),Nt=f.useMemo(()=>at&&at.length>0&&at.some(he=>he&&he.length>0)&&!ot,[at,ot]);if(f.useEffect(()=>{if((H?.value||xe)&&B?.length){const he=new Date,Re=he.getFullYear(),Ie=he.getMonth()+1;Ee.current={},nt(Re,Ie)}},[H,B,xe,nt]),f.useEffect(()=>{if(t&&W&&!ge){if($("clinic",{value:W.clinicId,label:W.clinicName}),$("doctor",{value:W.doctorId,label:W.doctorName}),$("patient",{value:W.patientId,label:W.patientName}),W.service_list&&W.service_list.length>0){const he=W.service_list.map(Re=>({value:Re.id,label:Re.title,id:Re.id,price:Re.price}));$("service",he)}$("description",W.description||""),$("appointmentDate",W.appointmentStartDate),$("appointmentSlot",W.appointmentFormatedStartTime),_?$("status",{value:"1",label:r("Booked","kivicare-clinic-management-system")}):$("status",fk(Z,W.status))}},[t,W,ge]),f.useEffect(()=>{if(t)return;const he=O;if(!he)return;let Re=!1;return(async()=>{try{const He={dataType:"staticData",staticDataType:"patients",patient_id:he,page:1,per_page:1},Be=await o.fetchQuery({queryKey:pt.list(He),queryFn:()=>Dt.getStaticData(He),staleTime:300*1e3});if(Re)return;const Je=Be?.data||Be?.data?.data||[],bt=Array.isArray(Je)?Je[0]:null;if(bt){const Kt=bt.label||bt.display_name||`${bt.first_name||""} ${bt.last_name||""}`.trim()||bt.name||bt.fullName||String(bt.id);$("patient",{value:bt.id||he,label:Kt})}else $("patient",{value:he,label:String(he)})}catch{$("patient",{value:he,label:String(he)})}})(),()=>{Re=!0}},[O,t,o,$]),f.useEffect(()=>{t&&W?.custom_fields&&$&&Object.keys(W.custom_fields).forEach(he=>{$(`custom_field_${he}`,W.custom_fields[he])})},[t,W?.custom_fields,$]),t&&ie)return i.jsxs("div",{className:"alert alert-danger bg-danger-subtle",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:r("Error Loading Appointment Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:r("Unable to load appointment information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>j(-1),children:r("Back to Appointments","kivicare-clinic-management-system")})]});const dt=async he=>{if(le(!0),xt.length>0)if((await Oe()).allValid)se.current=[],Ae();else{Te.error(r("Please fix errors in the additional information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),le(!1);return}const Re={};Object.keys(he).forEach(He=>{if(He.startsWith("custom_field_")){const Be=He.replace("custom_field_","");Re[Be]=he[He]}});const Ie={tax_data:Yt.applied_taxes,clinicId:he.clinic?.value||((P||A)&&E?v||b:E?null:b),doctorId:he.doctor?.value,patientId:he.patient?.value,serviceId:he.service?.map(He=>He.id),appointmentStartDate:he.appointmentDate,appointmentStartTime:he.appointmentSlot,status:he.status?.value||he.status,description:he.description||"",customForm:z(),customFields:Re,appointmentFile:he?.appointmentFile};he.appointmentFiles&&he.appointmentFiles.length>0&&(Ie.appointmentFileId=he.appointmentFiles.map(He=>He.id));try{if(t){let He=await J.mutateAsync({id:n,...Ie});Te.success(He.message||r("Appointment updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j("/appointments")}else if(_)V({clinicName:he.clinic?.label,doctorName:he.doctor?.label,service:he.service,date:he.appointmentDate,time:he.appointmentSlot,grandTotal:Yt?.grand_total,customFormData:z(),customFieldData:Re}),q(!0);else{let He=await X.mutateAsync(Ie);console.log("Create response",He),Te.success(He.message||r("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j(e==!1?"/appointments":"/patient/profile/"+e+"/appointments/")}}catch(He){console.error("Error saving appointment:",He);const Be=He?.response?.data?.message||(t?r("Failed to update appointment","kivicare-clinic-management-system"):r("Failed to create appointment","kivicare-clinic-management-system"));Te.error(Be,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{le(!1)}},jt=async()=>{le(!0);const he=te();_&&k&&k.id&&(he.patient={value:k.id,label:k.display_name||k.user_email});const Re={};Object.keys(he).forEach(Be=>{if(Be.startsWith("custom_field_")){const Je=Be.replace("custom_field_","");Re[Je]=he[Be]}});const Ie=z(),He={clinicId:he.clinic?.value||((P||A)&&E?v||b:E?null:b),doctorId:he.doctor?.value,patientId:he.patient?.value,serviceId:he.service?.map(Be=>Be.id),appointmentStartDate:he.appointmentDate,appointmentStartTime:he.appointmentSlot,status:he.status?.value||he.status,description:he.description||"",paymentGateway:he.payment_gateway||null,customForm:Ie,customFields:Re,tax_data:Yt.applied_taxes};he.appointmentFiles&&he.appointmentFiles.length>0&&(He.appointmentFileId=he.appointmentFiles.map(Be=>Be.id)),X.mutateAsync(He).then(Be=>{o.invalidateQueries({queryKey:["appointments"]});const Je=Be?.data?.payment_response?.gateway,bt=Be?.data?.payment_response?.data,Kt=bt?.redirect_url||bt?.payment_url;switch(Je?.startsWith("knit_pay")?"knit_pay":Je){case"paypal":case"woocommerce":case"knit_pay":Kt?window.location.href=Kt:Te.error(r("Payment gateway did not provide a redirect URL.","kivicare-clinic-management-system"));break;case"stripe":s?.current?.updateAppointmentData(Be?.data),q(!1);break;case"razorpay":a?.current?.updateAppointmentData(Be?.data),q(!1);break;case"manual":default:Te.success(Be.message||r("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),q(!1),Kt||j("/appointments");break}}).catch(Be=>{console.error("Error confirming appointment:",Be),Te.error(Be?.response?.data?.message||r("Failed to create appointment","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}).finally(()=>{le(!1)})},Ut=async he=>{const Re=Object.keys(he)[0],{formResults:Ie,firstInvalidFormId:He}=await Oe();let Be=null;if(Re&&(Be=document.getElementById(Re),Be)){Be.scrollIntoView({behavior:"smooth",block:"center"}),Be.focus();return}if(He&&(Be=document.getElementById(`custom-form-${He}`),Be)){Be.scrollIntoView({behavior:"smooth",block:"center"});const Je=document.querySelector(`[data-rb-event-key="${He}"]`);Je&&Je.click()}},be={clinic:{required:E&&!P&&!A?r("Clinic is required","kivicare-clinic-management-system"):!1},doctor:{required:r("Doctor is required","kivicare-clinic-management-system")},service:{required:r("Service is required","kivicare-clinic-management-system")},patient:{required:r("Patient is required","kivicare-clinic-management-system")},appointmentDate:{required:r("Appointment date is required","kivicare-clinic-management-system"),validate:he=>{if(!he)return!0;const[Re,Ie,He]=he.split("-").map(Number);return new Date(Re,Ie-1,He)>=M||r("Appointment date cannot be in the past","kivicare-clinic-management-system")}},appointmentSlot:{required:r("Appointment slot is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")}};return t&&ge?i.jsx(by,{}):i.jsxs(i.Fragment,{children:[e==!1&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t?r("Edit Appointment","kivicare-clinic-management-system"):r("Add Appointment","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("form",{onSubmit:ne(dt,Ut),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[!P&&!A&&E&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:oe,rules:be.clinic,render:({field:he})=>i.jsx(dn,{id:"clinic",loadOptions:fe,value:he.value,onChange:Re=>{he.onChange(Re),$("doctor",null),$("service",null)},placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${ae.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t,dependencies:{}})}),ae.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.clinic.message})]})}),!N&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"doctor",control:oe,rules:be.doctor,render:({field:he})=>i.jsx(dn,{id:"doctor",loadOptions:_e,value:he.value,onChange:Re=>{he.onChange(Re),$("service",null),$("appointmentSlot",""),o.invalidateQueries({queryKey:["staticData","servicesWithPrice"]})},placeholder:D("clinic")?.value?r('eg "Mark Martin"',"kivicare-clinic-management-system"):r("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${ae.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||ge||!D("clinic")?.value,dependencies:{clinic_ids:D("clinic")?.value}},`doctor-${D("clinic")?.value}`)}),ae.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.doctor.message})]})}),i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[r("Select Service","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!(t||_)&&i.jsx(ht,{to:"/service/add",className:"label-action fw-semibold font-size-12",children:r("Add Service","kivicare-clinic-management-system")})]}),i.jsx(Ne,{name:"service",control:oe,rules:be.service,render:({field:he})=>{const Re=he.value?.some(Je=>Je?.allow_multiple),Ie=Je=>{if(!Je){he.onChange([]);return}const bt=Array.isArray(Je)?Je:[Je],Kt=bt.some($n=>!$n.allow_multiple);he.onChange(Kt?[bt.find($n=>!$n.allow_multiple)]:bt)},He=N?y:D("doctor")?.value,Be=D("clinic")?.value;return i.jsx(dn,{id:"service",loadOptions:it,value:he.value,onChange:Ie,placeholder:He?r('eg "Checkup"',"kivicare-clinic-management-system"):r("Select Doctor First","kivicare-clinic-management-system"),className:`react-select-box ${ae.service?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!He||t&&!ge,isMulti:Re,closeMenuOnSelect:!1,getOptionValue:Je=>Je.id,getOptionLabel:Je=>Je.label,customComponents:{IndicatorSeparator:()=>null,Option:({innerProps:Je,data:bt})=>i.jsxs("div",{className:`option select-service-option d-flex justify-content-between align-items-center gap-1 ${bt.allow_multiple?"allow-multiple":""}`,...Je,children:[i.jsxs("div",{className:"d-flex flex-column",children:[i.jsxs("div",{className:"d-flex align-items-center gap-06",children:[bt.is_telemed&&i.jsx("span",{className:"badge bg-success-subtle border border-success rounded-pill ",children:r("Telemed","kivicare-clinic-management-system")}),bt.allow_multiple&&i.jsx("span",{className:"badge bg-info-subtle border border-info rounded-pill ",children:r("Multiple","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"m-0 texts font-size-14 text-heading fw-medium form-label",children:[" ",bt.label," "]})]}),i.jsx("span",{className:"text-secondary font-size-14 fw-semibold",children:c(bt.price)})]})},dependencies:{clinic_id:Be,doctor_id:He}},`service-${Be}-${He}`)}}),ae.service&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.service.message})]})}),!_&&e===!1&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[r("Select Patient","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!t&&i.jsx(ht,{to:{pathname:"/patient/add",search:"from=appointment"},className:"label-action fw-semibold font-size-12",children:r("Add Patient","kivicare-clinic-management-system")})]}),i.jsx(Ne,{name:"patient",control:oe,rules:be.patient,render:({field:he})=>i.jsx(dn,{id:"patient",loadOptions:Ke,value:he.value,onChange:he.onChange,placeholder:D("clinic")?.value?w?.enable?r('eg "Alena James" or ID',"kivicare-clinic-management-system"):r('eg "Alena James"',"kivicare-clinic-management-system"):r("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${ae.patient?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||ge||!D("clinic")?.value,dependencies:{clinic_ids:D("clinic")?.value}},`patient-${D("clinic")?.value}`)}),ae.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.patient.message})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Appointment Date","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"appointmentDate",control:oe,rules:be.appointmentDate,render:({field:he})=>i.jsxs("div",{className:"kc-flatpickr-calendar",children:[i.jsx(Un,{id:"appointmentDate",className:`d-none ${ae.appointmentDate?"is-invalid":""}`,value:he.value?Zn(he.value):"",onChange:Re=>{const Ie=$a(Re[0]);he.onChange(Ie),$("appointmentSlot","")},placeholder:r('eg "05/02/2025"',"kivicare-clinic-management-system"),disabled:t&&ge||tt,options:{dateFormat:"Y-m-d",altFormat:xi(window.kc_frontend.date_format),minDate:qe.minDate,maxDate:qe.maxDate,disableMobile:!0,inline:!0,disable:[function(Re){if(!Ht)return!1;const{off_days:Ie=[],holidays:He=[]}=Ht;if(Ie.includes(String(Re.getDay())))return!0;const Be=$a(Re);return(Array.isArray(He)?He:Object.values(He)).includes(Be)}],locale:Wn(),onMonthChange:(Re,Ie,He)=>{const Be=He.currentMonth+1,Je=He.currentYear;nt(Je,Be)},onDayCreate:(Re,Ie,He,Be)=>{const Je=Be.dateObj;if(!Je)return;const bt=new Date;if(bt.setHours(0,0,0,0),Je<bt){Be.classList.add("past-date");return}Be.innerHTML=Be.innerHTML.replace(/\d+/g,ys=>kZ(ys));const Kt=$a(Je),{off_days:$n=[],holidays:ti=[]}=Ht||{},vs=Array.isArray(ti)?ti:Object.values(ti),rn=$n.includes(String(Je.getDay())),xs=vs.includes(Kt),ri=document.createElement("div");ri.className="day-tooltip",ri.innerHTML=`
                                                      <span class="tooltip-date">
                                                        ${En(Je).format("dddd, MMMM D, YYYY")}
                                                      </span>
                                                    `;const Zt=document.createElement("span");Zt.className="tooltip-info";const sa=document.createElement("span");if(sa.className="day-icon",xs||rn){Be.classList.add(xs?"clinic-holiday":"doctor-leave"),Be.classList.remove("flatpickr-disabled"),Zt.textContent=xs?r("Clinic/Doctor Holiday","kivicare-clinic-management-system"):r("Doctor Off Day","kivicare-clinic-management-system"),Be.append(sa),ri.append(Zt),Be.append(ri);return}const ja=H?.value||xe,Na=Y?.value||U||(E?null:0);if(!ja||!B?.length){Zt.textContent=r("Select doctor & service first","kivicare-clinic-management-system"),ri.append(Zt),Be.append(ri);return}const Hr=`${ja}-${Na}-${Kt}`,es=Ee.current?.[Hr];if(!es){Zt.textContent=r("Available","kivicare-clinic-management-system"),ri.append(Zt),Be.append(ri);return}const gi=document.createElement("span");if(gi.className="slot-indicator",es.available_count>0){Be.classList.add("available"),gi.textContent=`${es.available_count} ${r("Slots","kivicare-clinic-management-system")}`,Zt.textContent=`${es.available_count} ${r("slots available","kivicare-clinic-management-system")}`;const ys=document.createElement("span");ys.className="tooltip-action",ys.textContent=r("Click to select","kivicare-clinic-management-system"),ri.append(Zt,ys),Be.append(gi)}else es.total_count>0?(Be.classList.add("slots-full"),gi.textContent=r("Full","kivicare-clinic-management-system"),Zt.textContent=r("All slots are booked","kivicare-clinic-management-system"),Be.append(gi),ri.append(Zt)):(Zt.textContent=r("Available","kivicare-clinic-management-system"),ri.append(Zt));Be.append(ri)}},ref:Re=>{Qe.current=Re,he.ref(Re)}},`flatpickr-${H?.value||"no-doctor"}-${B?.length||0}`),i.jsxs("div",{className:"calendar-legend",children:[i.jsx("div",{className:"calendar-legend-title",children:r("Calendar Legend","kivicare-clinic-management-system")}),i.jsxs("div",{className:"calendar-legend-items",children:[i.jsxs("div",{className:"calendar-legend-item available",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:r("Available","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item slots-full",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:r("Slots Full","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item clinic-holiday",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-hospital"})}),i.jsx("span",{className:"legend-label",children:r("Clinic/Doctor Holiday","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item doctor-leave",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-stethoscope"})}),i.jsx("span",{className:"legend-label",children:r("Doctor Off Day","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item past-date",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-x"})}),i.jsx("span",{className:"legend-label",children:r("Past Date","kivicare-clinic-management-system")})]})]})]})]})}),ae.appointmentDate&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.appointmentDate.message})]})}),i.jsxs("div",{className:"col-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Available Slot","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"appointmentSlot",control:oe,rules:be.appointmentSlot,render:({field:he})=>i.jsx(i.Fragment,{children:ye?i.jsx(P2,{count:18}):Nt?i.jsx("div",{className:`p-3 bg-body rounded slot-scrolling ${ae.appointmentSlot?" form-control is-invalid":""} `,children:at.map((Re,Ie)=>i.jsx(ze.Fragment,{children:Re.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"session-divider","aria-hidden":"true",children:i.jsx("span",{children:r(`Session ${Ie+1}`,"kivicare-clinic-management-system")})}),i.jsx("div",{className:"appointments-slot-select",children:Re.map((He,Be)=>i.jsxs("div",{className:"form-check slot-select",children:[i.jsx("input",{type:"radio",name:he.name,className:`form-check-input ${ae.appointmentSlot?"is-invalid":""}`,id:`slot-${Ie}-${Be}`,value:He.time,checked:de===He.time,onChange:Je=>{he.onChange(Je.target.value)},ref:he.ref,disabled:t&&ge}),i.jsx("label",{className:"form-check-label",htmlFor:`slot-${Ie}-${Be}`,children:He.time})]},`slot-${Ie}-${Be}`))})]})},`session-${Ie}`))}):me?.status===!1?i.jsx("div",{className:"p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:me?.data?.error})}):i.jsx("div",{className:"slot-none p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:r("No available slots for the selected date and doctor.","kivicare-clinic-management-system")})})})}),ae.appointmentSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.appointmentSlot.message})]}),!_&&i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:oe,rules:be.status,render:({field:he})=>i.jsx(ct,{id:"status",options:Z,value:he.value,onChange:he.onChange,placeholder:r('eg "Booked"',"kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Re=>({...Re,zIndex:9999})},isDisabled:t&&ge||!x("patient_appointment_status_change")})}),ae.status&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.status.message})]})]})]})}),m&&(!t||W?.appointmentReport&&W.appointmentReport.length>0)&&i.jsx("div",{className:"col-6",children:i.jsx(LJ,{name:"appointmentFiles",label:r("Upload Documents","kivicare-clinic-management-system"),setValue:$,defaultFiles:W?.appointmentReport||[],allowFile:!0,isEdit:t})}),d&&i.jsx("div",{className:"col -12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:`form-control ${ae.description?"is-invalid":""}`,placeholder:r("Enter appointment description (optional)","kivicare-clinic-management-system"),rows:"3",...K("description"),disabled:t&&ge}),ae.description&&i.jsx("div",{className:"invalid-feedback d-block",children:ae.description.message})]})})]})})}),g("kiviPro")&&H&&i.jsx(tf,{moduleType:"appointment_module",moduleId:H?.value,control:oe,errors:ae,setValue:$,watch:D},`custom-fields-${H?.value||"no-doctor"}`),g("kiviPro")&&xt.length>0&&i.jsx("div",{className:"mt-4 card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),xt.length===1?i.jsx("div",{id:`custom-form-${xt[0].id}`,children:i.jsx(Wa,{ref:he=>l.current[xt[0].id]=he,fields:xt[0].fields,data:xt[0].form_data,readOnly:!1,formId:`form_${xt[0].id}`})}):i.jsx($b,{defaultActiveKey:xt[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:xt.map(he=>i.jsx(Cg,{eventKey:he.id,title:he.name?.text||he.name,children:i.jsx("div",{id:`custom-form-${he.id}`,children:i.jsx(Wa,{ref:Re=>l.current[he.id]=Re,fields:he.fields,data:he.form_data||{},readOnly:!1,formId:`form_${he.id}`})})},he.id))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(ei,{fallbackPath:"/appointments",text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:I}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:I||t&&ge,children:I?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Appointment","kivicare-clinic-management-system"):r("Save Appointment","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(QR,{Formwatch:D,summaryData:Yt,summaryLoading:Ge,summaryError:De,className:"position-sticky top-0"})})]})}),_&&i.jsx(gJ,{showConfirmationModel:L,handleCloseConfirmationModel:()=>q(!1),handleConfirmAppointment:jt,confirmationData:Q,isSubmitting:ue,setValue:$}),!t&&i.jsx(jJ,{ref:s,appointmentData:!1}),!t&&i.jsx(SJ,{ref:a,appointmentData:!1})]})},JR=()=>{const{id:t}=Gt(),{getPriceFormat:e,isAddonActive:n}=ut(),[s,a]=f.useState(!0),{data:l,isLoading:o,error:c}=aX(t),{data:d}=ad({module_type:"appointment_module",status:1,module_id:t},{enabled:n("kiviPro")}),m=FR(),u=l?.data||{},p=d?.data?.forms||[],h=[{value:0,text:r("Cancelled","kivicare-clinic-management-system"),color:"text-danger"},{value:1,text:r("Booked","kivicare-clinic-management-system"),color:"text-info"},{value:2,text:r("Pending","kivicare-clinic-management-system"),color:"text-warning"},{value:3,text:r("Check Out","kivicare-clinic-management-system"),color:"text-danger"},{value:4,text:r("Check In","kivicare-clinic-management-system"),color:"text-success"}],x=(j=>{if(j==null)return{text:r("Unknown","kivicare-clinic-management-system"),color:"text-secondary"};const T=Number(j);return h.find(N=>N.value===T)||{text:r("Unknown","kivicare-clinic-management-system"),color:"text-secondary"}})(u.status),v=[{value:0,text:r("Closed","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"},{value:1,text:r("Active","kivicare-clinic-management-system"),badgeClass:"text-bg-success"}],b=(j=>{if(j==null)return{text:r("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"};const T=Number(j);return v.find(N=>N.value===T)||{text:r("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"}})(u.encounterStatus),k=j=>{m.mutate(j,{onSuccess:T=>{const N=new Blob([T],{type:"application/pdf"}),_=URL.createObjectURL(N);window.open(_,"_blank")},onError:T=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:T?.response?.data?.message||T?.message||r("Failed to generate invoice PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},w=f.useMemo(()=>!u||!u.serviceName?null:{services:u.service_list,applied_taxes:u?.taxItems?.tax_data,subtotal:u.subtotal||0,tax:u?.taxItems?.total_tax||0,grand_total:(u.subtotal||0)+(u?.taxItems?.total_tax||0)},[u]),S=j=>j==="service"?u.serviceName?[{name:u.serviceName}]:[]:null;return o?i.jsx(OR,{}):c?i.jsx("div",{className:"alert alert-danger",children:r("Failed to load appointment details.","kivicare-clinic-management-system")}):i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:location.pathname!=="/appointments"&&i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Appointment Detail","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsx("button",{type:"button",onClick:()=>k(u.id),className:"btn btn-primary",children:r("Download Invoice","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Appointment ID","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"m-0 font-size-14 text-primary",children:["#",u.id]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Payment Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"m-0 font-size-14 text-primary",children:u.paymentStatus})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Date & Time","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.appointmentDateTime})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Service Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.serviceName})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Booking Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:`font-size-14 mt-2 mb-0 ${x.color}`,children:x.text})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Payment Mode","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.paymentMode})]})]})}),u.description&&i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsxs("span",{className:"font-size-14",children:[r("Description","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 ms-1 mb-0",children:u.description})]})}),i.jsx("div",{children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Patient Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(cn,{profileUrl:u.patient_image_url,name:u.patientName,phone:u.patientMobileNo,variant:"primary",size:"md",nameLabel:r("Patient Name","kivicare-clinic-management-system")})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Clinic Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(cn,{profileUrl:u.clinic_image_url,name:u.clinicName,phone:u.clinicMobileNo,variant:"primary",size:"md",nameLabel:r("Clinic Name","kivicare-clinic-management-system"),rounded:!1})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Doctor Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(cn,{profileUrl:u.doctor_image_url,name:u.doctorName,phone:u.doctorMobileNo,variant:"primary",size:"md",nameLabel:r("Doctor Name","kivicare-clinic-management-system")})})})]})]})}),u.encounterId&&i.jsxs("div",{className:"spcing-top",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-2",children:[i.jsx("h6",{className:"mb-0 font-size-14",children:r("Encounter Detail","kivicare-clinic-management-system")}),i.jsx(ht,{to:`/encounter/dashboard/${u.encounterId}`,className:"font-size-14 fw-bold",children:r("View Details","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"p-3 bg-body rounded",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Description","kivicare-clinic-management-system"),":"]}),i.jsx("p",{className:"h6 mb-0",children:u.encounterDescription||r("No records found","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"d-flex align-items-center justify-content-lg-end",children:i.jsx("span",{className:`badge ${b.badgeClass} text-uppercase rounded-pill`,children:b.text})})})]})})]}),n("kiviPro")&&p.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Forms","kivicare-clinic-management-system")}),p.length===1?i.jsx("div",{children:i.jsx(Wa,{fields:p[0].fields,data:p[0].form_data,readOnly:!0})}):i.jsx($b,{defaultActiveKey:p[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:p.map(j=>i.jsx(Cg,{eventKey:j.id,title:j.name?.text||j.name,children:i.jsx("div",{children:i.jsx(Wa,{fields:j.fields,data:j.form_data,readOnly:!0})})},j.id))})]})]})}),u?.appointmentReport?.length>0&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:r("Documents","kivicare-clinic-management-system")}),i.jsx(kn,{columns:[{header:r("File Name","kivicare-clinic-management-system"),accessorKey:"filename",enableSorting:!1,cell:j=>j.getValue()},{header:r("Actions","kivicare-clinic-management-system"),enableSorting:!1,maxWidth:100,accessorKey:"actions",cell:j=>i.jsx("a",{href:j.row.original.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})}],data:u.appointmentReport,enableSelection:!1})]})})]}),i.jsxs("div",{className:"col-xl-4",children:[i.jsx("h5",{className:"mb-3",children:r("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"mb-3",children:i.jsx(QR,{Formwatch:S,summaryData:w,summaryLoading:o,summaryError:c})})]})]})},$J=[Gn({path:"/appointments",title:"Appointments",outlet:QZ,permissions:["appointment_list"],meta:{description:"Appointment management system",icon:"calendar",showInSidebar:!0},children:[We({path:"",component:Cy,title:"All Appointments",index:!0,permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all appointments",breadcrumb:"All Appointments"}}),We({path:"patient/:patientIdParam",component:Cy,title:"Appointments by Patient",permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"Appointments filtered by patient",breadcrumb:"Appointments"}}),We({path:"add",component:Xp,title:"Add Appointment",props:{isEditing:!1},permissions:["appointment_add"],skeleton:by,meta:{description:"Create a new appointment",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Xp,title:"Edit Appointment",props:{isEditing:!0},permissions:["appointment_edit"],skeleton:by,meta:{description:"Edit existing appointment",breadcrumb:"Edit"}}),We({path:"view/:id",component:JR,title:"View Appointment",props:{readOnly:!0},permissions:["appointment_view"],skeleton:OR,meta:{description:"View appointment details",breadcrumb:"View"}})]})],hC=()=>{const t=Kn(),e=["/encounter","/encounter-template"],n=t.pathname.replace(/\/$/,""),s=!e.includes(n);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{updateOnRouteChange:!0}),s&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},kk={getMedicalHistories:(t={})=>ve({endpoint:"medical-history",method:"GET",data:t}),getMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"GET"}),createMedicalHistory:t=>ve({endpoint:"medical-history",method:"POST",data:t}),updateMedicalHistory:(t,e)=>ve({endpoint:`medical-history/${t}`,method:"PUT",data:e}),deleteMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"DELETE"})},Wl={all:["medicalHistory"],lists:()=>[...Wl.all],list:t=>[...Wl.lists(),{filters:t}],details:()=>[...Wl.all,"detail"],detail:t=>[...Wl.details(),t]},Wh=(t={},e={})=>ft({queryKey:Wl.list(t),queryFn:()=>kk.getMedicalHistories(t),...e}),_y=()=>Le({mutationFn:kk.createMedicalHistory}),eP=()=>(Ve(),Le({mutationFn:t=>kk.deleteMedicalHistory(t)})),jk={getEncounterTemplateMedicalHistory:(t,e={})=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"GET",data:e}),createEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"POST",data:e}),deleteEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history/${e}`,method:"DELETE"})},vr={all:["encounterTemplateMedicalHistory"],lists:()=>[...vr.all,"list"],list:(t,e)=>[...vr.lists(),t,{filters:e}],details:()=>[...vr.all,"detail"],detail:(t,e)=>[...vr.details(),t,e]},Kh=(t,e={},n={})=>ft({queryKey:vr.list(t,e),queryFn:()=>jk.getEncounterTemplateMedicalHistory(t,e),enabled:!!t,...n}),Ey=()=>{const t=Ve();return Le({mutationFn:({templateId:e,...n})=>jk.createEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(vr.list(n.templateId))}})},tP=()=>{const t=Ve();return Le({mutationFn:({templateId:e,itemId:n})=>jk.deleteEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(vr.list(n.templateId))}})},Dr={createEncounter:t=>ve({endpoint:"encounters",method:"POST",data:t}),updateEncounter:(t,e)=>ve({endpoint:`encounters/${t}`,method:"PUT",data:e}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),getEncounters:t=>ve({endpoint:"encounters",method:"GET",data:t}),deleteEncounter:t=>ve({endpoint:`encounters/${t}`,method:"DELETE"}),bulkUpdateEncounterStatus:(t,e)=>ve({endpoint:"encounters/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeletEencounters:t=>ve({endpoint:"encounters/bulk/delete",method:"POST",data:{ids:t}}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),printEncounter:t=>ve({endpoint:`encounters/${t}/print`,method:"GET",responseType:"blob"}),exportEncounters:(t={})=>ve({endpoint:"encounters/export",method:"GET",data:t})},uo={createTemplate:t=>ve({endpoint:"encounter-templates",method:"POST",data:t}),updateTemplate:(t,e)=>ve({endpoint:`encounter-templates/${t}`,method:"PUT",data:e}),getTemplateById:t=>ve({endpoint:`encounter-templates/${t}`,method:"GET"}),getTemplates:t=>ve({endpoint:"encounter-templates",method:"GET",data:t}),deleteTemplate:t=>ve({endpoint:`encounter-templates/${t}`,method:"DELETE"}),bulkDeleteTemplates:t=>ve({endpoint:"encounter-templates/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateStatus:(t,e)=>ve({endpoint:"encounter-templates/bulk/status",method:"PUT",data:{ids:t,status:e}}),applyTemplateToEncounter:(t,e)=>ve({endpoint:`encounter-templates/${t}/apply-to-encounter/${e}`,method:"POST"})},BJ=()=>{const t=Ve();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Dr.updateEncounter(e,n):Dr.createEncounter(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},qJ=(t={})=>ft({queryKey:["encounters",t],queryFn:()=>Dr.getEncounters(t)}),HJ=()=>{const t=Ve();return Le({mutationFn:e=>Dr.bulkDeletEencounters(e),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},nP=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>Dr.bulkUpdateEncounterStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},Nk=(t,e={})=>ft({queryKey:["encounter",t],queryFn:()=>Dr.getEncounterById(t),enabled:!!t,...e}),zJ=()=>{const t=Ve();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?uo.updateTemplate(e,n):uo.createTemplate(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounter-templates"]})}})},iP=(t={})=>ft({queryKey:["encounter-templates",t],queryFn:()=>uo.getTemplates(t)}),VJ=()=>{const t=Ve();return Le({mutationFn:e=>uo.deleteTemplate(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},UJ=()=>{const t=Ve();return Le({mutationFn:e=>uo.bulkDeleteTemplates(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},WJ=()=>{const t=Ve();return Le({mutationFn:({templateId:e,encounterId:n})=>uo.applyTemplateToEncounter(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["medicalHistory"]}),t.invalidateQueries({queryKey:["prescriptions"]})}})},KJ=()=>Le({mutationFn:t=>Dr.printEncounter(t)}),GJ=()=>Le({mutationFn:t=>Dr.exportEncounters(t)}),Ck=f.createContext(),nf=()=>{const t=f.useContext(Ck);if(!t)throw new Error("useEncounterContext must be used within an EncounterProvider");return t},YJ=({children:t})=>{const{id:e}=Gt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:l}=ut(),o=s||"patient",{data:c,isLoading:d,error:m}=Nk(e),u=c?.data||{},{data:p,isLoading:h,error:g}=MA(e),{data:x}=ad({module_type:"patient_encounter_module",status:1,module_id:e},{enabled:l("kiviPro"),staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),v=f.useMemo(()=>x?.data?.forms||[],[x?.data?.forms]),{data:y}=XR("appointment_module",u?.doctorId),{data:b}=Sy("appointment_module",u?.appointmentId,{enabled:!!u?.appointmentId,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),{data:k}=Sy("patient_encounter_module",e,{enabled:!!e,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),w=f.useMemo(()=>y?.data||[],[y?.data]),S=f.useMemo(()=>b?.data||{},[b?.data]),j=f.useMemo(()=>k?.data||[],[k?.data]),[T,N]=f.useState(!1),[_,A]=f.useState(null),[P,E]=f.useState(!1),[M,R]=f.useState(!1),[O,L]=f.useState({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{},doctor:{},patient:{},patientEncounter:{},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),q=Cr(o)||Jn(o)||Xn(o)||Li(o),{data:Q}=_n(),V=Q?.data?.allowEncounterEdit;f.useEffect(()=>{N((Number(u?.status)===1||V==="on")&&(Cr(o)||Jn(o)||Xn(o)||Li(o)&&u?.doctorId===a))},[u,o,a,V]),f.useEffect(()=>{p?.data&&L(p.data)},[p]);const se=f.useCallback(()=>{A(p?.data?.id||null),L(p?.data||O),E(!0)},[p,O]),G=f.useCallback(()=>{E(!1),R(!1)},[]),ge=f.useMemo(()=>({isOpen:Number(u?.status)===1,isClosed:Number(u?.status)===0,isPending:Number(u?.status)===2,canClose:Number(u?.status)===1}),[u?.status]),ie=f.useMemo(()=>({name:u.patientName||"Unknown Patient",email:u.patientEmail||"No email provided",phone:u.patientPhone,age:u.patientAge,gender:u.patientGender,address:u?.patient_data?.address||u?.patientAddress,profileImage:u.patient_image_url}),[u.patientName,u.patientEmail,u.patientPhone,u.patientAge,u.patientGender,u?.patient_data?.address,u?.patientAddress,u.patient_image_url]),W=f.useMemo(()=>({name:u.clinicName||"Unknown Clinic",address:u.clinicAddress,doctorName:u.doctorName||"Unknown Doctor",profileImage:u.clinic_image_url,description:u.description}),[u.clinicName,u.clinicAddress,u.doctorName,u.clinic_image_url,u.description]),X=f.useMemo(()=>({encounterId:e,encounterData:u,isEncounterLoading:d,encounterError:m,billData:p?.data,isBillLoading:h,billError:g,customForms:v,customFields:w,customFieldData:S,encounterCustomFieldData:j,canEditEncounter:q,canUpdateEncounter:T,userRole:o,showEditBillModal:P,showAddServiceItemForm:M,editFormData:O,setEditFormData:L,setShowAddServiceItemForm:R,handleOpenEditBillModal:se,handleCloseEditBillModal:G,encounterStatus:ge,patientInfo:ie,clinicInfo:W,hasCapability:n,currentDoctorId:a,isAddonActive:l}),[e,u,d,m,p?.data,h,g,v,q,T,o,P,M,O,L,R,se,G,ge,ie,W,n,a,l,w,S,j]);return i.jsx(Ck.Provider,{value:X,children:t})},QJ=(t,{isProblemEnabled:e,isObservationEnabled:n,isNoteEnabled:s})=>{const{hasCapability:a}=ut(),{encounterData:l,isEncounterLoading:o,patientInfo:c,isEncounterTemplate:d}=nf(),{data:m}=_n(),u=m?.data?.allowEncounterEdit,[p,h]=f.useState([]),[g,x]=f.useState(null),[v,y]=f.useState(!0),[b,k]=f.useState(!0),[w,S]=f.useState(!0),[j,T]=f.useState([]),[N,_]=f.useState([]),[A,P]=f.useState(!1),E=!o&&t,{data:M}=Va(e&&v&&E?"clinical_problems":null),{data:R}=Va(n&&b&&E?"clinical_observations":null),O={enabled:E&&g!==null},L=(K,ne,oe)=>K?ne():oe(),{data:q}=L(d,()=>Kh(t,{type:"problem"},{enabled:!!v&&!!E}),()=>Wh({patient_id:g,encounter_id:t,type:"problem"},{enabled:!!v&&!!O.enabled&&e})),{data:Q}=L(d,()=>Kh(t,{type:"observation"},{enabled:!!b&&!!E}),()=>Wh({patient_id:g,encounter_id:t,type:"observation"},{enabled:b&&O.enabled&&n})),{data:V}=L(d,()=>Kh(t,{type:"note"},{enabled:!!w&&!!E}),()=>Wh({patient_id:g,encounter_id:t,type:"note"},{enabled:!!w&&!!O.enabled&&s})),se=d?Ey():_y(),G=d?tP():eP(),ge=f.useMemo(()=>M?.data?M.data.map(K=>({value:K.value||K.id,label:K.label})):[],[M]),ie=f.useMemo(()=>R?.data?R.data.map(K=>({value:K.value||K.id,label:K.label})):[],[R]);f.useEffect(()=>{const ne=(d?q?.data?.items||[]:q?.data?.histories||[]).map(oe=>({...oe,title:oe.clinical_detail_val||oe.title}));T(ne)},[q,d]),f.useEffect(()=>{const ne=(d?Q?.data?.items||[]:Q?.data?.histories||[]).map(oe=>({...oe,title:oe.clinical_detail_val||oe.title}));_(ne)},[Q,d]),f.useEffect(()=>{const K=d?V?.data?.items||[]:V?.data?.histories||[];h(K.map(ne=>({id:ne.id,title:ne.clinical_detail_val||ne.title})))},[V,d]),f.useEffect(()=>{P(d?a("encounters_template_edit"):(Number(l?.status)===1||u==="on")&&a("patient_encounter_edit")),(l?.patientId||c?.id)&&x(l?.patientId||c?.id)},[l,c,d,a,u]);const W=(K,ne)=>{const oe=d?{templateId:t,template_id:t}:{patient_id:g,encounter_id:t};se.mutate({...oe,type:K,title:ne})},X=K=>W("problem",K),J=K=>W("observation",K),ue=K=>W("note",K),le=K=>{d?G.mutate({templateId:t,itemId:K}):G.mutate(K)},I=a(d?"encounters_template_edit":"patient_encounter_edit"),ee=a("medical_records_list");return{clinicalData:{problems:{list:j,staticOptions:ge},observations:{list:N,staticOptions:ie},notes:p,patientId:g,isEncounterTemplate:d},handlers:{addProblem:X,addObservation:J,addNote:ue,deleteMedicalHistory:le},permissions:{canEditEncounter:I,canUpdateEncounter:A,canViewMedicalRecords:ee},uiState:{showProblems:v,showObservations:b,showNote:w,setShowProblems:y,setShowObservations:k,setShowNote:S}}},To={getReports:(t,e={})=>ve({endpoint:"patient-medical-reports",method:"GET",data:{patient_id:t,...e}}),getReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"GET"}),createReport:t=>ve({endpoint:"patient-medical-reports",method:"POST",data:t}),updateReport:(t,e)=>ve({endpoint:`patient-medical-reports/${t}`,method:"PUT",data:e}),deleteReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"DELETE"}),printReport:t=>ve({endpoint:`patient-medical-reports/print/${t}`,method:"GET",responseType:"blob"}),sendReports:t=>ve({endpoint:"patient-medical-reports/send-email",method:"POST",data:t})},xr={all:["patientMedicalReports"],lists:()=>[...xr.all,"list"],list:(t,e={})=>[...xr.lists(),{patientId:t,params:e}],details:()=>[...xr.all,"detail"],detail:t=>[...xr.details(),t]},ZJ=(t,e={},n={})=>ft({queryKey:xr.list(t,e),queryFn:()=>To.getReports(t,e),enabled:!!t,...n}),XJ=()=>{const t=Ve();return Le({mutationFn:e=>To.createReport(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},JJ=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>To.updateReport(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:xr.detail(n.id)}),n.patient_id&&t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},eee=()=>{const t=Ve();return Le({mutationFn:({id:e,patient_id:n})=>To.deleteReport(e),onSuccess:(e,n)=>{n.patient_id&&t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},tee=()=>Le({mutationFn:t=>To.printReport(t)}),nee=()=>Le({mutationFn:t=>To.sendReports(t)}),al=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body",children:[t&&i.jsx("h6",{className:"font-size-14 mb-3",children:t}),e]})}),Sk=({patientId:t,canEditEncounter:e,canUpdateEncounter:n,showViewReport:s=!1})=>{const{isAddonActive:a,allowed_mime_types:l,hasCapability:o}=ut(),c=a("kiviPro");if(!c&&!e)return null;const[d,m]=f.useState(null),[u,p]=f.useState(!1),[h,g]=f.useState([]),[x,v]=f.useState(null),[y,b]=f.useState(""),[k,w]=f.useState(""),[S,j]=f.useState(!1),[T,N]=f.useState([]),[_,A]=f.useState([]),[P,E]=f.useState(!1),[M,R]=f.useState({page:1,perPage:10}),O=XJ(),L=JJ(),q=eee(),Q=Ve(),{data:V,isLoading:se}=ZJ(t,M,{enabled:c&&!!t}),G=V?.data?.pagination||{total:0,total_pages:1,per_page:10,current_page:1},ge=nee();f.useEffect(()=>{V?.data?.reports&&g(V.data.reports.map(Y=>({id:Y.id,name:Y.name||"",date:Y.date||"",file:Y.file||null})))},[V]);const ie=Y=>{Y&&wt({title:r("Delete Report?","kivicare-clinic-management-system"),text:r("You're about to delete this report.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep report","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(H=>{H.isConfirmed&&(yt({title:r("Deleting Report...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected report.<br>This won't take long.","kivicare-clinic-management-system")}),q.mutate({id:Y,patient_id:t},{onSuccess:B=>{Tt({title:r("Report Deleted","kivicare-clinic-management-system"),text:B?.message||r("Report has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:B=>{console.error("Delete report error:",B);const re=B?.response?.data?.message||B?.message||r("Failed to delete report. Please try again.","kivicare-clinic-management-system");rt({text:re})}}))})},{register:W,handleSubmit:X,reset:J,setValue:ue,formState:{errors:le},control:I}=en({defaultValues:{name:"",date:"",file:null}}),ee=Y=>{let H=Y.file;Array.isArray(H)&&(H=H[0]);const B={...Y,file:H};if(d!==null){const de=[...h];de[d]=B,g(de),m(null)}else g([...h,B]);const re={patient_id:t,name:Y.name,date:Y.date,upload_report:H.id};x?(L.mutate({id:x,...re}),v(null),Te.success(r("Report updated successfully","kivicare-clinic-management-system"))):(O.mutate(re),Te.success(r("Report created successfully","kivicare-clinic-management-system"))),J(),p(!1),b(""),w("")},K=Y=>{const H=h.find(B=>String(B.id)===String(Y));H&&(m(Y),p(!0),v(H.id),ue("name",H.name),ue("date",H.date),ue("file",H.file),H.file?H.file instanceof File?(b(URL.createObjectURL(H.file)),w("")):H.file.url?(b(H.file.url),w(H.file.id||"")):typeof H.file=="string"?(b(H.file),w("")):(b(""),w("")):(b(""),w("")))},{mutate:ne}=tee(),oe=Y=>{ne(Y,{onSuccess:H=>{const B=H instanceof Blob?H:new Blob([H],{type:H.type||"application/pdf"}),re=URL.createObjectURL(B),de=window.open(re,"_blank");de&&(de.onload=()=>{URL.revokeObjectURL(re)})},onError:H=>{rt({text:H?.response?.data?.message||H?.message||r("Failed to open report","kivicare-clinic-management-system")})}})},D=()=>{J(),p(!1),b(""),w(""),m(null)},$=[{header:r("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:Y=>Y.getValue()},{header:r("Date","kivicare-clinic-management-system"),accessorKey:"date",cell:Y=>Y.getValue()},{header:r("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:Y=>{const H=re=>de=>i.jsx(mt,{id:`tooltip-${Y.cell.row.original.id}-${re}`,...de,children:re}),B=Y.row.original.id;return i.jsxs("div",{className:"d-flex gap-2",children:[o("patient_report_edit")&&i.jsx(Ze,{placement:"top",overlay:H(r("Edit Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>K(B),children:i.jsx("i",{className:"ph ph-pencil-simple"})})}),i.jsx(Ze,{placement:"top",overlay:H(r("View Report","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-sm text-primary fs-5",onClick:()=>oe(B),children:i.jsx("i",{className:"ph ph-eye"})})}),o("patient_report_delete")&&i.jsx(Ze,{placement:"top",overlay:H(r("Delete Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>ie(B),children:i.jsx("i",{className:"ph ph-trash"})})})]})}}],te={name:{required:r("Report name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Report name must be at least 2 characters","kivicare-clinic-management-system")}},date:{required:r("Date is required","kivicare-clinic-management-system")},file:{required:r("File is required","kivicare-clinic-management-system")}},ae=async({page:Y,per_page:H,search:B})=>{try{const re=["patientMedicalReports",t,Y,H,B],de=await Q.fetchQuery({queryKey:re,queryFn:()=>To.getReports(t,{page:Y,per_page:H,search:B}),staleTime:300*1e3}),U=(de.data?.reports||[]).map(me=>({value:me.id,label:`${me.name} - ${me.date}`}));return A(me=>[...me,...U]),{data:U,pagination:de.data?.pagination||{}}}catch(re){return console.error("Error loading report options:",re),{data:[],pagination:{has_more:!1}}}};return i.jsxs("div",{className:"position-relative",children:[!c&&i.jsx(di,{text:r("Medical Report feature is available in KiviCare Pro. Upgrade to Pro to unlock uploading and managing patient medical reports.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx("h6",{children:r("Uploaded Reports","kivicare-clinic-management-system")}),(o("patient_report_add")||o("patient_report_view"))&&i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o("patient_report_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>{p(Y=>!Y),J(),b(""),w(""),m(null),v(null)},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Report","kivicare-clinic-management-system")})]}),o("patient_report_view")&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("span",{children:r("Send Email","kivicare-clinic-management-system")})]})]})]}),u&&i.jsx(al,{className:`${s?"":"bg-body"}`,children:i.jsxs("form",{onSubmit:X(ee),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${le.name?"is-invalid":""}`,type:"text",...W("name",te.name),placeholder:"eg Blood Test Report"}),le.name&&i.jsx("div",{className:"invalid-feedback d-block",children:le.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"date",control:I,rules:te.date,render:({field:Y})=>i.jsx(Un,{id:"date",className:`form-control ${le.date?"is-invalid":""}`,value:Y.value?Zn(Y.value):"",onChange:H=>{if(H&&H[0]){const B=H[0],re=B.getFullYear(),de=String(B.getMonth()+1).padStart(2,"0"),xe=String(B.getDate()).padStart(2,"0");Y.onChange(`${re}-${de}-${xe}`)}else Y.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date","kivicare-clinic-management-system")})}),le.date&&i.jsx("div",{className:"invalid-feedback d-block",children:le.date.message})]})}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(ou,{id:"report-file",name:"file",label:r("Upload File","kivicare-clinic-management-system"),accept:l?Object.values(l).join(","):".jpg,.jpeg,.png,.gif,.webp,.bmp,.svg,.tiff,.ico,.pdf",className:`${le.file?"is-invalid":""}`,...W("file",te.file),onChange:Y=>{ue("file",Y.file||Y,{shouldValidate:!0}),b(Y.url||(Y.file?URL.createObjectURL(Y.file):"")),w(Y.id||"")},required:!0,defaultFile:y,defaultFileId:k,disabled:x!==null}),le.file&&i.jsx("div",{className:"invalid-feedback d-block",children:le.file.message})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:D,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:r("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(kn,{data:V?.data?.reports||[],columns:$,enableSelection:!1,currentPage:G.current_page,perPage:G.per_page,totalItems:G.total,lastPage:G.total_pages,onPageChange:Y=>R(H=>({...H,page:Y})),onPerPageChange:Y=>R(H=>({...H,perPage:Y,page:1})),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:$.length,className:"text-center py-4 border-start border-end",children:r("No data added","kivicare-clinic-management-system")})}),moduleNamePlural:r("reports","kivicare-clinic-management-system"),isLoading:se})}),i.jsxs(lt,{show:S,onHide:()=>{j(!1),N([])},size:"md",backdrop:"static",centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Send Email","kivicare-clinic-management-system")})}),i.jsxs(lt.Body,{children:[i.jsx("p",{children:r("Select reports to send via email:","kivicare-clinic-management-system")}),i.jsx(dn,{id:"report-select",placeholder:r("Select reports","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ae,isMulti:!0,closeMenuOnSelect:!1,value:T.map(Y=>{const H=_.find(B=>B.value===Y);return H?{value:H.value,label:H.label}:null}).filter(Boolean),onChange:Y=>{N(Y?Y.map(H=>H.value):[])},dependencies:{}})]}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{j(!1),N([])},disabled:P,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(T.length===0){Te.error(r("Please select reports","kivicare-clinic-management-system"));return}E(!0),ge.mutate({report_ids:T,patient_id:t},{onSuccess:()=>{Te.success(r("Reports sent successfully","kivicare-clinic-management-system")),j(!1),N([]),E(!1)},onError:Y=>{Te.error(Y?.response?.data?.message||r("Failed to send reports","kivicare-clinic-management-system")),E(!1)}})},disabled:P,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Sending...","kivicare-clinic-management-system")]}):r("Send","kivicare-clinic-management-system")})]})]})]})},iee=({patientId:t,permissions:e})=>i.jsx(St,{children:i.jsx(Ha,{children:i.jsx(Sk,{patientId:t,canEditEncounter:e.canEditEncounter,canUpdateEncounter:e.canUpdateEncounter})})});Pe.string.isRequired,Pe.string,Pe.string,Pe.array.isRequired,Pe.func.isRequired,Pe.array.isRequired,Pe.func.isRequired,Pe.bool.isRequired,Pe.func.isRequired,Pe.object,Pe.string,Pe.func,Pe.func,Pe.bool,Pe.string,Pe.bool,Pe.bool,Pe.bool,Pe.func;const see=({recordData:t,permissions:e,show:n,onToggle:s})=>{const{type:a,encounter_id:l,patient_id:o,isEncounterTemplate:c}=t,[d,m]=f.useState({title:"",type:a,encounter_id:l}),[u,p]=f.useState(!1),[h,g]=f.useState(!1),x=Ve(),{hasCapability:v}=ut(),y=a==="note",{data:b}=Va(y?null:a==="problem"?"clinical_problems":"clinical_observations"),k=f.useMemo(()=>b?.data?b.data.map(V=>({value:V.value||V.id,label:V.label})):[],[b]),w=c?Kh(l,{type:a},{enabled:n}):Wh({patient_id:o,encounter_id:l,type:a},{enabled:n&&!!o}),S=f.useMemo(()=>(c?w?.data?.data?.items||[]:w?.data?.data?.histories||[]).map(se=>({...se,title:se.clinical_detail_val||se.title})),[w,c]),j=c?Ey():_y(),T=c?tP():eP();c?Ey():_y();const N=oV(),_=cV();f.useMemo(()=>{const V=S.map(se=>se.title);return k.filter(se=>!V.includes(se.label))},[k,S]),f.useEffect(()=>{m(V=>({...V,encounter_id:l}))},[l]);const A=async V=>{const se=V;if(g(!0),!!se.trim()){p(!0);try{const G=c?{templateId:l,template_id:l,type:a,title:se}:{patient_id:o,encounter_id:l,type:a,title:se};await j.mutateAsync(G),V||m({title:"",type:a,encounter_id:l}),w.refetch()}catch(G){console.error("Error saving medical history:",G),w.refetch()}finally{p(!1),g(!1)}}},P=V=>{const se=c?vr.list(l,{type:a}):Wl.list({patient_id:o,encounter_id:l,type:a});x.setQueryData(se,G=>{const ge={id:Date.now(),title:V,clinical_detail_val:V,type:a,label:V};return G?c?{...G,data:{...G?.data,items:[...G?.data?.items||[],ge]}}:{...G,data:{...G?.data,histories:[...G?.data?.histories||[],ge]}}:c?{data:{items:[ge]}}:{data:{histories:[ge]}}})},E=V=>{const se=c?vr.list(l,{type:a}):Wl.list({patient_id:o,encounter_id:l,type:a});x.setQueryData(se,G=>G&&(c?{...G,data:{...G?.data,items:(G?.data?.items||[]).filter(ge=>ge.id!==V)}}:{...G,data:{...G?.data,histories:(G?.data?.histories||[]).filter(ge=>ge.id!==V)}}))},M=async V=>{E(V);try{c?await T.mutateAsync({templateId:l,itemId:V}):await T.mutateAsync(V),w.refetch()}catch(se){console.error("Error deleting medical history:",se),w.refetch()}},R=f.useMemo(()=>a==="problem"?r("Select or type to add problem","kivicare-clinic-management-system"):a==="observation"?r("Select or type to add observation","kivicare-clinic-management-system"):r("Enter note","kivicare-clinic-management-system"),[a]),O=f.useMemo(()=>a==="problem"?r("Select Problems","kivicare-clinic-management-system"):a==="observation"?r("Select Observations","kivicare-clinic-management-system"):r("Notes","kivicare-clinic-management-system"),[a]),L=f.useMemo(()=>a==="problem"?r("Problems","kivicare-clinic-management-system"):a==="observation"?r("Observations","kivicare-clinic-management-system"):r("Notes","kivicare-clinic-management-system"),[a]),q=f.useCallback(async V=>{try{const se=a==="problem"?"clinical_problems":"clinical_observations",G=await Dt.getStaticDataWithPagination(se,V),ie=(G?.data||[]).map(J=>({value:J.value||J.id,label:J.label})),W=new Set((V.selectedTitles||"").split("|").filter(Boolean).map(J=>J.toLowerCase().trim()));return{data:ie.filter(J=>{const ue=J.label?J.label.toLowerCase().trim():"";return!W.has(ue)}),pagination:G?.pagination||{}}}catch(se){return console.error("Error loading options:",se),{data:[],pagination:{}}}},[a]),Q=async V=>{P(V);const se=a==="problem"?N:_;se?se.mutate(V,{onSuccess:()=>{A(V)},onError:()=>{w.refetch()}}):A(V)};return n?y?i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:r("Notes","kivicare-clinic-management-system")}),i.jsxs(al,{className:"bg-body card-block card-stretch card-height card mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsxs("div",{className:"form-group position-relative add-note-input d-flex",children:[i.jsx("textarea",{className:"form-control",placeholder:R,value:d.title,onChange:V=>m(se=>({...se,title:V.target.value})),rows:4}),i.jsx("button",{type:"button",className:"btn btn-primary py-1 px-3 add-btn-notes ms-2",onClick:()=>{d.title.trim()&&(P(d.title),A(d.title),m(V=>({...V,title:""})))},disabled:u||!d.title.trim(),children:r("Add","kivicare-clinic-management-system")})]}),S.length>0?i.jsx("ol",{className:"mt-3 mb-0 list-data-scroll",children:S.map(V=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("p",{className:"font-size-14 mb-0",children:V.title}),e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>M(V.id)})]})},V.id))}):i.jsx("div",{className:"text-danger mt-4 text-center",children:r("No record found","kivicare-clinic-management-system")})]})]})}):i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:L}),i.jsxs("div",{className:"bg-body card-block card-stretch card-height card p-3 mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("p",{className:"text-danger font-size-12 fw-bold mb-3",children:r("Note: Type and press enter to create new","kivicare-clinic-management-system")+" "+a}),i.jsx("div",{className:"form-group",children:e.canEditEncounter&&e.canUpdateEncounter&&v("medical_records_add")&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:O}),i.jsx(dn,{placeholder:R,loadOptions:q,className:"react-select-box",classNamePrefix:"react-select",dependencies:{type:a,selectedTitles:S.map(V=>V.title).sort().join("|")},isCreatable:!0,onCreateOption:Q,formatCreateLabel:V=>r("Add","kivicare-clinic-management-system")+` ${L}: "${V}"`,onChange:V=>{V&&(P(V.label),A(V.label))},value:null,isClearable:!0,isLoading:!1,noCache:!0},`select-${S.map(V=>V.title).sort().join("|")}`)]})}),S.length>0?i.jsx("ol",{className:"mt-4 mb-0 list-data-scroll",children:S.map(V=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("span",{className:"text-break",children:V.title}),e.canEditEncounter&&e.canUpdateEncounter&&v("medical_records_delete")&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>M(V.id)})]})},V.id))}):i.jsx("div",{className:"card-body text-danger mt-4 text-center",children:r("No record found","kivicare-clinic-management-system")})]})]})}):null},Ao={getPrescriptions:(t={})=>ve({endpoint:"prescriptions",method:"GET",data:t}),getPrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"GET"}),createPrescription:t=>ve({endpoint:"prescriptions",method:"POST",data:t}),updatePrescription:(t,e)=>ve({endpoint:`prescriptions/${t}`,method:"PUT",data:e}),deletePrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"DELETE"}),printPrescriptions:t=>ve({endpoint:`prescriptions/encounter/${t}/print`,method:"GET",responseType:"blob"}),exportPrescriptions:(t={})=>ve({endpoint:"prescriptions/export",method:"GET",data:t}),sendPrescriptionEmail:(t={})=>ve({endpoint:`prescriptions/${t.encounter_id}/email`,method:"POST",data:t})},os={all:["prescriptions"],lists:()=>[...os.all,"list"],list:t=>[...os.lists(),{params:t}],details:()=>[...os.all,"detail"],detail:t=>[...os.details(),t]},aee=(t={},e={})=>ft({queryKey:os.list(t),queryFn:()=>Ao.getPrescriptions(t),...e}),ree=()=>{const t=Ve();return Le({mutationFn:e=>Ao.createPrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:os.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:os.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:os.list({encounter_id:n.encounter_id})})}})},lee=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Ao.updatePrescription(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:os.detail(n.id)}),n?.patient_id&&t.invalidateQueries({queryKey:os.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:os.list({encounter_id:n.encounter_id})})}})},oee=()=>{const t=Ve();return Le({mutationFn:({id:e})=>Ao.deletePrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:os.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:os.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:os.list({encounter_id:n.encounter_id})})}})},cee=()=>Le({mutationFn:t=>Ao.printPrescriptions(t)}),dee=()=>Le({mutationFn:t=>Ao.exportPrescriptions(t)}),mee=()=>Le({mutationFn:t=>Ao.sendPrescriptionEmail(t)}),sf={getEncounterTemplatePrescriptions:t=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"GET"}),createEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"POST",data:e}),updateEncounterTemplatePrescription:(t,e,n)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"PUT",data:n}),deleteEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"DELETE"})},rl={all:["encounterTemplatePrescription"],lists:()=>[...rl.all,"list"],list:t=>[...rl.lists(),t],details:()=>[...rl.all,"detail"],detail:(t,e)=>[...rl.details(),t,e]},uee=(t,e={})=>ft({queryKey:rl.list(t),queryFn:()=>sf.getEncounterTemplatePrescriptions(t),...e}),hee=()=>{const t=Ve();return Le({mutationFn:({templateId:e,...n})=>sf.createEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(rl.list(e.templateId))}})},pee=()=>{const t=Ve();return Le({mutationFn:({templateId:e,id:n,...s})=>sf.updateEncounterTemplatePrescription(e,n,s),onSuccess:(e,n)=>{t.invalidateQueries(rl.list(n.templateId))}})},gee=()=>{const t=Ve();return Le({mutationFn:({templateId:e,itemId:n})=>sf.deleteEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(rl.list(e.templateId))}})},fee=({patientId:t,encounterId:e,permissions:n})=>{const{prescription_modules:s,loading:a}=ut();if(!f.useMemo(()=>{if(a||!Array.isArray(s))return!0;const B=s.find(re=>re.name==="prescription");return B?B.status==1:!0},[a,s]))return null;const o=Ve(),{isAddonActive:c,hasCapability:d}=ut(),m=Bm(),{isEncounterTemplate:u}=m[m.length-1].handle.meta,{canEditEncounter:p,canUpdateEncounter:h}=n,[g,x]=f.useState(null),[v,y]=f.useState(!1),[b,k]=f.useState(!1),w=c("kiviPro"),S=ree(),j=lee(),T=oee(),N=hee(),_=pee(),A=gee(),P=cee(),E=dee(),M=mee(),{data:R,isLoading:O}=Va("prescription_medicine"),L=dV(),{data:q,isLoading:Q}=u?uee(e,{enabled:!0}):aee({patient_id:t,encounter_id:e}),V=q?.data?.items||q?.data||[],{register:se,handleSubmit:G,reset:ge,setValue:ie,control:W,formState:{errors:X}}=en({defaultValues:{name:"",frequency:"",duration:"",instruction:""}}),J=B=>{x(B),y(!0);const re=V[B];ie("name",{label:re.name,value:re.name}),ie("frequency",re.frequency),ie("duration",re.duration),ie("instruction",re.instruction)},ue=B=>{const re={patient_id:t,encounter_id:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction,added_by:1};if(g!==null&&V[g])u?_.mutate({templateId:e,id:V[g].id,...re}):j.mutate({id:V[g].id,...re}),Te.success(r("Prescription updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});else{const de=u?N:S,xe=u?{templateId:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction}:re;de.mutate(xe),Te.success(r("Prescription created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}ge(),y(!1),x(null)},le=()=>{ge(),y(!1),x(null)},I=B=>{const re=V[B];re?.id&&wt({title:r("Delete Prescription?","kivicare-clinic-management-system"),text:r("You're about to delete this prescription.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep prescription","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(de=>{if(de.isConfirmed){yt({title:r("Deleting Prescription...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected prescription.<br>This won't take long.","kivicare-clinic-management-system")});const xe=u?A:T,U=u?{templateId:e,id:re.id}:{id:re.id,patient_id:t,encounter_id:e};xe.mutate(U,{onSuccess:me=>{Tt({title:r("Prescription Deleted","kivicare-clinic-management-system"),text:me?.message||r("Prescription has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:me=>{console.error("Delete prescription error:",me);const ye=me?.response?.data?.message||me?.message||r("Failed to delete prescription. Please try again.","kivicare-clinic-management-system");rt({text:ye})}})}})},ee=[{header:r("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:B=>B.getValue()},{header:r("Frequency","kivicare-clinic-management-system"),accessorKey:"frequency",cell:B=>B.getValue()},{header:r("Duration","kivicare-clinic-management-system"),accessorKey:"duration",cell:B=>{const re=B.getValue();return re?`${re} ${r("days","kivicare-clinic-management-system")}`:r("N/A","kivicare-clinic-management-system")}},{header:r("Instruction","kivicare-clinic-management-system"),accessorKey:"instruction",cell:B=>B.getValue()||r("No data added","kivicare-clinic-management-system")},...Yi()?[]:[{header:r("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:B=>{const re=B.row.index;return h?i.jsxs("div",{className:"d-flex gap-2",children:[(u||d("prescription_edit"))&&i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>J(re),children:i.jsx("i",{className:"ph ph-pencil-simple"})}),d("prescription_delete")&&i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>I(re),children:i.jsx("i",{className:"ph ph-trash"})})]}):i.jsx("div",{className:"text-center text-muted",children:"-"})}}]],K={name:{required:r("Prescription name is required","kivicare-clinic-management-system")},frequency:{required:r("Frequency is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:r("Frequency must be a number greater than zero","kivicare-clinic-management-system")}},duration:{required:r("Duration is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:r("Duration must be a number greater than zero","kivicare-clinic-management-system")}}},ne=()=>{const B={onSuccess:re=>{const de=new Blob([re],{type:"application/pdf"}),xe=URL.createObjectURL(de);window.open(xe,"_blank"),setTimeout(()=>URL.revokeObjectURL(xe),100)},onError:re=>{Te.error(re?.response?.data?.message||r("Failed to print prescriptions","kivicare-clinic-management-system"))}};P.mutate(e,B)},oe=async B=>({success:!0}),D=()=>{o.invalidateQueries(["prescriptions",{patient_id:t,encounter_id:e}])},$=async B=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const re={format:B,patient_id:t,encounter_id:e},de=await E.mutateAsync(re);if(de?.data?.prescriptions){const xe=new Date().toISOString().split("T")[0],U=de.data.prescriptions;switch(B){case"csv":ps(U,`prescriptions-${xe}.csv`);break;case"xls":gs(U,`prescriptions-${xe}.xls`);break;case"pdf":fs(U,`prescriptions-${xe}.pdf`,"Prescriptions List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(re){console.error("Export error:",re),rt({title:r("Error!","kivicare-clinic-management-system"),text:re.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},te=()=>$("csv"),ae=()=>$("xls"),Y=()=>$("pdf"),H=()=>{M.mutate({encounter_id:e},{onSuccess:B=>{Te.success(B?.message||r("Prescription email sent successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})},onError:B=>{Te.error(B?.response?.data?.message||r("Failed to send prescription email","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})}})};return i.jsxs(i.Fragment,{children:[d("prescription_list")&&i.jsx(St,{children:i.jsxs(Ha,{children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap justify-content-between mb-3",children:[i.jsx("h5",{children:r("Prescription","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[!u&&i.jsxs(i.Fragment,{children:[V.length>0&&p&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:H,children:r("Email","kivicare-clinic-management-system")}),h&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>k(!0),children:r("Import","kivicare-clinic-management-system")}),w&&V.length>0&&i.jsx(i.Fragment,{children:i.jsxs("button",{className:"btn btn-primary",type:"button",onClick:ne,children:[i.jsx("i",{className:"ph ph-printer"})," ",r("Print","kivicare-clinic-management-system")]})})]}),h&&d("prescription_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>y(B=>!B),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Prescription","kivicare-clinic-management-system")})]})]})]}),w&&!u&&V.length>0&&i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 flex-wrap mb-3",children:d("prescription_export")&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-import-bg",onClick:te,title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:ae,title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:Y,title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]})}),v&&i.jsx(al,{className:"bg-body",children:i.jsxs("form",{onSubmit:G(ue),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"name",control:W,rules:K.name,render:({field:B})=>i.jsx(Xc,{id:"prescription-name",...B,isClearable:!0,options:R?.data??[],placeholder:r("Select or create medicine","kivicare-clinic-management-system"),className:`react-select-container ${X.name?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isLoading:O||L.isPending,getOptionValue:re=>{const de=re.value??re.id;return de!=null?String(de):""},getOptionLabel:re=>re.label,onChange:re=>{B.onChange(re)},onCreateOption:re=>{L.mutate(re,{onSuccess:de=>{if(de?.data){const xe=de.data?.data?.id||de.data?.id,U=de.data?.data?.label||re,me={id:parseInt(xe,10),value:parseInt(xe,10),label:U};B.onChange(me)}else B.onChange({label:re,value:re});Te.success(r("Medicine added successfully","kivicare-clinic-management-system"))},onError:de=>{console.error("Failed to save medicine:",de);const xe={label:re,value:re};B.onChange(xe),Te.error(r("Failed to save medicine to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},noOptionsMessage:()=>r("Type to create a new medicine","kivicare-clinic-management-system"),formatCreateLabel:re=>r("Add medicine","kivicare-clinic-management-system")+`: "${re}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new prescription","kivicare-clinic-management-system")]}),X.name&&i.jsx("div",{className:"invalid-feedback d-block",children:X.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Frequency","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${X.frequency?"is-invalid":""}`,type:"text",...se("frequency",K.frequency),placeholder:'eg "1"(times per day)'}),X.frequency&&i.jsx("div",{className:"invalid-feedback d-block",children:X.frequency.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Duration (In Days)","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${X.duration?"is-invalid":""}`,type:"text",...se("duration",K.duration),placeholder:'eg "5" (days)'}),X.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:X.duration.message})]})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Instruction","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",...se("instruction"),placeholder:'eg "Drink milk after taking pills"'})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:le,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:r("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(kn,{data:V,columns:ee,enableSelection:!1,isLoading:Q,skeletonColumns:4,skeletonRows:3,striped:!0,bordered:!0,hover:!0,responsive:!0,moduleNamePlural:r("prescriptions","kivicare-clinic-management-system"),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:ee.length,className:"text-center py-4 border-start border-end",children:r("No data added","kivicare-clinic-management-system")})})})})]})}),w&&i.jsx(Lr,{show:b,onHide:()=>k(!1),onImport:oe,onReopenImport:()=>k(!0),onDataRefresh:D,context:"prescriptions",encounterId:e})]})},sP=()=>{const{id:t}=Gt(),{encounter_modules:e,loading:n}=ut(),{control:s,formState:{errors:a},setValue:l,watch:o}=en(),{encounterCustomFieldData:c}=nf(),{data:d}=_n(),u=Yi()&&d?.data?.hideClinicalDetailsForPatient===!0,p=f.useCallback(k=>{if(n||!Array.isArray(e))return!0;const w=e.find(S=>S.name===k);return w?w.status==1:!0},[n,e]),h=p("problem"),g=p("observation"),x=p("note"),{clinicalData:v,permissions:y,uiState:b}=QJ(t,{isProblemEnabled:h,isObservationEnabled:g,isNoteEnabled:x});return i.jsxs("div",{className:"mt-4",children:[!u&&y.canViewMedicalRecords&&(h||g||x)&&i.jsx(St,{children:i.jsx(Ha,{children:i.jsx("div",{className:"row",children:[{type:"problem",moduleName:"problem",show:b.showProblems,onToggle:b.setShowProblems},{type:"observation",moduleName:"observation",show:b.showObservations,onToggle:b.setShowObservations},{type:"note",moduleName:"note",show:b.showNote,onToggle:b.setShowNote}].map(k=>p(k.moduleName)&&i.jsx(see,{recordData:{type:k.type,encounter_id:t,patient_id:v.patientId,isEncounterTemplate:v.isEncounterTemplate},permissions:y,show:k.show,onToggle:k.onToggle},k.type))})})}),!v.isEncounterTemplate&&i.jsx(iee,{patientId:v.patientId,permissions:y}),i.jsx(fee,{patientId:v.patientId,encounterId:t,permissions:y}),i.jsx(tf,{moduleType:"patient_encounter_module",moduleId:parseInt(t),control:s,errors:a,setValue:l,watch:o,initialData:c})]})},vee=()=>{const{id:t}=Gt(),e=Bm(),{isEncounterTemplate:n}=e[e.length-1].handle.meta,s={encounterData:null,isEncounterLoading:!1,encounterError:null,customForms:[],canEditEncounter:!0,canUpdateEncounter:!0,showEditBillModal:!1,showAddServiceItemForm:!1,editFormData:{},setEditFormData:()=>{},setShowAddServiceItemForm:()=>{},handleOpenEditBillModal:()=>{},handleCloseEditBillModal:()=>{},billData:null,encounterStatus:null,patientInfo:null,clinicInfo:null,isAddonActive:()=>!1,isEncounterTemplate:n||!1};return i.jsx(Ck.Provider,{value:s,children:i.jsx("div",{className:"row mb-0",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-5",children:i.jsx("h6",{className:"m-0",children:r("Other Details","kivicare-clinic-management-system")})}),i.jsx(sP,{})]})})})},pC=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["50px","120px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(kl,{titleWidth:"140px"}),i.jsxs("form",{className:"mb-0",children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Se,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-12",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"})]})]})]}),gC=({view:t=null,children:e=null})=>i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"mt-4",children:e||i.jsx(i.Fragment,{children:t==="clinic-detail"?i.jsx(gt,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((n,s)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},s)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]})}):t==="body-chart"?i.jsx(Sn,{columns:5,rows:5,showHeader:!0,showActions:!0,showPagination:!0,showFilterBar:!0}):t==="custom-form"?i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"custom-form-container",children:i.jsxs("div",{className:"gy-3 row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"150px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:4}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"80px",height:"0.875rem"})]},s))})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"130px",inputHeight:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"200px",height:"0.875rem"})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"180px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:3}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]},s))})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"120px",height:"42px"})})]})}):i.jsxs(i.Fragment,{children:[i.jsx(gt,{children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(C,{width:"80px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(C,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"120px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(C,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"140px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-12",children:[i.jsx(C,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"100%",height:"80px",className:"mb-2",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100%",height:"1rem"})]})})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx(C,{width:"140px",height:"1.125rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"120px"}),i.jsx(st,{width:"120px"})]})]}),i.jsx(Sn,{columns:3,rows:2,showHeader:!0,showActions:!1,showPagination:!1})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap pt-3 justify-content-between mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"160px"})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 mb-3",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Sn,{columns:5,rows:3,showHeader:!0,showActions:!0,showPagination:!1})]})]})})})}),ph=({view:t=null})=>Kn().key!="default"?i.jsx(gC,{view:t}):i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["50px","120px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:"position-sticky top-0",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsxs(gt,{children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"180px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"100px",height:"0.875rem"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(C,{width:"100px",height:"1.125rem"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"140px"})]})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-2"}),i.jsx(gt,{children:i.jsx(Se,{labelWidth:"180px",inputHeight:"38px"})})]})]})}),i.jsxs("div",{className:"col-xl-9 col-lg-8",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"20px"}})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"140px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx(gC,{view:t})]})]})]}),xee=()=>i.jsx("div",{className:"body-chart-outlet",children:i.jsx(Ji,{})}),yee=()=>i.jsx("div",{className:"body-chart-editor-page",children:i.jsxs(St,{children:[i.jsx(St.Header,{className:"mb-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx(C,{width:"150px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"120px"})]})]})}),i.jsxs(St.Body,{children:[i.jsx(Yn,{children:i.jsxs(Et,{md:12,children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"100px"})]})]})}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsx(St,{children:i.jsx(St.Body,{children:i.jsxs("div",{style:{height:"76vh",position:"relative"},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(st,{width:"40px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"})]}),i.jsx(C,{width:"100%",height:"100%"})]})})})})})]})]})}),Za=(t,e)=>{const[n,s]=f.useState(t);return f.useEffect(()=>{const a=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(a)}},[t,e]),n},$r={getClinics:(t={})=>ve({endpoint:"clinics",method:"GET",data:t}),getClinic:t=>ve({endpoint:`clinics/${t}`,method:"GET"}),createClinic:t=>ve({endpoint:"clinics",method:"POST",data:t}),updateClinic:(t,e)=>ve({endpoint:`clinics/${t}`,method:"PUT",data:e}),deleteClinic:t=>ve({endpoint:`clinics/${t}`,method:"DELETE"}),getClinicDoctors:(t,e={})=>ve({endpoint:`clinics/${t}/doctors`,method:"GET",data:e}),getClinicPatients:(t,e={})=>ve({endpoint:`clinics/${t}/patients`,method:"GET",data:e}),getClinicServices:(t,e={})=>ve({endpoint:`clinics/${t}/services`,method:"GET",data:e}),getClinicSchedule:(t,e={})=>ve({endpoint:`clinics/${t}/schedule`,method:"GET",data:e}),resendCredentials:t=>ve({endpoint:`clinics/${t}/resend-credentials`,method:"POST"}),updateClinicStatus:(t,e)=>ve({endpoint:`clinics/${t}/status`,method:"PUT",data:{status:e}}),bulkDeleteClinics:t=>ve({endpoint:"clinics/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"clinics/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateClinicStatus:(t,e)=>ve({endpoint:"clinics/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportClinics:(t={})=>ve({endpoint:"clinics/export",method:"GET",data:t})},Ws={all:["clinics"],lists:()=>[...Ws.all,"list"],list:t=>[...Ws.lists(),{filters:t}],details:()=>[...Ws.all,"detail"],detail:t=>[...Ws.details(),t]},aP=(t={},e={})=>ft({queryKey:Ws.list(t),queryFn:()=>$r.getClinics(t),...e}),bee=(t,e={})=>ft({queryKey:Ws.detail(t),queryFn:()=>$r.getClinic(t),enabled:!!t,...e}),wee=()=>{const t=Ve();return Le({mutationFn:e=>$r.createClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},kee=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>$r.updateClinic(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ws.detail(n.id)}),t.invalidateQueries({queryKey:Ws.lists()})}})},jee=()=>{const t=Ve();return Le({mutationFn:e=>$r.deleteClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Nee=()=>Le({mutationFn:t=>$r.resendCredentials(t)}),Cee=()=>{const t=Ve();return Le({mutationFn:e=>$r.bulkDeleteClinics(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},See=()=>Le({mutationFn:t=>$r.bulkResendCredentials(t)}),_ee=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>$r.bulkUpdateClinicStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Xa={getDoctors:(t={})=>ve({endpoint:"doctors",method:"GET",data:t}),getDoctor:t=>ve({endpoint:`doctors/${t}`,method:"GET"}),createDoctor:t=>ve({endpoint:"doctors",method:"POST",data:t}),updateDoctor:(t,e)=>ve({endpoint:`doctors/${t}`,method:"PUT",data:e}),deleteDoctor:t=>ve({endpoint:`doctors/${t}`,method:"DELETE"}),getDoctorSchedule:(t,e={})=>ve({endpoint:`doctors/${t}/schedule`,method:"GET",data:e}),bulkDeleteDoctors:t=>ve({endpoint:"doctors/bulk/delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`doctors/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"doctors/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateDoctorStatus:(t,e)=>ve({endpoint:"doctors/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctors:(t={})=>ve({endpoint:"doctors/export",method:"GET",data:t})},ss={all:["doctors"],lists:()=>[...ss.all,"list"],list:t=>[...ss.lists(),{filters:t}],details:()=>[...ss.all,"detail"],detail:t=>[...ss.details(),t],schedule:()=>[...ss.all,"schedule"],doctorSchedule:t=>[...ss.schedule(),t]},_k=(t={},e={})=>ft({queryKey:ss.list(t),queryFn:()=>Xa.getDoctors(t),...e}),af=(t,e={})=>ft({queryKey:ss.detail(t),queryFn:()=>Xa.getDoctor(t),enabled:!!t,...e}),Eee=()=>{const t=Ve();return Le({mutationFn:e=>Xa.createDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:ss.lists()})}})},Tee=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Xa.updateDoctor(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ss.detail(n.id)}),t.invalidateQueries({queryKey:ss.lists()}),t.invalidateQueries({queryKey:["dashboard","topDoctors"]})}})},Aee=()=>{const t=Ve();return Le({mutationFn:e=>Xa.deleteDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:ss.lists()})}})},Dee=()=>{const t=Ve();return Le({mutationFn:e=>Xa.bulkDeleteDoctors(e),onSuccess:()=>{t.invalidateQueries({queryKey:ss.lists()})}})},Ree=()=>Le({mutationFn:t=>Xa.resendCredentials(t)}),Pee=()=>Le({mutationFn:t=>Xa.bulkResendCredentials(t)}),Mee=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>Xa.bulkUpdateDoctorStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:ss.lists()})}})},Iee=()=>Le({mutationFn:t=>Xa.exportDoctors(t)}),ia={getPatients:(t={})=>ve({endpoint:"patients",method:"GET",data:t}),getPatient:t=>ve({endpoint:`patients/${t}`,method:"GET"}),createPatient:t=>ve({endpoint:"patients",method:"POST",data:t}),updatePatient:(t,e)=>ve({endpoint:`patients/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`patients/${t}/resend-credentials`,method:"POST"}),deletePatient:t=>ve({endpoint:`patients/${t}`,method:"DELETE"}),bulkDeletePatients:t=>ve({endpoint:"patients/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"patients/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdatePatientStatus:(t,e)=>ve({endpoint:"patients/bulk/status",method:"PUT",data:{ids:t,status:e}}),getPatientUniqueId:()=>ve({endpoint:"patients/uniqueid",method:"GET"}),exportPatients:(t={})=>ve({endpoint:"patients/export",method:"GET",data:t}),getPatientStatistics:t=>ve({endpoint:`patients/${t}/statistics`,method:"GET"})},cs={all:["patients"],lists:()=>[...cs.all,"list"],list:t=>[...cs.lists(),{filters:t}],details:()=>[...cs.all,"detail"],detail:t=>[...cs.details(),t]},rP=(t={},e={})=>ft({queryKey:cs.list(t),queryFn:()=>ia.getPatients(t),...e}),Oee=(t,e={})=>ft({queryKey:cs.detail(t),queryFn:()=>ia.getPatient(t),enabled:!!t,...e}),Fee=()=>{const t=Ve();return Le({mutationFn:e=>ia.createPatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:cs.lists()}),t.invalidateQueries({queryKey:pt.users()})}})},Lee=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>ia.updatePatient(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:cs.detail(n.id)}),t.invalidateQueries({queryKey:cs.lists()})}})},$ee=()=>Le({mutationFn:t=>ia.resendCredentials(t)}),Bee=()=>{const t=Ve();return Le({mutationFn:e=>ia.deletePatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:cs.lists()})}})},qee=()=>{const t=Ve();return Le({mutationFn:e=>ia.bulkDeletePatients(e),onSuccess:()=>{t.invalidateQueries({queryKey:cs.lists()})}})},Hee=()=>Le({mutationFn:t=>ia.bulkResendCredentials(t)}),zee=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>ia.bulkUpdatePatientStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:cs.lists()})}})},Vee=(t={})=>ft({queryKey:[...cs.all,"uniqueid"],queryFn:()=>ia.getPatientUniqueId(),...t}),Uee=()=>Le({mutationFn:t=>ia.exportPatients(t)}),Wee=(t,e={})=>ft({queryKey:[...cs.detail(t),"statistics"],queryFn:()=>ia.getPatientStatistics(t),enabled:!!t,...e}),Ty=({patientId:t})=>{const[e,n]=f.useState(!1),[s,a]=f.useState(()=>{const $={};return t&&($.patientId=t),$}),[l,o]=f.useState(!1),c=f.useRef(null),{userRole:d,isAddonActive:m,hasCapability:u}=ut(),{data:p}=_n(),h=m("kiviPro"),g=Xn(),x=Jn(),v=Li(),y=Yi(),b=p?.data?.allowEncounterEdit,[k,w]=f.useState(null),S=Ln(),[j,T]=f.useState(null),N=Za(j,500);ze.useEffect(()=>{a($=>({...$,search:N,page:1,...t?{patientId:t}:{}}))},[N,t]);const _=$=>{T($.target.value)};nP();const A=HJ(),P=Ve(),E=f.useMemo(()=>Object.fromEntries(Object.entries(s).filter(([$,te])=>te!==""&&te!==null&&te!==void 0)),[s]),M=GJ(),R=async $=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ae=(await M.mutateAsync({format:$,...E})).data,Y=new Date().toISOString().split("T")[0],H=`${r("Patients Encounter List","kivicare-clinic-management-system")} - ${Y}`;$==="csv"?ps(ae,`${H}.csv`):$==="xls"?gs(ae,`${H}.xls`):$==="pdf"&&fs(ae,`${H}.pdf`,r("Patients Encounter List","kivicare-clinic-management-system")),Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(te){console.error("Export failed:",te),rt({title:r("Error!","kivicare-clinic-management-system"),text:te.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},O=Le({mutationFn:$=>Dr.deleteEncounter($),onSuccess:()=>{P.invalidateQueries({queryKey:["encounters"]})}}),L=f.useMemo(()=>[S.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:$=>$.getValue(),enableSorting:!0}),S.accessor("patientName",{header:()=>r("Patient","kivicare-clinic-management-system"),cell:$=>{const te=$.row.original;return i.jsx(cn,{profileUrl:te.patient_image_url,name:te.patientName,email:te.patientEmail||"",nameLabel:r("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0}),...v?[]:[S.accessor("doctorName",{header:()=>r("Doctor","kivicare-clinic-management-system"),cell:$=>{const te=$.row.original;return i.jsx(cn,{profileUrl:te.doctor_image_url,name:te.doctorName,email:te.doctorEmail||"",nameLabel:r("Doctor","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})],...h&&!g&&!x?[S.accessor("clinicName",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:$=>{const te=$.row.original;return i.jsx(cn,{profileUrl:te.clinic_image_url,name:te.clinicName,email:te.clinicEmail||"",nameLabel:r("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})]:[],S.accessor("encounterDate",{header:()=>r("Date","kivicare-clinic-management-system"),cell:$=>$.getValue(),enableSorting:!0}),S.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:$=>{const te=$.getValue();return te===1||te==="1"?i.jsx("span",{className:"badge bg-success-subtle px-3 py-2",children:r("Active","kivicare-clinic-management-system")}):te===0||te==="0"?i.jsx("span",{className:"badge bg-danger-subtle px-3 py-2",children:r("Closed","kivicare-clinic-management-system")}):i.jsx("span",{children:te})},enableSorting:!0}),...u("patient_encounter_edit")||u("patient_encounter_view")||u("patient_encounter_delete")||u("patient_encounter_view_billing")?[S.display({id:"action",header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:$=>{const te=ae=>Y=>i.jsx(mt,{id:`tooltip-${$.cell.row.original.id}-${ae}`,...Y,children:ae});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[u("patient_encounter_edit")&&($.cell.row.original.status!=="0"||b==="on")&&!y&&i.jsx(Ze,{placement:"top",overlay:te(r("Edit Encounter","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/edit/${$.cell.row.original.id}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),$.cell.row.original.status=="0"&&h&&$.cell.row.original.billId&&u("patient_encounter_view_billing")&&i.jsx(Ze,{placement:"top",overlay:te(r("View Billing","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/billings/view/${$.cell.row.original.billId}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),u("patient_encounter_view")&&i.jsx(Ze,{placement:"top",overlay:te(r("View Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${$.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),u("patient_encounter_delete")&&i.jsx(Ze,{placement:"top",overlay:te(r("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async ae=>{ae.preventDefault(),wt({title:r("Delete Encounter?","kivicare-clinic-management-system"),text:r("You're about to delete this encounter.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep encounter","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Encounter...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected encounter.<br>This won't take long.","kivicare-clinic-management-system")}),O.mutate($.cell.row.original.id,{onSuccess:H=>{Tt({title:r("Encounter Deleted","kivicare-clinic-management-system"),text:H?.message||r("Encounter has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to encounters","kivicare-clinic-management-system")})},onError:H=>{rt({text:H?.response?.data?.message||H?.message||r("Failed to delete encounter. Please try again.","kivicare-clinic-management-system")})}}))})},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})}})]:[]],[S,O,u,b,g,x]),q=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Closed","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],Q=()=>R("csv"),V=()=>R("xls"),[se,G]=f.useState(!1),ge=()=>{se||(G(!0),R("pdf"),setTimeout(()=>G(!1),2e3))},{data:ie,isLoading:W,error:X}=qJ(s),{data:J,isLoading:ue}=aP(),{data:le,isLoading:I}=_k(),{data:ee,isLoading:K}=rP(),ne=(J?.data?.clinics||[]).map($=>({value:$.id,label:$.name||$.clinic_name})),oe=(le?.data?.doctors||[]).map($=>({value:$.id,label:$.name||`${$.first_name||""} ${$.last_name||""}`})),D=(ee?.data?.patients||[]).map($=>({value:$.id,label:$.name||`${$.first_name||""} ${$.last_name||""}`}));return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:r("All Encounter List","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[!y&&u("patient_encounter_add")&&i.jsxs(ht,{to:"/encounter/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Encounter","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>n(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!l,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:c,children:i.jsxs("div",{ref:c,className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Un,{className:"form-control w-auto",value:k?Zn(k):"",options:{dateFormat:xi(window.kc_frontend.date_format),allowInput:!0,locale:Wn()},onChange:$=>{if($&&$[0]){const te=$[0],ae=te.getFullYear(),Y=String(te.getMonth()+1).padStart(2,"0"),H=String(te.getDate()).padStart(2,"0"),B=`${ae}-${Y}-${H}`;w(B),a(re=>({...re,encounterDate:B}))}else w(null),a(te=>({...te,encounterDate:void 0}))},placeholder:r("Select Date","kivicare-clinic-management-system")}),k&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute",style:{right:"48px",top:"50%",transform:"translateY(-50%)",zIndex:10,padding:"4px 8px",background:"transparent",border:"none"},onClick:()=>{w(null),a($=>({...$,encounterDate:void 0}))},title:r("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x text-danger",style:{fontSize:"16px"}})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:q,onChange:$=>a(te=>({...te,encounterStatus:$?$.value:""})),value:q.find($=>$.value===s.encounterStatus)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:$=>({...$,zIndex:9999})}})]}),i.jsx("div",{className:"position-relative"}),i.jsx("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:j,onChange:_})]}),u("patient_encounter_export")&&h&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:Q,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:V,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:ge,disabled:M.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})}),i.jsx(kn,{data:ie?.data.encounters||[],columns:L,moduleNamePlural:"encounters",currentPage:ie?.data.page,perPage:ie?.data.per_page||10,totalItems:ie?.data.total||(ie?.data.encounters?ie.data.length:0),lastPage:ie?.data.total_pages||1,isLoading:W,enableSelection:!y,enableSorting:!0,onPageChange:$=>a(te=>({...te,page:$})),onPerPageChange:$=>a(te=>({...te,perPage:$,page:1})),onSortingChange:$=>{a(te=>({...te,sortBy:$.length>0?$[0].id:void 0,sortOrder:$.length>0?$[0].desc?"desc":"asc":void 0,page:1}))},bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:($,te)=>{const ae=$.map(Y=>Y.id);wt({title:r("Delete Encounters?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${$.length} encounters</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep encounters","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Encounters...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected encounters.<br>This won't take long.","kivicare-clinic-management-system")}),A.mutate(ae,{onSuccess:H=>{Tt({title:r("Encounter Deleted","kivicare-clinic-management-system"),text:r(`${$.length} encounter${$.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to encounters","kivicare-clinic-management-system")}),te()},onError:H=>{console.error("Bulk delete encounters error:",H);const B=H?.response?.data?.message||H?.message||r("Failed to delete selected encounters. Please try again.","kivicare-clinic-management-system");rt({text:B})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:$=>{o($)}})]}),i.jsx(na,{show:e,width:"540px",onHide:()=>n(!1),queryParams:s,onApplyFilters:$=>{a(te=>({...te,...$,page:1})),n(!1)},onResetFilters:()=>{a({...t?{patientId:t}:{}}),n(!1)},title:r("Filters","kivicare-clinic-management-system"),fields:[{name:"inlineDateRange",label:r("Select Date","kivicare-clinic-management-system"),type:"inlineDateRange",startDateKey:"startDate",endDateKey:"endDate",placeholder:r("eg Feb 25,2025","kivicare-clinic-management-system")},{name:"id",label:r("ID","kivicare-clinic-management-system"),type:"text",placeholder:r("eg 123","kivicare-clinic-management-system")},...v?[]:[...h?[{name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),type:"select",options:ne,isLoading:ue,placeholder:r("eg Mount Health Care","kivicare-clinic-management-system")}]:[],{name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),type:"select",options:oe,isLoading:I,placeholder:r("eg Albert Heaven","kivicare-clinic-management-system")}],...y?[]:[{name:"patient",label:r("Patient","kivicare-clinic-management-system"),type:"select",options:D,isLoading:K,placeholder:r("eg Amelia Brightwell","kivicare-clinic-management-system")}],{name:"status",label:r("Status","kivicare-clinic-management-system"),type:"select",options:q,placeholder:r("eg Active","kivicare-clinic-management-system")}],hasAppliedFilters:f.useMemo(()=>["id","clinic","doctor","patient","startDate","endDate","status","search","encounterDate","encounterStatus"].some(te=>{const ae=s[te];return ae!=null&&ae!==""})||j!==null&&j!=="",[s,j])})]})},Kee=ze.memo(({formData:t={},onSubmit:e,onCancel:n,isSubmitting:s})=>{const{register:a,handleSubmit:l,watch:o,setValue:c,reset:d,control:m,formState:{errors:u,isDirty:p}}=en(),{userRole:h,currentDoctorId:g,isAddonActive:x,defaultClinicId:v}=ut(),y=Ve(),[b,k]=f.useState({clinics:[],doctors:[],patients:[],loadingClinics:!0,loadingDoctors:!1,loadingPatients:!1,clinicError:null,doctorError:null,patientError:null,initialLoadComplete:!1}),[w,S]=f.useState(!1),j=o("clinic"),T=f.useRef(t),N=f.useRef(!0),_=f.useRef(null),A=x("kiviPro"),P=Xn();bk();const E=t?.id,{data:M}=Sy("patient_encounter_module",E,{enabled:!!E}),R=f.useCallback(async({page:le,per_page:I,search:ee})=>{try{const K={dataType:"clinicList",page:le,per_page:I,search:ee};return await y.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:0})}catch(K){return console.error("Error loading clinics:",K),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),O=f.useCallback(async({page:le,per_page:I,search:ee,clinic_ids:K})=>{try{const ne={dataType:"staticData",staticDataType:"doctors",clinic_ids:K,page:le,per_page:I,search:ee};return await y.fetchQuery({queryKey:pt.list(ne),queryFn:()=>Dt.getStaticData(ne),staleTime:0})}catch(ne){return console.error("Error loading doctors:",ne),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),L=f.useCallback(async({page:le,per_page:I,search:ee,clinic_ids:K})=>{try{const ne={dataType:"staticData",staticDataType:"patients",clinic_ids:K,page:le,per_page:I,search:ee};return await y.fetchQuery({queryKey:pt.list(ne),queryFn:()=>Dt.getStaticData(ne),staleTime:0})}catch(ne){return console.error("Error loading patients:",ne),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),q=f.useMemo(()=>new Date().toISOString().slice(0,10),[]),Q=le=>le!=null?String(le):"",V=(le,I=!1)=>{if(I&&le){if(typeof le=="string"&&le.length>=10){const D=le.substring(0,10);if(/^\d{4}-\d{2}-\d{2}$/.test(D))return D}const ee=new Date(le);if(isNaN(ee.getTime()))return q;const K=ee.getFullYear(),ne=String(ee.getMonth()+1).padStart(2,"0"),oe=String(ee.getDate()).padStart(2,"0");return`${K}-${ne}-${oe}`}return q},se=!!(t?.id||t?.encounterDate||t?.clinic||t?.doctor||t?.patient),G=f.useCallback(async()=>{k(le=>({...le,loadingClinics:!0,clinicError:null}));try{const le=await Dt.getClinics(),I=le.data||le||[];if(k(ee=>({...ee,clinics:I,loadingClinics:!1})),T.current?.clinic&&N.current){const ee=Q(T.current.clinic);I.some(ne=>Q(ne.id)===ee||Q(ne.ID)===ee||Q(ne.slug)===ee||Q(ne.name)===ee)&&c("clinic",ee,{shouldDirty:!1})}}catch(le){k(I=>({...I,clinicError:le.message||"Failed to fetch clinics",loadingClinics:!1}))}},[]),ge=f.useCallback(async le=>{if(!le){k(I=>({...I,doctors:[]}));return}k(I=>({...I,loadingDoctors:!0,doctorError:null}));try{const I=await Dt.getDoctors(le),ee=I.data||I||[];if(k(K=>({...K,doctors:ee,loadingDoctors:!1})),T.current?.doctor&&N.current){const K=Q(T.current.doctor);ee.some(oe=>Q(oe.id)===K||Q(oe.ID)===K||Q(oe.slug)===K||Q(oe.name)===K)&&c("doctor",K,{shouldDirty:!1})}}catch(I){k(ee=>({...ee,doctorError:I.message||"Failed to fetch doctors",doctors:[],loadingDoctors:!1}))}},[]),ie=f.useCallback(async()=>{k(le=>({...le,loadingPatients:!0,patientError:null}));try{const le=ol(),I=await Dt.getUsersByRole(le),ee=I.data||I||[];if(k(K=>({...K,patients:ee,loadingPatients:!1})),T.current?.patient&&N.current){const K=Q(T.current.patient);ee.some(oe=>Q(oe.id)===K||Q(oe.ID)===K||Q(oe.slug)===K||Q(oe.name)===K)&&c("patient",K,{shouldDirty:!1})}}catch(le){k(I=>({...I,patientError:le.message||"Failed to fetch patients",patients:[],loadingPatients:!1}))}},[]);f.useEffect(()=>{(async()=>{const I=t?.id||"new_session";if(_.current===I)return;T.current=t;const ee={encounterDate:V(t?.encounterDate,se),clinic:t?.clinic?{value:Q(t?.clinic),label:t?.clinicName||Q(t?.clinic)}:(!A||P)&&v?{value:Q(v),label:Q(v)}:null,doctor:h==="kiviCare_doctor"?g:t?.doctor?{value:Q(t?.doctor),label:t?.doctorName||Q(t?.doctor)}:null,patient:t?.patient?{value:Q(t?.patient),label:t?.patientName||Q(t?.patient)}:null,description:t?.description||""};d(ee),await Promise.all([G(),ie()]),t?.clinic&&await ge(t?.clinic),t?.clinic&&c("clinic",{value:Q(t?.clinic),label:t?.clinicName||Q(t?.clinic)},{shouldDirty:!1}),t?.doctor&&h!=="kiviCare_doctor"&&c("doctor",{value:Q(t?.doctor),label:t?.doctorName||Q(t?.doctor)},{shouldDirty:!1}),t?.patient&&c("patient",{value:Q(t?.patient),label:t?.patientName||Q(t?.patient)},{shouldDirty:!1}),k(K=>({...K,initialLoadComplete:!0})),_.current=I,N.current=!1})()},[t,d,G,ge,ie,h,g,A,v,se]),f.useEffect(()=>{b.initialLoadComplete&&j&&!N.current&&ge(j)},[j,b.initialLoadComplete,ge]),f.useEffect(()=>{E&&M&&c&&Object.keys(M).forEach(le=>{c(`custom_field_${le}`,M[le])})},[E,M,c]);const W=f.useCallback(async le=>{if(!(s||w)){S(!0);try{le.clinic=le.clinic?.value??le.clinic,le.doctor=le.doctor?.value??le.doctor,le.patient=le.patient?.value??le.patient,h==="kiviCare_doctor"&&(le.doctor=g);const I={};Object.keys(le).forEach(ee=>{if(ee.startsWith("custom_field_")){const K=ee.replace("custom_field_","");I[K]=le[ee],delete le[ee]}}),le.customFieldData=I,await new Promise(ee=>setTimeout(ee,1e3)),await e(le)}catch(I){console.error("Form submission error:",I)}finally{S(!1)}}},[e,s,h,g,w]),X=f.useCallback(()=>{n()},[n]),J=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:v},[A,v,o("clinic")]),ue=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:v},[A,v,o("clinic")]);return i.jsxs("form",{onSubmit:l(W),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Encounter Date","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx(Ne,{name:"encounterDate",control:m,rules:{required:r("Encounter date is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(Un,{...le,value:se?le.value?Zn(le.value):"":le.value?Zn(le.value):Zn(q),className:`form-control ${u.encounterDate?"is-invalid":""}`,options:{dateFormat:xi(window.kc_frontend.date_format),allowInput:!0,locale:Wn()},onChange:I=>{if(I&&I[0]){const ee=I[0],K=ee.getFullYear(),ne=String(ee.getMonth()+1).padStart(2,"0"),oe=String(ee.getDate()).padStart(2,"0");le.onChange(`${K}-${ne}-${oe}`)}else le.onChange("")}})}),u.encounterDate&&i.jsx("div",{className:"invalid-feedback",children:u.encounterDate.message}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})]})}),A&&i.jsx("div",{className:`col-lg-3 col-sm-6 ${P?"d-none":""}`,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:m,rules:{required:r("Clinic is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(dn,{id:"clinic",loadOptions:R,value:le.value,onChange:I=>{le.onChange(I),c("doctor",null),c("patient",null)},placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{}})}),u.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:u.clinic.message})]})}),h!=="kiviCare_doctor"&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"doctor",control:m,rules:{required:r("Doctor is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(dn,{id:"doctor",loadOptions:O,value:le.value,onChange:I=>{le.onChange(I)},placeholder:r("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic"),dependencies:J},A?`doctor-${o("clinic")?.value}`:"doctor-lite")}),u.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:u.doctor.message})]})})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Patient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"patient",control:m,rules:{required:r("Patient is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(i.Fragment,{children:i.jsx(dn,{id:"patient",loadOptions:L,value:le.value,onChange:I=>{le.onChange(I)},placeholder:r("Select Patient","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic")||se,dependencies:ue},A?`patient-${o("clinic")?.value}`:"patient-lite")})}),u.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:u.patient.message})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",placeholder:r("Write description","kivicare-clinic-management-system"),...a("description")})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:X,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!p||w,children:w?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})]})]})});function fC({isEditing:t=!1,...e}){const n=hn(),{mutate:s,isLoading:a}=BJ(),{id:l}=Gt(),o=bk(),c=h=>{const g=h.customFieldData||{};delete h.customFieldData,s({id:t?l:null,data:h,isEdit:t},{onSuccess:async x=>{const v=x?.data?.id||l;if(Object.keys(g).length>0&&v)try{await o.mutateAsync({moduleType:"patient_encounter_module",moduleId:v,fieldsData:g})}catch(y){console.error("Error saving custom field data:",y)}Te.success(r("Encounter saved successfully!","kivicare-clinic-management-system")),setTimeout(()=>{n(`/encounter/dashboard/${v}/clinical-details`)},1600)},onError:x=>{console.error("Error:",x)}})},{data:d,isLoading:m,error:u}=t&&l?Nk(l):{data:null,isLoading:!1,error:null};ze.useEffect(()=>{u&&(u?.response?.status===403||u?.status===403)&&n("/403")},[u,n]);const p=f.useMemo(()=>{if(t&&d){const h=d.data||d;if(h)return{id:l,encounterDate:h.encounterDate,clinic:h.clinicId,clinicName:h.clinicName,doctor:h.doctorId,doctorName:h.doctorName,patient:h.patientId,patientName:h.patientName,description:h.description,status:h.status}}return{}},[t,d,l]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:t?r("Edit Encounter","kivicare-clinic-management-system"):r("Add Encounter","kivicare-clinic-management-system")})})}),i.jsx(Kee,{formData:p,onSubmit:c,onCancel:()=>n(-1),isSubmitting:a})]})}const Gee=()=>i.jsxs(gt,{children:[i.jsx(C,{width:"100px",height:"14px",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"150px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"100px",height:"14px"}),i.jsx(C,{width:"100px",height:"14px"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(C,{width:"80px",height:"14px"}),i.jsx(C,{width:"40px",height:"14px"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(C,{width:"100px",height:"14px"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"120px"})]})]}),Yee=({canEditEncounter:t,templateId:e,encounterId:n})=>{const{isAddonActive:s}=ut(),a=Ve(),l=s("kiviPro");if(!l&&!t)return null;const c=(l?iP():{data:{data:{list:[]}}})?.data?.data?.list??[],d=c.map(x=>({value:x.id,label:x.name})),[m,u]=f.useState(d.find(x=>x.value==e)),p=WJ();f.useEffect(()=>{if(c.length>0){const x=d.find(v=>v.value==e);u(x||null)}},[e,c]);const h=async x=>{if(!x||!n){u(x);return}try{await p.mutateAsync({templateId:x.value,encounterId:n}),u(x),Te.success(r("Template applied to encounter successfully!","kivicare-clinic-management-system"))}catch(v){console.error("Error applying template:",v),Te.error(r("Failed to apply template to encounter.","kivicare-clinic-management-system")),u(d.find(y=>y.value==e)||null)}},g=f.useCallback(async({page:x,per_page:v,search:y})=>{try{const b={page:x,per_page:v,search:y},k=await a.fetchQuery({queryKey:["encounter-templates",b],queryFn:()=>uo.getTemplates(b),staleTime:0});return{data:k.data.list.map(j=>({value:j.id,label:j.name})),pagination:{total:k.data.total_rows,per_page:k.data.per_page,current_page:k.data.page,total_pages:k.data.total_pages,has_more:k.data.has_more}}}catch(b){return console.error("Error loading clinics:",b),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[a]);return i.jsxs("div",{className:"mt-5 pt-2 position-relative",children:[!l&&i.jsx(di,{link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("h6",{children:r("Encounter Template","kivicare-clinic-management-system")}),i.jsx(al,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Select Encounter Template","kivicare-clinic-management-system")}),i.jsx(dn,{id:"encounter-template",loadOptions:g,value:m,onChange:h,placeholder:r("Select Encounter Template","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:p.isPending,dependencies:{}})]})})]})},Qee=()=>{const{id:t}=Gt(),e=hn(),n=Kn(),s=Ve(),a=Yi(),l=KJ(),{encounterData:o,isEncounterLoading:c,encounterError:d,customForms:m,canEditEncounter:u,canUpdateEncounter:p,showEditBillModal:h,showAddServiceItemForm:g,editFormData:x,setEditFormData:v,setShowAddServiceItemForm:y,handleOpenEditBillModal:b,handleCloseEditBillModal:k,billData:w,encounterStatus:S,patientInfo:j,clinicInfo:T,isAddonActive:N,customFields:_,customFieldData:A}=nf(),{module_config:P}=ut(),E=nP(),M=N("kiviPro"),R=()=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This will close the encounter directly without generating an invoice.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, close it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(V=>{V.isConfirmed&&E.mutate({ids:[t],status:"0"},{onSuccess:()=>{At.fire({title:r("Closed!","kivicare-clinic-management-system"),text:r("The encounter has been closed successfully.","kivicare-clinic-management-system"),icon:"success"}),s.invalidateQueries({queryKey:["encounter",t]})},onError:se=>{At.fire({title:r("Error!","kivicare-clinic-management-system"),text:se.message||r("Failed to close the encounter.","kivicare-clinic-management-system"),icon:"error"})}})})},O=()=>{(P.billing??"1")==="1"?b():R()},L=()=>{const V=n.pathname;if(V.includes("/body-chart"))return"body-chart";if(V.includes("/clinical-details"))return"clinical-details";for(const se of m)if(V.includes(`/custom-form-${se.id}`))return`custom-form-${se.id}`;return"clinical-details"},q=V=>{V==="clinical-details"?e("clinical-details"):V==="body-chart"?e("body-chart"):V.startsWith("custom-form-")?e(`${V}`):e("clinical-details")};f.useEffect(()=>{n.pathname===`/encounter/dashboard/${t}`&&e("clinical-details",{replace:!0})},[n.pathname,t,e]);const Q=()=>{l.mutate(t,{onSuccess:V=>{const se=new Blob([V],{type:"application/pdf"}),G=URL.createObjectURL(se);window.open(G,"_blank"),setTimeout(()=>URL.revokeObjectURL(G),100)},onError:V=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:V?.response?.data?.message||V?.message||r("Failed to generate encounter PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:" position-sticky top-0",children:[i.jsx("h6",{className:"mb-2",children:r("Encounter Details","kivicare-clinic-management-system")}),c&&i.jsx(Gee,{}),d&&!c&&i.jsx(al,{className:"border-danger",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("i",{className:"ph ph-warning-circle text-danger",style:{fontSize:"2rem"}})}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"text-danger mb-1",children:r("Failed to Load Encounter","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-2 font-size-14",children:d?.message||r("Unable to load encounter details. Please try again.","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>window.location.reload(),children:r("Retry","kivicare-clinic-management-system")})]})]})}),!c&&!d&&!o&&i.jsx(al,{className:"text-center py-5",children:i.jsxs("div",{className:"d-flex flex-column align-items-center gap-3",children:[i.jsx("i",{className:"ph ph-file-x text-muted",style:{fontSize:"3rem"}}),i.jsxs("div",{children:[i.jsx("h6",{className:"mb-1",children:r("No Encounter Found","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0 font-size-14",children:r("The requested encounter could not be found.","kivicare-clinic-management-system")})]})]})}),!c&&!d&&o&&i.jsx(i.Fragment,{children:i.jsxs(al,{children:[i.jsx("h6",{className:"font-size-14 mb-3",children:r("About Patient","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-md-3 gap-2 flex-nowrap",children:[i.jsx(Mc,{src:j.profileImage,alt:j.name||r("Patient","kivicare-clinic-management-system"),text:!j.profileImage&&j.name?j.name.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:j.name}),i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope-simple"}),i.jsx("a",{href:`mailto:${j.email}`,className:"text-muted line-anywhere lh-1",children:j.email})]}),j.phone&&i.jsx("div",{className:"mt-1",children:i.jsx("span",{className:"font-size-14 text-muted",children:j.phone})})]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Encounter Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:o.encounterDate||r("Not specified","kivicare-clinic-management-system")})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Address","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.address||"-"})]})}),j.age&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Age","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"font-size-14 fw-normal mb-0",children:[j.age," ",r("years","kivicare-clinic-management-system")]})]})}),j.gender&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Gender","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.gender})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx("h6",{className:"mb-0",children:r("About Clinic","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex gap-3 flex-wrap",children:[i.jsx(Mc,{src:T.profileImage,alt:T.name||r("Clinic","kivicare-clinic-management-system"),text:!T.profileImage&&T.name?T.name.charAt(0).toUpperCase():"C",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:T.name}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("span",{className:"text-heading",children:i.jsx("i",{className:"ph ph-stethoscope"})}),i.jsx("span",{className:"font-size-14",children:T.doctorName})]}),T.address&&i.jsx("div",{className:"mt-1",children:i.jsxs("span",{className:"font-size-14 text-muted",children:[i.jsx("i",{className:"ph ph-map-pin me-1"}),T.address]})})]})]}),T.description&&i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"font-size-14 mb-2",children:r("Description","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 font-size-14 text-muted",children:T.description})]}),S.isClosed&&i.jsx("div",{className:"mt-3 pt-3 border-top",children:i.jsxs("h6",{className:"text-danger mb-0",children:[i.jsx("span",{className:"fw-bold",children:r("Note:","kivicare-clinic-management-system")})," ",i.jsx("i",{children:r("This encounter is closed","kivicare-clinic-management-system")})]})})]})]})}),p&&i.jsx(Yee,{canEditEncounter:u,templateId:o.templateId,encounterId:o.id}),((A&&Object.keys(A)?.length)>0||o?.appointmentReport?.length>0)&&i.jsx(i.Fragment,{children:i.jsxs(al,{className:"mt-4",children:[i.jsx("h5",{className:"fw-semibold mb-3",children:r("Patient extra details","kivicare-clinic-management-system")}),o?.appointmentReport?.length>0&&i.jsxs("div",{className:"kc-uploaded-files border-top pt-3 mt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:r("Medical Report","kivicare-clinic-management-system")}),o?.appointmentReport?.map((V,se)=>i.jsxs("div",{className:"kc-uploaded-file d-flex justify-content-between align-items-center",children:[i.jsx("span",{className:"kc-file-name",children:V.filename}),i.jsx("div",{className:"kc-file-actions",children:i.jsx("a",{className:"me-2",href:V.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})})]},se))]}),i.jsx(IJ,{fields:_,data:A,title:r("Other Information","kivicare-clinic-management-system")})]})})]})}),i.jsx("div",{className:"col-xl-9 col-lg-8",children:i.jsxs(Cg.Container,{activeKey:L(),onSelect:q,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap my-3",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:"clinical-details",children:r("Clinical Details","kivicare-clinic-management-system")})}),N("bodyChart")&&i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:"body-chart",children:r("Body Chart","kivicare-clinic-management-system")})}),m.map(V=>i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:`custom-form/${V.id}`,children:V.name?.text||V.name})},V.id))]}),i.jsxs("div",{className:"d-flex gap-2",children:[M&&i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"primary",onClick:Q,children:r("Print Encounter","kivicare-clinic-management-system")}),S.isClosed&&w?.id&&i.jsx(ht,{className:"btn btn-primary",to:`/encounter/billings/view/${w?.id}`,children:r("Bill Details","kivicare-clinic-management-system")})]}),S.canClose&&i.jsx(i.Fragment,{children:!a&&i.jsx(Xt,{variant:"secondary",onClick:O,children:r("Close Encounter","kivicare-clinic-management-system")})})]})]}),i.jsx(Ji,{})]})})]}),i.jsx(Mw,{show:h,onHide:k,editFormData:x,setEditFormData:v,showAddServiceItemForm:g,setShowAddServiceItemForm:y,discountValue:x?.discountValue||0,totalPayable:x?.totalPayable||0,editBillId:w?.id,appointmentId:o?.appointmentId,handleCloseEditModal:k,onBillSaved:()=>{s.invalidateQueries(["encounter",t]),s.invalidateQueries(["billByEncounterId",t])}})]})},Zee=()=>i.jsx(YJ,{children:i.jsx(Qee,{})}),Xee=()=>{const{isAddonActive:t,hasCapability:e}=ut(),n=t("kiviPro"),s=Ln(),[a,l]=f.useState(""),[o,c]=f.useState(1),[d,m]=f.useState(10),[u,p]=f.useState([]),h=Za(a,500),g=n?iP({page:o,perPage:d,search:h,sort:u}):{data:{data:{list:[]}},isLoading:!1},x=g?.data?.data?.list??[],v=g?.isLoading??!1,y=g?.data?.data?.total_rows??0,b=g?.data?.data?.total_pages??1,{mutateAsync:k}=zJ(),{mutateAsync:w}=VJ(),{mutateAsync:S}=UJ(),j=()=>n?!0:(At.fire({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Encounter template management is only available in KiviCarePro.","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:r("OK","kivicare-clinic-management-system")}),!1),T=async(P=null)=>{if(!j())return;const E=!!P,{value:M,isConfirmed:R}=await At.fire({title:E?r("Edit Template","kivicare-clinic-management-system"):r("Add New Template","kivicare-clinic-management-system"),input:"text",inputLabel:r("Enter Template Name","kivicare-clinic-management-system"),inputPlaceholder:r("e.g. 'Dummy Encounter'","kivicare-clinic-management-system"),inputValue:P?.name||"",showCancelButton:!0,confirmButtonText:r("Save","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),reverseButtons:!0,customClass:{validationMessage:"text-danger fw-medium"},preConfirm:O=>O.trim()?O.trim():(At.showValidationMessage(r("Template name is required","kivicare-clinic-management-system")),!1)});if(R&&M)try{await k({id:P?.id,data:{name:M},isEdit:E}),Te.success(E?r("Template updated successfully.","kivicare-clinic-management-system"):r("Template created successfully.","kivicare-clinic-management-system"))}catch(O){const L=O?.response?.data?.message||O?.response?.data?.errors?.name?.[0]||r("Something went wrong. Please try again.","kivicare-clinic-management-system");Te.error(L)}},N=async P=>{if(!j())return;const{isConfirmed:E}=await At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),reverseButtons:!0});E&&(await w(P),Te.success(r("Template has been deleted.","kivicare-clinic-management-system")))},_=f.useMemo(()=>[s.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:P=>P.getValue()}),s.accessor("name",{header:()=>r("Template Name","kivicare-clinic-management-system"),headerClassName:"w-75",cell:P=>P.getValue()}),...e("encounters_template_edit")||e("encounters_template_view")||e("encounters_template_delete")?[s.display({id:"action",header:()=>r("Action","kivicare-clinic-management-system"),cell:P=>{const E=M=>R=>i.jsx(mt,{id:`tooltip-${P.cell.row.original.id}-${M}`,...R,children:M});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("encounters_template_edit")&&i.jsx(Ze,{placement:"top",overlay:E(r("Edit Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-success fs-5",onClick:M=>{M.preventDefault(),T(P.row.original)},children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),e("encounters_template_view")&&i.jsx(Ze,{placement:"top",overlay:E(r("Template Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter-template/dashboard/${P.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),e("encounters_template_delete")&&i.jsx(Ze,{placement:"top",overlay:E(r("Delete Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-danger fs-5",onClick:M=>{M.preventDefault(),N(P.row.original.id)},children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[n]),A=f.useMemo(()=>n?[{label:r("Delete","kivicare-clinic-management-system"),icon:i.jsx("i",{className:"ph ph-trash"}),action:async(P,E)=>{const M=P.map(O=>O.id),{isConfirmed:R}=await At.fire({title:r("Delete Templates","kivicare-clinic-management-system"),text:r("Are you sure you want to delete selected templates?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete","kivicare-clinic-management-system"),reverseButtons:!0});R&&(await S(M),Te.success(r("Templates have been deleted.","kivicare-clinic-management-system")),E())}}]:[],[n,S]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:r("All Encounter Template List","kivicare-clinic-management-system")})}),e("encounters_template_add")&&i.jsx("div",{className:"d-flex align-items-center flex-wrap gap-3",children:i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>T(),disabled:!n,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Template","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search templates","kivicare-clinic-management-system"),value:a,onChange:P=>n&&l(P.target.value),disabled:!n})]})})}),i.jsx(kn,{data:x,columns:_,currentPage:o,perPage:d,totalItems:y,lastPage:b,isLoading:v,enableSelection:n,onPageChange:c,onPerPageChange:P=>{m(P),c(1)},onSortingChange:p,bulkActions:A,moduleNamePlural:"encounter templates"}),!n&&i.jsx(di,{text:r("Encounter template management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},Jee=()=>{const{id:t}=Gt();return i.jsx(Ty,{patientId:t})},ete=({bill:t})=>{const{getPriceFormat:e}=ut(),[n,s]=f.useState(!0),a=Ln(),l=f.useMemo(()=>[a.accessor("sr",{id:"sr",header:()=>r("Sr. No","kivicare-clinic-management-system"),cell:c=>c.row.index+1,enableSorting:!1}),a.accessor("service_name",{id:"service_name",header:()=>r("Services","kivicare-clinic-management-system"),cell:c=>c.getValue(),enableSorting:!1}),a.accessor("discount",{id:"discount",header:()=>r("Discount","kivicare-clinic-management-system"),cell:c=>{const d=c.getValue();if((d==null||d===0)&&t.discount){const m=t.discount/(t.serviceItems?.length||1);return`${e(m)}`}return d!=null?`${e(d)}`:"0"},enableSorting:!1}),a.accessor("price",{id:"price",header:()=>r("Price","kivicare-clinic-management-system"),cell:c=>e(c.getValue()),enableSorting:!1}),a.accessor("total",{id:"total",header:()=>r("Total Amount","kivicare-clinic-management-system"),cell:c=>{const d=c.row.original,m=d.discount||(t.discount?t.discount/(t.serviceItems?.length||1):0),u=d.price*d.quantity-m;return e(u)},enableSorting:!1})],[]),o=f.useMemo(()=>{const c={};return(t.taxItems||[]).forEach(d=>{if(d.tax_name)if(c[d.tax_name])c[d.tax_name].count+=1,c[d.tax_name].totalAmount+=Number(d.tax_amount);else{let m=1;parseInt(d.tax_value)/parseInt(d.tax_amount)>1&&d.type==="fixed"&&(m=Math.ceil(parseInt(d.tax_value)/parseInt(d.tax_amount))),c[d.tax_name]={...d,count:m,totalAmount:Number(d.tax_amount)}}}),Object.values(c)},[t.taxItems]);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Invoice ID","kivicare-clinic-management-system"),": "]}),i.jsxs("span",{className:"fw-semibold text-primary",children:["#",t.invoiceId]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Date & Time","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:"fw-semibold text-heading",children:t.date||"-"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Payment Status","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:`text-${t?.status==="paid"?"success":"danger"} fw-semibold`,children:t?.status?.toUpperCase()})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Patient","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(cn,{profileUrl:t.patient?.patient_image_url,name:t.patient?.name,gender:t.patient?.gender,dob:t.patient?.dob,size:"sm"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Doctor","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(cn,{profileUrl:t.doctor?.doctor_image_url,name:t.doctor?.name,email:t.doctor?.email,phone:t.doctor?.phone,size:"sm"})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Clinic","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(cn,{profileUrl:t.clinic?.clinic_image_url,name:t.clinic?.name,email:t.clinic?.email,phone:t.clinic?.phone,address:t.clinic?.address,size:"sm"})})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx("h6",{children:r("Service","kivicare-clinic-management-system")}),i.jsx(kn,{data:t.serviceItems||[],columns:l,isLoading:!1,error:null,enableSelection:!1})]}),i.jsxs("div",{children:[i.jsx("h6",{children:r("Payment Details","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.subTotal)??"0.00"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.discount||0)})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>s(c=>!c),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${n?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsx("span",{className:"text-danger h6 m-0 ms-1",children:e(t.totalTax)??"0.00"})]})]}),n&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),o.length===0&&i.jsx("div",{className:"text-muted",children:r("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:o.map((c,d)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[c.tax_name,c.count>1?` x${c.count}`:"",c.rate?` (${c.rate}%)`:""]}),i.jsx("h6",{className:"font-size-14 m-0 text-danger",children:e(c.totalAmount)})]},d))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-5",children:[i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")}),i.jsx("h5",{className:"m-0 text-primary",children:e(t.actual_amount)??"0.00"})]})]})})]})]})})},lP=()=>i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"160px",height:"2rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100px",height:"32px"}),i.jsx(st,{width:"80px",height:"32px"})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"90px",height:"0.875rem"}),i.jsx(C,{width:"120px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(C,{width:"110px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx(C,{width:"60px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"100px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"160px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"70px",height:"1rem"})})]})]})]})})]}),i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"70px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx(C,{width:"70px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(C,{width:"30px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx(C,{width:"15px",height:"15px",className:"me-1"}),i.jsx(C,{width:"70px",height:"1.125rem"})]})]}),i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(C,{width:"120px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx(C,{width:"90px",height:"1.125rem"}),i.jsx(C,{width:"80px",height:"1.25rem"})]})]})})]})]})})]}),oP=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{id:n}=Gt(),{data:s,isLoading:a}=Pw(n,{enabled:e}),l=s?.data||{},o=nV(),c=iV(),d=()=>{o.mutate(n,{onSuccess:u=>{const p=new Blob([u],{type:"application/pdf"}),h=URL.createObjectURL(p);window.open(h,"_blank")},onError:u=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||r("Failed to generate bill PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},m=()=>{c.mutate(n,{onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Bill PDF sent to patient email successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:u=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||r("Failed to send bill email.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};return a?i.jsx(lP,{}):i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h3",{className:"mb-0",children:r("Billing Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary btn-sm",onClick:d,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-printer me-1"}),r("Print Bill","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:m,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-envelope me-1"}),r("Email","kivicare-clinic-management-system")]})]})]}),!a&&i.jsx(ete,{bill:l}),!e&&i.jsx(di,{text:r("Billing module is KiviCare Pro feature.","kivicare-clinic-management-system")})]})},tte=()=>{const{id:t}=Gt(),{data:e,isLoading:n}=MA(t),s=e?.data||{};return i.jsx("div",{className:"billing-details",children:!n&&i.jsx(oP,{bill:s})})},Do={getBodyCharts:(t={})=>ve({endpoint:"body-chart",method:"GET",data:t}),getBodyChartConfig:()=>ve({endpoint:"body-chart/config",method:"GET"}),saveBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"POST",data:t}),updateBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"PUT",data:t}),saveBodyChart:t=>ve({endpoint:"body-chart",method:"POST",data:t}),getBodyChart:(t,e)=>ve({endpoint:"body-chart/get",method:"GET",data:{body_chart_id:t,encounter_id:e}}),getBodyChartEdit:(t={})=>ve({endpoint:"body-chart/edit",method:"GET",data:t}),deleteBodyChart:(t,e)=>ve({endpoint:"body-chart/delete",method:"POST",data:{body_chart_id:t,encounter_id:e}}),emailBodyChart:(t,e)=>ve({endpoint:"body-chart/email",method:"POST",data:{body_chart_id:t,...e}}),bulkDeleteBodyCharts:t=>ve({endpoint:"body-chart/bulk-delete",method:"POST",data:{ids:t}})},ki={all:["bodyCharts"],lists:()=>[...ki.all,"list"],list:t=>[...ki.lists(),{filters:t}],details:()=>[...ki.all,"detail"],detail:t=>[...ki.details(),t],config:()=>[...ki.all,"config"],edit:()=>[...ki.all,"edit"],editData:t=>[...ki.edit(),t]},nte=(t={},e={})=>{const{sort:n,sorting:s,...a}=t;return ft({queryKey:ki.list(a),queryFn:()=>Do.getBodyCharts(t),enabled:!!t.encounter_id,...e})},ite=(t={})=>ft({queryKey:ki.config(),queryFn:()=>Do.getBodyChartConfig(),staleTime:300*1e3,...t}),gpe=({chartId:t,encounterId:e},n={})=>ft({queryKey:ki.detail(t),queryFn:()=>Do.getBodyChart(t,e),enabled:!!t&&!!e,...n}),ste=(t={})=>{const e=Ve();return Le({mutationFn:n=>Do.saveBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:ki.config()}),e.setQueryData(ki.config(),n)},...t})},ate=(t={})=>{const e=Ve();return Le({mutationFn:n=>Do.updateBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:ki.config()}),e.setQueryData(ki.config(),n)},...t})},fpe=(t={})=>{const e=Ve();return Le({mutationFn:n=>Do.saveBodyChart(n),onSuccess:(n,s)=>{s.encounter_id&&e.invalidateQueries({queryKey:ki.lists(),predicate:a=>a.queryKey[2]?.filters?.encounter_id===s.encounter_id})},...t})},rte=(t={})=>{const e=Ve();return Le({mutationFn:n=>Do.deleteBodyChart(n.body_chart_id,n.encounter_id),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ki.lists()}),e.removeQueries({queryKey:ki.detail(s.body_chart_id)})},...t})},lte=()=>{const{id:t}=Gt(),{encounterData:e}=nf(),n=Yi(),s=hn(),[a,l]=f.useState(1),[o,c]=f.useState(10),[d,m]=f.useState([]),[u,p]=f.useState(!1),h=f.useRef(null),{data:g,isLoading:x,error:v}=nte({encounter_id:t,page:a,perPage:o}),y=f.useMemo(()=>{if(!g?.data?.data)return[];let O=[...g.data.data];if(d.length>0){const L=d[0];O.sort((q,Q)=>{const V=q[L.id],se=Q[L.id];if(V==null&&se==null)return 0;if(V==null)return L.desc?1:-1;if(se==null)return L.desc?-1:1;if(typeof V=="string"&&typeof se=="string"){const G=V.localeCompare(se);return L.desc?-G:G}return typeof V=="number"&&typeof se=="number"?L.desc?se-V:V-se:V<se?L.desc?1:-1:V>se?L.desc?-1:1:0})}return O},[g?.data?.data,d]),b=rte({onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Body chart deleted successfully","kivicare-clinic-management-system"),icon:"success",timer:2e3})},onError:O=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:O.message||r("Failed to delete body chart","kivicare-clinic-management-system"),icon:"error"})}}),k=O=>{l(O)},w=O=>{c(O),l(1)},S=O=>{m(O)},j=Ln(),T=f.useMemo(()=>[j.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:O=>O.getValue(),enableSorting:!0,size:80}),j.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:O=>O.getValue()||"-",enableSorting:!0,size:200}),j.accessor("chart_image",{header:()=>r("Image","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const L=O.getValue();return L?i.jsx("div",{className:"d-flex align-items-center",children:i.jsx("img",{src:L,alt:O.row.original.name||"Body Chart",className:"rounded",style:{width:"60px",height:"60px",objectFit:"cover",cursor:"pointer"},onClick:()=>P(L)})}):i.jsx("span",{className:"text-muted",children:"-"})},size:100}),j.accessor("description",{header:()=>r("Description","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const L=O.getValue();return L&&L.trim()!==""?i.jsx("span",{title:L,children:L.length>50?`${L.substring(0,50)}...`:L}):"-"},size:250}),j.accessor("last_update_user",{header:()=>r("Last Updated By","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>O.getValue()||"-",size:150}),j.accessor("updatedAt",{header:()=>r("Updated At","kivicare-clinic-management-system"),cell:O=>O.getValue(),size:120,enableSorting:!1}),j.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),cell:O=>i.jsxs("div",{className:"d-flex gap-2",children:[Number(e?.status)===1&&!n&&i.jsx(Xt,{variant:"link",onClick:()=>M(O.row.original.id),title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple text-primary"})}),i.jsx(Xt,{variant:"link",onClick:()=>P(O.row.original.chart_image),title:r("View","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye text-info"})}),i.jsx(Xt,{variant:"link",onClick:()=>E(O.row.original.chart_image,O.row.original.name),title:r("Download","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-download text-success"})}),Number(e?.status)===1&&!n&&i.jsx(Xt,{variant:"link",onClick:()=>R(O.row.original.id),title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash text-danger"})})]}),size:120,enableSorting:!1})],[e,n]),N=Number(e?.status)===1&&!n?[{label:r("Delete","kivicare-clinic-management-system"),action:O=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r(`Delete ${O.length} selected body chart?`,"kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete them!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(L=>{L.isConfirmed&&O.forEach(q=>{b.mutate({body_chart_id:q.id,encounter_id:t})})})}}]:[],_=()=>{s(`/encounter/dashboard/${t}/body-chart/create`)},A=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"text-center  py-4 text-muted border-start border-end",children:i.jsxs("div",{className:"py-4",children:[i.jsx("i",{className:"ph ph-chart-bar-horizontal fs-1 text-muted mb-3 d-block"}),i.jsx("h6",{children:r("No body charts found","kivicare-clinic-management-system")}),!n&&i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-muted mb-3",children:Number(e?.status)===1?r("Start by creating your first body chart for this encounter","kivicare-clinic-management-system"):r("No body charts available for this closed encounter","kivicare-clinic-management-system")})})]})})}),P=O=>{window.open(O,"_blank")},E=(O,L)=>{const q=document.createElement("a");q.href=O,q.download=L||"body-chart",q.click()},M=O=>{s(`/encounter/dashboard/${t}/body-chart/edit/${O}`)},R=O=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This action cannot be undone!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(L=>{L.isConfirmed&&b.mutate({body_chart_id:O,encounter_id:t})})};return i.jsx("div",{className:"body-chart-list-page",children:i.jsx(St,{children:i.jsx(St.Body,{children:i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!u,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:h,children:i.jsxs("div",{ref:h,className:"position-absolute top-0 w-100 d-flex justify-content-between align-items-center mb-4",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-1",children:r("Body Charts","kivicare-clinic-management-system")})}),!n&&Number(e?.status)===1&&i.jsx("div",{className:"d-flex gap-2",children:i.jsxs(Xt,{variant:"secondary",onClick:_,children:[i.jsx("i",{className:"ph ph-plus-circle me-2"}),r("Add New","kivicare-clinic-management-system")]})})]})}),i.jsx(kn,{data:y,columns:T,isLoading:x,error:v,currentPage:a,perPage:o,totalItems:g?.data?.total||0,lastPage:Math.ceil((g?.data?.total||0)/o),onPageChange:k,onPerPageChange:w,onSortingChange:S,enableSelection:Number(e?.status)===1&&!n,bulkActions:N,bulkActionsButtonText:r("Bulk Actions","kivicare-clinic-management-system"),moduleNamePlural:"body charts",renderEmptyState:A,bordered:!0,responsive:!0,manualPagination:!0,manualFiltering:!0,manualSorting:!1,onBulkActionsVisibilityChange:p})]})})})})},ote=()=>{const{id:t,formId:e}=Gt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:l}=ut(),o=s||"patient",[c,d]=f.useState(!1),m=Ve(),u=f.useRef({}),{data:p,isLoading:h}=Nk(t),g=p?.data||{},{data:x}=ad({module_type:"patient_encounter_module",status:1,module_id:t},{enabled:l("kiviPro")}),y=(x?.data?.forms||[]).find(w=>w.id.toString()===e),b=RJ({onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Form data saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),m.invalidateQueries(["custom-forms"])},onError:w=>{console.error("Error saving form data:",w),At.fire({title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save form data. Please try again.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}});f.useEffect(()=>{d(Number(g?.status)===1&&(Cr(o)||Jn(o)||Xn(o)||Li(o)&&g?.doctorId===a))},[g]);const k=async(w,S)=>{console.log("Saving form data:",{formId:w,formData:S,encounterId:t}),b.mutate({form_id:w,module_id:t,module_type:"patient_encounter_module",form_data:S})};return y?i.jsx("div",{className:"mt-4",children:i.jsx(St,{children:i.jsxs(Ha,{children:[i.jsx("div",{id:`custom-form-${y.id}`,children:i.jsx(Wa,{ref:w=>u.current[y.id]=w,fields:y.fields,data:y.form_data||{},readOnly:!c,formId:`form_${y.id}`})}),c&&i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsx(Xt,{variant:"primary",onClick:()=>{const w=u.current[y.id];if(w){const S=w.getFormData();k(y.id,S)}},disabled:b.isPending,children:b.isPending?r("Saving...","kivicare-clinic-management-system"):r("Save Form","kivicare-clinic-management-system")})})]})})}):i.jsx("div",{className:"mt-4",children:i.jsx(St,{children:i.jsx(Ha,{children:i.jsx("div",{className:"text-center",children:i.jsx("p",{children:r("Form not found","kivicare-clinic-management-system")})})})})})},vC=f.lazy(()=>Ir(()=>import("./BodyChartEditor-Bj-bXv94.js"),__vite__mapDeps([0,2]),import.meta.url)),cte=[Gn({path:"/encounter",title:r("Encounter List","kivicare-clinic-management-system"),outlet:hC,permissions:["patient_encounter_list"],meta:{description:r("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:Ty,title:r("All Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_list"],meta:{description:r("List of all encounters","kivicare-clinic-management-system"),breadcrumb:r("All Encounters","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:fC,props:{isEditing:!1,mode:"add"},title:r("Add Encounter","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_add"],skeleton:pC,meta:{description:r("Add new encounter","kivicare-clinic-management-system"),breadcrumb:r("Add Encounter","kivicare-clinic-management-system")}}),We({path:"edit/:id",component:fC,props:{isEditing:!0,mode:"edit"},title:r("Edit Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_edit"],skeleton:pC,meta:{description:r("Edit encounter","kivicare-clinic-management-system"),breadcrumb:r("Edit Encounter","kivicare-clinic-management-system")}}),We({path:"view/:id",component:Ty,title:r("All Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("View encounter","kivicare-clinic-management-system"),breadcrumb:r("View Encounter","kivicare-clinic-management-system")}}),Gn({path:"dashboard/:id",title:r("Encounters","kivicare-clinic-management-system"),outlet:Zee,permissions:["patient_encounter_view"],skeleton:ph,meta:{description:r("Encounter dashbord","kivicare-clinic-management-system"),breadcrumb:r("Encounter dashbord","kivicare-clinic-management-system")},children:[We({path:"clinical-details",component:sP,title:r("Clinical Details","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"clinical-details"}),meta:{description:r("Clinical details of encounter","kivicare-clinic-management-system"),breadcrumb:r("Clinical Details","kivicare-clinic-management-system")}}),We({path:"custom-form/:formId",component:ote,title:r("Custom Form","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"custom-form"}),meta:{description:r("Custom form of encounter","kivicare-clinic-management-system"),breadcrumb:r("Custom Form","kivicare-clinic-management-system")}}),Gn({path:"body-chart",title:r("Body Charts","kivicare-clinic-management-system"),outlet:xee,meta:{description:r("Body chart management for encounter","kivicare-clinic-management-system"),breadcrumb:r("Body Charts","kivicare-clinic-management-system")},children:[We({path:"",component:lte,title:r("Body Chart List","kivicare-clinic-management-system"),skeleton:()=>i.jsx(ph,{view:"body-chart"}),index:!0,meta:{description:r("List of body charts for encounter","kivicare-clinic-management-system"),breadcrumb:r("List","kivicare-clinic-management-system")}}),We({path:"create",component:vC,props:{mode:"create"},title:r("Create Body Chart","kivicare-clinic-management-system"),meta:{description:r("Create new body chart","kivicare-clinic-management-system"),breadcrumb:r("Create","kivicare-clinic-management-system")},skeleton:yee}),We({path:"edit/:chartId",component:vC,props:{mode:"edit"},title:r("Edit Body Chart","kivicare-clinic-management-system"),meta:{description:r("Edit existing body chart","kivicare-clinic-management-system"),breadcrumb:r("Edit","kivicare-clinic-management-system")}})]})]}),We({path:"patient/:id",component:Jee,title:r("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:r("Patient Encounters","kivicare-clinic-management-system")}}),We({path:"billings/view/:id",component:tte,title:r("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:r("Patient Encounters","kivicare-clinic-management-system")}})]}),Gn({path:"/encounter-template",title:r("Encounter Template List","kivicare-clinic-management-system"),roles:["administrator","clinic_admin","doctor","receptionist"],outlet:hC,meta:{description:r("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:Xee,title:r("All Encounter Templates","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of all encounter templates","kivicare-clinic-management-system"),breadcrumb:r("All Encounter Templates","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:4,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"dashboard/:id",title:r("Encounters Dashboard","kivicare-clinic-management-system"),component:vee,meta:{description:r("Encounter template dashboard","kivicare-clinic-management-system"),breadcrumb:r("Encounter template dashboard","kivicare-clinic-management-system"),isEncounterTemplate:!0}})]})],dte=()=>{const t=Kn();return i.jsxs("div",{className:"clinics-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/clinic"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},Ay=()=>i.jsxs(i.Fragment,{children:[i.jsx(kl,{titleWidth:"120px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"85px"})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx(C,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"}),i.jsx(C,{width:"55px",height:"1rem"})]})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),mte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""}),n=D=>{if(D.length>0){const{id:$,desc:te}=D[0],ae={id:"id",name:"name",admin:"clinic_admin_name",contact:"telephone_no",status:"status"};e(Y=>({...Y,orderby:ae[$]||$,order:te?"desc":"asc",page:1}))}else e($=>({...$,orderby:"",order:"",page:1}))},[s,a]=f.useState(""),[l,o]=f.useState([]),c=Za(s,500),d=jee(),m=Nee(),u=Cee(),p=See(),h=_ee(),[g,x]=f.useState(!1),v=async D=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const $=new Date().toISOString().split("T")[0],te=Y=>{if(!Y)return"";try{const H=typeof Y=="string"?JSON.parse(Y):Y;return Array.isArray(H)?H.map(B=>B.label||"").filter(Boolean).join(", "):Y}catch{return Y}},ae=V.map(Y=>({id:Y.id,name:Y.name,email:Y.email,contact:Y.contact,clinic_admin_name:Y.clinic_admin_name,clinic_admin_email:Y.clinic_admin_email,specialty:te(Y.specialty),address:[Y.address,Y.city,Y.state,Y.postal_code,Y.country].filter(Boolean).join(", "),status:Y.status===1?"Active":"Inactive"}));switch(D){case"csv":ps(ae,`clinics-${$}.csv`);break;case"xls":gs(ae,`clinics-${$}.xls`);break;case"pdf":fs(ae,`clinics-${$}.pdf`,"Clinics List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch($){console.error("Export error:",$),rt({title:r("Error!","kivicare-clinic-management-system"),text:$.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},y=()=>v("csv"),b=()=>v("xls"),k=()=>{g||(x(!0),v("pdf"),setTimeout(()=>x(!1),2e3))};f.useEffect(()=>{e(D=>({...D,search:c,page:1}))},[c]),ze.useEffect(()=>{e(D=>({...D,search:c,page:1}))},[c]);const[w,S]=f.useState(!1),j=f.useRef(null),[T,N]=f.useState(!1),[_,A]=f.useState(!1),{isAddonActive:P,hasCapability:E}=ut(),M=P("kiviPro"),R=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([D,$])=>$!==""&&$!==null&&$!==void 0)),[t]),{data:O,isLoading:L,error:q,refetch:Q}=aP(R);ze.useEffect(()=>{O?.data?.clinics&&O.data.clinics.length>0&&O.data.clinics.forEach((D,$)=>{if(D.specialty&&typeof D.specialty=="string"&&D.specialty.startsWith("["))try{const te=JSON.parse(D.specialty)}catch{console.log(`Failed to parse specialty for clinic ${$+1}`)}})},[O]);const V=O?.data?.clinics||[],se=O?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},G=Ve(),ge=async({page:D,per_page:$,search:te})=>{try{const ae={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:D,per_page:$,search:te},Y=await G.fetchQuery({queryKey:pt.list(ae),queryFn:()=>Dt.getStaticData(ae),staleTime:300*1e3}),H=Y.data.map(B=>({value:B.id,label:B.label||B.name}));return o(B=>[...B,...H]),Y.data.map(B=>{let re="",de="";return typeof B=="string"?(re=B,de=B):typeof B=="object"&&B!==null&&(re=B.label||B.name||"",de=B.id??B.name??re),{value:de,label:re}})}catch(ae){return console.error("Error loading clinics:",ae),{data:[],pagination:{has_more:!1}}}},ie=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],W=Ln(),X=f.useMemo(()=>[W.accessor("id",{id:"id",enableSorting:!0,header:()=>r("ID","kivicare-clinic-management-system"),cell:D=>i.jsx("div",{className:"font-weight-medium",children:D.getValue()})}),W.accessor("name",{id:"name",enableSorting:!0,header:()=>r("Clinic","kivicare-clinic-management-system"),cell:D=>i.jsx(cn,{profileUrl:D.row.original.clinic_image_url,name:D.row.original.name,email:D.row.original.email||"",variant:"success",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")})}),W.accessor("admin",{id:"admin",header:()=>r("Clinic Admin","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(D,$)=>{const te=D.original.clinic_admin_name||"",ae=$.original.clinic_admin_name||"";return te.localeCompare(ae)},cell:D=>i.jsx(cn,{profileUrl:D.row.original.clinic_admin_image_url,name:D.row.original.clinic_admin_name,email:D.row.original.clinic_admin_email||"",variant:"success",size:"md",nameLabel:r("Clinic Name","kivicare-clinic-management-system")})}),W.accessor("contact",{id:"contact",enableSorting:!0,header:()=>r("Contact No","kivicare-clinic-management-system"),cell:D=>i.jsx("div",{children:i.jsx("span",{children:D.row.original.contact||""})})}),W.accessor("specialty",{id:"specialty",enableSorting:!1,header:()=>r("Specialization","kivicare-clinic-management-system"),cell:D=>{const $=D.row.original.specialty;let te=[];try{if(typeof $=="string")if($.startsWith("["))try{const ae=JSON.parse($);Array.isArray(ae)&&(te=ae.map(Y=>typeof Y=="object"&&Y!==null?{label:Y.label||""}:{label:Y}))}catch{te=[{label:$}]}else te=[{label:$}];else Array.isArray($)?te=$.map(ae=>typeof ae=="object"&&ae!==null?{label:ae.label||ae.name||""}:{label:ae}):typeof $=="object"&&$!==null&&($.label?te=[{label:$.label}]:$.name?te=[{label:$.name}]:te=[{label:JSON.stringify($)}])}catch(ae){console.error("Error processing specialty:",ae),te=[{label:String($||"")}]}return te=te.filter(ae=>ae.label),i.jsx("div",{children:te.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[te.slice(0,2).map((ae,Y)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:ae.label},Y)),te.length>2&&i.jsx(Ze,{placement:"top",overlay:ae=>i.jsx(mt,{id:`tooltip-specialization-${D.row.original.id}`,...ae,children:te.slice(2).map(Y=>Y.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",te.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),W.accessor("address",{id:"address",enableSorting:!1,header:()=>r("Clinic Address","kivicare-clinic-management-system"),cell:D=>{const $=D.row.original.address||"",te=D.row.original.city||"",ae=D.row.original.state||"",Y=D.row.original.country||"",H=D.row.original.postal_code||"",B=[$,te,ae,H,Y].filter(Boolean).join(", ");return i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"",children:B||""})})}}),...M?[W.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:D=>{const $=Number(D.getValue()),te=D.row.original,ae=()=>{const Y=$===1?0:1;wt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),te.name,Y===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(H=>{H.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),h.mutate({ids:[te.id],status:Y},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Clinic status has been updated successfully.","kivicare-clinic-management-system")})},onError:B=>{rt({title:r("Error","kivicare-clinic-management-system"),text:B.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return E("clinic_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`clinic-status-${te.id}`,checked:$===1,onChange:ae}),i.jsx("label",{className:"form-check-label",htmlFor:`clinic-status-${te.id}`,children:i.jsx("span",{className:`badge ${$===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:$===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${$===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:$===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}})]:[],...E("clinic_edit")||E("clinic_resend_credential")||E("clinic_delete")?[W.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:D=>{const $=te=>ae=>i.jsx(mt,{id:`tooltip-${D.cell.row.original.id}-${te}`,...ae,children:te});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("clinic_edit")&&i.jsx(Ze,{placement:"top",overlay:$(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/clinic/edit/${D.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),E("clinic_resend_credential")&&i.jsx(Ze,{placement:"top",overlay:$(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>J(D.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),E("clinic_delete")&&M&&i.jsx(Ze,{placement:"top",overlay:$(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ue(D.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[E]),J=D=>{wt({title:r("Resend Credential","kivicare-clinic-management-system"),text:r("Are you sure you want to resend the credential for this clinic?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then($=>{$.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),m.mutate(D,{onSuccess:te=>{Tt({text:te?.message||r("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:te=>{console.error("Resend credential error:",te);const ae=te?.response?.data?.message||te?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:ae})}}))})},ue=D=>{wt({title:r("Delete Clinic?","kivicare-clinic-management-system"),text:r("You're about to delete this clinic.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep clinic","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then($=>{$.isConfirmed&&(yt({title:r("Deleting Clinic...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected clinic.<br>This won't take long.","kivicare-clinic-management-system")}),d.mutate(D,{onSuccess:te=>{Tt({title:r("Clinic Deleted","kivicare-clinic-management-system"),text:te?.message||r("Clinic has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to clinics","kivicare-clinic-management-system")})},onError:te=>{console.error("Delete clinic error:",te);const ae=te?.response?.data?.message||te?.message||r("Failed to delete clinic. Please try again.","kivicare-clinic-management-system");rt({text:ae})}}))})},le=[{type:"number",name:"id",label:r("Clinic ID","kivicare-clinic-management-system"),placeholder:r("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r("eg Mount Health Care","kivicare-clinic-management-system")},{type:"paginatedSelect",name:"specialization",label:r("Specialization","kivicare-clinic-management-system"),placeholder:r("Select Specialization","kivicare-clinic-management-system"),options:l,optionLoader:ge,isSearchable:!0},{type:"text",name:"clinicAddress",label:r("Clinic Address","kivicare-clinic-management-system"),placeholder:r("eg 123 Wellness Way , HC 3456")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:ie,isSearchable:!1}],I=D=>{e($=>({...$,...D,page:1})),N(!1)},ee=()=>{const D={page:1,perPage:t.perPage,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""};e(D),o([]),N(!1)},K=f.useMemo(()=>["search","id","clinicName","specialization","clinicAddress","status"].some($=>{const te=t[$];return te!=null&&te!==""})||s!=="",[t,s]),ne=D=>{M?N(D):D===!0&&wt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},oe=()=>{Q()};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Clinics","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[E("clinic_add")&&i.jsxs(ht,{to:M?"/clinic/add":"#",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:D=>{M||wt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Clinic","kivicare-clinic-management-system")})]}),M&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>M?A(!0):wt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic import is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1}),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>ne(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:M?"kc-table-wrapper":"",children:[M&&i.jsx(i.Fragment,{children:i.jsx(Ci,{in:!w,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:j,children:i.jsxs("div",{ref:j,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(dn,{id:"specialties-filter",placeholder:r("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ge,value:l.find(D=>D.label===t.specialization)||null,onChange:D=>{M&&e($=>({...$,specialization:D?D.label:""}))},isDisabled:!M,dependencies:{},isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ie,onChange:D=>M&&e($=>({...$,status:D?D.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})},isDisabled:!M})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:s,onChange:D=>a(D.target.value),disabled:!M})]})}),E("clinic_export")&&M&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:y,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:b,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:k,disabled:g,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})})}),i.jsx(kn,{data:V,columns:X,isLoading:L,error:q,currentPage:se.currentPage,perPage:se.perPage,totalItems:se.total,lastPage:se.lastPage,onPageChange:D=>M&&e($=>({...$,page:D})),onPerPageChange:D=>M&&e($=>({...$,perPage:D,page:1})),onSortingChange:n,manualSorting:!0,enableSelection:M,moduleNamePlural:"clinics",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(D,$)=>{const te=D.map(ae=>ae.id);wt({title:r("Delete Clinics?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${D.length} clinics</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep clinics","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ae=>{ae.isConfirmed&&(yt({title:r("Deleting Clinics...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected clinics.<br>This won't take long.","kivicare-clinic-management-system")}),u.mutate(te,{onSuccess:Y=>{Tt({title:r("Clinic Deleted","kivicare-clinic-management-system"),text:r(`${D.length} clinic${D.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to clinics","kivicare-clinic-management-system")}),$()},onError:Y=>{console.error("Bulk delete clinics error:",Y);const H=Y?.response?.data?.message||Y?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:H})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(D,$)=>{const te=D.map(ae=>ae.id);wt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected clinics?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(ae=>{ae.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),p.mutate(te,{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),$()},onError:Y=>{console.error("Bulk resend credentials error:",Y);const H=Y?.response?.data?.message||Y?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(D,$)=>{const te=D.map(ae=>ae.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected clinics to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ae=>{ae.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),h.mutate({ids:te,status:"1"},{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),$()},onError:Y=>{console.error("Bulk update status error:",Y);const H=Y?.response?.data?.message||Y?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(D,$)=>{const te=D.map(ae=>ae.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected clinics to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ae=>{ae.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),h.mutate({ids:te,status:"0"},{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),$()},onError:Y=>{console.error("Bulk update status error:",Y);const H=Y?.response?.data?.message||Y?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:H,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:D=>{S(D)}})]})]}),i.jsx(na,{show:T,onHide:()=>ne(!1),queryParams:t,onApplyFilters:M?I:()=>{},onResetFilters:M?ee:()=>{},title:r("Filters","kivicare-clinic-management-system"),fields:le,hasAppliedFilters:K}),i.jsx(Lr,{show:_,onHide:()=>A(!1),onReopenImport:()=>A(!0),onDataRefresh:oe,context:"clinics"})]})})},yl=f.forwardRef(({id:t="profile-image-upload",name:e="doctorImage",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:l,className:o="",disabled:c=!1,size:d=120,setValue:m,register:u,accept:p,allowFile:h=!1},g)=>{const[x,v]=f.useState(n),[y,b]=f.useState(s),[k,w]=f.useState(!1),[S,j]=f.useState(!1),T=f.useRef(null),N=f.useRef(null),_=!!x;f.useEffect(()=>{v(n||""),b(s||"")},[n,s]),f.useEffect(()=>{j(typeof window<"u"&&!!(window.wp&&window.wp.media))},[]),f.useEffect(()=>{if(u&&typeof u=="function"&&N.current)try{u(e)}catch{}},[u,e]);const A=async q=>{try{w(!0);const Q=window.kc_frontend?.rest_url,V=await ve({endpoint:`${Q}/wp/v2/media`,method:"POST",data:q,isFile:!0});if(!V||V.success===!1)throw new Error(V?.message||r("Failed to upload image","kivicare-clinic-management-system"));return L(V.source_url,V.id),a&&a({id:V.id,url:V.source_url,filename:V.title?.raw||"",type:V.media_type,subtype:V.mime_type,size:V.media_details?.filesize||0},V.id),V}catch(Q){throw console.error("Error uploading image:",Q),Q}finally{w(!1)}},P=q=>{if(!S)return;const Q=window.wp.media({title:r("Select or Upload Image","kivicare-clinic-management-system"),button:{text:r("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:h?"":"image"}});Q.on("select",function(){const V=Q.state().get("selection").first().toJSON();!h&&V.type!=="image"||L(V.url||V.source_url||"",V.id||"")}),Q.open()},E=q=>{q.preventDefault(),!(c||k)&&(S&&!h?P():T.current?.click())},M=async q=>{const Q=q.target.files[0];if(Q){if(!h&&!Q.type.startsWith("image/")){console.error("Please select an image file");return}try{const V=URL.createObjectURL(Q);v(V),b(""),await A(Q)}catch(V){console.error("Error handling file:",V),v(""),b(""),L("","")}}},R=()=>{if(v(""),b(""),T.current&&(T.current.value=""),L("",""),l&&l(),a)try{a({id:"",url:"",filename:"",type:"image",size:0},"")}catch{}},O=q=>{q.preventDefault(),q.stopPropagation(),!(c||k)&&R()};f.useImperativeHandle(g,()=>({clearImage:R}));const L=(q="",Q="")=>{if(v(q||""),b(Q||""),N.current)try{N.current.value=Q||"";try{N.current.dispatchEvent(new Event("input",{bubbles:!0})),N.current.dispatchEvent(new Event("change",{bubbles:!0}))}catch{}}catch{}if(typeof m=="function"&&e)try{m(e,q||""),m(`${e}Id`,Q||"")}catch{}if(typeof a=="function")try{a({id:Q||"",url:q||"",filename:"",type:"image",size:0},Q||"")}catch{}};return i.jsxs("div",{className:`profile-image-uploader bg-body rounded w-100 p-3 ${o}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,name:e?`${e}Id`:void 0,ref:N,readOnly:!0,value:y||""}),i.jsx("input",{type:"file",id:t,ref:T,onChange:M,accept:p||(h?void 0:"image/*"),disabled:k||c,className:"profile-image-input"}),i.jsxs("div",{className:`profile-image-container ${c?"disabled":""}`,style:{width:d,height:d,"--profile-size":`${d}px`},onClick:E,children:[_?i.jsx("img",{src:x,alt:"",className:"profile-image"}):i.jsx("div",{className:"profile-image-placeholder",children:i.jsx("i",{className:"ph ph-user",style:{fontSize:`${Math.round(d*.6)}px`,color:"#ccc"}})}),i.jsx("div",{className:"profile-image-overlay",children:k?i.jsx("div",{className:"profile-image-spinner",style:{width:d*.18,height:d*.18,borderWidth:Math.max(2,Math.round(d*.03))}}):i.jsx("i",{className:"ph ph-camera",style:{fontSize:`${Math.round(d*.3)}px`,color:"white"}})}),_&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"profile-image-cancel-icon",onClick:O,disabled:k||c,"aria-label":r("Remove image","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x",style:{fontSize:"14px",color:"white"}})})})]})]})});yl.displayName="ProfileImageUploader";function Dy({isEditing:t=!1,isProfile:e=!1,...n}){const{id:s}=Gt(),{currentuserID:a,defaultClinicId:l,isAddonActive:o,defaultCountryCode:c,showOtherGender:d,userRole:m}=ut(),{data:u}=_n(),p=hn(),h=o("kiviPro"),g=e?l:s,{data:x,isLoading:v,error:y}=bee(g,{enabled:(t||e)&&!!g}),b=x?.data,k=wee(),w=kee(),[S,j]=f.useState(!1),T=S||k.isPending||w.isPending||v,N=Vc.PhoneNumberUtil.getInstance(),_=I=>{try{return N.isValidNumber(N.parseAndKeepRawInput(I))}catch{return!1}},A=[{value:1,label:r("Active","kivicare-clinic-management-system")},{value:0,label:r("Inactive","kivicare-clinic-management-system")}],{register:P,handleSubmit:E,control:M,watch:R,setValue:O,formState:{errors:L},reset:q}=en({defaultValues:{clinicImage:"",clinicImageId:"",clinicName:"",clinicEmail:"",contactNumber:"",status:A[0],specialties:null,address:"",country:"",city:"",postalCode:"",adminImage:"",adminImageId:"",firstName:"",lastName:"",adminEmail:"",adminContactNumber:"",dob:"",gender:""}}),Q=f.useMemo(()=>u?.data?.kc_available_translations,[u]),{data:V,isLoading:se,refetch:G}=Va("specialization"),ge=Hg(),ie=I=>{if(I==null)return null;const ee=parseInt(I);return A.find(K=>K.value===ee)||null};if(f.useEffect(()=>{if(t&&b&&!v){O("clinicName",b.clinic_name||""),O("clinicEmail",b.clinic_email||""),setTimeout(()=>{O("contactNumber",b.clinic_contact||"")},0),O("address",b.address||""),O("city",b.city||""),O("country",b.country||""),O("postalCode",b.postal_code||"");const I=ie(b.status);O("status",I),O("specialties",b.specialties),b.clinic_image&&O("clinicImage",b.clinic_image),b.clinic_image_id&&O("clinicImageId",b.clinic_image_id),O("firstName",b.first_name||""),O("lastName",b.last_name||""),O("adminEmail",b.admin_email||""),setTimeout(()=>{O("adminContactNumber",b.admin_contact_number||"")},0),O("dob",b.dob||""),O("gender",b.gender||""),b.clinic_admin_image_url&&O("adminImage",b.clinic_admin_image_url),b.clinic_admin_image_id&&O("adminImageId",b.clinic_admin_image_id)}},[t,b,v,O]),t&&y)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:r("Error Loading Clinic Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:r("Unable to load clinic information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>p("/clinic"),children:r("Back to Clinics","kivicare-clinic-management-system")})]});const W=(I,ee)=>{O(I,ee.url||ee.image),O(`${I}Id`,ee.id||ee.imageId)},X=async I=>{j(!0);const ee={clinic_name:I.clinicName,clinic_email:I.clinicEmail,clinic_contact:I.contactNumber,status:I.status?parseInt(I.status.value):1,specialties:I.specialties,address:I.address,country:I.country,city:I.city,postal_code:I.postalCode,clinic_image:I.clinicImage,clinic_image_id:I.clinicImageId,admin_image:I.adminImage,admin_image_id:I.adminImageId,first_name:I.firstName,last_name:I.lastName,admin_email:I.adminEmail,admin_contact_number:I.adminContactNumber,dob:I.dob,gender:I.gender};try{if(t){let K=await w.mutateAsync({id:g,...ee});Te.success(K.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}else{let K=await k.mutateAsync(ee);Te.success(K.data.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}e&&p(-1),t&&m=="clinic_admin"&&p(-1),p("/clinic",{replace:!0})}catch(K){console.error("Error saving clinic:",K);const ne=K?.response?.data?.message||(t?r("Failed to update clinic","kivicare-clinic-management-system"):r("Failed to create clinic","kivicare-clinic-management-system"));Te.error(ne,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{j(!1)}},J=I=>{const ee=Object.keys(I)[0],K=document.getElementById(ee);K&&(K.scrollIntoView({behavior:"smooth",block:"center"}),K.focus())},le={...{clinicName:{required:r("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}},clinicEmail:{required:r("Clinic email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:ee=>ee?_(ee)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},specialties:{required:r("At least one specialty is required","kivicare-clinic-management-system"),validate:{notEmpty:ee=>ee&&ee.length>0||r("At least one specialty is required","kivicare-clinic-management-system")}},address:{required:r("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},country:{required:r("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}},city:{required:r("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{required:r("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:r("Invalid postal code format","kivicare-clinic-management-system")}}},firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},adminEmail:{required:r("Admin email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},adminContactNumber:{required:r("Admin contact number is required","kivicare-clinic-management-system"),validate:ee=>ee?_(ee)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Admin contact number is required","kivicare-clinic-management-system")},dob:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:ee=>{const K=new Date(ee);return new Date().getFullYear()-K.getFullYear()>=18||r("Admin must be at least 18 years old","kivicare-clinic-management-system")}},gender:{required:r("Gender is required","kivicare-clinic-management-system")}};return v&&(t||e)?i.jsx(Ay,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Clinic","kivicare-clinic-management-system"):r("Add Clinic","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:E(X,J),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(Ne,{name:"clinicImage",control:M,render:({field:I})=>i.jsx(yl,{id:"clinic-image-upload",name:"clinicImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:I.value,defaultImageId:R("clinicImageId"),onChange:ee=>W("clinicImage",ee),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicName",className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"clinicName",className:`form-control ${L.clinicName?"is-invalid":""}`,placeholder:r('eg "Health care Clinic"',"kivicare-clinic-management-system"),...P("clinicName",le.clinicName),disabled:t&&v}),L.clinicName&&i.jsx("div",{className:"invalid-feedback d-block",children:L.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicEmail",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"clinicEmail",className:`form-control ${L.clinicEmail?"is-invalid":""}`,placeholder:r('eg "clinic@example.com"',"kivicare-clinic-management-system"),...P("clinicEmail",le.clinicEmail),disabled:t&&v}),L.clinicEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:L.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"contactNumber",control:M,rules:le.contactNumber,render:({field:I})=>i.jsx(eo,{defaultCountry:c,inputProps:{className:`form-control ${L.contactNumber?"is-invalid":""}`,placeholder:r("Enter phone number","kivicare-clinic-management-system"),disabled:t&&v},...I})}),L.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:L.contactNumber.message})]})}),!e&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:M,rules:le.status,render:({field:I})=>i.jsx(ct,{id:"status",options:A,value:I.value,onChange:I.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:ee=>({...ee,zIndex:9999})},isDisabled:t&&v||!h})}),L.status&&i.jsx("div",{className:"invalid-feedback d-block",children:L.status.message})]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"specialties",className:"form-label",children:[r("Specialties","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"specialties",control:M,rules:le.specialties,render:({field:I})=>i.jsx(Xc,{id:"specialties",options:V?.data??[],value:I.value,onChange:ee=>{I.onChange(ee)},onCreateOption:ee=>{ge.mutate(ee,{onSuccess:K=>{if(K?.data?.data){const ne=(I.value||[]).map(oe=>oe.id===tempOption.id?{id:K.data.data.id,label:K.data.data.label}:oe);I.onChange(ne)}Te.success(r("Specialty added successfully","kivicare-clinic-management-system"))},onError:K=>{console.error("Failed to save specialty:",K),console.error("Error details:",K.response?.data),Te.error(r("Failed to save specialty to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:ee=>ee.id,placeholder:r("Select or create specialties","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:se,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,isDisabled:t&&v,noOptionsMessage:()=>r("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:ee=>r("Add specialty","kivicare-clinic-management-system")+`: "${ee}"`})}),L.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:L.specialties.message})]}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type a new specialty and press enter to add it","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"address",className:"form-label",children:[r("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"address",className:`form-control ${L.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...P("address",le.address),disabled:t&&v}),L.address&&i.jsx("div",{className:"invalid-feedback d-block",children:L.address.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"country",className:"form-label",children:[r("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"country",className:`form-control ${L.country?"is-invalid":""}`,placeholder:r('eg "USA"',"kivicare-clinic-management-system"),...P("country",le.country),disabled:t&&v}),L.country&&i.jsx("div",{className:"invalid-feedback d-block",children:L.country.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"city",className:"form-label",children:[r("City","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"city",className:`form-control ${L.city?"is-invalid":""}`,placeholder:r('eg "New York"',"kivicare-clinic-management-system"),...P("city",le.city),disabled:t&&v}),L.city&&i.jsx("div",{className:"invalid-feedback d-block",children:L.city.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"postalCode",className:"form-label",children:[r("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${L.postalCode?"is-invalid":""}`,placeholder:r('eg "123456"',"kivicare-clinic-management-system"),...P("postalCode",le.postalCode),disabled:t&&v}),L.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:L.postalCode.message})]})}),e&&i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"language",className:"form-label",children:[r("Choose Language","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"language",control:M,rules:le.language,render:({field:I})=>i.jsx(ct,{id:"language",options:Q.map(ee=>({value:ee.lang,label:ee.label})),value:I.value,onChange:I.onChange,placeholder:r("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:ee=>({...ee,zIndex:9999})},isDisabled:t&&v})}),L.language&&i.jsx("div",{className:"invalid-feedback d-block",children:L.language.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx("h6",{className:"mb-3",children:t?r("Update Admin Details","kivicare-clinic-management-system"):r("Create Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(Ne,{name:"adminImage",control:M,render:({field:I})=>i.jsx(yl,{id:"admin-image-upload",name:"adminImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:I.value,defaultImageId:R("adminImageId"),onChange:ee=>W("adminImage",ee),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${L.firstName?"is-invalid":""}`,placeholder:r('eg "Mark"',"kivicare-clinic-management-system"),...P("firstName",le.firstName),disabled:t&&v}),L.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:L.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${L.lastName?"is-invalid":""}`,placeholder:r('eg "Avenue"',"kivicare-clinic-management-system"),...P("lastName",le.lastName),disabled:t&&v}),L.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:L.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminEmail",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"adminEmail",className:`form-control ${L.adminEmail?"is-invalid":""}`,placeholder:r('eg "admin@example.com"',"kivicare-clinic-management-system"),...P("adminEmail",le.adminEmail),disabled:t&&v}),L.adminEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:L.adminEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminContactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"adminContactNumber",control:M,rules:le.adminContactNumber,render:({field:I})=>i.jsx(eo,{defaultCountry:c,value:I.value,onChange:I.onChange,inputProps:{className:`form-control ${L.adminContactNumber?"is-invalid":""}`,placeholder:r("Enter phone number","kivicare-clinic-management-system"),disabled:t&&v}})}),L.adminContactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:L.adminContactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[r("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"dob",control:M,rules:le.dob,render:({field:I})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{id:"dob",className:`form-control ${L.dob?"is-invalid":""}`,value:I.value?Zn(I.value):"",onChange:ee=>{if(ee&&ee[0]){const K=ee[0],ne=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`;I.onChange(ne)}else I.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&v}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})}),L.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:L.dob.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",...P("gender",le.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",...P("gender",le.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),d&&i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",...P("gender",le.gender),disabled:t&&v}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),L.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:L.gender.message})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:T||t&&v}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:T||t&&v,children:T?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Clinic","kivicare-clinic-management-system"):r("Save Clinic","kivicare-clinic-management-system")})]})]})})]})}const ute=Object.freeze(Object.defineProperty({__proto__:null,default:Dy},Symbol.toStringTag,{value:"Module"})),hte=[Gn({path:"/clinic",title:"Clinic",outlet:dte,permissions:["clinic_list"],meta:{description:"Clinic management system",icon:"hospital",showInSidebar:!0},children:[We({path:"",component:mte,title:"All Clinics",index:!0,permissions:["clinic_list"],meta:{description:"List of all clinics",breadcrumb:"All Clinics"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Dy,title:"Add Clinic",props:{isEditing:!1},addons:["kiviPro"],permissions:["clinic_add"],skeleton:Ay,meta:{description:"Create a new clinic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Dy,title:"Edit Clinic",props:{isEditing:!0},permissions:["clinic_edit"],skeleton:Ay,meta:{description:"Edit existing clinic",breadcrumb:"Edit"}})]})],pte=()=>i.jsx("div",{className:"patients-container",children:i.jsx(Uc,{})}),Ry=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["50px","80px","100px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(kl,{titleWidth:"150px"}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"150px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"80px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"100px",height:"38px"})]})]})]})})})}),cP=()=>i.jsxs(yo,{fluid:!0,className:"content-inner pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(bo,{items:["80px","100px","120px"]}),i.jsx(C,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsx(Yn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:Array.from({length:4}).map((t,e)=>i.jsx(Et,{children:i.jsx(St,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(St.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-1 justify-content-between",children:[i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(C,{width:"60px",height:"1.5rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx(C,{width:"2rem",height:"2rem",style:{borderRadius:"50%"}})})]})})})},e))}),i.jsx(St,{children:i.jsx(St.Body,{children:i.jsx(Yn,{children:i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"custom-tab-slider",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Mn.Item,{children:i.jsx(C,{width:"60px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Mn.Item,{children:i.jsx(C,{width:"70px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Mn.Item,{children:i.jsx(C,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsx(gt,{children:i.jsx(C,{width:"100%",height:"200px"})})})]})})})})})]}),gte=({label:t,count:e,icon:n})=>i.jsx(Et,{children:i.jsx(St,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(St.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"text-body line-clamp-1 fw-medium mb-3",children:t}),i.jsx("h3",{className:"text-heading line-clamp-1 counter mb-0 fw-bold",children:e})]}),i.jsx("div",{className:"card-icon",children:i.jsx("i",{className:`${n} fs-1 text-primary`,"aria-hidden":"true"})})]})})})}),fte=()=>{const{patientProfileId:t}=Gt(),e=Kn(),n=hn(),{isAddonActive:s,getPriceFormat:a}=ut(),[l,o]=f.useState([]),c=s("kiviPro"),{data:d,isLoading:m,isError:u,error:p}=Wee(t),h=()=>{const x=e.pathname;return x.includes("/appointments")?"appointments":x.includes("/reports")?"reports":(x.endsWith(`/profile/${t}`)||x.endsWith(`/profile/${t}/`),"profile")},g=x=>{switch(x){case"profile":n("",{relative:"path"});break;case"reports":n("reports",{relative:"path"});break;case"appointments":n("appointments",{relative:"path"});break;default:n("",{relative:"path"})}};return f.useEffect(()=>{if(d?.data){const x=d?.data?.statistics;o([{label:r("Total Appointments","kivicare-clinic-management-system"),count:x.total_appointments||0,icon:"ph-fill ph-calendar-dots"},{label:r("Completed Appointments","kivicare-clinic-management-system"),count:x.completed_appointments||0,icon:"ph-fill ph-calendar-check"},{label:r("Total Encounters","kivicare-clinic-management-system"),count:x.total_encounters||0,icon:"ph-fill ph-stethoscope"},{label:r("Total Billing Amount","kivicare-clinic-management-system"),count:a(x.total_billing_amount)||0,icon:"ph-fill ph-currency-dollar"}])}},[d]),m?i.jsx(cP,{}):u?i.jsx(yo,{fluid:!0,className:"content-inner pb-0",children:i.jsx("div",{className:"text-center py-5",children:i.jsx("p",{className:"text-danger",children:p?.message||r("Failed to load patient data","kivicare-clinic-management-system")})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx(ei,{})]}),i.jsx(Yn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:l.map((x,v)=>i.jsx(gte,{...x},v))}),i.jsx(St,{children:i.jsx(St.Body,{children:i.jsx(Yn,{children:i.jsx(Et,{xs:12,children:i.jsx("div",{className:"custom-tab-slider",children:i.jsxs(Cg.Container,{activeKey:h(),onSelect:g,children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"profile",children:r("Profile","kivicare-clinic-management-system")})}),c&&i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"reports",children:r("Reports","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"appointments",children:r("Appointments","kivicare-clinic-management-system")})})]}),i.jsx(Ji,{})]})})})})})})]})},vte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:"",date_from:"",date_to:"",registeredOn:"",patient_unique_id:""}),n=H=>{if(H.length>0){const{id:B,desc:re}=H[0],de={name:"name",registeredOn:"registered_on",mobileNumber:"contact_number",status:"status",id:"id"};e(xe=>({...xe,orderby:de[B]||B,order:re?"desc":"asc",page:1}))}else e(B=>({...B,orderby:"",order:"",page:1}))},[s,a]=f.useState([]),l=Xn(),o=Jn(),c=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([H,B])=>B!==""&&B!==null&&B!==void 0)),[t]),[d,m]=f.useState(!1),u=f.useRef(null),{data:p,isLoading:h,error:g,refetch:x}=rP(c),v=Bee(),y=$ee(),b=qee(),k=Hee(),w=zee(),[S,j]=f.useState(!1),T=p?.data?.patients||[],N=p?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},_=Ve(),A=async({page:H,per_page:B,search:re})=>{try{const de={dataType:"clinicList",page:H,per_page:B,search:re},xe=await _.fetchQuery({queryKey:pt.list(de),queryFn:()=>Dt.getStaticData(de),staleTime:300*1e3}),U=xe.data.map(me=>({value:me.id,label:me.label||me.name}));return a(me=>[...me,...U]),xe}catch(de){return console.error("Error loading clinics:",de),{data:[],pagination:{has_more:!1}}}},P=[{value:"0",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"1",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[E,M]=f.useState(""),R=H=>{M(H.target.value)},O=f.useMemo(()=>E.trim()?T.filter(H=>{const B=E.toLowerCase();return H.name?.toLowerCase().includes(B)||H.email?.toLowerCase().includes(B)||H.mobileNumber?.toLowerCase().includes(B)||H.clinicName?.toLowerCase().includes(B)||H.id?.toString().includes(B)||H.patient_unique_id?.toLowerCase().includes(B)}):T,[T,E]),L=Uee(),q=async H=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:H,search:t.search,clinic:t.clinic,status:t.status},re=await L.mutateAsync(B);if(re?.data?.patients){const de=new Date().toISOString().split("T")[0],xe=re.data.patients.map(U=>({id:U.id,patient_image_url:U.patient_image_url,name:U.name,clinic:U.clinic,email:U.email,mobile:U.mobile,gender:U.gender,dob:U.dob,blood_group:U.blood_group,registered_on:U.registered_on,status:U.status,address:U.address}));switch(H){case"csv":ps(xe,`patients-${de}.csv`);break;case"xls":gs(xe,`patients-${de}.xls`);break;case"pdf":fs(xe,`patients-${de}.pdf`,"Patients List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(B){console.error("Export error:",B),rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},Q=()=>q("csv"),V=()=>q("xls"),[se,G]=f.useState(!1),ge=()=>{se||(G(!0),q("pdf"),setTimeout(()=>G(!1),2e3))},[ie,W]=f.useState(!1),X=H=>{e(B=>({...B,...H,page:1})),W(!1)},J=f.useMemo(()=>["search","id","patientName","clinic","status","date_from","date_to","patient_unique_id"].some(B=>{const re=t[B];return re!=null&&re!==""}),[t]),ue=()=>{const H={page:1,perPage:t.perPage,search:"",id:"",patientName:"",clinicName:"",registeredOn:"",status:"",orderBy:"",order:"",patient_unique_id:"",date_from:"",date_to:"",clinic:""};e(H),a([]),W(!1)},{isAddonActive:le,defaultClinicId:I,patientUniqueIdSetting:ee,hasCapability:K}=ut(),ne=le("kiviPro"),oe=[...ee?.enable?[{type:"text",name:"patient_unique_id",label:r("Patient Unique ID","kivicare-clinic-management-system"),placeholder:r("Enter Patient Unique ID","kivicare-clinic-management-system")}]:[{type:"number",name:"id",label:r("Patient ID","kivicare-clinic-management-system"),placeholder:r("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:H=>{H.target.value=H.target.value.replace(/[^0-9]/g,"")}}],{type:"text",name:"patientName",label:r("Patient Name","kivicare-clinic-management-system"),placeholder:r("eg Sophia Anderson","kivicare-clinic-management-system")},...ne&&!l&&!o?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:A,options:s,key:"clinic-filter"}]:[],{type:"dateRange",name:"registeredOn",label:r("Registered ON","kivicare-clinic-management-system"),placeholder:r("eg 15/03/25","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("eg Active","kivicare-clinic-management-system"),options:P,isSearchable:!1}],D=Ln(),$=f.useMemo(()=>[D.accessor("id",{header:()=>ee?.enable?r("Unique ID","kivicare-clinic-management-system"):r("ID","kivicare-clinic-management-system"),cell:H=>{const B=H.row.original;return ee?.enable?B.patient_unique_id?B.patient_unique_id:"-":`#${H.getValue()}`}}),D.accessor("name",{id:"name",header:()=>r("Patient","kivicare-clinic-management-system"),cell:H=>i.jsx(cn,{profileUrl:H.row.original.patient_image_url,name:H.getValue(),email:H.row.original.email,fallbackText:"PT",variant:"primary",size:"md",nameLabel:r("Patient","kivicare-clinic-management-system")})}),...ne&&!l&&!o?[D.accessor("clinicNameArray",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:H=>{const B=H.row.original.clinics||[];return i.jsx("div",{children:B.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[B.slice(0,2).map((re,de)=>i.jsx(Zp,{placement:H.row.index<N.perPage-2?"bottom":"top",trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:re.clinic_name}),children:i.jsx(Tm,{avatar:re.clinic_image_url,name:re.clinic_name,email:re.clinic_email,phone:re.clinic_contact_number,address:re.clinic_address,fallbackIcon:"ph-hospital"})},de)),B.length>2&&i.jsx(Zp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",B.length-2]}),placement:H.row.index<N.perPage-2?"bottom":"top",children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:r("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:B.slice(2).map((re,de)=>i.jsx("div",{className:de!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:re.clinic_image_url,name:re.clinic_name,email:re.clinic_email,phone:re.clinic_contact_number,address:re.clinic_address,fallbackIcon:"ph-hospital"})},de))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})},enableSorting:!1})]:[],D.accessor("mobileNumber",{header:()=>r("Mobile Number","kivicare-clinic-management-system"),cell:H=>H.getValue()}),D.accessor("registeredOn",{header:()=>r("Registered ON","kivicare-clinic-management-system"),cell:H=>H.getValue()}),D.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:H=>{r("Active","kivicare-clinic-management-system"),r("Inactive","kivicare-clinic-management-system");const B=Number(H.getValue()),re=H.row.original,de=()=>{const xe=B===1?0:1;wt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),re.name,xe===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(U=>{U.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),w.mutate({ids:[re.id],status:xe},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Patient status has been updated successfully.","kivicare-clinic-management-system")})},onError:me=>{rt({title:r("Error","kivicare-clinic-management-system"),text:me.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return K("patient_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`patient-status-${re.id}`,checked:B===0,onChange:de}),i.jsx("label",{className:"form-check-label",htmlFor:`patient-status-${re.id}`,children:i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:B===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:B===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})},enableSorting:!1}),...K("patient_edit")||K("patient_appointment")||K("patient_appointment_report")||K("patient_resend_credential")||K("patient_encounter")||K("patient_profile")||K("patient_delete")?[D.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>{const B=re=>de=>i.jsx(mt,{id:`tooltip-${H.cell.row.original.id}-${re}`,...de,children:re});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[K("patient_edit")&&i.jsx(Ze,{placement:"top",overlay:B(r("Edit Patient","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/edit/${H.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),K("patient_appointment")&&i.jsx(Ze,{placement:"top",overlay:B(r("Appointments","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${encodeURIComponent(H.row.original.id)}/appointments`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar"})})}),K("patient_appointment_report")&&i.jsx(Ze,{placement:"top",overlay:B(r("Reports","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient-medical-report_id/patient/${H.row.original.id}`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-file"})})}),K("patient_resend_credential")&&i.jsx(Ze,{placement:"top",overlay:B(r("Resend Credential","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>te(H.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),K("patient_encounter")&&i.jsx(Ze,{placement:"top",overlay:B(r("Patient Encounters","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/patient/${H.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-primary fs-4",children:i.jsx("i",{className:"ph ph-calendar-check"})})})}),K("patient_profile")&&i.jsx(Ze,{placement:"top",overlay:B(r("View Profile","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${H.row.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-user-circle-check"})})}),K("patient_delete")&&i.jsx(Ze,{placement:"top",overlay:B(r("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ae(H.cell.row.original.id,H.row.original.name),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[ee,K]),te=H=>{wt({title:r("Resend Credential","kivicare-clinic-management-system"),text:r("Are you sure you want to resend the credential for this patient?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),y.mutate(H,{onSuccess:re=>{Tt({text:re?.message||r("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:re=>{console.error("Resend credential error:",re);const de=re?.response?.data?.message||re?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:de})}}))})},ae=(H,B)=>{wt({title:r("Delete Patient?","kivicare-clinic-management-system"),text:Pi(r("You're about to delete <strong>%s</strong>.<br>This action cannot be undone.","kivicare-clinic-management-system"),B),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep patient","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(re=>{re.isConfirmed&&(yt({title:r("Deleting Patient...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected patient.<br>This won't take long.","kivicare-clinic-management-system")}),v.mutate(H,{onSuccess:de=>{Tt({title:r("Patient Deleted","kivicare-clinic-management-system"),text:de?.message||r("Patient has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to patients","kivicare-clinic-management-system")})},onError:de=>{console.error("Delete patient error:",de);const xe=de?.response?.data?.message||de?.message||r("Failed to delete patient. Please try again.","kivicare-clinic-management-system");rt({text:xe})}}))})},Y=()=>{x()};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsx(Si,{})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Patients","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[K("patient_add")&&i.jsxs(ht,{to:"/patient/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Patient","kivicare-clinic-management-system")})]}),ne&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>W(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[ne&&!l&&!o&&i.jsx(dn,{id:"clinic-filter",placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:A,value:s.find(H=>H.value===t.clinic)||null,onChange:H=>{e(B=>({...B,clinic:H?H.value:""}))},dependencies:{},isClearable:!0}),i.jsx("div",{className:"position-relative",children:i.jsxs(Qd,{children:[i.jsx(Un,{onChange:H=>{if(H.length===2){const[B,re]=H;e(de=>({...de,date_from:$a(B),date_to:$a(re),page:1}))}else H.length===0&&e(B=>({...B,date_from:"",date_to:"",page:1}))},value:t.date_from&&t.date_to?[Zn(t.date_from),Zn(t.date_to)]:null,options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control",placeholder:r("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:t.date_from||t.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{e(B=>({...B,date_from:"",date_to:"",page:1}));const H=document.querySelector('.form-control[placeholder="Select date range"]');H&&H._flatpickr&&H._flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:P,onChange:H=>e(B=>({...B,status:H?H.value:""})),value:P.find(H=>H.value===t.status)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:H=>({...H,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:E,onChange:R})]})}),K("patient_export")&&ne&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Q,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:V,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ge,disabled:L.isPending||se,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:O,columns:$,isLoading:h,error:g,currentPage:N.currentPage,perPage:N.perPage,totalItems:N.total,lastPage:N.lastPage,onPageChange:H=>e(B=>({...B,page:H})),onPerPageChange:H=>e(B=>({...B,perPage:H,page:1})),enableSelection:!0,bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(H,B)=>{const re=H.map(de=>de.id);wt({title:r("Delete Patients?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${H.length} patients</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep patients","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(de=>{de.isConfirmed&&(yt({title:r("Deleting Patients...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected patients.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(re,{onSuccess:xe=>{Tt({title:r("Patient Deleted","kivicare-clinic-management-system"),text:r(`${H.length} patient${H.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to patients","kivicare-clinic-management-system")}),B()},onError:xe=>{console.error("Bulk delete patient(s) error:",xe);const U=xe?.response?.data?.message||xe?.message||r("Failed to delete selected patient(s). Please try again.","kivicare-clinic-management-system");rt({text:U})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(H,B)=>{const re=H.map(de=>de.id);wt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(de=>{de.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate(re,{onSuccess:xe=>{Tt({text:xe?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system")}),B()},onError:xe=>{console.error("Bulk resend credentials error:",xe);const U=xe?.response?.data?.message||xe?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:U})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(H,B)=>{const re=H.map(de=>de.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to activate the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(de=>{de.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:re,status:"0"},{onSuccess:xe=>{Tt({text:xe?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:xe=>{console.error("Bulk update status error:",xe);const U=xe?.response?.data?.message||xe?.message||r("Failed to update patient status. Please try again.","kivicare-clinic-management-system");rt({text:U})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(H,B)=>{const re=H.map(de=>de.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to inactive the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(de=>{de.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:re,status:"1"},{onSuccess:xe=>{Tt({text:xe?.message||r("Patient status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:xe=>{console.error("Bulk update status error:",xe);const U=xe?.response?.data?.message||xe?.message||r("Failed to update patient(s) status. Please try again.","kivicare-clinic-management-system");rt({text:U})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:H=>{m(H)},onSortingChange:n,skeletonColumns:6,skeletonRows:5,moduleNamePlural:"patients"})]}),i.jsx(na,{show:ie,onHide:()=>W(!1),queryParams:t,onApplyFilters:X,onResetFilters:ue,title:r("Filters","kivicare-clinic-management-system"),fields:oe,hasAppliedFilters:J}),ne&&i.jsx(Lr,{show:S,onHide:()=>j(!1),onReopenImport:()=>j(!0),onDataRefresh:Y,context:"patients"})]})};function Jp({isEditing:t=!1,isProfile:e=!1,hideBreadcrumbs:n=!1,...s}){const{patientProfileId:a}=Gt(),l=Ve(),{currentuserID:o,isAddonActive:c,userRole:d,defaultClinicId:m,patientUniqueIdSetting:u,defaultCountryCode:p,showOtherGender:h,sidebarItems:g}=ut(),{data:x}=_n();f.useMemo(()=>x?.data?.kc_available_translations,[x]);const v=Yi(d)&&e?o:a,[y]=xI(),b=y.get("from")==="appointment",{data:k,isLoading:w,error:S}=Oee(v,{enabled:t&&!!v}),j=k?.data,T=async({page:de,per_page:xe,search:U})=>{try{const me={dataType:"clinicList",page:de,per_page:xe,search:U};return await l.fetchQuery({queryKey:pt.list(me),queryFn:()=>Dt.getStaticData(me),staleTime:300*1e3})}catch(me){return console.error("Error loading clinics:",me),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},N=Fee(),_=Lee(),A=hn(),P=!Yi(d)||g&&g.length>0,E=u?.enable,{data:M}=ad({module_type:"patient_module",status:1,module_id:v},{enabled:c("kiviPro")}),R=M?.data?.forms||[],O=f.useRef({});f.useEffect(()=>{t&&R.length>0&&R.forEach(de=>{const xe=de.form_data;xe&&O.current[de.id]&&setTimeout(()=>{const U=O.current[de.id];U&&U.resetForm&&U.resetForm(xe)},100)})},[t,R]);const L=()=>{const de={};return R.forEach(xe=>{const U=O.current[xe.id];U&&(de[xe.id]=U.getFormData())}),de},q=async()=>{const de={};let xe=!0,U=null;for(const me of R){const ye=O.current[me.id];if(ye){const pe=await ye.triggerValidation();de[me.id]={isValid:pe.isValid,data:ye.getFormData(),errors:pe.errors},pe.isValid||(xe=!1,U||(U=me.id))}}return{allValid:xe,formResults:de,firstInvalidFormId:U}},{data:Q,isLoading:V,refetch:se}=Vee({enabled:!t&&!e&&E}),[G,ge]=f.useState(!1),ie=G||N.isPending||_.isPending||w,W=Vc.PhoneNumberUtil.getInstance(),X=de=>{try{return W.isValidNumber(W.parseAndKeepRawInput(de))}catch{return!1}},J=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],{register:ue,handleSubmit:le,control:I,watch:ee,setValue:K,formState:{errors:ne},reset:oe}=en({defaultValues:{patientImage:"",patientImageId:"",patientUniqueId:"",firstName:"",lastName:"",email:"",contactNumber:"",dob:"",clinic:[],status:J[0],bloodGroup:null,gender:"",address:"",city:"",country:"",postalCode:""}}),D=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],$=de=>de==null?null:J.find(xe=>xe.value===de||xe.value===String(de)||de===0&&xe.value==="active"||de===1&&xe.value==="inactive")||null,te=de=>!de||D.length===0?null:D.find(xe=>xe.value===de||xe.label===de)||null;f.useEffect(()=>{!t&&Q?.data?.unique_id&&E&&K("patientUniqueId",Q.data.unique_id)},[Q,t,E,K]),f.useEffect(()=>{if(t&&j&&!w){if(K("firstName",j.first_name||""),K("lastName",j.last_name||""),K("email",j.email||""),K("patientUniqueId",j.patient_unique_id||""),setTimeout(()=>{K("contactNumber",j.contact_number||j.mobile_number||"")},0),K("dob",j.dob||""),K("gender",j.gender||""),d==="kiviCare_receptionist")K("clinic",[{value:m}]);else{const U=Array.isArray(j.clinic)?j.clinic.map(me=>({value:me.value??me.id??me.ID??"",label:me.label??me.name??""})):[];K("clinic",U)}const de=$(j.status);K("status",de);const xe=te(j.blood_group);K("bloodGroup",xe),K("address",j.address||""),K("city",j.city||""),K("country",j.country||""),K("postalCode",j.postal_code||""),j.patient_image_url&&K("patientImage",j.patient_image_url),j.patient_image_id&&K("patientImageId",j.patient_image_id),j.customFields&&typeof j.customFields=="object"&&Object.entries(j.customFields).forEach(([U,me])=>{K(`custom_field_${U}`,me)})}},[t,j,w,K]),f.useEffect(()=>{if(S){const de=S?.response?.data?.message||r("You do not have permission to view this patient.","kivicare-clinic-management-system");Te.error(de,{position:"top-right",autoClose:5e3}),A("/patient",{replace:!0})}},[S,A]);const ae=(de,xe)=>{K(de,xe.url||xe.image),K(`${de}Id`,xe.id||xe.imageId)},Y=c("kiviPro"),H={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"?{required:r("At least one clinic selection is required","kivicare-clinic-management-system"),validate:de=>!de||Array.isArray(de)&&de.length===0?r("At least one clinic must be selected","kivicare-clinic-management-system"):!0}:{},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:de=>de?X(de)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},dob:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:de=>{const xe=new Date(de),U=new Date;return xe.setHours(0,0,0,0),U.setHours(0,0,0,0),xe>U?r("Date of birth cannot be in the future","kivicare-clinic-management-system"):!0}},gender:{required:r("Gender is required","kivicare-clinic-management-system")}},B=async de=>{if(ge(!0),R.length>0&&!(await q()).allValid){ge(!1);return}let xe=de.clinic;d==="kiviCare_receptionist"||d==="kiviCare_clinic_admin"?xe=[{value:m}]:xe=Array.isArray(xe)?xe.map(ye=>({value:ye.value||ye})):[];const U={};Object.keys(de).forEach(ye=>{if(ye.startsWith("custom_field_")){const pe=ye.replace("custom_field_","");U[pe]=de[ye]}});const me={first_name:de.firstName,last_name:de.lastName,email:de.email,mobile_number:de.contactNumber,dob:de.dob,status:de.status?.value||de.status,blood_group:de.bloodGroup?.value||de.bloodGroup,gender:de.gender,profile_image:de.patientImageId,patient_unique_id:de.patientUniqueId,address:de.address,city:de.city,country:de.country,postal_code:de.postalCode,clinics:xe,customForm:L(),customFields:U};try{let ye;t?(ye=await _.mutateAsync({id:v,...me}),Te.success(r("Patient updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(ye=await N.mutateAsync(me),Te.success(r("Patient created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||A(b?"/appointments/add":"/patient",{replace:!0,state:{NewPatientId:ye.data.id}})}catch(ye){console.error("Error saving patient:",ye);const pe=ye?.response?.data?.message||(t?r("Failed to update patient","kivicare-clinic-management-system"):r("Failed to create patient","kivicare-clinic-management-system"));Te.error(pe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{ge(!1)}},re=de=>{console.log("Validation errors:",de);const xe=Object.keys(de)[0],U=document.getElementById(xe);U&&(U.scrollIntoView({behavior:"smooth",block:"center"}),U.focus())};return t&&w?i.jsx(Ry,{}):t&&S?null:i.jsxs(i.Fragment,{children:[i.jsx(f.Activity,{mode:n?"hidden":"visible",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),P&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Patient","kivicare-clinic-management-system"):r("Add Patient","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:le(B,re),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(Ne,{name:"patientImage",control:I,render:({field:de})=>i.jsx(yl,{id:"patient-image-upload",name:"patientImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:de.value,defaultImageId:ee("patientImageId"),onChange:xe=>ae("patientImage",xe),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[E&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"patientUniqueId",className:"form-label",children:r("Patient Unique ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"patientUniqueId",className:`form-control ${ne.patientUniqueId?"is-invalid":""}`,placeholder:r("Enter Patient Unique ID","kivicare-clinic-management-system"),...ue("patientUniqueId"),disabled:t&&w}),ne.patientUniqueId&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.patientUniqueId.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${ne.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...ue("firstName",H.firstName),disabled:t&&w}),ne.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${ne.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...ue("lastName",H.lastName),disabled:t&&w}),ne.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.lastName.message})]})}),Y&&d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinics","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:I,rules:H.clinic,render:({field:de})=>i.jsx(i.Fragment,{children:i.jsx(dn,{id:"clinic",loadOptions:T,value:de.value,onChange:xe=>{de.onChange(xe)},isMulti:!0,closeMenuOnSelect:!1,placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${ne.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t&&w,dependencies:{},getOptionValue:xe=>xe?.value??xe?.id,getOptionLabel:xe=>xe?.label??xe?.name??xe?.clinic_name})})}),ne.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${ne.email?"is-invalid":""}`,placeholder:r('eg "markavenue@gmail.com"',"kivicare-clinic-management-system"),...ue("email",H.email),disabled:t&&w}),ne.email&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.email.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"contactNumber",control:I,rules:H.contactNumber,render:({field:de})=>i.jsx(eo,{defaultCountry:p,value:de.value,onChange:de.onChange,inputProps:{className:`form-control ${ne.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),disabled:t&&w}})}),ne.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[r("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"dob",control:I,rules:H.dob,render:({field:de})=>i.jsx(Un,{id:"dob",className:`form-control ${ne.dob?"is-invalid":""}`,value:de.value?Zn(de.value):"",onChange:xe=>{if(xe&&xe[0]){const U=xe[0],me=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}-${String(U.getDate()).padStart(2,"0")}`;de.onChange(me)}else de.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&w})}),ne.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:I,rules:H.status,render:({field:de})=>i.jsx(ct,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:J,value:de.value,onChange:de.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:xe=>({...xe,zIndex:9999})}})}),ne.status&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"bloodGroup",className:"form-label",children:r("Blood Group","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"bloodGroup",control:I,rules:H.bloodGroup,render:({field:de})=>i.jsx(ct,{id:"bloodGroup",className:"react-select-box",classNamePrefix:"react-select",options:D,value:de.value,onChange:de.onChange,placeholder:r("Select Blood Group","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:xe=>({...xe,zIndex:9999})},isDisabled:t&&w})}),ne.bloodGroup&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.bloodGroup.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${ne.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...ue("gender",H.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${ne.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...ue("gender",H.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),h&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${ne.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...ue("gender",H.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),ne.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.gender.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Other Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${ne.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...ue("address",H.address),disabled:t&&w}),ne.address&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${ne.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...ue("city",H.city),disabled:t&&w}),ne.city&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${ne.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...ue("country",H.country),disabled:t&&w}),ne.country&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${ne.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...ue("postalCode",H.postalCode),onInput:de=>{de.target.value=de.target.value.replace(/[^0-9]/g,"")},disabled:t&&w}),ne.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.postalCode.message})]})})]})]})]})}),i.jsx(tf,{moduleType:"patient_module",control:I,errors:ne,setValue:K,watch:ee}),Y&&R.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Information","kivicare-clinic-management-system")}),R.map(de=>i.jsx(St,{className:"mb-4",children:i.jsxs(Ha,{children:[i.jsx("h6",{className:"mb-3",children:de.name?.text||de.name}),i.jsx("div",{id:`custom-form-${de.id}`,children:i.jsx(Wa,{ref:xe=>O.current[de.id]=xe,fields:de.fields,data:de.form_data||{},readOnly:!1,formId:`form_${de.id}`})})]})},de.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[P&&i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:ie||t&&w}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ie||t&&w,children:ie?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Patient","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})})]})}const xte=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"})),yte=()=>i.jsx(Jp,{isEditing:!0,isProfile:!0,hideBreadcrumbs:!0}),bte=()=>{const{patientProfileId:t}=Gt();return i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0})},wte=()=>{const{patientProfileId:t}=Gt();return i.jsx(Cy,{hideBreadcrumbs:!0,patientId:t})},kte=()=>{const{patientProfileId:t}=Gt();return i.jsx(Xp,{isEditing:!1,hideBreadcrumbs:!0,patientId:t})},jte=()=>{const{patientProfileId:t}=Gt();return i.jsx(Xp,{isEditing:!0,hideBreadcrumbs:!0,patientId:t})},Nte=()=>{const{patientProfileId:t}=Gt();return i.jsx(JR,{readOnly:!0,hideBreadcrumbs:!0,patientId:t})},Cte=[Gn({path:"/patient",title:"Patients",outlet:pte,permissions:["patient_list"],meta:{description:"Patient management system",icon:"users"},children:[We({path:"",component:vte,title:"All Patients",index:!0,permissions:["patient_list"],meta:{description:"List of all patients",breadcrumb:"All Patients"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Jp,title:"Add Patient",props:{isEditing:!1},permissions:["patient_add"],meta:{description:"Create a new patient",breadcrumb:"Add New"},skeleton:Ry}),We({path:"edit/:patientProfileId",component:Jp,title:"Edit Patient",props:{isEditing:!0},permissions:["patient_edit"],meta:{description:"Edit existing patient",breadcrumb:"Edit"},skeleton:Ry}),Gn({path:"profile/:patientProfileId",outlet:fte,title:"Patient Profile",permissions:["patient_view","patient_profile"],meta:{description:"View patient profile and details",breadcrumb:"Profile"},children:[We({path:"",component:yte,title:"Patient Profile",index:!0,permissions:["patient_view","patient_profile"],meta:{description:"Patient profile overview",breadcrumb:"Profile"},skeleton:cP}),We({path:"reports",component:bte,title:"Patient Reports",permissions:["patient_view"],addons:["kiviPro"],meta:{description:"Patient medical reports",breadcrumb:"Reports"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:3,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments",component:wte,title:"Patient Appointments",permissions:["appointment_list"],meta:{description:"Patient appointments list",breadcrumb:"Appointments"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments/add",component:kte,title:"Add Appointment",permissions:["appointment_add"],meta:{description:"Create a new appointment for patient",breadcrumb:"Add Appointment"}}),We({path:"appointments/edit/:id",component:jte,title:"Edit Appointment",permissions:["appointment_edit"],meta:{description:"Edit patient appointment",breadcrumb:"Edit Appointment"}}),We({path:"appointments/view/:id",component:Nte,title:"View Appointment",permissions:["appointment_view"],meta:{description:"View patient appointment details",breadcrumb:"View Appointment"}})]})]})],Ste=()=>{const t=Kn();return i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/patient-medical-report_id"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Uc,{})]})},xC=({patientId:t=!1})=>{const e=Gt(),n=Yi(),{currentuserID:s}=ut();return n?t=s:!t&&e&&e.patientId&&(t=e.patientId),i.jsx(i.Fragment,{children:i.jsx(Sk,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0,showViewReport:!0})})},_te=[Gn({path:"/patient-medical-report_id",title:"Patient Medical Reports",outlet:Ste,permissions:["patient_report"],meta:{description:"Patient medical reports",icon:"ph ph-file",showInSidebar:!0},children:[We({path:"",component:xC,title:"All Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports",breadcrumb:"All Patient Reports"}}),We({path:"patient/:patientId",component:xC,title:"Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports for patient",breadcrumb:"Patient Reports"}})]})],Ete=()=>{const t=Kn();return i.jsxs("div",{className:"doctors-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/doctor"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},Py=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(kl,{titleWidth:"120px"}),i.jsx("div",{className:"d-flex gap-4",children:i.jsxs("div",{className:"kc-doctor-profile flex-fill",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"80px",inputHeight:"100px"})})]})})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"55px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})]})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})]})})})}),eg=()=>i.jsxs("div",{className:"doctor-session-module",children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-4"}),i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})})})}),i.jsx("div",{className:"mb-3",children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsxs("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:[i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"80px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"90px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(C,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"85px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(C,{width:"75px",height:"1.1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Se,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})})]}),i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx(st,{width:"80px",height:"38px",className:"me-3"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),tg=()=>i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"55px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"200px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]}),Tte=({reviewCount:t=2})=>i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem"}),i.jsx(C,{width:"140px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"position-relative",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"card mb-3 border-0 shadow-sm",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((s,a)=>i.jsx(C,{width:"1rem",height:"1rem"},a))}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsx(C,{width:"80px",height:"0.875rem"})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"70%",height:"1rem"})]})},n))}),i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((e,n)=>i.jsx(C,{width:"2.5rem",height:"2.5rem",style:{borderRadius:"4px"}},n))})})]}),Ate=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+r(" years ago","kivicare-clinic-management-system"):n===1?r("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+r(" months ago","kivicare-clinic-management-system"):n===1?r("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+r(" days ago","kivicare-clinic-management-system"):n===1?r("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+r(" hours ago","kivicare-clinic-management-system"):n===1?r("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+r(" minutes ago","kivicare-clinic-management-system"):n===1?r("1 minute ago","kivicare-clinic-management-system"):e<10?r("just now","kivicare-clinic-management-system"):Math.floor(e)+r(" seconds ago","kivicare-clinic-management-system")))))},Dte=ze.memo(({show:t,onHide:e,doctorId:n})=>{const[s,a]=f.useState("date"),[l,o]=f.useState(1),{data:c,isLoading:d,isFetching:m}=YR({doctor_id:n,page:l,per_page:10,sort_by:s},{enabled:t&&!!n,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1});f.useEffect(()=>{o(1)},[s,n]);const u=c?.data?.reviews||[],p=c?.data?.pagination||{},h=c?.data?.doctor_data,g=parseFloat(c?.data?.avg_rating||0),x=parseInt(c?.data?.total_reviews||0),v=f.useCallback(S=>{s!==S&&(a(S),o(1))},[s]),y=f.useCallback(S=>{o(S)},[]),b=f.useCallback(S=>[...Array(5)].map((j,T)=>i.jsx("i",{className:`${T<S?"ph-fill ph-star text-warning":"ph ph-star text-muted"} fs-4`},T)),[]),k=f.useMemo(()=>i.jsxs("div",{className:"review-header d-flex gap-4 align-items-start mb-4 justify-content-between",children:[i.jsx("div",{className:"doctor-profile",children:i.jsx(cn,{profileUrl:h?.profileImage,name:h?.name,email:h?.email,variant:"info",size:"lg"})}),i.jsx("div",{className:"rating-summary",children:x>0?i.jsxs("div",{className:"d-flex align-items-center gap-3 mb-3",children:[i.jsx("h2",{className:"mb-0",children:g.toFixed(1)}),i.jsxs("div",{children:[b(Math.round(g)),i.jsxs("div",{className:"text-muted",children:[r("Based on","kivicare-clinic-management-system")," ",x," ",r("reviews","kivicare-clinic-management-system")]})]})]}):i.jsx("div",{className:"text-muted",children:r("No average review found.","kivicare-clinic-management-system")})})]}),[h,g,x,b]),w=f.useMemo(()=>d&&!c?i.jsx(Tte,{}):!d&&u.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("i",{className:"ph ph-chat-centered-text fs-1 text-muted mb-3 d-block"}),i.jsx("p",{className:"text-muted",children:r("No reviews found","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h5",{className:"mb-0",children:[r("Reviews","kivicare-clinic-management-system")," (",x||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:s,onChange:S=>v(S.target.value),children:[i.jsx("option",{value:"date",children:r("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:r("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:r("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:`${m?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:u.map(S=>i.jsx(St,{className:"mb-3 border-0 shadow-sm",children:i.jsxs(St.Body,{className:"p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{children:b(S.rating)}),i.jsxs("small",{className:"text-muted",children:[r("by","kivicare-clinic-management-system")," ",i.jsx("strong",{children:S.patient_name})]})]}),i.jsx("small",{className:"text-muted",children:Ate(S.created_at)})]}),S.review_text&&i.jsx("p",{className:"mb-0 text-dark",children:S.review_text})]})},S.id))}),m&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx(Ng,{animation:"border",variant:"secondary",size:"sm"})})]}),p?.total_pages>1&&i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsxs(Dl,{size:"sm",children:[i.jsx(Dl.First,{onClick:()=>y(1),disabled:l===1}),i.jsx(Dl.Prev,{onClick:()=>y(l-1),disabled:l===1}),[...Array(p.total_pages)].map((S,j)=>{const T=j+1;return T===1||T===p.total_pages||T>=l-1&&T<=l+1?i.jsx(Dl.Item,{active:T===l,onClick:()=>y(T),children:T},T):T===l-2||T===l+2?i.jsx(Dl.Ellipsis,{},T):null}),i.jsx(Dl.Next,{onClick:()=>y(l+1),disabled:l===p.total_pages}),i.jsx(Dl.Last,{onClick:()=>y(p.total_pages),disabled:l===p.total_pages})]})})]}),[d,m,u,s,x,p,l,v,y,b,c]);return i.jsxs(lt,{show:t,onHide:e,size:"lg",backdrop:"static",centered:!0,children:[i.jsxs(lt.Header,{children:[i.jsx(lt.Title,{children:r("Doctor Reviews","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{className:"p-4",children:[k,w]})]})}),Rte=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(null),[a,l]=f.useState([]),[o,c]=f.useState([]),[d,m]=f.useState(!1),u=f.useRef(null),p=Xn(),h=Jn(),g={page:1,perPage:10,search:"",date:"",clinic:"",specialization:"",status:"",orderBy:"",order:""},[x,v]=f.useState(g),[y,b]=f.useState(""),{isAddonActive:k,hasCapability:w,userRole:S,defaultClinicId:j}=ut(),T=Aee(),N=Dee(),_=Pee(),A=Mee(),P=Iee(),E=Ree(),M=k("kiviPro"),{data:R,isLoading:O}=Va("specialization");f.useMemo(()=>R?.data?R.data.map(De=>{let $e="";return typeof De=="string"?$e=De:typeof De=="object"&&De!==null&&($e=De.label||De.name||""),{value:$e,label:$e}}):[],[R]);const L=Za(y,500);ze.useEffect(()=>{v(De=>({...De,search:L,page:1}))},[L]);const q=De=>{if(De.length>0){const{id:$e,desc:et}=De[0],tt={id:"id",name:"name",status:"status"};v(qe=>({...qe,orderby:tt[$e]||$e,order:et?"desc":"asc",page:1}))}else v($e=>({...$e,orderby:"",order:"",page:1}))},Q=Ve(),V=async({page:De,per_page:$e,search:et})=>{try{const tt={dataType:"clinicList",page:De,per_page:$e,search:et},qe=await Q.fetchQuery({queryKey:pt.list(tt),queryFn:()=>Dt.getStaticData(tt),staleTime:300*1e3}),we=qe.data.map(Ee=>({value:Ee.id,label:Ee.label||Ee.name}));return l(Ee=>[...Ee,...we]),qe}catch(tt){return console.error("Error loading clinics:",tt),{data:[],pagination:{has_more:!1}}}},se=f.useMemo(()=>{const De=Object.fromEntries(Object.entries(x).filter(([$e,et])=>et!==""&&et!==null&&et!==void 0));return S==="clinic_admin"&&j&&!De.clinic&&!De.id&&(De.clinic=j),De},[x,S,j]),{data:G,isLoading:ge,error:ie,refetch:W}=_k(se),X=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],J=G?.data?.doctors||[],ue=G?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},le=async({page:De,per_page:$e,search:et})=>{try{const tt={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:De,per_page:$e,search:et},qe=await Q.fetchQuery({queryKey:pt.list(tt),queryFn:()=>Dt.getStaticData(tt),staleTime:300*1e3}),we=qe.data.map(Ee=>({value:Ee.id,label:Ee.label||Ee.name}));return c(Ee=>[...Ee,...we]),qe.data.map(Ee=>{let Qe="",nt="";return typeof Ee=="string"?(Qe=Ee,nt=Ee):typeof Ee=="object"&&Ee!==null&&(Qe=Ee.label||Ee.name||"",nt=Ee.id??Ee.name??Qe),{value:nt,label:Qe}})}catch(tt){return console.error("Error loading Specialties:",tt),{data:[],pagination:{has_more:!1}}}},I=Ln(),ee=f.useMemo(()=>[I.accessor("id",{id:"id",enableSorting:!0,header:()=>r("ID","kivicare-clinic-management-system"),cell:De=>i.jsx("div",{className:"font-weight-medium",children:De.getValue()})}),I.accessor("name",{id:"name",enableSorting:!0,header:()=>r("Doctor","kivicare-clinic-management-system"),cell:De=>i.jsx(cn,{profileUrl:De.row.original.doctor_image_url,name:De.row.original.name,email:De.row.original.email||"",fallbackText:"DR",variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system")})}),...M&&!p&&!h?[I.accessor("clinicNameArray",{id:"clinic_name",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!1,cell:De=>{const $e=De.row.original.clinics||[];return i.jsx("div",{children:$e.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[$e.slice(0,2).map((et,tt)=>i.jsx(Zp,{trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:et.clinic_name}),children:i.jsx(Tm,{avatar:et.clinic_image_url,name:et.clinic_name,email:et.clinic_email,phone:et.clinic_contact_number,address:et.clinic_address,fallbackIcon:"ph-hospital"})},tt)),$e.length>2&&i.jsx(Zp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",$e.length-2]}),children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:r("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:$e.slice(2).map((et,tt)=>i.jsx("div",{className:tt!==0?"pt-3 border-top":"",children:i.jsx(Tm,{avatar:et.clinic_image_url,name:et.clinic_name,email:et.clinic_email,phone:et.clinic_contact_number,address:et.clinic_address,fallbackIcon:"ph-hospital"})},tt))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})}})]:[],I.accessor("mobile_number",{id:"mobile_number",header:()=>r("Mobile Number","kivicare-clinic-management-system"),cell:De=>i.jsx("div",{children:i.jsx("span",{children:De.row.original.mobile_number||""})})}),I.accessor("specialization",{id:"specialization",enableSorting:!1,header:()=>r("Specialization","kivicare-clinic-management-system"),cell:De=>{const $e=De.row.original.specialties||[];return i.jsx("div",{children:$e.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[$e.slice(0,2).map((et,tt)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:et.label},tt)),$e.length>2&&i.jsx(Ze,{placement:"top",overlay:et=>i.jsx(mt,{id:`tooltip-specialization-${De.row.original.id}`,...et,children:$e.slice(2).map(tt=>tt.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",$e.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),I.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:De=>{const $e=Number(De.getValue()),et=De.row.original,tt=()=>{const qe=$e===1?0:1;wt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),et.name,qe===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(we=>{we.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),A.mutate({ids:[et.id],status:qe},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Doctor status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ee=>{rt({title:r("Error","kivicare-clinic-management-system"),text:Ee.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return w("doctor_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`doctor-status-${et.id}`,checked:$e===0,onChange:tt}),i.jsx("label",{className:"form-check-label",htmlFor:`doctor-status-${et.id}`,children:i.jsx("span",{className:`badge ${$e===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:$e===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${$e===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:$e===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),...w("doctor_edit")||w("patient_review_get")||w("doctor_resend_credential")||w("doctor_session")||w("doctor_service")||w("doctor_delete")?[I.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:De=>{const $e=et=>tt=>i.jsx(mt,{id:`tooltip-${De.cell.row.original.id}-${et}`,...tt,children:et});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[w("doctor_edit")&&i.jsx(Ze,{placement:"top",overlay:$e(r("Edit Doctor","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/edit/${De.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),w("patient_review_get")&&i.jsx(Ze,{placement:"top",overlay:$e(r("View Reviews","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>{s(De.cell.row.original.id),e(!0)},children:i.jsx("i",{className:"ph ph-star"})})}),w("doctor_edit")&&i.jsx(Ze,{placement:"top",overlay:$e(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>ne(De.cell.row.original.id,De.cell.row.original.name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),w("doctor_session")&&i.jsx(Ze,{placement:"top",overlay:$e(r("View Doctor Sessions","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${De.cell.row.original.id}/sessions`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar-plus"})})}),w("doctor_service")&&i.jsx(Ze,{placement:"top",overlay:$e(r("Add Service","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${De.cell.row.original.id}/add-service`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-plus-square"})})}),w("doctor_delete")&&i.jsx(Ze,{placement:"top",overlay:$e(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>K(De.cell.row.original.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[w]),K=De=>{wt({title:r("Delete Doctor?","kivicare-clinic-management-system"),text:r("You're about to delete this doctor.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep doctor","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then($e=>{$e.isConfirmed&&(yt({title:r("Deleting Doctor...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected doctor.<br>This won't take long.","kivicare-clinic-management-system")}),T.mutate(De,{onSuccess:()=>{Tt({title:r("Doctor Deleted","kivicare-clinic-management-system"),text:r("Doctor has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to doctors","kivicare-clinic-management-system")})},onError:et=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:et.message||r("Failed to delete doctor.","kivicare-clinic-management-system")})}}))})},ne=(De,$e)=>{wt({title:r("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),$e),icon:"ph-question",confirmButtonText:r("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(et=>{et.isConfirmed&&E.mutate(De,{onSuccess:()=>{Tt({title:r("Credentials Sent!","kivicare-clinic-management-system"),text:r("Doctor credentials have been resent successfully.","kivicare-clinic-management-system")})},onError:tt=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:tt.message||r("Failed to resend credentials.","kivicare-clinic-management-system")})}})})},oe=De=>{b(De.target.value)},D=()=>{v(g),l([]),c([]),b("")},$=f.useMemo(()=>["search","id","doctorName","clinic","specialization","doctorAddress","status"].some($e=>{const et=x[$e];return et!=null&&et!==""})||y!=="",[x,y]),te=async De=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const $e={format:De};x.search&&($e.search=x.search),x.clinic&&($e.clinic_id=x.clinic),x.status!==""&&x.status!==null&&x.status!==void 0&&($e.status=x.status);const et=await P.mutateAsync($e);if(et?.data?.doctors){const tt=new Date().toISOString().split("T")[0],qe=et.data.doctors.map(we=>({id:we.id,name:we.name,clinic_name:we.clinic_name||"",clinic_id:we.clinic_id||"",email:we.email,mobile_number:we.mobile_number,gender:we.gender,dob:we.dob,specialties:we.specialties,status:we.user_status,full_address:we.full_address}));switch(De){case"csv":ps(qe,`doctors-${tt}.csv`);break;case"xls":gs(qe,`doctors-${tt}.xls`);break;case"pdf":fs(qe,`doctors-${tt}.pdf`,"Doctors List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}}catch($e){console.error("Export error:",$e),rt({title:r("Error!","kivicare-clinic-management-system"),text:$e.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system")})}},ae=()=>te("csv"),Y=()=>te("xls"),[H,B]=f.useState(!1),re=()=>{H||(B(!0),te("pdf"),setTimeout(()=>B(!1),2e3))},[de,xe]=f.useState(!1),[U,me]=f.useState(!1),ye=De=>{v({...x,...De,page:1}),xe(!1)},pe=async De=>({success:!0}),Ce=()=>{W()},Ge=[{type:"number",name:"id",label:r("Doctor ID","kivicare-clinic-management-system"),placeholder:r("Enter Doctor ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:De=>{De.target.value=De.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...M&&!p&&!h?[{type:"paginatedSelect",name:"clinic",label:r("clinic_id","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:V,options:a,key:"clinic-filter"}]:[],{type:"paginatedSelect",name:"specialization",label:r("Specialization","kivicare-clinic-management-system"),placeholder:r("Select Specialization","kivicare-clinic-management-system"),options:o,optionLoader:le,isSearchable:!0},{type:"text",name:"doctorAddress",label:r("Doctor Address","kivicare-clinic-management-system"),placeholder:r("Search by address, city, or state","kivicare-clinic-management-system")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select status","kivicare-clinic-management-system"),options:X}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Doctors","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[w("doctor_add")&&i.jsxs(ht,{to:"/doctor/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Doctor","kivicare-clinic-management-system")})]}),M&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>me(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>xe(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[M&&!p&&!h&&i.jsx(i.Fragment,{children:i.jsx(dn,{id:"clinic-filter",placeholder:r("Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:V,value:a.find(De=>De.value===x.clinic_id)||null,onChange:De=>{v($e=>({...$e,clinic_id:De?De.value:""}))},dependencies:{},isClearable:!0})}),i.jsx(dn,{id:"specialties-selection",placeholder:r("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:le,value:o.find(De=>De.label===x.specialization)||null,onChange:De=>v($e=>({...$e,specialization:De?De.label:""})),isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:X,onChange:De=>v($e=>({...$e,status:De?De.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:De=>({...De,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:y,onChange:oe})]})}),w("doctor_export")&&M&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ae,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Y,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:re,disabled:P.isPending||H,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:J,columns:ee,isLoading:ge,error:ie,currentPage:ue.currentPage,perPage:ue.perPage,totalItems:ue.total,lastPage:ue.lastPage,moduleNamePlural:"doctors",onPageChange:De=>v($e=>({...$e,page:De})),onPerPageChange:De=>v($e=>({...$e,perPage:De,page:1})),onSortingChange:q,manualSorting:!0,enableSelection:!0,bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(De,$e)=>{const et=De.map(tt=>tt.id);wt({title:r("Delete Doctors?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${De.length} doctors</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep doctors","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",reverseButtons:!0}).then(tt=>{tt.isConfirmed&&(yt({title:r("Deleting Doctors...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected doctors.<br>This won't take long.","kivicare-clinic-management-system")}),N.mutate(et,{onSuccess:qe=>{Tt({title:r("Doctor Deleted","kivicare-clinic-management-system"),text:r(`${De.length} doctor${De.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to doctors","kivicare-clinic-management-system")}),$e()},onError:qe=>{console.error("Bulk delete doctors error:",qe);const we=qe?.response?.data?.message||qe?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:we})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(De,$e)=>{const et=De.map(tt=>tt.id);wt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected Doctors?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(tt=>{tt.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),_.mutate(et,{onSuccess:qe=>{Tt({text:qe?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system")}),$e()},onError:qe=>{console.error("Bulk resend credentials error:",qe);const we=qe?.response?.data?.message||qe?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:we})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(De,$e)=>{const et=De.map(tt=>tt.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Doctors to active?","kivicare-clinic-management-system"),icon:"ph-question",showCancelButton:!0,confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(tt=>{tt.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:et,status:"0"},{onSuccess:qe=>{Tt({text:qe?.message||r("Doctors status has been updated successfully.","kivicare-clinic-management-system")}),$e()},onError:qe=>{console.error("Bulk update status error:",qe);const we=qe?.response?.data?.message||qe?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({text:we})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(De,$e)=>{const et=De.map(tt=>tt.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected doctors to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(tt=>{tt.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:et,status:"1"},{onSuccess:qe=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:qe?.message||r("Doctors status has been updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),$e()},onError:qe=>{console.error("Bulk update status error:",qe);const we=qe?.response?.data?.message||qe?.message||r("Failed to update Doctor status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:we,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:De=>{m(De)}})]}),i.jsx(na,{show:de,onHide:()=>xe(!1),queryParams:x,onApplyFilters:ye,onResetFilters:D,title:r("Filters","kivicare-clinic-management-system"),fields:Ge,hasAppliedFilters:$}),M&&i.jsx(Lr,{show:U,onHide:()=>me(!1),onImport:pe,onReopenImport:()=>me(!0),onDataRefresh:Ce,context:"doctors"}),i.jsx(Dte,{show:t,onHide:()=>{e(!1),s(null)},doctorId:n})]})};function ho(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}ho.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};ho.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};ho.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Ek(t,e,n,s){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=s}Ek.prototype.length=function(){for(var t=10,e=0,n=void 0,s=void 0,a=0;a<=t;a+=1){var l=a/t,o=this._point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=o-n,m=c-s;e+=Math.sqrt(d*d+m*m)}n=o,s=c}return e};Ek.prototype._point=function(t,e,n,s,a){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*s*(1-t)*t*t+a*t*t*t};function Pte(t,e,n){var s,a,l,o=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:Date.now(),o=null,l=t.apply(s,a),o||(s=a=null)};return function(){var m=Date.now();!c&&n.leading===!1&&(c=m);var u=e-(m-c);return s=this,a=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),c=m,l=t.apply(s,a),o||(s=a=null)):!o&&n.trailing!==!1&&(o=setTimeout(d,u)),l}}function Dn(t,e){var n=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=Pte(Dn.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Dn.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var l=a.changedTouches[0];n._strokeBegin(l)}},this._handleTouchMove=function(a){a.preventDefault();var l=a.targetTouches[0];n._strokeMoveUpdate(l)},this._handleTouchEnd=function(a){var l=a.target===n._canvas;l&&(a.preventDefault(),n._strokeEnd(a))},this.on()}Dn.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Dn.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=n.ratio||window.devicePixelRatio||1,l=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),s.src=t,s.onload=function(){e._ctx.drawImage(s,0,0,l,o)},this._isEmpty=!1};Dn.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[t].concat(s))}};Dn.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Dn.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Dn.prototype.isEmpty=function(){return this._isEmpty};Dn.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};Dn.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,s=this._createPoint(e,n),a=this._data[this._data.length-1],l=a&&a[a.length-1],o=l&&s.distanceTo(l)<this.minDistance;if(!(l&&o)){var c=this._addPoint(s),d=c.curve,m=c.widths;d&&m&&this._drawCurve(d,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};Dn.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var s=this._data[this._data.length-1],a=s[s.length-1];n.equals(a)||s.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};Dn.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Dn.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Dn.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Dn.prototype._createPoint=function(t,e,n){var s=this._canvas.getBoundingClientRect();return new ho(t-s.left,e-s.top,n||new Date().getTime())};Dn.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=n.c1,l=new Ek(e[1],s,a,e[2]),o=this._calculateCurveWidths(l);return e.shift(),{curve:l,widths:o}}return{}};Dn.prototype._calculateCurveControlPoints=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,l=e.x-n.x,o=e.y-n.y,c={x:(t.x+e.x)/2,y:(t.y+e.y)/2},d={x:(e.x+n.x)/2,y:(e.y+n.y)/2},m=Math.sqrt(s*s+a*a),u=Math.sqrt(l*l+o*o),p=c.x-d.x,h=c.y-d.y,g=u/(m+u),x={x:d.x+p*g,y:d.y+h*g},v=e.x-x.x,y=e.y-x.y;return{c1:new ho(c.x+v,c.y+y),c2:new ho(d.x+v,d.y+y)}};Dn.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,l=this._strokeWidth(a);return s.start=this._lastWidth,s.end=l,this._lastVelocity=a,this._lastWidth=l,s};Dn.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};Dn.prototype._drawPoint=function(t,e,n){var s=this._ctx;s.moveTo(t,e),s.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};Dn.prototype._drawCurve=function(t,e,n){var s=this._ctx,a=n-e,l=Math.floor(t.length());s.beginPath();for(var o=0;o<l;o+=1){var c=o/l,d=c*c,m=d*c,u=1-c,p=u*u,h=p*u,g=h*t.startPoint.x;g+=3*p*c*t.control1.x,g+=3*u*d*t.control2.x,g+=m*t.endPoint.x;var x=h*t.startPoint.y;x+=3*p*c*t.control1.y,x+=3*u*d*t.control2.y,x+=m*t.endPoint.y;var v=e+m*a;this._drawPoint(g,x,v)}s.closePath(),s.fill()};Dn.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};Dn.prototype._fromData=function(t,e,n){for(var s=0;s<t.length;s+=1){var a=t[s];if(a.length>1)for(var l=0;l<a.length;l+=1){var o=a[l],c=new ho(o.x,o.y,o.time),d=o.color;if(l===0)this.penColor=d,this._reset(),this._addPoint(c);else if(l!==a.length-1){var m=this._addPoint(c),u=m.curve,p=m.widths;u&&p&&e(u,p,d)}}else{this._reset();var h=a[0];n(h)}}};Dn.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,l=0,o=n.width/s,c=n.height/s,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",n.width),d.setAttributeNS(null,"height",n.height),this._fromData(e,function(b,k,w){var S=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){var j="M "+b.startPoint.x.toFixed(3)+","+b.startPoint.y.toFixed(3)+" "+("C "+b.control1.x.toFixed(3)+","+b.control1.y.toFixed(3)+" ")+(b.control2.x.toFixed(3)+","+b.control2.y.toFixed(3)+" ")+(b.endPoint.x.toFixed(3)+","+b.endPoint.y.toFixed(3));S.setAttribute("d",j),S.setAttribute("stroke-width",(k.end*2.25).toFixed(3)),S.setAttribute("stroke",w),S.setAttribute("fill","none"),S.setAttribute("stroke-linecap","round"),d.appendChild(S)}},function(b){var k=document.createElement("circle"),w=typeof t.dotSize=="function"?t.dotSize():t.dotSize;k.setAttribute("r",w),k.setAttribute("cx",b.x),k.setAttribute("cy",b.y),k.setAttribute("fill",b.color),d.appendChild(k)});var m="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+l+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",p=d.innerHTML;if(p===void 0){var h=document.createElement("dummy"),g=d.childNodes;h.innerHTML="";for(var x=0;x<g.length;x+=1)h.appendChild(g[x].cloneNode(!0));p=h.innerHTML}var v="</svg>",y=u+p+v;return m+btoa(y)};Dn.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,s){return e._drawCurve(n,s.start,s.end)},function(n){return e._drawDot(n)}),this._data=t};Dn.prototype.toData=function(){return this._data};var Gh={exports:{}},Mte=Gh.exports,yC;function Ite(){return yC||(yC=1,(function(t,e){(function(n,s){t.exports=s()})(Mte,function(){return(function(n){function s(l){if(a[l])return a[l].exports;var o=a[l]={exports:{},id:l,loaded:!1};return n[l].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}var a={};return s.m=n,s.c=a,s.p="",s(0)})([function(n,s){function a(m){var u=m.getContext("2d"),p=m.width,h=m.height,g=u.getImageData(0,0,p,h).data,x=c(!0,p,h,g),v=c(!1,p,h,g),y=d(!0,p,h,g),b=d(!1,p,h,g),k=b-y+1,w=v-x+1,S=u.getImageData(y,x,k,w);return m.width=k,m.height=w,u.clearRect(0,0,k,w),u.putImageData(S,0,0),m}function l(m,u,p,h){return{red:h[4*(p*u+m)],green:h[4*(p*u+m)+1],blue:h[4*(p*u+m)+2],alpha:h[4*(p*u+m)+3]}}function o(m,u,p,h){return l(m,u,p,h).alpha}function c(m,u,p,h){for(var g=m?1:-1,x=m?0:p-1,v=x;m?v<p:v>-1;v+=g)for(var y=0;y<u;y++)if(o(y,v,u,h))return v;return null}function d(m,u,p,h){for(var g=m?1:-1,x=m?0:u-1,v=x;m?v<u:v>-1;v+=g)for(var y=0;y<p;y++)if(o(v,y,u,h))return v;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Gh)),Gh.exports}var Ote=Ite();const Fte=ya(Ote);var Lte=["canvasProps","clearOnResize"],rf=(function(t){zE(n,t);var e=UE(n);function n(){var s;qE(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=e.call.apply(e,[this].concat(l)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(c){s._canvas=c,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var c=s.props;c.canvasProps,c.clearOnResize;var d=ba(c,Lte);return d},s.componentDidMount=function(){var c=s.getCanvas();s._sigPad=new Dn(c,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var c=s.getCanvas(),d=document.createElement("canvas");return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),Fte(d)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var c,d,m=(c=s.props.canvasProps)!==null&&c!==void 0?c:{},u=m.width,p=m.height;if(!(typeof u<"u"&&typeof p<"u")){var h=s.getCanvas(),g=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof u>"u"&&(h.width=h.offsetWidth*g),typeof p>"u"&&(h.height=h.offsetHeight*g),h.getContext("2d").scale(g,g),s.clear()}},s.render=function(){var c=s.props.canvasProps;return ze.createElement("canvas",Ot({ref:s.setRef},c))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(c,d){return s.getSignaturePad().fromDataURL(c,d)},s.toDataURL=function(c,d){return s.getSignaturePad().toDataURL(c,d)},s.fromData=function(c){return s.getSignaturePad().fromData(c)},s.toData=function(){return s.getSignaturePad().toData()},s}return HE(n)})(f.Component);rf.propTypes={velocityFilterWeight:Pe.number,minWidth:Pe.number,maxWidth:Pe.number,minDistance:Pe.number,dotSize:Pe.oneOfType([Pe.number,Pe.func]),penColor:Pe.string,throttle:Pe.number,onEnd:Pe.func,onBegin:Pe.func,canvasProps:Pe.object,clearOnResize:Pe.bool};rf.defaultProps={clearOnResize:!0};rf.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const $te=t=>{if(!t)return"";const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+r(" years ago","kivicare-clinic-management-system"):n===1?r("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+r(" months ago","kivicare-clinic-management-system"):n===1?r("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+r(" days ago","kivicare-clinic-management-system"):n===1?r("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+r(" hours ago","kivicare-clinic-management-system"):n===1?r("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+r(" minutes ago","kivicare-clinic-management-system"):n===1?r("1 minute ago","kivicare-clinic-management-system"):e<10?r("just now","kivicare-clinic-management-system"):Math.floor(e)+r(" seconds ago","kivicare-clinic-management-system")))))},Bte=({filled:t})=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t?"#F59E0B":"#E5E7EB",stroke:t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),dP=({rating:t,size:e="md"})=>{const n={sm:14,md:16,lg:20};return i.jsx("div",{className:"kc-star-rating",children:[...Array(5)].map((s,a)=>i.jsx("svg",{width:n[e],height:n[e],viewBox:"0 0 24 24",fill:a<t?"#F59E0B":"#E5E7EB",stroke:a<t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},a))})},qte=({distribution:t,totalReviews:e})=>{const n=[5,4,3,2,1];return i.jsx("div",{className:"kc-rating-distribution",children:n.map(s=>{const a=t[s]||0,l=e>0?a/e*100:0;return i.jsxs("div",{className:"kc-distribution-row",children:[i.jsx("span",{className:"kc-rating-number",children:s}),i.jsx(Bte,{filled:!0}),i.jsx("div",{className:"kc-bar-track",children:i.jsx("div",{className:"kc-bar-fill",style:{width:`${l}%`}})})]},s)})})},Hte=({review:t})=>i.jsxs("div",{className:"kc-review-card",children:[i.jsx("div",{className:"kc-review-avatar",children:i.jsx(Mc,{src:t.profileUrl,alt:t.patientName||r("Patient","kivicare-clinic-management-system"),text:!t.profileUrl&&t.patientName?t.patientName.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"})}),i.jsxs("div",{className:"kc-review-content",children:[i.jsx("h4",{className:"kc-review-name",children:t.patientName}),i.jsxs("div",{className:"kc-review-meta",children:[i.jsx(dP,{rating:t.rating,size:"sm"}),i.jsx("span",{className:"kc-review-separator",children:""}),i.jsx("span",{className:"kc-review-date",children:$te(t.createdAt)||""})]}),t.reviewText&&i.jsx("p",{className:"kc-review-text",children:t.reviewText})]})]}),zte=({doctorId:t})=>{const[e,n]=f.useState("date"),[s,a]=f.useState(1),[l,o]=f.useState([]),[c,d]=f.useState(!1),[m,u]=f.useState({5:0,4:0,3:0,2:0,1:0}),[p,h]=f.useState(0),[g,x]=f.useState(0),[v,y]=f.useState(0),b=f.useRef(null),k=5,w={doctor_id:t,page:s,per_page:k,...e?{sort_by:e}:{}},{data:S,isLoading:j,isFetching:T}=YR(w,{enabled:!!t,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),N=_=>{_!==e&&(n(_),a(1))};return f.useEffect(()=>{s===1&&S?.data?.distribution&&(x(S?.data?.avg_rating||0),y(S?.data?.total_reviews||0),u(S.data.distribution),h(v))},[S,s,v]),f.useEffect(()=>{const _=S?.data?.reviews||[],A=S?.data?.pagination||{},P=typeof A.has_more<"u"?!!A.has_more:A.total_pages?A.page<A.total_pages:_.length===k;d(P),s===1?o(_||[]):_&&_.length>0&&o(E=>{const M=new Set(E.map(O=>O.id)),R=[...E];return _.forEach(O=>{M.has(O.id)||(R.push(O),M.add(O.id))}),R})},[S,s]),f.useEffect(()=>{a(1),o([]),d(!1),u({5:0,4:0,3:0,2:0,1:0})},[t]),f.useEffect(()=>{const _=b.current;if(!_)return;let A=!1;const P=()=>{A||(A=!0,requestAnimationFrame(()=>{const{scrollTop:E,scrollHeight:M,clientHeight:R}=_;M-E-R<200&&c&&!T&&a(L=>L+1),A=!1}))};return _.addEventListener("scroll",P),()=>_.removeEventListener("scroll",P)},[c,T]),t?i.jsxs("div",{className:"card kc-reviews-panel",children:[i.jsx("div",{className:"kc-reviews-header",children:i.jsx("h3",{children:r("Reviews","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"kc-reviews-body",children:[i.jsxs("div",{className:"kc-rating-summary form-control",children:[i.jsxs("div",{className:"kc-rating-score",children:[i.jsx("span",{className:"kc-score-number",children:g.toFixed(1)}),i.jsxs("span",{className:"kc-score-label",children:["(",r("Ratings","kivicare-clinic-management-system"),")"]})]}),i.jsx("div",{className:"kc-rating-stars-center",children:i.jsx(dP,{rating:Math.round(g),size:"lg"})}),i.jsxs("p",{className:"kc-reviews-count",children:[v," ",r("reviews","kivicare-clinic-management-system")]}),i.jsx(qte,{distribution:m,totalReviews:p})]}),i.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[r("Reviews","kivicare-clinic-management-system")," (",v||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:e,onChange:_=>N(_.target.value),children:[i.jsx("option",{value:"date",children:r("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:r("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:r("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{ref:b,className:"kc-reviews-list position-relative",style:{maxHeight:850,overflowY:"auto"},children:[i.jsx("div",{className:`${T?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:j&&l.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("span",{className:"spinner-border  spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Loading...","kivicare-clinic-management-system")]}):l.length===0?i.jsx("div",{className:"text-center py-4 border-start border-end",children:r("No reviews yet","kivicare-clinic-management-system")}):l.map(_=>i.jsx(Hte,{review:{id:_.id,patientName:_.patient_name||_.patientName,rating:_.rating||_.rating,reviewText:_.review_text||_.reviewText,createdAt:_.created_at||_.createdAt,profileUrl:_.patient_profile_url||_.patient_profile_url}},_.id))}),T&&l.length>0&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx("div",{className:"spinner-border",role:"status"})}),!c&&l.length>0&&i.jsx("div",{className:"text-center small text-muted py-2",children:r("No more reviews","kivicare-clinic-management-system")})]})]})]}):null};function My({isEditing:t=!1,isProfile:e=!1}){const n=Ve(),s=Eee(),a=Tee(),l=hn(),{isAddonActive:o,currentuserID:c,userRole:d,defaultCountryCode:m,showOtherGender:u,defaultClinicId:p}=ut(),{data:h}=_n();f.useMemo(()=>h?.data?.kc_available_translations,[h]);const g=o("kiviPro"),{id:x}=Gt(),v=p?parseInt(p,10):null,y=Li(),b=Xn(),k=Jn(),w=e?c:x,[S,j]=f.useState(!1),T=f.useRef(null),{data:N}=ad({module_type:"doctor_module",status:1,module_id:w},{enabled:o("kiviPro")}),_=N?.data?.forms||[];f.useEffect(()=>{t&&_.length>0&&_.forEach(Ae=>{const Oe=Ae.form_data;Oe&&A.current[Ae.id]&&setTimeout(()=>{const z=A.current[Ae.id];z&&z.resetForm&&z.resetForm(Oe)},100)})},[t,_]);const A=f.useRef({}),P=()=>{const Ae={};return _.forEach(Oe=>{const z=A.current[Oe.id];z&&(Ae[Oe.id]=z.getFormData())}),Ae},E=async()=>{const Ae={};let Oe=!0,z=null;for(const Z of _){const fe=A.current[Z.id];if(fe){const _e=await fe.triggerValidation();Ae[Z.id]={isValid:_e.isValid,data:fe.getFormData(),errors:_e.errors},_e.isValid||(Oe=!1,z||(z=Z.id))}}return{allValid:Oe,formResults:Ae,firstInvalidFormId:z}},M=()=>{T.current.clear(),j(!0)},R=()=>{const Ae=T.current.toData();Ae&&(Ae.pop(),T.current.fromData(Ae),j(!0))};f.useEffect(()=>{if(T.current){const Ae=T.current.getCanvas(),Oe=()=>{j(!0)};return Ae.addEventListener("mousedown",Oe),Ae.addEventListener("touchstart",Oe),()=>{Ae.removeEventListener("mousedown",Oe),Ae.removeEventListener("touchstart",Oe)}}},[]);const[O,L]=f.useState({degree:"",university:"",year:""}),[q,Q]=f.useState({}),[V,se]=f.useState(-1),[G,ge]=f.useState(!1),[ie,W]=f.useState(!1),X=ie||s.isPending,[J,ue]=f.useState(!1),{data:le,isLoading:I,error:ee}=af(w,{enabled:(t||e)&&!!w}),K=le?.data,ne=Vc.PhoneNumberUtil.getInstance(),oe=Ae=>{try{return ne.isValidNumber(ne.parseAndKeepRawInput(Ae))}catch{return!1}},D=[{value:0,label:r("Active","kivicare-clinic-management-system")},{value:1,label:r("Inactive","kivicare-clinic-management-system")}],{register:$,handleSubmit:te,control:ae,watch:Y,setValue:H,formState:{errors:B},reset:re}=en({defaultValues:{doctorImage:"",doctorImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",specialization:[],experience:null,bloodGroup:null,status:D[0],gender:"",signature:"",description:"",address:"",city:"",country:"",postalCode:"",qualifications:[]}}),{fields:de,append:xe,remove:U,update:me}=yr({control:ae,name:"qualifications"}),ye=async({page:Ae,per_page:Oe,search:z})=>{try{const Z={dataType:"clinicList",page:Ae,per_page:Oe,search:z};return await n.fetchQuery({queryKey:pt.list(Z),queryFn:()=>Dt.getStaticData(Z),staleTime:300*1e3})}catch(Z){return console.error("Error loading clinics:",Z),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},{data:pe,isLoading:Ce,refetch:Ge}=Va("specialization"),De=Hg();if(f.useEffect(()=>{if((t||e)&&K&&!I){const Ae={firstName:K.first_name||"",lastName:K.last_name||"",email:K.email||"",contactNumber:K.contact_number||"",dob:K.dob||"",gender:K.gender||"",status:D.find(Oe=>Oe.value===parseInt(K.status))||D[0],clinic:Array.isArray(K?.clinics)?K.clinics.map(Oe=>{const z=Oe.id??Oe.clinic_id??Oe.value,Z=parseInt(z,10);return{...Oe,id:Z,value:Z,label:Oe.name||Oe.clinic_name||Oe.label}}):null,specialization:Array.isArray(K?.specialties)?K.specialties.map(Oe=>{let z=parseInt(Oe.id??Oe.value,10);if(isNaN(z)&&pe?.data){const Z=pe.data.find(fe=>fe.label===Oe.label);Z&&(z=parseInt(Z.id,10))}return{id:z,value:z,label:Oe.label}}):[],doctorImage:K.doctor_image_url||"",doctorImageId:K.doctor_image_id||"",experience:K.no_of_experience||"",address:K.address||"",city:K.city||"",country:K.country||"",postalCode:K.postal_code||"",qualifications:Array.isArray(K.qualifications)?K.qualifications.map(Oe=>({degree:Oe.degree||"",university:Oe.university||"",year:Oe.year||"",file:Oe.file||""})):[],description:K.doctor_description||""};re(Ae),K.customFields&&typeof K.customFields=="object"&&Object.entries(K.customFields).forEach(([Oe,z])=>{H(`custom_field_${Oe}`,z)}),K.doctor_signature&&T.current&&!S&&setTimeout(()=>{T?.current?.fromDataURL(K.doctor_signature)},100),setTimeout(()=>{H("contactNumber",K.contact_number||"")},0)}},[t,e,K,pe]),f.useEffect(()=>{if(ee){const Ae=ee?.response?.data?.message||r("You do not have permission to view this doctor.","kivicare-clinic-management-system");Te.error(Ae,{position:"top-right",autoClose:5e3}),l("/doctor",{replace:!0})}},[ee,l]),(t||e)&&I)return i.jsx(Py,{});if((t||e)&&ee)return null;const $e=()=>{L({degree:"",university:"",year:""}),se(-1),ge(!0)},et=Ae=>{const Oe=de[Ae];L({degree:Oe.degree||"",university:Oe.university||"",year:Oe.year||""}),se(Ae),ge(!0)},tt=Ae=>{const{name:Oe,value:z}=Ae.target;L(Z=>({...Z,[Oe]:z})),q[Oe]&&Q(Z=>({...Z,[Oe]:""}))},qe=()=>{const Ae={};if(O.degree.trim()||(Ae.degree=r("Degree is required","kivicare-clinic-management-system")),O.university.trim()||(Ae.university=r("University is required","kivicare-clinic-management-system")),!O.year)Ae.year=r("Year is required","kivicare-clinic-management-system");else{const Oe=new Date().getFullYear(),z=parseInt(O.year);(z<1950||z>Oe)&&(Ae.year=r(`Year must be between 1950 and ${Oe}`,"kivicare-clinic-management-system"))}if(Object.keys(Ae).length>0){Q(Ae);return}Q({}),V>=0?(Te.success(r("Qualification updated successfully","kivicare-clinic-management-system")),me(V,O)):(Te.success(r("Qualification added successfully","kivicare-clinic-management-system")),xe(O)),L({degree:"",university:"",year:""}),ge(!1),se(-1)},we=()=>{L({degree:"",university:"",year:""}),Q({}),ge(!1),se(-1)},Ee={control:(Ae,Oe)=>({...Ae,borderColor:Oe.isFocused?"#86b7fe":"#dee2e6",boxShadow:Oe.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null,"&:hover":{borderColor:Oe.isFocused?"#86b7fe":"#dee2e6"},minHeight:"38px",fontSize:"1rem"}),placeholder:Ae=>({...Ae,color:"#6c757d"}),singleValue:Ae=>({...Ae,color:"#495057"})},Qe=Ae=>({...Ee,control:(Oe,z)=>({...Ee.control(Oe,z),borderColor:Ae?"#dc3545":z.isFocused?"#86b7fe":"#dee2e6",boxShadow:Ae?"0 0 0 0.25rem rgba(220, 53, 69, 0.25)":z.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null})}),nt=(Ae,Oe)=>{H(Ae,Oe.url||Oe.image),H(`${Ae}Id`,Oe.id||Oe.imageId)},Ht=async Ae=>{if(W(!0),_.length>0&&!(await E()).allValid){Te.error(r("Please fix errors in the custom information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),W(!1);return}let Oe=null;if(T.current&&(S||!t))try{T.current.isEmpty()?Oe="":Oe=T.current.getCanvas().toDataURL("image/png")}catch(Z){console.error("Error processing signature:",Z)}const z={first_name:Ae.firstName,last_name:Ae.lastName,email:Ae.email,mobile_number:Ae.contactNumber,dob:Ae.dob,specialties:Array.isArray(Ae.specialization)?Ae.specialization.map(Z=>({id:Z.value,label:Z.label})):Ae.specialization?[{id:Ae.specialization.value,label:Ae.specialization.label}]:[],experience_years:Ae.experience?.value||Ae.experience,blood_group:Ae.bloodGroup?.value||Ae.bloodGroup,status:typeof Ae.status=="object"?Ae.status?.value:Ae.status,gender:Ae.gender,signature:Ae.signature,description:Ae.description,doctor_image_id:Ae.doctorImageId??null,address:Ae.address,city:Ae.city,country:Ae.country,postal_code:Ae.postalCode,qualifications:Ae.qualifications,...S||!t?{doctor_signature:Oe??""}:{},customForm:P(),customFields:Object.keys(Ae).reduce((Z,fe)=>{if(fe.startsWith("custom_field_")){const _e=fe.replace("custom_field_","");Z[_e]=Ae[fe]}return Z},{})};k||b?z.clinic_id=[{id:String(v)}]:Ae.clinic&&Array.isArray(Ae.clinic)&&Ae.clinic.length>0&&(z.clinic_id=Ae.clinic.map(Z=>({id:String(Z.value||Z.id)})));try{let Z;t||e?(Z=await a.mutateAsync({id:w,...z}),Te.success(r("Doctor updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),e||l("/doctor")):(Z=await s.mutateAsync(z),Te.success(r("Doctor created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),l("/doctor"))}catch(Z){console.error("Error saving doctor:",Z);const fe=Z?.response?.data?.message||(t?r("Failed to update doctor","kivicare-clinic-management-system"):r("Failed to create doctor","kivicare-clinic-management-system"));Te.error(fe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{W(!1)}},Lt=Ae=>{console.log("Validation errors:",Ae);const Oe=Object.keys(Ae)[0],z=document.getElementById(Oe);z&&(z.scrollIntoView({behavior:"smooth",block:"center"}),z.focus())},Yt=Ae=>{U(Ae),Te.success(r("Qualification deleted successfully","kivicare-clinic-management-system"))},xt={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:!k&&!b?{required:r("Clinic selection is required","kivicare-clinic-management-system")}:{},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:Ae=>Ae?oe(Ae)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},dob:{validate:Ae=>{if(!Ae)return!0;const Oe=new Date(Ae);return new Date().getFullYear()-Oe.getFullYear()>=18||r("Doctor must be at least 18 years old","kivicare-clinic-management-system")}},specialization:{required:r("Specialization is required","kivicare-clinic-management-system")},experience:{validate:Ae=>{if(!Ae)return!0;const Oe=parseFloat(Ae);return isNaN(Oe)?r("Please enter a valid number","kivicare-clinic-management-system"):Oe<0?r("Experience cannot be negative","kivicare-clinic-management-system"):Oe>100?r("Experience cannot be more than 100 years","kivicare-clinic-management-system"):!0}},status:{required:r("Status is required","kivicare-clinic-management-system")},gender:{required:r("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},"qualifications.degree":{required:r("Degree is required","kivicare-clinic-management-system")},"qualifications.university":{required:r("College/University is required","kivicare-clinic-management-system")},"qualifications.year":{required:r("Year is required","kivicare-clinic-management-system"),min:{message:r("Year must be 1950 or later","kivicare-clinic-management-system")},max:{value:new Date().getFullYear(),message:r(`Year cannot be later than ${new Date().getFullYear()}`,"kivicare-clinic-management-system")}}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Doctor","kivicare-clinic-management-system"):r("Add Doctor","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"d-flex gap-4",children:[i.jsx("div",{className:"kc-doctor-profile",children:i.jsxs("form",{onSubmit:te(Ht,Lt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:r("Profile Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(Ne,{name:"doctorImage",control:ae,render:({field:Ae})=>i.jsx(yl,{id:"doctor-image-upload",name:"doctorImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:Ae.value,defaultImageId:Y("doctorImageId"),onChange:Oe=>nt("doctorImage",Oe),setValue:H,size:200})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${B.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...$("firstName",xt.firstName)}),B.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${B.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...$("lastName",xt.lastName)}),B.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${B.email?"is-invalid":""}`,placeholder:r('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...$("email",xt.email)}),B.email&&i.jsx("div",{className:"invalid-feedback d-block",children:B.email.message})]})}),g&&!k&&!b&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:ae,rules:xt.clinic,render:({field:Ae})=>i.jsx(dn,{id:"clinic",loadOptions:ye,value:Ae.value,onChange:Oe=>{Ae.onChange(Oe)},placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${B.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{},isMulti:!0,getOptionValue:Oe=>Oe?.value??Oe?.id,getOptionLabel:Oe=>Oe?.label??Oe?.name??Oe?.clinic_name})}),B.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:B.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"contactNumber",control:ae,rules:xt.contactNumber,render:({field:Ae})=>i.jsx(eo,{defaultCountry:m,value:Ae.value,onChange:Ae.onChange,inputProps:{className:`form-control ${B.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":B.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),B.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:B.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:r("DOB","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"dob",control:ae,rules:xt.dob,render:({field:Ae})=>i.jsx(Un,{id:"dob",className:`form-control ${B.dob?"is-invalid":""}`,value:Ae.value?Zn(Ae.value):"",onChange:Oe=>{if(Oe&&Oe[0]){const z=Oe[0],Z=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`;Ae.onChange(Z)}else Ae.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&I})}),B.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:B.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"specialization",className:"form-label",children:[r("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"specialization",control:ae,rules:xt.specialization,render:({field:Ae})=>i.jsx(Xc,{id:"specialization",options:pe?.data??[],value:Ae.value,onChange:Oe=>{Ae.onChange(Oe)},onCreateOption:Oe=>{De.mutate(Oe,{onSuccess:z=>{if(z?.data){const Z={id:parseInt(z?.data?.data.id,10),value:parseInt(z?.data?.data.id,10),label:z?.data?.data.label};Ae.onChange([...Ae.value||[],Z])}Te.success(r("Specialization added successfully","kivicare-clinic-management-system"))},onError:z=>{console.error("Failed to save specialization:",z),console.error("Error details:",z.response?.data),Te.error(r("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Oe=>{const z=Oe.value??Oe.id;return z!=null?String(z):""},getOptionLabel:Oe=>Oe.label,placeholder:r("Select or create specialization","kivicare-clinic-management-system"),isLoading:Ce,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1,className:`react-select ${B.specialization?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",noOptionsMessage:()=>r("Type to create a new specialization","kivicare-clinic-management-system"),formatCreateLabel:Oe=>r("Add specialization","kivicare-clinic-management-system")+`: "${Oe}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new specialization","kivicare-clinic-management-system")]}),B.specialization&&i.jsx("div",{className:"invalid-feedback d-block",children:B.specialization.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"experience",className:"form-label",children:r("Experience (In Years)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"experience",className:`form-control ${B.experience?"is-invalid":""}`,placeholder:r("Enter experience","kivicare-clinic-management-system"),...$("experience",xt.experience),onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}}),B.experience&&i.jsx("div",{className:"invalid-feedback d-block",children:B.experience.message})]})}),!e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:ae,rules:xt.status,render:({field:Ae})=>i.jsx(ct,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:D,value:Ae.value,onChange:Ae.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{...Qe(B.status),menuPortal:Oe=>({...Oe,zIndex:9999})}})}),B.status&&i.jsx("div",{className:"invalid-feedback d-block",children:B.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",style:{cursor:"pointer"},...$("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",style:{cursor:"pointer"},...$("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),u&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",style:{cursor:"pointer"},...$("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),B.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:B.gender.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",className:"form-label h6",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:"form-control",rows:"2",placeholder:r("Write description","kivicare-clinic-management-system"),...$("description")})]})}),i.jsxs("div",{className:"col-lg-4 col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signature",className:"form-label d-block",children:r("Signature","kivicare-clinic-management-system")}),i.jsx(rf,{ref:T,id:"signatureCanvas",className:"w-100 rounded",canvasProps:{width:500,height:100,className:"sigCanvas"},penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(220,220,220)"})]}),i.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[i.jsx("button",{type:"button",onClick:R,className:"btn btn-secondary",children:r("Undo","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",onClick:M,className:"btn btn-primary",children:r("Clear","kivicare-clinic-management-system")})]})]})]})})]}),i.jsx("div",{className:"row gy-4"})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:r("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${B.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...$("address",xt.address)}),B.address&&i.jsx("div",{className:"invalid-feedback d-block",children:B.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${B.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...$("city",xt.city)}),B.city&&i.jsx("div",{className:"invalid-feedback d-block",children:B.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${B.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...$("country",xt.country)}),B.country&&i.jsx("div",{className:"invalid-feedback d-block",children:B.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${B.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...$("postalCode",xt.postalCode),onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}}),B.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:B.postalCode.message})]})})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:r("Add Qualification","kivicare-clinic-management-system")}),!G&&i.jsxs("button",{type:"button",onClick:$e,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Qualification","kivicare-clinic-management-system")})]})]}),G&&i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-4 bg-body rounded",children:[i.jsx("h6",{children:V>=0?r("Edit Qualification","kivicare-clinic-management-system"):r("Add Qualification","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3 mt-2",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"degree",className:"form-label",children:[r("Degree","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"degree",name:"degree",className:`form-control ${q.degree?"is-invalid":""}`,placeholder:r('eg "Dermatology"',"kivicare-clinic-management-system"),value:O.degree,onChange:tt}),q.degree&&i.jsx("div",{className:"invalid-feedback d-block",children:q.degree})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"university",className:"form-label",children:[r("University","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"university",name:"university",className:`form-control ${q.university?"is-invalid":""}`,placeholder:r('eg "I"',"kivicare-clinic-management-system"),value:O.university,onChange:tt}),q.university&&i.jsx("div",{className:"invalid-feedback d-block",children:q.university})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"year",className:"form-label",children:[r("Year","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"number",id:"year",name:"year",className:`form-control ${q.year?"is-invalid":""}`,placeholder:r("1999","kivicare-clinic-management-system"),min:"1950",max:new Date().getFullYear(),value:O.year,onChange:tt,onInput:Ae=>{Ae.target.value=Ae.target.value.replace(/[^0-9]/g,"")}}),q.year&&i.jsx("div",{className:"invalid-feedback d-block",children:q.year})]})}),i.jsxs("div",{className:"col-12 text-end",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:we,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:qe,children:r("Save","kivicare-clinic-management-system")})]})]})]})}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",children:r("SR. NO","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Degree","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("College/University","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Year","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Action","kivicare-clinic-management-system")})]})}),i.jsx("tbody",{children:de.length>0?de.map((Ae,Oe)=>i.jsxs("tr",{children:[i.jsxs("th",{children:[Oe+1,"."]}),i.jsx("td",{children:Ae.degree}),i.jsx("td",{children:Ae.university}),i.jsx("td",{children:Ae.year}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:()=>et(Oe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-pencil"})})}),i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>Yt(Oe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})]})})]},Ae.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"text-center py-4 start-border end-border",children:r("No records found","kivicare-clinic-management-system")})})})]})})]})}),i.jsx(tf,{moduleType:"doctor_module",control:ae,errors:B,setValue:H,watch:Y}),g&&_.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Form","kivicare-clinic-management-system")}),_.map(Ae=>i.jsx(St,{className:"mb-4",children:i.jsxs(Ha,{children:[i.jsx("h6",{className:"mb-3",children:Ae.name?.text||Ae.name}),i.jsx("div",{id:`custom-form-${Ae.id}`,children:i.jsx(Wa,{ref:Oe=>A.current[Ae.id]=Oe,fields:Ae.fields,data:Ae.form_data||{},readOnly:!1,formId:`form_${Ae.id}`})})]})},Ae.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:X}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:X,children:X?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save Doctor","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"kc-doctor-ratings-reviews",children:y&&(t||e)&&w&&g&&i.jsx(zte,{doctorId:w})})]})]})}const Vte=Object.freeze(Object.defineProperty({__proto__:null,default:My},Symbol.toStringTag,{value:"Module"})),Ro={getDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions",method:"GET",data:t}),getDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"GET"}),createDoctorSession:t=>ve({endpoint:"doctor-sessions",method:"POST",data:t}),updateDoctorSession:(t,e)=>ve({endpoint:`doctor-sessions/${t}`,method:"PUT",data:e}),deleteDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"DELETE"}),bulkDeleteDoctorSessions:t=>ve({endpoint:"doctor-sessions/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorSessionStatus:(t,e)=>ve({endpoint:"doctor-sessions/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions/export",method:"GET",data:t})},ua={all:["doctorSessions"],lists:()=>[...ua.all,"list"],list:t=>[...ua.lists(),{filters:t}],details:()=>[...ua.all,"detail"],detail:t=>[...ua.details(),t]},Ute=(t={},e={})=>ft({queryKey:ua.list(t),queryFn:()=>Ro.getDoctorSessions(t),...e}),Wte=(t,e={})=>ft({queryKey:ua.detail(t),queryFn:()=>Ro.getDoctorSession(t),enabled:!!t,...e}),Kte=()=>{const t=Ve();return Le({mutationFn:e=>Ro.createDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},Gte=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Ro.updateDoctorSession(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ua.detail(n.id)}),t.invalidateQueries({queryKey:ua.lists()})}})},Yte=()=>{const t=Ve();return Le({mutationFn:e=>Ro.deleteDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},Qte=()=>{const t=Ve();return Le({mutationFn:e=>Ro.bulkDeleteDoctorSessions(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},Zte=()=>Le({mutationFn:t=>Ro.exportDoctorSessions(t)}),gh=[{id:"mon",label:r("Monday","kivicare-clinic-management-system")},{id:"tue",label:r("Tuesday","kivicare-clinic-management-system")},{id:"wed",label:r("Wednesday","kivicare-clinic-management-system")},{id:"thu",label:r("Thursday","kivicare-clinic-management-system")},{id:"fri",label:r("Friday","kivicare-clinic-management-system")},{id:"sat",label:r("Saturday","kivicare-clinic-management-system")},{id:"sun",label:r("Sunday","kivicare-clinic-management-system")}],bn={timeToMinutes:t=>{if(!t)return 0;const[e,n]=t.split(":").map(Number);return e*60+n},minutesToTime:t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},formatTime:t=>{if(!t)return"";try{const[e,n]=t.split(":").map(Number),s=new Date;return s.setHours(e,n,0),s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return t}},isBefore:(t,e)=>bn.timeToMinutes(t)<bn.timeToMinutes(e),isAfter:(t,e)=>bn.timeToMinutes(t)>bn.timeToMinutes(e),doRangesOverlap:(t,e,n,s)=>{const a=bn.timeToMinutes(t),l=bn.timeToMinutes(e),o=bn.timeToMinutes(n),c=bn.timeToMinutes(s);return a<c&&o<l}},Am=({name:t,control:e,rules:n,placeholder:s,error:a,id:l})=>i.jsx(Ne,{name:t,control:e,rules:n,render:({field:o})=>{let c=Array.isArray(o.value)?o.value[0]:o.value;return c instanceof Date&&(c=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`),i.jsx(Un,{value:c,onChange:d=>{if(d&&d.length>0){const m=d[0],u=`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`;o.onChange(u)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none ${a?"is-invalid":""}`,placeholder:s,id:l||t})}}),Xte=()=>{const{getValues:t}=lb(),e=f.useCallback(l=>o=>o?!0:r("Start time is required","kivicare-clinic-management-system"),[]),n=f.useCallback(l=>o=>{if(!o)return r("End time is required","kivicare-clinic-management-system");const c=t(`days.${l}.mainSession.start`);return c?bn.isAfter(o,c)?bn.timeToMinutes(o)-bn.timeToMinutes(c)<30?r("Session must be at least 30 minutes long","kivicare-clinic-management-system"):!0:r("End time must be after start time","kivicare-clinic-management-system"):!0},[t]),s=f.useCallback((l,o)=>c=>{if(!c)return r("Break start time is required","kivicare-clinic-management-system");const d=t(`days.${l}.mainSession`);if(!d||!d.start||!d.end)return r("Please set main session times first","kivicare-clinic-management-system");if(!bn.isAfter(c,d.start)||!bn.isBefore(c,d.end))return r("Break must be within session hours","kivicare-clinic-management-system");const u=(t(`days.${l}.breaks`)||[]).filter((p,h)=>h!==o);for(let p=0;p<u.length;p++){const h=u[p];if(h.start&&h.end&&bn.timeToMinutes(c)>=bn.timeToMinutes(h.start)&&bn.timeToMinutes(c)<bn.timeToMinutes(h.end))return r("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]),a=f.useCallback((l,o)=>c=>{if(!c)return r("Break end time is required","kivicare-clinic-management-system");const d=t(`days.${l}.mainSession`),m=t(`days.${l}.breaks.${o}.start`);if(!d||!d.start||!d.end)return r("Please set main session times first","kivicare-clinic-management-system");if(!m)return r("Please set break start time first","kivicare-clinic-management-system");if(!bn.isAfter(c,m))return r("Break end time must be after break start time","kivicare-clinic-management-system");if(!bn.isBefore(c,d.end))return r("Break must end before session ends","kivicare-clinic-management-system");if(bn.timeToMinutes(c)-bn.timeToMinutes(m)<15)return r("Break must be at least 15 minutes long","kivicare-clinic-management-system");const h=(t(`days.${l}.breaks`)||[]).filter((g,x)=>x!==o);for(let g=0;g<h.length;g++){const x=h[g];if(x.start&&x.end&&bn.doRangesOverlap(m,c,x.start,x.end))return r("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]);return{validateSessionStart:e,validateSessionEnd:n,validateBreakStart:s,validateBreakEnd:a}};function Dm({isEditing:t=!1,hideDoctorField:e=!1}){const{id:n,doctorId:s}=Gt(),{data:a,isLoading:l}=Wte(n),{data:o}=af(s?parseInt(s):null),{pathname:c}=Kn(),d=c.includes("setting")?"/setting":"",m=hn(),{isAddonActive:u,defaultClinicId:p,currentDoctorId:h,userRole:g}=ut(),{data:x}=_n(),v=Li(),y=Xn(),b=Jn(),k=u("kiviPro"),w=v?h:s?parseInt(s):null,S=Kte(),j=Gte(),T=en({defaultValues:{clinic:b||y?{value:p,label:""}:k?null:{value:p,label:""},doctor:null,timeSlot:"00:00",days:gh.map(ue=>({id:ue.id,enabled:!1,mainSession:{start:"09:00",end:"18:00"},breaks:[]}))},mode:"onChange"}),{control:N,handleSubmit:_,setValue:A,getValues:P,formState:{errors:E,isValid:M}}=T,R=Ve(),O=async({page:ue,per_page:le,search:I,doctor_id:ee})=>{try{const K={dataType:"clinicList",page:ue,per_page:le,search:I};return ee&&(K.doctor_id=ee,K.exclude_with_sessions=!0),await R.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:300*1e3})}catch(K){return console.error("Error loading clinics:",K),{data:[],pagination:{has_more:!1}}}},L=async({page:ue,per_page:le,search:I,clinic_ids:ee})=>{try{const K={dataType:"staticData",staticDataType:"doctors",clinic_ids:ee,page:ue,per_page:le,search:I};return ee&&!n&&(K.exclude_with_sessions=!0),await R.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:0})}catch(K){return console.error("Error loading doctors:",K),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},q=br({control:N,name:"clinic"}),Q=f.useMemo(()=>b||y?p:k?Array.isArray(q)&&q.length>0?q.map(le=>le.value):q&&q.value?q.value:null:p,[k,q,p,g]),{data:V,isLoading:se}=OA(Q),G=f.useMemo(()=>V?.data?V.data:[],[V?.data]);f.useEffect(()=>{if(o?.data&&w&&!n){const ue=o.data.display_name||"";A("doctor",{value:w,label:ue})}},[o,w,n,A]),f.useEffect(()=>{if(a&&n){const ue=a?.data,le=gh.map(I=>{const ee=ue.days?.find(ne=>ne.id===I.id),K=!!ee?.enabled;return K&&Array.isArray(ee.breaks)&&ee.breaks.length>0&&ee.breaks,{id:I.id,enabled:K,mainSession:K?{start:ee.main_session?.start||"",end:ee.main_session?.end||""}:{start:"",end:""},breaks:K?Array.isArray(ee.breaks)?ee.breaks:[]:[]}});T.reset({clinic:ue.clinicId?{value:ue.clinicId,label:ue.clinicName}:null,doctor:ue.doctorId?{value:ue.doctorId,label:ue.doctorName}:null,timeSlot:ue.time_slot||"00:30",days:le})}},[a,n,T]);const ge=br({control:N,name:"days"}),ie=f.useMemo(()=>ge?.every(ue=>ue.enabled)||!1,[ge]),W=f.useCallback(ue=>{const le=P("days");A("days",le.map(I=>({...I,enabled:ue,mainSession:ue?{start:"09:00",end:"18:00"}:{start:"",end:""}})))},[P,A]),X=f.useCallback(ue=>{const le=ue.days.filter(ne=>ne.enabled);if(le.length===0){Te.error(r("Please select at least one day","kivicare-clinic-management-system"));return}for(const ne of le)if(!ne.mainSession.start||!ne.mainSession.end){Te.error(r(`Please set session times for ${gh.find(oe=>oe.id===ne.id)?.label}`,"kivicare-clinic-management-system"));return}const I=s?parseInt(s):v?h:ue?.doctor?.value,ee=ue?.clinic?.value||p,K={doctor_id:I,clinic_id:ee,time_slot:ue?.timeSlot,days:ue.days.map(ne=>({id:ne.id,enabled:ne.enabled,main_session:{start:ne.mainSession.start,end:ne.mainSession.end},breaks:ne.breaks.map(oe=>({start:oe.start,end:oe.end}))}))};t&&n?j.mutate({id:n,...K},{onSuccess:()=>{Te.success(r("Doctor session updated successfully","kivicare-clinic-management-system")),m(`${d}/doctor-session`)},onError:ne=>{Te.error(ne?.message||r("Failed to update session","kivicare-clinic-management-system"))}}):S.mutate(K,{onSuccess:()=>{Te.success(r("Doctor session created successfully","kivicare-clinic-management-system")),s&&R.invalidateQueries({queryKey:pt.list({dataType:"clinicList",doctor_id:parseInt(s)})});const ne=s?`/doctor/${s}/sessions`:`${d}/doctor-session`;m(ne)},onError:ne=>{console.log(ne),Te.error(ne?.response?.data?.message||r("Failed to create session","kivicare-clinic-management-system"))}})},[v,h,p,S,j,t,n,d,m,s]),J=f.useCallback(ue=>{const le=Object.keys(ue);if(le.length>0){const I=le[0];if(["clinic","doctor","timeSlot"].includes(I)){const ee=document.getElementById(I);if(ee){ee.scrollIntoView({behavior:"smooth",block:"center"});return}}if(I==="days"){const ee=ue.days;for(const K in ee){const ne=ee[K];if(ne){if(ne.mainSession){if(ne.mainSession.start){document.getElementById(`days.${K}.mainSession.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(ne.mainSession.end){document.getElementById(`days.${K}.mainSession.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}if(ne.breaks)for(const oe in ne.breaks){const D=ne.breaks[oe];if(D){if(D.start){document.getElementById(`days.${K}.breaks.${oe}.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(D.end){document.getElementById(`days.${K}.breaks.${oe}.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}}}}}}},[]);return t&&l?i.jsx(eg,{}):i.jsx(r_,{...T,children:i.jsxs("div",{className:"doctor-session-module",children:[i.jsx("h5",{className:"mb-4",children:t?r("Edit Doctor Sessions","kivicare-clinic-management-system"):r("Add Doctor Session","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:_(X,J),className:"mb-0",children:[i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:i.jsx(Jte,{control:N,errors:E,isProActive:k,isDoctorUser:v,isEditing:t,isReceptionistUser:y,isClinicAdminUser:b,loadClinicOptions:O,loadDoctorOptions:L,doctors:G,loadingDoctors:se,doctorSessionData:a?.data,hideDoctorField:e,doctorId:s})})})})}),i.jsx(ene,{checked:ie,onChange:W}),i.jsx("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:ge?.map((ue,le)=>i.jsx(nne,{day:gh.find(I=>I.id===ue.id),dayIndex:le,control:N,errors:E},ue.id))}),i.jsx(tne,{isValid:M,isEditing:t,onCancel:()=>m(`${d}/doctor-session`)})]})]})})}const Jte=({control:t,errors:e,isProActive:n,isDoctorUser:s,isEditing:a,isReceptionistUser:l,isClinicAdminUser:o,loadClinicOptions:c,loadDoctorOptions:d,doctors:m,loadingDoctors:u,doctorSessionData:p,hideDoctorField:h=!1,doctorId:g})=>{const x=br({control:t,name:"clinic"});return i.jsxs(i.Fragment,{children:[n&&!l&&!o&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:t,rules:{required:r("Clinic selection is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx(dn,{id:"clinic",loadOptions:c,value:v.value,onChange:y=>{v.onChange(y),t._formValues.doctor=null},placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${e.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:g?{doctor_id:parseInt(g)}:{}})}),e.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:e.clinic.message})]})}),!s&&!h&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"doctor",control:t,rules:{required:r("Doctor selection is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx(dn,{id:"doctor",loadOptions:d,value:v.value,onChange:y=>v.onChange(y),placeholder:x?r("Select Doctor","kivicare-clinic-management-system"):r("Select Clinic first","kivicare-clinic-management-system"),className:`react-select-box ${e.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!x,dependencies:{clinic_ids:x?.value}},`doctor-${x?.value||"none"}`)}),e.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:e.doctor.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Time Slot Duration","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"timeSlot",control:t,rules:{required:r("Time slot is required","kivicare-clinic-management-system"),validate:v=>!v||v==="00:00"?r("Time slot is required","kivicare-clinic-management-system"):!0},render:({field:v})=>i.jsx(Am,{name:v.name,control:t,rules:v.rules,placeholder:r("Select time slot","kivicare-clinic-management-system"),error:e.timeSlot,format:"m"})}),e.timeSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:e.timeSlot.message})]})})]})},ene=({checked:t,onChange:e})=>i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:t,onChange:n=>e(n.target.checked),id:"select-all-days"}),i.jsx("label",{htmlFor:"select-all-days",className:"form-label text-heading fw-semibold font-size-14 mb-0",children:r("Select All Days","kivicare-clinic-management-system")})]})}),tne=({isValid:t,isEditing:e,onCancel:n})=>i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-3",onClick:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:e?r("Update Sessions","kivicare-clinic-management-system"):r("Save Session","kivicare-clinic-management-system")})]}),nne=ze.memo(({day:t,dayIndex:e,control:n,errors:s})=>{const a=br({control:n,name:`days.${e}.enabled`,defaultValue:!1}),{fields:l,append:o,remove:c}=yr({control:n,name:`days.${e}.breaks`}),d=f.useCallback(()=>o({start:"",end:""}),[o]),{validateSessionStart:m,validateSessionEnd:u,validateBreakStart:p,validateBreakEnd:h}=Xte(),g=br({control:n,name:`days.${e}.mainSession.start`}),x=br({control:n,name:`days.${e}.mainSession.end`}),v=f.useMemo(()=>{if(g&&x){const y=bn.timeToMinutes(x)-bn.timeToMinutes(g);return y>0?y:0}return 0},[g,x]);return i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap",children:[i.jsxs("div",{className:"form-check",children:[i.jsx(Ne,{name:`days.${e}.enabled`,control:n,render:({field:y})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:y.value,onChange:b=>{const k=b.target.checked;y.onChange(k)},id:`days.${e}.enabled`})}),i.jsx("label",{className:"form-label text-heading fw-semibold font-size-14 mb-0",htmlFor:`days.${e}.enabled`,children:t.label})]}),a?i.jsx("button",{type:"button",className:"btn btn-link fw-bold font-size-14 p-0",onClick:d,disabled:!g||!x,children:r("Add Break","kivicare-clinic-management-system")}):i.jsx("span",{className:"fw-bold font-size-14 text-muted",children:r("Not scheduled","kivicare-clinic-management-system")})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mt-3",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Session Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.start`,control:n,rules:{required:a&&r("Start time is required","kivicare-clinic-management-system"),validate:m(e)},placeholder:r("Start Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Session End","kivicare-clinic-management-system")}),i.jsx(Am,{name:`days.${e}.mainSession.end`,control:n,rules:{required:a&&r("End time is required","kivicare-clinic-management-system"),validate:u(e)},placeholder:r("End Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.end})]})]}),g&&x&&v>0&&i.jsx("div",{className:"bg-info-subtle rounded py-2 px-3 my-3",children:i.jsxs("small",{children:[r("Session Duration:","kivicare-clinic-management-system")," ",Math.floor(v/60),"h ",v%60,"m",i.jsx("br",{}),r("Time:","kivicare-clinic-management-system")," ",bn.formatTime(g)," - ",bn.formatTime(x)]})}),(s?.days?.[e]?.mainSession?.start||s?.days?.[e]?.mainSession?.end)&&i.jsx("div",{className:"bg-danger-subtle rounded py-2 px-3",children:s.days[e].mainSession.start?.message||s.days[e].mainSession.end?.message}),l.map((y,b)=>i.jsx(ine,{dayIndex:e,breakIndex:b,control:n,errors:s,onRemove:()=>c(b),validateStart:p(e,b),validateEnd:h(e,b)},y.id)),g&&x&&l.length===0&&i.jsx("div",{className:"text-center mt-3",children:i.jsx("small",{className:"text-muted",children:r('No breaks scheduled. Click "Add Break" to add a break time.',"kivicare-clinic-management-system")})})]})]})})})})}),ine=ze.memo(({dayIndex:t,breakIndex:e,control:n,errors:s,onRemove:a,validateStart:l,validateEnd:o})=>{const c=`days.${t}.breaks.${e}.start`,d=`days.${t}.breaks.${e}.end`,m=br({control:n,name:c}),u=br({control:n,name:d}),p=f.useMemo(()=>{if(m&&u){const h=bn.timeToMinutes(u)-bn.timeToMinutes(m);return h>0?h:0}return 0},[m,u]);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border rounded p-3 mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsxs("h6",{className:"mb-0",children:[r("Break","kivicare-clinic-management-system")," ",e+1]}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a,children:[i.jsx("i",{className:"ph ph-trash"})," ",r("Remove","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Break Start","kivicare-clinic-management-system")}),i.jsx(Am,{name:c,control:n,rules:{required:r("Break start time is required","kivicare-clinic-management-system"),validate:l},placeholder:r("Break Start","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Break End","kivicare-clinic-management-system")}),i.jsx(Am,{name:d,control:n,rules:{required:r("Break end time is required","kivicare-clinic-management-system"),validate:o},placeholder:r("Break End","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.end})]})]}),m&&u&&p>0&&i.jsx("div",{className:"alert alert-light py-1 mb-0",children:i.jsxs("small",{children:[r("Break Duration:","kivicare-clinic-management-system")," ",p,"m (",bn.formatTime(m)," - ",bn.formatTime(u),")"]})}),(s?.days?.[t]?.breaks?.[e]?.start||s?.days?.[t]?.breaks?.[e]?.end)&&i.jsx("div",{className:"alert alert-danger py-2 mt-2 mb-0",children:i.jsx("small",{children:s.days[t].breaks[e].start?.message||s.days[t].breaks[e].end?.message})})]})})});function Tk({filterByDoctor:t=!1}){const{pathname:e}=Kn(),{doctorId:n}=Gt(),s=e.includes("setting")?"/setting":"",a=Li(),[l,o]=f.useState([]),c=Ve(),d=Xn(),m=Jn(),[u,p]=f.useState({page:1,perPage:10,search:"",doctor_id:t&&n?parseInt(n):"",clinic_id:"",days:"",timeSlot:"",orderBy:"",order:""}),[h,g]=f.useState(""),[x,v]=f.useState(!1),[y,b]=f.useState(!1),k=f.useRef(null),{isAddonActive:w,hasCapability:S}=ut(),j=w?w("kiviPro"):!0,{data:T,isLoading:N,error:_}=Ute(u),{data:A,isLoading:P}=_k({perPage:100}),{data:E}=af(t&&n?parseInt(n):null),M=async({page:K,per_page:ne,search:oe})=>{try{const D={dataType:"clinicList",page:K,per_page:ne,search:oe},$=await c.fetchQuery({queryKey:pt.list(D),queryFn:()=>Dt.getStaticData(D),staleTime:300*1e3}),te=$.data.map(ae=>({value:ae.id,label:ae.label||ae.name}));return o(ae=>[...ae,...te]),$}catch(D){return console.error("Error loading clinics:",D),{data:[],pagination:{has_more:!1}}}};f.useEffect(()=>{t&&n&&p(K=>({...K,doctor_id:parseInt(n)}))},[n,t]);const R=Yte(),O=Qte(),L=Zte(),q=T?.data?.sessions||[],Q=T?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},V=f.useMemo(()=>A?.data?.doctors?[...A.data.doctors.map(K=>({value:K.id,label:K.name}))]:[],[A?.data?.doctors]),se=async K=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ne={format:K,...u},oe=await L.mutateAsync(ne);if(oe?.data?.sessions){const D=oe.data.sessions,$=new Date().toISOString().split("T")[0],te=D.map(ae=>({id:ae.id,clinic_id:ae.clinic_id||"",clinic_name:ae.clinic_name||"",days:ae.days||"",doctor_id:ae.doctor_id||"",doctor_name:ae.doctor_name||"",time_slot:ae.time_slot||"",morning_session:ae.morning_session||"",evening_session:ae.evening_session||""}));switch(K){case"csv":ps(te,`doctor-sessions-${$}.csv`);break;case"xls":gs(te,`doctor-sessions-${$}.xls`);break;case"pdf":fs(te,`doctor-sessions-${$}.pdf`,"Doctor Sessions List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(ne){console.error("Export error:",ne),rt({title:r("Error!","kivicare-clinic-management-system"),text:ne.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},G=()=>se("csv"),ge=()=>se("xls"),[ie,W]=f.useState(!1),X=()=>{ie||(W(!0),se("pdf"),setTimeout(()=>W(!1),2e3))},J=Ln(),ue=f.useMemo(()=>[J.accessor("doctor",{id:"doctor",header:()=>r("Doctors","kivicare-clinic-management-system"),cell:K=>i.jsx(cn,{profileUrl:K.row.original.doctor.doctor_image_url,name:K.row.original.doctor.name,email:K.row.original.doctor.email,variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system")})}),...j&&!d&&!m?[J.accessor("clinic",{id:"clinic",header:()=>r("Clinics","kivicare-clinic-management-system"),cell:K=>i.jsx(cn,{profileUrl:K.row.original.clinic.clinic_image_url,name:K.row.original.clinic.name,email:K.row.original.clinic.email,variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")})})]:[],J.accessor("days",{id:"days",header:()=>r("Days","kivicare-clinic-management-system"),enableSorting:!1,cell:K=>i.jsx("div",{className:"d-flex flex-wrap gap-1",children:K.row.original.days.split(", ").map((ne,oe)=>i.jsx("span",{className:"badge bg-primary-subtle text-primary",children:ne},oe))})}),J.accessor("time_slot",{id:"time_slot",header:()=>r("Time Slot","kivicare-clinic-management-system"),cell:K=>{const ne=K.row.original.time_slot;if(!ne)return i.jsx("span",{children:""});const oe=parseInt(ne);if(oe>=60){const D=Math.floor(oe/60),$=oe%60;return i.jsxs("span",{children:[D,"h ",$>0?`${$}min`:""]})}return i.jsxs("span",{children:[oe," min"]})}}),...S("doctor_session_edit")||S("doctor_session_delete")?[J.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:K=>{const ne=oe=>D=>i.jsx(mt,{id:`tooltip-${K.cell.row.original.id}-${oe}`,...D,children:oe});return i.jsxs("div",{className:"d-flex align-items-center gap-3 fs-5",children:[S("doctor_session_edit")&&i.jsx(Ze,{placement:"top",overlay:ne(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`${s}/doctor-session/edit/${K.row.original.id}`,className:"text-success",children:i.jsx("i",{className:"ph text-bold ph-pencil-simple-line"})})}),S("doctor_session_delete")&&i.jsx(Ze,{placement:"top",overlay:ne(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger p-0 fs-5",onClick:()=>le(K.row.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[j,S]),le=K=>{wt({title:r("Delete Sessions?","kivicare-clinic-management-system"),text:r("You're about to delete all sessions for this doctor.<br>This will remove all scheduled days and cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ne=>{ne.isConfirmed&&(yt({title:r("Deleting Sessions...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),R.mutate(K.id,{onSuccess:oe=>{Tt({title:r("Sessions Deleted","kivicare-clinic-management-system"),text:oe?.message||r("Sessions have been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to sessions","kivicare-clinic-management-system")}),K.doctor?.id&&c.invalidateQueries({queryKey:pt.list({dataType:"clinicList",doctor_id:K.doctor.id})})},onError:oe=>{rt({text:r("Failed to delete sessions. Please try again.","kivicare-clinic-management-system")})}}))})},I=f.useCallback(K=>{g(K.target.value),p(ne=>({...ne,search:K.target.value,page:1}))},[]),ee=K=>{if(K.length>0){const{id:ne,desc:oe}=K[0],D={doctor:"doctor_name",clinic:"clinic_name",time_slot:"time_slot"};p($=>({...$,orderby:D[ne]||ne,order:oe?"desc":"asc",page:1}))}else p(ne=>({...ne,orderby:"",order:"",page:1}))};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t&&E?.data?.display_name?`${E.data.display_name}'s Sessions`:r("Doctor Sessions","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t&&n&&i.jsxs(ht,{to:`/doctor/${n}/add-session`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Session","kivicare-clinic-management-system")})]}),!t&&S("doctor_session_add")&&i.jsxs(ht,{to:`${s}/doctor-session/add`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Session","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!y,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:k,children:i.jsxs("div",{ref:k,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[j&&!d&&!m&&i.jsx(dn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:M,value:l.find(K=>K.value===u.clinic_id)||null,onChange:K=>{p(ne=>({...ne,clinic_id:K?K.value:""}))},dependencies:{},isClearable:!0}),!a&&!t&&i.jsx(ct,{placeholder:r("Doctor Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:V,onChange:K=>p(ne=>({...ne,doctor_id:K?K.value:""})),isLoading:P,value:V.find(K=>K.value===u.doctor_id)||null,isClearable:!0,styles:{menuPortal:K=>({...K,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:h,onChange:I})]})}),S("doctor_session_export")&&j&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:G,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ge,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:X,disabled:L.isPending||ie,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:q,columns:ue,isLoading:N,error:_,currentPage:Q.currentPage,perPage:Q.perPage,totalItems:Q.total,lastPage:Q.lastPage,onPageChange:K=>p(ne=>({...ne,page:K})),onPerPageChange:K=>p(ne=>({...ne,perPage:K,page:1})),onSortingChange:ee,enableSelection:!0,moduleNamePlural:"doctor sessions",bulkActions:S("doctor_session_delete")?[{label:r("Delete","kivicare-clinic-management-system"),action:(K,ne)=>{const oe=K.map(D=>D.id);wt({title:r("Delete Sessions?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${K.length} sessions</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(D=>{D.isConfirmed&&(yt({title:r("Deleting Sessions...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),O.mutate(oe,{onSuccess:$=>{Tt({title:r("Sessions Deleted","kivicare-clinic-management-system"),text:r(`${K.length} session${K.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to sessions","kivicare-clinic-management-system")}),ne()},onError:$=>{console.error("Bulk delete doctor sessions error:",$);const te=$?.response?.data?.message||$?.message||r("Failed to delete selected doctor sessions. Please try again.","kivicare-clinic-management-system");rt({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}]:[],isBulkActionShow:K=>{b(K)}})]})]})})}function Iy({isEditing:t=!1}){const{id:e,doctorId:n}=Gt(),s=hn(),[a,l]=f.useState([]),{isAddonActive:o,defaultClinicId:c,userRole:d,googleMeetIntegration:m,currencyPrefix:u,currencyPostfix:p}=ut(),{data:h}=af(n?parseInt(n):null),g=Li(),x=Xn(),v=Jn(),y=Cr(),b=o("kiviPro"),{data:k,isLoading:w,error:S}=xV(e,{enabled:t&&!!e}),j=k?.data,T=yV(),N=bV(),[_,A]=f.useState(!1),[P,E]=f.useState(0),M=_||T.isPending||N.isPending||w,{data:R,isLoading:O}=Va("service_type"),{data:L}=aV(),{data:q,isLoading:Q}=qg({enabled:b}),V=Ve(),se=async({page:pe,per_page:Ce,search:Ge})=>{try{const De={dataType:"clinicList",page:pe,per_page:Ce,search:Ge},$e=await V.fetchQuery({queryKey:pt.list(De),queryFn:()=>Dt.getStaticData(De),staleTime:300*1e3}),et=$e.data.map(tt=>({value:tt.id,label:tt.label||tt.name}));return l(tt=>[...tt,...et]),$e}catch(De){return console.error("Error loading clinics:",De),{data:[],pagination:{has_more:!1}}}},G=async({page:pe,per_page:Ce,search:Ge,clinic_ids:De,telemed_service:$e})=>{try{let et=De;(x||v)&&c&&(et=c);const tt={dataType:"staticData",staticDataType:"doctors",clinic_ids:et,telemed_service:$e,page:pe,per_page:Ce,search:Ge};return await V.fetchQuery({queryKey:pt.list(tt),queryFn:()=>Dt.getStaticData(tt),staleTime:0})}catch(et){return console.error("Error loading doctors:",et),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},ge=async({page:pe,per_page:Ce,search:Ge})=>{try{const De={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:pe,per_page:Ce,search:Ge};return await V.fetchQuery({queryKey:pt.list(De),queryFn:()=>Dt.getStaticData(De),staleTime:0})}catch(De){return console.error("Error loading doctors:",De),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},ie=Hg({specialty_type:"service_type"}),{register:W,handleSubmit:X,control:J,setValue:ue,watch:le,formState:{errors:I},reset:ee}=en({defaultValues:{serviceImage:"",serviceImageId:"",category:null,name:"",charges:0,telemed_service:{value:"no",label:"No"},clinic:[],doctor:[],duration:0,status:null,allowMulti:null}}),K=le("telemed_service");f.useEffect(()=>{if(h?.data&&n&&!t){const pe=h.data.clinics?.[0]?.id,Ce=h.data.clinics?.[0]?.clinic_name,Ge=h.data.display_name||"";ue("doctor",[{value:parseInt(n),label:Ge}]),(v||x)&&c&&Ce?ue("clinic",[{value:c,label:Ce}]):pe&&Ce&&ue("clinic",[{value:pe,label:Ce}])}},[h,n,t,ue,v,x,c]);const ne=br({control:J,name:"clinic"}),oe=f.useMemo(()=>v||x?c:b?Array.isArray(ne)&&ne.length>0?ne.map(Ce=>Ce.value):ne&&ne.value?ne.value:null:c,[b,ne,c,v,x]),{data:D,isLoading:$}=OA(oe),te=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),ae=f.useMemo(()=>[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}],[]),Y=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),H=pe=>pe==null?null:ae.find(Ce=>Ce.value===pe||Ce.value===String(pe)||pe===1&&Ce.value==="active"||pe===0&&Ce.value==="inactive")||null,B=pe=>pe==null?null:te.find(Ce=>Ce.value===pe||Ce.value===String(pe))||null,re=pe=>pe==null?null:Y.find(Ce=>Ce.value===pe||Ce.value===String(pe))||null;f.useEffect(()=>{if(t&&j&&!w){j.service_image_url&&ue("serviceImage",j.service_image_url),j.service_image_id&&ue("serviceImageId",j.service_image_id),ue("category",j.service_category),ue("name",j.name||""),ue("charges",j.price||0);const pe=B(j.telemed_service);ue("telemed_service",pe),ue("clinic",j.clinics||[]),ue("doctor",j.doctors||[]),ue("duration",j.duration||0);const Ce=H(j.status);ue("status",Ce);const Ge=re(j.allow_multi);ue("allowMulti",Ge)}},[t,j,w,ue]);const de=(pe,Ce)=>{ue(pe,Ce.url||Ce.image),ue(`${pe}Id`,Ce.id||Ce.imageId)},xe={category:{required:r("Service category is required","kivicare-clinic-management-system")},name:{required:r("Service name is required","kivicare-clinic-management-system"),minLength:{value:3,message:r("Service name must be at least 3 characters","kivicare-clinic-management-system")},maxLength:{value:100,message:r("Service name must be less than 100 characters","kivicare-clinic-management-system")}},charges:{required:r("Charges are required","kivicare-clinic-management-system"),min:{value:0,message:r("Charges must be a positive number","kivicare-clinic-management-system")},pattern:{value:/^\d+(\.\d{1,2})?$/,message:r("Invalid price format (e.g. 50 or 50.00)","kivicare-clinic-management-system")}},telemed_service:{required:r("Telemed service selection is required","kivicare-clinic-management-system")},clinic:{required:r("At least one clinic must be selected","kivicare-clinic-management-system"),validate:pe=>(Array.isArray(pe)?pe.length>0:!!pe)||r("At least one clinic must be selected","kivicare-clinic-management-system")},doctor:{required:r("At least one doctor must be selected","kivicare-clinic-management-system"),validate:pe=>(Array.isArray(pe)?pe.length>0:!!pe)||r("At least one doctor must be selected","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},allowMulti:{required:r("Multi-selection option is required","kivicare-clinic-management-system")}},U=async pe=>{A(!0);const Ce=tt=>Array.isArray(tt)?tt:tt?[tt]:[],Ge=Ce(pe.clinic),De=Ce(pe.doctor),$e=Ge.length?Ge:Ce(L?.data),et={profile_image:pe.serviceImageId,category:pe.category?.id,name:pe.name,price:pe.charges,telemed_service:pe.telemed_service?.value,clinics:$e,doctors:De,duration:pe.duration,status:pe.status?.value,allow_multi:pe.allowMulti?.value};try{let tt;t?(tt=await N.mutateAsync({id:e,...et}),Te.success(r("Service updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(tt=await T.mutateAsync(et),Te.success(r("Service created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),s("/service",{replace:!0})}catch(tt){const qe=tt?.response?.data?.message||(t?r("Failed to update service","kivicare-clinic-management-system"):r("Failed to create service","kivicare-clinic-management-system"));Te.error(qe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{A(!1)}},me=pe=>{console.log("Validation errors:",pe);const Ce=Object.keys(pe)[0],Ge=document.getElementById(Ce);Ge&&(Ge.scrollIntoView({behavior:"smooth",block:"center"}),Ge.focus())},ye=()=>{s("/service")};return f.useEffect(()=>{if(S){const pe=S?.response?.data?.message||r("You do not have permission to view this service.","kivicare-clinic-management-system");Te.error(pe,{position:"top-right",autoClose:5e3}),s("/service",{replace:!0})}},[S,s]),t&&w?i.jsx(tg,{}):i.jsx("div",{className:"position-relative",children:(!t||t&&j)&&i.jsxs("form",{onSubmit:X(U,me),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex justify-content-center pt-5",children:i.jsx(Ne,{name:"serviceImage",control:J,render:({field:pe})=>i.jsx(yl,{id:"service-image-upload",name:"serviceImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:pe.value,defaultImageId:le("serviceImageId"),onChange:Ce=>de("serviceImage",Ce),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service Category","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"category",control:J,rules:xe.category,render:({field:pe})=>i.jsxs(i.Fragment,{children:[i.jsx(dn,{id:"category",loadOptions:ge,value:pe.value,onChange:Ce=>{pe.onChange(Ce)},onCreateOption:Ce=>{ie.mutate(Ce,{onSuccess:Ge=>{if(Ge?.data?.data){const De={id:Ge.data.data.id,label:Ge.data.data.label};V.setQueryData(["staticData","service_type"],$e=>({...$e,data:[...$e?.data||[],De]})),pe.onChange(De),E($e=>$e+1)}Te.success(r("category added successfully","kivicare-clinic-management-system"))},onError:Ge=>{console.error("Failed to save category:",Ge),console.error("Error details:",Ge.response?.data),Te.error(r("Failed to save category to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Ce=>Ce.id,placeholder:r("Select or create categories","kivicare-clinic-management-system"),isLoading:O,isSearchable:!0,isMulti:!1,closeMenuOnSelect:!0,className:`react-select ${I.category?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t,noOptionsMessage:()=>r("Type to create a new category","kivicare-clinic-management-system"),formatCreateLabel:Ce=>r("Add category","kivicare-clinic-management-system")+`: "${Ce}"`,isCreatable:!0},P),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new Category","kivicare-clinic-management-system")]})]})}),I.category&&i.jsx("div",{className:"invalid-feedback d-block",children:I.category.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"name",className:`form-control ${I.name?"is-invalid":""}`,placeholder:r("Enter the Service Name","kivicare-clinic-management-system"),...W("name",xe.name),disabled:t&&w}),I.name&&i.jsx("div",{className:"invalid-feedback d-block",children:I.name.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Charges","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[u&&i.jsx("span",{className:"input-group-text",children:u}),i.jsx("input",{type:"number",id:"charges",step:"0.01",min:"0",className:`form-control ${I.charges?"is-invalid":""}`,placeholder:r("Enter Charges","kivicare-clinic-management-system"),...W("charges",xe.charges),disabled:t&&w}),p&&i.jsx("span",{className:"input-group-text",children:p})]}),I.charges&&i.jsx("div",{className:"invalid-feedback d-block",children:I.charges.message})]})}),(o("googlemeet")||o("telemed"))&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Telemed Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"telemed_service",control:J,rules:xe.telemed_service,render:({field:pe})=>i.jsx(ct,{...pe,onChange:Ce=>{pe.onChange(Ce),ue("doctor",[])},id:"telemed_service",options:te,placeholder:r("Select Telemed Service","kivicare-clinic-management-system"),className:`react-select ${I.telemed_service?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&w,styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})}),I.telemed_service&&i.jsx("div",{className:"invalid-feedback d-block",children:I.telemed_service.message})]})}),b&&y&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(Ne,{name:"clinic",control:J,rules:xe.clinic,render:({field:pe})=>{const Ce=a??q?.data??[],[Ge,De]=f.useState(!1),$e=Array.isArray(pe.value)&&pe.value.length>0&&pe.value.length===Ce.length,et=async tt=>{if(tt.target.checked){De(!0);try{const Ee=((await se({page:-1,per_page:1,search:""}))?.data||[]).map(Qe=>({value:Qe.id,label:Qe.label||Qe.name}));l(Ee),pe.onChange(Ee)}catch(we){console.error("Error selecting all clinics:",we)}finally{De(!1)}}else pe.onChange([])};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[r("Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllClinics",className:"form-check-input",checked:$e,onChange:et,disabled:Ge}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllClinics",children:Ge?r("Loading...","kivicare-clinic-management-system"):r("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(dn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isMulti:!t,loadOptions:se,value:pe.value,onChange:tt=>{pe.onChange(tt),ue("doctor",null)}}),I.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:I.clinic.message})]})}})})}),!g&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(Ne,{name:"doctor",control:J,rules:xe.doctor,render:({field:pe})=>{const Ce=Array.isArray(le("clinic"))?le("clinic").map(we=>we.value):le("clinic")?.value,[Ge,De]=f.useState(!1),[$e,et]=f.useState(0),tt=Array.isArray(pe.value)&&pe.value.length>0&&$e>0&&pe.value.length===$e,qe=async we=>{if(we.target.checked){De(!0);try{const nt=((await G({page:-1,per_page:1,search:"",clinic_ids:Ce}))?.data||[]).map(Ht=>({value:Ht.id,label:Ht.label||Ht.name}));et(nt.length),pe.onChange(nt)}catch(Qe){console.error("Error selecting all doctors:",Qe)}finally{De(!1)}}else pe.onChange([])};return f.useEffect(()=>{Ce&&G({page:-1,per_page:1,search:"",clinic_ids:Ce}).then(we=>{et(we?.data?.length||0)})},[Ce]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[r("Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllDoctors",className:"form-check-input",checked:tt,onChange:qe,disabled:Ge||!Ce}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllDoctors",children:Ge?r("Loading...","kivicare-clinic-management-system"):r("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(dn,{id:"doctor",loadOptions:G,value:pe.value,onChange:we=>pe.onChange(we),placeholder:Ce?r("Select doctor","kivicare-clinic-management-system"):r("Select a clinic first","kivicare-clinic-management-system"),className:`react-select-box ${I.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isMulti:!t,isDisabled:!Ce||t&&w,dependencies:{clinic_ids:Ce,telemed_service:K?.value}},`doctor-${Ce}-${K?.value}`),I.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:I.doctor.message})]})}})})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[b&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Duration","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"duration",control:J,rules:xe.duration,render:({field:pe})=>{let Ce=pe.value;if(typeof Ce=="number"&&!isNaN(Ce)){const Ge=Math.floor(Ce/60).toString().padStart(2,"0"),De=(Ce%60).toString().padStart(2,"0");Ce=`${Ge}:${De}`}else Ce instanceof Date&&(Ce=`${Ce.getHours().toString().padStart(2,"0")}:${Ce.getMinutes().toString().padStart(2,"0")}`);return i.jsx(Un,{value:Ce,onChange:Ge=>{if(Ge&&Ge.length>0){const De=Ge[0],$e=De.getHours()*60+De.getMinutes();pe.onChange($e)}else pe.onChange(null)},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:0,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none  ${I.duration?"is-invalid":""}`,placeholder:r("MM:SS","kivicare-clinic-management-system")})}}),I.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:I.duration.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:J,rules:xe.status,render:({field:pe})=>i.jsx(ct,{...pe,id:"status",options:ae,placeholder:r("Select Status","kivicare-clinic-management-system"),className:`react-select ${I.status?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})}),I.status&&i.jsx("div",{className:"invalid-feedback d-block",children:I.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Allow multi selection while booking?","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"allowMulti",control:J,rules:xe.allowMulti,render:({field:pe})=>i.jsx(ct,{...pe,id:"allowMulti",options:Y,placeholder:r("Allow multi selection?","kivicare-clinic-management-system"),className:`react-select ${I.allowMulti?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&w,styles:{menuPortal:Ce=>({...Ce,zIndex:9999})}})}),I.allowMulti&&i.jsx("div",{className:"invalid-feedback d-block",children:I.allowMulti.message})]})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:ye,disabled:M||t&&w,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:M||t&&w,children:M?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Service","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})})}const sne=[Gn({path:"/doctor",title:"Doctors",outlet:Ete,permissions:["doctor_list"],meta:{description:"Doctor management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:Rte,title:"All Doctors",index:!0,permissions:["doctor_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all doctors",breadcrumb:"All Doctors"}}),We({path:"add",component:My,title:"Add Doctor",props:{isEditing:!1},permissions:["doctor_add"],skeleton:Py,meta:{description:"Create a new doctor",breadcrumb:"Add Doctor"}}),We({path:"edit/:id",component:My,title:"Edit Doctor",props:{isEditing:!0},permissions:["doctor_edit"],meta:{description:"Edit existing doctor",breadcrumb:"Edit Doctor"},skeleton:Py}),We({path:":doctorId/sessions",component:Tk,title:"Doctor Sessions",props:{filterByDoctor:!0},permissions:["doctor_session_list"],meta:{description:"View all sessions for this doctor",breadcrumb:t=>t.doctorId?`Doctor #${t.doctorId} Sessions`:"Doctor Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:":doctorId/add-session",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create",hideDoctorField:!0},permissions:["doctor_session_add"],meta:{description:"Add a new doctor session for specific doctor",breadcrumb:"Add Session"},skeleton:eg}),We({path:":doctorId/add-service",component:Iy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],meta:{description:"Add a new service for specific doctor",breadcrumb:"Add Service"},skeleton:tg})]})],ane=()=>{const t=Kn();return t.pathname==="/tax/add"||t.pathname.startsWith("/tax/edit/"),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/tax"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},Oy=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(kl,{titleWidth:"80px"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"55px"}),i.jsx(C,{width:"200px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(C,{width:"220px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Se,{labelWidth:"60px"}),i.jsx(C,{width:"230px",height:"0.8rem",className:"mt-2"})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Se,{labelWidth:"55px"})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})})}),Rr={createTax:t=>ve({endpoint:"taxes",method:"POST",data:t}),updateTax:(t,e)=>ve({endpoint:`taxes/${t}`,method:"PUT",data:e}),getTaxById:t=>ve({endpoint:`taxes/${t}`,method:"GET"}),getTaxes:t=>ve({endpoint:"taxes",method:"GET",data:t}),deleteTax:t=>ve({endpoint:`taxes/${t}`,method:"DELETE"}),bulkUpdateTaxStatus:(t,e)=>ve({endpoint:"taxes/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeleteTaxes:t=>ve({endpoint:"taxes/bulk/delete",method:"POST",data:{ids:t}}),updateTaxStatus:(t,e)=>ve({endpoint:`taxes/${t}/status`,method:"PUT",data:{status:e}}),exportTaxes:(t={})=>ve({endpoint:"taxes/export",method:"GET",data:t})},rne=()=>{const t=Ve();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Rr.updateTax(e,n):Rr.createTax(n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},lne=(t={},e={})=>ft({queryKey:["taxes",t],queryFn:()=>Rr.getTaxes(t),...e}),one=()=>{const t=Ve();return Le({mutationFn:e=>Rr.bulkDeleteTaxes(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},cne=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>Rr.bulkUpdateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},dne=(t,e={})=>ft({queryKey:["tax",t],queryFn:()=>Rr.getTaxById(t),enabled:!!t,...e}),mne=()=>{const t=Ve();return Le({mutationFn:e=>Rr.deleteTax(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},une=()=>{const t=Ve();return Le({mutationFn:({id:e,status:n})=>Rr.updateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},hne=()=>Le({mutationFn:t=>Rr.exportTaxes(t)}),pne=()=>{const{isAddonActive:t,getCurrencyDetail:e,hasCapability:n}=ut(),a=e().prefix,l=t("kiviPro"),[o,c]=f.useState(!1),[d,m]=f.useState(!1),u=f.useRef(null),[p,h]=f.useState({}),g=Xn(),x=Jn(),v=Ve(),y=async({page:X,per_page:J,search:ue,clinic_ids:le})=>{try{const I={dataType:"staticData",staticDataType:"users",role:lc(),page:X,per_page:J,search:ue||""},ee=le&&typeof le=="object"?le.value:le,K=String(ee||"").split(",").filter(oe=>oe&&oe!=="undefined"&&oe!=="null").join(",");return K&&(I.clinic_ids=K),(await v.fetchQuery({queryKey:pt.list(I),queryFn:()=>Dt.getStaticData(I),staleTime:300*1e3})).data.map(oe=>({value:oe.id||oe.ID,label:oe.label||oe.display_name}))}catch(I){return console.error("Error loading doctors:",I),{options:[],hasMore:!1}}},b=async({page:X,per_page:J,search:ue,clinic_id:le,doctor_ids:I})=>{try{const ee={dataType:"staticData",staticDataType:"servicesWithPrice",page:X,per_page:J,search:ue||""},K=le&&typeof le=="object"?le.value:le,ne=I&&typeof I=="object"?I.value:I,oe=Number(K);!isNaN(oe)&&oe>0&&(ee.clinic_id=oe);const D=String(ne||"").split(",").filter(te=>te&&te!=="undefined"&&te!=="null").join(",");return D&&(ee.doctor_ids=D),(await v.fetchQuery({queryKey:pt.list(ee),queryFn:()=>Dt.getStaticData(ee),staleTime:300*1e3})).data.map(te=>({value:te.id,label:te.label}))}catch(ee){return console.error("Error loading services:",ee),{options:[],hasMore:!1}}},k=mne(),w=one(),S=cne(),j=une(),T=hne(),{data:N,isLoading:_}=lne(p,{enabled:l}),A=Array.isArray(N?.data?.taxes)?N.data.taxes:[],P=N?.data?.page||1,E=N?.data?.per_page||10,M=N?.data?.total||0,R=N?.data?.total_pages||1,{data:O}=qg(),{data:L}=IA(),{data:q}=rV({clinicId:p.clinic&&typeof p.clinic=="object"?p.clinic.value:p.clinic||null,doctorId:p.doctor&&typeof p.doctor=="object"?p.doctor.value:p.doctor||null}),Q=Array.isArray(O?.data)?O.data:[];Array.isArray(L?.data)&&L.data,Array.isArray(q?.data)&&q.data;const V=f.useMemo(()=>Object.fromEntries(Object.entries(p).map(([X,J])=>{const ue=J&&typeof J=="object"&&"value"in J?J.value:J;return[X,ue]}).filter(([X,J])=>J!==""&&J!==null&&J!==void 0)),[p]),se=X=>{if(X.length>0){const{id:J,desc:ue}=X[0],le={id:"id",taxName:"taxName",taxRate:"taxRate",clinicName:"clinicName",doctorName:"doctorName",serviceName:"serviceName",status:"status"};h(I=>({...I,orderby:le[J]||J,order:ue?"desc":"asc",page:1}))}else h(J=>({...J,orderby:"",order:"",page:1}))},G=async X=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const J={format:X,...V},le=(await T.mutateAsync(J))?.data?.taxes||[];if(!le.length){wt({icon:"ph-info",title:r("No data","kivicare-clinic-management-system"),text:r("No tax records found for export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const I=new Date().toISOString().split("T")[0],ee=le.map(K=>({id:K.id,tax_name:K.tax_name,tax_rate:K.tax_rate,clinic_name:K.clinic_name,doctor_name:K.doctor_name,service_name:K.service_name,status:K.status}));switch(X){case"csv":ps(ee,`taxes-${I}.csv`);break;case"xls":gs(ee,`taxes-${I}.xls`);break;case"pdf":fs(ee,`taxes-${I}.pdf`,"Tax Records");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(J){console.error("Export error:",J),rt({title:r("Error!","kivicare-clinic-management-system"),text:J.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},ge=A.map(X=>({id:X.id,taxName:X.name,taxRate:X.taxType==="fixed"?a+`${X.taxValue}`:`${X.taxValue}%`,clinicName:X.clinicName,clinic_image_url:X.clinic_image_url,clinicEmail:X.clinicEmail,doctorName:X.doctorName,doctor_image_url:X.doctor_image_url,doctorEmail:X.doctorEmail,serviceName:X.serviceName,service_image_url:X.service_image_url,status:X.status})),ie=l?[{label:r("Delete","kivicare-clinic-management-system"),action:(X,J)=>{const ue=X.map(le=>le.id);wt({title:r("Delete Taxes?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${X.length} taxes</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep taxes","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(le=>{le.isConfirmed&&(yt({title:r("Deleting Taxes...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected taxes.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(ue,{onSuccess:()=>{Tt({title:r("Tax Deleted","kivicare-clinic-management-system"),text:r(`${X.length} tax${X.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to taxes","kivicare-clinic-management-system")}).then(()=>{J()})},onError:I=>{rt({title:r("Error","kivicare-clinic-management-system"),text:I?.response?.data?.message||I?.message||r("Failed to delete selected taxes.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(X,J)=>{const ue=X.map(le=>le.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Taxes to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(le=>{le.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),S.mutate({ids:ue,status:"1"},{onSuccess:I=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:I?.message||r("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{J()})},onError:I=>{const ee=I?.response?.data?.message||I?.message||r("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:ee,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(X,J)=>{const ue=X.map(le=>le.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Taxes to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(le=>{le.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),S.mutate({ids:ue,status:"0"},{onSuccess:I=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:I?.message||r("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{J()})},onError:I=>{console.error("Bulk update status error:",I);const ee=I?.response?.data?.message||I?.message||r("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:ee,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}]:[],W=f.useMemo(()=>[{accessorKey:"id",header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},{accessorKey:"taxName",header:()=>r("Tax Name","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},{accessorKey:"taxRate",header:()=>r("Tax Rate","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},...!g&&!x?[{accessorKey:"clinicName",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.clinicName?i.jsx(cn,{profileUrl:X.original.clinic_image_url,name:X.original.clinicName,email:X.original.clinicEmail}):i.jsx("span",{className:"",children:r("All Clinic","kivicare-clinic-management-system")})})}]:[],{accessorKey:"doctorName",header:()=>r("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.doctorName?i.jsx(cn,{profileUrl:X.original.doctor_image_url,name:X.original.doctorName,email:X.original.doctorEmail}):i.jsx("span",{className:"",children:r("All Doctor","kivicare-clinic-management-system")})})},{accessorKey:"serviceName",header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.serviceName?i.jsx(cn,{profileUrl:X.original.service_image_url,name:X.original.serviceName}):i.jsx("span",{className:"",children:r("All Service","kivicare-clinic-management-system")})})},{accessorKey:"status",header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>{const J=X.row.original,ue=Number(J.status),le=async I=>{const ee=I.target.checked?1:0,{isConfirmed:K}=await wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update status?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"});if(!K){I.target.checked=ue===1;return}yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),j.mutate({id:J.id,status:ee},{onSuccess:()=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:r("Status updated successfully.","kivicare-clinic-management-system")})},onError:ne=>{I.target.checked=ue===1,rt({title:r("Error","kivicare-clinic-management-system"),text:ne?.response?.data?.message||ne?.message||r("Failed to update status.","kivicare-clinic-management-system")})}})};return n("tax_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`tax-status-${J.id}`,checked:ue===1,onChange:le}),i.jsx("label",{className:"form-check-label",htmlFor:`tax-status-${J.id}`,children:i.jsx("span",{className:`badge ${ue===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:ue===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${ue===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:ue===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}},...n("tax_edit")||n("tax_view")||n("tax_delete")?[{id:"action",header:()=>r("Action","kivicare-clinic-management-system"),cell:X=>{const J=X.row.original,ue=le=>I=>i.jsx(mt,{id:`tooltip-${X.cell.row.original.id}-${le}`,...I,children:le});return i.jsx("div",{className:"d-flex align-items-center gap-3",children:l?i.jsxs(i.Fragment,{children:[n("tax_edit")&&i.jsx(Ze,{placement:"top",overlay:ue(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/tax/edit/${J.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),n("tax_delete")&&i.jsx(Ze,{placement:"top",overlay:ue(r("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async le=>{le.preventDefault();const{isConfirmed:I}=await wt({title:r("Delete Tax?","kivicare-clinic-management-system"),text:r("You're about to delete this tax.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep tax","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"});I&&(yt({title:r("Deleting Tax...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected tax.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(J.id,{onSuccess:()=>{Tt({title:r("Tax Deleted","kivicare-clinic-management-system"),text:r("Tax has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to taxes","kivicare-clinic-management-system")})},onError:ee=>{rt({title:r("Error","kivicare-clinic-management-system"),text:ee?.response?.data?.message||ee?.message||r("Failed to delete tax.","kivicare-clinic-management-system")})}}))},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]}):i.jsx("span",{className:"text-muted",children:r("Pro Only","kivicare-clinic-management-system")})})}}]:[]],[n,g,x]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsx("h5",{children:r("Tax List","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[n("tax_add")&&i.jsxs(ht,{to:l?"/tax/add":"#",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-plus-circle"})," ",r("Add Tax","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[i.jsx("i",{className:"ph ph-funnel"})," ",r("Filter","kivicare-clinic-management-system")]})]})]}),n("tax_export")&&l&&i.jsx("div",{className:"kc-table-wrapper",children:i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsx("div",{ref:u,className:"d-flex justify-content-end mb-4 position-absolute top-0 w-100",children:i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>G("csv"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>G("xls"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>G("pdf"),disabled:T.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})})})}),i.jsx(kn,{data:ge,columns:W,moduleNamePlural:"taxes",currentPage:P,perPage:E,totalItems:M,lastPage:R,isLoading:_,bulkActions:ie,onPageChange:X=>h(J=>({...J,page:X})),onPerPageChange:X=>h(J=>({...J,perPage:X,page:1})),onSortingChange:se,manualSorting:!0,isBulkActionShow:X=>{m(X)}}),i.jsx(na,{show:o,onHide:()=>c(!1),queryParams:p,hasAppliedFilters:Object.keys(V).length>0,onApplyFilters:X=>{h({...X,page:1}),c(!1)},onResetFilters:()=>{h({}),c(!1)},title:r("Filters","kivicare-clinic-management-system"),fields:[{name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),type:"select",options:Q},{name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:y,dependencies:{clinic_ids:"clinic"},isSearchable:!0,storeObject:!0},{name:"service",label:r("Service","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:b,dependencies:{clinic_id:"clinic",doctor_ids:"doctor"},isSearchable:!0,storeObject:!0},{name:"taxName",label:r("Tax Name","kivicare-clinic-management-system"),type:"text",placeholder:r("Enter Tax Name","kivicare-clinic-management-system")},{name:"status",label:r("Status","kivicare-clinic-management-system"),type:"select",options:[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}]}]}),!l&&i.jsx(di,{text:r("Taxes management is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},gne=({values:t,errors:e,onChange:n,onValidate:s,onCancel:a,isLoading:l,error:o,success:c,isEditing:d=!1})=>{const{getCurrencyDetail:m}=ut(),p=m().prefix,h=[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}],g=[{value:"fixed",label:p},{value:"percentage",label:"%"}],{data:x,isLoading:v}=qg(),b=(Array.isArray(x)?x:Array.isArray(x?.data)?x.data:[]).map(A=>({value:A.id,label:A.label||A.name})),k=Ve(),w=async({page:A,per_page:P,search:E})=>{try{const M={dataType:"clinicList",page:A,per_page:P,search:E};return await k.fetchQuery({queryKey:pt.list(M),queryFn:()=>Dt.getStaticData(M),staleTime:3e5})}catch{return{data:[],pagination:{has_more:!1}}}},S=async({page:A,per_page:P,search:E,clinic_ids:M})=>{try{const R={dataType:"staticData",staticDataType:"doctors",page:A,per_page:P,search:E};return M&&M.length>0&&(R.clinic_ids=M),await k.fetchQuery({queryKey:pt.list(R),queryFn:()=>Dt.getStaticData(R),staleTime:0})}catch{return{data:[],pagination:{has_more:!1}}}},j=async({page:A,per_page:P,search:E,clinic_ids:M,doctor_ids:R})=>{try{const O={dataType:"staticData",staticDataType:"servicesWithPrice",page:A,per_page:P,search:E};M&&M.length>0&&(O.clinic_ids=M),R&&R.length>0&&(O.doctor_ids=Array.isArray(R)?R.join(","):R);const L=await k.fetchQuery({queryKey:pt.list(O),queryFn:()=>Dt.getStaticData(O),staleTime:0});return L.data=L.data.map(q=>({...q,id:q.service_id})),L}catch{return{data:[],pagination:{has_more:!1}}}},T=b.find(A=>String(A.value)===String(t.clinic))||null,N=g.find(A=>A.value===t.rateType?.value)||g[0],_=h.find(A=>String(A.value)===String(t.status?.value||t.status))||h[0];return i.jsxs("div",{className:"add-tax-form",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${e.name?" is-invalid":""}`,placeholder:r("Enter Tax Name","kivicare-clinic-management-system"),value:t.name,onChange:A=>n({...t,name:A.target.value}),required:!0}),e.name&&i.jsx("div",{className:"invalid-feedback",children:e.name})]})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Tax Rate","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{options:g,value:N,onChange:A=>n({...t,rateType:A}),isDisabled:!1,styles:{container:A=>({...A,minWidth:80,width:80}),menuPortal:A=>({...A,zIndex:9999})},className:"react-select-box",classNamePrefix:"react-select"}),i.jsx("input",{type:"text",className:`form-control${e.rateValue?" is-invalid":""}`,placeholder:r("Enter Tax Rate","kivicare-clinic-management-system"),value:t.rateValue,onChange:A=>{let P=A.target.value;P=P.replace(/[^0-9.]/g,"");const E=P.split(".");E.length>2&&(P=E[0]+"."+E.slice(1).join("")),n({...t,rateValue:P})},onInput:A=>{let P=A.target.value;P=P.replace(/[^0-9.]/g,"");const E=P.split(".");E.length>2&&(P=E[0]+"."+E.slice(1).join("")),A.target.value=P},required:!0})]}),e.rateValue&&i.jsx("div",{className:"invalid-feedback d-block",children:e.rateValue})]})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Clinic","kivicare-clinic-management-system")}),i.jsx(dn,{id:"clinic",loadOptions:w,value:T,onChange:A=>n({...t,clinic:A?A.value:null,doctor:null}),placeholder:r("Select clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isClearable:!0})]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all clinics, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Doctor","kivicare-clinic-management-system")}),i.jsx(dn,{id:"doctor",loadOptions:S,value:t.doctor,onChange:A=>n({...t,doctor:A,service:null}),placeholder:r("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[]},isClearable:!0,isMulti:!d},`doctor-${t.clinic||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all doctors, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Service","kivicare-clinic-management-system")}),i.jsx(dn,{id:"service",loadOptions:j,value:t.service,onChange:A=>n({...t,service:A}),placeholder:r("Select Service","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[],doctor_ids:Array.isArray(t.doctor)?t.doctor.map(A=>A?.value):t.doctor?.value?[t.doctor.value]:[]},isClearable:!0,isMulti:!d},`service-${t.clinic||"none"}-${Array.isArray(t.doctor)?t.doctor.map(A=>A?.value).join(","):t.doctor?.value||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all services, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",options:h,value:_,onChange:A=>n({...t,status:A}),isClearable:!1,styles:{menuPortal:A=>({...A,zIndex:9999})},placeholder:r("Status","kivicare-clinic-management-system"),required:!0}),e.status&&i.jsx("div",{className:"invalid-feedback",children:e.status})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary d-flex align-items-center",onClick:a,disabled:l,children:i.jsx("span",{children:r("Cancel","kivicare-clinic-management-system")})}),i.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center",onClick:s,disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),i.jsx("span",{children:r("Saving...","kivicare-clinic-management-system")})]}):i.jsx("span",{children:r("Save","kivicare-clinic-management-system")})})]})]})},bC=({isEditing:t=!1,editId:e,onSuccess:n,onCancel:s,...a})=>{const{getCurrencyDetail:l}=ut(),c=l().prefix,d=[{value:"1",label:"Active"},{value:"0",label:"Inactive"}],m=[{value:"fixed",label:c},{value:"percentage",label:"%"}],u={name:"",rateType:m[0],rateValue:"",clinic:null,doctor:null,service:null,status:d[0]},{id:p}=Gt(),[h,g]=f.useState(u),[x,v]=f.useState({}),[y,b]=f.useState(!1),k=rne(),w=hn(),{data:S,isLoading:j}=dne(t?p:null),T=s?()=>s(w):()=>w("/tax"),N=async(P,E)=>{if(!P)return null;try{const R=(await Dt.getStaticData({dataType:"staticData",staticDataType:E,page:1,per_page:100,search:""}))?.data||[],O=String(P),L=R.find(q=>String(q.id)===O||String(q.value)===O);if(L)return[{value:String(L.id||L.value),label:L.label||L.name||String(L.id||L.value)}]}catch(M){console.error(`Error fetching ${E} data:`,M)}return null};f.useEffect(()=>{t&&S&&(async()=>{const[E,M]=await Promise.all([N(S.data.doctor_id,"doctors"),N(S.data.service_id,"servicesWithPrice")]);g({name:S.data.name||"",rateType:m.find(R=>R.value===S.data.taxType)||m[0],rateValue:S.data.taxValue||"",clinic:S.data.clinic_id||"",doctor:E,service:S.data.service,status:d.find(R=>String(R.value)===String(S.data.status))||d[0]})})()},[t,S]);const _=()=>{const P={};return h.name.trim()||(P.name=r("Tax Name is required","kivicare-clinic-management-system")),h.rateValue.trim()?isNaN(h.rateValue)?P.rateValue=r("Tax Rate must be a number","kivicare-clinic-management-system"):parseFloat(h.rateValue)<0?P.rateValue=r("Tax Rate cannot be negative","kivicare-clinic-management-system"):h.rateType?.value==="percentage"&&parseFloat(h.rateValue)>100&&(P.rateValue=r("Percentage cannot be greater than 100","kivicare-clinic-management-system")):P.rateValue=r("Tax Rate is required","kivicare-clinic-management-system"),h.status||(P.status=r("Status is required","kivicare-clinic-management-system")),v(P),Object.keys(P).length===0},A=()=>{_()&&(b(!0),k.mutate({id:t?p:void 0,data:{name:h.name,rateType:h.rateType.value,rateValue:h.rateValue,clinic:h.clinic||null,doctor:h.doctor||null,service:h.service||null,status:h.status?.value||null},isEdit:t},{onSuccess:P=>{Te.success(P?.message||r("Tax saved successfully!","kivicare-clinic-management-system"),{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{w("/tax")},1600)},onError:P=>{const E=P?.response?.data?.message||P?.message||r("Something went wrong!","kivicare-clinic-management-system");Te.error(E),b(!1)}}))};return t&&j?i.jsx(Oy,{}):i.jsx(gne,{values:h,errors:x,onChange:g,onValidate:A,onCancel:T,isLoading:y||k.isLoading||j,error:k.isError,success:k.isSuccess,isEditing:t})},fne=[Gn({path:"/tax",title:"Taxes",outlet:ane,permissions:["tax_list"],meta:{description:"Tax management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:pne,title:"All Taxes",index:!0,permissions:["tax_list"],meta:{description:"List of all taxes",breadcrumb:"All Taxes"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:bC,title:"Add Tax",props:{isEditing:!1},permissions:["tax_add"],meta:{description:"Create a new tax",breadcrumb:"Add New"},skeleton:Oy}),We({path:"edit/:id",component:bC,title:"Edit Tax",props:{isEditing:!0},index:!0,permissions:["tax_edit"],meta:{description:"Edit existing tax",breadcrumb:"Edit"},skeleton:Oy})]})],vne=()=>i.jsxs("div",{className:"get-help-container",children:[i.jsx("div",{className:"get-help-header"}),i.jsx("div",{className:"get-help-content",children:i.jsx(Uc,{})}),i.jsx("div",{className:"get-help-footer"})]}),xne=({activeTab:t="shortcodes",showHeader:e=!0,showTabs:n=!0})=>i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[e&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"help-tabs",children:[n&&i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:Array.from({length:8}).map((s,a)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:`${80+Math.random()*40}px`,height:"38px",style:{borderRadius:"4px"}})},`tab-skeleton-${a}`))}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-4"}),Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"mb-3",children:i.jsx(C,{width:`${120+Math.random()*60}px`,height:"1.25rem",className:"d-inline-block me-4 mb-2"})}),i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem"})]}),i.jsxs("div",{className:"mt-3 mt-md-0 ms-md-3 flex-shrink-0",children:[i.jsx("div",{className:"mb-2",children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx(C,{width:"70px",height:"0.875rem"})]})]},`shortcode-${a}`))]})}),t!=="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx(C,{width:"200px",height:"1.25rem"}),i.jsx(C,{width:"150px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"98%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem",className:"mb-4"}),i.jsx(C,{width:"180px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-3 mb-4",children:Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"d-flex gap-2 mb-2",children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"95%",height:"1rem"})]},`content-${a}`))}),i.jsx("div",{className:"ps-4 mb-3",children:Array.from({length:3}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"98%",height:"1rem"})]},`list-item-${a}`))})]})})]})})]})]})})}),yne=()=>{const[t,e]=f.useState("shortcodes"),[n,s]=f.useState(null),{isAddonActive:a}=ut(),l=(o,c)=>{navigator.clipboard.writeText(o),s(c),setTimeout(()=>{s(null)},1500)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Get help","kivicare-clinic-management-system")})}),a("kiviPro")&&i.jsx("div",{className:" d-flex align-items-center gap-3",children:i.jsx("a",{href:"https://iqonic.desky.support/",className:"btn btn-primary",children:r("Get Support","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"help-tabs",children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:[i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="shortcodes"?"nav-link active":"nav-link",id:"nav-shortcodes-tab",onClick:()=>e("shortcodes"),type:"button",role:"tab","aria-controls":"nav-shortcodes","aria-selected":t==="shortcodes",children:r("Shortcodes","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="telemed"?"nav-link active":"nav-link",id:"nav-telemed-tab",onClick:()=>e("telemed"),type:"button",role:"tab","aria-controls":"nav-telemed","aria-selected":t==="telemed",children:r("Telemed (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="woocommerce"?"nav-link active":"nav-link",id:"nav-woocommerce-tab",onClick:()=>e("woocommerce"),type:"button",role:"tab","aria-controls":"nav-woocommerce","aria-selected":t==="woocommerce",children:r("Woocommerce (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="googlecalendar"?"nav-link active":"nav-link",id:"nav-googlecalendar-tab",onClick:()=>e("googlecalendar"),type:"button",role:"tab","aria-controls":"nav-googlecalendar","aria-selected":t==="googlecalendar",children:r("Google Calendar (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="sms"?"nav-link active":"nav-link",id:"nav-sms-tab",onClick:()=>e("sms"),type:"button",role:"tab","aria-controls":"nav-sms","aria-selected":t==="sms",children:r("SMS (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="language"?"nav-link active":"nav-link",id:"nav-language-tab",onClick:()=>e("language"),type:"button",role:"tab","aria-controls":"nav-language","aria-selected":t==="language",children:r("Language","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="appointments"?"nav-link active":"nav-link",id:"nav-appointments-tab",onClick:()=>e("appointments"),type:"button",role:"tab","aria-controls":"nav-appointments","aria-selected":t==="appointments",children:r("Appointments","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="holiday"?"nav-link active":"nav-link",id:"nav-holiday-tab",onClick:()=>e("holiday"),type:"button",role:"tab","aria-controls":"nav-holiday","aria-selected":t==="holiday",children:r("Holiday","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel","aria-labelledby":"nav-shortcodes-tab",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx("h5",{className:"mb-4",children:r("KiviCare Shortcode","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[bookAppointment]"}),i.jsx(Ze,{placement:"top",overlay:o=>i.jsx(mt,{...o,children:n==="bookAppointment"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[bookAppointment]","bookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[patientDashboard]"}),i.jsx(Ze,{placement:"top",overlay:o=>i.jsx(mt,{...o,children:n==="patientDashboard"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[patientDashboard]","patientDashboard"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode patient can register,login, manage profile, manage password and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/patient-dashboard-widget/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointment]"}),i.jsx(Ze,{placement:"top",overlay:o=>i.jsx(mt,{...o,children:n==="kivicareBookAppointment"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareBookAppointment]","kivicareBookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"mt-md-3",children:i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget-customizable/",children:r("Overview","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareRegisterLogin]"}),i.jsx(Ze,{placement:"top",overlay:o=>i.jsx(mt,{...o,children:n==="kivicareRegisterLogin"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareRegisterLogin]","kivicareRegisterLogin"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode kivicare users ( doctor, patient and receptionist ) can register and login","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointmentButton]"}),i.jsx(Ze,{placement:"top",overlay:o=>i.jsx(mt,{...o,children:n==="kivicareBookAppointmentButton"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareBookAppointmentButton]","kivicareBookAppointmentButton"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsxs("p",{className:"mt-3 mb-0",children:[r("With following shortcode Users can register/login and book appointment In Popup","kivicare-clinic-management-system")," ",i.jsx(lt,{className:""})]})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-button-widget-customizable/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]})]})}),t==="telemed"&&i.jsxs("div",{className:"tab-pane fade show active",id:"nav-telemed",role:"tabpanel","aria-labelledby":"nav-telemed-tab",children:[i.jsxs("div",{className:" mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Telemed (Zoom Integration)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/#zoom-configuration",className:"btn btn-primary",children:r("Telemed Documentation","kivicare-clinic-management-system")})]}),i.jsx("p",{className:"mb-2",children:r("Setting up a Telemed (Zoom) appointment booking for a doctor. Doctor need to just follow few steps as mentioned below. We have also mentioned these steps in the doctor detail page. An administrator or Clinic admin can also do this for a doctor.","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("When a doctor is done with saving the Zoom API keys and charges, the doctor will get a Telemed service in their appointment services list.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Service name rendered from settings.","kivicare-clinic-management-system")]})]}),i.jsx("h6",{className:"fw-semibold mb-3",children:r("Zoom Configuration Guide","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 1:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[r("Sign up or sign in here. ","kivicare-clinic-management-system"),i.jsx("a",{href:"https://marketplace.zoom.us/",className:"text-decoration-none fw-semibold",children:r("Zoom Market Place Portal","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 2:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[r("Click/Hover on Develop button at the right in navigation bar and click on build app. ","kivicare-clinic-management-system"),i.jsxs("a",{href:"https://marketplace.zoom.us/develop/create",className:"text-decoration-none fw-semibold",children:['"',r("Create App","kivicare-clinic-management-system"),'"']}),"."]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 3:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r("Select JWT and click Create.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 4:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r("Fill the mandatory information. In the App Credentials tab, you can see the API Key and API Secret.","kivicare-clinic-management-system")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"fw-bold",children:r("Step 5:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r(`Copy and paste the API Key and API Secret here, then click on "Save"  you're ready to go.`,"kivicare-clinic-management-system")})]})]})]}),t==="woocommerce"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-woocommerce",role:"tabpanel","aria-labelledby":"nav-woocommerce-tab",children:i.jsxs("div",{className:"wocommerce-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("Woocommerce Payment Gateway","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/",className:"btn btn-primary ",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("For setting up a woocommerce payment gateway with kivicare payment, You have a basic woocommmerce setup with any payment method on it.","kivicare-clinic-management-system")}),i.jsx("li",{className:"mb-3",children:r("By default woocommerce payment is Disabled you need to Enabled it from payment tab in Setting page .","kivicare-clinic-management-system")}),i.jsx("li",{children:r("Appointment Service charges are considered for appointment's woocommerce payment.","kivicare-clinic-management-system")})]})]})}),t==="googlecalendar"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-googlecalendar",role:"tabpanel","aria-labelledby":"nav-googlecalendar-tab",children:i.jsxs("div",{className:"google-calander-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("Google Calendar","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-calendar/",className:"btn btn-primary",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:r("For setting up a Google Calendar (Appointment reminder) in kivicare setup we have provide a setup option in Pro Setting tab. You just need to enable google calendar service and fillup the Api key details.","kivicare-clinic-management-system")})})]})}),t==="sms"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-sms",role:"tabpanel","aria-labelledby":"nav-sms-tab",children:i.jsxs("div",{className:"sms-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("SMS (Twilio)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/pro-version/sms-notifications-twilio/",className:"btn btn-primary",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[r("For sending a SMS with kivicare we are providing","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/sms",children:r("Twilio SMS","kivicare-clinic-management-system")})," ",r("support.","kivicare-clinic-management-system")]})})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Set Twilio Geo Location Permission with your Twilio account. Basically you need to select country where you want to enable your SMS Service. ","kivicare-clinic-management-system"),i.jsx("a",{className:"text-primary flex-shrink-0 fw-semibold",href:"https://www.twilio.com/console/sms/settings/geo-permissions",children:r("Enable Geo Location","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-3",children:r("Common issue with Free trial SMS setup with Twilio","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("With twilio free SMS trial you can send SMS on only verified number.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[r("Here you can verify receiver's number with Twilio.","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/console/phone-numbers/verified",children:r("Verify receiver's number here","kivicare-clinic-management-system")})]})})]})]})]})}),t==="language"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-language",role:"tabpanel","aria-labelledby":"nav-language-tab",children:i.jsxs("div",{className:"language-tab",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:i.jsxs("h6",{className:"mb-0",children:[r("Multi-Language","kivicare-clinic-management-system")," ",i.jsxs("span",{className:"text-muted",children:["(",r("Soft deprecated","kivicare-clinic-management-system"),")"]})]})}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("For changing a language in your kivicare setup you we have provided a change language option in Pro settings tab in Settings page.","kivicare-clinic-management-system")}),i.jsx("li",{children:r("You need to change text for your selected language manually from Language setting tab in Settings page.","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Kivicare plugin requires a folder permission on mention path wp-content/uploads/kiviCare_lang","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("Common issue: Kivicare dashboard blank ?","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("This is happening because your kivicare setup has not given a appropriate permission for this wp-content/uploads/kiviCare_lang path.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"fw-semibold",children:r("Solution:","kivicare-clinic-management-system")})," ",r("You need to manually copy language json files from plugin folder resources/assets/lang and paste it to wp-content/uploads/kiviCare_lang folder.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:r("Wordpress Translation Plugin Support","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("You can change kivicare plugin text with the use of any wordpress translation plugin.","kivicare-clinic-management-system")})]})]})}),t==="appointments"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-appointments",role:"tabpanel","aria-labelledby":"nav-appointments-tab",children:i.jsxs("div",{className:"appointments-tab",children:[i.jsxs("p",{className:"mb-5",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If Woocommerce payment settings is toggle on, then appointment message sent through Email/SMS/Whatsapp after payment successfully done by patient And this feature is only available on Kivicare-Pro.","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-3",children:r("Restrict Advance Appointment Booking","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Open booking days:","kivicare-clinic-management-system")}),r("As consideration of current date booking already opened as mentioned days in settings.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:r("Close booking days:","kivicare-clinic-management-system")}),r("As consideration of current date booking already closed as mentioned days in settings.","kivicare-clinic-management-system")]})]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("Example","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("Current Date: 25 November","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-2",children:[i.jsx("span",{className:"",children:r("Pre-booking:","kivicare-clinic-management-system")})," ",r("10 days , so patient/doctor/receptionist can't select the date from 25 November to 5 December.","kivicare-clinic-management-system")]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"",children:r("Post-booking:","kivicare-clinic-management-system")})," ",r("10 days, so patient/doctor/receptionist can't select the date after 5 December.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("File Upload Setting","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("If Appointment File Upload toggle is on, then patient can add their reports at the time of booking an appointment.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If kivicare pro version is activate then patients can add more then one report, else patients can only add one report at a time while booking an appointment.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:r("Appointment Reminder","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Appointment Email Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Email Reminder will be send to patient through Email.","kivicare-clinic-management-system")]}),i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Appointment Sms Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Sms Reminder will be send to patient through SMS.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:r("Appointment Whatsapp Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Whatsapp Reminder will be send to patient through WhatsApp.","kivicare-clinic-management-system")]})]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Appointment Sms Reminder and Appointment Whatsapp Reminder, Required Kivicare-Pro to be Activated and also from pro settings: Toggle on WhatsApp and SMS, for access Appointment Sms Reminder and Appointment Whatsapp Reminder, this two setting is required to toggle on.","kivicare-clinic-management-system")]})]})]})}),t==="holiday"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-holiday",role:"tabpanel","aria-labelledby":"nav-holiday-tab",children:i.jsxs("div",{className:"holiday-tab",children:[i.jsx("h6",{className:"mb-4",children:r("Add Holiday","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsx("li",{className:"mb-3",children:r("If an holiday is set and they have an appointment between that holiday dates then all appointments will get cancelled and appointment cancelled mail/sms/whatsapp message will send to patients.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:r("sms/whatsapp only work in kivicare-pro only.","kivicare-clinic-management-system")})})]}),i.jsxs("p",{className:"m-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("once an holiday is set and appointments get cancelled then cancelled appointments cannot be reverted.","kivicare-clinic-management-system")]})]})})]})})]})]})})})};function wC(){return i.jsx("div",{children:"GetHelpManageForm"})}const bne=[Gn({path:"/get-help",title:"Get Help",outlet:vne,meta:{description:"Help and support system",icon:"help-circle",showInSidebar:!0},children:[We({path:"",component:yne,title:"All Help Topics",index:!0,skeleton:xne,meta:{description:"List of all help topics",breadcrumb:"All Help Topics"}}),We({path:"add",component:wC,title:"Add Help Topic",props:{isEditing:!1},meta:{description:"Create a new help topic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:wC,title:"Edit Help Topic",props:{isEditing:!0},index:!0,meta:{description:"Edit existing help topic",breadcrumb:"Edit"}})]})],wne=()=>{const t=Kn();return i.jsxs("div",{className:"receptionists-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/receptionist"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},Fy=()=>i.jsxs(i.Fragment,{children:[i.jsx(kl,{titleWidth:"140px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx(C,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(C,{width:"200px",height:"200px",style:{borderRadius:"50%"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"35px"})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"70px",height:"1rem"}),i.jsx(C,{width:"55px",height:"1rem"})]})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"120px"})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(C,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Se,{labelWidth:"85px"})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"130px",height:"38px"})]})]}),Ja={getReceptionists:(t={})=>ve({endpoint:"receptionists",method:"GET",data:t}),getReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"GET"}),createReceptionist:t=>ve({endpoint:"receptionists",method:"POST",data:t}),updateReceptionist:(t,e)=>ve({endpoint:`receptionists/${t}`,method:"PUT",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),getClinicReceptionists:(t,e={})=>ve({endpoint:`clinics/${t}/receptionists`,method:"GET",data:e}),getReceptionistPatients:(t,e={})=>ve({endpoint:`receptionists/${t}/patients`,method:"GET",data:e}),getReceptionistSchedule:(t,e={})=>ve({endpoint:`receptionists/${t}/schedule`,method:"GET",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),bulkDeleteReceptionists:t=>ve({endpoint:"receptionists/bulk-delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`receptionists/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"receptionists/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateReceptionistStatus:(t,e)=>ve({endpoint:"receptionists/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportReceptionists:(t={})=>ve({endpoint:"receptionists/export",method:"GET",data:t})},Ks={all:["receptionists"],lists:()=>[...Ks.all,"list"],list:t=>[...Ks.lists(),{filters:t}],details:()=>[...Ks.all,"detail"],detail:t=>[...Ks.details(),t]},kne=(t={},e={})=>ft({queryKey:Ks.list(t),queryFn:()=>Ja.getReceptionists(t),...e}),jne=(t,e={})=>ft({queryKey:Ks.detail(t),queryFn:()=>Ja.getReceptionist(t),enabled:!!t,...e}),Nne=()=>{const t=Ve();return Le({mutationFn:e=>Ja.createReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Cne=()=>{const t=Ve();return Le({mutationFn:({id:e,...n})=>Ja.updateReceptionist(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ks.detail(n.id)}),t.invalidateQueries({queryKey:Ks.lists()})}})},Sne=()=>{const t=Ve();return Le({mutationFn:e=>Ja.deleteReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},_ne=()=>{const t=Ve();return Le({mutationFn:e=>Ja.bulkDeleteReceptionists(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Ene=()=>Le({mutationFn:t=>Ja.resendCredentials(t)}),Tne=()=>Le({mutationFn:t=>Ja.bulkResendCredentials(t)}),Ane=()=>{const t=Ve();return Le({mutationFn:({ids:e,status:n})=>Ja.bulkUpdateReceptionistStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Dne=()=>Le({mutationFn:t=>Ja.exportReceptionists(t)}),Rne=()=>{const{hasCapability:t,isAddonActive:e}=ut(),[n,s]=f.useState([]),[a,l]=f.useState(!1),o=f.useRef(null),c=Xn(),d=Jn(),m={page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:""},[u,p]=f.useState(m),h=Y=>{if(Y.length>0){const{id:H,desc:B}=Y[0],re={id:"id",profile:"display_name",clinic_name:"clinic_name",contact_number:"contact_number",status:"user_status"};p(de=>({...de,orderby:re[H]||H,order:B?"desc":"asc",page:1}))}else p(H=>({...H,orderby:"",order:"",page:1}))},[g,x]=f.useState(""),v=Za(g,500);ze.useEffect(()=>{p(Y=>({...Y,search:v,page:1}))},[v]);const[y,b]=f.useState(!1),[k,w]=f.useState(!1),S=f.useMemo(()=>Object.fromEntries(Object.entries(u).filter(([Y,H])=>H!==""&&H!==null&&H!==void 0)),[u]),{data:j,isLoading:T,error:N,refetch:_}=kne(S),A=Ve(),P=async({page:Y,per_page:H,search:B})=>{try{const re={dataType:"clinicList",page:Y,per_page:H,search:B},de=await A.fetchQuery({queryKey:pt.list(re),queryFn:()=>Dt.getStaticData(re),staleTime:300*1e3}),xe=de.data.map(U=>({value:U.id,label:U.label||U.name}));return s(U=>[...U,...xe]),de}catch(re){return console.error("Error loading clinics:",re),{data:[],pagination:{has_more:!1}}}},E=Sne(),M=_ne(),R=Tne(),O=Ane(),L=Dne(),q=Ene(),Q=j?.data?.receptionists||[],V=j?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},se=Y=>{wt({title:r("Delete Receptionist?","kivicare-clinic-management-system"),text:r("You're about to delete this receptionist.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep receptionist","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(H=>{H.isConfirmed&&(yt({title:r("Deleting Receptionist...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected receptionist.<br>This won't take long.","kivicare-clinic-management-system")}),E.mutate(Y,{onSuccess:()=>{Tt({title:r("Receptionist Deleted","kivicare-clinic-management-system"),text:r("Receptionist has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to receptionists","kivicare-clinic-management-system")}),_()},onError:B=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to delete receptionist.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},G=(Y,H)=>{wt({title:r("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),H),icon:"ph-question",confirmButtonText:r("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(B=>{B.isConfirmed&&q.mutate(Y,{onSuccess:()=>{Tt({title:r("Credentials Sent!","kivicare-clinic-management-system"),text:r("Receptionist credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:re=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:re.message||r("Failed to resend credentials.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}})})},ge=e("kiviPro"),ie=Ln(),W=f.useMemo(()=>[ie.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:Y=>i.jsx("div",{className:"font-weight-medium",children:Y.getValue()})}),ie.accessor("profile",{id:"profile",enableSorting:!0,header:()=>r("Receptionist","kivicare-clinic-management-system"),cell:Y=>i.jsx(cn,{profileUrl:Y.row.original.receptionist_image_url,name:Y.row.original.first_name+" "+Y.row.original.last_name,email:Y.row.original.email||"",fallbackText:(Y.row.original.first_name?.charAt(0)||"")+(Y.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")}),sortingFn:(Y,H)=>{const B=`${Y.original.first_name} ${Y.original.last_name}`.toLowerCase(),re=`${H.original.first_name} ${H.original.last_name}`.toLowerCase();return B.localeCompare(re)}}),...ge&&!c&&!d?[ie.accessor("clinic_name",{id:"clinic_name",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(Y,H)=>{const B=`${Y.original.first_name} ${Y.original.last_name}`.toLowerCase(),re=`${H.original.first_name} ${H.original.last_name}`.toLowerCase();return B.localeCompare(re)},cell:Y=>i.jsx(cn,{profileUrl:Y.row.original?.clinic?.clinic_image_url,name:Y.row.original?.clinic?.clinic_name,email:Y.row.original?.clinic?.clinic_email||"",fallbackText:(Y.row.original.first_name?.charAt(0)||"")+(Y.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:r("Receptionist","kivicare-clinic-management-system")})})]:[],ie.accessor("contact_number",{id:"contact_number",header:()=>r("Contact Number","kivicare-clinic-management-system"),cell:Y=>i.jsx("div",{children:i.jsx("span",{children:Y.row.original.contact_number||""})})}),ie.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:Y=>{const H=Number(Y.getValue()),B=Y.row.original,re=()=>{const de=H===1?0:1;wt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),B.first_name+" "+B.last_name,de===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(xe=>{xe.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),O.mutate({ids:[B.id],status:de},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Receptionist status has been updated successfully.","kivicare-clinic-management-system")})},onError:U=>{rt({title:r("Error","kivicare-clinic-management-system"),text:U.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return t("receptionist_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`receptionist-status-${B.id}`,checked:H===0,onChange:re}),i.jsx("label",{className:"form-check-label",htmlFor:`receptionist-status-${B.id}`,children:i.jsx("span",{className:`badge ${H===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:H===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${H===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:H===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),...t("receptionist_edit")||t("receptionist_resend_credential")||t("receptionist_delete")?[ie.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Y=>{const H=B=>re=>i.jsx(mt,{id:`tooltip-${Y.cell.row.original.id}-${B}`,...re,children:B});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[t("receptionist_edit")&&i.jsx(Ze,{placement:"top",overlay:H(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/receptionist/edit/${Y.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),t("receptionist_resend_credential")&&i.jsx(Ze,{placement:"top",overlay:H(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>G(Y.row.original.id,Y.row.original.display_name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),t("receptionist_delete")&&i.jsx(Ze,{placement:"top",overlay:H(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>se(Y.row.original.id),disabled:E.isPending,children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[E.isPending,t]),X=Y=>{x(Y.target.value)},J=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],ue=async Y=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const H={format:Y};u.search&&(H.search=u.search),u.clinic&&(H.clinic_id=u.clinic),u.status!==""&&u.status!==null&&u.status!==void 0&&(H.status=u.status),u.orderBy&&(H.orderby=u.orderBy),u.order&&(H.order=u.order);const B=await L.mutateAsync(H);if(B?.data?.receptionists){const re=new Date().toISOString().split("T")[0],de=B.data.receptionists.map(xe=>({id:xe.id,name:xe.name,clinic_name:xe.clinic_name||"",clinic_id:xe.clinic_id||"",email:xe.email,contact_number:xe.contact_number,gender:xe.gender,dob:xe.dob,status:xe.user_status,full_address:xe.full_address}));switch(Y){case"csv":ps(de,`receptionists-${re}.csv`);break;case"xls":gs(de,`receptionists-${re}.xls`);break;case"pdf":fs(de,`receptionists-${re}.pdf`,"Receptionists List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}}catch(H){console.error("Export error:",H),rt({title:r("Error!","kivicare-clinic-management-system"),text:H.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},le=()=>ue("csv"),I=()=>ue("xls"),[ee,K]=f.useState(!1),ne=()=>{ee||(K(!0),ue("pdf"),setTimeout(()=>K(!1),2e3))},oe=Y=>{p({...u,...Y,page:1}),b(!1)},D=()=>{p(m),s([]),x("")},$=f.useMemo(()=>["search","id","receptionistName","clinic","receptionistAddress","status"].some(H=>{const B=u[H];return B!=null&&B!==""})||g!=="",[u,g]),te=async Y=>{console.log("Import data:",Y);try{return Tt({title:r("Success!","kivicare-clinic-management-system"),text:r("Receptionists data imported successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),{success:!0}}catch(H){throw console.error("Import error:",H),H}},ae=[{type:"number",name:"id",label:r("Receptionist ID","kivicare-clinic-management-system"),placeholder:r("Enter Receptionist ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Y=>{Y.target.value=Y.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"receptionistName",label:r("Receptionist Name","kivicare-clinic-management-system"),placeholder:r("Enter Receptionist Name","kivicare-clinic-management-system"),min:1},...ge&&!c&&!d?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:P,options:n,key:"clinic-filter"}]:[],{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select status","kivicare-clinic-management-system"),options:J}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Receptionists","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t("receptionist_add")&&i.jsxs(ht,{to:"/receptionist/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Receptionist","kivicare-clinic-management-system")})]}),ge&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>w(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>b(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!a,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:o,children:i.jsxs("div",{ref:o,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[ge&&!c&&!d&&i.jsx(dn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:P,value:n.find(Y=>Y.value===u.clinic)||null,onChange:Y=>{p(H=>({...H,clinic:Y?Y.value:""}))},dependencies:{},isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:J,onChange:Y=>p(H=>({...H,status:Y?Y.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Y=>({...Y,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:g,onChange:X})]})}),t("receptionist_export")&&ge&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:le,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:I,disabled:L.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ne,disabled:ee,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:Q,columns:W,isLoading:T||E.isPending,error:N,currentPage:V.currentPage,perPage:V.perPage,totalItems:V.total,lastPage:V.lastPage,onPageChange:Y=>p(H=>({...H,page:Y})),onPerPageChange:Y=>p(H=>({...H,perPage:Y,page:1})),onSortingChange:h,manualSorting:!0,enableSelection:!0,moduleNamePlural:"receptionists",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(Y,H)=>{const B=Y.map(re=>re.id);wt({title:r("Delete Receptionists?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${Y.length} receptionists</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep receptionists","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(re=>{re.isConfirmed&&(yt({title:r("Deleting Receptionists...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected receptionists.<br>This won't take long.","kivicare-clinic-management-system")}),M.mutate(B,{onSuccess:de=>{Tt({title:r("Receptionist Deleted","kivicare-clinic-management-system"),text:r(`${Y.length} receptionist${Y.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to receptionists","kivicare-clinic-management-system")}),H()},onError:de=>{console.error("Bulk delete clinics error:",de);const xe=de?.response?.data?.message||de?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:xe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(Y,H)=>{const B=Y.map(re=>re.id);wt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected Receptionists?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(re=>{re.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),R.mutate(B,{onSuccess:de=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:de?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),H()},onError:de=>{console.error("Bulk resend credentials error:",de);const xe=de?.response?.data?.message||de?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:xe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(Y,H)=>{const B=Y.map(re=>re.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Receptionists to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(re=>{re.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"0"},{onSuccess:de=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:de?.message||r("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),H()},onError:de=>{console.error("Bulk update status error:",de);const xe=de?.response?.data?.message||de?.message||r("Failed to update Receptionists status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:xe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(Y,H)=>{const B=Y.map(re=>re.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Receptionists to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(re=>{re.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"1"},{onSuccess:de=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:de?.message||r("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),H()},onError:de=>{console.error("Bulk update status error:",de);const xe=de?.response?.data?.message||de?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:xe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Y=>{l(Y)}})]}),i.jsx(na,{show:y,onHide:()=>b(!1),queryParams:u,onApplyFilters:oe,onResetFilters:D,title:r("Filters","kivicare-clinic-management-system"),fields:ae,hasAppliedFilters:$}),ge&&i.jsx(Lr,{show:k,onHide:()=>w(!1),onImport:te,onReopenImport:()=>w(!0),onDataRefresh:_,context:"receptionists"})]})};function Ly({isEditing:t=!1,isProfile:e=!1}){const n=hn(),{id:s}=Gt(),{currentuserID:a,defaultCountryCode:l,showOtherGender:o}=ut(),{data:c}=_n(),d=Ve(),m=f.useMemo(()=>c?.data?.kc_available_translations||[{lang:"en_US",label:"English (United States)"}],[c]),u=e?a:s,p=Nne(),h=Cne(),{isAddonActive:g}=ut(),x=g("kiviPro"),[v,y]=f.useState(!1),b=v||p.isPending,{data:k,isLoading:w,error:S}=jne(u,{enabled:(t||e)&&!!u}),j=k?.data,T=async({page:W,per_page:X,search:J})=>{try{const ue={dataType:"clinicList",page:W,per_page:X,search:J};return await d.fetchQuery({queryKey:pt.list(ue),queryFn:()=>Dt.getStaticData(ue),staleTime:300*1e3})}catch(ue){return console.error("Error loading clinics:",ue),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},N=Vc.PhoneNumberUtil.getInstance(),_=W=>{try{return N.isValidNumber(N.parseAndKeepRawInput(W))}catch{return!1}},A=[{value:0,label:r("Active","kivicare-clinic-management-system")},{value:1,label:r("Inactive","kivicare-clinic-management-system")}],{register:P,handleSubmit:E,control:M,watch:R,setValue:O,formState:{errors:L},reset:q}=en({defaultValues:{receptionistImage:"",receptionistImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",status:A[0],gender:"",address:"",city:"",country:"",postalCode:""}});f.useEffect(()=>{if(t&&j&&!w){const W={firstName:j.first_name||"",lastName:j.last_name||"",email:j.email||"",contactNumber:j.contact_number||"",dob:j.dob||"",gender:j.gender||"",status:A.find(X=>X.value===parseInt(j.status))||A[0],clinic:j?.clinic?{value:j.clinic.clinic_id,label:j.clinic.clinic_name}:null,receptionistImageId:j.receptionist_image_id||"",receptionistImage:j.receptionist_image_url||"",address:j.address||"",city:j.city||"",country:j.country||"",postalCode:j.postal_code||""};console.log(W.clinic),q(W),setTimeout(()=>{O("contactNumber",j.contact_number||"")},0)}},[t,j]);const Q=(W,X)=>{console.log(`Updating ${W} with:`,X),O(W,X.url||X.image),O(`${W}Id`,X.id||X.imageId)},V=async W=>{y(!0);try{console.log("Form Data:",W);const X={first_name:W.firstName,last_name:W.lastName,email:W.email,clinic_id:W.clinic?.value||W.clinic,contact_number:W.contactNumber,dob:W.dob,status:W.status?.value||W.status,gender:W.gender,receptionist_image:W.receptionistImage,receptionist_image_id:W.receptionistImageId,address:W.address,city:W.city,country:W.country,postal_code:W.postalCode};let J;t?(J=await h.mutateAsync({id:u,...X}),Te.success(r("Receptionist updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(J=await p.mutateAsync(X),Te.success(r("Receptionist created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||n("/receptionist")}catch(X){console.error("Submission error:",X);const J=X.response?.data?.message||X.message||r("Failed to save receptionist. Please try again.","kivicare-clinic-management-system");Te.error(J,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{y(!1)}},se=W=>{console.log("Validation errors:",W);const X=Object.keys(W)[0],J=document.getElementById(X);J&&(J.scrollIntoView({behavior:"smooth",block:"center"}),J.focus())},G={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:{required:r("Clinic selection is required","kivicare-clinic-management-system")},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:W=>W?_(W)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},dob:{validate:W=>{if(!W)return!0;const X=new Date(W);return new Date().getFullYear()-X.getFullYear()>=18||r("Receptionist must be at least 18 years old","kivicare-clinic-management-system")}},status:{required:r("Status is required","kivicare-clinic-management-system")},gender:{required:r("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},city:{minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}},country:{minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:r("Invalid postal code format","kivicare-clinic-management-system")}}},ge=t?r("Edit Receptionist","kivicare-clinic-management-system"):r("Add Receptionist","kivicare-clinic-management-system"),ie=t?r("Update Receptionist","kivicare-clinic-management-system"):r("Save Receptionist","kivicare-clinic-management-system");return(t||e)&&w?i.jsx(Fy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):ge})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("form",{onSubmit:E(V,se),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(Ne,{name:"receptionistImage",control:M,render:({field:W})=>i.jsx(yl,{id:"receptionist-image-upload",name:"receptionistImage",label:r("Profile Image","kivicare-clinic-management-system"),defaultImage:W.value,defaultImageId:R("receptionistImageId"),onChange:X=>{Q("receptionistImage",X)},size:200,register:P,errors:L,className:""})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${L.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...P("firstName",G.firstName)}),L.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:L.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${L.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...P("lastName",G.lastName)}),L.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:L.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${L.email?"is-invalid":""}`,placeholder:r('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...P("email",G.email)}),L.email&&i.jsx("div",{className:"invalid-feedback d-block",children:L.email.message})]})}),x&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"clinic",control:M,rules:G.clinic,render:({field:W})=>i.jsx(dn,{id:"clinic",loadOptions:T,value:W.value,onChange:X=>W.onChange(X),placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${L.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{}})}),L.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:L.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"contactNumber",control:M,rules:G.contactNumber,render:({field:W})=>i.jsx(eo,{defaultCountry:l,value:W.value,onChange:W.onChange,inputProps:{className:`form-control ${L.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":L.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),L.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:L.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:r("DOB","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"dob",control:M,rules:G.dob,render:({field:W})=>i.jsx(Un,{id:"dob",className:`form-control ${L.dob?"is-invalid":""}`,value:W.value?Zn(W.value):"",onChange:X=>{if(X&&X[0]){const J=X[0],ue=`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`;W.onChange(ue)}else W.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&w})}),L.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:L.dob.message})]})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(Ne,{name:"status",control:M,rules:G.status,render:({field:W})=>i.jsx(ct,{id:"status",className:`react-select-box ${L.status?"is-invalid":""}`,classNamePrefix:"react-select",options:A,value:W.value,onChange:W.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:X=>({...X,zIndex:9999})}})}),L.status&&i.jsx("div",{className:"invalid-feedback d-block",children:L.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...P("gender",G.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...P("gender",G.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),o&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${L.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...P("gender",G.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),L.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:L.gender.message})]})}),e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"language",className:"form-label",children:r("Choose Language","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"language",control:M,render:({field:W})=>i.jsx(ct,{id:"language",options:m.map(X=>({value:X.lang,label:X.label})),value:W.value,onChange:W.onChange,placeholder:r("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:X=>({...X,zIndex:9999})}})})]})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:r("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${L.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...P("address",G.address)}),L.address&&i.jsx("div",{className:"invalid-feedback d-block",children:L.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${L.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...P("city",G.city)}),L.city&&i.jsx("div",{className:"invalid-feedback d-block",children:L.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${L.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...P("country",G.country)}),L.country&&i.jsx("div",{className:"invalid-feedback d-block",children:L.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${L.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...P("postalCode",G.postalCode)}),L.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:L.postalCode.message})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:b}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):ie})]})]})]})}const Pne=Object.freeze(Object.defineProperty({__proto__:null,default:Ly},Symbol.toStringTag,{value:"Module"})),Mne=[Gn({path:"/receptionist",title:"Receptionist",outlet:wne,permissions:["receptionist_list"],module:"receptionist",meta:{description:"Receptionist management system",icon:"user-circle",showInSidebar:!0},children:[We({path:"",component:Rne,title:"All Receptionists",index:!0,permissions:["receptionist_list"],module:"receptionist",meta:{description:"List of all receptionists",breadcrumb:"All Receptionists"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Ly,title:"Add Receptionist",props:{isEditing:!1},permissions:["receptionist_add"],module:"receptionist",skeleton:Fy,meta:{description:"Create a new receptionist",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Ly,title:"Edit Receptionist",props:{isEditing:!0},permissions:["receptionist_edit"],module:"receptionist",skeleton:Fy,meta:{description:"Edit existing receptionist",breadcrumb:"Edit"}})]})],Ine=()=>{const t=Kn();return i.jsxs("div",{className:"doctors-service-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/service"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},One=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",category:"",status:"",orderBy:"",order:""}),[n,s]=f.useState([]),{isAddonActive:a,hasCapability:l,currencyPrefix:o,currencyPostfix:c}=ut(),d=a("kiviPro"),m=Xn(),u=Jn(),{data:p,isLoading:h}=Va("service_type"),g=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([$,te])=>te!==""&&te!==null&&te!==void 0)),[t]),{data:x,isLoading:v,error:y}=FA(g),b=wV(),k=kV(),w=jV(),[S,j]=f.useState(!1),[T,N]=f.useState(!1),_=async $=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const te=new Date().toISOString().split("T")[0],ae=M.map(Y=>({id:Y.id,serviceId:Y.serviceId,serviceName:Y.serviceName,clinicName:Y.clinicName,doctorName:Y.doctorName,charges:Y.charges,duration:Y.duration,category:Y.category,status:Y.status===1?"Active":"Inactive"}));switch($){case"csv":ps(ae,`services-${te}.csv`);break;case"xls":gs(ae,`services-${te}.xls`);break;case"pdf":fs(ae,`services-${te}.pdf`,"Services List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(te){console.error("Export error:",te),rt({title:r("Error!","kivicare-clinic-management-system"),text:te.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},A=()=>_("csv"),P=()=>_("xls"),E=()=>{S||(j(!0),_("pdf"),setTimeout(()=>j(!1),2e3))},M=x?.data?.doctorServices||[],R=x?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useMemo(()=>p?.data?p.data.map($=>{let te="",ae="";return typeof $=="string"?(te=$,ae=$):typeof $=="object"&&$!==null&&(te=$.label||$.name||"",ae=$.id??$.name??te),{value:ae,label:te}}):[],[p]);const O=Ve(),L=f.useCallback(async({page:$,per_page:te,search:ae})=>{try{const Y={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:$,per_page:te,search:ae},H=await O.fetchQuery({queryKey:pt.list(Y),queryFn:()=>Dt.getStaticData(Y),staleTime:0}),B=H.data.map(re=>({value:re.id,label:re.label||re.name}));return s(re=>{const de=B.filter(xe=>!re.some(U=>U.value===xe.value));return[...re,...de]}),H.data.map(re=>{let de="",xe="";return typeof re=="string"?(de=re,xe=re):typeof re=="object"&&re!==null&&(de=re.label||re.name||"",xe=re.id??re.name??de),{value:xe,label:de}})}catch(Y){return console.error("Error loading Specialties:",Y),{data:[],pagination:{has_more:!1}}}},[O]),q=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[Q,V]=f.useState(""),se=Za(Q,500);ze.useEffect(()=>{e($=>({...$,search:se,page:1}))},[se]);const G=$=>{if($.length>0){const{id:te,desc:ae}=$[0],Y={id:"id",serviceId:"serviceId",serviceName:"serviceName",clinicName:"clinicName",doctorName:"doctorName",charges:"charges",duration:"duration",category:"category",status:"status"};e(H=>({...H,orderby:Y[te]||te,order:ae?"desc":"asc",page:1}))}else e(te=>({...te,orderby:"",order:"",page:1}))},ge=$=>{V($.target.value)},[ie,W]=f.useState(!1),[X,J]=f.useState(!1),ue=f.useRef(null),le=$=>{const te={};for(const ae in $)if(Object.prototype.hasOwnProperty.call($,ae)){const Y=$[ae];te[ae]=typeof Y=="string"?Y.trim():Y}e(ae=>({...ae,...te,page:1})),W(!1)},I=()=>{const $={page:1,perPage:t.perPage,search:"",id:"",doctorName:"",clinicName:"",serviceName:"",charges:"",duration:"",category:"",status:"",orderBy:"",order:""};e($),s([]),W(!1)},ee=f.useMemo(()=>["search","id","serviceName","clinicName","doctorName","charges","category","status"].some(te=>{const ae=t[te];return typeof ae=="object"&&ae!==null?ae.value!==void 0&&ae.value!=="":ae!=null&&ae!==""})||Q!=="",[t,Q]),K=[{type:"number",name:"id",label:r("ID","kivicare-clinic-management-system"),placeholder:r('eg "123"',"kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:$=>{$.target.value=$.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"serviceName",label:r("Service Name","kivicare-clinic-management-system"),placeholder:r("eg Full body checkup","kivicare-clinic-management-system")},...d&&!m&&!u?[{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system")}]:[],{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("eg Albert Heaven","kivicare-clinic-management-system")},{type:"number",name:"charges",label:r("Charges","kivicare-clinic-management-system"),placeholder:r('eg "100"',"kivicare-clinic-management-system"),min:0,pattern:"[0-9]*",onInput:$=>{$.target.value=$.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"category",label:r("Category","kivicare-clinic-management-system"),placeholder:r('eg "General Dentistry"',"kivicare-clinic-management-system"),optionLoader:L,isSearchable:!0,perPage:50,storeObject:!0},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r('eg "Active"',"kivicare-clinic-management-system"),options:q,isSearchable:!1}],ne=Ln(),oe=f.useMemo(()=>[ne.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>`${$.getValue()}`}),ne.accessor("serviceId",{header:()=>r("Service ID","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>$.getValue()}),ne.accessor("serviceName",{header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>i.jsx(cn,{profileUrl:$.row.original.service_image_url,name:$.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:r("Service","kivicare-clinic-management-system")})}),...d&&!m&&!u?[ne.accessor("clinicName",{id:"clinicName",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>{const te=$.row.original.clinicName,ae=$.row.original.clinicProfileImage,Y=$.row.original.clinicEmail,H=$.row.original.clinicContactNumber;return i.jsx(cn,{profileUrl:ae,name:te,fallbackText:"CL",variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system"),email:Y,contactNumber:H})}})]:[],ne.accessor("doctorName",{header:()=>r("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>i.jsx(cn,{profileUrl:$.row.original.doctorProfileImage,name:$.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system"),email:$.row.original.doctorEmail,contactNumber:$.row.original.doctorContactNumber})}),ne.accessor("charges",{header:()=>r("Charges","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>`${o||""}${$.getValue()}${c||""}`}),ne.accessor("duration",{header:()=>r("Duration","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>$.getValue()}),ne.accessor("category",{header:()=>r("Category","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>$.getValue()}),ne.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:$=>{const te=Number($.getValue()),ae=$.row.original,Y=()=>{const H=te===1?0:1;wt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),ae.service_name,H===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),w.mutate({ids:[ae.id],status:H},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Service status has been updated successfully.","kivicare-clinic-management-system")})},onError:re=>{rt({title:r("Error","kivicare-clinic-management-system"),text:re.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return l("service_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`service-status-${ae.id}`,checked:te===1,onChange:Y}),i.jsx("label",{className:"form-check-label",htmlFor:`service-status-${ae.id}`,children:i.jsx("span",{className:`badge ${te===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:te===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${te===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:te===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),ne.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:$=>{const te=ae=>Y=>i.jsx(mt,{id:`tooltip-${$.cell.row.original.id}-${ae}`,...Y,children:ae});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l("service_edit")&&i.jsx(Ze,{placement:"top",overlay:te(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/service/edit/${$.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),l("service_delete")&&i.jsx(Ze,{placement:"top",overlay:te(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>D($.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[l]),D=$=>{wt({title:r("Delete Service?","kivicare-clinic-management-system"),text:r("You're about to delete this service.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep service","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(te=>{te.isConfirmed&&(yt({title:r("Deleting Service...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected service.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate($,{onSuccess:ae=>{Tt({title:r("Deleted!","kivicare-clinic-management-system"),text:ae?.message||r("Service has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to services","kivicare-clinic-management-system")})},onError:ae=>{rt({text:ae?.response?.data?.message||r("Failed to delete service. Please try again.","kivicare-clinic-management-system")})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Services","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[l("service_add")&&i.jsxs(ht,{to:"/service/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Service","kivicare-clinic-management-system")})]}),d&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>W(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsx(na,{show:ie,onHide:()=>W(!1),queryParams:t,onApplyFilters:le,onResetFilters:I,title:r("Filters","kivicare-clinic-management-system"),fields:K,hasAppliedFilters:ee}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!X,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:ue,children:i.jsxs("div",{ref:ue,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(dn,{id:"specialties-filter",placeholder:r("Category","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:L,value:n.find($=>$.value===t.category)||null,onChange:$=>{console.log($),e(te=>({...te,category:$?$.value:""}))},isClearable:!0,perPage:50}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:q,onChange:$=>e(te=>({...te,status:$?String($.value):""})),isSearchable:!1,isClearable:!0,styles:{menuPortal:$=>({...$,zIndex:9999})},value:q.find($=>String($.value)===String(t.status))||null})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:Q,onChange:ge})]})}),l("service_export")&&d&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:A,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:P,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:E,disabled:S,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(kn,{data:M,columns:oe,isLoading:v,error:y,currentPage:R.currentPage,perPage:R.perPage,totalItems:R.total,lastPage:R.lastPage,onPageChange:$=>e(te=>({...te,page:$})),onPerPageChange:$=>e(te=>({...te,perPage:$,page:1})),onSortingChange:G,manualSorting:!0,enableSelection:!0,moduleNamePlural:"services",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:($,te)=>{const ae=$.map(Y=>Y.id);wt({title:r("Delete Services?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${$.length} services</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep services","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Services...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected services.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(ae,{onSuccess:H=>{Tt({title:r("Deleted!","kivicare-clinic-management-system"),text:r(`${$.length} service${$.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to services","kivicare-clinic-management-system")}),te()},onError:H=>{rt({text:H?.response?.data?.message||r("Failed to delete selected services. Please try again.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Set Active","kivicare-clinic-management-system"),action:($,te)=>{const ae=$.map(Y=>Y.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to activate selected services?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, activate","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(Y=>{Y.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:ae,status:1},{onSuccess:H=>{Tt({text:H?.message||r("Services have been activated successfully.","kivicare-clinic-management-system")}),te()},onError:H=>{rt({text:H?.response?.data?.message||r("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:($,te)=>{const ae=$.map(Y=>Y.id);wt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to deactivate selected services?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, deactivate","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:ae,status:0},{onSuccess:H=>{Tt({text:H?.message||r("Services have been deactivated successfully.","kivicare-clinic-management-system")}),te()},onError:H=>{rt({text:H?.response?.data?.message||r("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:$=>{J($)}})]}),d&&i.jsx(Lr,{show:T,onHide:()=>N(!1),onReopenImport:()=>N(!0),onDataRefresh:()=>{window.location.reload()},context:"services"})]})},Fne=[Gn({path:"/service",title:"Services",outlet:Ine,permissions:["service_list"],meta:{description:"Manage doctor services",icon:"fa-server",showInSidebar:!0},children:[We({path:"",component:One,index:!0,permissions:["service_list"],meta:{description:"List of all doctor services",breadcrumb:"All Doctor Services"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Iy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],skeleton:tg,meta:{description:"Create a new doctor service",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Iy,title:"Edit Doctor Service",props:{isEditing:!0},permissions:["service_edit"],skeleton:tg,meta:{description:"Edit existing doctor service",breadcrumb:"Edit"}})]})],Lne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"404"}),i.jsx("p",{className:"fs-3",children:r("Page not found.","kivicare-clinic-management-system")}),i.jsx("p",{className:"lead",children:r("The page you're looking for doesn't exist.","kivicare-clinic-management-system")}),i.jsx(ei,{text:r("Go Home","kivicare-clinic-management-system"),showIcon:!1})]})}),$ne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"500"}),i.jsx("p",{className:"fs-3",children:r("Internal Server Error","kivicare")}),i.jsx("p",{className:"lead",children:r("Something went wrong on our end. Please try again later.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:r("Go Home","kivicare")})]})}),Bne=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("Maintenance","kivicare")}),i.jsx("p",{className:"fs-3",children:r("System Under Maintenance","kivicare")}),i.jsx("p",{className:"lead",children:r("We're currently performing scheduled maintenance. Please check back soon.","kivicare")}),i.jsx("p",{className:"text-muted",children:r("We apologize for any inconvenience.","kivicare")})]})}),qne=[We({path:"/403",component:Xd,title:"Access Denied",exact:!0,meta:{description:"Access denied error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/500",component:$ne,title:"Server Error",exact:!0,meta:{description:"Internal server error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/maintenance",component:Bne,title:"Maintenance",exact:!0,meta:{description:"Maintenance mode page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"*",component:Lne,title:"Page Not Found",meta:{description:"Page not found fallback",hideFromBreadcrumb:!0,hideFromSidebar:!0}})],Hne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsx(gt,{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column py-4",children:[i.jsx(C,{width:"70px",height:"70px",className:"rounded-circle"}),i.jsxs("div",{className:"text-center w-100",children:[i.jsx(C,{width:"250px",height:"1.5rem",className:"mx-auto mb-3"}),i.jsx(C,{width:"350px",height:"1rem",className:"mx-auto mb-5"}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx(C,{width:"80%",height:"3rem",style:{borderRadius:"50px"}})}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(st,{className:"mx-auto",width:"120px",height:"42px"})})]})]})})})]})})}),zne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"320px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e)),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Se,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Vne=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(C,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e)),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(C,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"1rem"})]})]})]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(gt,{children:[i.jsx(C,{width:"200px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"350px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsx("div",{className:"row gy-4",children:Array.from({length:6}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px",inputHeight:"45px"})},e))})}),i.jsx("div",{className:"col-md-4 ",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(C,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-3"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),Une=({currentStep:t,onStepClick:e})=>{const n={1:"ph ph-hand-waving",2:"ph ph-hospital",3:"ph ph-user-circle-check"};return i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill",children:i.jsx("ul",{className:"nav nav-pills vendar-reg-tab",id:"step-tabs",role:"tablist",children:[1,2,3].map(s=>{const a=ze.useRef(null),l=t===s,o=t>s,c=s<=t;return i.jsx(Ci,{nodeRef:a,in:!0,appear:!0,timeout:300,classNames:"step-transition",children:i.jsxs("li",{className:"nav-item",role:"presentation",children:[i.jsxs("a",{className:`nav-link ${l?"active current":""}`,id:`step-${s}-tab`,"data-bs-toggle":"pill",href:`#step-${s}`,role:"tab","aria-controls":`step-${s}`,"aria-selected":l?"true":"false",tabIndex:l?void 0:"-1",style:{cursor:c?"pointer":"default"},onClick:d=>{d.preventDefault(),c&&e&&e(s)},children:[i.jsxs("span",{className:"no",children:["0",s]}),o&&i.jsx("i",{className:"ph-fill ph-check-circle complete-icon icon-transition-active"}),!o&&i.jsx("i",{className:`${n[s]} current-icon ${l?"visible":""}`})]}),i.jsxs("div",{className:"setup-data",children:[i.jsxs("small",{className:"text-primary fw-bold",children:[r("Step","kivicare-clinic-management-system")," ",s]}),i.jsx("h6",{children:s===1?r("Welcome","kivicare-clinic-management-system"):s===2?r("Clinic Basic Detail","kivicare-clinic-management-system"):r("Clinic Admin Detail","kivicare-clinic-management-system")})]})]})},s)})})})})},Wne={clinicImage:null,clinicName:"",clinicEmail:"",specialties:[],contactNumber:"",currencyPrefix:"",currencyPostfix:"",address:"",city:"",country:"",postalCode:"",adminImage:null,firstName:"",lastName:"",adminEmail:"",adminContact:"",dob:"",gender:"",roles:[]},kC={step2Fields:["clinicName","clinicEmail","specialties","contactNumber"],step3Fields:["firstName","lastName","adminEmail","adminContact","gender"]},mP={saveSetupWizard:t=>ve({endpoint:"setup-wizard/save",method:"POST",data:t}),getSetupWizard:()=>ve({endpoint:"setup-wizard",method:"GET"}),completeSetupWizard:t=>ve({endpoint:"setup-wizard/complete",method:"POST",data:t}),setupClinic:t=>{const e={clinic_name:t.clinicName,clinic_email:t.clinicEmail,clinic_contact:t.contactNumber,address:t.address,city:t.city,postal_code:t.postalCode,country:t.country,specialties:t.specialties,clinic_image_id:t.clinicImage?.id||t.clinicImage,firstName:t.firstName,lastName:t.lastName,adminEmail:t.adminEmail,adminContact:t.adminContact,dob:t.dob,gender:t.gender,roles:Array.isArray(t.roles)?t.roles:[]};return t.adminImage&&typeof t.adminImage=="object"&&(e.adminProfile=t.adminImage),ve({endpoint:"setup-wizard/clinic",method:"POST",data:e})},updateStepCompletion:t=>ve({endpoint:"setup-wizard/step-complete",method:"POST",data:{step:t}})},Ak={all:["setup-wizard"],data:()=>[...Ak.all,"data"]},Kne=()=>{const t=Ve();return Le({mutationFn:e=>mP.setupClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},Gne=()=>{const t=Ve();return Le({mutationFn:e=>mP.updateStepCompletion(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ak.data()})}})},lf=f.createContext(),Yne=()=>{const{themeSettings:t}=ut(),e=Kn(),n=hn(),s=f.useRef(null),a=l_(),l=()=>{const j=e.pathname;return j.includes("admin-info")?3:j.includes("basic-info")?2:1},[o,c]=f.useState(l()),[d,m]=f.useState([1]);f.useEffect(()=>{const j=l();c(j),d.includes(j)||m(T=>[...T,j])},[e.pathname]);const u=en({defaultValues:Wne,mode:"onTouched",shouldUnregister:!1}),{handleSubmit:p,trigger:h,getValues:g}=u,x=Kne(),v=Gne(),y={1:"/clinic-setup",2:"/clinic-setup/basic-info",3:"/clinic-setup/admin-info"},b=async()=>{if(console.log("hit"),o===1){try{await v.mutateAsync({step:1}),d.includes(2)||m(N=>[...N,2]),n("/clinic-setup/basic-info")}catch(N){console.error("Failed to update step completion:",N),Te.error(r("Failed to update progress","kivicare-clinic-management-system"))}return}const j=o===2?kC.step2Fields:kC.step3Fields;if(await h(j))if(o===2)try{const N=g();await v.mutateAsync({step:2,formData:N}),d.includes(3)||m(_=>[..._,3]),n("/clinic-setup/admin-info")}catch(N){console.error("Failed to update step completion:",N),Te.error(r("Failed to update progress","kivicare-clinic-management-system"))}else p(w)()},k=()=>{o===2?n("/clinic-setup"):o===3&&n("/clinic-setup/basic-info")},w=async j=>{console.log(" Final form submission with ALL data:",j);try{const T=await x.mutateAsync(j);Te.success(r("Clinic setup completed successfully!","kivicare-clinic-management-system")),setTimeout(()=>{const N=window.kc_frontend&&window.kc_frontend.dashboard_uri?window.kc_frontend.dashboard_uri:window.location.origin;window.location.href=N},1500)}catch(T){const N=T?.response?.data?.message||T?.message||r("Failed to setup clinic","kivicare-clinic-management-system");Te.error(N),console.error("Setup clinic error:",T)}},S=j=>{j<=Math.max(...d)&&n(y[j])};return i.jsx(yo,{className:"my-5 pt-5",children:i.jsx(Yn,{children:i.jsx(r_,{...u,children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx("img",{className:"logo-normal",src:t.siteLogo,height:"45",alt:"logo"})})}),i.jsx(Une,{currentStep:o,onStepClick:S}),i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:s,timeout:250,classNames:"fade",unmountOnExit:!0,appear:!0,children:i.jsx("div",{ref:s,className:"step-content",children:a&&i.jsx(lf.Provider,{value:{onNext:b,onPrevious:k,currentStep:o,isLoading:x.isPending||v.isPending},children:a})})},e.pathname.replace(/\/$/,""))})]})})})})},Qne=()=>{const{onNext:t}=f.useContext(lf);return i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column",children:[i.jsx("i",{className:"ph ph-hand-waving text-secondary fs-70"}),i.jsxs("div",{className:"text-center",children:[i.jsx("h5",{className:"mb-3",children:r("Welcome to kiviCare","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-5 pb-3",children:r("Explore more features by creating account in kivicare.","kivicare-clinic-management-system")}),i.jsx("span",{className:"py-2 px-5 bg-secondary-subtle border border-secondary rounded-pill setup-wizard-badge h5 m-0",children:r("KiviCare - Clinic and Patient Management System (EHR)","kivicare-clinic-management-system")}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(ht,{className:"btn btn-primary",onClick:t,to:"/clinic-setup/basic-info",children:r("Proceed","kivicare-clinic-management-system")})})]})]})})})},jC=Vc.PhoneNumberUtil.getInstance(),Zne=()=>{const{control:t,register:e,formState:n,setValue:s,getValues:a,handleSubmit:l}=lb(),{onNext:o,onPrevious:c}=f.useContext(lf),{errors:d}=n,{data:m,isLoading:u,refetch:p}=Va("specialization"),h=Hg(),[g]=ze.useState(n.submitCount);f.useEffect(()=>{a("currencyPrefix")||s("currencyPrefix","$"),a("currencyPostfix")||s("currencyPostfix","/-")},[]);const x=v=>{try{return jC.isValidNumber(jC.parseAndKeepRawInput(v))}catch{return!1}};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:r("Clinic Basic detail","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Enter basic detail of your clinic and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicName",{required:r("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicName?"is-invalid":""}`,placeholder:r("Enter clinic name","kivicare-clinic-management-system")}),d.clinicName&&i.jsx("div",{className:"invalid-feedback",children:d.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicEmail",{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicEmail?"is-invalid":""}`,placeholder:r("Enter clinic email","kivicare-clinic-management-system")}),d.clinicEmail&&i.jsx("div",{className:"invalid-feedback",children:d.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"specialties",control:t,rules:{required:r("At least one specialization is required","kivicare-clinic-management-system"),validate:{notEmpty:v=>v&&v.length>0||r("At least one specialty is required","kivicare-clinic-management-system")}},render:({field:v})=>i.jsx(Xc,{id:"specialties",options:m?.data??[],value:v.value,onChange:y=>{v.onChange(y)},onCreateOption:y=>{const b={id:`temp-${Date.now()}`,label:y},k=v.value||[];v.onChange([...k,b]),h.mutate(y,{onSuccess:w=>{if(w?.data?.data){const S=(v.value||[]).map(j=>j.id===b.id?{id:w.data.data.id,label:w.data.data.label}:j);v.onChange(S)}Te.success(r("specialization added successfully","kivicare-clinic-management-system"))},onError:w=>{console.error("Failed to save specialization:",w),Te.error(r("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:y=>y.id,placeholder:r("Select or create specialization","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:u,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,noOptionsMessage:()=>r("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:y=>r("Add specialty","kivicare-clinic-management-system")+`: "${y}"`})}),d.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:d.specialties.message}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type a new specialization and press enter to add it","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"contactNumber",control:t,rules:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:v=>v?x(v)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},render:({field:v,fieldState:y})=>i.jsxs(i.Fragment,{children:[i.jsx(eo,{...v,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>v.onBlur()},placeholder:r("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:d.contactNumber.message})]})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Currency Prefix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPrefix"),className:"form-control",placeholder:r("e.g. $","kivicare-clinic-management-system"),onChange:v=>s("currencyPrefix",v.target.value)})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Currency Postfix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPostfix"),className:"form-control",placeholder:r("e.g. USD","kivicare-clinic-management-system"),onChange:v=>s("currencyPostfix",v.target.value)})]})})]})}),i.jsx("div",{className:"col-md-4",children:i.jsx(ef,{id:"clinic-logo",name:"clinicLogo",label:r("Clinic Logo","kivicare-clinic-management-system"),register:e,defaultImage:a("clinicLogo")?.url,errors:d,className:"mb-3",onChange:(v,y)=>{s("clinicLogo",v,{shouldValidate:!0,shouldDirty:!0})}})})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("address",{required:r("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.address?"is-invalid":""}`,placeholder:r("Enter clinic address","kivicare-clinic-management-system")}),d.address&&i.jsx("div",{className:"invalid-feedback",children:d.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("City","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("city",{required:r("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.city?"is-invalid":""}`,placeholder:r("Enter city","kivicare-clinic-management-system")}),d.city&&i.jsx("div",{className:"invalid-feedback",children:d.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("country",{required:r("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.country?"is-invalid":""}`,placeholder:r("Enter country","kivicare-clinic-management-system")}),d.country&&i.jsx("div",{className:"invalid-feedback",children:d.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("postalCode",{required:r("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9]+$/,message:r("Invalid postal code format","kivicare-clinic-management-system")}}),className:`form-control ${d.postalCode?"is-invalid":""}`,placeholder:r("Enter postal code","kivicare-clinic-management-system"),onInput:v=>v.target.value=v.target.value.replace(/[^0-9]/g,"")}),d.postalCode&&i.jsx("div",{className:"invalid-feedback",children:d.postalCode.message})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,children:r("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:l(o),type:"button",children:r("Next","kivicare-clinic-management-system")})]})]})})},NC=Vc.PhoneNumberUtil.getInstance(),Xne=()=>{const{register:t,control:e,formState:n,setValue:s,getValues:a,handleSubmit:l}=lb(),{onNext:o,onPrevious:c,isLoading:d=!1}=f.useContext(lf),{errors:m}=n,[u]=f.useState(n.submitCount),[p,h]=f.useState(()=>{const w=a("roles");return Array.isArray(w)&&w.length?w:["doctor","receptionist","patient"]}),[g,x]=f.useState(!1),v=w=>{h(S=>S.includes(w)?S.filter(j=>j!==w):[...S,w])},y=()=>{x(!0)},b=()=>{s("roles",p,{shouldDirty:!0,shouldValidate:!1}),x(!1),o()},k=w=>{try{return NC.isValidNumber(NC.parseAndKeepRawInput(w))}catch{return!1}};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:r("Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Enter basic detail of Clinic Admin and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("firstName",{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.firstName?"is-invalid":""}`,placeholder:r("Enter first name","kivicare-clinic-management-system")}),m.firstName&&i.jsx("div",{className:"invalid-feedback",children:m.firstName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("lastName",{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.lastName?"is-invalid":""}`,placeholder:r("Enter last name","kivicare-clinic-management-system")}),m.lastName&&i.jsx("div",{className:"invalid-feedback",children:m.lastName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("adminEmail",{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${m.adminEmail?"is-invalid":""}`,placeholder:r("Enter admin email","kivicare-clinic-management-system")}),m.adminEmail&&i.jsx("div",{className:"invalid-feedback",children:m.adminEmail.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"adminContact",control:e,rules:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:w=>w?k(w)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},render:({field:w,fieldState:S})=>i.jsxs(i.Fragment,{children:[i.jsx(eo,{...w,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>w.onBlur()},placeholder:r("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact&&i.jsx("div",{className:"invalid-feedback d-block",children:m.adminContact.message})]})})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date of Birth","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"dob",control:e,rules:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:w=>{const S=new Date(w),j=new Date;let T=j.getFullYear()-S.getFullYear();const N=j.getMonth()-S.getMonth();return(N<0||N===0&&j.getDate()<S.getDate())&&T--,T>=18||r("Admin must be at least 18 years old","kivicare-clinic-management-system")}},render:({field:w})=>i.jsx(Un,{...w,className:`form-control ${m.dob?"is-invalid":""}`,placeholder:r("Select date of birth","kivicare-clinic-management-system"),options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date(new Date().setFullYear(new Date().getFullYear()-18)),disableMobile:!0,locale:Wn()},value:w.value?Zn(w.value):"",onChange:S=>{if(S&&S[0]){const j=S[0],T=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(j.getDate()).padStart(2,"0")}`;w.onChange(T)}else w.onChange("")}})}),m.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:m.dob.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("select",{...t("gender",{required:r("Gender is required","kivicare-clinic-management-system")}),className:`form-select ${m.gender?"is-invalid":""}`,children:[i.jsx("option",{value:"",children:r("Select Gender","kivicare-clinic-management-system")}),i.jsx("option",{value:"male",children:r("Male","kivicare-clinic-management-system")}),i.jsx("option",{value:"female",children:r("Female","kivicare-clinic-management-system")}),i.jsx("option",{value:"other",children:r("Other","kivicare-clinic-management-system")})]}),m.gender&&i.jsx("div",{className:"invalid-feedback",children:m.gender.message})]})})]})}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Admin Profile Picture","kivicare-clinic-management-system")}),i.jsx(yl,{id:"admin-profile",name:"adminProfile",label:r("Admin Profile Picture","kivicare-clinic-management-system"),register:t,errors:m,size:230,defaultImage:a("adminProfile")?.url,className:"mb-3",onChange:(w,S)=>{s("adminProfile",w,{shouldValidate:!0,shouldDirty:!0})}})]})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,type:"button",disabled:d,children:r("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:l(y),type:"button",disabled:d,children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Setting up...","kivicare-clinic-management-system")]}):r("Finish","kivicare-clinic-management-system")})]})]}),i.jsxs(lt,{show:g,onHide:()=>x(!1),centered:!0,className:"swal2-modal",children:[i.jsx(lt.Header,{closeButton:!0,className:"border-0 pb-0",children:i.jsx(lt.Title,{className:"swal2-title w-100 text-center",children:r("Create Demo Users","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{className:"text-center pt-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-4 flex-wrap",children:[i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("doctor"),onChange:()=>v("doctor")}),i.jsx("span",{children:r("Doctor","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("receptionist"),onChange:()=>v("receptionist")}),i.jsx("span",{children:r("Receptionist","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:p.includes("patient"),onChange:()=>v("patient")}),i.jsx("span",{children:r("Patient","kivicare-clinic-management-system")})]})]})}),i.jsxs(lt.Footer,{className:"border-0 justify-content-center pt-0",children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>x(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:b,children:r("Finish","kivicare-clinic-management-system")})]})]})]})},Jne=[Gn({path:"",title:"Clinic Setup",outlet:Yne,meta:{description:"Clinic setup wizard",requiresSetup:!0},children:[We({index:!0,component:Qne,title:"Welcome",props:{stepNumber:1},skeleton:Hne,meta:{description:"Setup wizard welcome page",step:1,stepName:"getting_started"}}),We({path:"basic-info",component:Zne,title:"Basic Information",props:{stepNumber:2},skeleton:zne,meta:{description:"Clinic basic information setup",step:2,stepName:"clinic"}}),We({path:"admin-info",component:Xne,title:"Admin Information",props:{stepNumber:3},skeleton:Vne,meta:{description:"Admin user information setup",step:3,stepName:"clinic_admin"}})]})],eie=()=>{const t=Kn(),e=Li();Yi();const n=Xn(),s=Jn(),a=Cr(),{calanderIntegration:l,googleMeetIntegration:o,zoomIntegration:c,isAddonActive:d,hasCapability:m,module_config:u}=ut();let h=[{id:"general-settings",label:r("General Settings","kivicare-clinic-management-system"),iconClass:"ph ph-tree-structure",link:"/setting/general-setting",allowedRoles:["administrator"]},{id:"holidays",label:r("Holidays","kivicare-clinic-management-system"),iconClass:"ph ph-house-line",link:"/setting/holidays",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"clinic_schedule"},{id:"doctor-session",label:r("Doctor Session","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-check",link:"/setting/doctor-session",allowedRoles:["doctor","receptionist"],capability:"doctor_session_list"},{id:"configurations",label:r("Configurations","kivicare-clinic-management-system"),iconClass:"ph ph-toggle-left",link:"/setting/configurations",allowedRoles:["administrator"]},{id:"app-configuration",label:r("App Configuration","kivicare-clinic-management-system"),iconClass:"ph ph-device-mobile",link:"/setting/app-configuration",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"api"},{id:"email-template",label:r("Email Template","kivicare-clinic-management-system"),iconClass:"ph ph-envelope",link:"/setting/email-template",allowedRoles:["administrator"]},{id:"sms-whatsapp-template",label:r("SMS/WhatsApp Template","kivicare-clinic-management-system"),iconClass:"ph ph-chat-circle-dots",link:"/setting/sms-whatsapp-template",allowedRoles:["administrator"],requiresPro:!0},{id:"webhooks",label:r("Webhooks","kivicare-clinic-management-system"),iconClass:"ph ph-webhooks-logo",link:"/setting/webhooks",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"webhooks"},{id:"custom-notification",label:r("Custom notification","kivicare-clinic-management-system"),iconClass:"ph ph-bell",link:"/setting/custom-notification",allowedRoles:["administrator"],requiresPro:!0},{id:"custom-form",label:r("Custom Form","kivicare-clinic-management-system"),iconClass:"ph ph-table",link:"/setting/custom-form",allowedRoles:["administrator","clinic_admin"],capability:"custom_form_list",requiresPro:!0},{id:"encounter-body-chart",label:r("Encounter body chart","kivicare-clinic-management-system"),iconClass:"ph ph-person",link:"/setting/encounter-body-chart",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"bodyChart"},{id:"patient-setting",label:r("Patient Setting","kivicare-clinic-management-system"),iconClass:"ph ph-user",link:"/setting/patient-setting",allowedRoles:["administrator"]},{id:"widget-setting",label:r("Widget Setting","kivicare-clinic-management-system"),iconClass:"ph ph-gear",link:"/setting/widget-setting",allowedRoles:["administrator"]},{id:"google-event-template",label:r("Google Event Template","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-blank",link:"/setting/google-event-template",allowedRoles:["administrator"],requiresPro:!0},{id:"google-meet",label:r("Google Meet","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"googlemeet"},{id:"google-meet-configuration",label:r("Google Meet Integration","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet-configuration",allowedRoles:["doctor"]},{id:"zoom-telemed",label:r("Zoom Telemed","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-telemed",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"telemed"},{id:"zoom-configuration",label:r("Zoom Telemed setting","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-configuration",allowedRoles:["doctor"]},{id:"listings",label:r("Listings","kivicare-clinic-management-system"),iconClass:"ph ph-list-dashes",link:"/setting/listings",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"static_data_list"},{id:"custom-field",label:r("Custom Field","kivicare-clinic-management-system"),iconClass:"ph ph-magic-wand",link:"/setting/custom-field",allowedRoles:["administrator","clinic_admin"],capability:"custom_field_list",module:"custom_fields"},{id:"pro-settings",label:r("Pro Settings","kivicare-clinic-management-system"),iconClass:"ph ph-wrench",link:"/setting/pro-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"payment",label:r("Payment","kivicare-clinic-management-system"),iconClass:"ph ph-credit-card",link:"/setting/payments",allowedRoles:["administrator"]},{id:"appointment-settings",label:r("Appointment Setting","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-plus",link:"/setting/appointment-settings",allowedRoles:["administrator"]},{id:"permission",label:r("Permission Setting","kivicare-clinic-management-system"),iconClass:"ph ph-lock-simple",link:"/setting/permission",allowedRoles:["administrator"],requiresPro:!0},{id:"sidebar-settings",label:r("Sidebar Setting","kivicare-clinic-management-system"),iconClass:"ph ph-list",link:"/setting/sidebar-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"google-calendar-integration",label:r("Google Calendar Integration","kivicare-clinic-management-system"),iconClass:"ph ph-calendar",link:"/setting/google-calendar-integration",allowedRoles:["doctor","receptionist"]}].filter(x=>{if(x.id==="google-meet-configuration")return d("googlemeet")&&e&&o==="yes";if(x.id==="zoom-configuration")return d("telemed")&&e&&c==="yes";if(x.module&&(u[x.module]??"1")==="0")return!1;if(x.id==="google-calendar-integration")return(e||n)&&l==="yes";const v=x.allowedRoles.some(y=>!!(y==="administrator"&&a||y==="clinic_admin"&&s||y==="doctor"&&e||y==="receptionist"&&n));return x.capability&&!m(x.capability)?!1:v});const g=x=>t.pathname===x.link||t.pathname.startsWith(x.link);return i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:h.map((x,v)=>{const y=g(x),b=x.requiresPro&&!d("kiviPro"),k=x.requiresAddon&&!d(x.addonKey);return i.jsxs(ht,{className:`nav-link ${y?"active":""}`,id:x.id,to:x.link,type:"button","aria-selected":"true",children:[i.jsx("i",{className:x.iconClass}),x.label,b&&i.jsx("span",{className:"pro-badge",children:"PRO"}),k&&i.jsx("span",{className:"addon-badge",children:"ADDON"})]},v)})})})})},tie=()=>{const e=Bm().at?.(-1),{hideSettingSidebar:n,noTransitionAnimation:s=!1}=e.handle,a=f.useRef(null);return i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx(Ci,{in:!n,nodeRef:a,timeout:300,classNames:"sidebar",unmountOnExit:!0,children:i.jsx("div",{className:"col-md-3",children:i.jsx("div",{ref:a,className:"sidebar-wrapper position-sticky top-0",children:i.jsx(eie,{})})})}),i.jsx("div",{className:n?"col-12":"col-md-9",children:s?i.jsx(Uc,{}):i.jsx(Ji,{})})]})})},nie=()=>i.jsx(gt,{children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"200px",height:"0.875rem"}),i.jsx("hr",{className:"mt-2"})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"d-flex gap-3 mt-2",children:[i.jsx(C,{width:"60px",height:"1rem"}),i.jsx(C,{width:"60px",height:"1rem"})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"120px",height:"1.125rem"}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]}),Array.from({length:2}).map((t,e)=>i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx(C,{width:"24px",height:"24px",style:{borderRadius:"50%"},className:"position-absolute top-0 end-0 mt-1 me-1"}),i.jsx("div",{className:"card-body p-3",children:i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx(C,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]})})]},e))]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]})});function iie(){const{gateway:t}=Gt(),[e,n]=f.useState(!1),s=hn(),{data:a,isLoading:l}=wn("settings","payment-gateway/"+t,{},{enabled:!!t}),{mutateAsync:o}=un("settings","payment-gateway/"+t),{data:c}=_n(),d=c?.data?.hideUtilityLinks,{handleSubmit:m,formState:{errors:u},reset:p,control:h,setValue:g,register:x}=en({defaultValues:a?.data?.settings||{}}),v=y=>{n(!0),console.log("Form data:",y),o(y).then(()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Settings updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),s("/setting/payments/"),p(y)}).catch(b=>{const k=b?.response?.data?.message||b.message||r("Failed to update settings.","kivicare-clinic-management-system");At.fire({title:r("Error Updating Settings","kivicare-clinic-management-system"),text:k,icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}).finally(()=>{n(!1)})};return f.useEffect(()=>{if(a?.data?.settings){const y=a.data.settings;a.data.fields.forEach(b=>{b.type==="select"?g(b.name,fk(b.options,y[b.name]||"")):g(b.name,y[b.name]||"")})}},[a,p,g]),i.jsxs("div",{className:"manage-payment-setting",children:[i.jsxs("div",{className:"d-flex align-items-center mb-3 justify-content-between",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r(`${t.charAt(0).toUpperCase()+t.slice(1)} Payment Setting `,"kivicare-clinic-management-system"),d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#payment-setting",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:-1,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[r("Back","kivicare-clinic-management-system")," "]})]})]}),i.jsxs("form",{onSubmit:m(v),children:[l?i.jsx(nie,{}):i.jsx(sie,{fields:a?.data?.fields||[],errors:u,control:h,setValue:g,register:x}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e,children:e?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})})})]})]})}const sie=({fields:t,errors:e,control:n,setValue:s,register:a})=>!t||t.length===0?i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body text-center text-muted",children:r("No payment gateway available.","kivicare-clinic-management-system")})}):i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:t.map((l,o)=>l.type==="header"?i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx("h6",{className:"fw-bold",children:l.label}),l.description&&i.jsx("p",{className:"text-muted small mb-0",children:l.description}),i.jsx("hr",{className:"mt-2"})]},o):l.type==="repeater"?i.jsx("div",{className:"col-12",children:i.jsx(aie,{control:n,register:a,setValue:s,errors:e,field:l})},o):i.jsx("div",{className:`col-${l.col||"md-6"}`,children:i.jsxs("div",{className:"form-group",children:[l.type!=="checkbox_switch"&&l.type!=="checkbox"&&i.jsxs("label",{htmlFor:l.name,className:"form-label",children:[l.label,l.validation?.required&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{control:n,name:l.name,rules:l.validation,render:({field:{onChange:c,value:d,ref:m,...u}})=>{if(l.type==="checkbox_switch")return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check form-switch custom-switch-md",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"checkbox",role:"switch",id:l.name,checked:d,onChange:p=>{c(p.target.checked)},...u}),i.jsx("label",{className:"form-check-label",htmlFor:l.name,children:l.label})]}),l.description&&i.jsx("div",{className:"form-text text-muted mt-1",children:l.description}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]});if(["text","email","number","password"].includes(l.type))return i.jsxs(i.Fragment,{children:[i.jsx("input",{type:l.type,id:l.name,className:`form-control ${e[l.name]?"is-invalid":""}`,placeholder:l.placeholder,value:d||"",onChange:c,...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback",children:e[l.name].message})]});if(l.type==="select")return i.jsxs(i.Fragment,{children:[i.jsx(ct,{inputId:l.name,options:l.options,placeholder:r("Select","kivicare-clinic-management-system"),className:`react-select-box ${e[l.name]?"is-invalid":""}`,classNamePrefix:"react-select",value:d,onChange:c,styles:{menuPortal:p=>({...p,zIndex:9999})},...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]});if(l.type==="radio"){const p=l.options||[{value:"on",label:r("On","kivicare-clinic-management-system")},{value:"off",label:r("Off","kivicare-clinic-management-system")}];return i.jsxs("div",{children:[p.map(h=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"radio",id:`${l.name}_${h.value}`,value:h.value,checked:d===h.value,onChange:()=>c(h.value),...u}),i.jsx("label",{className:"form-check-label",htmlFor:`${l.name}_${h.value}`,children:h.label})]},h.value)),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]})}return l.type==="checkbox"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"checkbox",id:l.name,checked:d,onChange:p=>c(p.target.checked),...u}),i.jsx("label",{className:"form-check-label",htmlFor:l.name,children:l.checkboxLabel||l.label})]}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",id:l.name,className:`form-control ${e[l.name]?"is-invalid":""}`,placeholder:l.placeholder,value:d||"",onChange:c,...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]})}})]})},o))})})}),aie=({control:t,register:e,setValue:n,errors:s,field:a})=>{const{fields:l,append:o,remove:c}=yr({control:t,name:a.name}),d=(m,u,p,h)=>i.jsx("div",{className:`col-${m.col||"md-6"}`,children:i.jsxs("div",{className:"form-group mb-0",children:[i.jsxs("label",{className:"form-label small text-muted mb-1",children:[m.label,m.validation?.required&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsx(Ne,{control:t,name:`${a.name}.${p}.${m.name}`,rules:m.validation,render:({field:{onChange:g,value:x,ref:v,...y},fieldState:{error:b}})=>m.type==="select"?i.jsxs(i.Fragment,{children:[i.jsx(ct,{options:m.options,value:fk(m.options,x),onChange:k=>g(k?k.value:""),className:`react-select-box ${b?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:k=>({...k,zIndex:9999})},placeholder:r("Select","kivicare-clinic-management-system")}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):m.type==="image"?i.jsx(ef,{id:`${a.name}.${p}.${m.name}`,name:`${a.name}.${p}.${m.name}`,defaultImage:x,register:e,setValue:n,onChange:k=>{g(k.url)},errors:b?{[`${a.name}.${p}.${m.name}`]:b}:{},className:"mb-0"}):m.type==="textarea"?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{className:`form-control ${b?"is-invalid":""}`,value:x||"",onChange:g,rows:"2",placeholder:m.placeholder||m.label,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:m.type||"text",className:`form-control ${b?"is-invalid":""}`,value:x||"",onChange:g,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]})})]})},`${u.id}-${m.name}-${h}`);return i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0 fw-bold",children:a.label}),i.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>o({}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),a.add_button_text||r("Add Item","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"repeater-list",children:l.map((m,u)=>{const p=a.fields.filter(x=>x.group==="main"),h=a.fields.filter(x=>x.group==="side"),g=p.length>0&&h.length>0;return i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx("button",{type:"button",className:"btn btn-icon btn-sm text-danger position-absolute top-0 end-0 mt-1 me-1",onClick:()=>c(u),style:{zIndex:10},title:r("Remove","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})}),i.jsx("div",{className:"card-body p-3",children:g?i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row g-2",children:p.map((x,v)=>d(x,m,u,v))})}),i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"row g-2 h-100",children:h.map((x,v)=>d(x,m,u,v))})})]}):i.jsx("div",{className:"row g-2",children:a.fields.map((x,v)=>d(x,m,u,v))})})]},m.id)})})]})},rie=()=>i.jsx("div",{className:"settings-container",children:i.jsx(Ji,{})}),lie=()=>i.jsx("div",{className:"custom-notification-outlet",children:i.jsx(Uc,{})});function oie(){return i.jsx("div",{children:i.jsx(Uc,{})})}const cie=()=>i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"sidebar-wrapper position-sticky top-0",children:i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:Array.from({length:20}).map((t,e)=>i.jsxs("div",{className:"nav-link skeleton-nav-link",type:"button",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2"}),i.jsx(C,{width:`${120+Math.random()*80}px`,height:"0.875rem"}),Math.random()>.7&&i.jsx(C,{width:Math.random()>.5?"35px":"60px",height:"0.75rem",className:"ms-auto",style:{borderRadius:"10px"}})]},e))})})})})}),i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})})]}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(C,{width:"140px",height:"38px",style:{borderRadius:"4px"}})})})]})})})})]})}),uP=()=>i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"130px"})})]})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(C,{width:"300px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"170px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"140px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Se,{labelWidth:"150px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(st,{width:"140px",height:"38px"})})})]})})}),die=()=>i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx(C,{width:"120px",height:"1.125rem",className:"mt-2"})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(C,{width:"140px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(st,{width:"120px",height:"36px"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"}})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"100px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"100px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mt-3",children:[i.jsx(C,{width:"200px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"60px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})]})}),hP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:i.jsxs("div",{className:"configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"200px",height:"1.125rem"}),i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"90px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"70px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"50px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap gap-4",children:i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(C,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(C,{width:"90px",height:"0.875rem"})]})})]})}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx(st,{width:"80px",height:"38px"})})]})}),pP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:"app-configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(C,{width:"280px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"80px"})})]})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(C,{width:"220px",height:"1.125rem"}),i.jsx(st,{width:"180px",height:"32px"})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"90px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"40px",height:"24px",style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(C,{width:"50px",height:"1rem"})})]},e))})]})})]})]})}),mie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsx("div",{className:"webhook-setting",children:i.jsx("div",{className:"",children:i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:i.jsx(gt,{children:i.jsx(C,{width:"100%",height:"400px",style:{borderRadius:"4px"}})})})})})}),gP=()=>i.jsxs("div",{className:"webhook-form",children:[i.jsxs("div",{className:"d-flex justify-content-end gap-2 mb-3",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"100px"})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"150px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"50px"})})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"120px"})})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"180px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"150px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(C,{width:"80px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"90px",height:"28px",style:{borderRadius:"4px"}})]})]}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"140px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-12",children:i.jsx(C,{width:"200px",height:"1rem"})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx(st,{width:"140px"})})]}),CC=()=>i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"200px",height:"1.75rem",className:"mb-1"}),i.jsx(C,{width:"400px",height:"0.875rem"})]}),i.jsx(st,{width:"120px"})]}),i.jsx(gP,{})]}),$y=()=>i.jsxs("div",{className:"custom-notification-edit",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"250px",height:"1.75rem",className:"mb-1"}),i.jsx(C,{width:"350px",height:"0.875rem"})]}),i.jsx(st,{width:"140px"})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"130px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsx(Se,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsx(Se,{labelWidth:"100px"})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"160px"}),i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Se,{labelWidth:"130px"})})]})]})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"160px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsx(Se,{labelWidth:"80px"})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"170px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Se,{labelWidth:"100px"}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(C,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(C,{width:"120px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"90px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"110px",height:"28px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100%",height:"150px",style:{borderRadius:"4px"}})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"160px"}),i.jsx(st,{width:"140px"}),i.jsx(st,{width:"80px"})]})]}),uie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:"custom-forms-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[i.jsx(C,{width:"150px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx(C,{width:"16px",height:"16px"})}),i.jsx(C,{width:"200px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(st,{width:"120px"})]})]}),i.jsx("div",{className:"table-responsive",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"30px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"40px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}}),i.jsx(C,{width:"60px",height:"20px",style:{borderRadius:"10px"}})]})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[i.jsx(C,{width:"150px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})})]})})}),By=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb m-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item",children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:i.jsx(C,{width:"100px",height:"1rem"})})]})}),i.jsx(st,{width:"80px"})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 col-md-5 col-lg-4 col-xl-3",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-4",children:[i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"60px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(C,{width:"70px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:[i.jsx(C,{width:"100px",height:"1rem",className:"me-3"}),i.jsx(C,{width:"80px",height:"1rem"})]})]}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"50px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Se,{labelWidth:"100px"})})]})})]})}),i.jsxs("div",{className:"col-12 col-md-7 col-lg-8 col-xl-9",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx(C,{width:"180px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"120px"})]})]}),i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx(C,{width:"150px",height:"1.25rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row gy-4 custom-form-content",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),Array.from({length:3}).map((t,e)=>i.jsx("div",{className:"col-xl-6 col-12",children:i.jsxs("div",{className:"form-group custom-form-group",children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"4px"},className:"flex-shrink-0 mt-2"}),i.jsx("div",{className:"flex-grow-1",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})},e)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"text-center py-5 border-2 border-dashed border-primary rounded",children:[i.jsx(C,{width:"48px",height:"48px",className:"mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(C,{width:"200px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"300px",height:"1rem"})]})})]})]})]})]})]}),fP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:"encounter-body-chart-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(gt,{children:i.jsxs("form",{children:[i.jsxs("div",{className:"row gy-4 mb-5 pb-3",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"120px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"200px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"180px",height:"0.875rem"})]}),i.jsx(st,{width:"100px"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(C,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:3}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(C,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx(C,{width:"16px",height:"16px",style:{borderRadius:"50%"},className:"me-2 d-inline-block"}),i.jsx(C,{width:"60px",height:"1rem",className:"d-inline-block"})]})}),i.jsx("td",{children:i.jsx(C,{width:"40px",height:"40px",style:{borderRadius:"4px"}})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(C,{width:"16px",height:"16px"}),i.jsx(C,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})]})}),vP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"140px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"140px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"70px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e)),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"80px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(gt,{children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-md-6",children:i.jsx(Se,{labelWidth:"100px"})})})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"110px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Array.from({length:4}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx(C,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"120px",height:"1rem"})]},e))})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"110px",height:"1.125rem",className:"mb-3"}),Array.from({length:7}).map((t,e)=>i.jsxs("div",{className:"p-3 bg-body mb-2 d-flex align-items-center gap-3",children:[i.jsx(C,{width:"20px",height:"20px"}),i.jsx(C,{width:"180px",height:"1rem"})]},e))]}),i.jsxs(gt,{children:[i.jsx(C,{width:"150px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"140px"})})]})}),xP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-event-template-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"180px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),yP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-meet-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(gt,{children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})})}),i.jsxs(gt,{children:[i.jsxs("div",{className:"row gy-4 pb-4 mb-4 border-bottom",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"180px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"90px"})})]}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"250px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"400px",height:"0.875rem"})]})}),i.jsx(C,{width:"150px",height:"1rem",className:"mt-4 mb-3"}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mb-2",children:[i.jsx(C,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(C,{width:"250px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx(C,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(C,{width:"350px",height:"1rem"})]})]}),i.jsx(C,{width:"500px",height:"0.875rem"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"form-group mb-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),hie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:"position-relative zoom-telemed-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"200px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(C,{width:"250px",height:"1rem"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"280px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(C,{width:"300px",height:"1rem"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px"})})]})})}),bP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"pro-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:11}).map((t,e)=>i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group pro-setting-color",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]})},e))})]})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"110px"})},e))})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"120px"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"130px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(st,{width:"130px",className:"mb-4"}),i.jsx(C,{width:"140px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))}),i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"120px"})})]}),i.jsx(st,{width:"150px",className:"mb-4"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(C,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"170px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Se,{labelWidth:"80px"})})]}),i.jsx("div",{className:"row gy-4 pt-4 mb-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(C,{width:"220px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"400px",height:"0.875rem"})]})}),i.jsx(C,{width:"250px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"150px",height:"1.125rem",className:"mb-3"}),Array.from({length:3}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(gt,{children:[i.jsx(C,{width:"90px",height:"1.125rem",className:"mb-3"}),i.jsx(Se,{labelWidth:"160px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})}),pie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:"webhook-setting",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"100px",height:"1.125rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]})}),i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"row g-3",children:Array.from({length:4}).map((t,e)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx(C,{width:"60px",height:"1.5rem",className:"mb-2"}),i.jsx(C,{width:"100px",height:"0.875rem"})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx(C,{width:"32px",height:"32px",style:{borderRadius:"50%"}})})]})})})},e))})}),i.jsx("div",{className:"",children:i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-3",role:"tablist",children:[i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"120px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Ki={getWebhooks:(t={})=>ve({endpoint:"webhooks",method:"GET",data:t}),getWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"GET"}),createWebhook:t=>ve({endpoint:"webhooks",method:"POST",data:t}),updateWebhook:(t,e)=>ve({endpoint:`webhooks/${t}`,method:"PUT",data:e}),deleteWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"DELETE"}),testWebhook:(t,e={})=>ve({endpoint:`webhooks/${t}/test`,method:"POST",data:e}),getWebhookStats:(t={})=>ve({endpoint:"webhooks/statistics",method:"GET",data:t}),getAvailableEvents:()=>ve({endpoint:"webhooks/events",method:"GET"}),bulkDeleteWebhooks:t=>ve({endpoint:"webhooks/bulk-delete",method:"POST",data:{ids:t}}),updateWebhookStatus:(t,e)=>ve({endpoint:`webhooks/${t}/status`,method:"PATCH",data:{status:e}}),getTableConfig:()=>ve({endpoint:"webhooks/table-config",method:"GET"}),exchangeOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/exchange-token",method:"POST",data:{code:t.code,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl,redirect_uri:t.redirectUri}}),refreshOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/refresh-token",method:"POST",data:{refresh_token:t.refreshToken,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl}}),getWebhookLogs:(t={})=>ve({endpoint:"webhook-logs",method:"GET",data:t}),getWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"GET"}),deleteWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"DELETE"}),bulkDeleteWebhookLogs:t=>ve({endpoint:"webhook-logs",method:"DELETE",data:{ids:t}}),getWebhookLogStats:(t={})=>ve({endpoint:"webhook-logs/stats",method:"GET",data:t}),getWebhookLogsByWebhook:(t,e={})=>ve({endpoint:"webhook-logs",method:"GET",data:{webhook_id:t,...e}}),clearOldLogs:(t=30)=>ve({endpoint:"webhook-logs/clear",method:"POST",data:{days:t}}),exportWebhookLogs:(t={})=>ve({endpoint:"webhook-logs/export",method:"GET",data:t})},Hn={all:["webhooks"],lists:()=>[...Hn.all,"list"],list:t=>[...Hn.lists(),{filters:t}],details:()=>[...Hn.all,"detail"],detail:t=>[...Hn.details(),t],stats:()=>[...Hn.all,"stats"],statsList:t=>[...Hn.stats(),t],events:()=>[...Hn.all,"events"],tableConfig:()=>[...Hn.all,"table-config"]},js={all:["webhook-logs"],lists:()=>[...js.all,"list"],list:t=>[...js.lists(),{filters:t}],details:()=>[...js.all,"detail"],detail:t=>[...js.details(),t],stats:()=>[...js.all,"stats"],statsList:t=>[...js.stats(),t]},wP=(t={},e={})=>ft({queryKey:Hn.list(t),queryFn:()=>Ki.getWebhooks(t),enabled:e.enabled!==!1,...e}),gie=(t,e={})=>ft({queryKey:Hn.detail(t),queryFn:()=>Ki.getWebhook(t),enabled:!!t,...e}),fie=(t={},e={})=>ft({queryKey:Hn.statsList(t),queryFn:()=>Ki.getWebhookStats(t),enabled:e.enabled!==!1,...e}),vie=(t={})=>ft({queryKey:Hn.tableConfig(),queryFn:()=>Ki.getTableConfig(),...t}),xie=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ki.createWebhook(n),onSuccess:n=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(n.id),n)},...t})},yie=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,...s})=>Ki.updateWebhook(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(s.id),n)},...t})},bie=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ki.deleteWebhook(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.removeQueries({queryKey:Hn.detail(s)})},...t})},wie=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ki.testWebhook(n.webhookId,{event_name:n.eventName,payload:n.payload}),onSuccess:(n,s)=>{const a=typeof s=="object"?s.webhookId:s;e.invalidateQueries({queryKey:["webhook-logs"]}),e.setQueryData(Hn.detail(a),l=>({...l,lastTested:new Date().toISOString(),testResult:n}))},...t})},kie=(t={})=>{const e=Ve();return Le({mutationFn:({id:n,status:s})=>Ki.updateWebhookStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(s.id),n)},...t})},jie=(t={},e={})=>ft({queryKey:js.list(t),queryFn:()=>Ki.getWebhookLogs(t),...e}),Nie=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ki.deleteWebhookLog(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:js.lists()}),e.invalidateQueries({queryKey:js.stats()}),e.removeQueries({queryKey:js.detail(s)})},...t})},Cie=(t={})=>{const e=Ve();return Le({mutationFn:n=>Ki.bulkDeleteWebhookLogs(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:js.lists()}),e.invalidateQueries({queryKey:js.stats()}),s.forEach(a=>{e.removeQueries({queryKey:js.detail(a)})})},...t})},Sie=()=>{const[t,e]=f.useState({startDate:null,endDate:null}),n={};t.startDate&&t.endDate&&(n.start_date=t.startDate,n.end_date=t.endDate);const{data:s,isLoading:a,error:l,refetch:o}=fie(n),d=[{title:r("Activate Webhook","kivicare-clinic-management-system"),value:"0",key:"active_webhooks",icon:"ph-broadcast"},{title:r("Success Rate","kivicare-clinic-management-system"),value:"0%",key:"success_rate",icon:"ph-check-circle"},{title:r("Failed Deliveries","kivicare-clinic-management-system"),value:"0",key:"failed_deliveries",icon:"ph-warning-circle"},{title:r("Events Today","kivicare-clinic-management-system"),value:"0",key:"events_today",icon:"ph-bell"}].map(m=>{if(s?.data&&s?.data[m.key]!==void 0){let u=s?.data[m.key];return m.key==="success_rate"&&(u=`${u}%`),{...m,value:u.toString()}}return m});return a?i.jsx(pie,{}):i.jsxs("div",{className:"mb-3",children:[l&&i.jsxs("div",{className:"alert alert-danger mb-3",children:[r("Error loading statistics:","kivicare-clinic-management-system")," ",l.message]}),i.jsx("div",{className:"row g-3",children:d.map((m,u)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-heading counter mb-2 fw-bold",children:a?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):m.value}),i.jsx("p",{className:"text-body fw-medium mb-0",children:m.title})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx("i",{className:`ph ${m.icon} fs-1 text-primary`})})]})})})},u))})]})},_ie=()=>{const{isAddonActive:t}=ut(),e=t("webhooks"),{data:n}=_n(),s=n?.data?.hideUtilityLinks;return i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:e?"webhook-setting":"p-4",children:[!e&&i.jsx(di,{text:r("Upgrade to access Webhooks","kivicare-clinic-management-system"),title:r("Premium Feature","kivicare-clinic-management-system"),icon:"ph-lock",link:"https://codecanyon.net/item/kivicare-webhook-addon/54591262"}),i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[r("Webhook","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-webhook/webhook-documentation/getting-started-webhook-documentation/what-is-kivicare-webhook-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]})}),e&&i.jsx(Sie,{}),i.jsxs("div",{className:"",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-3",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:"/setting/webhooks/configuration",children:r("Configuration","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:"/setting/webhooks/events-log",children:r("Events Log","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:rc,to:"/setting/webhooks/testing",children:r("Testing","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:e?i.jsx(Ji,{}):null})]})]})})},Eie=({stepNumber:t,children:e})=>i.jsx("div",{className:"d-flex flex-column items-list",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsxs("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:[r("Step","kivicare-clinic-management-system")," ",t,":"]}),i.jsx("span",{className:"font-size-14 text-heading",children:e})]})}),Tie=()=>{const{isAddonActive:t}=ut(),e=t("telemed"),{data:n,isLoading:s,error:a}=wn("settings","zoom-telemed",{},{enabled:e}),l=un("settings","zoom-telemed"),{control:o,handleSubmit:c,watch:d,reset:m,setValue:u,formState:{errors:p}}=en({defaultValues:{auth_type:"none",client_id:"",client_secret:"",server_to_server_enabled:!1},shouldUnregister:!1}),[h,g]=f.useState(!1),x=d("auth_type");d("server_to_server_enabled");const v=w=>{u("auth_type",w),w==="oauth"&&u("server_to_server_enabled",!1)};f.useEffect(()=>{if(n?.status&&n?.data){const w=n.data,j={auth_type:w.auth_type||"none",client_id:w.client_id||"",client_secret:w.client_secret||""};m(j)}},[n,m]);const y=w=>{g(!0);const S={auth_type:w.auth_type,client_id:w.client_id,client_secret:w.client_secret,server_to_server_enabled:w.server_to_server_enabled?"Yes":"No"};l.mutateAsync(S).then(j=>{console.log(j),j.status===!0?Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(j.message||"Zoom Telemed settings saved successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(j.message||"Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}).finally(()=>{g(!1)})},b=[{name:"client_id",label:r("Zoom Telemed Client ID","kivicare-clinic-management-system"),placeholder:r("Enter your Zoom Client ID","kivicare-clinic-management-system"),isRequired:!0},{name:"client_secret",label:r("Zoom Telemed Client Secret","kivicare-clinic-management-system"),placeholder:r("Enter your Zoom Client Secret","kivicare-clinic-management-system"),isRequired:!0}],k=[{step:1,content:i.jsxs(i.Fragment,{children:[r("Sign up or Sign in here","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:r("Zoom market Place portal","kivicare-clinic-management-system")})]})},{step:2,content:i.jsxs(i.Fragment,{children:[r("Click/Hover on Develop button at the right in navigation bar and click on build app","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/develop/create",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:r("Create app","kivicare-clinic-management-system")})]})},{step:3,content:r("Select OAuth and click Create","kivicare-clinic-management-system")},{step:4,content:r("Fill the mandatory information and In the App credentials tag you can see Client ID, Client secret And Redirect URL for OAuth.","kivicare-clinic-management-system")},{step:5,content:r("Copy and Paste Client ID, Client secret And Redirect URL here and click on save button and you are ready to go.","kivicare-clinic-management-system")}];if(a){let w;typeof a=="string"?w=a:a?.response?.data?.message?w=a.response.data.message:a?.message?w=a.message:w=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(w,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return e&&(h||s)?i.jsx(hie,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:`position-relative zoom-telemed-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available In Telemed AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-telemed-addon/29363726?s_rank=9"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Zoom Telemed Configuration","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation-telemed/getting-started-telemed-addon/what-is-kivicare-telemedicine-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!h||!s)&&i.jsxs("form",{onSubmit:c(y),children:[i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(Ne,{name:"auth_type",control:o,render:({field:w})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomOAuthSwitch",children:r("Enable Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomOAuthSwitch",checked:w.value==="oauth",onChange:S=>v(S.target.checked?"oauth":"none"),disabled:h||s})]})})})}),x==="oauth"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-4",children:[b.map(w=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"mb-3",children:i.jsx(Ne,{name:w.name,control:o,rules:{required:w.isRequired?`${w.label} is required`:!1},render:({field:S})=>i.jsxs(i.Fragment,{children:[i.jsxs("label",{htmlFor:S.name,className:"form-label",children:[w.label,w.isRequired&&i.jsx("span",{className:"input-field-required text-danger ms-1",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${p[w.name]?" is-invalid":""}`,id:S.name,name:S.name,placeholder:w.placeholder,value:S.value,onChange:S.onChange}),p[w.name]&&i.jsx("div",{className:"invalid-feedback",children:p[w.name].message})]})})})},w.name)),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Redirect URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:n?.data?.redirect_url||"",readOnly:!0,disabled:!0}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>navigator.clipboard.writeText(n?.data?.redirect_url||""),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:r("Add this URL to your Zoom app's redirect URLs","kivicare-clinic-management-system")})]})})]}),i.jsx("h6",{className:"text-secondary font-size-14 mt-4",children:r("Guide to setup Zoom Telemed with OAuth","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:k.map(w=>i.jsx(Eie,{stepNumber:w.step,children:w.content},w.step))})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(Ne,{name:"auth_type",control:o,render:({field:w})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomServerSwitch",children:r("Enable Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomServerSwitch",checked:w.value==="server-to-server",onChange:S=>v(S.target.checked?"server-to-server":"none"),disabled:h||s})]})})})}),x==="server-to-server"&&i.jsx("div",{className:"alert alert-info mb-4 bg-info-subtle",children:r("After enabling this, each doctor must configure their Server-to-Server in their own settings","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})]})})})},SC=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"40px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx(st,{width:"70px"}),i.jsx(st,{width:"80px"})]})]})})}),kP=()=>i.jsx("div",{className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"280px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Se,{labelWidth:"150px"})})]}),i.jsx(C,{width:"100%",height:"0.875rem",className:"mt-2"}),i.jsx(C,{width:"80%",height:"0.875rem"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(C,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(C,{width:"100%",height:"0.875rem",className:"mb-2"}),i.jsx(C,{width:"90%",height:"0.875rem",className:"mb-3"}),i.jsx(C,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mt-3"}),i.jsx(Se,{labelWidth:"80px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})})]})})}),jP=()=>i.jsxs("div",{className:"permission-setting p-4 position-relative overflow-hidden z-0",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(C,{width:"160px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"permission-setting-tabs",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"100px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:15}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(C,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"tab-content mt-2",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsx("div",{className:"permission-switches",children:Array.from({length:12}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(C,{width:"200px",height:"1rem"}),i.jsx(C,{width:"60px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsx(C,{width:"50px",height:"20px",style:{borderRadius:"10px"}})]},e))})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px",height:"38px"})})]})]}),NP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:"sidebar-setting p-4",children:[i.jsx("h6",{className:"setting-title mb-3",children:i.jsx(C,{width:"160px",height:"1.25rem"})}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",children:i.jsx(C,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx(C,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(C,{width:"90px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsxs("div",{className:"sidebar-items bg-white",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"40px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"50px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(C,{width:"50px",height:"1.125rem",className:"bg-white"})})})]}),Array.from({length:15}).map((t,e)=>i.jsx("div",{style:{paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"20px",height:"20px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-4",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-3",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:i.jsx(C,{width:"24px",height:"24px"})})]})},e))]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx(C,{width:"130px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(C,{width:"70px",height:"38px",style:{borderRadius:"4px"}})]})})]})})}),CP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(C,{width:"180px",height:"1.5rem"}),i.jsx(C,{width:"1rem",height:"1rem",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"200px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(C,{width:"250px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1rem"}),i.jsx(C,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"60px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Se,{labelWidth:"70px",inputHeight:"38px"})})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx(C,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Aie=()=>i.jsxs(yo,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(C,{width:"200px",height:"2rem",className:"mb-2"}),i.jsx(C,{width:"400px",height:"1rem"})]}),i.jsxs(Yn,{className:"g-4",children:[i.jsx(Et,{lg:6,children:i.jsxs(St,{children:[i.jsxs(St.Header,{children:[i.jsx(St.Title,{className:"d-flex align-items-center",children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx(St.Subtitle,{className:"text-muted small",children:i.jsx(C,{width:"250px",height:"0.875rem"})})]}),i.jsx(St.Body,{children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(C,{width:"100px",height:"1rem"}),i.jsx(st,{width:"100px",height:"31px"})]}),i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100%",height:"38px",className:"flex-fill"}),i.jsx(st,{width:"100px",height:"38px"})]})})]})})]})}),i.jsx(Et,{lg:6,children:i.jsxs(St,{children:[i.jsxs(St.Header,{children:[i.jsx(St.Title,{children:i.jsx(C,{width:"150px",height:"1.5rem"})}),i.jsx(St.Subtitle,{className:"text-muted",children:i.jsx(C,{width:"300px",height:"0.875rem"})})]}),i.jsx(St.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"hidden"},children:i.jsx("div",{className:"d-grid gap-3",children:[1,2,3].map(t=>i.jsxs("div",{children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2 pb-1"}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:[1,2].map(e=>i.jsx("div",{className:"p-3 border rounded",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-1"}),i.jsx(C,{width:"100px",height:"0.75rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"50px",height:"1.25rem",style:{borderRadius:"10px"}}),i.jsx(C,{width:"16px",height:"16px"})]})]})},e))})]},t))})})})]})})]}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsxs(St,{children:[i.jsxs(St.Header,{children:[i.jsx(St.Title,{children:i.jsx(C,{width:"120px",height:"1.5rem"})}),i.jsx(St.Subtitle,{className:"text-muted",children:i.jsx(C,{width:"250px",height:"0.875rem"})})]}),i.jsx(St.Body,{children:i.jsxs("div",{className:"text-center py-5",children:[i.jsx(C,{width:"60px",height:"60px",className:"d-block mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(C,{width:"300px",height:"1rem",className:"mx-auto"})]})})]})})})]}),of=()=>i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx(C,{width:"200px",height:"1.5rem"}),i.jsx(C,{width:"80px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"250px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:Array.from({length:6}).map((t,e)=>i.jsx(C,{width:"100px",height:"2rem",style:{borderRadius:"4px"}},e))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(C,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(C,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),Die=[{key:"doctor",label:r("Default status when doctor register","kivicare-clinic-management-system")},{key:"receptionist",label:r("Default status when Receptionist register","kivicare-clinic-management-system")},{key:"patient",label:r("Default status when patient register","kivicare-clinic-management-system")}],Rie={kiviCare_doctor:"doctor",kiviCare_receptionist:"receptionist",kiviCare_patient:"patient"},_C=[{key:jx(),label:r("Clinic Admin","kivicare-clinic-management-system")},{key:lc(),label:r("Doctor","kivicare-clinic-management-system")},{key:oc(),label:r("Receptionist","kivicare-clinic-management-system")},{key:ol(),label:r("Patient","kivicare-clinic-management-system")}],Pie="https://www.google.com/recaptcha/admin",Dd={hideUtilityLinks:"off",currencyPrefix:"",currencyPostfix:"",countryCode:"us",countryDialCode:"+44",status:{doctor:"off",receptionist:"off",patient:"on"},role:{[lc()]:"on",[oc()]:"on",[ol()]:"on"},enableRecaptcha:"off",recaptchaSiteKey:"",recaptchaSecretKey:"",showOtherGender:"on",loginRedirects:{[jx()]:"",[lc()]:"",[oc()]:"",[ol()]:""},logoutRedirects:{[jx()]:"",[lc()]:"",[oc()]:"",[ol()]:""},allowEncounterEdit:"off"},Mie=({setting:t,registrationSetting:e,watchedRoles:n,control:s,errors:a,isLoading:l,getBadge:o})=>{const c=n?.[t.key]==="on",d=m=>m===!0||m==="on"?"on":"off";return i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(Ne,{name:`role.${t.key}`,control:s,render:({field:m})=>i.jsx(on,{label:t.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:l,error:a.role?.[t.key]})}),i.jsx("div",{className:`kivi-collapse ${c&&e?"show":""}`,children:c&&e&&i.jsx("div",{className:"ms-4",children:i.jsx(Ne,{name:`status.${e.key}`,control:s,render:({field:m})=>i.jsx(on,{label:e.label,checked:m.value,onChange:u=>{const p=d(u);m.onChange(p)},badge:o(m.value),disabled:l,error:a.status?.[e.key]})})})})]})},Iie=({error:t})=>(f.useEffect(()=>{if(t){let e;typeof t=="string"?e=t:t?.response?.data?.message?e=t.response.data.message:t?.message?e=t.message:e=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(e,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[t]),null),Oie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(!1),a=f.useRef(null),{data:l,isLoading:o,error:c}=wn("settings","general",{},{enabled:!0}),d=un("settings","general"),{data:m}=_n(),u=m?.data?.hideUtilityLinks,{control:p,handleSubmit:h,watch:g,setValue:x,reset:v,formState:{errors:y}}=en({defaultValues:Dd}),b=g("enableRecaptcha"),k=g("role"),w=f.useMemo(()=>[{key:lc(),label:r("Doctor Role","kivicare-clinic-management-system")},{key:oc(),label:r("Receptionist Role","kivicare-clinic-management-system")},{key:ol(),label:r("Patient Role","kivicare-clinic-management-system")}],[]),S=f.useCallback(_=>({text:_==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:_==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),[]),j=f.useCallback(_=>{const A={..._};if(!A.role)A.role={...Dd.role};else{const E={...Dd.role};Object.keys(E).forEach(M=>{if(A.role[M]===void 0||A.role[M]===null)A.role[M]=E[M];else{const R=A.role[M];A.role[M]=R===!0||R==="on"?"on":"off"}})}if(!A.status)A.status={...Dd.status};else{const E={...Dd.status};Object.keys(E).forEach(M=>{if(A.status[M]===void 0||A.status[M]===null)A.status[M]=E[M];else{const R=A.status[M];A.status[M]=R===!0||R==="on"?"on":"off"}})}return["hideUtilityLinks","enableRecaptcha","showOtherGender","allowEncounterEdit"].forEach(E=>{if(A[E]!==void 0){const M=A[E];A[E]=M===!0||M==="on"?"on":"off"}}),(!A.countryCode||A.countryCode===null)&&(A.countryCode="us"),(!A.countryDialCode||A.countryDialCode===null)&&(A.countryDialCode="+44"),(!A.currencyPrefix||A.currencyPrefix===null)&&(A.currencyPrefix=""),(!A.currencyPostfix||A.currencyPostfix===null)&&(A.currencyPostfix=""),(!A.recaptchaSiteKey||A.recaptchaSiteKey===null)&&(A.recaptchaSiteKey=""),(!A.recaptchaSecretKey||A.recaptchaSecretKey===null)&&(A.recaptchaSecretKey=""),A},[]);f.useEffect(()=>{if(l?.data){const _=j(l.data);v(_)}},[l,v,j]);const T=f.useCallback(async _=>{try{e(""),s(!0);const A=j(_);if(!Object.values(A.role||{}).some(R=>R==="on")){e(r("At least one user registration role must be enabled.","kivicare-clinic-management-system")),a.current?.scrollIntoView({behavior:"smooth"}),a.current?.classList.add("highlight-section"),setTimeout(()=>{a.current?.classList.remove("highlight-section")},2e3);return}if(A.enableRecaptcha==="on"&&(!A.recaptchaSiteKey.trim()||!A.recaptchaSecretKey.trim())){e(r("Both Site Key and Secret Key are required when reCAPTCHA is enabled.","kivicare-clinic-management-system"));return}const E=await d.mutateAsync(A),M={icon:E.status?"success":"error",title:r(E.status?"Success":"Error","kivicare-clinic-management-system"),text:r(E.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")};Xe.fire(M),E.status?e(""):e(E.message)}catch(A){console.error("Failed to save settings:",A),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{s(!1)}},[d,j]),N=f.useCallback(_=>{const A=_?.iso2||"us",P=_?.dialCode?`+${_.dialCode}`:"+1";x("countryCode",A),x("countryDialCode",P)},[x]);return c?i.jsx(Iie,{error:c}):o?i.jsx(uP,{}):i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx("form",{onSubmit:h(T),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Utility Links Setting","kivicare-clinic-management-system"),children:i.jsx(Ne,{name:"hideUtilityLinks",control:p,render:({field:_})=>i.jsx(on,{label:r("Hide all utility links : Request features | Get Help | Documentation. ","kivicare-clinic-management-system"),checked:_.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";_.onChange(P)},disabled:n,error:y.hideUtilityLinks})})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Currency Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{name:"currencyPrefix",control:p,render:({field:_})=>i.jsx(Qt,{label:r("Currency Prefix","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,placeholder:r("Enter currency prefix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPrefix})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{name:"currencyPostfix",control:p,render:({field:_})=>i.jsx(Qt,{label:r("Currency Postfix","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,placeholder:r("Enter currency postfix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPostfix})})})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Country Code Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Select Country","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"countryCode",control:p,render:({field:_})=>{const A=typeof _.value=="string"&&_.value.length===2?_.value.toLowerCase():"us";return i.jsx("div",{className:"react-international-phone",children:i.jsx(yI,{selectedCountry:A,onSelect:P=>{_.onChange(P.iso2),N(P)},dropdownStyleProps:{className:"country-selector-dropdown"},buttonStyleProps:{className:"country-selector-button"}})})}}),y.countryCode&&i.jsx("div",{className:"text-danger",children:y.countryCode.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{name:"countryDialCode",control:p,render:({field:_})=>i.jsx(Qt,{label:r("Country Dial Code","kivicare-clinic-management-system"),value:_.value||"+44",onChange:A=>{const P=A||"+44";_.onChange(P)},placeholder:r("Enter dial code","kivicare-clinic-management-system"),isDisable:!0,error:y.countryDialCode})})})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx("h4",{children:r("Registration Shortcode Setting","kivicare-clinic-management-system")}),i.jsx(rr,{title:r("Allowed User Role","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#4-registration-shortcode-settings"},children:i.jsx("div",{className:"d-flex flex-column row-gap-3",ref:a,children:w.map(_=>{const A=Rie[_.key],P=Die.find(E=>E.key===A);return i.jsx(Mie,{setting:_,registrationSetting:P,watchedRoles:k,control:p,errors:y,isLoading:n,getBadge:S},_.key)})})})]}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Google Recaptcha Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#5-google-recaptcha-settings"},children:i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(Ne,{name:"enableRecaptcha",control:p,render:({field:_})=>i.jsx(on,{label:r("Enable Recaptcha","kivicare-clinic-management-system"),checked:_.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";_.onChange(P)},badge:S(_.value),disabled:n,error:y.enableRecaptcha})}),b==="on"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{name:"recaptchaSiteKey",control:p,render:({field:_})=>i.jsx(Qt,{label:r("Recaptcha Site Key","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,placeholder:r("Enter site key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSiteKey})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{name:"recaptchaSecretKey",control:p,render:({field:_})=>i.jsx(Qt,{label:r("Recaptcha Secret Key","kivicare-clinic-management-system"),value:_.value,onChange:_.onChange,placeholder:r("Enter secret key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSecretKey})})})]}),i.jsx("a",{href:Pie,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-decoration-none",children:r("Please Click Here To Create New Site and a Secret Key","kivicare-clinic-management-system")})]}),t&&i.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:t})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Other Gender Setting","kivicare-clinic-management-system"),children:i.jsx(Ne,{name:"showOtherGender",control:p,render:({field:_})=>i.jsx(on,{label:r("Show Other Gender Option","kivicare-clinic-management-system"),checked:_.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";_.onChange(P)},badge:S(_.value),disabled:n,error:y.showOtherGender})})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Login Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#7-login-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(_=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{name:`loginRedirects.${_.key}`,control:p,render:({field:A})=>i.jsx(Qt,{label:`${_.label} ${r("Login Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:r("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.loginRedirects?.[_.key]})})},_.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Logout Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#8-logout-redirect-settings"},children:i.jsx("div",{className:"row",children:_C.map(_=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{name:`logoutRedirects.${_.key}`,control:p,render:({field:A})=>i.jsx(Qt,{label:`${_.label} ${r("Logout Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:r("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.logoutRedirects?.[_.key]})})},_.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Encounter Setting","kivicare-clinic-management-system"),children:i.jsx(Ne,{name:"allowEncounterEdit",control:p,render:({field:_})=>i.jsx(on,{label:r("Allow Encounter Edit After Close","kivicare-clinic-management-system"),checked:_.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";_.onChange(P)},badge:S(_.value),disabled:n,error:y.allowEncounterEdit})})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})})})]})})})})},EC=({value:t,onChange:e,placeholder:n,error:s,id:a})=>i.jsx(Un,{value:t,onChange:l=>{if(l&&l.length>0){const o=l[0],c=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`;e(c)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none ${s?"is-invalid":""}`,placeholder:n,id:a}),Jv=({isEditing:t=!1,isAdding:e=!1,...n})=>{const{id:s}=Gt(),a=hn(),l=Ve(),{isAddonActive:o,userRole:c,currentDoctorId:d,hasCapability:m,defaultClinicId:u}=ut(),{data:p}=_n(),h=p?.data?.hideUtilityLinks,g=t||e,[x,v]=f.useState(!1),[y,b]=f.useState([]),[k,w]=f.useState(""),[S,j]=f.useState(null),[T,N]=f.useState([]),[_,A]=f.useState([]),[P,E]=f.useState(!0),[M,R]=f.useState({module_type:"",scheduleDate:"",module_id:""}),[O,L]=f.useState("range"),[q,Q]=f.useState([]),[V,se]=f.useState(!1),[G,ge]=f.useState({start_time:"09:00",end_time:"17:00"}),[ie,W]=f.useState({module_type:"",scheduleDate:"",module_id:""}),X=o("kiviPro"),J=c==="kiviCare_doctor",ue=Za(k,500),le=Ln(),I=f.useMemo(()=>{let z="",Z="";J&&d?(z="doctor",Z=d):ie.module_type&&ie.module_id&&(z=typeof ie.module_type=="object"?ie.module_type.id:ie.module_type,Z=typeof ie.module_id=="object"?ie.module_id.id:ie.module_id);const fe={module_type:z,module_id:Z};return t&&s&&(fe.exclude_id=s),fe},[ie.module_type,ie.module_id,J,d,t,s]),{data:ee}=XX(I),K=f.useMemo(()=>ee?.data?.disabled_dates?ee.data.disabled_dates:[],[ee]),ne=async({page:z,per_page:Z,search:fe})=>{try{const _e={dataType:"clinicList",page:z,per_page:Z,search:fe};return await l.fetchQuery({queryKey:pt.list(_e),queryFn:()=>Dt.getStaticData(_e),staleTime:300*1e3})}catch(_e){return console.error("Error loading clinics:",_e),{options:[]}}},oe=async({page:z,per_page:Z,search:fe})=>{try{const _e={dataType:"staticData",staticDataType:"doctors",page:z,per_page:Z,search:fe};return(c==="kiviCare_clinic_admin"||c==="kiviCare_receptionist")&&u&&(_e.clinic_ids=u),await l.fetchQuery({queryKey:pt.list(_e),queryFn:()=>Dt.getStaticData(_e),staleTime:300*1e3})}catch(_e){return console.error("Error loading doctors:",_e),{options:[]}}},[D,$]=f.useState({page:1,perPage:10,searchTerm:"",name:"",module_type:"",module_id:"",orderby:"id",order:"desc"}),{data:te,isLoading:ae,error:Y}=Mp({dataType:"staticData",staticDataType:"clinics"},{enabled:!0}),{data:H,isLoading:B}=Mp({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),re=un("settings","holidays/update"),de=un("settings","holidays/delete"),xe=QX(),U=f.useMemo(()=>Object.fromEntries(Object.entries(D).filter(([z,Z])=>Z!==""&&Z!==null&&Z!==void 0)),[D]),{data:me,isLoading:ye}=wn("settings","holidays",U,{enabled:!0}),pe=f.useMemo(()=>[{id:"clinic",label:r("Clinic","kivicare-clinic-management-system")},{id:"doctor",label:r("Doctor","kivicare-clinic-management-system")}],[]);f.useEffect(()=>{J&&d&&$(z=>({...z,module_type:"doctor",module_id:d}))},[J,d]),f.useEffect(()=>{te?.status&&te?.data&&N(te.data),me?.status&&me?.data&&(b(me.data.data||[]),me.data.pagination&&Yt(me.data.pagination)),H?.status&&H?.data&&A(H.data)},[te,H,me]),f.useEffect(()=>{if(t&&s&&y.length>0){const z=y.find(Z=>String(Z.id)===String(s));if(J&&z&&z.module_type_label==="clinic"){a("/setting/holidays",{replace:!0});return}z&&j(z)}else if(e)if(L("range"),Q([]),se(!1),ge({start_time:"09:00",end_time:"17:00"}),J){const z=_.find(Z=>Z.id===d);W({module_type:{id:"doctor",label:r("Doctor","kivicare-clinic-management-system")},scheduleDate:"",module_id:z||{id:d,label:""}})}else W({module_type:"",scheduleDate:"",module_id:""})},[t,e,s,y,J,d,_,a]),f.useEffect(()=>{$(z=>({...z,searchTerm:ue,page:1}))},[ue]);const Ce=f.useCallback(z=>{wt({title:r("Delete Schedule?","kivicare-clinic-management-system"),text:r("You're about to delete this holiday.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep holiday","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Z=>{Z.isConfirmed&&(yt({title:r("Deleting Schedule...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected holiday.<br>This won't take long.","kivicare-clinic-management-system")}),de.mutate({id:z},{onSuccess:fe=>{Tt({title:r("Schedule Deleted","kivicare-clinic-management-system"),text:fe?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to holidays","kivicare-clinic-management-system")}),l.invalidateQueries(["settings","listing"])},onError:fe=>{console.error("Delete clinic error:",fe);const _e=fe?.response?.data?.message||fe?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:_e,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},[de,l]),Ge=f.useMemo(()=>[le.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),cell:z=>z.getValue()}),le.accessor("module_type_label",{header:()=>r("Schedule of","kivicare-clinic-management-system"),cell:z=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:z.row.original.module_type_label})})}),le.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:z=>z.getValue()}),le.accessor("start_date",{header:()=>r("From Date","kivicare-clinic-management-system"),cell:z=>z.getValue()}),le.accessor("end_date",{header:()=>r("To Date","kivicare-clinic-management-system"),cell:z=>z.getValue()}),...m("clinic_schedule_edit")||m("clinic_schedule_delete")?[le.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:z=>{const Z=z.row.original,fe=Z.module_type_label==="clinic",_e=!(J&&fe);return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[m("clinic_schedule_edit")&&_e&&i.jsx(ht,{to:`/setting/holidays/edit/${Z.id}`,className:"btn btn-link text-success fs-5 p-0",title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5"})}),m("clinic_schedule_delete")&&_e&&i.jsx("button",{type:"button",onClick:()=>Ce(Z.id),className:"btn btn-link text-danger p-0",title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})},enableSorting:!1})]:[]],[le,Ce,m]),De=f.useCallback(z=>{w(z.target.value)},[]);f.useEffect(()=>{if(S){const z=pe.find(_e=>_e.id===S.module_type_label),Z=_e=>new Date(_e).toISOString().slice(0,10);let fe=null;S.module_type_label==="clinic"?fe=T.find(_e=>String(_e.id)===String(S.module_id)):S.module_type_label==="doctor"&&(fe=_.find(_e=>String(_e.id)===String(S.module_id))),W({id:Number(S.id),module_type:z||"",scheduleDate:{start:Z(S.start_date_raw),end:Z(S.end_date_raw)},module_id:fe||""})}},[S,T,_,pe]);const $e=()=>{a("/setting/holidays/add")},et=()=>{a("/setting/holidays")},tt=()=>{a("/setting/holidays")},qe=async()=>{const z=O==="multiple"?q.length>0:!!ie.scheduleDate,Z=J?z:!!(ie.module_type&&z&&ie.module_id);if(V&&(!G.start_time||!G.end_time)){R(fe=>({...fe,scheduleDate:r("Start time and end time are required for time-specific holidays.","kivicare-clinic-management-system")})),E(!1);return}if(V&&G.start_time>=G.end_time){R(fe=>({...fe,scheduleDate:r("End time must be after start time.","kivicare-clinic-management-system")})),E(!1);return}if(!Z){R({module_type:!J&&!ie.module_type?r("Module Type is required.","kivicare-clinic-management-system"):"",scheduleDate:z?"":r("Schedule Date is required.","kivicare-clinic-management-system"),module_id:!J&&!ie.module_id?r("Module ID is required.","kivicare-clinic-management-system"):""}),E(!1);return}wt({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("All the appointments on the selected date will be cancelled.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, save","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(async fe=>{if(fe.isConfirmed){v(!0);try{const _e={...ie,selectionMode:O,selectedDates:O==="multiple"?q:void 0,timeSpecific:V,...V&&{start_time:G.start_time,end_time:G.end_time}},Ke=await re.mutateAsync(_e);await l.invalidateQueries(["settings","holidays"]),Ke.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(Ke.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Tt({title:r("Success","kivicare-clinic-management-system"),text:r(Ke.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),v(!1),a("/setting/holidays"),W({module_type:"",scheduleDate:"",module_id:""}),S&&j(null),R({module_type:"",scheduleDate:"",module_id:""}),E(!0)}catch(_e){v(!1),console.error("Error submitting form:",_e),rt({title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save holiday. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}}})};f.useEffect(()=>{if(Y){let z;typeof Y=="string"?z=Y:Y?.response?.data?.message?z=Y.response.data.message:Y?.message?z=Y.message:z=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(z,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[Y]);const[we,Ee]=f.useState(!1),Qe=async z=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const Z={format:z,...U},fe=await xe.mutateAsync(Z);if(!fe.status||!fe.data||!fe.data.holidays)throw new Error(fe.message||r("Failed to retrieve export data","kivicare-clinic-management-system"));const _e=new Date().toISOString().split("T")[0],Ke=fe.data.holidays;switch(z){case"csv":ps(Ke,`holidays-${_e}.csv`);break;case"xls":gs(Ke,`holidays-${_e}.xls`);break;case"pdf":fs(Ke,`holidays-${_e}.pdf`,"Holidays List");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(Z){console.error("Export error:",Z),rt({title:r("Error!","kivicare-clinic-management-system"),text:Z.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},nt=z=>{if(z==="pdf"){if(we)return;Ee(!0),Qe("pdf"),setTimeout(()=>Ee(!1),2e3)}else Qe(z)},Ht=()=>m("clinic_schedule_export")?i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>nt("csv"),title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>nt("xls"),title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>nt("pdf"),title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}):null,[Lt,Yt]=f.useState({total:0,lastPage:1,perPage:10,currentPage:1}),xt=z=>{$(Z=>({...Z,page:z}))},Ae=z=>{$(Z=>({...Z,page:1,perPage:z}))},Oe=z=>{const Z=z[0];$(Z?fe=>({...fe,page:1,orderby:Z.id,order:Z.desc?"desc":"asc"}):fe=>({...fe,page:1,orderby:"id",order:"desc"}))};return i.jsx("div",{className:"tab-content",id:"v-pills-tabContent",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-holidays",role:"tabpanel","aria-labelledby":"v-pills-holidays-tab",tabIndex:"0",children:g?i.jsxs("div",{className:"add-holiday-setting",children:[i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-header border-0 pb-0 d-flex align-items-center  justify-content-between ",children:[i.jsxs("div",{className:"custom-header ",children:[i.jsx("h4",{className:"card-title mb-2",children:e?r("Add Holiday","kivicare-clinic-management-system"):r("Edit Holiday","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:e?r("Create and  schedule a new holiday event for your clinic locations.","kivicare-clinic-management-system"):r("Update the holiday event details.","kivicare-clinic-management-system")})]}),i.jsxs("button",{onClick:et,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-4",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row g-3",children:[!J&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"holidayOf",className:"form-label",children:[r("Holiday Category","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ct,{placeholder:r("Select Category","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:pe,getOptionValue:z=>z.id,getOptionLabel:z=>z.label,onChange:z=>{M?.module_type&&(R(Z=>({...Z,module_type:""})),E(!0)),W(Z=>({...Z,module_type:z||"",module_id:""}))},value:ie.module_type||null,isSearchable:!1,isClearable:!0,error:!!M?.module_type,styles:{menuPortal:z=>({...z,zIndex:9999})}},"holiday-of-select"),M?.module_type&&i.jsx("div",{className:"text-danger mt-1",children:M.module_type})]})}),!J&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"doctor",className:"form-label",children:[ie.module_type?.id==="doctor"?r("Target Doctor","kivicare-clinic-management-system"):r("Target Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(dn,{className:"w-100 react-select-box",classNamePrefix:"react-select",loadOptions:ie.module_type?.id==="doctor"?oe:ne,onChange:z=>{M?.module_id&&(R(Z=>({...Z,module_id:""})),E(!0)),W(Z=>({...Z,module_id:z||""}))},value:ie.module_id||null,isSearchable:!0,isClearable:!0,isDisabled:!ie.module_type,error:!!M?.module_id},`form-module-select-${ie.module_type?.id}`),M?.module_id&&i.jsx("div",{className:"text-danger mt-1",children:M.module_id})]})})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date Selection Mode","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsxs("div",{className:"btn-group w-100 mb-3",role:"group",children:[i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-single",checked:O==="single",onChange:()=>{L("single"),Q([]),W(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-single",children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),r("Single","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-multiple",checked:O==="multiple",onChange:()=>{L("multiple"),Q([]),W(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-multiple",children:[i.jsx("i",{className:"ph ph-calendar-check me-2"}),r("Multiple","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-range",checked:O==="range",onChange:()=>{L("range"),Q([]),W(z=>({...z,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-range",children:[i.jsx("i",{className:"ph ph-calendar-dots me-2"}),r("Date Range","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"scheduleDate",className:"form-label",children:[r("Schedule Date Selection","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("div",{className:"kc-flatpickr-calendar",children:i.jsx(Un,{options:{inline:!0,mode:O==="multiple"?"multiple":O==="single"?"single":"range",minDate:"today",locale:Wn(),...O==="multiple"&&{conjunction:", "},...K.length>0&&{disable:K},onDayCreate:(z,Z,fe,_e)=>{if(K.length>0){const Ke=_e.dateObj.getFullYear(),it=String(_e.dateObj.getMonth()+1).padStart(2,"0"),at=String(_e.dateObj.getDate()).padStart(2,"0"),ot=`${Ke}-${it}-${at}`;if(K.includes(ot)){_e.classList.add("kc-holiday-disabled");const Nt=document.createElement("div");Nt.className="day-tooltip",Nt.innerHTML=`
                                  <span class="tooltip-info">${r("Holiday already scheduled","kivicare-clinic-management-system")}</span>
                                `,_e.appendChild(Nt)}}}},className:"d-none",placeholder:r("dd / mm / yyyy","kivicare-clinic-management-system"),value:O==="multiple"?q.map(z=>Zn(z)):ie.scheduleDate&&ie.scheduleDate.start?[Zn(ie.scheduleDate.start),Zn(ie.scheduleDate.end||ie.scheduleDate.start)]:"",onChange:z=>{M?.scheduleDate&&(R(fe=>({...fe,scheduleDate:""})),E(!0));const Z=fe=>{if(!fe)return"";const _e=fe instanceof Date?fe:new Date(fe);return`${_e.getFullYear()}-${String(_e.getMonth()+1).padStart(2,"0")}-${String(_e.getDate()).padStart(2,"0")}`};O==="single"&&z.length>0?W(fe=>({...fe,scheduleDate:{start:Z(z[0]),end:Z(z[0])}})):O==="multiple"&&z.length>0?(Q(z.map(fe=>Z(fe))),W(fe=>({...fe,scheduleDate:{start:Z(z[0]),end:Z(z[z.length-1])}}))):O==="range"&&z.length===2&&W(fe=>({...fe,scheduleDate:{start:Z(z[0]),end:Z(z[1])}}))},error:M?.scheduleDate?"true":"false"},`flatpickr-${O}-${I.module_type}-${I.module_id}-${K.length}`)}),M?.scheduleDate&&i.jsx("div",{className:"text-danger mt-1",children:M.scheduleDate}),K.length>0&&i.jsxs("div",{className:"alert alert-warning mt-3 py-2 px-3 d-flex align-items-center gap-2 bg-warning-subtle",children:[i.jsx("i",{className:"ph ph-warning-circle fs-5"}),i.jsxs("small",{children:[K.length," ",r("date(s) already have holidays and are disabled.","kivicare-clinic-management-system")]})]}),O==="multiple"&&q.length>0&&i.jsxs("div",{className:"alert alert-info mt-3 bg-primary-subtle",children:[i.jsxs("strong",{children:[r("Selected Dates","kivicare-clinic-management-system"),":"]}),i.jsx("div",{className:"mt-2",children:q.map((z,Z)=>i.jsx("span",{className:"badge bg-primary me-2 mb-1",children:z},Z))}),i.jsxs("small",{className:"d-block mt-2",children:[q.length," ",r("date(s) selected","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"form-label mb-0",children:r("Apply Specific Time","kivicare-clinic-management-system")}),i.jsx("small",{className:"d-block text-muted",children:r("Set if the holiday isn't all-day","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"timeSpecific",checked:V,onChange:z=>se(z.target.checked),style:{width:"3rem",height:"1.5rem",cursor:"pointer"}})})]}),V&&i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"startTime",className:"form-label",children:[r("Start Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(EC,{placeholder:r("Select start time","kivicare-clinic-management-system"),value:G.start_time,onChange:z=>ge(Z=>({...Z,start_time:z})),id:"startTime"})]}),i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"endTime",className:"form-label",children:[r("End Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(EC,{placeholder:r("Select end time","kivicare-clinic-management-system"),value:G.end_time,onChange:z=>ge(Z=>({...Z,end_time:z})),id:"endTime"})]})]})]})})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:tt,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:qe,disabled:!P||x||B||ye,children:x||B||ye?S?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):S?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"holiday-setting",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between row-gap-2 column-gap-3 flex-md-row flex-column mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0 d-flex align-items-center",children:[r("Holiday List","kivicare-clinic-management-system"),h!=="on"&&i.jsx("span",{className:"ms-2",children:i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/holidays-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})})]}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-4 flex-wrap",children:[X&&i.jsx(Ht,{}),m("clinic_schedule_add")&&i.jsxs("button",{onClick:$e,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Holiday","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[!J&&i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ct,{placeholder:r("Schedule Type","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:pe,getOptionValue:z=>z.id,getOptionLabel:z=>z.label,onChange:z=>{$(Z=>({...Z,module_type:z?z.id:"",module_id:""}))},value:pe.find(z=>z.id===D.module_type)||null,isSearchable:!1,isClearable:!0,styles:{menuPortal:z=>({...z,zIndex:9999})}},"schedule-type-select"),i.jsx(dn,{className:"w-100 react-select-box",classNamePrefix:"react-select",placeholder:D.module_type==="doctor"?r("Select Doctor","kivicare-clinic-management-system"):D.module_type==="clinic"?r("Select Clinic","kivicare-clinic-management-system"):r("Select Type First","kivicare-clinic-management-system"),loadOptions:D.module_type==="doctor"?oe:D.module_type==="clinic"?ne:()=>Promise.resolve({options:[]}),isDisabled:!D.module_type,onChange:z=>{$(Z=>({...Z,module_id:z?z.id:""}))},isSearchable:!0,isClearable:!0},`filter-module-select-${D.module_type}`)]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search by filter","kivicare-clinic-management-system"),onChange:De})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:y,columns:Ge,currentPage:Lt.currentPage,perPage:Lt.perPage,totalItems:Lt.total,lastPage:Lt.lastPage,onPageChange:xt,onPerPageChange:Ae,onSortingChange:Oe,manualSorting:!0,enableSelection:!1,isLoading:x||B||ye})})]})})})},Fie=()=>{const t=un("settings","configurations"),[e,n]=f.useState(!1),{isAddonActive:s}=ut(),a=s("kiviPro"),{data:l}=_n(),o=l?.data?.hideUtilityLinks,{data:c,isLoading:d,error:m}=wn("settings","configurations",{},{enabled:!0}),u=[{label:r("Receptionist","kivicare-clinic-management-system"),name:"receptionist",status:0},{label:r("Billing","kivicare-clinic-management-system"),name:"billing",status:0},{label:r("Custom Fields","kivicare-clinic-management-system"),name:"custom_fields",status:0}],p=[{label:r("Problem","kivicare-clinic-management-system"),name:"problem",status:0},{label:r("Observations","kivicare-clinic-management-system"),name:"observation",status:0},{label:r("Note","kivicare-clinic-management-system"),name:"note",status:0}],h=[{label:r("Prescription","kivicare-clinic-management-system"),name:"prescription",status:0}],{register:g,handleSubmit:x,watch:v,setValue:y,reset:b}=en({defaultValues:{module_config:u,encounter_modules:p,prescription_modules:h}});f.useEffect(()=>{if(!c?.status||!c?.data)return;const j=N=>Array.isArray(N)?N.map(_=>({..._,status:Number(_.status)||0})):[],T={module_config:u,encounter_modules:p,prescription_modules:h};b(N=>{const _={...N};return["module_config","encounter_modules","prescription_modules"].forEach(A=>{const P=c?.data?.[A];_[A]=j(Array.isArray(P)&&P.length>0?P:T[A])}),_})},[c,b]);const k=async j=>{try{n(!0);const T={module_config:j.module_config,encounter_modules:j.encounter_modules,prescription_modules:j.prescription_modules},N=await t.mutateAsync(T);N.status!==!0?(n(!1),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(N.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(n(!1),Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(N.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(T){n(!1),console.error("Failed to save settings:",T)}},w=(j,T)=>{const _=v(j).map(A=>A.name===T?{...A,status:A.status===1?0:1}:A);y(j,_)};if(m){let j;typeof m=="string"?j=m:m?.response?.data?.message?j=m.response.data.message:m?.message?j=m.message:j=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(j,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const S=({title:j,name:T,disabled:N})=>{const _=v(T);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:j}),i.jsx("div",{className:"",children:_.map(A=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",checked:A.status===1,onChange:()=>w(T,A.name),id:A.name,disabled:N}),i.jsx("label",{htmlFor:A.name,className:"form-check-label",children:A.label})]},A.name))})]})})};return d?i.jsx(hP,{}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:[d&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!d&&i.jsxs("form",{onSubmit:x(k),className:"configuration-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Enable/Disable Modules","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/system-configuration/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx(S,{title:r("Module config","kivicare-clinic-management-system"),name:"module_config",disabled:e}),c?.data?.encounter_modules&&a&&Array.isArray(c.data.encounter_modules)&&i.jsx(S,{title:r("Encounter Module","kivicare-clinic-management-system"),name:"encounter_modules",disabled:e}),c?.data?.prescription_modules&&a&&Array.isArray(c.data.prescription_modules)&&i.jsx(S,{title:r("Prescription Module","kivicare-clinic-management-system"),name:"prescription_modules",disabled:e}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})},ex=[{id:"image/jpeg",text:r("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:r("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:r("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:r("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:r("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:r("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:r("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:r("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:r("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:r("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:r("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:r("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:r("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:r("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:r("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:r("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:r("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:r("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:r("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:r("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:r("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:r("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:r("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:r("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:r("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:r("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:r("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:r("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:r("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:r("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:r("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:r("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:r("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:r("7Z Archive (7z)","kivicare-clinic-management-system")}],tx=()=>{const t=hn(),{hasCapability:e,module_config:n,loading:s}=ut(),{data:a}=_n(),l=a?.data?.hideUtilityLinks;if(f.useEffect(()=>{if(!s){if((n.custom_fields??"1")==="0"){t("/setting/general-setting",{replace:!0});return}e("custom_field_list")||t("/403",{replace:!0})}},[s,n,e,t]),s||n&&(n.custom_fields??"1")==="0"||!e("custom_field_list"))return null;const[o,c]=f.useState(!1),[d,m]=f.useState(!1),[u,p]=f.useState([]),[h,g]=f.useState(null),x=un("setting","custom-field/delete"),v=un("setting","custom-field/status"),{control:y,handleSubmit:b,formState:{errors:k},reset:w,watch:S}=en(),j=Ve(),{isAddonActive:T}=ut(),[N,_]=f.useState([]),A=T("kiviPro"),[P,E]=f.useState(!1),{id:M}=Gt(),R=Kn(),O=f.useCallback((we,Ee)=>!we||!Array.isArray(we)||we.length===0?[]:we.map(Qe=>{const nt=typeof Qe=="object"?Qe.id:Qe;return Ee.find(Ht=>Ht.id===nt)}).filter(Boolean),[]),L=f.useCallback(()=>({id:"",label:"",module_type:"",type:"",status:"",placeholder:"",isRequired:!1,options:[],file_types:[]}),[]),q=YX(),[Q,V]=f.useState(!1),se=()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>pe("csv"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>pe("xls"),disabled:q.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>pe("pdf"),disabled:q.isPending||Q,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]}),[G,ge]=f.useState({page:1,perPage:10,searchTerm:"",input_type:"",module_type:"",status:""}),[ie,W]=f.useState([]),X=f.useMemo(()=>Object.fromEntries(Object.entries(G).filter(([we,Ee])=>Ee!==""&&Ee!==null&&Ee!==void 0)),[G]),{data:J,isLoading:ue,error:le}=wn("setting","custom-field",X,{enabled:!0}),I=un("setting","custom-field/update"),{data:ee,isLoading:K}=Mp({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),[ne,oe]=f.useState(""),D=Za(ne,500),$=f.useCallback(we=>{oe(we.target.value)},[]),te=we=>{const Ee=we[0];ge(Ee?Qe=>({...Qe,page:1,orderby:Ee.id,order:Ee.desc?"desc":"asc"}):Qe=>({...Qe,page:1,orderby:"id",order:"desc"}))};f.useEffect(()=>{if(R.pathname.endsWith("/add"))c(!0),g(null),w(L());else if(M){const Ee=u.find(Qe=>String(Qe.id)===M);if(Ee){g(Ee),c(!0);const Qe=O(Ee.file_types,ex);w({id:Ee.id,label:Ee.field,module_type:xe.find(nt=>nt.label===Ee.type)||null,type:U.find(nt=>nt.value===Ee.inputType)||null,module_id:Ee.module_id&&N.find(nt=>nt.id===Ee.module_id)||null,status:me.find(nt=>nt.id===Ee.status)||null,placeholder:Ee.placeholder||"",isRequired:!!Ee.isRequired,options:Ee.options||[],file_types:Qe})}else c(!1),g(null)}else c(!1),g(null),w(L())},[M,R.pathname,u,w,N,O,L]),f.useEffect(()=>{if(h){const we=h.module_id&&N.length>0?N.find(Qe=>String(Qe.id)===String(h.module_id)):null,Ee=O(h.file_types,ex);w({id:h.id,label:h.field,module_type:xe.find(Qe=>Qe.label===h.type)||null,type:U.find(Qe=>Qe.value===h.inputType)||null,module_id:we||null,status:me.find(Qe=>Qe.id===h.status)||null,placeholder:h.placeholder||"",isRequired:!!h.isRequired,options:h.options||[],file_types:Ee})}},[h,N,O]),f.useEffect(()=>{const we=S((Ee,{name:Qe,type:nt})=>{Qe==="module_type"&&nt==="change"&&(Ee.module_type?.id==="appointment_module"||w(Lt=>({...Lt,module_id:null}),{keepDefaultValues:!0}))});return()=>we.unsubscribe()},[S,w]);const ae=S("module_type"),Y=S("type"),H=Ln(),B=[H.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system")}),H.accessor("field",{header:()=>r("Field","kivicare-clinic-management-system")}),H.accessor("inputType",{header:()=>r("Input Type","kivicare-clinic-management-system")}),H.accessor("type",{header:()=>r("Type","kivicare-clinic-management-system")}),H.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>{const Ee=we.row.original.id,Qe=we.row.original.status,nt=Qe===1,Ht=Qe===0?"bg-danger-subtle":"bg-success-subtle",Lt=Qe===0?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system"),Yt=xt=>{const Ae=xt?1:0;v.mutate({id:Ee,status:Ae},{onSuccess:()=>{Te.success(r("Field status has been updated.","kivicare-clinic-management-system")),j.invalidateQueries(["setting","custom-field"])},onError:()=>{Te.error(r("Failed to update field status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(on,{checked:nt,onChange:Yt,disabled:v.isPending,className:"m-0"}),i.jsx("span",{className:`badge ${Ht}`,children:Lt})]})}}),...e("custom_field_edit")||e("custom_field_delete")?[H.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:we=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("custom_field_edit")&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/custom-field/edit/${we.row.original.id}`,children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),e("custom_field_delete")&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Delete","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-link text-danger p-0",onClick:()=>ye(we.cell.row.original.id),children:i.jsx("i",{className:"ph text-danger ph-trash fs-5 p-0"})})})]})})]:[]];f.useEffect(()=>{ge(we=>({...we,searchTerm:D,page:1}))},[D]),f.useEffect(()=>{if(!J?.status){p([]);return}if(J?.data?.data&&Array.isArray(J.data.data)){const we=J.data.data.map(Qe=>{let nt={};try{nt=Qe.fields?JSON.parse(Qe.fields):{},typeof nt=="object"&&nt!==null?nt={label:nt.name||"",type:nt.type||"",placeholder:nt.placeholder||"",isRequired:nt.isRequired||0,options:nt.options||[],file_types:nt.file_upload_type||[],status:nt.status||1}:nt={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}catch{nt={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}return{id:Qe.id,field:nt.label,inputType:nt.type,type:xe.find(Ht=>Ht.id===Qe.module_type)?.label||Qe.module_type||"",module_id:Qe.module_id??null,placeholder:nt.placeholder,status:Number(Qe.status),isRequired:Number(nt.isRequired),options:nt.options,file_types:nt.file_types||[]}}),Ee=A?we:we.filter(Qe=>Qe.type!=="Appointment Module");p(Ee)}else p([])},[J,A]),f.useEffect(()=>{ee?.status&&ee?.data&&_(ee.data)},[ee]);const re=f.useCallback(we=>{$(we)},[$]),de=J?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},xe=[{id:"doctor_module",label:r("Doctor Module","kivicare-clinic-management-system")},{id:"patient_module",label:r("Patient Module","kivicare-clinic-management-system")},{id:"patient_encounter_module",label:r("Patient Encounter Module","kivicare-clinic-management-system")},{id:"appointment_module",label:r("Appointment Module","kivicare-clinic-management-system")}],U=[{value:"text",label:r("Text","kivicare-clinic-management-system")},{value:"number",label:r("Number","kivicare-clinic-management-system")},{value:"textarea",label:r("Textarea","kivicare-clinic-management-system")},{value:"file_upload",label:r("File Upload","kivicare-clinic-management-system")},{value:"select",label:r("Select","kivicare-clinic-management-system")},{value:"multi_select",label:r("Multi Select","kivicare-clinic-management-system")},{value:"radio",label:r("Radio","kivicare-clinic-management-system")},{value:"checkbox",label:r("Checkbox","kivicare-clinic-management-system")},{value:"calendar",label:r("Calendar","kivicare-clinic-management-system")}],me=[{id:1,label:r("Active","kivicare-clinic-management-system")},{id:0,label:r("Inactive","kivicare-clinic-management-system")}],ye=we=>{wt({title:r("Delete Custom Field?","kivicare-clinic-management-system"),text:r("You're about to delete this custom field.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep custom field","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ee=>{Ee.isConfirmed&&(yt({title:r("Deleting Custom Field...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected custom field.<br>This won't take long.","kivicare-clinic-management-system")}),x.mutate({id:we},{onSuccess:Qe=>{Tt({title:r("Custom Field Deleted","kivicare-clinic-management-system"),text:Qe?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to custom fields","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"])},onError:Qe=>{console.error("Delete clinic error:",Qe);const nt=Qe?.response?.data?.message||Qe?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:nt,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},pe=we=>{A?(we==="csv"&&Ge(),we==="xls"&&De(),we==="pdf"&&$e()):wt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},Ce=async we=>{try{const Ee={format:we,searchTerm:G.searchTerm,module_type:G.module_type,input_type:G.input_type,status:G.status},Qe=await q.mutateAsync(Ee),nt=Qe?.data?.customFields||Qe?.customFields||Qe?.data?.data?.customFields;if(nt){const Ht=new Date().toISOString().split("T")[0],Lt=nt.map(Yt=>({id:Yt.id,module:Yt.module,label:Yt.label,placeholder:Yt.placeholder,options:Yt.options,input_type:Yt.input_type,required:Yt.required,status:we==="pdf"?Yt.status==1?"Active":"Inactive":Yt.status}));switch(we){case"csv":ps(Lt,`custom-fields-${Ht}.csv`);break;case"xls":gs(Lt,`custom-fields-${Ht}.xls`);break;case"pdf":fs(Lt,`custom-fields-${Ht}.pdf`,"Custom Fields List");break;default:throw new Error("Invalid export format")}Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw console.error("No custom fields data found in response:",Qe),new Error(`No data received from server. Response structure: ${JSON.stringify(Qe,null,2)}`)}catch(Ee){console.error("Export error:",Ee),rt({title:r("Error!","kivicare-clinic-management-system"),text:Ee.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},Ge=()=>Ce("csv"),De=()=>Ce("xls"),$e=()=>{Q||(V(!0),Ce("pdf").finally(()=>{setTimeout(()=>V(!1),1e3)}))},et=()=>{m(!0)},tt=()=>{j.invalidateQueries(["setting","custom-field"])},qe=async we=>{try{E(!0);const Ee={id:we.id||"",module_type:{id:we.module_type?.id||"",label:we.module_type?.label||""},module_id:we.module_id?{id:we.module_id.id||we.module_id,label:we.module_id.label||""}:null,fields:[{label:we.label,type:we.type?.value||"",options:we.options||[],file_types:we.file_types||[],isRequired:we.isRequired?"1":"0",placeholder:we.placeholder||"",status:String(we.status?.id??1)}]};we.id&&(Ee.fields[0].id=we.id);const Qe=await I.mutateAsync(Ee);Qe.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(Qe.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Tt({title:r("Success","kivicare-clinic-management-system"),text:r(Qe.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"]),t("/setting/custom-field"),c(!1),w())}catch(Ee){console.error("Form submission error:",Ee),rt({title:r("Error","kivicare-clinic-management-system"),text:r(Ee.response?.data?.message||"Failed to save custom field","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{E(!1)}};if(le){let we;typeof le=="string"?we=le:le?.response?.data?.message?we=le.response.data.message:le?.message?we=le.message:we=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(we,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-custom-filed",role:"tabpanel","aria-labelledby":"v-pills-custom-filed-tab",tabIndex:"0",children:[!o&&i.jsxs("div",{className:"custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Custom Field Data","kivicare-clinic-management-system")," ",l!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/custom-field-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[e("custom_field_add")&&i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>t("/setting/custom-field/add"),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Custom field","kivicare-clinic-management-system")})]}),A&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:et,children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),e("custom_field_export")&&i.jsx(se,{})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ct,{options:U,placeholder:r("Input Type","kivicare-clinic-management-system"),isSearchable:!0,onChange:we=>{ge(Ee=>({...Ee,input_type:we?we.value:""}))},value:U.find(we=>we.value===G.input_type)||null,isClearable:!0,styles:{menuPortal:we=>({...we,zIndex:9999})}}),i.jsx(ct,{placeholder:r("Module Type","kivicare-clinic-management-system"),options:xe,onChange:we=>{ge(Ee=>({...Ee,module_type:we?we.id:""}))},value:xe.find(we=>we.id===G.module_type)||null,isSearchable:!0,isClearable:!0,styles:{menuPortal:we=>({...we,zIndex:9999})}}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),options:me,getOptionLabel:we=>we.label,getOptionValue:we=>we.id,onChange:we=>{ge(Ee=>({...Ee,status:we?we.id:""}))},value:me.find(we=>we.id===G.status)||null,isClearable:!0,styles:{menuPortal:we=>({...we,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",onChange:re})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:u,columns:B,isLoading:ue,error:le,currentPage:de.currentPage,perPage:de.perPage,totalItems:de.total,lastPage:de.lastPage,onPageChange:we=>ge(Ee=>({...Ee,page:we})),onPerPageChange:we=>ge(Ee=>({...Ee,perPage:we,page:1})),enableSelection:!1,onSortingChange:te,manualSorting:!0})})]}),o&&i.jsxs("div",{className:"add-custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title m-0",children:h?r("Edit Custom Field","kivicare-clinic-management-system"):r("Add Custom Field","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsxs("form",{onSubmit:b(qe),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"module_type",control:y,rules:{required:r("Module is required","kivicare-clinic-management-system")},render:({field:we})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:we.value?JSON.stringify(we.value):"",onChange:Ee=>{const Qe=xe.find(nt=>JSON.stringify(nt)===Ee.target.value);we.onChange(Qe||null)},children:[i.jsx("option",{value:"",children:r("Select Module","kivicare-clinic-management-system")}),xe.filter(Ee=>A||Ee.id!=="appointment_module").map(Ee=>i.jsx("option",{value:JSON.stringify(Ee),children:Ee.label},Ee.id))]}),we.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>we.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.module_type&&i.jsx("span",{className:"text-danger p",children:k.module_type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Doctor","kivicare-clinic-management-system")," "]}),i.jsx(Ne,{name:"module_id",control:y,render:({field:we})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:we.value?JSON.stringify(we.value):"",onChange:Ee=>{const Qe=N.find(nt=>JSON.stringify(nt)===Ee.target.value);we.onChange(Qe||null)},disabled:!ae||ae.id!=="appointment_module",children:[i.jsx("option",{value:"",children:r("Select Doctor","kivicare-clinic-management-system")}),N.map(Ee=>i.jsx("option",{value:JSON.stringify(Ee),children:Ee.label},Ee.id))]}),we.value&&ae?.id==="appointment_module"&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>we.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.module_id&&i.jsx("span",{className:"text-danger p",children:k.module_id.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(Ne,{name:"label",control:y,rules:{required:r("Label is required","kivicare-clinic-management-system")},render:({field:we})=>i.jsx(Qt,{placeholder:r('e.g. "Patient Module"',"kivicare-clinic-management-system"),required:!0,label:r("Label (Where it looks like)","kivicare-clinic-management-system"),hasTooltip:l!=="on",hasUrl:l!=="on"?"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/core-concepts/custom-fields/":"",type:"text",isDisable:!1,error:k.label,value:we.value??"",onChange:we.onChange,className:"form-control"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Input Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"type",control:y,rules:{required:r("Input Type is required","kivicare-clinic-management-system")},render:({field:we})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:we.value?JSON.stringify(we.value):"",onChange:Ee=>{const Qe=U.find(nt=>JSON.stringify(nt)===Ee.target.value);we.onChange(Qe||null)},children:[i.jsx("option",{value:"",children:r("Select Input Type","kivicare-clinic-management-system")}),U.map(Ee=>i.jsx("option",{value:JSON.stringify(Ee),children:Ee.label},Ee.value))]}),we.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>we.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.type&&i.jsx("span",{className:"text-danger p",children:k.type.message})]})}),Y?.value&&Y.value!=="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(Ne,{name:"placeholder",control:y,render:({field:we})=>i.jsx(Qt,{placeholder:r('eg "Enter placeholder" ',"kivicare-clinic-management-system"),required:!1,label:r("Placeholder","kivicare-clinic-management-system"),type:"text",isDisable:!1,error:k.placeholder,value:we.value??"",onChange:we.onChange,className:"form-control"})})})}),Y?.value&&Y.value==="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"file_types",control:y,rules:{validate:we=>Y?.value==="file_upload"&&(!we||we.length===0)?r("File types are required for file upload","kivicare-clinic-management-system"):!0},render:({field:we})=>i.jsx(ct,{isMulti:!0,className:"w-100",placeholder:r("Select file types","kivicare-clinic-management-system"),options:ex,getOptionLabel:Ee=>Ee.text,getOptionValue:Ee=>Ee.id,value:we.value||[],onChange:we.onChange,isClearable:!0,styles:{menuPortal:Ee=>({...Ee,zIndex:9999})}})}),k.file_types&&i.jsx("span",{className:"text-danger p",children:k.file_types.message})]})}),Y?.value&&["select","multi_select","radio","checkbox"].includes(Y.value)&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Options","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"options",control:y,rules:{validate:we=>Y?.value&&["select","multi_select","radio","checkbox"].includes(Y.value)&&(!we||we.length===0)?r("Options are required for this input type","kivicare-clinic-management-system"):!0},render:({field:we})=>i.jsx(Xc,{isMulti:!0,className:"w-100",placeholder:r("Type and press enter to add","kivicare-clinic-management-system"),value:we.value||[],onChange:we.onChange,onCreateOption:Ee=>{const Qe={label:Ee,value:Ee};W(nt=>[...nt,Qe]),we.onChange([...we.value||[],Qe])},options:[...ie,...we.value||[]],isClearable:!0})}),k.options&&i.jsx("span",{className:"text-danger p",children:k.options.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"status",control:y,rules:{required:r("Status is required","kivicare-clinic-management-system")},render:({field:we})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:we.value?JSON.stringify(we.value):"",onChange:Ee=>{const Qe=me.find(nt=>JSON.stringify(nt)===Ee.target.value);we.onChange(Qe||null)},children:[i.jsx("option",{value:"",children:r("Select Status","kivicare-clinic-management-system")}),me.map(Ee=>i.jsx("option",{value:JSON.stringify(Ee),children:Ee.label},Ee.id))]}),we.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>we.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.status&&i.jsx("span",{className:"text-danger p",children:k.status.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Validation","kivicare-clinic-management-system")," "]}),i.jsx(Ne,{name:"isRequired",control:y,render:({field:we})=>i.jsx("div",{className:"bg-body px-3 py-2 rounded",children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"mandatory-field",checked:!!we.value,onChange:we.onChange}),i.jsx("label",{htmlFor:"mandatory-field",className:"form-check-label",children:r("Mandatory field","kivicare-clinic-management-system")})]})})}),k.isRequired&&i.jsx("span",{className:"text-danger p",children:k.isRequired.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P,children:P?h?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):h?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})]})]}),i.jsx(Lr,{show:d,onHide:()=>m(!1),onDataRefresh:tt,context:"custom-fields"})]})},Lie=()=>i.jsx("div",{className:"custom-form-preview-skeleton p-3",children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"90px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"110px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"130px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex gap-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(C,{width:"60px",height:"1rem"})]})]})]})})]})}),$ie=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(1),[a]=f.useState(10),[l,o]=f.useState(!1),[c,d]=f.useState(null),{hasCapability:m,isAddonActive:u}=ut(),p=u("kiviPro"),{data:h}=_n(),g=h?.data?.hideUtilityLinks,{data:x,isLoading:v,error:y}=_J({page:n,limit:a,search:t||void 0},{enabled:p}),b=AJ(),k=DJ(),w=x?.pagination||{total:0,lastPage:1,perPage:a,currentPage:n},S=x?.data?.forms?.map(A=>({id:A.id,name:A.name?.text||A.name,type:A.moduleType?.label,status:A.status.label,statusValue:A.status.value,statusClass:A.status.value==="active"?"bg-success-subtle":"bg-danger-subtle",hasView:!0}))||[],j=Ln(),T=[j.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system")}),j.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system")}),j.accessor("type",{header:()=>r("Type","kivicare-clinic-management-system")}),j.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:A=>{const P=A.row.original.id,E=A.row.original.statusValue,M=A.getValue(),R=E==="active",O=L=>{const q=L?1:0;k.mutate({id:P,status:q},{onSuccess:()=>{Te.success(r("Form status has been updated.","kivicare-clinic-management-system"))},onError:()=>{Te.error(r("Failed to update form status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(on,{checked:R,onChange:O,disabled:k.isLoading,className:"m-0"}),i.jsx("span",{className:`badge ${A.row.original.statusClass}`,children:M})]})}}),...m("custom_form_view")||m("custom_form_edit")||m("custom_form_delete")?[j.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:A=>i.jsx(N,{hasView:A.row.original.hasView,id:A.row.original.id})})]:[]],N=({hasView:A,id:P})=>{const E=()=>{d(P),o(!0)},M=()=>{Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system")}).then(R=>{R.isConfirmed&&b.mutate(P,{onSuccess:()=>{Xe.fire(r("Deleted!","kivicare-clinic-management-system"),r("Your form has been deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{Xe.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to delete the form.","kivicare-clinic-management-system"),"error")}})})};return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[A&&m("custom_form_view")&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("View","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",onClick:E,className:"btn btn-link p-0 d-inline-block",children:i.jsx("span",{className:"text-gray fs-5",children:i.jsx("i",{className:"ph ph-eye"})})})}),m("custom_form_edit")&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`edit/${P}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),m("custom_form_delete")&&i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Delete","kivicare-clinic-management-system")}),children:i.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),M()},className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})},_=A=>{e(A.target.value),s(1)};return y?i.jsx("div",{className:"alert alert-danger",children:r("Failed to load custom forms","kivicare-clinic-management-system")}):i.jsxs("div",{children:[i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-forms-setting${p?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Custom Form List","kivicare-clinic-management-system")," ",g!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-form-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",value:t,onChange:_})]})}),m("custom_form_add")&&i.jsxs(ht,{to:"add/",className:`btn btn-primary d-flex align-items-center gap-2 ${p?"":"disabled"}`,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Form","kivicare-clinic-management-system")})]})]}),!p&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:S,columns:T,currentPage:w.currentPage,perPage:w.perPage,totalItems:w.total,lastPage:w.lastPage,enableSelection:!1,isLoading:v,onPageChange:s})})]})}),i.jsx(Bie,{show:l,onHide:()=>o(!1),formId:c})]})},Bie=({show:t,onHide:e,formId:n})=>{const{data:s,isLoading:a}=ZR(n,{enabled:!!n}),l=s?.data;return i.jsxs(lt,{show:t,onHide:e,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsxs(lt.Title,{children:[r("Form Preview","kivicare-clinic-management-system")," - ",l?.name?.text||l?.name]})}),i.jsx(lt.Body,{children:a?i.jsx(Lie,{}):i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Wa,{fields:l?.fields||[],data:{},readOnly:!1,formId:`preview_form_${n}`}),l?.fields?.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:r("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:r("Close Preview","kivicare-clinic-management-system")})})]})};function qie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rd(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Dk(t){return"nodeType"in t}function Xi(t){var e,n;return t?rd(t)?t:Dk(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Rk(t){const{Document:e}=Xi(t);return t instanceof e}function du(t){return rd(t)?!1:t instanceof Xi(t).HTMLElement}function SP(t){return t instanceof Xi(t).SVGElement}function ld(t){return t?rd(t)?t.document:Dk(t)?Rk(t)?t:du(t)||SP(t)?t.ownerDocument:document:document:document}const fa=cf?f.useLayoutEffect:f.useEffect;function df(t){const e=f.useRef(t);return fa(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function Hie(){const t=f.useRef(null),e=f.useCallback((s,a)=>{t.current=setInterval(s,a)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Rm(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return fa(()=>{n.current!==t&&(n.current=t)},e),n}function mu(t,e){const n=f.useRef();return f.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function ng(t){const e=df(t),n=f.useRef(null),s=f.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,s]}function ig(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let nx={};function uu(t,e){return f.useMemo(()=>{if(e)return e;const n=nx[t]==null?0:nx[t]+1;return nx[t]=n,t+"-"+n},[t,e])}function _P(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((l,o)=>{const c=Object.entries(o);for(const[d,m]of c){const u=l[d];u!=null&&(l[d]=u+t*m)}return l},{...e})}}const wc=_P(1),sg=_P(-1);function zie(t){return"clientX"in t&&"clientY"in t}function mf(t){if(!t)return!1;const{KeyboardEvent:e}=Xi(t.target);return e&&t instanceof e}function Vie(t){if(!t)return!1;const{TouchEvent:e}=Xi(t.target);return e&&t instanceof e}function ag(t){if(Vie(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return zie(t)?{x:t.clientX,y:t.clientY}:null}const Ka=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ka.Translate.toString(t),Ka.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),TC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Uie(t){return t.matches(TC)?t:t.querySelector(TC)}const Wie={display:"none"};function Kie(t){let{id:e,value:n}=t;return ze.createElement("div",{id:e,style:Wie},n)}function Gie(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ze.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function Yie(){const[t,e]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const EP=f.createContext(null);function Qie(t){const e=f.useContext(EP);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Zie(){const[t]=f.useState(()=>new Set),e=f.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[f.useCallback(s=>{let{type:a,event:l}=s;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,l)})},[t]),e]}const Xie={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Jie={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ese(t){let{announcements:e=Jie,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=Xie}=t;const{announce:l,announcement:o}=Yie(),c=uu("DndLiveRegion"),[d,m]=f.useState(!1);if(f.useEffect(()=>{m(!0)},[]),Qie(f.useMemo(()=>({onDragStart(p){let{active:h}=p;l(e.onDragStart({active:h}))},onDragMove(p){let{active:h,over:g}=p;e.onDragMove&&l(e.onDragMove({active:h,over:g}))},onDragOver(p){let{active:h,over:g}=p;l(e.onDragOver({active:h,over:g}))},onDragEnd(p){let{active:h,over:g}=p;l(e.onDragEnd({active:h,over:g}))},onDragCancel(p){let{active:h,over:g}=p;l(e.onDragCancel({active:h,over:g}))}}),[l,e])),!d)return null;const u=ze.createElement(ze.Fragment,null,ze.createElement(Kie,{id:s,value:a.draggable}),ze.createElement(Gie,{id:c,announcement:o}));return n?Ia.createPortal(u,n):u}var ui;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ui||(ui={}));function rg(){}function Yh(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function TP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const va=Object.freeze({x:0,y:0});function tse(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function nse(t,e){const n=ag(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function ise(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function sse(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function ase(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function AC(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const AP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=AC(e,e.left,e.top),l=[];for(const o of s){const{id:c}=o,d=n.get(c);if(d){const m=tse(AC(d),a);l.push({id:c,data:{droppableContainer:o,value:m}})}}return l.sort(ise)};function rse(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),l=Math.min(e.top+e.height,t.top+t.height),o=a-s,c=l-n;if(s<a&&n<l){const d=e.width*e.height,m=t.width*t.height,u=o*c,p=u/(d+m-u);return Number(p.toFixed(4))}return 0}const DP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=rse(c,e);d>0&&a.push({id:o,data:{droppableContainer:l,value:d}})}}return a.sort(sse)};function lse(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function RP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:va}function ose(t){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const cse=ose(1);function PP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function dse(t,e,n){const s=PP(e);if(!s)return t;const{scaleX:a,scaleY:l,x:o,y:c}=s,d=t.left-o-(1-a)*parseFloat(n),m=t.top-c-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?t.width/a:t.width,p=l?t.height/l:t.height;return{width:u,height:p,top:m,right:d+u,bottom:m+p,left:d}}const mse={ignoreTransform:!1};function od(t,e){e===void 0&&(e=mse);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=Xi(t).getComputedStyle(t);m&&(n=dse(n,m,u))}const{top:s,left:a,width:l,height:o,bottom:c,right:d}=n;return{top:s,left:a,width:l,height:o,bottom:c,right:d}}function DC(t){return od(t,{ignoreTransform:!0})}function use(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function hse(t,e){return e===void 0&&(e=Xi(t).getComputedStyle(t)),e.position==="fixed"}function pse(t,e){e===void 0&&(e=Xi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?n.test(l):!1})}function Pk(t,e){const n=[];function s(a){if(e!=null&&n.length>=e||!a)return n;if(Rk(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!du(a)||SP(a)||n.includes(a))return n;const l=Xi(t).getComputedStyle(a);return a!==t&&pse(a,l)&&n.push(a),hse(a,l)?n:s(a.parentNode)}return t?s(t):n}function MP(t){const[e]=Pk(t,1);return e??null}function ix(t){return!cf||!t?null:rd(t)?t:Dk(t)?Rk(t)||t===ld(t).scrollingElement?window:du(t)?t:null:null}function IP(t){return rd(t)?t.scrollX:t.scrollLeft}function OP(t){return rd(t)?t.scrollY:t.scrollTop}function qy(t){return{x:IP(t),y:OP(t)}}var fi;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(fi||(fi={}));function FP(t){return!cf||!t?!1:t===document.scrollingElement}function LP(t){const e={x:0,y:0},n=FP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,l=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,c=t.scrollLeft>=s.x;return{isTop:a,isLeft:l,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const gse={x:.2,y:.2};function fse(t,e,n,s,a){let{top:l,left:o,right:c,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=gse);const{isTop:m,isBottom:u,isLeft:p,isRight:h}=LP(t),g={x:0,y:0},x={x:0,y:0},v={height:e.height*a.y,width:e.width*a.x};return!m&&l<=e.top+v.height?(g.y=fi.Backward,x.y=s*Math.abs((e.top+v.height-l)/v.height)):!u&&d>=e.bottom-v.height&&(g.y=fi.Forward,x.y=s*Math.abs((e.bottom-v.height-d)/v.height)),!h&&c>=e.right-v.width?(g.x=fi.Forward,x.x=s*Math.abs((e.right-v.width-c)/v.width)):!p&&o<=e.left+v.width&&(g.x=fi.Backward,x.x=s*Math.abs((e.left+v.width-o)/v.width)),{direction:g,speed:x}}function vse(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:o}=window;return{top:0,left:0,right:l,bottom:o,width:l,height:o}}const{top:e,left:n,right:s,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:a,width:t.clientWidth,height:t.clientHeight}}function $P(t){return t.reduce((e,n)=>wc(e,qy(n)),va)}function xse(t){return t.reduce((e,n)=>e+IP(n),0)}function yse(t){return t.reduce((e,n)=>e+OP(n),0)}function BP(t,e){if(e===void 0&&(e=od),!t)return;const{top:n,left:s,bottom:a,right:l}=e(t);MP(t)&&(a<=0||l<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const bse=[["x",["left","right"],xse],["y",["top","bottom"],yse]];class Mk{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Pk(n),a=$P(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,o,c]of bse)for(const d of o)Object.defineProperty(this,d,{get:()=>{const m=c(s),u=a[l]-m;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var a;(a=this.target)==null||a.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function wse(t){const{EventTarget:e}=Xi(t);return t instanceof e?t:ld(t)}function sx(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ls;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ls||(Ls={}));function RC(t){t.preventDefault()}function kse(t){t.stopPropagation()}var vn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(vn||(vn={}));const qP={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},jse=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case vn.Right:return{...n,x:n.x+25};case vn.Left:return{...n,x:n.x-25};case vn.Down:return{...n,y:n.y+25};case vn.Up:return{...n,y:n.y-25}}};class Ik{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new lm(ld(n)),this.windowListeners=new lm(Xi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ls.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&BP(s),n(va)}handleKeyDown(e){if(mf(e)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:l=qP,coordinateGetter:o=jse,scrollBehavior:c="smooth"}=a,{code:d}=e;if(l.end.includes(d)){this.handleEnd(e);return}if(l.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=s.current,u=m?{x:m.left,y:m.top}:va;this.referenceCoordinates||(this.referenceCoordinates=u);const p=o(e,{active:n,context:s.current,currentCoordinates:u});if(p){const h=sg(p,u),g={x:0,y:0},{scrollableAncestors:x}=s.current;for(const v of x){const y=e.code,{isTop:b,isRight:k,isLeft:w,isBottom:S,maxScroll:j,minScroll:T}=LP(v),N=vse(v),_={x:Math.min(y===vn.Right?N.right-N.width/2:N.right,Math.max(y===vn.Right?N.left:N.left+N.width/2,p.x)),y:Math.min(y===vn.Down?N.bottom-N.height/2:N.bottom,Math.max(y===vn.Down?N.top:N.top+N.height/2,p.y))},A=y===vn.Right&&!k||y===vn.Left&&!w,P=y===vn.Down&&!S||y===vn.Up&&!b;if(A&&_.x!==p.x){const E=v.scrollLeft+h.x,M=y===vn.Right&&E<=j.x||y===vn.Left&&E>=T.x;if(M&&!h.y){v.scrollTo({left:E,behavior:c});return}M?g.x=v.scrollLeft-E:g.x=y===vn.Right?v.scrollLeft-j.x:v.scrollLeft-T.x,g.x&&v.scrollBy({left:-g.x,behavior:c});break}else if(P&&_.y!==p.y){const E=v.scrollTop+h.y,M=y===vn.Down&&E<=j.y||y===vn.Up&&E>=T.y;if(M&&!h.x){v.scrollTo({top:E,behavior:c});return}M?g.y=v.scrollTop-E:g.y=y===vn.Down?v.scrollTop-j.y:v.scrollTop-T.y,g.y&&v.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,wc(sg(p,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ik.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=qP,onActivation:a}=e,{active:l}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const c=l.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function PC(t){return!!(t&&"distance"in t)}function MC(t){return!!(t&&"delay"in t)}class Ok{constructor(e,n,s){var a;s===void 0&&(s=wse(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:l}=e,{target:o}=l;this.props=e,this.events=n,this.document=ld(o),this.documentListeners=new lm(this.document),this.listeners=new lm(s),this.windowListeners=new lm(Xi(o)),this.initialCoordinates=(a=ag(l))!=null?a:va,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.DragStart,RC),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),this.windowListeners.add(Ls.ContextMenu,RC),this.documentListeners.add(Ls.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(MC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(PC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ls.Click,kse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ls.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:a,props:l}=this,{onMove:o,options:{activationConstraint:c}}=l;if(!a)return;const d=(n=ag(e))!=null?n:va,m=sg(a,d);if(!s&&c){if(PC(c)){if(c.tolerance!=null&&sx(m,c.tolerance))return this.handleCancel();if(sx(m,c.distance))return this.handleStart()}if(MC(c)&&sx(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Nse={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Fk extends Ok{constructor(e){const{event:n}=e,s=ld(n.target);super(e,Nse,s)}}Fk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Cse={move:{name:"mousemove"},end:{name:"mouseup"}};var Hy;(function(t){t[t.RightClick=2]="RightClick"})(Hy||(Hy={}));class HP extends Ok{constructor(e){super(e,Cse,ld(e.event.target))}}HP.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Hy.RightClick?!1:(s?.({event:n}),!0)}}];const ax={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zP extends Ok{constructor(e){super(e,ax)}static setup(){return window.addEventListener(ax.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ax.move.name,e)};function e(){}}}zP.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:a}=n;return a.length>1?!1:(s?.({event:n}),!0)}}];var om;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(om||(om={}));var lg;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(lg||(lg={}));function Sse(t){let{acceleration:e,activator:n=om.Pointer,canScroll:s,draggingRect:a,enabled:l,interval:o=5,order:c=lg.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:p,threshold:h}=t;const g=Ese({delta:p,disabled:!l}),[x,v]=Hie(),y=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),k=f.useMemo(()=>{switch(n){case om.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case om.DraggableRect:return a}},[n,a,d]),w=f.useRef(null),S=f.useCallback(()=>{const T=w.current;if(!T)return;const N=y.current.x*b.current.x,_=y.current.y*b.current.y;T.scrollBy(N,_)},[]),j=f.useMemo(()=>c===lg.TreeOrder?[...m].reverse():m,[c,m]);f.useEffect(()=>{if(!l||!m.length||!k){v();return}for(const T of j){if(s?.(T)===!1)continue;const N=m.indexOf(T),_=u[N];if(!_)continue;const{direction:A,speed:P}=fse(T,_,k,e,h);for(const E of["x","y"])g[E][A[E]]||(P[E]=0,A[E]=0);if(P.x>0||P.y>0){v(),w.current=T,x(S,o),y.current=P,b.current=A;return}}y.current={x:0,y:0},b.current={x:0,y:0},v()},[e,S,s,v,l,o,JSON.stringify(k),JSON.stringify(g),x,m,j,u,JSON.stringify(h)])}const _se={x:{[fi.Backward]:!1,[fi.Forward]:!1},y:{[fi.Backward]:!1,[fi.Forward]:!1}};function Ese(t){let{delta:e,disabled:n}=t;const s=ig(e);return mu(a=>{if(n||!s||!a)return _se;const l={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[fi.Backward]:a.x[fi.Backward]||l.x===-1,[fi.Forward]:a.x[fi.Forward]||l.x===1},y:{[fi.Backward]:a.y[fi.Backward]||l.y===-1,[fi.Forward]:a.y[fi.Forward]||l.y===1}}},[n,e,s])}function Tse(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return mu(a=>{var l;return e==null?null:(l=s??a)!=null?l:null},[s,e])}function Ase(t,e){return f.useMemo(()=>t.reduce((n,s)=>{const{sensor:a}=s,l=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...l]},[]),[t,e])}var Pm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pm||(Pm={}));var zy;(function(t){t.Optimized="optimized"})(zy||(zy={}));const IC=new Map;function Dse(t,e){let{dragging:n,dependencies:s,config:a}=e;const[l,o]=f.useState(null),{frequency:c,measure:d,strategy:m}=a,u=f.useRef(t),p=y(),h=Rm(p),g=f.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(k=>k===null?b:k.concat(b.filter(w=>!k.includes(w))))},[h]),x=f.useRef(null),v=mu(b=>{if(p&&!n)return IC;if(!b||b===IC||u.current!==t||l!=null){const k=new Map;for(let w of t){if(!w)continue;if(l&&l.length>0&&!l.includes(w.id)&&w.rect.current){k.set(w.id,w.rect.current);continue}const S=w.node.current,j=S?new Mk(d(S),S):null;w.rect.current=j,j&&k.set(w.id,j)}return k}return b},[t,l,n,p,d]);return f.useEffect(()=>{u.current=t},[t]),f.useEffect(()=>{p||g()},[n,p]),f.useEffect(()=>{l&&l.length>0&&o(null)},[JSON.stringify(l)]),f.useEffect(()=>{p||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},c))},[c,p,g,...s]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:l!=null};function y(){switch(m){case Pm.Always:return!1;case Pm.BeforeDragging:return n;default:return!n}}}function Lk(t,e){return mu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Rse(t,e){return Lk(t,e)}function Pse(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(s)},[s,n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function uf(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(s)},[n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function Mse(t){return new Mk(od(t),t)}function OC(t,e,n){e===void 0&&(e=Mse);const[s,a]=f.useState(null);function l(){a(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const u=e(t);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=Pse({callback(d){if(t)for(const m of d){const{type:u,target:p}=m;if(u==="childList"&&p instanceof HTMLElement&&p.contains(t)){l();break}}}}),c=uf({callback:l});return fa(()=>{l(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),s}function Ise(t){const e=Lk(t);return RP(t,e)}const FC=[];function Ose(t){const e=f.useRef(t),n=mu(s=>t?s&&s!==FC&&t&&e.current&&t.parentNode===e.current.parentNode?s:Pk(t):FC,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function Fse(t){const[e,n]=f.useState(null),s=f.useRef(t),a=f.useCallback(l=>{const o=ix(l.target);o&&n(c=>c?(c.set(o,qy(o)),new Map(c)):null)},[]);return f.useEffect(()=>{const l=s.current;if(t!==l){o(l);const c=t.map(d=>{const m=ix(d);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,qy(m)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=t}return()=>{o(t),o(l)};function o(c){c.forEach(d=>{const m=ix(d);m?.removeEventListener("scroll",a)})}},[a,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((l,o)=>wc(l,o),va):$P(t):va,[t,e])}function LC(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const s=t!==va;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?sg(t,n.current):va}function Lse(t){f.useEffect(()=>{if(!cf)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function $se(t,e){return f.useMemo(()=>t.reduce((n,s)=>{let{eventName:a,handler:l}=s;return n[a]=o=>{l(o,e)},n},{}),[t,e])}function VP(t){return f.useMemo(()=>t?use(t):null,[t])}const $C=[];function Bse(t,e){e===void 0&&(e=od);const[n]=t,s=VP(n?Xi(n):null),[a,l]=f.useState($C);function o(){l(()=>t.length?t.map(d=>FP(d)?s:new Mk(e(d),d)):$C)}const c=uf({callback:o});return fa(()=>{c?.disconnect(),o(),t.forEach(d=>c?.observe(d))},[t]),a}function UP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return du(e)?e:t}function qse(t){let{measure:e}=t;const[n,s]=f.useState(null),a=f.useCallback(m=>{for(const{target:u}of m)if(du(u)){s(p=>{const h=e(u);return p?{...p,width:h.width,height:h.height}:h});break}},[e]),l=uf({callback:a}),o=f.useCallback(m=>{const u=UP(m);l?.disconnect(),u&&l?.observe(u),s(u?e(u):null)},[e,l]),[c,d]=ng(o);return f.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Hse=[{sensor:Fk,options:{}},{sensor:Ik,options:{}}],zse={current:{}},Qh={draggable:{measure:DC},droppable:{measure:DC,strategy:Pm.WhileDragging,frequency:zy.Optimized},dragOverlay:{measure:od}};class cm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Vse={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qh,measureDroppableContainers:rg,windowRect:null,measuringScheduled:!1},WP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rg,draggableNodes:new Map,over:null,measureDroppableContainers:rg},hu=f.createContext(WP),KP=f.createContext(Vse);function Use(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new cm}}}function Wse(t,e){switch(e.type){case ui.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ui.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ui.DragEnd:case ui.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ui.RegisterDroppable:{const{element:n}=e,{id:s}=n,a=new cm(t.droppable.containers);return a.set(s,n),{...t,droppable:{...t.droppable,containers:a}}}case ui.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=e,l=t.droppable.containers.get(n);if(!l||s!==l.key)return t;const o=new cm(t.droppable.containers);return o.set(n,{...l,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case ui.UnregisterDroppable:{const{id:n,key:s}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const l=new cm(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function Kse(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:a}=f.useContext(hu),l=ig(s),o=ig(n?.id);return f.useEffect(()=>{if(!e&&!s&&l&&o!=null){if(!mf(l)||document.activeElement===l.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:m}=c;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const p=Uie(u);if(p){p.focus();break}}})}},[s,e,a,o,l]),null}function GP(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((a,l)=>l({transform:a,...s}),n):n}function Gse(t){return f.useMemo(()=>({draggable:{...Qh.draggable,...t?.draggable},droppable:{...Qh.droppable,...t?.droppable},dragOverlay:{...Qh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Yse(t){let{activeNode:e,measure:n,initialRect:s,config:a=!0}=t;const l=f.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;fa(()=>{if(!o&&!c||!e){l.current=!1;return}if(l.current||!s)return;const m=e?.node.current;if(!m||m.isConnected===!1)return;const u=n(m),p=RP(u,s);if(o||(p.x=0),c||(p.y=0),l.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=MP(m);h&&h.scrollBy({top:p.y,left:p.x})}},[e,o,c,s,n])}const hf=f.createContext({...va,scaleX:1,scaleY:1});var Kr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Kr||(Kr={}));const $k=f.memo(function(e){var n,s,a,l;let{id:o,accessibility:c,autoScroll:d=!0,children:m,sensors:u=Hse,collisionDetection:p=DP,measuring:h,modifiers:g,...x}=e;const v=f.useReducer(Wse,void 0,Use),[y,b]=v,[k,w]=Zie(),[S,j]=f.useState(Kr.Uninitialized),T=S===Kr.Initialized,{draggable:{active:N,nodes:_,translate:A},droppable:{containers:P}}=y,E=N!=null?_.get(N):null,M=f.useRef({initial:null,translated:null}),R=f.useMemo(()=>{var Ae;return N!=null?{id:N,data:(Ae=E?.data)!=null?Ae:zse,rect:M}:null},[N,E]),O=f.useRef(null),[L,q]=f.useState(null),[Q,V]=f.useState(null),se=Rm(x,Object.values(x)),G=uu("DndDescribedBy",o),ge=f.useMemo(()=>P.getEnabled(),[P]),ie=Gse(h),{droppableRects:W,measureDroppableContainers:X,measuringScheduled:J}=Dse(ge,{dragging:T,dependencies:[A.x,A.y],config:ie.droppable}),ue=Tse(_,N),le=f.useMemo(()=>Q?ag(Q):null,[Q]),I=xt(),ee=Rse(ue,ie.draggable.measure);Yse({activeNode:N!=null?_.get(N):null,config:I.layoutShiftCompensation,initialRect:ee,measure:ie.draggable.measure});const K=OC(ue,ie.draggable.measure,ee),ne=OC(ue?ue.parentElement:null),oe=f.useRef({activatorEvent:null,active:null,activeNode:ue,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),D=P.getNodeFor((n=oe.current.over)==null?void 0:n.id),$=qse({measure:ie.dragOverlay.measure}),te=(s=$.nodeRef.current)!=null?s:ue,ae=T?(a=$.rect)!=null?a:K:null,Y=!!($.nodeRef.current&&$.rect),H=Ise(Y?null:K),B=VP(te?Xi(te):null),re=Ose(T?D??ue:null),de=Bse(re),xe=GP(g,{transform:{x:A.x-H.x,y:A.y-H.y,scaleX:1,scaleY:1},activatorEvent:Q,active:R,activeNodeRect:K,containerNodeRect:ne,draggingNodeRect:ae,over:oe.current.over,overlayNodeRect:$.rect,scrollableAncestors:re,scrollableAncestorRects:de,windowRect:B}),U=le?wc(le,A):null,me=Fse(re),ye=LC(me),pe=LC(me,[K]),Ce=wc(xe,ye),Ge=ae?cse(ae,xe):null,De=R&&Ge?p({active:R,collisionRect:Ge,droppableRects:W,droppableContainers:ge,pointerCoordinates:U}):null,$e=ase(De,"id"),[et,tt]=f.useState(null),qe=Y?xe:wc(xe,pe),we=lse(qe,(l=et?.rect)!=null?l:null,K),Ee=f.useRef(null),Qe=f.useCallback((Ae,Oe)=>{let{sensor:z,options:Z}=Oe;if(O.current==null)return;const fe=_.get(O.current);if(!fe)return;const _e=Ae.nativeEvent,Ke=new z({active:O.current,activeNode:fe,event:_e,options:Z,context:oe,onAbort(at){if(!_.get(at))return;const{onDragAbort:Nt}=se.current,dt={id:at};Nt?.(dt),k({type:"onDragAbort",event:dt})},onPending(at,ot,Nt,dt){if(!_.get(at))return;const{onDragPending:Ut}=se.current,be={id:at,constraint:ot,initialCoordinates:Nt,offset:dt};Ut?.(be),k({type:"onDragPending",event:be})},onStart(at){const ot=O.current;if(ot==null)return;const Nt=_.get(ot);if(!Nt)return;const{onDragStart:dt}=se.current,jt={activatorEvent:_e,active:{id:ot,data:Nt.data,rect:M}};Ia.unstable_batchedUpdates(()=>{dt?.(jt),j(Kr.Initializing),b({type:ui.DragStart,initialCoordinates:at,active:ot}),k({type:"onDragStart",event:jt}),q(Ee.current),V(_e)})},onMove(at){b({type:ui.DragMove,coordinates:at})},onEnd:it(ui.DragEnd),onCancel:it(ui.DragCancel)});Ee.current=Ke;function it(at){return async function(){const{active:Nt,collisions:dt,over:jt,scrollAdjustedTranslate:Ut}=oe.current;let be=null;if(Nt&&Ut){const{cancelDrop:he}=se.current;be={activatorEvent:_e,active:Nt,collisions:dt,delta:Ut,over:jt},at===ui.DragEnd&&typeof he=="function"&&await Promise.resolve(he(be))&&(at=ui.DragCancel)}O.current=null,Ia.unstable_batchedUpdates(()=>{b({type:at}),j(Kr.Uninitialized),tt(null),q(null),V(null),Ee.current=null;const he=at===ui.DragEnd?"onDragEnd":"onDragCancel";if(be){const Re=se.current[he];Re?.(be),k({type:he,event:be})}})}}},[_]),nt=f.useCallback((Ae,Oe)=>(z,Z)=>{const fe=z.nativeEvent,_e=_.get(Z);if(O.current!==null||!_e||fe.dndKit||fe.defaultPrevented)return;const Ke={active:_e};Ae(z,Oe.options,Ke)===!0&&(fe.dndKit={capturedBy:Oe.sensor},O.current=Z,Qe(z,Oe))},[_,Qe]),Ht=Ase(u,nt);Lse(u),fa(()=>{K&&S===Kr.Initializing&&j(Kr.Initialized)},[K,S]),f.useEffect(()=>{const{onDragMove:Ae}=se.current,{active:Oe,activatorEvent:z,collisions:Z,over:fe}=oe.current;if(!Oe||!z)return;const _e={active:Oe,activatorEvent:z,collisions:Z,delta:{x:Ce.x,y:Ce.y},over:fe};Ia.unstable_batchedUpdates(()=>{Ae?.(_e),k({type:"onDragMove",event:_e})})},[Ce.x,Ce.y]),f.useEffect(()=>{const{active:Ae,activatorEvent:Oe,collisions:z,droppableContainers:Z,scrollAdjustedTranslate:fe}=oe.current;if(!Ae||O.current==null||!Oe||!fe)return;const{onDragOver:_e}=se.current,Ke=Z.get($e),it=Ke&&Ke.rect.current?{id:Ke.id,rect:Ke.rect.current,data:Ke.data,disabled:Ke.disabled}:null,at={active:Ae,activatorEvent:Oe,collisions:z,delta:{x:fe.x,y:fe.y},over:it};Ia.unstable_batchedUpdates(()=>{tt(it),_e?.(at),k({type:"onDragOver",event:at})})},[$e]),fa(()=>{oe.current={activatorEvent:Q,active:R,activeNode:ue,collisionRect:Ge,collisions:De,droppableRects:W,draggableNodes:_,draggingNode:te,draggingNodeRect:ae,droppableContainers:P,over:et,scrollableAncestors:re,scrollAdjustedTranslate:Ce},M.current={initial:ae,translated:Ge}},[R,ue,De,Ge,_,te,ae,W,P,et,re,Ce]),Sse({...I,delta:A,draggingRect:Ge,pointerCoordinates:U,scrollableAncestors:re,scrollableAncestorRects:de});const Lt=f.useMemo(()=>({active:R,activeNode:ue,activeNodeRect:K,activatorEvent:Q,collisions:De,containerNodeRect:ne,dragOverlay:$,draggableNodes:_,droppableContainers:P,droppableRects:W,over:et,measureDroppableContainers:X,scrollableAncestors:re,scrollableAncestorRects:de,measuringConfiguration:ie,measuringScheduled:J,windowRect:B}),[R,ue,K,Q,De,ne,$,_,P,W,et,X,re,de,ie,J,B]),Yt=f.useMemo(()=>({activatorEvent:Q,activators:Ht,active:R,activeNodeRect:K,ariaDescribedById:{draggable:G},dispatch:b,draggableNodes:_,over:et,measureDroppableContainers:X}),[Q,Ht,R,K,b,G,_,et,X]);return ze.createElement(EP.Provider,{value:w},ze.createElement(hu.Provider,{value:Yt},ze.createElement(KP.Provider,{value:Lt},ze.createElement(hf.Provider,{value:we},m)),ze.createElement(Kse,{disabled:c?.restoreFocus===!1})),ze.createElement(ese,{...c,hiddenTextDescribedById:G}));function xt(){const Ae=L?.autoScrollEnabled===!1,Oe=typeof d=="object"?d.enabled===!1:d===!1,z=T&&!Ae&&!Oe;return typeof d=="object"?{...d,enabled:z}:{enabled:z}}}),Qse=f.createContext(null),BC="button",Zse="Draggable";function Xse(t){let{id:e,data:n,disabled:s=!1,attributes:a}=t;const l=uu(Zse),{activators:o,activatorEvent:c,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:p,over:h}=f.useContext(hu),{role:g=BC,roleDescription:x="draggable",tabIndex:v=0}=a??{},y=d?.id===e,b=f.useContext(y?hf:Qse),[k,w]=ng(),[S,j]=ng(),T=$se(o,e),N=Rm(n);fa(()=>(p.set(e,{id:e,key:l,node:k,activatorNode:S,data:N}),()=>{const A=p.get(e);A&&A.key===l&&p.delete(e)}),[p,e]);const _=f.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":s,"aria-pressed":y&&g===BC?!0:void 0,"aria-roledescription":x,"aria-describedby":u.draggable}),[s,g,v,y,x,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:m,attributes:_,isDragging:y,listeners:s?void 0:T,node:k,over:h,setNodeRef:w,setActivatorNodeRef:j,transform:b}}function YP(){return f.useContext(KP)}const Jse="Droppable",eae={timeout:25};function tae(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:a}=t;const l=uu(Jse),{active:o,dispatch:c,over:d,measureDroppableContainers:m}=f.useContext(hu),u=f.useRef({disabled:n}),p=f.useRef(!1),h=f.useRef(null),g=f.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:y}={...eae,...a},b=Rm(v??s),k=f.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{m(Array.isArray(b.current)?b.current:[b.current]),g.current=null},y)},[y]),w=uf({callback:k,disabled:x||!o}),S=f.useCallback((_,A)=>{w&&(A&&(w.unobserve(A),p.current=!1),_&&w.observe(_))},[w]),[j,T]=ng(S),N=Rm(e);return f.useEffect(()=>{!w||!j.current||(w.disconnect(),p.current=!1,w.observe(j.current))},[j,w]),f.useEffect(()=>(c({type:ui.RegisterDroppable,element:{id:s,key:l,disabled:n,node:j,rect:h,data:N}}),()=>c({type:ui.UnregisterDroppable,key:l,id:s})),[s]),f.useEffect(()=>{n!==u.current.disabled&&(c({type:ui.SetDroppableDisabled,id:s,key:l,disabled:n}),u.current.disabled=n)},[s,l,n,c]),{active:o,rect:h,isOver:d?.id===s,node:j,over:d,setNodeRef:T}}function nae(t){let{animation:e,children:n}=t;const[s,a]=f.useState(null),[l,o]=f.useState(null),c=ig(n);return!n&&!s&&c&&a(c),fa(()=>{if(!l)return;const d=s?.key,m=s?.props.id;if(d==null||m==null){a(null);return}Promise.resolve(e(m,l)).then(()=>{a(null)})},[e,s,l]),ze.createElement(ze.Fragment,null,n,s?f.cloneElement(s,{ref:o}):null)}const iae={x:0,y:0,scaleX:1,scaleY:1};function sae(t){let{children:e}=t;return ze.createElement(hu.Provider,{value:WP},ze.createElement(hf.Provider,{value:iae},e))}const aae={position:"fixed",touchAction:"none"},rae=t=>mf(t)?"transform 250ms ease":void 0,lae=f.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:a,children:l,className:o,rect:c,style:d,transform:m,transition:u=rae}=t;if(!c)return null;const p=a?m:{...m,scaleX:1,scaleY:1},h={...aae,width:c.width,height:c.height,top:c.top,left:c.left,transform:Ka.Transform.toString(p),transformOrigin:a&&s?nse(s,c):void 0,transition:typeof u=="function"?u(s):u,...d};return ze.createElement(n,{className:o,style:h,ref:e},l)}),oae=t=>e=>{let{active:n,dragOverlay:s}=e;const a={},{styles:l,className:o}=t;if(l!=null&&l.active)for(const[c,d]of Object.entries(l.active))d!==void 0&&(a[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(l!=null&&l.dragOverlay)for(const[c,d]of Object.entries(l.dragOverlay))d!==void 0&&s.node.style.setProperty(c,d);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[d,m]of Object.entries(a))n.node.style.setProperty(d,m);o!=null&&o.active&&n.node.classList.remove(o.active)}},cae=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ka.Transform.toString(e)},{transform:Ka.Transform.toString(n)}]},dae={duration:250,easing:"ease",keyframes:cae,sideEffects:oae({styles:{active:{opacity:"0"}}})};function mae(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=t;return df((l,o)=>{if(e===null)return;const c=n.get(l);if(!c)return;const d=c.node.current;if(!d)return;const m=UP(o);if(!m)return;const{transform:u}=Xi(o).getComputedStyle(o),p=PP(u);if(!p)return;const h=typeof e=="function"?e:uae(e);return BP(d,a.draggable.measure),h({active:{id:l,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:a,transform:p})})}function uae(t){const{duration:e,easing:n,sideEffects:s,keyframes:a}={...dae,...t};return l=>{let{active:o,dragOverlay:c,transform:d,...m}=l;if(!e)return;const u={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},h={x:d.x-u.x,y:d.y-u.y,...p},g=a({...m,active:o,dragOverlay:c,transform:{initial:d,final:h}}),[x]=g,v=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(v))return;const y=s?.({active:o,dragOverlay:c,...m}),b=c.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(k=>{b.onfinish=()=>{y?.(),k()}})}}let qC=0;function hae(t){return f.useMemo(()=>{if(t!=null)return qC++,qC},[t])}const QP=ze.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:a,transition:l,modifiers:o,wrapperElement:c="div",className:d,zIndex:m=999}=t;const{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggableNodes:x,droppableContainers:v,dragOverlay:y,over:b,measuringConfiguration:k,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:j}=YP(),T=f.useContext(hf),N=hae(p?.id),_=GP(o,{activatorEvent:u,active:p,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:T,windowRect:j}),A=Lk(h),P=mae({config:s,draggableNodes:x,droppableContainers:v,measuringConfiguration:k}),E=A?y.setRef:void 0;return ze.createElement(sae,null,ze.createElement(nae,{animation:P},p&&N?ze.createElement(lae,{key:N,id:p.id,ref:E,as:c,activatorEvent:u,adjustScale:e,className:d,transition:l,rect:A,style:{zIndex:m,...a},transform:_},n):null))});function pf(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function pae(t,e){return t.reduce((n,s,a)=>{const l=e.get(s);return l&&(n[a]=l),n},Array(t.length))}function fh(t){return t!==null&&t>=0}function gae(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function fae(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Bk=t=>{let{rects:e,activeIndex:n,overIndex:s,index:a}=t;const l=pf(e,s,n),o=e[a],c=l[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},vh={scaleX:1,scaleY:1},ZP=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:a,rects:l,overIndex:o}=t;const c=(e=l[n])!=null?e:s;if(!c)return null;if(a===n){const m=l[o];return m?{x:0,y:n<o?m.top+m.height-(c.top+c.height):m.top-c.top,...vh}:null}const d=vae(l,a,n);return a>n&&a<=o?{x:0,y:-c.height-d,...vh}:a<n&&a>=o?{x:0,y:c.height+d,...vh}:{x:0,y:0,...vh}};function vae(t,e,n){const s=t[e],a=t[e-1],l=t[e+1];return s?n<e?a?s.top-(a.top+a.height):l?l.top-(s.top+s.height):0:l?l.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const XP="Sortable",JP=ze.createContext({activeIndex:-1,containerId:XP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bk,disabled:{draggable:!1,droppable:!1}});function qk(t){let{children:e,id:n,items:s,strategy:a=Bk,disabled:l=!1}=t;const{active:o,dragOverlay:c,droppableRects:d,over:m,measureDroppableContainers:u}=YP(),p=uu(XP,n),h=c.rect!==null,g=f.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),x=o!=null,v=o?g.indexOf(o.id):-1,y=m?g.indexOf(m.id):-1,b=f.useRef(g),k=!gae(g,b.current),w=y!==-1&&v===-1||k,S=fae(l);fa(()=>{k&&x&&u(g)},[k,g,x,u]),f.useEffect(()=>{b.current=g},[g]);const j=f.useMemo(()=>({activeIndex:v,containerId:p,disabled:S,disableTransforms:w,items:g,overIndex:y,useDragOverlay:h,sortedRects:pae(g,d),strategy:a}),[v,p,S.draggable,S.droppable,w,g,y,d,h,a]);return ze.createElement(JP.Provider,{value:j},e)}const xae=t=>{let{id:e,items:n,activeIndex:s,overIndex:a}=t;return pf(n,s,a).indexOf(e)},yae=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:a,items:l,newIndex:o,previousItems:c,previousContainerId:d,transition:m}=t;return!m||!s||c!==l&&a===o?!1:n?!0:o!==a&&e===d},bae={duration:200,easing:"ease"},eM="transform",wae=Ka.Transition.toString({property:eM,duration:0,easing:"linear"}),kae={roleDescription:"sortable"};function jae(t){let{disabled:e,index:n,node:s,rect:a}=t;const[l,o]=f.useState(null),c=f.useRef(n);return fa(()=>{if(!e&&n!==c.current&&s.current){const d=a.current;if(d){const m=od(s.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&o(u)}}n!==c.current&&(c.current=n)},[e,n,s,a]),f.useEffect(()=>{l&&o(null)},[l]),l}function Hk(t){let{animateLayoutChanges:e=yae,attributes:n,disabled:s,data:a,getNewIndex:l=xae,id:o,strategy:c,resizeObserverConfig:d,transition:m=bae}=t;const{items:u,containerId:p,activeIndex:h,disabled:g,disableTransforms:x,sortedRects:v,overIndex:y,useDragOverlay:b,strategy:k}=f.useContext(JP),w=Nae(s,g),S=u.indexOf(o),j=f.useMemo(()=>({sortable:{containerId:p,index:S,items:u},...a}),[p,a,S,u]),T=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:N,node:_,isOver:A,setNodeRef:P}=tae({id:o,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...d}}),{active:E,activatorEvent:M,activeNodeRect:R,attributes:O,setNodeRef:L,listeners:q,isDragging:Q,over:V,setActivatorNodeRef:se,transform:G}=Xse({id:o,data:j,attributes:{...kae,...n},disabled:w.draggable}),ge=qie(P,L),ie=!!E,W=ie&&!x&&fh(h)&&fh(y),X=!b&&Q,J=X&&W?G:null,le=W?J??(c??k)({rects:v,activeNodeRect:R,activeIndex:h,overIndex:y,index:S}):null,I=fh(h)&&fh(y)?l({id:o,items:u,activeIndex:h,overIndex:y}):S,ee=E?.id,K=f.useRef({activeId:ee,items:u,newIndex:I,containerId:p}),ne=u!==K.current.items,oe=e({active:E,containerId:p,isDragging:Q,isSorting:ie,id:o,index:S,items:u,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:m,wasDragging:K.current.activeId!=null}),D=jae({disabled:!oe,index:S,node:_,rect:N});return f.useEffect(()=>{ie&&K.current.newIndex!==I&&(K.current.newIndex=I),p!==K.current.containerId&&(K.current.containerId=p),u!==K.current.items&&(K.current.items=u)},[ie,I,p,u]),f.useEffect(()=>{if(ee===K.current.activeId)return;if(ee!=null&&K.current.activeId==null){K.current.activeId=ee;return}const te=setTimeout(()=>{K.current.activeId=ee},50);return()=>clearTimeout(te)},[ee]),{active:E,activeIndex:h,attributes:O,data:j,rect:N,index:S,newIndex:I,items:u,isOver:A,isSorting:ie,isDragging:Q,listeners:q,node:_,overIndex:y,over:V,setNodeRef:ge,setActivatorNodeRef:se,setDroppableNodeRef:P,setDraggableNodeRef:L,transform:D??le,transition:$()};function $(){if(D||ne&&K.current.newIndex===S)return wae;if(!(X&&!mf(M)||!m)&&(ie||oe))return Ka.Transition.toString({...m,property:eM})}}function Nae(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}vn.Down,vn.Right,vn.Up,vn.Left;const Cae="Patient Registration",Sae="appointment_module",_ae="active",Eae=[{id:"name",type:"text",label:"Full Name",placeholder:"Enter full name",required:!0,columnClass:"col-md-6 col-12"},{id:"email",type:"email",label:"Email",placeholder:"Enter email",required:!0,columnClass:"col-md-6 col-12"},{id:"phone",type:"text",label:"Phone",placeholder:"Enter phone",required:!1,columnClass:"col-md-6 col-12"},{id:"gender",type:"select",label:"Gender",placeholder:"Select gender",required:!0,columnClass:"col-md-6 col-12",options:["Male","Female","Other"]}],Tae={appointment_status:[{id:"1"}],show_mode:[{id:"appointment"}],clinics:[],roles:["doctor","receptionist"]},Aae={name:Cae,moduleType:Sae,status:_ae,fields:Eae,conditions:Tae},Dae=[{id:"image/jpeg",text:r("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:r("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:r("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:r("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:r("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:r("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:r("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:r("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:r("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:r("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:r("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:r("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:r("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:r("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:r("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:r("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:r("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:r("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:r("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:r("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:r("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:r("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:r("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:r("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:r("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:r("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:r("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:r("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:r("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:r("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:r("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:r("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:r("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:r("7Z Archive (7z)","kivicare-clinic-management-system")}],tM=[{type:"number",label:r("Number","kivicare-clinic-management-system"),icon:"ph-list-numbers"},{type:"textarea",label:r("Text Area","kivicare-clinic-management-system"),icon:"ph-article-ny-times"},{type:"email",label:r("Email","kivicare-clinic-management-system"),icon:"ph-envelope"},{type:"select",label:r("Dropdown","kivicare-clinic-management-system"),icon:"ph-caret-down"},{type:"radio",label:r("Radio Buttons","kivicare-clinic-management-system"),icon:"ph-radio-button"},{type:"checkbox",label:r("Checkbox","kivicare-clinic-management-system"),icon:"ph-check-square"},{type:"file",label:r("File Upload","kivicare-clinic-management-system"),icon:"ph-paperclip"},{type:"date",label:r("Date","kivicare-clinic-management-system"),icon:"ph-calendar"}],HC=[{value:"col-12",label:r("Full Width","kivicare-clinic-management-system")},{value:"col-md-6 col-12",label:r("Half Width (Desktop)","kivicare-clinic-management-system")},{value:"col-lg-4 col-md-6 col-12",label:r("One Third (Large Screen)","kivicare-clinic-management-system")},{value:"col-lg-3 col-md-6 col-12",label:r("One Fourth (Large Screen)","kivicare-clinic-management-system")},{value:"col-xl-2 col-lg-3 col-md-6 col-12",label:r("One Sixth (Extra Large)","kivicare-clinic-management-system")}],Rae=[{value:"appointment_module",label:r("Appointment","kivicare-clinic-management-system")},{value:"patient_encounter_module",label:r("Encounter","kivicare-clinic-management-system")},{value:"patient_module",label:r("Patient","kivicare-clinic-management-system")},{value:"doctor_module",label:r("Doctor","kivicare-clinic-management-system")}],zC=[{value:"active",label:r("Active","kivicare-clinic-management-system")},{value:"inactive",label:r("Inactive","kivicare-clinic-management-system")}],Pae=t=>({id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:t,label:`${t.charAt(0).toUpperCase()+t.slice(1)} ${r("Field","kivicare-clinic-management-system")}`,placeholder:`${r("Enter","kivicare-clinic-management-system")} ${t}`,required:!1,className:"",columnClass:"col-xl-6 col-12",options:t==="select"||t==="radio"?[r("Option 1","kivicare-clinic-management-system"),r("Option 2","kivicare-clinic-management-system")]:[],fileTypes:t==="file"?[]:void 0}),Mae=({field:t,onEdit:e,onDelete:n,isActive:s,onClick:a})=>{const{attributes:l,listeners:o,setNodeRef:c,transform:d,transition:m,isDragging:u}=Hk({id:t.id}),p={transform:Ka.Transform.toString(d),transition:m,opacity:u?.5:1},h=()=>{switch(t.type){case"textarea":return i.jsx(Mt.Control,{as:"textarea",rows:1,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()});case"select":return i.jsx(ct,{placeholder:t.placeholder,options:t.options?.map(g=>({label:g,value:g}))||[],className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:g=>({...g,zIndex:9999})}});case"radio":return i.jsx("div",{className:"d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:t.options?.map((g,x)=>i.jsx(Mt.Check,{inline:!0,label:g,name:t.id,type:"radio",id:`${t.id}-radio-${x}`,className:"m-0"},x))});case"checkbox":return i.jsx(Mt.Check,{type:"checkbox",label:t.placeholder});case"file":return i.jsx(Mt.Control,{type:"file",onKeyDown:g=>g.stopPropagation()});case"date":return i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{onChange:()=>{},options:{dateFormat:"Y-m-d H:i",enableTime:!0,locale:Wn()},className:"form-control",placeholder:t.placeholder}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]});default:return i.jsx(Mt.Control,{type:t.type,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()})}};return i.jsxs("div",{ref:c,style:p,...l,className:`form-group custom-form-group ${s?"active":""}`,onClick:a,children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("span",{children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:PR(t.label)}}),t.required&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),e(t)},children:i.jsx("i",{className:"ph ph-pencil-simple-line font-size-18 text-primary"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),n(t.id)},children:i.jsx("i",{className:"ph ph-trash font-size-18 text-danger"})})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx("i",{className:"ph ph-hand-grabbing p-3 font-size-18 rounded bg-primary-subtle icon-color flex-shrink-0",...o,style:{cursor:"grab"},onMouseDown:g=>g.preventDefault()}),i.jsx("div",{className:"flex-grow-1",children:h()})]})]})},VC=({fieldType:t,onDragStart:e})=>{const n=tM.find(s=>s.type===t);return i.jsxs("div",{className:"d-flex align-items-center gap-lg-4 gap-2 p-3 bg-body rounded w-100",draggable:!0,onDragStart:s=>e(s,t),style:{cursor:"grab",userSelect:"none"},children:[i.jsx("i",{className:`ph ${n.icon} font-size-18 icon-color`}),i.jsx("span",{className:"font-size-14 fw-medium",children:n.label})]})},UC=()=>{const{id:t}=Gt(),{defaultClinicId:e}=ut(),n=!!t,[s,a]=f.useState("form"),[l,o]=f.useState(!1),[c,d]=f.useState(null),[m,u]=f.useState([]),[p,h]=f.useState(null),[g,x]=f.useState(!1),[v,y]=f.useState("right"),[b,k]=f.useState({name:"Custom Form",moduleType:"appointment_module",status:"active",formIcon:"",showInEncounter:!1,showInAppointment:!0,clinics:[],roles:[]}),[w,S]=f.useState(""),[j,T]=f.useState(!1),[N,_]=f.useState(!1),{control:A,handleSubmit:P,watch:E,setValue:M,reset:R,getValues:O}=en({defaultValues:b});f.useEffect(()=>{!n&&Jn()&&e&&(M("clinics",[String(e)]),k(U=>({...U,clinics:[String(e)]})))},[e,n,M]);const L=E("name"),q=E("moduleType"),Q=hn(),{data:V,isLoading:se}=ZR(t,{enabled:n}),[G,ge]=f.useState([]),[ie,W]=f.useState(""),[X,J]=f.useState(!1);f.useEffect(()=>{(async()=>{try{J(!0);const me=await Dt.getClinics({page:1,per_page:100}),pe=(me?.data?.data||me?.data||[]).map(Ce=>({value:Ce.id,label:Ce.clinic_name||Ce.name||Ce.label||Ce.display_name}));ge(pe)}catch(me){console.error("[Clinics] Error:",me)}finally{J(!1)}})()},[]);const ue=ie?G.filter(U=>U.label.toLowerCase().includes(ie.toLowerCase())):G,le=EJ({onSuccess:U=>{console.log("Custom form created successfully:",U),Q("/setting/custom-form/")},onError:U=>{console.error("Error creating custom form:",U)}}),I=TJ({onSuccess:U=>{console.log("Custom form updated successfully:",U),Q("/setting/custom-form/")},onError:U=>{console.error("Error updating custom form:",U)}});f.useEffect(()=>{if(n&&V){const U=V.data;R({name:U.name?.text||U.name,moduleType:U.moduleType,status:U.status?.value||U.status,showInEncounter:U.conditions?.show_mode?.some(me=>me.id==="encounter")||!1,showInAppointment:U.conditions?.show_mode?.some(me=>me.id==="appointment")||!1,clinics:U.conditions?.clinics||[],roles:U.conditions?.roles||[]}),u(U.fields||[]),k(me=>({...me,name:U.name?.text||U.name,moduleType:U.moduleType?.value||U.moduleType,status:U.status?.value||U.status}))}},[V,n,R]);const ee=U=>{if(Jn()&&e){const ye=U.clinics||[],pe=String(e);ye.includes(pe)||(U.clinics=[...ye,pe])}U.moduleType=U.moduleType?.value||U.moduleType;const me={...U,fields:m};console.log("Saving form:",me),n?I.mutate({id:t,...me}):le.mutate(me)},K=U=>{U!==l&&(x(!0),y(U?"right":"left"),setTimeout(()=>{o(U),setTimeout(()=>x(!1),300)},150))},ne=(U,me)=>{h(me),U.dataTransfer.setData("text/plain",me)},oe=U=>{U.preventDefault()},D=U=>{U.preventDefault();const me=U.dataTransfer.getData("text/plain")||p;if(me){const ye=Pae(me);u(pe=>[...pe,ye]),d(ye),o(!0)}h(null)},$=U=>{d(U),K(!0)},te=U=>{Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system")}).then(me=>{me.isConfirmed&&(u(ye=>ye.filter(pe=>pe.id!==U)),c?.id===U&&(d(null),o(!1)),Xe.fire(r("Deleted!","kivicare-clinic-management-system"),r("Your field has been deleted.","kivicare-clinic-management-system"),"success"))})},ae=U=>{u(me=>me.map(ye=>ye.id===U.id?U:ye)),d(U)},Y=U=>{d(U),K(!0)},H=()=>{try{const U=JSON.parse(w);U.name&&(M("name",U.name),k(me=>({...me,name:U.name}))),U.moduleType&&(M("moduleType",U.moduleType),k(me=>({...me,moduleType:U.moduleType}))),U.status&&(M("status",U.status),k(me=>({...me,status:U.status}))),U.conditions&&(U.conditions.show_mode&&(M("showInEncounter",U.conditions.show_mode.some(me=>me.id==="encounter")),M("showInAppointment",U.conditions.show_mode.some(me=>me.id==="appointment"))),U.conditions.clinics&&M("clinics",U.conditions.clinics),U.conditions.roles&&M("roles",U.conditions.roles)),U.fields&&u(U.fields),S(""),a("form"),Xe.fire(r("Success","kivicare-clinic-management-system"),r("Form imported successfully","kivicare-clinic-management-system"),"success")}catch{Xe.fire(r("Error","kivicare-clinic-management-system"),r("Invalid JSON format","kivicare-clinic-management-system"),"error")}},B=()=>{const U=O(),me={name:U.name,moduleType:U.moduleType?.value||U.moduleType,status:U.status,fields:m,conditions:{show_mode:[],clinics:U.clinics||[],roles:U.roles||[]}};U.showInAppointment&&me.conditions.show_mode.push({id:"appointment"}),U.showInEncounter&&me.conditions.show_mode.push({id:"encounter"});const ye="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(me,null,2)),pe=document.createElement("a");pe.setAttribute("href",ye),pe.setAttribute("download",(U.name||"custom_form")+".json"),document.body.appendChild(pe),pe.click(),pe.remove()},re=()=>{T(!0)},de=()=>{T(!1)},xe=U=>{const{active:me,over:ye}=U;me.id!==ye.id&&u(pe=>{const Ce=pe.findIndex(De=>De.id===me.id),Ge=pe.findIndex(De=>De.id===ye.id);return pf(pe,Ce,Ge)})};return n&&se?i.jsx(By,{}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:P(ee),children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:"/setting/custom-form/",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[r("Back","kivicare-clinic-management-system")," "]})]})})]}),i.jsxs(Yn,{children:[i.jsx(Et,{xs:12,md:5,lg:4,xl:3,children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:l?i.jsxs("div",{className:`slide-transition ${g&&v==="left"?"slide-enter-left":"slide-active"}`,children:[i.jsxs("button",{className:"d-flex align-items-center gap-2 mb-4 btn btn-link p-0",onClick:()=>K(!1),type:"button",children:[i.jsx("i",{className:"ph ph-caret-left font-size-18 icon-color"}),i.jsx("h6",{className:"m-0",children:r("Back to Fields","kivicare-clinic-management-system")})]}),i.jsxs(Yn,{className:"gy-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Label","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.label||"",onChange:U=>ae({...c,label:U.target.value}),onKeyDown:U=>U.stopPropagation(),placeholder:r("Field label (HTML allowed)","kivicare-clinic-management-system")}),i.jsx("small",{className:"text-muted",children:r("HTML tags like <strong>, <em>, <span> are allowed for formatting","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Placeholder","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.placeholder||"",onChange:U=>ae({...c,placeholder:U.target.value}),onKeyDown:U=>U.stopPropagation(),placeholder:r("Field placeholder","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Field Type","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.type||"",disabled:!0})]})}),c?.type==="file"&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{isMulti:!0,className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Select file types","kivicare-clinic-management-system"),options:Dae,getOptionLabel:U=>U.text,getOptionValue:U=>U.id,value:c?.fileTypes||[],onChange:U=>ae({...c,fileTypes:U||[]}),isClearable:!0,styles:{menuPortal:U=>({...U,zIndex:9999})}}),i.jsx("small",{className:"text-muted",children:r("Select allowed file types for upload","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsx("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:i.jsx(Mt.Check,{inline:!0,label:r("Required field","kivicare-clinic-management-system"),checked:c?.required||!1,onChange:U=>ae({...c,required:U.target.checked}),type:"checkbox"})})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("CSS Class","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.className||"",onChange:U=>ae({...c,className:U.target.value}),onKeyDown:U=>U.stopPropagation(),placeholder:"mb-3"})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Column Width","kivicare-clinic-management-system")}),i.jsx(ct,{placeholder:r("Select column width","kivicare-clinic-management-system"),value:HC.find(U=>U.value===c?.columnClass)||null,onChange:U=>ae({...c,columnClass:U?.value||"col-md-6 col-12"}),options:HC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:U=>({...U,zIndex:9999})}})]})}),(c?.type==="select"||c?.type==="radio")&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Options (one per line)","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:c?.options?.join(`
`)||"",onChange:U=>ae({...c,options:U.target.value.split(`
`)}),onKeyDown:U=>U.stopPropagation(),placeholder:`${r("Option 1","kivicare-clinic-management-system")}
${r("Option 2","kivicare-clinic-management-system")}
${r("Option 3","kivicare-clinic-management-system")}`})]})})]})]}):i.jsxs("div",{className:`slide-transition ${g&&v==="right"?"slide-enter-right":"slide-active"}`,children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",id:"pills-tab",role:"tablist",children:[i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="form"?" active":""}`,onClick:()=>a("form"),type:"button",children:r("Form","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="formFields"?" active":""}`,onClick:()=>a("formFields"),type:"button",children:r("Form Fields","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"tab-content",id:"pills-tabContent",children:[s==="form"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs(Yn,{className:"gy-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Form Name","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"name",control:A,render:({field:U})=>i.jsx(Mt.Control,{...U,type:"text",onKeyDown:me=>me.stopPropagation(),placeholder:r("Enter form name","kivicare-clinic-management-system")})})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Module Type","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"moduleType",control:A,render:({field:U})=>i.jsx(ct,{placeholder:r("Select module type","kivicare-clinic-management-system"),value:U.value,onChange:U.onChange,options:Rae,isSearchable:!1,isDisabled:n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})}})})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Status","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"status",control:A,render:({field:U})=>i.jsx(ct,{placeholder:r("Select status","kivicare-clinic-management-system"),value:zC.find(me=>me.value===U.value)||null,onChange:me=>U.onChange(me?.value||""),options:zC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})}})})]})}),q.value==="appointment_module"&&i.jsx(i.Fragment,{children:i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Show in Sections","kivicare-clinic-management-system")}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:[i.jsx(Ne,{name:"showInAppointment",control:A,render:({field:U})=>i.jsx(Mt.Check,{inline:!0,label:r("Appointment","kivicare-clinic-management-system"),checked:U.value,onChange:me=>U.onChange(me.target.checked),type:"checkbox",id:"showInAppointment",className:"m-0"})}),i.jsx(Ne,{name:"showInEncounter",control:A,render:({field:U})=>i.jsx(Mt.Check,{inline:!0,label:r("Encounter","kivicare-clinic-management-system"),checked:U.value,onChange:me=>U.onChange(me.target.checked),type:"checkbox",id:"showInEncounter",className:"m-0"})})]}),i.jsx("small",{className:"text-muted",children:r("Note: If encounter is selected, form will only be displayed if there has been an appointment encounter","kivicare-clinic-management-system")})]})})}),Cr()&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Clinics","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"clinics",control:A,render:({field:U})=>i.jsx(ct,{placeholder:r("Select clinics","kivicare-clinic-management-system"),value:U.value?U.value.map(me=>G.find(ye=>String(ye.value)===String(me))).filter(Boolean):[],onChange:me=>U.onChange(me?me.map(ye=>ye.value):[]),onInputChange:me=>W(me),options:ue,isMulti:!0,isLoading:X,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})},filterOption:null})}),i.jsx("small",{className:"text-muted",children:r("Note: To show form to all clinics, please leave the selection blank.","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Roles to Access","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"roles",control:A,render:({field:U})=>i.jsx(ct,{placeholder:r("Select roles","kivicare-clinic-management-system"),value:U.value?U.value.map(me=>dj().find(ye=>ye.value===me)):[],onChange:me=>U.onChange(me?me.map(ye=>ye.value):[]),options:dj(),isMulti:!0,isSearchable:!1,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})}})}),i.jsx("small",{className:"text-muted",children:r("Note: To show form to all roles, please leave the selection blank.","kivicare-clinic-management-system")})]})})]})}),s==="formFields"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsx("div",{className:"form-filed-content d-flex align-items-center gap-2 flex-column",children:tM.map(U=>i.jsx(VC,{fieldType:U.type,onDragStart:ne},U.type))})})]})]})})})}),i.jsxs(Et,{xs:12,md:7,lg:8,xl:9,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:n?r("Edit Custom Form","kivicare-clinic-management-system"):r("Add Custom Form","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>_(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:B,children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:r("Export","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:re,children:[i.jsx("i",{className:"ph ph-eye"}),i.jsx("span",{children:r("View Form","kivicare-clinic-management-system")})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:le.isPending||I.isPending,children:le.isPending||I.isPending?r("Saving...","kivicare-clinic-management-system"):n?r("Update Form","kivicare-clinic-management-system"):r("Save Form","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",onDragOver:oe,onDrop:D,style:{minHeight:"400px"},children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:b.name}),i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{o(!1),a("formFields")},children:r("Add fields","kivicare-clinic-management-system")})})]}),i.jsxs($k,{collisionDetection:DP,onDragEnd:xe,children:[i.jsx(qk,{items:m.map(U=>U.id),strategy:Bk,children:i.jsxs(Yn,{className:"gy-4 custom-form-content",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Form Name","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:L,onChange:U=>M("name",U.target.value),onKeyDown:U=>U.stopPropagation(),placeholder:r("Enter form name","kivicare-clinic-management-system")})]})}),m.map(U=>i.jsx(Et,{className:U.columnClass,children:i.jsx(Mae,{field:U,onEdit:$,onDelete:te,isActive:c?.id===U.id,onClick:()=>Y(U)})},U.id)),m.length===0&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"text-center p-5 border-2 border-dashed rounded",style:{borderStyle:"dashed"},children:[i.jsx("i",{className:"ph ph-upload-simple font-size-32 text-muted mb-3"}),i.jsx("p",{className:"text-muted",children:r('Drag and drop form fields here or click "Add fields" to get started',"kivicare-clinic-management-system")})]})})]})}),i.jsx(QP,{children:p?i.jsx("div",{className:"opacity-50",children:i.jsx(VC,{fieldType:p,onDragStart:ne})}):null})]})]})})]})]})]}),i.jsxs(lt,{show:j,onHide:de,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsxs(lt.Title,{children:[r("Form Preview","kivicare-clinic-management-system")," - ",L||b.name]})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Wa,{fields:m,data:{},readOnly:!1,formId:"preview_form"}),m.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:r("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:de,children:r("Close Preview","kivicare-clinic-management-system")})})]}),i.jsxs(lt,{show:N,onHide:()=>_(!1),size:"md",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Import Form","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Import JSON","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:10,placeholder:r("Paste your JSON here","kivicare-clinic-management-system"),value:w,onChange:U=>S(U.target.value)}),i.jsx("div",{className:"mt-2",children:i.jsx("a",{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(Aae,null,2))}`,download:"sample1.json",children:r("Click here to download sample json file","kivicare-clinic-management-system")})})]})}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>_(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{H(),_(!1)},children:r("Import Form","kivicare-clinic-management-system")})]})]})]})},Iae=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{data:n,isLoading:s,isError:a,error:l}=zX(),o=KX(),c=GX(),d=n?.data||[],{data:m}=_n(),u=m?.data?.hideUtilityLinks,p=Ln(),h=f.useMemo(()=>[p.accessor("server_name",{header:r("Service Name","kivicare-clinic-management-system"),cell:g=>i.jsxs("div",{children:[i.jsx("h6",{className:"m-0",children:g.getValue()}),i.jsx("small",{className:"text-muted",children:g.row.original.server_url})]})}),p.accessor("server_type",{header:r("Type","kivicare-clinic-management-system"),cell:g=>{const x=g.row.original.type_label||g.getValue();let v="bg-primary";switch(x.toLowerCase()){case"email":v="bg-primary";break;case"whatsapp":v="bg-success";break;case"sms":v="bg-success";break;case"push notification":v="bg-warning";break;case"webhook":v="bg-info";break;case"custom api":v="bg-secondary";break;default:v="bg-secondary"}return i.jsx("span",{className:`badge ${v}`,children:x})}}),p.accessor("is_active",{header:r("Status","kivicare-clinic-management-system"),cell:g=>i.jsx("div",{className:"form-check form-switch custom-switch-xl",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!g.getValue(),onClick:x=>{const v=g.row.original.id,y=x.target.checked;try{c.mutateAsync({id:v,data:{status:y}}).then(b=>{Te(b.message)})}catch{x.target.checked=!y,Te(r("Failed to update status","kivicare-clinic-management-system"))}}})})}),p.display({id:"actions",header:r("Action","kivicare-clinic-management-system"),cell:g=>{const{id:x}=g.row.original;return i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ht,{to:`/setting/custom-notification/edit/${x}`,className:"btn btn-link text-secondary p-0",title:r("Configure","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-gear"})}),i.jsx(ht,{to:`/setting/custom-notification/test/${x}`,className:"btn btn-link text-info p-0",title:r("Test","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-flask"})}),i.jsx(ht,{onClick:async v=>{v.preventDefault(),Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(async y=>{if(y.isConfirmed)try{await o.mutateAsync(x),Te(r("Service deleted successfully","kivicare-clinic-management-system"))}catch{Te(r("Failed to delete service","kivicare-clinic-management-system"))}})},className:"btn btn-link text-danger p-0",title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})})]})}})],[]);return e&&s?i.jsx(Sn,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-notification-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("Custom Notification","kivicare-clinic-management-system"),u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-notification-settings-documentation/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 ms-2 text-primary"})})]}),i.jsxs(ht,{to:"/setting/custom-notification/add",className:"btn btn-primary btn-sm",children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add New Service","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"table-responsive",children:a?i.jsx("div",{className:"alert alert-danger",children:l?.message||r("Failed to load data","kivicare-clinic-management-system")}):i.jsx(kn,{data:d,columns:h,enableSelection:!1})})]})})},WC=()=>{const{id:t}=Gt(),e=hn(),n=t&&t!=="new",s=VX(),a=UX(),{data:l,isLoading:o}=KR(t,{enabled:n}),{control:c,handleSubmit:d,formState:{errors:m},setValue:u,watch:p,reset:h,getValues:g}=en({defaultValues:{serverType:"",serverName:"",serverUrl:"",port:443,httpMethod:"POST",authMethod:"none",apiKey:"",keyLocation:"header",headerParamName:"Authorization",username:"",password:"",encoding:"Base64",accessToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature",senderName:"",senderEmail:"",enableSSL:!1,contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBodyFields:[{key:"",value:""}],requestBody:""}}),{append:x,remove:v}=yr({control:c,name:"customHeaders"}),{append:y,remove:b}=yr({control:c,name:"queryParams"}),{append:k,remove:w}=yr({control:c,name:"requestBodyFields"}),S=p(),[j,T]=f.useState(!1),[N,_]=f.useState(!1);f.useEffect(()=>{if(n&&l?.data){const D=l.data;let $=[{key:"",value:""}],te=D.request_body||"";if(D.request_body)try{const ae=JSON.parse(D.request_body);typeof ae=="object"&&ae!==null?($=Object.entries(ae).map(([Y,H])=>({key:Y,value:typeof H=="string"?H:JSON.stringify(H)})),$.length===0&&($=[{key:"",value:""}])):$=[{key:"",value:D.request_body}]}catch{if(D.content_type==="application/x-www-form-urlencoded")try{const Y=new URLSearchParams(D.request_body);$=[];for(let[H,B]of Y.entries())$.push({key:H,value:B});$.length===0&&($=[{key:"",value:""}])}catch{$=[{key:"",value:D.request_body}]}else $=[{key:"",value:D.request_body}]}console.log(D.auth_config?.access_token,"ritesh"),h({serverType:D.server_type||"",serverName:D.server_name||"",serverUrl:D.server_url||"",port:D.port||443,httpMethod:D.http_method||"POST",authMethod:D.auth_method||"none",apiKey:D.auth_config?.api_key||"",keyLocation:D.auth_config?.key_location||"header",headerParamName:D.auth_config?.header_param_name||"Authorization",clientId:D.auth_config?.client_id||"",clientSecret:D.auth_config?.client_secret||"",authUrl:D.auth_config?.auth_url||"",tokenUrl:D.auth_config?.token_url||"",redirectUrl:D.auth_config?.redirect_url||"",username:D.auth_config?.username||"",password:D.auth_config?.password||"",accessToken:D.auth_config?.access_token||"",tokenExpiry:D.auth_config?.token_expiry||"",scopes:D.auth_config?.scopes,senderName:D.sender_name||"",senderEmail:D.sender_email||"",enableSSL:D.enable_ssl||!1,contentType:D.content_type||"application/json",customHeaders:D.custom_headers?.length>0?D.custom_headers:[{key:"",value:""}],queryParams:D.query_params?.length>0?D.query_params:[{key:"",value:""}],requestBodyFields:$,requestBody:te})}},[n,l,h]),f.useEffect(()=>{if(S.authMethod==="bearer"&&!S.redirectUrl){const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";u("redirectUrl",D)}},[S.authMethod,S.redirectUrl,u]);const A=[{name:"receiver_email",description:r("Recipient email address","kivicare-clinic-management-system"),example:"user@example.com"},{name:"receiver_number",description:r("Recipient phone number","kivicare-clinic-management-system"),example:"+1234567890"},{name:"subject",description:r("Message subject/title","kivicare-clinic-management-system"),example:"Appointment Confirmation"},{name:"content",description:r("Message content/body","kivicare-clinic-management-system"),example:"Your appointment is confirmed for tomorrow at 10:00 AM"},{name:"timestamp",description:r("Current timestamp","kivicare-clinic-management-system"),example:"2024-01-15 10:30:45"},{name:"clinic_name",description:r("Clinic/site name","kivicare-clinic-management-system"),example:"Healthcare Clinic"},{name:"content_sid",description:r("Content/Message SID identifier","kivicare-clinic-management-system"),example:"SM1234567890abcdef"}],P=[{value:"sms",label:"SMS"},{value:"whatsapp",label:"WhatsApp"},{value:"email",label:"Email"},{value:"webhook",label:"Webhook"},{value:"custom-api",label:"Custom API"},{value:"push-notification",label:"Push Notification"}],E=[{value:"none",label:"No Authentication"},{value:"apikey",label:"API Key Authentication"},{value:"basic",label:"Basic Authentication"},{value:"bearer",label:"Bearer Token Authentication (OAuth2 / JWT)"},{value:"jwt",label:"JWT (JSON Web Token)"},{value:"hmac",label:"HMAC / Signature Authentication"}],M=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],R=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],O=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],L=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],q=[{value:"HS256",label:"HS256"},{value:"HS384",label:"HS384"},{value:"HS512",label:"HS512"},{value:"RS256",label:"RS256"},{value:"RS384",label:"RS384"},{value:"RS512",label:"RS512"},{value:"ES256",label:"ES256"},{value:"ES384",label:"ES384"},{value:"ES512",label:"ES512"}],Q=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}],V=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],se=[{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],G=(D,$)=>{u(D,$)},ge=D=>{D==="customHeaders"?x({key:"",value:""}):D==="queryParams"?y({key:"",value:""}):D==="requestBodyFields"&&k({key:"",value:""})},ie=(D,$,te,ae)=>{if(D==="customHeaders"){const H=g("customHeaders").map((B,re)=>re===$?{...B,[te]:ae}:B);u("customHeaders",H)}else if(D==="queryParams"){const H=g("queryParams").map((B,re)=>re===$?{...B,[te]:ae}:B);u("queryParams",H)}else if(D==="requestBodyFields"){const H=g("requestBodyFields").map((B,re)=>re===$?{...B,[te]:ae}:B);u("requestBodyFields",H)}},W=(D,$)=>{D==="customHeaders"?v($):D==="queryParams"?b($):D==="requestBodyFields"&&w($)},X=()=>{switch(S.serverType){case"sms":return r("Enter phone number (e.g., +1234567890)","kivicare-clinic-management-system");case"email":return r("Enter email address (e.g., noreply@domain.com)","kivicare-clinic-management-system");case"push-notification":return r("Enter app identifier or sender ID","kivicare-clinic-management-system");default:return r("Enter sender identifier","kivicare-clinic-management-system")}},J=()=>{switch(S.contentType){case"application/json":return`{
  "to": "{{receiver_number}}",
  "message": "{{content}}",
  "content_id": "{{contentid}}",
  "appointment_id": "{{appointment_id}}",
  "patient_name": "{{patient_name}}",
  "doctor_name": "{{doctor_name}}",
  "clinic_name": "{{clinic_name}}",
  "appointment_date": "{{appointment_date}}",
  "appointment_time": "{{appointment_time}}"
}`;case"application/xml":return`<?xml version="1.0"?>
<notification>
  <to>{{receiver_number}}</to>
  <message>{{content}}</message>
  <content_id>{{contentid}}</content_id>
  <appointment_id>{{appointment_id}}</appointment_id>
  <patient_name>{{patient_name}}</patient_name>
  <doctor_name>{{doctor_name}}</doctor_name>
  <clinic_name>{{clinic_name}}</clinic_name>
  <appointment_date>{{appointment_date}}</appointment_date>
  <appointment_time>{{appointment_time}}</appointment_time>
</notification>`;case"application/x-www-form-urlencoded":return"to={{receiver_number}}&message={{content}}&content_id={{contentid}}&appointment_id={{appointment_id}}&patient_name={{patient_name}}&doctor_name={{doctor_name}}&clinic_name={{clinic_name}}&appointment_date={{appointment_date}}&appointment_time={{appointment_time}}";default:return"Use variables like {{receiver_number}}, {{content}}, {{contentid}}, {{appointment_id}}, {{patient_name}}, {{doctor_name}}, {{clinic_name}}, {{appointment_date}}, {{appointment_time}}"}},ue=()=>["POST","PUT","PATCH"].includes(S.httpMethod),le=async D=>{try{await navigator.clipboard.writeText(`{{${D}}}`),console.log(`Copied {{${D}}} to clipboard`)}catch{const te=document.createElement("textarea");te.value=`{{${D}}}`,document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te),console.log(`Copied {{${D}}} to clipboard`)}},I=async()=>{if(!S.clientId||!S.clientSecret||!S.authUrl||!S.tokenUrl){Te.error(r("Error: Please fill in all required OAuth2 fields (Client ID, Client Secret, Auth URL, Token URL)","kivicare-clinic-management-system"));return}_(!0),Te.info(r("Starting OAuth2 authorization flow...","kivicare-clinic-management-system"));try{const D=new URLSearchParams({response_type:"code",client_id:S.clientId,redirect_uri:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",scope:S.scopes||"read write",state:Math.random().toString(36).substring(2,15)}),$=`${S.authUrl}?${D.toString()}`;Te.info(r("Opening authorization window...","kivicare-clinic-management-system"));const te=window.open($,"oauth2_auth","width=600,height=700,scrollbars=yes,resizable=yes");if(!te)throw new Error(r("Failed to open authorization window. Please allow popups for this site.","kivicare-clinic-management-system"));const ae=H=>{H.origin===window.location.origin&&(H.data.type==="oauth2_success"&&H.data.code?(te.close(),window.removeEventListener("message",ae),ee(H.data.code)):H.data.type==="oauth2_error"&&(te.close(),window.removeEventListener("message",ae),Te.error(r("Authorization failed: ","kivicare-clinic-management-system")+H.data.error),_(!1)))};window.addEventListener("message",ae);const Y=setInterval(()=>{te.closed&&(clearInterval(Y),window.removeEventListener("message",ae),Te.warning(r("Authorization cancelled by user","kivicare-clinic-management-system")),_(!1))},1e3)}catch(D){console.error("OAuth2 Error:",D),Te.error(r("Error: ","kivicare-clinic-management-system")+D.message),_(!1)}},ee=async D=>{try{Te.info(r("Exchanging authorization code for access token...","kivicare-clinic-management-system"));const $=new URLSearchParams({grant_type:"authorization_code",client_id:S.clientId,client_secret:S.clientSecret,code:D,redirect_uri:S.redirectUrl||window.location.origin+"#/setting/custom-notification/oauth2/callback"}),te={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ae=btoa(`${S.clientId}:${S.clientSecret}`);te.Authorization=`Basic ${ae}`;const Y=await fetch(S.tokenUrl,{method:"POST",headers:te,body:$.toString(),mode:"cors",credentials:"omit"});let H,B;try{H=await Y.text(),B=JSON.parse(H)}catch{throw new Error(`Invalid response format: ${H.substring(0,200)}...`)}if(!Y.ok){const re=B?.error_description||B?.error||H;throw new Error(`Token exchange failed (${Y.status}): ${re}`)}if(B.access_token){if(G("accessToken",B.access_token),B.refresh_token&&G("refreshToken",B.refresh_token),B.expires_in){const re=new Date;re.setSeconds(re.getSeconds()+parseInt(B.expires_in)),G("tokenExpiry",re.toISOString().slice(0,16))}B.token_type&&G("tokenType",B.token_type),Te.success(r(" Access token generated successfully! Token will expire at: ","kivicare-clinic-management-system")+(B.expires_in?new Date(Date.now()+parseInt(B.expires_in)*1e3).toLocaleString():r("Unknown","kivicare-clinic-management-system")))}else throw B.error?new Error(B.error_description||B.error):new Error(r("No access token received from server. Response: ","kivicare-clinic-management-system")+JSON.stringify(B))}catch($){console.error("Token Exchange Error:",$);let te=$.message;$.message.includes("CORS")?te=r("CORS error: The OAuth provider does not allow browser requests. You may need to configure CORS settings or use server-side token exchange.","kivicare-clinic-management-system"):$.message.includes("Failed to fetch")&&(te=r("Network error: Unable to reach the token endpoint. Please check the Token URL and your internet connection.","kivicare-clinic-management-system")),Te.error(r("Token exchange failed: ","kivicare-clinic-management-system")+te)}finally{_(!1)}},K=async()=>{if(!S.refreshToken||!S.tokenUrl){Te.error(r("Error: Refresh token and token URL are required for token refresh","kivicare-clinic-management-system"));return}_(!0),Te.info(r("Refreshing access token...","kivicare-clinic-management-system"));try{const D=new URLSearchParams({grant_type:"refresh_token",client_id:S.clientId,client_secret:S.clientSecret,refresh_token:S.refreshToken}),$={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},te=btoa(`${S.clientId}:${S.clientSecret}`);$.Authorization=`Basic ${te}`;const ae=await fetch(S.tokenUrl,{method:"POST",headers:$,body:D.toString(),mode:"cors",credentials:"omit"});let Y,H;try{Y=await ae.text(),H=JSON.parse(Y)}catch{throw new Error(`Invalid response format: ${Y.substring(0,200)}...`)}if(!ae.ok){const B=H?.error_description||H?.error||Y;throw new Error(`Token refresh failed (${ae.status}): ${B}`)}if(H.access_token){if(G("accessToken",H.access_token),H.refresh_token&&G("refreshToken",H.refresh_token),H.expires_in){const B=new Date;B.setSeconds(B.getSeconds()+parseInt(H.expires_in)),G("tokenExpiry",B.toISOString().slice(0,16))}H.token_type&&G("tokenType",H.token_type),Te.success(r(" Access token refreshed successfully! New expiry: ","kivicare-clinic-management-system")+(H.expires_in?new Date(Date.now()+parseInt(H.expires_in)*1e3).toLocaleString():r("Unknown","kivicare-clinic-management-system")))}else throw new Error(r("No access token received during refresh","kivicare-clinic-management-system"))}catch(D){console.error("Token Refresh Error:",D),Te.error(r("Token refresh failed: ","kivicare-clinic-management-system")+D.message)}finally{_(!1)}},ne=(D=S)=>{const $={};D.authMethod==="apikey"?($.api_key=D.apiKey,$.key_location=D.keyLocation,$.header_param_name=D.headerParamName):D.authMethod==="basic"?($.username=D.username,$.password=D.password,$.encoding=D.encoding):D.authMethod==="bearer"?($.access_token=D.accessToken,$.token_type=D.tokenType,$.token_expiry=D.tokenExpiry,D.clientId&&($.client_id=D.clientId),D.clientSecret&&($.client_secret=D.clientSecret),D.authUrl&&($.auth_url=D.authUrl),D.tokenUrl&&($.token_url=D.tokenUrl),D.redirectUrl&&($.redirect_url=D.redirectUrl),D.scopes&&($.scopes=D.scopes),D.refreshToken&&($.refresh_token=D.refreshToken)):D.authMethod==="jwt"?($.issuer=D.jwtIssuer,$.subject=D.jwtSubject,$.audience=D.jwtAudience,$.private_key=D.jwtPrivateKey,$.algorithm=D.jwtAlgorithm,$.expiry_duration=D.jwtExpiryDuration,$.expiry_unit=D.jwtExpiryUnit):D.authMethod==="hmac"&&($.access_key=D.hmacAccessKey,$.secret_key=D.hmacSecretKey,$.algorithm=D.hmacAlgorithm,$.signature_location=D.hmacSignatureLocation,$.header_param_name=D.hmacHeaderParamName);const te=D.customHeaders.filter(B=>B.key&&B.value),ae=D.queryParams.filter(B=>B.key&&B.value),Y=D.requestBodyFields?D.requestBodyFields.filter(B=>B.key&&B.value):[];let H=D.requestBody;if(D.contentType==="application/x-www-form-urlencoded"&&Y.length>0){const B=new URLSearchParams;Y.forEach(re=>{B.append(re.key,re.value)}),H=B.toString()}else if(D.contentType==="application/json"&&Y.length>0){const B={};Y.forEach(re=>{B[re.key]=re.value}),H=JSON.stringify(B)}else if(Y.length>0&&Y.some(B=>B.key&&B.value))if(D.contentType==="application/json"){const B={};Y.forEach(re=>{B[re.key]=re.value}),H=JSON.stringify(B)}else{const B=new URLSearchParams;Y.forEach(re=>{B.append(re.key,re.value)}),H=B.toString()}return{server_type:D.serverType,server_name:D.serverName,server_url:D.serverUrl,port:parseInt(D.port),http_method:D.httpMethod,auth_method:D.authMethod,auth_config:Object.keys($).length>0?$:null,sender_name:D.senderName,sender_email:D.senderEmail,enable_ssl:D.enableSSL,content_type:D.contentType,custom_headers:te.length>0?te:null,query_params:ae.length>0?ae:null,request_body:H,is_active:!0}},oe=async D=>{T(!0);try{const $=ne(D);n?(await a.mutateAsync({id:parseInt(t),data:$}),Te.success(r("Configuration updated successfully","kivicare-clinic-management-system"))):(await s.mutateAsync($),Te.success(r("Configuration saved successfully","kivicare-clinic-management-system"))),e("/setting/custom-notification")}catch($){console.error("Error saving notification service:",$)}finally{T(!1)}};return n&&o?i.jsx($y,{}):i.jsx("div",{className:"custom-notification-edit",children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:n?r("Edit Notification Service","kivicare-clinic-management-system"):r("Create Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:n?r("Configure settings for notification service ID:","kivicare-clinic-management-system")+" "+t:r("Configure settings for a new notification service","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-primary",children:r("Back","kivicare-clinic-management-system")})]}),i.jsxs("form",{onSubmit:d(oe),children:[i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Basic Settings","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Notification Server Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:P,value:P.find(D=>D.value===S.serverType)||null,onChange:D=>G("serverType",D?.value||""),placeholder:r("Select server type","kivicare-clinic-management-system"),classNamePrefix:"react-select",isClearable:!0,isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})},className:m.serverType?"react-select-box is-invalid":"react-select-box"}),m.serverType&&i.jsx("div",{className:"invalid-feedback d-block",children:m.serverType})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Server Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.serverName?"is-invalid":""}`,value:S.serverName,onChange:D=>G("serverName",D.target.value),placeholder:r("Enter server name","kivicare-clinic-management-system")}),m.serverName&&i.jsx("div",{className:"invalid-feedback",children:m.serverName})]})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Server URL / Host","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"url",className:`form-control ${m.serverUrl?"is-invalid":""}`,value:S.serverUrl,onChange:D=>G("serverUrl",D.target.value),placeholder:r("https://api.example.com/v1/send","kivicare-clinic-management-system")}),m.serverUrl&&i.jsx("div",{className:"invalid-feedback",children:m.serverUrl})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Port Number","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.port?"is-invalid":""}`,value:S.port,onChange:D=>G("port",D.target.value),placeholder:"443"}),m.port&&i.jsx("div",{className:"invalid-feedback",children:m.port})]})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:M,value:M.find(D=>D.value===S.httpMethod)||null,onChange:D=>G("httpMethod",D?.value||"POST"),placeholder:r("Select HTTP method","kivicare-clinic-management-system"),className:m.httpMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})}}),m.httpMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.httpMethod})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Authentication","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Authentication Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:E,value:E.find(D=>D.value===S.authMethod)||null,onChange:D=>G("authMethod",D?.value||""),placeholder:r("Select authentication method","kivicare-clinic-management-system"),isSearchable:!1,className:m.authMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}}),m.authMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.authMethod})]}),S.authMethod==="apikey"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("API Key Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("API Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.apiKey?"is-invalid":""}`,value:S.apiKey,onChange:D=>G("apiKey",D.target.value),placeholder:r("Enter API key","kivicare-clinic-management-system")}),m.apiKey&&i.jsx("div",{className:"invalid-feedback",children:m.apiKey})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Key Location","kivicare-clinic-management-system")}),console.log(S),i.jsx(ct,{options:O,value:O.find(D=>D.value===S.keyLocation)||O[0],onChange:D=>G("keyLocation",D?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.headerParamName?"is-invalid":""}`,value:S.headerParamName,onChange:D=>G("headerParamName",D.target.value),placeholder:r("Authorization","kivicare-clinic-management-system")}),m.headerParamName&&i.jsx("div",{className:"invalid-feedback",children:m.headerParamName})]})})]})]}),S.authMethod==="basic"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("Basic Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Username","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.username?"is-invalid":""}`,value:S.username,onChange:D=>G("username",D.target.value),placeholder:r("Enter username","kivicare-clinic-management-system")}),m.username&&i.jsx("div",{className:"invalid-feedback",children:m.username})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Password","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.password?"is-invalid":""}`,value:S.password,onChange:D=>G("password",D.target.value),placeholder:r("Enter password","kivicare-clinic-management-system")}),m.password&&i.jsx("div",{className:"invalid-feedback",children:m.password})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Encoding","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.encoding,onChange:D=>G("encoding",D.target.value),placeholder:"Base64",readOnly:!0})]})})]})]}),S.authMethod==="bearer"&&i.jsxs("div",{className:"border p-3 rounded ",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Access Token","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.accessToken?"is-invalid":""}`,value:S.accessToken,onChange:D=>G("accessToken",D.target.value),placeholder:r("Enter access token","kivicare-clinic-management-system")}),m.accessToken&&i.jsx("div",{className:"invalid-feedback",children:m.accessToken})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token Type","kivicare-clinic-management-system")}),i.jsx(ct,{options:L,value:L.find(D=>D.value===S.tokenType)||L[0],onChange:D=>G("tokenType",D?.value||"Bearer"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token Expiry","kivicare-clinic-management-system")}),i.jsx("input",{type:"datetime-local",className:"form-control",value:S.tokenExpiry,onChange:D=>G("tokenExpiry",D.target.value)})]})})]}),i.jsx("h6",{className:"mt-4 mb-3",children:r("OAuth2 Flow (Optional)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Client ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.clientId,onChange:D=>G("clientId",D.target.value),placeholder:r("Enter client ID","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Client Secret","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:S.clientSecret,onChange:D=>G("clientSecret",D.target.value),placeholder:r("Enter client secret","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Authorization URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:S.authUrl,onChange:D=>G("authUrl",D.target.value),placeholder:r("Enter authorization URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:S.tokenUrl,onChange:D=>G("tokenUrl",D.target.value),placeholder:r("Enter token URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Redirect URL / Callback","kivicare-clinic-management-system"),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{id:"redirect-url-tooltip",children:r("This is the callback URL you need to configure in your OAuth2 provider settings. It tells the provider where to send the authorization code after user approval.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ms-1",style:{cursor:"help"}})})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"url",className:"form-control",value:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",onChange:D=>G("redirectUrl",D.target.value),placeholder:r("OAuth2 callback URL","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";G("redirectUrl",D)},title:r("Set default callback URL","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-link"})}),i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:async()=>{try{const D=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";await navigator.clipboard.writeText(D),Te.success(r(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}catch{const $=document.createElement("textarea");$.value=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",document.body.appendChild($),$.select(),document.execCommand("copy"),document.body.removeChild($),Te.success(r(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}},title:r("Copy callback URL to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("strong",{children:r("Important:","kivicare-clinic-management-system")})," ",r(`Copy this URL and paste it as the "Redirect URI" or "Callback URL" in your OAuth2 provider's application settings. This allows the provider to send the authorization code back to this application.`,"kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Scopes","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.scopes,onChange:D=>G("scopes",D.target.value),placeholder:r("Enter scopes (comma separated)","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Refresh Token","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:S.refreshToken,onChange:D=>G("refreshToken",D.target.value),placeholder:r("Enter refresh token","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[" ",r("OAuth2 Token Generation","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:I,disabled:N||!S.clientId||!S.clientSecret||!S.authUrl||!S.tokenUrl,children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Generating...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),r("Generate Access Token","kivicare-clinic-management-system")]})}),S.refreshToken&&i.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:K,disabled:N||!S.refreshToken||!S.tokenUrl,children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Refreshing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-arrow-clockwise me-2"}),r("Refresh Token","kivicare-clinic-management-system")]})})]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:r('Fill in all OAuth2 fields above, then click "Generate Access Token" to start the OAuth2 authorization flow. This will automatically populate the Access Token field. If you have a refresh token, you can use the "Refresh Token" button to get a new access token without going through the full authorization flow again.',"kivicare-clinic-management-system")})]})]}),S.authMethod==="jwt"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("JWT (JSON Web Token)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Issuer (iss)","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.jwtIssuer?"is-invalid":""}`,value:S.jwtIssuer,onChange:D=>G("jwtIssuer",D.target.value),placeholder:r("Enter issuer","kivicare-clinic-management-system")}),m.jwtIssuer&&i.jsx("div",{className:"invalid-feedback",children:m.jwtIssuer})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Subject (sub)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.jwtSubject,onChange:D=>G("jwtSubject",D.target.value),placeholder:r("Enter subject","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Audience (aud)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.jwtAudience,onChange:D=>G("jwtAudience",D.target.value),placeholder:r("Enter audience","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Private Key / Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${m.jwtPrivateKey?"is-invalid":""}`,rows:"4",value:S.jwtPrivateKey,onChange:D=>G("jwtPrivateKey",D.target.value),placeholder:r("Enter private key or secret","kivicare-clinic-management-system"),style:{fontFamily:"monospace"}}),m.jwtPrivateKey&&i.jsx("div",{className:"invalid-feedback",children:m.jwtPrivateKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(ct,{options:q,value:q.find(D=>D.value===S.jwtAlgorithm)||q[0],onChange:D=>G("jwtAlgorithm",D?.value||"HS256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Expiry Duration","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.jwtExpiryDuration?"is-invalid":""}`,value:S.jwtExpiryDuration,onChange:D=>G("jwtExpiryDuration",D.target.value),placeholder:"60",min:"1"}),m.jwtExpiryDuration&&i.jsx("div",{className:"invalid-feedback",children:m.jwtExpiryDuration})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Unit","kivicare-clinic-management-system")}),i.jsx(ct,{options:se,value:se.find(D=>D.value===S.jwtExpiryUnit)||se[0],onChange:D=>G("jwtExpiryUnit",D?.value||"minutes"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})})]})]}),S.authMethod==="hmac"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("HMAC / Signature Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Access Key / Public Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacAccessKey?"is-invalid":""}`,value:S.hmacAccessKey,onChange:D=>G("hmacAccessKey",D.target.value),placeholder:r("Enter access key","kivicare-clinic-management-system")}),m.hmacAccessKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacAccessKey})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.hmacSecretKey?"is-invalid":""}`,value:S.hmacSecretKey,onChange:D=>G("hmacSecretKey",D.target.value),placeholder:r("Enter secret key","kivicare-clinic-management-system")}),m.hmacSecretKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacSecretKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(ct,{options:Q,value:Q.find(D=>D.value===S.hmacAlgorithm)||Q[0],onChange:D=>G("hmacAlgorithm",D?.value||"HMAC-SHA256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Signature Location","kivicare-clinic-management-system")}),i.jsx(ct,{options:V,value:V.find(D=>D.value===S.hmacSignatureLocation)||V[0],onChange:D=>G("hmacSignatureLocation",D?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:D=>({...D,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacHeaderParamName?"is-invalid":""}`,value:S.hmacHeaderParamName,onChange:D=>G("hmacHeaderParamName",D.target.value),placeholder:r("X-Signature","kivicare-clinic-management-system")}),m.hmacHeaderParamName&&i.jsx("div",{className:"invalid-feedback",children:m.hmacHeaderParamName})]})})]})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Sender Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Sender Name / From","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.senderName,onChange:D=>G("senderName",D.target.value),placeholder:r("Enter sender name","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Sender Email / Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:S.senderEmail,onChange:D=>G("senderEmail",D.target.value),placeholder:X()})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"enableSSL",checked:S.enableSSL,onChange:D=>G("enableSSL",D.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"enableSSL",children:r("Enable SSL/TLS","kivicare-clinic-management-system")})]}),i.jsx("span",{className:`badge ${S.enableSSL?"bg-success":"bg-warning"}`,children:S.enableSSL?r("Secure","kivicare-clinic-management-system"):r("Insecure","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Request Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Content Type","kivicare-clinic-management-system")}),i.jsx(ct,{options:R,value:R.find(D=>D.value===S.contentType)||R[0],onChange:D=>G("contentType",D?.value||"application/json"),placeholder:r("Select content type","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:D=>({...D,zIndex:9999})}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>ge("customHeaders"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Header","kivicare-clinic-management-system")]})]}),S.customHeaders.map((D,$)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Header name","kivicare-clinic-management-system"),value:D.key,onChange:te=>ie("customHeaders",$,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Header value","kivicare-clinic-management-system"),value:D.value,onChange:te=>ie("customHeaders",$,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>W("customHeaders",$),children:i.jsx("i",{className:"ph ph-trash"})})})]},$))]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>ge("queryParams"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Parameter","kivicare-clinic-management-system")]})]}),S.queryParams.map((D,$)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Parameter name","kivicare-clinic-management-system"),value:D.key,onChange:te=>ie("queryParams",$,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Parameter value","kivicare-clinic-management-system"),value:D.value,onChange:te=>ie("queryParams",$,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>W("queryParams",$),children:i.jsx("i",{className:"ph ph-trash"})})})]},$))]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Dynamic Variables","kivicare-clinic-management-system")}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{id:"dynamic-variables-tooltip",children:r("Click any variable button to copy it to your clipboard, then paste it in your request body, headers, or query parameters. Variables will be automatically replaced with actual values when the notification is sent.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ",style:{cursor:"help"}})})]}),i.jsx("small",{className:"text-muted",children:r("Click to copy variable to clipboard","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:A.map((D,$)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary d-flex align-items-center gap-1",onClick:()=>le(D.name),title:`${D.description} - ${r("Example:","kivicare-clinic-management-system")} ${D.example}`,children:[i.jsx("code",{className:"small text-white",children:`{{${D.name}}}`}),i.jsx("i",{className:"ph ph-copy"})]},$))})]}),ue()&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Request Body","kivicare-clinic-management-system")}),S.contentType==="application/x-www-form-urlencoded"?i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("small",{className:"text-muted",children:r("Add key-value pairs for the request body","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>ge("requestBodyFields"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Field","kivicare-clinic-management-system")]})]}),S.requestBodyFields&&S.requestBodyFields.map((D,$)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Field name","kivicare-clinic-management-system"),value:D.key,onChange:te=>ie("requestBodyFields",$,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Field value","kivicare-clinic-management-system"),value:D.value,onChange:te=>ie("requestBodyFields",$,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>W("requestBodyFields",$),children:i.jsx("i",{className:"ph ph-trash"})})})]},$))]}):i.jsx("textarea",{className:"form-control",rows:"8",value:S.requestBody,onChange:D=>G("requestBody",D.target.value),placeholder:J(),style:{fontFamily:"monospace"}}),i.jsx("div",{className:"form-text",children:r("Use the dynamic variables from above in your request body. Copy variables by clicking the copy button next to each variable.","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:j||s.isPending||a.isPending,children:[i.jsx("i",{className:"ph ph-floppy-disk me-1"}),j||s.isPending||a.isPending?r("Saving...","kivicare-clinic-management-system"):r("Save Configuration","kivicare-clinic-management-system")]}),i.jsxs("button",{type:"button",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-lightning me-1"}),r("Test Connection","kivicare-clinic-management-system")]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-secondary",children:r("Cancel","kivicare-clinic-management-system")})]})]})]})})},Oae=()=>i.jsxs("div",{className:"custom-notification-test",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(C,{width:"250px",height:"1.75rem",className:"mb-2"}),i.jsx(C,{width:"150px",height:"1rem"})]}),i.jsx(C,{width:"140px",height:"2.25rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"200px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(C,{width:"100%",height:"120px",style:{borderRadius:"4px"}})]}),i.jsx(C,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})]})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(C,{width:"160px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"100px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"140px",height:"1rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"40px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"60px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"50px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"70px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(C,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"180px",height:"1rem"})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx(C,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(C,{width:"120px",height:"1rem"})]})]})]})})]})]}),Fae=()=>{const{id:t}=Gt(),[e,n]=f.useState(null),{data:s,isLoading:a}=KR(t),l=WX(),{register:o,handleSubmit:c,formState:{errors:d},watch:m}=en({defaultValues:{recipient:"",message:""}}),u=m("message"),p=async v=>{try{const y=await l.mutateAsync({id:parseInt(t),data:{recipient:v.recipient,message:v.message}});n({success:!0,message:y.message||r("Test notification sent successfully!","kivicare-clinic-management-system"),timestamp:new Date().toLocaleString(),details:y.data||null}),Te.success(r("Test notification sent successfully!","kivicare-clinic-management-system"))}catch(y){console.error("Test notification error:",y);const b=y.response?.data?.message||y.message||r("Failed to send test notification","kivicare-clinic-management-system");n({success:!1,message:b,timestamp:new Date().toLocaleString(),details:y.response?.data?.data||null}),Te.error(b)}};return i.jsx("div",{className:"custom-notification-test",children:a?i.jsx(Oae,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:r("Test Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:s?.data?.server_name?`${s.data.server_name} (ID: ${t})`:`${r("Service ID:","kivicare-clinic-management-system")} ${t}`})]}),i.jsxs(ht,{to:"/setting/custom-notification",className:"btn btn-outline-secondary",children:[i.jsx("i",{className:"ph ph-arrow-left me-1"}),r("Back to Services","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-8",children:[i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Send Test Notification","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:c(p),children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Test Recipient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${d.recipient?"is-invalid":""}`,placeholder:r("Enter email, phone number, or device token","kivicare-clinic-management-system"),...o("recipient",{required:r("Recipient is required","kivicare-clinic-management-system")})}),d.recipient&&i.jsx("div",{className:"invalid-feedback",children:d.recipient.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Test Message","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${d.message?"is-invalid":""}`,rows:"4",placeholder:r("Enter test message content","kivicare-clinic-management-system"),...o("message",{required:r("Message is required","kivicare-clinic-management-system"),minLength:{value:1,message:r("Message cannot be empty","kivicare-clinic-management-system")}})}),d.message&&i.jsx("div",{className:"invalid-feedback",children:d.message.message})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l.isPending||!u?.trim(),children:l.isPending?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Sending...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-paper-plane-tilt me-1"}),r("Send Test","kivicare-clinic-management-system")]})})]})})]}),e&&i.jsx("div",{className:`alert ${e.success?"alert-success":"alert-danger"} mt-3`,children:i.jsxs("div",{className:"d-flex align-items-start",children:[i.jsx("i",{className:`ph ${e.success?"ph-check-circle":"ph-x-circle"} me-2 mt-1`}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("strong",{children:e.message}),i.jsx("br",{}),i.jsxs("small",{children:[r("Sent at:","kivicare-clinic-management-system")," ",e.timestamp]}),e.details&&i.jsxs("div",{className:"mt-2",children:[i.jsx("small",{className:"text-muted",children:i.jsx("strong",{children:r("Details:","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"small p-2 mt-1 rounded",style:{textWrap:"wrap"},children:JSON.stringify(e.details,null,2)})]})]})]})})]}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Service Information","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:s?.data?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Service Name","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:s.data.server_name})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Type","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${g(s.data.server_type)}`,children:h(s.data.server_type)})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Status","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${s.data.is_active?"bg-success":"bg-secondary"}`,children:s.data.is_active?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Server URL","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-break",children:s.data.server_url})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Authentication","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small",children:x(s.data.auth_method)})]})]}):i.jsxs("div",{className:"text-center py-3",children:[i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"small text-muted mt-2 mb-0",children:r("Loading service info...","kivicare-clinic-management-system")})]})})]})})]})]})});function h(v){return{sms:"SMS",email:"Email",webhook:"Webhook","custom-api":"Custom API","push-notification":"Push Notification"}[v]||v}function g(v){return{sms:"bg-primary",email:"bg-info",webhook:"bg-warning","custom-api":"bg-secondary","push-notification":"bg-success"}[v]||"bg-secondary"}function x(v){return{none:r("No Authentication","kivicare-clinic-management-system"),apikey:r("API Key","kivicare-clinic-management-system"),basic:r("Basic Auth","kivicare-clinic-management-system"),bearer:r("Bearer Token","kivicare-clinic-management-system"),jwt:r("JWT","kivicare-clinic-management-system"),hmac:r("HMAC","kivicare-clinic-management-system")}[v]||v}},Lae=()=>(f.useEffect(()=>{(()=>{try{let e=new URLSearchParams(window.location.search),n=e.get("code"),s=e.get("error"),a=e.get("error_description");if(!n&&!s&&window.location.hash){const l=new URLSearchParams(window.location.hash.substring(1));n=l.get("code"),s=l.get("error"),a=l.get("error_description")}s?window.opener?.postMessage({type:"oauth2_error",error:a||s},window.location.origin):n?window.opener?.postMessage({type:"oauth2_success",code:n},window.location.origin):window.opener?.postMessage({type:"oauth2_error",error:"No authorization code received"},window.location.origin),setTimeout(()=>{window.close()},1e3)}catch(e){console.error("OAuth2 callback error:",e),window.opener?.postMessage({type:"oauth2_error",error:"Callback processing failed: "+e.message},window.location.origin),setTimeout(()=>{window.close()},1e3)}})()},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:r("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("Please wait while we process your authorization. This window will close automatically.","kivicare-clinic-management-system")})]})})),$ae=()=>{const t=hn(),[e,n]=f.useState(!1),[s,a]=f.useState([]),[l,o]=f.useState({}),[c,d]=f.useState(""),[m,u]=f.useState(""),{data:p}=_n(),h=p?.data?.hideUtilityLinks,{data:g,isLoading:x,error:v}=wn("settings","email-template",{},{enabled:!0}),y=un("settings","email-template"),b=Ln(),k=M=>{const R=[];return!M||typeof M!="object"||Object.keys(M).forEach(O=>{(Array.isArray(M[O])?M[O]:[]).forEach(q=>{R.push({...q,user_type:O})})}),R};f.useEffect(()=>{if(!g?.status||!g.data){a([]),o({});return}a(k(g.data.data)),o(g.data.dynamicKey||{})},[g]);const w=()=>{n(!1)},S=M=>{t(`/setting/email-template/edit/${M.ID}`)},j=()=>{t("/setting/email-template/test")},T=async(M,R)=>{const O={ID:M,post_status:R==="publish"?"draft":"publish"};y.mutate(O,{onError:L=>{console.error("Error updating status:",L),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to update template status","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}})},N=M=>{console.log("sending test mail"),alert(r("Test mail send","kivicare-clinic-management-system"))},_=f.useMemo(()=>[...new Set(s.map(R=>R.user_type))].sort(),[s]),A=f.useMemo(()=>{let M=s;return c&&(M=M.filter(R=>R.post_title?.toLowerCase().includes(c.toLowerCase()))),m&&(M=M.filter(R=>R.user_type===m)),M},[s,c,m]),P=f.useMemo(()=>[b.accessor("templates",{id:"templates",header:()=>r("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:M.row.original.post_title})})}),b.accessor("recipient",{id:"recipient",header:()=>r("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:M.row.original.user_type})})}),b.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx(on,{checked:M.row.original.post_status==="publish",onChange:()=>T(M.row.original.ID,M.row.original.post_status),inputClassName:"text-center"})}),b.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:M=>i.jsx("button",{onClick:()=>S(M.row.original),className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:r("Manage","kivicare-clinic-management-system")})})],[x,l]);if(v){let M;typeof v=="string"?M=v:v?.response?.data?.message?M=v.response.data.message:v?.message?M=v.message:M=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(M,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const E=({type:M,title:R})=>i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:R}),i.jsx("div",{children:i.jsxs("button",{onClick:w,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Enter email id","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:r('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system")})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:w,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>N(),children:r("Test","kivicare-clinic-management-system")})]})]});return x?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:10,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-email-template",role:"tabpanel","aria-labelledby":"v-pills-email-template-tab",tabIndex:"0",children:e?i.jsx(E,{type:"email",title:r("Test Email","kivicare-clinic-management-system")}):i.jsxs("div",{className:"email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("Email Template","kivicare-clinic-management-system")," ",h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/email-template-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx("button",{type:"button",onClick:j,className:"btn btn-primary",children:r("Send Test Email","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"row mb-3 g-3 justify-content-end",children:[i.jsx("div",{className:"col-md-2",children:i.jsx("div",{className:"input-search-select",children:i.jsxs("div",{className:"input-group input-group-search ",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search templates...","kivicare-clinic-management-system"),value:c,onChange:M=>d(M.target.value)}),c&&i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(""),children:i.jsx("i",{className:"ph ph-x"})})]})})}),i.jsx("div",{className:"col-md-2",children:i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",value:m?{value:m,label:m.charAt(0).toUpperCase()+m.slice(1)}:{value:"",label:r("All Recipients","kivicare-clinic-management-system")},onChange:M=>u(M?.value||""),options:[{value:"",label:r("All Recipients","kivicare-clinic-management-system")},..._.map(M=>({value:M,label:M.charAt(0).toUpperCase()+M.slice(1)}))],isClearable:!1,isSearchable:!1,styles:{menuPortal:M=>({...M,zIndex:9999})}})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:A,columns:P,enableSelection:!1,isLoading:x})})]})})};var nM=typeof global=="object"&&global&&global.Object===Object&&global,Bae=typeof self=="object"&&self&&self.Object===Object&&self,er=nM||Bae||Function("return this")(),bl=er.Symbol,iM=Object.prototype,qae=iM.hasOwnProperty,Hae=iM.toString,Rd=bl?bl.toStringTag:void 0;function zae(t){var e=qae.call(t,Rd),n=t[Rd];try{t[Rd]=void 0;var s=!0}catch{}var a=Hae.call(t);return s&&(e?t[Rd]=n:delete t[Rd]),a}var Vae=Object.prototype,Uae=Vae.toString;function Wae(t){return Uae.call(t)}var Kae="[object Null]",Gae="[object Undefined]",KC=bl?bl.toStringTag:void 0;function cd(t){return t==null?t===void 0?Gae:Kae:KC&&KC in Object(t)?zae(t):Wae(t)}function Pr(t){return t!=null&&typeof t=="object"}var po=Array.isArray;function Sl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function sM(t){return t}var Yae="[object AsyncFunction]",Qae="[object Function]",Zae="[object GeneratorFunction]",Xae="[object Proxy]";function zk(t){if(!Sl(t))return!1;var e=cd(t);return e==Qae||e==Zae||e==Yae||e==Xae}var rx=er["__core-js_shared__"],GC=(function(){var t=/[^.]+$/.exec(rx&&rx.keys&&rx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Jae(t){return!!GC&&GC in t}var ere=Function.prototype,tre=ere.toString;function Po(t){if(t!=null){try{return tre.call(t)}catch{}try{return t+""}catch{}}return""}var nre=/[\\^$.*+?()[\]{}|]/g,ire=/^\[object .+?Constructor\]$/,sre=Function.prototype,are=Object.prototype,rre=sre.toString,lre=are.hasOwnProperty,ore=RegExp("^"+rre.call(lre).replace(nre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cre(t){if(!Sl(t)||Jae(t))return!1;var e=zk(t)?ore:ire;return e.test(Po(t))}function dre(t,e){return t?.[e]}function Mo(t,e){var n=dre(t,e);return cre(n)?n:void 0}var Vy=Mo(er,"WeakMap"),YC=Object.create,mre=(function(){function t(){}return function(e){if(!Sl(e))return{};if(YC)return YC(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function ure(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function hre(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var pre=800,gre=16,fre=Date.now;function vre(t){var e=0,n=0;return function(){var s=fre(),a=gre-(s-n);if(n=s,a>0){if(++e>=pre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xre(t){return function(){return t}}var og=(function(){try{var t=Mo(Object,"defineProperty");return t({},"",{}),t}catch{}})(),yre=og?function(t,e){return og(t,"toString",{configurable:!0,enumerable:!1,value:xre(e),writable:!0})}:sM,bre=vre(yre);function wre(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var kre=9007199254740991,jre=/^(?:0|[1-9]\d*)$/;function aM(t,e){var n=typeof t;return e=e??kre,!!e&&(n=="number"||n!="symbol"&&jre.test(t))&&t>-1&&t%1==0&&t<e}function Vk(t,e,n){e=="__proto__"&&og?og(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function pu(t,e){return t===e||t!==t&&e!==e}var Nre=Object.prototype,Cre=Nre.hasOwnProperty;function rM(t,e,n){var s=t[e];(!(Cre.call(t,e)&&pu(s,n))||n===void 0&&!(e in t))&&Vk(t,e,n)}function Sre(t,e,n,s){var a=!n;n||(n={});for(var l=-1,o=e.length;++l<o;){var c=e[l],d=void 0;d===void 0&&(d=t[c]),a?Vk(n,c,d):rM(n,c,d)}return n}var QC=Math.max;function _re(t,e,n){return e=QC(e===void 0?t.length-1:e,0),function(){for(var s=arguments,a=-1,l=QC(s.length-e,0),o=Array(l);++a<l;)o[a]=s[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=s[a];return c[e]=n(o),ure(t,this,c)}}function Ere(t,e){return bre(_re(t,e,sM),t+"")}var Tre=9007199254740991;function lM(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Tre}function gf(t){return t!=null&&lM(t.length)&&!zk(t)}function Are(t,e,n){if(!Sl(n))return!1;var s=typeof e;return(s=="number"?gf(n)&&aM(e,n.length):s=="string"&&e in n)?pu(n[e],t):!1}function Dre(t){return Ere(function(e,n){var s=-1,a=n.length,l=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(l=t.length>3&&typeof l=="function"?(a--,l):void 0,o&&Are(n[0],n[1],o)&&(l=a<3?void 0:l,a=1),e=Object(e);++s<a;){var c=n[s];c&&t(e,c,s,l)}return e})}var Rre=Object.prototype;function Uk(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Rre;return t===n}function Pre(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var Mre="[object Arguments]";function ZC(t){return Pr(t)&&cd(t)==Mre}var oM=Object.prototype,Ire=oM.hasOwnProperty,Ore=oM.propertyIsEnumerable,Uy=ZC((function(){return arguments})())?ZC:function(t){return Pr(t)&&Ire.call(t,"callee")&&!Ore.call(t,"callee")};function Fre(){return!1}var cM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,XC=cM&&typeof module=="object"&&module&&!module.nodeType&&module,Lre=XC&&XC.exports===cM,JC=Lre?er.Buffer:void 0,$re=JC?JC.isBuffer:void 0,Mm=$re||Fre,Bre="[object Arguments]",qre="[object Array]",Hre="[object Boolean]",zre="[object Date]",Vre="[object Error]",Ure="[object Function]",Wre="[object Map]",Kre="[object Number]",Gre="[object Object]",Yre="[object RegExp]",Qre="[object Set]",Zre="[object String]",Xre="[object WeakMap]",Jre="[object ArrayBuffer]",ele="[object DataView]",tle="[object Float32Array]",nle="[object Float64Array]",ile="[object Int8Array]",sle="[object Int16Array]",ale="[object Int32Array]",rle="[object Uint8Array]",lle="[object Uint8ClampedArray]",ole="[object Uint16Array]",cle="[object Uint32Array]",Bn={};Bn[tle]=Bn[nle]=Bn[ile]=Bn[sle]=Bn[ale]=Bn[rle]=Bn[lle]=Bn[ole]=Bn[cle]=!0;Bn[Bre]=Bn[qre]=Bn[Jre]=Bn[Hre]=Bn[ele]=Bn[zre]=Bn[Vre]=Bn[Ure]=Bn[Wre]=Bn[Kre]=Bn[Gre]=Bn[Yre]=Bn[Qre]=Bn[Zre]=Bn[Xre]=!1;function dle(t){return Pr(t)&&lM(t.length)&&!!Bn[cd(t)]}function Wk(t){return function(e){return t(e)}}var dM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dm=dM&&typeof module=="object"&&module&&!module.nodeType&&module,mle=dm&&dm.exports===dM,lx=mle&&nM.process,qc=(function(){try{var t=dm&&dm.require&&dm.require("util").types;return t||lx&&lx.binding&&lx.binding("util")}catch{}})(),eS=qc&&qc.isTypedArray,Kk=eS?Wk(eS):dle,ule=Object.prototype,hle=ule.hasOwnProperty;function mM(t,e){var n=po(t),s=!n&&Uy(t),a=!n&&!s&&Mm(t),l=!n&&!s&&!a&&Kk(t),o=n||s||a||l,c=o?Pre(t.length,String):[],d=c.length;for(var m in t)(e||hle.call(t,m))&&!(o&&(m=="length"||a&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||aM(m,d)))&&c.push(m);return c}function uM(t,e){return function(n){return t(e(n))}}var ple=uM(Object.keys,Object),gle=Object.prototype,fle=gle.hasOwnProperty;function vle(t){if(!Uk(t))return ple(t);var e=[];for(var n in Object(t))fle.call(t,n)&&n!="constructor"&&e.push(n);return e}function xle(t){return gf(t)?mM(t):vle(t)}function yle(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ble=Object.prototype,wle=ble.hasOwnProperty;function kle(t){if(!Sl(t))return yle(t);var e=Uk(t),n=[];for(var s in t)s=="constructor"&&(e||!wle.call(t,s))||n.push(s);return n}function hM(t){return gf(t)?mM(t,!0):kle(t)}var Im=Mo(Object,"create");function jle(){this.__data__=Im?Im(null):{},this.size=0}function Nle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Cle="__lodash_hash_undefined__",Sle=Object.prototype,_le=Sle.hasOwnProperty;function Ele(t){var e=this.__data__;if(Im){var n=e[t];return n===Cle?void 0:n}return _le.call(e,t)?e[t]:void 0}var Tle=Object.prototype,Ale=Tle.hasOwnProperty;function Dle(t){var e=this.__data__;return Im?e[t]!==void 0:Ale.call(e,t)}var Rle="__lodash_hash_undefined__";function Ple(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Im&&e===void 0?Rle:e,this}function go(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}go.prototype.clear=jle;go.prototype.delete=Nle;go.prototype.get=Ele;go.prototype.has=Dle;go.prototype.set=Ple;function Mle(){this.__data__=[],this.size=0}function ff(t,e){for(var n=t.length;n--;)if(pu(t[n][0],e))return n;return-1}var Ile=Array.prototype,Ole=Ile.splice;function Fle(t){var e=this.__data__,n=ff(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():Ole.call(e,n,1),--this.size,!0}function Lle(t){var e=this.__data__,n=ff(e,t);return n<0?void 0:e[n][1]}function $le(t){return ff(this.__data__,t)>-1}function Ble(t,e){var n=this.__data__,s=ff(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function Br(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Br.prototype.clear=Mle;Br.prototype.delete=Fle;Br.prototype.get=Lle;Br.prototype.has=$le;Br.prototype.set=Ble;var Om=Mo(er,"Map");function qle(){this.size=0,this.__data__={hash:new go,map:new(Om||Br),string:new go}}function Hle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vf(t,e){var n=t.__data__;return Hle(e)?n[typeof e=="string"?"string":"hash"]:n.map}function zle(t){var e=vf(this,t).delete(t);return this.size-=e?1:0,e}function Vle(t){return vf(this,t).get(t)}function Ule(t){return vf(this,t).has(t)}function Wle(t,e){var n=vf(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function Io(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Io.prototype.clear=qle;Io.prototype.delete=zle;Io.prototype.get=Vle;Io.prototype.has=Ule;Io.prototype.set=Wle;function Kle(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var pM=uM(Object.getPrototypeOf,Object),Gle="[object Object]",Yle=Function.prototype,Qle=Object.prototype,gM=Yle.toString,Zle=Qle.hasOwnProperty,Xle=gM.call(Object);function Jle(t){if(!Pr(t)||cd(t)!=Gle)return!1;var e=pM(t);if(e===null)return!0;var n=Zle.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gM.call(n)==Xle}function eoe(){this.__data__=new Br,this.size=0}function toe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function noe(t){return this.__data__.get(t)}function ioe(t){return this.__data__.has(t)}var soe=200;function aoe(t,e){var n=this.__data__;if(n instanceof Br){var s=n.__data__;if(!Om||s.length<soe-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new Io(s)}return n.set(t,e),this.size=n.size,this}function Ba(t){var e=this.__data__=new Br(t);this.size=e.size}Ba.prototype.clear=eoe;Ba.prototype.delete=toe;Ba.prototype.get=noe;Ba.prototype.has=ioe;Ba.prototype.set=aoe;var fM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tS=fM&&typeof module=="object"&&module&&!module.nodeType&&module,roe=tS&&tS.exports===fM,nS=roe?er.Buffer:void 0,iS=nS?nS.allocUnsafe:void 0;function vM(t,e){if(e)return t.slice();var n=t.length,s=iS?iS(n):new t.constructor(n);return t.copy(s),s}function loe(t,e){for(var n=-1,s=t==null?0:t.length,a=0,l=[];++n<s;){var o=t[n];e(o,n,t)&&(l[a++]=o)}return l}function ooe(){return[]}var coe=Object.prototype,doe=coe.propertyIsEnumerable,sS=Object.getOwnPropertySymbols,moe=sS?function(t){return t==null?[]:(t=Object(t),loe(sS(t),function(e){return doe.call(t,e)}))}:ooe;function uoe(t,e,n){var s=e(t);return po(t)?s:Kle(s,n(t))}function Wy(t){return uoe(t,xle,moe)}var Ky=Mo(er,"DataView"),Gy=Mo(er,"Promise"),Yy=Mo(er,"Set"),aS="[object Map]",hoe="[object Object]",rS="[object Promise]",lS="[object Set]",oS="[object WeakMap]",cS="[object DataView]",poe=Po(Ky),goe=Po(Om),foe=Po(Gy),voe=Po(Yy),xoe=Po(Vy),la=cd;(Ky&&la(new Ky(new ArrayBuffer(1)))!=cS||Om&&la(new Om)!=aS||Gy&&la(Gy.resolve())!=rS||Yy&&la(new Yy)!=lS||Vy&&la(new Vy)!=oS)&&(la=function(t){var e=cd(t),n=e==hoe?t.constructor:void 0,s=n?Po(n):"";if(s)switch(s){case poe:return cS;case goe:return aS;case foe:return rS;case voe:return lS;case xoe:return oS}return e});var yoe=Object.prototype,boe=yoe.hasOwnProperty;function woe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&boe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var cg=er.Uint8Array;function Gk(t){var e=new t.constructor(t.byteLength);return new cg(e).set(new cg(t)),e}function koe(t,e){var n=Gk(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var joe=/\w*$/;function Noe(t){var e=new t.constructor(t.source,joe.exec(t));return e.lastIndex=t.lastIndex,e}var dS=bl?bl.prototype:void 0,mS=dS?dS.valueOf:void 0;function Coe(t){return mS?Object(mS.call(t)):{}}function xM(t,e){var n=e?Gk(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Soe="[object Boolean]",_oe="[object Date]",Eoe="[object Map]",Toe="[object Number]",Aoe="[object RegExp]",Doe="[object Set]",Roe="[object String]",Poe="[object Symbol]",Moe="[object ArrayBuffer]",Ioe="[object DataView]",Ooe="[object Float32Array]",Foe="[object Float64Array]",Loe="[object Int8Array]",$oe="[object Int16Array]",Boe="[object Int32Array]",qoe="[object Uint8Array]",Hoe="[object Uint8ClampedArray]",zoe="[object Uint16Array]",Voe="[object Uint32Array]";function Uoe(t,e,n){var s=t.constructor;switch(e){case Moe:return Gk(t);case Soe:case _oe:return new s(+t);case Ioe:return koe(t);case Ooe:case Foe:case Loe:case $oe:case Boe:case qoe:case Hoe:case zoe:case Voe:return xM(t,n);case Eoe:return new s;case Toe:case Roe:return new s(t);case Aoe:return Noe(t);case Doe:return new s;case Poe:return Coe(t)}}function yM(t){return typeof t.constructor=="function"&&!Uk(t)?mre(pM(t)):{}}var Woe="[object Map]";function Koe(t){return Pr(t)&&la(t)==Woe}var uS=qc&&qc.isMap,Goe=uS?Wk(uS):Koe,Yoe="[object Set]";function Qoe(t){return Pr(t)&&la(t)==Yoe}var hS=qc&&qc.isSet,Zoe=hS?Wk(hS):Qoe,Xoe=1,bM="[object Arguments]",Joe="[object Array]",ece="[object Boolean]",tce="[object Date]",nce="[object Error]",wM="[object Function]",ice="[object GeneratorFunction]",sce="[object Map]",ace="[object Number]",kM="[object Object]",rce="[object RegExp]",lce="[object Set]",oce="[object String]",cce="[object Symbol]",dce="[object WeakMap]",mce="[object ArrayBuffer]",uce="[object DataView]",hce="[object Float32Array]",pce="[object Float64Array]",gce="[object Int8Array]",fce="[object Int16Array]",vce="[object Int32Array]",xce="[object Uint8Array]",yce="[object Uint8ClampedArray]",bce="[object Uint16Array]",wce="[object Uint32Array]",Rn={};Rn[bM]=Rn[Joe]=Rn[mce]=Rn[uce]=Rn[ece]=Rn[tce]=Rn[hce]=Rn[pce]=Rn[gce]=Rn[fce]=Rn[vce]=Rn[sce]=Rn[ace]=Rn[kM]=Rn[rce]=Rn[lce]=Rn[oce]=Rn[cce]=Rn[xce]=Rn[yce]=Rn[bce]=Rn[wce]=!0;Rn[nce]=Rn[wM]=Rn[dce]=!1;function Zh(t,e,n,s,a,l){var o,c=e&Xoe;if(o!==void 0)return o;if(!Sl(t))return t;var d=po(t);if(d)o=woe(t);else{var m=la(t),u=m==wM||m==ice;if(Mm(t))return vM(t,c);if(m==kM||m==bM||u&&!a)o=u?{}:yM(t);else{if(!Rn[m])return a?t:{};o=Uoe(t,m,c)}}l||(l=new Ba);var p=l.get(t);if(p)return p;l.set(t,o),Zoe(t)?t.forEach(function(x){o.add(Zh(x,e,n,x,t,l))}):Goe(t)&&t.forEach(function(x,v){o.set(v,Zh(x,e,n,v,t,l))});var h=Wy,g=d?void 0:h(t);return wre(g||t,function(x,v){g&&(v=x,x=t[v]),rM(o,v,Zh(x,e,n,v,t,l))}),o}var kce=1,jce=4;function kc(t){return Zh(t,kce|jce)}var Nce="__lodash_hash_undefined__";function Cce(t){return this.__data__.set(t,Nce),this}function Sce(t){return this.__data__.has(t)}function dg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Io;++e<n;)this.add(t[e])}dg.prototype.add=dg.prototype.push=Cce;dg.prototype.has=Sce;function _ce(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function Ece(t,e){return t.has(e)}var Tce=1,Ace=2;function jM(t,e,n,s,a,l){var o=n&Tce,c=t.length,d=e.length;if(c!=d&&!(o&&d>c))return!1;var m=l.get(t),u=l.get(e);if(m&&u)return m==e&&u==t;var p=-1,h=!0,g=n&Ace?new dg:void 0;for(l.set(t,e),l.set(e,t);++p<c;){var x=t[p],v=e[p];if(s)var y=o?s(v,x,p,e,t,l):s(x,v,p,t,e,l);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!_ce(e,function(b,k){if(!Ece(g,k)&&(x===b||a(x,b,n,s,l)))return g.push(k)})){h=!1;break}}else if(!(x===v||a(x,v,n,s,l))){h=!1;break}}return l.delete(t),l.delete(e),h}function Dce(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}function Rce(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var Pce=1,Mce=2,Ice="[object Boolean]",Oce="[object Date]",Fce="[object Error]",Lce="[object Map]",$ce="[object Number]",Bce="[object RegExp]",qce="[object Set]",Hce="[object String]",zce="[object Symbol]",Vce="[object ArrayBuffer]",Uce="[object DataView]",pS=bl?bl.prototype:void 0,ox=pS?pS.valueOf:void 0;function Wce(t,e,n,s,a,l,o){switch(n){case Uce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vce:return!(t.byteLength!=e.byteLength||!l(new cg(t),new cg(e)));case Ice:case Oce:case $ce:return pu(+t,+e);case Fce:return t.name==e.name&&t.message==e.message;case Bce:case Hce:return t==e+"";case Lce:var c=Dce;case qce:var d=s&Pce;if(c||(c=Rce),t.size!=e.size&&!d)return!1;var m=o.get(t);if(m)return m==e;s|=Mce,o.set(t,e);var u=jM(c(t),c(e),s,a,l,o);return o.delete(t),u;case zce:if(ox)return ox.call(t)==ox.call(e)}return!1}var Kce=1,Gce=Object.prototype,Yce=Gce.hasOwnProperty;function Qce(t,e,n,s,a,l){var o=n&Kce,c=Wy(t),d=c.length,m=Wy(e),u=m.length;if(d!=u&&!o)return!1;for(var p=d;p--;){var h=c[p];if(!(o?h in e:Yce.call(e,h)))return!1}var g=l.get(t),x=l.get(e);if(g&&x)return g==e&&x==t;var v=!0;l.set(t,e),l.set(e,t);for(var y=o;++p<d;){h=c[p];var b=t[h],k=e[h];if(s)var w=o?s(k,b,h,e,t,l):s(b,k,h,t,e,l);if(!(w===void 0?b===k||a(b,k,n,s,l):w)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var S=t.constructor,j=e.constructor;S!=j&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof j=="function"&&j instanceof j)&&(v=!1)}return l.delete(t),l.delete(e),v}var Zce=1,gS="[object Arguments]",fS="[object Array]",xh="[object Object]",Xce=Object.prototype,vS=Xce.hasOwnProperty;function Jce(t,e,n,s,a,l){var o=po(t),c=po(e),d=o?fS:la(t),m=c?fS:la(e);d=d==gS?xh:d,m=m==gS?xh:m;var u=d==xh,p=m==xh,h=d==m;if(h&&Mm(t)){if(!Mm(e))return!1;o=!0,u=!1}if(h&&!u)return l||(l=new Ba),o||Kk(t)?jM(t,e,n,s,a,l):Wce(t,e,d,n,s,a,l);if(!(n&Zce)){var g=u&&vS.call(t,"__wrapped__"),x=p&&vS.call(e,"__wrapped__");if(g||x){var v=g?t.value():t,y=x?e.value():e;return l||(l=new Ba),a(v,y,n,s,l)}}return h?(l||(l=new Ba),Qce(t,e,n,s,a,l)):!1}function NM(t,e,n,s,a){return t===e?!0:t==null||e==null||!Pr(t)&&!Pr(e)?t!==t&&e!==e:Jce(t,e,n,s,NM,a)}function ede(t){return function(e,n,s){for(var a=-1,l=Object(e),o=s(e),c=o.length;c--;){var d=o[++a];if(n(l[d],d,l)===!1)break}return e}}var tde=ede();function Qy(t,e,n){(n!==void 0&&!pu(t[e],n)||n===void 0&&!(e in t))&&Vk(t,e,n)}function nde(t){return Pr(t)&&gf(t)}function Zy(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function ide(t){return Sre(t,hM(t))}function sde(t,e,n,s,a,l,o){var c=Zy(t,n),d=Zy(e,n),m=o.get(d);if(m){Qy(t,n,m);return}var u=l?l(c,d,n+"",t,e,o):void 0,p=u===void 0;if(p){var h=po(d),g=!h&&Mm(d),x=!h&&!g&&Kk(d);u=d,h||g||x?po(c)?u=c:nde(c)?u=hre(c):g?(p=!1,u=vM(d,!0)):x?(p=!1,u=xM(d,!0)):u=[]:Jle(d)||Uy(d)?(u=c,Uy(c)?u=ide(c):(!Sl(c)||zk(c))&&(u=yM(d))):p=!1}p&&(o.set(d,u),a(u,d,s,l,o),o.delete(d)),Qy(t,n,u)}function CM(t,e,n,s,a){t!==e&&tde(e,function(l,o){if(a||(a=new Ba),Sl(l))sde(t,e,o,n,CM,s,a);else{var c=s?s(Zy(t,o),l,o+"",t,e,a):void 0;c===void 0&&(c=l),Qy(t,o,c)}},hM)}function Gr(t,e){return NM(t,e)}var ul=Dre(function(t,e,n){CM(t,e,n)}),_t=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(_t||{});class Ga{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const a=_t.TYPE&_t.ATTRIBUTE;this.scope=s.scope!=null?s.scope&_t.LEVEL|a:_t.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class jc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const SM=class Xy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const a=this.query(n);if(a==null)throw new jc(`Unable to create ${n} blot`);const l=a,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:l.create(s),c=new l(e,o,s);return Xy.blots.set(c.domNode,c),c}find(e,n=!1){return Xy.find(e,n)}query(e,n=_t.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&_t.LEVEL&_t.BLOCK?s=this.types.block:e&_t.LEVEL&_t.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(s=this.classes[a],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&_t.LEVEL&s.scope&&n&_t.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,a="attrName"in n;if(!s&&!a)throw new jc("Invalid definition");if(s&&n.blotName==="abstract")throw new jc("Cannot register abstract class");const l=s?n.blotName:a?n.attrName:void 0;return this.types[l]=n,a?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};SM.blots=new WeakMap;let Hc=SM;function xS(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class ade extends Ga{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){xS(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(xS(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const wa=ade;function cx(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class rde extends Ga{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[cx(this.keyName)]=n,!0):!1}remove(e){e.style[cx(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[cx(this.keyName)];return this.canAdd(e,n)?n:""}}const _l=rde;class lde{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Hc.find(this.domNode);if(e==null)return;const n=Ga.keys(this.domNode),s=wa.keys(this.domNode),a=_l.keys(this.domNode);n.concat(s).concat(a).forEach(l=>{const o=e.scroll.query(l,_t.ATTRIBUTE);o instanceof Ga&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const xf=lde,_M=class{constructor(e,n){this.scroll=e,this.domNode=n,Hc.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new jc("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Hc.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,a){const l=this.isolate(e,n);if(this.scroll.query(s,_t.BLOT)!=null&&a)l.wrap(s,a);else if(this.scroll.query(s,_t.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);l.wrap(o),o.format(s,a)}}insertAt(e,n,s){const a=s==null?this.scroll.create("text",n):this.scroll.create(n,s),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new jc(`Cannot wrap ${e}`);return s.appendChild(this),s}};_M.blotName="abstract";let EM=_M;const TM=class extends EM{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};TM.scope=_t.INLINE_BLOT;let ode=TM;const Oi=ode;class cde{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),a=0;for(;s;){if(s===e)return a;a+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let a=s();for(;a;){const l=a.length();if(e<l||n&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[a,l]=this.find(e);let o=e-l;const c=this.iterator(a);let d=c();for(;d&&o<e+n;){const m=d.length();e>o?s(d,e-o,Math.min(n,o+m-e)):s(d,0,Math.min(m,e+n-o)),o+=m,d=c()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let a=s();for(;a;)n=e(n,a),a=s();return n}}function yS(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(_t.INLINE);return Array.from(t.childNodes).forEach(a=>{s.domNode.appendChild(a)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const AM=class Ur extends EM{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ur.uiClass&&this.uiNode.classList.add(Ur.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new cde,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=yS(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof jc)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,a,l)=>{s.deleteAt(a,l)})}descendant(e,n=0){const[s,a]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,a]:s instanceof Ur?s.descendant(e,a):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let a=[],l=s;return this.children.forEachAt(n,s,(o,c,d)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&a.push(o),o instanceof Ur&&(a=a.concat(o.descendants(e,c,l))),l-=d}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===_t.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Ur?n.unwrap():n.remove())})}formatAt(e,n,s,a){this.children.forEachAt(e,n,(l,o,c)=>{l.formatAt(o,c,s,a)})}insertAt(e,n,s){const[a,l]=this.children.find(e);if(a)a.insertAt(l,n,s);else{const o=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,a]=this.children.find(e,n),l=[[this,e]];return s instanceof Ur?l.concat(s.path(a,n)):(s!=null&&l.push([s,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof Ur&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,o)=>{const c=a.split(l,n);c!=null&&s.appendChild(c)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(s.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(l);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,o)=>l===o?0:l.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let o=null;l.nextSibling!=null&&(o=this.scroll.find(l.nextSibling));const c=yS(l,this.scroll);(c.next!==o||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,o||void 0))}),this.enforceAllowedChildren()}};AM.uiClass="";let dde=AM;const pa=dde;function mde(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Jo=class ec extends pa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(ec.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof ec||(s=s.wrap(ec.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,_t.INLINE);if(s==null)return;s instanceof Ga?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.formats()[s]!=null||this.scroll.query(s,_t.ATTRIBUTE)?this.isolate(e,n).format(s,a):super.formatAt(e,n,s,a)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof ec&&s.prev===this&&mde(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof ec&&this.attributes.move(s),s}};Jo.allowedChildren=[Jo,Oi],Jo.blotName="inline",Jo.scope=_t.INLINE_BLOT,Jo.tagName="SPAN";let ude=Jo;const Yk=ude,tc=class Jy extends pa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(Jy.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){const s=this.scroll.query(e,_t.BLOCK);s!=null&&(s instanceof Ga?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(Jy.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.scroll.query(s,_t.BLOCK)!=null?this.format(s,a):super.formatAt(e,n,s,a)}insertAt(e,n,s){if(s==null||this.scroll.query(n,_t.INLINE)!=null)super.insertAt(e,n,s);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(n,s);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};tc.blotName="block",tc.scope=_t.BLOCK_BLOT,tc.tagName="P",tc.allowedChildren=[Yk,tc,Oi];let hde=tc;const Fm=hde,eb=class extends pa{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};eb.blotName="container",eb.scope=_t.BLOCK_BLOT;let pde=eb;const yf=pde;class gde extends Oi{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,a){e===0&&n===this.length()?this.format(s,a):super.formatAt(e,n,s,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Is=gde,fde={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},vde=100,nc=class extends pa{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,fde),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=_t.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,a){this.update(),super.formatAt(e,n,s,a)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(d,m=!0)=>{d==null||d===this||d.domNode.parentNode!=null&&(s.has(d.domNode)||s.set(d.domNode,[]),m&&l(d.parent))},o=d=>{s.has(d.domNode)&&(d instanceof pa&&d.children.forEach(o),s.delete(d.domNode),d.optimize(n))};let c=e;for(let d=0;c.length>0;d+=1){if(d>=vde)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(m=>{const u=this.find(m.target,!0);u!=null&&(u.domNode===m.target&&(m.type==="childList"?(l(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(p=>{const h=this.find(p,!1);l(h,!1),h instanceof pa&&h.children.forEach(g=>{l(g,!1)})})):m.type==="attributes"&&l(u.prev)),l(u))}),this.children.forEach(o),c=Array.from(this.observer.takeRecords()),a=c.slice();a.length>0;)e.push(a.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:s.has(l.domNode)?(s.get(l.domNode).push(a),null):(s.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&s.has(a.domNode)&&a.update(s.get(a.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};nc.blotName="scroll",nc.defaultChild=Fm,nc.allowedChildren=[Fm,yf],nc.scope=_t.BLOCK_BLOT,nc.tagName="DIV";let xde=nc;const Qk=xde,tb=class DM extends Oi{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof DM&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};tb.blotName="text",tb.scope=_t.INLINE_BLOT;let yde=tb;const mg=yde,bde=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ga,AttributorStore:xf,BlockBlot:Fm,ClassAttributor:wa,ContainerBlot:yf,EmbedBlot:Is,InlineBlot:Yk,LeafBlot:Oi,ParentBlot:pa,Registry:Hc,Scope:_t,ScrollBlot:Qk,StyleAttributor:_l,TextBlot:mg},Symbol.toStringTag,{value:"Module"}));var yh={exports:{}},dx,bS;function wde(){if(bS)return dx;bS=1;var t=-1,e=1,n=0;function s(E,M,R,O,L){if(E===M)return E?[[n,E]]:[];if(R!=null){var q=A(E,M,R);if(q)return q}var Q=c(E,M),V=E.substring(0,Q);E=E.substring(Q),M=M.substring(Q),Q=m(E,M);var se=E.substring(E.length-Q);E=E.substring(0,E.length-Q),M=M.substring(0,M.length-Q);var G=a(E,M);return V&&G.unshift([n,V]),se&&G.push([n,se]),k(G,L),O&&p(G),G}function a(E,M){var R;if(!E)return[[e,M]];if(!M)return[[t,E]];var O=E.length>M.length?E:M,L=E.length>M.length?M:E,q=O.indexOf(L);if(q!==-1)return R=[[e,O.substring(0,q)],[n,L],[e,O.substring(q+L.length)]],E.length>M.length&&(R[0][0]=R[2][0]=t),R;if(L.length===1)return[[t,E],[e,M]];var Q=u(E,M);if(Q){var V=Q[0],se=Q[1],G=Q[2],ge=Q[3],ie=Q[4],W=s(V,G),X=s(se,ge);return W.concat([[n,ie]],X)}return l(E,M)}function l(E,M){for(var R=E.length,O=M.length,L=Math.ceil((R+O)/2),q=L,Q=2*L,V=new Array(Q),se=new Array(Q),G=0;G<Q;G++)V[G]=-1,se[G]=-1;V[q+1]=0,se[q+1]=0;for(var ge=R-O,ie=ge%2!==0,W=0,X=0,J=0,ue=0,le=0;le<L;le++){for(var I=-le+W;I<=le-X;I+=2){var ee=q+I,K;I===-le||I!==le&&V[ee-1]<V[ee+1]?K=V[ee+1]:K=V[ee-1]+1;for(var ne=K-I;K<R&&ne<O&&E.charAt(K)===M.charAt(ne);)K++,ne++;if(V[ee]=K,K>R)X+=2;else if(ne>O)W+=2;else if(ie){var oe=q+ge-I;if(oe>=0&&oe<Q&&se[oe]!==-1){var D=R-se[oe];if(K>=D)return o(E,M,K,ne)}}}for(var $=-le+J;$<=le-ue;$+=2){var oe=q+$,D;$===-le||$!==le&&se[oe-1]<se[oe+1]?D=se[oe+1]:D=se[oe-1]+1;for(var te=D-$;D<R&&te<O&&E.charAt(R-D-1)===M.charAt(O-te-1);)D++,te++;if(se[oe]=D,D>R)ue+=2;else if(te>O)J+=2;else if(!ie){var ee=q+ge-$;if(ee>=0&&ee<Q&&V[ee]!==-1){var K=V[ee],ne=q+K-ee;if(D=R-D,K>=D)return o(E,M,K,ne)}}}}return[[t,E],[e,M]]}function o(E,M,R,O){var L=E.substring(0,R),q=M.substring(0,O),Q=E.substring(R),V=M.substring(O),se=s(L,q),G=s(Q,V);return se.concat(G)}function c(E,M){if(!E||!M||E.charAt(0)!==M.charAt(0))return 0;for(var R=0,O=Math.min(E.length,M.length),L=O,q=0;R<L;)E.substring(q,L)==M.substring(q,L)?(R=L,q=R):O=L,L=Math.floor((O-R)/2+R);return w(E.charCodeAt(L-1))&&L--,L}function d(E,M){var R=E.length,O=M.length;if(R==0||O==0)return 0;R>O?E=E.substring(R-O):R<O&&(M=M.substring(0,R));var L=Math.min(R,O);if(E==M)return L;for(var q=0,Q=1;;){var V=E.substring(L-Q),se=M.indexOf(V);if(se==-1)return q;Q+=se,(se==0||E.substring(L-Q)==M.substring(0,Q))&&(q=Q,Q++)}}function m(E,M){if(!E||!M||E.slice(-1)!==M.slice(-1))return 0;for(var R=0,O=Math.min(E.length,M.length),L=O,q=0;R<L;)E.substring(E.length-L,E.length-q)==M.substring(M.length-L,M.length-q)?(R=L,q=R):O=L,L=Math.floor((O-R)/2+R);return S(E.charCodeAt(E.length-L))&&L--,L}function u(E,M){var R=E.length>M.length?E:M,O=E.length>M.length?M:E;if(R.length<4||O.length*2<R.length)return null;function L(X,J,ue){for(var le=X.substring(ue,ue+Math.floor(X.length/4)),I=-1,ee="",K,ne,oe,D;(I=J.indexOf(le,I+1))!==-1;){var $=c(X.substring(ue),J.substring(I)),te=m(X.substring(0,ue),J.substring(0,I));ee.length<te+$&&(ee=J.substring(I-te,I)+J.substring(I,I+$),K=X.substring(0,ue-te),ne=X.substring(ue+$),oe=J.substring(0,I-te),D=J.substring(I+$))}return ee.length*2>=X.length?[K,ne,oe,D,ee]:null}var q=L(R,O,Math.ceil(R.length/4)),Q=L(R,O,Math.ceil(R.length/2)),V;if(!q&&!Q)return null;Q?q?V=q[4].length>Q[4].length?q:Q:V=Q:V=q;var se,G,ge,ie;E.length>M.length?(se=V[0],G=V[1],ge=V[2],ie=V[3]):(ge=V[0],ie=V[1],se=V[2],G=V[3]);var W=V[4];return[se,G,ge,ie,W]}function p(E){for(var M=!1,R=[],O=0,L=null,q=0,Q=0,V=0,se=0,G=0;q<E.length;)E[q][0]==n?(R[O++]=q,Q=se,V=G,se=0,G=0,L=E[q][1]):(E[q][0]==e?se+=E[q][1].length:G+=E[q][1].length,L&&L.length<=Math.max(Q,V)&&L.length<=Math.max(se,G)&&(E.splice(R[O-1],0,[t,L]),E[R[O-1]+1][0]=e,O--,O--,q=O>0?R[O-1]:-1,Q=0,V=0,se=0,G=0,L=null,M=!0)),q++;for(M&&k(E),b(E),q=1;q<E.length;){if(E[q-1][0]==t&&E[q][0]==e){var ge=E[q-1][1],ie=E[q][1],W=d(ge,ie),X=d(ie,ge);W>=X?(W>=ge.length/2||W>=ie.length/2)&&(E.splice(q,0,[n,ie.substring(0,W)]),E[q-1][1]=ge.substring(0,ge.length-W),E[q+1][1]=ie.substring(W),q++):(X>=ge.length/2||X>=ie.length/2)&&(E.splice(q,0,[n,ge.substring(0,X)]),E[q-1][0]=e,E[q-1][1]=ie.substring(0,ie.length-X),E[q+1][0]=t,E[q+1][1]=ge.substring(X),q++),q++}q++}}var h=/[^a-zA-Z0-9]/,g=/\s/,x=/[\r\n]/,v=/\n\r?\n$/,y=/^\r?\n\r?\n/;function b(E){function M(X,J){if(!X||!J)return 6;var ue=X.charAt(X.length-1),le=J.charAt(0),I=ue.match(h),ee=le.match(h),K=I&&ue.match(g),ne=ee&&le.match(g),oe=K&&ue.match(x),D=ne&&le.match(x),$=oe&&X.match(v),te=D&&J.match(y);return $||te?5:oe||D?4:I&&!K&&ne?3:K||ne?2:I||ee?1:0}for(var R=1;R<E.length-1;){if(E[R-1][0]==n&&E[R+1][0]==n){var O=E[R-1][1],L=E[R][1],q=E[R+1][1],Q=m(O,L);if(Q){var V=L.substring(L.length-Q);O=O.substring(0,O.length-Q),L=V+L.substring(0,L.length-Q),q=V+q}for(var se=O,G=L,ge=q,ie=M(O,L)+M(L,q);L.charAt(0)===q.charAt(0);){O+=L.charAt(0),L=L.substring(1)+q.charAt(0),q=q.substring(1);var W=M(O,L)+M(L,q);W>=ie&&(ie=W,se=O,G=L,ge=q)}E[R-1][1]!=se&&(se?E[R-1][1]=se:(E.splice(R-1,1),R--),E[R][1]=G,ge?E[R+1][1]=ge:(E.splice(R+1,1),R--))}R++}}function k(E,M){E.push([n,""]);for(var R=0,O=0,L=0,q="",Q="",V;R<E.length;){if(R<E.length-1&&!E[R][1]){E.splice(R,1);continue}switch(E[R][0]){case e:L++,Q+=E[R][1],R++;break;case t:O++,q+=E[R][1],R++;break;case n:var se=R-L-O-1;if(M){if(se>=0&&T(E[se][1])){var G=E[se][1].slice(-1);if(E[se][1]=E[se][1].slice(0,-1),q=G+q,Q=G+Q,!E[se][1]){E.splice(se,1),R--;var ge=se-1;E[ge]&&E[ge][0]===e&&(L++,Q=E[ge][1]+Q,ge--),E[ge]&&E[ge][0]===t&&(O++,q=E[ge][1]+q,ge--),se=ge}}if(j(E[R][1])){var G=E[R][1].charAt(0);E[R][1]=E[R][1].slice(1),q+=G,Q+=G}}if(R<E.length-1&&!E[R][1]){E.splice(R,1);break}if(q.length>0||Q.length>0){q.length>0&&Q.length>0&&(V=c(Q,q),V!==0&&(se>=0?E[se][1]+=Q.substring(0,V):(E.splice(0,0,[n,Q.substring(0,V)]),R++),Q=Q.substring(V),q=q.substring(V)),V=m(Q,q),V!==0&&(E[R][1]=Q.substring(Q.length-V)+E[R][1],Q=Q.substring(0,Q.length-V),q=q.substring(0,q.length-V)));var ie=L+O;q.length===0&&Q.length===0?(E.splice(R-ie,ie),R=R-ie):q.length===0?(E.splice(R-ie,ie,[e,Q]),R=R-ie+1):Q.length===0?(E.splice(R-ie,ie,[t,q]),R=R-ie+1):(E.splice(R-ie,ie,[t,q],[e,Q]),R=R-ie+2)}R!==0&&E[R-1][0]===n?(E[R-1][1]+=E[R][1],E.splice(R,1)):R++,L=0,O=0,q="",Q="";break}}E[E.length-1][1]===""&&E.pop();var W=!1;for(R=1;R<E.length-1;)E[R-1][0]===n&&E[R+1][0]===n&&(E[R][1].substring(E[R][1].length-E[R-1][1].length)===E[R-1][1]?(E[R][1]=E[R-1][1]+E[R][1].substring(0,E[R][1].length-E[R-1][1].length),E[R+1][1]=E[R-1][1]+E[R+1][1],E.splice(R-1,1),W=!0):E[R][1].substring(0,E[R+1][1].length)==E[R+1][1]&&(E[R-1][1]+=E[R+1][1],E[R][1]=E[R][1].substring(E[R+1][1].length)+E[R+1][1],E.splice(R+1,1),W=!0)),R++;W&&k(E,M)}function w(E){return E>=55296&&E<=56319}function S(E){return E>=56320&&E<=57343}function j(E){return S(E.charCodeAt(0))}function T(E){return w(E.charCodeAt(E.length-1))}function N(E){for(var M=[],R=0;R<E.length;R++)E[R][1].length>0&&M.push(E[R]);return M}function _(E,M,R,O){return T(E)||j(O)?null:N([[n,E],[t,M],[e,R],[n,O]])}function A(E,M,R){var O=typeof R=="number"?{index:R,length:0}:R.oldRange,L=typeof R=="number"?null:R.newRange,q=E.length,Q=M.length;if(O.length===0&&(L===null||L.length===0)){var V=O.index,se=E.slice(0,V),G=E.slice(V),ge=L?L.index:null;e:{var ie=V+Q-q;if(ge!==null&&ge!==ie||ie<0||ie>Q)break e;var W=M.slice(0,ie),X=M.slice(ie);if(X!==G)break e;var J=Math.min(V,ie),ue=se.slice(0,J),le=W.slice(0,J);if(ue!==le)break e;var I=se.slice(J),ee=W.slice(J);return _(ue,I,ee,G)}e:{if(ge!==null&&ge!==V)break e;var K=V,W=M.slice(0,K),X=M.slice(K);if(W!==se)break e;var ne=Math.min(q-K,Q-K),oe=G.slice(G.length-ne),D=X.slice(X.length-ne);if(oe!==D)break e;var I=G.slice(0,G.length-ne),ee=X.slice(0,X.length-ne);return _(se,I,ee,oe)}}if(O.length>0&&L&&L.length===0)e:{var ue=E.slice(0,O.index),oe=E.slice(O.index+O.length),J=ue.length,ne=oe.length;if(Q<J+ne)break e;var le=M.slice(0,J),D=M.slice(Q-ne);if(ue!==le||oe!==D)break e;var I=E.slice(J,q-ne),ee=M.slice(J,Q-ne);return _(ue,I,ee,oe)}return null}function P(E,M,R,O){return s(E,M,R,O,!0)}return P.INSERT=e,P.DELETE=t,P.EQUAL=n,dx=P,dx}var Vd={exports:{}};Vd.exports;var wS;function RM(){return wS||(wS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",o="[object Array]",c="[object Boolean]",d="[object Date]",m="[object Error]",u="[object Function]",p="[object GeneratorFunction]",h="[object Map]",g="[object Number]",x="[object Object]",v="[object Promise]",y="[object RegExp]",b="[object Set]",k="[object String]",w="[object Symbol]",S="[object WeakMap]",j="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",_="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",E="[object Int32Array]",M="[object Uint8Array]",R="[object Uint8ClampedArray]",O="[object Uint16Array]",L="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,Q=/\w*$/,V=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,G={};G[l]=G[o]=G[j]=G[T]=G[c]=G[d]=G[N]=G[_]=G[A]=G[P]=G[E]=G[h]=G[g]=G[x]=G[y]=G[b]=G[k]=G[w]=G[M]=G[R]=G[O]=G[L]=!0,G[m]=G[u]=G[S]=!1;var ge=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,ie=typeof self=="object"&&self&&self.Object===Object&&self,W=ge||ie||Function("return this")(),X=e&&!e.nodeType&&e,J=X&&!0&&t&&!t.nodeType&&t,ue=J&&J.exports===X;function le(F,ce){return F.set(ce[0],ce[1]),F}function I(F,ce){return F.add(ce),F}function ee(F,ce){for(var je=-1,Ue=F?F.length:0;++je<Ue&&ce(F[je],je,F)!==!1;);return F}function K(F,ce){for(var je=-1,Ue=ce.length,Wt=F.length;++je<Ue;)F[Wt+je]=ce[je];return F}function ne(F,ce,je,Ue){for(var Wt=-1,Pt=F?F.length:0;++Wt<Pt;)je=ce(je,F[Wt],Wt,F);return je}function oe(F,ce){for(var je=-1,Ue=Array(F);++je<F;)Ue[je]=ce(je);return Ue}function D(F,ce){return F?.[ce]}function $(F){var ce=!1;if(F!=null&&typeof F.toString!="function")try{ce=!!(F+"")}catch{}return ce}function te(F){var ce=-1,je=Array(F.size);return F.forEach(function(Ue,Wt){je[++ce]=[Wt,Ue]}),je}function ae(F,ce){return function(je){return F(ce(je))}}function Y(F){var ce=-1,je=Array(F.size);return F.forEach(function(Ue){je[++ce]=Ue}),je}var H=Array.prototype,B=Function.prototype,re=Object.prototype,de=W["__core-js_shared__"],xe=(function(){var F=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""})(),U=B.toString,me=re.hasOwnProperty,ye=re.toString,pe=RegExp("^"+U.call(me).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=ue?W.Buffer:void 0,Ge=W.Symbol,De=W.Uint8Array,$e=ae(Object.getPrototypeOf,Object),et=Object.create,tt=re.propertyIsEnumerable,qe=H.splice,we=Object.getOwnPropertySymbols,Ee=Ce?Ce.isBuffer:void 0,Qe=ae(Object.keys,Object),nt=aa(W,"DataView"),Ht=aa(W,"Map"),Lt=aa(W,"Promise"),Yt=aa(W,"Set"),xt=aa(W,"WeakMap"),Ae=aa(Object,"create"),Oe=qi(nt),z=qi(Ht),Z=qi(Lt),fe=qi(Yt),_e=qi(xt),Ke=Ge?Ge.prototype:void 0,it=Ke?Ke.valueOf:void 0;function at(F){var ce=-1,je=F?F.length:0;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function ot(){this.__data__=Ae?Ae(null):{}}function Nt(F){return this.has(F)&&delete this.__data__[F]}function dt(F){var ce=this.__data__;if(Ae){var je=ce[F];return je===s?void 0:je}return me.call(ce,F)?ce[F]:void 0}function jt(F){var ce=this.__data__;return Ae?ce[F]!==void 0:me.call(ce,F)}function Ut(F,ce){var je=this.__data__;return je[F]=Ae&&ce===void 0?s:ce,this}at.prototype.clear=ot,at.prototype.delete=Nt,at.prototype.get=dt,at.prototype.has=jt,at.prototype.set=Ut;function be(F){var ce=-1,je=F?F.length:0;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function he(){this.__data__=[]}function Re(F){var ce=this.__data__,je=es(ce,F);if(je<0)return!1;var Ue=ce.length-1;return je==Ue?ce.pop():qe.call(ce,je,1),!0}function Ie(F){var ce=this.__data__,je=es(ce,F);return je<0?void 0:ce[je][1]}function He(F){return es(this.__data__,F)>-1}function Be(F,ce){var je=this.__data__,Ue=es(je,F);return Ue<0?je.push([F,ce]):je[Ue][1]=ce,this}be.prototype.clear=he,be.prototype.delete=Re,be.prototype.get=Ie,be.prototype.has=He,be.prototype.set=Be;function Je(F){var ce=-1,je=F?F.length:0;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function bt(){this.__data__={hash:new at,map:new(Ht||be),string:new at}}function Kt(F){return Tl(this,F).delete(F)}function $n(F){return Tl(this,F).get(F)}function ti(F){return Tl(this,F).has(F)}function vs(F,ce){return Tl(this,F).set(F,ce),this}Je.prototype.clear=bt,Je.prototype.delete=Kt,Je.prototype.get=$n,Je.prototype.has=ti,Je.prototype.set=vs;function rn(F){this.__data__=new be(F)}function xs(){this.__data__=new be}function ri(F){return this.__data__.delete(F)}function Zt(F){return this.__data__.get(F)}function sa(F){return this.__data__.has(F)}function ja(F,ce){var je=this.__data__;if(je instanceof be){var Ue=je.__data__;if(!Ht||Ue.length<n-1)return Ue.push([F,ce]),this;je=this.__data__=new Je(Ue)}return je.set(F,ce),this}rn.prototype.clear=xs,rn.prototype.delete=ri,rn.prototype.get=Zt,rn.prototype.has=sa,rn.prototype.set=ja;function Na(F,ce){var je=vd(F)||qo(F)?oe(F.length,String):[],Ue=je.length,Wt=!!Ue;for(var Pt in F)me.call(F,Pt)&&!(Wt&&(Pt=="length"||Rf(Pt,Ue)))&&je.push(Pt);return je}function Hr(F,ce,je){var Ue=F[ce];(!(me.call(F,ce)&&Nu(Ue,je))||je===void 0&&!(ce in F))&&(F[ce]=je)}function es(F,ce){for(var je=F.length;je--;)if(Nu(F[je][0],ce))return je;return-1}function gi(F,ce){return F&&fd(ce,yd(ce),F)}function ys(F,ce,je,Ue,Wt,Pt,ln){var nn;if(Ue&&(nn=Pt?Ue(F,Wt,Pt,ln):Ue(F)),nn!==void 0)return nn;if(!Sa(F))return F;var li=vd(F);if(li){if(nn=Af(F),!ce)return _f(F,nn)}else{var xn=ir(F),_i=xn==u||xn==p;if(Cu(F))return Bo(F,ce);if(xn==x||xn==l||_i&&!Pt){if($(F))return Pt?F:{};if(nn=Ca(_i?{}:F),!ce)return Ef(F,gi(nn,F))}else{if(!G[xn])return Pt?F:{};nn=Df(F,xn,ys,ce)}}ln||(ln=new rn);var ts=ln.get(F);if(ts)return ts;if(ln.set(F,nn),!li)var mi=je?Tf(F):yd(F);return ee(mi||F,function(Ei,bi){mi&&(bi=Ei,Ei=F[bi]),Hr(nn,bi,ys(Ei,ce,je,Ue,bi,F,ln))}),nn}function md(F){return Sa(F)?et(F):{}}function ud(F,ce,je){var Ue=ce(F);return vd(F)?Ue:K(Ue,je(F))}function hd(F){return ye.call(F)}function pd(F){if(!Sa(F)||Mf(F))return!1;var ce=xd(F)||$(F)?pe:V;return ce.test(qi(F))}function jf(F){if(!ku(F))return Qe(F);var ce=[];for(var je in Object(F))me.call(F,je)&&je!="constructor"&&ce.push(je);return ce}function Bo(F,ce){if(ce)return F.slice();var je=new F.constructor(F.length);return F.copy(je),je}function gd(F){var ce=new F.constructor(F.byteLength);return new De(ce).set(new De(F)),ce}function El(F,ce){var je=ce?gd(F.buffer):F.buffer;return new F.constructor(je,F.byteOffset,F.byteLength)}function bu(F,ce,je){var Ue=ce?je(te(F),!0):te(F);return ne(Ue,le,new F.constructor)}function wu(F){var ce=new F.constructor(F.source,Q.exec(F));return ce.lastIndex=F.lastIndex,ce}function Nf(F,ce,je){var Ue=ce?je(Y(F),!0):Y(F);return ne(Ue,I,new F.constructor)}function Cf(F){return it?Object(it.call(F)):{}}function Sf(F,ce){var je=ce?gd(F.buffer):F.buffer;return new F.constructor(je,F.byteOffset,F.length)}function _f(F,ce){var je=-1,Ue=F.length;for(ce||(ce=Array(Ue));++je<Ue;)ce[je]=F[je];return ce}function fd(F,ce,je,Ue){je||(je={});for(var Wt=-1,Pt=ce.length;++Wt<Pt;){var ln=ce[Wt],nn=void 0;Hr(je,ln,nn===void 0?F[ln]:nn)}return je}function Ef(F,ce){return fd(F,nr(F),ce)}function Tf(F){return ud(F,yd,nr)}function Tl(F,ce){var je=F.__data__;return Pf(ce)?je[typeof ce=="string"?"string":"hash"]:je.map}function aa(F,ce){var je=D(F,ce);return pd(je)?je:void 0}var nr=we?ae(we,Object):Of,ir=hd;(nt&&ir(new nt(new ArrayBuffer(1)))!=T||Ht&&ir(new Ht)!=h||Lt&&ir(Lt.resolve())!=v||Yt&&ir(new Yt)!=b||xt&&ir(new xt)!=S)&&(ir=function(F){var ce=ye.call(F),je=ce==x?F.constructor:void 0,Ue=je?qi(je):void 0;if(Ue)switch(Ue){case Oe:return T;case z:return h;case Z:return v;case fe:return b;case _e:return S}return ce});function Af(F){var ce=F.length,je=F.constructor(ce);return ce&&typeof F[0]=="string"&&me.call(F,"index")&&(je.index=F.index,je.input=F.input),je}function Ca(F){return typeof F.constructor=="function"&&!ku(F)?md($e(F)):{}}function Df(F,ce,je,Ue){var Wt=F.constructor;switch(ce){case j:return gd(F);case c:case d:return new Wt(+F);case T:return El(F,Ue);case N:case _:case A:case P:case E:case M:case R:case O:case L:return Sf(F,Ue);case h:return bu(F,Ue,je);case g:case k:return new Wt(F);case y:return wu(F);case b:return Nf(F,Ue,je);case w:return Cf(F)}}function Rf(F,ce){return ce=ce??a,!!ce&&(typeof F=="number"||se.test(F))&&F>-1&&F%1==0&&F<ce}function Pf(F){var ce=typeof F;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?F!=="__proto__":F===null}function Mf(F){return!!xe&&xe in F}function ku(F){var ce=F&&F.constructor,je=typeof ce=="function"&&ce.prototype||re;return F===je}function qi(F){if(F!=null){try{return U.call(F)}catch{}try{return F+""}catch{}}return""}function ju(F){return ys(F,!0,!0)}function Nu(F,ce){return F===ce||F!==F&&ce!==ce}function qo(F){return If(F)&&me.call(F,"callee")&&(!tt.call(F,"callee")||ye.call(F)==l)}var vd=Array.isArray;function Ho(F){return F!=null&&Su(F.length)&&!xd(F)}function If(F){return _u(F)&&Ho(F)}var Cu=Ee||Ff;function xd(F){var ce=Sa(F)?ye.call(F):"";return ce==u||ce==p}function Su(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=a}function Sa(F){var ce=typeof F;return!!F&&(ce=="object"||ce=="function")}function _u(F){return!!F&&typeof F=="object"}function yd(F){return Ho(F)?Na(F):jf(F)}function Of(){return[]}function Ff(){return!1}t.exports=ju})(Vd,Vd.exports)),Vd.exports}var Ud={exports:{}};Ud.exports;var kS;function PM(){return kS||(kS=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=1,l=2,o=9007199254740991,c="[object Arguments]",d="[object Array]",m="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",h="[object Error]",g="[object Function]",x="[object GeneratorFunction]",v="[object Map]",y="[object Number]",b="[object Null]",k="[object Object]",w="[object Promise]",S="[object Proxy]",j="[object RegExp]",T="[object Set]",N="[object String]",_="[object Symbol]",A="[object Undefined]",P="[object WeakMap]",E="[object ArrayBuffer]",M="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",q="[object Int16Array]",Q="[object Int32Array]",V="[object Uint8Array]",se="[object Uint8ClampedArray]",G="[object Uint16Array]",ge="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,J={};J[R]=J[O]=J[L]=J[q]=J[Q]=J[V]=J[se]=J[G]=J[ge]=!0,J[c]=J[d]=J[E]=J[u]=J[M]=J[p]=J[h]=J[g]=J[v]=J[y]=J[k]=J[j]=J[T]=J[N]=J[P]=!1;var ue=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,le=typeof self=="object"&&self&&self.Object===Object&&self,I=ue||le||Function("return this")(),ee=e&&!e.nodeType&&e,K=ee&&!0&&t&&!t.nodeType&&t,ne=K&&K.exports===ee,oe=ne&&ue.process,D=(function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}})(),$=D&&D.isTypedArray;function te(F,ce){for(var je=-1,Ue=F==null?0:F.length,Wt=0,Pt=[];++je<Ue;){var ln=F[je];ce(ln,je,F)&&(Pt[Wt++]=ln)}return Pt}function ae(F,ce){for(var je=-1,Ue=ce.length,Wt=F.length;++je<Ue;)F[Wt+je]=ce[je];return F}function Y(F,ce){for(var je=-1,Ue=F==null?0:F.length;++je<Ue;)if(ce(F[je],je,F))return!0;return!1}function H(F,ce){for(var je=-1,Ue=Array(F);++je<F;)Ue[je]=ce(je);return Ue}function B(F){return function(ce){return F(ce)}}function re(F,ce){return F.has(ce)}function de(F,ce){return F?.[ce]}function xe(F){var ce=-1,je=Array(F.size);return F.forEach(function(Ue,Wt){je[++ce]=[Wt,Ue]}),je}function U(F,ce){return function(je){return F(ce(je))}}function me(F){var ce=-1,je=Array(F.size);return F.forEach(function(Ue){je[++ce]=Ue}),je}var ye=Array.prototype,pe=Function.prototype,Ce=Object.prototype,Ge=I["__core-js_shared__"],De=pe.toString,$e=Ce.hasOwnProperty,et=(function(){var F=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""})(),tt=Ce.toString,qe=RegExp("^"+De.call($e).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),we=ne?I.Buffer:void 0,Ee=I.Symbol,Qe=I.Uint8Array,nt=Ce.propertyIsEnumerable,Ht=ye.splice,Lt=Ee?Ee.toStringTag:void 0,Yt=Object.getOwnPropertySymbols,xt=we?we.isBuffer:void 0,Ae=U(Object.keys,Object),Oe=nr(I,"DataView"),z=nr(I,"Map"),Z=nr(I,"Promise"),fe=nr(I,"Set"),_e=nr(I,"WeakMap"),Ke=nr(Object,"create"),it=qi(Oe),at=qi(z),ot=qi(Z),Nt=qi(fe),dt=qi(_e),jt=Ee?Ee.prototype:void 0,Ut=jt?jt.valueOf:void 0;function be(F){var ce=-1,je=F==null?0:F.length;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function he(){this.__data__=Ke?Ke(null):{},this.size=0}function Re(F){var ce=this.has(F)&&delete this.__data__[F];return this.size-=ce?1:0,ce}function Ie(F){var ce=this.__data__;if(Ke){var je=ce[F];return je===s?void 0:je}return $e.call(ce,F)?ce[F]:void 0}function He(F){var ce=this.__data__;return Ke?ce[F]!==void 0:$e.call(ce,F)}function Be(F,ce){var je=this.__data__;return this.size+=this.has(F)?0:1,je[F]=Ke&&ce===void 0?s:ce,this}be.prototype.clear=he,be.prototype.delete=Re,be.prototype.get=Ie,be.prototype.has=He,be.prototype.set=Be;function Je(F){var ce=-1,je=F==null?0:F.length;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function bt(){this.__data__=[],this.size=0}function Kt(F){var ce=this.__data__,je=Bo(ce,F);if(je<0)return!1;var Ue=ce.length-1;return je==Ue?ce.pop():Ht.call(ce,je,1),--this.size,!0}function $n(F){var ce=this.__data__,je=Bo(ce,F);return je<0?void 0:ce[je][1]}function ti(F){return Bo(this.__data__,F)>-1}function vs(F,ce){var je=this.__data__,Ue=Bo(je,F);return Ue<0?(++this.size,je.push([F,ce])):je[Ue][1]=ce,this}Je.prototype.clear=bt,Je.prototype.delete=Kt,Je.prototype.get=$n,Je.prototype.has=ti,Je.prototype.set=vs;function rn(F){var ce=-1,je=F==null?0:F.length;for(this.clear();++ce<je;){var Ue=F[ce];this.set(Ue[0],Ue[1])}}function xs(){this.size=0,this.__data__={hash:new be,map:new(z||Je),string:new be}}function ri(F){var ce=aa(this,F).delete(F);return this.size-=ce?1:0,ce}function Zt(F){return aa(this,F).get(F)}function sa(F){return aa(this,F).has(F)}function ja(F,ce){var je=aa(this,F),Ue=je.size;return je.set(F,ce),this.size+=je.size==Ue?0:1,this}rn.prototype.clear=xs,rn.prototype.delete=ri,rn.prototype.get=Zt,rn.prototype.has=sa,rn.prototype.set=ja;function Na(F){var ce=-1,je=F==null?0:F.length;for(this.__data__=new rn;++ce<je;)this.add(F[ce])}function Hr(F){return this.__data__.set(F,s),this}function es(F){return this.__data__.has(F)}Na.prototype.add=Na.prototype.push=Hr,Na.prototype.has=es;function gi(F){var ce=this.__data__=new Je(F);this.size=ce.size}function ys(){this.__data__=new Je,this.size=0}function md(F){var ce=this.__data__,je=ce.delete(F);return this.size=ce.size,je}function ud(F){return this.__data__.get(F)}function hd(F){return this.__data__.has(F)}function pd(F,ce){var je=this.__data__;if(je instanceof Je){var Ue=je.__data__;if(!z||Ue.length<n-1)return Ue.push([F,ce]),this.size=++je.size,this;je=this.__data__=new rn(Ue)}return je.set(F,ce),this.size=je.size,this}gi.prototype.clear=ys,gi.prototype.delete=md,gi.prototype.get=ud,gi.prototype.has=hd,gi.prototype.set=pd;function jf(F,ce){var je=qo(F),Ue=!je&&Nu(F),Wt=!je&&!Ue&&Ho(F),Pt=!je&&!Ue&&!Wt&&_u(F),ln=je||Ue||Wt||Pt,nn=ln?H(F.length,String):[],li=nn.length;for(var xn in F)$e.call(F,xn)&&!(ln&&(xn=="length"||Wt&&(xn=="offset"||xn=="parent")||Pt&&(xn=="buffer"||xn=="byteLength"||xn=="byteOffset")||Df(xn,li)))&&nn.push(xn);return nn}function Bo(F,ce){for(var je=F.length;je--;)if(ju(F[je][0],ce))return je;return-1}function gd(F,ce,je){var Ue=ce(F);return qo(F)?Ue:ae(Ue,je(F))}function El(F){return F==null?F===void 0?A:b:Lt&&Lt in Object(F)?ir(F):ku(F)}function bu(F){return Sa(F)&&El(F)==c}function wu(F,ce,je,Ue,Wt){return F===ce?!0:F==null||ce==null||!Sa(F)&&!Sa(ce)?F!==F&&ce!==ce:Nf(F,ce,je,Ue,wu,Wt)}function Nf(F,ce,je,Ue,Wt,Pt){var ln=qo(F),nn=qo(ce),li=ln?d:Ca(F),xn=nn?d:Ca(ce);li=li==c?k:li,xn=xn==c?k:xn;var _i=li==k,ts=xn==k,mi=li==xn;if(mi&&Ho(F)){if(!Ho(ce))return!1;ln=!0,_i=!1}if(mi&&!_i)return Pt||(Pt=new gi),ln||_u(F)?fd(F,ce,je,Ue,Wt,Pt):Ef(F,ce,li,je,Ue,Wt,Pt);if(!(je&a)){var Ei=_i&&$e.call(F,"__wrapped__"),bi=ts&&$e.call(ce,"__wrapped__");if(Ei||bi){var zr=Ei?F.value():F,sr=bi?ce.value():ce;return Pt||(Pt=new gi),Wt(zr,sr,je,Ue,Pt)}}return mi?(Pt||(Pt=new gi),Tf(F,ce,je,Ue,Wt,Pt)):!1}function Cf(F){if(!Su(F)||Pf(F))return!1;var ce=Cu(F)?qe:W;return ce.test(qi(F))}function Sf(F){return Sa(F)&&xd(F.length)&&!!J[El(F)]}function _f(F){if(!Mf(F))return Ae(F);var ce=[];for(var je in Object(F))$e.call(F,je)&&je!="constructor"&&ce.push(je);return ce}function fd(F,ce,je,Ue,Wt,Pt){var ln=je&a,nn=F.length,li=ce.length;if(nn!=li&&!(ln&&li>nn))return!1;var xn=Pt.get(F);if(xn&&Pt.get(ce))return xn==ce;var _i=-1,ts=!0,mi=je&l?new Na:void 0;for(Pt.set(F,ce),Pt.set(ce,F);++_i<nn;){var Ei=F[_i],bi=ce[_i];if(Ue)var zr=ln?Ue(bi,Ei,_i,ce,F,Pt):Ue(Ei,bi,_i,F,ce,Pt);if(zr!==void 0){if(zr)continue;ts=!1;break}if(mi){if(!Y(ce,function(sr,Al){if(!re(mi,Al)&&(Ei===sr||Wt(Ei,sr,je,Ue,Pt)))return mi.push(Al)})){ts=!1;break}}else if(!(Ei===bi||Wt(Ei,bi,je,Ue,Pt))){ts=!1;break}}return Pt.delete(F),Pt.delete(ce),ts}function Ef(F,ce,je,Ue,Wt,Pt,ln){switch(je){case M:if(F.byteLength!=ce.byteLength||F.byteOffset!=ce.byteOffset)return!1;F=F.buffer,ce=ce.buffer;case E:return!(F.byteLength!=ce.byteLength||!Pt(new Qe(F),new Qe(ce)));case u:case p:case y:return ju(+F,+ce);case h:return F.name==ce.name&&F.message==ce.message;case j:case N:return F==ce+"";case v:var nn=xe;case T:var li=Ue&a;if(nn||(nn=me),F.size!=ce.size&&!li)return!1;var xn=ln.get(F);if(xn)return xn==ce;Ue|=l,ln.set(F,ce);var _i=fd(nn(F),nn(ce),Ue,Wt,Pt,ln);return ln.delete(F),_i;case _:if(Ut)return Ut.call(F)==Ut.call(ce)}return!1}function Tf(F,ce,je,Ue,Wt,Pt){var ln=je&a,nn=Tl(F),li=nn.length,xn=Tl(ce),_i=xn.length;if(li!=_i&&!ln)return!1;for(var ts=li;ts--;){var mi=nn[ts];if(!(ln?mi in ce:$e.call(ce,mi)))return!1}var Ei=Pt.get(F);if(Ei&&Pt.get(ce))return Ei==ce;var bi=!0;Pt.set(F,ce),Pt.set(ce,F);for(var zr=ln;++ts<li;){mi=nn[ts];var sr=F[mi],Al=ce[mi];if(Ue)var oj=ln?Ue(Al,sr,mi,ce,F,Pt):Ue(sr,Al,mi,F,ce,Pt);if(!(oj===void 0?sr===Al||Wt(sr,Al,je,Ue,Pt):oj)){bi=!1;break}zr||(zr=mi=="constructor")}if(bi&&!zr){var Eu=F.constructor,Tu=ce.constructor;Eu!=Tu&&"constructor"in F&&"constructor"in ce&&!(typeof Eu=="function"&&Eu instanceof Eu&&typeof Tu=="function"&&Tu instanceof Tu)&&(bi=!1)}return Pt.delete(F),Pt.delete(ce),bi}function Tl(F){return gd(F,yd,Af)}function aa(F,ce){var je=F.__data__;return Rf(ce)?je[typeof ce=="string"?"string":"hash"]:je.map}function nr(F,ce){var je=de(F,ce);return Cf(je)?je:void 0}function ir(F){var ce=$e.call(F,Lt),je=F[Lt];try{F[Lt]=void 0;var Ue=!0}catch{}var Wt=tt.call(F);return Ue&&(ce?F[Lt]=je:delete F[Lt]),Wt}var Af=Yt?function(F){return F==null?[]:(F=Object(F),te(Yt(F),function(ce){return nt.call(F,ce)}))}:Of,Ca=El;(Oe&&Ca(new Oe(new ArrayBuffer(1)))!=M||z&&Ca(new z)!=v||Z&&Ca(Z.resolve())!=w||fe&&Ca(new fe)!=T||_e&&Ca(new _e)!=P)&&(Ca=function(F){var ce=El(F),je=ce==k?F.constructor:void 0,Ue=je?qi(je):"";if(Ue)switch(Ue){case it:return M;case at:return v;case ot:return w;case Nt:return T;case dt:return P}return ce});function Df(F,ce){return ce=ce??o,!!ce&&(typeof F=="number"||X.test(F))&&F>-1&&F%1==0&&F<ce}function Rf(F){var ce=typeof F;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?F!=="__proto__":F===null}function Pf(F){return!!et&&et in F}function Mf(F){var ce=F&&F.constructor,je=typeof ce=="function"&&ce.prototype||Ce;return F===je}function ku(F){return tt.call(F)}function qi(F){if(F!=null){try{return De.call(F)}catch{}try{return F+""}catch{}}return""}function ju(F,ce){return F===ce||F!==F&&ce!==ce}var Nu=bu((function(){return arguments})())?bu:function(F){return Sa(F)&&$e.call(F,"callee")&&!nt.call(F,"callee")},qo=Array.isArray;function vd(F){return F!=null&&xd(F.length)&&!Cu(F)}var Ho=xt||Ff;function If(F,ce){return wu(F,ce)}function Cu(F){if(!Su(F))return!1;var ce=El(F);return ce==g||ce==x||ce==m||ce==S}function xd(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=o}function Su(F){var ce=typeof F;return F!=null&&(ce=="object"||ce=="function")}function Sa(F){return F!=null&&typeof F=="object"}var _u=$?B($):Sf;function yd(F){return vd(F)?jf(F):_f(F)}function Of(){return[]}function Ff(){return!1}t.exports=If})(Ud,Ud.exports)),Ud.exports}var bh={},jS;function kde(){if(jS)return bh;jS=1,Object.defineProperty(bh,"__esModule",{value:!0});const t=RM(),e=PM();var n;return(function(s){function a(d={},m={},u=!1){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});let p=t(m);u||(p=Object.keys(p).reduce((h,g)=>(p[g]!=null&&(h[g]=p[g]),h),{}));for(const h in d)d[h]!==void 0&&m[h]===void 0&&(p[h]=d[h]);return Object.keys(p).length>0?p:void 0}s.compose=a;function l(d={},m={}){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});const u=Object.keys(d).concat(Object.keys(m)).reduce((p,h)=>(e(d[h],m[h])||(p[h]=m[h]===void 0?null:m[h]),p),{});return Object.keys(u).length>0?u:void 0}s.diff=l;function o(d={},m={}){d=d||{};const u=Object.keys(m).reduce((p,h)=>(m[h]!==d[h]&&d[h]!==void 0&&(p[h]=m[h]),p),{});return Object.keys(d).reduce((p,h)=>(d[h]!==m[h]&&m[h]===void 0&&(p[h]=null),p),u)}s.invert=o;function c(d,m,u=!1){if(typeof d!="object")return m;if(typeof m!="object")return;if(!u)return m;const p=Object.keys(m).reduce((h,g)=>(d[g]===void 0&&(h[g]=m[g]),h),{});return Object.keys(p).length>0?p:void 0}s.transform=c})(n||(n={})),bh.default=n,bh}var wh={},NS;function MM(){if(NS)return wh;NS=1,Object.defineProperty(wh,"__esModule",{value:!0});var t;return(function(e){function n(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=n})(t||(t={})),wh.default=t,wh}var kh={},CS;function jde(){if(CS)return kh;CS=1,Object.defineProperty(kh,"__esModule",{value:!0});const t=MM();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const a=this.ops[this.index];if(a){const l=this.offset,o=t.default.length(a);if(s>=o-l?(s=o-l,this.index+=1,this.offset=0):this.offset+=s,typeof a.delete=="number")return{delete:s};{const c={};return a.attributes&&(c.attributes=a.attributes),typeof a.retain=="number"?c.retain=s:typeof a.retain=="object"&&a.retain!==null?c.retain=a.retain:typeof a.insert=="string"?c.insert=a.insert.substr(l,s):c.insert=a.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,a=this.index,l=this.next(),o=this.ops.slice(this.index);return this.offset=s,this.index=a,[l].concat(o)}}else return[]}}return kh.default=e,kh}var SS;function Nde(){return SS||(SS=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=wde(),s=RM(),a=PM(),l=kde();e.AttributeMap=l.default;const o=MM();e.Op=o.default;const c=jde();e.OpIterator=c.default;const d="\0",m=(p,h)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const g=Object.keys(p)[0];if(!g||g!==Object.keys(h)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(h)[0]}`);return[g,p[g],h[g]]};class u{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,g){this.handlers[h]=g}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const g=this.handlers[h];if(!g)throw new Error(`no handlers for embed type "${h}"`);return g}insert(h,g){const x={};return typeof h=="string"&&h.length===0?this:(x.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,g){if(typeof h=="number"&&h<=0)return this;const x={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x)}push(h){let g=this.ops.length,x=this.ops[g-1];if(h=s(h),typeof x=="object"){if(typeof h.delete=="number"&&typeof x.delete=="number")return this.ops[g-1]={delete:x.delete+h.delete},this;if(typeof x.delete=="number"&&h.insert!=null&&(g-=1,x=this.ops[g-1],typeof x!="object"))return this.ops.unshift(h),this;if(a(h.attributes,x.attributes)){if(typeof h.insert=="string"&&typeof x.insert=="string")return this.ops[g-1]={insert:x.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof x.retain=="number")return this.ops[g-1]={retain:x.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const g=[],x=[];return this.forEach(v=>{(h(v)?g:x).push(v)}),[g,x]}reduce(h,g){return this.ops.reduce(h,g)}changeLength(){return this.reduce((h,g)=>g.insert?h+o.default.length(g):g.delete?h-g.delete:h,0)}length(){return this.reduce((h,g)=>h+o.default.length(g),0)}slice(h=0,g=1/0){const x=[],v=new c.default(this.ops);let y=0;for(;y<g&&v.hasNext();){let b;y<h?b=v.next(h-y):(b=v.next(g-y),x.push(b)),y+=o.default.length(b)}return new u(x)}compose(h){const g=new c.default(this.ops),x=new c.default(h.ops),v=[],y=x.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let k=y.retain;for(;g.peekType()==="insert"&&g.peekLength()<=k;)k-=g.peekLength(),v.push(g.next());y.retain-k>0&&x.next(y.retain-k)}const b=new u(v);for(;g.hasNext()||x.hasNext();)if(x.peekType()==="insert")b.push(x.next());else if(g.peekType()==="delete")b.push(g.next());else{const k=Math.min(g.peekLength(),x.peekLength()),w=g.next(k),S=x.next(k);if(S.retain){const j={};if(typeof w.retain=="number")j.retain=typeof S.retain=="number"?k:S.retain;else if(typeof S.retain=="number")w.retain==null?j.insert=w.insert:j.retain=w.retain;else{const N=w.retain==null?"insert":"retain",[_,A,P]=m(w[N],S.retain),E=u.getHandler(_);j[N]={[_]:E.compose(A,P,N==="retain")}}const T=l.default.compose(w.attributes,S.attributes,typeof w.retain=="number");if(T&&(j.attributes=T),b.push(j),!x.hasNext()&&a(b.ops[b.ops.length-1],j)){const N=new u(g.rest());return b.concat(N).chop()}}else typeof S.delete=="number"&&(typeof w.retain=="number"||typeof w.retain=="object"&&w.retain!==null)&&b.push(S)}return b.chop()}concat(h){const g=new u(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g}diff(h,g){if(this.ops===h.ops)return new u;const x=[this,h].map(w=>w.map(S=>{if(S.insert!=null)return typeof S.insert=="string"?S.insert:d;const j=w===h?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")),v=new u,y=n(x[0],x[1],g,!0),b=new c.default(this.ops),k=new c.default(h.ops);return y.forEach(w=>{let S=w[1].length;for(;S>0;){let j=0;switch(w[0]){case n.INSERT:j=Math.min(k.peekLength(),S),v.push(k.next(j));break;case n.DELETE:j=Math.min(S,b.peekLength()),b.next(j),v.delete(j);break;case n.EQUAL:j=Math.min(b.peekLength(),k.peekLength(),S);const T=b.next(j),N=k.next(j);a(T.insert,N.insert)?v.retain(j,l.default.diff(T.attributes,N.attributes)):v.push(N).delete(j);break}S-=j}}),v.chop()}eachLine(h,g=`
`){const x=new c.default(this.ops);let v=new u,y=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const b=x.peek(),k=o.default.length(b)-x.peekLength(),w=typeof b.insert=="string"?b.insert.indexOf(g,k)-k:-1;if(w<0)v.push(x.next());else if(w>0)v.push(x.next(w));else{if(h(v,x.next(1).attributes||{},y)===!1)return;y+=1,v=new u}}v.length()>0&&h(v,{},y)}invert(h){const g=new u;return this.reduce((x,v)=>{if(v.insert)g.delete(o.default.length(v));else{if(typeof v.retain=="number"&&v.attributes==null)return g.retain(v.retain),x+v.retain;if(v.delete||typeof v.retain=="number"){const y=v.delete||v.retain;return h.slice(x,x+y).forEach(k=>{v.delete?g.push(k):v.retain&&v.attributes&&g.retain(o.default.length(k),l.default.invert(v.attributes,k.attributes))}),x+y}else if(typeof v.retain=="object"&&v.retain!==null){const y=h.slice(x,x+1),b=new c.default(y.ops).next(),[k,w,S]=m(v.retain,b.insert),j=u.getHandler(k);return g.retain({[k]:j.invert(w,S)},l.default.invert(v.attributes,b.attributes)),x+1}}return x},0),g.chop()}transform(h,g=!1){if(g=!!g,typeof h=="number")return this.transformPosition(h,g);const x=h,v=new c.default(this.ops),y=new c.default(x.ops),b=new u;for(;v.hasNext()||y.hasNext();)if(v.peekType()==="insert"&&(g||y.peekType()!=="insert"))b.retain(o.default.length(v.next()));else if(y.peekType()==="insert")b.push(y.next());else{const k=Math.min(v.peekLength(),y.peekLength()),w=v.next(k),S=y.next(k);if(w.delete)continue;if(S.delete)b.push(S);else{const j=w.retain,T=S.retain;let N=typeof T=="object"&&T!==null?T:k;if(typeof j=="object"&&j!==null&&typeof T=="object"&&T!==null){const _=Object.keys(j)[0];if(_===Object.keys(T)[0]){const A=u.getHandler(_);A&&(N={[_]:A.transform(j[_],T[_],g)})}}b.retain(N,l.default.transform(w.attributes,S.attributes,g))}}return b.chop()}transformPosition(h,g=!1){g=!!g;const x=new c.default(this.ops);let v=0;for(;x.hasNext()&&v<=h;){const y=x.peekLength(),b=x.peekType();if(x.next(),b==="delete"){h-=Math.min(y,h-v);continue}else b==="insert"&&(v<h||!g)&&(h+=y);v+=y}return h}}u.Op=o.default,u.OpIterator=c.default,u.AttributeMap=l.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(yh,yh.exports)),yh.exports}var Gs=Nde();const Ct=ya(Gs);class ka extends Is{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ka.blotName="break";ka.tagName="BR";let xa=class extends mg{};const Cde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bf(t){return t.replace(/[&<>"']/g,e=>Cde[e])}class zi extends Yk{static allowedChildren=[zi,ka,Is,xa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const s=zi.order.indexOf(e),a=zi.order.indexOf(n);return s>=0||a>=0?s-a:e===n?0:e<n?-1:1}formatAt(e,n,s,a){if(zi.compare(this.statics.blotName,s)<0&&this.scroll.query(s,_t.BLOT)){const l=this.isolate(e,n);a&&l.wrap(s,a)}else super.formatAt(e,n,s,a)}optimize(e){if(super.optimize(e),this.parent instanceof zi&&zi.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const _S=1;class Ni extends Fm{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=IM(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,a){n<=0||(this.scroll.query(s,_t.BLOCK)?e+n===this.length()&&this.format(s,a):super.formatAt(e,Math.min(n,this.length()-e-1),s,a),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const a=n.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let o=this;a.reduce((c,d)=>(o=o.split(c,!0),o.insertAt(0,d),d.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof ka&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+_S),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-_S)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const s=super.split(e,n);return this.cache={},s}}Ni.blotName="block";Ni.tagName="P";Ni.defaultChild=ka;Ni.allowedChildren=[ka,zi,Is,xa];class zs extends Is{attach(){super.attach(),this.attributes=new xf(this.domNode)}delta(){return new Ct().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,_t.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,a){this.format(s,a)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const a=n.split(`
`),l=a.pop(),o=a.map(d=>{const m=this.scroll.create(Ni.blotName);return m.insertAt(0,d),m}),c=this.split(e);o.forEach(d=>{this.parent.insertBefore(d,c)}),l&&this.parent.insertBefore(this.scroll.create("text",l),c)}}zs.scope=_t.BLOCK_BLOT;function IM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Oi).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),Bs(s,{},e)),new Ct).insert(`
`,Bs(t))}function Bs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Bs(t.parent,e,n)}class oa extends Is{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode(oa.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,a=0;for(;s!=null&&s.statics.scope!==_t.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=oa.CONTENTS.length,s.optimize(),s.formatAt(a,oa.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof xa?this.prev:null,s=n?n.length():0,a=this.next instanceof xa?this.next:null,l=a?a.text:"",{textNode:o}=this,c=o.data.split(oa.CONTENTS).join("");o.data=oa.CONTENTS;let d;if(n)d=n,(c||a)&&(n.insertAt(n.length(),c+l),a&&a.remove());else if(a)d=a,a.insertAt(0,c);else{const m=document.createTextNode(c);d=this.scroll.create(m),this.parent.insertBefore(d,this)}if(this.remove(),e){const m=(h,g)=>n&&h===n.domNode?g:h===o?s+g-1:a&&h===a.domNode?s+c.length+g:null,u=m(e.start.node,e.start.offset),p=m(e.end.node,e.end.offset);if(u!==null&&p!==null)return{startNode:d.domNode,startOffset:u,endNode:d.domNode,endOffset:p}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=oa.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var mx={exports:{}},ES;function Sde(){return ES||(ES=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(d,m,u){this.fn=d,this.context=m,this.once=u||!1}function l(d,m,u,p,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,p||d,h),x=n?n+m:m;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],g]:d._events[x].push(g):(d._events[x]=g,d._eventsCount++),d}function o(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],u,p;if(this._eventsCount===0)return m;for(p in u=this._events)e.call(u,p)&&m.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},c.prototype.listeners=function(m){var u=n?n+m:m,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,g=p.length,x=new Array(g);h<g;h++)x[h]=p[h].fn;return x},c.prototype.listenerCount=function(m){var u=n?n+m:m,p=this._events[u];return p?p.fn?1:p.length:0},c.prototype.emit=function(m,u,p,h,g,x){var v=n?n+m:m;if(!this._events[v])return!1;var y=this._events[v],b=arguments.length,k,w;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,p),!0;case 4:return y.fn.call(y.context,u,p,h),!0;case 5:return y.fn.call(y.context,u,p,h,g),!0;case 6:return y.fn.call(y.context,u,p,h,g,x),!0}for(w=1,k=new Array(b-1);w<b;w++)k[w-1]=arguments[w];y.fn.apply(y.context,k)}else{var S=y.length,j;for(w=0;w<S;w++)switch(y[w].once&&this.removeListener(m,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,p);break;case 4:y[w].fn.call(y[w].context,u,p,h);break;default:if(!k)for(j=1,k=new Array(b-1);j<b;j++)k[j-1]=arguments[j];y[w].fn.apply(y[w].context,k)}}return!0},c.prototype.on=function(m,u,p){return l(this,m,u,p,!1)},c.prototype.once=function(m,u,p){return l(this,m,u,p,!0)},c.prototype.removeListener=function(m,u,p,h){var g=n?n+m:m;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!h||x.once)&&(!p||x.context===p)&&o(this,g);else{for(var v=0,y=[],b=x.length;v<b;v++)(x[v].fn!==u||h&&!x[v].once||p&&x[v].context!==p)&&y.push(x[v]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},c.prototype.removeAllListeners=function(m){var u;return m?(u=n?n+m:m,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(mx)),mx.exports}var _de=Sde();const Ede=ya(_de),nb=new WeakMap,ib=["error","warn","log","info"];let sb="warn";function OM(t){if(sb&&ib.indexOf(t)<=ib.indexOf(sb)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function qr(t){return ib.reduce((e,n)=>(e[n]=OM.bind(console,n,t),e),{})}qr.level=t=>{sb=t};OM.level=qr.level;const ux=qr("quill:events"),Tde=["selectionchange","mousedown","mouseup","click"];Tde.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=nb.get(a);l&&l.emitter&&l.emitter.handleDOM(...n)})})});class kt extends Ede{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",ux.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return ux.log.call(ux,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:o,handler:c}=l;(e.target===o||o.contains(e.target))&&c(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}const hx=qr("quill:selection");class fo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Ade{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new fo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,kt.sources.USER),1)}),this.emitter.on(kt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(kt.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const o=l.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(o?kt.sources.SILENT:a)}catch{}})}),this.emitter.on(kt.events.SCROLL_OPTIMIZE,(s,a)=>{if(a.range){const{startNode:l,startOffset:o,endNode:c,endOffset:d}=a.range;this.setNativeRange(l,o,c,d),this.update(kt.sources.SILENT)}}),this.update(kt.sources.SILENT)}handleComposition(){this.emitter.on(kt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(kt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(kt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,_t.BLOCK))){if(s.start.node!==this.cursor.textNode){const a=this.scroll.find(s.start.node,!1);if(a==null)return;if(a instanceof Oi){const l=a.split(s.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let a,[l,o]=this.scroll.leaf(e);if(l==null)return null;if(n>0&&o===l.length()){const[u]=this.scroll.leaf(e+1);if(u){const[p]=this.scroll.line(e),[h]=this.scroll.line(e+1);p===h&&(l=u,o=0)}}[a,o]=l.position(o,!0);const c=document.createRange();if(n>0)return c.setStart(a,o),[l,o]=this.scroll.leaf(e+n),l==null?null:([a,o]=l.position(o,!0),c.setEnd(a,o),c.getBoundingClientRect());let d="left",m;if(a instanceof Text){if(!a.data.length)return null;o<a.data.length?(c.setStart(a,o),c.setEnd(a,o+1)):(c.setStart(a,o-1),c.setEnd(a,o),d="right"),m=c.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;m=l.domNode.getBoundingClientRect(),o>0&&(d="right")}return{bottom:m.top+m.height,height:m.height,left:m[d],right:m[d],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return hx.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&px(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(o=>{const[c,d]=o,m=this.scroll.find(c,!0),u=m.offset(this.scroll);return d===0?u:m instanceof Oi?u+m.index(c,d):u+m.length()}),a=Math.min(Math.max(...s),this.scroll.length()-1),l=Math.min(a,...s);return new fo(l,a-l)}normalizeNative(e){if(!px(this.root,e.startContainer)||!e.collapsed&&!px(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:a,offset:l}=s;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;s.node=a,s.offset=l}),n}rangeToNative(e){const n=this.scroll.length(),s=(a,l)=>{a=Math.min(n-1,a);const[o,c]=this.scroll.leaf(a);return o?o.position(c,l):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(hx.info("setNativeRange",e,n,s,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||l||e!==c.startContainer||n!==c.startOffset||s!==c.endContainer||a!==c.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(a=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const d=document.createRange();d.setStart(e,n),d.setEnd(s,a),o.removeAllRanges(),o.addRange(d)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kt.sources.API;if(typeof n=="string"&&(s=n,n=!1),hx.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kt.sources.USER;const n=this.lastRange,[s,a]=this.getRange();if(this.lastRange=s,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!Gr(n,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const l=[kt.events.SELECTION_CHANGE,kc(this.lastRange),kc(n),e];this.emitter.emit(kt.events.EDITOR_CHANGE,...l),e!==kt.sources.SILENT&&this.emitter.emit(...l)}}}function px(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Dde=/^[ -~]*$/;class Rde{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=TS(e),a=new Ct;return Mde(s.ops.slice()).reduce((o,c)=>{const d=Gs.Op.length(c);let m=c.attributes||{},u=!1,p=!1;if(c.insert!=null){if(a.retain(d),typeof c.insert=="string"){const x=c.insert;p=!x.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(zs,o)[0]),this.scroll.insertAt(o,x);const[v,y]=this.scroll.line(o);let b=ul({},Bs(v));if(v instanceof Ni){const[k]=v.descendant(Oi,y);k&&(b=ul(b,Bs(k)))}m=Gs.AttributeMap.diff(b,m)||{}}else if(typeof c.insert=="object"){const x=Object.keys(c.insert)[0];if(x==null)return o;const v=this.scroll.query(x,_t.INLINE)!=null;if(v)(n<=o||this.scroll.descendant(zs,o)[0])&&(p=!0);else if(o>0){const[y,b]=this.scroll.descendant(Oi,o-1);y instanceof xa?y.value()[b]!==`
`&&(u=!0):y instanceof Is&&y.statics.scope===_t.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,x,c.insert[x]),v){const[y]=this.scroll.descendant(Oi,o);if(y){const b=ul({},Bs(y));m=Gs.AttributeMap.diff(b,m)||{}}}}n+=d}else if(a.push(c),c.retain!==null&&typeof c.retain=="object"){const x=Object.keys(c.retain)[0];if(x==null)return o;this.scroll.updateEmbedAt(o,x,c.retain[x])}Object.keys(m).forEach(x=>{this.scroll.formatAt(o,d,x,m[x])});const h=u?1:0,g=p?1:0;return n+=h+g,a.retain(h),a.delete(g),o+d+h+g},0),a.reduce((o,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(o,c.delete),o):o+Gs.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Ct().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(l=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(l,s[l])})}),this.scroll.optimize();const a=new Ct().retain(e).retain(n,kc(s));return this.update(a)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(l=>{this.scroll.formatAt(e,n,l,s[l])});const a=new Ct().retain(e).retain(n,kc(s));return this.update(a)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Ct)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=[];n===0?this.scroll.path(e).forEach(c=>{const[d]=c;d instanceof Ni?s.push(d):d instanceof Oi&&a.push(d)}):(s=this.scroll.lines(e,n),a=this.scroll.descendants(Oi,e,n));const[l,o]=[s,a].map(c=>{const d=c.shift();if(d==null)return{};let m=Bs(d);for(;Object.keys(m).length>0;){const u=c.shift();if(u==null)return m;m=Pde(Bs(u),m)}return m});return{...l,...o}}getHTML(e,n){const[s,a]=this.scroll.line(e);if(s){const l=s.length();return s.length()>=a+n&&!(a===0&&n===l)?Lm(s,a,n,!0):Lm(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=TS(n),a=new Ct().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(a)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new Ct().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(a=>{this.scroll.formatAt(e,n.length,a,s[a])}),this.update(new Ct().retain(e).insert(n,kc(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ni.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof ka}removeFormat(e,n){const s=this.getText(e,n),[a,l]=this.scroll.line(e+n);let o=0,c=new Ct;a!=null&&(o=a.length()-l,c=a.delta().slice(l,l+o-1).insert(`
`));const m=this.getContents(e,n+o).diff(new Ct().insert(s).concat(c)),u=new Ct().retain(e).concat(m);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(Dde)&&this.scroll.find(n[0].target)){const l=this.scroll.find(n[0].target),o=Bs(l),c=l.offset(this.scroll),d=n[0].oldValue.replace(oa.CONTENTS,""),m=new Ct().insert(d),u=new Ct().insert(l.value()),p=s&&{oldRange:AS(s.oldRange,-c),newRange:AS(s.newRange,-c)};e=new Ct().retain(c).concat(m.diff(u,p)).reduce((g,x)=>x.insert?g.insert(x.insert,o):g.push(x),new Ct),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!Gr(a.compose(e),this.delta))&&(e=a.diff(this.delta,s));return e}}function ic(t,e,n){if(t.length===0){const[g]=gx(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${ic([],e-1,n)}`}const[{child:s,offset:a,length:l,indent:o,type:c},...d]=t,[m,u]=gx(c);if(o>e)return n.push(c),o===e+1?`<${m}><li${u}>${Lm(s,a,l)}${ic(d,o,n)}`:`<${m}><li>${ic(t,e+1,n)}`;const p=n[n.length-1];if(o===e&&c===p)return`</li><li${u}>${Lm(s,a,l)}${ic(d,o,n)}`;const[h]=gx(n.pop());return`</li></${h}>${ic(t,e-1,n)}`}function Lm(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof xa)return bf(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof pa){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,n,(u,p,h)=>{const g="formats"in u&&typeof u.formats=="function"?u.formats():{};m.push({child:u,offset:p,length:h,indent:g.indent||0,type:g.list})}),ic(m,-1,[])}const a=[];if(t.children.forEachAt(e,n,(m,u,p)=>{a.push(Lm(m,u,p))}),s||t.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:o}=t.domNode,[c,d]=l.split(`>${o}<`);return c==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${d}`:`${c}>${a.join("")}<${d}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Pde(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const a=e[s];return a===t[s]?n[s]=a:Array.isArray(a)?a.indexOf(t[s])<0?n[s]=a.concat([t[s]]):n[s]=a:n[s]=[a,t[s]],n},{})}function gx(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function TS(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new Ct)}function AS(t,e){let{index:n,length:s}=t;return new fo(n+e,s)}function Mde(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:n.attributes}),a&&e.push({insert:a,attributes:n.attributes})}):e.push(n)}),e}class tr{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const jh="\uFEFF";class Zk extends Is{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(jh),this.rightGuard=document.createTextNode(jh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const a=e.data.split(jh).join("");if(e===this.leftGuard)if(this.prev instanceof xa){const l=this.prev.length();this.prev.insertAt(l,a),n={startNode:this.prev.domNode,startOffset:l+a.length}}else s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof xa?(this.next.insertAt(0,a),n={startNode:this.next.domNode,startOffset:a.length}):(s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:a.length}));return e.data=jh,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const a=this.restore(s.target);a&&(n.range=a)}})}}class Ide{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Zk)&&(this.emitter.emit(kt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(kt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(kt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(kt.events.COMPOSITION_END,e),this.isComposing=!1}}class dd{static DEFAULTS={modules:{}};static themes={default:dd};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const Ode=t=>t.parentElement||t.getRootNode().host||null,Fde=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},Nh=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},DS=(t,e,n,s,a,l)=>t<n&&e>s?0:t<n?-(n-t+a):e>s?e-t>s-n?t+a-n:e-s+l:0,Lde=(t,e)=>{const n=t.ownerDocument;let s=e,a=t;for(;a;){const l=a===n.body,o=l?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:Fde(a),c=getComputedStyle(a),d=DS(s.left,s.right,o.left,o.right,Nh(c.scrollPaddingLeft),Nh(c.scrollPaddingRight)),m=DS(s.top,s.bottom,o.top,o.bottom,Nh(c.scrollPaddingTop),Nh(c.scrollPaddingBottom));if(d||m)if(l)n.defaultView?.scrollBy(d,m);else{const{scrollLeft:u,scrollTop:p}=a;m&&(a.scrollTop+=m),d&&(a.scrollLeft+=d);const h=a.scrollLeft-u,g=a.scrollTop-p;s={left:s.left-h,top:s.top-g,right:s.right-h,bottom:s.bottom-g}}a=l||c.position==="fixed"?null:Ode(a)}},$de=100,Bde=["block","break","cursor","inline","scroll","text"],qde=(t,e,n)=>{const s=new Hc;return Bde.forEach(a=>{const l=e.query(a);l&&s.register(l)}),t.forEach(a=>{let l=e.query(a);l||n.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;l;)if(s.register(l),l="blotName"in l?l.requiredContainer??null:null,o+=1,o>$de){n.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),s},Nc=qr("quill"),Ch=new Hc;pa.uiClass="ql-ui";class Ye{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Ch,theme:"default"};static events=kt.events;static sources=kt.sources;static version="2.0.3";static imports={delta:Ct,parchment:bde,"core/module":tr,"core/theme":dd};static debug(e){e===!0&&(e="log"),qr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return nb.get(e)||Ch.find(e,n)}static import(e){return this.imports[e]==null&&Nc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(a=>{this.register(a,e[a],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&Nc.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Ch.register(n),typeof n.register=="function"&&n.register(Ch)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Hde(e,n),this.container=this.options.container,this.container==null){Nc.error("Invalid Quill container",e);return}this.options.debug&&Ye.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",nb.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new kt;const a=Qk.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Rde(this.scroll),this.selection=new Ade(this.scroll,this.emitter),this.composition=new Ide(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(kt.events.EDITOR_CHANGE,o=>{o===kt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(kt.events.SCROLL_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;ra.call(this,()=>this.editor.update(null,c,u),o)}),this.emitter.on(kt.events.SCROLL_EMBED_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;ra.call(this,()=>{const p=new Ct().retain(o.offset(this)).retain({[o.statics.blotName]:c});return this.editor.update(p,[],u)},Ye.sources.USER)}),s){const o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=lr(e,n,s),ra.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kt.sources.API;return ra.call(this,()=>{const a=this.getSelection(!0);let l=new Ct;if(a==null)return l;if(this.scroll.query(e,_t.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:n});else{if(a.length===0)return this.selection.format(e,n),l;l=this.editor.formatText(a.index,a.length,{[e]:n})}return this.setSelection(a,kt.sources.SILENT),l},s)}formatLine(e,n,s,a,l){let o;return[e,n,o,l]=lr(e,n,s,a,l),ra.call(this,()=>this.editor.formatLine(e,n,o),l,e,0)}formatText(e,n,s,a,l){let o;return[e,n,o,l]=lr(e,n,s,a,l),ra.call(this,()=>this.editor.formatText(e,n,o),l,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const a=this.container.getBoundingClientRect();return{bottom:s.bottom-a.top,height:s.height,left:s.left-a.left,right:s.right-a.left,top:s.top-a.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=lr(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=lr(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=lr(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ye.sources.API;return ra.call(this,()=>this.editor.insertEmbed(e,n,s),a,e)}insertText(e,n,s,a,l){let o;return[e,,o,l]=lr(e,0,s,a,l),ra.call(this,()=>this.editor.insertText(e,n,o),l,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=lr(e,n,s),ra.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){Lde(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kt.sources.API;return ra.call(this,()=>{e=new Ct(e);const s=this.getLength(),a=this.editor.deleteText(0,s),l=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(o)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||Ye.sources.API):([e,n,,s]=lr(e,n,s),this.selection.setRange(new fo(Math.max(0,e),n),s),s!==kt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kt.sources.API;const s=new Ct().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kt.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kt.sources.API;return ra.call(this,()=>(e=new Ct(e),this.editor.applyDelta(e)),n,!0)}}function RS(t){return typeof t=="string"?document.querySelector(t):t}function fx(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,a]=n;return{...e,[s]:a===!0?{}:a}},{})}function PS(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function Hde(t,e){const n=RS(t);if(!n)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===Ye.DEFAULTS.theme?dd:Ye.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...o}=Ye.DEFAULTS,{modules:c,...d}=a.DEFAULTS;let m=fx(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const u=ul({},fx(l),fx(c),m),p={...o,...PS(d),...PS(e)};let h=e.registry;return h?e.formats&&Nc.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?qde(e.formats,p.registry,Nc):p.registry,{...p,registry:h,container:n,theme:a,modules:Object.entries(u).reduce((g,x)=>{let[v,y]=x;if(!y)return g;const b=Ye.import(`modules/${v}`);return b==null?(Nc.error(`Cannot load ${v} module. Are you sure you registered it?`),g):{...g,[v]:ul({},b.DEFAULTS||{},y)}},{}),bounds:RS(p.bounds)}}function ra(t,e,n,s){if(!this.isEnabled()&&e===kt.sources.USER&&!this.allowReadOnlyEdits)return new Ct;let a=n==null?null:this.getSelection();const l=this.editor.delta,o=t();if(a!=null&&(n===!0&&(n=a.index),s==null?a=MS(a,o,e):s!==0&&(a=MS(a,n,s,e)),this.setSelection(a,kt.sources.SILENT)),o.length()>0){const c=[kt.events.TEXT_CHANGE,o,l,e];this.emitter.emit(kt.events.EDITOR_CHANGE,...c),e!==kt.sources.SILENT&&this.emitter.emit(...c)}return o}function lr(t,e,n,s,a){let l={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(a=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(a=s,s=n,n=e,e=0),typeof n=="object"?(l=n,a=s):typeof n=="string"&&(s!=null?l[n]=s:a=n),a=a||kt.sources.API,[t,e,l,a]}function MS(t,e,n,s){const a=typeof n=="number"?n:0;if(t==null)return null;let l,o;return e&&typeof e.transformPosition=="function"?[l,o]=[t.index,t.index+t.length].map(c=>e.transformPosition(c,s!==kt.sources.USER)):[l,o]=[t.index,t.index+t.length].map(c=>c<e||c===e&&s===kt.sources.USER?c:a>=0?c+a:Math.max(e,c+a)),new fo(l,o-l)}class Oo extends yf{}function IS(t){return t instanceof Ni||t instanceof zs}function OS(t){return typeof t.updateContent=="function"}class zde extends Qk{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ni;static allowedChildren=[Ni,zs,Oo];constructor(e,n,s){let{emitter:a}=s;super(e,n),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(kt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(kt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(kt.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,a]=this.line(e),[l]=this.line(e+n);if(super.deleteAt(e,n),l!=null&&s!==l&&a>0){if(s instanceof zs||l instanceof zs){this.optimize();return}const o=l.children.head instanceof ka?null:l.children.head;s.moveChildren(l,o),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,_t.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),s==null&&n.endsWith(`
`)?a.insertAt(0,n.slice(0,-1),s):a.insertAt(0,n,s)}else{const a=this.scroll.create(n,s);this.appendChild(a)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===_t.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new Ct().insert(`
`))),a=s.pop();if(a==null)return;this.batchStart();const l=s.shift();if(l){const d=l.type==="block"&&(l.delta.length()===0||!this.descendant(zs,e)[0]&&e<this.length()),m=l.type==="block"?l.delta:new Ct().insert({[l.key]:l.value});vx(this,e,m);const u=l.type==="block"?1:0,p=e+m.length()+u;d&&this.insertAt(p-1,`
`);const h=Bs(this.line(e)[0]),g=Gs.AttributeMap.diff(h,l.attributes)||{};Object.keys(g).forEach(x=>{this.formatAt(p-1,1,x,g[x])}),e=p}let[o,c]=this.children.find(e);if(s.length&&(o&&(o=o.split(c),c=0),s.forEach(d=>{if(d.type==="block"){const m=this.createBlock(d.attributes,o||void 0);vx(m,0,d.delta)}else{const m=this.create(d.key,d.value);this.insertBefore(m,o||void 0),Object.keys(d.attributes).forEach(u=>{m.format(u,d.attributes[u])})}})),a.type==="block"&&a.delta.length()){const d=o?o.offset(o.scroll)+c:this.length();vx(this,d,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,a]=n;return s instanceof Oi?[s,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(IS,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(a,l,o)=>{let c=[],d=o;return a.children.forEachAt(l,o,(m,u,p)=>{IS(m)?c.push(m):m instanceof yf&&(c=c.concat(s(m,u,d))),d-=p}),c};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(kt.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=kt.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:a}=s;const l=this.find(a,!0);return l&&!OS(l)}),e.length>0&&this.emitter.emit(kt.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(kt.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[a]=this.descendant(l=>l instanceof zs,e);a&&a.statics.blotName===n&&OS(a)&&a.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new Ct;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const o=l.split(`
`);o.slice(0,-1).forEach(d=>{s.insert(d,a.attributes),n.push({type:"block",delta:s,attributes:a.attributes??{}}),s=new Ct});const c=o[o.length-1];c&&s.insert(c,a.attributes)}else{const o=Object.keys(l)[0];if(!o)return;this.query(o,_t.INLINE)?s.push(a):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new Ct,n.push({type:"blockEmbed",key:o,value:l[o],attributes:a.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const a={};Object.entries(e).forEach(c=>{let[d,m]=c;this.query(d,_t.BLOCK&_t.BLOT)!=null?s=d:a[d]=m});const l=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(l,n||void 0);const o=l.length();return Object.entries(a).forEach(c=>{let[d,m]=c;l.formatAt(0,o,d,m)}),l}}function vx(t,e,n){n.reduce((s,a)=>{const l=Gs.Op.length(a);let o=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const c=a.insert;t.insertAt(s,c);const[d]=t.descendant(Oi,s),m=Bs(d);o=Gs.AttributeMap.diff(m,o)||{}}else if(typeof a.insert=="object"){const c=Object.keys(a.insert)[0];if(c==null)return s;if(t.insertAt(s,c,a.insert[c]),t.scroll.query(c,_t.INLINE)!=null){const[m]=t.descendant(Oi,s),u=Bs(m);o=Gs.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(c=>{t.formatAt(s,l,c,o[c])}),s+l},e)}const Xk={scope:_t.BLOCK,whitelist:["right","center","justify"]},Vde=new Ga("align","align",Xk),FM=new wa("align","ql-align",Xk),LM=new _l("align","text-align",Xk);class $M extends _l{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):n}}const Ude=new wa("color","ql-color",{scope:_t.INLINE}),Jk=new $M("color","color",{scope:_t.INLINE}),Wde=new wa("background","ql-bg",{scope:_t.INLINE}),ej=new $M("background","background-color",{scope:_t.INLINE});class Fo extends Oo{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${bf(this.code(e,n))}
</pre>`}}class Gi extends Ni{static TAB="  ";static register(){Ye.register(Fo)}}class tj extends zi{}tj.blotName="code";tj.tagName="CODE";Gi.blotName="code-block";Gi.className="ql-code-block";Gi.tagName="DIV";Fo.blotName="code-block-container";Fo.className="ql-code-block-container";Fo.tagName="DIV";Fo.allowedChildren=[Gi];Gi.allowedChildren=[xa,ka,oa];Gi.requiredContainer=Fo;const nj={scope:_t.BLOCK,whitelist:["rtl"]},BM=new Ga("direction","dir",nj),qM=new wa("direction","ql-direction",nj),HM=new _l("direction","direction",nj),zM={scope:_t.INLINE,whitelist:["serif","monospace"]},VM=new wa("font","ql-font",zM);class Kde extends _l{value(e){return super.value(e).replace(/["']/g,"")}}const UM=new Kde("font","font-family",zM),WM=new wa("size","ql-size",{scope:_t.INLINE,whitelist:["small","large","huge"]}),KM=new _l("size","font-size",{scope:_t.INLINE,whitelist:["10px","18px","32px"]}),Gde=qr("quill:keyboard"),Yde=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class wf extends tr{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Zde(e);if(a==null){Gde.warn("Attempted to add invalid keyboard binding",a);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(a.key)?a.key:[a.key]).forEach(o=>{const c={...a,key:o,...n,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>wf.match(e,b));if(a.length===0)return;const l=Ye.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[c,d]=this.quill.getLine(o.index),[m,u]=this.quill.getLeaf(o.index),[p,h]=o.length===0?[m,u]:this.quill.getLeaf(o.index+o.length),g=m instanceof mg?m.value().slice(0,u):"",x=p instanceof mg?p.value().slice(h):"",v={collapsed:o.length===0,empty:o.length===0&&c.length()<=1,format:this.quill.getFormat(o),line:c,offset:d,prefix:g,suffix:x,event:e};a.some(b=>{if(b.collapsed!=null&&b.collapsed!==v.collapsed||b.empty!=null&&b.empty!==v.empty||b.offset!=null&&b.offset!==v.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(k=>v.format[k]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(k=>b.format[k]===!0?v.format[k]!=null:b.format[k]===!1?v.format[k]==null:Gr(b.format[k],v.format[k])))return!1;return b.prefix!=null&&!b.prefix.test(v.prefix)||b.suffix!=null&&!b.suffix.test(v.suffix)?!1:b.handler.call(this,o,v,b)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let o=new Ct().retain(e.index-s).delete(s);if(n.offset===0){const[c]=this.quill.getLine(e.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const m=l.formats(),u=this.quill.getFormat(e.index-1,1);if(a=Gs.AttributeMap.diff(m,u)||{},Object.keys(a).length>0){const p=new Ct().retain(e.index+l.length()-2).retain(1,a);o=o.compose(p)}}}this.quill.updateContents(o,Ye.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let a={};const[l]=this.quill.getLine(e.index);let o=new Ct().retain(e.index).delete(s);if(n.offset>=l.length()-1){const[c]=this.quill.getLine(e.index+1);if(c){const d=l.formats(),m=this.quill.getFormat(e.index,1);a=Gs.AttributeMap.diff(d,m)||{},Object.keys(a).length>0&&(o=o.retain(c.length()-1).retain(1,a))}}this.quill.updateContents(o,Ye.sources.USER),this.quill.focus()}handleDeleteRange(e){ij({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((l,o)=>(this.quill.scroll.query(o,_t.BLOCK)&&!Array.isArray(n.format[o])&&(l[o]=n.format[o]),l),{}),a=new Ct().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(a,Ye.sources.USER),this.quill.setSelection(e.index+1,Ye.sources.SILENT),this.quill.focus()}}const Qde={bindings:{bold:xx("bold"),italic:xx("italic"),underline:xx("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Ye.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Ye.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Ye.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Ye.sources.USER)}},"indent code-block":FS(!0),"outdent code-block":FS(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Ye.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Ct().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,Ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Ye.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Ye.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Ye.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},a=new Ct().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,Ye.sources.USER),this.quill.setSelection(t.index+1,Ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),a=new Ct().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,Ye.sources.USER),this.quill.setSelection(t.index+1,Ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,a,l]=e.getTable(t),o=Xde(n,s,a,l);if(o==null)return;let c=n.offset();if(o<0){const d=new Ct().retain(c).insert(`
`);this.quill.updateContents(d,Ye.sources.USER),this.quill.setSelection(t.index+1,t.length,Ye.sources.SILENT)}else if(o>0){c+=n.length();const d=new Ct().retain(c).insert(`
`);this.quill.updateContents(d,Ye.sources.USER),this.quill.setSelection(c,Ye.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,a=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(a-1,Ye.sources.USER):this.quill.setSelection(a+s.length(),Ye.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,a]=this.quill.getLine(t.index);if(a>n)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",Ye.sources.USER),this.quill.history.cutoff();const o=new Ct().retain(t.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:l});return this.quill.updateContents(o,Ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Ye.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,s-=1,s<=0){const l=new Ct().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,Ye.sources.USER),this.quill.setSelection(t.index-1,Ye.sources.SILENT),!1}return!0}},"embed left":Sh("ArrowLeft",!1),"embed left shift":Sh("ArrowLeft",!0),"embed right":Sh("ArrowRight",!1),"embed right shift":Sh("ArrowRight",!0),"table down":LS(!1),"table up":LS(!0)}};wf.DEFAULTS=Qde;function FS(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,l,Ye.sources.USER),this.quill.setSelection(e.index+l.length,Ye.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:d}=e;o.forEach((m,u)=>{t?(m.insertAt(0,l),u===0?c+=l.length:d+=l.length):m.domNode.textContent.startsWith(l)&&(m.deleteAt(0,l.length),u===0?c-=l.length:d-=l.length)}),this.quill.update(Ye.sources.USER),this.quill.setSelection(c,d,Ye.sources.SILENT)}}}function Sh(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:a}=s;t==="ArrowRight"&&(a+=s.length+1);const[l]=this.quill.getLeaf(a);return l instanceof Is?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,Ye.sources.USER):this.quill.setSelection(s.index-1,Ye.sources.USER):e?this.quill.setSelection(s.index,s.length+1,Ye.sources.USER):this.quill.setSelection(s.index+s.length+1,Ye.sources.USER),!1):!0}}}function xx(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Ye.sources.USER)}}}function LS(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",a=n.line,l=a.parent[s];if(l!=null){if(l.statics.blotName==="table-row"){let o=l.children.head,c=a;for(;c.prev!=null;)c=c.prev,o=o.next;const d=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(d,0,Ye.sources.USER)}}else{const o=a.table()[s];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Ye.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Ye.sources.USER))}return!1}}}function Zde(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=kc(t);else return null;return t.shortKey&&(t[Yde]=t.shortKey,delete t.shortKey),t}function ij(t){let{quill:e,range:n}=t;const s=e.getLines(n);let a={};if(s.length>1){const l=s[0].formats(),o=s[s.length-1].formats();a=Gs.AttributeMap.diff(o,l)||{}}e.deleteText(n,Ye.sources.USER),Object.keys(a).length>0&&e.formatLine(n.index,1,a,Ye.sources.USER),e.setSelection(n.index,Ye.sources.SILENT)}function Xde(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Jde=/font-weight:\s*normal/,eme=["P","OL","UL"],$S=t=>t&&eme.includes(t.tagName),tme=t=>{Array.from(t.querySelectorAll("br")).filter(e=>$S(e.previousElementSibling)&&$S(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},nme=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(Jde)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function ime(t){t.querySelector('[id^="docs-internal-guid-"]')&&(nme(t),tme(t))}const sme=/\bmso-list:[^;]*ignore/i,ame=/\bmso-list:[^;]*\bl(\d+)/i,rme=/\bmso-list:[^;]*\blevel(\d+)/i,lme=(t,e)=>{const n=t.getAttribute("style"),s=n?.match(ame);if(!s)return null;const a=Number(s[1]),l=n?.match(rme),o=l?Number(l[1]):1,c=new RegExp(`@list l${a}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),d=e.match(c),m=d&&d[1]==="bullet"?"bullet":"ordered";return{id:a,indent:o,type:m,element:t}},ome=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(o=>{(o.getAttribute("style")||"").match(sme)?n.push(o):s.push(o)}),n.forEach(o=>o.parentNode?.removeChild(o));const a=t.documentElement.innerHTML,l=s.map(o=>lme(o,a)).filter(o=>o);for(;l.length;){const o=[];let c=l.shift();for(;c;)o.push(c),c=l.length&&l[0]?.element===c.element.nextElementSibling&&l[0].id===c.id?l.shift():null;const d=document.createElement("ul");o.forEach(p=>{const h=document.createElement("li");h.setAttribute("data-list",p.type),p.indent>1&&h.setAttribute("class",`ql-indent-${p.indent-1}`),h.innerHTML=p.element.innerHTML,d.appendChild(h)});const m=o[0]?.element,{parentNode:u}=m??{};m&&u?.replaceChild(d,m),o.slice(1).forEach(p=>{let{element:h}=p;u?.removeChild(h)})}};function cme(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&ome(t)}const dme=[cme,ime],mme=t=>{t.documentElement&&dme.forEach(e=>{e(t)})},ume=qr("quill:clipboard"),hme=[[Node.TEXT_NODE,Sme],[Node.TEXT_NODE,qS],["br",yme],[Node.ELEMENT_NODE,qS],[Node.ELEMENT_NODE,xme],[Node.ELEMENT_NODE,vme],[Node.ELEMENT_NODE,Nme],["li",kme],["ol, ul",jme],["pre",bme],["tr",Cme],["b",yx("bold")],["i",yx("italic")],["strike",yx("strike")],["style",wme]],pme=[Vde,BM].reduce((t,e)=>(t[e.keyName]=e,t),{}),BS=[LM,ej,Jk,HM,UM,KM].reduce((t,e)=>(t[e.keyName]=e,t),{});class gme extends tr{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],hme.concat(this.options.matchers??[]).forEach(s=>{let[a,l]=s;this.addMatcher(a,l)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Gi.blotName])return new Ct().insert(s||"",{[Gi.blotName]:a[Gi.blotName]});if(!n)return new Ct().insert(s||"",a);const l=this.convertHTML(n);return gu(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ct().retain(l.length()-1).delete(1)):l}normalizeHTML(e){mme(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,a=new WeakMap,[l,o]=this.prepareMatching(s,a);return sj(this.quill.scroll,s,l,o,a)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ye.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,n),this.quill.setSelection(0,Ye.sources.SILENT)}else{const a=this.convert({html:n,text:""});this.quill.updateContents(new Ct().retain(e).concat(a),s),this.quill.setSelection(e+a.length(),Ye.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:a,text:l}=this.onCopy(s,n);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),n&&ij({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!s&&!a){const o=e.clipboardData?.getData("text/uri-list");o&&(a=this.normalizeURIList(o))}const l=Array.from(e.clipboardData?.files||[]);if(!s&&l.length>0){this.quill.uploader.upload(n,l);return}if(s&&l.length>0){const o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,l);return}}this.onPaste(n,{html:s,text:a})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:a}=n;const l=this.quill.getFormat(e.index),o=this.convert({text:s,html:a},l);ume.log("onPaste",o,{text:s,html:a});const c=new Ct().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(c,Ye.sources.USER),this.quill.setSelection(c.length()-e.length,Ye.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],a=[];return this.matchers.forEach(l=>{const[o,c]=l;switch(o){case Node.TEXT_NODE:a.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(e.querySelectorAll(o)).forEach(d=>{n.has(d)?n.get(d)?.push(c):n.set(d,[c])});break}}),[s,a]}}function Lo(t,e,n,s){return s.query(e)?t.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const o=n?{[e]:n}:{};return a.insert(l.insert,{...o,...l.attributes})},new Ct):t}function gu(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const a=t.ops[s];if(typeof a.insert!="string")break;n=a.insert+n}return n.slice(-1*e.length)===e}function ll(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Is?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function fme(t,e){return t.previousElementSibling&&t.nextElementSibling&&!ll(t.previousElementSibling,e)&&!ll(t.nextElementSibling,e)}const _h=new WeakMap;function GM(t){return t==null?!1:(_h.has(t)||(t.tagName==="PRE"?_h.set(t,!0):_h.set(t,GM(t.parentNode))),_h.get(t))}function sj(t,e,n,s,a){return e.nodeType===e.TEXT_NODE?s.reduce((l,o)=>o(e,l,t),new Ct):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,o)=>{let c=sj(t,o,n,s,a);return o.nodeType===e.ELEMENT_NODE&&(c=n.reduce((d,m)=>m(o,d,t),c),c=(a.get(o)||[]).reduce((d,m)=>m(o,d,t),c)),l.concat(c)},new Ct):new Ct}function yx(t){return(e,n,s)=>Lo(n,t,!0,s)}function vme(t,e,n){const s=Ga.keys(t),a=wa.keys(t),l=_l.keys(t),o={};return s.concat(a).concat(l).forEach(c=>{let d=n.query(c,_t.ATTRIBUTE);d!=null&&(o[d.attrName]=d.value(t),o[d.attrName])||(d=pme[c],d!=null&&(d.attrName===c||d.keyName===c)&&(o[d.attrName]=d.value(t)||void 0),d=BS[c],d!=null&&(d.attrName===c||d.keyName===c)&&(d=BS[c],o[d.attrName]=d.value(t)||void 0))}),Object.entries(o).reduce((c,d)=>{let[m,u]=d;return Lo(c,m,u,n)},e)}function xme(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Is){const a={},l=s.value(t);if(l!=null)return a[s.blotName]=l,new Ct().insert(a,s.formats(t,n))}else if(s.prototype instanceof Fm&&!gu(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Lo(e,s.blotName,s.formats(t,n),n);return e}function yme(t,e){return gu(e,`
`)||e.insert(`
`),e}function bme(t,e,n){const s=n.query("code-block"),a=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return Lo(e,"code-block",a,n)}function wme(){return new Ct}function kme(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!gu(e,`
`))return e;let a=-1,l=t.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((o,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?o.push(c):o.insert(c.insert,{indent:a,...c.attributes||{}}):o,new Ct)}function jme(t,e,n){const s=t;let a=s.tagName==="OL"?"ordered":"bullet";const l=s.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),Lo(e,"list",a,n)}function qS(t,e,n){if(!gu(e,`
`)){if(ll(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(ll(s,n))return e.insert(`
`);const a=n.query(s);if(a&&a.prototype instanceof zs)return e.insert(`
`);s=s.firstChild}}}return e}function Nme(t,e,n){const s={},a=t.style||{};return a.fontStyle==="italic"&&(s.italic=!0),a.textDecoration==="underline"&&(s.underline=!0),a.textDecoration==="line-through"&&(s.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((l,o)=>{let[c,d]=o;return Lo(l,c,d,n)},e),parseFloat(a.textIndent||0)>0?new Ct().insert("	").concat(e):e}function Cme(t,e,n){const s=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(s!=null){const l=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return Lo(e,"table",l,n)}return e}function Sme(t,e,n){let s=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!GM(t)){if(s.trim().length===0&&s.includes(`
`)&&!fme(t,n))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&ll(t.parentElement,n)||t.previousSibling instanceof Element&&ll(t.previousSibling,n))&&(s=s.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&ll(t.parentElement,n)||t.nextSibling instanceof Element&&ll(t.nextSibling,n))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class _me extends tr{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(Ye.events.EDITOR_CHANGE,(s,a,l,o)=>{s===Ye.events.SELECTION_CHANGE?a&&o!==Ye.sources.SILENT&&(this.currentRange=a):s===Ye.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===Ye.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=ab(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const a=this.quill.getContents(),l=s.delta.invert(a);this.stack[n].push({delta:l,range:ab(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,Ye.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),a=o.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){HS(this.stack.undo,e),HS(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Ye.sources.USER);else{const n=Tme(this.quill.scroll,e.delta);this.quill.setSelection(n,Ye.sources.USER)}}}function HS(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const a=t[s];t[s]={delta:n.transform(a.delta,!0),range:a.range&&ab(a.range,n)},n=a.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function Eme(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,_t.BLOCK)!=null):!1}function Tme(t,e){const n=e.reduce((a,l)=>a+(l.delete||0),0);let s=e.length()-n;return Eme(t,e)&&(s-=1),s}function ab(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class YM extends tr{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{s.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);a=document.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const o=e.selection.normalizedToRange(l);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&s.push(a)}),s.length>0&&this.options.handler.call(this,e,s)}}YM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(s)}));Promise.all(n).then(s=>{const a=s.reduce((l,o)=>l.insert({image:o}),new Ct().retain(t.index).delete(t.length));this.quill.updateContents(a,kt.sources.USER),this.quill.setSelection(t.index+s.length,kt.sources.SILENT)})}};const Ame=["insertText","insertReplacementText"];class Dme extends tr{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(Ye.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ij({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ct().retain(e.index).insert(n,s),Ye.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,Ye.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Ame.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=Rme(e);if(s==null)return;const a=this.quill.selection.normalizeNative(n),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Rme(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Pme=/Mac/i.test(navigator.platform),Mme=100,Ime=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Pme&&t.key==="a"&&t.ctrlKey===!0);class Ome extends tr{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:a}=n;if(!(s instanceof pa)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),Ye.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&Ime(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Mme,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof pa)||!s.uiNode)return;const a=document.createRange();a.setStartAfter(s.uiNode),a.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(a)}}Ye.register({"blots/block":Ni,"blots/block/embed":zs,"blots/break":ka,"blots/container":Oo,"blots/cursor":oa,"blots/embed":Zk,"blots/inline":zi,"blots/scroll":zde,"blots/text":xa,"modules/clipboard":gme,"modules/history":_me,"modules/keyboard":wf,"modules/uploader":YM,"modules/input":Dme,"modules/uiNode":Ome});class Fme extends wa{add(e,n){let s=0;if(n==="+1"||n==="-1"){const a=this.value(e)||0;s=n==="+1"?a+1:a-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const Lme=new Fme("indent","ql-indent",{scope:_t.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class $me extends Ni{static blotName="blockquote";static tagName="blockquote"}class Bme extends Ni{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class fu extends Oo{}fu.blotName="list-container";fu.tagName="OL";class vu extends Ni{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Ye.register(fu)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),l.preventDefault()):o==="unchecked"&&(this.format("list","checked"),l.preventDefault())};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}vu.blotName="list";vu.tagName="LI";fu.allowedChildren=[vu];vu.requiredContainer=fu;class aj extends zi{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class qme extends aj{static blotName="italic";static tagName=["EM","I"]}class ug extends zi{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return QM(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function QM(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class Hme extends zi{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class zme extends aj{static blotName="strike";static tagName=["S","STRIKE"]}class Vme extends zi{static blotName="underline";static tagName="U"}class Ume extends Zk{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const zS=["alt","height","width"];let Wme=class extends Is{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return zS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return QM(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){zS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const VS=["height","width"];class Kme extends zs{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return VS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return ug.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){VS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Wd=new wa("code-token","hljs",{scope:_t.INLINE});class Mr extends zi{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Gi.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Wd.add(this.domNode,s)}format(e,n){e!==Mr.blotName?super.format(e,n):n?Wd.add(this.domNode,n):(Wd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Wd.value(this.domNode)||this.unwrap()}}Mr.blotName="code-token";Mr.className="ql-token";class qs extends Gi{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Mr.blotName,!1),super.replaceWith(e,n)}}class mm extends Fo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===qs.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,a){s===qs.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,a)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,l=qs.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const o=this.children.reduce((d,m)=>d.concat(IM(m,!1)),new Ct),c=e(a,l);o.diff(c).reduce((d,m)=>{let{retain:u,attributes:p}=m;return u?(p&&Object.keys(p).forEach(h=>{[qs.blotName,Mr.blotName].includes(h)&&this.formatAt(d,u,h,p[h])}),d+u):d},0)}this.cachedText=a,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?qs.formats(s.domNode):"plain"}">
${bf(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=qs.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}mm.allowedChildren=[qs];qs.requiredContainer=mm;qs.allowedChildren=[Mr,oa,xa,ka];const Gme=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class ZM extends tr{static register(){Ye.register(Mr,!0),Ye.register(qs,!0),Ye.register(mm,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,a)=>{let{key:l}=a;return s[l]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Ye.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof mm))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:a,label:l}=s;const o=n.ownerDocument.createElement("option");o.textContent=l,o.setAttribute("value",a),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(qs.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=qs.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Ye.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Ye.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(mm):[e]).forEach(l=>{l.highlight(this.highlightBlot,n)}),this.quill.update(Ye.sources.SILENT),s!=null&&this.quill.setSelection(s,Ye.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return bf(e).split(`
`).reduce((a,l,o)=>(o!==0&&a.insert(`
`,{[Gi.blotName]:n}),a.insert(l)),new Ct);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Gi.className),s.innerHTML=Gme(this.options.hljs,n,e),sj(this.quill.scroll,s,[(a,l)=>{const o=Wd.value(a);return o?l.compose(new Ct().retain(l.length(),{[Mr.blotName]:o})):l}],[(a,l)=>a.data.split(`
`).reduce((o,c,d)=>(d!==0&&o.insert(`
`,{[Gi.blotName]:n}),o.insert(c)),l)],new WeakMap)}}ZM.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class da extends Ni{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",rj()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===da.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class vo extends Oo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),a=n.next.formats();if(s.table!==a.table){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class hl extends Oo{static blotName="table-body";static tagName="TBODY"}class hg extends Oo{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(vo),n=e.reduce((s,a)=>Math.max(a.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let a;s.children.head!=null&&(a=da.formats(s.children.head.domNode));const l=this.scroll.create(da.blotName,a);s.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(hl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e);a?.remove()})}insertColumn(e){const[n]=this.descendant(hl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e),l=da.formats(s.children.head.domNode),o=this.scroll.create(da.blotName,l);s.insertBefore(o,a)})}insertRow(e){const[n]=this.descendant(hl);if(n==null||n.children.head==null)return;const s=rj(),a=this.scroll.create(vo.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(da.blotName,s);a.appendChild(o)});const l=n.children.at(e);n.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}hg.allowedChildren=[hl];hl.requiredContainer=hg;hl.allowedChildren=[vo];vo.requiredContainer=hl;vo.allowedChildren=[da];da.requiredContainer=vo;function rj(){return`row-${Math.random().toString(36).slice(2,6)}`}class Yme extends tr{static register(){Ye.register(da),Ye.register(vo),Ye.register(hl),Ye.register(hg)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(hg).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(Ye.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Ye.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(Ye.sources.USER),this.quill.setSelection(n,Ye.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==da.blotName)return[null,null,null,-1];const a=n.parent;return[a.parent.parent,a,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,a,l]=this.getTable(n);if(l==null)return;const o=l.cellOffset();s.insertColumn(o+e),this.quill.update(Ye.sources.USER);let c=a.rowOffset();e===0&&(c+=1),this.quill.setSelection(n.index+c,n.length,Ye.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,a,l]=this.getTable(n);if(l==null)return;const o=a.rowOffset();s.insertRow(o+e),this.quill.update(Ye.sources.USER),e>0?this.quill.setSelection(n,Ye.sources.SILENT):this.quill.setSelection(n.index+a.children.length,n.length,Ye.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const a=new Array(e).fill(0).reduce(l=>{const o=new Array(n).fill(`
`).join("");return l.insert(o,{table:rj()})},new Ct().retain(s.index));this.quill.updateContents(a,Ye.sources.USER),this.quill.setSelection(s.index,Ye.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Ye.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(Ye.events.TEXT_CHANGE,(s,a,l)=>{l===Ye.sources.USER&&this.balanceTables()}),!0):!1)})}}const US=qr("quill:toolbar");class lj extends tr{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Qme(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){US.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const a=this.options.handlers?.[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Ye.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){US.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const c=e.options[e.selectedIndex];c.hasAttribute("selected")?l=!1:l=c.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,l);else if(this.quill.scroll.query(n).prototype instanceof Is){if(l=prompt(`Enter ${n}`),!l)return;this.quill.updateContents(new Ct().retain(o.index).delete(o.length).insert({[n]:l}),Ye.sources.USER)}else this.quill.format(n,l,Ye.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[a,l]=s;if(l.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[a]==null)o=l.querySelector("option[selected]");else if(!Array.isArray(n[a])){let c=n[a];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),o=l.querySelector(`option[value="${c}"]`)}o==null?(l.value="",l.selectedIndex=-1):o.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const o=n[a],c=o===l.getAttribute("value")||o!=null&&o.toString()===l.getAttribute("value")||o==null&&!l.getAttribute("value");l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}else{const o=n[a]!=null;l.classList.toggle("ql-active",o),l.setAttribute("aria-pressed",o.toString())}})}}lj.DEFAULTS={};function WS(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function Qme(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(a=>{if(typeof a=="string")WS(s,a);else{const l=Object.keys(a)[0],o=a[l];Array.isArray(o)?Zme(s,l,o):WS(s,l,o)}}),t.appendChild(s)})}function Zme(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),s.appendChild(l)}),t.appendChild(s)}lj.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,_t.INLINE)!=null&&this.quill.format(n,!1,Ye.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Ye.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Ye.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Ye.sources.USER),this.quill.format("direction",t,Ye.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let a=t==="+1"?1:-1;n.direction==="rtl"&&(a*=-1),this.quill.format("indent",s+a,Ye.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Ye.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,Ye.sources.USER):this.quill.format("list","unchecked",Ye.sources.USER):this.quill.format("list",t,Ye.sources.USER)}}};const Xme='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Jme='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',eue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',tue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',nue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',iue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',sue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',aue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',KS='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',rue='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',lue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',oue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',cue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',due='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',mue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',uue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',pue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',gue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',fue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',vue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',xue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',yue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',bue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',wue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',kue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',jue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Nue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Cue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Sue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',_ue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Eue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Tue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',$m={align:{"":Xme,center:Jme,right:eue,justify:tue},background:nue,blockquote:iue,bold:sue,clean:aue,code:KS,"code-block":KS,color:rue,direction:{"":lue,rtl:oue},formula:cue,header:{1:due,2:mue,3:uue,4:hue,5:pue,6:gue},italic:fue,image:vue,indent:{"+1":xue,"-1":yue},link:bue,list:{bullet:wue,check:kue,ordered:jue},script:{sub:Nue,super:Cue},strike:Sue,table:_ue,underline:Eue,video:Tue},Aue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let GS=0;function YS(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class kf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),YS(this.label,"aria-expanded"),YS(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(n,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Aue,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${GS}`,GS+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class XM extends kf{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=a:s.style.fill=a)}}class JM extends kf{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Due=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class eI{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Due(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let o=0;if(l.right>a.right&&(o=a.right-l.right,this.root.style.left=`${n+o}px`),l.left<a.left&&(o=a.left-l.left,this.root.style.left=`${n+o}px`),l.bottom>a.bottom){const c=l.bottom-l.top,d=e.bottom-e.top+c;this.root.style.top=`${s-d}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Rue=[!1,"center","right","justify"],Pue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Mue=[!1,"serif","monospace"],Iue=["1","2","3",!1],Oue=["small",!1,"large","huge"];class xu extends dd{constructor(e,n){super(e,n);const s=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),n[l]!=null))if(l==="direction")s.innerHTML=n[l][""]+n[l].rtl;else if(typeof n[l]=="string")s.innerHTML=n[l];else{const o=s.value||"";o!=null&&n[l][o]&&(s.innerHTML=n[l][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Pd(a,Rue),typeof n.align=="object"))return new JM(a,n.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Pd(a,Pue,l==="background"?"#ffffff":"#000000"),new XM(a,n[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Pd(a,Mue):a.classList.contains("ql-header")?Pd(a,Iue):a.classList.contains("ql-size")&&Pd(a,Oue)),new kf(a)});const s=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(kt.events.EDITOR_CHANGE,s)}}xu.DEFAULTS=ul({},dd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class tI extends eI{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,kt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,kt.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=Fue(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,kt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",kt.sources.USER),this.quill.setSelection(s+2,kt.sources.USER)}break}}this.textbox.value="",this.hide()}}function Fue(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Pd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const a=document.createElement("option");s===n?a.setAttribute("selected","selected"):a.setAttribute("value",String(s)),t.appendChild(a)})}const Lue=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class $ue extends tI{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(kt.events.EDITOR_CHANGE,(s,a,l,o)=>{if(s===kt.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&o===kt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(a.index,a.length);if(c.length===1){const d=this.quill.getBounds(a);d!=null&&this.position(d)}else{const d=c[c.length-1],m=this.quill.getIndex(d),u=Math.min(d.length()-1,a.index+a.length-m),p=this.quill.getBounds(new fo(m,u));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(kt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}class nI extends xu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Lue),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new $ue(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m))}}nI.DEFAULTS=ul({},xu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Ye.sources.USER)}}}}});const Bue=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class que extends tI{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,kt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(kt.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===kt.sources.USER){const[a,l]=this.quill.scroll.descendant(ug,e.index);if(a!=null){this.linkRange=new fo(e.index-l,a.length());const o=ug.formats(a.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class iI extends xu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Bue),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),$m),this.buildPickers(e.container.querySelectorAll("select"),$m),this.tooltip=new que(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}iI.DEFAULTS=ul({},xu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,Ye.sources.USER)}}}}});Ye.register({"attributors/attribute/direction":BM,"attributors/class/align":FM,"attributors/class/background":Wde,"attributors/class/color":Ude,"attributors/class/direction":qM,"attributors/class/font":VM,"attributors/class/size":WM,"attributors/style/align":LM,"attributors/style/background":ej,"attributors/style/color":Jk,"attributors/style/direction":HM,"attributors/style/font":UM,"attributors/style/size":KM},!0);Ye.register({"formats/align":FM,"formats/direction":qM,"formats/indent":Lme,"formats/background":ej,"formats/color":Jk,"formats/font":VM,"formats/size":WM,"formats/blockquote":$me,"formats/code-block":Gi,"formats/header":Bme,"formats/list":vu,"formats/bold":aj,"formats/code":tj,"formats/italic":qme,"formats/link":ug,"formats/script":Hme,"formats/strike":zme,"formats/underline":Vme,"formats/formula":Ume,"formats/image":Wme,"formats/video":Kme,"modules/syntax":ZM,"modules/table":Yme,"modules/toolbar":lj,"themes/bubble":nI,"themes/snow":iI,"ui/icons":$m,"ui/picker":kf,"ui/icon-picker":JM,"ui/color-picker":XM,"ui/tooltip":eI},!0);class $o extends ze.Component{constructor(e){super(e),this.editingAreaRef=f.createRef(),this.containerRef=f.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,a,l,o)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,o,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(a,o,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(ze.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ze.Children.count(e.children)&&ze.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const s=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!Gr(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!Gr(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){const{delta:s,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(s),QS(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const s=new Ye(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?Gr(e.ops,n.ops):Gr(e,n)}setEditorContents(e,n){this.value=n;const s=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),QS(()=>this.setEditorSelection(e,s))}setEditorSelection(e,n){if(this.selection=n,n){const s=e.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:s}=this.state,a={key:s,ref:this.editingAreaRef};return ze.Children.count(e)?ze.cloneElement(ze.Children.only(e),a):n?ze.createElement("pre",{...a}):ze.createElement("div",{...a})}render(){return ze.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,s,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,this.props.onChange?.(e,n,s,a))}onEditorChangeSelection(e,n,s){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,o=a&&!e;Gr(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,n,s),l?this.props.onFocus?.(e,n,s):o&&this.props.onBlur?.(a,n,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}$o.displayName="React Quill";$o.Quill=Ye;$o.defaultProps={theme:"snow",modules:{},readOnly:!1};function QS(t){Promise.resolve().then(t)}const Hue=({isEditing:t})=>{const{id:e}=Gt(),n=hn(),[s,a]=f.useState(""),[l,o]=f.useState(""),[c,d]=f.useState([]),[m,u]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),{data:x,isLoading:v,error:y}=wn("settings","email-template",{id:e},{enabled:t&&!!e,select:N=>N?.status&&N.data?{status:N.status,message:N.message,data:{templatePost:N.data.templatePost||{},dynamicKeys:N.data.dynamic_keys||[]}}:N}),b=un("settings","email-template");f.useEffect(()=>{if(x?.status&&x.data&&!p){const{templatePost:N,dynamicKeys:_}=x.data;o(N.post_title||""),a(N.post_content||""),h(!0),d(_.map(A=>A.replace(/[{}]/g,""))||[])}},[x,p]),f.useEffect(()=>{if(y){let N;typeof y=="string"?N=y:y?.response?.data?.message?N=y.response.data.message:y?.message?N=y.message:N=r("Failed to load template","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:N,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const k=N=>{p&&a(N)},w=async()=>{try{const N={ID:e,post_content:s,post_title:l};u(!0);const _=await b.mutateAsync(N);_.status!==!0?Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:_.message||r("Failed to update template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:_.message||r("Template updated successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n("/setting/email-template"))}catch(N){console.error("Error updating template:",N),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("An error occurred while updating the template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{u(!1)}},S=N=>{navigator.clipboard.writeText(`{{${N}}}`),Xe.fire({title:r("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},j={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},T=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return v&&!x?i.jsx(of,{}):i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Edit Email Template","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:()=>n(-1),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:m,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"emailSubject",className:"form-label h6",children:r("Email Subject","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"emailSubject",className:"form-control",placeholder:r("Email Subject","kivicare-clinic-management-system"),value:l,onChange:N=>o(N.target.value),disabled:m})]}),c.length>0&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:c.map(N=>i.jsx(Ze,{placement:"top",overlay:_=>i.jsx(mt,{..._,children:r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>S(N),disabled:m,children:[N,i.jsx("i",{className:"ph ph-copy"})]})},N))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Email Content","kivicare-clinic-management-system")}),i.jsx($o,{ref:g,theme:"snow",value:s,onChange:k,modules:j,formats:T,readOnly:m||v})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:w,disabled:m||v||!p,children:m?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})})]})},zue=()=>{const t=hn(),[e,n]=f.useState(""),[s,a]=f.useState(""),[l,o]=f.useState(!1),c=un("settings","email-template/test"),d=()=>{t("/setting/email-template")},m=async()=>{if(!e.trim()){Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Please enter an email address","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}if(!s.trim()){Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Please enter test content","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}try{o(!0);const u={email:e,content:s},p=await c.mutateAsync(u);if(p?.status===!0)Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:p.message||r("Test email sent successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),n(""),a("");else throw new Error(p?.message||"Failed to send test email")}catch(u){console.error("Error sending test email:",u),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:u.message||r("Failed to send test email","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{o(!1)}};return i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Test Email","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:d,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:l,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"email",className:"form-control",placeholder:r("Enter email id","kivicare-clinic-management-system"),value:e,onChange:u=>n(u.target.value),required:!0,disabled:l})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:r('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system"),value:s,onChange:u=>a(u.target.value),required:!0,disabled:l})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,disabled:l,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,disabled:l,children:l?r("Sending...","kivicare-clinic-management-system"):r("Send Test Email","kivicare-clinic-management-system")})]})]})})},ZS=({show:t,onSave:e,onCancel:n,existingImageData:s=[],editData:a=null,title:l=null})=>{const{control:o,handleSubmit:c,setValue:d,reset:m,setError:u,clearErrors:p,formState:{errors:h}}=en({defaultValues:{name:"",url:"",imageId:""}}),g=f.useRef(null);f.useEffect(()=>{t&&a?(d("name",a.name||""),d("url",a.url||""),d("imageId",a.imageId||"")):t||(m(),p(),g.current&&g.current.clearImage())},[t,a,d,m,p]);const x=v=>{e(v)};return i.jsxs(lt,{show:t,onHide:n,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:l||r("Upload New","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"name",control:o,rules:{required:r("Name is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsx("input",{...v,type:"text",className:`form-control ${h.name?"is-invalid":""}`,placeholder:r("Image name","kivicare-clinic-management-system")})}),h.name&&i.jsx("div",{className:"invalid-feedback d-block",children:h.name.message})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Upload File","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"url",control:o,rules:{required:r("Image is required","kivicare-clinic-management-system")},render:({field:v})=>i.jsxs(i.Fragment,{children:[i.jsx(ef,{ref:g,id:a?`edit-image-upload-${a.id}`:"new-image-upload",name:a?`edit_image_${a.id}`:"new_image",defaultImage:a?.url,defaultImageId:a?.imageId,className:"mb-0",required:!0,onChange:(y,b)=>{if(s.some((w,S)=>a&&S===a.index?!1:w.imageId===b)){u("url",{type:"duplicate",message:r("This image is already uploaded","kivicare-clinic-management-system")}),d("url",a?.url||""),d("imageId",a?.imageId||"");return}p("url"),d("url",y.url||""),d("imageId",b||"")},errors:h.url?{[a?`edit_image_${a.id}`:"new_image"]:{message:h.url.message}}:{}}),h.url&&i.jsx("div",{className:"invalid-feedback d-block",children:h.url.message})]})})]})})]})}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary ms-2",onClick:c(x),children:r("Save","kivicare-clinic-management-system")})]})]})},Vue=()=>{const{isAddonActive:t}=ut(),e=t("bodyChart"),{data:n,isLoading:s,error:a}=ite({enabled:e}),l=f.useRef(!1),o=f.useRef(null),c=(W,X=null)=>{if(l.current){let J;switch(X){case"add":J=r("Image template added successfully","kivicare-clinic-management-system");break;case"delete":J=r("Image template deleted successfully","kivicare-clinic-management-system");break;case"edit":J=r("Image template updated successfully","kivicare-clinic-management-system");break;default:J=r("Image template updated successfully","kivicare-clinic-management-system")}Te.success(J)}else Xe.fire(r("Success","kivicare-clinic-management-system"),W,"success");l.current=!1,o.current=null},d=ste({onSuccess:()=>c(r("Configuration saved successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Xe.fire(r("Error","kivicare-clinic-management-system"),W.message||r("Failed to save configuration","kivicare-clinic-management-system"),"error"),l.current=!1,o.current=null}}),m=ate({onSuccess:()=>c(r("Configuration updated successfully","kivicare-clinic-management-system"),o.current),onError:W=>{Xe.fire(r("Error","kivicare-clinic-management-system"),W.message||r("Failed to update configuration","kivicare-clinic-management-system"),"error"),l.current=!1,o.current=null}}),{control:u,handleSubmit:p,watch:h,setValue:g,reset:x,getValues:v,register:y,formState:{errors:b,isValid:k}}=en({defaultValues:{theme:"whiteTheme",menuBarPosition:"left",replaceOrNewAfterEditImage:"new",menu:[],defaultImageData:[],defaultImage:-1},mode:"onChange"}),{fields:w,append:S,remove:j}=yr({control:u,name:"defaultImageData"}),[T,N]=f.useState(!1),[_,A]=f.useState(null),P=h();f.useEffect(()=>{n?.data&&x({theme:n.data.theme||"whiteTheme",menuBarPosition:n.data.menuBarPosition||"left",replaceOrNewAfterEditImage:n.data.replaceOrNewAfterEditImage||"new",menu:n.data.menu||[],defaultImageData:n.data.defaultImageData&&Array.isArray(n.data.defaultImageData)?n.data.defaultImageData.map((W,X)=>({id:X+1,name:W.name||"",url:W.url||"",imageId:W.imageId||""})):[],defaultImage:n.data.defaultImage})},[n,x]);const E=f.useMemo(()=>w.map((W,X)=>({id:W.id,name:W.name||"",url:W.url||"",imageId:W.imageId||"",placeholder:W.name||r("Image name","kivicare-clinic-management-system"),defaultValue:W.name||"",radioId:`radioDefault${W.id}`,selected:P.defaultImage===(W.imageId||"")})),[w,P.defaultImage]),M=f.useMemo(()=>Ln(),[]);f.useRef(null);const R=async W=>{console.log(W);const X=v("defaultImageData")||[],J={...W,defaultImageData:X};try{if(!J.defaultImageData||J.defaultImageData.length===0){const ee={...J,defaultImageData:[],defaultImage:-1};n?.data?await m.mutateAsync(ee):await d.mutateAsync(ee);return}if(J.defaultImageData.some(ee=>!ee.name||ee.name.trim()===""||!ee.url&&!ee.imageId)){Xe.fire(r("Validation Error","kivicare-clinic-management-system"),r("Please complete all required fields in the image templates","kivicare-clinic-management-system"),"warning");return}if(J.defaultImageData.length>0&&(!J.defaultImage||J.defaultImage===-1||J.defaultImage==="")){Xe.fire(r("Validation Error","kivicare-clinic-management-system"),r("Please select a default image from the image templates","kivicare-clinic-management-system"),"warning");return}if(!J.defaultImageData.some(ee=>ee.imageId===J.defaultImage)){Xe.fire(r("Validation Error","kivicare-clinic-management-system"),r("Selected default image is no longer available. Please select another default image.","kivicare-clinic-management-system"),"warning");return}const I={...J,defaultImageData:J.defaultImageData.map(ee=>({id:ee.id,name:ee.name.trim(),url:ee.url||"",imageId:ee.imageId||""}))};n?.data?await m.mutateAsync(I):await d.mutateAsync(I)}catch(ue){console.error("Error saving configuration:",ue)}},O=f.useCallback(W=>{const X=w[W];if(j(W),P.defaultImage===X.imageId){const J=w.filter((ue,le)=>le!==W);J.length>0&&J[0].imageId?g("defaultImage",J[0].imageId):g("defaultImage",-1)}setTimeout(()=>{l.current=!0,o.current="delete",p(R)()},100)},[w,j,g,P.defaultImage,p,R]),L=W=>{const X=w[W];A({...X,index:W})},q=W=>{_&&(g(`defaultImageData.${_.index}.name`,W.name),g(`defaultImageData.${_.index}.url`,W.url),g(`defaultImageData.${_.index}.imageId`,W.imageId),A(null),setTimeout(()=>{l.current=!0,o.current="edit",p(R)()},100))},Q=f.useMemo(()=>[M.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:W=>i.jsx("span",{children:W.row.original.name})}),M.accessor("radio",{header:()=>r("Default","kivicare-clinic-management-system"),cell:W=>i.jsx(Ne,{name:"defaultImage",control:u,render:({field:X})=>{const J=W.row.original.imageId;return i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"defaultImage",id:W.row.original.radioId,value:J,checked:X.value===J,disabled:!J,onChange:()=>{J&&X.onChange(J)}}),i.jsx("label",{className:"form-check-label",htmlFor:W.row.original.radioId,children:r("Default","kivicare-clinic-management-system")})]})}},`radio-${W.row.original.id}`)}),M.accessor("url",{header:()=>r("Image","kivicare-clinic-management-system"),cell:W=>i.jsx("div",{className:"d-flex align-items-center",children:W.row.original.url?i.jsx("img",{src:W.row.original.url,alt:W.row.original.name,className:"rounded",style:{width:"40px",height:"40px",objectFit:"cover"}}):i.jsx("div",{className:"bg-light rounded d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:i.jsx("i",{className:"ph ph-image text-muted"})})})}),M.accessor("action",{header:()=>r("Action","kivicare-clinic-management-system"),cell:W=>i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0 text-primary",onClick:()=>L(W.row.index),title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple fs-5"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0 text-danger",onClick:()=>O(W.row.index),title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})})],[M,w.length,O,u]),V=$T({data:E,columns:Q,getCoreRowModel:LT(),autoResetPageIndex:!1,autoResetExpanded:!1,autoResetSorting:!1,autoResetFilters:!1,autoResetRowSelection:!1,autoResetColumnOrder:!1,autoResetColumnPinning:!1,autoResetColumnSizing:!1,autoResetColumnVisibility:!1,autoResetGlobalFilter:!1,autoResetGrouping:!1}),se=()=>{N(!0)},G=W=>{if((v("defaultImageData")||[]).some(ee=>ee.imageId===W.imageId)){Xe.fire(r("Error","kivicare-clinic-management-system"),r("This image is already used in another template","kivicare-clinic-management-system"),"error");return}const le={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:W.name,url:W.url,imageId:W.imageId};S(le),N(!1);const I=v("defaultImage");(!I||I===-1||I==="")&&le.imageId&&g("defaultImage",le.imageId),setTimeout(()=>{l.current=!0,o.current="add",p(R)()},100)};if(s)return i.jsx(fP,{});if(a)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r("Error loading configuration:","kivicare-clinic-management-system")," ",a.message]});const ge=[{id:"theme-mode",label:r("Theme mode","kivicare-clinic-management-system"),required:!0,value:P.theme,options:[{value:"whiteTheme",label:r("Light","kivicare-clinic-management-system")},{value:"blackTheme",label:r("Dark","kivicare-clinic-management-system")}]},{id:"menu-position",label:r("Menu bar position","kivicare-clinic-management-system"),required:!0,value:P.menuBarPosition,options:[{value:"left",label:r("Left","kivicare-clinic-management-system")},{value:"right",label:r("Right","kivicare-clinic-management-system")},{value:"top",label:r("Top","kivicare-clinic-management-system")},{value:"bottom",label:r("Bottom","kivicare-clinic-management-system")}]},{id:"image-handling",label:r("Image Handling Preference (when image save after editing)","kivicare-clinic-management-system"),required:!0,value:P.replaceOrNewAfterEditImage,options:[{value:"new",label:r("Create New Image","kivicare-clinic-management-system")},{value:"replace",label:r("Replace Original Image","kivicare-clinic-management-system")}]},{id:"menu-type",label:r("Menu Type","kivicare-clinic-management-system"),required:!0,value:P.menu,options:[{value:"crop",label:r("Crop","kivicare-clinic-management-system")},{value:"flip",label:r("Flip","kivicare-clinic-management-system")},{value:"rotate",label:r("Rotate","kivicare-clinic-management-system")},{value:"draw",label:r("Draw","kivicare-clinic-management-system")},{value:"shape",label:r("Shape","kivicare-clinic-management-system")},{value:"icon",label:r("Icon","kivicare-clinic-management-system")},{value:"filter",label:r("Filter","kivicare-clinic-management-system")},{value:"text",label:r("Text","kivicare-clinic-management-system")},{value:"mask",label:r("Mask","kivicare-clinic-management-system")}],isMulti:!0}],ie=({fieldConfig:W,control:X,errors:J})=>{const ue=W.isMulti?W.value?.map(ee=>({value:typeof ee=="object"?ee.id:ee,label:typeof ee=="object"?ee.label:W.options.find(K=>K.value===ee)?.label||ee}))||[]:W.options.find(ee=>ee.value===W.value)||null,I={"theme-mode":"theme","menu-position":"menuBarPosition","image-handling":"replaceOrNewAfterEditImage","menu-type":"menu"}[W.id];return i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:W.id,className:"form-label",children:[W.label," ",W.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:I,control:X,rules:{required:W.required?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:ee})=>i.jsx(ct,{...ee,className:`react-select-box ${J[I]?"is-invalid":""}`,classNamePrefix:"react-select",options:W.options,isSearchable:!1,isMulti:W.isMulti||!1,value:ue,onChange:K=>{let ne;W.isMulti?ne=K?K.map(oe=>({id:oe.value,label:oe.label})):[]:ne=K?K.value:"",ee.onChange(ne)},id:W.id,styles:{menuPortal:K=>({...K,zIndex:9999})}})}),J[I]&&i.jsx("div",{className:"invalid-feedback d-block",children:J[I].message})]})})};return i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:`encounter-body-chart-setting${e?"":" p-4"}`,children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Encounter body chart Settings","kivicare-clinic-management-system"),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-encounter-body-chart-addon-24687/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!e&&i.jsx(di,{title:r("Available For Encounter Body Chart Addon","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-encounter-body-chart-addon/51585503"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:p(R),children:[i.jsx("div",{className:"row gy-4 mb-5 pb-3",children:ge.map(W=>i.jsx(ie,{fieldConfig:W,control:u,errors:b},W.id))}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("label",{className:"form-label mb-0",children:[r("Image Template","kivicare-clinic-management-system"),i.jsx("div",{className:"text-muted small fw-normal",children:r("Add image templates for body chart","kivicare-clinic-management-system")})]}),i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:se,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add New","kivicare-clinic-management-system")})]})]}),i.jsx(ZS,{show:T,onSave:G,onCancel:()=>N(!1),existingImageData:v("defaultImageData")||[]}),i.jsx(ZS,{show:!!_,onSave:q,onCancel:()=>A(null),existingImageData:v("defaultImageData")||[],editData:_,title:r("Edit Image Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:V.getHeaderGroups().map(W=>i.jsx("tr",{children:W.headers.map(X=>i.jsx("th",{children:Np(X.column.columnDef.header,X.getContext())},X.id))},W.id))}),i.jsx("tbody",{children:V.getRowModel().rows.map(W=>i.jsx("tr",{children:W.getVisibleCells().map((X,J)=>i.jsxs("td",{children:[J===0&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.name`),defaultValue:W.original.name}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.url`),defaultValue:W.original.url}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${W.index}.imageId`),defaultValue:W.original.imageId})]}),Np(X.column.columnDef.cell,X.getContext())]},`cell-${W.original.id}-${X.column.id}`))},`row-${W.original.id}`))})]})}),b.defaultImage&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),b.defaultImage.message]}),b.defaultImageData&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),Array.isArray(b.defaultImageData)?i.jsx("ul",{className:"mb-0",children:b.defaultImageData.map((W,X)=>W&&i.jsxs("li",{children:[r("Row","kivicare-clinic-management-system")," ",X+1,":",W.name?.message&&` ${W.name.message}`,W.url?.message&&` ${W.url.message}`]},X))}):b.defaultImageData.message]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d.isLoading||m.isLoading,children:d.isLoading||m.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})})})]})})},Uue=()=>{const[t,e]=f.useState({ID:"",post_title:"",post_content:""}),{isAddonActive:n}=ut(),s=n("kiviPro"),{data:a,isLoading:l,error:o}=wn("settings","google-event-template",{},{enabled:s}),c=un("settings","google-event-template"),[d,m]=f.useState(!1),{data:u}=_n(),p=u?.data?.hideUtilityLinks;f.useEffect(()=>{if(!a?.data?.data)return;const v=a.data.data;e({ID:v.ID||"",post_title:v.post_title||"",post_content:v.post_content||""})},[a]);const h=v=>{e(y=>({...y,post_title:v.target.value}))},g=v=>{e(y=>({...y,post_content:v}))},x=async()=>{try{m(!0),(await c.mutateAsync(t)).status!==!0?Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),m(!1)}catch(v){m(!1),console.error("Error submitting form:",v)}};if(o){let v;typeof o=="string"?v=o:o?.response?.data?.message?v=o.response.data.message:o?.message?v=o.message:v=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(v,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return(l||d)&&s?i.jsx(xP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-event-template-setting${s?"":" p-4"}`,children:[!s&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Google Event Template","kivicare-clinic-management-system"),p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/google-event-template/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!l&&!d&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:r("Google Event Template","kivicare-clinic-management-system")}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx("label",{htmlFor:"event-title",className:"form-label",children:r("Google Event Title","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:t?.post_title,onChange:h,disabled:d||l})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"event-description",className:"form-label h6",children:r("Google Event Description","kivicare-clinic-management-system")}),t?.ID&&i.jsx($o,{theme:"snow",value:t?.post_content||"",onChange:g},t?.ID)]})]})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:x,disabled:d||l,children:r("Save","kivicare-clinic-management-system")})})]})]})})},Wue=()=>{const[t,e]=f.useState(!1),{isAddonActive:n}=ut(),s=n("googlemeet"),{data:a,isLoading:l,error:o,refetch:c}=wn("settings","googlemeet",{},{enabled:s}),[d,m]=f.useState(""),u=un("settings","googlemeet"),{data:p}=_n(),h=p?.data?.hideUtilityLinks,{control:g,handleSubmit:x,watch:v,reset:y,formState:{errors:b}}=en({defaultValues:{enableCal:!1,client_id:"",client_secret:"",app_name:""}}),k=v("enableCal"),w=[{id:"client_id",label:r("Google Meet Client ID","kivicare-clinic-management-system"),placeholder:"EXAMPLE-1234567890.apps.googleusercontent.com"},{id:"client_secret",label:r("Google Meet Client Secret","kivicare-clinic-management-system"),placeholder:"EXAMPLE-GOCSPX-ecA6KW3s9suV9ifVKET5FwqxzW"},{id:"app_name",label:r("App Name","kivicare-clinic-management-system"),placeholder:"My Google App Name"}];f.useEffect(()=>{!a?.status||!a?.data?.data||(m(a.data.data),!(!a?.data?.config?.data||Object.keys(a.data.config.data).length===0)&&y(N=>{const _=Object.fromEntries(Object.entries(a.data.config.data).filter(([A,P])=>P!=null&&P!==""));return{...N,..._,enableCal:_.enableCal==="Yes"}}))},[a,y]);const S=N=>{m(_=>({..._,post_title:N.target.value}))},j=N=>{m(_=>({..._,post_content:N}))},T=async N=>{try{e(!0);const A={google_meet_config:{...N,enableCal:N.enableCal?"Yes":"No"},google_meet_event_template:d};(await u.mutateAsync(A)).status!==!0?Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),c()),e(!1)}catch(_){e(!1),console.error("Error submitting form:",_)}};if(o){let N;typeof o=="string"?N=o:o?.response?.data?.message?N=o.response.data.message:o?.message?N=o.message:N=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(N,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return s&&(l||t)?i.jsx(yP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-meet-setting${s?"":" p-4"}`,children:[!s&&i.jsx(di,{title:r("Available In GoogleMeet AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-google-meet-telemed-addon/35301137?s_rank=21"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Google Meet","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/getting-started-googlemeet/what-is-kivicare-google-meet-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!t||!l)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsx("div",{className:"card-body p-3",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx(Ne,{name:"enableCal",control:g,render:({field:N})=>i.jsx(on,{label:r("Google Meet Configuration","kivicare-clinic-management-system"),checked:N.value,onChange:N.onChange,disabled:t||l,error:b?.enableCal})})})})})}),i.jsxs("form",{onSubmit:x(T),children:[k&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"row gy-4",children:[w.map(({id:N,label:_,placeholder:A})=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(Ne,{name:N,control:g,rules:{required:`${N} is required`},render:({field:P})=>i.jsx(Qt,{label:_,type:"text",className:"form-control",placeholder:A,value:P.value,required:!0,onChange:P.onChange,isDisable:t||l,error:b[N]})})})},N)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:a?.data?.redirection_url||"",readOnly:!0,disabled:t||l,placeholder:r("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{a?.data?.redirection_url&&(navigator.clipboard.writeText(a.data.redirection_url),Xe.fire({icon:"success",title:r("Copied!","kivicare-clinic-management-system"),text:r("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}))},disabled:!a?.data?.redirection_url||t||l,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),r("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})]}),i.jsxs("div",{className:"pt-4 mt-4 border-top",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Guide to setup Google Meet.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r("Step 1:","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/configuration-doc/global-google-meet-settings-admin/",target:"_blank",className:"font-size-14 text-heading",children:r("Please refer the following link for the setup.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r("Step 2:","kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 text-heading",children:r("Copy the Redirection URL above and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")})]})]})]}),i.jsxs("p",{className:"font-size-12 mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If you have already set up Google Calendar, you can use the same Client ID and Client Secret here.","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:r("Google Meet Event Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-group mb-4",children:i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:d.post_title,onChange:S,disabled:t||l})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"eventDescription",className:"form-label fw-semibold text-body",children:r("Google Event Description","kivicare-clinic-management-system")}),i.jsx("div",{className:"quill-editor-wrapper",children:i.jsx($o,{theme:"snow",value:d.post_content,onChange:j})})]})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||l,children:r("Save","kivicare-clinic-management-system")})})]})]})]})})},Kue=()=>{const{isAddonActive:t,googleMeetIntegration:e}=ut();if(!t("googlemeet")||e!=="yes")return i.jsx(pg,{to:"/setting",replace:!0});const n=t("googlemeet"),[s,a]=f.useState(!1),[l,o]=f.useState(!1),{data:c,isLoading:d,error:m,refetch:u}=wn("settings","googlemeet/doctor-config",{},{enabled:n}),{refetch:p}=wn("settings","googlemeet/authorize",{},{enabled:!1}),{refetch:h}=wn("settings","googlemeet/disconnect",{},{enabled:!1});f.useEffect(()=>{const y=new URLSearchParams(window.location.search);y.get("google_meet_connected")==="1"&&(Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Meet connected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),y.delete("google_meet_connected"),window.history.replaceState({},document.title,window.location.pathname),u())},[u]);const g=async()=>{const{data:y}=await u();if(!(y?.data?.is_zoom_connected&&!(await Xe.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press yes to connect to Google Meet. Connecting to Google Meet will disconnect Zoom.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{a(!0);const{data:k}=await p();k?.data?.redirect_url?window.location.href=k.data.redirect_url:Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:k?.message||r("Failed to initiate Google Meet connection","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(k){console.error("Connection failed:",k),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:k.message||r("An error occurred","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{a(!1)}},x=async()=>{if((await Xe.fire({title:r("Disconnect Google Meet","kivicare-clinic-management-system"),message:r("Are you sure you want to disconnect your Google Meet account?","kivicare-clinic-management-system"),confirmButtonText:r("Disconnect","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{o(!0);const{data:b}=await h();b?.status?(u(),Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Disconnected from Google Meet","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})):Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:b?.message||r("Failed to disconnect from Google Meet","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(b){console.error("Disconnection failed:",b),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:b.message||r("An error occurred","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}},v=()=>!c||!c.data?null:c.data.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("Your Google Meet account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:x,disabled:l,children:l?r("Disconnecting...","kivicare-clinic-management-system"):r("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),r("Your Google Meet account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:g,disabled:s,children:s?r("Connecting...","kivicare-clinic-management-system"):r("Connect Google Meet Account","kivicare-clinic-management-system")})]});return i.jsx("div",{className:"google-meet-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsx("div",{className:"d-flex align-items-center mb-4",children:i.jsx("h4",{className:"mb-0",children:r("Google Meet Settings","kivicare-clinic-management-system")})}),d||s||l?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:r("Loading Google Meet configuration...","kivicare-clinic-management-system")})]}):m?i.jsxs("div",{className:"alert alert-danger",children:[i.jsx("i",{className:"fas fa-exclamation-circle me-2"}),r("Failed to load Google Meet configuration:","kivicare-clinic-management-system")," ",m.message]}):i.jsxs(i.Fragment,{children:[n?v():i.jsx("div",{className:"alert alert-warning",children:r("Google Meet telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"mb-3",children:r("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-question-circle text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-meet-telemed-woocommerce-addon/doctor/",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:r("Google Meet integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("Learn how to set up and use Google Meet telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-video text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://support.google.com/meet",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:r("Google Meet requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})]})})})},Yo=[{id:1,label:r("Active","kivicare-clinic-management-system")},{id:0,label:r("Inactive","kivicare-clinic-management-system")}],XS=[{label:"Prescription type",value:"prescription_type"},{label:"Service type",value:"service_type"}],Gue={page:1,perPage:10,searchTerm:"",type:"",status:""},bx=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),[a,l]=f.useState([]),[o,c]=f.useState(null),[d,m]=f.useState(""),[u,p]=f.useState(XS),[h,g]=f.useState(Gue),[x,v]=f.useState(!1),y=Cr(),b=hn(),k=Kn(),{id:w}=Gt(),S=Ve(),j=Za(d,500),{control:T,handleSubmit:N,formState:{errors:_},reset:A}=en(),{isAddonActive:P,hasCapability:E}=ut(),M=P("kiviPro"),{data:R}=_n(),O=R?.data?.hideUtilityLinks,{data:L,isLoading:q,error:Q}=wn("settings","listing",h,{enabled:!0}),{data:V}=Mp({dataType:"staticData",staticDataType:"staticDataTypes"},{enabled:!!L}),se=un("settings","listing/update"),G=un("settings","listing/delete"),ge=ZX(),ie=L?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useEffect(()=>{g(H=>({...H,searchTerm:j,page:1}))},[j]),f.useEffect(()=>{if(V?.status&&V?.data&&p(V.data.length?V.data:XS),!L?.status){l([]);return}l(Array.isArray(L?.data?.data)?L.data.data.map(H=>({id:H.id,name:H.label,type:H.type,status:H.status===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})):[])},[L,V]),f.useEffect(()=>{if(k.pathname.endsWith("/add"))s(!0),c(null),A({id:"",label:"",type:"",status:""});else if(w){const B=a.find(re=>String(re.id)===w);B&&(c(B),s(!0),A({id:B.id,label:B.name,type:u.find(re=>re.value===B.type.replace(/\s+/g,"_").toLowerCase())||null,status:Yo.find(re=>re.label===B.status)||null}))}else s(!1),c(null),A({id:"",label:"",type:"",status:""})},[w,k.pathname,a,A,u]);const W=f.useCallback(H=>{m(H.target.value)},[]),X=f.useCallback(H=>{wt({title:r("Delete Listing?","kivicare-clinic-management-system"),text:r("You're about to delete this listing.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep listing","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(B=>{B.isConfirmed&&(yt({title:r("Deleting Listing...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected listing.<br>This won't take long.","kivicare-clinic-management-system")}),G.mutate({id:H},{onSuccess:re=>{Tt({title:r("Listing Deleted","kivicare-clinic-management-system"),text:re?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to listings","kivicare-clinic-management-system")}),S.invalidateQueries(["settings","listing"])},onError:re=>{console.error("Delete clinic error:",re);const de=re?.response?.data?.message||re?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:de,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},[G,S]),J=f.useCallback(async H=>{try{e(!0),!o&&(!H.id||H.id==="")&&delete H.id;const B=await se.mutateAsync(H);B.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(B.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Tt({title:r("Success","kivicare-clinic-management-system"),text:r(B.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),await S.invalidateQueries(["settings","listing"]),s(!1),c(null),A(),b("/setting/listings")}catch(B){console.error("Error submitting form:",B)}finally{e(!1)}},[o,b,S,A,se]),[ue,le]=f.useState(!1),I=async H=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:H,searchTerm:h.searchTerm||"",type:h.type||"",status:h.status!==""?h.status:void 0},re=await ge.mutateAsync(B);if(!re.status||!re.data||!re.data.listings)throw new Error(re.message||r("Failed to retrieve export data","kivicare-clinic-management-system"));const de=new Date().toISOString().split("T")[0],xe=re.data.listings;switch(H){case"csv":ps(xe,`listings-${de}.csv`);break;case"xls":gs(xe,`listings-${de}.xls`);break;case"pdf":fs(xe,`listings-${de}.pdf`,"Listings Data");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(B){console.error("Export error:",B),rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},ee=f.useCallback(()=>I("csv"),[]),K=f.useCallback(()=>I("xls"),[]),ne=f.useCallback(()=>{ue||(le(!0),I("pdf"),setTimeout(()=>le(!1),2e3))},[ue]),oe=f.useCallback(H=>{if(!M){wt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}switch(H){case"csv":ee();break;case"xls":K();break;case"pdf":ne();break}},[ee,K,ne,M]),D=f.useCallback(()=>{v(!0)},[]),$=f.useCallback(()=>{S.invalidateQueries(["settings","listing"])},[S]),te=f.useCallback(()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>oe("csv"),title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>oe("xls"),title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>oe("pdf"),title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}),[oe]),ae=Ln(),Y=f.useMemo(()=>[ae.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"font-weight-medium",children:H.getValue()})}),ae.accessor("name",{id:"name",header:()=>r("Name","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:H.row.original.name})})}),ae.accessor("type",{id:"type",header:()=>r("Type","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:H.row.original.type})})}),ae.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>{const B=H.getValue(),re=Yo.find(de=>de.label===B)||{label:r("Unknown","kivicare-clinic-management-system"),class:"bg-body"};return re.label===r("Active","kivicare-clinic-management-system")?re.class="bg-success-subtle text-success":re.label===r("Inactive","kivicare-clinic-management-system")&&(re.class="bg-danger-subtle text-danger"),i.jsx("span",{className:`badge ${re.class} px-3 py-2`,children:re.label})}}),ae.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:H=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("static_data_edit")&&i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/listings/edit/${H.cell.row.original.id}`,children:i.jsx("i",{className:"h6 text-success ph ph-pencil-simple-line"})}),y&&i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>X(H.cell.row.original.id),children:i.jsx("i",{className:"ph h6 text-danger ph-trash"})})]})})],[ae,X,E]);if(Q){let H;typeof Q=="string"?H=Q:Q?.response?.data?.message?H=Q.response.data.message:Q?.message?H=Q.message:H=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(H,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return!n&&q?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:[n?i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{onSubmit:N(J),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(Ne,{name:"label",control:T,rules:{required:r("Label is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsx(Qt,{label:r("Label","kivicare-clinic-management-system"),placeholder:r("Dummy Data","kivicare-clinic-management-system"),required:!0,type:"text",isDisable:!1,error:_.label,value:H.value??"",onChange:H.onChange,showError:!1,className:"form-control"})}),_.label&&i.jsx("span",{className:"text-danger p",children:_.label.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"type",control:T,rules:{required:r("Type is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsxs("select",{className:"form-select select2-basic-single",value:H.value?JSON.stringify(H.value):"",onChange:B=>{const re=u.find(de=>JSON.stringify(de)===B.target.value);H.onChange(re||null)},children:[i.jsx("option",{value:"",children:r("Select Service Type","kivicare-clinic-management-system")}),u.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.value))]})}),_.type&&i.jsx("span",{className:"text-danger p",children:_.type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(Ne,{name:"status",control:T,rules:{required:r("Status is required","kivicare-clinic-management-system")},render:({field:H})=>i.jsxs("select",{className:"form-select select2-basic-single",value:H.value?JSON.stringify(H.value):"",onChange:B=>{const re=Yo.find(de=>JSON.stringify(de)===B.target.value);H.onChange(re||null)},children:[i.jsx("option",{value:"",children:r("Select Status","kivicare-clinic-management-system")}),Yo.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.id))]})}),_.status&&i.jsx("span",{className:"text-danger p",children:_.status.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{b("/setting/listings"),s(!1),c(null)},children:r("Back","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?o?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):o?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})}):i.jsxs("div",{className:"listing-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Listing Data","kivicare-clinic-management-system"),O!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/listings-configuration/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[E("static_data_add")&&i.jsxs("button",{onClick:()=>b("/setting/listings/add"),className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add List","kivicare-clinic-management-system")})]}),M&&E("static_data_export")&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:D,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsx(te,{})]}),M&&!E("static_data_export")&&i.jsxs("button",{onClick:D,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-sm-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[i.jsx(ct,{placeholder:r("Select Type","kivicare-clinic-management-system"),options:u,onChange:H=>{g(B=>({...B,type:H?H.value:"",page:1}))},value:u.find(H=>H.value===h.type)||null,isClearable:!0,styles:{menuPortal:H=>({...H,zIndex:9999})}}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),options:Yo,getOptionLabel:H=>H.label,getOptionValue:H=>H.id,onChange:H=>{g(B=>({...B,status:H?H.id:"",page:1}))},value:Yo.find(H=>H.id===h.status)||null,isClearable:!0,styles:{menuPortal:H=>({...H,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),onChange:W})]})})]}),i.jsx(kn,{data:a,columns:Y,isLoading:q,error:Q,currentPage:ie.currentPage,perPage:ie.perPage,totalItems:ie.total,lastPage:ie.lastPage,onPageChange:H=>g(B=>({...B,page:H})),onPerPageChange:H=>g(B=>({...B,perPage:H,page:1})),enableSelection:!1})]}),i.jsx(Lr,{show:x,onHide:()=>v(!1),onReopenImport:()=>v(!0),onDataRefresh:$,context:"listing"})]})},Yue=()=>{const[t,e]=f.useState(!1),{control:n,handleSubmit:s,watch:a,reset:l,formState:{errors:o}}=en({defaultValues:{enable:"off",only_number:"off",prefix_value:"",postfix_value:""}}),{data:c,isLoading:d,error:m}=wn("settings","patient-setting",{},{enabled:!0}),u=un("settings","patient-setting"),{data:p}=_n(),h=p?.data?.hideUtilityLinks,g=a("enable"),x=y=>({text:y==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:y==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"});f.useEffect(()=>{!c?.status||!c?.data||(e(!1),l(y=>{const b={...y,...Object.fromEntries(Object.entries(c.data).filter(([,k])=>k!=null&&k!==""))};return b.enable=b.enable===!0?"on":"off",b.only_number=b.only_number===!0?"on":"off",b}))},[c,l]);const v=async y=>{e(!0),y.enable=y.enable==="on",y.only_number=y.only_number==="on";try{const b=await u.mutateAsync(y);Xe.fire({icon:b.status?"success":"error",title:b.status?r("Success","kivicare-clinic-management-system"):r("Error","kivicare-clinic-management-system"),text:r(b.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(b){console.error("Error submitting form:",b)}finally{e(!1)}};if(m){const y=typeof m=="string"?m:m?.response?.data?.message||m?.message||r("An unknown error occurred","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:y,confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Patient Settings","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/patient-settings/",target:"_blank",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),d?i.jsx(CP,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body p-3",children:i.jsxs("form",{onSubmit:s(v),children:[i.jsx(Ne,{name:"enable",control:n,render:({field:y})=>i.jsx(on,{label:r("Patient unique ID Setting","kivicare-clinic-management-system"),checked:y.value,onChange:y.onChange,badge:x(y.value),disabled:t})}),g==="on"&&i.jsxs(i.Fragment,{children:[i.jsx(Ne,{name:"only_number",control:n,render:({field:y})=>i.jsx(on,{label:r("Show only numbers in patient unique ID","kivicare-clinic-management-system"),className:"my-3",checked:y.value,onChange:y.onChange,badge:x(y.value),disabled:t})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"prefix_value",control:n,render:({field:y})=>i.jsx(Qt,{label:r("Prefix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:r("e.g., PAT-","kivicare-clinic-management-system"),error:o.prefix_value,disabled:t})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"postfix_value",control:n,render:({field:y})=>i.jsx(Qt,{label:r("Postfix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:r("e.g., -001","kivicare-clinic-management-system"),error:o.postfix_value,disabled:t})})})]})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:r("Save","kivicare-clinic-management-system")})})]})})})]})})},Que=()=>{const t=Ve(),{data:e,isLoading:n}=wn("settings","payments-gateway",{},{enabled:!0}),{mutateAsync:s}=un(),{data:a}=_n(),l=a?.data?.hideUtilityLinks,o=async m=>{const u=m.status?"off":"on",p={paypal:"enablePaypal",woocommerce:"enableWooCommerce",manual:"enablePayLater",knit_pay:"enableKnitPay"};if(p[m.id])try{await s({module:"settings",key:`payment-gateway/${m.id}`,data:{id:m.id,[p[m.id]]:u}}),At.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Status updated successfully.","kivicare-clinic-management-system"),position:"center",showConfirmButton:!1,timer:1500}),t.invalidateQueries({queryKey:[...Pn.details(),"settings","payments-gateway"]})}catch(h){console.error("Toggle Error:",h);const g=h?.response?.data?.message||h.message||r("Update failed","kivicare-clinic-management-system");At.fire({icon:"error",title:r("Cannot Enable Gateway","kivicare-clinic-management-system"),text:g,position:"center",confirmButtonText:r("OK","kivicare-clinic-management-system")})}},c=Ln(),d=f.useMemo(()=>[c.accessor("name",{header:r("Payment method","kivicare-clinic-management-system"),cell:m=>i.jsx("h6",{className:"m-0",children:m.getValue()})}),c.accessor("status",{header:r("Status","kivicare-clinic-management-system"),cell:m=>i.jsx("div",{className:"form-check form-switch custom-switch-xl p-0",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!m.getValue(),onChange:()=>o(m.row.original),style:{cursor:"pointer"}})})}),c.display({id:"actions",header:r("Action","kivicare-clinic-management-system"),cell:m=>i.jsx(ht,{to:`/setting/payment/${m.row.original.id}`,className:"btn btn-link text-secondary fw-semibold p-0",children:r("Manage","kivicare-clinic-management-system")})})],[]);return i.jsxs("div",{className:"payment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Payment Setting","kivicare-clinic-management-system"),l!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/payment-settings/",target:"_blank",rel:"noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:e?.data||[],columns:d,enableSelection:!1,isLoading:n})})]})},JS=ze.memo(({items:t,activeTab:e,onSelect:n,baseId:s})=>{const a=ze.useRef(null),[l,o]=ze.useState(!1),[c,d]=ze.useState(!1),m=ze.useCallback(()=>{const h=a.current;if(!h)return;const{scrollLeft:g,scrollWidth:x,clientWidth:v}=h;o(g>0),d(g<x-v-1)},[]);ze.useEffect(()=>{m();const h=a.current;if(!h)return;const g=new ResizeObserver(m);return g.observe(h),()=>g.disconnect()},[t,m]);const u=()=>{const h=a.current;h&&(h.scrollBy({left:-200,behavior:"smooth"}),setTimeout(m,300))},p=()=>{const h=a.current;h&&(h.scrollBy({left:200,behavior:"smooth"}),setTimeout(m,300))};return i.jsxs("div",{className:"tab-nav-wrapper mb-4 position-relative",children:[l&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-left rounded-circle",onClick:u,"aria-label":r("Scroll left","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-left"})}),i.jsx("div",{ref:a,className:"tab-nav-scroll-container",onScroll:m,style:{overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-0",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:t.map(h=>{const g=typeof h=="string"?h:h.key,x=typeof h=="string"?h:h.name;return i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:`nav-link ${e===g?"active":""}`,id:`${s}-${g}-tab`,"data-bs-toggle":"tab","data-bs-target":`#${s}-${g}`,type:"button",role:"tab","aria-controls":`${s}-${g}`,"aria-selected":e===g,onClick:()=>n(g),children:x})},g)})})}),c&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-right rounded-circle",onClick:p,"aria-label":r("Scroll right","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-right"})})]})}),Zue=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{data:n}=_n(),s=n?.data?.hideUtilityLinks,{data:a,isLoading:l,error:o}=wn("settings","permission-setting",{},{enabled:e}),[c,d]=f.useState({}),m=Ve(),u=f.useMemo(()=>[{key:"administrator",name:r("Administrator","kivicare-clinic-management-system")},{key:"clinic_admin",name:r("Clinic Admin","kivicare-clinic-management-system")},{key:"doctor",name:r("Doctor","kivicare-clinic-management-system")},{key:"patient",name:r("Patient","kivicare-clinic-management-system")},{key:"receptionist",name:r("Receptionist","kivicare-clinic-management-system")}],[]),p=f.useMemo(()=>[{key:"appointment_module",name:r("Appointment","kivicare-clinic-management-system"),permissions:[{key:"appointment_list",label:r("Appointment List","kivicare-clinic-management-system")},{key:"appointment_add",label:r("Appointment Add","kivicare-clinic-management-system")},{key:"appointment_edit",label:r("Appointment Edit","kivicare-clinic-management-system")},{key:"appointment_view",label:r("Appointment View","kivicare-clinic-management-system")},{key:"appointment_delete",label:r("Appointment Delete","kivicare-clinic-management-system")},{key:"appointment_export",label:r("Appointment Export","kivicare-clinic-management-system")},{key:"patient_appointment_status_change",label:r("Patient Appointment Status Change","kivicare-clinic-management-system")},{key:"appointment_cancel",label:r("Appointment Cancel","kivicare-clinic-management-system")}]},{key:"billing_module",name:r("Billing","kivicare-clinic-management-system"),permissions:[{key:"patient_bill_list",label:r("Patient Bill List","kivicare-clinic-management-system")},{key:"patient_bill_add",label:r("Patient Bill Add","kivicare-clinic-management-system")},{key:"patient_bill_edit",label:r("Patient Bill Edit","kivicare-clinic-management-system")},{key:"patient_bill_view",label:r("Patient Bill View","kivicare-clinic-management-system")},{key:"patient_bill_export",label:r("Patient Bill Export","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:r("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"clinic_module",name:r("Clinic","kivicare-clinic-management-system"),permissions:[{key:"clinic_list",label:r("Clinic List","kivicare-clinic-management-system")},{key:"clinic_add",label:r("Clinic Add","kivicare-clinic-management-system")},{key:"clinic_edit",label:r("Clinic Edit","kivicare-clinic-management-system")},{key:"clinic_delete",label:r("Clinic Delete","kivicare-clinic-management-system")},{key:"clinic_profile",label:r("Clinic Profile","kivicare-clinic-management-system")},{key:"clinic_resend_credential",label:r("Clinic Resend Credential","kivicare-clinic-management-system")},{key:"clinic_export",label:r("Clinic Export","kivicare-clinic-management-system")}]},{key:"clinical_detail_module",name:r("Clinical Detail","kivicare-clinic-management-system"),permissions:[{key:"medical_records_list",label:r("Medical Records List","kivicare-clinic-management-system")},{key:"medical_records_add",label:r("Medical Records Add","kivicare-clinic-management-system")},{key:"medical_records_delete",label:r("Medical Records Delete","kivicare-clinic-management-system")},{key:"medical_records_view",label:r("Medical Records View","kivicare-clinic-management-system")}]},{key:"custom_field_module",name:r("Custom Field","kivicare-clinic-management-system"),permissions:[{key:"custom_field_list",label:r("Custom Field List","kivicare-clinic-management-system")},{key:"custom_field_add",label:r("Custom Field Add","kivicare-clinic-management-system")},{key:"custom_field_edit",label:r("Custom Field Edit","kivicare-clinic-management-system")},{key:"custom_field_delete",label:r("Custom Field Delete","kivicare-clinic-management-system")},{key:"custom_field_export",label:r("Custom Field Export","kivicare-clinic-management-system")}]},{key:"dashboard_module",name:r("Dashboard","kivicare-clinic-management-system"),permissions:[{key:"dashboard_total_patient",label:r("Dashboard Total Patient","kivicare-clinic-management-system")},{key:"dashboard_total_doctor",label:r("Dashboard Total Doctor","kivicare-clinic-management-system")},{key:"dashboard_total_appointment",label:r("Dashboard Total Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_revenue",label:r("Dashboard Total Revenue","kivicare-clinic-management-system")},{key:"dashboard_total_today_appointment",label:r("Dashboard Total Today Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_service",label:r("Dashboard Total Service","kivicare-clinic-management-system")},{key:"dashboard_total_clinic",label:r("Dashboard Total Clinic","kivicare-clinic-management-system")},{key:"dashboard",label:r("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:r("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:r("Home Page","kivicare-clinic-management-system")}]},{key:"doctor_module",name:r("Doctor","kivicare-clinic-management-system"),permissions:[{key:"doctor_list",label:r("Doctor List","kivicare-clinic-management-system")},{key:"doctor_add",label:r("Doctor Add","kivicare-clinic-management-system")},{key:"doctor_edit",label:r("Doctor Edit","kivicare-clinic-management-system")},{key:"doctor_delete",label:r("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_session",label:r("Doctor Session","kivicare-clinic-management-system")},{key:"doctor_service",label:r("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_resend_credential",label:r("Doctor Resend Credential","kivicare-clinic-management-system")},{key:"patient_review_get",label:r("Patient Review Get","kivicare-clinic-management-system")},{key:"doctor_export",label:r("Doctor Export","kivicare-clinic-management-system")}]},{key:"encounter_module",name:r("Encounter","kivicare-clinic-management-system"),permissions:[{key:"patient_encounter_list",label:r("Patient Encounter List","kivicare-clinic-management-system")},{key:"patient_encounter_add",label:r("Patient Encounter Add","kivicare-clinic-management-system")},{key:"patient_encounter_edit",label:r("Patient Encounter Edit","kivicare-clinic-management-system")},{key:"patient_encounter_view",label:r("Patient Encounter View","kivicare-clinic-management-system")},{key:"patient_encounter_delete",label:r("Patient Encounter Delete","kivicare-clinic-management-system")},{key:"patient_encounter_view_billing",label:r("Patient Encounter View Billing","kivicare-clinic-management-system")},{key:"patient_encounter_export",label:r("Patient Encounter Export","kivicare-clinic-management-system")}]},{key:"encounters_template_module",name:r("Encounter Template","kivicare-clinic-management-system"),permissions:[{key:"encounters_template_list",label:r("Encounters Template List","kivicare-clinic-management-system")},{key:"encounters_template_add",label:r("Encounters Template Add","kivicare-clinic-management-system")},{key:"encounters_template_edit",label:r("Encounters Template Edit","kivicare-clinic-management-system")},{key:"encounters_template_view",label:r("Encounters Template View","kivicare-clinic-management-system")},{key:"encounters_template_delete",label:r("Encounters Template Delete","kivicare-clinic-management-system")}]},{key:"holiday_module",name:r("Holiday","kivicare-clinic-management-system"),permissions:[{key:"clinic_schedule",label:r("Clinic Schedule","kivicare-clinic-management-system")},{key:"clinic_schedule_add",label:r("Clinic Schedule Add","kivicare-clinic-management-system")},{key:"clinic_schedule_edit",label:r("Clinic Schedule Edit","kivicare-clinic-management-system")},{key:"clinic_schedule_delete",label:r("Clinic Schedule Delete","kivicare-clinic-management-system")},{key:"clinic_schedule_export",label:r("Clinic Schedule Export","kivicare-clinic-management-system")}]},{key:"other_module",name:r("Other","kivicare-clinic-management-system"),permissions:[{key:"dashboard",label:r("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:r("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:r("Home Page","kivicare-clinic-management-system")},{key:"medical_records_view",label:r("Medical Records View","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:r("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"tax_module",name:r("Tax","kivicare-clinic-management-system"),permissions:[{key:"tax_list",label:r("Tax List","kivicare-clinic-management-system")},{key:"tax_add",label:r("Tax Add","kivicare-clinic-management-system")},{key:"tax_edit",label:r("Tax Edit","kivicare-clinic-management-system")},{key:"tax_delete",label:r("Tax Delete","kivicare-clinic-management-system")},{key:"tax_export",label:r("Tax Export","kivicare-clinic-management-system")}]},{key:"custom_form_module",name:r("Custom Form","kivicare-clinic-management-system"),permissions:[{key:"custom_form_list",label:r("Custom Form List","kivicare-clinic-management-system")},{key:"custom_form_add",label:r("Custom Form Add","kivicare-clinic-management-system")},{key:"custom_form_edit",label:r("Custom Form Edit","kivicare-clinic-management-system")},{key:"custom_form_view",label:r("Custom Form View","kivicare-clinic-management-system")},{key:"custom_form_delete",label:r("Custom Form Delete","kivicare-clinic-management-system")},{key:"change_password",label:r("Change Password","kivicare-clinic-management-system")}]},{key:"patient_module",name:r("Patient","kivicare-clinic-management-system"),permissions:[{key:"patient_list",label:r("Patient List","kivicare-clinic-management-system")},{key:"patient_add",label:r("Patient Add","kivicare-clinic-management-system")},{key:"patient_edit",label:r("Patient Edit","kivicare-clinic-management-system")},{key:"patient_delete",label:r("Patient Delete","kivicare-clinic-management-system")},{key:"patient_profile",label:r("Patient Profile","kivicare-clinic-management-system")},{key:"patient_resend_credential",label:r("Patient Resend Credential","kivicare-clinic-management-system")},{key:"patient_export",label:r("Patient Export","kivicare-clinic-management-system")},{key:"patient_clinic",label:r("Patient Clinic","kivicare-clinic-management-system")},{key:"patient_appointment",label:r("Patient Appointment","kivicare-clinic-management-system")},{key:"patient_appointment_report",label:r("Patient Report","kivicare-clinic-management-system")},{key:"patient_encounter",label:r("Patient Encounter","kivicare-clinic-management-system")}]},{key:"patient_report_module",name:r("Patient Reports","kivicare-clinic-management-system"),permissions:[{key:"patient_report",label:r("Patient Reports","kivicare-clinic-management-system")},{key:"patient_report_add",label:r("Patient Reports Add","kivicare-clinic-management-system")},{key:"patient_report_view",label:r("Patient Reports View","kivicare-clinic-management-system")},{key:"patient_report_delete",label:r("Patient Reports Delete","kivicare-clinic-management-system")},{key:"patient_report_edit",label:r("Patient Reports Edit","kivicare-clinic-management-system")}]},{key:"patient_review_module",name:r("Patient Review","kivicare-clinic-management-system"),permissions:[{key:"patient_review_add",label:r("Patient Review Add","kivicare-clinic-management-system")},{key:"patient_review_edit",label:r("Patient Review Edit","kivicare-clinic-management-system")},{key:"patient_review_get",label:r("Patient Review Get","kivicare-clinic-management-system")},{key:"patient_review_delete",label:r("Patient Review Delete","kivicare-clinic-management-system")}]},{key:"prescription_module",name:r("Prescription","kivicare-clinic-management-system"),permissions:[{key:"prescription_list",label:r("Prescription List","kivicare-clinic-management-system")},{key:"prescription_add",label:r("Prescription Add","kivicare-clinic-management-system")},{key:"prescription_edit",label:r("Prescription Edit","kivicare-clinic-management-system")},{key:"prescription_delete",label:r("Prescription Delete","kivicare-clinic-management-system")},{key:"prescription_export",label:r("Prescription Export","kivicare-clinic-management-system")}]},{key:"receptionist_module",name:r("Receptionist","kivicare-clinic-management-system"),permissions:[{key:"receptionist_list",label:r("Receptionist List","kivicare-clinic-management-system")},{key:"receptionist_add",label:r("Receptionist Add","kivicare-clinic-management-system")},{key:"receptionist_edit",label:r("Receptionist Edit","kivicare-clinic-management-system")},{key:"receptionist_delete",label:r("Receptionist Delete","kivicare-clinic-management-system")},{key:"receptionist_resend_credential",label:r("Receptionist Resend Credential","kivicare-clinic-management-system")},{key:"receptionist_export",label:r("Receptionist Export","kivicare-clinic-management-system")}]},{key:"service_module",name:r("Service","kivicare-clinic-management-system"),permissions:[{key:"service_list",label:r("Service List","kivicare-clinic-management-system")},{key:"service_add",label:r("Service Add","kivicare-clinic-management-system")},{key:"service_edit",label:r("Service Edit","kivicare-clinic-management-system")},{key:"service_delete",label:r("Service Delete","kivicare-clinic-management-system")},{key:"service_export",label:r("Service Export","kivicare-clinic-management-system")}]},{key:"session_module",name:r("Doctor Session","kivicare-clinic-management-system"),permissions:[{key:"doctor_session_list",label:r("Doctor Session List","kivicare-clinic-management-system")},{key:"doctor_session_add",label:r("Doctor Session Add","kivicare-clinic-management-system")},{key:"doctor_session_edit",label:r("Doctor Session Edit","kivicare-clinic-management-system")},{key:"doctor_session_delete",label:r("Doctor Session Delete","kivicare-clinic-management-system")},{key:"doctor_session_export",label:r("Doctor Session Export","kivicare-clinic-management-system")}]},{key:"static_data_module",name:r("Static/Listing Data","kivicare-clinic-management-system"),permissions:[{key:"static_data_list",label:r("Static Data List","kivicare-clinic-management-system")},{key:"static_data_add",label:r("Static Data Add","kivicare-clinic-management-system")},{key:"static_data_edit",label:r("Static Data Edit","kivicare-clinic-management-system")},{key:"static_data_export",label:r("Static Data Export","kivicare-clinic-management-system")}]}],[]),h=f.useMemo(()=>({administrator:{modules:p.filter(ae=>ae.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinic_module:["clinic_list","clinic_add","clinic_edit","clinic_delete","clinic_profile","clinic_resend_credential","clinic_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["medical_records_view","patient_bill_delete"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},clinic_admin:{modules:p.filter(ae=>ae.key!=="clinic_module"&&ae.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],other_module:["dashboard","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},doctor:{modules:p.filter(ae=>!["clinic_module","doctor_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_appointment","dashboard_total_today_appointment","dashboard_total_service"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},patient:{modules:p.filter(ae=>["appointment_module","billing_module","clinical_detail_module","encounter_module","other_module","patient_module","patient_report_module","patient_review_module","prescription_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_cancel","appointment_export"],billing_module:["patient_bill_list","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list"],encounter_module:["patient_encounter_list","patient_encounter_view","patient_encounter_export","patient_encounter_view_billing"],other_module:["dashboard","doctor_dashboard","change_password","medical_records_view","home_page"],patient_module:["patient_profile","patient_clinic"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],patient_review_module:["patient_review_add","patient_review_edit","patient_review_get","patient_review_delete"],prescription_module:["prescription_list","prescription_export"]}},receptionist:{modules:p.filter(ae=>!["clinic_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ae.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_today_appointment"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","doctor_export","patient_review_get"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}}}),[p]),[g,x]=f.useState(u),[v,y]=f.useState("administrator"),[b,k]=f.useState(h.administrator.modules),[w,S]=f.useState(h.administrator.modules[0]?.key||""),{control:j,handleSubmit:T,setValue:N,watch:_}=en({defaultValues:{}}),A=_(`${v}.appointment_module.appointment_list`)??!0,P=_(`${v}.billing_module.patient_bill_list`)??!0,E=_(`${v}.service_module.service_list`)??!0,M=_(`${v}.prescription_module.prescription_list`)??!0,R=_(`${v}.clinical_detail_module.medical_records_list`)??!0,O=_(`${v}.static_data_module.static_data_list`)??!0,L=_(`${v}.holiday_module.clinic_schedule`)??!0,q=_(`${v}.encounter_module.patient_encounter_list`)??!0,Q=_(`${v}.receptionist_module.receptionist_list`)??!0,V=_(`${v}.doctor_module.doctor_list`)??!0,se=_(`${v}.custom_field_module.custom_field_list`)??!0,G=_(`${v}.session_module.doctor_session_list`)??!0,ge=_(`${v}.clinic_module.clinic_list`)??!0,ie=_(`${v}.dashboard_module.dashboard_total_patient`)??!0,W=_(`${v}.patient_report_module.patient_report`)??!0,X=_(`${v}.patient_module.patient_list`)??!0,J=_(`${v}.tax_module.tax_list`)??!0,ue=_(`${v}.custom_form_module.custom_form_list`)??!0,le=_(`${v}.encounters_template_module.encounters_template_list`)??!0,[I,ee]=f.useState(!1),K=un("settings","permission-setting");f.useEffect(()=>{if(a?.status&&a?.data){const ae=a.data;d(ae);const Y=u.map(B=>({...B,capabilities:ae[B.key]?.capabilities||{}}));x(Y),y("administrator"),k(h.administrator.modules),S(h.administrator.modules[0]?.key);const H={};u.forEach(B=>{const re=B.key;(h[re]?.modules||[]).forEach(xe=>{const U=xe.key;(h[re]?.permissions[U]||[]).forEach(ye=>{const pe=ae[re]?.capabilities?.[U]?.[ye];H[`${re}.${U}.${ye}`]=pe!==void 0?pe:!0})})}),Object.entries(H).forEach(([B,re])=>N(B,re))}},[a,N,u,h]);const ne=f.useCallback(ae=>{y(ae);const Y=h[ae]?.modules||[];k(Y),S(Y[0]?.key||"")},[h]);f.useEffect(()=>{c&&c[v]&&(h[v]?.modules||[]).forEach(Y=>{const H=Y.key;(h[v]?.permissions[H]||[]).forEach(re=>{const de=c[v]?.capabilities?.[H]?.[re];N(`${v}.${H}.${re}`,de!==void 0?de:!0)})})},[v,c,h,N]);const oe=f.useCallback((ae,Y)=>{const H=p.find(re=>re.key===Y)?.permissions||[],B=h[ae]?.permissions[Y]||[];return H.filter(re=>B.includes(re.key)).map(re=>({key:re.key,label:re.label,value:c[ae]?.capabilities?.[Y]?.[re.key]||!1}))},[p,h,c]),D=ae=>({text:ae===!0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:ae===!0?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),$=f.useCallback((ae,Y,H)=>{const B={};return Object.entries(ae).forEach(([re,de])=>{B[re]={name:Y[re]?.name||re,capabilities:{}},Object.entries(de).forEach(([xe,U])=>{B[re].capabilities[xe]={...U}})}),{data:B,type:H}},[]),te=f.useCallback(async ae=>{try{if(!ae||Object.keys(ae).length===0){Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("No permission data to save","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}ee(!0);const Y=$(ae,c,v);if(!Y.data||Object.keys(Y.data).length===0)throw new Error(r("Invalid permission data structure","kivicare-clinic-management-system"));const H=await K.mutateAsync(Y);H.status!==!0?(ee(!1),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(H.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(ee(!1),m.invalidateQueries(["config"]),Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(H.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(Y){ee(!1),console.error("Failed to save settings:",Y);const H=Y?.response?.data?.message||Y?.message||r("Failed to save permission settings","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(H,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[$,c,v,K]);if(o){let ae;return typeof o=="string"?ae=o:o?.response?.data?.message?ae=o.response.data.message:o?.message?ae=o.message:ae=r("An unknown error occurred","kivicare-clinic-management-system"),i.jsx(Xe,{icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(ae,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs("div",{className:`permission-setting${e?"":" p-4 position-relative overflow-hidden z-0"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Permission Setting","kivicare-clinic-management-system")," "," ",s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/permission-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&(l||I)&&i.jsx(jP,{}),i.jsx("div",{className:"permission-setting-tabs",children:i.jsxs("form",{onSubmit:T(te),children:[i.jsx(JS,{items:g,activeTab:v,onSelect:ne,baseId:"role"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",id:`role-${v}`,role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx(JS,{items:b,activeTab:w,onSelect:S,baseId:"module"}),i.jsx("div",{className:"tab-content mt-4 ",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",id:`module-${w}`,role:"tabpanel",children:oe(v,w).map(ae=>{let Y=!1;return w==="appointment_module"&&ae.key!=="appointment_list"?Y=!A:w==="billing_module"&&ae.key!=="patient_bill_list"?Y=!P:w==="service_module"&&ae.key!=="service_list"?Y=!E:w==="prescription_module"&&ae.key!=="prescription_list"?Y=!M:w==="clinical_detail_module"&&ae.key!=="medical_records_list"?Y=!R:w==="static_data_module"&&ae.key!=="static_data_list"?Y=!O:w==="holiday_module"&&ae.key!=="clinic_schedule"?Y=!L:w==="encounter_module"&&ae.key!=="patient_encounter_list"?Y=!q:w==="receptionist_module"&&ae.key!=="receptionist_list"?Y=!Q:w==="doctor_module"&&ae.key!=="doctor_list"?Y=!V:w==="custom_field_module"&&ae.key!=="custom_field_list"?Y=!se:w==="session_module"&&ae.key!=="doctor_session_list"?Y=!G:w==="clinic_module"&&ae.key!=="clinic_list"?Y=!ge:w==="dashboard_module"&&ae.key!=="dashboard_total_patient"?Y=!ie:w==="encounters_template_module"&&ae.key!=="encounters_template_list"?Y=!le:w==="patient_module"&&ae.key!=="patient_list"?Y=!X:w==="patient_report_module"&&ae.key!=="patient_report"?Y=!W:w==="tax_module"&&ae.key!=="tax_list"?Y=!J:w==="custom_form_module"&&ae.key!=="custom_form_list"&&(Y=!ue),i.jsx(Ne,{name:`${v}.${w}.${ae.key}`,control:j,render:({field:H})=>i.jsx(on,{label:ae.label,checked:H.value,onChange:H.onChange,badge:D(H.value),className:"mb-2",inputClassName:"mb-2",disabled:Y})},ae.key)})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:I,children:I?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})})]})},e_=({isOpen:t,onClose:e,isLoading:n,messageData:s,setMessageData:a,onSubmit:l,disabled:o=!1,mode:c="sms",requiredFields:d=[]})=>{if(!t)return null;const m=o||n||!s?.phoneNumber||!s?.messageContent||d.some(g=>!g.value),u=g=>{const{name:x,value:v}=g.target;a(y=>({...y,[x]:v}))},p=c==="whatsapp"?r("Test WhatsApp Message","kivicare-clinic-management-system"):r("Test SMS","kivicare-clinic-management-system"),h=c==="whatsapp"?r("Welcome to KiviCare, This is test WhatsApp message","kivicare-clinic-management-system"):r("Welcome to KiviCare, This is test SMS message","kivicare-clinic-management-system");return i.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:i.jsx("div",{className:"modal-dialog",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:p}),i.jsx("button",{type:"button",className:"btn-close",onClick:e,disabled:n,"aria-label":r("Close","kivicare-clinic-management-system"),children:i.jsx("i",{class:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Phone Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"phoneNumber",className:"form-control",value:s.phoneNumber||"",onChange:u,placeholder:r("Enter phone number with country code (e.g., +1234567890)","kivicare-clinic-management-system"),disabled:n})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Message Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"messageContent",className:"form-control",rows:"4",value:s.messageContent||h,onChange:u,disabled:n})]}),i.jsx("div",{className:"alert alert-warning mb-0",children:c==="whatsapp"?r("Note: Standard Twilio WhatsApp Charges Applicable","kivicare-clinic-management-system"):r("Note: Standard Twilio SMS Charges Applicable","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-primary ms-2",onClick:g=>{g.preventDefault(),l()},disabled:m,children:[n&&i.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),r("Send Test","kivicare-clinic-management-system")]})]})]})})})},Vr=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(t,"kivicare-clinic-management-system")}),e]})}),t_=({title:t,text:e})=>i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r(t,"kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 text-heading",children:r(e,"kivicare-clinic-management-system")})]})}),Xue=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),[n,s]=f.useState(!1),[a,l]=f.useState(""),o=un("settings","pro-settings"),{data:c}=_n(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:p}=wn("settings","pro-settings",{},{enabled:e}),{control:h,handleSubmit:g,watch:x,reset:v,formState:{errors:y}}=en({defaultValues:{site_logo:"",site_mini_logo:"",rtl:!1,themeColor:"#007bff",primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",wordpressLogo:"",wordpressLogoStatus:!1,enabledCustomizableSms:!1,enabledCustomizableWhatsApp:!1,enableTwilioSms:!1,twilioSmsAccountSID:"",twilioSmsAuthToken:"",twilioSmsPhoneNumber:"",enableTwilioWhatsApp:!1,twilioWhatsAppAccountSID:"",twilioWhatsAppAuthToken:"",twilioWhatsAppPhoneNumber:"",googleCalendarConfiguration:!1,googleCalendarClientId:"",googleCalendarClientSecret:"",appName:"",patientCalendarEvent:!1,clinicEncounterPrint:!1,doctorEncounterPrint:!1,hideEncounterClinicalDetails:!1,copyrightText:"KiviCare - Clinic and Patient Management System (EHR)",AdminSlug:"",clinicAdminSlug:"",doctorSlug:"",receptionistSlug:"",patientSlug:""}});f.useEffect(()=>{if(m){const I=ne=>ne===!0||ne==="true"||ne===1||ne==="1"||ne==="yes"||ne==="on",ee=["rtl","wordpressLogoStatus","enabledCustomizableSms","enabledCustomizableWhatsApp","enableTwilioSms","enableTwilioWhatsApp","googleCalendarConfiguration","patientCalendarEvent","clinicEncounterPrint","doctorEncounterPrint","hideEncounterClinicalDetails"],K={...m};ee.forEach(ne=>{ne in K&&(K[ne]=I(K[ne]))}),v(ne=>({...ne,...K})),(K.rtl===!0||K.rtl==="true")&&(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode"))}},[m,v]);const b=()=>{const I={primary:x("primaryColor"),secondary:x("secondaryColor"),success:x("successColor"),warning:x("warningColor"),danger:x("dangerColor"),info:x("infoColor"),"body-bg":x("bodyBg"),"body-color":x("bodyColor"),"border-color":x("borderColor"),"heading-color":x("headingColor"),"gray-900":x("cardColor")},ee=Object.fromEntries(Object.entries(I).filter(([K,ne])=>ne&&ne.trim()!==""));iC(ee)},k=x("googleCalendarConfiguration"),w=x("wordpressLogoStatus"),S=x("enableTwilioSms"),j=x("enableTwilioWhatsApp"),T=I=>({text:I===!0||I==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:I===!0||I==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),N=[{key:"clinicEncounterPrint",label:r("Include Encounter Clinical Details In Prescription Print","kivicare-clinic-management-system")},{key:"doctorEncounterPrint",label:r("Include Encounter Custom Fields In Prescription Print","kivicare-clinic-management-system")},{key:"hideEncounterClinicalDetails",label:r("Hide Encounter Clinical Details To Patient","kivicare-clinic-management-system")}],_=[{key:"googleCalendarClientId",label:r("Google Calendar Client Id","kivicare-clinic-management-system"),placeholder:r("Enter Google Calendar Client Id","kivicare-clinic-management-system"),isInteger:!1},{key:"googleCalendarClientSecret",label:r("Google Calendar Client Secret","kivicare-clinic-management-system"),placeholder:r("Enter Google Calendar Client Secret","kivicare-clinic-management-system"),isInteger:!1},{key:"appName",label:r("App Name","kivicare-clinic-management-system"),placeholder:r("Enter App Name","kivicare-clinic-management-system"),isInteger:!1}];r("Step 1:","kivicare-clinic-management-system"),r("Please refer the following link for the setup.","kivicare-clinic-management-system");const A=[{key:"twilioSmsAccountSID",label:r("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:r("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsAuthToken",label:r("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:r("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsPhoneNumber",label:r("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:r("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],P=[{key:"twilioWhatsAppAccountSID",label:r("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:r("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppAuthToken",label:r("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:r("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppPhoneNumber",label:r("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:r("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],E=[{title:r("Step 1:","kivicare-clinic-management-system"),text:r("You can sign up for a free Twilio trial account here: Step 1: You can sign up for a free Twilio trial account here","kivicare-clinic-management-system")},{title:r("Step 2:","kivicare-clinic-management-system"),text:r("To get the Twilio CLI connected to your account. Visit , Twilo SMS portal and youll find your unique Account SID and Auth Token to provide to the CLI.","kivicare-clinic-management-system")},{title:r("Step 3:","kivicare-clinic-management-system"),text:r("Copy and Paste ACCOUNT SID and AUTH TOKEN and click on save button and here you go.","kivicare-clinic-management-system")},{title:r("Step 4 (Optional):","kivicare-clinic-management-system"),text:r("To get your first Twilio phone number for sending sms. Visit , head on over to the console and you will get phone number to send SMS if you dont want any particular number to send message use your SID.","kivicare-clinic-management-system")},{title:r("Important Note:","kivicare-clinic-management-system"),text:r("Reciever(doctor/patient) Phone/contact No must be in twillo specific format ([+] [country code] [mobile number] ) , Please Refer here for more details","kivicare-clinic-management-system")}],M=I=>I?String(I).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-"):"",R=I=>{const ee=I.key;I.ctrlKey||I.metaKey||I.altKey||["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(ee)||/^[a-z0-9-]$/.test(ee)||I.preventDefault()},O=un("settings","sms-whatsapp-template/test"),[L,q]=f.useState(!1),[Q,V]=f.useState(!1),[se,G]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test SMS message"}),[ge,ie]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test WhatsApp message"}),W=async()=>{try{s(!0),O.mutate({type:"sms",mobile:se.phoneNumber,content:se.messageContent},{onSuccess:()=>{Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test SMS sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),q(!1)},onError:I=>{Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:I.message||r("Failed to send test SMS","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onSettled:()=>{s(!1)}})}catch{s(!1)}},X=async()=>{try{s(!0),O.mutate({type:"whatsapp",mobile:ge.phoneNumber,content:ge.messageContent},{onSuccess:()=>{Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test WhatsApp message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),V(!1)},onError:I=>{Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:I?.response?.data?.message||I?.message||r("Failed to send test WhatsApp message","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onSettled:()=>{s(!1)}})}catch{s(!1)}},J=()=>{Xe.fire({title:r("Reset Color Settings","kivicare-clinic-management-system"),text:r("Are you sure you want to reset all color settings to their default values?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, reset","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(I=>{I.isConfirmed&&(v(ee=>({...ee,primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff"})),b())})},ue=I=>!I||/^\d+$/.test(String(I))?!0:r("Invalid parameter","kivicare-clinic-management-system"),le=async I=>{try{l(""),s(!0);const ee={primary:I.primaryColor,secondary:I.secondaryColor,success:I.successColor,warning:I.warningColor,danger:I.dangerColor,info:I.infoColor,"body-bg":I.bodyBg,"body-color":I.bodyColor,"border-color":I.borderColor,"heading-color":I.headingColor,"gray-900":I.cardColor},K=Object.fromEntries(Object.entries(ee).filter(([$,te])=>te&&te.trim()!=="")),ne=iC(K),oe={...I,site_logo:I.site_logo&&I.site_logo.id?I.site_logo.id:null,site_mini_logo:I.site_mini_logo&&I.site_mini_logo.id?I.site_mini_logo.id:null,wordpressLogo:I.wordpressLogo&&I.wordpressLogo.id?I.wordpressLogo.id:null,clinicEncounterPrint:I.clinicEncounterPrint,doctorEncounterPrint:I.doctorEncounterPrint,hideEncounterClinicalDetails:I.hideEncounterClinicalDetails,rtl:I.rtl,customNotification:[{type:"sms",status:I.enabledCustomizableSms?"yes":"no"},{type:"whatsapp",status:I.enabledCustomizableWhatsApp?"yes":"no"}],twilioSms:{account_id:I.twilioSmsAccountSID||"",auth_token:I.twilioSmsAuthToken||"",to_number:I.twilioSmsPhoneNumber||"",enableSMS:I.enableTwilioSms},twilioWhatsApp:{account_id:I.twilioWhatsAppAccountSID||"",auth_token:I.twilioWhatsAppAuthToken||"",to_number:I.twilioWhatsAppPhoneNumber||"",enableWhatsApp:I.enableTwilioWhatsApp},googleAccount:{client_id:I.googleCalendarClientId,client_secret:I.googleCalendarClientSecret,app_name:I.appName,enableCal:!!I.googleCalendarConfiguration},generatedColors:ne},D=await o.mutateAsync(oe);D.status!==!0?(s(!1),l(D.message),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(D.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(s(!1),l(""),I.rtl===!0||I.rtl==="true"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode")):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang","en"),document.body.classList.remove("rtl-mode")),Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(D.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(ee){s(!1),console.error("Failed to save settings:",ee)}};if(p){let I;typeof p=="string"?I=p:p?.response?.data?.message?I=p.response.data.message:p?.message?I=p.message:I=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(I,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsx(i.Fragment,{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`pro-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Pro Settings","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/pro-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&u&&i.jsx(bP,{}),!u&&i.jsxs("form",{onSubmit:g(le),children:[i.jsxs(Vr,{title:r("Theme Setting","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"rtl",control:h,render:({field:I})=>i.jsx(on,{label:r("RTL Mode","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.rtl})}),i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"site_logo",control:h,render:({field:I})=>i.jsx(Xv,{label:r("Site Logo","kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,className:"col-md-6",preview:!!I.value,disabled:n})})})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"site_mini_logo",control:h,render:({field:I})=>i.jsx(Xv,{label:r("Site Mini Logo","kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,className:"col-md-6",preview:!!I.value,disabled:n})})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[r("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:J,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"primaryColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Primary Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.primaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"secondaryColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Secondary Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.secondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"successColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Success Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.successColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"warningColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Warning Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.warningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"dangerColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Danger Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.dangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"infoColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Info Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.infoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"bodyBg",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Body Background Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.bodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"bodyColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Body Text Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.bodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"borderColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Border Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.borderColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"headingColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Heading Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.headingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(Ne,{name:"cardColor",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Card Color","kivicare-clinic-management-system"),type:"color",value:I.value,onChange:ee=>{I.onChange(ee),b()},disabled:n,error:y?.cardColor,className:"form-control-color"})})})})]})]})]})]}),i.jsxs(Vr,{title:r("Dashboard Slug","kivicare-clinic-management-system"),children:[i.jsx("div",{className:"col-12",children:i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:r("Note :","kivicare-clinic-management-system")})," ",r("If you change slug here then you need to also change in general setting login redirect url slug","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"row gy-4 ",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"AdminSlug",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Admin Slug","kivicare-clinic-management-system"),value:I.value,onChange:ee=>I.onChange(M(ee?.target?ee.target.value:ee)),onKeyDown:R,placeholder:r("e.g. kivicare-admin","kivicare-clinic-management-system"),error:y?.AdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"clinicAdminSlug",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Clinic Admin Slug","kivicare-clinic-management-system"),value:I.value,onChange:ee=>I.onChange(M(ee?.target?ee.target.value:ee)),onKeyDown:R,placeholder:r("e.g. kivicare-clinic-admin","kivicare-clinic-management-system"),error:y?.clinicAdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"doctorSlug",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Doctor Slug","kivicare-clinic-management-system"),value:I.value,onChange:ee=>I.onChange(M(ee?.target?ee.target.value:ee)),onKeyDown:R,placeholder:r("e.g. kivicare-doctor","kivicare-clinic-management-system"),error:y?.doctorSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"receptionistSlug",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Receptionist Slug","kivicare-clinic-management-system"),value:I.value,onChange:ee=>I.onChange(M(ee?.target?ee.target.value:ee)),onKeyDown:R,placeholder:r("e.g. kivicare-receptionist","kivicare-clinic-management-system"),error:y?.receptionistSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{name:"patientSlug",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Patient Slug","kivicare-clinic-management-system"),value:I.value,onChange:ee=>I.onChange(M(ee?.target?ee.target.value:ee)),onKeyDown:R,placeholder:r("e.g. kivicare-patient","kivicare-clinic-management-system"),error:y?.patientSlug})})})]})]}),i.jsxs(Vr,{title:r("WordPress Logo","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"wordpressLogoStatus",control:h,render:({field:I})=>i.jsx(on,{label:r("Enable WordPress Logo","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.wordpressLogo})}),w||w=="on"?i.jsx(Ne,{name:"wordpressLogo",control:h,render:({field:I})=>i.jsx(Xv,{label:r("WordPress Logo","kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,className:"col-md-6",preview:!!I.value,disabled:n})}):i.jsx(i.Fragment,{})]}),i.jsxs(Vr,{title:r("Custom Notification","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"enabledCustomizableSms",control:h,render:({field:I})=>i.jsx(on,{label:r("Enable SMS","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.enabledCustomizableSms})}),i.jsx(Ne,{name:"enabledCustomizableWhatsApp",control:h,render:({field:I})=>i.jsx(on,{label:r("Enable whatsApp","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.enabledCustomizableWhatsApp})})]}),i.jsxs(Vr,{title:r("Twilio Account Settings","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"enableTwilioSms",control:h,render:({field:I})=>i.jsx(on,{label:r("SMS Configuration","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.enableTwilioSms})}),S||S=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:A.map(I=>i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{name:I.key,control:h,rules:{required:S||S=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:I.isInteger&&(S||S=="on")?ue:void 0},render:({field:ee})=>i.jsx(Qt,{label:r(I.label,"kivicare-clinic-management-system"),value:ee.value,onChange:ee.onChange,placeholder:r(I.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[I.key]})})},I.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>q(!0),disabled:n||!x("twilioSmsAccountSID")||!x("twilioSmsAuthToken"),children:[i.jsx("i",{className:"ph ph-chat-circle-text"})," ",r("Send Test SMS","kivicare-clinic-management-system")]})}),i.jsx(e_,{isOpen:L,onClose:()=>q(!1),isLoading:n,messageData:se,setMessageData:G,onSubmit:W,mode:"sms",requiredFields:[{value:x("twilioSmsAccountSID"),label:"Account SID"},{value:x("twilioSmsAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Twilio SMS guide","kivicare-clinic-management-system")}),E.map(I=>i.jsx(t_,{title:I.title,text:I.text}))]})]}):i.jsx(i.Fragment,{}),i.jsx(Ne,{name:"enableTwilioWhatsApp",control:h,render:({field:I})=>i.jsx(on,{label:r("WhatsApp Configuration","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.enableTwilioWhatsApp})}),j||j=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:P.map(I=>i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{name:I.key,control:h,rules:{required:j||j=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:I.isInteger&&(j||j=="on")?ue:void 0},render:({field:ee})=>i.jsx(Qt,{label:r(I.label,"kivicare-clinic-management-system"),value:ee.value,onChange:ee.onChange,placeholder:r(I.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[I.key]})})},I.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>V(!0),disabled:n||!x("twilioWhatsAppAccountSID")||!x("twilioWhatsAppAuthToken"),children:[i.jsx("i",{className:"ph ph-whatsapp-logo"})," ",r("Send Test WhatsApp","kivicare-clinic-management-system")]})}),i.jsx(e_,{isOpen:Q,onClose:()=>V(!1),isLoading:n,messageData:ge,setMessageData:ie,onSubmit:X,mode:"whatsapp",requiredFields:[{value:x("twilioWhatsAppAccountSID"),label:"Account SID"},{value:x("twilioWhatsAppAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Twilio WhatsApp guide","kivicare-clinic-management-system")}),E.map(I=>i.jsx(t_,{title:I.title,text:I.text}))]})]}):i.jsx(i.Fragment,{})]}),i.jsxs(Vr,{title:r("Google Account Settings","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"googleCalendarConfiguration",control:h,render:({field:I})=>i.jsx(on,{label:r("Google Calendar Configuration","kivicare-clinic-management-system"),className:"mb-3",checked:I.value,onChange:I.onChange,badge:T(I.value),disabled:n,error:y?.googleCalendarConfiguration})}),k||k=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:_.map(I=>i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{name:I.key,control:h,rules:{required:k||k=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:I.isInteger&&(k||k=="on")?ue:void 0},render:({field:ee})=>i.jsx(Qt,{label:r(I.label,"kivicare-clinic-management-system"),value:ee.value,onChange:ee.onChange,placeholder:r(I.placeholder,"kivicare-clinic-management-system"),disabled:n,required:!0,error:y?.[I.key]})})},I.key))}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:m?.googleCalendarRedirectionUrl||"",readOnly:!0,disabled:n,placeholder:r("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{m?.googleCalendarRedirectionUrl&&(navigator.clipboard.writeText(m.googleCalendarRedirectionUrl),Xe.fire({icon:"success",title:r("Copied!","kivicare-clinic-management-system"),text:r("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}))},disabled:!m?.googleCalendarRedirectionUrl||n,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),r("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})})]}):i.jsx(i.Fragment,{}),i.jsx(Ne,{name:"patientCalendarEvent",control:h,render:({field:I})=>i.jsx(on,{label:r("Setting for add event in calendar for patient.","kivicare-clinic-management-system"),checked:I.value,onChange:I.onChange,disabled:n,error:y?.patientCalendarEvent})})]}),i.jsx(Vr,{title:r("Encounters Settings","kivicare-clinic-management-system"),children:N.map(I=>i.jsx(Ne,{name:I.key,control:h,render:({field:ee})=>i.jsx(on,{label:r(I.label,"kivicare-clinic-management-system"),className:"mb-3",checked:ee.value,onChange:ee.onChange,badge:T(ee.value),disabled:n,error:y?.[I.key]})}))}),i.jsx(Vr,{title:r("Copyright","kivicare-clinic-management-system"),children:i.jsx(Ne,{name:"copyrightText",control:h,render:({field:I})=>i.jsx(Qt,{label:r("Change Copyright Text","kivicare-clinic-management-system"),placeholder:r("Western State Pain Institute","kivicare-clinic-management-system"),value:I.value,onChange:I.onChange,error:y?.copyrightText})})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})})})},Jue=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{data:n}=_n(),s=n?.data?.hideUtilityLinks,a=un("settings","sms-whatsapp-template"),l=un("settings","sms-whatsapp-template/test"),[o,c]=f.useState(!1),[d,m]=f.useState(""),[u,p]=f.useState(!1),[h,g]=f.useState(!1),[x,v]=f.useState([]),y=()=>setShow(!1),b=()=>{p(!0),setTimeout(()=>g(!0),10)},k=()=>{g(!1),setTimeout(()=>p(!1),300)},{data:w,isLoading:S,error:j}=wn("settings","sms-whatsapp-template",{},{enabled:e}),T=P=>{const E=[];return!P||typeof P!="object"||Object.keys(P).forEach(M=>{(Array.isArray(P[M])?P[M]:[]).forEach(O=>{E.push({...O,user_type:M})})}),E};f.useEffect(()=>{if(!w?.status||!w.data){v([]);return}v(T(w.data.data))},[w]);const N=async(P,E)=>{c(!0);const M={ID:P,post_status:E==="publish"?"draft":"publish"};a.mutate(M,{onSuccess:()=>{v(R=>R.map(O=>O.ID===P?{...O,post_status:M.post_status}:O)),c(!1)},onError:R=>{console.error("Error submitting form:",R),c(!1)}})},_=Ln(),A=f.useMemo(()=>[_.accessor("post_title",{id:"templates",header:()=>r("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:P.getValue()})})}),_.accessor("user_type",{id:"recipient",header:()=>r("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:P.getValue()})})}),_.accessor("post_status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(on,{checked:P.getValue()==="publish",onChange:()=>N(P.row.original.ID,P.getValue()),inputClassName:"text-center"})}),_.accessor("ID",{id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(ht,{to:`/setting/sms-whatsapp-template/edit/${P.getValue()}`,className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:r("Manage","kivicare-clinic-management-system")})})],[]);if(j){const P=typeof j=="string"?j:j?.response?.data?.message||j?.message||r("An unknown error occurred","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-smswhatsapp-template",role:"tabpanel","aria-labelledby":"v-pills-smswhatsapp-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`sms-template-setting${e?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("SMS/WhatsApp Template","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sms-whatsapp-template-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[i.jsx("button",{className:"btn btn-secondary",disabled:!e,onClick:()=>{e&&(m("sms"),b())},children:r("Send Test SMS","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",disabled:!e,onClick:()=>{e&&(m("whatsapp"),b())},children:r("Send Test Whatsapp","kivicare-clinic-management-system")})]}),!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(kn,{data:x,columns:A,enableSelection:!1,isLoading:o||S})})]})}),u&&i.jsxs(lt,{show:h,onHide:y,centered:!0,className:"modal",tabIndex:"-1",role:"dialog",children:[i.jsxs(lt.Header,{children:[i.jsx("h5",{className:"modal-title",children:d==="sms"?r("Send Test SMS","kivicare-clinic-management-system"):r("Send Test Whatsapp","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:k,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsxs("form",{onSubmit:P=>{P.preventDefault();const E=new FormData(P.target),M=E.get("mobile"),R=E.get("content");l.mutate({type:d,mobile:M,content:R},{onSuccess:()=>{Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),k()},onError:O=>{const L=O?.response?.data?.message||O?.message||r("Something went wrong","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:L,confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"mobile",className:"form-label",children:r("Mobile Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"mobile",className:"form-control",required:!0})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"content",className:"form-label",children:r("Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"content",className:"form-control",rows:"3",required:!0})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l.isLoading,children:l.isLoading?r("Sending...","kivicare-clinic-management-system"):r("Send","kivicare-clinic-management-system")})]})]})})]})]})},ehe=()=>{const{id:t}=Gt(),e=hn(),{isAddonActive:n}=ut(),s=n("kiviPro"),[a,l]=f.useState(""),[o,c]=f.useState(""),[d,m]=f.useState(""),[u,p]=f.useState([]),[h,g]=f.useState(!0),[x,v]=f.useState(!1),y=un("settings","sms-whatsapp-template"),{data:b,isLoading:k,error:w}=wn("settings","sms-whatsapp-template",{id:t},{enabled:s&&!!t,select:A=>A?.status&&A.data?{status:A.status,message:A.message,data:{post_content:A.data.templatePost?.post_content||"",post_status:A.data.templatePost?.post_status||"draft",post_title:A.data.templatePost?.post_title||"",content_sid:A.data.templatePost?.content_sid||"",dynamic_keys:A.data.dynamic_keys||[]}}:A});f.useEffect(()=>{if(b?.status&&b.data&&!x){const{post_content:A,content_sid:P,post_title:E,dynamic_keys:M}=b.data;l(A),c(P),m(E),p(M.map(R=>R.replace(/[{}]/g,""))),v(!0),g(!1)}},[b,x]),f.useEffect(()=>{if(w){let A;typeof w=="string"?A=w:w?.response?.data?.message?A=w.response.data.message:w?.message?A=w.message:A=r("Failed to load template","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>e(-1))}},[w,e]);const S=A=>{x&&l(A)},j=f.useCallback(A=>{navigator.clipboard.writeText(`{{${A}}}`),Xe.fire({title:r("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},[]),T=f.useCallback(async()=>{try{if(!x)return;g(!0);const A={ID:t,content_sid:o,post_content:a},P=await y.mutateAsync(A);P.status!==!0?Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),e("/setting/sms-whatsapp-template"))}catch(A){Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(A.message||"Failed to save template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{g(!1)}},[t,o,a,y,e,x]),N={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},_=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return k&&!x||!b?i.jsx(of,{}):i.jsxs("div",{className:"edit-template-page",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Edit SMS/WhatsApp Template","kivicare-clinic-management-system")}),i.jsxs("button",{onClick:()=>e("/setting/sms-whatsapp-template"),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:h,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx("h5",{className:"mb-0",children:d})}),i.jsx("div",{className:"row mb-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Content SID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Enter Content SID","kivicare-clinic-management-system"),value:o,onChange:A=>c(A.target.value),disabled:h||!x})]})})}),u.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"form-label",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Ze,{placement:"top",overlay:P=>i.jsx(mt,{...P,children:r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>j(A),disabled:h||!x,children:[A,i.jsx("i",{className:"ph ph-copy"})]},A)},A))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Template Content","kivicare-clinic-management-system")}),i.jsx($o,{theme:"snow",value:a,onChange:S,modules:N,formats:_,readOnly:h||!x})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>e("/setting/sms-whatsapp-template"),disabled:h,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:T,disabled:h||!x,children:h?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})]})]})},the=()=>{const[t,e]=f.useState({page:1,per_page:10}),n=Ln(),{data:s,isLoading:a,error:l,refetch:o}=wP(t),c=kie({onSuccess:()=>{Te.success(r("Webhook status updated","kivicare-clinic-management-system")),o()},onError:()=>{Te.error(r("Failed to update webhook status","kivicare-clinic-management-system"))}}),d=bie({onSuccess:()=>{Te.success(r("Webhook deleted successfully","kivicare-clinic-management-system")),o()},onError:()=>{Te.error(r("Failed to delete webhook","kivicare-clinic-management-system"))}}),m=s?.data?.data||[],u={currentPage:s?.data?.pagination?.currentPage||1,perPage:s?.data?.pagination?.perPage||10,totalItems:s?.data?.pagination?.total||0,lastPage:s?.data?.pagination?.lastPage||1},p=async(k,w)=>{const S=w===1?0:1;console.log(w),c.mutate({id:k,status:S})},h=k=>{Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(w=>{w.isConfirmed&&d.mutate(k)})},g=f.useMemo(()=>[n.accessor("id",{header:r("ID","kivicare-clinic-management-system"),cell:k=>k.getValue(),enableSorting:!0}),n.accessor("name",{header:r("Name","kivicare-clinic-management-system"),cell:k=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-semibold",children:k.getValue()}),i.jsx("small",{className:"text-muted",children:k.row.original.module_name})]}),enableSorting:!0}),n.accessor("endpoint",{header:r("Endpoint","kivicare-clinic-management-system"),cell:k=>{const w=k.getValue();return i.jsx("code",{className:"text-break",children:w})},enableSorting:!1}),n.accessor("event_name",{header:r("Event","kivicare-clinic-management-system"),cell:k=>i.jsx("span",{className:"badge bg-info",children:k.getValue()}),enableSorting:!0}),n.accessor("status",{header:r("Status","kivicare-clinic-management-system"),cell:k=>{const w=k.row.original,S=k.getValue();return i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("span",{className:`badge ${S===1?"bg-success":"bg-danger"} me-2`,children:S===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`status-toggle-${w.id}`,defaultChecked:S===1,onChange:()=>p(w.id,S)})})]})},enableSorting:!0}),n.accessor("updated_at",{header:r("Last Delivery","kivicare-clinic-management-system"),cell:k=>{const w=k.getValue();return i.jsx("span",{children:w?new Date(w).toLocaleDateString():r("Never","kivicare-clinic-management-system")})},enableSorting:!0}),n.display({id:"actions",header:r("Actions","kivicare-clinic-management-system"),cell:k=>{const w=k.row.original;return i.jsxs("div",{className:"d-flex align-items-center gap-3",role:"group",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Edit Webhook","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`/setting/webhooks/configuration/edit/${w.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Delete Webhook","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"btn btn-link text-danger fs-5 p-0",onClick:()=>h(w.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[n]),x=k=>{e(w=>({...w,page:k}))},v=k=>{e(w=>({...w,page:1,per_page:k}))},y=k=>{console.log("Sorting changed:",k)},b=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:g.length,className:"text-center py-4 border-start border-end",children:i.jsxs("div",{className:"d-flex flex-column align-items-center",children:[i.jsx("i",{className:"ph ph-webhook text-muted"}),i.jsx("p",{className:"text-muted mb-3",children:r("No webhooks configured yet","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-outline-primary btn-sm",children:r("Create Your First Webhook","kivicare-clinic-management-system")})]})})});return a?i.jsx(mie,{}):i.jsxs("div",{className:"webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h4",{className:"mb-0",children:r("Webhook Configuration","kivicare-clinic-management-system")}),i.jsxs(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-plus me-2"}),r("Add Webhook","kivicare-clinic-management-system")]})]}),i.jsx(kn,{data:m,columns:g,isLoading:a,error:l,pagination:u,currentPage:u.currentPage,perPage:u.perPage,totalItems:u.totalItems,lastPage:u.lastPage,onPageChange:x,onPerPageChange:v,onSortingChange:y,moduleNamePlural:"webhooks",renderEmptyState:b,enableSelection:!1,manualPagination:!0,manualFiltering:!0})]})},nhe=()=>{const[t,e]=f.useState({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),[n,s]=f.useState(!1),[a,l]=f.useState(null),{data:o,isLoading:c,error:d,refetch:m}=jie(t);Nie();const u=Cie({onSuccess:()=>{Te.success(r("Events log deleted successfully","kivicare-clinic-management-system")),m()},onError:()=>{Te.error(r("Failed to delete event log","kivicare-clinic-management-system"))}}),[p,h]=f.useState(!1),g=f.useMemo(()=>[{type:"number",name:"webhook_id",label:r("Webhook ID","kivicare-clinic-management-system"),placeholder:r("Enter webhook ID","kivicare-clinic-management-system")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("All Statuses","kivicare-clinic-management-system"),options:[{value:"success",label:r("Success","kivicare-clinic-management-system")},{value:"failed",label:r("Failed","kivicare-clinic-management-system")},{value:"pending",label:r("Pending","kivicare-clinic-management-system")}]},{type:"dateRange",name:"date_range",label:r("Date Range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to",placeholder:r("Select date range","kivicare-clinic-management-system")}],[]),x=f.useMemo(()=>["webhook_id","status","date_from","date_to"].some(A=>{const P=t[A];return P!=null&&P!==""}),[t]),v=f.useMemo(()=>[{accessorKey:"id",header:r("ID","kivicare-clinic-management-system"),size:80},{accessorKey:"webhook_name",header:r("Webhook","kivicare-clinic-management-system"),cell:({row:_})=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-medium",children:_.original.webhook_name||r("Unknown Webhook","kivicare-clinic-management-system")}),i.jsxs("div",{className:"text-muted small",children:["ID: ",_.original.webhook_id]})]})},{accessorKey:"event_type",header:r("Event Type","kivicare-clinic-management-system"),cell:({row:_})=>i.jsx(ca,{bg:"primary",children:_.original.event_type||r("Unknown","kivicare-clinic-management-system")})},{accessorKey:"status",header:r("Status","kivicare-clinic-management-system"),cell:({row:_})=>{const A=_.original.status,P={success:"success",failed:"danger",pending:"warning"};return i.jsx(ca,{bg:P[A]||"secondary",children:A||r("Unknown","kivicare-clinic-management-system")})}},{accessorKey:"created_at",header:r("Created At","kivicare-clinic-management-system"),cell:({row:_})=>{const A=new Date(_.original.created_at);return i.jsxs(i.Fragment,{children:[i.jsx("div",{children:A.toLocaleDateString()}),i.jsx("div",{children:A.toLocaleTimeString()})]})}},{accessorKey:"execution_time",header:r("Execution Time","kivicare-clinic-management-system"),cell:({row:_})=>i.jsx("span",{children:_.original.execution_time?`${_.original.execution_time}ms`:"-"})},{accessorKey:"actions",header:r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:_})=>{const A=P=>E=>i.jsx(mt,{...E,children:P});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(Ze,{placement:"top",overlay:A(r("View Log Details","kivicare-clinic-management-system")),children:i.jsx("button",{onClick:()=>k(_.original),className:"btn btn-link",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Ze,{placement:"top",overlay:A(r("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>j(_.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}}],[]),y=_=>{e(A=>({...A,page:_}))},b=_=>{e(A=>({...A,page:1,per_page:_}))},k=_=>{l(_),s(!0)},w=_=>{e(A=>({...A,..._,page:1})),h(!1)},S=()=>{e({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),h(!1)},j=_=>{Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(A=>{A.isConfirmed&&u.mutate(_)})};r("Delete","kivicare-clinic-management-system");const T=o?.data?.logs||[],N=o?.data?.pagination||{};return i.jsxs(yo,{fluid:!0,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h5",{className:"mb-0",children:r("Webhook Event Logs","kivicare-clinic-management-system")}),i.jsxs(Xt,{variant:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>h(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),r("Filters","kivicare-clinic-management-system")]})]}),i.jsx(kn,{data:T,columns:v,isLoading:c,error:d,pagination:N,currentPage:t.currentPage,perPage:t.perPage,totalItems:N.total||0,lastPage:N.lastPage||1,onPageChange:y,onPerPageChange:b,enableSelection:!0,moduleNamePlural:r("webhook logs","kivicare-clinic-management-system"),bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(_,A)=>{const P=_.map(E=>E.id);wt({title:r("Delete Events log?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${_.length} events log</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep events log","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(E=>{E.isConfirmed&&u.mutate(P)})},icon:i.jsx("i",{className:"ph ph-trash"})}],bulkActionsButtonText:r("Bulk Actions","kivicare-clinic-management-system")}),i.jsxs(lt,{show:n,onHide:()=>s(!1),size:"xl",scrollable:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[r("Webhook Log Details","kivicare-clinic-management-system")," - ",a?.webhook_name]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>s(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{className:"p-4",children:a&&i.jsxs(i.Fragment,{children:[i.jsxs(Yn,{className:"",children:[i.jsx(Et,{md:6,children:i.jsxs(St,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:r("Event Information","kivicare-clinic-management-system")})}),i.jsx(Ox,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Event Type","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:"primary",children:a.event_type})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Status","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:a.status==="success"?"success":a.status==="failed"?"danger":"warning",children:a.status})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Execution Time","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:a.execution_time?`${a.execution_time}ms`:"-"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Created At","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:new Date(a.created_at).toLocaleString()})]})]})})]})}),i.jsx(Et,{md:6,children:i.jsxs(St,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:r("Response Information","kivicare-clinic-management-system")})}),i.jsx(Ox,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Response Code","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:a.response_code>=200&&a.response_code<300?"success":"danger",children:a.response_code||"-"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Response Body","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{className:"small text-truncate",style:{maxWidth:"200px"},children:a.response?.body?a.response.body.substring(0,100)+"...":"-"})]})]})})]})})]}),a.payload&&i.jsxs(St,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:r("Payload Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.payload,null,2)})})]}),a.response&&i.jsxs(St,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:r("Response Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.response,null,2)})})]}),a.error_message&&i.jsxs(St,{children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0 text-danger",children:r("Error Message","kivicare-clinic-management-system")})}),i.jsx("div",{className:"alert alert-danger",children:i.jsx("pre",{children:i.jsx("code",{children:a.error_message})})})]})]})}),i.jsx(lt.Footer,{children:i.jsx(Xt,{variant:"secondary",onClick:()=>s(!1),children:r("Close","kivicare-clinic-management-system")})})]}),i.jsx(na,{show:p,onHide:()=>h(!1),queryParams:t,onApplyFilters:w,onResetFilters:S,title:r("Filter Webhook Logs","kivicare-clinic-management-system"),fields:g,hasAppliedFilters:x})]})},sI=({initialData:t=null,onSubmit:e,isLoading:n=!1,isEditing:s=!1})=>{const[a,l]=f.useState(null),[o,c]=f.useState([]),[d,m]=f.useState({header:[],body:[],query_params:[]}),[u,p]=f.useState(!0),{control:h,handleSubmit:g,formState:{errors:x},setValue:v,watch:y,reset:b,getValues:k}=en({defaultValues:{name:"",moduleName:"",eventName:"",webhookUrl:"",httpMethod:"POST",status:1,authMethod:"none",authConfig:{apiKey:"",keyLocation:"header",headerName:"Authorization",username:"",password:"",encoding:"Base64",bearerToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",accessToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature"},contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBody:"",timeout:30,retryAttempts:3,retryDelay:5,enableSSL:!0}}),{fields:w,append:S,remove:j}=yr({control:h,name:"customHeaders"}),{fields:T,append:N,remove:_}=yr({control:h,name:"queryParams"}),A=y(),[P,E]=f.useState(!1),[M,R]=f.useState(!1),[O,L]=f.useState(""),[q,Q]=f.useState(""),[V,se]=f.useState(!1),[G,ge]=f.useState(null),ie=f.useRef(null);f.useEffect(()=>{(async()=>{try{const me=await Ki.getTableConfig();me.data&&l(me.data)}catch(me){console.error("Failed to load table config:",me),Te.error(r("Failed to load configuration","kivicare-clinic-management-system"))}finally{p(!1)}})()},[]),f.useEffect(()=>{const U=y((me,{name:ye})=>{if(me.moduleName){const pe=a?.modules?.find(Ce=>Ce.value===me.moduleName);pe&&(c(pe.events||[]),ye==="moduleName"&&!s&&v("eventName",""),m({header:[],body:[],query_params:[]}))}if(me.eventName){const pe=o.find(Ce=>Ce.value===me.eventName);pe?.dynamic_variables&&m(pe.dynamic_variables)}});return()=>U.unsubscribe()},[a,y,o,v,s]),f.useEffect(()=>{const U=k("moduleName");if(U&&a?.modules){const me=a.modules.find(ye=>ye.value===U);me&&c(me.events||[])}},[a,k]),f.useEffect(()=>{const U=k("eventName");if(U&&o.length>0){const me=o.find(ye=>ye.value===U);me?.dynamic_variables&&m(me.dynamic_variables)}},[o,k]),f.useEffect(()=>{s&&t&&(console.log("Initial Data:",t),b({name:t.name||"",moduleName:t.moduleName||"",eventName:t.eventName||"",webhookUrl:t?.webhookData?.url||"",httpMethod:t?.methods||"POST",status:t.status||1,authMethod:t?.webhookData?.auth_method||"none",authConfig:{apiKey:t?.webhookData?.auth_config?.api_key||"",keyLocation:t?.webhookData?.auth_config?.key_location||"header",headerName:t?.webhookData?.auth_config?.header_name||"Authorization",username:t?.webhookData?.auth_config?.username||"",password:t?.webhookData?.auth_config?.password||"",encoding:t?.webhookData?.auth_config?.encoding||"Base64",bearerToken:t?.webhookData?.auth_config?.bearer_token||"",tokenType:t?.webhookData?.auth_config?.token_type||"Bearer",tokenExpiry:t?.webhookData?.auth_config?.token_expiry||"",clientId:t?.webhookData?.auth_config?.client_id||"",clientSecret:t?.webhookData?.auth_config?.client_secret||"",authUrl:t?.webhookData?.auth_config?.auth_url||"",tokenUrl:t?.webhookData?.auth_config?.token_url||"",redirectUrl:t?.webhookData?.auth_config?.redirect_url||"",scopes:t?.webhookData?.auth_config?.scopes||"",refreshToken:t?.webhookData?.auth_config?.refresh_token||"",accessToken:t?.webhookData?.auth_config?.access_token||"",jwtIssuer:t?.webhookData?.auth_config?.jwt_issuer||"",jwtSubject:t?.webhookData?.auth_config?.jwt_subject||"",jwtAudience:t?.webhookData?.auth_config?.jwt_audience||"",jwtPrivateKey:t?.webhookData?.auth_config?.jwt_private_key||"",jwtAlgorithm:t?.webhookData?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:t?.webhookData?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:t?.webhookData?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:t?.webhookData?.auth_config?.hmac_access_key||"",hmacSecretKey:t?.webhookData?.auth_config?.hmac_secret_key||"",hmacAlgorithm:t?.webhookData?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:t?.webhookData?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:t?.webhookData?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:t?.webhookData?.content_type||"application/json",customHeaders:t?.webhookData?.custom_headers?.length>0?t.webhookData.custom_headers:[{key:"",value:""}],queryParams:t?.webhookData?.query_params?.length>0?t.webhookData.query_params:[{key:"",value:""}],requestBody:t?.webhookData?.request_body||"",timeout:t?.webhookData?.timeout||30,retryAttempts:t?.webhookData?.retry_attempts||3,retryDelay:t?.webhookData?.retry_delay||5,enableSSL:t?.webhookData?.enable_ssl!==!1}))},[s,t,b]),f.useEffect(()=>{if(A.authMethod==="oauth2"&&!A.authConfig.redirectUrl){const U=window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback";v("authConfig.redirectUrl",U)}},[A.authMethod,A.authConfig.redirectUrl,v]);const W=async U=>{try{await navigator.clipboard.writeText(U),Te.success(r("Copied to clipboard!","kivicare-clinic-management-system"))}catch(me){console.error("Failed to copy:",me),Te.error(r("Failed to copy to clipboard","kivicare-clinic-management-system"))}},X=U=>{if(L(U),!U.trim()){Q(""),se(!1),ge(null);return}try{const me=JSON.parse(U);if(!me.name){Q(r("Missing required field: name","kivicare-clinic-management-system")),se(!1),ge(null);return}if(!me.module_name){Q(r("Missing required field: module_name","kivicare-clinic-management-system")),se(!1),ge(null);return}if(!me.webhook_data?.url){Q(r("Missing required field: webhook_data.url","kivicare-clinic-management-system")),se(!1),ge(null);return}Q(""),se(!0),ge(me)}catch(me){Q(r("Invalid JSON format: ","kivicare-clinic-management-system")+me.message),se(!1),ge(null)}},J=U=>{const me=U.target.files[0];if(!me)return;if(!me.name.endsWith(".json")){Te.error(r("Please select a valid JSON file","kivicare-clinic-management-system"));return}const ye=new FileReader;ye.onload=pe=>{try{const Ce=pe.target.result;X(Ce)}catch{Te.error(r("Failed to read file","kivicare-clinic-management-system"))}},ye.onerror=()=>{Te.error(r("Failed to read file","kivicare-clinic-management-system"))},ye.readAsText(me)},ue=()=>{if(!V||!G){Te.error(r("Please provide valid JSON configuration","kivicare-clinic-management-system"));return}try{b({name:G.name||"",moduleName:G.module_name||"",eventName:G.event_name||"",webhookUrl:G.webhook_data?.url||"",httpMethod:G.methods||"POST",status:G.status||1,authMethod:G.webhook_data?.auth_method||"none",authConfig:{apiKey:G.webhook_data?.auth_config?.api_key||"",keyLocation:G.webhook_data?.auth_config?.key_location||"header",headerName:G.webhook_data?.auth_config?.header_name||"Authorization",username:G.webhook_data?.auth_config?.username||"",password:G.webhook_data?.auth_config?.password||"",encoding:G.webhook_data?.auth_config?.encoding||"Base64",bearerToken:G.webhook_data?.auth_config?.bearer_token||"",tokenType:G.webhook_data?.auth_config?.token_type||"Bearer",tokenExpiry:G.webhook_data?.auth_config?.token_expiry||"",clientId:G.webhook_data?.auth_config?.client_id||"",clientSecret:G.webhook_data?.auth_config?.client_secret||"",authUrl:G.webhook_data?.auth_config?.auth_url||"",tokenUrl:G.webhook_data?.auth_config?.token_url||"",redirectUrl:G.webhook_data?.auth_config?.redirect_url||"",scopes:G.webhook_data?.auth_config?.scopes||"",refreshToken:G.webhook_data?.auth_config?.refresh_token||"",accessToken:G.webhook_data?.auth_config?.access_token||"",jwtIssuer:G.webhook_data?.auth_config?.jwt_issuer||"",jwtSubject:G.webhook_data?.auth_config?.jwt_subject||"",jwtAudience:G.webhook_data?.auth_config?.jwt_audience||"",jwtPrivateKey:G.webhook_data?.auth_config?.jwt_private_key||"",jwtAlgorithm:G.webhook_data?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:G.webhook_data?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:G.webhook_data?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:G.webhook_data?.auth_config?.hmac_access_key||"",hmacSecretKey:G.webhook_data?.auth_config?.hmac_secret_key||"",hmacAlgorithm:G.webhook_data?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:G.webhook_data?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:G.webhook_data?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:G.webhook_data?.content_type||"application/json",customHeaders:G.webhook_data?.custom_headers?.length>0?G.webhook_data.custom_headers:[{key:"",value:""}],queryParams:G.webhook_data?.query_params?.length>0?G.webhook_data.query_params:[{key:"",value:""}],requestBody:G.webhook_data?.request_body||"",timeout:G.webhook_data?.timeout||30,retryAttempts:G.webhook_data?.retry_attempts||3,retryDelay:G.webhook_data?.retry_delay||5,enableSSL:G.webhook_data?.enable_ssl!==!1}),le(),Te.success(r("Webhook configuration imported successfully!","kivicare-clinic-management-system"))}catch(U){console.error("Import error:",U),Te.error(r("Failed to import configuration. Please try again.","kivicare-clinic-management-system"))}},le=()=>{R(!1),L(""),Q(""),se(!1),ge(null),ie.current&&(ie.current.value="")},I=async()=>{const{clientId:U,authUrl:me,redirectUrl:ye,scopes:pe}=A.authConfig;if(!U||!me||!ye){Te.error(r("Please fill in Client ID, Authorization URL, and Redirect URL","kivicare-clinic-management-system"));return}E(!0);try{const Ce=new URLSearchParams({client_id:U,redirect_uri:ye,response_type:"code",scope:pe||"",state:Math.random().toString(36).substring(7)}),Ge=`${me}?${Ce.toString()}`,De=600,$e=700,et=window.screenX+(window.outerWidth-De)/2,tt=window.screenY+(window.outerHeight-$e)/2,qe=window.open(Ge,"OAuth2 Authorization",`width=${De},height=${$e},left=${et},top=${tt},toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes`);if(!qe){Te.error(r("Popup blocked. Please allow popups for this site.","kivicare-clinic-management-system")),E(!1);return}const we=async Qe=>{Qe.origin===window.location.origin&&Qe.data.type==="oauth2_callback"&&(window.removeEventListener("message",we),qe.close(),Qe.data.code?await ee(Qe.data.code):Qe.data.error&&(Te.error(r("Authorization failed: ","kivicare-clinic-management-system")+Qe.data.error),E(!1)))};window.addEventListener("message",we);const Ee=setInterval(()=>{qe.closed&&(clearInterval(Ee),window.removeEventListener("message",we),E(!1))},1e3)}catch(Ce){console.error("OAuth2 generation error:",Ce),Te.error(r("Failed to generate OAuth2 token","kivicare-clinic-management-system")),E(!1)}},ee=async U=>{const{clientId:me,clientSecret:ye,tokenUrl:pe,redirectUrl:Ce}=A.authConfig;try{const Ge=await Ki.exchangeOAuth2Token({code:U,clientId:me,clientSecret:ye,tokenUrl:pe,redirectUri:Ce});v("authConfig.accessToken",Ge?.data?.access_token),Ge?.data?.refresh_token&&v("authConfig.refreshToken",Ge?.data?.refresh_token),Te.success(r("OAuth2 tokens generated successfully!","kivicare-clinic-management-system")),E(!1)}catch(Ge){console.error("Token exchange error:",Ge),Te.error(r("Failed to exchange authorization code for token","kivicare-clinic-management-system")),E(!1)}},K=async()=>{const{clientId:U,clientSecret:me,tokenUrl:ye,refreshToken:pe}=A.authConfig;if(!pe){Te.error(r("No refresh token available","kivicare-clinic-management-system"));return}E(!0);try{const Ce=await Ki.refreshOAuth2Token({refreshToken:pe,clientId:U,clientSecret:me,tokenUrl:ye});console.log(Ce,"test"),v("authConfig.accessToken",Ce.data.access_token),Ce.data.refresh_token&&v("authConfig.refreshToken",Ce.data.refresh_token),Te.success(r("Access token refreshed successfully!","kivicare-clinic-management-system")),E(!1)}catch(Ce){console.error("Token refresh error:",Ce),Te.error(r("Failed to refresh access token","kivicare-clinic-management-system")),E(!1)}},ne=a?.modules?.map(U=>({value:U.value,label:U.label}))||[],oe=o.map(U=>({value:U.value,label:U.label})),D=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],$=[{value:"none",label:r("No Authentication","kivicare-clinic-management-system")},{value:"apikey",label:r("API Key Authentication","kivicare-clinic-management-system")},{value:"basic",label:r("Basic Authentication","kivicare-clinic-management-system")},{value:"bearer",label:r("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")},{value:"oauth2",label:r("OAuth2 Authentication","kivicare-clinic-management-system")},{value:"hmac",label:r("HMAC / Signature Authentication","kivicare-clinic-management-system")}],te=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],ae=[{value:"header",label:r("Header","kivicare-clinic-management-system")},{value:"query",label:r("Query Parameter","kivicare-clinic-management-system")}],Y=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],H=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}];r("Minutes","kivicare-clinic-management-system"),r("Hours","kivicare-clinic-management-system"),r("Days","kivicare-clinic-management-system");const B=()=>{switch(A.contentType){case"application/json":return`{
                    "event": "{{event_name}}",
                    "module": "{{module_name}}",
                    "data": {
                        "id": "{{record_id}}",
                        "timestamp": "{{timestamp}}"
                    }}`;case"application/xml":return`<?xml version="1.0"?>
                    <webhook>
                    <event>{{event_name}}</event>
                    <module>{{module_name}}</module>
                    <data>
                        <id>{{record_id}}</id>
                        <timestamp>{{timestamp}}</timestamp>
                    </data>
                    </webhook>`;case"application/x-www-form-urlencoded":return"event={{event_name}}&module={{module_name}}&id={{record_id}}&timestamp={{timestamp}}";default:return"Use variables like {{event_name}}, {{module_name}}, {{record_id}}, {{timestamp}}"}},re=()=>["POST","PUT","PATCH"].includes(A.httpMethod),de=U=>{const me={};U.authMethod==="apikey"?(me.api_key=U.authConfig.apiKey,me.key_location=U.authConfig.keyLocation,me.header_name=U.authConfig.headerName):U.authMethod==="basic"?(me.username=U.authConfig.username,me.password=U.authConfig.password,me.encoding=U.authConfig.encoding):U.authMethod==="bearer"?(me.bearer_token=U.authConfig.bearerToken,me.token_type=U.authConfig.tokenType,me.token_expiry=U.authConfig.tokenExpiry):U.authMethod==="oauth2"?(me.client_id=U.authConfig.clientId,me.client_secret=U.authConfig.clientSecret,me.auth_url=U.authConfig.authUrl,me.token_url=U.authConfig.tokenUrl,me.redirect_url=U.authConfig.redirectUrl,me.scopes=U.authConfig.scopes,me.refresh_token=U.authConfig.refreshToken,me.access_token=U.authConfig.accessToken):U.authMethod==="hmac"&&(me.hmac_access_key=U.authConfig.hmacAccessKey,me.hmac_secret_key=U.authConfig.hmacSecretKey,me.hmac_algorithm=U.authConfig.hmacAlgorithm,me.hmac_signature_location=U.authConfig.hmacSignatureLocation,me.hmac_header_param_name=U.authConfig.hmacHeaderParamName);const ye=U.customHeaders.filter(Ge=>Ge.key&&Ge.value),pe=U.queryParams.filter(Ge=>Ge.key&&Ge.value),Ce={url:U.webhookUrl,method:U.httpMethod,auth_method:U.authMethod,auth_config:me,content_type:U.contentType,custom_headers:ye,query_params:pe,request_body:U.requestBody,timeout:parseInt(U.timeout),retry_attempts:parseInt(U.retryAttempts),retry_delay:parseInt(U.retryDelay),enable_ssl:U.enableSSL};return{name:U.name,module_name:U.moduleName,event_name:U.eventName,methods:U.httpMethod,webhook_data:Ce,status:U.status}},xe=U=>{const me=de(U);e(me)};return i.jsxs("form",{onSubmit:g(xe),className:"webhook-form",children:[i.jsx("div",{className:"d-flex justify-content-end gap-2 mb-3",children:i.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>R(!0),children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import JSON","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Basic Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Webhook Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"name",control:h,rules:{required:r("Webhook name is required","kivicare-clinic-management-system")},render:({field:U})=>i.jsx("input",{...U,type:"text",className:`form-control ${x.name?"is-invalid":""}`,placeholder:r("Enter webhook name","kivicare-clinic-management-system")})}),x.name&&i.jsx("div",{className:"invalid-feedback d-block",children:x.name.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"moduleName",control:h,rules:{required:r("Module is required","kivicare-clinic-management-system")},render:({field:U})=>i.jsx(ct,{...U,options:ne,className:`react-select-box ${x.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:r("Select module","kivicare-clinic-management-system"),value:ne.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})}),x.moduleName&&i.jsx("div",{className:"invalid-feedback d-block",children:x.moduleName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Event","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"eventName",control:h,rules:{required:r("Event is required","kivicare-clinic-management-system")},render:({field:U})=>i.jsx(ct,{...U,options:oe,className:`react-select-box ${x.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:r("Select event","kivicare-clinic-management-system"),value:oe.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})}),x.eventName&&i.jsx("div",{className:"invalid-feedback d-block",children:x.eventName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"httpMethod",control:h,rules:{required:r("HTTP method is required","kivicare-clinic-management-system")},render:({field:U})=>i.jsx(ct,{...U,options:D,value:D.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[r("Webhook URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"webhookUrl",control:h,rules:{required:r("Webhook URL is required","kivicare-clinic-management-system"),pattern:{value:/^https?:\/\/.+/,message:r("Please enter a valid URL","kivicare-clinic-management-system")}},render:({field:U})=>i.jsx("input",{...U,type:"url",className:`form-control ${x.webhookUrl?"is-invalid":""}`,placeholder:"https://example.com/webhook"})}),x.webhookUrl&&i.jsx("div",{className:"invalid-feedback d-block",children:x.webhookUrl.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Status","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"status",control:h,render:({field:U})=>i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{...U,type:"checkbox",className:"form-check-input",checked:U.value===1,onChange:me=>U.onChange(me.target.checked?1:0)}),i.jsx("label",{className:"form-check-label",children:U.value===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})]})})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Authentication","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Authentication Method","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authMethod",control:h,render:({field:U})=>i.jsx(ct,{...U,options:$,value:$.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),A.authMethod==="apikey"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("API Key","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.apiKey",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Enter API key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:r("Location","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.keyLocation",control:h,render:({field:U})=>i.jsx(ct,{...U,options:ae,className:"react-select-box",classNamePrefix:"react-select",value:ae.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:r("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.headerName",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:"Authorization"})})]})]}),A.authMethod==="basic"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Username","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.username",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Enter username","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Password","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.password",control:h,render:({field:U})=>i.jsx("input",{...U,type:"password",className:"form-control",placeholder:r("Enter password","kivicare-clinic-management-system")})})]})]}),A.authMethod==="bearer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-8",children:[i.jsx("label",{className:"form-label",children:r("Bearer Token","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.bearerToken",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Enter bearer token","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Token Type","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.tokenType",control:h,render:({field:U})=>i.jsx(ct,{...U,options:Y,className:"react-select-box",classNamePrefix:"react-select",value:Y.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-12",children:[i.jsx("label",{className:"form-label",children:r("Token Expiry (Optional)","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.tokenExpiry",control:h,render:({field:U})=>i.jsx("input",{...U,type:"datetime-local",className:"form-control"})}),i.jsx("small",{className:"text-muted",children:r("Set when the token expires to get a reminder to refresh it","kivicare-clinic-management-system")})]})]}),A.authMethod==="oauth2"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),r("OAuth2 allows secure authorization without sharing passwords. Configure your OAuth2 provider settings below.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.clientId",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Enter client ID","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.clientSecret",control:h,render:({field:U})=>i.jsx("input",{...U,type:"password",className:"form-control",placeholder:r("Enter client secret","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Authorization URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.authUrl",control:h,render:({field:U})=>i.jsx("input",{...U,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/authorize"})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Token URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.tokenUrl",control:h,render:({field:U})=>i.jsx("input",{...U,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/token"})})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Redirect URL (Callback)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx(Ne,{name:"authConfig.redirectUrl",control:h,render:({field:U})=>i.jsx("input",{...U,type:"url",className:"form-control",placeholder:window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback",readOnly:!0})}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>W(A.authConfig.redirectUrl),title:r("Copy to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:r("Configure this URL in your OAuth2 provider settings","kivicare-clinic-management-system")})]}),"                                ",i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Scopes","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.scopes",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:"read write admin"})}),i.jsx("small",{className:"text-muted",children:r("Space-separated list of permission scopes","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Access Token","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.accessToken",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Refresh Token","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.refreshToken",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary",onClick:I,disabled:P||!A.authConfig.clientId||!A.authConfig.authUrl||!A.authConfig.redirectUrl,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Authorizing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),r("Generate OAuth2 Token","kivicare-clinic-management-system")]})}),A.authConfig.refreshToken&&i.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:K,disabled:P,children:[i.jsx("i",{className:"ph ph-arrows-clockwise me-2"}),r("Refresh Token","kivicare-clinic-management-system")]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:r('Click "Generate OAuth2 Token" to open authorization popup and obtain access tokens',"kivicare-clinic-management-system")})]})]}),A.authMethod==="hmac"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),r("HMAC (Hash-based Message Authentication Code) provides request signing for enhanced security.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Access Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.hmacAccessKey",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:r("Enter access key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ne,{name:"authConfig.hmacSecretKey",control:h,render:({field:U})=>i.jsx("input",{...U,type:"password",className:"form-control",placeholder:r("Enter secret key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.hmacAlgorithm",control:h,render:({field:U})=>i.jsx(ct,{...U,options:H,className:"react-select-box",classNamePrefix:"react-select",value:H.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Signature Location","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.hmacSignatureLocation",control:h,render:({field:U})=>i.jsx(ct,{...U,options:ae,className:"react-select-box",classNamePrefix:"react-select",value:ae.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"authConfig.hmacHeaderParamName",control:h,render:({field:U})=>i.jsx("input",{...U,type:"text",className:"form-control",placeholder:"X-Signature"})})]})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Request Configuration","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Content Type","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"contentType",control:h,render:({field:U})=>i.jsx(ct,{...U,options:te,className:"react-select-box",classNamePrefix:"react-select",value:te.find(me=>me.value===U.value),onChange:me=>U.onChange(me?.value),styles:{menuPortal:me=>({...me,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:r("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>S({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Header","kivicare-clinic-management-system")]})]}),w.map((U,me)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Ne,{name:`customHeaders.${me}.key`,control:h,render:({field:ye})=>i.jsx("input",{...ye,type:"text",className:"form-control",placeholder:r("Header Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{name:`customHeaders.${me}.value`,control:h,render:({field:ye})=>i.jsx(ct,{...ye,options:d.header?.map(pe=>({value:pe,label:pe}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Header Value","kivicare-clinic-management-system"),isClearable:!0,value:ye.value?{value:ye.value,label:ye.value}:null,onChange:pe=>ye.onChange(pe?.value||""),onInputChange:(pe,{action:Ce})=>{Ce==="input-change"&&ye.onChange(pe)},styles:{menuPortal:pe=>({...pe,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>j(me),children:i.jsx("i",{className:"ph ph-trash"})})})]},U.id))]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:r("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>N({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Parameter","kivicare-clinic-management-system")]})]}),T.map((U,me)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Ne,{name:`queryParams.${me}.key`,control:h,render:({field:ye})=>i.jsx("input",{...ye,type:"text",className:"form-control",placeholder:r("Parameter Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{name:`queryParams.${me}.value`,control:h,render:({field:ye})=>i.jsx(ct,{...ye,options:d.query_params?.map(pe=>({value:pe,label:pe}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Parameter Value","kivicare-clinic-management-system"),isClearable:!0,value:ye.value?{value:ye.value,label:ye.value}:null,onChange:pe=>ye.onChange(pe?.value||""),onInputChange:(pe,{action:Ce})=>{Ce==="input-change"&&ye.onChange(pe)},styles:{menuPortal:pe=>({...pe,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>_(me),children:i.jsx("i",{className:"ph ph-trash"})})})]},U.id))]}),re()&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-2",children:i.jsx("label",{className:"form-label mb-0",children:r("Request Body","kivicare-clinic-management-system")})}),d.body?.length>0?i.jsxs("div",{className:"mb-2",children:[i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("strong",{children:r("Available Variables - Click to copy:","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-wrap gap-1",children:d.body.map((U,me)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>W(U),title:r("Click to copy","kivicare-clinic-management-system"),children:[i.jsx("i",{className:"ph ph-copy me-1"}),U]},me))})]}):i.jsx("div",{className:"mb-2",children:i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("em",{children:r("Select a module and event above to see available variables","kivicare-clinic-management-system")})})}),i.jsx(Ne,{name:"requestBody",control:h,render:({field:U})=>i.jsx("textarea",{...U,className:"form-control font-monospace",rows:"8",placeholder:B()})}),i.jsx("small",{className:"text-muted",children:r("Click on variable buttons above to copy them to clipboard, then paste in the body","kivicare-clinic-management-system")})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Advanced Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Timeout (seconds)","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"timeout",control:h,render:({field:U})=>i.jsx("input",{...U,type:"number",min:"1",max:"300",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Retry Attempts","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"retryAttempts",control:h,render:({field:U})=>i.jsx("input",{...U,type:"number",min:"0",max:"10",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Retry Delay (seconds)","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"retryDelay",control:h,render:({field:U})=>i.jsx("input",{...U,type:"number",min:"1",max:"60",className:"form-control"})})]}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{name:"enableSSL",control:h,render:({field:U})=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...U,type:"checkbox",className:"form-check-input",checked:U.value,onChange:me=>U.onChange(me.target.checked)}),i.jsx("label",{className:"form-check-label",children:r("Enable SSL Certificate Verification","kivicare-clinic-management-system")})]})})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-floppy-disk me-2"}),s?r("Update Webhook","kivicare-clinic-management-system"):r("Create Webhook","kivicare-clinic-management-system")]})})}),i.jsxs(lt,{show:M,onHide:le,size:"lg",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[i.jsx("i",{className:"ph ph-upload me-2"}),r("Import Webhook Configuration","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:le,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-file-arrow-up me-2"}),r("Upload JSON File","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("input",{ref:ie,type:"file",accept:".json",className:"form-control",onChange:J}),i.jsx(Xt,{variant:"outline-secondary",onClick:()=>ie.current?.click(),children:i.jsx("i",{className:"ph ph-file"})})]}),i.jsx("small",{className:"text-muted",children:r("Upload a .json file containing the webhook configuration","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center mb-4",children:i.jsx("span",{className:"badge bg-secondary",children:r("OR","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-code me-2"}),r("Paste JSON Configuration","kivicare-clinic-management-system")]}),i.jsx("textarea",{className:`form-control font-monospace ${q?"is-invalid":V?"is-valid":""}`,rows:"12",value:O,onChange:U=>X(U.target.value),placeholder:JSON.stringify({name:"Example Webhook",module_name:"appointment",event_name:"created",webhook_data:{url:"https://example.com/webhook",method:"POST"}},null,2),style:{fontSize:"0.875rem"}}),q&&i.jsxs("div",{className:"invalid-feedback d-block",children:[i.jsx("i",{className:"ph ph-warning-circle me-1"}),q]}),V&&!q&&i.jsxs("div",{className:"valid-feedback d-block",children:[i.jsx("i",{className:"ph ph-check-circle me-1"}),r("Valid JSON configuration detected","kivicare-clinic-management-system")]}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),r("Paste a valid webhook JSON configuration. The format will be validated automatically.","kivicare-clinic-management-system")]})]}),G&&V&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-3",children:[i.jsxs("h6",{className:"alert-heading",children:[i.jsx("i",{className:"ph ph-eye me-2"}),r("Configuration Preview","kivicare-clinic-management-system")]}),i.jsx("hr",{}),i.jsxs("div",{className:"small",children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Name:","kivicare-clinic-management-system")})," ",G.name]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Module:","kivicare-clinic-management-system")})," ",G.module_name]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Event:","kivicare-clinic-management-system")})," ",G.event_name||r("N/A","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("URL:","kivicare-clinic-management-system")}),i.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},children:G.webhook_data?.url})]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Method:","kivicare-clinic-management-system")})," ",G.methods||G.webhook_data?.method||"POST"]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Auth:","kivicare-clinic-management-system")})," ",G.webhook_data?.auth_method||"none"]})]})]})]})]}),i.jsxs(lt.Footer,{children:[i.jsxs(Xt,{variant:"secondary",className:"me-2",onClick:le,children:[i.jsx("i",{className:"ph ph-x me-1"}),r("Cancel","kivicare-clinic-management-system")]}),i.jsxs(Xt,{variant:"primary",onClick:ue,disabled:!V,children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import Configuration","kivicare-clinic-management-system")]})]})]})]})};function ihe(){const t=hn(),e=xie({onSuccess:()=>{Te.success(r("Webhook created successfully","kivicare-clinic-management-system")),t("/setting/webhooks/configuration")},onError:s=>{console.error("Error creating webhook:",s),Te.error(r("Failed to create webhook","kivicare-clinic-management-system"))}}),n=s=>{e.mutate(s)};return i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:r("Add New Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Configure a new webhook to send notifications when events occur","kivicare-clinic-management-system")})]}),i.jsx("button",{className:"btn btn-primary",onClick:()=>t("/setting/webhooks/configuration"),children:r("Back","kivicare-clinic-management-system")})]}),i.jsx(sI,{onSubmit:n,isLoading:e.isLoading,isEditing:!1})]})}function she(){const{id:t}=Gt(),e=hn(),{data:n,isLoading:s}=gie(t,{enabled:!!t}),a=yie({onSuccess:()=>{Te.success(r("Webhook updated successfully","kivicare-clinic-management-system")),e("/setting/webhooks/configuration")},onError:o=>{console.error("Error updating webhook:",o),Te.error(r("Failed to update webhook","kivicare-clinic-management-system"))}}),l=o=>{a.mutate({id:t,...o})};return s?i.jsx(gP,{}):n?.data?i.jsxs("div",{className:"edit-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:r("Edit Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Update webhook configuration and settings","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/webhooks/configuration",className:"btn btn-primary",children:r("Back","kivicare-clinic-management-system")})]}),i.jsx(sI,{initialData:n.data,onSubmit:l,isLoading:a.isLoading,isEditing:!0})]}):i.jsx("div",{className:"alert alert-warning",children:r("Webhook not found","kivicare-clinic-management-system")})}const ahe=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(""),[a,l]=f.useState(""),[o,c]=f.useState([]),[d,m]=f.useState(!1),{data:u}=wP({page:1,per_page:100}),p=u?.data?.data||[],h=p.map(N=>({value:N.id,label:N.name,url:N.url,method:N.method,status:N.status})),{data:g}=vie(),x=g?.data?.modules||[];g?.data?.common_variables;const v=wie({onSuccess:N=>{let _=null,A=null;for(const M of x){const R=M.events.find(O=>O.value===n);if(R){_=M,A=R;break}}const P=N.data||N,E={id:Date.now(),webhook:P.webhook_data?.name||p.find(M=>M.id==t)?.name||"Unknown",module:_?.label||"Unknown",event:A?.label||n,status:P.success?"success":"failed",responseCode:P.status_code||0,responseTime:P.execution_time||0,response:P.response||P.error||"No response data",url:P.webhook_data?.url||"Unknown URL",method:P.webhook_data?.method||"POST",timestamp:new Date().toLocaleString()};c(M=>[E,...M]),N.status?Te.success(r("Test webhook delivered successfully","kivicare-clinic-management-system")):Te.error(r("Test webhook delivery failed","kivicare-clinic-management-system"))},onError:N=>{let _=null,A=null;for(const E of x){const M=E.events.find(R=>R.value===n);if(M){_=E,A=M;break}}const P={id:Date.now(),webhook:p.find(E=>E.id==t)?.name||"Unknown",module:_?.label||"Unknown",event:A?.label||n,status:"failed",responseCode:0,responseTime:0,response:N.message||"Network error occurred",url:"Unknown URL",method:"Unknown",timestamp:new Date().toLocaleString()};c(E=>[P,...E]),Te.error(r("Test failed: Network error","kivicare-clinic-management-system"))}}),y=N=>{let _=null,A=null;for(const M of x){const R=M.events.find(O=>O.value===N);if(R){_=M,A=R;break}}if(!A)return{};const P=A.dynamic_variables,E={};return P.body?.forEach(M=>{const R=M.replace(/{{|}}/g,"");if(R.includes("_id"))R.includes("appointment_id")?E[R]=Math.floor(Math.random()*1e3)+1:R.includes("patient_id")?E[R]=Math.floor(Math.random()*500)+100:R.includes("doctor_id")?E[R]=Math.floor(Math.random()*100)+50:R.includes("clinic_id")?E[R]=Math.floor(Math.random()*10)+1:R.includes("encounter_id")?E[R]=Math.floor(Math.random()*2e3)+500:E[R]=Math.floor(Math.random()*1e3)+1;else if(R.includes("_email"))R.includes("patient_email")?E[R]="john.doe@example.com":R.includes("doctor_email")?E[R]="dr.smith@kivicare.com":R.includes("clinic_email")?E[R]="info@healthclinic.com":E[R]="contact@kivicare.com";else if(R.includes("_name")||R.includes("_full_name"))R.includes("patient")?E[R]="John Doe":R.includes("doctor")?E[R]="Dr. Sarah Smith":R.includes("clinic")?E[R]="Main Health Clinic":R.includes("first_name")?E[R]="John":R.includes("last_name")?E[R]="Doe":R.includes("service_names")?E[R]="General Consultation, Blood Test":E[R]="Sample Name";else if(R.includes("_contact_number")||R.includes("_phone")){const O=["+1-555-0123","+1 (555) 123-4567","555-123-4567"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("_date")){const O=new Date;if(R.includes("appointment_date")||R.includes("encounter_date")){const L=new Date(O);L.setDate(O.getDate()+Math.floor(Math.random()*30)+1),E[R]=L.toISOString().split("T")[0]}else if(R.includes("dob")||R.includes("date_of_birth")){const L=1970+Math.floor(Math.random()*40);E[R]=`${L}-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`}else if(R.includes("registered_date")){const L=new Date(O);L.setDate(O.getDate()-Math.floor(Math.random()*365)),E[R]=L.toISOString().split("T")[0]}else E[R]=O.toISOString().split("T")[0]}else if(R.includes("_time"))if(R.includes("start_time")){const O=["09:00:00","10:00:00","11:00:00","14:00:00","15:00:00"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("end_time")){const O=["09:30:00","10:30:00","11:30:00","14:30:00","15:30:00"];E[R]=O[Math.floor(Math.random()*O.length)]}else E[R]=new Date().toTimeString().split(" ")[0];else if(R.includes("_address")){const O=["123 Main Street, New York, NY 10001","456 Oak Avenue, Los Angeles, CA 90210","789 Elm Drive, Chicago, IL 60601","321 Pine Road, Houston, TX 77001"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("_status"))if(R.includes("appointment_status")){const O=["1","2","3"];E[R]=O[Math.floor(Math.random()*O.length)]}else E[R]="1";else if(R.includes("_gender")){const O=["male","female","other"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("blood_group")){const O=["A+","A-","B+","B-","AB+","AB-","O+","O-"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("specialization")){const O=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("qualification")){const O=["MBBS, MD","MBBS, MS","BDS, MDS","BAMS","BHMS"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("experience"))E[R]=`${Math.floor(Math.random()*20)+1} years`;else if(R.includes("description"))R.includes("doctor")?E[R]="Experienced physician with expertise in general medicine and patient care.":R.includes("encounter")?E[R]="Regular check-up and consultation for ongoing health monitoring.":E[R]="Sample description for healthcare services.";else if(R.includes("postal_code")||R.includes("zip_code"))E[R]=String(Math.floor(Math.random()*9e4)+1e4);else if(R.includes("city")){const O=["New York","Los Angeles","Chicago","Houston","Phoenix"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("country")){const O=["United States","Canada","United Kingdom","Australia"];E[R]=O[Math.floor(Math.random()*O.length)]}else if(R.includes("profile_photo")||R.includes("signature"))E[R]=`https://via.placeholder.com/150x150?text=${R.replace(/_/g,"+")}`;else if(R.includes("clinic_ids")||R.includes("_ids"))E[R]="[1, 2, 3]";else if(R.includes("custom_fields_data"))E[R]=JSON.stringify({insurance_provider:"Blue Cross Blue Shield",emergency_contact:"+1-555-9876",allergies:"None known",medical_history:"Hypertension"});else if(R==="current_date_time")E[R]=new Date().toISOString();else if(R==="current_date")E[R]=new Date().toISOString().split("T")[0];else if(R==="current_time")E[R]=new Date().toTimeString().split(" ")[0];else if(R==="current_user_id")E[R]="1";else{const O=R.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase());E[R]=`Sample ${O}`}}),{event:N,module:_?.value,data:E,metadata:{timestamp:new Date().toISOString(),webhook_id:t,test_mode:!0}}},b=N=>{s(N);const _=y(N);l(JSON.stringify(_,null,2)),Te.success(r("Sample payload loaded","kivicare-clinic-management-system"))},k=N=>{try{return JSON.parse(N),!0}catch{return!1}},w=async()=>{if(!t||!n||!a){Te.error(r("Please select a webhook, event, and provide payload data","kivicare-clinic-management-system"));return}if(!k(a)){Te.error(r("Invalid JSON payload","kivicare-clinic-management-system"));return}m(!0);try{await v.mutateAsync({webhookId:t,eventName:n,payload:JSON.parse(a)})}finally{m(!1)}},S=async()=>{if(!t){Te.error(r("Please select a webhook endpoint","kivicare-clinic-management-system"));return}m(!0);for(const N of x.slice(0,3)){const _=N.events[0];if(_)try{s(_.value);const A=y(_.value);l(JSON.stringify(A,null,2)),await v.mutateAsync({webhookId:t,eventName:_.value,payload:A}),await new Promise(P=>setTimeout(P,1e3))}catch(A){console.error("Bulk test error:",A)}}m(!1),Te.success(r("Bulk test completed","kivicare-clinic-management-system"))},j=N=>{switch(N){case"success":return i.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"});case"failed":return i.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2"});default:return i.jsx("i",{className:"bi bi-clock-fill text-warning me-2"})}},T=N=>{switch(N){case"success":return"success";case"failed":return"danger";default:return"warning"}};return i.jsxs(yo,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"mb-2",children:r("Webhook Testing","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("Test webhook deliveries with sample or custom payloads","kivicare-clinic-management-system")})]}),i.jsxs(Yn,{className:"g-4",children:[i.jsx(Et,{lg:6,children:i.jsxs(St,{children:[i.jsxs(St.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Test Configuration","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Configure and execute webhook tests","kivicare-clinic-management-system")})]}),i.jsx(St.Body,{children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:r("Select Webhook","kivicare-clinic-management-system")}),i.jsx(ct,{value:h.find(N=>N.value==t)||null,onChange:N=>e(N?N.value:""),options:h,placeholder:r("Choose webhook endpoint...","kivicare-clinic-management-system"),isClearable:!0,isSearchable:!0,noOptionsMessage:()=>r("No webhooks found","kivicare-clinic-management-system"),loadingMessage:()=>r("Loading webhooks...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:N=>({...N,zIndex:9999})}}),p.length===0&&i.jsx(Mt.Text,{className:"text-muted",children:r("No webhooks configured. Please create a webhook first.","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(Mt.Label,{children:r("Payload Data","kivicare-clinic-management-system")}),i.jsxs(Xt,{variant:"btn btn-secondary",size:"sm",onClick:()=>b(n),disabled:!n,children:[i.jsx("i",{className:"bi bi-code me-1"}),r("Reload Sample","kivicare-clinic-management-system")]})]}),i.jsx(Mt.Control,{as:"textarea",rows:10,value:a,onChange:N=>l(N.target.value),placeholder:r("Enter JSON payload or select a sample from the right panel...","kivicare-clinic-management-system")}),a&&!k(a)&&i.jsx(Mt.Text,{className:"text-danger",children:r("Invalid JSON format","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(Xt,{variant:"primary",onClick:w,disabled:d||!t||!n||!a,className:"flex-fill",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Testing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-play-fill me-2"}),r("Send Test","kivicare-clinic-management-system")]})}),i.jsx(Xt,{variant:"btn btn-primary",onClick:S,disabled:d||!t,children:r("Bulk Test","kivicare-clinic-management-system")})]})})]})})]})}),i.jsx(Et,{lg:6,children:i.jsxs(St,{children:[i.jsxs(St.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Sample Payloads","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Click on any event below to load its sample payload for testing","kivicare-clinic-management-system")})]}),i.jsx(St.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"auto"},children:x.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-muted",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"text-muted mt-2",children:r("Loading events...","kivicare-clinic-management-system")})]}):i.jsx("div",{className:"d-grid gap-3",children:x.map(N=>i.jsxs("div",{children:[i.jsx("h6",{className:"text-muted mb-2 border-bottom pb-1",children:N.label}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:N.events.map(_=>i.jsx("div",{className:`p-3 border rounded cursor-pointer transition-colors ${n===_.value?"border-primary bg-primary bg-opacity-10":"border-light hover:bg-light"}`,onClick:()=>b(_.value),onMouseEnter:A=>{n!==_.value&&(A.target.style.backgroundColor="#f8f9fa")},onMouseLeave:A=>{n!==_.value&&(A.target.style.backgroundColor="")},children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"fw-medium mb-1",children:_.label}),i.jsx("div",{className:"small text-muted",children:_.value})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n===_.value&&i.jsx(ca,{bg:"primary",className:"small",children:r("Selected","kivicare-clinic-management-system")}),i.jsxs(ca,{bg:"secondary",className:"small",children:[_.dynamic_variables?.body?.length||0," ",r("vars","kivicare-clinic-management-system")]}),i.jsx("i",{className:"bi bi-arrow-right text-muted"})]})]})},_.value))})]},N.value))})})})]})})]}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsxs(St,{children:[i.jsxs(St.Header,{children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Test Results","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Recent webhook test deliveries and responses","kivicare-clinic-management-system")})]}),i.jsx(St.Body,{children:o.length===0?i.jsxs("div",{className:"text-center py-5 text-muted",children:[i.jsx("i",{className:"bi bi-play display-1 opacity-25 d-block mb-3"}),i.jsx("p",{children:r("No test results yet. Run a test to see delivery results here.","kivicare-clinic-management-system")})]}):i.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:i.jsx("div",{className:"d-grid gap-3",children:o.map(N=>i.jsxs("div",{className:"border rounded p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[j(N.status),i.jsxs("div",{children:[i.jsx("p",{className:"fw-medium mb-1",children:N.webhook}),i.jsxs("p",{className:"text-muted small mb-1",children:[N.module,"  ",N.event]}),i.jsxs("p",{className:"text-muted small mb-0",children:[i.jsx(ca,{bg:"secondary",className:"me-2",children:N.method}),N.url]})]})]}),i.jsxs("div",{className:"text-end",children:[i.jsx(ca,{bg:T(N.status),className:"mb-1",children:N.responseCode}),i.jsxs("p",{className:"text-muted small mb-1",children:[N.responseTime,"ms"]}),i.jsx("p",{className:"text-muted small mb-0",children:N.timestamp})]})]}),i.jsx("hr",{className:"my-3"}),i.jsxs("div",{children:[i.jsx(Mt.Label,{className:"small text-muted",children:r("Response Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-light p-3 rounded mt-1",children:[i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Status:","kivicare-clinic-management-system")}),i.jsx(ca,{bg:T(N.status),className:"ms-1",children:N.status.toUpperCase()})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Code:","kivicare-clinic-management-system")}),i.jsx("span",{className:"ms-1 fw-medium",children:N.responseCode})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Time:","kivicare-clinic-management-system")}),i.jsxs("span",{className:"ms-1 fw-medium",children:[N.responseTime,"ms"]})]})]}),i.jsxs("div",{children:[i.jsx("small",{className:"text-muted d-block mb-1",children:r("Response Body:","kivicare-clinic-management-system")}),i.jsx("pre",{className:"small mb-0",style:{overflowX:"auto",fontSize:"0.75rem",maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #dee2e6",borderRadius:"0.25rem",padding:"0.5rem"},children:typeof N.response=="string"?N.response:JSON.stringify(N.response,null,2)})]})]})]})]},N.id))})})})]})})})]})},rhe=()=>(f.useEffect(()=>{const t=new URLSearchParams(window.location.search),e=t.get("code"),n=t.get("error"),s=t.get("error_description");window.opener?(e?window.opener.postMessage({type:"oauth2_callback",code:e},window.location.origin):n&&window.opener.postMessage({type:"oauth2_callback",error:s||n},window.location.origin),setTimeout(()=>{window.close()},500)):console.error("OAuth2Callback: No opener window found")},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:r("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("This window will close automatically.","kivicare-clinic-management-system")})]})})),lhe=[{att_name:"clinic",name:r("Choose your Clinic","kivicare-clinic-management-system"),fixed:!1},{att_name:"doctor",name:r("Choose your Doctor","kivicare-clinic-management-system"),fixed:!1},{att_name:"servicesCategory",name:r("Services from Category","kivicare-clinic-management-system"),fixed:!1},{att_name:"selectDateTime",name:r("Select Date and Time","kivicare-clinic-management-system"),fixed:!0},{att_name:"userDetail",name:r("User Detail information","kivicare-clinic-management-system"),fixed:!0},{att_name:"appointmentExtra",name:r("Appointment Extra Data","kivicare-clinic-management-system"),fixed:!0},{att_name:"confirmation",name:r("Confirmation","kivicare-clinic-management-system"),fixed:!0}],wx=[{id:1,label:r("Show Phone & Email","kivicare-clinic-management-system")},{id:2,label:r("Show Phone Number","kivicare-clinic-management-system")},{id:3,label:r("Show Email Address","kivicare-clinic-management-system")},{id:4,label:r("Hide contact details","kivicare-clinic-management-system")}],Md={clinic:[{key:"showClinicImage",label:r("Show Clinic Image","kivicare-clinic-management-system")},{key:"showClinicAddress",label:r("Show Clinic Address","kivicare-clinic-management-system")}],doctor:[{key:"showDoctorImage",label:r("Show Doctor Image","kivicare-clinic-management-system")},{key:"showDoctorExperience",label:r("Show Doctor Experience","kivicare-clinic-management-system")},{key:"showDoctorSpeciality",label:r("Show doctor speciality","kivicare-clinic-management-system")},{key:"showDoctorDegree",label:r("Show doctor degree","kivicare-clinic-management-system")},{key:"showDoctorRating",label:r("Show doctor rating","kivicare-clinic-management-system")}],service:[{key:"showServiceImage",label:r("Show Service Image","kivicare-clinic-management-system")},{key:"showServicetype",label:r("Show Service Type","kivicare-clinic-management-system")},{key:"showServicePrice",label:r("Show Service Price","kivicare-clinic-management-system")},{key:"showServiceDuration",label:r("Show Service Duration","kivicare-clinic-management-system")},{key:"skip_service_when_single",label:r("Skip service when single is present","kivicare-clinic-management-system")}],color:[{key:"primaryColor",label:r("Primary Color","kivicare-clinic-management-system")},{key:"primaryHoverColor",label:r("Primary Hover Color","kivicare-clinic-management-system")},{key:"secondaryColor",label:r("Secondary Color","kivicare-clinic-management-system")},{key:"secondaryHoverColor",label:r("Secondary Hover Color","kivicare-clinic-management-system")}],print:[{key:"widget_print",label:r("Print Detail","kivicare-clinic-management-system")},{key:"afterWoocommerceRedirect",label:r("Redirect to Print after payment","kivicare-clinic-management-system")}]},ohe=({label:t,value:e="#000000",onChange:n,disabled:s=!1})=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx("input",{type:"color",className:"form-control form-control-color",value:e,title:r("Choose your color","kivicare-clinic-management-system"),onChange:n,disabled:s}),i.jsx("label",{className:"form-label",children:r(t,"kivicare-clinic-management-system")})]}),Qo=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(t,"kivicare-clinic-management-system")}),e]})}),che=({id:t,name:e,fixed:n,disabled:s})=>{const{attributes:a,listeners:l,setNodeRef:o,transform:c,transition:d,isDragging:m}=Hk({id:t,disabled:n}),u={transform:Ka.Transform.toString(c),transition:d,opacity:m?.7:1,cursor:n?"not-allowed":"grab",background:m?"#eaf1ff":void 0,boxShadow:m?"0 0 10px #5670CC":void 0,pointerEvents:n?"none":"auto",filter:s?"grayscale(1) opacity(0.5)":void 0};return i.jsxs("div",{ref:o,style:u,...a,...!n&&!s?l:{},className:`p-3 bg-body mb-2 d-flex align-items-center gap-3 ${s?"disabled":""}`,children:[!n&&!s&&i.jsx("i",{className:"ph ph-list fs-5"}),i.jsx("span",{className:"font-size-14 flex-grow-1",children:r(e,"kivicare-clinic-management-system")})]})},dhe=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{data:n,isLoading:s,error:a}=wn("settings","widget-setting",{},{enabled:!0}),l=un("settings","widget-setting"),[o,c]=f.useState(!1),{data:d}=_n(),m=d?.data?.hideUtilityLinks,{control:u,handleSubmit:p,setValue:h,watch:g,reset:x}=en({defaultValues:{showClinicImage:!1,showClinicAddress:!1,clinicContactDetails:wx[0],showDoctorImage:!1,showDoctorExperience:!1,showDoctorSpeciality:!1,showDoctorDegree:!1,showDoctorRating:!1,doctorContactDetails:wx[0],primaryColor:"#5670CC",primaryHoverColor:"#4563CC",secondaryColor:"#F67E7D",secondaryHoverColor:"#000000",widget_print:!1,afterWoocommerceRedirect:!1,widgetOrder:lhe,showServiceImage:!0,showServicetype:!0,showServicePrice:!0,showServiceDuration:!0,skip_service_when_single:!1}}),v=g("widgetOrder"),y=TP(Yh(Fk,{activationConstraint:{distance:5}}));f.useEffect(()=>{!n?.status||!n?.data||x(T=>({...T,...Object.fromEntries(Object.entries(n.data).filter(([N,_])=>_!=null&&_!==""))}))},[n,x]),f.useEffect(()=>{if(!a)return;const T=typeof a=="string"?a:a?.response?.data?.message||a?.message||r("An unknown error occurred","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:T,confirmButtonText:r("Ok","kivicare-clinic-management-system")})},[a]);const b=T=>{const{active:N,over:_}=T;if(!_||N.id===_.id)return;const A=v.findIndex(E=>E.att_name===N.id),P=v.findIndex(E=>E.att_name===_.id);if(!v[A].fixed&&!v[P].fixed){const E=pf(v,A,P);h("widgetOrder",E,{shouldDirty:!0})}},k=p(async T=>{c(!0);try{const N={...T,widgetOrder:v},_=await l.mutateAsync(N);Xe.fire({icon:_.status?"success":"error",title:r(_.status?"Success":"Error","kivicare-clinic-management-system"),text:_.message,confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(N){console.error("Error saving settings:",N),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{c(!1)}}),w=T=>({text:T?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:T?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),S=T=>T.map(({key:N,label:_})=>i.jsx(Ne,{name:N,control:u,render:({field:A})=>i.jsx(on,{label:_,checked:A.value,onChange:A.onChange,badge:w(A.value),className:"mb-3",disabled:o})},N)),j=T=>i.jsx(Ne,{name:T,control:u,render:({field:N})=>i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:r("Contact Details","kivicare-clinic-management-system")})}),i.jsx(ct,{className:"react-select-box",options:wx,value:N.value,onChange:N.onChange,isDisabled:o,getOptionLabel:_=>_.label,getOptionValue:_=>_.id,classNamePrefix:"react-select",styles:{menuPortal:_=>({..._,zIndex:9999})}})]})});return s?i.jsx(vP,{}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Widget Settings","kivicare-clinic-management-system"),m!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/widget-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary Google Event Template"})})]}),e&&i.jsxs(Qo,{title:"Clinic",children:[S(Md.clinic),j("clinicContactDetails")]}),i.jsxs(Qo,{title:"Doctor",children:[S(Md.doctor),j("doctorContactDetails")]}),i.jsx(Qo,{title:"Service",children:S(Md.service)}),i.jsx(Qo,{title:"Widget Color",children:i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Md.color.map(({key:T,label:N})=>i.jsx(Ne,{name:T,control:u,render:({field:_})=>i.jsx(ohe,{label:N,value:_.value,onChange:A=>_.onChange(A.target.value),disabled:o})},T))})}),i.jsxs("div",{className:"position-relative",children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),text:r("Change widget order setting is available in Kivicare Pro. Upgrade now to access these features.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx(Qo,{title:"Widget Order",children:i.jsx($k,{sensors:y,collisionDetection:AP,onDragEnd:b,children:i.jsx(qk,{items:v.map(T=>T.att_name),strategy:ZP,children:v.map(T=>i.jsx(che,{id:T.att_name,name:T.name,fixed:T.fixed,disabled:o},T.att_name))})})})]}),i.jsx(Qo,{title:"Print Detail setting",children:S(Md.print)}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary px-4",onClick:k,disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save Settings","kivicare-clinic-management-system")})})]})})},mhe=({title:t,titleId:e,...n},s)=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:26,viewBox:"0 0 114 26",width:114,ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"m23.6977 25.2924h-20.10301c-1.32885 0-2.58954-.6978-3.202853-1.8892-.698493-1.3617-.4429462-2.9956.630343-4.068l13.98692-13.97375h-10.01743c-2.7599 0-4.99167-2.22968-4.99167-4.987h18.5186c1.3288 0 2.5895.69784 3.2028 1.88927.6986 1.36164.443 2.9956-.6303 4.0679l-13.98691 13.97378h11.60181c2.7599 0 4.9917 2.2297 4.9917 4.987zm79.5603-25.2924c-2.879 0-5.4691 1.24249-7.241 3.23389-1.7883-1.9914-4.3781-3.23389-7.2401-3.23389-5.3497 0-9.7108 4.56149-9.7108 9.88887v15.40353c2.7598 0 4.9915-2.2297 4.9915-4.987v-10.46757c0-2.5701 1.9933-4.74871 4.5487-4.85083 2.692-.10213 4.9237 2.05945 4.9237 4.73169v10.58671c0 2.7573 2.2317 4.987 4.9915 4.987v-15.45457c0-2.5701 1.9935-4.74871 4.5485-4.85083 2.692-.10213 4.924 2.05945 4.924 4.73169v10.58671c0 2.7573 2.232 4.987 4.991 4.987v-15.40353c-.017-5.32738-4.378-9.88887-9.727-9.88887zm-54.3805 12.8334c0 7.0806-5.7583 12.8335-12.8455 12.8335-7.0871 0-12.8454-5.7529-12.8454-12.8335 0-7.0805 5.7753-12.8334 12.8454-12.8334 7.0702 0 12.8455 5.7529 12.8455 12.8334zm-4.9917 0c0-4.32315-3.5265-7.8464-7.8538-7.8464-4.3272 0-7.8538 3.52325-7.8538 7.8464 0 4.3233 3.5266 7.8465 7.8538 7.8465 4.3273 0 7.8538-3.5232 7.8538-7.8465zm32.6758 0c0 7.0806-5.758 12.8335-12.8451 12.8335-7.0877 0-12.8458-5.7529-12.8458-12.8335 0-7.0805 5.7757-12.8334 12.8458-12.8334 7.0696 0 12.8451 5.7529 12.8451 12.8334zm-4.9915 0c0-4.32315-3.5264-7.8464-7.8536-7.8464-4.3273 0-7.8541 3.52325-7.8541 7.8464 0 4.3233 3.5268 7.8465 7.8541 7.8465 4.3272 0 7.8536-3.5232 7.8536-7.8465z",fill:"#0b5cff"})),n_=f.forwardRef(mhe);function uhe(){const{isAddonActive:t,zoomIntegration:e}=ut();if(!t("telemed")||e!=="yes")return i.jsx(pg,{to:"/setting",replace:!0});const n=Ve(),s=t("telemed"),[a,l]=f.useState(!1),[o,c]=f.useState(!1),{register:d,handleSubmit:m,reset:u,control:p,watch:h,formState:{isDirty:g,errors:x},getValues:v}=en({defaultValues:{auth_type:"none",account_id:"",client_id:"",client_secret:"",enable_server_to_server:!1}}),y=h("enable_server_to_server"),{data:b,isLoading:k,error:w}=wn("settings","zoom-telemed/doctor-config",{},{enabled:s});f.useEffect(()=>{if(b?.data){const R=b.data,O=R.auth_type==="server-to-server",L=R.is_connected===!0,q={auth_type:R.auth_type,account_id:R.account_id||"",client_id:R.client_id||"",client_secret:R.client_secret||"",enable_server_to_server:O&&L};u(q)}},[b,u]);const{refetch:S}=wn("settings","zoom-telemed/authorize",{},{enabled:a}),{refetch:j}=wn("settings","zoom-telemed/disconnect",{},{enabled:s&&b?.data?.connection_status==="not_connected"}),T=un("settings","zoom-telemed/doctor-config"),N=un("settings","zoom-telemed/test-connection"),_=async R=>{const O=R.enable_server_to_server,L=b?.data?.is_google_meet_connected;if(!(O&&L&&!(await Xe.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press Yes to save server to server oauth configuration and will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{l(!0),await T.mutateAsync({...R,auth_type:O?"server-to-server":"none"}),n.invalidateQueries(["settings","zoom-telemed/doctor-config"]),n.invalidateQueries(["config"]),Xe.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Configuration saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(q){console.error("Update failed:",q),Xe.fire({title:r("Error","kivicare-clinic-management-system"),text:q?.response?.data?.message||r("Failed to save settings","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{l(!1)}},A=async()=>{if(!(b?.data?.is_google_meet_connected&&!(await Xe.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press yes to connect to Zoom. Connecting to Zoom will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{l(!0);const{data:O}=await S();window.location.href=O?.data?.redirect_url}catch(O){console.error("Connection failed:",O),alert(r("Failed to connect to Zoom. Please try again.","kivicare-clinic-management-system"))}finally{l(!1)}},P=async()=>{N.mutateAsync({...v(),auth_type:"server-to-server"}).then(R=>{R?.data?.success?Xe.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:r("Zoom configuration test successful!","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}):Xe.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:r("Zoom configuration test failed. Please check your settings.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}).catch(R=>{console.error("Test failed:",R),Xe.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:R?.response?.data?.data?.error||R?.message,icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})})},E=async()=>{if((await Xe.fire({title:r("Disconnect Zoom","kivicare-clinic-management-system"),message:r("Are you sure you want to disconnect your Zoom account?","kivicare-clinic-management-system"),confirmButtonText:r("Disconnect","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{c(!0);const{data:O}=await j();n.invalidateQueries(["settings","zoom-telemed/doctor-config"])}catch(O){console.error("Disconnection failed:",O),alert(r("Failed to disconnect from Zoom. Please try again.","kivicare-clinic-management-system"))}finally{c(!1)}},M=()=>b?b?.data?.auth_type!=="oauth"?i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Telemed Server To Server Oauth","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:m(_),children:[i.jsx("div",{className:"mb-3 p-0 form-check form-switch",children:i.jsx(Ne,{name:"enable_server_to_server",control:p,render:({field:R})=>i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[i.jsx("label",{className:"form-check-label",htmlFor:"enableServerToServer",children:r("Zoom Telemed Server To Server Oauth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableServerToServer",checked:R.value,onChange:O=>R.onChange(O.target.checked),disabled:a})]})})}),y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Account ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${x.account_id?"is-invalid":""}`,placeholder:r("Enter Zoom Account ID","kivicare-clinic-management-system"),...d("account_id",{required:r("Account ID is required","kivicare-clinic-management-system")})}),x.account_id&&i.jsx("div",{className:"invalid-feedback",children:x.account_id.message}),i.jsx("div",{className:"form-text",children:r("Find this in your Zoom app credentials","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${x.client_id?"is-invalid":""}`,placeholder:r("Enter Client ID","kivicare-clinic-management-system"),...d("client_id",{required:r("Client ID is required","kivicare-clinic-management-system")})}),x.client_id&&i.jsx("div",{className:"invalid-feedback",children:x.client_id.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${x.client_secret?"is-invalid":""}`,placeholder:r("Enter Client Secret","kivicare-clinic-management-system"),...d("client_secret",{required:r("Client Secret is required","kivicare-clinic-management-system")})}),x.client_secret&&i.jsx("div",{className:"invalid-feedback",children:x.client_secret.message})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a||!g,children:a?r("Saving...","kivicare-clinic-management-system"):r("Save Settings","kivicare-clinic-management-system")}),y&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:P,children:r("Test Zoom Config","kivicare-clinic-management-system")})]})]}),y&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-4",children:[r("Your administrator has enabled server to server authentication.","kivicare-clinic-management-system"),i.jsx("br",{}),r("Meetings will be created using these credentials.","kivicare-clinic-management-system")]})]}):b?.data?.auth_type==="oauth"?i.jsxs("div",{className:"bg-body p-4 rounded",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Account Connection","kivicare-clinic-management-system")}),b?.data?.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("Your Zoom account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:E,disabled:o,children:o?r("Disconnecting...","kivicare-clinic-management-system"):r("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"bg-warning-subtle p-3 rounded d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),r("Your Zoom account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-warning",onClick:A,disabled:a,children:a?r("Connecting...","kivicare-clinic-management-system"):r("Connect Zoom Account","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("p",{className:"mb-1",children:[i.jsx("strong",{children:r("Connection Status:","kivicare-clinic-management-system")})," ",b?.data?.connection_status==="not_connected"?r("Not Connected","kivicare-clinic-management-system"):r("Connected","kivicare-clinic-management-system")]}),i.jsx("p",{className:"mb-0 text-muted",children:b?.data?.is_connected?r("You can now create Zoom meetings directly from appointments","kivicare-clinic-management-system"):r("Connect your Zoom account to enable telemedicine features","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"alert alert-warning",children:[i.jsx(n_,{}),r("Zoom telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")]}):null;return i.jsx("div",{className:"zoom-telemed-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsxs("div",{className:"d-flex align-items-center mb-4",children:[i.jsx(n_,{width:70,className:"me-3"}),i.jsx("h4",{className:"mb-0",children:r("Telemedicine Settings","kivicare-clinic-management-system")})]}),k?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:r("Loading Zoom configuration...","kivicare-clinic-management-system")})]}):w?i.jsxs("div",{className:"bg-danger-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-exclamation-mark fs-4 me-2"}),r("Failed to load Zoom configuration:","kivicare-clinic-management-system")," ",w.message]}):M(),i.jsxs("div",{className:"mt-5",children:[i.jsx("h6",{className:"mb-3",children:r("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-question text-primary fs-4"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/configuration-telemed-addon/doctor-level-configuration/",className:"text-decoration-none",children:r("Zoom integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("Learn how to set up and use Zoom telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-video fs-4 text-primary"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/getting-started-telemed-addon/system-requirements-zoom-account-types/",className:"text-decoration-none",children:r("Zoom meeting requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})})})}const yu={list:(t={})=>ve({endpoint:"push-templates",method:"GET",data:t}),get:t=>ve({endpoint:`push-templates/${t}`,method:"GET"}),save:t=>ve({endpoint:"push-templates",method:"POST",data:t}),setStatus:(t,e)=>ve({endpoint:`push-templates/${t}/status`,method:"POST",data:{enabled:e}}),sendTest:t=>ve({endpoint:"push-templates/test-notification",method:"POST",data:t})},zc={all:["pushTemplates"],list:()=>[...zc.all,"list"],detail:t=>[...zc.all,"detail",t]},hhe=(t={})=>ft({queryKey:zc.list(),queryFn:async()=>{const e=await yu.list();return e?.data??e??[]},...t}),phe=(t,e={})=>ft({queryKey:zc.detail(t),queryFn:async()=>{const n=await yu.get(t);return n?.data??n??null},enabled:!!t,...e}),ghe=(t={})=>{const e=Ve();return Le({mutationFn:n=>yu.save(n),onSuccess:()=>{e.invalidateQueries({queryKey:zc.list()})},...t})},fhe=(t={})=>{const e=Ve();return Le({mutationFn:({name:n,enabled:s})=>yu.setStatus(n,s),onSuccess:()=>{e.invalidateQueries({queryKey:zc.list()})},...t})},vhe=(t={})=>Le({mutationFn:e=>yu.sendTest(e),...t}),xhe=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),a=f.useRef(null),{isAddonActive:l}=ut(),o=l("api"),{data:c}=_n(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:p}=wn("settings","app-configuration",{},{enabled:o}),h=un("settings","app-configuration"),{register:g,handleSubmit:x,reset:v,formState:{errors:y,isDirty:b}}=en({mode:"onBlur",reValidateMode:"onChange",defaultValues:{serverKey:"",client_emaail:"",privat_key:"",project_id:"",server_client_id:""}}),{mutateAsync:k,isLoading:w}=fhe({onSuccess:()=>{Te.success(r("Template saved","kivicare-clinic-management-system")),_()},onError:q=>{Te.error(r("Failed to update template status","kivicare-clinic-management-system"))}});f.useEffect(()=>{if(!o||!m?.status||!m?.data||n)return;const q=Object.fromEntries(Object.entries(m.data).filter(([Q,V])=>V!=null&&V!==""));v(q),s(!0)},[m,v,o,n]);const S=[{key:"serverKey",label:r("Firebase Server Key","kivicare-clinic-management-system"),placeholder:r("Firebase Server Key","kivicare-clinic-management-system"),required:!0},{key:"server_client_id",label:r("Firebase Server Client Id","kivicare-clinic-management-system"),placeholder:r("Firebase Server Client Id","kivicare-clinic-management-system"),required:!0},{key:"client_emaail",label:r("Client Email","kivicare-clinic-management-system"),placeholder:r("Client Email","kivicare-clinic-management-system"),required:!0,pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:r("Please enter a valid email address","kivicare-clinic-management-system")}},{key:"privat_key",label:r("Private Key","kivicare-clinic-management-system"),placeholder:r("Private Key","kivicare-clinic-management-system"),required:!0},{key:"project_id",label:r("Project Id","kivicare-clinic-management-system"),placeholder:r("Project Id","kivicare-clinic-management-system"),required:!0}],j=async q=>{e(!0);try{const Q=await h.mutateAsync(q);Q.status!==!0?Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(Q.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(Q.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(Q){console.error("Failed to save settings:",Q)}finally{e(!1)}},{data:T=[],isLoading:N,refetch:_}=hhe({enabled:o}),A=hn(),P=q=>{A(`/setting/push-template/edit/${q}`)},E=Ln(),M=async(q,Q)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{try{await k({name:q,enabled:Q==="on"?"off":"on"})}catch(V){console.error("Failed to toggle template enabled",V)}},500)},R=()=>{A("/setting/push-template/test-notification")},O=[E.accessor(q=>q.title,{id:"title",header:()=>r("Name","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:q.getValue()})})}),E.accessor(q=>q.recipients,{id:"recipients",header:()=>r("Recipients","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:(q.getValue()||[]).join(", ")})})}),E.accessor(q=>q.enabled,{id:"enabled",header:()=>r("Enabled","kivicare-clinic-management-system"),cell:q=>i.jsx(on,{checked:q.getValue(),onChange:()=>M(q.row.original.name,q.getValue())})}),E.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:q=>i.jsx("button",{className:"btn btn-link p-0",onClick:()=>P(q.row.original.name),children:r("Manage","kivicare-clinic-management-system")})})];if(p){let q;typeof p=="string"?q=p:p?.response?.data?.message?q=p.response.data.message:p?.message?q=p.message:q=r("An unknown error occurred","kivicare-clinic-management-system"),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(q,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const L=({title:q,fields:Q,errors:V,register:se})=>i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:q}),i.jsx("div",{className:"row gy-4",children:Q.map(G=>i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{htmlFor:G.key,className:"form-label",children:[G.label,G.required&&" *"]}),i.jsx("input",{type:"text",id:G.key,className:`form-control ${V[G.key]?"is-invalid":""}`,placeholder:G.placeholder,disabled:t,...se(G.key,{required:G.required?r(`${G.label} is required`,"kivicare-clinic-management-system"):!1,pattern:G.pattern})}),V[G.key]&&i.jsx("div",{className:"invalid-feedback",children:V[G.key].message})]})},G.key))})]})});return u?i.jsx(pP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:`app-configuration-setting${o?"":" p-4"}`,children:[!o&&i.jsx(di,{title:r("Available For Kivicare Flutter","kivicare-clinic-management-system"),text:r("This feature is available For Kivicare Flutter App users. Please upgrade to access this feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-flutter-app-clinic-patient-management-system/30970616"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("App Configurations","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#app-config",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),o&&u&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!u&&i.jsxs("form",{onSubmit:x(j),children:[i.jsx(L,{title:r("Firebase Cloud Messaging Configuration","kivicare-clinic-management-system"),fields:S,errors:y,register:g}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||!b,children:t?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):r("Save","kivicare-clinic-management-system")})})]}),o&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Push Notification Templates","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:R,children:r("Send Test Notification","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsx(kn,{data:T,columns:O,isLoading:N,moduleNamePlural:r("Templates","kivicare-clinic-management-system"),bordered:!0,responsive:!0,enableSelection:!1,pagination:null})})]})]})})},i_=()=>{const t=Ve(),{name:e}=Gt(),n=hn(),[s,a]=f.useState(!1),l=!e,[o,c]=f.useState(l?{user:null,recipients:[],title:"",body:"",data:{},enabled:!0}:null),[d,m]=f.useState({}),[u,p]=f.useState([]),[h,g]=f.useState(null),{data:x,isLoading:v,error:y}=phe(e,{enabled:!!e}),b=ghe({onSuccess:()=>{Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Template saved","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A?.message||r("Failed to save template","kivicare-clinic-management-system")})}}),{mutateAsync:k}=vhe({onSuccess:()=>{Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test notification sent successfully","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A?.message||r("Failed to send test notification","kivicare-clinic-management-system")})}});f.useEffect(()=>{if(x){const A=x.template||null;if(A){c({title:A.title||"",body:A.body||"",data:A.data||{},recipients:A.recipients||[],enabled:!!A.enabled});const P=x.dynamic_keys||x.dynamicKeys||[];p(Array.isArray(P)?P.map(E=>E.replace(/[{}]/g,"")):[])}}},[x]),f.useEffect(()=>{if(y){let A=y?.response?.data?.message||y?.message||r("Failed to load template","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const w=A=>{navigator.clipboard.writeText(`{{${A}}}`),g(A),setTimeout(()=>{g(P=>P===A?null:P)},1500)},S=[{value:"patient",label:r("Patient","kivicare-clinic-management-system")},{value:"doctor",label:r("Doctor","kivicare-clinic-management-system")},{value:"receptionist",label:r("Receptionist","kivicare-clinic-management-system")},{value:"clinic",label:r("Clinic Admin","kivicare-clinic-management-system")}],j=()=>{const A={};return l&&!o?.user?.value&&(A.user=r("Selection is required","kivicare-clinic-management-system")),o?.recipients?.length||(A.recipients=r("Recipients is required","kivicare-clinic-management-system")),o?.title?.trim()||(A.title=r("Title is required","kivicare-clinic-management-system")),o?.body?.trim()||(A.body=r("Body is required","kivicare-clinic-management-system")),m(A),Object.keys(A).length===0},T=async()=>{if(j()){a(!0);try{const A={name:e,title:o.title||"",body:o.body||"",data:o.data||{},recipients:o.recipients||[],enabled:!!o.enabled};await b.mutateAsync(A)}catch(A){console.error("Failed to save push template",A)}finally{a(!1)}}},N=async()=>{if(j()){a(!0);try{await k({userId:o.user?.value,recipients:Array.isArray(o.recipients)?o?.recipients?.[0]:o.recipients,title:o.title,body:o.body,data:o.data||"",enabled:!!o.enabled})}catch(A){console.error("Failed to send test notification",A)}finally{a(!1)}}},_=f.useCallback(async({page:A,per_page:P,search:E,recipient_type:M})=>{if(!M)return{data:[],pagination:{has_more:!1}};let R={page:A,per_page:P,search:E};M==="patient"?(R.dataType="staticData",R.staticDataType="patients"):M==="doctor"?(R.dataType="staticData",R.staticDataType="doctors"):M==="receptionist"?(R.dataType="staticData",R.staticDataType="users",R.role=oc()):M==="clinic"&&(R.dataType="clinicList");try{return await t.fetchQuery({queryKey:pt.list(R),queryFn:()=>Dt.getStaticData(R),staleTime:3e5})}catch(O){return console.error("Error loading test users:",O),{data:[],pagination:{has_more:!1}}}},[t]);return v&&!l?i.jsx(of,{}):!o&&!l?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"manage-push-notification-template",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title mb-0",children:l?r("Send Test Notification","kivicare-clinic-management-system"):`${r("Edit Push Template","kivicare-clinic-management-system")} : ${e}`}),i.jsx("div",{className:"d-flex gap-2",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>n(-1),children:r("Back","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[u.length>0&&i.jsxs("div",{className:"form-group mb-3",children:[i.jsx("label",{className:"form-label h6",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Ze,{placement:"top",overlay:P=>i.jsx(mt,{...P,children:h===A?r("Copied","kivicare-clinic-management-system"):r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>w(A),children:[A," ",i.jsx("i",{className:"ph ph-copy"})]})},A))})]}),i.jsxs("div",{className:"row gy-3",children:[l&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Recipients","kivicare-clinic-management-system")," *"]}),i.jsx(ct,{options:S,value:S.find(A=>o?.recipients?.[0]===A.value)||null,onChange:A=>c(P=>({...P,recipients:A?[A.value]:[],user:null})),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:A=>({...A,zIndex:9999})}}),d.recipients&&i.jsx("div",{className:"invalid-feedback d-block",children:d.recipients})]}),l&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[(()=>{const A=o?.recipients?.[0];return A==="patient"?r("Select Patient","kivicare-clinic-management-system"):A==="doctor"?r("Select Doctor","kivicare-clinic-management-system"):A==="receptionist"?r("Select Receptionist","kivicare-clinic-management-system"):A==="clinic"?r("Select Clinic","kivicare-clinic-management-system"):r("Select User","kivicare-clinic-management-system")})()," *"]}),i.jsx(dn,{id:"test-user",loadOptions:_,value:o?.user||null,onChange:A=>c(P=>({...P,user:A})),dependencies:{recipient_type:o?.recipients?.[0]},placeholder:r("Select search result","kivicare-clinic-management-system"),className:`react-select-box ${d.user?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!o?.recipients?.[0]},`test-user-${o?.recipients?.[0]}`),d.user&&i.jsx("div",{className:"invalid-feedback d-block",children:d.user})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Title","kivicare-clinic-management-system")," *"]}),i.jsx("input",{type:"text",className:`form-control ${d.title?"is-invalid":""}`,placeholder:r("Enter notification title","kivicare-clinic-management-system"),value:o?.title||"",onChange:A=>c(P=>({...P,title:A.target.value}))}),d.title&&i.jsx("div",{className:"invalid-feedback d-block",children:d.title})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[r("Body","kivicare-clinic-management-system")," *"]}),i.jsx("textarea",{className:`form-control ${d.body?"is-invalid":""}`,rows:4,placeholder:r("Enter notification body","kivicare-clinic-management-system"),value:o?.body||"",onChange:A=>c(P=>({...P,body:A.target.value}))}),d.body&&i.jsx("div",{className:"invalid-feedback d-block",children:d.body})]})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{className:"btn btn-sm btn-primary",onClick:l?N:T,disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l?r("Sending...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):l?r("Send Notification","kivicare-clinic-management-system"):r("Save Template","kivicare-clinic-management-system")})})]})},yhe=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{control:n,handleSubmit:s,watch:a,reset:l,errors:o}=en({defaultValues:{only_same_day_book:!1,post_book:"365",pre_book:"0",fileUploadEnabled:!1,emailReminder:!1,emailReminderHours:"24",smsReminder:!1,whatsappReminder:!1,appointmentDescription:!1,showPatientInfo:!1,cancellationBufferEnabled:!1,cancellationBufferHours:"365"}}),[c,d]=f.useState(!1),[m,u]=f.useState(""),p=a("only_same_day_book"),h=a("emailReminder"),g=a("smsReminder"),x=a("whatsappReminder"),v=a("cancellationBufferEnabled"),y=un("settings","appointment-setting"),{data:b,isLoading:k,error:w}=wn("settings","appointment-setting");f.useEffect(()=>{if(b){const T=P=>!!["true",!0,1,"1","yes","on"].includes(P),N=["only_same_day_book","fileUploadEnabled","emailReminder","smsReminder","whatsappReminder","appointmentDescription","showPatientInfo","cancellationBufferEnabled"],_=b.data||b,A={..._};N.forEach(P=>{A[P]=T(_[P])}),l(P=>({...P,...A}))}},[b,l]);const S=async T=>{const N=parseInt(T.post_book,10),_=parseInt(T.pre_book,10);if(!T.only_same_day_book&&!isNaN(_)&&!isNaN(N)&&_>N){u("Booking Close Before cannot be greater than Booking Open Before."),Xe.fire({icon:"error",title:r("Invalid Settings","kivicare-clinic-management-system"),text:r('"Booking Close Before (in Days)" cannot be greater than "Booking Open Before (in Days)".',"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}d(!0),u("");try{const P=await y.mutateAsync(T);if(d(!1),!P.status){u(P.message),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(P){d(!1),console.error("Failed to save settings:",P),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("An unexpected error occurred","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}};if(w){const T=typeof w=="string"?w:w?.response?.data?.message||w?.message||r("An unknown error occurred","kivicare-clinic-management-system");Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(T,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const j=({title:T,children:N,className:_=""})=>i.jsx("div",{className:`card ${_}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(T,"kivicare-clinic-management-system")}),N]})});return i.jsx("form",{onSubmit:s(S),className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Restrict Advance Appointment Booking","kivicare-clinic-management-system"),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/appointment-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),k&&i.jsx(kP,{}),!k&&i.jsxs(i.Fragment,{children:[i.jsxs(j,{children:[i.jsx(Ne,{name:"only_same_day_book",control:n,render:({field:T})=>i.jsx(on,{label:r("Allow Same Day Booking Only.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.only_same_day_book})}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Ne,{name:"post_book",control:n,render:({field:T})=>i.jsx(Qt,{type:"number",label:r("Booking Open Before (in Days)","kivicare-clinic-management-system"),placeholder:r("365","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.post_book,isDisable:p})})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Ne,{name:"pre_book",control:n,render:({field:T})=>i.jsx(Qt,{type:"number",label:r("Booking Close Before (in Days)","kivicare-clinic-management-system"),placeholder:r("0","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.pre_book,isDisable:p})})})]}),i.jsxs("span",{className:"font-size-14 mt-2",children:[i.jsxs("span",{className:"text-primary fw-medium",children:[r("Note","kivicare-clinic-management-system"),":"]})," ",r("For example, Booking Open Before: 60 days, Booking Close Before: 7 days, As consideration for the current date, The appointment booking opens 60 days ago and closed 7 days ago.","kivicare-clinic-management-system")]})]}),i.jsx(j,{children:i.jsx(Ne,{name:"fileUploadEnabled",control:n,render:({field:T})=>i.jsx(on,{label:r("Appointment File Upload Setting.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.fileUploadEnabled})})}),i.jsxs(j,{title:r("Appointment Reminder","kivicare-clinic-management-system"),children:[i.jsx(Ne,{name:"emailReminder",control:n,render:({field:T})=>i.jsx(on,{label:r("Email Reminder.","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,className:"mb-2",disabled:c,error:o?.emailReminder})}),e&&i.jsx(Ne,{name:"smsReminder",control:n,render:({field:T})=>{const N=b?.data?.isTwilioSmsConfigured??b?.isTwilioSmsConfigured;return i.jsx(on,{label:r("SMS Reminder (Twilio)","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c||!N,error:o?.smsReminder,className:"mb-2"})}}),e&&i.jsx(Ne,{name:"whatsappReminder",control:n,render:({field:T})=>{const N=b?.data?.isTwilioWhatsAppConfigured??b?.isTwilioWhatsAppConfigured;return i.jsxs("div",{children:[i.jsx(on,{label:r("WhatsApp Reminder (Twilio)","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c||!N,error:o?.whatsappReminder,className:"mb-2"}),i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:r("Note :","kivicare-clinic-management-system")})," ",r("When you configure your Twilio account for SMS or WhatsApp, you can enable SMS and WhatsApp reminders.","kivicare-clinic-management-system")]})]})}}),(h||g||x)&&i.jsx(Ne,{name:"emailReminderHours",control:n,render:({field:T})=>i.jsx(Qt,{type:"number",label:r("Select Hours","kivicare-clinic-management-system"),placeholder:r("365","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.emailReminderHours,className:"mb-2"})})]}),i.jsx(j,{title:r("Appointment Setting","kivicare-clinic-management-system"),children:i.jsx(Ne,{name:"appointmentDescription",control:n,render:({field:T})=>i.jsx(on,{label:r("Appointment Description","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.appointmentDescription,className:"mb-2"})})}),i.jsxs(j,{title:r("Appointment Cancellation Buffer","kivicare-clinic-management-system"),children:[i.jsx("span",{className:"font-size-14",children:r("To prevent appointments from getting canceled too close to the appointment time by patients, you can set a cancellation buffer.","kivicare-clinic-management-system")}),i.jsx(Ne,{name:"cancellationBufferEnabled",control:n,render:({field:T})=>i.jsx(on,{label:r("Enable Cancellation Buffer","kivicare-clinic-management-system"),checked:T.value,onChange:T.onChange,disabled:c,error:o?.cancellationBufferEnabled,className:"mt-3"})}),v&&i.jsx(Ne,{name:"cancellationBufferHours",control:n,render:({field:T})=>i.jsx(Qt,{type:"number",label:r("Select Hours","kivicare-clinic-management-system"),placeholder:r("e.g. 24","kivicare-clinic-management-system"),value:T.value,onChange:T.onChange,error:o?.cancellationBufferHours})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})})})},rb=(t,e=null,n=0)=>{let s=[];return t.forEach(a=>{const l=a.id||`kc-uid-${Math.random().toString(36).slice(2)}`,o=a.type||(a.childrens&&a.childrens.length>0?"parent":"route");s.push({...a,id:l,parentId:e,level:n,type:o,iconClass:a.iconClass||"",routeClass:a.routeClass||`custom_${l}`}),a.childrens&&a.childrens.length>0&&(s=s.concat(rb(a.childrens,l,n+1)))}),s},bhe=t=>{const e={};t.forEach(s=>{const{isDefault:a,level:l,parentId:o,id:c,...d}=s;e[s.id]={...d,type:s.type,label:s.label,link:s.link||"",iconClass:s.iconClass||"",routeClass:s.routeClass,childrens:[]}});const n=[];return t.forEach(s=>{s.parentId&&e[s.parentId]?e[s.parentId].childrens.push(e[s.id]):n.push(e[s.id])}),n},whe=t=>{const e=[];t.forEach(n=>{for(;e.length>0&&e[e.length-1].level>=n.level;)e.pop();n.parentId=e.length>0?e[e.length-1].id:null,e.push(n)})},aI=({item:t,onChange:e,onDelete:n})=>{const{attributes:s,listeners:a,setNodeRef:l,transform:o,transition:c,isDragging:d}=Hk({id:t.id}),m={transform:Ka.Transform.toString(o),transition:c,opacity:d?0:1,background:"transparent",paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},u=t.type==="group",p=t.isDefault;return i.jsx("div",{ref:l,style:m,...s,children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx("i",{className:"ph ph-hand-grabbing",style:{cursor:"grab"},...a})}),i.jsx("div",{className:"col-md-3",children:i.jsx("input",{type:"text",className:"form-control",value:t.label,onChange:h=>e(t.id,"label",h.target.value),style:{fontWeight:u?"bold":"normal"},disabled:p})}),i.jsx("div",{className:"col-md-4",children:!u&&i.jsx("input",{type:"text",className:"form-control",value:t.link,onChange:h=>e(t.id,"link",h.target.value),disabled:p})}),i.jsx("div",{className:"col-md-3",children:!u&&i.jsx("input",{type:"text",className:"form-control",placeholder:"ph ph-icon-name",value:t.iconClass,onChange:h=>e(t.id,"iconClass",h.target.value)})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:!p&&i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>n(t.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})})},khe=({allItems:t,onChange:e,onDelete:n,activeItem:s,activeSubtreeIds:a,placeholderIndex:l,placeholderLevel:o})=>{let c=t;s&&(c=c.filter(m=>m.id!==s.id&&!a.includes(m.id)));const d=c.map(m=>m.id);return i.jsx(qk,{items:d,strategy:ZP,children:c.reduce((m,u,p)=>(l===p&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},`placeholder-${p}`)),m.push(i.jsx("div",{style:{marginLeft:u.level*22},children:i.jsx(aI,{item:u,onChange:e,onDelete:n})},u.id)),l===c.length&&p===c.length-1&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},"placeholder-end")),m),[])})},jhe=()=>{const{isAddonActive:t}=ut(),e=t("kiviPro"),{data:n,isLoading:s}=wn("settings","sidebar-setting",{},{enabled:e}),a=un("settings","sidebar-setting"),{data:l}=_n(),o=l?.data?.hideUtilityLinks,[c,d]=f.useState([]),[m,u]=f.useState({}),[p,h]=f.useState({}),[g,x]=f.useState("administrator"),[v,y]=f.useState(!1),[b,k]=f.useState(null),[w,S]=f.useState(null),[j,T]=f.useState([]),[N,_]=f.useState(null),[A,P]=f.useState(null);f.useEffect(()=>{if(!n?.status||!n?.data?.data)return;const ie=Object.keys(n.data.data),W=ie.map(ue=>({id:ue,label:r(ue.replace("_"," ").replace(/\b\w/g,le=>le.toUpperCase()),"kivicare-clinic-management-system"),title:r(ue.replace("_"," ").replace(/\b\w/g,le=>le.toUpperCase()),"kivicare-clinic-management-system")}));d(W);const X={},J={};ie.forEach(ue=>{const le=n.data.data[ue].current,I=n.data.data[ue].default,ee=rb(le),K=rb(I),ne=new Set(K.map(oe=>oe.routeClass));X[ue]=ee.map(oe=>({...oe,isDefault:ne.has(oe.routeClass)})),J[ue]=K.map(oe=>({...oe,isDefault:!0}))}),u(X),h(J),x(ie[0]||"administrator")},[n]);const E=TP(Yh(HP),Yh(zP),Yh(Ik)),M=(ie,W,X)=>{u(J=>({...J,[g]:J[g].map(ue=>ue.id===ie?{...ue,[W]:X}:ue)}))},R=ie=>{u(W=>{const X=[...W[g]],J=X.findIndex(ee=>ee.id===ie);if(J===-1||X[J].isDefault)return W;const ue=X[J].level;let le=J+1;for(;le<X.length&&X[le].level>ue;)le++;const I=[...X.slice(0,J),...X.slice(le)];return{...W,[g]:I}})},O=()=>{const ie=`kc-uid-${Math.random().toString(36).slice(2)}`,W={id:ie,type:"group",label:"New Section",link:"",iconClass:"",routeClass:`custom_group_${ie}`,parentId:null,level:0,isDefault:!1};u(X=>({...X,[g]:[...X[g],W]}))},L=()=>{const ie=`kc-uid-${Math.random().toString(36).slice(2)}`,W={id:ie,type:"route",label:"New Item",link:"/",iconClass:"ph ph-question",routeClass:`custom_route_${ie}`,parentId:null,level:0,isDefault:!1};u(X=>({...X,[g]:[...X[g],W]}))},q=()=>{Xe.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Are you sure you want to reset to default positions? All customizations will be lost.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, reset it!","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel!","kivicare-clinic-management-system")}).then(ie=>{ie.isConfirmed&&(y(!0),a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{reset:!0,type:g}}).then(async W=>{W?.status?(u(X=>({...X,[g]:p[g]})),await Xe.fire({icon:"success",title:r("Reset successful!","kivicare-clinic-management-system")})):Xe.fire({icon:"error",title:r("Failed to reset","kivicare-clinic-management-system"),text:W?.message||"Unknown error"})}).catch(W=>{Xe.fire({icon:"error",title:r("Failed to reset","kivicare-clinic-management-system"),text:W.message})}).finally(()=>{y(!1)}))})},Q=ie=>{const W=ie.active.id,X=m[g].findIndex(I=>I.id===W),J=m[g][X];S(J);let ue=[],le=X+1;for(;le<m[g].length&&m[g][le].level>J.level;)ue.push(m[g][le].id),le++;T(ue),_(null),P(null)},V=(ie,W)=>{const{active:X,over:J}=ie;if(!J||X.id===J.id)return null;const ue=W.findIndex(de=>de.id===J.id);if(ue===-1)return null;const le=ie.active.rect.current.translated,I=ie.over.rect,ee=W[ue],K=le.top>I.top+I.height/2;let ne=ue+(K?1:0);const oe=le.left-I.left;let $=ee.level+Math.round(oe/22);$=Math.max(0,$);const te=ne>0?W[ne-1]:null,ae=ne<W.length?W[ne]:null;let Y=te?te.type==="group"?te.level:te.level+1:0,H=0;ae&&ae.level>Y&&(H=ae.level);let B=Math.max(H,Math.min($,Y));w.type==="group"&&(B=0);let re=null;if(B>0&&te){let de=te;for(;de&&de.level>=B;)de=W.find(xe=>xe.id===de.parentId);de&&de.level===B-1?re=de.id:(B=Y,re=te.parentId)}return{newIndex:ne,newDepth:B,newParentId:re}},se=ie=>{if(!w)return;const W=m[g].filter(J=>J.id!==w.id&&!j.includes(J.id)),X=V(ie,W);if(!X){_(null),P(null);return}_(X.newIndex),P(X.newDepth)},G=ie=>{if(!w)return;const W=m[g].filter(oe=>oe.id!==w.id&&!j.includes(oe.id)),X=V(ie,W);if(_(null),P(null),S(null),T([]),!X)return;const{newIndex:J,newDepth:ue,newParentId:le}=X,I={...w,level:ue,parentId:le},ee=m[g].filter(oe=>j.includes(oe.id));let K=[...W.slice(0,J),I,...ee,...W.slice(J)];whe(K),K=K.map(oe=>oe.isDefault&&oe.routeClass!=="patient_encounter_list"&&oe.routeClass!=="encounter_template"?{...oe,parentId:null,level:0}:oe);const ne=new Set(K.map(oe=>oe.parentId).filter(oe=>oe!==null));K.forEach(oe=>{ne.has(oe.id)?(oe.type==="route"||oe.type==="href")&&(oe.type="parent"):oe.type==="parent"&&!oe.isDefault&&(oe.type="route")}),u(oe=>({...oe,[g]:K}))},ge=async()=>{y(!0),k(null);try{const ie=bhe(m[g]),W=await a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{type:g,data:ie}});if(!W?.status)throw new Error(W?.message||"Save failed");await Xe.fire({icon:"success",title:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(ie){k(ie.message),Xe.fire({icon:"error",title:r("Failed to save settings","kivicare-clinic-management-system"),text:ie.message})}finally{y(!1)}};return s?i.jsx(NP,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:`sidebar-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Sidebar Settings","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sidebar-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:c.map(ie=>i.jsx("li",{className:"nav-item",children:i.jsx("button",{className:`nav-link ${g===ie.id?"active":""}`,onClick:()=>x(ie.id),children:ie.label})},ie.id))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-primary me-2",onClick:O,children:r("Add Section","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary me-2",onClick:L,children:r("Add Item","kivicare-clinic-management-system")})]})}),c.map(ie=>i.jsxs("div",{style:{display:g===ie.id?"block":"none"},children:[i.jsxs("div",{className:"sidebar-items bg-white",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1  d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Drag","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Label","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("URL","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Icon","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Action","kivicare-clinic-management-system")})})})]}),i.jsxs($k,{sensors:E,collisionDetection:AP,onDragStart:Q,onDragOver:se,onDragEnd:G,children:[i.jsx(khe,{allItems:m[ie.id]||[],onChange:M,onDelete:R,activeItem:w,activeSubtreeIds:j,placeholderIndex:N,placeholderLevel:A}),i.jsx(QP,{dropAnimation:null,children:w?i.jsx(aI,{item:w,onChange:()=>{},onDelete:()=>{}}):null})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:q,disabled:v,children:r("Reset to Default","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:ge,disabled:v,children:v?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})}),b&&i.jsx("div",{className:"alert alert-danger mt-3",children:b})]},ie.id))]})})})},Nhe=()=>{const{data:t,isLoading:e,refetch:n}=wn("settings","google-calendar-integration"),s=un("settings","google-calendar-integration/connect"),a=un("settings","google-calendar-integration/disconnect"),[l,o]=ze.useState(!1),c=t?.connected||!1;f.useEffect(()=>{const u=new URLSearchParams(window.location.search),p=window.location.hash;if(u.get("google_calendar_connected")==="1"&&Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Calendar connected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p),n()}),u.get("google_calendar_error")==="1"){const h=u.get("error_code")||"unknown";let g=r("An error occurred during Google Calendar connection","kivicare-clinic-management-system");switch(h){case"oauth_cancelled":g=r("Google Calendar connection was cancelled","kivicare-clinic-management-system");break;case"invalid_callback":g=r("Invalid callback parameters received","kivicare-clinic-management-system");break;case"invalid_state":g=r("Invalid authentication state","kivicare-clinic-management-system");break;case"state_mismatch":g=r("Authentication state verification failed","kivicare-clinic-management-system");break;case"auth_failed":g=r("Failed to obtain Google Calendar authorization","kivicare-clinic-management-system");break;case"processing_error":g=r("Error processing Google Calendar connection","kivicare-clinic-management-system");break;default:g=r("An unknown error occurred during Google Calendar connection","kivicare-clinic-management-system")}Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:g,confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+p)})}},[n]);const d=async()=>{o(!0);try{const u=await s.mutateAsync({});u.url?(sessionStorage.setItem("kc_oauth_in_progress","1"),window.location.href=u.url):Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to get authentication URL","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(u){console.error("Connection error:",u);let p=r("An error occurred during connection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:p,confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}},m=async()=>{o(!0);try{await a.mutateAsync({}),Xe.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Calendar disconnected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),n()}catch(u){console.error("Disconnection error:",u);let p=r("An error occurred during disconnection","kivicare-clinic-management-system");u?.message?p=u.message:u?.response?.data?.message&&(p=u.response.data.message),Xe.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:p,confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}};return f.useEffect(()=>{sessionStorage.removeItem("kc_oauth_in_progress")},[]),i.jsx("div",{className:"card mt-4 mx-auto",style:{maxWidth:900,borderRadius:8},children:i.jsxs("div",{className:"card-body py-4 px-5",children:[i.jsx("h4",{className:"mb-4",children:r("Google Calendar Integration","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"fs-5",children:c?i.jsxs("span",{className:"text-success",children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("You are connected with the google calender.","kivicare-clinic-management-system")]}):i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-calendar me-2"}),r("Please connect with your Google Account to get appointments in Google Calendar automatically.","kivicare-clinic-management-system")]})}),i.jsx("button",{className:`btn ${c?"btn-outline-danger":"btn-primary"}`,onClick:c?m:d,disabled:l||e,children:l?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Please wait...","kivicare-clinic-management-system")]}):i.jsx(i.Fragment,{children:c?r("Disconnect","kivicare-clinic-management-system"):r("Connect to Google","kivicare-clinic-management-system")})})]})]})})},kx=()=>{const t=Kn(),e=Gt(),n=t.pathname.includes("/add"),s=t.pathname.includes("/edit/");return n?i.jsx(Dm,{}):s?i.jsx(Dm,{sessionId:e.id}):i.jsx(Tk,{})},Che=[Gn({path:"/setting",title:"Setting",outlet:tie,meta:{description:"Setting",showInSidebar:!0},skeleton:cie,children:[We({path:"general-setting",component:Oie,title:"General Setting",index:!0,meta:{description:"General Setting",breadcrumb:"General Setting"},skeleton:uP}),We({path:"holidays",component:Jv,title:"Holidays",roles:["administrator","doctor","receptionist","clinic_admin"],index:!0,permissions:["clinic_schedule"],meta:{description:"Holidays",breadcrumb:"Holidays"},skeleton:die}),We({path:"holidays/add",component:Jv,title:"Add Holiday",props:{isAdding:!0},permissions:["clinic_schedule_add","clinic_schedule"],meta:{description:"Add a new Holiday",breadcrumb:"Add Holiday"}}),We({path:"holidays/edit/:id",component:Jv,title:"Edit Holiday",props:{isEditing:!0},permissions:["clinic_schedule_edit","clinic_schedule"],meta:{description:"Edit existing Holidays",breadcrumb:"Edit Holiday"}}),We({path:"doctor-session",component:kx,title:"setting/Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_list"],index:!0,meta:{description:"Doctor Session",breadcrumb:"Doctor Session"}}),We({path:"doctor-session/add",component:kx,title:"Add Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_add","doctor_session_list"],meta:{description:"Add new doctor session",breadcrumb:"Add Doctor Session"}}),We({path:"doctor-session/edit/:id",component:kx,title:"Edit Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_edit","doctor_session_list"],meta:{description:"Edit existing doctor session",breadcrumb:"Edit Doctor Session"}}),We({path:"configurations",component:Fie,title:"Configuration Setting",roles:["administrator"],index:!0,meta:{description:"Configuration Setting",breadcrumb:"Configuration Setting"},skeleton:hP}),We({path:"app-configuration",component:xhe,title:"App Configuration Setting",roles:["administrator"],index:!0,meta:{description:"App Configuration Setting",breadcrumb:"App Configuration Setting"},skeleton:pP}),We({path:"email-template",component:$ae,title:"Email Template Settting",index:!0,meta:{description:"Email Template Settting",breadcrumb:"Email Template Settting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"email-template/edit/:id",component:Hue,title:"Edit Email Template",props:{isEditing:!0},meta:{description:"Edit existing Email",breadcrumb:"Edit Email Template"}}),We({path:"email-template/test",component:zue,title:"Test Email"}),We({path:"push-template/test-notification",component:i_,title:"Send Test Notification",meta:{description:"Send test push notification",breadcrumb:"Send Test Notification"}}),We({path:"push-template/edit/:name",component:i_,title:"Edit Push Template",props:{isEditing:!0},meta:{description:"Edit existing Push Template",breadcrumb:"Edit Push Template"},skeleton:of}),We({path:"sms-whatsapp-template",component:Jue,title:"SMS-WhatsApp Template setting",index:!0,meta:{description:"SMS-WhatsApp Template setting",breadcrumb:"SMS-WhatsApp Template setting"}}),We({path:"sms-whatsapp-template/edit/:id",component:ehe,title:"SMS-WhatsApp Edit Template",index:!0,meta:{description:"SMS-WhatsApp edit Template",breadcrumb:"SMS-WhatsApp edit Template"}}),Gn({path:"webhooks",title:"WebHook setting",outlet:_ie,meta:{description:"WebHook setting",breadcrumb:"WebHook setting",hideSettingSidebar:!1},children:[We({path:"",element:i.jsx(pg,{to:"./configuration",replace:!0}),index:!0}),Gn({path:"configuration",title:"WebHook configuration",outlet:oie,meta:{description:"WebHook configuration",breadcrumb:"WebHook configuration",noTransitionAnimation:!0},children:[We({path:"",component:the,title:r("WebHooks","kivicare-clinic-management-system"),meta:{description:r("webhook","kivicare-clinic-management-system"),breadcrumb:r("WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:ihe,skeleton:CC,title:r("Add WebHook","kivicare-clinic-management-system"),meta:{description:r("Add new webhook","kivicare-clinic-management-system"),breadcrumb:r("Add WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}}),We({path:"edit/:id",component:she,skeleton:CC,title:r("Edit WebHook","kivicare-clinic-management-system"),meta:{description:r("Edit existing webhook","kivicare-clinic-management-system"),breadcrumb:r("Edit WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}})]}),We({path:"events-log",component:nhe,title:r("Events Log","kivicare-clinic-management-system"),meta:{description:r("Webhook events and logs","kivicare-clinic-management-system"),breadcrumb:r("Events Log","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:5,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"testing",component:ahe,title:r("Testing","kivicare-clinic-management-system"),meta:{description:r("Webhook testing tools","kivicare-clinic-management-system"),breadcrumb:r("Testing","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:Aie}),We({path:"oauth2/callback",component:rhe,title:r("OAuth2 Callback","kivicare-clinic-management-system"),meta:{description:r("OAuth2 authorization callback","kivicare-clinic-management-system"),breadcrumb:r("OAuth2 Callback","kivicare-clinic-management-system")}})]}),Gn({path:"custom-notification",title:"Custom Notification",outlet:lie,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},children:[We({path:"",component:Iae,title:"Custom Notification",index:!0,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:WC,skeleton:$y,title:"Create Notification Service",meta:{description:"Create new notification service",breadcrumb:"Create Service"}}),We({path:"edit/:id",component:WC,skeleton:$y,title:"Configure Notification Service",meta:{description:"Configure notification service settings",breadcrumb:"Configure Service"}}),We({path:"test/:id",component:Fae,title:"Test Notification Service",meta:{description:"Test notification service",breadcrumb:"Test Service"}}),We({path:"oauth2/callback",component:Lae,title:"OAuth2 Callback",meta:{description:"OAuth2 authorization callback",breadcrumb:"OAuth2 Callback"}})]}),Gn({path:"custom-form",title:"Custom Form setting",outlet:rie,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"},children:[We({path:"",component:$ie,skeleton:uie,title:"Custom Form setting",index:!0,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"}}),We({path:"add",component:UC,skeleton:By,title:"Add Custom Form",permissions:["custom_form_add","custom_form_list"],meta:{description:"Add new custom form",breadcrumb:"Add Custom Form",hideSettingSidebar:!0}}),We({path:"edit/:id",component:UC,skeleton:By,title:"Edit Custom Form",permissions:["custom_form_edit","custom_form_list"],meta:{description:"Edit existing custom form",breadcrumb:"Edit Custom Form",hideSettingSidebar:!0}})]}),We({path:"encounter-body-chart",component:Vue,title:"Encounter Body Chart setting",index:!0,meta:{description:"Encounter Body Chart setting",breadcrumb:"Encounter Body Chart setting"},skeleton:fP}),We({path:"patient-setting",component:Yue,title:"patient setting",index:!0,meta:{description:"patient setting",breadcrumb:"patient setting"},skeleton:CP}),We({path:"widget-setting",component:dhe,title:"Widget setting",index:!0,meta:{description:"Widget setting",breadcrumb:"Widget setting"},skeleton:vP}),We({path:"google-event-template",component:Uue,title:"Google Event template setting",index:!0,meta:{description:"Google Event template setting",breadcrumb:"Google Event template setting"},skeleton:xP}),We({path:"google-meet",component:Wue,title:"Google Meet Setting",roles:["administrator"],index:!0,meta:{description:"Google Meet Setting",breadcrumb:"Google Meet Setting"},skeleton:yP}),We({path:"google-meet-configuration",component:Kue,title:"Google Meet Configuration",roles:["doctor"],index:!0,meta:{description:"Google Meet Configuration",breadcrumb:"Google Meet Configuration"}}),We({path:"zoom-telemed",component:Tie,title:"Zoom Telemed setting",roles:["administrator"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"zoom-configuration",component:uhe,title:"Zoom Telemed setting",roles:["doctor"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"listings",component:bx,title:"listings setting",index:!0,permissions:["static_data_list"],meta:{description:"Listing setting",breadcrumb:"Listing setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})})}),We({path:"listings/add",component:bx,title:"Add Listing",permissions:["static_data_add","static_data_list"],meta:{description:"Add Listing",breadcrumb:"Add Listing"},skeleton:SC}),We({path:"listings/edit/:id",component:bx,title:"Edit Listing",permissions:["static_data_edit","static_data_list"],meta:{description:"Edit Listing",breadcrumb:"Edit Listing"},skeleton:SC}),We({path:"custom-field",component:tx,title:"Cusotm Field Setting",index:!0,permissions:["custom_field_list"],meta:{description:"Cusotm Field Setting",breadcrumb:"Cusotm Field Setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"custom-field/add",component:tx,title:"Add Custom Field",permissions:["custom_field_add","custom_field_list"],meta:{description:"Add new custom field",breadcrumb:"Add Custom Field"}}),We({path:"custom-field/edit/:id",component:tx,title:"Edit Custom Field",permissions:["custom_field_edit","custom_field_list"],meta:{description:"Edit existing custom field",breadcrumb:"Edit Custom Field"}}),We({path:"pro-settings",component:Xue,title:"Pro Setting",index:!0,meta:{description:"Pro Setting",breadcrumb:"Pro Setting"},skeleton:bP}),We({path:"payments",component:Que,title:"Payment Methods",index:!0,meta:{description:"List of all payment methods",breadcrumb:"Payment Methods"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"payment/:gateway",component:iie,title:"Update Payment Setting",meta:{description:"Update payment method by key",breadcrumb:"Update"}}),We({path:"appointment-settings",component:yhe,title:"Appointment settings",index:!0,skeleton:kP,meta:{description:"Appointment settings"}}),We({path:"permission",component:Zue,title:"Permission Setting",index:!0,skeleton:jP,meta:{description:"Permission Setting"}}),We({path:"sidebar-settings",component:jhe,title:"Sidebar Setting",index:!0,skeleton:NP,meta:{description:"Sidebar Setting"}}),We({path:"google-calendar-integration",component:Nhe,title:"Google Calendar Integration",index:!0,meta:{description:"Google Calendar Integration"}})]})],She=()=>{const t=Kn();return i.jsxs("div",{className:"billings-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/billings"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},_he=()=>{const{getCurrencyDetail:t,isAddonActive:e,hasCapability:n}=ut(),s=e("kiviPro"),a=Xn(),l=Jn(),o=Li(),{data:c,isLoading:d}=Xz({enabled:s}),m=c?.data?.encounters||[],[u,p]=f.useState(""),h=f.useMemo(()=>m.find(B=>String(B.id)===String(u)),[m,u]),[g,x]=f.useState(!1),v=t(),y=v.prefix,b=v.postfix,[k,w]=f.useState({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),[S,j]=f.useState(!1),[T,N]=f.useState(!1),[_,A]=f.useState(null),[P,E]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[M,R]=f.useState(!1),{data:O,isLoading:L}=Pw(_,{enabled:!!_&&T});f.useEffect(()=>{O&&E(O?.data)},[O]);const q=B=>{A(B.id),N(!0)},Q=()=>{j(!1),p("")},V=()=>{N(!1),A(null),R(!1)},se=f.useMemo(()=>Object.fromEntries(Object.entries(k).filter(([B,re])=>re!==""&&re!==null&&re!==void 0)),[k]),{data:G,isLoading:ge,error:ie}=Gz(se,{enabled:s}),W=tV(),X=G?.data?.billings||[],J=G?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ue=[{value:"Paid",label:r("Paid","kivicare-clinic-management-system")},{value:"Unpaid",label:r("Unpaid","kivicare-clinic-management-system")}],[le,I]=f.useState(""),ee=Za(le,500);f.useEffect(()=>{w(B=>({...B,search:ee,page:1}))},[ee]);const K=B=>{I(B.target.value)},ne=async B=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const re={format:B,...se},xe=(await W.mutateAsync(re))?.data?.bills||[];if(!xe.length){wt({icon:"ph-info",iconColor:"text-info",bgIconColor:"bg-info",title:r("No data","kivicare-clinic-management-system"),text:r("No billing records found for export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const U=new Date().toISOString().split("T")[0],me=xe.map(ye=>({id:ye.id,total_amount:ye.total_amount,discount:ye.discount,actual_amount:ye.actual_amount,encounter_id:ye.encounter_id,encounter_date:ye.encounter_date,clinic_id:ye.clinic_id,doctor_id:ye.doctor_id,patient_id:ye.patient_id,appointment_id:ye.appointment_id,status:ye.status,doctor_name:ye.doctor_name,patient_name:ye.patient_name,clinic_name:ye.clinic_name,service_name:ye.service_name}));switch(B){case"csv":ps(me,`bills-${U}.csv`);break;case"xls":gs(me,`bills-${U}.xls`);break;case"pdf":fs(me,`bills-${U}.pdf`,"Billing Records");break;default:throw new Error("Invalid export format")}Wi(),Te.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(re){console.error("Export error:",re),rt({title:r("Error!","kivicare-clinic-management-system"),text:re.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},oe=Ln(),D=f.useMemo(()=>[oe.accessor("invoiceId",{id:"invoiceId",header:()=>r("Bill ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("encounter_id",{id:"encounter_id",header:()=>r("Encounter ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),...o?[]:[oe.accessor("doctor.name",{id:"doctorName",header:()=>r("Doctor","kivicare-clinic-management-system"),cell:B=>i.jsx(cn,{profileUrl:B.row.original.doctor.doctor_image_url,name:B.getValue(),email:B.row.original.doctor.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})],...!a&&!l?[oe.accessor("clinic.name",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:B=>i.jsx(cn,{profileUrl:B.row.original.clinic.clinic_image_url,name:B.getValue(),email:B.row.original.clinic.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})]:[],oe.accessor("patient.name",{id:"patientName",header:()=>r("Patient","kivicare-clinic-management-system"),cell:B=>i.jsx(cn,{profileUrl:B.row.original.patient.patient_image_url,name:B.getValue(),email:B.row.original.patient.email,fallbackText:B.getValue()?.charAt(0)||"P",variant:"primary",size:"sm"})}),oe.accessor("services",{header:()=>r("Services","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("total_amount",{header:()=>r("Total","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("discount",{header:()=>r("Discount","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("actual_amount",{header:()=>r("Amount Due","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("date",{header:()=>r("Date","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:B=>{const re=B.getValue(),de=re==="paid"?"Paid":"Unpaid",xe=re==="paid"?"bg-success-subtle text-success":"bg-danger-subtle text-danger";return i.jsx("span",{className:`badge ${xe} px-3 py-2`,children:de})}}),oe.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:B})=>{const re=de=>xe=>i.jsx(mt,{id:`tooltip-${B.original.id}-${de}`,...xe,children:de});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n("patient_bill_view")&&i.jsx(Ze,{placement:"top",overlay:re(r("Bill Detail","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/billings/view/${B.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),n("patient_bill_edit")&&B.original.status!=="paid"&&i.jsx(Ze,{placement:"top",overlay:re(r("Edit","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>q(B.original),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),n("patient_encounter_view")&&i.jsx(Ze,{placement:"top",overlay:re(r("Encounter Details","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${B.original.encounter_id}/clinical-details`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-gauge"})})})]})}})],[n]),$=B=>{const re=B[0];w(re?de=>({...de,page:1,orderBy:re.id,order:re.desc?"desc":"asc"}):de=>({...de,page:1,orderBy:"",order:""}))},te=()=>{if(!u){rt({title:r("Error","kivicare-clinic-management-system"),text:r("Please select an encounter to add a bill.","kivicare-clinic-management-system")});return}E({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{id:h.clinicId,name:h.clinicName,email:"",clinic_image_url:h.clinic_image_url||""},doctor:{id:h.doctorId,name:h.doctorName,email:"",doctor_image_url:h.doctor_image_url||""},patient:{id:h.patientId,name:h.patientName,email:"",patient_image_url:h.patient_image_url||""},patientEncounter:{id:h.id,appointmentId:h.appointmentId||null},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),j(!1),p(""),N(!0)},ae=[{type:"number",name:"id",label:r("Bill ID","kivicare-clinic-management-system"),placeholder:r("Enter Bill ID","kivicare-clinic-management-system")},{type:"number",name:"encounter_id",label:r("Encounter ID","kivicare-clinic-management-system"),placeholder:r("Enter Encounter ID","kivicare-clinic-management-system")},{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...!a&&!l?[{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r("Enter Clinic Name","kivicare-clinic-management-system"),min:1}]:[],{type:"text",name:"patientName",label:r("Patient Name","kivicare-clinic-management-system"),placeholder:r("Enter Patient Name","kivicare-clinic-management-system"),min:1},{type:"text",name:"serviceName",label:r("Service Name","kivicare-clinic-management-system"),placeholder:r("Enter Service Name","kivicare-clinic-management-system"),min:1},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),options:ue,placeholder:r("Select status","kivicare-clinic-management-system")}],Y=f.useMemo(()=>["search","status","date_from","date_to","id","encounter_id","doctorName","clinicName","patientName","serviceName"].some(re=>{const de=k[re];return typeof de=="object"&&de!==null?de.value!==void 0&&de.value!=="":de!=null&&de!==""}),[k]),H=f.useRef(null);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4"}),i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Billing Records","kivicare-clinic-management-system")})}),i.jsxs("div",{className:" d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[n("patient_bill_add")&&i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Bill","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>x(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Un,{ref:H,onChange:B=>{if(B.length===2){const[re,de]=B;w(xe=>({...xe,date_from:re.toISOString().split("T")[0],date_to:de.toISOString().split("T")[0],page:1}))}},options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control w-auto",placeholder:r("Select date range","kivicare-clinic-management-system")}),k.date_from&&k.date_to&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{w(B=>({...B,date_from:"",date_to:"",page:1})),H.current&&H.current.flatpickr&&H.current.flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx("div",{children:i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ue,onChange:B=>w(re=>({...re,status:B?B.value:"",page:1})),isClearable:!0,styles:{menuPortal:B=>({...B,zIndex:9999})}})})]}),i.jsx("div",{className:"table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search...","kivicare-clinic-management-system"),value:le,onChange:K})]}),n("patient_bill_export")&&s&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ne("csv"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ne("xls"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Ze,{placement:"top",overlay:i.jsx(mt,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>ne("pdf"),disabled:W.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})]}),i.jsx(kn,{data:X,columns:D,isLoading:ge,error:ie,currentPage:J.currentPage,perPage:J.perPage,totalItems:J.total,lastPage:J.lastPage,onPageChange:B=>w(re=>({...re,page:B})),onPerPageChange:B=>w(re=>({...re,perPage:B,page:1})),onSortingChange:$,enableSelection:!1,moduleNamePlural:"Billing records"}),i.jsx(Mw,{show:T,onHide:V,editFormData:P,setEditFormData:E,showAddServiceItemForm:M,setShowAddServiceItemForm:R,editBillId:_,handleCloseEditModal:V}),i.jsxs(lt,{show:S,onHide:Q,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Add New Bill","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{className:"p-0",children:i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-2",children:[i.jsxs("label",{htmlFor:"select_type",className:"form-label",children:[r("Select Encounter ID","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ct,{id:"select_type",className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Select Encounter","kivicare-clinic-management-system"),isLoading:d,options:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})),value:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})).find(B=>String(B.value)===String(u))||null,onChange:B=>p(B?B.value:""),styles:{menuPortal:B=>({...B,zIndex:9999})},isClearable:!0})]}),h&&i.jsxs(i.Fragment,{children:[i.jsx("h6",{className:"font-size-14",children:r("Encounter Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.encounterDate?new Date(h.encounterDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Patient Name","kivicare-clinic-management-system"),":"]}),i.jsx(cn,{profileUrl:h.patient_image_url,name:h.patientName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Doctor Name","kivicare-clinic-management-system"),":"]}),i.jsx(cn,{profileUrl:h.doctor_image_url,name:h.doctorName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap",children:[i.jsxs("span",{className:"font-size-14",children:[r("Clinic Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:h.clinicName||"-"})]})]})]})]})}),i.jsxs(lt.Footer,{className:"gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:Q,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:te,children:r("Generate","kivicare-clinic-management-system")})]})]}),i.jsx(na,{show:g,onHide:()=>x(!1),queryParams:k,onApplyFilters:B=>{w(re=>({...re,...B,page:1})),x(!1)},onResetFilters:()=>{w({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),x(!1)},title:r("Filters","kivicare-clinic-management-system"),hasAppliedFilters:Y,fields:ae}),!s&&i.jsx(di,{text:r("Bill module is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},Ehe=[Gn({path:"/billings",title:"Billings",outlet:She,permissions:["patient_bill_list"],module:"billing",meta:{description:"Billing management system",icon:"receipt",showInSidebar:!0},children:[We({path:"",component:_he,title:"All Billings",index:!0,permissions:["patient_bill_list"],module:"billing",meta:{description:"List of all billings",breadcrumb:"All Billings"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"view/:id",component:oP,title:"Billing Details",index:!0,permissions:["patient_bill_view"],module:"billing",meta:{description:"Details of a specific billing",breadcrumb:"Billing Details"},skeleton:lP})]})],The=()=>{const t=Kn();return i.jsxs("div",{className:"doctor-session-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(Si,{}),i.jsx("div",{children:t.pathname!=="/doctor-session"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(Ji,{})]})},Ahe=[Gn({path:"/doctor-session",title:"Doctor Sessions",outlet:The,permissions:["doctor_session_list"],meta:{description:"Manage doctor sessions",icon:"calendar",showInSidebar:!0,section:"management"},children:[We({path:"",component:Tk,title:"Sessions",index:!0,permissions:["doctor_session_list"],meta:{description:"List of all doctor sessions",breadcrumb:"All Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(Sn,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Dm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create"},permissions:["doctor_session_add"],skeleton:eg,meta:{description:"Add a new doctor session",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Dm,title:"Edit Doctor Session",props:{isEditing:!0,mode:"edit"},permissions:["doctor_session_edit"],skeleton:eg,meta:{description:"Edit doctor session",breadcrumb:"Edit"}})]})],rI=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx(bo,{items:["50px","80px"]}),i.jsx(C,{width:"120px",height:"1.125rem",className:"mt-2"})]})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(C,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs(gt,{children:[i.jsx(C,{width:"180px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"200px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs(gt,{children:[i.jsx(C,{width:"200px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs(gt,{children:[i.jsx(C,{width:"140px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"300px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(C,{width:"180px",height:"1.125rem"}),i.jsx(C,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"}),i.jsx(C,{width:"60px",height:"0.875rem"})]})]})})]})})]})]}),Zo={getReportInitialData:()=>ve({endpoint:"reports/initial-data",method:"GET"}),getClinicRevenueOverall:(t={})=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall params:",t),ve({endpoint:"reports/clinic-revenue-overall",method:"GET",data:t}).then(e=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall response:",e),e))),getClinicRevenueDetail:(t={})=>ve({endpoint:"reports/clinic-revenue-detail",method:"GET",data:t}),getDoctorRevenue:(t={})=>ve({endpoint:"reports/doctor-revenue",method:"GET",data:t}),getClinicAppointmentCount:(t={})=>ve({endpoint:"reports/clinic-appointment-count",method:"GET",data:t}),getDoctorAppointmentCount:(t={})=>ve({endpoint:"reports/doctor-appointment-count",method:"GET",data:t})};Qm.register(Zq,e9,Pq,vT,Bq,jT,bT);const s_=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"320px",minHeight:"320px"},children:i.jsx("p",{className:"text-muted",children:r("No data available for the selected period.","kivicare-clinic-management-system")})}),Dhe={id:"doughnutCenterText",beforeDraw:({config:t,chartArea:e,ctx:n})=>{const{type:s,options:{plugins:{centerText:a}={}}}=t;if(s!=="doughnut"||!a?.display||!a?.text)return;const{top:l,left:o,width:c,height:d}=e,m=o+c/2,u=l+d/2;n.save(),n.font="1rem Inter, sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(a.label,m,u-12),n.fillText(a.text,m,u+10),n.restore()}},Rhe=t=>{const e=t?.data?.datasets;return e?.length?e.some(n=>n.data.some(s=>s>0)):!1},Id=({title:t,chartType:e="bar",queryKey:n,queryFn:s,filters:a,enabled:l=!0,colors:o,selectOptions:c,selectValue:d,onSelectChange:m,initialData:u})=>{const p=f.useRef();f.useEffect(()=>()=>{p.current&&p.current.destroy()},[]);const h=T=>{if(!p.current)return;const N=p.current,_=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();if(T==="png"||T==="jpeg"){const A=document.createElement("a");A.download=`${_}.${T}`,A.href=N.toBase64Image(`image/${T}`),A.click()}else if(T==="csv"){const A=N.data;let P;e==="doughnut"?(P=r("Clinic","kivicare-clinic-management-system")+","+r("Revenue","kivicare-clinic-management-system")+`
`,A.labels.forEach((R,O)=>{P+=`"${R}",${A.datasets[0].data[O]||0}
`})):(P=(a.month==="all"?r("Month","kivicare-clinic-management-system"):r("Day","kivicare-clinic-management-system"))+","+A.datasets.map(O=>`"${O.label||"Dataset"}"`).join(",")+`
`,A.labels.forEach((O,L)=>{P+=`"${O}",`+A.datasets.map(q=>q.data[L]||0).join(",")+`
`}));const E=new Blob([P],{type:"text/csv"}),M=document.createElement("a");M.download=`${_}.csv`,M.href=URL.createObjectURL(E),M.click()}},g=[{value:"png",label:r("PNG","kivicare-clinic-management-system")},{value:"jpeg",label:r("JPEG","kivicare-clinic-management-system")},{value:"csv",label:r("CSV","kivicare-clinic-management-system")}],{data:x,isFetching:v}=ft({queryKey:n,queryFn:()=>s(a),enabled:l,staleTime:300*1e3}),y=f.useMemo(()=>{if(e!=="doughnut")return"";const T=x?.data?.datasets?.[0]?.data?.reduce((P,E)=>P+E,0)||0,N=u?.clinic_currency?.prefix||"",_=u?.clinic_currency?.postfix||"",A=T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${N}${A}${_}`},[x,e,u]),b=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{position:"bottom"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0},suggestedMax:5}}}),[]),k=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,cutout:"70%",plugins:{legend:{position:"bottom"},title:{display:!1},centerText:{display:!0,text:y,label:r("Total","kivicare-clinic-management-system")}}}),[y]),w=(T,N)=>({labels:T?.data?.labels||[],datasets:(T?.data?.datasets||[]).map((_,A)=>({..._,backgroundColor:N?.[A%N.length]||"#4874dc"}))}),S=f.useMemo(()=>{const T=x?.data?.datasets?.[0]?.data?.length>0;return{labels:T?x.data.labels:[],datasets:[{label:t,data:T?x.data.datasets[0].data:[],backgroundColor:o||[],hoverOffset:4}]}},[x,o,t]),j=()=>{const T=JSON.stringify(n);return e==="doughnut"?S.datasets[0].data.length?i.jsx(ET,{ref:p,options:k,data:S,plugins:[Dhe]},T):i.jsx(s_,{}):Rhe(x)?i.jsx(o9,{ref:p,options:b,data:w(x,o)},T):i.jsx(s_,{})};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"m-0",children:t}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{options:g,onChange:T=>h(T.value),placeholder:r("Export","kivicare-clinic-management-system"),styles:{container:T=>({...T,minWidth:"80px"})},className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1}),c&&i.jsx(ct,{options:c,value:c.find(T=>T.value===d),onChange:T=>m(T.value),className:"react-select-box",classNamePrefix:"react-select",styles:{container:T=>({...T,minWidth:"100px"}),menuPortal:T=>({...T,zIndex:9999})}})]})]}),i.jsx("div",{className:"position-relative",children:i.jsx("div",{style:{height:320},children:v?e==="doughnut"?i.jsx("div",{className:"col-lg-12",children:i.jsxs(gt,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(C,{width:"200px",height:"160px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Zd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(C,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(C,{width:"100px",height:"0.875rem"}),i.jsx(C,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}):i.jsx("div",{className:"col-md-12",children:i.jsxs(gt,{children:[i.jsx("div",{className:"chart-container",children:i.jsx(C,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(C,{width:"80px",height:"0.875rem"}),i.jsx(C,{width:"80px",height:"0.875rem"})]})]})}):j()})})]})})},Od=(t,e)=>["reports",t,e],Phe=()=>{const t=new Date;return{year:t.getFullYear().toString(),monthValue:`${t.getMonth()+1}`.padStart(2,"0"),monthLabel:r(t.toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}};function Mhe(){const{isAddonActive:t,userRole:e}=ut(),n=t("kiviPro"),[s,a]=f.useState(()=>{const{year:j,monthValue:T,monthLabel:N}=Phe();return{clinic_id:{id:"all",label:r("All Clinics","kivicare-clinic-management-system")},doctor_id:{id:"all",label:r("All Doctors","kivicare-clinic-management-system")},month:{value:T,label:N},year:{value:j,label:j}}}),[l,o]=f.useState("all"),[c,d]=f.useState("all"),{data:m,isLoading:u}=ft({queryKey:["reports","initialData"],queryFn:Zo.getReportInitialData,enabled:n}),{data:p,isLoading:h}=qg({enabled:n}),{data:g,isLoading:x}=IA(s.clinic_id?.id,{enabled:n}),v=f.useMemo(()=>[{id:"all",label:r("All Clinics","kivicare-clinic-management-system")},...p?.data||[]],[p]),y=f.useMemo(()=>[{id:"all",label:r("All Doctors","kivicare-clinic-management-system")},...g?.data||[]],[g]),b=f.useMemo(()=>Array.from({length:new Date().getFullYear()-2019},(j,T)=>{const N=(new Date().getFullYear()-T).toString();return{value:N,label:N}}),[]),k=f.useMemo(()=>[{value:"all",label:r("All Months","kivicare-clinic-management-system")},...Array.from({length:12},(j,T)=>({value:(T+1).toString().padStart(2,"0"),label:r(new Date(0,T).toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}))],[]),w=f.useMemo(()=>[{value:"all",label:r("All","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")},{value:"0",label:r("Completed","kivicare-clinic-management-system")},{value:"3",label:r("Check-in","kivicare-clinic-management-system")},{value:"4",label:r("Cancelled","kivicare-clinic-management-system")}],[]),S=f.useCallback((j,T)=>{a(N=>({...N,[j]:T}))},[]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb mb-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(ht,{to:"/",children:r("Home","kivicare-clinic-management-system")})}),i.jsx("li",{className:"breadcrumb-item active",children:r("Reports","kivicare-clinic-management-system")})]})}),i.jsx("h6",{className:"m-0 mt-2",children:r("Reports","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"position-relative",children:[u&&i.jsx(rI,{}),!n&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),text:r("Reports module is available only in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[e==="administrator"&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{placeholder:r("Select Clinic","kivicare-clinic-management-system"),options:v,value:s.clinic_id,onChange:j=>S("clinic_id",j),getOptionValue:j=>j.id,isLoading:h,isDisabled:!n,isClearable:!0,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),["administrator","kivicare_clinic_admin"].includes(e)&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{placeholder:r("Select Doctor","kivicare-clinic-management-system"),options:y,value:s.doctor_id,onChange:j=>S("doctor_id",j),getOptionValue:j=>j.id,isLoading:x,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",isClearable:!0,styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{options:k,value:s.month,onChange:j=>S("month",j),getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{options:b,value:s.year,onChange:j=>S("year",j),styles:{container:j=>({...j,minWidth:"100px"}),menuPortal:j=>({...j,zIndex:9999})},getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select"})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-revenue-overall",title:r("Clinic Revenue (Overall)","kivicare-clinic-management-system"),chartType:"doughnut",queryKey:Od("clinicRevenueOverall",j),queryFn:Zo.getClinicRevenueOverall,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-8",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-revenue-detail",title:r("Clinic Revenue (Detail)","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("clinicRevenueDetail",j),queryFn:Zo.getClinicRevenueDetail,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors})})()}),i.jsx("div",{className:"col-lg-12",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Id,{id:"doctor-revenue",title:r("Doctor Revenue","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("doctorRevenue",j),queryFn:Zo.getDoctorRevenue,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:l,appointment_status_doctor:"all"};return i.jsx(Id,{id:"clinic-appointment-count",title:r("Clinic Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("clinicAppointmentCount",j),queryFn:Zo.getClinicAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,selectOptions:w,selectValue:l,onSelectChange:o})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:c};return i.jsx(Id,{id:"doctor-appointment-count",title:r("Doctor Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Od("doctorAppointmentCount",j),queryFn:Zo.getDoctorAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors,selectOptions:w,selectValue:c,onSelectChange:d})})()})]})})]})]})}const Ihe=[We({path:"/clinic-revenue-reports",title:r("Reports","kivicare-clinic-management-system"),component:Mhe,roles:["administrator","clinic_admin"],meta:{description:r("Access various clinic and doctor reports and analytics.","kivicare-clinic-management-system"),icon:"ph ph-chart-line",showInSidebar:!0,section:"Financial"},skeleton:rI})],Ohe=()=>{const t=Kn(),e=hn(),[n,s]=f.useState({text:"",type:""}),a=bI();f.useEffect(()=>{t.state?.message&&s(t.state.message)},[t.state]),f.useEffect(()=>{a.isSuccess&&a.data&&(a.data.data?.nonce&&(window.kc_frontend||(window.kc_frontend={}),window.kc_frontend.nonce=a.data.data.nonce),e("/dashboard",{replace:!0}))},[a.isSuccess,a.data,e]),f.useEffect(()=>{if(a.isError){const u=a.error?.message||r("Login failed. Please try again.","kivicare-clinic-management-system");s({text:u,type:"error"})}},[a.isError,a.error]);const{register:l,handleSubmit:o,formState:{errors:c},reset:d}=en(),m=u=>{s({text:"",type:""}),a.mutate(u)};return i.jsx("div",{className:"container",children:i.jsx("div",{className:"row justify-content-center align-items-center min-vh-100",children:i.jsx("div",{className:"col-4",children:i.jsxs("div",{className:"kc-register-login-form",children:[n.text&&i.jsx("div",{className:`alert ${n.type==="success"?"alert-success":"alert-danger"} mb-4`,dangerouslySetInnerHTML:{__html:n.text}}),i.jsx("div",{className:"card p-0 mb-0",children:i.jsxs("div",{className:"card-body auth-card",children:[i.jsx("div",{className:"logo-img text-center mb-4",children:i.jsx("img",{src:window.kc_frontend?.site_logo||(window.kc_frontend?.loader_image?window.kc_frontend.loader_image.replace("loader.gif","logo.png"):""),alt:"KiviCare",height:"45",className:"logo-normal"})}),i.jsxs("form",{className:"kc-login-form",onSubmit:o(m),children:[i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-username",children:r("Username","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"login-username",className:`form-control ${c.username?"is-invalid":""}`,placeholder:"username@example.com",...l("username",{required:r("Username is required","kivicare-clinic-management-system")})}),c.username&&i.jsx("div",{className:"invalid-feedback",children:c.username.message})]}),i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-password",children:r("Password","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",id:"login-password",className:`form-control ${c.password?"is-invalid":""}`,placeholder:"********",...l("password",{required:r("Password is required","kivicare-clinic-management-system")})}),c.password&&i.jsx("div",{className:"invalid-feedback",children:c.password.message})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"remember-me",...l("rememberMe")}),i.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:r("Remember Me","kivicare-clinic-management-system")})]}),i.jsx("a",{href:`${window.kc_frontend?.home_url}/wp-login.php?action=lostpassword`,className:"forgot-pwd fw-semibold fst-italic",children:r("Forgot Password?","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:a.isPending,children:i.jsx("span",{className:"text d-inline-block align-middle text-uppercase",children:a.isPending?r("Loading...","kivicare-clinic-management-system"):r("Login","kivicare-clinic-management-system")})})})]})]})})]})})})})};function lI(){const t=hn(),[e,n]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,a]=f.useState(!1),[l,o]=f.useState({type:"",text:""}),[c,d]=f.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),m=h=>{n({...e,[h.target.name]:h.target.value}),l.text&&o({type:"",text:""})},u=h=>{d({...c,[h]:!c[h]})},p=async()=>{if(!e.currentPassword){o({type:"danger",text:r("Current password is required","kivicare-clinic-management-system")});return}if(!e.newPassword){o({type:"danger",text:r("New password is required","kivicare-clinic-management-system")});return}if(!e.confirmPassword){o({type:"danger",text:r("Confirm password is required","kivicare-clinic-management-system")});return}if(e.newPassword!==e.confirmPassword){o({type:"danger",text:r("New password and confirm password do not match","kivicare-clinic-management-system")});return}if(e.currentPassword===e.newPassword){o({type:"danger",text:r("Old and new password are same","kivicare-clinic-management-system")});return}if(e.newPassword.length<4){o({type:"danger",text:r("New password must be at least 4 characters long","kivicare-clinic-management-system")});return}a(!0),o({type:"",text:""});try{const h=await wI.changePassword(e);h.status?(o({type:"success",text:r("Password changed successfully","kivicare-clinic-management-system")}),n({currentPassword:"",newPassword:"",confirmPassword:""})):h.message&&h.message.includes("current password")?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):h.message&&h.message.includes("400")?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:h.message||r("Failed to change password","kivicare-clinic-management-system")})}catch(h){h.response&&h.response.status===400?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:r("An error occurred while changing password","kivicare-clinic-management-system")})}finally{a(!1)}};return i.jsxs("div",{children:[i.jsx("h6",{className:"mb-4",children:"Change Password"}),l.text&&i.jsx(dO,{variant:l.type,className:"mb-3",children:l.text}),i.jsxs(Mt,{children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("Current password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.currentPassword?"text":"password",name:"currentPassword",placeholder:r("Enter your old password","kivicare-clinic-management-system"),value:e.currentPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("currentPassword"),children:c.currentPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("New password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.newPassword?"text":"password",name:"newPassword",placeholder:r("Enter your new password","kivicare-clinic-management-system"),value:e.newPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("newPassword"),children:c.newPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("Confirm password*","kivicare-clinic-management-system")}),i.jsxs(Qd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.confirmPassword?"text":"password",name:"confirmPassword",placeholder:r("Enter your confirm password","kivicare-clinic-management-system"),value:e.confirmPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("confirmPassword"),children:c.confirmPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]})]})})}),i.jsxs("div",{className:"text-end",children:[i.jsx(Xt,{variant:"secondary",onClick:()=>t(-1),className:"btn btn-secondary me-2",disabled:s,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:p,className:"btn btn-primary",disabled:s,children:s?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})]})}const Fhe=[We({path:"/login",component:Ohe,title:"Login",exact:!0,meta:{description:"User login page",requiresAuth:!1,showInSidebar:!1}}),We({path:"/change-password",component:lI,title:"Change Password",permissions:["change_password"],meta:{description:"User change password page",breadcrumb:"Change Password",showInSidebar:!1}})],Lhe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>xte),void 0,import.meta.url)),$he=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>Vte),void 0,import.meta.url)),Bhe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>Pne),void 0,import.meta.url)),qhe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>ute),void 0,import.meta.url)),Hhe=()=>{const{userRole:t,isLoading:e}=ut();switch(t){case"kiviCare_patient":return i.jsx(Lhe,{isProfile:!0,isEditing:!0});case"kiviCare_doctor":return i.jsx($he,{isProfile:!0,isEditing:!0});case"kiviCare_receptionist":return i.jsx(Bhe,{isProfile:!0,isEditing:!0});case"administrator":case"kiviCare_clinic_admin":return i.jsx(qhe,{isProfile:!0,isEditing:!0});default:return i.jsx("div",{children:r("Unknown user role","kivicare-clinic-management-system")})}},zhe=()=>{const{userRole:t,hasCapability:e}=ut(),n=t?.includes("patient")?"patient_profile":t?.includes("doctor")?"doctor_profile":t?.includes("receptionist")?"receptionist_profile":t?.includes("clinic_admin")?"clinic_profile":"read";return e(n)||t?.includes("administrator")?i.jsx(Hhe,{}):i.jsx(Xd,{})},Vhe=[We({path:"/profile",component:zhe,title:"Profile",meta:{description:"User profile page"}}),We({path:"/change-password",component:lI,title:"Change Password",meta:{description:"Change password page"}})],Uhe=[{name:"auth",routes:Fhe,description:"Authentication routes",enabled:!0},{name:"dashboard",routes:YZ,description:"Core dashboard routes",enabled:!0},{name:"appointments",routes:$J,description:"Appointment management routes",enabled:!0},{name:"encounters",routes:cte,description:"Encounter management routes",enabled:!0},{name:"clinics",routes:hte,description:"Clinic management routes",enabled:!0},{name:"patients",routes:Cte,description:"Patient management routes",enabled:!0},{name:"taxes",routes:fne,description:"Tax management routes",enabled:!0},{name:"get-help",routes:bne,description:"Help and support management routes",enabled:!0},{name:"doctors",routes:sne,description:"Doctor management routes",enabled:!0},{name:"billing",routes:Ehe,description:"Billing management routes",enabled:!0},{name:"patients-reports",routes:_te,description:"Patient Report routes",enabled:!0},{name:"receptionists",routes:Mne,description:"Receptionist management routes",enabled:!0},{name:"doctor-services",routes:Fne,description:"Doctor Service management routes",enabled:!0},{name:"doctor-session",routes:Ahe,description:"Doctor session management routes",enabled:!0},{name:"reports",routes:Ihe,description:"Clinic and Doctor Reports",enabled:!0},{name:"setup",routes:Jne,description:"Initial setup wizard routes",enabled:!0},{name:"setting",routes:Che,description:"Kivicare Setting routes"},{name:"profile",routes:Vhe,description:"User profile management routes",enabled:!0},{name:"errors",routes:qne,description:"Error handling and fallback routes",enabled:!0}],Whe=()=>Uhe.reduce((t,e)=>[...t,...e.routes],[]),Khe=Whe(),ks=new Map,a_=[];function oI(t,e="",n=0,s=-1,a=-1){t.forEach((l,o)=>{let c=l.path;c?.startsWith("/")||(e?c=`${e}/${l.path}`.replace(/\/+/g,"/"):c=`/${l.path}`),c=c.replace(/\/+/g,"/"),l.index&&(c=e||"/");const d=n===0;d&&(a=a_.length,a_.push(c));const m={path:c,index:o,level:n,parentPath:e,topLevelIndex:a,topLevelPath:d?c:ks.get(e)?.topLevelPath||"/"};ks.set(c,m),l.children&&oI(l.children,c,n+1,o,a)})}oI(Khe);const Ji=()=>{const t=Kn(),e=l_(),n=f.useRef(null),[s,a]=f.useState("fade-down"),l=f.useRef(t),o=f.useRef(!0);f.useEffect(()=>{if(o.current){o.current=!1,l.current=t;return}const m=t.pathname,u=l.current.pathname;if(m===u)return;const p=ks.get(m)||d(m),h=ks.get(u)||d(u);let g="fade-down";p&&h&&(p.topLevelPath===h.topLevelPath?p.parentPath===h.parentPath?g=p.index>h.index?"fade-left":"fade-right":g=p.level<h.level?"fade-down":"fade-up":p.level===0&&h.level===0?g=p.index<h.index?"fade-down":"fade-up":p.parentPath===h.path?g="fade-left":h.parentPath===p.path?g="fade-right":g=p.topLevelIndex<h.topLevelIndex?"fade-down":"fade-up"),a(g),l.current=t},[t]);const c=f.useRef(new Map);function d(m){if(c.current.has(m))return c.current.get(m);if(ks.has(m))return ks.get(m);const u=m.replace(/\/+$/,""),p=`${u}/`;if(ks.has(u))return c.current.set(m,ks.get(u)),ks.get(u);if(ks.has(p))return c.current.set(m,ks.get(p)),ks.get(p);const h=ks.get("/")||{path:"/",index:0,level:0,parentPath:"",topLevelIndex:0,topLevelPath:"/"};return c.current.set(m,h),h}return i.jsx("div",{className:"route-container",children:i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:n,timeout:300,classNames:s,unmountOnExit:!0,children:()=>i.jsx("div",{ref:n,className:"w-100",children:e})},t.pathname)})})};export{V3 as $,xg as A,b_ as B,f_ as C,Mn as D,C as E,Whe as F,Xhe as G,Zhe as H,Y_ as I,M2 as J,Jne as K,Ohe as L,upe as M,kb as N,Pu as O,OJ as P,tf as Q,hpe as R,Ac as S,Ji as T,eX as U,mpe as V,bk as W,ad as X,XR as Y,Dg as Z,Ci as _,bj as a,jJ as a0,SJ as a1,ppe as a2,FR as a3,Wa as a4,LJ as a5,Bi as a6,Cn as a7,JZ as a8,vJ as a9,Un as aa,Wn as ab,xi as ac,kZ as ad,$a as ae,En as af,At as ag,Xe as ah,gpe as ai,fpe as aj,yee as ak,St as al,ef as am,Mt as an,Yn as ao,Et as ap,lt as aq,Pe as ar,A3 as b,O3 as c,gm as d,wg as e,jb as f,bO as g,JI as h,h_ as i,wO as j,Rt as k,vt as l,$3 as m,G_ as n,K_ as o,fg as p,Ol as q,Ia as r,W_ as s,Xt as t,Hs as u,ob as v,db as w,Cc as x,ct as y,yo as z};
