import{r as p,R as cr,j as e,u as H,s as dr,q as ur,a as fr,b as yt,c as hr,d as mr,L as G,_ as A,e as _t,f as U,g as J,O as Nt,h as pr,N as te,i as gr,k as vr,l as xr,m as br,n as jr,A as re,o as wr,p as yr,t as _r,v as Nr,Q as kr}from"./index-B30RaB2y.js";import{r as Sr,u as z,a as Rr,b as Cr,m as qr,c as Tr,$ as Ir,S as Y,N as Er,d as hn,e as kt,B as Or,f as Lr,g as Ar,h as $r,q as mn,i as Pr,j as Mr,k as O,l as $,A as Dr,n as V,o as St,p as Rt,s as Fr,t as Ur,v as Ct,w as Wr,x as ln,C as qt,O as Hr,y as Tt,z as Br,D as M,I as pn,E as se,T as Gr,F as Kr,G as gn,H as ae,J as ie,L as zr,K as Vr,M as Qr}from"./TransitionRoutes-C0fDr2wa.js";import{Q as Jr}from"./queryClient-D6Y6MySy.js";import{R as Zr}from"./index-CQXckJez.js";/* empty css               */function Yr(t){return p.createElement(cr,{flushSync:Sr.flushSync,...t})}function Xr(t,n,r,s=!1){const a=z(r);p.useEffect(()=>{const i=typeof t=="function"?t():t;return i.addEventListener(n,a,s),()=>i.removeEventListener(n,a,s)},[t])}const X=p.createContext(null),es=["children","usePopper"];function ns(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)>=0)continue;r[s]=t[s]}return r}const ts=()=>{};function It(t={}){const n=p.useContext(X),[r,s]=Rr(),a=p.useRef(!1),{flip:i,offset:o,rootCloseEvent:l,fixed:c=!1,placement:d,popperConfig:h={},enableEventListeners:f=!0,usePopper:g=!!n}=t,v=n?.show==null?!!t.show:n.show;v&&!a.current&&(a.current=!0);const w=P=>{n?.toggle(!1,P)},{placement:u,setMenu:m,menuElement:x,toggleElement:j}=n||{},b=Cr(j,x,qr({placement:d||u||"bottom-start",enabled:g,enableEvents:f??v,offset:o,flip:i,fixed:c,arrowElement:r,popperConfig:h})),_=Object.assign({ref:m||ts,"aria-labelledby":j?.id},b.attributes.popper,{style:b.styles.popper}),N={show:v,placement:u,hasShown:a.current,toggle:n?.toggle,popper:g?b:null,arrowProps:g?Object.assign({ref:s},b.attributes.arrow,{style:b.styles.arrow}):{}};return Tr(x,w,{clickTrigger:l,disabled:!v}),[_,N]}function Et(t){let{children:n,usePopper:r=!0}=t,s=ns(t,es);const[a,i]=It(Object.assign({},s,{usePopper:r}));return e.jsx(e.Fragment,{children:n(a,i)})}Et.displayName="DropdownMenu";const Ot=t=>{var n;return((n=t.getAttribute("role"))==null?void 0:n.toLowerCase())==="menu"},vn=()=>{};function Lt(){const t=Ir(),{show:n=!1,toggle:r=vn,setToggle:s,menuElement:a}=p.useContext(X)||{},i=p.useCallback(l=>{r(!n,l)},[n,r]),o={id:t,ref:s||vn,onClick:i,"aria-expanded":!!n};return a&&Ot(a)&&(o["aria-haspopup"]=!0),[o,{show:n,toggle:r}]}function At({children:t}){const[n,r]=Lt();return e.jsx(e.Fragment,{children:t(n,r)})}At.displayName="DropdownToggle";const rs=["eventKey","disabled","onClick","active","as"];function ss(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)>=0)continue;r[s]=t[s]}return r}function $t({key:t,href:n,active:r,disabled:s,onClick:a}){const i=p.useContext(Y),o=p.useContext(Er),{activeKey:l}=o||{},c=hn(t,n),d=r==null&&t!=null?hn(l)===c:r;return[{onClick:z(f=>{s||(a?.(f),i&&!f.isPropagationStopped()&&i(c,f))}),"aria-disabled":s||void 0,"aria-selected":d,[kt("dropdown-item")]:""},{isActive:d}]}const Pt=p.forwardRef((t,n)=>{let{eventKey:r,disabled:s,onClick:a,active:i,as:o=Or}=t,l=ss(t,rs);const[c]=$t({key:r,href:l.href,disabled:s,onClick:a,active:i});return e.jsx(o,Object.assign({},l,{ref:n},c))});Pt.displayName="DropdownItem";function xn(){const t=Mr(),n=p.useRef(null),r=p.useCallback(s=>{n.current=s,t()},[t]);return[n,r]}function Q({defaultShow:t,show:n,onSelect:r,onToggle:s,itemSelector:a=`* [${kt("dropdown-item")}]`,focusFirstItemOnShow:i,placement:o="bottom-start",children:l}){const c=Lr(),[d,h]=Ar(n,t,s),[f,g]=xn(),v=f.current,[w,u]=xn(),m=w.current,x=$r(d),j=p.useRef(null),b=p.useRef(!1),_=p.useContext(Y),N=p.useCallback((y,k,C=k?.type)=>{h(y,{originalEvent:k,source:C})},[h]),P=z((y,k)=>{r?.(y,k),N(!1,k,"select"),k.isPropagationStopped()||_?.(y,k)}),R=p.useMemo(()=>({toggle:N,placement:o,show:d,menuElement:v,toggleElement:m,setMenu:g,setToggle:u}),[N,o,d,v,m,g,u]);v&&x&&!d&&(b.current=v.contains(v.ownerDocument.activeElement));const S=z(()=>{m&&m.focus&&m.focus()}),q=z(()=>{const y=j.current;let k=i;if(k==null&&(k=f.current&&Ot(f.current)?"keyboard":!1),k===!1||k==="keyboard"&&!/^key.+$/.test(y))return;const C=mn(f.current,a)[0];C&&C.focus&&C.focus()});p.useEffect(()=>{d?q():b.current&&(b.current=!1,S())},[d,b,S,q]),p.useEffect(()=>{j.current=null});const D=(y,k)=>{if(!f.current)return null;const C=mn(f.current,a);let E=C.indexOf(y)+k;return E=Math.max(0,Math.min(E,C.length)),C[E]};return Xr(p.useCallback(()=>c.document,[c]),"keydown",y=>{var k,C;const{key:E}=y,I=y.target,K=(k=f.current)==null?void 0:k.contains(I),ne=(C=w.current)==null?void 0:C.contains(I);if(/input|textarea/i.test(I.tagName)&&(E===" "||E!=="Escape"&&K||E==="Escape"&&I.type==="search")||!K&&!ne||E==="Tab"&&(!f.current||!d))return;j.current=y.type;const B={originalEvent:y,source:y.type};switch(E){case"ArrowUp":{const T=D(I,-1);T&&T.focus&&T.focus(),y.preventDefault();return}case"ArrowDown":if(y.preventDefault(),!d)h(!0,B);else{const T=D(I,1);T&&T.focus&&T.focus()}return;case"Tab":Pr(I.ownerDocument,"keyup",T=>{var F;(T.key==="Tab"&&!T.target||!((F=f.current)!=null&&F.contains(T.target)))&&h(!1,B)},{once:!0});break;case"Escape":E==="Escape"&&(y.preventDefault(),y.stopPropagation()),h(!1,B);break}}),e.jsx(Y.Provider,{value:P,children:e.jsx(X.Provider,{value:R,children:l})})}Q.displayName="Dropdown";Q.Menu=Et;Q.Toggle=At;Q.Item=Pt;const cn=p.createContext({});cn.displayName="DropdownContext";const Mt=p.forwardRef(({className:t,bsPrefix:n,as:r="hr",role:s="separator",...a},i)=>(n=O(n,"dropdown-divider"),e.jsx(r,{ref:i,className:$(t,n),role:s,...a})));Mt.displayName="DropdownDivider";const Dt=p.forwardRef(({className:t,bsPrefix:n,as:r="div",role:s="heading",...a},i)=>(n=O(n,"dropdown-header"),e.jsx(r,{ref:i,className:$(t,n),role:s,...a})));Dt.displayName="DropdownHeader";const Ft=p.forwardRef(({bsPrefix:t,className:n,eventKey:r,disabled:s=!1,onClick:a,active:i,as:o=Dr,...l},c)=>{const d=O(t,"dropdown-item"),[h,f]=$t({key:r,href:l.href,disabled:s,onClick:a,active:i});return e.jsx(o,{...l,...h,ref:c,className:$(n,d,f.isActive&&"active",s&&"disabled")})});Ft.displayName="DropdownItem";const Ut=p.forwardRef(({className:t,bsPrefix:n,as:r="span",...s},a)=>(n=O(n,"dropdown-item-text"),e.jsx(r,{ref:a,className:$(t,n),...s})));Ut.displayName="DropdownItemText";function Wt(t,n){return t}function Ht(t,n,r){const s=r?"top-end":"top-start",a=r?"top-start":"top-end",i=r?"bottom-end":"bottom-start",o=r?"bottom-start":"bottom-end",l=r?"right-start":"left-start",c=r?"right-end":"left-end",d=r?"left-start":"right-start",h=r?"left-end":"right-end";let f=t?o:i;return n==="up"?f=t?a:s:n==="end"?f=t?h:d:n==="start"?f=t?c:l:n==="down-centered"?f="bottom":n==="up-centered"&&(f="top"),f}const Bt=p.forwardRef(({bsPrefix:t,className:n,align:r,rootCloseEvent:s,flip:a=!0,show:i,renderOnMount:o,as:l="div",popperConfig:c,variant:d,...h},f)=>{let g=!1;const v=p.useContext(V),w=O(t,"dropdown-menu"),{align:u,drop:m,isRTL:x}=p.useContext(cn);r=r||u;const j=p.useContext(St),b=[];if(r)if(typeof r=="object"){const y=Object.keys(r);if(y.length){const k=y[0],C=r[k];g=C==="start",b.push(`${w}-${k}-${C}`)}}else r==="end"&&(g=!0);const _=Ht(g,m,x),[N,{hasShown:P,popper:R,show:S,toggle:q}]=It({flip:a,rootCloseEvent:s,show:i,usePopper:!v&&b.length===0,offset:[0,2],popperConfig:c,placement:_});if(N.ref=Rt(Wt(f),N.ref),Fr(()=>{S&&R?.update()},[S]),!P&&!o&&!j)return null;typeof l!="string"&&(N.show=S,N.close=()=>q?.(!1),N.align=r);let D=h.style;return R!=null&&R.placement&&(D={...h.style,...N.style},h["x-placement"]=R.placement),e.jsx(l,{...h,...N,style:D,...(b.length||v)&&{"data-bs-popper":"static"},className:$(n,w,S&&"show",g&&`${w}-end`,d&&`${w}-${d}`,...b)})});Bt.displayName="DropdownMenu";const Gt=p.forwardRef(({bsPrefix:t,split:n,className:r,childBsPrefix:s,as:a=Ur,...i},o)=>{const l=O(t,"dropdown-toggle"),c=p.useContext(X);s!==void 0&&(i.bsPrefix=s);const[d]=Lt();return d.ref=Rt(d.ref,Wt(o)),e.jsx(a,{className:$(r,l,n&&`${l}-split`,c?.show&&"show"),...d,...i})});Gt.displayName="DropdownToggle";const Kt=p.forwardRef((t,n)=>{const{bsPrefix:r,drop:s="down",show:a,className:i,align:o="start",onSelect:l,onToggle:c,focusFirstItemOnShow:d,as:h="div",navbar:f,autoClose:g=!0,...v}=Ct(t,{show:"onToggle"}),w=p.useContext(St),u=O(r,"dropdown"),m=Wr(),x=R=>g===!1?R==="click":g==="inside"?R!=="rootClose":g==="outside"?R!=="select":!0,j=ln((R,S)=>{var q;!((q=S.originalEvent)==null||(q=q.target)==null)&&q.classList.contains("dropdown-toggle")&&S.source==="mousedown"||(S.originalEvent.currentTarget===document&&(S.source!=="keydown"||S.originalEvent.key==="Escape")&&(S.source="rootClose"),x(S.source)&&c?.(R,S))}),_=Ht(o==="end",s,m),N=p.useMemo(()=>({align:o,drop:s,isRTL:m}),[o,s,m]),P={down:u,"down-centered":`${u}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return e.jsx(cn.Provider,{value:N,children:e.jsx(Q,{placement:_,show:a,onSelect:l,onToggle:j,focusFirstItemOnShow:d,itemSelector:`.${u}-item:not(.disabled):not(:disabled)`,children:w?v.children:e.jsx(h,{...v,ref:n,className:$(i,a&&"show",P[s])})})})});Kt.displayName="Dropdown";const W=Object.assign(Kt,{Toggle:Gt,Menu:Bt,Item:Ft,ItemText:Ut,Divider:Mt,Header:Dt}),zt=p.forwardRef(({bsPrefix:t,className:n,as:r,...s},a)=>{t=O(t,"navbar-brand");const i=r||(s.href?"a":"span");return e.jsx(i,{...s,ref:a,className:$(n,t)})});zt.displayName="NavbarBrand";const Vt=p.forwardRef(({children:t,bsPrefix:n,...r},s)=>{n=O(n,"navbar-collapse");const a=p.useContext(V);return e.jsx(qt,{in:!!(a&&a.expanded),...r,children:e.jsx("div",{ref:s,className:n,children:t})})});Vt.displayName="NavbarCollapse";const Qt=p.forwardRef(({bsPrefix:t,className:n,children:r,label:s="Toggle navigation",as:a="button",onClick:i,...o},l)=>{t=O(t,"navbar-toggler");const{onToggle:c,expanded:d}=p.useContext(V)||{},h=ln(f=>{i&&i(f),c&&c()});return a==="button"&&(o.type="button"),e.jsx(a,{...o,ref:l,onClick:h,"aria-label":s,className:$(n,t,!d&&"collapsed"),children:r||e.jsx("span",{className:`${t}-icon`})})});Qt.displayName="NavbarToggle";const Jt=p.forwardRef(({onHide:t,...n},r)=>{const s=p.useContext(V),a=ln(()=>{s==null||s.onToggle==null||s.onToggle(),t?.()});return e.jsx(Hr,{ref:r,show:!!(s!=null&&s.expanded),...n,renderStaticNode:!0,onHide:a})});Jt.displayName="NavbarOffcanvas";const Zt=p.forwardRef(({className:t,bsPrefix:n,as:r="span",...s},a)=>(n=O(n,"navbar-text"),e.jsx(r,{ref:a,className:$(t,n),...s})));Zt.displayName="NavbarText";const Yt=p.forwardRef((t,n)=>{const{bsPrefix:r,expand:s=!0,variant:a="light",bg:i,fixed:o,sticky:l,className:c,as:d="nav",expanded:h,onToggle:f,onSelect:g,collapseOnSelect:v=!1,...w}=Ct(t,{expanded:"onToggle"}),u=O(r,"navbar"),m=p.useCallback((...b)=>{g?.(...b),v&&h&&f?.(!1)},[g,v,h,f]);w.role===void 0&&d!=="nav"&&(w.role="navigation");let x=`${u}-expand`;typeof s=="string"&&(x=`${x}-${s}`);const j=p.useMemo(()=>({onToggle:()=>f?.(!h),bsPrefix:u,expanded:!!h,expand:s}),[u,h,s,f]);return e.jsx(V.Provider,{value:j,children:e.jsx(Y.Provider,{value:m,children:e.jsx(d,{ref:n,...w,className:$(c,u,s&&x,a&&`${u}-${a}`,i&&`bg-${i}`,l&&`sticky-${l}`,o&&`fixed-${o}`)})})})});Yt.displayName="Navbar";const Z=Object.assign(Yt,{Brand:zt,Collapse:Vt,Offcanvas:Jt,Text:Zt,Toggle:Qt});function as(){const{getAvailableLanguages:t,currentLanguage:n}=H(),r=t(),[s,a]=p.useState(null),i=dr();p.useEffect(()=>{r.length>0&&a(r.find(l=>l.lang===n)||r[0])},[r,n]);const o={control:l=>({...l,minWidth:"180px",borderRadius:"8px",borderColor:"#ccc",boxShadow:"none",fontSize:"14px",cursor:"pointer","&:hover":{borderColor:"#888"}}),singleValue:l=>({...l,display:"flex",alignItems:"center",gap:"8px"}),option:(l,c)=>({...l,display:"flex",alignItems:"center",gap:"8px",backgroundColor:c.isFocused?"#f0f0f0":"white",color:"#333"}),dropdownIndicator:l=>({...l,padding:"4px"})};return e.jsx(e.Fragment,{children:e.jsx(Tt,{value:s,onChange:l=>{i.mutateAsync(l.lang).then(c=>{c?.data?.locale_data[""].lang==="en_US"?fr("kivicare-clinic-management-system"):yt(c?.data?.locale_data||{"":{}},"kivicare-clinic-management-system"),document.documentElement.dir=c?.data?.is_rtl?"rtl":"ltr",document.documentElement.lang=c?.data?.locale})},options:r,styles:o,className:"react-select-box kivicare-clinic-management-systemuage-switcher",classNamePrefix:"react-select",getOptionLabel:l=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ur,{iso2:l.countryCode,style:{width:20,borderRadius:4}}),e.jsx("div",{className:"kc-header-select-option",children:l.label})]}),isSearchable:!1,getOptionValue:l=>l.lang})})}function is(t){const[n,r]=p.useState(!1),[s,a]=p.useState(!1),[i,o]=p.useState(()=>localStorage.getItem("kivicare_sidebar_layout")||"normal"),{userRole:l,themeSettings:c,hasCapability:d}=H(),{data:h}=hr(),f=mr(),g=d(l?.includes("patient")?"patient_profile":l?.includes("doctor")?"doctor_profile":l?.includes("receptionist")?"receptionist_profile":l?.includes("clinic_admin")||l==="administrator"?"clinic_profile":"read"),v=()=>{f.mutate(void 0,{onSuccess:m=>{window.location.href=m.data},onError:m=>{console.error("Logout error:",m);const x=window.location.pathname.split("/")[1];window.location.href=window.location.origin+"/"+x+"/wp-login.php"}})},w=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()};p.useEffect(()=>{const m=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",m),()=>document.removeEventListener("fullscreenchange",m)},[]),p.useEffect(()=>{const m=x=>{o(x.detail.layout)};return window.addEventListener("kivicare_sidebar_layout_change",m),()=>window.removeEventListener("kivicare_sidebar_layout_change",m)},[]);const u=l==="administrator";return e.jsx(p.Fragment,{children:e.jsx(Z,{expand:"xl",expanded:s,onToggle:a,collapseOnSelect:!0,className:"nav navbar-light iq-navbar",children:e.jsxs(Br,{fluid:!0,className:"navbar-inner",children:[e.jsx(Z.Brand,{as:G,to:"/",children:e.jsxs("div",{className:"logo-main",children:[e.jsx("img",{className:"logo-normal",src:c?.siteLogo||"logo.png",height:"45",alt:A("logo","kivicare-clinic-management-system")}),e.jsx("img",{className:"logo-mini img-fluid",src:c?.siteMiniLogo||c?.siteLogo||"logo.png",height:"30",alt:A("logo","kivicare-clinic-management-system")})]})}),e.jsx("div",{className:"sidebar-toggle",onClick:()=>{const m=document.querySelector(".sidebar.sidebar-base");if(m){m.classList.toggle("sidebar-mini");const j=m.classList.contains("sidebar-mini")?"mini":"normal";localStorage.setItem("kivicare_sidebar_layout",j),o(j),window.dispatchEvent(new CustomEvent("kivicare_sidebar_layout_change",{detail:{layout:j}}))}},"data-toggle":"sidebar","data-active":"true",children:e.jsx("i",{className:"icon d-flex",children:e.jsx("svg",{className:"icon-20",width:"20",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"})})})}),e.jsx(Z.Toggle,{id:"navbar-toggle",className:"px-0","aria-controls":"navbarSupportedContent",children:e.jsx("span",{className:"navbar-toggler-btn",children:e.jsx("i",{className:"ph ph-list text-heading fs-2"})})}),e.jsxs(Z.Collapse,{id:"navbarSupportedContent",className:"justify-content-between",children:[e.jsx("div",{children:window.kc_frontend.admin_url!==""&&c?.wordpressLogoStatus===1&&e.jsx("a",{href:window.kc_frontend.admin_url,target:"_blank",children:e.jsx("span",{id:"wp-logo",className:"cursor",children:c.wordpressLogo?.url?e.jsx("img",{src:c.wordpressLogo.url,alt:A("WordPress Logo","kivicare-clinic-management-system"),style:{maxHeight:"38px",maxWidth:"38px",height:"auto"}}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:38,height:38,fill:"#00749a",children:e.jsx("path",{d:"M2.26 16c0 5.45 3.13 10.145 7.7 12.348L3.478 10.435C2.725 12.174 2.26 14.03 2.26 16zm23.015-.696c0-1.68-.638-2.9-1.16-3.768-.696-1.16-1.333-2.087-1.333-3.246 0-1.275.986-2.435 2.32-2.435h.174C22.84 3.594 19.594 2.26 16 2.26A13.95 13.95 0 0 0 4.522 8.463h.87c1.45 0 3.652-.174 3.652-.174.754-.058.812 1.043.116 1.16 0 0-.754.116-1.565.116l4.986 14.84 3.014-8.986-2.145-5.855L12 9.45c-.754-.058-.638-1.16.058-1.16 0 0 2.26.174 3.594.174 1.45 0 3.652-.174 3.652-.174.754-.058.812 1.043.116 1.16 0 0-.754.116-1.565.116L22.84 24.35l1.4-4.58c.58-1.913 1.043-3.246 1.043-4.464zm-9.043 1.913L12.116 29.16c1.217.348 2.55.58 3.884.58 1.623 0 3.13-.3 4.58-.754-.058-.058-.058-.116-.116-.174zM28.058 9.45l.116 1.4c0 1.4-.232 2.957-1.043 4.928l-4.174 12.116c4.058-2.377 6.84-6.783 6.84-11.884-.058-2.377-.696-4.58-1.74-6.55zM16 0C7.188 0 0 7.188 0 16s7.188 16 16 16 16-7.188 16-16S24.812 0 16 0zm0 31.304C7.594 31.304.754 24.464.754 16A15.27 15.27 0 0 1 16 .754 15.27 15.27 0 0 1 31.246 16c0 8.464-6.84 15.304-15.246 15.304z"})})})})}),e.jsxs(M,{className:"align-items-center navbar-list mb-2 mb-lg-0 gap-2 gap-lg-4",children:[window?.KCSandboxManager&&e.jsx("div",{id:"kcsandboxuserswitcher",className:"kc-sandboxuser-switcher",children:e.jsx(Tt,{className:"react-select-box",classNamePrefix:"react-select",options:Object.entries(window.KCSandboxManager.roles).map(([m,x])=>({value:m,label:x})),searchable:!1,defaultValue:{value:window.KCSandboxManager.user_role,label:window.KCSandboxManager.roles[window.KCSandboxManager.user_role]||"Current Role"},formatOptionLabel:m=>{const x={administrator:"ph ph-shield-check",[window.kc_frontend.prefix+"clinic_admin"]:"ph ph-buildings",[window.kc_frontend.prefix+"doctor"]:"ph ph-stethoscope",[window.kc_frontend.prefix+"receptionist"]:"ph ph-identification-badge",[window.kc_frontend.prefix+"patient"]:"ph ph-user"};return e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`${x[m.value]||"ph ph-user"} fs-5 text-primary`}),e.jsx("span",{className:"text-body kc-header-select-option",children:m.label})]})},onChange:m=>{m&&window?.KCSandboxManager?.switchUser&&window.KCSandboxManager.switchUser(m.value)},styles:{control:m=>({...m,minHeight:"36px",borderRadius:"6px",fontSize:"14px",cursor:"pointer"}),menu:m=>({...m,zIndex:9999})},placeholder:"Select Role",isSearchable:!1})}),e.jsx(M.Item,{children:e.jsx(as,{})}),window?.KCSandboxManager&&window?.KCSandboxManager?.enable_app_sync==="true"&&e.jsx(M.Item,{children:e.jsx(M.Link,{onClick:()=>window?.openQRCodeModal(),style:{cursor:"pointer"},children:e.jsx("span",{className:"btn-action position-relative nav-list-icon",children:e.jsx("i",{className:"fs-4 ph ph-qr-code"})})})}),u&&h?.data?.hideUtilityLinks!=="on"&&e.jsx(M.Item,{children:e.jsx(M.Link,{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/getting-started/welcome-to-kivicare-ehr/",target:"_blank",title:A("Documentation","kivicare-clinic-management-system"),children:e.jsx("span",{className:"btn-action position-relative nav-list-icon",children:e.jsx("span",{className:"btn-inner",children:e.jsx("i",{className:"fs-4 ph ph-files"})})})})}),e.jsx(M.Item,{className:"iq-full-screen",id:"fullscreen-item",children:e.jsx(M.Link,{onClick:w,id:"btnFullscreen",children:e.jsx("div",{className:"icon nav-list-icon",children:e.jsxs("span",{className:"btn-inner",children:[e.jsx("i",{className:`normal-screen fs-4 ph ph-corners-out ${n?"d-none":""}`}),e.jsx("i",{className:`full-normal-screen fs-4 ph ph-corners-in ${n?"":"d-none"}`})]})})})}),e.jsxs(W,{as:M.Item,align:"end",children:[e.jsx(W.Toggle,{as:M.Link,className:"p-0 caret-none d-flex align-items-center",id:"user-dropdown",children:e.jsx("div",{className:"icon-40",children:e.jsxs("span",{className:"btn-inner d-inline-block position-relative",children:[h?.data?.user_profile_image?e.jsx(pn,{src:h.data.user_profile_image,className:"img-fluid rounded-circle object-fit-cover avatar-40"}):e.jsx("div",{className:"img-fluid rounded-circle object-fit-cover d-flex align-items-center justify-content-center bg-primary text-white fw-bold avatar-40 font-size-14",children:h?.data?.user_name?.split(" ").map(m=>m.charAt(0)).join("").toUpperCase()||"U"}),e.jsx("span",{className:"bg-success p-1 rounded-circle position-absolute end-0 bottom-0 border border-3 border-white"})]})})}),e.jsx("style",{children:`
                                        .custom-dropdown-shadow {
                                            box-shadow: 0 10px 30px 0 rgba(0,0,0,0.2) !important;
                                        }
                                    `}),e.jsxs(W.Menu,{className:"custom-dropdown-shadow rounded-3 p-0 border-0 mt-2",style:{minWidth:"280px"},children:[e.jsx("div",{className:"p-3 bg-primary mb-2 rounded-top-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"avatar-40",children:h?.data?.user_profile_image?e.jsx(pn,{src:h.data.user_profile_image,className:"img-fluid rounded-circle object-fit-cover avatar-40"}):e.jsx("div",{className:"img-fluid rounded-circle object-fit-cover d-flex align-items-center justify-content-center bg-white text-primary fw-bold avatar-40 font-size-20",children:h?.data?.user_name?.split(" ").map(m=>m.charAt(0)).join("").toUpperCase()||"U"})}),e.jsxs("div",{className:"text-white overflow-hidden",children:[e.jsx("h6",{className:"mb-0 text-white text-truncate",children:h?.data?.user_name||A("User","kivicare-clinic-management-system")}),e.jsx("p",{className:"mb-0 font-size-12 text-truncate",children:h?.data?.user_email||""})]})]})}),e.jsxs("div",{className:"px-2 pb-2",children:[g&&e.jsxs(W.Item,{as:G,to:"/profile",className:"rounded px-3 py-2",children:[e.jsx("i",{className:"ph ph-user-circle me-2 fs-5 align-middle"}),e.jsx("span",{className:"align-middle",children:A("My Profile","kivicare-clinic-management-system")})]}),d("change_password")&&e.jsxs(W.Item,{as:G,to:"/change-password",className:"rounded px-3 py-2",children:[e.jsx("i",{className:"ph ph-lock-key me-2 fs-5 align-middle"}),e.jsx("span",{className:"align-middle",children:A("Change Password","kivicare-clinic-management-system")})]}),e.jsx(W.Divider,{className:"my-2",style:{borderColor:"rgba(0, 0, 0, 0.05)"}}),e.jsxs(W.Item,{onClick:v,className:"rounded px-3 py-2 text-danger",children:[e.jsx("i",{className:"ph ph-sign-out me-2 fs-5 align-middle"}),e.jsx("span",{className:"align-middle",children:f.isPending?A("Logging out...","kivicare-clinic-management-system"):A("Logout","kivicare-clinic-management-system")})]})]})]})]})]})]})]})})})}const os=()=>{const t=(n=3)=>e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-item static-item",children:e.jsx("div",{className:"nav-link static-item disabled text-start",children:e.jsx("span",{className:"default-icon",children:e.jsx(se,{width:"60px",height:"0.875rem"})})})}),Array.from({length:n}).map((r,s)=>e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link",children:[e.jsx("i",{className:"icon",children:e.jsx(se,{width:"20px",height:"20px",style:{borderRadius:"4px"}})}),e.jsx("span",{className:"item-name",children:e.jsx(se,{width:`${80+Math.random()*40}px`,height:"0.875rem"})})]})},s))]});return e.jsxs("ul",{className:"navbar-nav iq-main-menu",id:"sidebar-menu",children:[t(2),t(3),t(3),t(3),t(1),t(3)]})};function ls(){const{themeSettings:t,sidebarItems:n=[],isAddonActive:r,loading:s}=H(),a=_t(),[i,o]=p.useState({}),[l,c]=p.useState(()=>localStorage.getItem("kivicare_sidebar_layout")==="mini"),d=p.useRef();p.useEffect(()=>{d.current&&(localStorage.getItem("kivicare_sidebar_layout")==="mini"?d.current.classList.add("sidebar-mini"):d.current.classList.remove("sidebar-mini"))},[]),p.useEffect(()=>{const u=m=>{if(m.key==="kivicare_sidebar_layout"){const x=m.newValue==="mini";c(x),d.current&&(x?d.current.classList.add("sidebar-mini"):d.current.classList.remove("sidebar-mini"))}};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)},[]),p.useEffect(()=>{const u={};n.forEach(m=>{m.type==="parent"&&m.childrens&&m.childrens.some(j=>a.pathname.startsWith(j.link))&&(u[m.link]=!0)}),o(u)},[a.pathname,n]);const h=u=>{o(m=>({...m,[u]:!m[u]}))},f=u=>u.type==="route"?!!(a.pathname===u.link||a.pathname.startsWith(u.link+"/")):!1,g=u=>["encounter_template","tax","billings","patient_report","clinic-revenue-reports"].includes(u.routeClass),v=u=>e.jsx("li",{className:"nav-item static-item",children:e.jsxs("a",{className:"nav-link static-item disabled text-start",href:"#",tabIndex:"-1",children:[e.jsx("span",{className:"default-icon",children:U(u.label,"admin","kivicare-clinic-management-system")}),e.jsx("span",{className:"mini-icon","data-bs-toggle":"tooltip","data-bs-placement":"right",title:U(u.label,"admin","kivicare-clinic-management-system"),children:"-"})]})},u.routeClass),w=u=>{const m=u.link.replace(/\./g,"-")||u.routeClass,x=f(u),j=i[u.link]||!1;if(u.type==="group")return v(u);if(u.type==="parent"&&u.childrens)return e.jsxs("li",{className:"nav-item",children:[e.jsxs("a",{className:`nav-link ${j?"show":"collapsed"}`,onClick:()=>h(u.link),role:"button","aria-expanded":j,children:[e.jsx("i",{className:"icon",children:e.jsx("i",{className:u.iconClass})}),e.jsx("span",{className:"item-name",children:U(u.label,"admin","kivicare-clinic-management-system")}),e.jsx("i",{className:"right-icon",children:e.jsx("i",{className:`ph ph-caret-right ${j?"rotate-90":""}`})})]}),e.jsx(qt,{in:j,children:e.jsx("ul",{className:"sub-nav",id:m,children:u.childrens.map(_=>{const N=f(_);return e.jsx("li",{className:`nav-item ${N?"active":""}`,children:_.type==="route"?e.jsxs(G,{className:`nav-link ${N?"active":""}`,to:`${_.link}`,children:[e.jsx("i",{className:"icon",children:e.jsx("i",{className:_.iconClass})}),e.jsx("span",{className:"item-name",children:U(_.label,"admin","kivicare-clinic-management-system")}),_.routeClass==="encounter_template"&&!r("kiviPro")&&e.jsx("span",{className:"pro-badge",children:"PRO"})]}):e.jsxs("a",{className:"nav-link",href:_.link,target:_.type==="href"?"_blank":"_self",rel:_.type==="href"?"noopener noreferrer":"",children:[e.jsx("i",{className:"icon",children:e.jsx("i",{className:_.iconClass})}),e.jsx("span",{className:"item-name",children:U(_.label,"admin","kivicare-clinic-management-system")})]})},`${m}-${_.link}`)})})})]},m);const b=g(u)&&!r("kiviPro");return e.jsx("li",{className:`nav-item ${x?"active":""}`,children:u.type==="route"?e.jsxs(G,{className:`nav-link ${x?"active":""}`,to:`${u.link}`,children:[e.jsx("i",{className:"icon",children:e.jsx("i",{className:u.iconClass})}),e.jsx("span",{className:"item-name",children:U(u.label,"admin","kivicare-clinic-management-system")}),b&&e.jsx("span",{className:"pro-badge",children:"PRO"})]}):e.jsxs("a",{className:"nav-link",href:u.link,target:u.type==="href"?"_blank":"_self",rel:u.type==="href"?"noopener noreferrer":"",children:[e.jsx("i",{className:"icon",children:e.jsx("i",{className:u.iconClass})}),e.jsx("span",{className:"item-name",children:U(u.label,"admin","kivicare-clinic-management-system")}),b&&e.jsx("span",{className:"pro-badge",children:"PRO"})]})},m)};return s?e.jsxs("aside",{className:"sidebar sidebar-base",ref:d,children:[e.jsx("div",{className:"sidebar-header d-flex align-items-center justify-content-start position-relative",children:e.jsx("div",{className:"navbar-brand",children:e.jsx("div",{className:"skeleton-element kc-sidebar-logo-skeleton"})})}),e.jsx("div",{className:"sidebar-body pt-0 data-scrollbar",children:e.jsx("div",{className:"sidebar-list",children:e.jsx(os,{})})}),e.jsx("div",{className:"sidebar-footer"})]}):e.jsxs("aside",{className:"sidebar sidebar-base",ref:d,children:[e.jsxs("div",{className:"sidebar-header d-flex align-items-center justify-content-start position-relative",children:[e.jsx(G,{to:"/",className:"navbar-brand",children:e.jsxs("div",{className:"logo-main",children:[e.jsx("img",{className:"logo-normal",src:t?.siteLogo||"logo.png",height:"45",alt:A("logo","kivicare")}),e.jsx("img",{className:"logo-mini img-fluid",src:t?.siteMiniLogo||t?.siteLogo||"logo.png",height:"30",alt:A("logo","kivicare")})]})}),e.jsx("div",{className:"sidebar-toggle",onClick:()=>{d.current.classList.toggle("sidebar-mini");const u=d.current?.classList.contains("sidebar-mini")||!1;c(u),localStorage.setItem("kivicare_sidebar_layout",u?"mini":"normal"),window.dispatchEvent(new CustomEvent("kivicare_sidebar_layout_change",{detail:{layout:u?"mini":"normal"}}))},children:e.jsx("i",{className:"icon",children:e.jsx("i",{className:"icon-arrow ph ph-arrow-left",style:{fontSize:20}})})})]}),e.jsx("div",{className:"sidebar-body pt-0 data-scrollbar",children:e.jsx("div",{className:"sidebar-list",children:e.jsx("ul",{className:"navbar-nav iq-main-menu",id:"sidebar-menu",children:n.map(u=>w(u))})})}),e.jsx("div",{className:"sidebar-footer"})]})}const cs=p.memo(ls);function ds(){const{themeSettings:t}=H(),n=t?.copyrightText||"";return!n||n.trim()===""?null:e.jsx("footer",{className:"footer mt-4 py-3",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 text-center",children:e.jsx("p",{className:"mb-0",children:n})})})})})}var oe={exports:{}},le,bn;function dn(){if(bn)return le;bn=1;function t(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return le=t,le}var ce,jn;function ee(){if(jn)return ce;jn=1;var t=Array.isArray;return ce=t,ce}var de,wn;function us(){if(wn)return de;wn=1;var t=typeof J=="object"&&J&&J.Object===Object&&J;return de=t,de}var ue,yn;function Xt(){if(yn)return ue;yn=1;var t=us(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=t||n||Function("return this")();return ue=r,ue}var fe,_n;function un(){if(_n)return fe;_n=1;var t=Xt(),n=t.Symbol;return fe=n,fe}var he,Nn;function er(){if(Nn)return he;Nn=1;function t(n,r){for(var s=-1,a=n==null?0:n.length,i=Array(a);++s<a;)i[s]=r(n[s],s,n);return i}return he=t,he}var me,kn;function fs(){if(kn)return me;kn=1;var t=un(),n=Object.prototype,r=n.hasOwnProperty,s=n.toString,a=t?t.toStringTag:void 0;function i(o){var l=r.call(o,a),c=o[a];try{o[a]=void 0;var d=!0}catch{}var h=s.call(o);return d&&(l?o[a]=c:delete o[a]),h}return me=i,me}var pe,Sn;function hs(){if(Sn)return pe;Sn=1;var t=Object.prototype,n=t.toString;function r(s){return n.call(s)}return pe=r,pe}var ge,Rn;function fn(){if(Rn)return ge;Rn=1;var t=un(),n=fs(),r=hs(),s="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:s:i&&i in Object(l)?n(l):r(l)}return ge=o,ge}var ve,Cn;function nr(){if(Cn)return ve;Cn=1;function t(n){return n!=null&&typeof n=="object"}return ve=t,ve}var xe,qn;function ms(){if(qn)return xe;qn=1;var t=fn(),n=nr(),r="[object Symbol]";function s(a){return typeof a=="symbol"||n(a)&&t(a)==r}return xe=s,xe}var be,Tn;function tr(){if(Tn)return be;Tn=1;var t=un(),n=er(),r=ee(),s=ms(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return n(l,o)+"";if(s(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return be=o,be}var je,In;function ps(){if(In)return je;In=1;function t(n,r,s){var a=-1,i=n.length;r<0&&(r=-r>i?0:i+r),s=s>i?i:s,s<0&&(s+=i),i=r>s?0:s-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=n[a+r];return o}return je=t,je}var we,En;function gs(){if(En)return we;En=1;var t=ps();function n(r,s,a){var i=r.length;return a=a===void 0?i:a,!s&&a>=i?r:t(r,s,a)}return we=n,we}var ye,On;function vs(){if(On)return ye;On=1;function t(n,r,s,a){for(var i=n.length,o=s+(a?1:-1);a?o--:++o<i;)if(r(n[o],o,n))return o;return-1}return ye=t,ye}var _e,Ln;function xs(){if(Ln)return _e;Ln=1;function t(n){return n!==n}return _e=t,_e}var Ne,An;function bs(){if(An)return Ne;An=1;function t(n,r,s){for(var a=s-1,i=n.length;++a<i;)if(n[a]===r)return a;return-1}return Ne=t,Ne}var ke,$n;function rr(){if($n)return ke;$n=1;var t=vs(),n=xs(),r=bs();function s(a,i,o){return i===i?r(a,i,o):t(a,n,o)}return ke=s,ke}var Se,Pn;function js(){if(Pn)return Se;Pn=1;var t=rr();function n(r,s){for(var a=r.length;a--&&t(s,r[a],0)>-1;);return a}return Se=n,Se}var Re,Mn;function ws(){if(Mn)return Re;Mn=1;function t(n){return n.split("")}return Re=t,Re}var Ce,Dn;function ys(){if(Dn)return Ce;Dn=1;var t="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=n+r+s,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+i+"]");function c(d){return l.test(d)}return Ce=c,Ce}var qe,Fn;function _s(){if(Fn)return qe;Fn=1;var t="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=n+r+s,i="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",h="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",w=d+"?",u="["+i+"]?",m="(?:"+v+"(?:"+[h,f,g].join("|")+")"+u+w+")*",x=u+w+m,j="(?:"+[h+l+"?",l,f,g,o].join("|")+")",b=RegExp(c+"(?="+c+")|"+j+x,"g");function _(N){return N.match(b)||[]}return qe=_,qe}var Te,Un;function Ns(){if(Un)return Te;Un=1;var t=ws(),n=ys(),r=_s();function s(a){return n(a)?r(a):t(a)}return Te=s,Te}var Ie,Wn;function ks(){if(Wn)return Ie;Wn=1;var t=tr();function n(r){return r==null?"":t(r)}return Ie=n,Ie}var Ee,Hn;function Ss(){if(Hn)return Ee;Hn=1;var t=/\s/;function n(r){for(var s=r.length;s--&&t.test(r.charAt(s)););return s}return Ee=n,Ee}var Oe,Bn;function Rs(){if(Bn)return Oe;Bn=1;var t=tr(),n=gs(),r=js(),s=Ns(),a=ks(),i=Ss();function o(l,c,d){if(l=a(l),l&&(d||c===void 0))return l.slice(0,i(l)+1);if(!l||!(c=t(c)))return l;var h=s(l),f=r(h,s(c))+1;return n(h,0,f).join("")}return Oe=o,Oe}var Le,Gn;function Cs(){if(Gn)return Le;Gn=1;var t=fn(),n=ee(),r=nr(),s="[object String]";function a(i){return typeof i=="string"||!n(i)&&r(i)&&t(i)==s}return Le=a,Le}var Ae,Kn;function sr(){if(Kn)return Ae;Kn=1;function t(n){return n}return Ae=t,Ae}var $e,zn;function qs(){if(zn)return $e;zn=1;function t(n,r,s){switch(s.length){case 0:return n.call(r);case 1:return n.call(r,s[0]);case 2:return n.call(r,s[0],s[1]);case 3:return n.call(r,s[0],s[1],s[2])}return n.apply(r,s)}return $e=t,$e}var Pe,Vn;function Ts(){if(Vn)return Pe;Vn=1;var t=qs(),n=Math.max;function r(s,a,i){return a=n(a===void 0?s.length-1:a,0),function(){for(var o=arguments,l=-1,c=n(o.length-a,0),d=Array(c);++l<c;)d[l]=o[a+l];l=-1;for(var h=Array(a+1);++l<a;)h[l]=o[l];return h[a]=i(d),t(s,this,h)}}return Pe=r,Pe}var Me,Qn;function Is(){if(Qn)return Me;Qn=1;function t(n){return function(){return n}}return Me=t,Me}var De,Jn;function Es(){if(Jn)return De;Jn=1;var t=fn(),n=dn(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!n(l))return!1;var c=t(l);return c==s||c==a||c==r||c==i}return De=o,De}var Fe,Zn;function Os(){if(Zn)return Fe;Zn=1;var t=Xt(),n=t["__core-js_shared__"];return Fe=n,Fe}var Ue,Yn;function Ls(){if(Yn)return Ue;Yn=1;var t=Os(),n=(function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function r(s){return!!n&&n in s}return Ue=r,Ue}var We,Xn;function As(){if(Xn)return We;Xn=1;var t=Function.prototype,n=t.toString;function r(s){if(s!=null){try{return n.call(s)}catch{}try{return s+""}catch{}}return""}return We=r,We}var He,et;function $s(){if(et)return He;et=1;var t=Es(),n=Ls(),r=dn(),s=As(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,h=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(g){if(!r(g)||n(g))return!1;var v=t(g)?h:i;return v.test(s(g))}return He=f,He}var Be,nt;function Ps(){if(nt)return Be;nt=1;function t(n,r){return n?.[r]}return Be=t,Be}var Ge,tt;function Ms(){if(tt)return Ge;tt=1;var t=$s(),n=Ps();function r(s,a){var i=n(s,a);return t(i)?i:void 0}return Ge=r,Ge}var Ke,rt;function Ds(){if(rt)return Ke;rt=1;var t=Ms(),n=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Ke=n,Ke}var ze,st;function Fs(){if(st)return ze;st=1;var t=Is(),n=Ds(),r=sr(),s=n?function(a,i){return n(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return ze=s,ze}var Ve,at;function Us(){if(at)return Ve;at=1;var t=800,n=16,r=Date.now;function s(a){var i=0,o=0;return function(){var l=r(),c=n-(l-o);if(o=l,c>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return Ve=s,Ve}var Qe,it;function Ws(){if(it)return Qe;it=1;var t=Fs(),n=Us(),r=n(t);return Qe=r,Qe}var Je,ot;function Hs(){if(ot)return Je;ot=1;var t=sr(),n=Ts(),r=Ws();function s(a,i){return r(n(a,i,t),a+"")}return Je=s,Je}var Ze,lt;function Bs(){if(lt)return Ze;lt=1;function t(n,r,s,a){for(var i=s-1,o=n.length;++i<o;)if(a(n[i],r))return i;return-1}return Ze=t,Ze}var Ye,ct;function Gs(){if(ct)return Ye;ct=1;function t(n){return function(r){return n(r)}}return Ye=t,Ye}var Xe,dt;function Ks(){if(dt)return Xe;dt=1;function t(n,r){var s=-1,a=n.length;for(r||(r=Array(a));++s<a;)r[s]=n[s];return r}return Xe=t,Xe}var en,ut;function zs(){if(ut)return en;ut=1;var t=er(),n=rr(),r=Bs(),s=Gs(),a=Ks(),i=Array.prototype,o=i.splice;function l(c,d,h,f){var g=f?r:n,v=-1,w=d.length,u=c;for(c===d&&(d=a(d)),h&&(u=t(c,s(h)));++v<w;)for(var m=0,x=d[v],j=h?h(x):x;(m=g(u,j,m,f))>-1;)u!==c&&o.call(u,m,1),o.call(c,m,1);return c}return en=l,en}var nn,ft;function Vs(){if(ft)return nn;ft=1;var t=zs();function n(r,s){return r&&r.length&&s&&s.length?t(r,s):r}return nn=n,nn}var tn,ht;function Qs(){if(ht)return tn;ht=1;var t=Hs(),n=Vs(),r=t(n);return tn=r,tn}var rn,mt;function ar(){if(mt)return rn;mt=1;const t=ee(),n=Cs(),r=Qs();var s=0;class a{constructor(o){this.id=++s,t(o)?(this.open=o[0],this.close=o[1]):n(o)&&(this.text=o),this.children=[]}append(o){o instanceof a||(o=new a(o)),o._parent&&r(o._parent.children,o),o._parent=this,this.children=this.children.concat(o)}render(){var o="";this.open&&(o+=this.open),this.text&&(o+=this.text);for(var l=0;l<this.children.length;l++)o+=this.children[l].render();return this.close&&(o+=this.close),o}parent(){return this._parent}}return rn=a,rn}var sn,pt;function Js(){return pt||(pt=1,sn={encodeLink:n=>encodeURI(n).replace(/\(/i,"%28").replace(/\)/i,"%29").replace(/(\?|&)response-content-disposition=attachment.*$/,"")}),sn}var an,gt;function Zs(){if(gt)return an;gt=1;const t=ar(),{encodeLink:n}=Js();return an={embed:{image:function(r){this.append("![]("+n(r)+")")},thematic_break:function(){this.open=`
---
`+this.open}},inline:{italic:function(){return["_","_"]},bold:function(){return["**","**"]},link:function(r){return["[","]("+r+")"]}},block:{header:function({header:r}){this.open="#".repeat(r)+" "+this.open},blockquote:function(){this.open="> "+this.open},list:{group:function(){return new t(["",`
`])},line:function(r,s){if(r.list==="bullet")this.open="- "+this.open;else if(r.list==="checked")this.open="- [x] "+this.open;else if(r.list==="unchecked")this.open="- [ ] "+this.open;else if(r.list==="ordered"){s.count=s.count||0;var a=++s.count;this.open=a+". "+this.open}}}}},an}var vt;function Ys(){return vt||(vt=1,(function(t,n){const r=dn(),s=ee(),a=Rs(),i=Zs(),o=ar();t.exports=function(d,h=i){return a(l(d,h).render())+`
`};function l(d,h){var f,g,v,w,u,m=new o;function x(){v=g=new o(["",`
`]),m.append(g),w={}}x();for(var j=0;j<d.length;j++){var b=d[j];if(r(b.insert))for(var _ in b.insert)h.embed[_]&&(D(b.attributes),h.embed[_].call(v,b.insert[_],b.attributes));else{var N=b.insert.split(`
`);if(c(b.attributes,h)){for(var P=1;P<N.length;P++)for(var R in b.attributes)if(h.block[R]){var S=h.block[R];typeof S=="object"&&(f&&f.type!==R&&(f=null),!f&&S.group&&(f={el:S.group(),type:R,value:b.attributes[_],distance:0},m.append(f.el)),f&&(f.el.append(g),f.distance=0),S=S.line),S.call(g,b.attributes,f),x();break}u=!0}else{for(var q=0;q<N.length;q++)(q>0||u)&&f&&++f.distance>=2&&(f=null),D(b.attributes,d[j+1]&&d[j+1].attributes),v.append(N[q]),q<N.length-1&&x();u=!1}}}return m;function D(y,k){var C=[],E=[];y=y||{};for(var I=v,K={};I._format;){if(K[I._format]=!0,!y[I._format]){for(var ne in K)delete w[ne];v=I.parent()}I=I.parent()}for(var L in y)if(h.inline[L]){if(w[L]&&w[L]===y[L])continue;k&&y[L]===k[L]?C.push(L):E.push(L),w[L]=y[L]}C.forEach(B),E.forEach(B);function B(T){var F=h.inline[T].call(null,y[T]);s(F)&&(F=new o(F)),F._format=T,v.append(F),v=F}}}function c(d,h){for(var f in d)if(Object.keys(h.block).includes(f))return!0;return!1}})(oe)),oe.exports}var on,xt;function Xs(){return xt||(xt=1,on={deltaToMarkdown:Ys()}),on}Xs();const ea=({variant:t="card",rows:n=3,columns:r=4,height:s=null,className:a=""})=>{const i=({width:f="100%",height:g="1rem",className:v=""})=>e.jsx("div",{className:`skeleton-element ${v}`,style:{width:f,height:g},role:"status","aria-label":"Loading content"}),o=()=>e.jsx("div",{className:`card skeleton-card ${a}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx(i,{width:"40%",height:"1.5rem"}),e.jsx(i,{width:"2rem",height:"2rem",className:"rounded-circle"})]}),e.jsx(i,{width:"60%",height:"2rem",className:"mb-2"}),e.jsx(i,{width:"80%",height:"1rem"})]})}),l=()=>e.jsx("div",{className:`card skeleton-table ${a}`,children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-flex gap-3 mb-3 pb-3 border-bottom",children:Array.from({length:r}).map((f,g)=>e.jsx(i,{width:`${100/r}%`,height:"1.25rem"},`header-${g}`))}),Array.from({length:n}).map((f,g)=>e.jsx("div",{className:"d-flex gap-3 mb-3 align-items-center",children:Array.from({length:r}).map((v,w)=>e.jsx(i,{width:`${100/r}%`,height:"1rem"},`cell-${g}-${w}`))},`row-${g}`))]})}),c=()=>e.jsx("div",{className:`card skeleton-form ${a}`,children:e.jsxs("div",{className:"card-body",children:[e.jsx(i,{width:"30%",height:"1.5rem",className:"mb-4"}),Array.from({length:n}).map((f,g)=>e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{width:"20%",height:"1rem",className:"mb-2"}),e.jsx(i,{width:"100%",height:"2.5rem"})]},`field-${g}`)),e.jsxs("div",{className:"d-flex gap-2 mt-4",children:[e.jsx(i,{width:"8rem",height:"2.5rem"}),e.jsx(i,{width:"8rem",height:"2.5rem"})]})]})}),d=()=>e.jsx("div",{className:`card skeleton-list ${a}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx(i,{width:"30%",height:"1.5rem"}),e.jsx(i,{width:"8rem",height:"2rem"})]}),Array.from({length:n}).map((f,g)=>e.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(i,{width:"3rem",height:"3rem",className:"rounded-circle"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx(i,{width:"40%",height:"1.25rem",className:"mb-2"}),e.jsx(i,{width:"60%",height:"1rem"})]}),e.jsx(i,{width:"6rem",height:"1rem"})]})},`item-${g}`))]})}),h=()=>e.jsx("div",{className:"insights-container dashboard-insights-container stash-cards grid-count-4",children:Array.from({length:4}).map((f,g)=>e.jsx("div",{className:"card skeleton-stat",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx(i,{width:"50%",height:"1rem"}),e.jsx(i,{width:"2.5rem",height:"2.5rem",className:"rounded-circle"})]}),e.jsx(i,{width:"40%",height:"2rem",className:"mb-1"}),e.jsx(i,{width:"30%",height:"0.875rem"})]})},`stat-${g}`))});switch(t){case"table":return e.jsx(l,{});case"form":return e.jsx(c,{});case"list":return e.jsx(d,{});case"stats":return e.jsx(h,{});case"card":default:return e.jsx(o,{})}},na=()=>{const{userRole:t,sidebarItems:n,loading:r}=H(),s=_t(),a=p.useRef(null),[i,o]=p.useState(!1),l=d=>d.startsWith("/setting")||d.startsWith("/encounter")||d.startsWith("/patient/profile");p.useEffect(()=>{const d=s.pathname,h=a.current;if(h===null){o(!1),a.current=d;return}const f=l(d),g=l(h),v=f==!1||g==!1;o(v),a.current=d},[s.pathname]);const c=n&&n.length||r>0;return e.jsxs("div",{className:`wrapper ${c?"":"sidebar-hidden"}`,children:[c&&e.jsx(cs,{userRole:t}),e.jsxs("main",{className:"main-content",children:[e.jsx(is,{}),e.jsx("div",{className:"content-inner",children:e.jsx("div",{className:"container-fluid pb-0",children:e.jsx(p.Suspense,{fallback:e.jsx(ea,{variant:"card"}),children:i?e.jsx(Gr,{}):e.jsx(Nt,{})})})}),e.jsx(ds,{})]})]})},bt=()=>{const{loading:t}=H();return e.jsx("div",{className:"wrapper",children:e.jsx("main",{className:"main-content",children:e.jsx(Nt,{})})})},jt=()=>{const t=pr();return p.useEffect(()=>((()=>{if(window.jQuery){const r=window.jQuery;r(document).on("heartbeat-tick.kivicare_auth",function(s,a){if(a["wp-auth-check"]===!1){console.log("WordPress auth check failed, redirecting to login"),window.kc_frontend.nonce="",t("/login",{replace:!0,state:{message:{text:"Your session has expired. Please login again.",type:"error"}}});return}a.kivicare_auth_response&&(a.kivicare_auth_response.is_authenticated||(console.log("User not authenticated, redirecting to login"),t("/login",{replace:!0,state:{message:{text:"Your session has expired. Please login again.",type:"error"}}})))})}})(),()=>{if(window.jQuery){const r=window.jQuery;r(document).off("heartbeat-tick.kivicare_auth")}}),[t]),null},ta=wp.hooks.applyFilters("kivicare.dashboard.routes",Kr()),ra=()=>{const{sidebarItems:t,loading:n,hasCapability:r,userRole:s}=H();if(n)return null;const a=o=>o&&o!=="#"&&!o.startsWith("#");if(t?.length>0)for(const o of t){if(a(o.link))return e.jsx(te,{to:o.link,replace:!0});const l=o.childrens?.find(c=>a(c.link));if(l)return e.jsx(te,{to:l.link,replace:!0})}let i="/dashboard";return gr(s)&&r("patient_profile")||vr(s)&&r("doctor_profile")||xr(s)&&r("receptionist_profile")?i="/profile":(br(s)||jr(s)&&r("settings_view"))&&(i="/setting"),e.jsx(te,{to:i,replace:!0})},wt=[{path:"/",element:ae(e.jsxs(re,{children:[e.jsx(jt,{}),e.jsx(na,{})]})),children:[{path:"",element:e.jsx(ra,{}),index:!0},...gn(ta)],errorElement:e.jsx(ie,{})},{path:"/clinic-setup",title:"Clinic Setup",element:ae(e.jsxs(re,{children:[e.jsx(jt,{}),e.jsx(bt,{})]})),children:gn(Vr),errorElement:e.jsx(ie,{})},{path:"/login",title:"Login",element:ae(e.jsx(re,{children:e.jsx(bt,{})})),children:[{path:"/login",element:e.jsx(zr,{})}],errorElement:e.jsx(ie,{})}],sa=document.getElementById("kc-dashboard"),aa=wr.createRoot(sa),ia=window.kc_frontend.locale_data?window.kc_frontend.locale_data||{"":{}}:{"":{}};yt(ia,"kivicare-clinic-management-system");const oa=new Jr({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),ir=window.kc_frontend.dashboard_url||"/",or=ir.includes("?");let lr="/";or||(lr=ir.replace(window.location.origin,"").replace(/\/+$/,""));const la=or?yr(wt):_r(wt,{basename:lr});aa.render(e.jsx(Nr.StrictMode,{children:e.jsxs(kr,{client:oa,children:[e.jsx(Qr,{}),e.jsx(Yr,{router:la}),e.jsx(Zr,{initialIsOpen:!1})]})}));
