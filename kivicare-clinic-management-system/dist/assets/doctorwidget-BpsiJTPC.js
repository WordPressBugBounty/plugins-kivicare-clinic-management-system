import{I as V,ad as F,j as e,r,ag as X,_ as n,be as Y}from"./TransitionRoutes-CT0W_aAZ.js";/* empty css                        */V(window.kc_frontend?.locale_data||{},"kivicare-clinic-management-system");function I({doctors:a,settings:t,clinicId:s,currentUserRole:o}){const[l,p]=r.useState(a||[]),[d,P]=r.useState(t||{}),[x,$]=r.useState(s||null),[b,O]=r.useState(""),[w,T]=r.useState(""),[C,R]=r.useState(""),[ee,ie]=r.useState(0),[S,L]=r.useState(!1),[g,q]=r.useState(null),[m,J]=r.useState({service:"",specialty:"",search:""}),[k,f]=r.useState(1),j=d.iq_kivicare_doctor_par_page||5,E=l.filter(i=>{const h=i.name.toLowerCase().includes(m.search.toLowerCase()),_=i.email.toLowerCase().includes(m.search.toLowerCase()),c=!m.specialty||i.speciality.toLowerCase()===m.specialty.toLowerCase(),v=!m.service||Array.isArray(i.services)&&i.services.some(u=>u.toLowerCase()===m.service.toLowerCase());return(h||_)&&c&&v}),A=[...new Set(l.flatMap(i=>i.services))].filter(Boolean),K=[...new Set(l.map(i=>i.speciality).filter(Boolean))],y=Math.ceil(E.length/j),M=(k-1)*j,H=M+j,Q=E.slice(M,H),U=()=>{k>1&&f(k-1)},W=()=>{k<y&&f(k+1)};X.useEffect(()=>{f(1)},[m.search,m.service,m.specialty]);const z=()=>{J({service:b,specialty:w,search:C}),f(1)},G=i=>{if(o&&["administrator","kivicare_doctor","kivicare_receptionist","kivicare_clinic_admin"].includes(o)){Y.fire({title:n("Current user can not view the widget. Please open this page in incognito mode or use another browser","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:n("OK","kivicare-clinic-management-system"),confirmButtonColor:"#3085d6",confirmButtonAriaLabel:n("OK","kivicare-clinic-management-system")});return}q(i),L(!0)},N=()=>{L(!1),q(null),document.body.style.overflow=""};return r.useEffect(()=>{if(S){document.body.style.overflow="hidden";const c=document.getElementById("kivicare-appointment-modal");c&&(c.style.display="block");const v=document.getElementById("kivicare-modal-form-container");if(v&&typeof window.initBookAppointment=="function"){v.innerHTML="";const u=document.createElement("div");u.className="kc-book-appointment-container",g?.id&&u.setAttribute("data-selected-doctor-id",String(g.id)),x&&u.setAttribute("data-selected-clinic-id",String(x)),["data-widget-order","data-is-kivicare-pro","data-payment-gateways","data-user-login","data-current-user-id","data-page-id","data-query-params"].forEach(B=>{const D=v.getAttribute(B);D&&u.setAttribute(B,D)}),v.appendChild(u),setTimeout(()=>{window.initBookAppointment()},100)}}else{const c=document.getElementById("kivicare-appointment-modal");c&&(c.style.display="none");const v=document.getElementById("kivicare-modal-form-container");v&&(v.innerHTML="")}const i=c=>{c.key==="Escape"&&N()},h=c=>{c.target.id==="kivicare-appointment-modal"&&N()},_=c=>{c.target.classList.contains("kivicare-modal-close")&&N()};return document.addEventListener("keydown",i),window.addEventListener("click",h),document.addEventListener("click",_),()=>{document.removeEventListener("keydown",i),window.removeEventListener("click",h),document.removeEventListener("click",_)}},[S,g,x]),l.length===0?e.jsx("div",{className:"kivicare-no-doctors",children:n("No doctors found.","kivicare-clinic-management-system")}):e.jsxs("div",{className:"kivi-widget-container",children:[d.iq_kivicare_doctor_enable_filter==="yes"&&e.jsxs("div",{className:"kivi-filter-container",children:[e.jsx("div",{className:"kivi-filter-item",children:e.jsxs("select",{className:"kivi-select",value:w,onChange:i=>T(i.target.value.toLowerCase()),children:[e.jsx("option",{value:"",children:n("Filter by Speciality","kivicare-clinic-management-system")}),K.map(i=>e.jsx("option",{value:i.toLowerCase(),children:i},i))]})}),A.length>0&&e.jsx("div",{className:"kivi-filter-item",children:e.jsxs("select",{className:"kivi-select",value:b,onChange:i=>O(i.target.value.toLowerCase()),children:[e.jsx("option",{value:"",children:n("Filter by Services","kivicare-clinic-management-system")}),A.map(i=>e.jsx("option",{value:i.toLowerCase(),children:i},i))]})}),e.jsx("div",{className:"kivi-filter-item",children:e.jsx("input",{type:"text",placeholder:n("Search doctor by name, email","kivicare-clinic-management-system"),className:"kivi-input",value:C,onChange:i=>R(i.target.value)})}),e.jsx("div",{className:"kivi-filter-item",children:e.jsx("button",{className:"kivi-button kivi-button-primary",onClick:z,children:n("Filter Doctor","kivicare-clinic-management-system")})})]}),e.jsx("div",{className:"kivi-doctor-list",children:Q.map(i=>e.jsx("div",{"data-name":i.name.toLowerCase(),"data-email":i.email.toLowerCase(),"data-specialty":i.speciality.toLowerCase(),"data-services":i.services.join(",").toLowerCase(),children:Z(i,d,G)},i.id))}),y>1&&e.jsxs("div",{className:"kivicare-pagination",children:[e.jsx("button",{className:"kivicare-pagination-btn prev",onClick:U,disabled:k===1,children:n("Previous","kivicare-clinic-management-system")}),e.jsxs("span",{className:"kivicare-pagination-info",children:[n("Page","kivicare-clinic-management-system")," ",k," ",n("of","kivicare-clinic-management-system")," ",y]}),e.jsx("button",{className:"kivicare-pagination-btn next",onClick:W,disabled:k===y,children:n("Next","kivicare-clinic-management-system")})]})]})}function Z(a,t,s){return e.jsxs("div",{className:"kivi-doctor",children:[t.iq_kivicare_doctor_image==="yes"&&e.jsx("div",{className:"kivi-doctor-image",children:e.jsx("img",{src:a.image,alt:a.name,className:"doctor-image"})}),e.jsxs("div",{className:"kivi-doctor-content",children:[t.iq_kivicare_doctor_name==="yes"&&e.jsxs("div",{className:"doctor-name",children:[t.iq_kivicare_doctor_name_label&&e.jsx("h6",{className:"kivicare-doctor-label",children:t.iq_kivicare_doctor_name_label}),e.jsx("h3",{className:"kivicare-doctor-name",children:a.name})]}),t.iq_kivicare_doctor_speciality==="yes"&&a.speciality&&e.jsxs("div",{className:"doctor-speciality",children:[t.iq_kivicare_doctor_speciality_label&&e.jsx("h6",{className:"kivicare-doctor-label",children:t.iq_kivicare_doctor_speciality_label}),e.jsx("p",{className:"kivicare-doctor-speciality",children:a.speciality})]}),e.jsxs("div",{className:"kivi-doctor-information",children:[t.iq_kivicare_doctor_number==="yes"&&a.number&&e.jsxs("div",{className:"kivi-doctor-information-item doctor-number",children:[e.jsx("div",{className:"kivi-doctor-information-title",children:e.jsx("h6",{className:"info-title kivicare-doctor-label",children:t.iq_kivicare_doctor_number_label})}),e.jsx("div",{className:"kivi-doctor-information-content",children:e.jsx("span",{className:"kivicare-doctor-value",children:a.number})})]}),t.iq_kivicare_doctor_email==="yes"&&a.email&&e.jsxs("div",{className:"kivi-doctor-information-item doctor-email",children:[e.jsx("div",{className:"kivi-doctor-information-title",children:e.jsx("h6",{className:"info-title kivicare-doctor-label",children:t.iq_kivicare_doctor_email_label})}),e.jsx("div",{className:"kivi-doctor-information-content",children:e.jsx("span",{className:"kivicare-doctor-value",children:a.email})})]}),t.iq_kivicare_doctor_qualification==="yes"&&a.qualification&&e.jsxs("div",{className:"kivi-doctor-information-item doctor-qualification",children:[e.jsx("div",{className:"kivi-doctor-information-title",children:e.jsx("h6",{className:"info-title kivicare-doctor-label",children:t.iq_kivicare_doctor_qualification_label})}),e.jsx("div",{className:"kivi-doctor-information-content",children:e.jsx("span",{className:"kivicare-doctor-value",children:a.qualification})})]})]}),t.iq_kivicare_doctor_session==="yes"&&a.sessions.length>0&&e.jsxs("div",{className:"doctor-session",children:[e.jsx("h5",{className:"kivi-administrator-title kivicare-doctor-label",children:t.iq_kivicare_doctor_session_label}),e.jsx("div",{className:"kivi-appointment-information kivicare-session-grid",children:a.sessions.map((o,l)=>e.jsxs("div",{className:"kivi-appointment-item kivicare-session-item",children:[e.jsx("span",{className:"day kivicare-session-day",children:o.day}),o.isMultiple?e.jsx("span",{className:"time kivicare-session-time",children:o.timeSlots.map((p,d)=>e.jsxs("span",{className:"kivicare-session-time-slot",children:[p,d<o.timeSlots.length-1?", ":""]},d))}):e.jsx("span",{className:"time kivicare-session-time",children:o.time})]},l))})]}),e.jsx("div",{className:"kivi-doctor-bookaction",children:e.jsx("button",{className:"kivi-button kivi-button-primary kivicare-book-appointment-btn",onClick:()=>s(a),children:n("Book Appointment","kivicare-clinic-management-system")})})]})]})}jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/kivicare_doctor_list.default",function(a){const t=a.find(".kivicare-doctor-list-container");if(t.length){const s=JSON.parse(t.attr("data-doctors")||"[]"),o=JSON.parse(t.attr("data-settings")||"{}"),l=t.attr("data-clinic-id"),p=t.attr("data-current-user-role")||"";t.find(".kivicare-loading").remove(),F.createRoot(t[0]).render(e.jsx(I,{doctors:s,settings:o,clinicId:l,currentUserRole:p}))}})});document.addEventListener("DOMContentLoaded",function(){typeof elementorFrontend<"u"&&elementorFrontend.isEditMode()||document.querySelectorAll(".kivicare-doctor-list-container").forEach(s=>{if(!s.hasAttribute("data-rendered")){const o=JSON.parse(s.getAttribute("data-doctors")||"[]"),l=JSON.parse(s.getAttribute("data-settings")||"{}"),p=s.getAttribute("data-clinic-id"),d=s.getAttribute("data-current-user-role")||"";s.querySelector(".kivicare-loading")?.remove(),F.createRoot(s).render(e.jsx(I,{doctors:o,settings:l,clinicId:p,currentUserRole:d})),s.setAttribute("data-rendered","true")}})});
